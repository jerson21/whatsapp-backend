(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))i(c);new MutationObserver(c=>{for(const u of c)if(u.type==="childList")for(const f of u.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&i(f)}).observe(document,{childList:!0,subtree:!0});function s(c){const u={};return c.integrity&&(u.integrity=c.integrity),c.referrerPolicy&&(u.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?u.credentials="include":c.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function i(c){if(c.ep)return;c.ep=!0;const u=s(c);fetch(c.href,u)}})();function Rh(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Rf={exports:{}},Gi={};var sx;function Yw(){if(sx)return Gi;sx=1;var t=Symbol.for("react.transitional.element"),a=Symbol.for("react.fragment");function s(i,c,u){var f=null;if(u!==void 0&&(f=""+u),c.key!==void 0&&(f=""+c.key),"key"in c){u={};for(var m in c)m!=="key"&&(u[m]=c[m])}else u=c;return c=u.ref,{$$typeof:t,type:i,key:f,ref:c!==void 0?c:null,props:u}}return Gi.Fragment=a,Gi.jsx=s,Gi.jsxs=s,Gi}var rx;function Pw(){return rx||(rx=1,Rf.exports=Yw()),Rf.exports}var o=Pw(),Df={exports:{}},je={};var ix;function Xw(){if(ix)return je;ix=1;var t=Symbol.for("react.transitional.element"),a=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),c=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),f=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),x=Symbol.for("react.activity"),b=Symbol.iterator;function S(O){return O===null||typeof O!="object"?null:(O=b&&O[b]||O["@@iterator"],typeof O=="function"?O:null)}var _={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,N={};function E(O,P,te){this.props=O,this.context=P,this.refs=N,this.updater=te||_}E.prototype.isReactComponent={},E.prototype.setState=function(O,P){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,P,"setState")},E.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function z(){}z.prototype=E.prototype;function T(O,P,te){this.props=O,this.context=P,this.refs=N,this.updater=te||_}var k=T.prototype=new z;k.constructor=T,C(k,E.prototype),k.isPureReactComponent=!0;var w=Array.isArray;function R(){}var M={H:null,A:null,T:null,S:null},U=Object.prototype.hasOwnProperty;function L(O,P,te){var ae=te.ref;return{$$typeof:t,type:O,key:P,ref:ae!==void 0?ae:null,props:te}}function Q(O,P){return L(O.type,P,O.props)}function G(O){return typeof O=="object"&&O!==null&&O.$$typeof===t}function F(O){var P={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(te){return P[te]})}var se=/\/+/g;function q(O,P){return typeof O=="object"&&O!==null&&O.key!=null?F(""+O.key):P.toString(36)}function I(O){switch(O.status){case"fulfilled":return O.value;case"rejected":throw O.reason;default:switch(typeof O.status=="string"?O.then(R,R):(O.status="pending",O.then(function(P){O.status==="pending"&&(O.status="fulfilled",O.value=P)},function(P){O.status==="pending"&&(O.status="rejected",O.reason=P)})),O.status){case"fulfilled":return O.value;case"rejected":throw O.reason}}throw O}function B(O,P,te,ae,re){var de=typeof O;(de==="undefined"||de==="boolean")&&(O=null);var ue=!1;if(O===null)ue=!0;else switch(de){case"bigint":case"string":case"number":ue=!0;break;case"object":switch(O.$$typeof){case t:case a:ue=!0;break;case y:return ue=O._init,B(ue(O._payload),P,te,ae,re)}}if(ue)return re=re(O),ue=ae===""?"."+q(O,0):ae,w(re)?(te="",ue!=null&&(te=ue.replace(se,"$&/")+"/"),B(re,P,te,"",function(he){return he})):re!=null&&(G(re)&&(re=Q(re,te+(re.key==null||O&&O.key===re.key?"":(""+re.key).replace(se,"$&/")+"/")+ue)),P.push(re)),1;ue=0;var $=ae===""?".":ae+":";if(w(O))for(var ce=0;ce<O.length;ce++)ae=O[ce],de=$+q(ae,ce),ue+=B(ae,P,te,de,re);else if(ce=S(O),typeof ce=="function")for(O=ce.call(O),ce=0;!(ae=O.next()).done;)ae=ae.value,de=$+q(ae,ce++),ue+=B(ae,P,te,de,re);else if(de==="object"){if(typeof O.then=="function")return B(I(O),P,te,ae,re);throw P=String(O),Error("Objects are not valid as a React child (found: "+(P==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":P)+"). If you meant to render a collection of children, use an array instead.")}return ue}function D(O,P,te){if(O==null)return O;var ae=[],re=0;return B(O,ae,"","",function(de){return P.call(te,de,re++)}),ae}function Y(O){if(O._status===-1){var P=O._result;P=P(),P.then(function(te){(O._status===0||O._status===-1)&&(O._status=1,O._result=te)},function(te){(O._status===0||O._status===-1)&&(O._status=2,O._result=te)}),O._status===-1&&(O._status=0,O._result=P)}if(O._status===1)return O._result.default;throw O._result}var H=typeof reportError=="function"?reportError:function(O){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var P=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof O=="object"&&O!==null&&typeof O.message=="string"?String(O.message):String(O),error:O});if(!window.dispatchEvent(P))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",O);return}console.error(O)},W={map:D,forEach:function(O,P,te){D(O,function(){P.apply(this,arguments)},te)},count:function(O){var P=0;return D(O,function(){P++}),P},toArray:function(O){return D(O,function(P){return P})||[]},only:function(O){if(!G(O))throw Error("React.Children.only expected to receive a single React element child.");return O}};return je.Activity=x,je.Children=W,je.Component=E,je.Fragment=s,je.Profiler=c,je.PureComponent=T,je.StrictMode=i,je.Suspense=p,je.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=M,je.__COMPILER_RUNTIME={__proto__:null,c:function(O){return M.H.useMemoCache(O)}},je.cache=function(O){return function(){return O.apply(null,arguments)}},je.cacheSignal=function(){return null},je.cloneElement=function(O,P,te){if(O==null)throw Error("The argument must be a React element, but you passed "+O+".");var ae=C({},O.props),re=O.key;if(P!=null)for(de in P.key!==void 0&&(re=""+P.key),P)!U.call(P,de)||de==="key"||de==="__self"||de==="__source"||de==="ref"&&P.ref===void 0||(ae[de]=P[de]);var de=arguments.length-2;if(de===1)ae.children=te;else if(1<de){for(var ue=Array(de),$=0;$<de;$++)ue[$]=arguments[$+2];ae.children=ue}return L(O.type,re,ae)},je.createContext=function(O){return O={$$typeof:f,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null},O.Provider=O,O.Consumer={$$typeof:u,_context:O},O},je.createElement=function(O,P,te){var ae,re={},de=null;if(P!=null)for(ae in P.key!==void 0&&(de=""+P.key),P)U.call(P,ae)&&ae!=="key"&&ae!=="__self"&&ae!=="__source"&&(re[ae]=P[ae]);var ue=arguments.length-2;if(ue===1)re.children=te;else if(1<ue){for(var $=Array(ue),ce=0;ce<ue;ce++)$[ce]=arguments[ce+2];re.children=$}if(O&&O.defaultProps)for(ae in ue=O.defaultProps,ue)re[ae]===void 0&&(re[ae]=ue[ae]);return L(O,de,re)},je.createRef=function(){return{current:null}},je.forwardRef=function(O){return{$$typeof:m,render:O}},je.isValidElement=G,je.lazy=function(O){return{$$typeof:y,_payload:{_status:-1,_result:O},_init:Y}},je.memo=function(O,P){return{$$typeof:g,type:O,compare:P===void 0?null:P}},je.startTransition=function(O){var P=M.T,te={};M.T=te;try{var ae=O(),re=M.S;re!==null&&re(te,ae),typeof ae=="object"&&ae!==null&&typeof ae.then=="function"&&ae.then(R,H)}catch(de){H(de)}finally{P!==null&&te.types!==null&&(P.types=te.types),M.T=P}},je.unstable_useCacheRefresh=function(){return M.H.useCacheRefresh()},je.use=function(O){return M.H.use(O)},je.useActionState=function(O,P,te){return M.H.useActionState(O,P,te)},je.useCallback=function(O,P){return M.H.useCallback(O,P)},je.useContext=function(O){return M.H.useContext(O)},je.useDebugValue=function(){},je.useDeferredValue=function(O,P){return M.H.useDeferredValue(O,P)},je.useEffect=function(O,P){return M.H.useEffect(O,P)},je.useEffectEvent=function(O){return M.H.useEffectEvent(O)},je.useId=function(){return M.H.useId()},je.useImperativeHandle=function(O,P,te){return M.H.useImperativeHandle(O,P,te)},je.useInsertionEffect=function(O,P){return M.H.useInsertionEffect(O,P)},je.useLayoutEffect=function(O,P){return M.H.useLayoutEffect(O,P)},je.useMemo=function(O,P){return M.H.useMemo(O,P)},je.useOptimistic=function(O,P){return M.H.useOptimistic(O,P)},je.useReducer=function(O,P,te){return M.H.useReducer(O,P,te)},je.useRef=function(O){return M.H.useRef(O)},je.useState=function(O){return M.H.useState(O)},je.useSyncExternalStore=function(O,P,te){return M.H.useSyncExternalStore(O,P,te)},je.useTransition=function(){return M.H.useTransition()},je.version="19.2.3",je}var ox;function yo(){return ox||(ox=1,Df.exports=Xw()),Df.exports}var j=yo();const Mr=Rh(j);var Of={exports:{}},Qi={},Bf={exports:{}},Lf={};var lx;function Iw(){return lx||(lx=1,(function(t){function a(B,D){var Y=B.length;B.push(D);e:for(;0<Y;){var H=Y-1>>>1,W=B[H];if(0<c(W,D))B[H]=D,B[Y]=W,Y=H;else break e}}function s(B){return B.length===0?null:B[0]}function i(B){if(B.length===0)return null;var D=B[0],Y=B.pop();if(Y!==D){B[0]=Y;e:for(var H=0,W=B.length,O=W>>>1;H<O;){var P=2*(H+1)-1,te=B[P],ae=P+1,re=B[ae];if(0>c(te,Y))ae<W&&0>c(re,te)?(B[H]=re,B[ae]=Y,H=ae):(B[H]=te,B[P]=Y,H=P);else if(ae<W&&0>c(re,Y))B[H]=re,B[ae]=Y,H=ae;else break e}}return D}function c(B,D){var Y=B.sortIndex-D.sortIndex;return Y!==0?Y:B.id-D.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;t.unstable_now=function(){return u.now()}}else{var f=Date,m=f.now();t.unstable_now=function(){return f.now()-m}}var p=[],g=[],y=1,x=null,b=3,S=!1,_=!1,C=!1,N=!1,E=typeof setTimeout=="function"?setTimeout:null,z=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;function k(B){for(var D=s(g);D!==null;){if(D.callback===null)i(g);else if(D.startTime<=B)i(g),D.sortIndex=D.expirationTime,a(p,D);else break;D=s(g)}}function w(B){if(C=!1,k(B),!_)if(s(p)!==null)_=!0,R||(R=!0,F());else{var D=s(g);D!==null&&I(w,D.startTime-B)}}var R=!1,M=-1,U=5,L=-1;function Q(){return N?!0:!(t.unstable_now()-L<U)}function G(){if(N=!1,R){var B=t.unstable_now();L=B;var D=!0;try{e:{_=!1,C&&(C=!1,z(M),M=-1),S=!0;var Y=b;try{t:{for(k(B),x=s(p);x!==null&&!(x.expirationTime>B&&Q());){var H=x.callback;if(typeof H=="function"){x.callback=null,b=x.priorityLevel;var W=H(x.expirationTime<=B);if(B=t.unstable_now(),typeof W=="function"){x.callback=W,k(B),D=!0;break t}x===s(p)&&i(p),k(B)}else i(p);x=s(p)}if(x!==null)D=!0;else{var O=s(g);O!==null&&I(w,O.startTime-B),D=!1}}break e}finally{x=null,b=Y,S=!1}D=void 0}}finally{D?F():R=!1}}}var F;if(typeof T=="function")F=function(){T(G)};else if(typeof MessageChannel<"u"){var se=new MessageChannel,q=se.port2;se.port1.onmessage=G,F=function(){q.postMessage(null)}}else F=function(){E(G,0)};function I(B,D){M=E(function(){B(t.unstable_now())},D)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(B){B.callback=null},t.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):U=0<B?Math.floor(1e3/B):5},t.unstable_getCurrentPriorityLevel=function(){return b},t.unstable_next=function(B){switch(b){case 1:case 2:case 3:var D=3;break;default:D=b}var Y=b;b=D;try{return B()}finally{b=Y}},t.unstable_requestPaint=function(){N=!0},t.unstable_runWithPriority=function(B,D){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var Y=b;b=B;try{return D()}finally{b=Y}},t.unstable_scheduleCallback=function(B,D,Y){var H=t.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?H+Y:H):Y=H,B){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=Y+W,B={id:y++,callback:D,priorityLevel:B,startTime:Y,expirationTime:W,sortIndex:-1},Y>H?(B.sortIndex=Y,a(g,B),s(p)===null&&B===s(g)&&(C?(z(M),M=-1):C=!0,I(w,Y-H))):(B.sortIndex=W,a(p,B),_||S||(_=!0,R||(R=!0,F()))),B},t.unstable_shouldYield=Q,t.unstable_wrapCallback=function(B){var D=b;return function(){var Y=b;b=D;try{return B.apply(this,arguments)}finally{b=Y}}}})(Lf)),Lf}var cx;function Gw(){return cx||(cx=1,Bf.exports=Iw()),Bf.exports}var Hf={exports:{}},jt={};var ux;function Qw(){if(ux)return jt;ux=1;var t=yo();function a(p){var g="https://react.dev/errors/"+p;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)g+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+p+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(){}var i={d:{f:s,r:function(){throw Error(a(522))},D:s,C:s,L:s,m:s,X:s,S:s,M:s},p:0,findDOMNode:null},c=Symbol.for("react.portal");function u(p,g,y){var x=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:c,key:x==null?null:""+x,children:p,containerInfo:g,implementation:y}}var f=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(p,g){if(p==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return jt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,jt.createPortal=function(p,g){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(a(299));return u(p,g,null,y)},jt.flushSync=function(p){var g=f.T,y=i.p;try{if(f.T=null,i.p=2,p)return p()}finally{f.T=g,i.p=y,i.d.f()}},jt.preconnect=function(p,g){typeof p=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,i.d.C(p,g))},jt.prefetchDNS=function(p){typeof p=="string"&&i.d.D(p)},jt.preinit=function(p,g){if(typeof p=="string"&&g&&typeof g.as=="string"){var y=g.as,x=m(y,g.crossOrigin),b=typeof g.integrity=="string"?g.integrity:void 0,S=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;y==="style"?i.d.S(p,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:x,integrity:b,fetchPriority:S}):y==="script"&&i.d.X(p,{crossOrigin:x,integrity:b,fetchPriority:S,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},jt.preinitModule=function(p,g){if(typeof p=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var y=m(g.as,g.crossOrigin);i.d.M(p,{crossOrigin:y,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&i.d.M(p)},jt.preload=function(p,g){if(typeof p=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var y=g.as,x=m(y,g.crossOrigin);i.d.L(p,y,{crossOrigin:x,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},jt.preloadModule=function(p,g){if(typeof p=="string")if(g){var y=m(g.as,g.crossOrigin);i.d.m(p,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:y,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else i.d.m(p)},jt.requestFormReset=function(p){i.d.r(p)},jt.unstable_batchedUpdates=function(p,g){return p(g)},jt.useFormState=function(p,g,y){return f.H.useFormState(p,g,y)},jt.useFormStatus=function(){return f.H.useHostTransitionStatus()},jt.version="19.2.3",jt}var dx;function Jy(){if(dx)return Hf.exports;dx=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(a){console.error(a)}}return t(),Hf.exports=Qw(),Hf.exports}var fx;function Zw(){if(fx)return Qi;fx=1;var t=Gw(),a=yo(),s=Jy();function i(e){var n="https://react.dev/errors/"+e;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)n+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function c(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function u(e){var n=e,r=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,(n.flags&4098)!==0&&(r=n.return),e=n.return;while(e)}return n.tag===3?r:null}function f(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function m(e){if(e.tag===31){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function p(e){if(u(e)!==e)throw Error(i(188))}function g(e){var n=e.alternate;if(!n){if(n=u(e),n===null)throw Error(i(188));return n!==e?null:e}for(var r=e,l=n;;){var d=r.return;if(d===null)break;var h=d.alternate;if(h===null){if(l=d.return,l!==null){r=l;continue}break}if(d.child===h.child){for(h=d.child;h;){if(h===r)return p(d),e;if(h===l)return p(d),n;h=h.sibling}throw Error(i(188))}if(r.return!==l.return)r=d,l=h;else{for(var v=!1,A=d.child;A;){if(A===r){v=!0,r=d,l=h;break}if(A===l){v=!0,l=d,r=h;break}A=A.sibling}if(!v){for(A=h.child;A;){if(A===r){v=!0,r=h,l=d;break}if(A===l){v=!0,l=h,r=d;break}A=A.sibling}if(!v)throw Error(i(189))}}if(r.alternate!==l)throw Error(i(190))}if(r.tag!==3)throw Error(i(188));return r.stateNode.current===r?e:n}function y(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e;for(e=e.child;e!==null;){if(n=y(e),n!==null)return n;e=e.sibling}return null}var x=Object.assign,b=Symbol.for("react.element"),S=Symbol.for("react.transitional.element"),_=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),N=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),z=Symbol.for("react.consumer"),T=Symbol.for("react.context"),k=Symbol.for("react.forward_ref"),w=Symbol.for("react.suspense"),R=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),U=Symbol.for("react.lazy"),L=Symbol.for("react.activity"),Q=Symbol.for("react.memo_cache_sentinel"),G=Symbol.iterator;function F(e){return e===null||typeof e!="object"?null:(e=G&&e[G]||e["@@iterator"],typeof e=="function"?e:null)}var se=Symbol.for("react.client.reference");function q(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===se?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case C:return"Fragment";case E:return"Profiler";case N:return"StrictMode";case w:return"Suspense";case R:return"SuspenseList";case L:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case _:return"Portal";case T:return e.displayName||"Context";case z:return(e._context.displayName||"Context")+".Consumer";case k:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case M:return n=e.displayName||null,n!==null?n:q(e.type)||"Memo";case U:n=e._payload,e=e._init;try{return q(e(n))}catch{}}return null}var I=Array.isArray,B=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,D=s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Y={pending:!1,data:null,method:null,action:null},H=[],W=-1;function O(e){return{current:e}}function P(e){0>W||(e.current=H[W],H[W]=null,W--)}function te(e,n){W++,H[W]=e.current,e.current=n}var ae=O(null),re=O(null),de=O(null),ue=O(null);function $(e,n){switch(te(de,n),te(re,e),te(ae,null),n.nodeType){case 9:case 11:e=(e=n.documentElement)&&(e=e.namespaceURI)?Cg(e):0;break;default:if(e=n.tagName,n=n.namespaceURI)n=Cg(n),e=Tg(n,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}P(ae),te(ae,e)}function ce(){P(ae),P(re),P(de)}function he(e){e.memoizedState!==null&&te(ue,e);var n=ae.current,r=Tg(n,e.type);n!==r&&(te(re,e),te(ae,r))}function ve(e){re.current===e&&(P(ae),P(re)),ue.current===e&&(P(ue),Yi._currentValue=Y)}var pe,be;function Se(e){if(pe===void 0)try{throw Error()}catch(r){var n=r.stack.trim().match(/\n( *(at )?)/);pe=n&&n[1]||"",be=-1<r.stack.indexOf(`
    at`)?" (<anonymous>)":-1<r.stack.indexOf("@")?"@unknown:0:0":""}return`
`+pe+e+be}var Ae=!1;function Ee(e,n){if(!e||Ae)return"";Ae=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(n){var le=function(){throw Error()};if(Object.defineProperty(le.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(le,[])}catch(ne){var ee=ne}Reflect.construct(e,[],le)}else{try{le.call()}catch(ne){ee=ne}e.call(le.prototype)}}else{try{throw Error()}catch(ne){ee=ne}(le=e())&&typeof le.catch=="function"&&le.catch(function(){})}}catch(ne){if(ne&&ee&&typeof ne.stack=="string")return[ne.stack,ee.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var d=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");d&&d.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var h=l.DetermineComponentFrameRoot(),v=h[0],A=h[1];if(v&&A){var V=v.split(`
`),J=A.split(`
`);for(d=l=0;l<V.length&&!V[l].includes("DetermineComponentFrameRoot");)l++;for(;d<J.length&&!J[d].includes("DetermineComponentFrameRoot");)d++;if(l===V.length||d===J.length)for(l=V.length-1,d=J.length-1;1<=l&&0<=d&&V[l]!==J[d];)d--;for(;1<=l&&0<=d;l--,d--)if(V[l]!==J[d]){if(l!==1||d!==1)do if(l--,d--,0>d||V[l]!==J[d]){var ie=`
`+V[l].replace(" at new "," at ");return e.displayName&&ie.includes("<anonymous>")&&(ie=ie.replace("<anonymous>",e.displayName)),ie}while(1<=l&&0<=d);break}}}finally{Ae=!1,Error.prepareStackTrace=r}return(r=e?e.displayName||e.name:"")?Se(r):""}function $e(e,n){switch(e.tag){case 26:case 27:case 5:return Se(e.type);case 16:return Se("Lazy");case 13:return e.child!==n&&n!==null?Se("Suspense Fallback"):Se("Suspense");case 19:return Se("SuspenseList");case 0:case 15:return Ee(e.type,!1);case 11:return Ee(e.type.render,!1);case 1:return Ee(e.type,!0);case 31:return Se("Activity");default:return""}}function Re(e){try{var n="",r=null;do n+=$e(e,r),r=e,e=e.return;while(e);return n}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var gt=Object.prototype.hasOwnProperty,ht=t.unstable_scheduleCallback,un=t.unstable_cancelCallback,Sn=t.unstable_shouldYield,_n=t.unstable_requestPaint,at=t.unstable_now,qn=t.unstable_getCurrentPriorityLevel,dn=t.unstable_ImmediatePriority,Wt=t.unstable_UserBlockingPriority,Vn=t.unstable_NormalPriority,fn=t.unstable_LowPriority,Yn=t.unstable_IdlePriority,as=t.log,Jr=t.unstable_setDisableYieldValue,ss=null,Et=null;function En(e){if(typeof as=="function"&&Jr(e),Et&&typeof Et.setStrictMode=="function")try{Et.setStrictMode(ss,e)}catch{}}var Ct=Math.clz32?Math.clz32:vu,yu=Math.log,bu=Math.LN2;function vu(e){return e>>>=0,e===0?32:31-(yu(e)/bu|0)|0}var Us=256,qs=262144,Vs=4194304;function Pn(e){var n=e&42;if(n!==0)return n;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Ys(e,n,r){var l=e.pendingLanes;if(l===0)return 0;var d=0,h=e.suspendedLanes,v=e.pingedLanes;e=e.warmLanes;var A=l&134217727;return A!==0?(l=A&~h,l!==0?d=Pn(l):(v&=A,v!==0?d=Pn(v):r||(r=A&~e,r!==0&&(d=Pn(r))))):(A=l&~h,A!==0?d=Pn(A):v!==0?d=Pn(v):r||(r=l&~e,r!==0&&(d=Pn(r)))),d===0?0:n!==0&&n!==d&&(n&h)===0&&(h=d&-d,r=n&-n,h>=r||h===32&&(r&4194048)!==0)?n:d}function rs(e,n){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&n)===0}function wu(e,n){switch(e){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ro(){var e=Vs;return Vs<<=1,(Vs&62914560)===0&&(Vs=4194304),e}function ei(e){for(var n=[],r=0;31>r;r++)n.push(e);return n}function is(e,n){e.pendingLanes|=n,n!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function ju(e,n,r,l,d,h){var v=e.pendingLanes;e.pendingLanes=r,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=r,e.entangledLanes&=r,e.errorRecoveryDisabledLanes&=r,e.shellSuspendCounter=0;var A=e.entanglements,V=e.expirationTimes,J=e.hiddenUpdates;for(r=v&~r;0<r;){var ie=31-Ct(r),le=1<<ie;A[ie]=0,V[ie]=-1;var ee=J[ie];if(ee!==null)for(J[ie]=null,ie=0;ie<ee.length;ie++){var ne=ee[ie];ne!==null&&(ne.lane&=-536870913)}r&=~le}l!==0&&Do(e,l,0),h!==0&&d===0&&e.tag!==0&&(e.suspendedLanes|=h&~(v&~n))}function Do(e,n,r){e.pendingLanes|=n,e.suspendedLanes&=~n;var l=31-Ct(n);e.entangledLanes|=n,e.entanglements[l]=e.entanglements[l]|1073741824|r&261930}function Oo(e,n){var r=e.entangledLanes|=n;for(e=e.entanglements;r;){var l=31-Ct(r),d=1<<l;d&n|e[l]&n&&(e[l]|=n),r&=~d}}function Bo(e,n){var r=n&-n;return r=(r&42)!==0?1:ti(r),(r&(e.suspendedLanes|n))!==0?0:r}function ti(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function ni(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Lo(){var e=D.p;return e!==0?e:(e=window.event,e===void 0?32:Wg(e.type))}function Ho(e,n){var r=D.p;try{return D.p=e,n()}finally{D.p=r}}var Cn=Math.random().toString(36).slice(2),dt="__reactFiber$"+Cn,wt="__reactProps$"+Cn,Xn="__reactContainer$"+Cn,Ps="__reactEvents$"+Cn,$o="__reactListeners$"+Cn,Nu="__reactHandles$"+Cn,Uo="__reactResources$"+Cn,os="__reactMarker$"+Cn;function ai(e){delete e[dt],delete e[wt],delete e[Ps],delete e[$o],delete e[Nu]}function ja(e){var n=e[dt];if(n)return n;for(var r=e.parentNode;r;){if(n=r[Xn]||r[dt]){if(r=n.alternate,n.child!==null||r!==null&&r.child!==null)for(e=Og(e);e!==null;){if(r=e[dt])return r;e=Og(e)}return n}e=r,r=e.parentNode}return null}function Na(e){if(e=e[dt]||e[Xn]){var n=e.tag;if(n===5||n===6||n===13||n===31||n===26||n===27||n===3)return e}return null}function Sa(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e.stateNode;throw Error(i(33))}function _a(e){var n=e[Uo];return n||(n=e[Uo]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function st(e){e[os]=!0}var qo=new Set,Vo={};function In(e,n){Ea(e,n),Ea(e+"Capture",n)}function Ea(e,n){for(Vo[e]=n,e=0;e<n.length;e++)qo.add(n[e])}var Su=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),si={},Yo={};function _u(e){return gt.call(Yo,e)?!0:gt.call(si,e)?!1:Su.test(e)?Yo[e]=!0:(si[e]=!0,!1)}function Xs(e,n,r){if(_u(n))if(r===null)e.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":e.removeAttribute(n);return;case"boolean":var l=n.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){e.removeAttribute(n);return}}e.setAttribute(n,""+r)}}function Is(e,n,r){if(r===null)e.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttribute(n,""+r)}}function hn(e,n,r,l){if(l===null)e.removeAttribute(r);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(r);return}e.setAttributeNS(n,r,""+l)}}function At(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Po(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function Eu(e,n,r){var l=Object.getOwnPropertyDescriptor(e.constructor.prototype,n);if(!e.hasOwnProperty(n)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var d=l.get,h=l.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return d.call(this)},set:function(v){r=""+v,h.call(this,v)}}),Object.defineProperty(e,n,{enumerable:l.enumerable}),{getValue:function(){return r},setValue:function(v){r=""+v},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function Gs(e){if(!e._valueTracker){var n=Po(e)?"checked":"value";e._valueTracker=Eu(e,n,""+e[n])}}function Xo(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var r=n.getValue(),l="";return e&&(l=Po(e)?e.checked?"true":"false":e.value),e=l,e!==r?(n.setValue(e),!0):!1}function ls(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Cu=/[\n"\\]/g;function kt(e){return e.replace(Cu,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function cs(e,n,r,l,d,h,v,A){e.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?e.type=v:e.removeAttribute("type"),n!=null?v==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+At(n)):e.value!==""+At(n)&&(e.value=""+At(n)):v!=="submit"&&v!=="reset"||e.removeAttribute("value"),n!=null?ri(e,v,At(n)):r!=null?ri(e,v,At(r)):l!=null&&e.removeAttribute("value"),d==null&&h!=null&&(e.defaultChecked=!!h),d!=null&&(e.checked=d&&typeof d!="function"&&typeof d!="symbol"),A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?e.name=""+At(A):e.removeAttribute("name")}function Io(e,n,r,l,d,h,v,A){if(h!=null&&typeof h!="function"&&typeof h!="symbol"&&typeof h!="boolean"&&(e.type=h),n!=null||r!=null){if(!(h!=="submit"&&h!=="reset"||n!=null)){Gs(e);return}r=r!=null?""+At(r):"",n=n!=null?""+At(n):r,A||n===e.value||(e.value=n),e.defaultValue=n}l=l??d,l=typeof l!="function"&&typeof l!="symbol"&&!!l,e.checked=A?e.checked:!!l,e.defaultChecked=!!l,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(e.name=v),Gs(e)}function ri(e,n,r){n==="number"&&ls(e.ownerDocument)===e||e.defaultValue===""+r||(e.defaultValue=""+r)}function Gn(e,n,r,l){if(e=e.options,n){n={};for(var d=0;d<r.length;d++)n["$"+r[d]]=!0;for(r=0;r<e.length;r++)d=n.hasOwnProperty("$"+e[r].value),e[r].selected!==d&&(e[r].selected=d),d&&l&&(e[r].defaultSelected=!0)}else{for(r=""+At(r),n=null,d=0;d<e.length;d++){if(e[d].value===r){e[d].selected=!0,l&&(e[d].defaultSelected=!0);return}n!==null||e[d].disabled||(n=e[d])}n!==null&&(n.selected=!0)}}function jm(e,n,r){if(n!=null&&(n=""+At(n),n!==e.value&&(e.value=n),r==null)){e.defaultValue!==n&&(e.defaultValue=n);return}e.defaultValue=r!=null?""+At(r):""}function Nm(e,n,r,l){if(n==null){if(l!=null){if(r!=null)throw Error(i(92));if(I(l)){if(1<l.length)throw Error(i(93));l=l[0]}r=l}r==null&&(r=""),n=r}r=At(n),e.defaultValue=r,l=e.textContent,l===r&&l!==""&&l!==null&&(e.value=l),Gs(e)}function Qs(e,n){if(n){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=n;return}}e.textContent=n}var Hv=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Sm(e,n,r){var l=n.indexOf("--")===0;r==null||typeof r=="boolean"||r===""?l?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="":l?e.setProperty(n,r):typeof r!="number"||r===0||Hv.has(n)?n==="float"?e.cssFloat=r:e[n]=(""+r).trim():e[n]=r+"px"}function _m(e,n,r){if(n!=null&&typeof n!="object")throw Error(i(62));if(e=e.style,r!=null){for(var l in r)!r.hasOwnProperty(l)||n!=null&&n.hasOwnProperty(l)||(l.indexOf("--")===0?e.setProperty(l,""):l==="float"?e.cssFloat="":e[l]="");for(var d in n)l=n[d],n.hasOwnProperty(d)&&r[d]!==l&&Sm(e,d,l)}else for(var h in n)n.hasOwnProperty(h)&&Sm(e,h,n[h])}function Tu(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var $v=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Uv=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Go(e){return Uv.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Qn(){}var Mu=null;function Au(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Zs=null,Fs=null;function Em(e){var n=Na(e);if(n&&(e=n.stateNode)){var r=e[wt]||null;e:switch(e=n.stateNode,n.type){case"input":if(cs(e,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name),n=r.name,r.type==="radio"&&n!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll('input[name="'+kt(""+n)+'"][type="radio"]'),n=0;n<r.length;n++){var l=r[n];if(l!==e&&l.form===e.form){var d=l[wt]||null;if(!d)throw Error(i(90));cs(l,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name)}}for(n=0;n<r.length;n++)l=r[n],l.form===e.form&&Xo(l)}break e;case"textarea":jm(e,r.value,r.defaultValue);break e;case"select":n=r.value,n!=null&&Gn(e,!!r.multiple,n,!1)}}}var ku=!1;function Cm(e,n,r){if(ku)return e(n,r);ku=!0;try{var l=e(n);return l}finally{if(ku=!1,(Zs!==null||Fs!==null)&&(Dl(),Zs&&(n=Zs,e=Fs,Fs=Zs=null,Em(n),e)))for(n=0;n<e.length;n++)Em(e[n])}}function ii(e,n){var r=e.stateNode;if(r===null)return null;var l=r[wt]||null;if(l===null)return null;r=l[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(i(231,n,typeof r));return r}var Zn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),zu=!1;if(Zn)try{var oi={};Object.defineProperty(oi,"passive",{get:function(){zu=!0}}),window.addEventListener("test",oi,oi),window.removeEventListener("test",oi,oi)}catch{zu=!1}var Ca=null,Ru=null,Qo=null;function Tm(){if(Qo)return Qo;var e,n=Ru,r=n.length,l,d="value"in Ca?Ca.value:Ca.textContent,h=d.length;for(e=0;e<r&&n[e]===d[e];e++);var v=r-e;for(l=1;l<=v&&n[r-l]===d[h-l];l++);return Qo=d.slice(e,1<l?1-l:void 0)}function Zo(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function Fo(){return!0}function Mm(){return!1}function zt(e){function n(r,l,d,h,v){this._reactName=r,this._targetInst=d,this.type=l,this.nativeEvent=h,this.target=v,this.currentTarget=null;for(var A in e)e.hasOwnProperty(A)&&(r=e[A],this[A]=r?r(h):h[A]);return this.isDefaultPrevented=(h.defaultPrevented!=null?h.defaultPrevented:h.returnValue===!1)?Fo:Mm,this.isPropagationStopped=Mm,this}return x(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Fo)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Fo)},persist:function(){},isPersistent:Fo}),n}var us={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Wo=zt(us),li=x({},us,{view:0,detail:0}),qv=zt(li),Du,Ou,ci,Ko=x({},li,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Lu,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ci&&(ci&&e.type==="mousemove"?(Du=e.screenX-ci.screenX,Ou=e.screenY-ci.screenY):Ou=Du=0,ci=e),Du)},movementY:function(e){return"movementY"in e?e.movementY:Ou}}),Am=zt(Ko),Vv=x({},Ko,{dataTransfer:0}),Yv=zt(Vv),Pv=x({},li,{relatedTarget:0}),Bu=zt(Pv),Xv=x({},us,{animationName:0,elapsedTime:0,pseudoElement:0}),Iv=zt(Xv),Gv=x({},us,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Qv=zt(Gv),Zv=x({},us,{data:0}),km=zt(Zv),Fv={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Wv={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Kv={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Jv(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=Kv[e])?!!n[e]:!1}function Lu(){return Jv}var e2=x({},li,{key:function(e){if(e.key){var n=Fv[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=Zo(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Wv[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Lu,charCode:function(e){return e.type==="keypress"?Zo(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Zo(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),t2=zt(e2),n2=x({},Ko,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),zm=zt(n2),a2=x({},li,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Lu}),s2=zt(a2),r2=x({},us,{propertyName:0,elapsedTime:0,pseudoElement:0}),i2=zt(r2),o2=x({},Ko,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),l2=zt(o2),c2=x({},us,{newState:0,oldState:0}),u2=zt(c2),d2=[9,13,27,32],Hu=Zn&&"CompositionEvent"in window,ui=null;Zn&&"documentMode"in document&&(ui=document.documentMode);var f2=Zn&&"TextEvent"in window&&!ui,Rm=Zn&&(!Hu||ui&&8<ui&&11>=ui),Dm=" ",Om=!1;function Bm(e,n){switch(e){case"keyup":return d2.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Lm(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ws=!1;function h2(e,n){switch(e){case"compositionend":return Lm(n);case"keypress":return n.which!==32?null:(Om=!0,Dm);case"textInput":return e=n.data,e===Dm&&Om?null:e;default:return null}}function m2(e,n){if(Ws)return e==="compositionend"||!Hu&&Bm(e,n)?(e=Tm(),Qo=Ru=Ca=null,Ws=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return Rm&&n.locale!=="ko"?null:n.data;default:return null}}var p2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hm(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!p2[e.type]:n==="textarea"}function $m(e,n,r,l){Zs?Fs?Fs.push(l):Fs=[l]:Zs=l,n=ql(n,"onChange"),0<n.length&&(r=new Wo("onChange","change",null,r,l),e.push({event:r,listeners:n}))}var di=null,fi=null;function g2(e){wg(e,0)}function Jo(e){var n=Sa(e);if(Xo(n))return e}function Um(e,n){if(e==="change")return n}var qm=!1;if(Zn){var $u;if(Zn){var Uu="oninput"in document;if(!Uu){var Vm=document.createElement("div");Vm.setAttribute("oninput","return;"),Uu=typeof Vm.oninput=="function"}$u=Uu}else $u=!1;qm=$u&&(!document.documentMode||9<document.documentMode)}function Ym(){di&&(di.detachEvent("onpropertychange",Pm),fi=di=null)}function Pm(e){if(e.propertyName==="value"&&Jo(fi)){var n=[];$m(n,fi,e,Au(e)),Cm(g2,n)}}function x2(e,n,r){e==="focusin"?(Ym(),di=n,fi=r,di.attachEvent("onpropertychange",Pm)):e==="focusout"&&Ym()}function y2(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Jo(fi)}function b2(e,n){if(e==="click")return Jo(n)}function v2(e,n){if(e==="input"||e==="change")return Jo(n)}function w2(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var $t=typeof Object.is=="function"?Object.is:w2;function hi(e,n){if($t(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var r=Object.keys(e),l=Object.keys(n);if(r.length!==l.length)return!1;for(l=0;l<r.length;l++){var d=r[l];if(!gt.call(n,d)||!$t(e[d],n[d]))return!1}return!0}function Xm(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Im(e,n){var r=Xm(e);e=0;for(var l;r;){if(r.nodeType===3){if(l=e+r.textContent.length,e<=n&&l>=n)return{node:r,offset:n-e};e=l}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Xm(r)}}function Gm(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?Gm(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function Qm(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var n=ls(e.document);n instanceof e.HTMLIFrameElement;){try{var r=typeof n.contentWindow.location.href=="string"}catch{r=!1}if(r)e=n.contentWindow;else break;n=ls(e.document)}return n}function qu(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}var j2=Zn&&"documentMode"in document&&11>=document.documentMode,Ks=null,Vu=null,mi=null,Yu=!1;function Zm(e,n,r){var l=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Yu||Ks==null||Ks!==ls(l)||(l=Ks,"selectionStart"in l&&qu(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),mi&&hi(mi,l)||(mi=l,l=ql(Vu,"onSelect"),0<l.length&&(n=new Wo("onSelect","select",null,n,r),e.push({event:n,listeners:l}),n.target=Ks)))}function ds(e,n){var r={};return r[e.toLowerCase()]=n.toLowerCase(),r["Webkit"+e]="webkit"+n,r["Moz"+e]="moz"+n,r}var Js={animationend:ds("Animation","AnimationEnd"),animationiteration:ds("Animation","AnimationIteration"),animationstart:ds("Animation","AnimationStart"),transitionrun:ds("Transition","TransitionRun"),transitionstart:ds("Transition","TransitionStart"),transitioncancel:ds("Transition","TransitionCancel"),transitionend:ds("Transition","TransitionEnd")},Pu={},Fm={};Zn&&(Fm=document.createElement("div").style,"AnimationEvent"in window||(delete Js.animationend.animation,delete Js.animationiteration.animation,delete Js.animationstart.animation),"TransitionEvent"in window||delete Js.transitionend.transition);function fs(e){if(Pu[e])return Pu[e];if(!Js[e])return e;var n=Js[e],r;for(r in n)if(n.hasOwnProperty(r)&&r in Fm)return Pu[e]=n[r];return e}var Wm=fs("animationend"),Km=fs("animationiteration"),Jm=fs("animationstart"),N2=fs("transitionrun"),S2=fs("transitionstart"),_2=fs("transitioncancel"),ep=fs("transitionend"),tp=new Map,Xu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Xu.push("scrollEnd");function mn(e,n){tp.set(e,n),In(n,[e])}var el=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Kt=[],er=0,Iu=0;function tl(){for(var e=er,n=Iu=er=0;n<e;){var r=Kt[n];Kt[n++]=null;var l=Kt[n];Kt[n++]=null;var d=Kt[n];Kt[n++]=null;var h=Kt[n];if(Kt[n++]=null,l!==null&&d!==null){var v=l.pending;v===null?d.next=d:(d.next=v.next,v.next=d),l.pending=d}h!==0&&np(r,d,h)}}function nl(e,n,r,l){Kt[er++]=e,Kt[er++]=n,Kt[er++]=r,Kt[er++]=l,Iu|=l,e.lanes|=l,e=e.alternate,e!==null&&(e.lanes|=l)}function Gu(e,n,r,l){return nl(e,n,r,l),al(e)}function hs(e,n){return nl(e,null,null,n),al(e)}function np(e,n,r){e.lanes|=r;var l=e.alternate;l!==null&&(l.lanes|=r);for(var d=!1,h=e.return;h!==null;)h.childLanes|=r,l=h.alternate,l!==null&&(l.childLanes|=r),h.tag===22&&(e=h.stateNode,e===null||e._visibility&1||(d=!0)),e=h,h=h.return;return e.tag===3?(h=e.stateNode,d&&n!==null&&(d=31-Ct(r),e=h.hiddenUpdates,l=e[d],l===null?e[d]=[n]:l.push(n),n.lane=r|536870912),h):null}function al(e){if(50<Bi)throw Bi=0,nf=null,Error(i(185));for(var n=e.return;n!==null;)e=n,n=e.return;return e.tag===3?e.stateNode:null}var tr={};function E2(e,n,r,l){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ut(e,n,r,l){return new E2(e,n,r,l)}function Qu(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Fn(e,n){var r=e.alternate;return r===null?(r=Ut(e.tag,n,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=n,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&65011712,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,n=e.dependencies,r.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r.refCleanup=e.refCleanup,r}function ap(e,n){e.flags&=65011714;var r=e.alternate;return r===null?(e.childLanes=0,e.lanes=n,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=r.childLanes,e.lanes=r.lanes,e.child=r.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=r.memoizedProps,e.memoizedState=r.memoizedState,e.updateQueue=r.updateQueue,e.type=r.type,n=r.dependencies,e.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),e}function sl(e,n,r,l,d,h){var v=0;if(l=e,typeof e=="function")Qu(e)&&(v=1);else if(typeof e=="string")v=kw(e,r,ae.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case L:return e=Ut(31,r,n,d),e.elementType=L,e.lanes=h,e;case C:return ms(r.children,d,h,n);case N:v=8,d|=24;break;case E:return e=Ut(12,r,n,d|2),e.elementType=E,e.lanes=h,e;case w:return e=Ut(13,r,n,d),e.elementType=w,e.lanes=h,e;case R:return e=Ut(19,r,n,d),e.elementType=R,e.lanes=h,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case T:v=10;break e;case z:v=9;break e;case k:v=11;break e;case M:v=14;break e;case U:v=16,l=null;break e}v=29,r=Error(i(130,e===null?"null":typeof e,"")),l=null}return n=Ut(v,r,n,d),n.elementType=e,n.type=l,n.lanes=h,n}function ms(e,n,r,l){return e=Ut(7,e,l,n),e.lanes=r,e}function Zu(e,n,r){return e=Ut(6,e,null,n),e.lanes=r,e}function sp(e){var n=Ut(18,null,null,0);return n.stateNode=e,n}function Fu(e,n,r){return n=Ut(4,e.children!==null?e.children:[],e.key,n),n.lanes=r,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}var rp=new WeakMap;function Jt(e,n){if(typeof e=="object"&&e!==null){var r=rp.get(e);return r!==void 0?r:(n={value:e,source:n,stack:Re(n)},rp.set(e,n),n)}return{value:e,source:n,stack:Re(n)}}var nr=[],ar=0,rl=null,pi=0,en=[],tn=0,Ta=null,Tn=1,Mn="";function Wn(e,n){nr[ar++]=pi,nr[ar++]=rl,rl=e,pi=n}function ip(e,n,r){en[tn++]=Tn,en[tn++]=Mn,en[tn++]=Ta,Ta=e;var l=Tn;e=Mn;var d=32-Ct(l)-1;l&=~(1<<d),r+=1;var h=32-Ct(n)+d;if(30<h){var v=d-d%5;h=(l&(1<<v)-1).toString(32),l>>=v,d-=v,Tn=1<<32-Ct(n)+d|r<<d|l,Mn=h+e}else Tn=1<<h|r<<d|l,Mn=e}function Wu(e){e.return!==null&&(Wn(e,1),ip(e,1,0))}function Ku(e){for(;e===rl;)rl=nr[--ar],nr[ar]=null,pi=nr[--ar],nr[ar]=null;for(;e===Ta;)Ta=en[--tn],en[tn]=null,Mn=en[--tn],en[tn]=null,Tn=en[--tn],en[tn]=null}function op(e,n){en[tn++]=Tn,en[tn++]=Mn,en[tn++]=Ta,Tn=n.id,Mn=n.overflow,Ta=e}var xt=null,Ge=null,De=!1,Ma=null,nn=!1,Ju=Error(i(519));function Aa(e){var n=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw gi(Jt(n,e)),Ju}function lp(e){var n=e.stateNode,r=e.type,l=e.memoizedProps;switch(n[dt]=e,n[wt]=l,r){case"dialog":Me("cancel",n),Me("close",n);break;case"iframe":case"object":case"embed":Me("load",n);break;case"video":case"audio":for(r=0;r<Hi.length;r++)Me(Hi[r],n);break;case"source":Me("error",n);break;case"img":case"image":case"link":Me("error",n),Me("load",n);break;case"details":Me("toggle",n);break;case"input":Me("invalid",n),Io(n,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":Me("invalid",n);break;case"textarea":Me("invalid",n),Nm(n,l.value,l.defaultValue,l.children)}r=l.children,typeof r!="string"&&typeof r!="number"&&typeof r!="bigint"||n.textContent===""+r||l.suppressHydrationWarning===!0||_g(n.textContent,r)?(l.popover!=null&&(Me("beforetoggle",n),Me("toggle",n)),l.onScroll!=null&&Me("scroll",n),l.onScrollEnd!=null&&Me("scrollend",n),l.onClick!=null&&(n.onclick=Qn),n=!0):n=!1,n||Aa(e,!0)}function cp(e){for(xt=e.return;xt;)switch(xt.tag){case 5:case 31:case 13:nn=!1;return;case 27:case 3:nn=!0;return;default:xt=xt.return}}function sr(e){if(e!==xt)return!1;if(!De)return cp(e),De=!0,!1;var n=e.tag,r;if((r=n!==3&&n!==27)&&((r=n===5)&&(r=e.type,r=!(r!=="form"&&r!=="button")||yf(e.type,e.memoizedProps)),r=!r),r&&Ge&&Aa(e),cp(e),n===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(i(317));Ge=Dg(e)}else if(n===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(i(317));Ge=Dg(e)}else n===27?(n=Ge,Pa(e.type)?(e=Nf,Nf=null,Ge=e):Ge=n):Ge=xt?sn(e.stateNode.nextSibling):null;return!0}function ps(){Ge=xt=null,De=!1}function ed(){var e=Ma;return e!==null&&(Bt===null?Bt=e:Bt.push.apply(Bt,e),Ma=null),e}function gi(e){Ma===null?Ma=[e]:Ma.push(e)}var td=O(null),gs=null,Kn=null;function ka(e,n,r){te(td,n._currentValue),n._currentValue=r}function Jn(e){e._currentValue=td.current,P(td)}function nd(e,n,r){for(;e!==null;){var l=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,l!==null&&(l.childLanes|=n)):l!==null&&(l.childLanes&n)!==n&&(l.childLanes|=n),e===r)break;e=e.return}}function ad(e,n,r,l){var d=e.child;for(d!==null&&(d.return=e);d!==null;){var h=d.dependencies;if(h!==null){var v=d.child;h=h.firstContext;e:for(;h!==null;){var A=h;h=d;for(var V=0;V<n.length;V++)if(A.context===n[V]){h.lanes|=r,A=h.alternate,A!==null&&(A.lanes|=r),nd(h.return,r,e),l||(v=null);break e}h=A.next}}else if(d.tag===18){if(v=d.return,v===null)throw Error(i(341));v.lanes|=r,h=v.alternate,h!==null&&(h.lanes|=r),nd(v,r,e),v=null}else v=d.child;if(v!==null)v.return=d;else for(v=d;v!==null;){if(v===e){v=null;break}if(d=v.sibling,d!==null){d.return=v.return,v=d;break}v=v.return}d=v}}function rr(e,n,r,l){e=null;for(var d=n,h=!1;d!==null;){if(!h){if((d.flags&524288)!==0)h=!0;else if((d.flags&262144)!==0)break}if(d.tag===10){var v=d.alternate;if(v===null)throw Error(i(387));if(v=v.memoizedProps,v!==null){var A=d.type;$t(d.pendingProps.value,v.value)||(e!==null?e.push(A):e=[A])}}else if(d===ue.current){if(v=d.alternate,v===null)throw Error(i(387));v.memoizedState.memoizedState!==d.memoizedState.memoizedState&&(e!==null?e.push(Yi):e=[Yi])}d=d.return}e!==null&&ad(n,e,r,l),n.flags|=262144}function il(e){for(e=e.firstContext;e!==null;){if(!$t(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function xs(e){gs=e,Kn=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function yt(e){return up(gs,e)}function ol(e,n){return gs===null&&xs(e),up(e,n)}function up(e,n){var r=n._currentValue;if(n={context:n,memoizedValue:r,next:null},Kn===null){if(e===null)throw Error(i(308));Kn=n,e.dependencies={lanes:0,firstContext:n},e.flags|=524288}else Kn=Kn.next=n;return r}var C2=typeof AbortController<"u"?AbortController:function(){var e=[],n=this.signal={aborted:!1,addEventListener:function(r,l){e.push(l)}};this.abort=function(){n.aborted=!0,e.forEach(function(r){return r()})}},T2=t.unstable_scheduleCallback,M2=t.unstable_NormalPriority,rt={$$typeof:T,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function sd(){return{controller:new C2,data:new Map,refCount:0}}function xi(e){e.refCount--,e.refCount===0&&T2(M2,function(){e.controller.abort()})}var yi=null,rd=0,ir=0,or=null;function A2(e,n){if(yi===null){var r=yi=[];rd=0,ir=cf(),or={status:"pending",value:void 0,then:function(l){r.push(l)}}}return rd++,n.then(dp,dp),n}function dp(){if(--rd===0&&yi!==null){or!==null&&(or.status="fulfilled");var e=yi;yi=null,ir=0,or=null;for(var n=0;n<e.length;n++)(0,e[n])()}}function k2(e,n){var r=[],l={status:"pending",value:null,reason:null,then:function(d){r.push(d)}};return e.then(function(){l.status="fulfilled",l.value=n;for(var d=0;d<r.length;d++)(0,r[d])(n)},function(d){for(l.status="rejected",l.reason=d,d=0;d<r.length;d++)(0,r[d])(void 0)}),l}var fp=B.S;B.S=function(e,n){Z0=at(),typeof n=="object"&&n!==null&&typeof n.then=="function"&&A2(e,n),fp!==null&&fp(e,n)};var ys=O(null);function id(){var e=ys.current;return e!==null?e:Ie.pooledCache}function ll(e,n){n===null?te(ys,ys.current):te(ys,n.pool)}function hp(){var e=id();return e===null?null:{parent:rt._currentValue,pool:e}}var lr=Error(i(460)),od=Error(i(474)),cl=Error(i(542)),ul={then:function(){}};function mp(e){return e=e.status,e==="fulfilled"||e==="rejected"}function pp(e,n,r){switch(r=e[r],r===void 0?e.push(n):r!==n&&(n.then(Qn,Qn),n=r),n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,xp(e),e;default:if(typeof n.status=="string")n.then(Qn,Qn);else{if(e=Ie,e!==null&&100<e.shellSuspendCounter)throw Error(i(482));e=n,e.status="pending",e.then(function(l){if(n.status==="pending"){var d=n;d.status="fulfilled",d.value=l}},function(l){if(n.status==="pending"){var d=n;d.status="rejected",d.reason=l}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,xp(e),e}throw vs=n,lr}}function bs(e){try{var n=e._init;return n(e._payload)}catch(r){throw r!==null&&typeof r=="object"&&typeof r.then=="function"?(vs=r,lr):r}}var vs=null;function gp(){if(vs===null)throw Error(i(459));var e=vs;return vs=null,e}function xp(e){if(e===lr||e===cl)throw Error(i(483))}var cr=null,bi=0;function dl(e){var n=bi;return bi+=1,cr===null&&(cr=[]),pp(cr,e,n)}function vi(e,n){n=n.props.ref,e.ref=n!==void 0?n:null}function fl(e,n){throw n.$$typeof===b?Error(i(525)):(e=Object.prototype.toString.call(n),Error(i(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)))}function yp(e){function n(Z,X){if(e){var K=Z.deletions;K===null?(Z.deletions=[X],Z.flags|=16):K.push(X)}}function r(Z,X){if(!e)return null;for(;X!==null;)n(Z,X),X=X.sibling;return null}function l(Z){for(var X=new Map;Z!==null;)Z.key!==null?X.set(Z.key,Z):X.set(Z.index,Z),Z=Z.sibling;return X}function d(Z,X){return Z=Fn(Z,X),Z.index=0,Z.sibling=null,Z}function h(Z,X,K){return Z.index=K,e?(K=Z.alternate,K!==null?(K=K.index,K<X?(Z.flags|=67108866,X):K):(Z.flags|=67108866,X)):(Z.flags|=1048576,X)}function v(Z){return e&&Z.alternate===null&&(Z.flags|=67108866),Z}function A(Z,X,K,oe){return X===null||X.tag!==6?(X=Zu(K,Z.mode,oe),X.return=Z,X):(X=d(X,K),X.return=Z,X)}function V(Z,X,K,oe){var ye=K.type;return ye===C?ie(Z,X,K.props.children,oe,K.key):X!==null&&(X.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===U&&bs(ye)===X.type)?(X=d(X,K.props),vi(X,K),X.return=Z,X):(X=sl(K.type,K.key,K.props,null,Z.mode,oe),vi(X,K),X.return=Z,X)}function J(Z,X,K,oe){return X===null||X.tag!==4||X.stateNode.containerInfo!==K.containerInfo||X.stateNode.implementation!==K.implementation?(X=Fu(K,Z.mode,oe),X.return=Z,X):(X=d(X,K.children||[]),X.return=Z,X)}function ie(Z,X,K,oe,ye){return X===null||X.tag!==7?(X=ms(K,Z.mode,oe,ye),X.return=Z,X):(X=d(X,K),X.return=Z,X)}function le(Z,X,K){if(typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint")return X=Zu(""+X,Z.mode,K),X.return=Z,X;if(typeof X=="object"&&X!==null){switch(X.$$typeof){case S:return K=sl(X.type,X.key,X.props,null,Z.mode,K),vi(K,X),K.return=Z,K;case _:return X=Fu(X,Z.mode,K),X.return=Z,X;case U:return X=bs(X),le(Z,X,K)}if(I(X)||F(X))return X=ms(X,Z.mode,K,null),X.return=Z,X;if(typeof X.then=="function")return le(Z,dl(X),K);if(X.$$typeof===T)return le(Z,ol(Z,X),K);fl(Z,X)}return null}function ee(Z,X,K,oe){var ye=X!==null?X.key:null;if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return ye!==null?null:A(Z,X,""+K,oe);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case S:return K.key===ye?V(Z,X,K,oe):null;case _:return K.key===ye?J(Z,X,K,oe):null;case U:return K=bs(K),ee(Z,X,K,oe)}if(I(K)||F(K))return ye!==null?null:ie(Z,X,K,oe,null);if(typeof K.then=="function")return ee(Z,X,dl(K),oe);if(K.$$typeof===T)return ee(Z,X,ol(Z,K),oe);fl(Z,K)}return null}function ne(Z,X,K,oe,ye){if(typeof oe=="string"&&oe!==""||typeof oe=="number"||typeof oe=="bigint")return Z=Z.get(K)||null,A(X,Z,""+oe,ye);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case S:return Z=Z.get(oe.key===null?K:oe.key)||null,V(X,Z,oe,ye);case _:return Z=Z.get(oe.key===null?K:oe.key)||null,J(X,Z,oe,ye);case U:return oe=bs(oe),ne(Z,X,K,oe,ye)}if(I(oe)||F(oe))return Z=Z.get(K)||null,ie(X,Z,oe,ye,null);if(typeof oe.then=="function")return ne(Z,X,K,dl(oe),ye);if(oe.$$typeof===T)return ne(Z,X,K,ol(X,oe),ye);fl(X,oe)}return null}function fe(Z,X,K,oe){for(var ye=null,Be=null,me=X,_e=X=0,ze=null;me!==null&&_e<K.length;_e++){me.index>_e?(ze=me,me=null):ze=me.sibling;var Le=ee(Z,me,K[_e],oe);if(Le===null){me===null&&(me=ze);break}e&&me&&Le.alternate===null&&n(Z,me),X=h(Le,X,_e),Be===null?ye=Le:Be.sibling=Le,Be=Le,me=ze}if(_e===K.length)return r(Z,me),De&&Wn(Z,_e),ye;if(me===null){for(;_e<K.length;_e++)me=le(Z,K[_e],oe),me!==null&&(X=h(me,X,_e),Be===null?ye=me:Be.sibling=me,Be=me);return De&&Wn(Z,_e),ye}for(me=l(me);_e<K.length;_e++)ze=ne(me,Z,_e,K[_e],oe),ze!==null&&(e&&ze.alternate!==null&&me.delete(ze.key===null?_e:ze.key),X=h(ze,X,_e),Be===null?ye=ze:Be.sibling=ze,Be=ze);return e&&me.forEach(function(Za){return n(Z,Za)}),De&&Wn(Z,_e),ye}function we(Z,X,K,oe){if(K==null)throw Error(i(151));for(var ye=null,Be=null,me=X,_e=X=0,ze=null,Le=K.next();me!==null&&!Le.done;_e++,Le=K.next()){me.index>_e?(ze=me,me=null):ze=me.sibling;var Za=ee(Z,me,Le.value,oe);if(Za===null){me===null&&(me=ze);break}e&&me&&Za.alternate===null&&n(Z,me),X=h(Za,X,_e),Be===null?ye=Za:Be.sibling=Za,Be=Za,me=ze}if(Le.done)return r(Z,me),De&&Wn(Z,_e),ye;if(me===null){for(;!Le.done;_e++,Le=K.next())Le=le(Z,Le.value,oe),Le!==null&&(X=h(Le,X,_e),Be===null?ye=Le:Be.sibling=Le,Be=Le);return De&&Wn(Z,_e),ye}for(me=l(me);!Le.done;_e++,Le=K.next())Le=ne(me,Z,_e,Le.value,oe),Le!==null&&(e&&Le.alternate!==null&&me.delete(Le.key===null?_e:Le.key),X=h(Le,X,_e),Be===null?ye=Le:Be.sibling=Le,Be=Le);return e&&me.forEach(function(Vw){return n(Z,Vw)}),De&&Wn(Z,_e),ye}function Xe(Z,X,K,oe){if(typeof K=="object"&&K!==null&&K.type===C&&K.key===null&&(K=K.props.children),typeof K=="object"&&K!==null){switch(K.$$typeof){case S:e:{for(var ye=K.key;X!==null;){if(X.key===ye){if(ye=K.type,ye===C){if(X.tag===7){r(Z,X.sibling),oe=d(X,K.props.children),oe.return=Z,Z=oe;break e}}else if(X.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===U&&bs(ye)===X.type){r(Z,X.sibling),oe=d(X,K.props),vi(oe,K),oe.return=Z,Z=oe;break e}r(Z,X);break}else n(Z,X);X=X.sibling}K.type===C?(oe=ms(K.props.children,Z.mode,oe,K.key),oe.return=Z,Z=oe):(oe=sl(K.type,K.key,K.props,null,Z.mode,oe),vi(oe,K),oe.return=Z,Z=oe)}return v(Z);case _:e:{for(ye=K.key;X!==null;){if(X.key===ye)if(X.tag===4&&X.stateNode.containerInfo===K.containerInfo&&X.stateNode.implementation===K.implementation){r(Z,X.sibling),oe=d(X,K.children||[]),oe.return=Z,Z=oe;break e}else{r(Z,X);break}else n(Z,X);X=X.sibling}oe=Fu(K,Z.mode,oe),oe.return=Z,Z=oe}return v(Z);case U:return K=bs(K),Xe(Z,X,K,oe)}if(I(K))return fe(Z,X,K,oe);if(F(K)){if(ye=F(K),typeof ye!="function")throw Error(i(150));return K=ye.call(K),we(Z,X,K,oe)}if(typeof K.then=="function")return Xe(Z,X,dl(K),oe);if(K.$$typeof===T)return Xe(Z,X,ol(Z,K),oe);fl(Z,K)}return typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint"?(K=""+K,X!==null&&X.tag===6?(r(Z,X.sibling),oe=d(X,K),oe.return=Z,Z=oe):(r(Z,X),oe=Zu(K,Z.mode,oe),oe.return=Z,Z=oe),v(Z)):r(Z,X)}return function(Z,X,K,oe){try{bi=0;var ye=Xe(Z,X,K,oe);return cr=null,ye}catch(me){if(me===lr||me===cl)throw me;var Be=Ut(29,me,null,Z.mode);return Be.lanes=oe,Be.return=Z,Be}}}var ws=yp(!0),bp=yp(!1),za=!1;function ld(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function cd(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Ra(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Da(e,n,r){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,(He&2)!==0){var d=l.pending;return d===null?n.next=n:(n.next=d.next,d.next=n),l.pending=n,n=al(e),np(e,null,r),n}return nl(e,l,n,r),al(e)}function wi(e,n,r){if(n=n.updateQueue,n!==null&&(n=n.shared,(r&4194048)!==0)){var l=n.lanes;l&=e.pendingLanes,r|=l,n.lanes=r,Oo(e,r)}}function ud(e,n){var r=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,r===l)){var d=null,h=null;if(r=r.firstBaseUpdate,r!==null){do{var v={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};h===null?d=h=v:h=h.next=v,r=r.next}while(r!==null);h===null?d=h=n:h=h.next=n}else d=h=n;r={baseState:l.baseState,firstBaseUpdate:d,lastBaseUpdate:h,shared:l.shared,callbacks:l.callbacks},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=n:e.next=n,r.lastBaseUpdate=n}var dd=!1;function ji(){if(dd){var e=or;if(e!==null)throw e}}function Ni(e,n,r,l){dd=!1;var d=e.updateQueue;za=!1;var h=d.firstBaseUpdate,v=d.lastBaseUpdate,A=d.shared.pending;if(A!==null){d.shared.pending=null;var V=A,J=V.next;V.next=null,v===null?h=J:v.next=J,v=V;var ie=e.alternate;ie!==null&&(ie=ie.updateQueue,A=ie.lastBaseUpdate,A!==v&&(A===null?ie.firstBaseUpdate=J:A.next=J,ie.lastBaseUpdate=V))}if(h!==null){var le=d.baseState;v=0,ie=J=V=null,A=h;do{var ee=A.lane&-536870913,ne=ee!==A.lane;if(ne?(ke&ee)===ee:(l&ee)===ee){ee!==0&&ee===ir&&(dd=!0),ie!==null&&(ie=ie.next={lane:0,tag:A.tag,payload:A.payload,callback:null,next:null});e:{var fe=e,we=A;ee=n;var Xe=r;switch(we.tag){case 1:if(fe=we.payload,typeof fe=="function"){le=fe.call(Xe,le,ee);break e}le=fe;break e;case 3:fe.flags=fe.flags&-65537|128;case 0:if(fe=we.payload,ee=typeof fe=="function"?fe.call(Xe,le,ee):fe,ee==null)break e;le=x({},le,ee);break e;case 2:za=!0}}ee=A.callback,ee!==null&&(e.flags|=64,ne&&(e.flags|=8192),ne=d.callbacks,ne===null?d.callbacks=[ee]:ne.push(ee))}else ne={lane:ee,tag:A.tag,payload:A.payload,callback:A.callback,next:null},ie===null?(J=ie=ne,V=le):ie=ie.next=ne,v|=ee;if(A=A.next,A===null){if(A=d.shared.pending,A===null)break;ne=A,A=ne.next,ne.next=null,d.lastBaseUpdate=ne,d.shared.pending=null}}while(!0);ie===null&&(V=le),d.baseState=V,d.firstBaseUpdate=J,d.lastBaseUpdate=ie,h===null&&(d.shared.lanes=0),$a|=v,e.lanes=v,e.memoizedState=le}}function vp(e,n){if(typeof e!="function")throw Error(i(191,e));e.call(n)}function wp(e,n){var r=e.callbacks;if(r!==null)for(e.callbacks=null,e=0;e<r.length;e++)vp(r[e],n)}var ur=O(null),hl=O(0);function jp(e,n){e=la,te(hl,e),te(ur,n),la=e|n.baseLanes}function fd(){te(hl,la),te(ur,ur.current)}function hd(){la=hl.current,P(ur),P(hl)}var qt=O(null),an=null;function Oa(e){var n=e.alternate;te(tt,tt.current&1),te(qt,e),an===null&&(n===null||ur.current!==null||n.memoizedState!==null)&&(an=e)}function md(e){te(tt,tt.current),te(qt,e),an===null&&(an=e)}function Np(e){e.tag===22?(te(tt,tt.current),te(qt,e),an===null&&(an=e)):Ba()}function Ba(){te(tt,tt.current),te(qt,qt.current)}function Vt(e){P(qt),an===e&&(an=null),P(tt)}var tt=O(0);function ml(e){for(var n=e;n!==null;){if(n.tag===13){var r=n.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||wf(r)||jf(r)))return n}else if(n.tag===19&&(n.memoizedProps.revealOrder==="forwards"||n.memoizedProps.revealOrder==="backwards"||n.memoizedProps.revealOrder==="unstable_legacy-backwards"||n.memoizedProps.revealOrder==="together")){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var ea=0,Ne=null,Ye=null,it=null,pl=!1,dr=!1,js=!1,gl=0,Si=0,fr=null,z2=0;function Je(){throw Error(i(321))}function pd(e,n){if(n===null)return!1;for(var r=0;r<n.length&&r<e.length;r++)if(!$t(e[r],n[r]))return!1;return!0}function gd(e,n,r,l,d,h){return ea=h,Ne=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,B.H=e===null||e.memoizedState===null?i0:kd,js=!1,h=r(l,d),js=!1,dr&&(h=_p(n,r,l,d)),Sp(e),h}function Sp(e){B.H=Ci;var n=Ye!==null&&Ye.next!==null;if(ea=0,it=Ye=Ne=null,pl=!1,Si=0,fr=null,n)throw Error(i(300));e===null||ot||(e=e.dependencies,e!==null&&il(e)&&(ot=!0))}function _p(e,n,r,l){Ne=e;var d=0;do{if(dr&&(fr=null),Si=0,dr=!1,25<=d)throw Error(i(301));if(d+=1,it=Ye=null,e.updateQueue!=null){var h=e.updateQueue;h.lastEffect=null,h.events=null,h.stores=null,h.memoCache!=null&&(h.memoCache.index=0)}B.H=o0,h=n(r,l)}while(dr);return h}function R2(){var e=B.H,n=e.useState()[0];return n=typeof n.then=="function"?_i(n):n,e=e.useState()[0],(Ye!==null?Ye.memoizedState:null)!==e&&(Ne.flags|=1024),n}function xd(){var e=gl!==0;return gl=0,e}function yd(e,n,r){n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~r}function bd(e){if(pl){for(e=e.memoizedState;e!==null;){var n=e.queue;n!==null&&(n.pending=null),e=e.next}pl=!1}ea=0,it=Ye=Ne=null,dr=!1,Si=gl=0,fr=null}function Tt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return it===null?Ne.memoizedState=it=e:it=it.next=e,it}function nt(){if(Ye===null){var e=Ne.alternate;e=e!==null?e.memoizedState:null}else e=Ye.next;var n=it===null?Ne.memoizedState:it.next;if(n!==null)it=n,Ye=e;else{if(e===null)throw Ne.alternate===null?Error(i(467)):Error(i(310));Ye=e,e={memoizedState:Ye.memoizedState,baseState:Ye.baseState,baseQueue:Ye.baseQueue,queue:Ye.queue,next:null},it===null?Ne.memoizedState=it=e:it=it.next=e}return it}function xl(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function _i(e){var n=Si;return Si+=1,fr===null&&(fr=[]),e=pp(fr,e,n),n=Ne,(it===null?n.memoizedState:it.next)===null&&(n=n.alternate,B.H=n===null||n.memoizedState===null?i0:kd),e}function yl(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return _i(e);if(e.$$typeof===T)return yt(e)}throw Error(i(438,String(e)))}function vd(e){var n=null,r=Ne.updateQueue;if(r!==null&&(n=r.memoCache),n==null){var l=Ne.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(n={data:l.data.map(function(d){return d.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),r===null&&(r=xl(),Ne.updateQueue=r),r.memoCache=n,r=n.data[n.index],r===void 0)for(r=n.data[n.index]=Array(e),l=0;l<e;l++)r[l]=Q;return n.index++,r}function ta(e,n){return typeof n=="function"?n(e):n}function bl(e){var n=nt();return wd(n,Ye,e)}function wd(e,n,r){var l=e.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=r;var d=e.baseQueue,h=l.pending;if(h!==null){if(d!==null){var v=d.next;d.next=h.next,h.next=v}n.baseQueue=d=h,l.pending=null}if(h=e.baseState,d===null)e.memoizedState=h;else{n=d.next;var A=v=null,V=null,J=n,ie=!1;do{var le=J.lane&-536870913;if(le!==J.lane?(ke&le)===le:(ea&le)===le){var ee=J.revertLane;if(ee===0)V!==null&&(V=V.next={lane:0,revertLane:0,gesture:null,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null}),le===ir&&(ie=!0);else if((ea&ee)===ee){J=J.next,ee===ir&&(ie=!0);continue}else le={lane:0,revertLane:J.revertLane,gesture:null,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},V===null?(A=V=le,v=h):V=V.next=le,Ne.lanes|=ee,$a|=ee;le=J.action,js&&r(h,le),h=J.hasEagerState?J.eagerState:r(h,le)}else ee={lane:le,revertLane:J.revertLane,gesture:J.gesture,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},V===null?(A=V=ee,v=h):V=V.next=ee,Ne.lanes|=le,$a|=le;J=J.next}while(J!==null&&J!==n);if(V===null?v=h:V.next=A,!$t(h,e.memoizedState)&&(ot=!0,ie&&(r=or,r!==null)))throw r;e.memoizedState=h,e.baseState=v,e.baseQueue=V,l.lastRenderedState=h}return d===null&&(l.lanes=0),[e.memoizedState,l.dispatch]}function jd(e){var n=nt(),r=n.queue;if(r===null)throw Error(i(311));r.lastRenderedReducer=e;var l=r.dispatch,d=r.pending,h=n.memoizedState;if(d!==null){r.pending=null;var v=d=d.next;do h=e(h,v.action),v=v.next;while(v!==d);$t(h,n.memoizedState)||(ot=!0),n.memoizedState=h,n.baseQueue===null&&(n.baseState=h),r.lastRenderedState=h}return[h,l]}function Ep(e,n,r){var l=Ne,d=nt(),h=De;if(h){if(r===void 0)throw Error(i(407));r=r()}else r=n();var v=!$t((Ye||d).memoizedState,r);if(v&&(d.memoizedState=r,ot=!0),d=d.queue,_d(Mp.bind(null,l,d,e),[e]),d.getSnapshot!==n||v||it!==null&&it.memoizedState.tag&1){if(l.flags|=2048,hr(9,{destroy:void 0},Tp.bind(null,l,d,r,n),null),Ie===null)throw Error(i(349));h||(ea&127)!==0||Cp(l,n,r)}return r}function Cp(e,n,r){e.flags|=16384,e={getSnapshot:n,value:r},n=Ne.updateQueue,n===null?(n=xl(),Ne.updateQueue=n,n.stores=[e]):(r=n.stores,r===null?n.stores=[e]:r.push(e))}function Tp(e,n,r,l){n.value=r,n.getSnapshot=l,Ap(n)&&kp(e)}function Mp(e,n,r){return r(function(){Ap(n)&&kp(e)})}function Ap(e){var n=e.getSnapshot;e=e.value;try{var r=n();return!$t(e,r)}catch{return!0}}function kp(e){var n=hs(e,2);n!==null&&Lt(n,e,2)}function Nd(e){var n=Tt();if(typeof e=="function"){var r=e;if(e=r(),js){En(!0);try{r()}finally{En(!1)}}}return n.memoizedState=n.baseState=e,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ta,lastRenderedState:e},n}function zp(e,n,r,l){return e.baseState=r,wd(e,Ye,typeof l=="function"?l:ta)}function D2(e,n,r,l,d){if(jl(e))throw Error(i(485));if(e=n.action,e!==null){var h={payload:d,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){h.listeners.push(v)}};B.T!==null?r(!0):h.isTransition=!1,l(h),r=n.pending,r===null?(h.next=n.pending=h,Rp(n,h)):(h.next=r.next,n.pending=r.next=h)}}function Rp(e,n){var r=n.action,l=n.payload,d=e.state;if(n.isTransition){var h=B.T,v={};B.T=v;try{var A=r(d,l),V=B.S;V!==null&&V(v,A),Dp(e,n,A)}catch(J){Sd(e,n,J)}finally{h!==null&&v.types!==null&&(h.types=v.types),B.T=h}}else try{h=r(d,l),Dp(e,n,h)}catch(J){Sd(e,n,J)}}function Dp(e,n,r){r!==null&&typeof r=="object"&&typeof r.then=="function"?r.then(function(l){Op(e,n,l)},function(l){return Sd(e,n,l)}):Op(e,n,r)}function Op(e,n,r){n.status="fulfilled",n.value=r,Bp(n),e.state=r,n=e.pending,n!==null&&(r=n.next,r===n?e.pending=null:(r=r.next,n.next=r,Rp(e,r)))}function Sd(e,n,r){var l=e.pending;if(e.pending=null,l!==null){l=l.next;do n.status="rejected",n.reason=r,Bp(n),n=n.next;while(n!==l)}e.action=null}function Bp(e){e=e.listeners;for(var n=0;n<e.length;n++)(0,e[n])()}function Lp(e,n){return n}function Hp(e,n){if(De){var r=Ie.formState;if(r!==null){e:{var l=Ne;if(De){if(Ge){t:{for(var d=Ge,h=nn;d.nodeType!==8;){if(!h){d=null;break t}if(d=sn(d.nextSibling),d===null){d=null;break t}}h=d.data,d=h==="F!"||h==="F"?d:null}if(d){Ge=sn(d.nextSibling),l=d.data==="F!";break e}}Aa(l)}l=!1}l&&(n=r[0])}}return r=Tt(),r.memoizedState=r.baseState=n,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Lp,lastRenderedState:n},r.queue=l,r=a0.bind(null,Ne,l),l.dispatch=r,l=Nd(!1),h=Ad.bind(null,Ne,!1,l.queue),l=Tt(),d={state:n,dispatch:null,action:e,pending:null},l.queue=d,r=D2.bind(null,Ne,d,h,r),d.dispatch=r,l.memoizedState=e,[n,r,!1]}function $p(e){var n=nt();return Up(n,Ye,e)}function Up(e,n,r){if(n=wd(e,n,Lp)[0],e=bl(ta)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var l=_i(n)}catch(v){throw v===lr?cl:v}else l=n;n=nt();var d=n.queue,h=d.dispatch;return r!==n.memoizedState&&(Ne.flags|=2048,hr(9,{destroy:void 0},O2.bind(null,d,r),null)),[l,h,e]}function O2(e,n){e.action=n}function qp(e){var n=nt(),r=Ye;if(r!==null)return Up(n,r,e);nt(),n=n.memoizedState,r=nt();var l=r.queue.dispatch;return r.memoizedState=e,[n,l,!1]}function hr(e,n,r,l){return e={tag:e,create:r,deps:l,inst:n,next:null},n=Ne.updateQueue,n===null&&(n=xl(),Ne.updateQueue=n),r=n.lastEffect,r===null?n.lastEffect=e.next=e:(l=r.next,r.next=e,e.next=l,n.lastEffect=e),e}function Vp(){return nt().memoizedState}function vl(e,n,r,l){var d=Tt();Ne.flags|=e,d.memoizedState=hr(1|n,{destroy:void 0},r,l===void 0?null:l)}function wl(e,n,r,l){var d=nt();l=l===void 0?null:l;var h=d.memoizedState.inst;Ye!==null&&l!==null&&pd(l,Ye.memoizedState.deps)?d.memoizedState=hr(n,h,r,l):(Ne.flags|=e,d.memoizedState=hr(1|n,h,r,l))}function Yp(e,n){vl(8390656,8,e,n)}function _d(e,n){wl(2048,8,e,n)}function B2(e){Ne.flags|=4;var n=Ne.updateQueue;if(n===null)n=xl(),Ne.updateQueue=n,n.events=[e];else{var r=n.events;r===null?n.events=[e]:r.push(e)}}function Pp(e){var n=nt().memoizedState;return B2({ref:n,nextImpl:e}),function(){if((He&2)!==0)throw Error(i(440));return n.impl.apply(void 0,arguments)}}function Xp(e,n){return wl(4,2,e,n)}function Ip(e,n){return wl(4,4,e,n)}function Gp(e,n){if(typeof n=="function"){e=e();var r=n(e);return function(){typeof r=="function"?r():n(null)}}if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function Qp(e,n,r){r=r!=null?r.concat([e]):null,wl(4,4,Gp.bind(null,n,e),r)}function Ed(){}function Zp(e,n){var r=nt();n=n===void 0?null:n;var l=r.memoizedState;return n!==null&&pd(n,l[1])?l[0]:(r.memoizedState=[e,n],e)}function Fp(e,n){var r=nt();n=n===void 0?null:n;var l=r.memoizedState;if(n!==null&&pd(n,l[1]))return l[0];if(l=e(),js){En(!0);try{e()}finally{En(!1)}}return r.memoizedState=[l,n],l}function Cd(e,n,r){return r===void 0||(ea&1073741824)!==0&&(ke&261930)===0?e.memoizedState=n:(e.memoizedState=r,e=W0(),Ne.lanes|=e,$a|=e,r)}function Wp(e,n,r,l){return $t(r,n)?r:ur.current!==null?(e=Cd(e,r,l),$t(e,n)||(ot=!0),e):(ea&42)===0||(ea&1073741824)!==0&&(ke&261930)===0?(ot=!0,e.memoizedState=r):(e=W0(),Ne.lanes|=e,$a|=e,n)}function Kp(e,n,r,l,d){var h=D.p;D.p=h!==0&&8>h?h:8;var v=B.T,A={};B.T=A,Ad(e,!1,n,r);try{var V=d(),J=B.S;if(J!==null&&J(A,V),V!==null&&typeof V=="object"&&typeof V.then=="function"){var ie=k2(V,l);Ei(e,n,ie,Xt(e))}else Ei(e,n,l,Xt(e))}catch(le){Ei(e,n,{then:function(){},status:"rejected",reason:le},Xt())}finally{D.p=h,v!==null&&A.types!==null&&(v.types=A.types),B.T=v}}function L2(){}function Td(e,n,r,l){if(e.tag!==5)throw Error(i(476));var d=Jp(e).queue;Kp(e,d,n,Y,r===null?L2:function(){return e0(e),r(l)})}function Jp(e){var n=e.memoizedState;if(n!==null)return n;n={memoizedState:Y,baseState:Y,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ta,lastRenderedState:Y},next:null};var r={};return n.next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ta,lastRenderedState:r},next:null},e.memoizedState=n,e=e.alternate,e!==null&&(e.memoizedState=n),n}function e0(e){var n=Jp(e);n.next===null&&(n=e.alternate.memoizedState),Ei(e,n.next.queue,{},Xt())}function Md(){return yt(Yi)}function t0(){return nt().memoizedState}function n0(){return nt().memoizedState}function H2(e){for(var n=e.return;n!==null;){switch(n.tag){case 24:case 3:var r=Xt();e=Ra(r);var l=Da(n,e,r);l!==null&&(Lt(l,n,r),wi(l,n,r)),n={cache:sd()},e.payload=n;return}n=n.return}}function $2(e,n,r){var l=Xt();r={lane:l,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},jl(e)?s0(n,r):(r=Gu(e,n,r,l),r!==null&&(Lt(r,e,l),r0(r,n,l)))}function a0(e,n,r){var l=Xt();Ei(e,n,r,l)}function Ei(e,n,r,l){var d={lane:l,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null};if(jl(e))s0(n,d);else{var h=e.alternate;if(e.lanes===0&&(h===null||h.lanes===0)&&(h=n.lastRenderedReducer,h!==null))try{var v=n.lastRenderedState,A=h(v,r);if(d.hasEagerState=!0,d.eagerState=A,$t(A,v))return nl(e,n,d,0),Ie===null&&tl(),!1}catch{}if(r=Gu(e,n,d,l),r!==null)return Lt(r,e,l),r0(r,n,l),!0}return!1}function Ad(e,n,r,l){if(l={lane:2,revertLane:cf(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},jl(e)){if(n)throw Error(i(479))}else n=Gu(e,r,l,2),n!==null&&Lt(n,e,2)}function jl(e){var n=e.alternate;return e===Ne||n!==null&&n===Ne}function s0(e,n){dr=pl=!0;var r=e.pending;r===null?n.next=n:(n.next=r.next,r.next=n),e.pending=n}function r0(e,n,r){if((r&4194048)!==0){var l=n.lanes;l&=e.pendingLanes,r|=l,n.lanes=r,Oo(e,r)}}var Ci={readContext:yt,use:yl,useCallback:Je,useContext:Je,useEffect:Je,useImperativeHandle:Je,useLayoutEffect:Je,useInsertionEffect:Je,useMemo:Je,useReducer:Je,useRef:Je,useState:Je,useDebugValue:Je,useDeferredValue:Je,useTransition:Je,useSyncExternalStore:Je,useId:Je,useHostTransitionStatus:Je,useFormState:Je,useActionState:Je,useOptimistic:Je,useMemoCache:Je,useCacheRefresh:Je};Ci.useEffectEvent=Je;var i0={readContext:yt,use:yl,useCallback:function(e,n){return Tt().memoizedState=[e,n===void 0?null:n],e},useContext:yt,useEffect:Yp,useImperativeHandle:function(e,n,r){r=r!=null?r.concat([e]):null,vl(4194308,4,Gp.bind(null,n,e),r)},useLayoutEffect:function(e,n){return vl(4194308,4,e,n)},useInsertionEffect:function(e,n){vl(4,2,e,n)},useMemo:function(e,n){var r=Tt();n=n===void 0?null:n;var l=e();if(js){En(!0);try{e()}finally{En(!1)}}return r.memoizedState=[l,n],l},useReducer:function(e,n,r){var l=Tt();if(r!==void 0){var d=r(n);if(js){En(!0);try{r(n)}finally{En(!1)}}}else d=n;return l.memoizedState=l.baseState=d,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:d},l.queue=e,e=e.dispatch=$2.bind(null,Ne,e),[l.memoizedState,e]},useRef:function(e){var n=Tt();return e={current:e},n.memoizedState=e},useState:function(e){e=Nd(e);var n=e.queue,r=a0.bind(null,Ne,n);return n.dispatch=r,[e.memoizedState,r]},useDebugValue:Ed,useDeferredValue:function(e,n){var r=Tt();return Cd(r,e,n)},useTransition:function(){var e=Nd(!1);return e=Kp.bind(null,Ne,e.queue,!0,!1),Tt().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,n,r){var l=Ne,d=Tt();if(De){if(r===void 0)throw Error(i(407));r=r()}else{if(r=n(),Ie===null)throw Error(i(349));(ke&127)!==0||Cp(l,n,r)}d.memoizedState=r;var h={value:r,getSnapshot:n};return d.queue=h,Yp(Mp.bind(null,l,h,e),[e]),l.flags|=2048,hr(9,{destroy:void 0},Tp.bind(null,l,h,r,n),null),r},useId:function(){var e=Tt(),n=Ie.identifierPrefix;if(De){var r=Mn,l=Tn;r=(l&~(1<<32-Ct(l)-1)).toString(32)+r,n="_"+n+"R_"+r,r=gl++,0<r&&(n+="H"+r.toString(32)),n+="_"}else r=z2++,n="_"+n+"r_"+r.toString(32)+"_";return e.memoizedState=n},useHostTransitionStatus:Md,useFormState:Hp,useActionState:Hp,useOptimistic:function(e){var n=Tt();n.memoizedState=n.baseState=e;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=r,n=Ad.bind(null,Ne,!0,r),r.dispatch=n,[e,n]},useMemoCache:vd,useCacheRefresh:function(){return Tt().memoizedState=H2.bind(null,Ne)},useEffectEvent:function(e){var n=Tt(),r={impl:e};return n.memoizedState=r,function(){if((He&2)!==0)throw Error(i(440));return r.impl.apply(void 0,arguments)}}},kd={readContext:yt,use:yl,useCallback:Zp,useContext:yt,useEffect:_d,useImperativeHandle:Qp,useInsertionEffect:Xp,useLayoutEffect:Ip,useMemo:Fp,useReducer:bl,useRef:Vp,useState:function(){return bl(ta)},useDebugValue:Ed,useDeferredValue:function(e,n){var r=nt();return Wp(r,Ye.memoizedState,e,n)},useTransition:function(){var e=bl(ta)[0],n=nt().memoizedState;return[typeof e=="boolean"?e:_i(e),n]},useSyncExternalStore:Ep,useId:t0,useHostTransitionStatus:Md,useFormState:$p,useActionState:$p,useOptimistic:function(e,n){var r=nt();return zp(r,Ye,e,n)},useMemoCache:vd,useCacheRefresh:n0};kd.useEffectEvent=Pp;var o0={readContext:yt,use:yl,useCallback:Zp,useContext:yt,useEffect:_d,useImperativeHandle:Qp,useInsertionEffect:Xp,useLayoutEffect:Ip,useMemo:Fp,useReducer:jd,useRef:Vp,useState:function(){return jd(ta)},useDebugValue:Ed,useDeferredValue:function(e,n){var r=nt();return Ye===null?Cd(r,e,n):Wp(r,Ye.memoizedState,e,n)},useTransition:function(){var e=jd(ta)[0],n=nt().memoizedState;return[typeof e=="boolean"?e:_i(e),n]},useSyncExternalStore:Ep,useId:t0,useHostTransitionStatus:Md,useFormState:qp,useActionState:qp,useOptimistic:function(e,n){var r=nt();return Ye!==null?zp(r,Ye,e,n):(r.baseState=e,[e,r.queue.dispatch])},useMemoCache:vd,useCacheRefresh:n0};o0.useEffectEvent=Pp;function zd(e,n,r,l){n=e.memoizedState,r=r(l,n),r=r==null?n:x({},n,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Rd={enqueueSetState:function(e,n,r){e=e._reactInternals;var l=Xt(),d=Ra(l);d.payload=n,r!=null&&(d.callback=r),n=Da(e,d,l),n!==null&&(Lt(n,e,l),wi(n,e,l))},enqueueReplaceState:function(e,n,r){e=e._reactInternals;var l=Xt(),d=Ra(l);d.tag=1,d.payload=n,r!=null&&(d.callback=r),n=Da(e,d,l),n!==null&&(Lt(n,e,l),wi(n,e,l))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var r=Xt(),l=Ra(r);l.tag=2,n!=null&&(l.callback=n),n=Da(e,l,r),n!==null&&(Lt(n,e,r),wi(n,e,r))}};function l0(e,n,r,l,d,h,v){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,h,v):n.prototype&&n.prototype.isPureReactComponent?!hi(r,l)||!hi(d,h):!0}function c0(e,n,r,l){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(r,l),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(r,l),n.state!==e&&Rd.enqueueReplaceState(n,n.state,null)}function Ns(e,n){var r=n;if("ref"in n){r={};for(var l in n)l!=="ref"&&(r[l]=n[l])}if(e=e.defaultProps){r===n&&(r=x({},r));for(var d in e)r[d]===void 0&&(r[d]=e[d])}return r}function u0(e){el(e)}function d0(e){console.error(e)}function f0(e){el(e)}function Nl(e,n){try{var r=e.onUncaughtError;r(n.value,{componentStack:n.stack})}catch(l){setTimeout(function(){throw l})}}function h0(e,n,r){try{var l=e.onCaughtError;l(r.value,{componentStack:r.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(d){setTimeout(function(){throw d})}}function Dd(e,n,r){return r=Ra(r),r.tag=3,r.payload={element:null},r.callback=function(){Nl(e,n)},r}function m0(e){return e=Ra(e),e.tag=3,e}function p0(e,n,r,l){var d=r.type.getDerivedStateFromError;if(typeof d=="function"){var h=l.value;e.payload=function(){return d(h)},e.callback=function(){h0(n,r,l)}}var v=r.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(e.callback=function(){h0(n,r,l),typeof d!="function"&&(Ua===null?Ua=new Set([this]):Ua.add(this));var A=l.stack;this.componentDidCatch(l.value,{componentStack:A!==null?A:""})})}function U2(e,n,r,l,d){if(r.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(n=r.alternate,n!==null&&rr(n,r,d,!0),r=qt.current,r!==null){switch(r.tag){case 31:case 13:return an===null?Ol():r.alternate===null&&et===0&&(et=3),r.flags&=-257,r.flags|=65536,r.lanes=d,l===ul?r.flags|=16384:(n=r.updateQueue,n===null?r.updateQueue=new Set([l]):n.add(l),rf(e,l,d)),!1;case 22:return r.flags|=65536,l===ul?r.flags|=16384:(n=r.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([l])},r.updateQueue=n):(r=n.retryQueue,r===null?n.retryQueue=new Set([l]):r.add(l)),rf(e,l,d)),!1}throw Error(i(435,r.tag))}return rf(e,l,d),Ol(),!1}if(De)return n=qt.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=d,l!==Ju&&(e=Error(i(422),{cause:l}),gi(Jt(e,r)))):(l!==Ju&&(n=Error(i(423),{cause:l}),gi(Jt(n,r))),e=e.current.alternate,e.flags|=65536,d&=-d,e.lanes|=d,l=Jt(l,r),d=Dd(e.stateNode,l,d),ud(e,d),et!==4&&(et=2)),!1;var h=Error(i(520),{cause:l});if(h=Jt(h,r),Oi===null?Oi=[h]:Oi.push(h),et!==4&&(et=2),n===null)return!0;l=Jt(l,r),r=n;do{switch(r.tag){case 3:return r.flags|=65536,e=d&-d,r.lanes|=e,e=Dd(r.stateNode,l,e),ud(r,e),!1;case 1:if(n=r.type,h=r.stateNode,(r.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||h!==null&&typeof h.componentDidCatch=="function"&&(Ua===null||!Ua.has(h))))return r.flags|=65536,d&=-d,r.lanes|=d,d=m0(d),p0(d,e,r,l),ud(r,d),!1}r=r.return}while(r!==null);return!1}var Od=Error(i(461)),ot=!1;function bt(e,n,r,l){n.child=e===null?bp(n,null,r,l):ws(n,e.child,r,l)}function g0(e,n,r,l,d){r=r.render;var h=n.ref;if("ref"in l){var v={};for(var A in l)A!=="ref"&&(v[A]=l[A])}else v=l;return xs(n),l=gd(e,n,r,v,h,d),A=xd(),e!==null&&!ot?(yd(e,n,d),na(e,n,d)):(De&&A&&Wu(n),n.flags|=1,bt(e,n,l,d),n.child)}function x0(e,n,r,l,d){if(e===null){var h=r.type;return typeof h=="function"&&!Qu(h)&&h.defaultProps===void 0&&r.compare===null?(n.tag=15,n.type=h,y0(e,n,h,l,d)):(e=sl(r.type,null,l,n,n.mode,d),e.ref=n.ref,e.return=n,n.child=e)}if(h=e.child,!Yd(e,d)){var v=h.memoizedProps;if(r=r.compare,r=r!==null?r:hi,r(v,l)&&e.ref===n.ref)return na(e,n,d)}return n.flags|=1,e=Fn(h,l),e.ref=n.ref,e.return=n,n.child=e}function y0(e,n,r,l,d){if(e!==null){var h=e.memoizedProps;if(hi(h,l)&&e.ref===n.ref)if(ot=!1,n.pendingProps=l=h,Yd(e,d))(e.flags&131072)!==0&&(ot=!0);else return n.lanes=e.lanes,na(e,n,d)}return Bd(e,n,r,l,d)}function b0(e,n,r,l){var d=l.children,h=e!==null?e.memoizedState:null;if(e===null&&n.stateNode===null&&(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((n.flags&128)!==0){if(h=h!==null?h.baseLanes|r:r,e!==null){for(l=n.child=e.child,d=0;l!==null;)d=d|l.lanes|l.childLanes,l=l.sibling;l=d&~h}else l=0,n.child=null;return v0(e,n,h,r,l)}if((r&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},e!==null&&ll(n,h!==null?h.cachePool:null),h!==null?jp(n,h):fd(),Np(n);else return l=n.lanes=536870912,v0(e,n,h!==null?h.baseLanes|r:r,r,l)}else h!==null?(ll(n,h.cachePool),jp(n,h),Ba(),n.memoizedState=null):(e!==null&&ll(n,null),fd(),Ba());return bt(e,n,d,r),n.child}function Ti(e,n){return e!==null&&e.tag===22||n.stateNode!==null||(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.sibling}function v0(e,n,r,l,d){var h=id();return h=h===null?null:{parent:rt._currentValue,pool:h},n.memoizedState={baseLanes:r,cachePool:h},e!==null&&ll(n,null),fd(),Np(n),e!==null&&rr(e,n,l,!0),n.childLanes=d,null}function Sl(e,n){return n=El({mode:n.mode,children:n.children},e.mode),n.ref=e.ref,e.child=n,n.return=e,n}function w0(e,n,r){return ws(n,e.child,null,r),e=Sl(n,n.pendingProps),e.flags|=2,Vt(n),n.memoizedState=null,e}function q2(e,n,r){var l=n.pendingProps,d=(n.flags&128)!==0;if(n.flags&=-129,e===null){if(De){if(l.mode==="hidden")return e=Sl(n,l),n.lanes=536870912,Ti(null,e);if(md(n),(e=Ge)?(e=Rg(e,nn),e=e!==null&&e.data==="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:Ta!==null?{id:Tn,overflow:Mn}:null,retryLane:536870912,hydrationErrors:null},r=sp(e),r.return=n,n.child=r,xt=n,Ge=null)):e=null,e===null)throw Aa(n);return n.lanes=536870912,null}return Sl(n,l)}var h=e.memoizedState;if(h!==null){var v=h.dehydrated;if(md(n),d)if(n.flags&256)n.flags&=-257,n=w0(e,n,r);else if(n.memoizedState!==null)n.child=e.child,n.flags|=128,n=null;else throw Error(i(558));else if(ot||rr(e,n,r,!1),d=(r&e.childLanes)!==0,ot||d){if(l=Ie,l!==null&&(v=Bo(l,r),v!==0&&v!==h.retryLane))throw h.retryLane=v,hs(e,v),Lt(l,e,v),Od;Ol(),n=w0(e,n,r)}else e=h.treeContext,Ge=sn(v.nextSibling),xt=n,De=!0,Ma=null,nn=!1,e!==null&&op(n,e),n=Sl(n,l),n.flags|=4096;return n}return e=Fn(e.child,{mode:l.mode,children:l.children}),e.ref=n.ref,n.child=e,e.return=n,e}function _l(e,n){var r=n.ref;if(r===null)e!==null&&e.ref!==null&&(n.flags|=4194816);else{if(typeof r!="function"&&typeof r!="object")throw Error(i(284));(e===null||e.ref!==r)&&(n.flags|=4194816)}}function Bd(e,n,r,l,d){return xs(n),r=gd(e,n,r,l,void 0,d),l=xd(),e!==null&&!ot?(yd(e,n,d),na(e,n,d)):(De&&l&&Wu(n),n.flags|=1,bt(e,n,r,d),n.child)}function j0(e,n,r,l,d,h){return xs(n),n.updateQueue=null,r=_p(n,l,r,d),Sp(e),l=xd(),e!==null&&!ot?(yd(e,n,h),na(e,n,h)):(De&&l&&Wu(n),n.flags|=1,bt(e,n,r,h),n.child)}function N0(e,n,r,l,d){if(xs(n),n.stateNode===null){var h=tr,v=r.contextType;typeof v=="object"&&v!==null&&(h=yt(v)),h=new r(l,h),n.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,h.updater=Rd,n.stateNode=h,h._reactInternals=n,h=n.stateNode,h.props=l,h.state=n.memoizedState,h.refs={},ld(n),v=r.contextType,h.context=typeof v=="object"&&v!==null?yt(v):tr,h.state=n.memoizedState,v=r.getDerivedStateFromProps,typeof v=="function"&&(zd(n,r,v,l),h.state=n.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof h.getSnapshotBeforeUpdate=="function"||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(v=h.state,typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount(),v!==h.state&&Rd.enqueueReplaceState(h,h.state,null),Ni(n,l,h,d),ji(),h.state=n.memoizedState),typeof h.componentDidMount=="function"&&(n.flags|=4194308),l=!0}else if(e===null){h=n.stateNode;var A=n.memoizedProps,V=Ns(r,A);h.props=V;var J=h.context,ie=r.contextType;v=tr,typeof ie=="object"&&ie!==null&&(v=yt(ie));var le=r.getDerivedStateFromProps;ie=typeof le=="function"||typeof h.getSnapshotBeforeUpdate=="function",A=n.pendingProps!==A,ie||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(A||J!==v)&&c0(n,h,l,v),za=!1;var ee=n.memoizedState;h.state=ee,Ni(n,l,h,d),ji(),J=n.memoizedState,A||ee!==J||za?(typeof le=="function"&&(zd(n,r,le,l),J=n.memoizedState),(V=za||l0(n,r,V,l,ee,J,v))?(ie||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount()),typeof h.componentDidMount=="function"&&(n.flags|=4194308)):(typeof h.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=l,n.memoizedState=J),h.props=l,h.state=J,h.context=v,l=V):(typeof h.componentDidMount=="function"&&(n.flags|=4194308),l=!1)}else{h=n.stateNode,cd(e,n),v=n.memoizedProps,ie=Ns(r,v),h.props=ie,le=n.pendingProps,ee=h.context,J=r.contextType,V=tr,typeof J=="object"&&J!==null&&(V=yt(J)),A=r.getDerivedStateFromProps,(J=typeof A=="function"||typeof h.getSnapshotBeforeUpdate=="function")||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(v!==le||ee!==V)&&c0(n,h,l,V),za=!1,ee=n.memoizedState,h.state=ee,Ni(n,l,h,d),ji();var ne=n.memoizedState;v!==le||ee!==ne||za||e!==null&&e.dependencies!==null&&il(e.dependencies)?(typeof A=="function"&&(zd(n,r,A,l),ne=n.memoizedState),(ie=za||l0(n,r,ie,l,ee,ne,V)||e!==null&&e.dependencies!==null&&il(e.dependencies))?(J||typeof h.UNSAFE_componentWillUpdate!="function"&&typeof h.componentWillUpdate!="function"||(typeof h.componentWillUpdate=="function"&&h.componentWillUpdate(l,ne,V),typeof h.UNSAFE_componentWillUpdate=="function"&&h.UNSAFE_componentWillUpdate(l,ne,V)),typeof h.componentDidUpdate=="function"&&(n.flags|=4),typeof h.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof h.componentDidUpdate!="function"||v===e.memoizedProps&&ee===e.memoizedState||(n.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&ee===e.memoizedState||(n.flags|=1024),n.memoizedProps=l,n.memoizedState=ne),h.props=l,h.state=ne,h.context=V,l=ie):(typeof h.componentDidUpdate!="function"||v===e.memoizedProps&&ee===e.memoizedState||(n.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&ee===e.memoizedState||(n.flags|=1024),l=!1)}return h=l,_l(e,n),l=(n.flags&128)!==0,h||l?(h=n.stateNode,r=l&&typeof r.getDerivedStateFromError!="function"?null:h.render(),n.flags|=1,e!==null&&l?(n.child=ws(n,e.child,null,d),n.child=ws(n,null,r,d)):bt(e,n,r,d),n.memoizedState=h.state,e=n.child):e=na(e,n,d),e}function S0(e,n,r,l){return ps(),n.flags|=256,bt(e,n,r,l),n.child}var Ld={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Hd(e){return{baseLanes:e,cachePool:hp()}}function $d(e,n,r){return e=e!==null?e.childLanes&~r:0,n&&(e|=Pt),e}function _0(e,n,r){var l=n.pendingProps,d=!1,h=(n.flags&128)!==0,v;if((v=h)||(v=e!==null&&e.memoizedState===null?!1:(tt.current&2)!==0),v&&(d=!0,n.flags&=-129),v=(n.flags&32)!==0,n.flags&=-33,e===null){if(De){if(d?Oa(n):Ba(),(e=Ge)?(e=Rg(e,nn),e=e!==null&&e.data!=="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:Ta!==null?{id:Tn,overflow:Mn}:null,retryLane:536870912,hydrationErrors:null},r=sp(e),r.return=n,n.child=r,xt=n,Ge=null)):e=null,e===null)throw Aa(n);return jf(e)?n.lanes=32:n.lanes=536870912,null}var A=l.children;return l=l.fallback,d?(Ba(),d=n.mode,A=El({mode:"hidden",children:A},d),l=ms(l,d,r,null),A.return=n,l.return=n,A.sibling=l,n.child=A,l=n.child,l.memoizedState=Hd(r),l.childLanes=$d(e,v,r),n.memoizedState=Ld,Ti(null,l)):(Oa(n),Ud(n,A))}var V=e.memoizedState;if(V!==null&&(A=V.dehydrated,A!==null)){if(h)n.flags&256?(Oa(n),n.flags&=-257,n=qd(e,n,r)):n.memoizedState!==null?(Ba(),n.child=e.child,n.flags|=128,n=null):(Ba(),A=l.fallback,d=n.mode,l=El({mode:"visible",children:l.children},d),A=ms(A,d,r,null),A.flags|=2,l.return=n,A.return=n,l.sibling=A,n.child=l,ws(n,e.child,null,r),l=n.child,l.memoizedState=Hd(r),l.childLanes=$d(e,v,r),n.memoizedState=Ld,n=Ti(null,l));else if(Oa(n),jf(A)){if(v=A.nextSibling&&A.nextSibling.dataset,v)var J=v.dgst;v=J,l=Error(i(419)),l.stack="",l.digest=v,gi({value:l,source:null,stack:null}),n=qd(e,n,r)}else if(ot||rr(e,n,r,!1),v=(r&e.childLanes)!==0,ot||v){if(v=Ie,v!==null&&(l=Bo(v,r),l!==0&&l!==V.retryLane))throw V.retryLane=l,hs(e,l),Lt(v,e,l),Od;wf(A)||Ol(),n=qd(e,n,r)}else wf(A)?(n.flags|=192,n.child=e.child,n=null):(e=V.treeContext,Ge=sn(A.nextSibling),xt=n,De=!0,Ma=null,nn=!1,e!==null&&op(n,e),n=Ud(n,l.children),n.flags|=4096);return n}return d?(Ba(),A=l.fallback,d=n.mode,V=e.child,J=V.sibling,l=Fn(V,{mode:"hidden",children:l.children}),l.subtreeFlags=V.subtreeFlags&65011712,J!==null?A=Fn(J,A):(A=ms(A,d,r,null),A.flags|=2),A.return=n,l.return=n,l.sibling=A,n.child=l,Ti(null,l),l=n.child,A=e.child.memoizedState,A===null?A=Hd(r):(d=A.cachePool,d!==null?(V=rt._currentValue,d=d.parent!==V?{parent:V,pool:V}:d):d=hp(),A={baseLanes:A.baseLanes|r,cachePool:d}),l.memoizedState=A,l.childLanes=$d(e,v,r),n.memoizedState=Ld,Ti(e.child,l)):(Oa(n),r=e.child,e=r.sibling,r=Fn(r,{mode:"visible",children:l.children}),r.return=n,r.sibling=null,e!==null&&(v=n.deletions,v===null?(n.deletions=[e],n.flags|=16):v.push(e)),n.child=r,n.memoizedState=null,r)}function Ud(e,n){return n=El({mode:"visible",children:n},e.mode),n.return=e,e.child=n}function El(e,n){return e=Ut(22,e,null,n),e.lanes=0,e}function qd(e,n,r){return ws(n,e.child,null,r),e=Ud(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function E0(e,n,r){e.lanes|=n;var l=e.alternate;l!==null&&(l.lanes|=n),nd(e.return,n,r)}function Vd(e,n,r,l,d,h){var v=e.memoizedState;v===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:l,tail:r,tailMode:d,treeForkCount:h}:(v.isBackwards=n,v.rendering=null,v.renderingStartTime=0,v.last=l,v.tail=r,v.tailMode=d,v.treeForkCount=h)}function C0(e,n,r){var l=n.pendingProps,d=l.revealOrder,h=l.tail;l=l.children;var v=tt.current,A=(v&2)!==0;if(A?(v=v&1|2,n.flags|=128):v&=1,te(tt,v),bt(e,n,l,r),l=De?pi:0,!A&&e!==null&&(e.flags&128)!==0)e:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&E0(e,r,n);else if(e.tag===19)E0(e,r,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break e;for(;e.sibling===null;){if(e.return===null||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(d){case"forwards":for(r=n.child,d=null;r!==null;)e=r.alternate,e!==null&&ml(e)===null&&(d=r),r=r.sibling;r=d,r===null?(d=n.child,n.child=null):(d=r.sibling,r.sibling=null),Vd(n,!1,d,r,h,l);break;case"backwards":case"unstable_legacy-backwards":for(r=null,d=n.child,n.child=null;d!==null;){if(e=d.alternate,e!==null&&ml(e)===null){n.child=d;break}e=d.sibling,d.sibling=r,r=d,d=e}Vd(n,!0,r,null,h,l);break;case"together":Vd(n,!1,null,null,void 0,l);break;default:n.memoizedState=null}return n.child}function na(e,n,r){if(e!==null&&(n.dependencies=e.dependencies),$a|=n.lanes,(r&n.childLanes)===0)if(e!==null){if(rr(e,n,r,!1),(r&n.childLanes)===0)return null}else return null;if(e!==null&&n.child!==e.child)throw Error(i(153));if(n.child!==null){for(e=n.child,r=Fn(e,e.pendingProps),n.child=r,r.return=n;e.sibling!==null;)e=e.sibling,r=r.sibling=Fn(e,e.pendingProps),r.return=n;r.sibling=null}return n.child}function Yd(e,n){return(e.lanes&n)!==0?!0:(e=e.dependencies,!!(e!==null&&il(e)))}function V2(e,n,r){switch(n.tag){case 3:$(n,n.stateNode.containerInfo),ka(n,rt,e.memoizedState.cache),ps();break;case 27:case 5:he(n);break;case 4:$(n,n.stateNode.containerInfo);break;case 10:ka(n,n.type,n.memoizedProps.value);break;case 31:if(n.memoizedState!==null)return n.flags|=128,md(n),null;break;case 13:var l=n.memoizedState;if(l!==null)return l.dehydrated!==null?(Oa(n),n.flags|=128,null):(r&n.child.childLanes)!==0?_0(e,n,r):(Oa(n),e=na(e,n,r),e!==null?e.sibling:null);Oa(n);break;case 19:var d=(e.flags&128)!==0;if(l=(r&n.childLanes)!==0,l||(rr(e,n,r,!1),l=(r&n.childLanes)!==0),d){if(l)return C0(e,n,r);n.flags|=128}if(d=n.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),te(tt,tt.current),l)break;return null;case 22:return n.lanes=0,b0(e,n,r,n.pendingProps);case 24:ka(n,rt,e.memoizedState.cache)}return na(e,n,r)}function T0(e,n,r){if(e!==null)if(e.memoizedProps!==n.pendingProps)ot=!0;else{if(!Yd(e,r)&&(n.flags&128)===0)return ot=!1,V2(e,n,r);ot=(e.flags&131072)!==0}else ot=!1,De&&(n.flags&1048576)!==0&&ip(n,pi,n.index);switch(n.lanes=0,n.tag){case 16:e:{var l=n.pendingProps;if(e=bs(n.elementType),n.type=e,typeof e=="function")Qu(e)?(l=Ns(e,l),n.tag=1,n=N0(null,n,e,l,r)):(n.tag=0,n=Bd(null,n,e,l,r));else{if(e!=null){var d=e.$$typeof;if(d===k){n.tag=11,n=g0(null,n,e,l,r);break e}else if(d===M){n.tag=14,n=x0(null,n,e,l,r);break e}}throw n=q(e)||e,Error(i(306,n,""))}}return n;case 0:return Bd(e,n,n.type,n.pendingProps,r);case 1:return l=n.type,d=Ns(l,n.pendingProps),N0(e,n,l,d,r);case 3:e:{if($(n,n.stateNode.containerInfo),e===null)throw Error(i(387));l=n.pendingProps;var h=n.memoizedState;d=h.element,cd(e,n),Ni(n,l,null,r);var v=n.memoizedState;if(l=v.cache,ka(n,rt,l),l!==h.cache&&ad(n,[rt],r,!0),ji(),l=v.element,h.isDehydrated)if(h={element:l,isDehydrated:!1,cache:v.cache},n.updateQueue.baseState=h,n.memoizedState=h,n.flags&256){n=S0(e,n,l,r);break e}else if(l!==d){d=Jt(Error(i(424)),n),gi(d),n=S0(e,n,l,r);break e}else for(e=n.stateNode.containerInfo,e.nodeType===9?e=e.body:e=e.nodeName==="HTML"?e.ownerDocument.body:e,Ge=sn(e.firstChild),xt=n,De=!0,Ma=null,nn=!0,r=bp(n,null,l,r),n.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(ps(),l===d){n=na(e,n,r);break e}bt(e,n,l,r)}n=n.child}return n;case 26:return _l(e,n),e===null?(r=$g(n.type,null,n.pendingProps,null))?n.memoizedState=r:De||(r=n.type,e=n.pendingProps,l=Vl(de.current).createElement(r),l[dt]=n,l[wt]=e,vt(l,r,e),st(l),n.stateNode=l):n.memoizedState=$g(n.type,e.memoizedProps,n.pendingProps,e.memoizedState),null;case 27:return he(n),e===null&&De&&(l=n.stateNode=Bg(n.type,n.pendingProps,de.current),xt=n,nn=!0,d=Ge,Pa(n.type)?(Nf=d,Ge=sn(l.firstChild)):Ge=d),bt(e,n,n.pendingProps.children,r),_l(e,n),e===null&&(n.flags|=4194304),n.child;case 5:return e===null&&De&&((d=l=Ge)&&(l=yw(l,n.type,n.pendingProps,nn),l!==null?(n.stateNode=l,xt=n,Ge=sn(l.firstChild),nn=!1,d=!0):d=!1),d||Aa(n)),he(n),d=n.type,h=n.pendingProps,v=e!==null?e.memoizedProps:null,l=h.children,yf(d,h)?l=null:v!==null&&yf(d,v)&&(n.flags|=32),n.memoizedState!==null&&(d=gd(e,n,R2,null,null,r),Yi._currentValue=d),_l(e,n),bt(e,n,l,r),n.child;case 6:return e===null&&De&&((e=r=Ge)&&(r=bw(r,n.pendingProps,nn),r!==null?(n.stateNode=r,xt=n,Ge=null,e=!0):e=!1),e||Aa(n)),null;case 13:return _0(e,n,r);case 4:return $(n,n.stateNode.containerInfo),l=n.pendingProps,e===null?n.child=ws(n,null,l,r):bt(e,n,l,r),n.child;case 11:return g0(e,n,n.type,n.pendingProps,r);case 7:return bt(e,n,n.pendingProps,r),n.child;case 8:return bt(e,n,n.pendingProps.children,r),n.child;case 12:return bt(e,n,n.pendingProps.children,r),n.child;case 10:return l=n.pendingProps,ka(n,n.type,l.value),bt(e,n,l.children,r),n.child;case 9:return d=n.type._context,l=n.pendingProps.children,xs(n),d=yt(d),l=l(d),n.flags|=1,bt(e,n,l,r),n.child;case 14:return x0(e,n,n.type,n.pendingProps,r);case 15:return y0(e,n,n.type,n.pendingProps,r);case 19:return C0(e,n,r);case 31:return q2(e,n,r);case 22:return b0(e,n,r,n.pendingProps);case 24:return xs(n),l=yt(rt),e===null?(d=id(),d===null&&(d=Ie,h=sd(),d.pooledCache=h,h.refCount++,h!==null&&(d.pooledCacheLanes|=r),d=h),n.memoizedState={parent:l,cache:d},ld(n),ka(n,rt,d)):((e.lanes&r)!==0&&(cd(e,n),Ni(n,null,null,r),ji()),d=e.memoizedState,h=n.memoizedState,d.parent!==l?(d={parent:l,cache:l},n.memoizedState=d,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=d),ka(n,rt,l)):(l=h.cache,ka(n,rt,l),l!==d.cache&&ad(n,[rt],r,!0))),bt(e,n,n.pendingProps.children,r),n.child;case 29:throw n.pendingProps}throw Error(i(156,n.tag))}function aa(e){e.flags|=4}function Pd(e,n,r,l,d){if((n=(e.mode&32)!==0)&&(n=!1),n){if(e.flags|=16777216,(d&335544128)===d)if(e.stateNode.complete)e.flags|=8192;else if(tg())e.flags|=8192;else throw vs=ul,od}else e.flags&=-16777217}function M0(e,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Pg(n))if(tg())e.flags|=8192;else throw vs=ul,od}function Cl(e,n){n!==null&&(e.flags|=4),e.flags&16384&&(n=e.tag!==22?Ro():536870912,e.lanes|=n,xr|=n)}function Mi(e,n){if(!De)switch(e.tailMode){case"hidden":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var l=null;r!==null;)r.alternate!==null&&(l=r),r=r.sibling;l===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function Qe(e){var n=e.alternate!==null&&e.alternate.child===e.child,r=0,l=0;if(n)for(var d=e.child;d!==null;)r|=d.lanes|d.childLanes,l|=d.subtreeFlags&65011712,l|=d.flags&65011712,d.return=e,d=d.sibling;else for(d=e.child;d!==null;)r|=d.lanes|d.childLanes,l|=d.subtreeFlags,l|=d.flags,d.return=e,d=d.sibling;return e.subtreeFlags|=l,e.childLanes=r,n}function Y2(e,n,r){var l=n.pendingProps;switch(Ku(n),n.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Qe(n),null;case 1:return Qe(n),null;case 3:return r=n.stateNode,l=null,e!==null&&(l=e.memoizedState.cache),n.memoizedState.cache!==l&&(n.flags|=2048),Jn(rt),ce(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(sr(n)?aa(n):e===null||e.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,ed())),Qe(n),null;case 26:var d=n.type,h=n.memoizedState;return e===null?(aa(n),h!==null?(Qe(n),M0(n,h)):(Qe(n),Pd(n,d,null,l,r))):h?h!==e.memoizedState?(aa(n),Qe(n),M0(n,h)):(Qe(n),n.flags&=-16777217):(e=e.memoizedProps,e!==l&&aa(n),Qe(n),Pd(n,d,e,l,r)),null;case 27:if(ve(n),r=de.current,d=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==l&&aa(n);else{if(!l){if(n.stateNode===null)throw Error(i(166));return Qe(n),null}e=ae.current,sr(n)?lp(n):(e=Bg(d,l,r),n.stateNode=e,aa(n))}return Qe(n),null;case 5:if(ve(n),d=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==l&&aa(n);else{if(!l){if(n.stateNode===null)throw Error(i(166));return Qe(n),null}if(h=ae.current,sr(n))lp(n);else{var v=Vl(de.current);switch(h){case 1:h=v.createElementNS("http://www.w3.org/2000/svg",d);break;case 2:h=v.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;default:switch(d){case"svg":h=v.createElementNS("http://www.w3.org/2000/svg",d);break;case"math":h=v.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;case"script":h=v.createElement("div"),h.innerHTML="<script><\/script>",h=h.removeChild(h.firstChild);break;case"select":h=typeof l.is=="string"?v.createElement("select",{is:l.is}):v.createElement("select"),l.multiple?h.multiple=!0:l.size&&(h.size=l.size);break;default:h=typeof l.is=="string"?v.createElement(d,{is:l.is}):v.createElement(d)}}h[dt]=n,h[wt]=l;e:for(v=n.child;v!==null;){if(v.tag===5||v.tag===6)h.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===n)break e;for(;v.sibling===null;){if(v.return===null||v.return===n)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}n.stateNode=h;e:switch(vt(h,d,l),d){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&aa(n)}}return Qe(n),Pd(n,n.type,e===null?null:e.memoizedProps,n.pendingProps,r),null;case 6:if(e&&n.stateNode!=null)e.memoizedProps!==l&&aa(n);else{if(typeof l!="string"&&n.stateNode===null)throw Error(i(166));if(e=de.current,sr(n)){if(e=n.stateNode,r=n.memoizedProps,l=null,d=xt,d!==null)switch(d.tag){case 27:case 5:l=d.memoizedProps}e[dt]=n,e=!!(e.nodeValue===r||l!==null&&l.suppressHydrationWarning===!0||_g(e.nodeValue,r)),e||Aa(n,!0)}else e=Vl(e).createTextNode(l),e[dt]=n,n.stateNode=e}return Qe(n),null;case 31:if(r=n.memoizedState,e===null||e.memoizedState!==null){if(l=sr(n),r!==null){if(e===null){if(!l)throw Error(i(318));if(e=n.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(i(557));e[dt]=n}else ps(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;Qe(n),e=!1}else r=ed(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=r),e=!0;if(!e)return n.flags&256?(Vt(n),n):(Vt(n),null);if((n.flags&128)!==0)throw Error(i(558))}return Qe(n),null;case 13:if(l=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(d=sr(n),l!==null&&l.dehydrated!==null){if(e===null){if(!d)throw Error(i(318));if(d=n.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(i(317));d[dt]=n}else ps(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;Qe(n),d=!1}else d=ed(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=d),d=!0;if(!d)return n.flags&256?(Vt(n),n):(Vt(n),null)}return Vt(n),(n.flags&128)!==0?(n.lanes=r,n):(r=l!==null,e=e!==null&&e.memoizedState!==null,r&&(l=n.child,d=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(d=l.alternate.memoizedState.cachePool.pool),h=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(h=l.memoizedState.cachePool.pool),h!==d&&(l.flags|=2048)),r!==e&&r&&(n.child.flags|=8192),Cl(n,n.updateQueue),Qe(n),null);case 4:return ce(),e===null&&hf(n.stateNode.containerInfo),Qe(n),null;case 10:return Jn(n.type),Qe(n),null;case 19:if(P(tt),l=n.memoizedState,l===null)return Qe(n),null;if(d=(n.flags&128)!==0,h=l.rendering,h===null)if(d)Mi(l,!1);else{if(et!==0||e!==null&&(e.flags&128)!==0)for(e=n.child;e!==null;){if(h=ml(e),h!==null){for(n.flags|=128,Mi(l,!1),e=h.updateQueue,n.updateQueue=e,Cl(n,e),n.subtreeFlags=0,e=r,r=n.child;r!==null;)ap(r,e),r=r.sibling;return te(tt,tt.current&1|2),De&&Wn(n,l.treeForkCount),n.child}e=e.sibling}l.tail!==null&&at()>zl&&(n.flags|=128,d=!0,Mi(l,!1),n.lanes=4194304)}else{if(!d)if(e=ml(h),e!==null){if(n.flags|=128,d=!0,e=e.updateQueue,n.updateQueue=e,Cl(n,e),Mi(l,!0),l.tail===null&&l.tailMode==="hidden"&&!h.alternate&&!De)return Qe(n),null}else 2*at()-l.renderingStartTime>zl&&r!==536870912&&(n.flags|=128,d=!0,Mi(l,!1),n.lanes=4194304);l.isBackwards?(h.sibling=n.child,n.child=h):(e=l.last,e!==null?e.sibling=h:n.child=h,l.last=h)}return l.tail!==null?(e=l.tail,l.rendering=e,l.tail=e.sibling,l.renderingStartTime=at(),e.sibling=null,r=tt.current,te(tt,d?r&1|2:r&1),De&&Wn(n,l.treeForkCount),e):(Qe(n),null);case 22:case 23:return Vt(n),hd(),l=n.memoizedState!==null,e!==null?e.memoizedState!==null!==l&&(n.flags|=8192):l&&(n.flags|=8192),l?(r&536870912)!==0&&(n.flags&128)===0&&(Qe(n),n.subtreeFlags&6&&(n.flags|=8192)):Qe(n),r=n.updateQueue,r!==null&&Cl(n,r.retryQueue),r=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(r=e.memoizedState.cachePool.pool),l=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(l=n.memoizedState.cachePool.pool),l!==r&&(n.flags|=2048),e!==null&&P(ys),null;case 24:return r=null,e!==null&&(r=e.memoizedState.cache),n.memoizedState.cache!==r&&(n.flags|=2048),Jn(rt),Qe(n),null;case 25:return null;case 30:return null}throw Error(i(156,n.tag))}function P2(e,n){switch(Ku(n),n.tag){case 1:return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return Jn(rt),ce(),e=n.flags,(e&65536)!==0&&(e&128)===0?(n.flags=e&-65537|128,n):null;case 26:case 27:case 5:return ve(n),null;case 31:if(n.memoizedState!==null){if(Vt(n),n.alternate===null)throw Error(i(340));ps()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 13:if(Vt(n),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(i(340));ps()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return P(tt),null;case 4:return ce(),null;case 10:return Jn(n.type),null;case 22:case 23:return Vt(n),hd(),e!==null&&P(ys),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 24:return Jn(rt),null;case 25:return null;default:return null}}function A0(e,n){switch(Ku(n),n.tag){case 3:Jn(rt),ce();break;case 26:case 27:case 5:ve(n);break;case 4:ce();break;case 31:n.memoizedState!==null&&Vt(n);break;case 13:Vt(n);break;case 19:P(tt);break;case 10:Jn(n.type);break;case 22:case 23:Vt(n),hd(),e!==null&&P(ys);break;case 24:Jn(rt)}}function Ai(e,n){try{var r=n.updateQueue,l=r!==null?r.lastEffect:null;if(l!==null){var d=l.next;r=d;do{if((r.tag&e)===e){l=void 0;var h=r.create,v=r.inst;l=h(),v.destroy=l}r=r.next}while(r!==d)}}catch(A){qe(n,n.return,A)}}function La(e,n,r){try{var l=n.updateQueue,d=l!==null?l.lastEffect:null;if(d!==null){var h=d.next;l=h;do{if((l.tag&e)===e){var v=l.inst,A=v.destroy;if(A!==void 0){v.destroy=void 0,d=n;var V=r,J=A;try{J()}catch(ie){qe(d,V,ie)}}}l=l.next}while(l!==h)}}catch(ie){qe(n,n.return,ie)}}function k0(e){var n=e.updateQueue;if(n!==null){var r=e.stateNode;try{wp(n,r)}catch(l){qe(e,e.return,l)}}}function z0(e,n,r){r.props=Ns(e.type,e.memoizedProps),r.state=e.memoizedState;try{r.componentWillUnmount()}catch(l){qe(e,n,l)}}function ki(e,n){try{var r=e.ref;if(r!==null){switch(e.tag){case 26:case 27:case 5:var l=e.stateNode;break;case 30:l=e.stateNode;break;default:l=e.stateNode}typeof r=="function"?e.refCleanup=r(l):r.current=l}}catch(d){qe(e,n,d)}}function An(e,n){var r=e.ref,l=e.refCleanup;if(r!==null)if(typeof l=="function")try{l()}catch(d){qe(e,n,d)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof r=="function")try{r(null)}catch(d){qe(e,n,d)}else r.current=null}function R0(e){var n=e.type,r=e.memoizedProps,l=e.stateNode;try{e:switch(n){case"button":case"input":case"select":case"textarea":r.autoFocus&&l.focus();break e;case"img":r.src?l.src=r.src:r.srcSet&&(l.srcset=r.srcSet)}}catch(d){qe(e,e.return,d)}}function Xd(e,n,r){try{var l=e.stateNode;fw(l,e.type,r,n),l[wt]=n}catch(d){qe(e,e.return,d)}}function D0(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Pa(e.type)||e.tag===4}function Id(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||D0(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Pa(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Gd(e,n,r){var l=e.tag;if(l===5||l===6)e=e.stateNode,n?(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r).insertBefore(e,n):(n=r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,n.appendChild(e),r=r._reactRootContainer,r!=null||n.onclick!==null||(n.onclick=Qn));else if(l!==4&&(l===27&&Pa(e.type)&&(r=e.stateNode,n=null),e=e.child,e!==null))for(Gd(e,n,r),e=e.sibling;e!==null;)Gd(e,n,r),e=e.sibling}function Tl(e,n,r){var l=e.tag;if(l===5||l===6)e=e.stateNode,n?r.insertBefore(e,n):r.appendChild(e);else if(l!==4&&(l===27&&Pa(e.type)&&(r=e.stateNode),e=e.child,e!==null))for(Tl(e,n,r),e=e.sibling;e!==null;)Tl(e,n,r),e=e.sibling}function O0(e){var n=e.stateNode,r=e.memoizedProps;try{for(var l=e.type,d=n.attributes;d.length;)n.removeAttributeNode(d[0]);vt(n,l,r),n[dt]=e,n[wt]=r}catch(h){qe(e,e.return,h)}}var sa=!1,lt=!1,Qd=!1,B0=typeof WeakSet=="function"?WeakSet:Set,mt=null;function X2(e,n){if(e=e.containerInfo,gf=Zl,e=Qm(e),qu(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var l=r.getSelection&&r.getSelection();if(l&&l.rangeCount!==0){r=l.anchorNode;var d=l.anchorOffset,h=l.focusNode;l=l.focusOffset;try{r.nodeType,h.nodeType}catch{r=null;break e}var v=0,A=-1,V=-1,J=0,ie=0,le=e,ee=null;t:for(;;){for(var ne;le!==r||d!==0&&le.nodeType!==3||(A=v+d),le!==h||l!==0&&le.nodeType!==3||(V=v+l),le.nodeType===3&&(v+=le.nodeValue.length),(ne=le.firstChild)!==null;)ee=le,le=ne;for(;;){if(le===e)break t;if(ee===r&&++J===d&&(A=v),ee===h&&++ie===l&&(V=v),(ne=le.nextSibling)!==null)break;le=ee,ee=le.parentNode}le=ne}r=A===-1||V===-1?null:{start:A,end:V}}else r=null}r=r||{start:0,end:0}}else r=null;for(xf={focusedElem:e,selectionRange:r},Zl=!1,mt=n;mt!==null;)if(n=mt,e=n.child,(n.subtreeFlags&1028)!==0&&e!==null)e.return=n,mt=e;else for(;mt!==null;){switch(n=mt,h=n.alternate,e=n.flags,n.tag){case 0:if((e&4)!==0&&(e=n.updateQueue,e=e!==null?e.events:null,e!==null))for(r=0;r<e.length;r++)d=e[r],d.ref.impl=d.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&h!==null){e=void 0,r=n,d=h.memoizedProps,h=h.memoizedState,l=r.stateNode;try{var fe=Ns(r.type,d);e=l.getSnapshotBeforeUpdate(fe,h),l.__reactInternalSnapshotBeforeUpdate=e}catch(we){qe(r,r.return,we)}}break;case 3:if((e&1024)!==0){if(e=n.stateNode.containerInfo,r=e.nodeType,r===9)vf(e);else if(r===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":vf(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(i(163))}if(e=n.sibling,e!==null){e.return=n.return,mt=e;break}mt=n.return}}function L0(e,n,r){var l=r.flags;switch(r.tag){case 0:case 11:case 15:ia(e,r),l&4&&Ai(5,r);break;case 1:if(ia(e,r),l&4)if(e=r.stateNode,n===null)try{e.componentDidMount()}catch(v){qe(r,r.return,v)}else{var d=Ns(r.type,n.memoizedProps);n=n.memoizedState;try{e.componentDidUpdate(d,n,e.__reactInternalSnapshotBeforeUpdate)}catch(v){qe(r,r.return,v)}}l&64&&k0(r),l&512&&ki(r,r.return);break;case 3:if(ia(e,r),l&64&&(e=r.updateQueue,e!==null)){if(n=null,r.child!==null)switch(r.child.tag){case 27:case 5:n=r.child.stateNode;break;case 1:n=r.child.stateNode}try{wp(e,n)}catch(v){qe(r,r.return,v)}}break;case 27:n===null&&l&4&&O0(r);case 26:case 5:ia(e,r),n===null&&l&4&&R0(r),l&512&&ki(r,r.return);break;case 12:ia(e,r);break;case 31:ia(e,r),l&4&&U0(e,r);break;case 13:ia(e,r),l&4&&q0(e,r),l&64&&(e=r.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(r=ew.bind(null,r),vw(e,r))));break;case 22:if(l=r.memoizedState!==null||sa,!l){n=n!==null&&n.memoizedState!==null||lt,d=sa;var h=lt;sa=l,(lt=n)&&!h?oa(e,r,(r.subtreeFlags&8772)!==0):ia(e,r),sa=d,lt=h}break;case 30:break;default:ia(e,r)}}function H0(e){var n=e.alternate;n!==null&&(e.alternate=null,H0(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&ai(n)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Ze=null,Rt=!1;function ra(e,n,r){for(r=r.child;r!==null;)$0(e,n,r),r=r.sibling}function $0(e,n,r){if(Et&&typeof Et.onCommitFiberUnmount=="function")try{Et.onCommitFiberUnmount(ss,r)}catch{}switch(r.tag){case 26:lt||An(r,n),ra(e,n,r),r.memoizedState?r.memoizedState.count--:r.stateNode&&(r=r.stateNode,r.parentNode.removeChild(r));break;case 27:lt||An(r,n);var l=Ze,d=Rt;Pa(r.type)&&(Ze=r.stateNode,Rt=!1),ra(e,n,r),Ui(r.stateNode),Ze=l,Rt=d;break;case 5:lt||An(r,n);case 6:if(l=Ze,d=Rt,Ze=null,ra(e,n,r),Ze=l,Rt=d,Ze!==null)if(Rt)try{(Ze.nodeType===9?Ze.body:Ze.nodeName==="HTML"?Ze.ownerDocument.body:Ze).removeChild(r.stateNode)}catch(h){qe(r,n,h)}else try{Ze.removeChild(r.stateNode)}catch(h){qe(r,n,h)}break;case 18:Ze!==null&&(Rt?(e=Ze,kg(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,r.stateNode),_r(e)):kg(Ze,r.stateNode));break;case 4:l=Ze,d=Rt,Ze=r.stateNode.containerInfo,Rt=!0,ra(e,n,r),Ze=l,Rt=d;break;case 0:case 11:case 14:case 15:La(2,r,n),lt||La(4,r,n),ra(e,n,r);break;case 1:lt||(An(r,n),l=r.stateNode,typeof l.componentWillUnmount=="function"&&z0(r,n,l)),ra(e,n,r);break;case 21:ra(e,n,r);break;case 22:lt=(l=lt)||r.memoizedState!==null,ra(e,n,r),lt=l;break;default:ra(e,n,r)}}function U0(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{_r(e)}catch(r){qe(n,n.return,r)}}}function q0(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{_r(e)}catch(r){qe(n,n.return,r)}}function I2(e){switch(e.tag){case 31:case 13:case 19:var n=e.stateNode;return n===null&&(n=e.stateNode=new B0),n;case 22:return e=e.stateNode,n=e._retryCache,n===null&&(n=e._retryCache=new B0),n;default:throw Error(i(435,e.tag))}}function Ml(e,n){var r=I2(e);n.forEach(function(l){if(!r.has(l)){r.add(l);var d=tw.bind(null,e,l);l.then(d,d)}})}function Dt(e,n){var r=n.deletions;if(r!==null)for(var l=0;l<r.length;l++){var d=r[l],h=e,v=n,A=v;e:for(;A!==null;){switch(A.tag){case 27:if(Pa(A.type)){Ze=A.stateNode,Rt=!1;break e}break;case 5:Ze=A.stateNode,Rt=!1;break e;case 3:case 4:Ze=A.stateNode.containerInfo,Rt=!0;break e}A=A.return}if(Ze===null)throw Error(i(160));$0(h,v,d),Ze=null,Rt=!1,h=d.alternate,h!==null&&(h.return=null),d.return=null}if(n.subtreeFlags&13886)for(n=n.child;n!==null;)V0(n,e),n=n.sibling}var pn=null;function V0(e,n){var r=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Dt(n,e),Ot(e),l&4&&(La(3,e,e.return),Ai(3,e),La(5,e,e.return));break;case 1:Dt(n,e),Ot(e),l&512&&(lt||r===null||An(r,r.return)),l&64&&sa&&(e=e.updateQueue,e!==null&&(l=e.callbacks,l!==null&&(r=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=r===null?l:r.concat(l))));break;case 26:var d=pn;if(Dt(n,e),Ot(e),l&512&&(lt||r===null||An(r,r.return)),l&4){var h=r!==null?r.memoizedState:null;if(l=e.memoizedState,r===null)if(l===null)if(e.stateNode===null){e:{l=e.type,r=e.memoizedProps,d=d.ownerDocument||d;t:switch(l){case"title":h=d.getElementsByTagName("title")[0],(!h||h[os]||h[dt]||h.namespaceURI==="http://www.w3.org/2000/svg"||h.hasAttribute("itemprop"))&&(h=d.createElement(l),d.head.insertBefore(h,d.querySelector("head > title"))),vt(h,l,r),h[dt]=e,st(h),l=h;break e;case"link":var v=Vg("link","href",d).get(l+(r.href||""));if(v){for(var A=0;A<v.length;A++)if(h=v[A],h.getAttribute("href")===(r.href==null||r.href===""?null:r.href)&&h.getAttribute("rel")===(r.rel==null?null:r.rel)&&h.getAttribute("title")===(r.title==null?null:r.title)&&h.getAttribute("crossorigin")===(r.crossOrigin==null?null:r.crossOrigin)){v.splice(A,1);break t}}h=d.createElement(l),vt(h,l,r),d.head.appendChild(h);break;case"meta":if(v=Vg("meta","content",d).get(l+(r.content||""))){for(A=0;A<v.length;A++)if(h=v[A],h.getAttribute("content")===(r.content==null?null:""+r.content)&&h.getAttribute("name")===(r.name==null?null:r.name)&&h.getAttribute("property")===(r.property==null?null:r.property)&&h.getAttribute("http-equiv")===(r.httpEquiv==null?null:r.httpEquiv)&&h.getAttribute("charset")===(r.charSet==null?null:r.charSet)){v.splice(A,1);break t}}h=d.createElement(l),vt(h,l,r),d.head.appendChild(h);break;default:throw Error(i(468,l))}h[dt]=e,st(h),l=h}e.stateNode=l}else Yg(d,e.type,e.stateNode);else e.stateNode=qg(d,l,e.memoizedProps);else h!==l?(h===null?r.stateNode!==null&&(r=r.stateNode,r.parentNode.removeChild(r)):h.count--,l===null?Yg(d,e.type,e.stateNode):qg(d,l,e.memoizedProps)):l===null&&e.stateNode!==null&&Xd(e,e.memoizedProps,r.memoizedProps)}break;case 27:Dt(n,e),Ot(e),l&512&&(lt||r===null||An(r,r.return)),r!==null&&l&4&&Xd(e,e.memoizedProps,r.memoizedProps);break;case 5:if(Dt(n,e),Ot(e),l&512&&(lt||r===null||An(r,r.return)),e.flags&32){d=e.stateNode;try{Qs(d,"")}catch(fe){qe(e,e.return,fe)}}l&4&&e.stateNode!=null&&(d=e.memoizedProps,Xd(e,d,r!==null?r.memoizedProps:d)),l&1024&&(Qd=!0);break;case 6:if(Dt(n,e),Ot(e),l&4){if(e.stateNode===null)throw Error(i(162));l=e.memoizedProps,r=e.stateNode;try{r.nodeValue=l}catch(fe){qe(e,e.return,fe)}}break;case 3:if(Xl=null,d=pn,pn=Yl(n.containerInfo),Dt(n,e),pn=d,Ot(e),l&4&&r!==null&&r.memoizedState.isDehydrated)try{_r(n.containerInfo)}catch(fe){qe(e,e.return,fe)}Qd&&(Qd=!1,Y0(e));break;case 4:l=pn,pn=Yl(e.stateNode.containerInfo),Dt(n,e),Ot(e),pn=l;break;case 12:Dt(n,e),Ot(e);break;case 31:Dt(n,e),Ot(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Ml(e,l)));break;case 13:Dt(n,e),Ot(e),e.child.flags&8192&&e.memoizedState!==null!=(r!==null&&r.memoizedState!==null)&&(kl=at()),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Ml(e,l)));break;case 22:d=e.memoizedState!==null;var V=r!==null&&r.memoizedState!==null,J=sa,ie=lt;if(sa=J||d,lt=ie||V,Dt(n,e),lt=ie,sa=J,Ot(e),l&8192)e:for(n=e.stateNode,n._visibility=d?n._visibility&-2:n._visibility|1,d&&(r===null||V||sa||lt||Ss(e)),r=null,n=e;;){if(n.tag===5||n.tag===26){if(r===null){V=r=n;try{if(h=V.stateNode,d)v=h.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{A=V.stateNode;var le=V.memoizedProps.style,ee=le!=null&&le.hasOwnProperty("display")?le.display:null;A.style.display=ee==null||typeof ee=="boolean"?"":(""+ee).trim()}}catch(fe){qe(V,V.return,fe)}}}else if(n.tag===6){if(r===null){V=n;try{V.stateNode.nodeValue=d?"":V.memoizedProps}catch(fe){qe(V,V.return,fe)}}}else if(n.tag===18){if(r===null){V=n;try{var ne=V.stateNode;d?zg(ne,!0):zg(V.stateNode,!1)}catch(fe){qe(V,V.return,fe)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===e)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;r===n&&(r=null),n=n.return}r===n&&(r=null),n.sibling.return=n.return,n=n.sibling}l&4&&(l=e.updateQueue,l!==null&&(r=l.retryQueue,r!==null&&(l.retryQueue=null,Ml(e,r))));break;case 19:Dt(n,e),Ot(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Ml(e,l)));break;case 30:break;case 21:break;default:Dt(n,e),Ot(e)}}function Ot(e){var n=e.flags;if(n&2){try{for(var r,l=e.return;l!==null;){if(D0(l)){r=l;break}l=l.return}if(r==null)throw Error(i(160));switch(r.tag){case 27:var d=r.stateNode,h=Id(e);Tl(e,h,d);break;case 5:var v=r.stateNode;r.flags&32&&(Qs(v,""),r.flags&=-33);var A=Id(e);Tl(e,A,v);break;case 3:case 4:var V=r.stateNode.containerInfo,J=Id(e);Gd(e,J,V);break;default:throw Error(i(161))}}catch(ie){qe(e,e.return,ie)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function Y0(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var n=e;Y0(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),e=e.sibling}}function ia(e,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)L0(e,n.alternate,n),n=n.sibling}function Ss(e){for(e=e.child;e!==null;){var n=e;switch(n.tag){case 0:case 11:case 14:case 15:La(4,n,n.return),Ss(n);break;case 1:An(n,n.return);var r=n.stateNode;typeof r.componentWillUnmount=="function"&&z0(n,n.return,r),Ss(n);break;case 27:Ui(n.stateNode);case 26:case 5:An(n,n.return),Ss(n);break;case 22:n.memoizedState===null&&Ss(n);break;case 30:Ss(n);break;default:Ss(n)}e=e.sibling}}function oa(e,n,r){for(r=r&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var l=n.alternate,d=e,h=n,v=h.flags;switch(h.tag){case 0:case 11:case 15:oa(d,h,r),Ai(4,h);break;case 1:if(oa(d,h,r),l=h,d=l.stateNode,typeof d.componentDidMount=="function")try{d.componentDidMount()}catch(J){qe(l,l.return,J)}if(l=h,d=l.updateQueue,d!==null){var A=l.stateNode;try{var V=d.shared.hiddenCallbacks;if(V!==null)for(d.shared.hiddenCallbacks=null,d=0;d<V.length;d++)vp(V[d],A)}catch(J){qe(l,l.return,J)}}r&&v&64&&k0(h),ki(h,h.return);break;case 27:O0(h);case 26:case 5:oa(d,h,r),r&&l===null&&v&4&&R0(h),ki(h,h.return);break;case 12:oa(d,h,r);break;case 31:oa(d,h,r),r&&v&4&&U0(d,h);break;case 13:oa(d,h,r),r&&v&4&&q0(d,h);break;case 22:h.memoizedState===null&&oa(d,h,r),ki(h,h.return);break;case 30:break;default:oa(d,h,r)}n=n.sibling}}function Zd(e,n){var r=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(r=e.memoizedState.cachePool.pool),e=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(e=n.memoizedState.cachePool.pool),e!==r&&(e!=null&&e.refCount++,r!=null&&xi(r))}function Fd(e,n){e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&xi(e))}function gn(e,n,r,l){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)P0(e,n,r,l),n=n.sibling}function P0(e,n,r,l){var d=n.flags;switch(n.tag){case 0:case 11:case 15:gn(e,n,r,l),d&2048&&Ai(9,n);break;case 1:gn(e,n,r,l);break;case 3:gn(e,n,r,l),d&2048&&(e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&xi(e)));break;case 12:if(d&2048){gn(e,n,r,l),e=n.stateNode;try{var h=n.memoizedProps,v=h.id,A=h.onPostCommit;typeof A=="function"&&A(v,n.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(V){qe(n,n.return,V)}}else gn(e,n,r,l);break;case 31:gn(e,n,r,l);break;case 13:gn(e,n,r,l);break;case 23:break;case 22:h=n.stateNode,v=n.alternate,n.memoizedState!==null?h._visibility&2?gn(e,n,r,l):zi(e,n):h._visibility&2?gn(e,n,r,l):(h._visibility|=2,mr(e,n,r,l,(n.subtreeFlags&10256)!==0||!1)),d&2048&&Zd(v,n);break;case 24:gn(e,n,r,l),d&2048&&Fd(n.alternate,n);break;default:gn(e,n,r,l)}}function mr(e,n,r,l,d){for(d=d&&((n.subtreeFlags&10256)!==0||!1),n=n.child;n!==null;){var h=e,v=n,A=r,V=l,J=v.flags;switch(v.tag){case 0:case 11:case 15:mr(h,v,A,V,d),Ai(8,v);break;case 23:break;case 22:var ie=v.stateNode;v.memoizedState!==null?ie._visibility&2?mr(h,v,A,V,d):zi(h,v):(ie._visibility|=2,mr(h,v,A,V,d)),d&&J&2048&&Zd(v.alternate,v);break;case 24:mr(h,v,A,V,d),d&&J&2048&&Fd(v.alternate,v);break;default:mr(h,v,A,V,d)}n=n.sibling}}function zi(e,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var r=e,l=n,d=l.flags;switch(l.tag){case 22:zi(r,l),d&2048&&Zd(l.alternate,l);break;case 24:zi(r,l),d&2048&&Fd(l.alternate,l);break;default:zi(r,l)}n=n.sibling}}var Ri=8192;function pr(e,n,r){if(e.subtreeFlags&Ri)for(e=e.child;e!==null;)X0(e,n,r),e=e.sibling}function X0(e,n,r){switch(e.tag){case 26:pr(e,n,r),e.flags&Ri&&e.memoizedState!==null&&zw(r,pn,e.memoizedState,e.memoizedProps);break;case 5:pr(e,n,r);break;case 3:case 4:var l=pn;pn=Yl(e.stateNode.containerInfo),pr(e,n,r),pn=l;break;case 22:e.memoizedState===null&&(l=e.alternate,l!==null&&l.memoizedState!==null?(l=Ri,Ri=16777216,pr(e,n,r),Ri=l):pr(e,n,r));break;default:pr(e,n,r)}}function I0(e){var n=e.alternate;if(n!==null&&(e=n.child,e!==null)){n.child=null;do n=e.sibling,e.sibling=null,e=n;while(e!==null)}}function Di(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var r=0;r<n.length;r++){var l=n[r];mt=l,Q0(l,e)}I0(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)G0(e),e=e.sibling}function G0(e){switch(e.tag){case 0:case 11:case 15:Di(e),e.flags&2048&&La(9,e,e.return);break;case 3:Di(e);break;case 12:Di(e);break;case 22:var n=e.stateNode;e.memoizedState!==null&&n._visibility&2&&(e.return===null||e.return.tag!==13)?(n._visibility&=-3,Al(e)):Di(e);break;default:Di(e)}}function Al(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var r=0;r<n.length;r++){var l=n[r];mt=l,Q0(l,e)}I0(e)}for(e=e.child;e!==null;){switch(n=e,n.tag){case 0:case 11:case 15:La(8,n,n.return),Al(n);break;case 22:r=n.stateNode,r._visibility&2&&(r._visibility&=-3,Al(n));break;default:Al(n)}e=e.sibling}}function Q0(e,n){for(;mt!==null;){var r=mt;switch(r.tag){case 0:case 11:case 15:La(8,r,n);break;case 23:case 22:if(r.memoizedState!==null&&r.memoizedState.cachePool!==null){var l=r.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:xi(r.memoizedState.cache)}if(l=r.child,l!==null)l.return=r,mt=l;else e:for(r=e;mt!==null;){l=mt;var d=l.sibling,h=l.return;if(H0(l),l===r){mt=null;break e}if(d!==null){d.return=h,mt=d;break e}mt=h}}}var G2={getCacheForType:function(e){var n=yt(rt),r=n.data.get(e);return r===void 0&&(r=e(),n.data.set(e,r)),r},cacheSignal:function(){return yt(rt).controller.signal}},Q2=typeof WeakMap=="function"?WeakMap:Map,He=0,Ie=null,Te=null,ke=0,Ue=0,Yt=null,Ha=!1,gr=!1,Wd=!1,la=0,et=0,$a=0,_s=0,Kd=0,Pt=0,xr=0,Oi=null,Bt=null,Jd=!1,kl=0,Z0=0,zl=1/0,Rl=null,Ua=null,ft=0,qa=null,yr=null,ca=0,ef=0,tf=null,F0=null,Bi=0,nf=null;function Xt(){return(He&2)!==0&&ke!==0?ke&-ke:B.T!==null?cf():Lo()}function W0(){if(Pt===0)if((ke&536870912)===0||De){var e=qs;qs<<=1,(qs&3932160)===0&&(qs=262144),Pt=e}else Pt=536870912;return e=qt.current,e!==null&&(e.flags|=32),Pt}function Lt(e,n,r){(e===Ie&&(Ue===2||Ue===9)||e.cancelPendingCommit!==null)&&(br(e,0),Va(e,ke,Pt,!1)),is(e,r),((He&2)===0||e!==Ie)&&(e===Ie&&((He&2)===0&&(_s|=r),et===4&&Va(e,ke,Pt,!1)),kn(e))}function K0(e,n,r){if((He&6)!==0)throw Error(i(327));var l=!r&&(n&127)===0&&(n&e.expiredLanes)===0||rs(e,n),d=l?W2(e,n):sf(e,n,!0),h=l;do{if(d===0){gr&&!l&&Va(e,n,0,!1);break}else{if(r=e.current.alternate,h&&!Z2(r)){d=sf(e,n,!1),h=!1;continue}if(d===2){if(h=n,e.errorRecoveryDisabledLanes&h)var v=0;else v=e.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){n=v;e:{var A=e;d=Oi;var V=A.current.memoizedState.isDehydrated;if(V&&(br(A,v).flags|=256),v=sf(A,v,!1),v!==2){if(Wd&&!V){A.errorRecoveryDisabledLanes|=h,_s|=h,d=4;break e}h=Bt,Bt=d,h!==null&&(Bt===null?Bt=h:Bt.push.apply(Bt,h))}d=v}if(h=!1,d!==2)continue}}if(d===1){br(e,0),Va(e,n,0,!0);break}e:{switch(l=e,h=d,h){case 0:case 1:throw Error(i(345));case 4:if((n&4194048)!==n)break;case 6:Va(l,n,Pt,!Ha);break e;case 2:Bt=null;break;case 3:case 5:break;default:throw Error(i(329))}if((n&62914560)===n&&(d=kl+300-at(),10<d)){if(Va(l,n,Pt,!Ha),Ys(l,0,!0)!==0)break e;ca=n,l.timeoutHandle=Mg(J0.bind(null,l,r,Bt,Rl,Jd,n,Pt,_s,xr,Ha,h,"Throttled",-0,0),d);break e}J0(l,r,Bt,Rl,Jd,n,Pt,_s,xr,Ha,h,null,-0,0)}}break}while(!0);kn(e)}function J0(e,n,r,l,d,h,v,A,V,J,ie,le,ee,ne){if(e.timeoutHandle=-1,le=n.subtreeFlags,le&8192||(le&16785408)===16785408){le={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Qn},X0(n,h,le);var fe=(h&62914560)===h?kl-at():(h&4194048)===h?Z0-at():0;if(fe=Rw(le,fe),fe!==null){ca=h,e.cancelPendingCommit=fe(og.bind(null,e,n,h,r,l,d,v,A,V,ie,le,null,ee,ne)),Va(e,h,v,!J);return}}og(e,n,h,r,l,d,v,A,V)}function Z2(e){for(var n=e;;){var r=n.tag;if((r===0||r===11||r===15)&&n.flags&16384&&(r=n.updateQueue,r!==null&&(r=r.stores,r!==null)))for(var l=0;l<r.length;l++){var d=r[l],h=d.getSnapshot;d=d.value;try{if(!$t(h(),d))return!1}catch{return!1}}if(r=n.child,n.subtreeFlags&16384&&r!==null)r.return=n,n=r;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function Va(e,n,r,l){n&=~Kd,n&=~_s,e.suspendedLanes|=n,e.pingedLanes&=~n,l&&(e.warmLanes|=n),l=e.expirationTimes;for(var d=n;0<d;){var h=31-Ct(d),v=1<<h;l[h]=-1,d&=~v}r!==0&&Do(e,r,n)}function Dl(){return(He&6)===0?(Li(0),!1):!0}function af(){if(Te!==null){if(Ue===0)var e=Te.return;else e=Te,Kn=gs=null,bd(e),cr=null,bi=0,e=Te;for(;e!==null;)A0(e.alternate,e),e=e.return;Te=null}}function br(e,n){var r=e.timeoutHandle;r!==-1&&(e.timeoutHandle=-1,pw(r)),r=e.cancelPendingCommit,r!==null&&(e.cancelPendingCommit=null,r()),ca=0,af(),Ie=e,Te=r=Fn(e.current,null),ke=n,Ue=0,Yt=null,Ha=!1,gr=rs(e,n),Wd=!1,xr=Pt=Kd=_s=$a=et=0,Bt=Oi=null,Jd=!1,(n&8)!==0&&(n|=n&32);var l=e.entangledLanes;if(l!==0)for(e=e.entanglements,l&=n;0<l;){var d=31-Ct(l),h=1<<d;n|=e[d],l&=~h}return la=n,tl(),r}function eg(e,n){Ne=null,B.H=Ci,n===lr||n===cl?(n=gp(),Ue=3):n===od?(n=gp(),Ue=4):Ue=n===Od?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,Yt=n,Te===null&&(et=1,Nl(e,Jt(n,e.current)))}function tg(){var e=qt.current;return e===null?!0:(ke&4194048)===ke?an===null:(ke&62914560)===ke||(ke&536870912)!==0?e===an:!1}function ng(){var e=B.H;return B.H=Ci,e===null?Ci:e}function ag(){var e=B.A;return B.A=G2,e}function Ol(){et=4,Ha||(ke&4194048)!==ke&&qt.current!==null||(gr=!0),($a&134217727)===0&&(_s&134217727)===0||Ie===null||Va(Ie,ke,Pt,!1)}function sf(e,n,r){var l=He;He|=2;var d=ng(),h=ag();(Ie!==e||ke!==n)&&(Rl=null,br(e,n)),n=!1;var v=et;e:do try{if(Ue!==0&&Te!==null){var A=Te,V=Yt;switch(Ue){case 8:af(),v=6;break e;case 3:case 2:case 9:case 6:qt.current===null&&(n=!0);var J=Ue;if(Ue=0,Yt=null,vr(e,A,V,J),r&&gr){v=0;break e}break;default:J=Ue,Ue=0,Yt=null,vr(e,A,V,J)}}F2(),v=et;break}catch(ie){eg(e,ie)}while(!0);return n&&e.shellSuspendCounter++,Kn=gs=null,He=l,B.H=d,B.A=h,Te===null&&(Ie=null,ke=0,tl()),v}function F2(){for(;Te!==null;)sg(Te)}function W2(e,n){var r=He;He|=2;var l=ng(),d=ag();Ie!==e||ke!==n?(Rl=null,zl=at()+500,br(e,n)):gr=rs(e,n);e:do try{if(Ue!==0&&Te!==null){n=Te;var h=Yt;t:switch(Ue){case 1:Ue=0,Yt=null,vr(e,n,h,1);break;case 2:case 9:if(mp(h)){Ue=0,Yt=null,rg(n);break}n=function(){Ue!==2&&Ue!==9||Ie!==e||(Ue=7),kn(e)},h.then(n,n);break e;case 3:Ue=7;break e;case 4:Ue=5;break e;case 7:mp(h)?(Ue=0,Yt=null,rg(n)):(Ue=0,Yt=null,vr(e,n,h,7));break;case 5:var v=null;switch(Te.tag){case 26:v=Te.memoizedState;case 5:case 27:var A=Te;if(v?Pg(v):A.stateNode.complete){Ue=0,Yt=null;var V=A.sibling;if(V!==null)Te=V;else{var J=A.return;J!==null?(Te=J,Bl(J)):Te=null}break t}}Ue=0,Yt=null,vr(e,n,h,5);break;case 6:Ue=0,Yt=null,vr(e,n,h,6);break;case 8:af(),et=6;break e;default:throw Error(i(462))}}K2();break}catch(ie){eg(e,ie)}while(!0);return Kn=gs=null,B.H=l,B.A=d,He=r,Te!==null?0:(Ie=null,ke=0,tl(),et)}function K2(){for(;Te!==null&&!Sn();)sg(Te)}function sg(e){var n=T0(e.alternate,e,la);e.memoizedProps=e.pendingProps,n===null?Bl(e):Te=n}function rg(e){var n=e,r=n.alternate;switch(n.tag){case 15:case 0:n=j0(r,n,n.pendingProps,n.type,void 0,ke);break;case 11:n=j0(r,n,n.pendingProps,n.type.render,n.ref,ke);break;case 5:bd(n);default:A0(r,n),n=Te=ap(n,la),n=T0(r,n,la)}e.memoizedProps=e.pendingProps,n===null?Bl(e):Te=n}function vr(e,n,r,l){Kn=gs=null,bd(n),cr=null,bi=0;var d=n.return;try{if(U2(e,d,n,r,ke)){et=1,Nl(e,Jt(r,e.current)),Te=null;return}}catch(h){if(d!==null)throw Te=d,h;et=1,Nl(e,Jt(r,e.current)),Te=null;return}n.flags&32768?(De||l===1?e=!0:gr||(ke&536870912)!==0?e=!1:(Ha=e=!0,(l===2||l===9||l===3||l===6)&&(l=qt.current,l!==null&&l.tag===13&&(l.flags|=16384))),ig(n,e)):Bl(n)}function Bl(e){var n=e;do{if((n.flags&32768)!==0){ig(n,Ha);return}e=n.return;var r=Y2(n.alternate,n,la);if(r!==null){Te=r;return}if(n=n.sibling,n!==null){Te=n;return}Te=n=e}while(n!==null);et===0&&(et=5)}function ig(e,n){do{var r=P2(e.alternate,e);if(r!==null){r.flags&=32767,Te=r;return}if(r=e.return,r!==null&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!n&&(e=e.sibling,e!==null)){Te=e;return}Te=e=r}while(e!==null);et=6,Te=null}function og(e,n,r,l,d,h,v,A,V){e.cancelPendingCommit=null;do Ll();while(ft!==0);if((He&6)!==0)throw Error(i(327));if(n!==null){if(n===e.current)throw Error(i(177));if(h=n.lanes|n.childLanes,h|=Iu,ju(e,r,h,v,A,V),e===Ie&&(Te=Ie=null,ke=0),yr=n,qa=e,ca=r,ef=h,tf=d,F0=l,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,nw(Vn,function(){return fg(),null})):(e.callbackNode=null,e.callbackPriority=0),l=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||l){l=B.T,B.T=null,d=D.p,D.p=2,v=He,He|=4;try{X2(e,n,r)}finally{He=v,D.p=d,B.T=l}}ft=1,lg(),cg(),ug()}}function lg(){if(ft===1){ft=0;var e=qa,n=yr,r=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||r){r=B.T,B.T=null;var l=D.p;D.p=2;var d=He;He|=4;try{V0(n,e);var h=xf,v=Qm(e.containerInfo),A=h.focusedElem,V=h.selectionRange;if(v!==A&&A&&A.ownerDocument&&Gm(A.ownerDocument.documentElement,A)){if(V!==null&&qu(A)){var J=V.start,ie=V.end;if(ie===void 0&&(ie=J),"selectionStart"in A)A.selectionStart=J,A.selectionEnd=Math.min(ie,A.value.length);else{var le=A.ownerDocument||document,ee=le&&le.defaultView||window;if(ee.getSelection){var ne=ee.getSelection(),fe=A.textContent.length,we=Math.min(V.start,fe),Xe=V.end===void 0?we:Math.min(V.end,fe);!ne.extend&&we>Xe&&(v=Xe,Xe=we,we=v);var Z=Im(A,we),X=Im(A,Xe);if(Z&&X&&(ne.rangeCount!==1||ne.anchorNode!==Z.node||ne.anchorOffset!==Z.offset||ne.focusNode!==X.node||ne.focusOffset!==X.offset)){var K=le.createRange();K.setStart(Z.node,Z.offset),ne.removeAllRanges(),we>Xe?(ne.addRange(K),ne.extend(X.node,X.offset)):(K.setEnd(X.node,X.offset),ne.addRange(K))}}}}for(le=[],ne=A;ne=ne.parentNode;)ne.nodeType===1&&le.push({element:ne,left:ne.scrollLeft,top:ne.scrollTop});for(typeof A.focus=="function"&&A.focus(),A=0;A<le.length;A++){var oe=le[A];oe.element.scrollLeft=oe.left,oe.element.scrollTop=oe.top}}Zl=!!gf,xf=gf=null}finally{He=d,D.p=l,B.T=r}}e.current=n,ft=2}}function cg(){if(ft===2){ft=0;var e=qa,n=yr,r=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||r){r=B.T,B.T=null;var l=D.p;D.p=2;var d=He;He|=4;try{L0(e,n.alternate,n)}finally{He=d,D.p=l,B.T=r}}ft=3}}function ug(){if(ft===4||ft===3){ft=0,_n();var e=qa,n=yr,r=ca,l=F0;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?ft=5:(ft=0,yr=qa=null,dg(e,e.pendingLanes));var d=e.pendingLanes;if(d===0&&(Ua=null),ni(r),n=n.stateNode,Et&&typeof Et.onCommitFiberRoot=="function")try{Et.onCommitFiberRoot(ss,n,void 0,(n.current.flags&128)===128)}catch{}if(l!==null){n=B.T,d=D.p,D.p=2,B.T=null;try{for(var h=e.onRecoverableError,v=0;v<l.length;v++){var A=l[v];h(A.value,{componentStack:A.stack})}}finally{B.T=n,D.p=d}}(ca&3)!==0&&Ll(),kn(e),d=e.pendingLanes,(r&261930)!==0&&(d&42)!==0?e===nf?Bi++:(Bi=0,nf=e):Bi=0,Li(0)}}function dg(e,n){(e.pooledCacheLanes&=n)===0&&(n=e.pooledCache,n!=null&&(e.pooledCache=null,xi(n)))}function Ll(){return lg(),cg(),ug(),fg()}function fg(){if(ft!==5)return!1;var e=qa,n=ef;ef=0;var r=ni(ca),l=B.T,d=D.p;try{D.p=32>r?32:r,B.T=null,r=tf,tf=null;var h=qa,v=ca;if(ft=0,yr=qa=null,ca=0,(He&6)!==0)throw Error(i(331));var A=He;if(He|=4,G0(h.current),P0(h,h.current,v,r),He=A,Li(0,!1),Et&&typeof Et.onPostCommitFiberRoot=="function")try{Et.onPostCommitFiberRoot(ss,h)}catch{}return!0}finally{D.p=d,B.T=l,dg(e,n)}}function hg(e,n,r){n=Jt(r,n),n=Dd(e.stateNode,n,2),e=Da(e,n,2),e!==null&&(is(e,2),kn(e))}function qe(e,n,r){if(e.tag===3)hg(e,e,r);else for(;n!==null;){if(n.tag===3){hg(n,e,r);break}else if(n.tag===1){var l=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Ua===null||!Ua.has(l))){e=Jt(r,e),r=m0(2),l=Da(n,r,2),l!==null&&(p0(r,l,n,e),is(l,2),kn(l));break}}n=n.return}}function rf(e,n,r){var l=e.pingCache;if(l===null){l=e.pingCache=new Q2;var d=new Set;l.set(n,d)}else d=l.get(n),d===void 0&&(d=new Set,l.set(n,d));d.has(r)||(Wd=!0,d.add(r),e=J2.bind(null,e,n,r),n.then(e,e))}function J2(e,n,r){var l=e.pingCache;l!==null&&l.delete(n),e.pingedLanes|=e.suspendedLanes&r,e.warmLanes&=~r,Ie===e&&(ke&r)===r&&(et===4||et===3&&(ke&62914560)===ke&&300>at()-kl?(He&2)===0&&br(e,0):Kd|=r,xr===ke&&(xr=0)),kn(e)}function mg(e,n){n===0&&(n=Ro()),e=hs(e,n),e!==null&&(is(e,n),kn(e))}function ew(e){var n=e.memoizedState,r=0;n!==null&&(r=n.retryLane),mg(e,r)}function tw(e,n){var r=0;switch(e.tag){case 31:case 13:var l=e.stateNode,d=e.memoizedState;d!==null&&(r=d.retryLane);break;case 19:l=e.stateNode;break;case 22:l=e.stateNode._retryCache;break;default:throw Error(i(314))}l!==null&&l.delete(n),mg(e,r)}function nw(e,n){return ht(e,n)}var Hl=null,wr=null,of=!1,$l=!1,lf=!1,Ya=0;function kn(e){e!==wr&&e.next===null&&(wr===null?Hl=wr=e:wr=wr.next=e),$l=!0,of||(of=!0,sw())}function Li(e,n){if(!lf&&$l){lf=!0;do for(var r=!1,l=Hl;l!==null;){if(e!==0){var d=l.pendingLanes;if(d===0)var h=0;else{var v=l.suspendedLanes,A=l.pingedLanes;h=(1<<31-Ct(42|e)+1)-1,h&=d&~(v&~A),h=h&201326741?h&201326741|1:h?h|2:0}h!==0&&(r=!0,yg(l,h))}else h=ke,h=Ys(l,l===Ie?h:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(h&3)===0||rs(l,h)||(r=!0,yg(l,h));l=l.next}while(r);lf=!1}}function aw(){pg()}function pg(){$l=of=!1;var e=0;Ya!==0&&mw()&&(e=Ya);for(var n=at(),r=null,l=Hl;l!==null;){var d=l.next,h=gg(l,n);h===0?(l.next=null,r===null?Hl=d:r.next=d,d===null&&(wr=r)):(r=l,(e!==0||(h&3)!==0)&&($l=!0)),l=d}ft!==0&&ft!==5||Li(e),Ya!==0&&(Ya=0)}function gg(e,n){for(var r=e.suspendedLanes,l=e.pingedLanes,d=e.expirationTimes,h=e.pendingLanes&-62914561;0<h;){var v=31-Ct(h),A=1<<v,V=d[v];V===-1?((A&r)===0||(A&l)!==0)&&(d[v]=wu(A,n)):V<=n&&(e.expiredLanes|=A),h&=~A}if(n=Ie,r=ke,r=Ys(e,e===n?r:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l=e.callbackNode,r===0||e===n&&(Ue===2||Ue===9)||e.cancelPendingCommit!==null)return l!==null&&l!==null&&un(l),e.callbackNode=null,e.callbackPriority=0;if((r&3)===0||rs(e,r)){if(n=r&-r,n===e.callbackPriority)return n;switch(l!==null&&un(l),ni(r)){case 2:case 8:r=Wt;break;case 32:r=Vn;break;case 268435456:r=Yn;break;default:r=Vn}return l=xg.bind(null,e),r=ht(r,l),e.callbackPriority=n,e.callbackNode=r,n}return l!==null&&l!==null&&un(l),e.callbackPriority=2,e.callbackNode=null,2}function xg(e,n){if(ft!==0&&ft!==5)return e.callbackNode=null,e.callbackPriority=0,null;var r=e.callbackNode;if(Ll()&&e.callbackNode!==r)return null;var l=ke;return l=Ys(e,e===Ie?l:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l===0?null:(K0(e,l,n),gg(e,at()),e.callbackNode!=null&&e.callbackNode===r?xg.bind(null,e):null)}function yg(e,n){if(Ll())return null;K0(e,n,!0)}function sw(){gw(function(){(He&6)!==0?ht(dn,aw):pg()})}function cf(){if(Ya===0){var e=ir;e===0&&(e=Us,Us<<=1,(Us&261888)===0&&(Us=256)),Ya=e}return Ya}function bg(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Go(""+e)}function vg(e,n){var r=n.ownerDocument.createElement("input");return r.name=n.name,r.value=n.value,e.id&&r.setAttribute("form",e.id),n.parentNode.insertBefore(r,n),e=new FormData(e),r.parentNode.removeChild(r),e}function rw(e,n,r,l,d){if(n==="submit"&&r&&r.stateNode===d){var h=bg((d[wt]||null).action),v=l.submitter;v&&(n=(n=v[wt]||null)?bg(n.formAction):v.getAttribute("formAction"),n!==null&&(h=n,v=null));var A=new Wo("action","action",null,l,d);e.push({event:A,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Ya!==0){var V=v?vg(d,v):new FormData(d);Td(r,{pending:!0,data:V,method:d.method,action:h},null,V)}}else typeof h=="function"&&(A.preventDefault(),V=v?vg(d,v):new FormData(d),Td(r,{pending:!0,data:V,method:d.method,action:h},h,V))},currentTarget:d}]})}}for(var uf=0;uf<Xu.length;uf++){var df=Xu[uf],iw=df.toLowerCase(),ow=df[0].toUpperCase()+df.slice(1);mn(iw,"on"+ow)}mn(Wm,"onAnimationEnd"),mn(Km,"onAnimationIteration"),mn(Jm,"onAnimationStart"),mn("dblclick","onDoubleClick"),mn("focusin","onFocus"),mn("focusout","onBlur"),mn(N2,"onTransitionRun"),mn(S2,"onTransitionStart"),mn(_2,"onTransitionCancel"),mn(ep,"onTransitionEnd"),Ea("onMouseEnter",["mouseout","mouseover"]),Ea("onMouseLeave",["mouseout","mouseover"]),Ea("onPointerEnter",["pointerout","pointerover"]),Ea("onPointerLeave",["pointerout","pointerover"]),In("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),In("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),In("onBeforeInput",["compositionend","keypress","textInput","paste"]),In("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),In("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),In("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Hi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),lw=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Hi));function wg(e,n){n=(n&4)!==0;for(var r=0;r<e.length;r++){var l=e[r],d=l.event;l=l.listeners;e:{var h=void 0;if(n)for(var v=l.length-1;0<=v;v--){var A=l[v],V=A.instance,J=A.currentTarget;if(A=A.listener,V!==h&&d.isPropagationStopped())break e;h=A,d.currentTarget=J;try{h(d)}catch(ie){el(ie)}d.currentTarget=null,h=V}else for(v=0;v<l.length;v++){if(A=l[v],V=A.instance,J=A.currentTarget,A=A.listener,V!==h&&d.isPropagationStopped())break e;h=A,d.currentTarget=J;try{h(d)}catch(ie){el(ie)}d.currentTarget=null,h=V}}}}function Me(e,n){var r=n[Ps];r===void 0&&(r=n[Ps]=new Set);var l=e+"__bubble";r.has(l)||(jg(n,e,2,!1),r.add(l))}function ff(e,n,r){var l=0;n&&(l|=4),jg(r,e,l,n)}var Ul="_reactListening"+Math.random().toString(36).slice(2);function hf(e){if(!e[Ul]){e[Ul]=!0,qo.forEach(function(r){r!=="selectionchange"&&(lw.has(r)||ff(r,!1,e),ff(r,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[Ul]||(n[Ul]=!0,ff("selectionchange",!1,n))}}function jg(e,n,r,l){switch(Wg(n)){case 2:var d=Bw;break;case 8:d=Lw;break;default:d=Tf}r=d.bind(null,n,r,e),d=void 0,!zu||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(d=!0),l?d!==void 0?e.addEventListener(n,r,{capture:!0,passive:d}):e.addEventListener(n,r,!0):d!==void 0?e.addEventListener(n,r,{passive:d}):e.addEventListener(n,r,!1)}function mf(e,n,r,l,d){var h=l;if((n&1)===0&&(n&2)===0&&l!==null)e:for(;;){if(l===null)return;var v=l.tag;if(v===3||v===4){var A=l.stateNode.containerInfo;if(A===d)break;if(v===4)for(v=l.return;v!==null;){var V=v.tag;if((V===3||V===4)&&v.stateNode.containerInfo===d)return;v=v.return}for(;A!==null;){if(v=ja(A),v===null)return;if(V=v.tag,V===5||V===6||V===26||V===27){l=h=v;continue e}A=A.parentNode}}l=l.return}Cm(function(){var J=h,ie=Au(r),le=[];e:{var ee=tp.get(e);if(ee!==void 0){var ne=Wo,fe=e;switch(e){case"keypress":if(Zo(r)===0)break e;case"keydown":case"keyup":ne=t2;break;case"focusin":fe="focus",ne=Bu;break;case"focusout":fe="blur",ne=Bu;break;case"beforeblur":case"afterblur":ne=Bu;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ne=Am;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ne=Yv;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ne=s2;break;case Wm:case Km:case Jm:ne=Iv;break;case ep:ne=i2;break;case"scroll":case"scrollend":ne=qv;break;case"wheel":ne=l2;break;case"copy":case"cut":case"paste":ne=Qv;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ne=zm;break;case"toggle":case"beforetoggle":ne=u2}var we=(n&4)!==0,Xe=!we&&(e==="scroll"||e==="scrollend"),Z=we?ee!==null?ee+"Capture":null:ee;we=[];for(var X=J,K;X!==null;){var oe=X;if(K=oe.stateNode,oe=oe.tag,oe!==5&&oe!==26&&oe!==27||K===null||Z===null||(oe=ii(X,Z),oe!=null&&we.push($i(X,oe,K))),Xe)break;X=X.return}0<we.length&&(ee=new ne(ee,fe,null,r,ie),le.push({event:ee,listeners:we}))}}if((n&7)===0){e:{if(ee=e==="mouseover"||e==="pointerover",ne=e==="mouseout"||e==="pointerout",ee&&r!==Mu&&(fe=r.relatedTarget||r.fromElement)&&(ja(fe)||fe[Xn]))break e;if((ne||ee)&&(ee=ie.window===ie?ie:(ee=ie.ownerDocument)?ee.defaultView||ee.parentWindow:window,ne?(fe=r.relatedTarget||r.toElement,ne=J,fe=fe?ja(fe):null,fe!==null&&(Xe=u(fe),we=fe.tag,fe!==Xe||we!==5&&we!==27&&we!==6)&&(fe=null)):(ne=null,fe=J),ne!==fe)){if(we=Am,oe="onMouseLeave",Z="onMouseEnter",X="mouse",(e==="pointerout"||e==="pointerover")&&(we=zm,oe="onPointerLeave",Z="onPointerEnter",X="pointer"),Xe=ne==null?ee:Sa(ne),K=fe==null?ee:Sa(fe),ee=new we(oe,X+"leave",ne,r,ie),ee.target=Xe,ee.relatedTarget=K,oe=null,ja(ie)===J&&(we=new we(Z,X+"enter",fe,r,ie),we.target=K,we.relatedTarget=Xe,oe=we),Xe=oe,ne&&fe)t:{for(we=cw,Z=ne,X=fe,K=0,oe=Z;oe;oe=we(oe))K++;oe=0;for(var ye=X;ye;ye=we(ye))oe++;for(;0<K-oe;)Z=we(Z),K--;for(;0<oe-K;)X=we(X),oe--;for(;K--;){if(Z===X||X!==null&&Z===X.alternate){we=Z;break t}Z=we(Z),X=we(X)}we=null}else we=null;ne!==null&&Ng(le,ee,ne,we,!1),fe!==null&&Xe!==null&&Ng(le,Xe,fe,we,!0)}}e:{if(ee=J?Sa(J):window,ne=ee.nodeName&&ee.nodeName.toLowerCase(),ne==="select"||ne==="input"&&ee.type==="file")var Be=Um;else if(Hm(ee))if(qm)Be=v2;else{Be=y2;var me=x2}else ne=ee.nodeName,!ne||ne.toLowerCase()!=="input"||ee.type!=="checkbox"&&ee.type!=="radio"?J&&Tu(J.elementType)&&(Be=Um):Be=b2;if(Be&&(Be=Be(e,J))){$m(le,Be,r,ie);break e}me&&me(e,ee,J),e==="focusout"&&J&&ee.type==="number"&&J.memoizedProps.value!=null&&ri(ee,"number",ee.value)}switch(me=J?Sa(J):window,e){case"focusin":(Hm(me)||me.contentEditable==="true")&&(Ks=me,Vu=J,mi=null);break;case"focusout":mi=Vu=Ks=null;break;case"mousedown":Yu=!0;break;case"contextmenu":case"mouseup":case"dragend":Yu=!1,Zm(le,r,ie);break;case"selectionchange":if(j2)break;case"keydown":case"keyup":Zm(le,r,ie)}var _e;if(Hu)e:{switch(e){case"compositionstart":var ze="onCompositionStart";break e;case"compositionend":ze="onCompositionEnd";break e;case"compositionupdate":ze="onCompositionUpdate";break e}ze=void 0}else Ws?Bm(e,r)&&(ze="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(ze="onCompositionStart");ze&&(Rm&&r.locale!=="ko"&&(Ws||ze!=="onCompositionStart"?ze==="onCompositionEnd"&&Ws&&(_e=Tm()):(Ca=ie,Ru="value"in Ca?Ca.value:Ca.textContent,Ws=!0)),me=ql(J,ze),0<me.length&&(ze=new km(ze,e,null,r,ie),le.push({event:ze,listeners:me}),_e?ze.data=_e:(_e=Lm(r),_e!==null&&(ze.data=_e)))),(_e=f2?h2(e,r):m2(e,r))&&(ze=ql(J,"onBeforeInput"),0<ze.length&&(me=new km("onBeforeInput","beforeinput",null,r,ie),le.push({event:me,listeners:ze}),me.data=_e)),rw(le,e,J,r,ie)}wg(le,n)})}function $i(e,n,r){return{instance:e,listener:n,currentTarget:r}}function ql(e,n){for(var r=n+"Capture",l=[];e!==null;){var d=e,h=d.stateNode;if(d=d.tag,d!==5&&d!==26&&d!==27||h===null||(d=ii(e,r),d!=null&&l.unshift($i(e,d,h)),d=ii(e,n),d!=null&&l.push($i(e,d,h))),e.tag===3)return l;e=e.return}return[]}function cw(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Ng(e,n,r,l,d){for(var h=n._reactName,v=[];r!==null&&r!==l;){var A=r,V=A.alternate,J=A.stateNode;if(A=A.tag,V!==null&&V===l)break;A!==5&&A!==26&&A!==27||J===null||(V=J,d?(J=ii(r,h),J!=null&&v.unshift($i(r,J,V))):d||(J=ii(r,h),J!=null&&v.push($i(r,J,V)))),r=r.return}v.length!==0&&e.push({event:n,listeners:v})}var uw=/\r\n?/g,dw=/\u0000|\uFFFD/g;function Sg(e){return(typeof e=="string"?e:""+e).replace(uw,`
`).replace(dw,"")}function _g(e,n){return n=Sg(n),Sg(e)===n}function Pe(e,n,r,l,d,h){switch(r){case"children":typeof l=="string"?n==="body"||n==="textarea"&&l===""||Qs(e,l):(typeof l=="number"||typeof l=="bigint")&&n!=="body"&&Qs(e,""+l);break;case"className":Is(e,"class",l);break;case"tabIndex":Is(e,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Is(e,r,l);break;case"style":_m(e,l,h);break;case"data":if(n!=="object"){Is(e,"data",l);break}case"src":case"href":if(l===""&&(n!=="a"||r!=="href")){e.removeAttribute(r);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(r);break}l=Go(""+l),e.setAttribute(r,l);break;case"action":case"formAction":if(typeof l=="function"){e.setAttribute(r,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof h=="function"&&(r==="formAction"?(n!=="input"&&Pe(e,n,"name",d.name,d,null),Pe(e,n,"formEncType",d.formEncType,d,null),Pe(e,n,"formMethod",d.formMethod,d,null),Pe(e,n,"formTarget",d.formTarget,d,null)):(Pe(e,n,"encType",d.encType,d,null),Pe(e,n,"method",d.method,d,null),Pe(e,n,"target",d.target,d,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(r);break}l=Go(""+l),e.setAttribute(r,l);break;case"onClick":l!=null&&(e.onclick=Qn);break;case"onScroll":l!=null&&Me("scroll",e);break;case"onScrollEnd":l!=null&&Me("scrollend",e);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(i(61));if(r=l.__html,r!=null){if(d.children!=null)throw Error(i(60));e.innerHTML=r}}break;case"multiple":e.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":e.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){e.removeAttribute("xlink:href");break}r=Go(""+l),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(r,""+l):e.removeAttribute(r);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(r,""):e.removeAttribute(r);break;case"capture":case"download":l===!0?e.setAttribute(r,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(r,l):e.removeAttribute(r);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?e.setAttribute(r,l):e.removeAttribute(r);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?e.removeAttribute(r):e.setAttribute(r,l);break;case"popover":Me("beforetoggle",e),Me("toggle",e),Xs(e,"popover",l);break;case"xlinkActuate":hn(e,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":hn(e,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":hn(e,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":hn(e,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":hn(e,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":hn(e,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":hn(e,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":hn(e,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":hn(e,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Xs(e,"is",l);break;case"innerText":case"textContent":break;default:(!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(r=$v.get(r)||r,Xs(e,r,l))}}function pf(e,n,r,l,d,h){switch(r){case"style":_m(e,l,h);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(i(61));if(r=l.__html,r!=null){if(d.children!=null)throw Error(i(60));e.innerHTML=r}}break;case"children":typeof l=="string"?Qs(e,l):(typeof l=="number"||typeof l=="bigint")&&Qs(e,""+l);break;case"onScroll":l!=null&&Me("scroll",e);break;case"onScrollEnd":l!=null&&Me("scrollend",e);break;case"onClick":l!=null&&(e.onclick=Qn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Vo.hasOwnProperty(r))e:{if(r[0]==="o"&&r[1]==="n"&&(d=r.endsWith("Capture"),n=r.slice(2,d?r.length-7:void 0),h=e[wt]||null,h=h!=null?h[r]:null,typeof h=="function"&&e.removeEventListener(n,h,d),typeof l=="function")){typeof h!="function"&&h!==null&&(r in e?e[r]=null:e.hasAttribute(r)&&e.removeAttribute(r)),e.addEventListener(n,l,d);break e}r in e?e[r]=l:l===!0?e.setAttribute(r,""):Xs(e,r,l)}}}function vt(e,n,r){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Me("error",e),Me("load",e);var l=!1,d=!1,h;for(h in r)if(r.hasOwnProperty(h)){var v=r[h];if(v!=null)switch(h){case"src":l=!0;break;case"srcSet":d=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,n));default:Pe(e,n,h,v,r,null)}}d&&Pe(e,n,"srcSet",r.srcSet,r,null),l&&Pe(e,n,"src",r.src,r,null);return;case"input":Me("invalid",e);var A=h=v=d=null,V=null,J=null;for(l in r)if(r.hasOwnProperty(l)){var ie=r[l];if(ie!=null)switch(l){case"name":d=ie;break;case"type":v=ie;break;case"checked":V=ie;break;case"defaultChecked":J=ie;break;case"value":h=ie;break;case"defaultValue":A=ie;break;case"children":case"dangerouslySetInnerHTML":if(ie!=null)throw Error(i(137,n));break;default:Pe(e,n,l,ie,r,null)}}Io(e,h,A,V,J,v,d,!1);return;case"select":Me("invalid",e),l=v=h=null;for(d in r)if(r.hasOwnProperty(d)&&(A=r[d],A!=null))switch(d){case"value":h=A;break;case"defaultValue":v=A;break;case"multiple":l=A;default:Pe(e,n,d,A,r,null)}n=h,r=v,e.multiple=!!l,n!=null?Gn(e,!!l,n,!1):r!=null&&Gn(e,!!l,r,!0);return;case"textarea":Me("invalid",e),h=d=l=null;for(v in r)if(r.hasOwnProperty(v)&&(A=r[v],A!=null))switch(v){case"value":l=A;break;case"defaultValue":d=A;break;case"children":h=A;break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(i(91));break;default:Pe(e,n,v,A,r,null)}Nm(e,l,d,h);return;case"option":for(V in r)r.hasOwnProperty(V)&&(l=r[V],l!=null)&&(V==="selected"?e.selected=l&&typeof l!="function"&&typeof l!="symbol":Pe(e,n,V,l,r,null));return;case"dialog":Me("beforetoggle",e),Me("toggle",e),Me("cancel",e),Me("close",e);break;case"iframe":case"object":Me("load",e);break;case"video":case"audio":for(l=0;l<Hi.length;l++)Me(Hi[l],e);break;case"image":Me("error",e),Me("load",e);break;case"details":Me("toggle",e);break;case"embed":case"source":case"link":Me("error",e),Me("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(J in r)if(r.hasOwnProperty(J)&&(l=r[J],l!=null))switch(J){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,n));default:Pe(e,n,J,l,r,null)}return;default:if(Tu(n)){for(ie in r)r.hasOwnProperty(ie)&&(l=r[ie],l!==void 0&&pf(e,n,ie,l,r,void 0));return}}for(A in r)r.hasOwnProperty(A)&&(l=r[A],l!=null&&Pe(e,n,A,l,r,null))}function fw(e,n,r,l){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var d=null,h=null,v=null,A=null,V=null,J=null,ie=null;for(ne in r){var le=r[ne];if(r.hasOwnProperty(ne)&&le!=null)switch(ne){case"checked":break;case"value":break;case"defaultValue":V=le;default:l.hasOwnProperty(ne)||Pe(e,n,ne,null,l,le)}}for(var ee in l){var ne=l[ee];if(le=r[ee],l.hasOwnProperty(ee)&&(ne!=null||le!=null))switch(ee){case"type":h=ne;break;case"name":d=ne;break;case"checked":J=ne;break;case"defaultChecked":ie=ne;break;case"value":v=ne;break;case"defaultValue":A=ne;break;case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(i(137,n));break;default:ne!==le&&Pe(e,n,ee,ne,l,le)}}cs(e,v,A,V,J,ie,h,d);return;case"select":ne=v=A=ee=null;for(h in r)if(V=r[h],r.hasOwnProperty(h)&&V!=null)switch(h){case"value":break;case"multiple":ne=V;default:l.hasOwnProperty(h)||Pe(e,n,h,null,l,V)}for(d in l)if(h=l[d],V=r[d],l.hasOwnProperty(d)&&(h!=null||V!=null))switch(d){case"value":ee=h;break;case"defaultValue":A=h;break;case"multiple":v=h;default:h!==V&&Pe(e,n,d,h,l,V)}n=A,r=v,l=ne,ee!=null?Gn(e,!!r,ee,!1):!!l!=!!r&&(n!=null?Gn(e,!!r,n,!0):Gn(e,!!r,r?[]:"",!1));return;case"textarea":ne=ee=null;for(A in r)if(d=r[A],r.hasOwnProperty(A)&&d!=null&&!l.hasOwnProperty(A))switch(A){case"value":break;case"children":break;default:Pe(e,n,A,null,l,d)}for(v in l)if(d=l[v],h=r[v],l.hasOwnProperty(v)&&(d!=null||h!=null))switch(v){case"value":ee=d;break;case"defaultValue":ne=d;break;case"children":break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(i(91));break;default:d!==h&&Pe(e,n,v,d,l,h)}jm(e,ee,ne);return;case"option":for(var fe in r)ee=r[fe],r.hasOwnProperty(fe)&&ee!=null&&!l.hasOwnProperty(fe)&&(fe==="selected"?e.selected=!1:Pe(e,n,fe,null,l,ee));for(V in l)ee=l[V],ne=r[V],l.hasOwnProperty(V)&&ee!==ne&&(ee!=null||ne!=null)&&(V==="selected"?e.selected=ee&&typeof ee!="function"&&typeof ee!="symbol":Pe(e,n,V,ee,l,ne));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var we in r)ee=r[we],r.hasOwnProperty(we)&&ee!=null&&!l.hasOwnProperty(we)&&Pe(e,n,we,null,l,ee);for(J in l)if(ee=l[J],ne=r[J],l.hasOwnProperty(J)&&ee!==ne&&(ee!=null||ne!=null))switch(J){case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(i(137,n));break;default:Pe(e,n,J,ee,l,ne)}return;default:if(Tu(n)){for(var Xe in r)ee=r[Xe],r.hasOwnProperty(Xe)&&ee!==void 0&&!l.hasOwnProperty(Xe)&&pf(e,n,Xe,void 0,l,ee);for(ie in l)ee=l[ie],ne=r[ie],!l.hasOwnProperty(ie)||ee===ne||ee===void 0&&ne===void 0||pf(e,n,ie,ee,l,ne);return}}for(var Z in r)ee=r[Z],r.hasOwnProperty(Z)&&ee!=null&&!l.hasOwnProperty(Z)&&Pe(e,n,Z,null,l,ee);for(le in l)ee=l[le],ne=r[le],!l.hasOwnProperty(le)||ee===ne||ee==null&&ne==null||Pe(e,n,le,ee,l,ne)}function Eg(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function hw(){if(typeof performance.getEntriesByType=="function"){for(var e=0,n=0,r=performance.getEntriesByType("resource"),l=0;l<r.length;l++){var d=r[l],h=d.transferSize,v=d.initiatorType,A=d.duration;if(h&&A&&Eg(v)){for(v=0,A=d.responseEnd,l+=1;l<r.length;l++){var V=r[l],J=V.startTime;if(J>A)break;var ie=V.transferSize,le=V.initiatorType;ie&&Eg(le)&&(V=V.responseEnd,v+=ie*(V<A?1:(A-J)/(V-J)))}if(--l,n+=8*(h+v)/(d.duration/1e3),e++,10<e)break}}if(0<e)return n/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var gf=null,xf=null;function Vl(e){return e.nodeType===9?e:e.ownerDocument}function Cg(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Tg(e,n){if(e===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&n==="foreignObject"?0:e}function yf(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var bf=null;function mw(){var e=window.event;return e&&e.type==="popstate"?e===bf?!1:(bf=e,!0):(bf=null,!1)}var Mg=typeof setTimeout=="function"?setTimeout:void 0,pw=typeof clearTimeout=="function"?clearTimeout:void 0,Ag=typeof Promise=="function"?Promise:void 0,gw=typeof queueMicrotask=="function"?queueMicrotask:typeof Ag<"u"?function(e){return Ag.resolve(null).then(e).catch(xw)}:Mg;function xw(e){setTimeout(function(){throw e})}function Pa(e){return e==="head"}function kg(e,n){var r=n,l=0;do{var d=r.nextSibling;if(e.removeChild(r),d&&d.nodeType===8)if(r=d.data,r==="/$"||r==="/&"){if(l===0){e.removeChild(d),_r(n);return}l--}else if(r==="$"||r==="$?"||r==="$~"||r==="$!"||r==="&")l++;else if(r==="html")Ui(e.ownerDocument.documentElement);else if(r==="head"){r=e.ownerDocument.head,Ui(r);for(var h=r.firstChild;h;){var v=h.nextSibling,A=h.nodeName;h[os]||A==="SCRIPT"||A==="STYLE"||A==="LINK"&&h.rel.toLowerCase()==="stylesheet"||r.removeChild(h),h=v}}else r==="body"&&Ui(e.ownerDocument.body);r=d}while(r);_r(n)}function zg(e,n){var r=e;e=0;do{var l=r.nextSibling;if(r.nodeType===1?n?(r._stashedDisplay=r.style.display,r.style.display="none"):(r.style.display=r._stashedDisplay||"",r.getAttribute("style")===""&&r.removeAttribute("style")):r.nodeType===3&&(n?(r._stashedText=r.nodeValue,r.nodeValue=""):r.nodeValue=r._stashedText||""),l&&l.nodeType===8)if(r=l.data,r==="/$"){if(e===0)break;e--}else r!=="$"&&r!=="$?"&&r!=="$~"&&r!=="$!"||e++;r=l}while(r)}function vf(e){var n=e.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var r=n;switch(n=n.nextSibling,r.nodeName){case"HTML":case"HEAD":case"BODY":vf(r),ai(r);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(r.rel.toLowerCase()==="stylesheet")continue}e.removeChild(r)}}function yw(e,n,r,l){for(;e.nodeType===1;){var d=r;if(e.nodeName.toLowerCase()!==n.toLowerCase()){if(!l&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(l){if(!e[os])switch(n){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(h=e.getAttribute("rel"),h==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(h!==d.rel||e.getAttribute("href")!==(d.href==null||d.href===""?null:d.href)||e.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin)||e.getAttribute("title")!==(d.title==null?null:d.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(h=e.getAttribute("src"),(h!==(d.src==null?null:d.src)||e.getAttribute("type")!==(d.type==null?null:d.type)||e.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin))&&h&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(n==="input"&&e.type==="hidden"){var h=d.name==null?null:""+d.name;if(d.type==="hidden"&&e.getAttribute("name")===h)return e}else return e;if(e=sn(e.nextSibling),e===null)break}return null}function bw(e,n,r){if(n==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!r||(e=sn(e.nextSibling),e===null))return null;return e}function Rg(e,n){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=sn(e.nextSibling),e===null))return null;return e}function wf(e){return e.data==="$?"||e.data==="$~"}function jf(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function vw(e,n){var r=e.ownerDocument;if(e.data==="$~")e._reactRetry=n;else if(e.data!=="$?"||r.readyState!=="loading")n();else{var l=function(){n(),r.removeEventListener("DOMContentLoaded",l)};r.addEventListener("DOMContentLoaded",l),e._reactRetry=l}}function sn(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"||n==="F!"||n==="F")break;if(n==="/$"||n==="/&")return null}}return e}var Nf=null;function Dg(e){e=e.nextSibling;for(var n=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"||r==="/&"){if(n===0)return sn(e.nextSibling);n--}else r!=="$"&&r!=="$!"&&r!=="$?"&&r!=="$~"&&r!=="&"||n++}e=e.nextSibling}return null}function Og(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"){if(n===0)return e;n--}else r!=="/$"&&r!=="/&"||n++}e=e.previousSibling}return null}function Bg(e,n,r){switch(n=Vl(r),e){case"html":if(e=n.documentElement,!e)throw Error(i(452));return e;case"head":if(e=n.head,!e)throw Error(i(453));return e;case"body":if(e=n.body,!e)throw Error(i(454));return e;default:throw Error(i(451))}}function Ui(e){for(var n=e.attributes;n.length;)e.removeAttributeNode(n[0]);ai(e)}var rn=new Map,Lg=new Set;function Yl(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var ua=D.d;D.d={f:ww,r:jw,D:Nw,C:Sw,L:_w,m:Ew,X:Tw,S:Cw,M:Mw};function ww(){var e=ua.f(),n=Dl();return e||n}function jw(e){var n=Na(e);n!==null&&n.tag===5&&n.type==="form"?e0(n):ua.r(e)}var jr=typeof document>"u"?null:document;function Hg(e,n,r){var l=jr;if(l&&typeof n=="string"&&n){var d=kt(n);d='link[rel="'+e+'"][href="'+d+'"]',typeof r=="string"&&(d+='[crossorigin="'+r+'"]'),Lg.has(d)||(Lg.add(d),e={rel:e,crossOrigin:r,href:n},l.querySelector(d)===null&&(n=l.createElement("link"),vt(n,"link",e),st(n),l.head.appendChild(n)))}}function Nw(e){ua.D(e),Hg("dns-prefetch",e,null)}function Sw(e,n){ua.C(e,n),Hg("preconnect",e,n)}function _w(e,n,r){ua.L(e,n,r);var l=jr;if(l&&e&&n){var d='link[rel="preload"][as="'+kt(n)+'"]';n==="image"&&r&&r.imageSrcSet?(d+='[imagesrcset="'+kt(r.imageSrcSet)+'"]',typeof r.imageSizes=="string"&&(d+='[imagesizes="'+kt(r.imageSizes)+'"]')):d+='[href="'+kt(e)+'"]';var h=d;switch(n){case"style":h=Nr(e);break;case"script":h=Sr(e)}rn.has(h)||(e=x({rel:"preload",href:n==="image"&&r&&r.imageSrcSet?void 0:e,as:n},r),rn.set(h,e),l.querySelector(d)!==null||n==="style"&&l.querySelector(qi(h))||n==="script"&&l.querySelector(Vi(h))||(n=l.createElement("link"),vt(n,"link",e),st(n),l.head.appendChild(n)))}}function Ew(e,n){ua.m(e,n);var r=jr;if(r&&e){var l=n&&typeof n.as=="string"?n.as:"script",d='link[rel="modulepreload"][as="'+kt(l)+'"][href="'+kt(e)+'"]',h=d;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":h=Sr(e)}if(!rn.has(h)&&(e=x({rel:"modulepreload",href:e},n),rn.set(h,e),r.querySelector(d)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(r.querySelector(Vi(h)))return}l=r.createElement("link"),vt(l,"link",e),st(l),r.head.appendChild(l)}}}function Cw(e,n,r){ua.S(e,n,r);var l=jr;if(l&&e){var d=_a(l).hoistableStyles,h=Nr(e);n=n||"default";var v=d.get(h);if(!v){var A={loading:0,preload:null};if(v=l.querySelector(qi(h)))A.loading=5;else{e=x({rel:"stylesheet",href:e,"data-precedence":n},r),(r=rn.get(h))&&Sf(e,r);var V=v=l.createElement("link");st(V),vt(V,"link",e),V._p=new Promise(function(J,ie){V.onload=J,V.onerror=ie}),V.addEventListener("load",function(){A.loading|=1}),V.addEventListener("error",function(){A.loading|=2}),A.loading|=4,Pl(v,n,l)}v={type:"stylesheet",instance:v,count:1,state:A},d.set(h,v)}}}function Tw(e,n){ua.X(e,n);var r=jr;if(r&&e){var l=_a(r).hoistableScripts,d=Sr(e),h=l.get(d);h||(h=r.querySelector(Vi(d)),h||(e=x({src:e,async:!0},n),(n=rn.get(d))&&_f(e,n),h=r.createElement("script"),st(h),vt(h,"link",e),r.head.appendChild(h)),h={type:"script",instance:h,count:1,state:null},l.set(d,h))}}function Mw(e,n){ua.M(e,n);var r=jr;if(r&&e){var l=_a(r).hoistableScripts,d=Sr(e),h=l.get(d);h||(h=r.querySelector(Vi(d)),h||(e=x({src:e,async:!0,type:"module"},n),(n=rn.get(d))&&_f(e,n),h=r.createElement("script"),st(h),vt(h,"link",e),r.head.appendChild(h)),h={type:"script",instance:h,count:1,state:null},l.set(d,h))}}function $g(e,n,r,l){var d=(d=de.current)?Yl(d):null;if(!d)throw Error(i(446));switch(e){case"meta":case"title":return null;case"style":return typeof r.precedence=="string"&&typeof r.href=="string"?(n=Nr(r.href),r=_a(d).hoistableStyles,l=r.get(n),l||(l={type:"style",instance:null,count:0,state:null},r.set(n,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(r.rel==="stylesheet"&&typeof r.href=="string"&&typeof r.precedence=="string"){e=Nr(r.href);var h=_a(d).hoistableStyles,v=h.get(e);if(v||(d=d.ownerDocument||d,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},h.set(e,v),(h=d.querySelector(qi(e)))&&!h._p&&(v.instance=h,v.state.loading=5),rn.has(e)||(r={rel:"preload",as:"style",href:r.href,crossOrigin:r.crossOrigin,integrity:r.integrity,media:r.media,hrefLang:r.hrefLang,referrerPolicy:r.referrerPolicy},rn.set(e,r),h||Aw(d,e,r,v.state))),n&&l===null)throw Error(i(528,""));return v}if(n&&l!==null)throw Error(i(529,""));return null;case"script":return n=r.async,r=r.src,typeof r=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=Sr(r),r=_a(d).hoistableScripts,l=r.get(n),l||(l={type:"script",instance:null,count:0,state:null},r.set(n,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,e))}}function Nr(e){return'href="'+kt(e)+'"'}function qi(e){return'link[rel="stylesheet"]['+e+"]"}function Ug(e){return x({},e,{"data-precedence":e.precedence,precedence:null})}function Aw(e,n,r,l){e.querySelector('link[rel="preload"][as="style"]['+n+"]")?l.loading=1:(n=e.createElement("link"),l.preload=n,n.addEventListener("load",function(){return l.loading|=1}),n.addEventListener("error",function(){return l.loading|=2}),vt(n,"link",r),st(n),e.head.appendChild(n))}function Sr(e){return'[src="'+kt(e)+'"]'}function Vi(e){return"script[async]"+e}function qg(e,n,r){if(n.count++,n.instance===null)switch(n.type){case"style":var l=e.querySelector('style[data-href~="'+kt(r.href)+'"]');if(l)return n.instance=l,st(l),l;var d=x({},r,{"data-href":r.href,"data-precedence":r.precedence,href:null,precedence:null});return l=(e.ownerDocument||e).createElement("style"),st(l),vt(l,"style",d),Pl(l,r.precedence,e),n.instance=l;case"stylesheet":d=Nr(r.href);var h=e.querySelector(qi(d));if(h)return n.state.loading|=4,n.instance=h,st(h),h;l=Ug(r),(d=rn.get(d))&&Sf(l,d),h=(e.ownerDocument||e).createElement("link"),st(h);var v=h;return v._p=new Promise(function(A,V){v.onload=A,v.onerror=V}),vt(h,"link",l),n.state.loading|=4,Pl(h,r.precedence,e),n.instance=h;case"script":return h=Sr(r.src),(d=e.querySelector(Vi(h)))?(n.instance=d,st(d),d):(l=r,(d=rn.get(h))&&(l=x({},r),_f(l,d)),e=e.ownerDocument||e,d=e.createElement("script"),st(d),vt(d,"link",l),e.head.appendChild(d),n.instance=d);case"void":return null;default:throw Error(i(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(l=n.instance,n.state.loading|=4,Pl(l,r.precedence,e));return n.instance}function Pl(e,n,r){for(var l=r.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),d=l.length?l[l.length-1]:null,h=d,v=0;v<l.length;v++){var A=l[v];if(A.dataset.precedence===n)h=A;else if(h!==d)break}h?h.parentNode.insertBefore(e,h.nextSibling):(n=r.nodeType===9?r.head:r,n.insertBefore(e,n.firstChild))}function Sf(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.title==null&&(e.title=n.title)}function _f(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.integrity==null&&(e.integrity=n.integrity)}var Xl=null;function Vg(e,n,r){if(Xl===null){var l=new Map,d=Xl=new Map;d.set(r,l)}else d=Xl,l=d.get(r),l||(l=new Map,d.set(r,l));if(l.has(e))return l;for(l.set(e,null),r=r.getElementsByTagName(e),d=0;d<r.length;d++){var h=r[d];if(!(h[os]||h[dt]||e==="link"&&h.getAttribute("rel")==="stylesheet")&&h.namespaceURI!=="http://www.w3.org/2000/svg"){var v=h.getAttribute(n)||"";v=e+v;var A=l.get(v);A?A.push(h):l.set(v,[h])}}return l}function Yg(e,n,r){e=e.ownerDocument||e,e.head.insertBefore(r,n==="title"?e.querySelector("head > title"):null)}function kw(e,n,r){if(r===1||n.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;return n.rel==="stylesheet"?(e=n.disabled,typeof n.precedence=="string"&&e==null):!0;case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function Pg(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function zw(e,n,r,l){if(r.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var d=Nr(l.href),h=n.querySelector(qi(d));if(h){n=h._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(e.count++,e=Il.bind(e),n.then(e,e)),r.state.loading|=4,r.instance=h,st(h);return}h=n.ownerDocument||n,l=Ug(l),(d=rn.get(d))&&Sf(l,d),h=h.createElement("link"),st(h);var v=h;v._p=new Promise(function(A,V){v.onload=A,v.onerror=V}),vt(h,"link",l),r.instance=h}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(r,n),(n=r.state.preload)&&(r.state.loading&3)===0&&(e.count++,r=Il.bind(e),n.addEventListener("load",r),n.addEventListener("error",r))}}var Ef=0;function Rw(e,n){return e.stylesheets&&e.count===0&&Ql(e,e.stylesheets),0<e.count||0<e.imgCount?function(r){var l=setTimeout(function(){if(e.stylesheets&&Ql(e,e.stylesheets),e.unsuspend){var h=e.unsuspend;e.unsuspend=null,h()}},6e4+n);0<e.imgBytes&&Ef===0&&(Ef=62500*hw());var d=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Ql(e,e.stylesheets),e.unsuspend)){var h=e.unsuspend;e.unsuspend=null,h()}},(e.imgBytes>Ef?50:800)+n);return e.unsuspend=r,function(){e.unsuspend=null,clearTimeout(l),clearTimeout(d)}}:null}function Il(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Ql(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Gl=null;function Ql(e,n){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Gl=new Map,n.forEach(Dw,e),Gl=null,Il.call(e))}function Dw(e,n){if(!(n.state.loading&4)){var r=Gl.get(e);if(r)var l=r.get(null);else{r=new Map,Gl.set(e,r);for(var d=e.querySelectorAll("link[data-precedence],style[data-precedence]"),h=0;h<d.length;h++){var v=d[h];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(r.set(v.dataset.precedence,v),l=v)}l&&r.set(null,l)}d=n.instance,v=d.getAttribute("data-precedence"),h=r.get(v)||l,h===l&&r.set(null,d),r.set(v,d),this.count++,l=Il.bind(this),d.addEventListener("load",l),d.addEventListener("error",l),h?h.parentNode.insertBefore(d,h.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(d,e.firstChild)),n.state.loading|=4}}var Yi={$$typeof:T,Provider:null,Consumer:null,_currentValue:Y,_currentValue2:Y,_threadCount:0};function Ow(e,n,r,l,d,h,v,A,V){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ei(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ei(0),this.hiddenUpdates=ei(null),this.identifierPrefix=l,this.onUncaughtError=d,this.onCaughtError=h,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=V,this.incompleteTransitions=new Map}function Xg(e,n,r,l,d,h,v,A,V,J,ie,le){return e=new Ow(e,n,r,v,V,J,ie,le,A),n=1,h===!0&&(n|=24),h=Ut(3,null,null,n),e.current=h,h.stateNode=e,n=sd(),n.refCount++,e.pooledCache=n,n.refCount++,h.memoizedState={element:l,isDehydrated:r,cache:n},ld(h),e}function Ig(e){return e?(e=tr,e):tr}function Gg(e,n,r,l,d,h){d=Ig(d),l.context===null?l.context=d:l.pendingContext=d,l=Ra(n),l.payload={element:r},h=h===void 0?null:h,h!==null&&(l.callback=h),r=Da(e,l,n),r!==null&&(Lt(r,e,n),wi(r,e,n))}function Qg(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<n?r:n}}function Cf(e,n){Qg(e,n),(e=e.alternate)&&Qg(e,n)}function Zg(e){if(e.tag===13||e.tag===31){var n=hs(e,67108864);n!==null&&Lt(n,e,67108864),Cf(e,67108864)}}function Fg(e){if(e.tag===13||e.tag===31){var n=Xt();n=ti(n);var r=hs(e,n);r!==null&&Lt(r,e,n),Cf(e,n)}}var Zl=!0;function Bw(e,n,r,l){var d=B.T;B.T=null;var h=D.p;try{D.p=2,Tf(e,n,r,l)}finally{D.p=h,B.T=d}}function Lw(e,n,r,l){var d=B.T;B.T=null;var h=D.p;try{D.p=8,Tf(e,n,r,l)}finally{D.p=h,B.T=d}}function Tf(e,n,r,l){if(Zl){var d=Mf(l);if(d===null)mf(e,n,l,Fl,r),Kg(e,l);else if($w(d,e,n,r,l))l.stopPropagation();else if(Kg(e,l),n&4&&-1<Hw.indexOf(e)){for(;d!==null;){var h=Na(d);if(h!==null)switch(h.tag){case 3:if(h=h.stateNode,h.current.memoizedState.isDehydrated){var v=Pn(h.pendingLanes);if(v!==0){var A=h;for(A.pendingLanes|=2,A.entangledLanes|=2;v;){var V=1<<31-Ct(v);A.entanglements[1]|=V,v&=~V}kn(h),(He&6)===0&&(zl=at()+500,Li(0))}}break;case 31:case 13:A=hs(h,2),A!==null&&Lt(A,h,2),Dl(),Cf(h,2)}if(h=Mf(l),h===null&&mf(e,n,l,Fl,r),h===d)break;d=h}d!==null&&l.stopPropagation()}else mf(e,n,l,null,r)}}function Mf(e){return e=Au(e),Af(e)}var Fl=null;function Af(e){if(Fl=null,e=ja(e),e!==null){var n=u(e);if(n===null)e=null;else{var r=n.tag;if(r===13){if(e=f(n),e!==null)return e;e=null}else if(r===31){if(e=m(n),e!==null)return e;e=null}else if(r===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null)}}return Fl=e,null}function Wg(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(qn()){case dn:return 2;case Wt:return 8;case Vn:case fn:return 32;case Yn:return 268435456;default:return 32}default:return 32}}var kf=!1,Xa=null,Ia=null,Ga=null,Pi=new Map,Xi=new Map,Qa=[],Hw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Kg(e,n){switch(e){case"focusin":case"focusout":Xa=null;break;case"dragenter":case"dragleave":Ia=null;break;case"mouseover":case"mouseout":Ga=null;break;case"pointerover":case"pointerout":Pi.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xi.delete(n.pointerId)}}function Ii(e,n,r,l,d,h){return e===null||e.nativeEvent!==h?(e={blockedOn:n,domEventName:r,eventSystemFlags:l,nativeEvent:h,targetContainers:[d]},n!==null&&(n=Na(n),n!==null&&Zg(n)),e):(e.eventSystemFlags|=l,n=e.targetContainers,d!==null&&n.indexOf(d)===-1&&n.push(d),e)}function $w(e,n,r,l,d){switch(n){case"focusin":return Xa=Ii(Xa,e,n,r,l,d),!0;case"dragenter":return Ia=Ii(Ia,e,n,r,l,d),!0;case"mouseover":return Ga=Ii(Ga,e,n,r,l,d),!0;case"pointerover":var h=d.pointerId;return Pi.set(h,Ii(Pi.get(h)||null,e,n,r,l,d)),!0;case"gotpointercapture":return h=d.pointerId,Xi.set(h,Ii(Xi.get(h)||null,e,n,r,l,d)),!0}return!1}function Jg(e){var n=ja(e.target);if(n!==null){var r=u(n);if(r!==null){if(n=r.tag,n===13){if(n=f(r),n!==null){e.blockedOn=n,Ho(e.priority,function(){Fg(r)});return}}else if(n===31){if(n=m(r),n!==null){e.blockedOn=n,Ho(e.priority,function(){Fg(r)});return}}else if(n===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Wl(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var r=Mf(e.nativeEvent);if(r===null){r=e.nativeEvent;var l=new r.constructor(r.type,r);Mu=l,r.target.dispatchEvent(l),Mu=null}else return n=Na(r),n!==null&&Zg(n),e.blockedOn=r,!1;n.shift()}return!0}function ex(e,n,r){Wl(e)&&r.delete(n)}function Uw(){kf=!1,Xa!==null&&Wl(Xa)&&(Xa=null),Ia!==null&&Wl(Ia)&&(Ia=null),Ga!==null&&Wl(Ga)&&(Ga=null),Pi.forEach(ex),Xi.forEach(ex)}function Kl(e,n){e.blockedOn===n&&(e.blockedOn=null,kf||(kf=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,Uw)))}var Jl=null;function tx(e){Jl!==e&&(Jl=e,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Jl===e&&(Jl=null);for(var n=0;n<e.length;n+=3){var r=e[n],l=e[n+1],d=e[n+2];if(typeof l!="function"){if(Af(l||r)===null)continue;break}var h=Na(r);h!==null&&(e.splice(n,3),n-=3,Td(h,{pending:!0,data:d,method:r.method,action:l},l,d))}}))}function _r(e){function n(V){return Kl(V,e)}Xa!==null&&Kl(Xa,e),Ia!==null&&Kl(Ia,e),Ga!==null&&Kl(Ga,e),Pi.forEach(n),Xi.forEach(n);for(var r=0;r<Qa.length;r++){var l=Qa[r];l.blockedOn===e&&(l.blockedOn=null)}for(;0<Qa.length&&(r=Qa[0],r.blockedOn===null);)Jg(r),r.blockedOn===null&&Qa.shift();if(r=(e.ownerDocument||e).$$reactFormReplay,r!=null)for(l=0;l<r.length;l+=3){var d=r[l],h=r[l+1],v=d[wt]||null;if(typeof h=="function")v||tx(r);else if(v){var A=null;if(h&&h.hasAttribute("formAction")){if(d=h,v=h[wt]||null)A=v.formAction;else if(Af(d)!==null)continue}else A=v.action;typeof A=="function"?r[l+1]=A:(r.splice(l,3),l-=3),tx(r)}}}function nx(){function e(h){h.canIntercept&&h.info==="react-transition"&&h.intercept({handler:function(){return new Promise(function(v){return d=v})},focusReset:"manual",scroll:"manual"})}function n(){d!==null&&(d(),d=null),l||setTimeout(r,20)}function r(){if(!l&&!navigation.transition){var h=navigation.currentEntry;h&&h.url!=null&&navigation.navigate(h.url,{state:h.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,d=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",n),navigation.addEventListener("navigateerror",n),setTimeout(r,100),function(){l=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",n),navigation.removeEventListener("navigateerror",n),d!==null&&(d(),d=null)}}}function zf(e){this._internalRoot=e}ec.prototype.render=zf.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(i(409));var r=n.current,l=Xt();Gg(r,l,e,n,null,null)},ec.prototype.unmount=zf.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;Gg(e.current,2,null,e,null,null),Dl(),n[Xn]=null}};function ec(e){this._internalRoot=e}ec.prototype.unstable_scheduleHydration=function(e){if(e){var n=Lo();e={blockedOn:null,target:e,priority:n};for(var r=0;r<Qa.length&&n!==0&&n<Qa[r].priority;r++);Qa.splice(r,0,e),r===0&&Jg(e)}};var ax=a.version;if(ax!=="19.2.3")throw Error(i(527,ax,"19.2.3"));D.findDOMNode=function(e){var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(i(188)):(e=Object.keys(e).join(","),Error(i(268,e)));return e=g(n),e=e!==null?y(e):null,e=e===null?null:e.stateNode,e};var qw={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:B,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var tc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!tc.isDisabled&&tc.supportsFiber)try{ss=tc.inject(qw),Et=tc}catch{}}return Qi.createRoot=function(e,n){if(!c(e))throw Error(i(299));var r=!1,l="",d=u0,h=d0,v=f0;return n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onUncaughtError!==void 0&&(d=n.onUncaughtError),n.onCaughtError!==void 0&&(h=n.onCaughtError),n.onRecoverableError!==void 0&&(v=n.onRecoverableError)),n=Xg(e,1,!1,null,null,r,l,null,d,h,v,nx),e[Xn]=n.current,hf(e),new zf(n)},Qi.hydrateRoot=function(e,n,r){if(!c(e))throw Error(i(299));var l=!1,d="",h=u0,v=d0,A=f0,V=null;return r!=null&&(r.unstable_strictMode===!0&&(l=!0),r.identifierPrefix!==void 0&&(d=r.identifierPrefix),r.onUncaughtError!==void 0&&(h=r.onUncaughtError),r.onCaughtError!==void 0&&(v=r.onCaughtError),r.onRecoverableError!==void 0&&(A=r.onRecoverableError),r.formState!==void 0&&(V=r.formState)),n=Xg(e,1,!0,n,r??null,l,d,V,h,v,A,nx),n.context=Ig(null),r=n.current,l=Xt(),l=ti(l),d=Ra(l),d.callback=null,Da(r,d,l),r=l,n.current.lanes=r,is(n,r),kn(n),e[Xn]=n.current,hf(e),new ec(n)},Qi.version="19.2.3",Qi}var hx;function Fw(){if(hx)return Of.exports;hx=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(a){console.error(a)}}return t(),Of.exports=Zw(),Of.exports}var Ww=Fw();const Kw=Rh(Ww);var mx="popstate";function Jw(t={}){function a(i,c){let{pathname:u,search:f,hash:m}=i.location;return oh("",{pathname:u,search:f,hash:m},c.state&&c.state.usr||null,c.state&&c.state.key||"default")}function s(i,c){return typeof c=="string"?c:io(c)}return tj(a,s,null,t)}function Fe(t,a){if(t===!1||t===null||typeof t>"u")throw new Error(a)}function Gt(t,a){if(!t){typeof console<"u"&&console.warn(a);try{throw new Error(a)}catch{}}}function ej(){return Math.random().toString(36).substring(2,10)}function px(t,a){return{usr:t.state,key:t.key,idx:a}}function oh(t,a,s=null,i){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof a=="string"?Gr(a):a,state:s,key:a&&a.key||i||ej()}}function io({pathname:t="/",search:a="",hash:s=""}){return a&&a!=="?"&&(t+=a.charAt(0)==="?"?a:"?"+a),s&&s!=="#"&&(t+=s.charAt(0)==="#"?s:"#"+s),t}function Gr(t){let a={};if(t){let s=t.indexOf("#");s>=0&&(a.hash=t.substring(s),t=t.substring(0,s));let i=t.indexOf("?");i>=0&&(a.search=t.substring(i),t=t.substring(0,i)),t&&(a.pathname=t)}return a}function tj(t,a,s,i={}){let{window:c=document.defaultView,v5Compat:u=!1}=i,f=c.history,m="POP",p=null,g=y();g==null&&(g=0,f.replaceState({...f.state,idx:g},""));function y(){return(f.state||{idx:null}).idx}function x(){m="POP";let N=y(),E=N==null?null:N-g;g=N,p&&p({action:m,location:C.location,delta:E})}function b(N,E){m="PUSH";let z=oh(C.location,N,E);g=y()+1;let T=px(z,g),k=C.createHref(z);try{f.pushState(T,"",k)}catch(w){if(w instanceof DOMException&&w.name==="DataCloneError")throw w;c.location.assign(k)}u&&p&&p({action:m,location:C.location,delta:1})}function S(N,E){m="REPLACE";let z=oh(C.location,N,E);g=y();let T=px(z,g),k=C.createHref(z);f.replaceState(T,"",k),u&&p&&p({action:m,location:C.location,delta:0})}function _(N){return nj(N)}let C={get action(){return m},get location(){return t(c,f)},listen(N){if(p)throw new Error("A history only accepts one active listener");return c.addEventListener(mx,x),p=N,()=>{c.removeEventListener(mx,x),p=null}},createHref(N){return a(c,N)},createURL:_,encodeLocation(N){let E=_(N);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:b,replace:S,go(N){return f.go(N)}};return C}function nj(t,a=!1){let s="http://localhost";typeof window<"u"&&(s=window.location.origin!=="null"?window.location.origin:window.location.href),Fe(s,"No window.location.(origin|href) available to create URL");let i=typeof t=="string"?t:io(t);return i=i.replace(/ $/,"%20"),!a&&i.startsWith("//")&&(i=s+i),new URL(i,s)}function eb(t,a,s="/"){return aj(t,a,s,!1)}function aj(t,a,s,i){let c=typeof a=="string"?Gr(a):a,u=pa(c.pathname||"/",s);if(u==null)return null;let f=tb(t);sj(f);let m=null;for(let p=0;m==null&&p<f.length;++p){let g=pj(u);m=hj(f[p],g,i)}return m}function tb(t,a=[],s=[],i="",c=!1){let u=(f,m,p=c,g)=>{let y={relativePath:g===void 0?f.path||"":g,caseSensitive:f.caseSensitive===!0,childrenIndex:m,route:f};if(y.relativePath.startsWith("/")){if(!y.relativePath.startsWith(i)&&p)return;Fe(y.relativePath.startsWith(i),`Absolute route path "${y.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),y.relativePath=y.relativePath.slice(i.length)}let x=ma([i,y.relativePath]),b=s.concat(y);f.children&&f.children.length>0&&(Fe(f.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${x}".`),tb(f.children,a,b,x,p)),!(f.path==null&&!f.index)&&a.push({path:x,score:dj(x,f.index),routesMeta:b})};return t.forEach((f,m)=>{if(f.path===""||!f.path?.includes("?"))u(f,m);else for(let p of nb(f.path))u(f,m,!0,p)}),a}function nb(t){let a=t.split("/");if(a.length===0)return[];let[s,...i]=a,c=s.endsWith("?"),u=s.replace(/\?$/,"");if(i.length===0)return c?[u,""]:[u];let f=nb(i.join("/")),m=[];return m.push(...f.map(p=>p===""?u:[u,p].join("/"))),c&&m.push(...f),m.map(p=>t.startsWith("/")&&p===""?"/":p)}function sj(t){t.sort((a,s)=>a.score!==s.score?s.score-a.score:fj(a.routesMeta.map(i=>i.childrenIndex),s.routesMeta.map(i=>i.childrenIndex)))}var rj=/^:[\w-]+$/,ij=3,oj=2,lj=1,cj=10,uj=-2,gx=t=>t==="*";function dj(t,a){let s=t.split("/"),i=s.length;return s.some(gx)&&(i+=uj),a&&(i+=oj),s.filter(c=>!gx(c)).reduce((c,u)=>c+(rj.test(u)?ij:u===""?lj:cj),i)}function fj(t,a){return t.length===a.length&&t.slice(0,-1).every((i,c)=>i===a[c])?t[t.length-1]-a[a.length-1]:0}function hj(t,a,s=!1){let{routesMeta:i}=t,c={},u="/",f=[];for(let m=0;m<i.length;++m){let p=i[m],g=m===i.length-1,y=u==="/"?a:a.slice(u.length)||"/",x=Ac({path:p.relativePath,caseSensitive:p.caseSensitive,end:g},y),b=p.route;if(!x&&g&&s&&!i[i.length-1].route.index&&(x=Ac({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},y)),!x)return null;Object.assign(c,x.params),f.push({params:c,pathname:ma([u,x.pathname]),pathnameBase:bj(ma([u,x.pathnameBase])),route:b}),x.pathnameBase!=="/"&&(u=ma([u,x.pathnameBase]))}return f}function Ac(t,a){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[s,i]=mj(t.path,t.caseSensitive,t.end),c=a.match(s);if(!c)return null;let u=c[0],f=u.replace(/(.)\/+$/,"$1"),m=c.slice(1);return{params:i.reduce((g,{paramName:y,isOptional:x},b)=>{if(y==="*"){let _=m[b]||"";f=u.slice(0,u.length-_.length).replace(/(.)\/+$/,"$1")}const S=m[b];return x&&!S?g[y]=void 0:g[y]=(S||"").replace(/%2F/g,"/"),g},{}),pathname:u,pathnameBase:f,pattern:t}}function mj(t,a=!1,s=!0){Gt(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let i=[],c="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(f,m,p)=>(i.push({paramName:m,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(i.push({paramName:"*"}),c+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?c+="\\/*$":t!==""&&t!=="/"&&(c+="(?:(?=\\/|$))"),[new RegExp(c,a?void 0:"i"),i]}function pj(t){try{return t.split("/").map(a=>decodeURIComponent(a).replace(/\//g,"%2F")).join("/")}catch(a){return Gt(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${a}).`),t}}function pa(t,a){if(a==="/")return t;if(!t.toLowerCase().startsWith(a.toLowerCase()))return null;let s=a.endsWith("/")?a.length-1:a.length,i=t.charAt(s);return i&&i!=="/"?null:t.slice(s)||"/"}var ab=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,gj=t=>ab.test(t);function xj(t,a="/"){let{pathname:s,search:i="",hash:c=""}=typeof t=="string"?Gr(t):t,u;if(s)if(gj(s))u=s;else{if(s.includes("//")){let f=s;s=s.replace(/\/\/+/g,"/"),Gt(!1,`Pathnames cannot have embedded double slashes - normalizing ${f} -> ${s}`)}s.startsWith("/")?u=xx(s.substring(1),"/"):u=xx(s,a)}else u=a;return{pathname:u,search:vj(i),hash:wj(c)}}function xx(t,a){let s=a.replace(/\/+$/,"").split("/");return t.split("/").forEach(c=>{c===".."?s.length>1&&s.pop():c!=="."&&s.push(c)}),s.length>1?s.join("/"):"/"}function $f(t,a,s,i){return`Cannot include a '${t}' character in a manually specified \`to.${a}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${s}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function yj(t){return t.filter((a,s)=>s===0||a.route.path&&a.route.path.length>0)}function Dh(t){let a=yj(t);return a.map((s,i)=>i===a.length-1?s.pathname:s.pathnameBase)}function Oh(t,a,s,i=!1){let c;typeof t=="string"?c=Gr(t):(c={...t},Fe(!c.pathname||!c.pathname.includes("?"),$f("?","pathname","search",c)),Fe(!c.pathname||!c.pathname.includes("#"),$f("#","pathname","hash",c)),Fe(!c.search||!c.search.includes("#"),$f("#","search","hash",c)));let u=t===""||c.pathname==="",f=u?"/":c.pathname,m;if(f==null)m=s;else{let x=a.length-1;if(!i&&f.startsWith("..")){let b=f.split("/");for(;b[0]==="..";)b.shift(),x-=1;c.pathname=b.join("/")}m=x>=0?a[x]:"/"}let p=xj(c,m),g=f&&f!=="/"&&f.endsWith("/"),y=(u||f===".")&&s.endsWith("/");return!p.pathname.endsWith("/")&&(g||y)&&(p.pathname+="/"),p}var ma=t=>t.join("/").replace(/\/\/+/g,"/"),bj=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),vj=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,wj=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t,jj=class{constructor(t,a,s,i=!1){this.status=t,this.statusText=a||"",this.internal=i,s instanceof Error?(this.data=s.toString(),this.error=s):this.data=s}};function Nj(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}function Sj(t){return t.map(a=>a.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var sb=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function rb(t,a){let s=t;if(typeof s!="string"||!ab.test(s))return{absoluteURL:void 0,isExternal:!1,to:s};let i=s,c=!1;if(sb)try{let u=new URL(window.location.href),f=s.startsWith("//")?new URL(u.protocol+s):new URL(s),m=pa(f.pathname,a);f.origin===u.origin&&m!=null?s=m+f.search+f.hash:c=!0}catch{Gt(!1,`<Link to="${s}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:i,isExternal:c,to:s}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var ib=["POST","PUT","PATCH","DELETE"];new Set(ib);var _j=["GET",...ib];new Set(_j);var Qr=j.createContext(null);Qr.displayName="DataRouter";var Zc=j.createContext(null);Zc.displayName="DataRouterState";var Ej=j.createContext(!1),ob=j.createContext({isTransitioning:!1});ob.displayName="ViewTransition";var Cj=j.createContext(new Map);Cj.displayName="Fetchers";var Tj=j.createContext(null);Tj.displayName="Await";var Zt=j.createContext(null);Zt.displayName="Navigation";var bo=j.createContext(null);bo.displayName="Location";var cn=j.createContext({outlet:null,matches:[],isDataRoute:!1});cn.displayName="Route";var Bh=j.createContext(null);Bh.displayName="RouteError";var lb="REACT_ROUTER_ERROR",Mj="REDIRECT",Aj="ROUTE_ERROR_RESPONSE";function kj(t){if(t.startsWith(`${lb}:${Mj}:{`))try{let a=JSON.parse(t.slice(28));if(typeof a=="object"&&a&&typeof a.status=="number"&&typeof a.statusText=="string"&&typeof a.location=="string"&&typeof a.reloadDocument=="boolean"&&typeof a.replace=="boolean")return a}catch{}}function zj(t){if(t.startsWith(`${lb}:${Aj}:{`))try{let a=JSON.parse(t.slice(40));if(typeof a=="object"&&a&&typeof a.status=="number"&&typeof a.statusText=="string")return new jj(a.status,a.statusText,a.data)}catch{}}function Rj(t,{relative:a}={}){Fe(Zr(),"useHref() may be used only in the context of a <Router> component.");let{basename:s,navigator:i}=j.useContext(Zt),{hash:c,pathname:u,search:f}=vo(t,{relative:a}),m=u;return s!=="/"&&(m=u==="/"?s:ma([s,u])),i.createHref({pathname:m,search:f,hash:c})}function Zr(){return j.useContext(bo)!=null}function ba(){return Fe(Zr(),"useLocation() may be used only in the context of a <Router> component."),j.useContext(bo).location}var cb="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function ub(t){j.useContext(Zt).static||j.useLayoutEffect(t)}function $s(){let{isDataRoute:t}=j.useContext(cn);return t?Zj():Dj()}function Dj(){Fe(Zr(),"useNavigate() may be used only in the context of a <Router> component.");let t=j.useContext(Qr),{basename:a,navigator:s}=j.useContext(Zt),{matches:i}=j.useContext(cn),{pathname:c}=ba(),u=JSON.stringify(Dh(i)),f=j.useRef(!1);return ub(()=>{f.current=!0}),j.useCallback((p,g={})=>{if(Gt(f.current,cb),!f.current)return;if(typeof p=="number"){s.go(p);return}let y=Oh(p,JSON.parse(u),c,g.relative==="path");t==null&&a!=="/"&&(y.pathname=y.pathname==="/"?a:ma([a,y.pathname])),(g.replace?s.replace:s.push)(y,g.state,g)},[a,s,u,c,t])}var Oj=j.createContext(null);function Bj(t){let a=j.useContext(cn).outlet;return j.useMemo(()=>a&&j.createElement(Oj.Provider,{value:t},a),[a,t])}function Lj(){let{matches:t}=j.useContext(cn),a=t[t.length-1];return a?a.params:{}}function vo(t,{relative:a}={}){let{matches:s}=j.useContext(cn),{pathname:i}=ba(),c=JSON.stringify(Dh(s));return j.useMemo(()=>Oh(t,JSON.parse(c),i,a==="path"),[t,c,i,a])}function Hj(t,a){return db(t,a)}function db(t,a,s,i,c){Fe(Zr(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:u}=j.useContext(Zt),{matches:f}=j.useContext(cn),m=f[f.length-1],p=m?m.params:{},g=m?m.pathname:"/",y=m?m.pathnameBase:"/",x=m&&m.route;{let z=x&&x.path||"";hb(g,!x||z.endsWith("*")||z.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${g}" (under <Route path="${z}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${z}"> to <Route path="${z==="/"?"*":`${z}/*`}">.`)}let b=ba(),S;if(a){let z=typeof a=="string"?Gr(a):a;Fe(y==="/"||z.pathname?.startsWith(y),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${y}" but pathname "${z.pathname}" was given in the \`location\` prop.`),S=z}else S=b;let _=S.pathname||"/",C=_;if(y!=="/"){let z=y.replace(/^\//,"").split("/");C="/"+_.replace(/^\//,"").split("/").slice(z.length).join("/")}let N=eb(t,{pathname:C});Gt(x||N!=null,`No routes matched location "${S.pathname}${S.search}${S.hash}" `),Gt(N==null||N[N.length-1].route.element!==void 0||N[N.length-1].route.Component!==void 0||N[N.length-1].route.lazy!==void 0,`Matched leaf route at location "${S.pathname}${S.search}${S.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let E=Yj(N&&N.map(z=>Object.assign({},z,{params:Object.assign({},p,z.params),pathname:ma([y,u.encodeLocation?u.encodeLocation(z.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:z.pathname]),pathnameBase:z.pathnameBase==="/"?y:ma([y,u.encodeLocation?u.encodeLocation(z.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:z.pathnameBase])})),f,s,i,c);return a&&E?j.createElement(bo.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...S},navigationType:"POP"}},E):E}function $j(){let t=Qj(),a=Nj(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),s=t instanceof Error?t.stack:null,i="rgba(200,200,200, 0.5)",c={padding:"0.5rem",backgroundColor:i},u={padding:"2px 4px",backgroundColor:i},f=null;return console.error("Error handled by React Router default ErrorBoundary:",t),f=j.createElement(j.Fragment,null,j.createElement("p",null," Hey developer "),j.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",j.createElement("code",{style:u},"ErrorBoundary")," or"," ",j.createElement("code",{style:u},"errorElement")," prop on your route.")),j.createElement(j.Fragment,null,j.createElement("h2",null,"Unexpected Application Error!"),j.createElement("h3",{style:{fontStyle:"italic"}},a),s?j.createElement("pre",{style:c},s):null,f)}var Uj=j.createElement($j,null),fb=class extends j.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,a){return a.location!==t.location||a.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:a.error,location:a.location,revalidation:t.revalidation||a.revalidation}}componentDidCatch(t,a){this.props.onError?this.props.onError(t,a):console.error("React Router caught the following error during render",t)}render(){let t=this.state.error;if(this.context&&typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){const s=zj(t.digest);s&&(t=s)}let a=t!==void 0?j.createElement(cn.Provider,{value:this.props.routeContext},j.createElement(Bh.Provider,{value:t,children:this.props.component})):this.props.children;return this.context?j.createElement(qj,{error:t},a):a}};fb.contextType=Ej;var Uf=new WeakMap;function qj({children:t,error:a}){let{basename:s}=j.useContext(Zt);if(typeof a=="object"&&a&&"digest"in a&&typeof a.digest=="string"){let i=kj(a.digest);if(i){let c=Uf.get(a);if(c)throw c;let u=rb(i.location,s);if(sb&&!Uf.get(a))if(u.isExternal||i.reloadDocument)window.location.href=u.absoluteURL||u.to;else{const f=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(u.to,{replace:i.replace}));throw Uf.set(a,f),f}return j.createElement("meta",{httpEquiv:"refresh",content:`0;url=${u.absoluteURL||u.to}`})}}return t}function Vj({routeContext:t,match:a,children:s}){let i=j.useContext(Qr);return i&&i.static&&i.staticContext&&(a.route.errorElement||a.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=a.route.id),j.createElement(cn.Provider,{value:t},s)}function Yj(t,a=[],s=null,i=null,c=null){if(t==null){if(!s)return null;if(s.errors)t=s.matches;else if(a.length===0&&!s.initialized&&s.matches.length>0)t=s.matches;else return null}let u=t,f=s?.errors;if(f!=null){let y=u.findIndex(x=>x.route.id&&f?.[x.route.id]!==void 0);Fe(y>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(f).join(",")}`),u=u.slice(0,Math.min(u.length,y+1))}let m=!1,p=-1;if(s)for(let y=0;y<u.length;y++){let x=u[y];if((x.route.HydrateFallback||x.route.hydrateFallbackElement)&&(p=y),x.route.id){let{loaderData:b,errors:S}=s,_=x.route.loader&&!b.hasOwnProperty(x.route.id)&&(!S||S[x.route.id]===void 0);if(x.route.lazy||_){m=!0,p>=0?u=u.slice(0,p+1):u=[u[0]];break}}}let g=s&&i?(y,x)=>{i(y,{location:s.location,params:s.matches?.[0]?.params??{},unstable_pattern:Sj(s.matches),errorInfo:x})}:void 0;return u.reduceRight((y,x,b)=>{let S,_=!1,C=null,N=null;s&&(S=f&&x.route.id?f[x.route.id]:void 0,C=x.route.errorElement||Uj,m&&(p<0&&b===0?(hb("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),_=!0,N=null):p===b&&(_=!0,N=x.route.hydrateFallbackElement||null)));let E=a.concat(u.slice(0,b+1)),z=()=>{let T;return S?T=C:_?T=N:x.route.Component?T=j.createElement(x.route.Component,null):x.route.element?T=x.route.element:T=y,j.createElement(Vj,{match:x,routeContext:{outlet:y,matches:E,isDataRoute:s!=null},children:T})};return s&&(x.route.ErrorBoundary||x.route.errorElement||b===0)?j.createElement(fb,{location:s.location,revalidation:s.revalidation,component:C,error:S,children:z(),routeContext:{outlet:null,matches:E,isDataRoute:!0},onError:g}):z()},null)}function Lh(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Pj(t){let a=j.useContext(Qr);return Fe(a,Lh(t)),a}function Xj(t){let a=j.useContext(Zc);return Fe(a,Lh(t)),a}function Ij(t){let a=j.useContext(cn);return Fe(a,Lh(t)),a}function Hh(t){let a=Ij(t),s=a.matches[a.matches.length-1];return Fe(s.route.id,`${t} can only be used on routes that contain a unique "id"`),s.route.id}function Gj(){return Hh("useRouteId")}function Qj(){let t=j.useContext(Bh),a=Xj("useRouteError"),s=Hh("useRouteError");return t!==void 0?t:a.errors?.[s]}function Zj(){let{router:t}=Pj("useNavigate"),a=Hh("useNavigate"),s=j.useRef(!1);return ub(()=>{s.current=!0}),j.useCallback(async(c,u={})=>{Gt(s.current,cb),s.current&&(typeof c=="number"?await t.navigate(c):await t.navigate(c,{fromRouteId:a,...u}))},[t,a])}var yx={};function hb(t,a,s){!a&&!yx[t]&&(yx[t]=!0,Gt(!1,s))}j.memo(Fj);function Fj({routes:t,future:a,state:s,onError:i}){return db(t,void 0,s,i,a)}function kc({to:t,replace:a,state:s,relative:i}){Fe(Zr(),"<Navigate> may be used only in the context of a <Router> component.");let{static:c}=j.useContext(Zt);Gt(!c,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:u}=j.useContext(cn),{pathname:f}=ba(),m=$s(),p=Oh(t,Dh(u),f,i==="path"),g=JSON.stringify(p);return j.useEffect(()=>{m(JSON.parse(g),{replace:a,state:s,relative:i})},[m,g,i,a,s]),null}function Wj(t){return Bj(t.context)}function Nt(t){Fe(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Kj({basename:t="/",children:a=null,location:s,navigationType:i="POP",navigator:c,static:u=!1,unstable_useTransitions:f}){Fe(!Zr(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let m=t.replace(/^\/*/,"/"),p=j.useMemo(()=>({basename:m,navigator:c,static:u,unstable_useTransitions:f,future:{}}),[m,c,u,f]);typeof s=="string"&&(s=Gr(s));let{pathname:g="/",search:y="",hash:x="",state:b=null,key:S="default"}=s,_=j.useMemo(()=>{let C=pa(g,m);return C==null?null:{location:{pathname:C,search:y,hash:x,state:b,key:S},navigationType:i}},[m,g,y,x,b,S,i]);return Gt(_!=null,`<Router basename="${m}"> is not able to match the URL "${g}${y}${x}" because it does not start with the basename, so the <Router> won't render anything.`),_==null?null:j.createElement(Zt.Provider,{value:p},j.createElement(bo.Provider,{children:a,value:_}))}function Jj({children:t,location:a}){return Hj(lh(t),a)}function lh(t,a=[]){let s=[];return j.Children.forEach(t,(i,c)=>{if(!j.isValidElement(i))return;let u=[...a,c];if(i.type===j.Fragment){s.push.apply(s,lh(i.props.children,u));return}Fe(i.type===Nt,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Fe(!i.props.index||!i.props.children,"An index route cannot have child routes.");let f={id:i.props.id||u.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,middleware:i.props.middleware,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(f.children=lh(i.props.children,u)),s.push(f)}),s}var yc="get",bc="application/x-www-form-urlencoded";function Fc(t){return typeof HTMLElement<"u"&&t instanceof HTMLElement}function eN(t){return Fc(t)&&t.tagName.toLowerCase()==="button"}function tN(t){return Fc(t)&&t.tagName.toLowerCase()==="form"}function nN(t){return Fc(t)&&t.tagName.toLowerCase()==="input"}function aN(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function sN(t,a){return t.button===0&&(!a||a==="_self")&&!aN(t)}function ch(t=""){return new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((a,s)=>{let i=t[s];return a.concat(Array.isArray(i)?i.map(c=>[s,c]):[[s,i]])},[]))}function rN(t,a){let s=ch(t);return a&&a.forEach((i,c)=>{s.has(c)||a.getAll(c).forEach(u=>{s.append(c,u)})}),s}var nc=null;function iN(){if(nc===null)try{new FormData(document.createElement("form"),0),nc=!1}catch{nc=!0}return nc}var oN=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function qf(t){return t!=null&&!oN.has(t)?(Gt(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${bc}"`),null):t}function lN(t,a){let s,i,c,u,f;if(tN(t)){let m=t.getAttribute("action");i=m?pa(m,a):null,s=t.getAttribute("method")||yc,c=qf(t.getAttribute("enctype"))||bc,u=new FormData(t)}else if(eN(t)||nN(t)&&(t.type==="submit"||t.type==="image")){let m=t.form;if(m==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=t.getAttribute("formaction")||m.getAttribute("action");if(i=p?pa(p,a):null,s=t.getAttribute("formmethod")||m.getAttribute("method")||yc,c=qf(t.getAttribute("formenctype"))||qf(m.getAttribute("enctype"))||bc,u=new FormData(m,t),!iN()){let{name:g,type:y,value:x}=t;if(y==="image"){let b=g?`${g}.`:"";u.append(`${b}x`,"0"),u.append(`${b}y`,"0")}else g&&u.append(g,x)}}else{if(Fc(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');s=yc,i=null,c=bc,f=t}return u&&c==="text/plain"&&(f=u,u=void 0),{action:i,method:s.toLowerCase(),encType:c,formData:u,body:f}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function $h(t,a){if(t===!1||t===null||typeof t>"u")throw new Error(a)}function cN(t,a,s,i){let c=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return s?c.pathname.endsWith("/")?c.pathname=`${c.pathname}_.${i}`:c.pathname=`${c.pathname}.${i}`:c.pathname==="/"?c.pathname=`_root.${i}`:a&&pa(c.pathname,a)==="/"?c.pathname=`${a.replace(/\/$/,"")}/_root.${i}`:c.pathname=`${c.pathname.replace(/\/$/,"")}.${i}`,c}async function uN(t,a){if(t.id in a)return a[t.id];try{let s=await import(t.module);return a[t.id]=s,s}catch(s){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(s),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function dN(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function fN(t,a,s){let i=await Promise.all(t.map(async c=>{let u=a.routes[c.route.id];if(u){let f=await uN(u,s);return f.links?f.links():[]}return[]}));return gN(i.flat(1).filter(dN).filter(c=>c.rel==="stylesheet"||c.rel==="preload").map(c=>c.rel==="stylesheet"?{...c,rel:"prefetch",as:"style"}:{...c,rel:"prefetch"}))}function bx(t,a,s,i,c,u){let f=(p,g)=>s[g]?p.route.id!==s[g].route.id:!0,m=(p,g)=>s[g].pathname!==p.pathname||s[g].route.path?.endsWith("*")&&s[g].params["*"]!==p.params["*"];return u==="assets"?a.filter((p,g)=>f(p,g)||m(p,g)):u==="data"?a.filter((p,g)=>{let y=i.routes[p.route.id];if(!y||!y.hasLoader)return!1;if(f(p,g)||m(p,g))return!0;if(p.route.shouldRevalidate){let x=p.route.shouldRevalidate({currentUrl:new URL(c.pathname+c.search+c.hash,window.origin),currentParams:s[0]?.params||{},nextUrl:new URL(t,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof x=="boolean")return x}return!0}):[]}function hN(t,a,{includeHydrateFallback:s}={}){return mN(t.map(i=>{let c=a.routes[i.route.id];if(!c)return[];let u=[c.module];return c.clientActionModule&&(u=u.concat(c.clientActionModule)),c.clientLoaderModule&&(u=u.concat(c.clientLoaderModule)),s&&c.hydrateFallbackModule&&(u=u.concat(c.hydrateFallbackModule)),c.imports&&(u=u.concat(c.imports)),u}).flat(1))}function mN(t){return[...new Set(t)]}function pN(t){let a={},s=Object.keys(t).sort();for(let i of s)a[i]=t[i];return a}function gN(t,a){let s=new Set;return new Set(a),t.reduce((i,c)=>{let u=JSON.stringify(pN(c));return s.has(u)||(s.add(u),i.push({key:u,link:c})),i},[])}function mb(){let t=j.useContext(Qr);return $h(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function xN(){let t=j.useContext(Zc);return $h(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var Uh=j.createContext(void 0);Uh.displayName="FrameworkContext";function pb(){let t=j.useContext(Uh);return $h(t,"You must render this element inside a <HydratedRouter> element"),t}function yN(t,a){let s=j.useContext(Uh),[i,c]=j.useState(!1),[u,f]=j.useState(!1),{onFocus:m,onBlur:p,onMouseEnter:g,onMouseLeave:y,onTouchStart:x}=a,b=j.useRef(null);j.useEffect(()=>{if(t==="render"&&f(!0),t==="viewport"){let C=E=>{E.forEach(z=>{f(z.isIntersecting)})},N=new IntersectionObserver(C,{threshold:.5});return b.current&&N.observe(b.current),()=>{N.disconnect()}}},[t]),j.useEffect(()=>{if(i){let C=setTimeout(()=>{f(!0)},100);return()=>{clearTimeout(C)}}},[i]);let S=()=>{c(!0)},_=()=>{c(!1),f(!1)};return s?t!=="intent"?[u,b,{}]:[u,b,{onFocus:Zi(m,S),onBlur:Zi(p,_),onMouseEnter:Zi(g,S),onMouseLeave:Zi(y,_),onTouchStart:Zi(x,S)}]:[!1,b,{}]}function Zi(t,a){return s=>{t&&t(s),s.defaultPrevented||a(s)}}function bN({page:t,...a}){let{router:s}=mb(),i=j.useMemo(()=>eb(s.routes,t,s.basename),[s.routes,t,s.basename]);return i?j.createElement(wN,{page:t,matches:i,...a}):null}function vN(t){let{manifest:a,routeModules:s}=pb(),[i,c]=j.useState([]);return j.useEffect(()=>{let u=!1;return fN(t,a,s).then(f=>{u||c(f)}),()=>{u=!0}},[t,a,s]),i}function wN({page:t,matches:a,...s}){let i=ba(),{future:c,manifest:u,routeModules:f}=pb(),{basename:m}=mb(),{loaderData:p,matches:g}=xN(),y=j.useMemo(()=>bx(t,a,g,u,i,"data"),[t,a,g,u,i]),x=j.useMemo(()=>bx(t,a,g,u,i,"assets"),[t,a,g,u,i]),b=j.useMemo(()=>{if(t===i.pathname+i.search+i.hash)return[];let C=new Set,N=!1;if(a.forEach(z=>{let T=u.routes[z.route.id];!T||!T.hasLoader||(!y.some(k=>k.route.id===z.route.id)&&z.route.id in p&&f[z.route.id]?.shouldRevalidate||T.hasClientLoader?N=!0:C.add(z.route.id))}),C.size===0)return[];let E=cN(t,m,c.unstable_trailingSlashAwareDataRequests,"data");return N&&C.size>0&&E.searchParams.set("_routes",a.filter(z=>C.has(z.route.id)).map(z=>z.route.id).join(",")),[E.pathname+E.search]},[m,c.unstable_trailingSlashAwareDataRequests,p,i,u,y,a,t,f]),S=j.useMemo(()=>hN(x,u),[x,u]),_=vN(x);return j.createElement(j.Fragment,null,b.map(C=>j.createElement("link",{key:C,rel:"prefetch",as:"fetch",href:C,...s})),S.map(C=>j.createElement("link",{key:C,rel:"modulepreload",href:C,...s})),_.map(({key:C,link:N})=>j.createElement("link",{key:C,nonce:s.nonce,...N})))}function jN(...t){return a=>{t.forEach(s=>{typeof s=="function"?s(a):s!=null&&(s.current=a)})}}var NN=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{NN&&(window.__reactRouterVersion="7.12.0")}catch{}function SN({basename:t,children:a,unstable_useTransitions:s,window:i}){let c=j.useRef();c.current==null&&(c.current=Jw({window:i,v5Compat:!0}));let u=c.current,[f,m]=j.useState({action:u.action,location:u.location}),p=j.useCallback(g=>{s===!1?m(g):j.startTransition(()=>m(g))},[s]);return j.useLayoutEffect(()=>u.listen(p),[u,p]),j.createElement(Kj,{basename:t,children:a,location:f.location,navigationType:f.action,navigator:u,unstable_useTransitions:s})}var gb=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ms=j.forwardRef(function({onClick:a,discover:s="render",prefetch:i="none",relative:c,reloadDocument:u,replace:f,state:m,target:p,to:g,preventScrollReset:y,viewTransition:x,unstable_defaultShouldRevalidate:b,...S},_){let{basename:C,unstable_useTransitions:N}=j.useContext(Zt),E=typeof g=="string"&&gb.test(g),z=rb(g,C);g=z.to;let T=Rj(g,{relative:c}),[k,w,R]=yN(i,S),M=CN(g,{replace:f,state:m,target:p,preventScrollReset:y,relative:c,viewTransition:x,unstable_defaultShouldRevalidate:b,unstable_useTransitions:N});function U(Q){a&&a(Q),Q.defaultPrevented||M(Q)}let L=j.createElement("a",{...S,...R,href:z.absoluteURL||T,onClick:z.isExternal||u?a:U,ref:jN(_,w),target:p,"data-discover":!E&&s==="render"?"true":void 0});return k&&!E?j.createElement(j.Fragment,null,L,j.createElement(bN,{page:T})):L});Ms.displayName="Link";var xb=j.forwardRef(function({"aria-current":a="page",caseSensitive:s=!1,className:i="",end:c=!1,style:u,to:f,viewTransition:m,children:p,...g},y){let x=vo(f,{relative:g.relative}),b=ba(),S=j.useContext(Zc),{navigator:_,basename:C}=j.useContext(Zt),N=S!=null&&RN(x)&&m===!0,E=_.encodeLocation?_.encodeLocation(x).pathname:x.pathname,z=b.pathname,T=S&&S.navigation&&S.navigation.location?S.navigation.location.pathname:null;s||(z=z.toLowerCase(),T=T?T.toLowerCase():null,E=E.toLowerCase()),T&&C&&(T=pa(T,C)||T);const k=E!=="/"&&E.endsWith("/")?E.length-1:E.length;let w=z===E||!c&&z.startsWith(E)&&z.charAt(k)==="/",R=T!=null&&(T===E||!c&&T.startsWith(E)&&T.charAt(E.length)==="/"),M={isActive:w,isPending:R,isTransitioning:N},U=w?a:void 0,L;typeof i=="function"?L=i(M):L=[i,w?"active":null,R?"pending":null,N?"transitioning":null].filter(Boolean).join(" ");let Q=typeof u=="function"?u(M):u;return j.createElement(Ms,{...g,"aria-current":U,className:L,ref:y,style:Q,to:f,viewTransition:m},typeof p=="function"?p(M):p)});xb.displayName="NavLink";var _N=j.forwardRef(({discover:t="render",fetcherKey:a,navigate:s,reloadDocument:i,replace:c,state:u,method:f=yc,action:m,onSubmit:p,relative:g,preventScrollReset:y,viewTransition:x,unstable_defaultShouldRevalidate:b,...S},_)=>{let{unstable_useTransitions:C}=j.useContext(Zt),N=kN(),E=zN(m,{relative:g}),z=f.toLowerCase()==="get"?"get":"post",T=typeof m=="string"&&gb.test(m),k=w=>{if(p&&p(w),w.defaultPrevented)return;w.preventDefault();let R=w.nativeEvent.submitter,M=R?.getAttribute("formmethod")||f,U=()=>N(R||w.currentTarget,{fetcherKey:a,method:M,navigate:s,replace:c,state:u,relative:g,preventScrollReset:y,viewTransition:x,unstable_defaultShouldRevalidate:b});C&&s!==!1?j.startTransition(()=>U()):U()};return j.createElement("form",{ref:_,method:z,action:E,onSubmit:i?p:k,...S,"data-discover":!T&&t==="render"?"true":void 0})});_N.displayName="Form";function EN(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function yb(t){let a=j.useContext(Qr);return Fe(a,EN(t)),a}function CN(t,{target:a,replace:s,state:i,preventScrollReset:c,relative:u,viewTransition:f,unstable_defaultShouldRevalidate:m,unstable_useTransitions:p}={}){let g=$s(),y=ba(),x=vo(t,{relative:u});return j.useCallback(b=>{if(sN(b,a)){b.preventDefault();let S=s!==void 0?s:io(y)===io(x),_=()=>g(t,{replace:S,state:i,preventScrollReset:c,relative:u,viewTransition:f,unstable_defaultShouldRevalidate:m});p?j.startTransition(()=>_()):_()}},[y,g,x,s,i,a,t,c,u,f,m,p])}function TN(t){Gt(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let a=j.useRef(ch(t)),s=j.useRef(!1),i=ba(),c=j.useMemo(()=>rN(i.search,s.current?null:a.current),[i.search]),u=$s(),f=j.useCallback((m,p)=>{const g=ch(typeof m=="function"?m(new URLSearchParams(c)):m);s.current=!0,u("?"+g,p)},[u,c]);return[c,f]}var MN=0,AN=()=>`__${String(++MN)}__`;function kN(){let{router:t}=yb("useSubmit"),{basename:a}=j.useContext(Zt),s=Gj(),i=t.fetch,c=t.navigate;return j.useCallback(async(u,f={})=>{let{action:m,method:p,encType:g,formData:y,body:x}=lN(u,a);if(f.navigate===!1){let b=f.fetcherKey||AN();await i(b,s,f.action||m,{unstable_defaultShouldRevalidate:f.unstable_defaultShouldRevalidate,preventScrollReset:f.preventScrollReset,formData:y,body:x,formMethod:f.method||p,formEncType:f.encType||g,flushSync:f.flushSync})}else await c(f.action||m,{unstable_defaultShouldRevalidate:f.unstable_defaultShouldRevalidate,preventScrollReset:f.preventScrollReset,formData:y,body:x,formMethod:f.method||p,formEncType:f.encType||g,replace:f.replace,state:f.state,fromRouteId:s,flushSync:f.flushSync,viewTransition:f.viewTransition})},[i,c,a,s])}function zN(t,{relative:a}={}){let{basename:s}=j.useContext(Zt),i=j.useContext(cn);Fe(i,"useFormAction must be used inside a RouteContext");let[c]=i.matches.slice(-1),u={...vo(t||".",{relative:a})},f=ba();if(t==null){u.search=f.search;let m=new URLSearchParams(u.search),p=m.getAll("index");if(p.some(y=>y==="")){m.delete("index"),p.filter(x=>x).forEach(x=>m.append("index",x));let y=m.toString();u.search=y?`?${y}`:""}}return(!t||t===".")&&c.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),s!=="/"&&(u.pathname=u.pathname==="/"?s:ma([s,u.pathname])),io(u)}function RN(t,{relative:a}={}){let s=j.useContext(ob);Fe(s!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=yb("useViewTransitionState"),c=vo(t,{relative:a});if(!s.isTransitioning)return!1;let u=pa(s.currentLocation.pathname,i)||s.currentLocation.pathname,f=pa(s.nextLocation.pathname,i)||s.nextLocation.pathname;return Ac(c.pathname,f)!=null||Ac(c.pathname,u)!=null}Jy();const vx=t=>{let a;const s=new Set,i=(g,y)=>{const x=typeof g=="function"?g(a):g;if(!Object.is(x,a)){const b=a;a=y??(typeof x!="object"||x===null)?x:Object.assign({},a,x),s.forEach(S=>S(a,b))}},c=()=>a,m={setState:i,getState:c,getInitialState:()=>p,subscribe:g=>(s.add(g),()=>s.delete(g))},p=a=t(i,c,m);return m},DN=(t=>t?vx(t):vx),ON=t=>t;function BN(t,a=ON){const s=Mr.useSyncExternalStore(t.subscribe,Mr.useCallback(()=>a(t.getState()),[t,a]),Mr.useCallback(()=>a(t.getInitialState()),[t,a]));return Mr.useDebugValue(s),s}const wx=t=>{const a=DN(t),s=i=>BN(a,i);return Object.assign(s,a),s},bb=(t=>t?wx(t):wx);function LN(t,a){let s;try{s=t()}catch{return}return{getItem:c=>{var u;const f=p=>p===null?null:JSON.parse(p,void 0),m=(u=s.getItem(c))!=null?u:null;return m instanceof Promise?m.then(f):f(m)},setItem:(c,u)=>s.setItem(c,JSON.stringify(u,void 0)),removeItem:c=>s.removeItem(c)}}const uh=t=>a=>{try{const s=t(a);return s instanceof Promise?s:{then(i){return uh(i)(s)},catch(i){return this}}}catch(s){return{then(i){return this},catch(i){return uh(i)(s)}}}},HN=(t,a)=>(s,i,c)=>{let u={storage:LN(()=>localStorage),partialize:N=>N,version:0,merge:(N,E)=>({...E,...N}),...a},f=!1,m=0;const p=new Set,g=new Set;let y=u.storage;if(!y)return t((...N)=>{console.warn(`[zustand persist middleware] Unable to update item '${u.name}', the given storage is currently unavailable.`),s(...N)},i,c);const x=()=>{const N=u.partialize({...i()});return y.setItem(u.name,{state:N,version:u.version})},b=c.setState;c.setState=(N,E)=>(b(N,E),x());const S=t((...N)=>(s(...N),x()),i,c);c.getInitialState=()=>S;let _;const C=()=>{var N,E;if(!y)return;const z=++m;f=!1,p.forEach(k=>{var w;return k((w=i())!=null?w:S)});const T=((E=u.onRehydrateStorage)==null?void 0:E.call(u,(N=i())!=null?N:S))||void 0;return uh(y.getItem.bind(y))(u.name).then(k=>{if(k)if(typeof k.version=="number"&&k.version!==u.version){if(u.migrate){const w=u.migrate(k.state,k.version);return w instanceof Promise?w.then(R=>[!0,R]):[!0,w]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,k.state];return[!1,void 0]}).then(k=>{var w;if(z!==m)return;const[R,M]=k;if(_=u.merge(M,(w=i())!=null?w:S),s(_,!0),R)return x()}).then(()=>{z===m&&(T?.(_,void 0),_=i(),f=!0,g.forEach(k=>k(_)))}).catch(k=>{z===m&&T?.(void 0,k)})};return c.persist={setOptions:N=>{u={...u,...N},N.storage&&(y=N.storage)},clearStorage:()=>{y?.removeItem(u.name)},getOptions:()=>u,rehydrate:()=>C(),hasHydrated:()=>f,onHydrate:N=>(p.add(N),()=>{p.delete(N)}),onFinishHydration:N=>(g.add(N),()=>{g.delete(N)})},u.skipHydration||C(),_||S},$N=HN,Mt=bb($N(t=>({user:null,agent:null,token:null,basicToken:null,isAuthenticated:!1,login:(a,s,i)=>{t({user:a,agent:a,token:s,basicToken:i,isAuthenticated:!0})},logout:()=>{t({user:null,agent:null,token:null,basicToken:null,isAuthenticated:!1})}}),{name:"auth-storage"}));const UN=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),qN=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(a,s,i)=>i?i.toUpperCase():s.toLowerCase()),jx=t=>{const a=qN(t);return a.charAt(0).toUpperCase()+a.slice(1)},vb=(...t)=>t.filter((a,s,i)=>!!a&&a.trim()!==""&&i.indexOf(a)===s).join(" ").trim(),VN=t=>{for(const a in t)if(a.startsWith("aria-")||a==="role"||a==="title")return!0};var YN={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const PN=j.forwardRef(({color:t="currentColor",size:a=24,strokeWidth:s=2,absoluteStrokeWidth:i,className:c="",children:u,iconNode:f,...m},p)=>j.createElement("svg",{ref:p,...YN,width:a,height:a,stroke:t,strokeWidth:i?Number(s)*24/Number(a):s,className:vb("lucide",c),...!u&&!VN(m)&&{"aria-hidden":"true"},...m},[...f.map(([g,y])=>j.createElement(g,y)),...Array.isArray(u)?u:[u]]));const xe=(t,a)=>{const s=j.forwardRef(({className:i,...c},u)=>j.createElement(PN,{ref:u,iconNode:a,className:vb(`lucide-${UN(jx(t))}`,`lucide-${t}`,i),...c}));return s.displayName=jx(t),s};const XN=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],ks=xe("activity",XN);const IN=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],GN=xe("arrow-left",IN);const QN=[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]],qh=xe("arrow-right-left",QN);const ZN=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],FN=xe("arrow-right",ZN);const WN=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],Vh=xe("book-open",WN);const KN=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],Yh=xe("bot",KN);const JN=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],zr=xe("brain",JN);const eS=[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]],Lr=xe("building-2",eS);const tS=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],Ph=xe("chart-column",tS);const nS=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],bn=xe("check",nS);const aS=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],sS=xe("chevron-left",aS);const rS=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Xh=xe("chevron-right",rS);const iS=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],zc=xe("circle-check-big",iS);const oS=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Ih=xe("circle-x",oS);const lS=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Rc=xe("clock",lS);const cS=[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]],Nx=xe("code",cS);const uS=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],wb=xe("dollar-sign",uS);const dS=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],fS=xe("download",dS);const hS=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],mS=xe("eye-off",hS);const pS=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Gh=xe("eye",pS);const gS=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Qh=xe("file-text",gS);const xS=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],Zh=xe("funnel",xS);const yS=[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]],jb=xe("git-branch",yS);const bS=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],vS=xe("heart",bS);const wS=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],jS=xe("image",wS);const NS=[["polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12",key:"o97t9d"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}]],Nb=xe("inbox",NS);const SS=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],_S=xe("key",SS);const ES=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],CS=xe("layout-dashboard",ES);const TS=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],MS=xe("log-out",TS);const AS=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],kS=xe("map-pin",AS);const zS=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],ga=xe("message-square",zS);const RS=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]],DS=xe("mic",RS);const OS=[["path",{d:"M5 12h14",key:"1ays0h"}]],BS=xe("minus",OS);const LS=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],HS=xe("pen-line",LS);const $S=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],Wc=xe("phone",$S);const US=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Fh=xe("plus",US);const qS=[["path",{d:"M16.247 7.761a6 6 0 0 1 0 8.478",key:"1fwjs5"}],["path",{d:"M19.075 4.933a10 10 0 0 1 0 14.134",key:"ehdyv1"}],["path",{d:"M4.925 19.067a10 10 0 0 1 0-14.134",key:"1q22gi"}],["path",{d:"M7.753 16.239a6 6 0 0 1 0-8.478",key:"r2q7qm"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],VS=xe("radio",qS);const YS=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],wo=xe("refresh-cw",YS);const PS=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],XS=xe("rotate-ccw",PS);const IS=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],GS=xe("save",IS);const QS=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Sb=xe("search",QS);const ZS=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],FS=xe("send",ZS);const WS=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],KS=xe("shield",WS);const JS=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],dh=xe("sparkles",JS);const e4=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Kc=xe("square-pen",e4);const t4=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],n4=xe("tag",t4);const a4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],s4=xe("target",a4);const r4=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],jo=xe("trash-2",r4);const i4=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],Dc=xe("trending-up",i4);const o4=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],eo=xe("triangle-alert",o4);const l4=[["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m14.305 16.53.923-.382",key:"1itpsq"}],["path",{d:"m15.228 13.852-.923-.383",key:"eplpkm"}],["path",{d:"m16.852 12.228-.383-.923",key:"13v3q0"}],["path",{d:"m16.852 17.772-.383.924",key:"1i8mnm"}],["path",{d:"m19.148 12.228.383-.923",key:"1q8j1v"}],["path",{d:"m19.53 18.696-.382-.924",key:"vk1qj3"}],["path",{d:"m20.772 13.852.924-.383",key:"n880s0"}],["path",{d:"m20.772 16.148.924.383",key:"1g6xey"}],["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],c4=xe("user-cog",l4);const u4=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],Hr=xe("user-plus",u4);const d4=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Rr=xe("user",d4);const f4=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Jc=xe("users",f4);const h4=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Ds=xe("x",h4);const m4=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],p4=xe("zap",m4);function g4(){const t=$s(),{agent:a,logout:s}=Mt(),i=a?.role==="supervisor",c=[{to:"/dashboard",icon:CS,label:"Dashboard"},{to:"/conversations",icon:ga,label:"Conversaciones"},...i?[{to:"/agents",icon:c4,label:"Agentes"},{to:"/departments",icon:Lr,label:"Departamentos"},{to:"/flows",icon:jb,label:"Flujos"},{to:"/logs",icon:ks,label:"Logs"},{to:"/leads",icon:Jc,label:"Leads"},{to:"/analytics",icon:Ph,label:"Analytics"},{to:"/monitor",icon:VS,label:"Monitor"},{to:"/learning",icon:zr,label:"Cerebro IA"}]:[]],u=()=>{s(),t("/login")},f=i?"Supervisor":"Agente";return o.jsxs("div",{className:"min-h-screen bg-gray-50 flex",children:[o.jsxs("aside",{className:"w-64 bg-white border-r border-gray-200 flex flex-col",children:[o.jsxs("div",{className:"h-16 flex items-center gap-3 px-6 border-b border-gray-200",children:[o.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-indigo-500 to-blue-600 rounded-xl flex items-center justify-center",children:o.jsx(Yh,{className:"w-6 h-6 text-white"})}),o.jsxs("div",{children:[o.jsx("h1",{className:"font-bold text-gray-800",children:"Chat Platform"}),o.jsx("p",{className:"text-xs text-gray-400",children:"Respaldos Chile"})]})]}),o.jsx("nav",{className:"flex-1 p-4 space-y-1",children:c.map(({to:m,icon:p,label:g})=>o.jsxs(xb,{to:m,className:({isActive:y})=>`flex items-center gap-3 px-4 py-3 rounded-lg transition ${y?"bg-indigo-50 text-indigo-600 font-medium":"text-gray-600 hover:bg-gray-100"}`,children:[o.jsx(p,{className:"w-5 h-5"}),o.jsx("span",{children:g})]},m))}),o.jsx("div",{className:"p-4 border-t border-gray-200",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center",style:{backgroundColor:a?.avatarColor||"#6366f1"},children:o.jsx("span",{className:"text-white font-medium text-sm",children:a?.name?.[0]?.toUpperCase()||a?.username?.[0]?.toUpperCase()||"A"})}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium text-gray-800 text-sm",children:a?.name||a?.username||"Admin"}),o.jsx("p",{className:"text-xs text-gray-400",children:f})]})]}),o.jsx("button",{onClick:u,className:"p-2 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded-lg transition",title:"Cerrar sesion",children:o.jsx(MS,{className:"w-5 h-5"})})]})})]}),o.jsx("main",{className:"flex-1 overflow-auto",children:o.jsx(Wj,{})})]})}async function x4(t,a){const s=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:t,password:a})});if(!s.ok){const c=await s.json().catch(()=>({}));throw new Error(c.error||"Credenciales invlidas")}const i=await s.json();return{agent:i.agent,token:i.token,basicToken:i.basicToken}}function y4(){const[t,a]=j.useState(""),[s,i]=j.useState(""),[c,u]=j.useState(""),[f,m]=j.useState(!1),p=$s(),g=Mt(x=>x.login),y=async x=>{x.preventDefault(),u(""),m(!0);try{const{agent:b,token:S,basicToken:_}=await x4(t,s);g(b,S,_),p("/dashboard")}catch(b){u(b.message||"Error al iniciar sesin")}finally{m(!1)}};return o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 flex items-center justify-center p-5",children:o.jsxs("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-md p-10",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsx("div",{className:"w-18 h-18 bg-gradient-to-br from-indigo-500 to-blue-600 rounded-2xl flex items-center justify-center mx-auto mb-5 p-4",children:o.jsx("svg",{className:"w-11 h-11 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})})}),o.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Chat Platform"}),o.jsx("p",{className:"text-gray-500 text-sm",children:"Ingresa tus credenciales para continuar"})]}),o.jsxs("form",{onSubmit:y,children:[c&&o.jsx("div",{className:"bg-red-50 text-red-600 px-4 py-3 rounded-xl text-sm mb-5 border border-red-200",children:c}),o.jsxs("div",{className:"mb-5",children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Usuario"}),o.jsx("input",{type:"text",value:t,onChange:x=>a(x.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl text-base outline-none transition-colors focus:border-indigo-500",placeholder:"admin",required:!0})]}),o.jsxs("div",{className:"mb-6",children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Contrasea"}),o.jsx("input",{type:"password",value:s,onChange:x=>i(x.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl text-base outline-none transition-colors focus:border-indigo-500",placeholder:"",required:!0})]}),o.jsx("button",{type:"submit",disabled:f,className:"w-full bg-gradient-to-r from-indigo-500 to-blue-600 hover:from-indigo-600 hover:to-blue-700 text-white font-semibold py-3.5 px-5 rounded-xl text-base transition-all shadow-lg shadow-indigo-500/30 disabled:opacity-60 disabled:cursor-not-allowed",children:f?"Ingresando...":"Ingresar"})]}),o.jsx("p",{className:"text-center text-gray-400 text-xs mt-8",children:"Respaldos Chile  2025"})]})})}const No=()=>{const t=Mt.getState().token;return{"Content-Type":"application/json",...t?{Authorization:`Bearer ${t}`}:{}}};async function _b(t,a){const s=new URLSearchParams;t&&s.set("filter",t);const i=s.toString(),c=await fetch(`/api/chat/conversations${i?"?"+i:""}`,{headers:No()});if(!c.ok)throw new Error("Error loading conversations");return c.json()}async function b4(t){const a=await fetch(`/api/chat/conversations/${encodeURIComponent(t)}`,{headers:No()});if(!a.ok)throw new Error("Error loading conversation");return a.json()}async function v4(t,a){const s=await fetch("/api/chat/send",{method:"POST",headers:No(),body:JSON.stringify({to:t,message:a})});if(!s.ok)throw new Error("Error sending message");return s.json()}async function Sx(t){const a=await fetch("/api/chat/mark-read",{method:"POST",headers:No(),body:JSON.stringify({phone:t})});if(!a.ok)throw new Error("Error marking as read");return a.json()}async function w4(){const t=await fetch("/api/chatbot/stats",{headers:No()});if(!t.ok)throw new Error("Error loading stats");return t.json()}function ln({title:t,value:a,icon:s,color:i="green",subtitle:c}){const u={green:"bg-green-50 text-green-600",blue:"bg-blue-50 text-blue-600",yellow:"bg-yellow-50 text-yellow-600",purple:"bg-purple-50 text-purple-600",red:"bg-red-50 text-red-600"};return o.jsx("div",{className:"bg-white rounded-xl p-6 border border-gray-100 shadow-sm",children:o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-500 font-medium",children:t}),o.jsx("p",{className:"text-3xl font-bold text-gray-800 mt-2",children:a}),c&&o.jsx("p",{className:"text-xs text-gray-400 mt-1",children:c})]}),s&&o.jsx("div",{className:`p-3 rounded-xl ${u[i]}`,children:o.jsx(s,{className:"w-6 h-6"})})]})})}const Eb=6048e5,j4=864e5,ac=43200,_x=1440,Ex=Symbol.for("constructDateFrom");function xa(t,a){return typeof t=="function"?t(a):t&&typeof t=="object"&&Ex in t?t[Ex](a):t instanceof Date?new t.constructor(a):new Date(a)}function pt(t,a){return xa(a||t,t)}let N4={};function So(){return N4}function oo(t,a){const s=So(),i=a?.weekStartsOn??a?.locale?.options?.weekStartsOn??s.weekStartsOn??s.locale?.options?.weekStartsOn??0,c=pt(t,a?.in),u=c.getDay(),f=(u<i?7:0)+u-i;return c.setDate(c.getDate()-f),c.setHours(0,0,0,0),c}function Oc(t,a){return oo(t,{...a,weekStartsOn:1})}function Cb(t,a){const s=pt(t,a?.in),i=s.getFullYear(),c=xa(s,0);c.setFullYear(i+1,0,4),c.setHours(0,0,0,0);const u=Oc(c),f=xa(s,0);f.setFullYear(i,0,4),f.setHours(0,0,0,0);const m=Oc(f);return s.getTime()>=u.getTime()?i+1:s.getTime()>=m.getTime()?i:i-1}function Bc(t){const a=pt(t),s=new Date(Date.UTC(a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes(),a.getSeconds(),a.getMilliseconds()));return s.setUTCFullYear(a.getFullYear()),+t-+s}function eu(t,...a){const s=xa.bind(null,t||a.find(i=>typeof i=="object"));return a.map(s)}function Cx(t,a){const s=pt(t,a?.in);return s.setHours(0,0,0,0),s}function S4(t,a,s){const[i,c]=eu(s?.in,t,a),u=Cx(i),f=Cx(c),m=+u-Bc(u),p=+f-Bc(f);return Math.round((m-p)/j4)}function _4(t,a){const s=Cb(t,a),i=xa(t,0);return i.setFullYear(s,0,4),i.setHours(0,0,0,0),Oc(i)}function vc(t,a){const s=+pt(t)-+pt(a);return s<0?-1:s>0?1:s}function E4(t){return xa(t,Date.now())}function C4(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function T4(t){return!(!C4(t)&&typeof t!="number"||isNaN(+pt(t)))}function M4(t,a,s){const[i,c]=eu(s?.in,t,a),u=i.getFullYear()-c.getFullYear(),f=i.getMonth()-c.getMonth();return u*12+f}function A4(t){return a=>{const i=(t?Math[t]:Math.trunc)(a);return i===0?0:i}}function k4(t,a){return+pt(t)-+pt(a)}function z4(t,a){const s=pt(t,a?.in);return s.setHours(23,59,59,999),s}function R4(t,a){const s=pt(t,a?.in),i=s.getMonth();return s.setFullYear(s.getFullYear(),i+1,0),s.setHours(23,59,59,999),s}function D4(t,a){const s=pt(t,a?.in);return+z4(s,a)==+R4(s,a)}function O4(t,a,s){const[i,c,u]=eu(s?.in,t,t,a),f=vc(c,u),m=Math.abs(M4(c,u));if(m<1)return 0;c.getMonth()===1&&c.getDate()>27&&c.setDate(30),c.setMonth(c.getMonth()-f*m);let p=vc(c,u)===-f;D4(i)&&m===1&&vc(i,u)===1&&(p=!1);const g=f*(m-+p);return g===0?0:g}function B4(t,a,s){const i=k4(t,a)/1e3;return A4(s?.roundingMethod)(i)}function L4(t,a){const s=pt(t,a?.in);return s.setFullYear(s.getFullYear(),0,1),s.setHours(0,0,0,0),s}const H4={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},$4=(t,a,s)=>{let i;const c=H4[t];return typeof c=="string"?i=c:a===1?i=c.one:i=c.other.replace("{{count}}",a.toString()),s?.addSuffix?s.comparison&&s.comparison>0?"in "+i:i+" ago":i};function Dr(t){return(a={})=>{const s=a.width?String(a.width):t.defaultWidth;return t.formats[s]||t.formats[t.defaultWidth]}}const U4={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},q4={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},V4={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Y4={date:Dr({formats:U4,defaultWidth:"full"}),time:Dr({formats:q4,defaultWidth:"full"}),dateTime:Dr({formats:V4,defaultWidth:"full"})},P4={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},X4=(t,a,s,i)=>P4[t];function Rn(t){return(a,s)=>{const i=s?.context?String(s.context):"standalone";let c;if(i==="formatting"&&t.formattingValues){const f=t.defaultFormattingWidth||t.defaultWidth,m=s?.width?String(s.width):f;c=t.formattingValues[m]||t.formattingValues[f]}else{const f=t.defaultWidth,m=s?.width?String(s.width):t.defaultWidth;c=t.values[m]||t.values[f]}const u=t.argumentCallback?t.argumentCallback(a):a;return c[u]}}const I4={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},G4={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Q4={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Z4={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},F4={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},W4={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},K4=(t,a)=>{const s=Number(t),i=s%100;if(i>20||i<10)switch(i%10){case 1:return s+"st";case 2:return s+"nd";case 3:return s+"rd"}return s+"th"},J4={ordinalNumber:K4,era:Rn({values:I4,defaultWidth:"wide"}),quarter:Rn({values:G4,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Rn({values:Q4,defaultWidth:"wide"}),day:Rn({values:Z4,defaultWidth:"wide"}),dayPeriod:Rn({values:F4,defaultWidth:"wide",formattingValues:W4,defaultFormattingWidth:"wide"})};function Dn(t){return(a,s={})=>{const i=s.width,c=i&&t.matchPatterns[i]||t.matchPatterns[t.defaultMatchWidth],u=a.match(c);if(!u)return null;const f=u[0],m=i&&t.parsePatterns[i]||t.parsePatterns[t.defaultParseWidth],p=Array.isArray(m)?t5(m,x=>x.test(f)):e5(m,x=>x.test(f));let g;g=t.valueCallback?t.valueCallback(p):p,g=s.valueCallback?s.valueCallback(g):g;const y=a.slice(f.length);return{value:g,rest:y}}}function e5(t,a){for(const s in t)if(Object.prototype.hasOwnProperty.call(t,s)&&a(t[s]))return s}function t5(t,a){for(let s=0;s<t.length;s++)if(a(t[s]))return s}function Tb(t){return(a,s={})=>{const i=a.match(t.matchPattern);if(!i)return null;const c=i[0],u=a.match(t.parsePattern);if(!u)return null;let f=t.valueCallback?t.valueCallback(u[0]):u[0];f=s.valueCallback?s.valueCallback(f):f;const m=a.slice(c.length);return{value:f,rest:m}}}const n5=/^(\d+)(th|st|nd|rd)?/i,a5=/\d+/i,s5={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},r5={any:[/^b/i,/^(a|c)/i]},i5={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},o5={any:[/1/i,/2/i,/3/i,/4/i]},l5={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},c5={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},u5={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},d5={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},f5={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},h5={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},m5={ordinalNumber:Tb({matchPattern:n5,parsePattern:a5,valueCallback:t=>parseInt(t,10)}),era:Dn({matchPatterns:s5,defaultMatchWidth:"wide",parsePatterns:r5,defaultParseWidth:"any"}),quarter:Dn({matchPatterns:i5,defaultMatchWidth:"wide",parsePatterns:o5,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Dn({matchPatterns:l5,defaultMatchWidth:"wide",parsePatterns:c5,defaultParseWidth:"any"}),day:Dn({matchPatterns:u5,defaultMatchWidth:"wide",parsePatterns:d5,defaultParseWidth:"any"}),dayPeriod:Dn({matchPatterns:f5,defaultMatchWidth:"any",parsePatterns:h5,defaultParseWidth:"any"})},Mb={code:"en-US",formatDistance:$4,formatLong:Y4,formatRelative:X4,localize:J4,match:m5,options:{weekStartsOn:0,firstWeekContainsDate:1}};function p5(t,a){const s=pt(t,a?.in);return S4(s,L4(s))+1}function g5(t,a){const s=pt(t,a?.in),i=+Oc(s)-+_4(s);return Math.round(i/Eb)+1}function Ab(t,a){const s=pt(t,a?.in),i=s.getFullYear(),c=So(),u=a?.firstWeekContainsDate??a?.locale?.options?.firstWeekContainsDate??c.firstWeekContainsDate??c.locale?.options?.firstWeekContainsDate??1,f=xa(a?.in||t,0);f.setFullYear(i+1,0,u),f.setHours(0,0,0,0);const m=oo(f,a),p=xa(a?.in||t,0);p.setFullYear(i,0,u),p.setHours(0,0,0,0);const g=oo(p,a);return+s>=+m?i+1:+s>=+g?i:i-1}function x5(t,a){const s=So(),i=a?.firstWeekContainsDate??a?.locale?.options?.firstWeekContainsDate??s.firstWeekContainsDate??s.locale?.options?.firstWeekContainsDate??1,c=Ab(t,a),u=xa(a?.in||t,0);return u.setFullYear(c,0,i),u.setHours(0,0,0,0),oo(u,a)}function y5(t,a){const s=pt(t,a?.in),i=+oo(s,a)-+x5(s,a);return Math.round(i/Eb)+1}function Ve(t,a){const s=t<0?"-":"",i=Math.abs(t).toString().padStart(a,"0");return s+i}const Fa={y(t,a){const s=t.getFullYear(),i=s>0?s:1-s;return Ve(a==="yy"?i%100:i,a.length)},M(t,a){const s=t.getMonth();return a==="M"?String(s+1):Ve(s+1,2)},d(t,a){return Ve(t.getDate(),a.length)},a(t,a){const s=t.getHours()/12>=1?"pm":"am";switch(a){case"a":case"aa":return s.toUpperCase();case"aaa":return s;case"aaaaa":return s[0];default:return s==="am"?"a.m.":"p.m."}},h(t,a){return Ve(t.getHours()%12||12,a.length)},H(t,a){return Ve(t.getHours(),a.length)},m(t,a){return Ve(t.getMinutes(),a.length)},s(t,a){return Ve(t.getSeconds(),a.length)},S(t,a){const s=a.length,i=t.getMilliseconds(),c=Math.trunc(i*Math.pow(10,s-3));return Ve(c,a.length)}},Er={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Tx={G:function(t,a,s){const i=t.getFullYear()>0?1:0;switch(a){case"G":case"GG":case"GGG":return s.era(i,{width:"abbreviated"});case"GGGGG":return s.era(i,{width:"narrow"});default:return s.era(i,{width:"wide"})}},y:function(t,a,s){if(a==="yo"){const i=t.getFullYear(),c=i>0?i:1-i;return s.ordinalNumber(c,{unit:"year"})}return Fa.y(t,a)},Y:function(t,a,s,i){const c=Ab(t,i),u=c>0?c:1-c;if(a==="YY"){const f=u%100;return Ve(f,2)}return a==="Yo"?s.ordinalNumber(u,{unit:"year"}):Ve(u,a.length)},R:function(t,a){const s=Cb(t);return Ve(s,a.length)},u:function(t,a){const s=t.getFullYear();return Ve(s,a.length)},Q:function(t,a,s){const i=Math.ceil((t.getMonth()+1)/3);switch(a){case"Q":return String(i);case"QQ":return Ve(i,2);case"Qo":return s.ordinalNumber(i,{unit:"quarter"});case"QQQ":return s.quarter(i,{width:"abbreviated",context:"formatting"});case"QQQQQ":return s.quarter(i,{width:"narrow",context:"formatting"});default:return s.quarter(i,{width:"wide",context:"formatting"})}},q:function(t,a,s){const i=Math.ceil((t.getMonth()+1)/3);switch(a){case"q":return String(i);case"qq":return Ve(i,2);case"qo":return s.ordinalNumber(i,{unit:"quarter"});case"qqq":return s.quarter(i,{width:"abbreviated",context:"standalone"});case"qqqqq":return s.quarter(i,{width:"narrow",context:"standalone"});default:return s.quarter(i,{width:"wide",context:"standalone"})}},M:function(t,a,s){const i=t.getMonth();switch(a){case"M":case"MM":return Fa.M(t,a);case"Mo":return s.ordinalNumber(i+1,{unit:"month"});case"MMM":return s.month(i,{width:"abbreviated",context:"formatting"});case"MMMMM":return s.month(i,{width:"narrow",context:"formatting"});default:return s.month(i,{width:"wide",context:"formatting"})}},L:function(t,a,s){const i=t.getMonth();switch(a){case"L":return String(i+1);case"LL":return Ve(i+1,2);case"Lo":return s.ordinalNumber(i+1,{unit:"month"});case"LLL":return s.month(i,{width:"abbreviated",context:"standalone"});case"LLLLL":return s.month(i,{width:"narrow",context:"standalone"});default:return s.month(i,{width:"wide",context:"standalone"})}},w:function(t,a,s,i){const c=y5(t,i);return a==="wo"?s.ordinalNumber(c,{unit:"week"}):Ve(c,a.length)},I:function(t,a,s){const i=g5(t);return a==="Io"?s.ordinalNumber(i,{unit:"week"}):Ve(i,a.length)},d:function(t,a,s){return a==="do"?s.ordinalNumber(t.getDate(),{unit:"date"}):Fa.d(t,a)},D:function(t,a,s){const i=p5(t);return a==="Do"?s.ordinalNumber(i,{unit:"dayOfYear"}):Ve(i,a.length)},E:function(t,a,s){const i=t.getDay();switch(a){case"E":case"EE":case"EEE":return s.day(i,{width:"abbreviated",context:"formatting"});case"EEEEE":return s.day(i,{width:"narrow",context:"formatting"});case"EEEEEE":return s.day(i,{width:"short",context:"formatting"});default:return s.day(i,{width:"wide",context:"formatting"})}},e:function(t,a,s,i){const c=t.getDay(),u=(c-i.weekStartsOn+8)%7||7;switch(a){case"e":return String(u);case"ee":return Ve(u,2);case"eo":return s.ordinalNumber(u,{unit:"day"});case"eee":return s.day(c,{width:"abbreviated",context:"formatting"});case"eeeee":return s.day(c,{width:"narrow",context:"formatting"});case"eeeeee":return s.day(c,{width:"short",context:"formatting"});default:return s.day(c,{width:"wide",context:"formatting"})}},c:function(t,a,s,i){const c=t.getDay(),u=(c-i.weekStartsOn+8)%7||7;switch(a){case"c":return String(u);case"cc":return Ve(u,a.length);case"co":return s.ordinalNumber(u,{unit:"day"});case"ccc":return s.day(c,{width:"abbreviated",context:"standalone"});case"ccccc":return s.day(c,{width:"narrow",context:"standalone"});case"cccccc":return s.day(c,{width:"short",context:"standalone"});default:return s.day(c,{width:"wide",context:"standalone"})}},i:function(t,a,s){const i=t.getDay(),c=i===0?7:i;switch(a){case"i":return String(c);case"ii":return Ve(c,a.length);case"io":return s.ordinalNumber(c,{unit:"day"});case"iii":return s.day(i,{width:"abbreviated",context:"formatting"});case"iiiii":return s.day(i,{width:"narrow",context:"formatting"});case"iiiiii":return s.day(i,{width:"short",context:"formatting"});default:return s.day(i,{width:"wide",context:"formatting"})}},a:function(t,a,s){const c=t.getHours()/12>=1?"pm":"am";switch(a){case"a":case"aa":return s.dayPeriod(c,{width:"abbreviated",context:"formatting"});case"aaa":return s.dayPeriod(c,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return s.dayPeriod(c,{width:"narrow",context:"formatting"});default:return s.dayPeriod(c,{width:"wide",context:"formatting"})}},b:function(t,a,s){const i=t.getHours();let c;switch(i===12?c=Er.noon:i===0?c=Er.midnight:c=i/12>=1?"pm":"am",a){case"b":case"bb":return s.dayPeriod(c,{width:"abbreviated",context:"formatting"});case"bbb":return s.dayPeriod(c,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return s.dayPeriod(c,{width:"narrow",context:"formatting"});default:return s.dayPeriod(c,{width:"wide",context:"formatting"})}},B:function(t,a,s){const i=t.getHours();let c;switch(i>=17?c=Er.evening:i>=12?c=Er.afternoon:i>=4?c=Er.morning:c=Er.night,a){case"B":case"BB":case"BBB":return s.dayPeriod(c,{width:"abbreviated",context:"formatting"});case"BBBBB":return s.dayPeriod(c,{width:"narrow",context:"formatting"});default:return s.dayPeriod(c,{width:"wide",context:"formatting"})}},h:function(t,a,s){if(a==="ho"){let i=t.getHours()%12;return i===0&&(i=12),s.ordinalNumber(i,{unit:"hour"})}return Fa.h(t,a)},H:function(t,a,s){return a==="Ho"?s.ordinalNumber(t.getHours(),{unit:"hour"}):Fa.H(t,a)},K:function(t,a,s){const i=t.getHours()%12;return a==="Ko"?s.ordinalNumber(i,{unit:"hour"}):Ve(i,a.length)},k:function(t,a,s){let i=t.getHours();return i===0&&(i=24),a==="ko"?s.ordinalNumber(i,{unit:"hour"}):Ve(i,a.length)},m:function(t,a,s){return a==="mo"?s.ordinalNumber(t.getMinutes(),{unit:"minute"}):Fa.m(t,a)},s:function(t,a,s){return a==="so"?s.ordinalNumber(t.getSeconds(),{unit:"second"}):Fa.s(t,a)},S:function(t,a){return Fa.S(t,a)},X:function(t,a,s){const i=t.getTimezoneOffset();if(i===0)return"Z";switch(a){case"X":return Ax(i);case"XXXX":case"XX":return Cs(i);default:return Cs(i,":")}},x:function(t,a,s){const i=t.getTimezoneOffset();switch(a){case"x":return Ax(i);case"xxxx":case"xx":return Cs(i);default:return Cs(i,":")}},O:function(t,a,s){const i=t.getTimezoneOffset();switch(a){case"O":case"OO":case"OOO":return"GMT"+Mx(i,":");default:return"GMT"+Cs(i,":")}},z:function(t,a,s){const i=t.getTimezoneOffset();switch(a){case"z":case"zz":case"zzz":return"GMT"+Mx(i,":");default:return"GMT"+Cs(i,":")}},t:function(t,a,s){const i=Math.trunc(+t/1e3);return Ve(i,a.length)},T:function(t,a,s){return Ve(+t,a.length)}};function Mx(t,a=""){const s=t>0?"-":"+",i=Math.abs(t),c=Math.trunc(i/60),u=i%60;return u===0?s+String(c):s+String(c)+a+Ve(u,2)}function Ax(t,a){return t%60===0?(t>0?"-":"+")+Ve(Math.abs(t)/60,2):Cs(t,a)}function Cs(t,a=""){const s=t>0?"-":"+",i=Math.abs(t),c=Ve(Math.trunc(i/60),2),u=Ve(i%60,2);return s+c+a+u}const kx=(t,a)=>{switch(t){case"P":return a.date({width:"short"});case"PP":return a.date({width:"medium"});case"PPP":return a.date({width:"long"});default:return a.date({width:"full"})}},kb=(t,a)=>{switch(t){case"p":return a.time({width:"short"});case"pp":return a.time({width:"medium"});case"ppp":return a.time({width:"long"});default:return a.time({width:"full"})}},b5=(t,a)=>{const s=t.match(/(P+)(p+)?/)||[],i=s[1],c=s[2];if(!c)return kx(t,a);let u;switch(i){case"P":u=a.dateTime({width:"short"});break;case"PP":u=a.dateTime({width:"medium"});break;case"PPP":u=a.dateTime({width:"long"});break;default:u=a.dateTime({width:"full"});break}return u.replace("{{date}}",kx(i,a)).replace("{{time}}",kb(c,a))},v5={p:kb,P:b5},w5=/^D+$/,j5=/^Y+$/,N5=["D","DD","YY","YYYY"];function S5(t){return w5.test(t)}function _5(t){return j5.test(t)}function E5(t,a,s){const i=C5(t,a,s);if(console.warn(i),N5.includes(t))throw new RangeError(i)}function C5(t,a,s){const i=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${a}\`) for formatting ${i} to the input \`${s}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const T5=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,M5=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,A5=/^'([^]*?)'?$/,k5=/''/g,z5=/[a-zA-Z]/;function tu(t,a,s){const i=So(),c=s?.locale??i.locale??Mb,u=s?.firstWeekContainsDate??s?.locale?.options?.firstWeekContainsDate??i.firstWeekContainsDate??i.locale?.options?.firstWeekContainsDate??1,f=s?.weekStartsOn??s?.locale?.options?.weekStartsOn??i.weekStartsOn??i.locale?.options?.weekStartsOn??0,m=pt(t,s?.in);if(!T4(m))throw new RangeError("Invalid time value");let p=a.match(M5).map(y=>{const x=y[0];if(x==="p"||x==="P"){const b=v5[x];return b(y,c.formatLong)}return y}).join("").match(T5).map(y=>{if(y==="''")return{isToken:!1,value:"'"};const x=y[0];if(x==="'")return{isToken:!1,value:R5(y)};if(Tx[x])return{isToken:!0,value:y};if(x.match(z5))throw new RangeError("Format string contains an unescaped latin alphabet character `"+x+"`");return{isToken:!1,value:y}});c.localize.preprocessor&&(p=c.localize.preprocessor(m,p));const g={firstWeekContainsDate:u,weekStartsOn:f,locale:c};return p.map(y=>{if(!y.isToken)return y.value;const x=y.value;(!s?.useAdditionalWeekYearTokens&&_5(x)||!s?.useAdditionalDayOfYearTokens&&S5(x))&&E5(x,a,String(t));const b=Tx[x[0]];return b(m,x,c.localize,g)}).join("")}function R5(t){const a=t.match(A5);return a?a[1].replace(k5,"'"):t}function D5(t,a,s){const i=So(),c=s?.locale??i.locale??Mb,u=2520,f=vc(t,a);if(isNaN(f))throw new RangeError("Invalid time value");const m=Object.assign({},s,{addSuffix:s?.addSuffix,comparison:f}),[p,g]=eu(s?.in,...f>0?[a,t]:[t,a]),y=B4(g,p),x=(Bc(g)-Bc(p))/1e3,b=Math.round((y-x)/60);let S;if(b<2)return s?.includeSeconds?y<5?c.formatDistance("lessThanXSeconds",5,m):y<10?c.formatDistance("lessThanXSeconds",10,m):y<20?c.formatDistance("lessThanXSeconds",20,m):y<40?c.formatDistance("halfAMinute",0,m):y<60?c.formatDistance("lessThanXMinutes",1,m):c.formatDistance("xMinutes",1,m):b===0?c.formatDistance("lessThanXMinutes",1,m):c.formatDistance("xMinutes",b,m);if(b<45)return c.formatDistance("xMinutes",b,m);if(b<90)return c.formatDistance("aboutXHours",1,m);if(b<_x){const _=Math.round(b/60);return c.formatDistance("aboutXHours",_,m)}else{if(b<u)return c.formatDistance("xDays",1,m);if(b<ac){const _=Math.round(b/_x);return c.formatDistance("xDays",_,m)}else if(b<ac*2)return S=Math.round(b/ac),c.formatDistance("aboutXMonths",S,m)}if(S=O4(g,p),S<12){const _=Math.round(b/ac);return c.formatDistance("xMonths",_,m)}else{const _=S%12,C=Math.trunc(S/12);return _<3?c.formatDistance("aboutXYears",C,m):_<9?c.formatDistance("overXYears",C,m):c.formatDistance("almostXYears",C+1,m)}}function Fr(t,a){return D5(t,E4(t),a)}const O5={lessThanXSeconds:{one:"menos de un segundo",other:"menos de {{count}} segundos"},xSeconds:{one:"1 segundo",other:"{{count}} segundos"},halfAMinute:"medio minuto",lessThanXMinutes:{one:"menos de un minuto",other:"menos de {{count}} minutos"},xMinutes:{one:"1 minuto",other:"{{count}} minutos"},aboutXHours:{one:"alrededor de 1 hora",other:"alrededor de {{count}} horas"},xHours:{one:"1 hora",other:"{{count}} horas"},xDays:{one:"1 da",other:"{{count}} das"},aboutXWeeks:{one:"alrededor de 1 semana",other:"alrededor de {{count}} semanas"},xWeeks:{one:"1 semana",other:"{{count}} semanas"},aboutXMonths:{one:"alrededor de 1 mes",other:"alrededor de {{count}} meses"},xMonths:{one:"1 mes",other:"{{count}} meses"},aboutXYears:{one:"alrededor de 1 ao",other:"alrededor de {{count}} aos"},xYears:{one:"1 ao",other:"{{count}} aos"},overXYears:{one:"ms de 1 ao",other:"ms de {{count}} aos"},almostXYears:{one:"casi 1 ao",other:"casi {{count}} aos"}},B5=(t,a,s)=>{let i;const c=O5[t];return typeof c=="string"?i=c:a===1?i=c.one:i=c.other.replace("{{count}}",a.toString()),s?.addSuffix?s.comparison&&s.comparison>0?"en "+i:"hace "+i:i},L5={full:"EEEE, d 'de' MMMM 'de' y",long:"d 'de' MMMM 'de' y",medium:"d MMM y",short:"dd/MM/y"},H5={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},$5={full:"{{date}} 'a las' {{time}}",long:"{{date}} 'a las' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},U5={date:Dr({formats:L5,defaultWidth:"full"}),time:Dr({formats:H5,defaultWidth:"full"}),dateTime:Dr({formats:$5,defaultWidth:"full"})},q5={lastWeek:"'el' eeee 'pasado a la' p",yesterday:"'ayer a la' p",today:"'hoy a la' p",tomorrow:"'maana a la' p",nextWeek:"eeee 'a la' p",other:"P"},V5={lastWeek:"'el' eeee 'pasado a las' p",yesterday:"'ayer a las' p",today:"'hoy a las' p",tomorrow:"'maana a las' p",nextWeek:"eeee 'a las' p",other:"P"},Y5=(t,a,s,i)=>a.getHours()!==1?V5[t]:q5[t],P5={narrow:["AC","DC"],abbreviated:["AC","DC"],wide:["antes de cristo","despus de cristo"]},X5={narrow:["1","2","3","4"],abbreviated:["T1","T2","T3","T4"],wide:["1 trimestre","2 trimestre","3 trimestre","4 trimestre"]},I5={narrow:["e","f","m","a","m","j","j","a","s","o","n","d"],abbreviated:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"],wide:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"]},G5={narrow:["d","l","m","m","j","v","s"],short:["do","lu","ma","mi","ju","vi","s"],abbreviated:["dom","lun","mar","mi","jue","vie","sb"],wide:["domingo","lunes","martes","mircoles","jueves","viernes","sbado"]},Q5={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"maana",afternoon:"tarde",evening:"tarde",night:"noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"maana",afternoon:"tarde",evening:"tarde",night:"noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"maana",afternoon:"tarde",evening:"tarde",night:"noche"}},Z5={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"de la maana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"de la maana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"de la maana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"}},F5=(t,a)=>Number(t)+"",W5={ordinalNumber:F5,era:Rn({values:P5,defaultWidth:"wide"}),quarter:Rn({values:X5,defaultWidth:"wide",argumentCallback:t=>Number(t)-1}),month:Rn({values:I5,defaultWidth:"wide"}),day:Rn({values:G5,defaultWidth:"wide"}),dayPeriod:Rn({values:Q5,defaultWidth:"wide",formattingValues:Z5,defaultFormattingWidth:"wide"})},K5=/^(\d+)()?/i,J5=/\d+/i,e3={narrow:/^(ac|dc|a|d)/i,abbreviated:/^(a\.?\s?c\.?|a\.?\s?e\.?\s?c\.?|d\.?\s?c\.?|e\.?\s?c\.?)/i,wide:/^(antes de cristo|antes de la era com[u]n|despu[e]s de cristo|era com[u]n)/i},t3={any:[/^ac/i,/^dc/i],wide:[/^(antes de cristo|antes de la era com[u]n)/i,/^(despu[e]s de cristo|era com[u]n)/i]},n3={narrow:/^[1234]/i,abbreviated:/^T[1234]/i,wide:/^[1234]()? trimestre/i},a3={any:[/1/i,/2/i,/3/i,/4/i]},s3={narrow:/^[efmajsond]/i,abbreviated:/^(ene|feb|mar|abr|may|jun|jul|ago|sep|oct|nov|dic)/i,wide:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i},r3={narrow:[/^e/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^en/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i]},i3={narrow:/^[dlmjvs]/i,short:/^(do|lu|ma|mi|ju|vi|s[a])/i,abbreviated:/^(dom|lun|mar|mi[e]|jue|vie|s[a]b)/i,wide:/^(domingo|lunes|martes|mi[e]rcoles|jueves|viernes|s[a]bado)/i},o3={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^do/i,/^lu/i,/^ma/i,/^mi/i,/^ju/i,/^vi/i,/^sa/i]},l3={narrow:/^(a|p|mn|md|(de la|a las) (maana|tarde|noche))/i,any:/^([ap]\.?\s?m\.?|medianoche|mediodia|(de la|a las) (maana|tarde|noche))/i},c3={any:{am:/^a/i,pm:/^p/i,midnight:/^mn/i,noon:/^md/i,morning:/maana/i,afternoon:/tarde/i,evening:/tarde/i,night:/noche/i}},u3={ordinalNumber:Tb({matchPattern:K5,parsePattern:J5,valueCallback:function(t){return parseInt(t,10)}}),era:Dn({matchPatterns:e3,defaultMatchWidth:"wide",parsePatterns:t3,defaultParseWidth:"any"}),quarter:Dn({matchPatterns:n3,defaultMatchWidth:"wide",parsePatterns:a3,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Dn({matchPatterns:s3,defaultMatchWidth:"wide",parsePatterns:r3,defaultParseWidth:"any"}),day:Dn({matchPatterns:i3,defaultMatchWidth:"wide",parsePatterns:o3,defaultParseWidth:"any"}),dayPeriod:Dn({matchPatterns:l3,defaultMatchWidth:"any",parsePatterns:c3,defaultParseWidth:"any"})},ns={code:"es",formatDistance:B5,formatLong:U5,formatRelative:Y5,localize:W5,match:u3,options:{weekStartsOn:1,firstWeekContainsDate:1}};function d3(){const[t,a]=j.useState(null),[s,i]=j.useState([]),[c,u]=j.useState(!0);j.useEffect(()=>{f()},[]);const f=async()=>{try{const[p,g]=await Promise.all([w4(),_b()]);a(p),i(g.conversations||[])}catch(p){console.error("Error loading dashboard:",p)}finally{u(!1)}};if(c)return o.jsx("div",{className:"p-8 flex items-center justify-center h-full",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-500"})});const m=s.slice(0,5);return o.jsxs("div",{className:"p-8",children:[o.jsxs("div",{className:"mb-8",children:[o.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Dashboard"}),o.jsx("p",{className:"text-gray-500 mt-1",children:"Resumen de tu chatbot de WhatsApp"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[o.jsx(ln,{title:"Conversaciones",value:s.length,icon:ga,color:"green",subtitle:"Total activas"}),o.jsx(ln,{title:"Usuarios nicos",value:t?.unique_users||0,icon:Jc,color:"blue",subtitle:"ltimos 30 das"}),o.jsx(ln,{title:"Interacciones",value:t?.interactions||0,icon:Yh,color:"purple",subtitle:"Procesadas por el bot"}),o.jsx(ln,{title:"Confianza",value:`${Math.round((t?.avg_confidence||0)*100)}%`,icon:Rc,color:"yellow",subtitle:"Promedio clasificacin"})]}),o.jsxs("div",{className:"bg-white rounded-xl border border-gray-100 shadow-sm",children:[o.jsxs("div",{className:"p-6 border-b border-gray-100 flex items-center justify-between",children:[o.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"Conversaciones Recientes"}),o.jsxs(Ms,{to:"/conversations",className:"text-green-600 hover:text-green-700 text-sm font-medium flex items-center gap-1",children:["Ver todas ",o.jsx(FN,{className:"w-4 h-4"})]})]}),m.length===0?o.jsxs("div",{className:"p-12 text-center text-gray-400",children:[o.jsx(ga,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),o.jsx("p",{children:"No hay conversaciones todava"})]}):o.jsx("div",{className:"divide-y divide-gray-100",children:m.map(p=>o.jsxs(Ms,{to:`/conversations?phone=${encodeURIComponent(p.phone)}`,className:"flex items-center gap-4 p-4 hover:bg-gray-50 transition",children:[o.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center flex-shrink-0",children:o.jsx("span",{className:"text-green-600 font-medium",children:p.contact_name?.[0]?.toUpperCase()||p.phone.slice(-2)})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("p",{className:"font-medium text-gray-800 truncate",children:p.contact_name||p.phone}),o.jsx("span",{className:"text-xs text-gray-400",children:p.last_message_time?Fr(new Date(p.last_message_time),{addSuffix:!0,locale:ns}):""})]}),o.jsx("p",{className:"text-sm text-gray-500 truncate mt-1",children:p.last_message||"Sin mensajes"})]}),p.unread_count>0&&o.jsx("span",{className:"bg-green-500 text-white text-xs font-medium px-2 py-1 rounded-full",children:p.unread_count})]},p.phone))})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-8",children:[o.jsxs(Ms,{to:"/flows",className:"bg-gradient-to-r from-green-500 to-green-600 rounded-xl p-6 text-white hover:from-green-600 hover:to-green-700 transition",children:[o.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Editor de Flujos"}),o.jsx("p",{className:"text-green-100 text-sm",children:"Crea y edita flujos conversacionales de forma visual"})]}),o.jsxs(Ms,{to:"/conversations",className:"bg-gradient-to-r from-blue-500 to-blue-600 rounded-xl p-6 text-white hover:from-blue-600 hover:to-blue-700 transition",children:[o.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Ver Conversaciones"}),o.jsx("p",{className:"text-blue-100 text-sm",children:"Responde a tus clientes en tiempo real"})]})]})]})}const Ln=Object.create(null);Ln.open="0";Ln.close="1";Ln.ping="2";Ln.pong="3";Ln.message="4";Ln.upgrade="5";Ln.noop="6";const wc=Object.create(null);Object.keys(Ln).forEach(t=>{wc[Ln[t]]=t});const fh={type:"error",data:"parser error"},zb=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",Rb=typeof ArrayBuffer=="function",Db=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,Wh=({type:t,data:a},s,i)=>zb&&a instanceof Blob?s?i(a):zx(a,i):Rb&&(a instanceof ArrayBuffer||Db(a))?s?i(a):zx(new Blob([a]),i):i(Ln[t]+(a||"")),zx=(t,a)=>{const s=new FileReader;return s.onload=function(){const i=s.result.split(",")[1];a("b"+(i||""))},s.readAsDataURL(t)};function Rx(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}let Vf;function f3(t,a){if(zb&&t.data instanceof Blob)return t.data.arrayBuffer().then(Rx).then(a);if(Rb&&(t.data instanceof ArrayBuffer||Db(t.data)))return a(Rx(t.data));Wh(t,!1,s=>{Vf||(Vf=new TextEncoder),a(Vf.encode(s))})}const Dx="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",to=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let t=0;t<Dx.length;t++)to[Dx.charCodeAt(t)]=t;const h3=t=>{let a=t.length*.75,s=t.length,i,c=0,u,f,m,p;t[t.length-1]==="="&&(a--,t[t.length-2]==="="&&a--);const g=new ArrayBuffer(a),y=new Uint8Array(g);for(i=0;i<s;i+=4)u=to[t.charCodeAt(i)],f=to[t.charCodeAt(i+1)],m=to[t.charCodeAt(i+2)],p=to[t.charCodeAt(i+3)],y[c++]=u<<2|f>>4,y[c++]=(f&15)<<4|m>>2,y[c++]=(m&3)<<6|p&63;return g},m3=typeof ArrayBuffer=="function",Kh=(t,a)=>{if(typeof t!="string")return{type:"message",data:Ob(t,a)};const s=t.charAt(0);return s==="b"?{type:"message",data:p3(t.substring(1),a)}:wc[s]?t.length>1?{type:wc[s],data:t.substring(1)}:{type:wc[s]}:fh},p3=(t,a)=>{if(m3){const s=h3(t);return Ob(s,a)}else return{base64:!0,data:t}},Ob=(t,a)=>a==="blob"?t instanceof Blob?t:new Blob([t]):t instanceof ArrayBuffer?t:t.buffer,Bb="",g3=(t,a)=>{const s=t.length,i=new Array(s);let c=0;t.forEach((u,f)=>{Wh(u,!1,m=>{i[f]=m,++c===s&&a(i.join(Bb))})})},x3=(t,a)=>{const s=t.split(Bb),i=[];for(let c=0;c<s.length;c++){const u=Kh(s[c],a);if(i.push(u),u.type==="error")break}return i};function y3(){return new TransformStream({transform(t,a){f3(t,s=>{const i=s.length;let c;if(i<126)c=new Uint8Array(1),new DataView(c.buffer).setUint8(0,i);else if(i<65536){c=new Uint8Array(3);const u=new DataView(c.buffer);u.setUint8(0,126),u.setUint16(1,i)}else{c=new Uint8Array(9);const u=new DataView(c.buffer);u.setUint8(0,127),u.setBigUint64(1,BigInt(i))}t.data&&typeof t.data!="string"&&(c[0]|=128),a.enqueue(c),a.enqueue(s)})}})}let Yf;function sc(t){return t.reduce((a,s)=>a+s.length,0)}function rc(t,a){if(t[0].length===a)return t.shift();const s=new Uint8Array(a);let i=0;for(let c=0;c<a;c++)s[c]=t[0][i++],i===t[0].length&&(t.shift(),i=0);return t.length&&i<t[0].length&&(t[0]=t[0].slice(i)),s}function b3(t,a){Yf||(Yf=new TextDecoder);const s=[];let i=0,c=-1,u=!1;return new TransformStream({transform(f,m){for(s.push(f);;){if(i===0){if(sc(s)<1)break;const p=rc(s,1);u=(p[0]&128)===128,c=p[0]&127,c<126?i=3:c===126?i=1:i=2}else if(i===1){if(sc(s)<2)break;const p=rc(s,2);c=new DataView(p.buffer,p.byteOffset,p.length).getUint16(0),i=3}else if(i===2){if(sc(s)<8)break;const p=rc(s,8),g=new DataView(p.buffer,p.byteOffset,p.length),y=g.getUint32(0);if(y>Math.pow(2,21)-1){m.enqueue(fh);break}c=y*Math.pow(2,32)+g.getUint32(4),i=3}else{if(sc(s)<c)break;const p=rc(s,c);m.enqueue(Kh(u?p:Yf.decode(p),a)),i=0}if(c===0||c>t){m.enqueue(fh);break}}}})}const Lb=4;function ct(t){if(t)return v3(t)}function v3(t){for(var a in ct.prototype)t[a]=ct.prototype[a];return t}ct.prototype.on=ct.prototype.addEventListener=function(t,a){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(a),this};ct.prototype.once=function(t,a){function s(){this.off(t,s),a.apply(this,arguments)}return s.fn=a,this.on(t,s),this};ct.prototype.off=ct.prototype.removeListener=ct.prototype.removeAllListeners=ct.prototype.removeEventListener=function(t,a){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var s=this._callbacks["$"+t];if(!s)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var i,c=0;c<s.length;c++)if(i=s[c],i===a||i.fn===a){s.splice(c,1);break}return s.length===0&&delete this._callbacks["$"+t],this};ct.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var a=new Array(arguments.length-1),s=this._callbacks["$"+t],i=1;i<arguments.length;i++)a[i-1]=arguments[i];if(s){s=s.slice(0);for(var i=0,c=s.length;i<c;++i)s[i].apply(this,a)}return this};ct.prototype.emitReserved=ct.prototype.emit;ct.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]};ct.prototype.hasListeners=function(t){return!!this.listeners(t).length};const nu=typeof Promise=="function"&&typeof Promise.resolve=="function"?a=>Promise.resolve().then(a):(a,s)=>s(a,0),on=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),w3="arraybuffer";function Hb(t,...a){return a.reduce((s,i)=>(t.hasOwnProperty(i)&&(s[i]=t[i]),s),{})}const j3=on.setTimeout,N3=on.clearTimeout;function au(t,a){a.useNativeTimers?(t.setTimeoutFn=j3.bind(on),t.clearTimeoutFn=N3.bind(on)):(t.setTimeoutFn=on.setTimeout.bind(on),t.clearTimeoutFn=on.clearTimeout.bind(on))}const S3=1.33;function _3(t){return typeof t=="string"?E3(t):Math.ceil((t.byteLength||t.size)*S3)}function E3(t){let a=0,s=0;for(let i=0,c=t.length;i<c;i++)a=t.charCodeAt(i),a<128?s+=1:a<2048?s+=2:a<55296||a>=57344?s+=3:(i++,s+=4);return s}function $b(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function C3(t){let a="";for(let s in t)t.hasOwnProperty(s)&&(a.length&&(a+="&"),a+=encodeURIComponent(s)+"="+encodeURIComponent(t[s]));return a}function T3(t){let a={},s=t.split("&");for(let i=0,c=s.length;i<c;i++){let u=s[i].split("=");a[decodeURIComponent(u[0])]=decodeURIComponent(u[1])}return a}class M3 extends Error{constructor(a,s,i){super(a),this.description=s,this.context=i,this.type="TransportError"}}class Jh extends ct{constructor(a){super(),this.writable=!1,au(this,a),this.opts=a,this.query=a.query,this.socket=a.socket,this.supportsBinary=!a.forceBase64}onError(a,s,i){return super.emitReserved("error",new M3(a,s,i)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(a){this.readyState==="open"&&this.write(a)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(a){const s=Kh(a,this.socket.binaryType);this.onPacket(s)}onPacket(a){super.emitReserved("packet",a)}onClose(a){this.readyState="closed",super.emitReserved("close",a)}pause(a){}createUri(a,s={}){return a+"://"+this._hostname()+this._port()+this.opts.path+this._query(s)}_hostname(){const a=this.opts.hostname;return a.indexOf(":")===-1?a:"["+a+"]"}_port(){return this.opts.port&&(this.opts.secure&&Number(this.opts.port)!==443||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(a){const s=C3(a);return s.length?"?"+s:""}}class A3 extends Jh{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(a){this.readyState="pausing";const s=()=>{this.readyState="paused",a()};if(this._polling||!this.writable){let i=0;this._polling&&(i++,this.once("pollComplete",function(){--i||s()})),this.writable||(i++,this.once("drain",function(){--i||s()}))}else s()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(a){const s=i=>{if(this.readyState==="opening"&&i.type==="open"&&this.onOpen(),i.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(i)};x3(a,this.socket.binaryType).forEach(s),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const a=()=>{this.write([{type:"close"}])};this.readyState==="open"?a():this.once("open",a)}write(a){this.writable=!1,g3(a,s=>{this.doWrite(s,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const a=this.opts.secure?"https":"http",s=this.query||{};return this.opts.timestampRequests!==!1&&(s[this.opts.timestampParam]=$b()),!this.supportsBinary&&!s.sid&&(s.b64=1),this.createUri(a,s)}}let Ub=!1;try{Ub=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const k3=Ub;function z3(){}class R3 extends A3{constructor(a){if(super(a),typeof location<"u"){const s=location.protocol==="https:";let i=location.port;i||(i=s?"443":"80"),this.xd=typeof location<"u"&&a.hostname!==location.hostname||i!==a.port}}doWrite(a,s){const i=this.request({method:"POST",data:a});i.on("success",s),i.on("error",(c,u)=>{this.onError("xhr post error",c,u)})}doPoll(){const a=this.request();a.on("data",this.onData.bind(this)),a.on("error",(s,i)=>{this.onError("xhr poll error",s,i)}),this.pollXhr=a}}class On extends ct{constructor(a,s,i){super(),this.createRequest=a,au(this,i),this._opts=i,this._method=i.method||"GET",this._uri=s,this._data=i.data!==void 0?i.data:null,this._create()}_create(){var a;const s=Hb(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");s.xdomain=!!this._opts.xd;const i=this._xhr=this.createRequest(s);try{i.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){i.setDisableHeaderCheck&&i.setDisableHeaderCheck(!0);for(let c in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(c)&&i.setRequestHeader(c,this._opts.extraHeaders[c])}}catch{}if(this._method==="POST")try{i.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{i.setRequestHeader("Accept","*/*")}catch{}(a=this._opts.cookieJar)===null||a===void 0||a.addCookies(i),"withCredentials"in i&&(i.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(i.timeout=this._opts.requestTimeout),i.onreadystatechange=()=>{var c;i.readyState===3&&((c=this._opts.cookieJar)===null||c===void 0||c.parseCookies(i.getResponseHeader("set-cookie"))),i.readyState===4&&(i.status===200||i.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof i.status=="number"?i.status:0)},0))},i.send(this._data)}catch(c){this.setTimeoutFn(()=>{this._onError(c)},0);return}typeof document<"u"&&(this._index=On.requestsCount++,On.requests[this._index]=this)}_onError(a){this.emitReserved("error",a,this._xhr),this._cleanup(!0)}_cleanup(a){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=z3,a)try{this._xhr.abort()}catch{}typeof document<"u"&&delete On.requests[this._index],this._xhr=null}}_onLoad(){const a=this._xhr.responseText;a!==null&&(this.emitReserved("data",a),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}On.requestsCount=0;On.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",Ox);else if(typeof addEventListener=="function"){const t="onpagehide"in on?"pagehide":"unload";addEventListener(t,Ox,!1)}}function Ox(){for(let t in On.requests)On.requests.hasOwnProperty(t)&&On.requests[t].abort()}const D3=(function(){const t=qb({xdomain:!1});return t&&t.responseType!==null})();class O3 extends R3{constructor(a){super(a);const s=a&&a.forceBase64;this.supportsBinary=D3&&!s}request(a={}){return Object.assign(a,{xd:this.xd},this.opts),new On(qb,this.uri(),a)}}function qb(t){const a=t.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!a||k3))return new XMLHttpRequest}catch{}if(!a)try{return new on[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const Vb=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class B3 extends Jh{get name(){return"websocket"}doOpen(){const a=this.uri(),s=this.opts.protocols,i=Vb?{}:Hb(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(i.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(a,s,i)}catch(c){return this.emitReserved("error",c)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=a=>this.onClose({description:"websocket connection closed",context:a}),this.ws.onmessage=a=>this.onData(a.data),this.ws.onerror=a=>this.onError("websocket error",a)}write(a){this.writable=!1;for(let s=0;s<a.length;s++){const i=a[s],c=s===a.length-1;Wh(i,this.supportsBinary,u=>{try{this.doWrite(i,u)}catch{}c&&nu(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const a=this.opts.secure?"wss":"ws",s=this.query||{};return this.opts.timestampRequests&&(s[this.opts.timestampParam]=$b()),this.supportsBinary||(s.b64=1),this.createUri(a,s)}}const Pf=on.WebSocket||on.MozWebSocket;class L3 extends B3{createSocket(a,s,i){return Vb?new Pf(a,s,i):s?new Pf(a,s):new Pf(a)}doWrite(a,s){this.ws.send(s)}}class H3 extends Jh{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(a){return this.emitReserved("error",a)}this._transport.closed.then(()=>{this.onClose()}).catch(a=>{this.onError("webtransport error",a)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(a=>{const s=b3(Number.MAX_SAFE_INTEGER,this.socket.binaryType),i=a.readable.pipeThrough(s).getReader(),c=y3();c.readable.pipeTo(a.writable),this._writer=c.writable.getWriter();const u=()=>{i.read().then(({done:m,value:p})=>{m||(this.onPacket(p),u())}).catch(m=>{})};u();const f={type:"open"};this.query.sid&&(f.data=`{"sid":"${this.query.sid}"}`),this._writer.write(f).then(()=>this.onOpen())})})}write(a){this.writable=!1;for(let s=0;s<a.length;s++){const i=a[s],c=s===a.length-1;this._writer.write(i).then(()=>{c&&nu(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var a;(a=this._transport)===null||a===void 0||a.close()}}const $3={websocket:L3,webtransport:H3,polling:O3},U3=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,q3=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function hh(t){if(t.length>8e3)throw"URI too long";const a=t,s=t.indexOf("["),i=t.indexOf("]");s!=-1&&i!=-1&&(t=t.substring(0,s)+t.substring(s,i).replace(/:/g,";")+t.substring(i,t.length));let c=U3.exec(t||""),u={},f=14;for(;f--;)u[q3[f]]=c[f]||"";return s!=-1&&i!=-1&&(u.source=a,u.host=u.host.substring(1,u.host.length-1).replace(/;/g,":"),u.authority=u.authority.replace("[","").replace("]","").replace(/;/g,":"),u.ipv6uri=!0),u.pathNames=V3(u,u.path),u.queryKey=Y3(u,u.query),u}function V3(t,a){const s=/\/{2,9}/g,i=a.replace(s,"/").split("/");return(a.slice(0,1)=="/"||a.length===0)&&i.splice(0,1),a.slice(-1)=="/"&&i.splice(i.length-1,1),i}function Y3(t,a){const s={};return a.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(i,c,u){c&&(s[c]=u)}),s}const mh=typeof addEventListener=="function"&&typeof removeEventListener=="function",jc=[];mh&&addEventListener("offline",()=>{jc.forEach(t=>t())},!1);class es extends ct{constructor(a,s){if(super(),this.binaryType=w3,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,a&&typeof a=="object"&&(s=a,a=null),a){const i=hh(a);s.hostname=i.host,s.secure=i.protocol==="https"||i.protocol==="wss",s.port=i.port,i.query&&(s.query=i.query)}else s.host&&(s.hostname=hh(s.host).host);au(this,s),this.secure=s.secure!=null?s.secure:typeof location<"u"&&location.protocol==="https:",s.hostname&&!s.port&&(s.port=this.secure?"443":"80"),this.hostname=s.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=s.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},s.transports.forEach(i=>{const c=i.prototype.name;this.transports.push(c),this._transportsByName[c]=i}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},s),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=T3(this.opts.query)),mh&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},jc.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(a){const s=Object.assign({},this.opts.query);s.EIO=Lb,s.transport=a,this.id&&(s.sid=this.id);const i=Object.assign({},this.opts,{query:s,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[a]);return new this._transportsByName[a](i)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const a=this.opts.rememberUpgrade&&es.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const s=this.createTransport(a);s.open(),this.setTransport(s)}setTransport(a){this.transport&&this.transport.removeAllListeners(),this.transport=a,a.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",s=>this._onClose("transport close",s))}onOpen(){this.readyState="open",es.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(a){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",a),this.emitReserved("heartbeat"),a.type){case"open":this.onHandshake(JSON.parse(a.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const s=new Error("server error");s.code=a.data,this._onError(s);break;case"message":this.emitReserved("data",a.data),this.emitReserved("message",a.data);break}}onHandshake(a){this.emitReserved("handshake",a),this.id=a.sid,this.transport.query.sid=a.sid,this._pingInterval=a.pingInterval,this._pingTimeout=a.pingTimeout,this._maxPayload=a.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const a=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+a,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},a),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const a=this._getWritablePackets();this.transport.send(a),this._prevBufferLen=a.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let s=1;for(let i=0;i<this.writeBuffer.length;i++){const c=this.writeBuffer[i].data;if(c&&(s+=_3(c)),i>0&&s>this._maxPayload)return this.writeBuffer.slice(0,i);s+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const a=Date.now()>this._pingTimeoutTime;return a&&(this._pingTimeoutTime=0,nu(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),a}write(a,s,i){return this._sendPacket("message",a,s,i),this}send(a,s,i){return this._sendPacket("message",a,s,i),this}_sendPacket(a,s,i,c){if(typeof s=="function"&&(c=s,s=void 0),typeof i=="function"&&(c=i,i=null),this.readyState==="closing"||this.readyState==="closed")return;i=i||{},i.compress=i.compress!==!1;const u={type:a,data:s,options:i};this.emitReserved("packetCreate",u),this.writeBuffer.push(u),c&&this.once("flush",c),this.flush()}close(){const a=()=>{this._onClose("forced close"),this.transport.close()},s=()=>{this.off("upgrade",s),this.off("upgradeError",s),a()},i=()=>{this.once("upgrade",s),this.once("upgradeError",s)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?i():a()}):this.upgrading?i():a()),this}_onError(a){if(es.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",a),this._onClose("transport error",a)}_onClose(a,s){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),mh&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const i=jc.indexOf(this._offlineEventListener);i!==-1&&jc.splice(i,1)}this.readyState="closed",this.id=null,this.emitReserved("close",a,s),this.writeBuffer=[],this._prevBufferLen=0}}}es.protocol=Lb;class P3 extends es{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let a=0;a<this._upgrades.length;a++)this._probe(this._upgrades[a])}_probe(a){let s=this.createTransport(a),i=!1;es.priorWebsocketSuccess=!1;const c=()=>{i||(s.send([{type:"ping",data:"probe"}]),s.once("packet",x=>{if(!i)if(x.type==="pong"&&x.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",s),!s)return;es.priorWebsocketSuccess=s.name==="websocket",this.transport.pause(()=>{i||this.readyState!=="closed"&&(y(),this.setTransport(s),s.send([{type:"upgrade"}]),this.emitReserved("upgrade",s),s=null,this.upgrading=!1,this.flush())})}else{const b=new Error("probe error");b.transport=s.name,this.emitReserved("upgradeError",b)}}))};function u(){i||(i=!0,y(),s.close(),s=null)}const f=x=>{const b=new Error("probe error: "+x);b.transport=s.name,u(),this.emitReserved("upgradeError",b)};function m(){f("transport closed")}function p(){f("socket closed")}function g(x){s&&x.name!==s.name&&u()}const y=()=>{s.removeListener("open",c),s.removeListener("error",f),s.removeListener("close",m),this.off("close",p),this.off("upgrading",g)};s.once("open",c),s.once("error",f),s.once("close",m),this.once("close",p),this.once("upgrading",g),this._upgrades.indexOf("webtransport")!==-1&&a!=="webtransport"?this.setTimeoutFn(()=>{i||s.open()},200):s.open()}onHandshake(a){this._upgrades=this._filterUpgrades(a.upgrades),super.onHandshake(a)}_filterUpgrades(a){const s=[];for(let i=0;i<a.length;i++)~this.transports.indexOf(a[i])&&s.push(a[i]);return s}}let X3=class extends P3{constructor(a,s={}){const i=typeof a=="object"?a:s;(!i.transports||i.transports&&typeof i.transports[0]=="string")&&(i.transports=(i.transports||["polling","websocket","webtransport"]).map(c=>$3[c]).filter(c=>!!c)),super(a,i)}};function I3(t,a="",s){let i=t;s=s||typeof location<"u"&&location,t==null&&(t=s.protocol+"//"+s.host),typeof t=="string"&&(t.charAt(0)==="/"&&(t.charAt(1)==="/"?t=s.protocol+t:t=s.host+t),/^(https?|wss?):\/\//.test(t)||(typeof s<"u"?t=s.protocol+"//"+t:t="https://"+t),i=hh(t)),i.port||(/^(http|ws)$/.test(i.protocol)?i.port="80":/^(http|ws)s$/.test(i.protocol)&&(i.port="443")),i.path=i.path||"/";const u=i.host.indexOf(":")!==-1?"["+i.host+"]":i.host;return i.id=i.protocol+"://"+u+":"+i.port+a,i.href=i.protocol+"://"+u+(s&&s.port===i.port?"":":"+i.port),i}const G3=typeof ArrayBuffer=="function",Q3=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,Yb=Object.prototype.toString,Z3=typeof Blob=="function"||typeof Blob<"u"&&Yb.call(Blob)==="[object BlobConstructor]",F3=typeof File=="function"||typeof File<"u"&&Yb.call(File)==="[object FileConstructor]";function em(t){return G3&&(t instanceof ArrayBuffer||Q3(t))||Z3&&t instanceof Blob||F3&&t instanceof File}function Nc(t,a){if(!t||typeof t!="object")return!1;if(Array.isArray(t)){for(let s=0,i=t.length;s<i;s++)if(Nc(t[s]))return!0;return!1}if(em(t))return!0;if(t.toJSON&&typeof t.toJSON=="function"&&arguments.length===1)return Nc(t.toJSON(),!0);for(const s in t)if(Object.prototype.hasOwnProperty.call(t,s)&&Nc(t[s]))return!0;return!1}function W3(t){const a=[],s=t.data,i=t;return i.data=ph(s,a),i.attachments=a.length,{packet:i,buffers:a}}function ph(t,a){if(!t)return t;if(em(t)){const s={_placeholder:!0,num:a.length};return a.push(t),s}else if(Array.isArray(t)){const s=new Array(t.length);for(let i=0;i<t.length;i++)s[i]=ph(t[i],a);return s}else if(typeof t=="object"&&!(t instanceof Date)){const s={};for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(s[i]=ph(t[i],a));return s}return t}function K3(t,a){return t.data=gh(t.data,a),delete t.attachments,t}function gh(t,a){if(!t)return t;if(t&&t._placeholder===!0){if(typeof t.num=="number"&&t.num>=0&&t.num<a.length)return a[t.num];throw new Error("illegal attachments")}else if(Array.isArray(t))for(let s=0;s<t.length;s++)t[s]=gh(t[s],a);else if(typeof t=="object")for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(t[s]=gh(t[s],a));return t}const Pb=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],J3=5;var Ce;(function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"})(Ce||(Ce={}));class e_{constructor(a){this.replacer=a}encode(a){return(a.type===Ce.EVENT||a.type===Ce.ACK)&&Nc(a)?this.encodeAsBinary({type:a.type===Ce.EVENT?Ce.BINARY_EVENT:Ce.BINARY_ACK,nsp:a.nsp,data:a.data,id:a.id}):[this.encodeAsString(a)]}encodeAsString(a){let s=""+a.type;return(a.type===Ce.BINARY_EVENT||a.type===Ce.BINARY_ACK)&&(s+=a.attachments+"-"),a.nsp&&a.nsp!=="/"&&(s+=a.nsp+","),a.id!=null&&(s+=a.id),a.data!=null&&(s+=JSON.stringify(a.data,this.replacer)),s}encodeAsBinary(a){const s=W3(a),i=this.encodeAsString(s.packet),c=s.buffers;return c.unshift(i),c}}class tm extends ct{constructor(a){super(),this.reviver=a}add(a){let s;if(typeof a=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");s=this.decodeString(a);const i=s.type===Ce.BINARY_EVENT;i||s.type===Ce.BINARY_ACK?(s.type=i?Ce.EVENT:Ce.ACK,this.reconstructor=new t_(s),s.attachments===0&&super.emitReserved("decoded",s)):super.emitReserved("decoded",s)}else if(em(a)||a.base64)if(this.reconstructor)s=this.reconstructor.takeBinaryData(a),s&&(this.reconstructor=null,super.emitReserved("decoded",s));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+a)}decodeString(a){let s=0;const i={type:Number(a.charAt(0))};if(Ce[i.type]===void 0)throw new Error("unknown packet type "+i.type);if(i.type===Ce.BINARY_EVENT||i.type===Ce.BINARY_ACK){const u=s+1;for(;a.charAt(++s)!=="-"&&s!=a.length;);const f=a.substring(u,s);if(f!=Number(f)||a.charAt(s)!=="-")throw new Error("Illegal attachments");i.attachments=Number(f)}if(a.charAt(s+1)==="/"){const u=s+1;for(;++s&&!(a.charAt(s)===","||s===a.length););i.nsp=a.substring(u,s)}else i.nsp="/";const c=a.charAt(s+1);if(c!==""&&Number(c)==c){const u=s+1;for(;++s;){const f=a.charAt(s);if(f==null||Number(f)!=f){--s;break}if(s===a.length)break}i.id=Number(a.substring(u,s+1))}if(a.charAt(++s)){const u=this.tryParse(a.substr(s));if(tm.isPayloadValid(i.type,u))i.data=u;else throw new Error("invalid payload")}return i}tryParse(a){try{return JSON.parse(a,this.reviver)}catch{return!1}}static isPayloadValid(a,s){switch(a){case Ce.CONNECT:return Lc(s);case Ce.DISCONNECT:return s===void 0;case Ce.CONNECT_ERROR:return typeof s=="string"||Lc(s);case Ce.EVENT:case Ce.BINARY_EVENT:return Array.isArray(s)&&(typeof s[0]=="number"||typeof s[0]=="string"&&Pb.indexOf(s[0])===-1);case Ce.ACK:case Ce.BINARY_ACK:return Array.isArray(s)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class t_{constructor(a){this.packet=a,this.buffers=[],this.reconPack=a}takeBinaryData(a){if(this.buffers.push(a),this.buffers.length===this.reconPack.attachments){const s=K3(this.reconPack,this.buffers);return this.finishedReconstruction(),s}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}function n_(t){return typeof t=="string"}const a_=Number.isInteger||function(t){return typeof t=="number"&&isFinite(t)&&Math.floor(t)===t};function s_(t){return t===void 0||a_(t)}function Lc(t){return Object.prototype.toString.call(t)==="[object Object]"}function r_(t,a){switch(t){case Ce.CONNECT:return a===void 0||Lc(a);case Ce.DISCONNECT:return a===void 0;case Ce.EVENT:return Array.isArray(a)&&(typeof a[0]=="number"||typeof a[0]=="string"&&Pb.indexOf(a[0])===-1);case Ce.ACK:return Array.isArray(a);case Ce.CONNECT_ERROR:return typeof a=="string"||Lc(a);default:return!1}}function i_(t){return n_(t.nsp)&&s_(t.id)&&r_(t.type,t.data)}const o_=Object.freeze(Object.defineProperty({__proto__:null,Decoder:tm,Encoder:e_,get PacketType(){return Ce},isPacketValid:i_,protocol:J3},Symbol.toStringTag,{value:"Module"}));function xn(t,a,s){return t.on(a,s),function(){t.off(a,s)}}const l_=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class Xb extends ct{constructor(a,s,i){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=a,this.nsp=s,i&&i.auth&&(this.auth=i.auth),this._opts=Object.assign({},i),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const a=this.io;this.subs=[xn(a,"open",this.onopen.bind(this)),xn(a,"packet",this.onpacket.bind(this)),xn(a,"error",this.onerror.bind(this)),xn(a,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...a){return a.unshift("message"),this.emit.apply(this,a),this}emit(a,...s){var i,c,u;if(l_.hasOwnProperty(a))throw new Error('"'+a.toString()+'" is a reserved event name');if(s.unshift(a),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(s),this;const f={type:Ce.EVENT,data:s};if(f.options={},f.options.compress=this.flags.compress!==!1,typeof s[s.length-1]=="function"){const y=this.ids++,x=s.pop();this._registerAckCallback(y,x),f.id=y}const m=(c=(i=this.io.engine)===null||i===void 0?void 0:i.transport)===null||c===void 0?void 0:c.writable,p=this.connected&&!(!((u=this.io.engine)===null||u===void 0)&&u._hasPingExpired());return this.flags.volatile&&!m||(p?(this.notifyOutgoingListeners(f),this.packet(f)):this.sendBuffer.push(f)),this.flags={},this}_registerAckCallback(a,s){var i;const c=(i=this.flags.timeout)!==null&&i!==void 0?i:this._opts.ackTimeout;if(c===void 0){this.acks[a]=s;return}const u=this.io.setTimeoutFn(()=>{delete this.acks[a];for(let m=0;m<this.sendBuffer.length;m++)this.sendBuffer[m].id===a&&this.sendBuffer.splice(m,1);s.call(this,new Error("operation has timed out"))},c),f=(...m)=>{this.io.clearTimeoutFn(u),s.apply(this,m)};f.withError=!0,this.acks[a]=f}emitWithAck(a,...s){return new Promise((i,c)=>{const u=(f,m)=>f?c(f):i(m);u.withError=!0,s.push(u),this.emit(a,...s)})}_addToQueue(a){let s;typeof a[a.length-1]=="function"&&(s=a.pop());const i={id:this._queueSeq++,tryCount:0,pending:!1,args:a,flags:Object.assign({fromQueue:!0},this.flags)};a.push((c,...u)=>(this._queue[0],c!==null?i.tryCount>this._opts.retries&&(this._queue.shift(),s&&s(c)):(this._queue.shift(),s&&s(null,...u)),i.pending=!1,this._drainQueue())),this._queue.push(i),this._drainQueue()}_drainQueue(a=!1){if(!this.connected||this._queue.length===0)return;const s=this._queue[0];s.pending&&!a||(s.pending=!0,s.tryCount++,this.flags=s.flags,this.emit.apply(this,s.args))}packet(a){a.nsp=this.nsp,this.io._packet(a)}onopen(){typeof this.auth=="function"?this.auth(a=>{this._sendConnectPacket(a)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(a){this.packet({type:Ce.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},a):a})}onerror(a){this.connected||this.emitReserved("connect_error",a)}onclose(a,s){this.connected=!1,delete this.id,this.emitReserved("disconnect",a,s),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(a=>{if(!this.sendBuffer.some(i=>String(i.id)===a)){const i=this.acks[a];delete this.acks[a],i.withError&&i.call(this,new Error("socket has been disconnected"))}})}onpacket(a){if(a.nsp===this.nsp)switch(a.type){case Ce.CONNECT:a.data&&a.data.sid?this.onconnect(a.data.sid,a.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Ce.EVENT:case Ce.BINARY_EVENT:this.onevent(a);break;case Ce.ACK:case Ce.BINARY_ACK:this.onack(a);break;case Ce.DISCONNECT:this.ondisconnect();break;case Ce.CONNECT_ERROR:this.destroy();const i=new Error(a.data.message);i.data=a.data.data,this.emitReserved("connect_error",i);break}}onevent(a){const s=a.data||[];a.id!=null&&s.push(this.ack(a.id)),this.connected?this.emitEvent(s):this.receiveBuffer.push(Object.freeze(s))}emitEvent(a){if(this._anyListeners&&this._anyListeners.length){const s=this._anyListeners.slice();for(const i of s)i.apply(this,a)}super.emit.apply(this,a),this._pid&&a.length&&typeof a[a.length-1]=="string"&&(this._lastOffset=a[a.length-1])}ack(a){const s=this;let i=!1;return function(...c){i||(i=!0,s.packet({type:Ce.ACK,id:a,data:c}))}}onack(a){const s=this.acks[a.id];typeof s=="function"&&(delete this.acks[a.id],s.withError&&a.data.unshift(null),s.apply(this,a.data))}onconnect(a,s){this.id=a,this.recovered=s&&this._pid===s,this._pid=s,this.connected=!0,this.emitBuffered(),this._drainQueue(!0),this.emitReserved("connect")}emitBuffered(){this.receiveBuffer.forEach(a=>this.emitEvent(a)),this.receiveBuffer=[],this.sendBuffer.forEach(a=>{this.notifyOutgoingListeners(a),this.packet(a)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(a=>a()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:Ce.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(a){return this.flags.compress=a,this}get volatile(){return this.flags.volatile=!0,this}timeout(a){return this.flags.timeout=a,this}onAny(a){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(a),this}prependAny(a){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(a),this}offAny(a){if(!this._anyListeners)return this;if(a){const s=this._anyListeners;for(let i=0;i<s.length;i++)if(a===s[i])return s.splice(i,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(a){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(a),this}prependAnyOutgoing(a){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(a),this}offAnyOutgoing(a){if(!this._anyOutgoingListeners)return this;if(a){const s=this._anyOutgoingListeners;for(let i=0;i<s.length;i++)if(a===s[i])return s.splice(i,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(a){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const s=this._anyOutgoingListeners.slice();for(const i of s)i.apply(this,a.data)}}}function Wr(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}Wr.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var a=Math.random(),s=Math.floor(a*this.jitter*t);t=(Math.floor(a*10)&1)==0?t-s:t+s}return Math.min(t,this.max)|0};Wr.prototype.reset=function(){this.attempts=0};Wr.prototype.setMin=function(t){this.ms=t};Wr.prototype.setMax=function(t){this.max=t};Wr.prototype.setJitter=function(t){this.jitter=t};class xh extends ct{constructor(a,s){var i;super(),this.nsps={},this.subs=[],a&&typeof a=="object"&&(s=a,a=void 0),s=s||{},s.path=s.path||"/socket.io",this.opts=s,au(this,s),this.reconnection(s.reconnection!==!1),this.reconnectionAttempts(s.reconnectionAttempts||1/0),this.reconnectionDelay(s.reconnectionDelay||1e3),this.reconnectionDelayMax(s.reconnectionDelayMax||5e3),this.randomizationFactor((i=s.randomizationFactor)!==null&&i!==void 0?i:.5),this.backoff=new Wr({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(s.timeout==null?2e4:s.timeout),this._readyState="closed",this.uri=a;const c=s.parser||o_;this.encoder=new c.Encoder,this.decoder=new c.Decoder,this._autoConnect=s.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(a){return arguments.length?(this._reconnection=!!a,a||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(a){return a===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=a,this)}reconnectionDelay(a){var s;return a===void 0?this._reconnectionDelay:(this._reconnectionDelay=a,(s=this.backoff)===null||s===void 0||s.setMin(a),this)}randomizationFactor(a){var s;return a===void 0?this._randomizationFactor:(this._randomizationFactor=a,(s=this.backoff)===null||s===void 0||s.setJitter(a),this)}reconnectionDelayMax(a){var s;return a===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=a,(s=this.backoff)===null||s===void 0||s.setMax(a),this)}timeout(a){return arguments.length?(this._timeout=a,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(a){if(~this._readyState.indexOf("open"))return this;this.engine=new X3(this.uri,this.opts);const s=this.engine,i=this;this._readyState="opening",this.skipReconnect=!1;const c=xn(s,"open",function(){i.onopen(),a&&a()}),u=m=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",m),a?a(m):this.maybeReconnectOnOpen()},f=xn(s,"error",u);if(this._timeout!==!1){const m=this._timeout,p=this.setTimeoutFn(()=>{c(),u(new Error("timeout")),s.close()},m);this.opts.autoUnref&&p.unref(),this.subs.push(()=>{this.clearTimeoutFn(p)})}return this.subs.push(c),this.subs.push(f),this}connect(a){return this.open(a)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const a=this.engine;this.subs.push(xn(a,"ping",this.onping.bind(this)),xn(a,"data",this.ondata.bind(this)),xn(a,"error",this.onerror.bind(this)),xn(a,"close",this.onclose.bind(this)),xn(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(a){try{this.decoder.add(a)}catch(s){this.onclose("parse error",s)}}ondecoded(a){nu(()=>{this.emitReserved("packet",a)},this.setTimeoutFn)}onerror(a){this.emitReserved("error",a)}socket(a,s){let i=this.nsps[a];return i?this._autoConnect&&!i.active&&i.connect():(i=new Xb(this,a,s),this.nsps[a]=i),i}_destroy(a){const s=Object.keys(this.nsps);for(const i of s)if(this.nsps[i].active)return;this._close()}_packet(a){const s=this.encoder.encode(a);for(let i=0;i<s.length;i++)this.engine.write(s[i],a.options)}cleanup(){this.subs.forEach(a=>a()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(a,s){var i;this.cleanup(),(i=this.engine)===null||i===void 0||i.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",a,s),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const a=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const s=this.backoff.duration();this._reconnecting=!0;const i=this.setTimeoutFn(()=>{a.skipReconnect||(this.emitReserved("reconnect_attempt",a.backoff.attempts),!a.skipReconnect&&a.open(c=>{c?(a._reconnecting=!1,a.reconnect(),this.emitReserved("reconnect_error",c)):a.onreconnect()}))},s);this.opts.autoUnref&&i.unref(),this.subs.push(()=>{this.clearTimeoutFn(i)})}}onreconnect(){const a=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",a)}}const Fi={};function Sc(t,a){typeof t=="object"&&(a=t,t=void 0),a=a||{};const s=I3(t,a.path||"/socket.io"),i=s.source,c=s.id,u=s.path,f=Fi[c]&&u in Fi[c].nsps,m=a.forceNew||a["force new connection"]||a.multiplex===!1||f;let p;return m?p=new xh(i,a):(Fi[c]||(Fi[c]=new xh(i,a)),p=Fi[c]),s.query&&!a.query&&(a.query=s.queryKey),p.socket(s.path,a)}Object.assign(Sc,{Manager:xh,Socket:Xb,io:Sc,connect:Sc});function c_(t){const[a,s]=j.useState(!1),i=j.useRef(null),c=Mt(u=>u.token);return j.useEffect(()=>{if(!c)return;const u=Sc(t,{path:"/socket.io/",auth:{dashboardToken:c},transports:["websocket","polling"],reconnection:!0,reconnectionAttempts:1/0,reconnectionDelay:2e3,reconnectionDelayMax:1e4,timeout:2e4});return u.on("connect",()=>{console.log(`Dashboard socket conectado a ${t}`),s(!0)}),u.on("disconnect",f=>{console.log(`Dashboard socket desconectado: ${f}`),s(!1)}),u.on("connect_error",f=>{console.error("Error de conexin Socket.IO:",f.message)}),i.current=u,()=>{u.disconnect(),i.current=null,s(!1)}},[t,c]),{socket:i.current,connected:a}}function u_({sessionId:t,currentAgentId:a,currentDepartmentId:s,onClose:i,onAssigned:c}){const[u,f]=j.useState([]),[m,p]=j.useState([]),[g,y]=j.useState(a||""),[x,b]=j.useState(s||""),[S,_]=j.useState(!1),[C,N]=j.useState(""),E=Mt(w=>w.token),z={"Content-Type":"application/json",...E?{Authorization:`Bearer ${E}`}:{}};j.useEffect(()=>{Promise.all([fetch("/api/agents",{headers:z}).then(w=>w.json()),fetch("/api/departments",{headers:z}).then(w=>w.json())]).then(([w,R])=>{f(w.agents||[]),p(R.departments||[])}).catch(()=>{})},[]);const T=async()=>{_(!0),N("");try{const w={sessionId:Number(t)};g&&(w.agentId=Number(g)),x&&(w.departmentId=Number(x));const M=await(await fetch("/api/chat/assign",{method:"POST",headers:z,body:JSON.stringify(w)})).json();if(!M.ok)throw new Error(M.error||"Error al asignar");c&&c(M),i()}catch(w){N(w.message)}finally{_(!1)}},k={};return u.filter(w=>w.status==="active").forEach(w=>{const R=w.department_name||"Sin departamento";k[R]||(k[R]=[]),k[R].push(w)}),o.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:i,children:o.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md p-6",onClick:w=>w.stopPropagation(),children:[o.jsxs("div",{className:"flex items-center justify-between mb-5",children:[o.jsxs("h3",{className:"text-lg font-bold text-gray-800 flex items-center gap-2",children:[o.jsx(Hr,{className:"w-5 h-5 text-green-600"}),"Asignar Conversacin"]}),o.jsx("button",{onClick:i,className:"text-gray-400 hover:text-gray-600",children:o.jsx(Ds,{className:"w-5 h-5"})})]}),C&&o.jsx("div",{className:"bg-red-50 text-red-600 px-4 py-2 rounded-lg text-sm mb-4 border border-red-200",children:C}),o.jsxs("div",{className:"mb-4",children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[o.jsx(Lr,{className:"w-4 h-4 inline mr-1"}),"Departamento"]}),o.jsxs("select",{value:x,onChange:w=>b(w.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 outline-none",children:[o.jsx("option",{value:"",children:"Sin asignar departamento"}),m.filter(w=>w.active).map(w=>o.jsx("option",{value:w.id,children:w.display_name||w.name},w.id))]})]}),o.jsxs("div",{className:"mb-6",children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[o.jsx(Hr,{className:"w-4 h-4 inline mr-1"}),"Agente"]}),o.jsxs("select",{value:g,onChange:w=>y(w.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 outline-none",children:[o.jsx("option",{value:"",children:"Sin asignar agente"}),Object.entries(k).map(([w,R])=>o.jsx("optgroup",{label:w,children:R.map(M=>o.jsxs("option",{value:M.id,children:[M.name," (",M.username,") - ",M.role]},M.id))},w))]})]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{onClick:i,className:"flex-1 px-4 py-2.5 border border-gray-300 rounded-xl text-gray-700 hover:bg-gray-50 transition",children:"Cancelar"}),o.jsx("button",{onClick:T,disabled:S||!g&&!x,className:"flex-1 px-4 py-2.5 bg-green-500 hover:bg-green-600 text-white rounded-xl transition disabled:opacity-50 disabled:cursor-not-allowed",children:S?"Asignando...":"Asignar"})]})]})})}function d_({sessionId:t,currentAgentId:a,currentDepartmentId:s,onClose:i,onTransferred:c}){const[u,f]=j.useState([]),[m,p]=j.useState([]),[g,y]=j.useState(""),[x,b]=j.useState(""),[S,_]=j.useState(""),[C,N]=j.useState(!1),[E,z]=j.useState(""),T=Mt(M=>M.token),k={"Content-Type":"application/json",...T?{Authorization:`Bearer ${T}`}:{}};j.useEffect(()=>{Promise.all([fetch("/api/agents",{headers:k}).then(M=>M.json()),fetch("/api/departments",{headers:k}).then(M=>M.json())]).then(([M,U])=>{f(M.agents||[]),p(U.departments||[])}).catch(()=>{})},[]);const w=async()=>{N(!0),z("");try{const M={sessionId:Number(t)};g&&(M.targetAgentId=Number(g)),x&&(M.targetDepartmentId=Number(x)),S&&(M.reason=S);const L=await(await fetch("/api/chat/transfer",{method:"POST",headers:k,body:JSON.stringify(M)})).json();if(!L.ok)throw new Error(L.error||"Error al transferir");c&&c(L),i()}catch(M){z(M.message)}finally{N(!1)}},R={};return u.filter(M=>M.status==="active"&&M.id!==a).forEach(M=>{const U=M.department_name||"Sin departamento";R[U]||(R[U]=[]),R[U].push(M)}),o.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:i,children:o.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md p-6",onClick:M=>M.stopPropagation(),children:[o.jsxs("div",{className:"flex items-center justify-between mb-5",children:[o.jsxs("h3",{className:"text-lg font-bold text-gray-800 flex items-center gap-2",children:[o.jsx(qh,{className:"w-5 h-5 text-blue-600"}),"Transferir Conversacin"]}),o.jsx("button",{onClick:i,className:"text-gray-400 hover:text-gray-600",children:o.jsx(Ds,{className:"w-5 h-5"})})]}),E&&o.jsx("div",{className:"bg-red-50 text-red-600 px-4 py-2 rounded-lg text-sm mb-4 border border-red-200",children:E}),o.jsxs("div",{className:"mb-4",children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[o.jsx(Lr,{className:"w-4 h-4 inline mr-1"}),"Departamento destino"]}),o.jsxs("select",{value:x,onChange:M=>b(M.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",children:[o.jsx("option",{value:"",children:"Mantener departamento actual"}),m.filter(M=>M.active).map(M=>o.jsx("option",{value:M.id,children:M.display_name||M.name},M.id))]})]}),o.jsxs("div",{className:"mb-4",children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[o.jsx(Hr,{className:"w-4 h-4 inline mr-1"}),"Agente destino"]}),o.jsxs("select",{value:g,onChange:M=>y(M.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",children:[o.jsx("option",{value:"",children:"Sin asignar agente"}),Object.entries(R).map(([M,U])=>o.jsx("optgroup",{label:M,children:U.map(L=>o.jsxs("option",{value:L.id,children:[L.name," (",L.username,") - ",L.role]},L.id))},M))]})]}),o.jsxs("div",{className:"mb-6",children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Razn (opcional)"}),o.jsx("input",{type:"text",value:S,onChange:M=>_(M.target.value),placeholder:"Ej: Cliente necesita soporte tcnico",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none"})]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{onClick:i,className:"flex-1 px-4 py-2.5 border border-gray-300 rounded-xl text-gray-700 hover:bg-gray-50 transition",children:"Cancelar"}),o.jsx("button",{onClick:w,disabled:C||!g&&!x,className:"flex-1 px-4 py-2.5 bg-blue-500 hover:bg-blue-600 text-white rounded-xl transition disabled:opacity-50 disabled:cursor-not-allowed",children:C?"Transfiriendo...":"Transferir"})]})]})})}function Ib({className:t}){return o.jsx("svg",{className:t,viewBox:"0 0 24 24",fill:"currentColor",children:o.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})})}function Gb({className:t}){return o.jsx("svg",{className:t,viewBox:"0 0 24 24",fill:"currentColor",children:o.jsx("path",{d:"M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zM12 0C8.741 0 8.333.014 7.053.072 2.695.272.273 2.69.073 7.052.014 8.333 0 8.741 0 12c0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98C8.333 23.986 8.741 24 12 24c3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98C15.668.014 15.259 0 12 0zm0 5.838a6.162 6.162 0 100 12.324 6.162 6.162 0 000-12.324zM12 16a4 4 0 110-8 4 4 0 010 8zm6.406-11.845a1.44 1.44 0 100 2.881 1.44 1.44 0 000-2.881z"})})}function f_({className:t}){return o.jsx("svg",{className:t,viewBox:"0 0 24 24",fill:"currentColor",children:o.jsx("path",{d:"M12 0C5.373 0 0 4.974 0 11.111c0 3.498 1.744 6.614 4.469 8.654V24l4.088-2.242c1.092.3 2.246.464 3.443.464 6.627 0 12-4.974 12-11.111S18.627 0 12 0zm1.191 14.963l-3.055-3.26-5.963 3.26L10.732 8.2l3.131 3.26 5.887-3.26-6.559 6.763z"})})}function Bx({channel:t}){return!t||t==="whatsapp"?o.jsxs("span",{className:"inline-flex items-center gap-0.5 text-[10px] px-1.5 py-0.5 rounded-full bg-green-50 text-green-600 font-medium",title:"WhatsApp",children:[o.jsx(Ib,{className:"w-2.5 h-2.5"}),"WA"]}):t==="instagram"?o.jsxs("span",{className:"inline-flex items-center gap-0.5 text-[10px] px-1.5 py-0.5 rounded-full bg-pink-50 text-pink-600 font-medium",title:"Instagram",children:[o.jsx(Gb,{className:"w-2.5 h-2.5"}),"IG"]}):t==="messenger"?o.jsxs("span",{className:"inline-flex items-center gap-0.5 text-[10px] px-1.5 py-0.5 rounded-full bg-blue-50 text-blue-600 font-medium",title:"Messenger",children:[o.jsx(f_,{className:"w-2.5 h-2.5"}),"FB"]}):null}const Lx=["bg-blue-500","bg-green-500","bg-purple-500","bg-pink-500","bg-indigo-500","bg-teal-500","bg-orange-500","bg-red-400","bg-cyan-500","bg-emerald-500"];function Hx(t){let a=0;for(let s=0;s<t.length;s++)a=t.charCodeAt(s)+((a<<5)-a);return Lx[Math.abs(a)%Lx.length]}function $x(t,a){if(t){const s=t.trim().split(/\s+/);return s.length>=2?(s[0][0]+s[s.length-1][0]).toUpperCase():t[0].toUpperCase()}return a.slice(-2)}const Ux=[{key:"mine",label:"Mis Chats",icon:Rr},{key:"department",label:"Departamento",icon:Lr},{key:"unassigned",label:"Sin Asignar",icon:Nb},{key:"all",label:"Todos",icon:Zh}];function h_(){const[t,a]=TN(),[s,i]=j.useState([]),[c,u]=j.useState(t.get("phone")||null),[f,m]=j.useState([]),[p,g]=j.useState(""),[y,x]=j.useState(!0),[b,S]=j.useState(!1),[_,C]=j.useState(""),[N,E]=j.useState("all"),[z,T]=j.useState(!1),[k,w]=j.useState(!1),R=j.useRef(null),M=j.useRef(!0),U=Mt($=>$.agent),L=U?.role==="supervisor",[Q,G]=j.useState(L?"all":"mine"),F=j.useRef(Q);F.current=Q;const se=s.find($=>$.phone===c),q=j.useRef(c);q.current=c;const{socket:I,connected:B}=c_("/chat");j.useEffect(()=>{D();const $=setInterval(()=>{D()},3e4);return()=>{clearInterval($)}},[Q]),j.useEffect(()=>{c&&(M.current=!0,Y(c),a({phone:c}))},[c]),j.useEffect(()=>{if(I)return I.on("new_message",$=>{if(console.log("Nuevo mensaje via WebSocket:",$),$.phone&&$.phone===q.current){m(ce=>ce.find(ve=>ve.waMsgId===$.msgId||ve.id===$.dbId)?ce:[...ce,{id:$.dbId||Date.now(),direction:$.direction==="in"?"incoming":"outgoing",body:$.text,content:$.text,created_at:new Date($.timestamp).toISOString(),status:$.status,waMsgId:$.msgId,is_bot:$.isAI||!1,mediaType:$.media?.type||null,mediaId:$.media?.id||$.mediaId||null,mediaMime:$.media?.mime||null,mediaCaption:$.media?.caption||null,mediaExtra:$.media?.extra||null,media:$.media}]),Sx($.phone).then(()=>D());return}D()}),I.on("escalation",$=>{console.log("Escalamiento detectado:",$),D()}),I.on("message_status_update",$=>{console.log("Status actualizado:",$),m(ce=>ce.map(he=>he.waMsgId===$.msgId?{...he,status:$.status}:he))}),I.on("chat_assigned",$=>{console.log("Chat asignado:",$),D()}),I.on("chat_transferred",$=>{console.log("Chat transferido:",$),D()}),I.on("chat_unassigned",$=>{console.log("Chat liberado:",$),D()}),I.on("agent_status_change",$=>{console.log("Agent status change:",$)}),()=>{I.off("new_message"),I.off("escalation"),I.off("message_status_update"),I.off("chat_assigned"),I.off("chat_transferred"),I.off("chat_unassigned"),I.off("agent_status_change")}},[I]),j.useEffect(()=>{M.current?(R.current?.scrollIntoView({behavior:"instant"}),M.current=!1):R.current?.scrollIntoView({behavior:"smooth"})},[f]);const D=async $=>{try{const ce=$||F.current,he=await _b(ce);i(he.conversations||[])}catch(ce){console.error("Error loading conversations:",ce)}finally{x(!1)}},Y=async $=>{try{const ce=await b4($);m(ce.messages||[]),await Sx($)}catch(ce){console.error("Error loading messages:",ce)}},H=$=>{g($.target.value)},W=async()=>{if(!(!p.trim()||!c||b)){S(!0);try{await v4(c,p),g("")}catch($){console.error("Error sending message:",$),alert("Error al enviar mensaje")}finally{S(!1)}}},O=$=>{$.key==="Enter"&&!$.shiftKey&&($.preventDefault(),W())},P=async()=>{if(!re)return;const $=re.session_id||re.sessionId||re.id;if(!confirm(`Eliminar conversacin con ${re.contact_name||re.phone}? Se borrarn todos los mensajes.`))return;const ce=Mt.getState().token;try{const ve=await(await fetch(`/api/chat/conversations/${$}`,{method:"DELETE",headers:{"Content-Type":"application/json",...ce?{Authorization:`Bearer ${ce}`}:{}}})).json();ve.ok?(u(null),m([]),D()):alert(ve.error||"Error al eliminar")}catch(he){console.error("Error deleting conversation:",he),alert("Error al eliminar conversacin")}},te=async()=>{if(!se)return;const $=Mt.getState().token;try{(await(await fetch("/api/chat/self-assign",{method:"POST",headers:{"Content-Type":"application/json",...$?{Authorization:`Bearer ${$}`}:{}},body:JSON.stringify({sessionId:se.session_id||se.sessionId||se.id})})).json()).ok&&D()}catch(ce){console.error("Error self-assigning:",ce)}},ae=s.filter($=>{const ce=($.contact_name?.toLowerCase()||"").includes(_.toLowerCase())||$.phone.includes(_),he=$.channel||"whatsapp";return ce&&(N==="all"||he===N)}),re=s.find($=>$.phone===c),de=L?Ux:Ux.filter($=>$.key!=="all"),ue=$=>{const{mediaType:ce,mediaId:he,mediaExtra:ve,mediaMime:pe,media:be}=$,Se=ce||be?.type,Ae=he||be?.id,Ee=pe||be?.mime,$e=ve||be?.extra;if(!Se)return null;const Re=$.direction==="outgoing",ht=Ae&&(Ae.startsWith("http://")||Ae.startsWith("https://"))?Ae:`/api/chat/media/${Ae}`;switch(Se){case"image":return o.jsxs("div",{className:"mt-2 rounded-lg overflow-hidden max-w-xs",children:[o.jsx("img",{src:ht,alt:"Imagen",className:"w-full h-auto cursor-pointer hover:opacity-90",onClick:()=>window.open(ht,"_blank"),onError:fn=>{fn.target.style.display="none",fn.target.nextSibling.style.display="flex"}}),o.jsxs("div",{className:"hidden items-center gap-2 p-3 bg-gray-100 rounded-lg",children:[o.jsx(jS,{className:"w-5 h-5 text-gray-500"}),o.jsx("span",{className:"text-sm text-gray-600",children:"Imagen no disponible"})]})]});case"video":return o.jsx("div",{className:"mt-2 rounded-lg overflow-hidden max-w-xs",children:o.jsx("video",{src:ht,controls:!0,className:"w-full h-auto rounded-lg",preload:"metadata",children:"Tu navegador no soporta video"})});case"audio":return o.jsxs("div",{className:`mt-2 flex items-center gap-2 p-2 rounded-lg ${Re?"bg-green-600":"bg-gray-100"}`,children:[o.jsx(DS,{className:`w-5 h-5 ${Re?"text-white":"text-green-600"}`}),o.jsx("audio",{src:ht,controls:!0,className:"h-8 flex-1",preload:"metadata"})]});case"document":const un=$e?.filename||"Documento";return o.jsxs("a",{href:ht,target:"_blank",rel:"noopener noreferrer",className:`mt-2 flex items-center gap-3 p-3 rounded-lg ${Re?"bg-green-600 hover:bg-green-700":"bg-gray-100 hover:bg-gray-200"} transition`,children:[o.jsx(Qh,{className:`w-8 h-8 ${Re?"text-white":"text-blue-600"}`}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("p",{className:`text-sm font-medium truncate ${Re?"text-white":"text-gray-800"}`,children:un}),o.jsx("p",{className:`text-xs ${Re?"text-green-100":"text-gray-500"}`,children:Ee||"Documento"})]}),o.jsx(fS,{className:`w-5 h-5 ${Re?"text-white":"text-gray-500"}`})]});case"sticker":return o.jsx("div",{className:"mt-2",children:o.jsx("img",{src:ht,alt:"Sticker",className:"w-32 h-32 object-contain",onError:fn=>{fn.target.src='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="128" height="128" viewBox="0 0 24 24" fill="none" stroke="gray" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="M8 14s1.5 2 4 2 4-2 4-2"/><line x1="9" y1="9" x2="9.01" y2="9"/><line x1="15" y1="9" x2="15.01" y2="9"/></svg>'}})});case"location":const Sn=$e?.latitude,_n=$e?.longitude,at=$e?.name,qn=$e?.address,dn=`https://www.google.com/maps?q=${Sn},${_n}`;return o.jsx("a",{href:dn,target:"_blank",rel:"noopener noreferrer",className:`mt-2 block p-3 rounded-lg ${Re?"bg-green-600 hover:bg-green-700":"bg-gray-100 hover:bg-gray-200"} transition`,children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:`p-2 rounded-full ${Re?"bg-green-500":"bg-red-100"}`,children:o.jsx(kS,{className:`w-5 h-5 ${Re?"text-white":"text-red-600"}`})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[at&&o.jsx("p",{className:`font-medium ${Re?"text-white":"text-gray-800"}`,children:at}),qn&&o.jsx("p",{className:`text-sm ${Re?"text-green-100":"text-gray-600"}`,children:qn}),o.jsxs("p",{className:`text-xs mt-1 ${Re?"text-green-200":"text-gray-500"}`,children:[Sn?.toFixed(6),", ",_n?.toFixed(6)]})]})]})});case"contacts":const Wt=$e?.contacts||[];return o.jsxs("div",{className:`mt-2 p-3 rounded-lg ${Re?"bg-green-600":"bg-gray-100"}`,children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx(Jc,{className:`w-5 h-5 ${Re?"text-white":"text-blue-600"}`}),o.jsx("span",{className:`font-medium ${Re?"text-white":"text-gray-800"}`,children:Wt.length===1?"Contacto compartido":`${Wt.length} contactos`})]}),Wt.map((fn,Yn)=>o.jsxs("div",{className:`p-2 rounded ${Re?"bg-green-500":"bg-white"} ${Yn>0?"mt-2":""}`,children:[o.jsx("p",{className:`font-medium ${Re?"text-white":"text-gray-800"}`,children:fn.name}),fn.phones?.map((as,Jr)=>o.jsxs("p",{className:`text-sm ${Re?"text-green-100":"text-gray-600"}`,children:[as.phone," ",as.type&&`(${as.type})`]},Jr))]},Yn))]});case"reaction":const Vn=$e?.emoji||$.body;return o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(vS,{className:`w-4 h-4 ${Re?"text-white":"text-pink-500"}`}),o.jsx("span",{className:"text-2xl",children:Vn})]});default:return null}};return y?o.jsx("div",{className:"h-full flex items-center justify-center",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-500"})}):o.jsxs("div",{className:"h-screen flex",children:[o.jsxs("div",{className:"w-96 bg-white border-r border-gray-200 flex flex-col",children:[o.jsxs("div",{className:"p-4 border-b border-gray-200",children:[o.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-3",children:"Conversaciones"}),o.jsx("div",{className:`grid ${L?"grid-cols-4":"grid-cols-3"} gap-1 mb-3 bg-gray-100 p-1 rounded-xl`,children:de.map($=>{const ce=$.icon;return o.jsxs("button",{onClick:()=>{G($.key),F.current=$.key,D($.key)},className:`flex items-center justify-center gap-1.5 py-2 rounded-lg text-xs font-semibold transition-all ${Q===$.key?"bg-white text-green-700 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:[o.jsx(ce,{className:"w-3.5 h-3.5"}),$.label]},$.key)})}),o.jsx("div",{className:"flex gap-1 mb-3",children:[{key:"all",label:"Todos",icon:null,color:"gray"},{key:"whatsapp",label:"WhatsApp",icon:Ib,color:"green"},{key:"instagram",label:"Instagram",icon:Gb,color:"pink"}].map($=>{const ce=$.icon,he=N===$.key;return o.jsxs("button",{onClick:()=>E($.key),className:`flex items-center gap-1 px-2.5 py-1.5 rounded-lg text-xs font-medium transition-all border ${he?$.key==="whatsapp"?"bg-green-50 text-green-700 border-green-200":$.key==="instagram"?"bg-pink-50 text-pink-700 border-pink-200":"bg-indigo-50 text-indigo-700 border-indigo-200":"bg-white text-gray-500 border-gray-200 hover:bg-gray-50"}`,children:[ce&&o.jsx(ce,{className:"w-3 h-3"}),$.label]},$.key)})}),o.jsxs("div",{className:"relative",children:[o.jsx(Sb,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),o.jsx("input",{type:"text",value:_,onChange:$=>C($.target.value),placeholder:"Buscar conversacin...",className:"w-full pl-10 pr-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none"})]})]}),o.jsx("div",{className:"flex-1 overflow-y-auto",children:ae.length===0?o.jsxs("div",{className:"p-8 text-center text-gray-400",children:[o.jsx(ga,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),o.jsx("p",{children:"No hay conversaciones"})]}):ae.map($=>o.jsxs("button",{onClick:()=>u($.phone),className:`w-full flex items-center gap-3 p-4 border-b border-gray-100 hover:bg-gray-50 transition text-left ${c===$.phone?"bg-green-50":""}`,children:[o.jsx("div",{className:`w-12 h-12 ${Hx($.contact_name||$.phone)} rounded-full flex items-center justify-center flex-shrink-0`,children:o.jsx("span",{className:"text-white font-semibold text-sm",children:$x($.contact_name,$.phone)})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("p",{className:"font-medium text-gray-800 truncate",children:$.contact_name||$.phone}),$.unread_count>0&&o.jsx("span",{className:"bg-green-500 text-white text-xs font-medium px-2 py-0.5 rounded-full",children:$.unread_count})]}),o.jsx("p",{className:"text-sm text-gray-500 truncate",children:$.last_message||"Sin mensajes"}),o.jsxs("div",{className:"flex items-center gap-1.5 mt-1 flex-wrap",children:[o.jsx(Bx,{channel:$.channel}),$.department_name&&o.jsxs("span",{className:"inline-flex items-center gap-0.5 text-[10px] px-1.5 py-0.5 rounded-full font-medium",style:{backgroundColor:($.department_color||"#6b7280")+"20",color:$.department_color||"#6b7280"},children:[o.jsx(Lr,{className:"w-2.5 h-2.5"}),$.department_name]}),$.agent_name&&o.jsxs("span",{className:"inline-flex items-center gap-0.5 text-[10px] px-1.5 py-0.5 rounded-full bg-blue-50 text-blue-600 font-medium",children:[o.jsx(Rr,{className:"w-2.5 h-2.5"}),$.agent_name]}),!$.agent_name&&!$.department_name&&$.escalation_status==="ESCALATED"&&o.jsxs("span",{className:"inline-flex items-center gap-0.5 text-[10px] px-1.5 py-0.5 rounded-full bg-yellow-50 text-yellow-600 font-medium",children:[o.jsx(Nb,{className:"w-2.5 h-2.5"}),"Sin asignar"]}),o.jsx("span",{className:"text-xs text-gray-400",children:$.last_message_time?Fr(new Date($.last_message_time),{addSuffix:!0,locale:ns}):""})]})]})]},$.phone))})]}),o.jsx("div",{className:"flex-1 flex flex-col bg-gray-50",children:c?o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"bg-white border-b border-gray-200 p-4 flex items-center justify-between gap-4",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:`w-10 h-10 ${Hx(re?.contact_name||c)} rounded-full flex items-center justify-center`,children:o.jsx("span",{className:"text-white font-semibold text-sm",children:$x(re?.contact_name,c)})}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium text-gray-800",children:re?.contact_name||c}),o.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[o.jsx(Bx,{channel:re?.channel}),o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx(Wc,{className:"w-3 h-3"}),c]}),re?.department_name&&o.jsxs("span",{className:"inline-flex items-center gap-0.5 text-[10px] px-1.5 py-0.5 rounded-full font-medium",style:{backgroundColor:(re.department_color||"#6b7280")+"20",color:re.department_color||"#6b7280"},children:[o.jsx(Lr,{className:"w-2.5 h-2.5"}),re.department_name]}),re?.agent_name&&o.jsxs("span",{className:"inline-flex items-center gap-0.5 text-[10px] px-1.5 py-0.5 rounded-full bg-blue-50 text-blue-600 font-medium",children:[o.jsx(Rr,{className:"w-2.5 h-2.5"}),re.agent_name]})]})]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[re&&U?.id>0&&(!re.assigned_agent_id||re.assigned_agent_id!==U.id)&&o.jsxs("button",{onClick:te,className:"flex items-center gap-1.5 px-3 py-2 text-xs font-medium bg-green-50 text-green-700 hover:bg-green-100 rounded-lg border border-green-200 transition",title:"Tomar este chat",children:[o.jsx(Hr,{className:"w-4 h-4"}),"Tomar"]}),re&&o.jsxs("button",{onClick:()=>T(!0),className:"flex items-center gap-1.5 px-3 py-2 text-xs font-medium bg-gray-50 text-gray-700 hover:bg-gray-100 rounded-lg border border-gray-200 transition",title:"Asignar chat",children:[o.jsx(Hr,{className:"w-4 h-4"}),"Asignar"]}),re&&o.jsxs("button",{onClick:()=>w(!0),className:"flex items-center gap-1.5 px-3 py-2 text-xs font-medium bg-blue-50 text-blue-700 hover:bg-blue-100 rounded-lg border border-blue-200 transition",title:"Transferir chat",children:[o.jsx(qh,{className:"w-4 h-4"}),"Transferir"]}),re&&L&&o.jsxs("button",{onClick:P,className:"flex items-center gap-1.5 px-3 py-2 text-xs font-medium bg-red-50 text-red-700 hover:bg-red-100 rounded-lg border border-red-200 transition",title:"Eliminar conversacin",children:[o.jsx(jo,{className:"w-4 h-4"}),"Eliminar"]}),o.jsx("div",{className:"text-sm",children:B?o.jsxs("span",{className:"text-green-600 flex items-center gap-1",children:[o.jsx("span",{className:"w-2 h-2 bg-green-600 rounded-full"}),"Tiempo real"]}):o.jsxs("span",{className:"text-yellow-600 flex items-center gap-1",children:[o.jsx("span",{className:"w-2 h-2 bg-yellow-600 rounded-full"}),"Reconectando..."]})})]})]}),o.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[f.map(($,ce)=>o.jsx("div",{className:`flex ${$.direction==="outgoing"?"justify-end":"justify-start"}`,children:o.jsxs("div",{className:`max-w-md px-4 py-2 rounded-2xl ${$.direction==="outgoing"?"bg-green-500 text-white rounded-br-md":"bg-white text-gray-800 rounded-bl-md shadow-sm"}`,children:[$.direction==="incoming"&&o.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-400 mb-1",children:[o.jsx(Rr,{className:"w-3 h-3"}),"Cliente"]}),$.direction==="outgoing"&&$.is_bot&&o.jsxs("div",{className:"flex items-center gap-1 text-xs text-green-100 mb-1",children:[o.jsx(Yh,{className:"w-3 h-3"}),"Bot"]}),ue($),($.body||$.content)&&(!$.mediaType||$.mediaType==="reaction")&&o.jsx("p",{className:"whitespace-pre-wrap",children:$.body||$.content}),$.mediaType&&$.mediaType!=="reaction"&&($.mediaCaption||$.body)&&o.jsx("p",{className:"whitespace-pre-wrap mt-2 text-sm",children:$.mediaCaption||$.body}),o.jsxs("div",{className:`flex items-center gap-1 text-xs mt-1 ${$.direction==="outgoing"?"text-white opacity-90":"text-gray-400"}`,children:[o.jsx("span",{children:$.created_at?tu(new Date($.created_at),"HH:mm",{locale:ns}):""}),$.direction==="outgoing"&&o.jsxs("span",{className:"ml-1",children:[$.status==="sent"&&"",$.status==="delivered"&&"",$.status==="read"&&o.jsx("span",{className:"text-blue-400",children:""})]})]})]})},ce)),o.jsx("div",{ref:R})]}),o.jsx("div",{className:"bg-white border-t border-gray-200 p-4",children:o.jsxs("div",{className:"flex gap-3",children:[o.jsx("input",{type:"text",value:p,onChange:H,onKeyPress:O,placeholder:"Escribe un mensaje...",className:"flex-1 px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none"}),o.jsxs("button",{onClick:W,disabled:!p.trim()||b,className:"bg-green-500 hover:bg-green-600 text-white px-6 py-3 rounded-xl transition disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[o.jsx(FS,{className:"w-5 h-5"}),b?"Enviando...":"Enviar"]})]})})]}):o.jsx("div",{className:"flex-1 flex items-center justify-center text-gray-400",children:o.jsxs("div",{className:"text-center",children:[o.jsx(ga,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),o.jsx("p",{className:"text-lg",children:"Selecciona una conversacin"})]})})}),z&&re&&o.jsx(u_,{sessionId:re.session_id||re.sessionId||re.id,currentAgentId:re.assigned_agent_id,currentDepartmentId:re.assigned_department_id,onClose:()=>T(!1),onAssigned:()=>D()}),k&&re&&o.jsx(d_,{sessionId:re.session_id||re.sessionId||re.id,currentAgentId:re.assigned_agent_id,currentDepartmentId:re.assigned_department_id,onClose:()=>w(!1),onTransferred:()=>D()})]})}const va="/api/visual-flows-live";async function Ft(t,a){if(!t.ok){let s=a;try{const i=await t.json();i.error&&(s=i.error)}catch{}throw new Error(s)}return t.json()}async function Qb(){const t=await fetch(va);return Ft(t,"Error al cargar flujos")}async function yh(t){const a=await fetch(`${va}/${t}`);return Ft(a,"Flujo no encontrado")}async function m_(t){const a=await fetch(va,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});return Ft(a,"Error al crear flujo")}async function p_(t,a){const s=await fetch(`${va}/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});return Ft(s,"Error al actualizar flujo")}async function g_(t){const a=await fetch(`${va}/${t}`,{method:"DELETE"});return Ft(a,"Error al eliminar flujo")}async function Zb(t,a=!0){const s=await fetch(`${va}/${t}/activate`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({active:a})});return Ft(s,"Error al activar flujo")}async function x_(t,a){const s=await fetch(`${va}/${t}/duplicate`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({new_name:a})});return Ft(s,"Error al duplicar flujo")}async function y_(){const t=await fetch(`${va}/templates/list`);return Ft(t,"Error al cargar plantillas")}async function Fb(t,a){const s=await fetch(`${va}/templates/${t}/create`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:a})});return Ft(s,"Error al crear desde plantilla")}async function b_(t={}){const a=new URLSearchParams;t.status&&a.append("status",t.status),t.category&&a.append("category",t.category),t.lang&&a.append("lang",t.lang),a.append("with","components"),a.append("limit","200");const s=await fetch(`/api/chat/templates?${a}`);return Ft(s,"Error al cargar plantillas de Meta")}async function v_({templateName:t,languageCode:a,phone:s,parameters:i=[],headerParams:c=[],buttonParams:u=[]}){const f=await fetch("/api/templates/test",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({templateName:t,languageCode:a,phone:s,parameters:i,headerParams:c,buttonParams:u})});return Ft(f,"Error al enviar plantilla de prueba")}async function w_(){const t=await fetch("/api/settings/visual-flows");return Ft(t,"Error al obtener estado de Visual Flows")}async function j_(t){const a=await fetch("/api/settings/visual-flows",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({enabled:t})});return Ft(a,"Error al cambiar estado de Visual Flows")}const qx="whatsapp_test_phone";function N_({template:t,onClose:a}){const[s,i]=j.useState(""),[c,u]=j.useState(!0),[f,m]=j.useState([]),[p,g]=j.useState([]),[y,x]=j.useState([]),[b,S]=j.useState(!1),[_,C]=j.useState(null);j.useEffect(()=>{const k=localStorage.getItem(qx);k&&i(k)},[]),j.useEffect(()=>{if(!t?.components)return;const k=t.components.find(M=>M.type==="BODY"),w=t.components.find(M=>M.type==="HEADER"),R=t.components.filter(M=>M.type==="BUTTONS");if(k?.text){const M=k.text.match(/\{\{(\d+)\}\}/g)||[];m(M.map(()=>""))}if(w?.text){const M=w.text.match(/\{\{(\d+)\}\}/g)||[];g(M.map(()=>""))}if(R.length>0){const M=[];R.forEach(U=>{U.buttons&&U.buttons.forEach(L=>{L.type==="URL"&&L.url?.includes("{{")&&M.push("")})}),x(M)}},[t]);const N=async()=>{if(!s.trim()){C({ok:!1,error:"Ingresa un nmero de telfono"});return}S(!0),C(null);try{c&&localStorage.setItem(qx,s);const k=await v_({templateName:t.name,languageCode:t.language,phone:s.trim(),parameters:f.filter(w=>w!==""),headerParams:p.filter(w=>w!==""),buttonParams:y.filter(w=>w!=="")});C(k)}catch(k){C({ok:!1,error:k.message})}finally{S(!1)}},E=()=>{if(!t?.components)return"";const k=t.components.find(R=>R.type==="BODY");if(!k?.text)return"";let w=k.text;return f.forEach((R,M)=>{w=w.replace(`{{${M+1}}}`,R||`[param ${M+1}]`)}),w},z={APPROVED:{bg:"#dcfce7",text:"#166534"},PENDING:{bg:"#fef3c7",text:"#92400e"},REJECTED:{bg:"#fee2e2",text:"#991b1b"}},T={MARKETING:{bg:"#dbeafe",text:"#1e40af"},UTILITY:{bg:"#f3e8ff",text:"#6b21a8"},AUTHENTICATION:{bg:"#fce7f3",text:"#9d174d"}};return o.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:o.jsxs("div",{style:{background:"white",borderRadius:"16px",padding:"24px",maxWidth:"500px",width:"90%",maxHeight:"90vh",overflow:"auto"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"16px"},children:[o.jsxs("div",{children:[o.jsx("h2",{style:{margin:"0 0 8px 0",fontSize:"20px"},children:"Probar Plantilla"}),o.jsxs("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:[o.jsx("span",{style:{padding:"2px 8px",borderRadius:"4px",fontSize:"12px",fontWeight:"500",background:z[t.status]?.bg||"#f3f4f6",color:z[t.status]?.text||"#374151"},children:t.status}),o.jsx("span",{style:{padding:"2px 8px",borderRadius:"4px",fontSize:"12px",fontWeight:"500",background:T[t.category]?.bg||"#f3f4f6",color:T[t.category]?.text||"#374151"},children:t.category}),o.jsx("span",{style:{padding:"2px 8px",borderRadius:"4px",fontSize:"12px",background:"#f3f4f6",color:"#374151"},children:t.language})]})]}),o.jsx("button",{onClick:a,style:{background:"none",border:"none",fontSize:"24px",cursor:"pointer",color:"#6b7280"},children:""})]}),o.jsxs("div",{style:{background:"#f9fafb",padding:"12px",borderRadius:"8px",marginBottom:"16px"},children:[o.jsx("div",{style:{fontSize:"12px",color:"#6b7280",marginBottom:"4px"},children:"Nombre de la plantilla"}),o.jsx("div",{style:{fontFamily:"monospace",fontWeight:"500"},children:t.name})]}),o.jsxs("div",{style:{background:"#dcf8c6",padding:"12px",borderRadius:"8px",marginBottom:"16px",whiteSpace:"pre-wrap"},children:[o.jsx("div",{style:{fontSize:"12px",color:"#075e54",marginBottom:"4px"},children:"Vista previa"}),o.jsx("div",{style:{color:"#000"},children:E()||"(Sin contenido)"})]}),f.length>0&&o.jsxs("div",{style:{marginBottom:"16px"},children:[o.jsx("div",{style:{fontSize:"14px",fontWeight:"500",marginBottom:"8px"},children:"Parmetros del mensaje"}),f.map((k,w)=>o.jsx("input",{type:"text",placeholder:`Parmetro {{${w+1}}}`,value:k,onChange:R=>{const M=[...f];M[w]=R.target.value,m(M)},style:{width:"100%",padding:"8px 12px",border:"1px solid #d1d5db",borderRadius:"6px",marginBottom:"8px",fontSize:"14px"}},`body-${w}`))]}),p.length>0&&o.jsxs("div",{style:{marginBottom:"16px"},children:[o.jsx("div",{style:{fontSize:"14px",fontWeight:"500",marginBottom:"8px"},children:"Parmetros del encabezado"}),p.map((k,w)=>o.jsx("input",{type:"text",placeholder:`Header {{${w+1}}}`,value:k,onChange:R=>{const M=[...p];M[w]=R.target.value,g(M)},style:{width:"100%",padding:"8px 12px",border:"1px solid #d1d5db",borderRadius:"6px",marginBottom:"8px",fontSize:"14px"}},`header-${w}`))]}),y.length>0&&o.jsxs("div",{style:{marginBottom:"16px"},children:[o.jsx("div",{style:{fontSize:"14px",fontWeight:"500",marginBottom:"8px"},children:"Parmetros de botn URL"}),y.map((k,w)=>o.jsx("input",{type:"text",placeholder:`Texto dinmico del botn ${w+1}`,value:k,onChange:R=>{const M=[...y];M[w]=R.target.value,x(M)},style:{width:"100%",padding:"8px 12px",border:"1px solid #d1d5db",borderRadius:"6px",marginBottom:"8px",fontSize:"14px"}},`btn-${w}`))]}),o.jsxs("div",{style:{marginBottom:"16px"},children:[o.jsx("div",{style:{fontSize:"14px",fontWeight:"500",marginBottom:"8px"},children:"Nmero de telfono destino"}),o.jsx("input",{type:"tel",placeholder:"56912345678",value:s,onChange:k=>i(k.target.value),style:{width:"100%",padding:"8px 12px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"14px"}}),o.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",marginTop:"8px",fontSize:"13px",color:"#6b7280",cursor:"pointer"},children:[o.jsx("input",{type:"checkbox",checked:c,onChange:k=>u(k.target.checked)}),"Recordar este nmero"]})]}),_&&o.jsx("div",{style:{padding:"12px",borderRadius:"8px",marginBottom:"16px",background:_.ok?"#dcfce7":"#fee2e2",color:_.ok?"#166534":"#991b1b"},children:_.ok?o.jsxs(o.Fragment,{children:[o.jsx("div",{style:{fontWeight:"500"},children:"Enviado correctamente"}),o.jsxs("div",{style:{fontSize:"13px",marginTop:"4px"},children:["Mensaje enviado a ",_.sentTo]})]}):o.jsxs(o.Fragment,{children:[o.jsx("div",{style:{fontWeight:"500"},children:"Error al enviar"}),o.jsx("div",{style:{fontSize:"13px",marginTop:"4px"},children:_.error})]})}),o.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end"},children:[o.jsx("button",{onClick:a,style:{padding:"10px 20px",border:"1px solid #d1d5db",borderRadius:"8px",background:"white",cursor:"pointer",fontSize:"14px"},children:"Cerrar"}),o.jsx("button",{onClick:N,disabled:b||t.status!=="APPROVED",style:{padding:"10px 20px",border:"none",borderRadius:"8px",background:t.status==="APPROVED"?"#25d366":"#9ca3af",color:"white",cursor:t.status==="APPROVED"?"pointer":"not-allowed",fontSize:"14px",fontWeight:"500",display:"flex",alignItems:"center",gap:"8px"},children:b?"Enviando...":"Enviar Prueba"})]}),t.status!=="APPROVED"&&o.jsx("div",{style:{marginTop:"12px",padding:"8px",background:"#fef3c7",borderRadius:"6px",fontSize:"13px",color:"#92400e",textAlign:"center"},children:"Solo se pueden probar plantillas con estado APPROVED"})]})})}function S_(){const t=$s(),[a,s]=j.useState("flows"),[i,c]=j.useState([]),[u,f]=j.useState([]),[m,p]=j.useState([]),[g,y]=j.useState(!1),[x,b]=j.useState({status:"",category:""}),[S,_]=j.useState(null),[C,N]=j.useState(!0),[E,z]=j.useState(null),[T,k]=j.useState(null),[w,R]=j.useState(!0),[M,U]=j.useState(!1);j.useEffect(()=>{G(),L()},[]),j.useEffect(()=>{a==="whatsapp"&&F()},[a,x]);const L=async()=>{try{const H=await w_();R(H.enabled)}catch(H){console.error("Error loading visual flows status:",H)}},Q=async()=>{try{U(!0);const W=await j_(!w);R(W.enabled),se(W.enabled?"Modo automtico ACTIVADO":"Modo automtico DESACTIVADO",W.enabled?"success":"info")}catch(H){console.error("Error toggling visual flows:",H),se(`Error: ${H.message}`,"error")}finally{U(!1)}},G=async()=>{try{N(!0),z(null);const[H,W]=await Promise.all([Qb(),y_()]);c(H.flows||[]),f(W.templates||[])}catch(H){console.error("Error loading flows:",H),z(H.message)}finally{N(!1)}},F=async()=>{try{y(!0);const H={};x.status&&(H.status=x.status),x.category&&(H.category=x.category);const W=await b_(H);p(W.items||[])}catch(H){console.error("Error loading Meta templates:",H),se(`Error al cargar plantillas: ${H.message}`,"error")}finally{y(!1)}},se=(H,W="success")=>{k({message:H,type:W}),setTimeout(()=>k(null),4e3)},q=async(H,W)=>{try{const O=await Fb(H,null);se(`Flujo "${W}" creado correctamente`,"success"),await G(),O.id&&t(`/flows/builder/${O.id}`)}catch(O){console.error("Error creating from template:",O),se(`Error al crear flujo: ${O.message}`,"error")}},I=async H=>{try{const W=!H.is_active;await Zb(H.id,W),se(`Flujo "${H.name}" ${W?"activado":"desactivado"}`,"success"),await G()}catch(W){console.error("Error toggling flow:",W),se(`Error: ${W.message}`,"error")}},B=async H=>{try{await x_(H.id,`${H.name} (copia)`),se("Flujo duplicado correctamente","success"),await G()}catch(W){console.error("Error duplicating flow:",W),se(`Error al duplicar: ${W.message}`,"error")}},D=async H=>{if(confirm(`Ests seguro de eliminar el flujo "${H.name}"?`))try{await g_(H.id),se("Flujo eliminado correctamente","success"),await G()}catch(W){console.error("Error deleting flow:",W),se(`Error al eliminar: ${W.message}`,"error")}},Y=H=>({sales:"bg-green-100 text-green-800",support:"bg-blue-100 text-blue-800",service:"bg-purple-100 text-purple-800",feedback:"bg-yellow-100 text-yellow-800",engagement:"bg-pink-100 text-pink-800"})[H]||"bg-gray-100 text-gray-800";return C?o.jsx("div",{className:"flex items-center justify-center h-screen",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-500 mx-auto mb-4"}),o.jsx("p",{className:"text-gray-600",children:"Cargando flujos..."})]})}):E?o.jsx("div",{className:"p-8",children:o.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[o.jsx("h3",{className:"text-red-800 font-semibold mb-2",children:"Error al cargar flujos"}),o.jsx("p",{className:"text-red-600",children:E}),o.jsx("button",{onClick:G,className:"mt-4 px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700",children:"Reintentar"})]})}):o.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[o.jsxs("div",{className:"mb-6 flex justify-between items-start",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Gestin de Flujos"}),o.jsx("p",{className:"text-gray-600",children:"Administra tus flujos conversacionales y crea nuevos desde plantillas predefinidas"})]}),o.jsxs("div",{className:`flex items-center gap-3 px-4 py-3 rounded-lg border ${w?"bg-green-50 border-green-200":"bg-gray-50 border-gray-300"}`,children:[o.jsxs("div",{className:"text-right",children:[o.jsx("p",{className:`text-sm font-medium ${w?"text-green-800":"text-gray-600"}`,children:"Modo Automtico"}),o.jsx("p",{className:`text-xs ${w?"text-green-600":"text-gray-500"}`,children:w?"Bot respondiendo":"Bot pausado"})]}),o.jsx("button",{onClick:Q,disabled:M,className:`relative inline-flex h-7 w-14 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 ${w?"bg-green-500 focus:ring-green-500":"bg-gray-300 focus:ring-gray-500"} ${M?"opacity-50 cursor-wait":"cursor-pointer"}`,children:o.jsx("span",{className:`inline-block h-5 w-5 transform rounded-full bg-white shadow-md transition-transform ${w?"translate-x-8":"translate-x-1"}`})})]})]}),T&&o.jsx("div",{className:`mb-4 p-4 rounded-lg ${T.type==="success"?"bg-green-50 text-green-800 border border-green-200":T.type==="error"?"bg-red-50 text-red-800 border border-red-200":"bg-blue-50 text-blue-800 border border-blue-200"}`,children:T.message}),o.jsx("div",{className:"mb-6 border-b border-gray-200",children:o.jsxs("div",{className:"flex space-x-8",children:[o.jsxs("button",{onClick:()=>s("flows"),className:`pb-4 px-1 border-b-2 font-medium transition-colors ${a==="flows"?"border-green-500 text-green-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:["Mis Flujos (",i.length,")"]}),o.jsxs("button",{onClick:()=>s("templates"),className:`pb-4 px-1 border-b-2 font-medium transition-colors ${a==="templates"?"border-green-500 text-green-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:["Plantillas (",u.length,")"]}),o.jsxs("button",{onClick:()=>s("whatsapp"),className:`pb-4 px-1 border-b-2 font-medium transition-colors flex items-center gap-2 ${a==="whatsapp"?"border-green-500 text-green-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[o.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"currentColor",children:o.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})}),"WhatsApp Templates"]})]})}),a==="flows"&&o.jsx("div",{children:i.length===0?o.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300",children:[o.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),o.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No tienes flujos creados"}),o.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Comienza creando un flujo desde una plantilla"}),o.jsx("div",{className:"mt-6",children:o.jsx("button",{onClick:()=>s("templates"),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:"Ver Plantillas"})})]}):o.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nombre"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estado"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estadsticas"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ltima actualizacin"}),o.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i.map(H=>o.jsxs("tr",{className:"hover:bg-gray-50",children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"flex items-center",children:o.jsxs("div",{children:[o.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[H.name,H.is_default&&o.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800",children:"Por defecto"})]}),H.description&&o.jsx("div",{className:"text-sm text-gray-500",children:H.description})]})})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("button",{onClick:()=>I(H),className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium cursor-pointer transition-colors ${H.is_active?"bg-green-100 text-green-800 hover:bg-green-200":"bg-gray-100 text-gray-800 hover:bg-gray-200"}`,children:H.is_active?"Activo":"Inactivo"})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:o.jsxs("div",{className:"flex flex-col space-y-1",children:[o.jsxs("span",{children:["Ejecutado: ",H.times_triggered||0," veces"]}),o.jsxs("span",{children:["Completado: ",H.times_completed||0," veces"]})]})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:H.updated_at?tu(new Date(H.updated_at),"dd MMM yyyy, HH:mm",{locale:ns}):"-"}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:o.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[o.jsx("button",{onClick:()=>t(`/flows/builder/${H.id}`),className:"text-blue-600 hover:text-blue-900",title:"Editar",children:o.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),o.jsx("button",{onClick:()=>B(H),className:"text-gray-600 hover:text-gray-900",title:"Duplicar",children:o.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})})}),o.jsx("button",{onClick:()=>D(H),className:"text-red-600 hover:text-red-900",title:"Eliminar",children:o.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})})]},H.id))})]})})}),a==="templates"&&o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:u.map(H=>o.jsx("div",{className:"bg-white rounded-lg shadow-md hover:shadow-lg transition-shadow overflow-hidden border border-gray-200",children:o.jsxs("div",{className:"p-6",children:[o.jsxs("div",{className:"flex items-start justify-between mb-3",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:H.name}),o.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${Y(H.category)}`,children:H.category})]}),o.jsx("p",{className:"text-sm text-gray-600 mb-4 line-clamp-2",children:H.description}),o.jsxs("div",{className:"flex items-center text-sm text-gray-500 mb-4",children:[o.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"})}),o.jsxs("span",{children:[H.nodes_count," nodos"]})]}),H.features&&H.features.length>0&&o.jsx("div",{className:"flex flex-wrap gap-1 mb-4",children:H.features.map(W=>o.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-purple-50 text-purple-700 border border-purple-200",children:W},W))}),o.jsx("button",{onClick:()=>q(H.id,H.name),className:"w-full px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors font-medium",children:"Crear desde esta plantilla"})]})},H.id))}),a==="whatsapp"&&o.jsxs("div",{children:[o.jsxs("div",{className:"mb-6 flex flex-wrap gap-4 items-center",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Estado"}),o.jsxs("select",{value:x.status,onChange:H=>b({...x,status:H.target.value}),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-green-500 focus:border-green-500",children:[o.jsx("option",{value:"",children:"Todos"}),o.jsx("option",{value:"APPROVED",children:"Aprobadas"}),o.jsx("option",{value:"PENDING",children:"Pendientes"}),o.jsx("option",{value:"REJECTED",children:"Rechazadas"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Categora"}),o.jsxs("select",{value:x.category,onChange:H=>b({...x,category:H.target.value}),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-green-500 focus:border-green-500",children:[o.jsx("option",{value:"",children:"Todas"}),o.jsx("option",{value:"MARKETING",children:"Marketing"}),o.jsx("option",{value:"UTILITY",children:"Utilidad"}),o.jsx("option",{value:"AUTHENTICATION",children:"Autenticacin"})]})]}),o.jsx("div",{className:"flex-1"}),o.jsxs("div",{className:"text-sm text-gray-500",children:[m.length," plantillas encontradas"]})]}),g?o.jsxs("div",{className:"flex items-center justify-center py-12",children:[o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-green-500"}),o.jsx("span",{className:"ml-3 text-gray-600",children:"Cargando plantillas de Meta..."})]}):m.length===0?o.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300",children:[o.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),o.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No se encontraron plantillas"}),o.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Ajusta los filtros o crea plantillas en Meta Business Suite"})]}):o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:m.map((H,W)=>{const P=H.components?.find(re=>re.type==="BODY")?.text||"",te={APPROVED:"bg-green-100 text-green-800",PENDING:"bg-yellow-100 text-yellow-800",REJECTED:"bg-red-100 text-red-800"},ae={MARKETING:"bg-blue-100 text-blue-800",UTILITY:"bg-purple-100 text-purple-800",AUTHENTICATION:"bg-pink-100 text-pink-800"};return o.jsx("div",{className:"bg-white rounded-lg shadow-md hover:shadow-lg transition-shadow overflow-hidden border border-gray-200",children:o.jsxs("div",{className:"p-5",children:[o.jsx("div",{className:"flex items-start justify-between mb-3",children:o.jsx("h3",{className:"text-base font-semibold text-gray-900 font-mono",children:H.name})}),o.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[o.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded text-xs font-medium ${te[H.status]||"bg-gray-100 text-gray-800"}`,children:H.status}),o.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded text-xs font-medium ${ae[H.category]||"bg-gray-100 text-gray-800"}`,children:H.category}),o.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-gray-100 text-gray-800",children:H.language})]}),o.jsx("div",{className:"bg-gray-50 rounded-lg p-3 mb-4 max-h-32 overflow-y-auto",children:o.jsx("p",{className:"text-sm text-gray-700 whitespace-pre-wrap",children:P.length>200?P.substring(0,200)+"...":P||"(Sin contenido)"})}),o.jsx("button",{onClick:()=>_(H),disabled:H.status!=="APPROVED",className:`w-full px-4 py-2 rounded-lg font-medium transition-colors ${H.status==="APPROVED"?"bg-green-600 text-white hover:bg-green-700":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:H.status==="APPROVED"?"Probar Plantilla":"No disponible"})]})},`${H.name}-${H.language}-${W}`)})})]}),S&&o.jsx(N_,{template:S,onClose:()=>_(null)})]})}function ut(t){if(typeof t=="string"||typeof t=="number")return""+t;let a="";if(Array.isArray(t))for(let s=0,i;s<t.length;s++)(i=ut(t[s]))!==""&&(a+=(a&&" ")+i);else for(let s in t)t[s]&&(a+=(a&&" ")+s);return a}var __={value:()=>{}};function su(){for(var t=0,a=arguments.length,s={},i;t<a;++t){if(!(i=arguments[t]+"")||i in s||/[\s.]/.test(i))throw new Error("illegal type: "+i);s[i]=[]}return new _c(s)}function _c(t){this._=t}function E_(t,a){return t.trim().split(/^|\s+/).map(function(s){var i="",c=s.indexOf(".");if(c>=0&&(i=s.slice(c+1),s=s.slice(0,c)),s&&!a.hasOwnProperty(s))throw new Error("unknown type: "+s);return{type:s,name:i}})}_c.prototype=su.prototype={constructor:_c,on:function(t,a){var s=this._,i=E_(t+"",s),c,u=-1,f=i.length;if(arguments.length<2){for(;++u<f;)if((c=(t=i[u]).type)&&(c=C_(s[c],t.name)))return c;return}if(a!=null&&typeof a!="function")throw new Error("invalid callback: "+a);for(;++u<f;)if(c=(t=i[u]).type)s[c]=Vx(s[c],t.name,a);else if(a==null)for(c in s)s[c]=Vx(s[c],t.name,null);return this},copy:function(){var t={},a=this._;for(var s in a)t[s]=a[s].slice();return new _c(t)},call:function(t,a){if((c=arguments.length-2)>0)for(var s=new Array(c),i=0,c,u;i<c;++i)s[i]=arguments[i+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(u=this._[t],i=0,c=u.length;i<c;++i)u[i].value.apply(a,s)},apply:function(t,a,s){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],c=0,u=i.length;c<u;++c)i[c].value.apply(a,s)}};function C_(t,a){for(var s=0,i=t.length,c;s<i;++s)if((c=t[s]).name===a)return c.value}function Vx(t,a,s){for(var i=0,c=t.length;i<c;++i)if(t[i].name===a){t[i]=__,t=t.slice(0,i).concat(t.slice(i+1));break}return s!=null&&t.push({name:a,value:s}),t}var bh="http://www.w3.org/1999/xhtml";const Yx={svg:"http://www.w3.org/2000/svg",xhtml:bh,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function ru(t){var a=t+="",s=a.indexOf(":");return s>=0&&(a=t.slice(0,s))!=="xmlns"&&(t=t.slice(s+1)),Yx.hasOwnProperty(a)?{space:Yx[a],local:t}:t}function T_(t){return function(){var a=this.ownerDocument,s=this.namespaceURI;return s===bh&&a.documentElement.namespaceURI===bh?a.createElement(t):a.createElementNS(s,t)}}function M_(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Wb(t){var a=ru(t);return(a.local?M_:T_)(a)}function A_(){}function nm(t){return t==null?A_:function(){return this.querySelector(t)}}function k_(t){typeof t!="function"&&(t=nm(t));for(var a=this._groups,s=a.length,i=new Array(s),c=0;c<s;++c)for(var u=a[c],f=u.length,m=i[c]=new Array(f),p,g,y=0;y<f;++y)(p=u[y])&&(g=t.call(p,p.__data__,y,u))&&("__data__"in p&&(g.__data__=p.__data__),m[y]=g);return new Qt(i,this._parents)}function z_(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function R_(){return[]}function Kb(t){return t==null?R_:function(){return this.querySelectorAll(t)}}function D_(t){return function(){return z_(t.apply(this,arguments))}}function O_(t){typeof t=="function"?t=D_(t):t=Kb(t);for(var a=this._groups,s=a.length,i=[],c=[],u=0;u<s;++u)for(var f=a[u],m=f.length,p,g=0;g<m;++g)(p=f[g])&&(i.push(t.call(p,p.__data__,g,f)),c.push(p));return new Qt(i,c)}function Jb(t){return function(){return this.matches(t)}}function e1(t){return function(a){return a.matches(t)}}var B_=Array.prototype.find;function L_(t){return function(){return B_.call(this.children,t)}}function H_(){return this.firstElementChild}function $_(t){return this.select(t==null?H_:L_(typeof t=="function"?t:e1(t)))}var U_=Array.prototype.filter;function q_(){return Array.from(this.children)}function V_(t){return function(){return U_.call(this.children,t)}}function Y_(t){return this.selectAll(t==null?q_:V_(typeof t=="function"?t:e1(t)))}function P_(t){typeof t!="function"&&(t=Jb(t));for(var a=this._groups,s=a.length,i=new Array(s),c=0;c<s;++c)for(var u=a[c],f=u.length,m=i[c]=[],p,g=0;g<f;++g)(p=u[g])&&t.call(p,p.__data__,g,u)&&m.push(p);return new Qt(i,this._parents)}function t1(t){return new Array(t.length)}function X_(){return new Qt(this._enter||this._groups.map(t1),this._parents)}function Hc(t,a){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=a}Hc.prototype={constructor:Hc,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,a){return this._parent.insertBefore(t,a)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function I_(t){return function(){return t}}function G_(t,a,s,i,c,u){for(var f=0,m,p=a.length,g=u.length;f<g;++f)(m=a[f])?(m.__data__=u[f],i[f]=m):s[f]=new Hc(t,u[f]);for(;f<p;++f)(m=a[f])&&(c[f]=m)}function Q_(t,a,s,i,c,u,f){var m,p,g=new Map,y=a.length,x=u.length,b=new Array(y),S;for(m=0;m<y;++m)(p=a[m])&&(b[m]=S=f.call(p,p.__data__,m,a)+"",g.has(S)?c[m]=p:g.set(S,p));for(m=0;m<x;++m)S=f.call(t,u[m],m,u)+"",(p=g.get(S))?(i[m]=p,p.__data__=u[m],g.delete(S)):s[m]=new Hc(t,u[m]);for(m=0;m<y;++m)(p=a[m])&&g.get(b[m])===p&&(c[m]=p)}function Z_(t){return t.__data__}function F_(t,a){if(!arguments.length)return Array.from(this,Z_);var s=a?Q_:G_,i=this._parents,c=this._groups;typeof t!="function"&&(t=I_(t));for(var u=c.length,f=new Array(u),m=new Array(u),p=new Array(u),g=0;g<u;++g){var y=i[g],x=c[g],b=x.length,S=W_(t.call(y,y&&y.__data__,g,i)),_=S.length,C=m[g]=new Array(_),N=f[g]=new Array(_),E=p[g]=new Array(b);s(y,x,C,N,E,S,a);for(var z=0,T=0,k,w;z<_;++z)if(k=C[z]){for(z>=T&&(T=z+1);!(w=N[T])&&++T<_;);k._next=w||null}}return f=new Qt(f,i),f._enter=m,f._exit=p,f}function W_(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function K_(){return new Qt(this._exit||this._groups.map(t1),this._parents)}function J_(t,a,s){var i=this.enter(),c=this,u=this.exit();return typeof t=="function"?(i=t(i),i&&(i=i.selection())):i=i.append(t+""),a!=null&&(c=a(c),c&&(c=c.selection())),s==null?u.remove():s(u),i&&c?i.merge(c).order():c}function eE(t){for(var a=t.selection?t.selection():t,s=this._groups,i=a._groups,c=s.length,u=i.length,f=Math.min(c,u),m=new Array(c),p=0;p<f;++p)for(var g=s[p],y=i[p],x=g.length,b=m[p]=new Array(x),S,_=0;_<x;++_)(S=g[_]||y[_])&&(b[_]=S);for(;p<c;++p)m[p]=s[p];return new Qt(m,this._parents)}function tE(){for(var t=this._groups,a=-1,s=t.length;++a<s;)for(var i=t[a],c=i.length-1,u=i[c],f;--c>=0;)(f=i[c])&&(u&&f.compareDocumentPosition(u)^4&&u.parentNode.insertBefore(f,u),u=f);return this}function nE(t){t||(t=aE);function a(x,b){return x&&b?t(x.__data__,b.__data__):!x-!b}for(var s=this._groups,i=s.length,c=new Array(i),u=0;u<i;++u){for(var f=s[u],m=f.length,p=c[u]=new Array(m),g,y=0;y<m;++y)(g=f[y])&&(p[y]=g);p.sort(a)}return new Qt(c,this._parents).order()}function aE(t,a){return t<a?-1:t>a?1:t>=a?0:NaN}function sE(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function rE(){return Array.from(this)}function iE(){for(var t=this._groups,a=0,s=t.length;a<s;++a)for(var i=t[a],c=0,u=i.length;c<u;++c){var f=i[c];if(f)return f}return null}function oE(){let t=0;for(const a of this)++t;return t}function lE(){return!this.node()}function cE(t){for(var a=this._groups,s=0,i=a.length;s<i;++s)for(var c=a[s],u=0,f=c.length,m;u<f;++u)(m=c[u])&&t.call(m,m.__data__,u,c);return this}function uE(t){return function(){this.removeAttribute(t)}}function dE(t){return function(){this.removeAttributeNS(t.space,t.local)}}function fE(t,a){return function(){this.setAttribute(t,a)}}function hE(t,a){return function(){this.setAttributeNS(t.space,t.local,a)}}function mE(t,a){return function(){var s=a.apply(this,arguments);s==null?this.removeAttribute(t):this.setAttribute(t,s)}}function pE(t,a){return function(){var s=a.apply(this,arguments);s==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,s)}}function gE(t,a){var s=ru(t);if(arguments.length<2){var i=this.node();return s.local?i.getAttributeNS(s.space,s.local):i.getAttribute(s)}return this.each((a==null?s.local?dE:uE:typeof a=="function"?s.local?pE:mE:s.local?hE:fE)(s,a))}function n1(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function xE(t){return function(){this.style.removeProperty(t)}}function yE(t,a,s){return function(){this.style.setProperty(t,a,s)}}function bE(t,a,s){return function(){var i=a.apply(this,arguments);i==null?this.style.removeProperty(t):this.style.setProperty(t,i,s)}}function vE(t,a,s){return arguments.length>1?this.each((a==null?xE:typeof a=="function"?bE:yE)(t,a,s??"")):$r(this.node(),t)}function $r(t,a){return t.style.getPropertyValue(a)||n1(t).getComputedStyle(t,null).getPropertyValue(a)}function wE(t){return function(){delete this[t]}}function jE(t,a){return function(){this[t]=a}}function NE(t,a){return function(){var s=a.apply(this,arguments);s==null?delete this[t]:this[t]=s}}function SE(t,a){return arguments.length>1?this.each((a==null?wE:typeof a=="function"?NE:jE)(t,a)):this.node()[t]}function a1(t){return t.trim().split(/^|\s+/)}function am(t){return t.classList||new s1(t)}function s1(t){this._node=t,this._names=a1(t.getAttribute("class")||"")}s1.prototype={add:function(t){var a=this._names.indexOf(t);a<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var a=this._names.indexOf(t);a>=0&&(this._names.splice(a,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function r1(t,a){for(var s=am(t),i=-1,c=a.length;++i<c;)s.add(a[i])}function i1(t,a){for(var s=am(t),i=-1,c=a.length;++i<c;)s.remove(a[i])}function _E(t){return function(){r1(this,t)}}function EE(t){return function(){i1(this,t)}}function CE(t,a){return function(){(a.apply(this,arguments)?r1:i1)(this,t)}}function TE(t,a){var s=a1(t+"");if(arguments.length<2){for(var i=am(this.node()),c=-1,u=s.length;++c<u;)if(!i.contains(s[c]))return!1;return!0}return this.each((typeof a=="function"?CE:a?_E:EE)(s,a))}function ME(){this.textContent=""}function AE(t){return function(){this.textContent=t}}function kE(t){return function(){var a=t.apply(this,arguments);this.textContent=a??""}}function zE(t){return arguments.length?this.each(t==null?ME:(typeof t=="function"?kE:AE)(t)):this.node().textContent}function RE(){this.innerHTML=""}function DE(t){return function(){this.innerHTML=t}}function OE(t){return function(){var a=t.apply(this,arguments);this.innerHTML=a??""}}function BE(t){return arguments.length?this.each(t==null?RE:(typeof t=="function"?OE:DE)(t)):this.node().innerHTML}function LE(){this.nextSibling&&this.parentNode.appendChild(this)}function HE(){return this.each(LE)}function $E(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function UE(){return this.each($E)}function qE(t){var a=typeof t=="function"?t:Wb(t);return this.select(function(){return this.appendChild(a.apply(this,arguments))})}function VE(){return null}function YE(t,a){var s=typeof t=="function"?t:Wb(t),i=a==null?VE:typeof a=="function"?a:nm(a);return this.select(function(){return this.insertBefore(s.apply(this,arguments),i.apply(this,arguments)||null)})}function PE(){var t=this.parentNode;t&&t.removeChild(this)}function XE(){return this.each(PE)}function IE(){var t=this.cloneNode(!1),a=this.parentNode;return a?a.insertBefore(t,this.nextSibling):t}function GE(){var t=this.cloneNode(!0),a=this.parentNode;return a?a.insertBefore(t,this.nextSibling):t}function QE(t){return this.select(t?GE:IE)}function ZE(t){return arguments.length?this.property("__data__",t):this.node().__data__}function FE(t){return function(a){t.call(this,a,this.__data__)}}function WE(t){return t.trim().split(/^|\s+/).map(function(a){var s="",i=a.indexOf(".");return i>=0&&(s=a.slice(i+1),a=a.slice(0,i)),{type:a,name:s}})}function KE(t){return function(){var a=this.__on;if(a){for(var s=0,i=-1,c=a.length,u;s<c;++s)u=a[s],(!t.type||u.type===t.type)&&u.name===t.name?this.removeEventListener(u.type,u.listener,u.options):a[++i]=u;++i?a.length=i:delete this.__on}}}function JE(t,a,s){return function(){var i=this.__on,c,u=FE(a);if(i){for(var f=0,m=i.length;f<m;++f)if((c=i[f]).type===t.type&&c.name===t.name){this.removeEventListener(c.type,c.listener,c.options),this.addEventListener(c.type,c.listener=u,c.options=s),c.value=a;return}}this.addEventListener(t.type,u,s),c={type:t.type,name:t.name,value:a,listener:u,options:s},i?i.push(c):this.__on=[c]}}function e6(t,a,s){var i=WE(t+""),c,u=i.length,f;if(arguments.length<2){var m=this.node().__on;if(m){for(var p=0,g=m.length,y;p<g;++p)for(c=0,y=m[p];c<u;++c)if((f=i[c]).type===y.type&&f.name===y.name)return y.value}return}for(m=a?JE:KE,c=0;c<u;++c)this.each(m(i[c],a,s));return this}function o1(t,a,s){var i=n1(t),c=i.CustomEvent;typeof c=="function"?c=new c(a,s):(c=i.document.createEvent("Event"),s?(c.initEvent(a,s.bubbles,s.cancelable),c.detail=s.detail):c.initEvent(a,!1,!1)),t.dispatchEvent(c)}function t6(t,a){return function(){return o1(this,t,a)}}function n6(t,a){return function(){return o1(this,t,a.apply(this,arguments))}}function a6(t,a){return this.each((typeof a=="function"?n6:t6)(t,a))}function*s6(){for(var t=this._groups,a=0,s=t.length;a<s;++a)for(var i=t[a],c=0,u=i.length,f;c<u;++c)(f=i[c])&&(yield f)}var l1=[null];function Qt(t,a){this._groups=t,this._parents=a}function _o(){return new Qt([[document.documentElement]],l1)}function r6(){return this}Qt.prototype=_o.prototype={constructor:Qt,select:k_,selectAll:O_,selectChild:$_,selectChildren:Y_,filter:P_,data:F_,enter:X_,exit:K_,join:J_,merge:eE,selection:r6,order:tE,sort:nE,call:sE,nodes:rE,node:iE,size:oE,empty:lE,each:cE,attr:gE,style:vE,property:SE,classed:TE,text:zE,html:BE,raise:HE,lower:UE,append:qE,insert:YE,remove:XE,clone:QE,datum:ZE,on:e6,dispatch:a6,[Symbol.iterator]:s6};function It(t){return typeof t=="string"?new Qt([[document.querySelector(t)]],[document.documentElement]):new Qt([[t]],l1)}function i6(t){let a;for(;a=t.sourceEvent;)t=a;return t}function yn(t,a){if(t=i6(t),a===void 0&&(a=t.currentTarget),a){var s=a.ownerSVGElement||a;if(s.createSVGPoint){var i=s.createSVGPoint();return i.x=t.clientX,i.y=t.clientY,i=i.matrixTransform(a.getScreenCTM().inverse()),[i.x,i.y]}if(a.getBoundingClientRect){var c=a.getBoundingClientRect();return[t.clientX-c.left-a.clientLeft,t.clientY-c.top-a.clientTop]}}return[t.pageX,t.pageY]}const o6={passive:!1},lo={capture:!0,passive:!1};function Xf(t){t.stopImmediatePropagation()}function Or(t){t.preventDefault(),t.stopImmediatePropagation()}function c1(t){var a=t.document.documentElement,s=It(t).on("dragstart.drag",Or,lo);"onselectstart"in a?s.on("selectstart.drag",Or,lo):(a.__noselect=a.style.MozUserSelect,a.style.MozUserSelect="none")}function u1(t,a){var s=t.document.documentElement,i=It(t).on("dragstart.drag",null);a&&(i.on("click.drag",Or,lo),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in s?i.on("selectstart.drag",null):(s.style.MozUserSelect=s.__noselect,delete s.__noselect)}const ic=t=>()=>t;function vh(t,{sourceEvent:a,subject:s,target:i,identifier:c,active:u,x:f,y:m,dx:p,dy:g,dispatch:y}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:a,enumerable:!0,configurable:!0},subject:{value:s,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:c,enumerable:!0,configurable:!0},active:{value:u,enumerable:!0,configurable:!0},x:{value:f,enumerable:!0,configurable:!0},y:{value:m,enumerable:!0,configurable:!0},dx:{value:p,enumerable:!0,configurable:!0},dy:{value:g,enumerable:!0,configurable:!0},_:{value:y}})}vh.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function l6(t){return!t.ctrlKey&&!t.button}function c6(){return this.parentNode}function u6(t,a){return a??{x:t.x,y:t.y}}function d6(){return navigator.maxTouchPoints||"ontouchstart"in this}function d1(){var t=l6,a=c6,s=u6,i=d6,c={},u=su("start","drag","end"),f=0,m,p,g,y,x=0;function b(k){k.on("mousedown.drag",S).filter(i).on("touchstart.drag",N).on("touchmove.drag",E,o6).on("touchend.drag touchcancel.drag",z).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function S(k,w){if(!(y||!t.call(this,k,w))){var R=T(this,a.call(this,k,w),k,w,"mouse");R&&(It(k.view).on("mousemove.drag",_,lo).on("mouseup.drag",C,lo),c1(k.view),Xf(k),g=!1,m=k.clientX,p=k.clientY,R("start",k))}}function _(k){if(Or(k),!g){var w=k.clientX-m,R=k.clientY-p;g=w*w+R*R>x}c.mouse("drag",k)}function C(k){It(k.view).on("mousemove.drag mouseup.drag",null),u1(k.view,g),Or(k),c.mouse("end",k)}function N(k,w){if(t.call(this,k,w)){var R=k.changedTouches,M=a.call(this,k,w),U=R.length,L,Q;for(L=0;L<U;++L)(Q=T(this,M,k,w,R[L].identifier,R[L]))&&(Xf(k),Q("start",k,R[L]))}}function E(k){var w=k.changedTouches,R=w.length,M,U;for(M=0;M<R;++M)(U=c[w[M].identifier])&&(Or(k),U("drag",k,w[M]))}function z(k){var w=k.changedTouches,R=w.length,M,U;for(y&&clearTimeout(y),y=setTimeout(function(){y=null},500),M=0;M<R;++M)(U=c[w[M].identifier])&&(Xf(k),U("end",k,w[M]))}function T(k,w,R,M,U,L){var Q=u.copy(),G=yn(L||R,w),F,se,q;if((q=s.call(k,new vh("beforestart",{sourceEvent:R,target:b,identifier:U,active:f,x:G[0],y:G[1],dx:0,dy:0,dispatch:Q}),M))!=null)return F=q.x-G[0]||0,se=q.y-G[1]||0,function I(B,D,Y){var H=G,W;switch(B){case"start":c[U]=I,W=f++;break;case"end":delete c[U],--f;case"drag":G=yn(Y||D,w),W=f;break}Q.call(B,k,new vh(B,{sourceEvent:D,subject:q,target:b,identifier:U,active:W,x:G[0]+F,y:G[1]+se,dx:G[0]-H[0],dy:G[1]-H[1],dispatch:Q}),M)}}return b.filter=function(k){return arguments.length?(t=typeof k=="function"?k:ic(!!k),b):t},b.container=function(k){return arguments.length?(a=typeof k=="function"?k:ic(k),b):a},b.subject=function(k){return arguments.length?(s=typeof k=="function"?k:ic(k),b):s},b.touchable=function(k){return arguments.length?(i=typeof k=="function"?k:ic(!!k),b):i},b.on=function(){var k=u.on.apply(u,arguments);return k===u?b:k},b.clickDistance=function(k){return arguments.length?(x=(k=+k)*k,b):Math.sqrt(x)},b}function sm(t,a,s){t.prototype=a.prototype=s,s.constructor=t}function f1(t,a){var s=Object.create(t.prototype);for(var i in a)s[i]=a[i];return s}function Eo(){}var co=.7,$c=1/co,Br="\\s*([+-]?\\d+)\\s*",uo="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Bn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",f6=/^#([0-9a-f]{3,8})$/,h6=new RegExp(`^rgb\\(${Br},${Br},${Br}\\)$`),m6=new RegExp(`^rgb\\(${Bn},${Bn},${Bn}\\)$`),p6=new RegExp(`^rgba\\(${Br},${Br},${Br},${uo}\\)$`),g6=new RegExp(`^rgba\\(${Bn},${Bn},${Bn},${uo}\\)$`),x6=new RegExp(`^hsl\\(${uo},${Bn},${Bn}\\)$`),y6=new RegExp(`^hsla\\(${uo},${Bn},${Bn},${uo}\\)$`),Px={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};sm(Eo,Os,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Xx,formatHex:Xx,formatHex8:b6,formatHsl:v6,formatRgb:Ix,toString:Ix});function Xx(){return this.rgb().formatHex()}function b6(){return this.rgb().formatHex8()}function v6(){return h1(this).formatHsl()}function Ix(){return this.rgb().formatRgb()}function Os(t){var a,s;return t=(t+"").trim().toLowerCase(),(a=f6.exec(t))?(s=a[1].length,a=parseInt(a[1],16),s===6?Gx(a):s===3?new Ht(a>>8&15|a>>4&240,a>>4&15|a&240,(a&15)<<4|a&15,1):s===8?oc(a>>24&255,a>>16&255,a>>8&255,(a&255)/255):s===4?oc(a>>12&15|a>>8&240,a>>8&15|a>>4&240,a>>4&15|a&240,((a&15)<<4|a&15)/255):null):(a=h6.exec(t))?new Ht(a[1],a[2],a[3],1):(a=m6.exec(t))?new Ht(a[1]*255/100,a[2]*255/100,a[3]*255/100,1):(a=p6.exec(t))?oc(a[1],a[2],a[3],a[4]):(a=g6.exec(t))?oc(a[1]*255/100,a[2]*255/100,a[3]*255/100,a[4]):(a=x6.exec(t))?Fx(a[1],a[2]/100,a[3]/100,1):(a=y6.exec(t))?Fx(a[1],a[2]/100,a[3]/100,a[4]):Px.hasOwnProperty(t)?Gx(Px[t]):t==="transparent"?new Ht(NaN,NaN,NaN,0):null}function Gx(t){return new Ht(t>>16&255,t>>8&255,t&255,1)}function oc(t,a,s,i){return i<=0&&(t=a=s=NaN),new Ht(t,a,s,i)}function w6(t){return t instanceof Eo||(t=Os(t)),t?(t=t.rgb(),new Ht(t.r,t.g,t.b,t.opacity)):new Ht}function wh(t,a,s,i){return arguments.length===1?w6(t):new Ht(t,a,s,i??1)}function Ht(t,a,s,i){this.r=+t,this.g=+a,this.b=+s,this.opacity=+i}sm(Ht,wh,f1(Eo,{brighter(t){return t=t==null?$c:Math.pow($c,t),new Ht(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?co:Math.pow(co,t),new Ht(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Ht(zs(this.r),zs(this.g),zs(this.b),Uc(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Qx,formatHex:Qx,formatHex8:j6,formatRgb:Zx,toString:Zx}));function Qx(){return`#${As(this.r)}${As(this.g)}${As(this.b)}`}function j6(){return`#${As(this.r)}${As(this.g)}${As(this.b)}${As((isNaN(this.opacity)?1:this.opacity)*255)}`}function Zx(){const t=Uc(this.opacity);return`${t===1?"rgb(":"rgba("}${zs(this.r)}, ${zs(this.g)}, ${zs(this.b)}${t===1?")":`, ${t})`}`}function Uc(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function zs(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function As(t){return t=zs(t),(t<16?"0":"")+t.toString(16)}function Fx(t,a,s,i){return i<=0?t=a=s=NaN:s<=0||s>=1?t=a=NaN:a<=0&&(t=NaN),new vn(t,a,s,i)}function h1(t){if(t instanceof vn)return new vn(t.h,t.s,t.l,t.opacity);if(t instanceof Eo||(t=Os(t)),!t)return new vn;if(t instanceof vn)return t;t=t.rgb();var a=t.r/255,s=t.g/255,i=t.b/255,c=Math.min(a,s,i),u=Math.max(a,s,i),f=NaN,m=u-c,p=(u+c)/2;return m?(a===u?f=(s-i)/m+(s<i)*6:s===u?f=(i-a)/m+2:f=(a-s)/m+4,m/=p<.5?u+c:2-u-c,f*=60):m=p>0&&p<1?0:f,new vn(f,m,p,t.opacity)}function N6(t,a,s,i){return arguments.length===1?h1(t):new vn(t,a,s,i??1)}function vn(t,a,s,i){this.h=+t,this.s=+a,this.l=+s,this.opacity=+i}sm(vn,N6,f1(Eo,{brighter(t){return t=t==null?$c:Math.pow($c,t),new vn(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?co:Math.pow(co,t),new vn(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,a=isNaN(t)||isNaN(this.s)?0:this.s,s=this.l,i=s+(s<.5?s:1-s)*a,c=2*s-i;return new Ht(If(t>=240?t-240:t+120,c,i),If(t,c,i),If(t<120?t+240:t-120,c,i),this.opacity)},clamp(){return new vn(Wx(this.h),lc(this.s),lc(this.l),Uc(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Uc(this.opacity);return`${t===1?"hsl(":"hsla("}${Wx(this.h)}, ${lc(this.s)*100}%, ${lc(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Wx(t){return t=(t||0)%360,t<0?t+360:t}function lc(t){return Math.max(0,Math.min(1,t||0))}function If(t,a,s){return(t<60?a+(s-a)*t/60:t<180?s:t<240?a+(s-a)*(240-t)/60:a)*255}const rm=t=>()=>t;function S6(t,a){return function(s){return t+s*a}}function _6(t,a,s){return t=Math.pow(t,s),a=Math.pow(a,s)-t,s=1/s,function(i){return Math.pow(t+i*a,s)}}function E6(t){return(t=+t)==1?m1:function(a,s){return s-a?_6(a,s,t):rm(isNaN(a)?s:a)}}function m1(t,a){var s=a-t;return s?S6(t,s):rm(isNaN(t)?a:t)}const qc=(function t(a){var s=E6(a);function i(c,u){var f=s((c=wh(c)).r,(u=wh(u)).r),m=s(c.g,u.g),p=s(c.b,u.b),g=m1(c.opacity,u.opacity);return function(y){return c.r=f(y),c.g=m(y),c.b=p(y),c.opacity=g(y),c+""}}return i.gamma=t,i})(1);function C6(t,a){a||(a=[]);var s=t?Math.min(a.length,t.length):0,i=a.slice(),c;return function(u){for(c=0;c<s;++c)i[c]=t[c]*(1-u)+a[c]*u;return i}}function T6(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function M6(t,a){var s=a?a.length:0,i=t?Math.min(s,t.length):0,c=new Array(i),u=new Array(s),f;for(f=0;f<i;++f)c[f]=so(t[f],a[f]);for(;f<s;++f)u[f]=a[f];return function(m){for(f=0;f<i;++f)u[f]=c[f](m);return u}}function A6(t,a){var s=new Date;return t=+t,a=+a,function(i){return s.setTime(t*(1-i)+a*i),s}}function zn(t,a){return t=+t,a=+a,function(s){return t*(1-s)+a*s}}function k6(t,a){var s={},i={},c;(t===null||typeof t!="object")&&(t={}),(a===null||typeof a!="object")&&(a={});for(c in a)c in t?s[c]=so(t[c],a[c]):i[c]=a[c];return function(u){for(c in s)i[c]=s[c](u);return i}}var jh=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Gf=new RegExp(jh.source,"g");function z6(t){return function(){return t}}function R6(t){return function(a){return t(a)+""}}function p1(t,a){var s=jh.lastIndex=Gf.lastIndex=0,i,c,u,f=-1,m=[],p=[];for(t=t+"",a=a+"";(i=jh.exec(t))&&(c=Gf.exec(a));)(u=c.index)>s&&(u=a.slice(s,u),m[f]?m[f]+=u:m[++f]=u),(i=i[0])===(c=c[0])?m[f]?m[f]+=c:m[++f]=c:(m[++f]=null,p.push({i:f,x:zn(i,c)})),s=Gf.lastIndex;return s<a.length&&(u=a.slice(s),m[f]?m[f]+=u:m[++f]=u),m.length<2?p[0]?R6(p[0].x):z6(a):(a=p.length,function(g){for(var y=0,x;y<a;++y)m[(x=p[y]).i]=x.x(g);return m.join("")})}function so(t,a){var s=typeof a,i;return a==null||s==="boolean"?rm(a):(s==="number"?zn:s==="string"?(i=Os(a))?(a=i,qc):p1:a instanceof Os?qc:a instanceof Date?A6:T6(a)?C6:Array.isArray(a)?M6:typeof a.valueOf!="function"&&typeof a.toString!="function"||isNaN(a)?k6:zn)(t,a)}var Kx=180/Math.PI,Nh={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function g1(t,a,s,i,c,u){var f,m,p;return(f=Math.sqrt(t*t+a*a))&&(t/=f,a/=f),(p=t*s+a*i)&&(s-=t*p,i-=a*p),(m=Math.sqrt(s*s+i*i))&&(s/=m,i/=m,p/=m),t*i<a*s&&(t=-t,a=-a,p=-p,f=-f),{translateX:c,translateY:u,rotate:Math.atan2(a,t)*Kx,skewX:Math.atan(p)*Kx,scaleX:f,scaleY:m}}var cc;function D6(t){const a=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return a.isIdentity?Nh:g1(a.a,a.b,a.c,a.d,a.e,a.f)}function O6(t){return t==null||(cc||(cc=document.createElementNS("http://www.w3.org/2000/svg","g")),cc.setAttribute("transform",t),!(t=cc.transform.baseVal.consolidate()))?Nh:(t=t.matrix,g1(t.a,t.b,t.c,t.d,t.e,t.f))}function x1(t,a,s,i){function c(g){return g.length?g.pop()+" ":""}function u(g,y,x,b,S,_){if(g!==x||y!==b){var C=S.push("translate(",null,a,null,s);_.push({i:C-4,x:zn(g,x)},{i:C-2,x:zn(y,b)})}else(x||b)&&S.push("translate("+x+a+b+s)}function f(g,y,x,b){g!==y?(g-y>180?y+=360:y-g>180&&(g+=360),b.push({i:x.push(c(x)+"rotate(",null,i)-2,x:zn(g,y)})):y&&x.push(c(x)+"rotate("+y+i)}function m(g,y,x,b){g!==y?b.push({i:x.push(c(x)+"skewX(",null,i)-2,x:zn(g,y)}):y&&x.push(c(x)+"skewX("+y+i)}function p(g,y,x,b,S,_){if(g!==x||y!==b){var C=S.push(c(S)+"scale(",null,",",null,")");_.push({i:C-4,x:zn(g,x)},{i:C-2,x:zn(y,b)})}else(x!==1||b!==1)&&S.push(c(S)+"scale("+x+","+b+")")}return function(g,y){var x=[],b=[];return g=t(g),y=t(y),u(g.translateX,g.translateY,y.translateX,y.translateY,x,b),f(g.rotate,y.rotate,x,b),m(g.skewX,y.skewX,x,b),p(g.scaleX,g.scaleY,y.scaleX,y.scaleY,x,b),g=y=null,function(S){for(var _=-1,C=b.length,N;++_<C;)x[(N=b[_]).i]=N.x(S);return x.join("")}}}var B6=x1(D6,"px, ","px)","deg)"),L6=x1(O6,", ",")",")"),H6=1e-12;function Jx(t){return((t=Math.exp(t))+1/t)/2}function $6(t){return((t=Math.exp(t))-1/t)/2}function U6(t){return((t=Math.exp(2*t))-1)/(t+1)}const Ec=(function t(a,s,i){function c(u,f){var m=u[0],p=u[1],g=u[2],y=f[0],x=f[1],b=f[2],S=y-m,_=x-p,C=S*S+_*_,N,E;if(C<H6)E=Math.log(b/g)/a,N=function(M){return[m+M*S,p+M*_,g*Math.exp(a*M*E)]};else{var z=Math.sqrt(C),T=(b*b-g*g+i*C)/(2*g*s*z),k=(b*b-g*g-i*C)/(2*b*s*z),w=Math.log(Math.sqrt(T*T+1)-T),R=Math.log(Math.sqrt(k*k+1)-k);E=(R-w)/a,N=function(M){var U=M*E,L=Jx(w),Q=g/(s*z)*(L*U6(a*U+w)-$6(w));return[m+Q*S,p+Q*_,g*L/Jx(a*U+w)]}}return N.duration=E*1e3*a/Math.SQRT2,N}return c.rho=function(u){var f=Math.max(.001,+u),m=f*f,p=m*m;return t(f,m,p)},c})(Math.SQRT2,2,4);var Ur=0,no=0,Wi=0,y1=1e3,Vc,ao,Yc=0,Bs=0,iu=0,fo=typeof performance=="object"&&performance.now?performance:Date,b1=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function im(){return Bs||(b1(q6),Bs=fo.now()+iu)}function q6(){Bs=0}function Pc(){this._call=this._time=this._next=null}Pc.prototype=v1.prototype={constructor:Pc,restart:function(t,a,s){if(typeof t!="function")throw new TypeError("callback is not a function");s=(s==null?im():+s)+(a==null?0:+a),!this._next&&ao!==this&&(ao?ao._next=this:Vc=this,ao=this),this._call=t,this._time=s,Sh()},stop:function(){this._call&&(this._call=null,this._time=1/0,Sh())}};function v1(t,a,s){var i=new Pc;return i.restart(t,a,s),i}function V6(){im(),++Ur;for(var t=Vc,a;t;)(a=Bs-t._time)>=0&&t._call.call(void 0,a),t=t._next;--Ur}function ey(){Bs=(Yc=fo.now())+iu,Ur=no=0;try{V6()}finally{Ur=0,P6(),Bs=0}}function Y6(){var t=fo.now(),a=t-Yc;a>y1&&(iu-=a,Yc=t)}function P6(){for(var t,a=Vc,s,i=1/0;a;)a._call?(i>a._time&&(i=a._time),t=a,a=a._next):(s=a._next,a._next=null,a=t?t._next=s:Vc=s);ao=t,Sh(i)}function Sh(t){if(!Ur){no&&(no=clearTimeout(no));var a=t-Bs;a>24?(t<1/0&&(no=setTimeout(ey,t-fo.now()-iu)),Wi&&(Wi=clearInterval(Wi))):(Wi||(Yc=fo.now(),Wi=setInterval(Y6,y1)),Ur=1,b1(ey))}}function ty(t,a,s){var i=new Pc;return a=a==null?0:+a,i.restart(c=>{i.stop(),t(c+a)},a,s),i}var X6=su("start","end","cancel","interrupt"),I6=[],w1=0,ny=1,_h=2,Cc=3,ay=4,Eh=5,Tc=6;function ou(t,a,s,i,c,u){var f=t.__transition;if(!f)t.__transition={};else if(s in f)return;G6(t,s,{name:a,index:i,group:c,on:X6,tween:I6,time:u.time,delay:u.delay,duration:u.duration,ease:u.ease,timer:null,state:w1})}function om(t,a){var s=Nn(t,a);if(s.state>w1)throw new Error("too late; already scheduled");return s}function $n(t,a){var s=Nn(t,a);if(s.state>Cc)throw new Error("too late; already running");return s}function Nn(t,a){var s=t.__transition;if(!s||!(s=s[a]))throw new Error("transition not found");return s}function G6(t,a,s){var i=t.__transition,c;i[a]=s,s.timer=v1(u,0,s.time);function u(g){s.state=ny,s.timer.restart(f,s.delay,s.time),s.delay<=g&&f(g-s.delay)}function f(g){var y,x,b,S;if(s.state!==ny)return p();for(y in i)if(S=i[y],S.name===s.name){if(S.state===Cc)return ty(f);S.state===ay?(S.state=Tc,S.timer.stop(),S.on.call("interrupt",t,t.__data__,S.index,S.group),delete i[y]):+y<a&&(S.state=Tc,S.timer.stop(),S.on.call("cancel",t,t.__data__,S.index,S.group),delete i[y])}if(ty(function(){s.state===Cc&&(s.state=ay,s.timer.restart(m,s.delay,s.time),m(g))}),s.state=_h,s.on.call("start",t,t.__data__,s.index,s.group),s.state===_h){for(s.state=Cc,c=new Array(b=s.tween.length),y=0,x=-1;y<b;++y)(S=s.tween[y].value.call(t,t.__data__,s.index,s.group))&&(c[++x]=S);c.length=x+1}}function m(g){for(var y=g<s.duration?s.ease.call(null,g/s.duration):(s.timer.restart(p),s.state=Eh,1),x=-1,b=c.length;++x<b;)c[x].call(t,y);s.state===Eh&&(s.on.call("end",t,t.__data__,s.index,s.group),p())}function p(){s.state=Tc,s.timer.stop(),delete i[a];for(var g in i)return;delete t.__transition}}function Mc(t,a){var s=t.__transition,i,c,u=!0,f;if(s){a=a==null?null:a+"";for(f in s){if((i=s[f]).name!==a){u=!1;continue}c=i.state>_h&&i.state<Eh,i.state=Tc,i.timer.stop(),i.on.call(c?"interrupt":"cancel",t,t.__data__,i.index,i.group),delete s[f]}u&&delete t.__transition}}function Q6(t){return this.each(function(){Mc(this,t)})}function Z6(t,a){var s,i;return function(){var c=$n(this,t),u=c.tween;if(u!==s){i=s=u;for(var f=0,m=i.length;f<m;++f)if(i[f].name===a){i=i.slice(),i.splice(f,1);break}}c.tween=i}}function F6(t,a,s){var i,c;if(typeof s!="function")throw new Error;return function(){var u=$n(this,t),f=u.tween;if(f!==i){c=(i=f).slice();for(var m={name:a,value:s},p=0,g=c.length;p<g;++p)if(c[p].name===a){c[p]=m;break}p===g&&c.push(m)}u.tween=c}}function W6(t,a){var s=this._id;if(t+="",arguments.length<2){for(var i=Nn(this.node(),s).tween,c=0,u=i.length,f;c<u;++c)if((f=i[c]).name===t)return f.value;return null}return this.each((a==null?Z6:F6)(s,t,a))}function lm(t,a,s){var i=t._id;return t.each(function(){var c=$n(this,i);(c.value||(c.value={}))[a]=s.apply(this,arguments)}),function(c){return Nn(c,i).value[a]}}function j1(t,a){var s;return(typeof a=="number"?zn:a instanceof Os?qc:(s=Os(a))?(a=s,qc):p1)(t,a)}function K6(t){return function(){this.removeAttribute(t)}}function J6(t){return function(){this.removeAttributeNS(t.space,t.local)}}function eC(t,a,s){var i,c=s+"",u;return function(){var f=this.getAttribute(t);return f===c?null:f===i?u:u=a(i=f,s)}}function tC(t,a,s){var i,c=s+"",u;return function(){var f=this.getAttributeNS(t.space,t.local);return f===c?null:f===i?u:u=a(i=f,s)}}function nC(t,a,s){var i,c,u;return function(){var f,m=s(this),p;return m==null?void this.removeAttribute(t):(f=this.getAttribute(t),p=m+"",f===p?null:f===i&&p===c?u:(c=p,u=a(i=f,m)))}}function aC(t,a,s){var i,c,u;return function(){var f,m=s(this),p;return m==null?void this.removeAttributeNS(t.space,t.local):(f=this.getAttributeNS(t.space,t.local),p=m+"",f===p?null:f===i&&p===c?u:(c=p,u=a(i=f,m)))}}function sC(t,a){var s=ru(t),i=s==="transform"?L6:j1;return this.attrTween(t,typeof a=="function"?(s.local?aC:nC)(s,i,lm(this,"attr."+t,a)):a==null?(s.local?J6:K6)(s):(s.local?tC:eC)(s,i,a))}function rC(t,a){return function(s){this.setAttribute(t,a.call(this,s))}}function iC(t,a){return function(s){this.setAttributeNS(t.space,t.local,a.call(this,s))}}function oC(t,a){var s,i;function c(){var u=a.apply(this,arguments);return u!==i&&(s=(i=u)&&iC(t,u)),s}return c._value=a,c}function lC(t,a){var s,i;function c(){var u=a.apply(this,arguments);return u!==i&&(s=(i=u)&&rC(t,u)),s}return c._value=a,c}function cC(t,a){var s="attr."+t;if(arguments.length<2)return(s=this.tween(s))&&s._value;if(a==null)return this.tween(s,null);if(typeof a!="function")throw new Error;var i=ru(t);return this.tween(s,(i.local?oC:lC)(i,a))}function uC(t,a){return function(){om(this,t).delay=+a.apply(this,arguments)}}function dC(t,a){return a=+a,function(){om(this,t).delay=a}}function fC(t){var a=this._id;return arguments.length?this.each((typeof t=="function"?uC:dC)(a,t)):Nn(this.node(),a).delay}function hC(t,a){return function(){$n(this,t).duration=+a.apply(this,arguments)}}function mC(t,a){return a=+a,function(){$n(this,t).duration=a}}function pC(t){var a=this._id;return arguments.length?this.each((typeof t=="function"?hC:mC)(a,t)):Nn(this.node(),a).duration}function gC(t,a){if(typeof a!="function")throw new Error;return function(){$n(this,t).ease=a}}function xC(t){var a=this._id;return arguments.length?this.each(gC(a,t)):Nn(this.node(),a).ease}function yC(t,a){return function(){var s=a.apply(this,arguments);if(typeof s!="function")throw new Error;$n(this,t).ease=s}}function bC(t){if(typeof t!="function")throw new Error;return this.each(yC(this._id,t))}function vC(t){typeof t!="function"&&(t=Jb(t));for(var a=this._groups,s=a.length,i=new Array(s),c=0;c<s;++c)for(var u=a[c],f=u.length,m=i[c]=[],p,g=0;g<f;++g)(p=u[g])&&t.call(p,p.__data__,g,u)&&m.push(p);return new ya(i,this._parents,this._name,this._id)}function wC(t){if(t._id!==this._id)throw new Error;for(var a=this._groups,s=t._groups,i=a.length,c=s.length,u=Math.min(i,c),f=new Array(i),m=0;m<u;++m)for(var p=a[m],g=s[m],y=p.length,x=f[m]=new Array(y),b,S=0;S<y;++S)(b=p[S]||g[S])&&(x[S]=b);for(;m<i;++m)f[m]=a[m];return new ya(f,this._parents,this._name,this._id)}function jC(t){return(t+"").trim().split(/^|\s+/).every(function(a){var s=a.indexOf(".");return s>=0&&(a=a.slice(0,s)),!a||a==="start"})}function NC(t,a,s){var i,c,u=jC(a)?om:$n;return function(){var f=u(this,t),m=f.on;m!==i&&(c=(i=m).copy()).on(a,s),f.on=c}}function SC(t,a){var s=this._id;return arguments.length<2?Nn(this.node(),s).on.on(t):this.each(NC(s,t,a))}function _C(t){return function(){var a=this.parentNode;for(var s in this.__transition)if(+s!==t)return;a&&a.removeChild(this)}}function EC(){return this.on("end.remove",_C(this._id))}function CC(t){var a=this._name,s=this._id;typeof t!="function"&&(t=nm(t));for(var i=this._groups,c=i.length,u=new Array(c),f=0;f<c;++f)for(var m=i[f],p=m.length,g=u[f]=new Array(p),y,x,b=0;b<p;++b)(y=m[b])&&(x=t.call(y,y.__data__,b,m))&&("__data__"in y&&(x.__data__=y.__data__),g[b]=x,ou(g[b],a,s,b,g,Nn(y,s)));return new ya(u,this._parents,a,s)}function TC(t){var a=this._name,s=this._id;typeof t!="function"&&(t=Kb(t));for(var i=this._groups,c=i.length,u=[],f=[],m=0;m<c;++m)for(var p=i[m],g=p.length,y,x=0;x<g;++x)if(y=p[x]){for(var b=t.call(y,y.__data__,x,p),S,_=Nn(y,s),C=0,N=b.length;C<N;++C)(S=b[C])&&ou(S,a,s,C,b,_);u.push(b),f.push(y)}return new ya(u,f,a,s)}var MC=_o.prototype.constructor;function AC(){return new MC(this._groups,this._parents)}function kC(t,a){var s,i,c;return function(){var u=$r(this,t),f=(this.style.removeProperty(t),$r(this,t));return u===f?null:u===s&&f===i?c:c=a(s=u,i=f)}}function N1(t){return function(){this.style.removeProperty(t)}}function zC(t,a,s){var i,c=s+"",u;return function(){var f=$r(this,t);return f===c?null:f===i?u:u=a(i=f,s)}}function RC(t,a,s){var i,c,u;return function(){var f=$r(this,t),m=s(this),p=m+"";return m==null&&(p=m=(this.style.removeProperty(t),$r(this,t))),f===p?null:f===i&&p===c?u:(c=p,u=a(i=f,m))}}function DC(t,a){var s,i,c,u="style."+a,f="end."+u,m;return function(){var p=$n(this,t),g=p.on,y=p.value[u]==null?m||(m=N1(a)):void 0;(g!==s||c!==y)&&(i=(s=g).copy()).on(f,c=y),p.on=i}}function OC(t,a,s){var i=(t+="")=="transform"?B6:j1;return a==null?this.styleTween(t,kC(t,i)).on("end.style."+t,N1(t)):typeof a=="function"?this.styleTween(t,RC(t,i,lm(this,"style."+t,a))).each(DC(this._id,t)):this.styleTween(t,zC(t,i,a),s).on("end.style."+t,null)}function BC(t,a,s){return function(i){this.style.setProperty(t,a.call(this,i),s)}}function LC(t,a,s){var i,c;function u(){var f=a.apply(this,arguments);return f!==c&&(i=(c=f)&&BC(t,f,s)),i}return u._value=a,u}function HC(t,a,s){var i="style."+(t+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(a==null)return this.tween(i,null);if(typeof a!="function")throw new Error;return this.tween(i,LC(t,a,s??""))}function $C(t){return function(){this.textContent=t}}function UC(t){return function(){var a=t(this);this.textContent=a??""}}function qC(t){return this.tween("text",typeof t=="function"?UC(lm(this,"text",t)):$C(t==null?"":t+""))}function VC(t){return function(a){this.textContent=t.call(this,a)}}function YC(t){var a,s;function i(){var c=t.apply(this,arguments);return c!==s&&(a=(s=c)&&VC(c)),a}return i._value=t,i}function PC(t){var a="text";if(arguments.length<1)return(a=this.tween(a))&&a._value;if(t==null)return this.tween(a,null);if(typeof t!="function")throw new Error;return this.tween(a,YC(t))}function XC(){for(var t=this._name,a=this._id,s=S1(),i=this._groups,c=i.length,u=0;u<c;++u)for(var f=i[u],m=f.length,p,g=0;g<m;++g)if(p=f[g]){var y=Nn(p,a);ou(p,t,s,g,f,{time:y.time+y.delay+y.duration,delay:0,duration:y.duration,ease:y.ease})}return new ya(i,this._parents,t,s)}function IC(){var t,a,s=this,i=s._id,c=s.size();return new Promise(function(u,f){var m={value:f},p={value:function(){--c===0&&u()}};s.each(function(){var g=$n(this,i),y=g.on;y!==t&&(a=(t=y).copy(),a._.cancel.push(m),a._.interrupt.push(m),a._.end.push(p)),g.on=a}),c===0&&u()})}var GC=0;function ya(t,a,s,i){this._groups=t,this._parents=a,this._name=s,this._id=i}function S1(){return++GC}var da=_o.prototype;ya.prototype={constructor:ya,select:CC,selectAll:TC,selectChild:da.selectChild,selectChildren:da.selectChildren,filter:vC,merge:wC,selection:AC,transition:XC,call:da.call,nodes:da.nodes,node:da.node,size:da.size,empty:da.empty,each:da.each,on:SC,attr:sC,attrTween:cC,style:OC,styleTween:HC,text:qC,textTween:PC,remove:EC,tween:W6,delay:fC,duration:pC,ease:xC,easeVarying:bC,end:IC,[Symbol.iterator]:da[Symbol.iterator]};function QC(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var ZC={time:null,delay:0,duration:250,ease:QC};function FC(t,a){for(var s;!(s=t.__transition)||!(s=s[a]);)if(!(t=t.parentNode))throw new Error(`transition ${a} not found`);return s}function WC(t){var a,s;t instanceof ya?(a=t._id,t=t._name):(a=S1(),(s=ZC).time=im(),t=t==null?null:t+"");for(var i=this._groups,c=i.length,u=0;u<c;++u)for(var f=i[u],m=f.length,p,g=0;g<m;++g)(p=f[g])&&ou(p,t,a,g,f,s||FC(p,a));return new ya(i,this._parents,t,a)}_o.prototype.interrupt=Q6;_o.prototype.transition=WC;const uc=t=>()=>t;function KC(t,{sourceEvent:a,target:s,transform:i,dispatch:c}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:a,enumerable:!0,configurable:!0},target:{value:s,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:c}})}function ha(t,a,s){this.k=t,this.x=a,this.y=s}ha.prototype={constructor:ha,scale:function(t){return t===1?this:new ha(this.k*t,this.x,this.y)},translate:function(t,a){return t===0&a===0?this:new ha(this.k,this.x+this.k*t,this.y+this.k*a)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var lu=new ha(1,0,0);_1.prototype=ha.prototype;function _1(t){for(;!t.__zoom;)if(!(t=t.parentNode))return lu;return t.__zoom}function Qf(t){t.stopImmediatePropagation()}function Ki(t){t.preventDefault(),t.stopImmediatePropagation()}function JC(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function e8(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function sy(){return this.__zoom||lu}function t8(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function n8(){return navigator.maxTouchPoints||"ontouchstart"in this}function a8(t,a,s){var i=t.invertX(a[0][0])-s[0][0],c=t.invertX(a[1][0])-s[1][0],u=t.invertY(a[0][1])-s[0][1],f=t.invertY(a[1][1])-s[1][1];return t.translate(c>i?(i+c)/2:Math.min(0,i)||Math.max(0,c),f>u?(u+f)/2:Math.min(0,u)||Math.max(0,f))}function E1(){var t=JC,a=e8,s=a8,i=t8,c=n8,u=[0,1/0],f=[[-1/0,-1/0],[1/0,1/0]],m=250,p=Ec,g=su("start","zoom","end"),y,x,b,S=500,_=150,C=0,N=10;function E(q){q.property("__zoom",sy).on("wheel.zoom",U,{passive:!1}).on("mousedown.zoom",L).on("dblclick.zoom",Q).filter(c).on("touchstart.zoom",G).on("touchmove.zoom",F).on("touchend.zoom touchcancel.zoom",se).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}E.transform=function(q,I,B,D){var Y=q.selection?q.selection():q;Y.property("__zoom",sy),q!==Y?w(q,I,B,D):Y.interrupt().each(function(){R(this,arguments).event(D).start().zoom(null,typeof I=="function"?I.apply(this,arguments):I).end()})},E.scaleBy=function(q,I,B,D){E.scaleTo(q,function(){var Y=this.__zoom.k,H=typeof I=="function"?I.apply(this,arguments):I;return Y*H},B,D)},E.scaleTo=function(q,I,B,D){E.transform(q,function(){var Y=a.apply(this,arguments),H=this.__zoom,W=B==null?k(Y):typeof B=="function"?B.apply(this,arguments):B,O=H.invert(W),P=typeof I=="function"?I.apply(this,arguments):I;return s(T(z(H,P),W,O),Y,f)},B,D)},E.translateBy=function(q,I,B,D){E.transform(q,function(){return s(this.__zoom.translate(typeof I=="function"?I.apply(this,arguments):I,typeof B=="function"?B.apply(this,arguments):B),a.apply(this,arguments),f)},null,D)},E.translateTo=function(q,I,B,D,Y){E.transform(q,function(){var H=a.apply(this,arguments),W=this.__zoom,O=D==null?k(H):typeof D=="function"?D.apply(this,arguments):D;return s(lu.translate(O[0],O[1]).scale(W.k).translate(typeof I=="function"?-I.apply(this,arguments):-I,typeof B=="function"?-B.apply(this,arguments):-B),H,f)},D,Y)};function z(q,I){return I=Math.max(u[0],Math.min(u[1],I)),I===q.k?q:new ha(I,q.x,q.y)}function T(q,I,B){var D=I[0]-B[0]*q.k,Y=I[1]-B[1]*q.k;return D===q.x&&Y===q.y?q:new ha(q.k,D,Y)}function k(q){return[(+q[0][0]+ +q[1][0])/2,(+q[0][1]+ +q[1][1])/2]}function w(q,I,B,D){q.on("start.zoom",function(){R(this,arguments).event(D).start()}).on("interrupt.zoom end.zoom",function(){R(this,arguments).event(D).end()}).tween("zoom",function(){var Y=this,H=arguments,W=R(Y,H).event(D),O=a.apply(Y,H),P=B==null?k(O):typeof B=="function"?B.apply(Y,H):B,te=Math.max(O[1][0]-O[0][0],O[1][1]-O[0][1]),ae=Y.__zoom,re=typeof I=="function"?I.apply(Y,H):I,de=p(ae.invert(P).concat(te/ae.k),re.invert(P).concat(te/re.k));return function(ue){if(ue===1)ue=re;else{var $=de(ue),ce=te/$[2];ue=new ha(ce,P[0]-$[0]*ce,P[1]-$[1]*ce)}W.zoom(null,ue)}})}function R(q,I,B){return!B&&q.__zooming||new M(q,I)}function M(q,I){this.that=q,this.args=I,this.active=0,this.sourceEvent=null,this.extent=a.apply(q,I),this.taps=0}M.prototype={event:function(q){return q&&(this.sourceEvent=q),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(q,I){return this.mouse&&q!=="mouse"&&(this.mouse[1]=I.invert(this.mouse[0])),this.touch0&&q!=="touch"&&(this.touch0[1]=I.invert(this.touch0[0])),this.touch1&&q!=="touch"&&(this.touch1[1]=I.invert(this.touch1[0])),this.that.__zoom=I,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(q){var I=It(this.that).datum();g.call(q,this.that,new KC(q,{sourceEvent:this.sourceEvent,target:E,transform:this.that.__zoom,dispatch:g}),I)}};function U(q,...I){if(!t.apply(this,arguments))return;var B=R(this,I).event(q),D=this.__zoom,Y=Math.max(u[0],Math.min(u[1],D.k*Math.pow(2,i.apply(this,arguments)))),H=yn(q);if(B.wheel)(B.mouse[0][0]!==H[0]||B.mouse[0][1]!==H[1])&&(B.mouse[1]=D.invert(B.mouse[0]=H)),clearTimeout(B.wheel);else{if(D.k===Y)return;B.mouse=[H,D.invert(H)],Mc(this),B.start()}Ki(q),B.wheel=setTimeout(W,_),B.zoom("mouse",s(T(z(D,Y),B.mouse[0],B.mouse[1]),B.extent,f));function W(){B.wheel=null,B.end()}}function L(q,...I){if(b||!t.apply(this,arguments))return;var B=q.currentTarget,D=R(this,I,!0).event(q),Y=It(q.view).on("mousemove.zoom",P,!0).on("mouseup.zoom",te,!0),H=yn(q,B),W=q.clientX,O=q.clientY;c1(q.view),Qf(q),D.mouse=[H,this.__zoom.invert(H)],Mc(this),D.start();function P(ae){if(Ki(ae),!D.moved){var re=ae.clientX-W,de=ae.clientY-O;D.moved=re*re+de*de>C}D.event(ae).zoom("mouse",s(T(D.that.__zoom,D.mouse[0]=yn(ae,B),D.mouse[1]),D.extent,f))}function te(ae){Y.on("mousemove.zoom mouseup.zoom",null),u1(ae.view,D.moved),Ki(ae),D.event(ae).end()}}function Q(q,...I){if(t.apply(this,arguments)){var B=this.__zoom,D=yn(q.changedTouches?q.changedTouches[0]:q,this),Y=B.invert(D),H=B.k*(q.shiftKey?.5:2),W=s(T(z(B,H),D,Y),a.apply(this,I),f);Ki(q),m>0?It(this).transition().duration(m).call(w,W,D,q):It(this).call(E.transform,W,D,q)}}function G(q,...I){if(t.apply(this,arguments)){var B=q.touches,D=B.length,Y=R(this,I,q.changedTouches.length===D).event(q),H,W,O,P;for(Qf(q),W=0;W<D;++W)O=B[W],P=yn(O,this),P=[P,this.__zoom.invert(P),O.identifier],Y.touch0?!Y.touch1&&Y.touch0[2]!==P[2]&&(Y.touch1=P,Y.taps=0):(Y.touch0=P,H=!0,Y.taps=1+!!y);y&&(y=clearTimeout(y)),H&&(Y.taps<2&&(x=P[0],y=setTimeout(function(){y=null},S)),Mc(this),Y.start())}}function F(q,...I){if(this.__zooming){var B=R(this,I).event(q),D=q.changedTouches,Y=D.length,H,W,O,P;for(Ki(q),H=0;H<Y;++H)W=D[H],O=yn(W,this),B.touch0&&B.touch0[2]===W.identifier?B.touch0[0]=O:B.touch1&&B.touch1[2]===W.identifier&&(B.touch1[0]=O);if(W=B.that.__zoom,B.touch1){var te=B.touch0[0],ae=B.touch0[1],re=B.touch1[0],de=B.touch1[1],ue=(ue=re[0]-te[0])*ue+(ue=re[1]-te[1])*ue,$=($=de[0]-ae[0])*$+($=de[1]-ae[1])*$;W=z(W,Math.sqrt(ue/$)),O=[(te[0]+re[0])/2,(te[1]+re[1])/2],P=[(ae[0]+de[0])/2,(ae[1]+de[1])/2]}else if(B.touch0)O=B.touch0[0],P=B.touch0[1];else return;B.zoom("touch",s(T(W,O,P),B.extent,f))}}function se(q,...I){if(this.__zooming){var B=R(this,I).event(q),D=q.changedTouches,Y=D.length,H,W;for(Qf(q),b&&clearTimeout(b),b=setTimeout(function(){b=null},S),H=0;H<Y;++H)W=D[H],B.touch0&&B.touch0[2]===W.identifier?delete B.touch0:B.touch1&&B.touch1[2]===W.identifier&&delete B.touch1;if(B.touch1&&!B.touch0&&(B.touch0=B.touch1,delete B.touch1),B.touch0)B.touch0[1]=this.__zoom.invert(B.touch0[0]);else if(B.end(),B.taps===2&&(W=yn(W,this),Math.hypot(x[0]-W[0],x[1]-W[1])<N)){var O=It(this).on("dblclick.zoom");O&&O.apply(this,arguments)}}}return E.wheelDelta=function(q){return arguments.length?(i=typeof q=="function"?q:uc(+q),E):i},E.filter=function(q){return arguments.length?(t=typeof q=="function"?q:uc(!!q),E):t},E.touchable=function(q){return arguments.length?(c=typeof q=="function"?q:uc(!!q),E):c},E.extent=function(q){return arguments.length?(a=typeof q=="function"?q:uc([[+q[0][0],+q[0][1]],[+q[1][0],+q[1][1]]]),E):a},E.scaleExtent=function(q){return arguments.length?(u[0]=+q[0],u[1]=+q[1],E):[u[0],u[1]]},E.translateExtent=function(q){return arguments.length?(f[0][0]=+q[0][0],f[1][0]=+q[1][0],f[0][1]=+q[0][1],f[1][1]=+q[1][1],E):[[f[0][0],f[0][1]],[f[1][0],f[1][1]]]},E.constrain=function(q){return arguments.length?(s=q,E):s},E.duration=function(q){return arguments.length?(m=+q,E):m},E.interpolate=function(q){return arguments.length?(p=q,E):p},E.on=function(){var q=g.on.apply(g,arguments);return q===g?E:q},E.clickDistance=function(q){return arguments.length?(C=(q=+q)*q,E):Math.sqrt(C)},E.tapDistance=function(q){return arguments.length?(N=+q,E):N},E}const Hn={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:t=>`Node type "${t}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:t=>`The old edge with id=${t} does not exist.`,error009:t=>`Marker type "${t}" doesn't exist.`,error008:(t,{id:a,sourceHandle:s,targetHandle:i})=>`Couldn't create edge for ${t} handle id: "${t==="source"?s:i}", edge id: ${a}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:t=>`Edge type "${t}" not found. Using fallback type "default".`,error012:t=>`Node with id "${t}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(t="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${t}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",error015:()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."},ho=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],C1=["Enter"," ","Escape"],T1={"node.a11yDescription.default":"Press enter or space to select a node. Press delete to remove it and escape to cancel.","node.a11yDescription.keyboardDisabled":"Press enter or space to select a node. You can then use the arrow keys to move the node around. Press delete to remove it and escape to cancel.","node.a11yDescription.ariaLiveMessage":({direction:t,x:a,y:s})=>`Moved selected node ${t}. New position, x: ${a}, y: ${s}`,"edge.a11yDescription.default":"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel.","controls.ariaLabel":"Control Panel","controls.zoomIn.ariaLabel":"Zoom In","controls.zoomOut.ariaLabel":"Zoom Out","controls.fitView.ariaLabel":"Fit View","controls.interactive.ariaLabel":"Toggle Interactivity","minimap.ariaLabel":"Mini Map","handle.ariaLabel":"Handle"};var qr;(function(t){t.Strict="strict",t.Loose="loose"})(qr||(qr={}));var Rs;(function(t){t.Free="free",t.Vertical="vertical",t.Horizontal="horizontal"})(Rs||(Rs={}));var mo;(function(t){t.Partial="partial",t.Full="full"})(mo||(mo={}));const M1={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null,pointer:null};var Ja;(function(t){t.Bezier="default",t.Straight="straight",t.Step="step",t.SmoothStep="smoothstep",t.SimpleBezier="simplebezier"})(Ja||(Ja={}));var Xc;(function(t){t.Arrow="arrow",t.ArrowClosed="arrowclosed"})(Xc||(Xc={}));var ge;(function(t){t.Left="left",t.Top="top",t.Right="right",t.Bottom="bottom"})(ge||(ge={}));const ry={[ge.Left]:ge.Right,[ge.Right]:ge.Left,[ge.Top]:ge.Bottom,[ge.Bottom]:ge.Top};function A1(t){return t===null?null:t?"valid":"invalid"}const k1=t=>"id"in t&&"source"in t&&"target"in t,s8=t=>"id"in t&&"position"in t&&!("source"in t)&&!("target"in t),cm=t=>"id"in t&&"internals"in t&&!("source"in t)&&!("target"in t),Co=(t,a=[0,0])=>{const{width:s,height:i}=wa(t),c=t.origin??a,u=s*c[0],f=i*c[1];return{x:t.position.x-u,y:t.position.y-f}},r8=(t,a={nodeOrigin:[0,0]})=>{if(t.length===0)return{x:0,y:0,width:0,height:0};const s=t.reduce((i,c)=>{const u=typeof c=="string";let f=!a.nodeLookup&&!u?c:void 0;a.nodeLookup&&(f=u?a.nodeLookup.get(c):cm(c)?c:a.nodeLookup.get(c.id));const m=f?Ic(f,a.nodeOrigin):{x:0,y:0,x2:0,y2:0};return cu(i,m)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return uu(s)},To=(t,a={})=>{let s={x:1/0,y:1/0,x2:-1/0,y2:-1/0},i=!1;return t.forEach(c=>{(a.filter===void 0||a.filter(c))&&(s=cu(s,Ic(c)),i=!0)}),i?uu(s):{x:0,y:0,width:0,height:0}},um=(t,a,[s,i,c]=[0,0,1],u=!1,f=!1)=>{const m={...Ao(a,[s,i,c]),width:a.width/c,height:a.height/c},p=[];for(const g of t.values()){const{measured:y,selectable:x=!0,hidden:b=!1}=g;if(f&&!x||b)continue;const S=y.width??g.width??g.initialWidth??null,_=y.height??g.height??g.initialHeight??null,C=po(m,Yr(g)),N=(S??0)*(_??0),E=u&&C>0;(!g.internals.handleBounds||E||C>=N||g.dragging)&&p.push(g)}return p},i8=(t,a)=>{const s=new Set;return t.forEach(i=>{s.add(i.id)}),a.filter(i=>s.has(i.source)||s.has(i.target))};function o8(t,a){const s=new Map,i=a?.nodes?new Set(a.nodes.map(c=>c.id)):null;return t.forEach(c=>{c.measured.width&&c.measured.height&&(a?.includeHiddenNodes||!c.hidden)&&(!i||i.has(c.id))&&s.set(c.id,c)}),s}async function l8({nodes:t,width:a,height:s,panZoom:i,minZoom:c,maxZoom:u},f){if(t.size===0)return Promise.resolve(!0);const m=o8(t,f),p=To(m),g=dm(p,a,s,f?.minZoom??c,f?.maxZoom??u,f?.padding??.1);return await i.setViewport(g,{duration:f?.duration,ease:f?.ease,interpolate:f?.interpolate}),Promise.resolve(!0)}function z1({nodeId:t,nextPosition:a,nodeLookup:s,nodeOrigin:i=[0,0],nodeExtent:c,onError:u}){const f=s.get(t),m=f.parentId?s.get(f.parentId):void 0,{x:p,y:g}=m?m.internals.positionAbsolute:{x:0,y:0},y=f.origin??i;let x=f.extent||c;if(f.extent==="parent"&&!f.expandParent)if(!m)u?.("005",Hn.error005());else{const S=m.measured.width,_=m.measured.height;S&&_&&(x=[[p,g],[p+S,g+_]])}else m&&Pr(f.extent)&&(x=[[f.extent[0][0]+p,f.extent[0][1]+g],[f.extent[1][0]+p,f.extent[1][1]+g]]);const b=Pr(x)?Ls(a,x,f.measured):a;return(f.measured.width===void 0||f.measured.height===void 0)&&u?.("015",Hn.error015()),{position:{x:b.x-p+(f.measured.width??0)*y[0],y:b.y-g+(f.measured.height??0)*y[1]},positionAbsolute:b}}async function c8({nodesToRemove:t=[],edgesToRemove:a=[],nodes:s,edges:i,onBeforeDelete:c}){const u=new Set(t.map(b=>b.id)),f=[];for(const b of s){if(b.deletable===!1)continue;const S=u.has(b.id),_=!S&&b.parentId&&f.find(C=>C.id===b.parentId);(S||_)&&f.push(b)}const m=new Set(a.map(b=>b.id)),p=i.filter(b=>b.deletable!==!1),y=i8(f,p);for(const b of p)m.has(b.id)&&!y.find(_=>_.id===b.id)&&y.push(b);if(!c)return{edges:y,nodes:f};const x=await c({nodes:f,edges:y});return typeof x=="boolean"?x?{edges:y,nodes:f}:{edges:[],nodes:[]}:x}const Vr=(t,a=0,s=1)=>Math.min(Math.max(t,a),s),Ls=(t={x:0,y:0},a,s)=>({x:Vr(t.x,a[0][0],a[1][0]-(s?.width??0)),y:Vr(t.y,a[0][1],a[1][1]-(s?.height??0))});function R1(t,a,s){const{width:i,height:c}=wa(s),{x:u,y:f}=s.internals.positionAbsolute;return Ls(t,[[u,f],[u+i,f+c]],a)}const iy=(t,a,s)=>t<a?Vr(Math.abs(t-a),1,a)/a:t>s?-Vr(Math.abs(t-s),1,a)/a:0,D1=(t,a,s=15,i=40)=>{const c=iy(t.x,i,a.width-i)*s,u=iy(t.y,i,a.height-i)*s;return[c,u]},cu=(t,a)=>({x:Math.min(t.x,a.x),y:Math.min(t.y,a.y),x2:Math.max(t.x2,a.x2),y2:Math.max(t.y2,a.y2)}),Ch=({x:t,y:a,width:s,height:i})=>({x:t,y:a,x2:t+s,y2:a+i}),uu=({x:t,y:a,x2:s,y2:i})=>({x:t,y:a,width:s-t,height:i-a}),Yr=(t,a=[0,0])=>{const{x:s,y:i}=cm(t)?t.internals.positionAbsolute:Co(t,a);return{x:s,y:i,width:t.measured?.width??t.width??t.initialWidth??0,height:t.measured?.height??t.height??t.initialHeight??0}},Ic=(t,a=[0,0])=>{const{x:s,y:i}=cm(t)?t.internals.positionAbsolute:Co(t,a);return{x:s,y:i,x2:s+(t.measured?.width??t.width??t.initialWidth??0),y2:i+(t.measured?.height??t.height??t.initialHeight??0)}},O1=(t,a)=>uu(cu(Ch(t),Ch(a))),po=(t,a)=>{const s=Math.max(0,Math.min(t.x+t.width,a.x+a.width)-Math.max(t.x,a.x)),i=Math.max(0,Math.min(t.y+t.height,a.y+a.height)-Math.max(t.y,a.y));return Math.ceil(s*i)},oy=t=>wn(t.width)&&wn(t.height)&&wn(t.x)&&wn(t.y),wn=t=>!isNaN(t)&&isFinite(t),u8=(t,a)=>{},Mo=(t,a=[1,1])=>({x:a[0]*Math.round(t.x/a[0]),y:a[1]*Math.round(t.y/a[1])}),Ao=({x:t,y:a},[s,i,c],u=!1,f=[1,1])=>{const m={x:(t-s)/c,y:(a-i)/c};return u?Mo(m,f):m},Gc=({x:t,y:a},[s,i,c])=>({x:t*c+s,y:a*c+i});function Cr(t,a){if(typeof t=="number")return Math.floor((a-a/(1+t))*.5);if(typeof t=="string"&&t.endsWith("px")){const s=parseFloat(t);if(!Number.isNaN(s))return Math.floor(s)}if(typeof t=="string"&&t.endsWith("%")){const s=parseFloat(t);if(!Number.isNaN(s))return Math.floor(a*s*.01)}return console.error(`[React Flow] The padding value "${t}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function d8(t,a,s){if(typeof t=="string"||typeof t=="number"){const i=Cr(t,s),c=Cr(t,a);return{top:i,right:c,bottom:i,left:c,x:c*2,y:i*2}}if(typeof t=="object"){const i=Cr(t.top??t.y??0,s),c=Cr(t.bottom??t.y??0,s),u=Cr(t.left??t.x??0,a),f=Cr(t.right??t.x??0,a);return{top:i,right:f,bottom:c,left:u,x:u+f,y:i+c}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function f8(t,a,s,i,c,u){const{x:f,y:m}=Gc(t,[a,s,i]),{x:p,y:g}=Gc({x:t.x+t.width,y:t.y+t.height},[a,s,i]),y=c-p,x=u-g;return{left:Math.floor(f),top:Math.floor(m),right:Math.floor(y),bottom:Math.floor(x)}}const dm=(t,a,s,i,c,u)=>{const f=d8(u,a,s),m=(a-f.x)/t.width,p=(s-f.y)/t.height,g=Math.min(m,p),y=Vr(g,i,c),x=t.x+t.width/2,b=t.y+t.height/2,S=a/2-x*y,_=s/2-b*y,C=f8(t,S,_,y,a,s),N={left:Math.min(C.left-f.left,0),top:Math.min(C.top-f.top,0),right:Math.min(C.right-f.right,0),bottom:Math.min(C.bottom-f.bottom,0)};return{x:S-N.left+N.right,y:_-N.top+N.bottom,zoom:y}},go=()=>typeof navigator<"u"&&navigator?.userAgent?.indexOf("Mac")>=0;function Pr(t){return t!=null&&t!=="parent"}function wa(t){return{width:t.measured?.width??t.width??t.initialWidth??0,height:t.measured?.height??t.height??t.initialHeight??0}}function B1(t){return(t.measured?.width??t.width??t.initialWidth)!==void 0&&(t.measured?.height??t.height??t.initialHeight)!==void 0}function L1(t,a={width:0,height:0},s,i,c){const u={...t},f=i.get(s);if(f){const m=f.origin||c;u.x+=f.internals.positionAbsolute.x-(a.width??0)*m[0],u.y+=f.internals.positionAbsolute.y-(a.height??0)*m[1]}return u}function ly(t,a){if(t.size!==a.size)return!1;for(const s of t)if(!a.has(s))return!1;return!0}function h8(){let t,a;return{promise:new Promise((i,c)=>{t=i,a=c}),resolve:t,reject:a}}function m8(t){return{...T1,...t||{}}}function ro(t,{snapGrid:a=[0,0],snapToGrid:s=!1,transform:i,containerBounds:c}){const{x:u,y:f}=jn(t),m=Ao({x:u-(c?.left??0),y:f-(c?.top??0)},i),{x:p,y:g}=s?Mo(m,a):m;return{xSnapped:p,ySnapped:g,...m}}const fm=t=>({width:t.offsetWidth,height:t.offsetHeight}),H1=t=>t?.getRootNode?.()||window?.document,p8=["INPUT","SELECT","TEXTAREA"];function $1(t){const a=t.composedPath?.()?.[0]||t.target;return a?.nodeType!==1?!1:p8.includes(a.nodeName)||a.hasAttribute("contenteditable")||!!a.closest(".nokey")}const U1=t=>"clientX"in t,jn=(t,a)=>{const s=U1(t),i=s?t.clientX:t.touches?.[0].clientX,c=s?t.clientY:t.touches?.[0].clientY;return{x:i-(a?.left??0),y:c-(a?.top??0)}},cy=(t,a,s,i,c)=>{const u=a.querySelectorAll(`.${t}`);return!u||!u.length?null:Array.from(u).map(f=>{const m=f.getBoundingClientRect();return{id:f.getAttribute("data-handleid"),type:t,nodeId:c,position:f.getAttribute("data-handlepos"),x:(m.left-s.left)/i,y:(m.top-s.top)/i,...fm(f)}})};function q1({sourceX:t,sourceY:a,targetX:s,targetY:i,sourceControlX:c,sourceControlY:u,targetControlX:f,targetControlY:m}){const p=t*.125+c*.375+f*.375+s*.125,g=a*.125+u*.375+m*.375+i*.125,y=Math.abs(p-t),x=Math.abs(g-a);return[p,g,y,x]}function dc(t,a){return t>=0?.5*t:a*25*Math.sqrt(-t)}function uy({pos:t,x1:a,y1:s,x2:i,y2:c,c:u}){switch(t){case ge.Left:return[a-dc(a-i,u),s];case ge.Right:return[a+dc(i-a,u),s];case ge.Top:return[a,s-dc(s-c,u)];case ge.Bottom:return[a,s+dc(c-s,u)]}}function V1({sourceX:t,sourceY:a,sourcePosition:s=ge.Bottom,targetX:i,targetY:c,targetPosition:u=ge.Top,curvature:f=.25}){const[m,p]=uy({pos:s,x1:t,y1:a,x2:i,y2:c,c:f}),[g,y]=uy({pos:u,x1:i,y1:c,x2:t,y2:a,c:f}),[x,b,S,_]=q1({sourceX:t,sourceY:a,targetX:i,targetY:c,sourceControlX:m,sourceControlY:p,targetControlX:g,targetControlY:y});return[`M${t},${a} C${m},${p} ${g},${y} ${i},${c}`,x,b,S,_]}function Y1({sourceX:t,sourceY:a,targetX:s,targetY:i}){const c=Math.abs(s-t)/2,u=s<t?s+c:s-c,f=Math.abs(i-a)/2,m=i<a?i+f:i-f;return[u,m,c,f]}function g8({sourceNode:t,targetNode:a,selected:s=!1,zIndex:i=0,elevateOnSelect:c=!1,zIndexMode:u="basic"}){if(u==="manual")return i;const f=c&&s?i+1e3:i,m=Math.max(t.parentId||c&&t.selected?t.internals.z:0,a.parentId||c&&a.selected?a.internals.z:0);return f+m}function x8({sourceNode:t,targetNode:a,width:s,height:i,transform:c}){const u=cu(Ic(t),Ic(a));u.x===u.x2&&(u.x2+=1),u.y===u.y2&&(u.y2+=1);const f={x:-c[0]/c[2],y:-c[1]/c[2],width:s/c[2],height:i/c[2]};return po(f,uu(u))>0}const y8=({source:t,sourceHandle:a,target:s,targetHandle:i})=>`xy-edge__${t}${a||""}-${s}${i||""}`,b8=(t,a)=>a.some(s=>s.source===t.source&&s.target===t.target&&(s.sourceHandle===t.sourceHandle||!s.sourceHandle&&!t.sourceHandle)&&(s.targetHandle===t.targetHandle||!s.targetHandle&&!t.targetHandle)),P1=(t,a,s={})=>{if(!t.source||!t.target)return a;const i=s.getEdgeId||y8;let c;return k1(t)?c={...t}:c={...t,id:i(t)},b8(c,a)?a:(c.sourceHandle===null&&delete c.sourceHandle,c.targetHandle===null&&delete c.targetHandle,a.concat(c))};function X1({sourceX:t,sourceY:a,targetX:s,targetY:i}){const[c,u,f,m]=Y1({sourceX:t,sourceY:a,targetX:s,targetY:i});return[`M ${t},${a}L ${s},${i}`,c,u,f,m]}const dy={[ge.Left]:{x:-1,y:0},[ge.Right]:{x:1,y:0},[ge.Top]:{x:0,y:-1},[ge.Bottom]:{x:0,y:1}},v8=({source:t,sourcePosition:a=ge.Bottom,target:s})=>a===ge.Left||a===ge.Right?t.x<s.x?{x:1,y:0}:{x:-1,y:0}:t.y<s.y?{x:0,y:1}:{x:0,y:-1},fy=(t,a)=>Math.sqrt(Math.pow(a.x-t.x,2)+Math.pow(a.y-t.y,2));function w8({source:t,sourcePosition:a=ge.Bottom,target:s,targetPosition:i=ge.Top,center:c,offset:u,stepPosition:f}){const m=dy[a],p=dy[i],g={x:t.x+m.x*u,y:t.y+m.y*u},y={x:s.x+p.x*u,y:s.y+p.y*u},x=v8({source:g,sourcePosition:a,target:y}),b=x.x!==0?"x":"y",S=x[b];let _=[],C,N;const E={x:0,y:0},z={x:0,y:0},[,,T,k]=Y1({sourceX:t.x,sourceY:t.y,targetX:s.x,targetY:s.y});if(m[b]*p[b]===-1){b==="x"?(C=c.x??g.x+(y.x-g.x)*f,N=c.y??(g.y+y.y)/2):(C=c.x??(g.x+y.x)/2,N=c.y??g.y+(y.y-g.y)*f);const R=[{x:C,y:g.y},{x:C,y:y.y}],M=[{x:g.x,y:N},{x:y.x,y:N}];m[b]===S?_=b==="x"?R:M:_=b==="x"?M:R}else{const R=[{x:g.x,y:y.y}],M=[{x:y.x,y:g.y}];if(b==="x"?_=m.x===S?M:R:_=m.y===S?R:M,a===i){const F=Math.abs(t[b]-s[b]);if(F<=u){const se=Math.min(u-1,u-F);m[b]===S?E[b]=(g[b]>t[b]?-1:1)*se:z[b]=(y[b]>s[b]?-1:1)*se}}if(a!==i){const F=b==="x"?"y":"x",se=m[b]===p[F],q=g[F]>y[F],I=g[F]<y[F];(m[b]===1&&(!se&&q||se&&I)||m[b]!==1&&(!se&&I||se&&q))&&(_=b==="x"?R:M)}const U={x:g.x+E.x,y:g.y+E.y},L={x:y.x+z.x,y:y.y+z.y},Q=Math.max(Math.abs(U.x-_[0].x),Math.abs(L.x-_[0].x)),G=Math.max(Math.abs(U.y-_[0].y),Math.abs(L.y-_[0].y));Q>=G?(C=(U.x+L.x)/2,N=_[0].y):(C=_[0].x,N=(U.y+L.y)/2)}return[[t,{x:g.x+E.x,y:g.y+E.y},..._,{x:y.x+z.x,y:y.y+z.y},s],C,N,T,k]}function j8(t,a,s,i){const c=Math.min(fy(t,a)/2,fy(a,s)/2,i),{x:u,y:f}=a;if(t.x===u&&u===s.x||t.y===f&&f===s.y)return`L${u} ${f}`;if(t.y===f){const g=t.x<s.x?-1:1,y=t.y<s.y?1:-1;return`L ${u+c*g},${f}Q ${u},${f} ${u},${f+c*y}`}const m=t.x<s.x?1:-1,p=t.y<s.y?-1:1;return`L ${u},${f+c*p}Q ${u},${f} ${u+c*m},${f}`}function Th({sourceX:t,sourceY:a,sourcePosition:s=ge.Bottom,targetX:i,targetY:c,targetPosition:u=ge.Top,borderRadius:f=5,centerX:m,centerY:p,offset:g=20,stepPosition:y=.5}){const[x,b,S,_,C]=w8({source:{x:t,y:a},sourcePosition:s,target:{x:i,y:c},targetPosition:u,center:{x:m,y:p},offset:g,stepPosition:y});return[x.reduce((E,z,T)=>{let k="";return T>0&&T<x.length-1?k=j8(x[T-1],z,x[T+1],f):k=`${T===0?"M":"L"}${z.x} ${z.y}`,E+=k,E},""),b,S,_,C]}function hy(t){return t&&!!(t.internals.handleBounds||t.handles?.length)&&!!(t.measured.width||t.width||t.initialWidth)}function N8(t){const{sourceNode:a,targetNode:s}=t;if(!hy(a)||!hy(s))return null;const i=a.internals.handleBounds||my(a.handles),c=s.internals.handleBounds||my(s.handles),u=py(i?.source??[],t.sourceHandle),f=py(t.connectionMode===qr.Strict?c?.target??[]:(c?.target??[]).concat(c?.source??[]),t.targetHandle);if(!u||!f)return t.onError?.("008",Hn.error008(u?"target":"source",{id:t.id,sourceHandle:t.sourceHandle,targetHandle:t.targetHandle})),null;const m=u?.position||ge.Bottom,p=f?.position||ge.Top,g=Hs(a,u,m),y=Hs(s,f,p);return{sourceX:g.x,sourceY:g.y,targetX:y.x,targetY:y.y,sourcePosition:m,targetPosition:p}}function my(t){if(!t)return null;const a=[],s=[];for(const i of t)i.width=i.width??1,i.height=i.height??1,i.type==="source"?a.push(i):i.type==="target"&&s.push(i);return{source:a,target:s}}function Hs(t,a,s=ge.Left,i=!1){const c=(a?.x??0)+t.internals.positionAbsolute.x,u=(a?.y??0)+t.internals.positionAbsolute.y,{width:f,height:m}=a??wa(t);if(i)return{x:c+f/2,y:u+m/2};switch(a?.position??s){case ge.Top:return{x:c+f/2,y:u};case ge.Right:return{x:c+f,y:u+m/2};case ge.Bottom:return{x:c+f/2,y:u+m};case ge.Left:return{x:c,y:u+m/2}}}function py(t,a){return t&&(a?t.find(s=>s.id===a):t[0])||null}function Mh(t,a){return t?typeof t=="string"?t:`${a?`${a}__`:""}${Object.keys(t).sort().map(i=>`${i}=${t[i]}`).join("&")}`:""}function S8(t,{id:a,defaultColor:s,defaultMarkerStart:i,defaultMarkerEnd:c}){const u=new Set;return t.reduce((f,m)=>([m.markerStart||i,m.markerEnd||c].forEach(p=>{if(p&&typeof p=="object"){const g=Mh(p,a);u.has(g)||(f.push({id:g,color:p.color||s,...p}),u.add(g))}}),f),[]).sort((f,m)=>f.id.localeCompare(m.id))}const I1=1e3,_8=10,hm={nodeOrigin:[0,0],nodeExtent:ho,elevateNodesOnSelect:!0,zIndexMode:"basic",defaults:{}},E8={...hm,checkEquality:!0};function mm(t,a){const s={...t};for(const i in a)a[i]!==void 0&&(s[i]=a[i]);return s}function C8(t,a,s){const i=mm(hm,s);for(const c of t.values())if(c.parentId)gm(c,t,a,i);else{const u=Co(c,i.nodeOrigin),f=Pr(c.extent)?c.extent:i.nodeExtent,m=Ls(u,f,wa(c));c.internals.positionAbsolute=m}}function T8(t,a){if(!t.handles)return t.measured?a?.internals.handleBounds:void 0;const s=[],i=[];for(const c of t.handles){const u={id:c.id,width:c.width??1,height:c.height??1,nodeId:t.id,x:c.x,y:c.y,position:c.position,type:c.type};c.type==="source"?s.push(u):c.type==="target"&&i.push(u)}return{source:s,target:i}}function pm(t){return t==="manual"}function Ah(t,a,s,i={}){const c=mm(E8,i),u={i:0},f=new Map(a),m=c?.elevateNodesOnSelect&&!pm(c.zIndexMode)?I1:0;let p=t.length>0;a.clear(),s.clear();for(const g of t){let y=f.get(g.id);if(c.checkEquality&&g===y?.internals.userNode)a.set(g.id,y);else{const x=Co(g,c.nodeOrigin),b=Pr(g.extent)?g.extent:c.nodeExtent,S=Ls(x,b,wa(g));y={...c.defaults,...g,measured:{width:g.measured?.width,height:g.measured?.height},internals:{positionAbsolute:S,handleBounds:T8(g,y),z:G1(g,m,c.zIndexMode),userNode:g}},a.set(g.id,y)}(y.measured===void 0||y.measured.width===void 0||y.measured.height===void 0)&&!y.hidden&&(p=!1),g.parentId&&gm(y,a,s,i,u)}return p}function M8(t,a){if(!t.parentId)return;const s=a.get(t.parentId);s?s.set(t.id,t):a.set(t.parentId,new Map([[t.id,t]]))}function gm(t,a,s,i,c){const{elevateNodesOnSelect:u,nodeOrigin:f,nodeExtent:m,zIndexMode:p}=mm(hm,i),g=t.parentId,y=a.get(g);if(!y){console.warn(`Parent node ${g} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}M8(t,s),c&&!y.parentId&&y.internals.rootParentIndex===void 0&&p==="auto"&&(y.internals.rootParentIndex=++c.i,y.internals.z=y.internals.z+c.i*_8),c&&y.internals.rootParentIndex!==void 0&&(c.i=y.internals.rootParentIndex);const x=u&&!pm(p)?I1:0,{x:b,y:S,z:_}=A8(t,y,f,m,x,p),{positionAbsolute:C}=t.internals,N=b!==C.x||S!==C.y;(N||_!==t.internals.z)&&a.set(t.id,{...t,internals:{...t.internals,positionAbsolute:N?{x:b,y:S}:C,z:_}})}function G1(t,a,s){const i=wn(t.zIndex)?t.zIndex:0;return pm(s)?i:i+(t.selected?a:0)}function A8(t,a,s,i,c,u){const{x:f,y:m}=a.internals.positionAbsolute,p=wa(t),g=Co(t,s),y=Pr(t.extent)?Ls(g,t.extent,p):g;let x=Ls({x:f+y.x,y:m+y.y},i,p);t.extent==="parent"&&(x=R1(x,p,a));const b=G1(t,c,u),S=a.internals.z??0;return{x:x.x,y:x.y,z:S>=b?S+1:b}}function xm(t,a,s,i=[0,0]){const c=[],u=new Map;for(const f of t){const m=a.get(f.parentId);if(!m)continue;const p=u.get(f.parentId)?.expandedRect??Yr(m),g=O1(p,f.rect);u.set(f.parentId,{expandedRect:g,parent:m})}return u.size>0&&u.forEach(({expandedRect:f,parent:m},p)=>{const g=m.internals.positionAbsolute,y=wa(m),x=m.origin??i,b=f.x<g.x?Math.round(Math.abs(g.x-f.x)):0,S=f.y<g.y?Math.round(Math.abs(g.y-f.y)):0,_=Math.max(y.width,Math.round(f.width)),C=Math.max(y.height,Math.round(f.height)),N=(_-y.width)*x[0],E=(C-y.height)*x[1];(b>0||S>0||N||E)&&(c.push({id:p,type:"position",position:{x:m.position.x-b+N,y:m.position.y-S+E}}),s.get(p)?.forEach(z=>{t.some(T=>T.id===z.id)||c.push({id:z.id,type:"position",position:{x:z.position.x+b,y:z.position.y+S}})})),(y.width<f.width||y.height<f.height||b||S)&&c.push({id:p,type:"dimensions",setAttributes:!0,dimensions:{width:_+(b?x[0]*b-N:0),height:C+(S?x[1]*S-E:0)}})}),c}function k8(t,a,s,i,c,u,f){const m=i?.querySelector(".xyflow__viewport");let p=!1;if(!m)return{changes:[],updatedInternals:p};const g=[],y=window.getComputedStyle(m),{m22:x}=new window.DOMMatrixReadOnly(y.transform),b=[];for(const S of t.values()){const _=a.get(S.id);if(!_)continue;if(_.hidden){a.set(_.id,{..._,internals:{..._.internals,handleBounds:void 0}}),p=!0;continue}const C=fm(S.nodeElement),N=_.measured.width!==C.width||_.measured.height!==C.height;if(!!(C.width&&C.height&&(N||!_.internals.handleBounds||S.force))){const z=S.nodeElement.getBoundingClientRect(),T=Pr(_.extent)?_.extent:u;let{positionAbsolute:k}=_.internals;_.parentId&&_.extent==="parent"?k=R1(k,C,a.get(_.parentId)):T&&(k=Ls(k,T,C));const w={..._,measured:C,internals:{..._.internals,positionAbsolute:k,handleBounds:{source:cy("source",S.nodeElement,z,x,_.id),target:cy("target",S.nodeElement,z,x,_.id)}}};a.set(_.id,w),_.parentId&&gm(w,a,s,{nodeOrigin:c,zIndexMode:f}),p=!0,N&&(g.push({id:_.id,type:"dimensions",dimensions:C}),_.expandParent&&_.parentId&&b.push({id:_.id,parentId:_.parentId,rect:Yr(w,c)}))}}if(b.length>0){const S=xm(b,a,s,c);g.push(...S)}return{changes:g,updatedInternals:p}}async function z8({delta:t,panZoom:a,transform:s,translateExtent:i,width:c,height:u}){if(!a||!t.x&&!t.y)return Promise.resolve(!1);const f=await a.setViewportConstrained({x:s[0]+t.x,y:s[1]+t.y,zoom:s[2]},[[0,0],[c,u]],i),m=!!f&&(f.x!==s[0]||f.y!==s[1]||f.k!==s[2]);return Promise.resolve(m)}function gy(t,a,s,i,c,u){let f=c;const m=i.get(f)||new Map;i.set(f,m.set(s,a)),f=`${c}-${t}`;const p=i.get(f)||new Map;if(i.set(f,p.set(s,a)),u){f=`${c}-${t}-${u}`;const g=i.get(f)||new Map;i.set(f,g.set(s,a))}}function Q1(t,a,s){t.clear(),a.clear();for(const i of s){const{source:c,target:u,sourceHandle:f=null,targetHandle:m=null}=i,p={edgeId:i.id,source:c,target:u,sourceHandle:f,targetHandle:m},g=`${c}-${f}--${u}-${m}`,y=`${u}-${m}--${c}-${f}`;gy("source",p,y,t,c,f),gy("target",p,g,t,u,m),a.set(i.id,i)}}function Z1(t,a){if(!t.parentId)return!1;const s=a.get(t.parentId);return s?s.selected?!0:Z1(s,a):!1}function xy(t,a,s){let i=t;do{if(i?.matches?.(a))return!0;if(i===s)return!1;i=i?.parentElement}while(i);return!1}function R8(t,a,s,i){const c=new Map;for(const[u,f]of t)if((f.selected||f.id===i)&&(!f.parentId||!Z1(f,t))&&(f.draggable||a&&typeof f.draggable>"u")){const m=t.get(u);m&&c.set(u,{id:u,position:m.position||{x:0,y:0},distance:{x:s.x-m.internals.positionAbsolute.x,y:s.y-m.internals.positionAbsolute.y},extent:m.extent,parentId:m.parentId,origin:m.origin,expandParent:m.expandParent,internals:{positionAbsolute:m.internals.positionAbsolute||{x:0,y:0}},measured:{width:m.measured.width??0,height:m.measured.height??0}})}return c}function Zf({nodeId:t,dragItems:a,nodeLookup:s,dragging:i=!0}){const c=[];for(const[f,m]of a){const p=s.get(f)?.internals.userNode;p&&c.push({...p,position:m.position,dragging:i})}if(!t)return[c[0],c];const u=s.get(t)?.internals.userNode;return[u?{...u,position:a.get(t)?.position||u.position,dragging:i}:c[0],c]}function D8({dragItems:t,snapGrid:a,x:s,y:i}){const c=t.values().next().value;if(!c)return null;const u={x:s-c.distance.x,y:i-c.distance.y},f=Mo(u,a);return{x:f.x-u.x,y:f.y-u.y}}function O8({onNodeMouseDown:t,getStoreItems:a,onDragStart:s,onDrag:i,onDragStop:c}){let u={x:null,y:null},f=0,m=new Map,p=!1,g={x:0,y:0},y=null,x=!1,b=null,S=!1,_=!1,C=null;function N({noDragClassName:z,handleSelector:T,domNode:k,isSelectable:w,nodeId:R,nodeClickDistance:M=0}){b=It(k);function U({x:F,y:se}){const{nodeLookup:q,nodeExtent:I,snapGrid:B,snapToGrid:D,nodeOrigin:Y,onNodeDrag:H,onSelectionDrag:W,onError:O,updateNodePositions:P}=a();u={x:F,y:se};let te=!1;const ae=m.size>1,re=ae&&I?Ch(To(m)):null,de=ae&&D?D8({dragItems:m,snapGrid:B,x:F,y:se}):null;for(const[ue,$]of m){if(!q.has(ue))continue;let ce={x:F-$.distance.x,y:se-$.distance.y};D&&(ce=de?{x:Math.round(ce.x+de.x),y:Math.round(ce.y+de.y)}:Mo(ce,B));let he=null;if(ae&&I&&!$.extent&&re){const{positionAbsolute:be}=$.internals,Se=be.x-re.x+I[0][0],Ae=be.x+$.measured.width-re.x2+I[1][0],Ee=be.y-re.y+I[0][1],$e=be.y+$.measured.height-re.y2+I[1][1];he=[[Se,Ee],[Ae,$e]]}const{position:ve,positionAbsolute:pe}=z1({nodeId:ue,nextPosition:ce,nodeLookup:q,nodeExtent:he||I,nodeOrigin:Y,onError:O});te=te||$.position.x!==ve.x||$.position.y!==ve.y,$.position=ve,$.internals.positionAbsolute=pe}if(_=_||te,!!te&&(P(m,!0),C&&(i||H||!R&&W))){const[ue,$]=Zf({nodeId:R,dragItems:m,nodeLookup:q});i?.(C,m,ue,$),H?.(C,ue,$),R||W?.(C,$)}}async function L(){if(!y)return;const{transform:F,panBy:se,autoPanSpeed:q,autoPanOnNodeDrag:I}=a();if(!I){p=!1,cancelAnimationFrame(f);return}const[B,D]=D1(g,y,q);(B!==0||D!==0)&&(u.x=(u.x??0)-B/F[2],u.y=(u.y??0)-D/F[2],await se({x:B,y:D})&&U(u)),f=requestAnimationFrame(L)}function Q(F){const{nodeLookup:se,multiSelectionActive:q,nodesDraggable:I,transform:B,snapGrid:D,snapToGrid:Y,selectNodesOnDrag:H,onNodeDragStart:W,onSelectionDragStart:O,unselectNodesAndEdges:P}=a();x=!0,(!H||!w)&&!q&&R&&(se.get(R)?.selected||P()),w&&H&&R&&t?.(R);const te=ro(F.sourceEvent,{transform:B,snapGrid:D,snapToGrid:Y,containerBounds:y});if(u=te,m=R8(se,I,te,R),m.size>0&&(s||W||!R&&O)){const[ae,re]=Zf({nodeId:R,dragItems:m,nodeLookup:se});s?.(F.sourceEvent,m,ae,re),W?.(F.sourceEvent,ae,re),R||O?.(F.sourceEvent,re)}}const G=d1().clickDistance(M).on("start",F=>{const{domNode:se,nodeDragThreshold:q,transform:I,snapGrid:B,snapToGrid:D}=a();y=se?.getBoundingClientRect()||null,S=!1,_=!1,C=F.sourceEvent,q===0&&Q(F),u=ro(F.sourceEvent,{transform:I,snapGrid:B,snapToGrid:D,containerBounds:y}),g=jn(F.sourceEvent,y)}).on("drag",F=>{const{autoPanOnNodeDrag:se,transform:q,snapGrid:I,snapToGrid:B,nodeDragThreshold:D,nodeLookup:Y}=a(),H=ro(F.sourceEvent,{transform:q,snapGrid:I,snapToGrid:B,containerBounds:y});if(C=F.sourceEvent,(F.sourceEvent.type==="touchmove"&&F.sourceEvent.touches.length>1||R&&!Y.has(R))&&(S=!0),!S){if(!p&&se&&x&&(p=!0,L()),!x){const W=jn(F.sourceEvent,y),O=W.x-g.x,P=W.y-g.y;Math.sqrt(O*O+P*P)>D&&Q(F)}(u.x!==H.xSnapped||u.y!==H.ySnapped)&&m&&x&&(g=jn(F.sourceEvent,y),U(H))}}).on("end",F=>{if(!(!x||S)&&(p=!1,x=!1,cancelAnimationFrame(f),m.size>0)){const{nodeLookup:se,updateNodePositions:q,onNodeDragStop:I,onSelectionDragStop:B}=a();if(_&&(q(m,!1),_=!1),c||I||!R&&B){const[D,Y]=Zf({nodeId:R,dragItems:m,nodeLookup:se,dragging:!1});c?.(F.sourceEvent,m,D,Y),I?.(F.sourceEvent,D,Y),R||B?.(F.sourceEvent,Y)}}}).filter(F=>{const se=F.target;return!F.button&&(!z||!xy(se,`.${z}`,k))&&(!T||xy(se,T,k))});b.call(G)}function E(){b?.on(".drag",null)}return{update:N,destroy:E}}function B8(t,a,s){const i=[],c={x:t.x-s,y:t.y-s,width:s*2,height:s*2};for(const u of a.values())po(c,Yr(u))>0&&i.push(u);return i}const L8=250;function H8(t,a,s,i){let c=[],u=1/0;const f=B8(t,s,a+L8);for(const m of f){const p=[...m.internals.handleBounds?.source??[],...m.internals.handleBounds?.target??[]];for(const g of p){if(i.nodeId===g.nodeId&&i.type===g.type&&i.id===g.id)continue;const{x:y,y:x}=Hs(m,g,g.position,!0),b=Math.sqrt(Math.pow(y-t.x,2)+Math.pow(x-t.y,2));b>a||(b<u?(c=[{...g,x:y,y:x}],u=b):b===u&&c.push({...g,x:y,y:x}))}}if(!c.length)return null;if(c.length>1){const m=i.type==="source"?"target":"source";return c.find(p=>p.type===m)??c[0]}return c[0]}function F1(t,a,s,i,c,u=!1){const f=i.get(t);if(!f)return null;const m=c==="strict"?f.internals.handleBounds?.[a]:[...f.internals.handleBounds?.source??[],...f.internals.handleBounds?.target??[]],p=(s?m?.find(g=>g.id===s):m?.[0])??null;return p&&u?{...p,...Hs(f,p,p.position,!0)}:p}function W1(t,a){return t||(a?.classList.contains("target")?"target":a?.classList.contains("source")?"source":null)}function $8(t,a){let s=null;return a?s=!0:t&&!a&&(s=!1),s}const K1=()=>!0;function U8(t,{connectionMode:a,connectionRadius:s,handleId:i,nodeId:c,edgeUpdaterType:u,isTarget:f,domNode:m,nodeLookup:p,lib:g,autoPanOnConnect:y,flowId:x,panBy:b,cancelConnection:S,onConnectStart:_,onConnect:C,onConnectEnd:N,isValidConnection:E=K1,onReconnectEnd:z,updateConnection:T,getTransform:k,getFromHandle:w,autoPanSpeed:R,dragThreshold:M=1,handleDomNode:U}){const L=H1(t.target);let Q=0,G;const{x:F,y:se}=jn(t),q=W1(u,U),I=m?.getBoundingClientRect();let B=!1;if(!I||!q)return;const D=F1(c,q,i,p,a);if(!D)return;let Y=jn(t,I),H=!1,W=null,O=!1,P=null;function te(){if(!y||!I)return;const[ve,pe]=D1(Y,I,R);b({x:ve,y:pe}),Q=requestAnimationFrame(te)}const ae={...D,nodeId:c,type:q,position:D.position},re=p.get(c);let ue={inProgress:!0,isValid:null,from:Hs(re,ae,ge.Left,!0),fromHandle:ae,fromPosition:ae.position,fromNode:re,to:Y,toHandle:null,toPosition:ry[ae.position],toNode:null,pointer:Y};function $(){B=!0,T(ue),_?.(t,{nodeId:c,handleId:i,handleType:q})}M===0&&$();function ce(ve){if(!B){const{x:$e,y:Re}=jn(ve),gt=$e-F,ht=Re-se;if(!(gt*gt+ht*ht>M*M))return;$()}if(!w()||!ae){he(ve);return}const pe=k();Y=jn(ve,I),G=H8(Ao(Y,pe,!1,[1,1]),s,p,ae),H||(te(),H=!0);const be=J1(ve,{handle:G,connectionMode:a,fromNodeId:c,fromHandleId:i,fromType:f?"target":"source",isValidConnection:E,doc:L,lib:g,flowId:x,nodeLookup:p});P=be.handleDomNode,W=be.connection,O=$8(!!G,be.isValid);const Se=p.get(c),Ae=Se?Hs(Se,ae,ge.Left,!0):ue.from,Ee={...ue,from:Ae,isValid:O,to:be.toHandle&&O?Gc({x:be.toHandle.x,y:be.toHandle.y},pe):Y,toHandle:be.toHandle,toPosition:O&&be.toHandle?be.toHandle.position:ry[ae.position],toNode:be.toHandle?p.get(be.toHandle.nodeId):null,pointer:Y};T(Ee),ue=Ee}function he(ve){if(!("touches"in ve&&ve.touches.length>0)){if(B){(G||P)&&W&&O&&C?.(W);const{inProgress:pe,...be}=ue,Se={...be,toPosition:ue.toHandle?ue.toPosition:null};N?.(ve,Se),u&&z?.(ve,Se)}S(),cancelAnimationFrame(Q),H=!1,O=!1,W=null,P=null,L.removeEventListener("mousemove",ce),L.removeEventListener("mouseup",he),L.removeEventListener("touchmove",ce),L.removeEventListener("touchend",he)}}L.addEventListener("mousemove",ce),L.addEventListener("mouseup",he),L.addEventListener("touchmove",ce),L.addEventListener("touchend",he)}function J1(t,{handle:a,connectionMode:s,fromNodeId:i,fromHandleId:c,fromType:u,doc:f,lib:m,flowId:p,isValidConnection:g=K1,nodeLookup:y}){const x=u==="target",b=a?f.querySelector(`.${m}-flow__handle[data-id="${p}-${a?.nodeId}-${a?.id}-${a?.type}"]`):null,{x:S,y:_}=jn(t),C=f.elementFromPoint(S,_),N=C?.classList.contains(`${m}-flow__handle`)?C:b,E={handleDomNode:N,isValid:!1,connection:null,toHandle:null};if(N){const z=W1(void 0,N),T=N.getAttribute("data-nodeid"),k=N.getAttribute("data-handleid"),w=N.classList.contains("connectable"),R=N.classList.contains("connectableend");if(!T||!z)return E;const M={source:x?T:i,sourceHandle:x?k:c,target:x?i:T,targetHandle:x?c:k};E.connection=M;const L=w&&R&&(s===qr.Strict?x&&z==="source"||!x&&z==="target":T!==i||k!==c);E.isValid=L&&g(M),E.toHandle=F1(T,z,k,y,s,!0)}return E}const kh={onPointerDown:U8,isValid:J1};function q8({domNode:t,panZoom:a,getTransform:s,getViewScale:i}){const c=It(t);function u({translateExtent:m,width:p,height:g,zoomStep:y=1,pannable:x=!0,zoomable:b=!0,inversePan:S=!1}){const _=T=>{if(T.sourceEvent.type!=="wheel"||!a)return;const k=s(),w=T.sourceEvent.ctrlKey&&go()?10:1,R=-T.sourceEvent.deltaY*(T.sourceEvent.deltaMode===1?.05:T.sourceEvent.deltaMode?1:.002)*y,M=k[2]*Math.pow(2,R*w);a.scaleTo(M)};let C=[0,0];const N=T=>{(T.sourceEvent.type==="mousedown"||T.sourceEvent.type==="touchstart")&&(C=[T.sourceEvent.clientX??T.sourceEvent.touches[0].clientX,T.sourceEvent.clientY??T.sourceEvent.touches[0].clientY])},E=T=>{const k=s();if(T.sourceEvent.type!=="mousemove"&&T.sourceEvent.type!=="touchmove"||!a)return;const w=[T.sourceEvent.clientX??T.sourceEvent.touches[0].clientX,T.sourceEvent.clientY??T.sourceEvent.touches[0].clientY],R=[w[0]-C[0],w[1]-C[1]];C=w;const M=i()*Math.max(k[2],Math.log(k[2]))*(S?-1:1),U={x:k[0]-R[0]*M,y:k[1]-R[1]*M},L=[[0,0],[p,g]];a.setViewportConstrained({x:U.x,y:U.y,zoom:k[2]},L,m)},z=E1().on("start",N).on("zoom",x?E:null).on("zoom.wheel",b?_:null);c.call(z,{})}function f(){c.on("zoom",null)}return{update:u,destroy:f,pointer:yn}}const du=t=>({x:t.x,y:t.y,zoom:t.k}),Ff=({x:t,y:a,zoom:s})=>lu.translate(t,a).scale(s),Ar=(t,a)=>t.target.closest(`.${a}`),ev=(t,a)=>a===2&&Array.isArray(t)&&t.includes(2),V8=t=>((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2,Wf=(t,a=0,s=V8,i=()=>{})=>{const c=typeof a=="number"&&a>0;return c||i(),c?t.transition().duration(a).ease(s).on("end",i):t},tv=t=>{const a=t.ctrlKey&&go()?10:1;return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*a};function Y8({zoomPanValues:t,noWheelClassName:a,d3Selection:s,d3Zoom:i,panOnScrollMode:c,panOnScrollSpeed:u,zoomOnPinch:f,onPanZoomStart:m,onPanZoom:p,onPanZoomEnd:g}){return y=>{if(Ar(y,a))return y.ctrlKey&&y.preventDefault(),!1;y.preventDefault(),y.stopImmediatePropagation();const x=s.property("__zoom").k||1;if(y.ctrlKey&&f){const N=yn(y),E=tv(y),z=x*Math.pow(2,E);i.scaleTo(s,z,N,y);return}const b=y.deltaMode===1?20:1;let S=c===Rs.Vertical?0:y.deltaX*b,_=c===Rs.Horizontal?0:y.deltaY*b;!go()&&y.shiftKey&&c!==Rs.Vertical&&(S=y.deltaY*b,_=0),i.translateBy(s,-(S/x)*u,-(_/x)*u,{internal:!0});const C=du(s.property("__zoom"));clearTimeout(t.panScrollTimeout),t.isPanScrolling?(p?.(y,C),t.panScrollTimeout=setTimeout(()=>{g?.(y,C),t.isPanScrolling=!1},150)):(t.isPanScrolling=!0,m?.(y,C))}}function P8({noWheelClassName:t,preventScrolling:a,d3ZoomHandler:s}){return function(i,c){const u=i.type==="wheel",f=!a&&u&&!i.ctrlKey,m=Ar(i,t);if(i.ctrlKey&&u&&m&&i.preventDefault(),f||m)return null;i.preventDefault(),s.call(this,i,c)}}function X8({zoomPanValues:t,onDraggingChange:a,onPanZoomStart:s}){return i=>{if(i.sourceEvent?.internal)return;const c=du(i.transform);t.mouseButton=i.sourceEvent?.button||0,t.isZoomingOrPanning=!0,t.prevViewport=c,i.sourceEvent?.type==="mousedown"&&a(!0),s&&s?.(i.sourceEvent,c)}}function I8({zoomPanValues:t,panOnDrag:a,onPaneContextMenu:s,onTransformChange:i,onPanZoom:c}){return u=>{t.usedRightMouseButton=!!(s&&ev(a,t.mouseButton??0)),u.sourceEvent?.sync||i([u.transform.x,u.transform.y,u.transform.k]),c&&!u.sourceEvent?.internal&&c?.(u.sourceEvent,du(u.transform))}}function G8({zoomPanValues:t,panOnDrag:a,panOnScroll:s,onDraggingChange:i,onPanZoomEnd:c,onPaneContextMenu:u}){return f=>{if(!f.sourceEvent?.internal&&(t.isZoomingOrPanning=!1,u&&ev(a,t.mouseButton??0)&&!t.usedRightMouseButton&&f.sourceEvent&&u(f.sourceEvent),t.usedRightMouseButton=!1,i(!1),c)){const m=du(f.transform);t.prevViewport=m,clearTimeout(t.timerId),t.timerId=setTimeout(()=>{c?.(f.sourceEvent,m)},s?150:0)}}}function Q8({zoomActivationKeyPressed:t,zoomOnScroll:a,zoomOnPinch:s,panOnDrag:i,panOnScroll:c,zoomOnDoubleClick:u,userSelectionActive:f,noWheelClassName:m,noPanClassName:p,lib:g,connectionInProgress:y}){return x=>{const b=t||a,S=s&&x.ctrlKey,_=x.type==="wheel";if(x.button===1&&x.type==="mousedown"&&(Ar(x,`${g}-flow__node`)||Ar(x,`${g}-flow__edge`)))return!0;if(!i&&!b&&!c&&!u&&!s||f||y&&!_||Ar(x,m)&&_||Ar(x,p)&&(!_||c&&_&&!t)||!s&&x.ctrlKey&&_)return!1;if(!s&&x.type==="touchstart"&&x.touches?.length>1)return x.preventDefault(),!1;if(!b&&!c&&!S&&_||!i&&(x.type==="mousedown"||x.type==="touchstart")||Array.isArray(i)&&!i.includes(x.button)&&x.type==="mousedown")return!1;const C=Array.isArray(i)&&i.includes(x.button)||!x.button||x.button<=1;return(!x.ctrlKey||_)&&C}}function Z8({domNode:t,minZoom:a,maxZoom:s,translateExtent:i,viewport:c,onPanZoom:u,onPanZoomStart:f,onPanZoomEnd:m,onDraggingChange:p}){const g={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},y=t.getBoundingClientRect(),x=E1().scaleExtent([a,s]).translateExtent(i),b=It(t).call(x);z({x:c.x,y:c.y,zoom:Vr(c.zoom,a,s)},[[0,0],[y.width,y.height]],i);const S=b.on("wheel.zoom"),_=b.on("dblclick.zoom");x.wheelDelta(tv);function C(G,F){return b?new Promise(se=>{x?.interpolate(F?.interpolate==="linear"?so:Ec).transform(Wf(b,F?.duration,F?.ease,()=>se(!0)),G)}):Promise.resolve(!1)}function N({noWheelClassName:G,noPanClassName:F,onPaneContextMenu:se,userSelectionActive:q,panOnScroll:I,panOnDrag:B,panOnScrollMode:D,panOnScrollSpeed:Y,preventScrolling:H,zoomOnPinch:W,zoomOnScroll:O,zoomOnDoubleClick:P,zoomActivationKeyPressed:te,lib:ae,onTransformChange:re,connectionInProgress:de,paneClickDistance:ue,selectionOnDrag:$}){q&&!g.isZoomingOrPanning&&E();const ce=I&&!te&&!q;x.clickDistance($?1/0:!wn(ue)||ue<0?0:ue);const he=ce?Y8({zoomPanValues:g,noWheelClassName:G,d3Selection:b,d3Zoom:x,panOnScrollMode:D,panOnScrollSpeed:Y,zoomOnPinch:W,onPanZoomStart:f,onPanZoom:u,onPanZoomEnd:m}):P8({noWheelClassName:G,preventScrolling:H,d3ZoomHandler:S});if(b.on("wheel.zoom",he,{passive:!1}),!q){const pe=X8({zoomPanValues:g,onDraggingChange:p,onPanZoomStart:f});x.on("start",pe);const be=I8({zoomPanValues:g,panOnDrag:B,onPaneContextMenu:!!se,onPanZoom:u,onTransformChange:re});x.on("zoom",be);const Se=G8({zoomPanValues:g,panOnDrag:B,panOnScroll:I,onPaneContextMenu:se,onPanZoomEnd:m,onDraggingChange:p});x.on("end",Se)}const ve=Q8({zoomActivationKeyPressed:te,panOnDrag:B,zoomOnScroll:O,panOnScroll:I,zoomOnDoubleClick:P,zoomOnPinch:W,userSelectionActive:q,noPanClassName:F,noWheelClassName:G,lib:ae,connectionInProgress:de});x.filter(ve),P?b.on("dblclick.zoom",_):b.on("dblclick.zoom",null)}function E(){x.on("zoom",null)}async function z(G,F,se){const q=Ff(G),I=x?.constrain()(q,F,se);return I&&await C(I),new Promise(B=>B(I))}async function T(G,F){const se=Ff(G);return await C(se,F),new Promise(q=>q(se))}function k(G){if(b){const F=Ff(G),se=b.property("__zoom");(se.k!==G.zoom||se.x!==G.x||se.y!==G.y)&&x?.transform(b,F,null,{sync:!0})}}function w(){const G=b?_1(b.node()):{x:0,y:0,k:1};return{x:G.x,y:G.y,zoom:G.k}}function R(G,F){return b?new Promise(se=>{x?.interpolate(F?.interpolate==="linear"?so:Ec).scaleTo(Wf(b,F?.duration,F?.ease,()=>se(!0)),G)}):Promise.resolve(!1)}function M(G,F){return b?new Promise(se=>{x?.interpolate(F?.interpolate==="linear"?so:Ec).scaleBy(Wf(b,F?.duration,F?.ease,()=>se(!0)),G)}):Promise.resolve(!1)}function U(G){x?.scaleExtent(G)}function L(G){x?.translateExtent(G)}function Q(G){const F=!wn(G)||G<0?0:G;x?.clickDistance(F)}return{update:N,destroy:E,setViewport:T,setViewportConstrained:z,getViewport:w,scaleTo:R,scaleBy:M,setScaleExtent:U,setTranslateExtent:L,syncViewport:k,setClickDistance:Q}}var Xr;(function(t){t.Line="line",t.Handle="handle"})(Xr||(Xr={}));function F8({width:t,prevWidth:a,height:s,prevHeight:i,affectsX:c,affectsY:u}){const f=t-a,m=s-i,p=[f>0?1:f<0?-1:0,m>0?1:m<0?-1:0];return f&&c&&(p[0]=p[0]*-1),m&&u&&(p[1]=p[1]*-1),p}function yy(t){const a=t.includes("right")||t.includes("left"),s=t.includes("bottom")||t.includes("top"),i=t.includes("left"),c=t.includes("top");return{isHorizontal:a,isVertical:s,affectsX:i,affectsY:c}}function Wa(t,a){return Math.max(0,a-t)}function Ka(t,a){return Math.max(0,t-a)}function fc(t,a,s){return Math.max(0,a-t,t-s)}function by(t,a){return t?!a:a}function W8(t,a,s,i,c,u,f,m){let{affectsX:p,affectsY:g}=a;const{isHorizontal:y,isVertical:x}=a,b=y&&x,{xSnapped:S,ySnapped:_}=s,{minWidth:C,maxWidth:N,minHeight:E,maxHeight:z}=i,{x:T,y:k,width:w,height:R,aspectRatio:M}=t;let U=Math.floor(y?S-t.pointerX:0),L=Math.floor(x?_-t.pointerY:0);const Q=w+(p?-U:U),G=R+(g?-L:L),F=-u[0]*w,se=-u[1]*R;let q=fc(Q,C,N),I=fc(G,E,z);if(f){let Y=0,H=0;p&&U<0?Y=Wa(T+U+F,f[0][0]):!p&&U>0&&(Y=Ka(T+Q+F,f[1][0])),g&&L<0?H=Wa(k+L+se,f[0][1]):!g&&L>0&&(H=Ka(k+G+se,f[1][1])),q=Math.max(q,Y),I=Math.max(I,H)}if(m){let Y=0,H=0;p&&U>0?Y=Ka(T+U,m[0][0]):!p&&U<0&&(Y=Wa(T+Q,m[1][0])),g&&L>0?H=Ka(k+L,m[0][1]):!g&&L<0&&(H=Wa(k+G,m[1][1])),q=Math.max(q,Y),I=Math.max(I,H)}if(c){if(y){const Y=fc(Q/M,E,z)*M;if(q=Math.max(q,Y),f){let H=0;!p&&!g||p&&!g&&b?H=Ka(k+se+Q/M,f[1][1])*M:H=Wa(k+se+(p?U:-U)/M,f[0][1])*M,q=Math.max(q,H)}if(m){let H=0;!p&&!g||p&&!g&&b?H=Wa(k+Q/M,m[1][1])*M:H=Ka(k+(p?U:-U)/M,m[0][1])*M,q=Math.max(q,H)}}if(x){const Y=fc(G*M,C,N)/M;if(I=Math.max(I,Y),f){let H=0;!p&&!g||g&&!p&&b?H=Ka(T+G*M+F,f[1][0])/M:H=Wa(T+(g?L:-L)*M+F,f[0][0])/M,I=Math.max(I,H)}if(m){let H=0;!p&&!g||g&&!p&&b?H=Wa(T+G*M,m[1][0])/M:H=Ka(T+(g?L:-L)*M,m[0][0])/M,I=Math.max(I,H)}}}L=L+(L<0?I:-I),U=U+(U<0?q:-q),c&&(b?Q>G*M?L=(by(p,g)?-U:U)/M:U=(by(p,g)?-L:L)*M:y?(L=U/M,g=p):(U=L*M,p=g));const B=p?T+U:T,D=g?k+L:k;return{width:w+(p?-U:U),height:R+(g?-L:L),x:u[0]*U*(p?-1:1)+B,y:u[1]*L*(g?-1:1)+D}}const nv={width:0,height:0,x:0,y:0},K8={...nv,pointerX:0,pointerY:0,aspectRatio:1};function J8(t){return[[0,0],[t.measured.width,t.measured.height]]}function eT(t,a,s){const i=a.position.x+t.position.x,c=a.position.y+t.position.y,u=t.measured.width??0,f=t.measured.height??0,m=s[0]*u,p=s[1]*f;return[[i-m,c-p],[i+u-m,c+f-p]]}function tT({domNode:t,nodeId:a,getStoreItems:s,onChange:i,onEnd:c}){const u=It(t);let f={controlDirection:yy("bottom-right"),boundaries:{minWidth:0,minHeight:0,maxWidth:Number.MAX_VALUE,maxHeight:Number.MAX_VALUE},resizeDirection:void 0,keepAspectRatio:!1};function m({controlPosition:g,boundaries:y,keepAspectRatio:x,resizeDirection:b,onResizeStart:S,onResize:_,onResizeEnd:C,shouldResize:N}){let E={...nv},z={...K8};f={boundaries:y,resizeDirection:b,keepAspectRatio:x,controlDirection:yy(g)};let T,k=null,w=[],R,M,U,L=!1;const Q=d1().on("start",G=>{const{nodeLookup:F,transform:se,snapGrid:q,snapToGrid:I,nodeOrigin:B,paneDomNode:D}=s();if(T=F.get(a),!T)return;k=D?.getBoundingClientRect()??null;const{xSnapped:Y,ySnapped:H}=ro(G.sourceEvent,{transform:se,snapGrid:q,snapToGrid:I,containerBounds:k});E={width:T.measured.width??0,height:T.measured.height??0,x:T.position.x??0,y:T.position.y??0},z={...E,pointerX:Y,pointerY:H,aspectRatio:E.width/E.height},R=void 0,T.parentId&&(T.extent==="parent"||T.expandParent)&&(R=F.get(T.parentId),M=R&&T.extent==="parent"?J8(R):void 0),w=[],U=void 0;for(const[W,O]of F)if(O.parentId===a&&(w.push({id:W,position:{...O.position},extent:O.extent}),O.extent==="parent"||O.expandParent)){const P=eT(O,T,O.origin??B);U?U=[[Math.min(P[0][0],U[0][0]),Math.min(P[0][1],U[0][1])],[Math.max(P[1][0],U[1][0]),Math.max(P[1][1],U[1][1])]]:U=P}S?.(G,{...E})}).on("drag",G=>{const{transform:F,snapGrid:se,snapToGrid:q,nodeOrigin:I}=s(),B=ro(G.sourceEvent,{transform:F,snapGrid:se,snapToGrid:q,containerBounds:k}),D=[];if(!T)return;const{x:Y,y:H,width:W,height:O}=E,P={},te=T.origin??I,{width:ae,height:re,x:de,y:ue}=W8(z,f.controlDirection,B,f.boundaries,f.keepAspectRatio,te,M,U),$=ae!==W,ce=re!==O,he=de!==Y&&$,ve=ue!==H&&ce;if(!he&&!ve&&!$&&!ce)return;if((he||ve||te[0]===1||te[1]===1)&&(P.x=he?de:E.x,P.y=ve?ue:E.y,E.x=P.x,E.y=P.y,w.length>0)){const Ae=de-Y,Ee=ue-H;for(const $e of w)$e.position={x:$e.position.x-Ae+te[0]*(ae-W),y:$e.position.y-Ee+te[1]*(re-O)},D.push($e)}if(($||ce)&&(P.width=$&&(!f.resizeDirection||f.resizeDirection==="horizontal")?ae:E.width,P.height=ce&&(!f.resizeDirection||f.resizeDirection==="vertical")?re:E.height,E.width=P.width,E.height=P.height),R&&T.expandParent){const Ae=te[0]*(P.width??0);P.x&&P.x<Ae&&(E.x=Ae,z.x=z.x-(P.x-Ae));const Ee=te[1]*(P.height??0);P.y&&P.y<Ee&&(E.y=Ee,z.y=z.y-(P.y-Ee))}const pe=F8({width:E.width,prevWidth:W,height:E.height,prevHeight:O,affectsX:f.controlDirection.affectsX,affectsY:f.controlDirection.affectsY}),be={...E,direction:pe};N?.(G,be)!==!1&&(L=!0,_?.(G,be),i(P,D))}).on("end",G=>{L&&(C?.(G,{...E}),c?.({...E}),L=!1)});u.call(Q)}function p(){u.on(".drag",null)}return{update:m,destroy:p}}var Kf={exports:{}},Jf={},eh={exports:{}},th={};var vy;function nT(){if(vy)return th;vy=1;var t=yo();function a(x,b){return x===b&&(x!==0||1/x===1/b)||x!==x&&b!==b}var s=typeof Object.is=="function"?Object.is:a,i=t.useState,c=t.useEffect,u=t.useLayoutEffect,f=t.useDebugValue;function m(x,b){var S=b(),_=i({inst:{value:S,getSnapshot:b}}),C=_[0].inst,N=_[1];return u(function(){C.value=S,C.getSnapshot=b,p(C)&&N({inst:C})},[x,S,b]),c(function(){return p(C)&&N({inst:C}),x(function(){p(C)&&N({inst:C})})},[x]),f(S),S}function p(x){var b=x.getSnapshot;x=x.value;try{var S=b();return!s(x,S)}catch{return!0}}function g(x,b){return b()}var y=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?g:m;return th.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:y,th}var wy;function aT(){return wy||(wy=1,eh.exports=nT()),eh.exports}var jy;function sT(){if(jy)return Jf;jy=1;var t=yo(),a=aT();function s(g,y){return g===y&&(g!==0||1/g===1/y)||g!==g&&y!==y}var i=typeof Object.is=="function"?Object.is:s,c=a.useSyncExternalStore,u=t.useRef,f=t.useEffect,m=t.useMemo,p=t.useDebugValue;return Jf.useSyncExternalStoreWithSelector=function(g,y,x,b,S){var _=u(null);if(_.current===null){var C={hasValue:!1,value:null};_.current=C}else C=_.current;_=m(function(){function E(R){if(!z){if(z=!0,T=R,R=b(R),S!==void 0&&C.hasValue){var M=C.value;if(S(M,R))return k=M}return k=R}if(M=k,i(T,R))return M;var U=b(R);return S!==void 0&&S(M,U)?(T=R,M):(T=R,k=U)}var z=!1,T,k,w=x===void 0?null:x;return[function(){return E(y())},w===null?void 0:function(){return E(w())}]},[y,x,b,S]);var N=c(g,_[0],_[1]);return f(function(){C.hasValue=!0,C.value=N},[N]),p(N),N},Jf}var Ny;function rT(){return Ny||(Ny=1,Kf.exports=sT()),Kf.exports}var iT=rT();const oT=Rh(iT),lT={},Sy=t=>{let a;const s=new Set,i=(y,x)=>{const b=typeof y=="function"?y(a):y;if(!Object.is(b,a)){const S=a;a=x??(typeof b!="object"||b===null)?b:Object.assign({},a,b),s.forEach(_=>_(a,S))}},c=()=>a,p={setState:i,getState:c,getInitialState:()=>g,subscribe:y=>(s.add(y),()=>s.delete(y)),destroy:()=>{(lT?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),s.clear()}},g=a=t(i,c,p);return p},cT=t=>t?Sy(t):Sy,{useDebugValue:uT}=Mr,{useSyncExternalStoreWithSelector:dT}=oT,fT=t=>t;function av(t,a=fT,s){const i=dT(t.subscribe,t.getState,t.getServerState||t.getInitialState,a,s);return uT(i),i}const _y=(t,a)=>{const s=cT(t),i=(c,u=a)=>av(s,c,u);return Object.assign(i,s),i},hT=(t,a)=>t?_y(t,a):_y;function We(t,a){if(Object.is(t,a))return!0;if(typeof t!="object"||t===null||typeof a!="object"||a===null)return!1;if(t instanceof Map&&a instanceof Map){if(t.size!==a.size)return!1;for(const[i,c]of t)if(!Object.is(c,a.get(i)))return!1;return!0}if(t instanceof Set&&a instanceof Set){if(t.size!==a.size)return!1;for(const i of t)if(!a.has(i))return!1;return!0}const s=Object.keys(t);if(s.length!==Object.keys(a).length)return!1;for(const i of s)if(!Object.prototype.hasOwnProperty.call(a,i)||!Object.is(t[i],a[i]))return!1;return!0}const fu=j.createContext(null),mT=fu.Provider,sv=Hn.error001();function Oe(t,a){const s=j.useContext(fu);if(s===null)throw new Error(sv);return av(s,t,a)}function Ke(){const t=j.useContext(fu);if(t===null)throw new Error(sv);return j.useMemo(()=>({getState:t.getState,setState:t.setState,subscribe:t.subscribe}),[t])}const Ey={display:"none"},pT={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},rv="react-flow__node-desc",iv="react-flow__edge-desc",gT="react-flow__aria-live",xT=t=>t.ariaLiveMessage,yT=t=>t.ariaLabelConfig;function bT({rfId:t}){const a=Oe(xT);return o.jsx("div",{id:`${gT}-${t}`,"aria-live":"assertive","aria-atomic":"true",style:pT,children:a})}function vT({rfId:t,disableKeyboardA11y:a}){const s=Oe(yT);return o.jsxs(o.Fragment,{children:[o.jsx("div",{id:`${rv}-${t}`,style:Ey,children:a?s["node.a11yDescription.default"]:s["node.a11yDescription.keyboardDisabled"]}),o.jsx("div",{id:`${iv}-${t}`,style:Ey,children:s["edge.a11yDescription.default"]}),!a&&o.jsx(bT,{rfId:t})]})}const hu=j.forwardRef(({position:t="top-left",children:a,className:s,style:i,...c},u)=>{const f=`${t}`.split("-");return o.jsx("div",{className:ut(["react-flow__panel",s,...f]),style:i,ref:u,...c,children:a})});hu.displayName="Panel";function wT({proOptions:t,position:a="bottom-right"}){return t?.hideAttribution?null:o.jsx(hu,{position:a,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:o.jsx("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const jT=t=>{const a=[],s=[];for(const[,i]of t.nodeLookup)i.selected&&a.push(i.internals.userNode);for(const[,i]of t.edgeLookup)i.selected&&s.push(i);return{selectedNodes:a,selectedEdges:s}},hc=t=>t.id;function NT(t,a){return We(t.selectedNodes.map(hc),a.selectedNodes.map(hc))&&We(t.selectedEdges.map(hc),a.selectedEdges.map(hc))}function ST({onSelectionChange:t}){const a=Ke(),{selectedNodes:s,selectedEdges:i}=Oe(jT,NT);return j.useEffect(()=>{const c={nodes:s,edges:i};t?.(c),a.getState().onSelectionChangeHandlers.forEach(u=>u(c))},[s,i,t]),null}const _T=t=>!!t.onSelectionChangeHandlers;function ET({onSelectionChange:t}){const a=Oe(_T);return t||a?o.jsx(ST,{onSelectionChange:t}):null}const ov=[0,0],CT={x:0,y:0,zoom:1},TT=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","autoPanOnNodeFocus","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","connectionDragThreshold","onBeforeDelete","debug","autoPanSpeed","ariaLabelConfig","zIndexMode"],Cy=[...TT,"rfId"],MT=t=>({setNodes:t.setNodes,setEdges:t.setEdges,setMinZoom:t.setMinZoom,setMaxZoom:t.setMaxZoom,setTranslateExtent:t.setTranslateExtent,setNodeExtent:t.setNodeExtent,reset:t.reset,setDefaultNodesAndEdges:t.setDefaultNodesAndEdges}),Ty={translateExtent:ho,nodeOrigin:ov,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1"};function AT(t){const{setNodes:a,setEdges:s,setMinZoom:i,setMaxZoom:c,setTranslateExtent:u,setNodeExtent:f,reset:m,setDefaultNodesAndEdges:p}=Oe(MT,We),g=Ke();j.useEffect(()=>(p(t.defaultNodes,t.defaultEdges),()=>{y.current=Ty,m()}),[]);const y=j.useRef(Ty);return j.useEffect(()=>{for(const x of Cy){const b=t[x],S=y.current[x];b!==S&&(typeof t[x]>"u"||(x==="nodes"?a(b):x==="edges"?s(b):x==="minZoom"?i(b):x==="maxZoom"?c(b):x==="translateExtent"?u(b):x==="nodeExtent"?f(b):x==="ariaLabelConfig"?g.setState({ariaLabelConfig:m8(b)}):x==="fitView"?g.setState({fitViewQueued:b}):x==="fitViewOptions"?g.setState({fitViewOptions:b}):g.setState({[x]:b})))}y.current=t},Cy.map(x=>t[x])),null}function My(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function kT(t){const[a,s]=j.useState(t==="system"?null:t);return j.useEffect(()=>{if(t!=="system"){s(t);return}const i=My(),c=()=>s(i?.matches?"dark":"light");return c(),i?.addEventListener("change",c),()=>{i?.removeEventListener("change",c)}},[t]),a!==null?a:My()?.matches?"dark":"light"}const Ay=typeof document<"u"?document:null;function xo(t=null,a={target:Ay,actInsideInputWithModifier:!0}){const[s,i]=j.useState(!1),c=j.useRef(!1),u=j.useRef(new Set([])),[f,m]=j.useMemo(()=>{if(t!==null){const g=(Array.isArray(t)?t:[t]).filter(x=>typeof x=="string").map(x=>x.replace("+",`
`).replace(`

`,`
+`).split(`
`)),y=g.reduce((x,b)=>x.concat(...b),[]);return[g,y]}return[[],[]]},[t]);return j.useEffect(()=>{const p=a?.target??Ay,g=a?.actInsideInputWithModifier??!0;if(t!==null){const y=S=>{if(c.current=S.ctrlKey||S.metaKey||S.shiftKey||S.altKey,(!c.current||c.current&&!g)&&$1(S))return!1;const C=zy(S.code,m);if(u.current.add(S[C]),ky(f,u.current,!1)){const N=S.composedPath?.()?.[0]||S.target,E=N?.nodeName==="BUTTON"||N?.nodeName==="A";a.preventDefault!==!1&&(c.current||!E)&&S.preventDefault(),i(!0)}},x=S=>{const _=zy(S.code,m);ky(f,u.current,!0)?(i(!1),u.current.clear()):u.current.delete(S[_]),S.key==="Meta"&&u.current.clear(),c.current=!1},b=()=>{u.current.clear(),i(!1)};return p?.addEventListener("keydown",y),p?.addEventListener("keyup",x),window.addEventListener("blur",b),window.addEventListener("contextmenu",b),()=>{p?.removeEventListener("keydown",y),p?.removeEventListener("keyup",x),window.removeEventListener("blur",b),window.removeEventListener("contextmenu",b)}}},[t,i]),s}function ky(t,a,s){return t.filter(i=>s||i.length===a.size).some(i=>i.every(c=>a.has(c)))}function zy(t,a){return a.includes(t)?"code":"key"}const zT=()=>{const t=Ke();return j.useMemo(()=>({zoomIn:a=>{const{panZoom:s}=t.getState();return s?s.scaleBy(1.2,{duration:a?.duration}):Promise.resolve(!1)},zoomOut:a=>{const{panZoom:s}=t.getState();return s?s.scaleBy(1/1.2,{duration:a?.duration}):Promise.resolve(!1)},zoomTo:(a,s)=>{const{panZoom:i}=t.getState();return i?i.scaleTo(a,{duration:s?.duration}):Promise.resolve(!1)},getZoom:()=>t.getState().transform[2],setViewport:async(a,s)=>{const{transform:[i,c,u],panZoom:f}=t.getState();return f?(await f.setViewport({x:a.x??i,y:a.y??c,zoom:a.zoom??u},s),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[a,s,i]=t.getState().transform;return{x:a,y:s,zoom:i}},setCenter:async(a,s,i)=>t.getState().setCenter(a,s,i),fitBounds:async(a,s)=>{const{width:i,height:c,minZoom:u,maxZoom:f,panZoom:m}=t.getState(),p=dm(a,i,c,u,f,s?.padding??.1);return m?(await m.setViewport(p,{duration:s?.duration,ease:s?.ease,interpolate:s?.interpolate}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(a,s={})=>{const{transform:i,snapGrid:c,snapToGrid:u,domNode:f}=t.getState();if(!f)return a;const{x:m,y:p}=f.getBoundingClientRect(),g={x:a.x-m,y:a.y-p},y=s.snapGrid??c,x=s.snapToGrid??u;return Ao(g,i,x,y)},flowToScreenPosition:a=>{const{transform:s,domNode:i}=t.getState();if(!i)return a;const{x:c,y:u}=i.getBoundingClientRect(),f=Gc(a,s);return{x:f.x+c,y:f.y+u}}}),[])};function lv(t,a){const s=[],i=new Map,c=[];for(const u of t)if(u.type==="add"){c.push(u);continue}else if(u.type==="remove"||u.type==="replace")i.set(u.id,[u]);else{const f=i.get(u.id);f?f.push(u):i.set(u.id,[u])}for(const u of a){const f=i.get(u.id);if(!f){s.push(u);continue}if(f[0].type==="remove")continue;if(f[0].type==="replace"){s.push({...f[0].item});continue}const m={...u};for(const p of f)RT(p,m);s.push(m)}return c.length&&c.forEach(u=>{u.index!==void 0?s.splice(u.index,0,{...u.item}):s.push({...u.item})}),s}function RT(t,a){switch(t.type){case"select":{a.selected=t.selected;break}case"position":{typeof t.position<"u"&&(a.position=t.position),typeof t.dragging<"u"&&(a.dragging=t.dragging);break}case"dimensions":{typeof t.dimensions<"u"&&(a.measured={...t.dimensions},t.setAttributes&&((t.setAttributes===!0||t.setAttributes==="width")&&(a.width=t.dimensions.width),(t.setAttributes===!0||t.setAttributes==="height")&&(a.height=t.dimensions.height))),typeof t.resizing=="boolean"&&(a.resizing=t.resizing);break}}}function cv(t,a){return lv(t,a)}function uv(t,a){return lv(t,a)}function Ts(t,a){return{id:t,type:"select",selected:a}}function kr(t,a=new Set,s=!1){const i=[];for(const[c,u]of t){const f=a.has(c);!(u.selected===void 0&&!f)&&u.selected!==f&&(s&&(u.selected=f),i.push(Ts(u.id,f)))}return i}function Ry({items:t=[],lookup:a}){const s=[],i=new Map(t.map(c=>[c.id,c]));for(const[c,u]of t.entries()){const f=a.get(u.id),m=f?.internals?.userNode??f;m!==void 0&&m!==u&&s.push({id:u.id,item:u,type:"replace"}),m===void 0&&s.push({item:u,type:"add",index:c})}for(const[c]of a)i.get(c)===void 0&&s.push({id:c,type:"remove"});return s}function Dy(t){return{id:t.id,type:"remove"}}const Oy=t=>s8(t),DT=t=>k1(t);function dv(t){return j.forwardRef(t)}const OT=typeof window<"u"?j.useLayoutEffect:j.useEffect;function By(t){const[a,s]=j.useState(BigInt(0)),[i]=j.useState(()=>BT(()=>s(c=>c+BigInt(1))));return OT(()=>{const c=i.get();c.length&&(t(c),i.reset())},[a]),i}function BT(t){let a=[];return{get:()=>a,reset:()=>{a=[]},push:s=>{a.push(s),t()}}}const fv=j.createContext(null);function LT({children:t}){const a=Ke(),s=j.useCallback(m=>{const{nodes:p=[],setNodes:g,hasDefaultNodes:y,onNodesChange:x,nodeLookup:b,fitViewQueued:S,onNodesChangeMiddlewareMap:_}=a.getState();let C=p;for(const E of m)C=typeof E=="function"?E(C):E;let N=Ry({items:C,lookup:b});for(const E of _.values())N=E(N);y&&g(C),N.length>0?x?.(N):S&&window.requestAnimationFrame(()=>{const{fitViewQueued:E,nodes:z,setNodes:T}=a.getState();E&&T(z)})},[]),i=By(s),c=j.useCallback(m=>{const{edges:p=[],setEdges:g,hasDefaultEdges:y,onEdgesChange:x,edgeLookup:b}=a.getState();let S=p;for(const _ of m)S=typeof _=="function"?_(S):_;y?g(S):x&&x(Ry({items:S,lookup:b}))},[]),u=By(c),f=j.useMemo(()=>({nodeQueue:i,edgeQueue:u}),[]);return o.jsx(fv.Provider,{value:f,children:t})}function HT(){const t=j.useContext(fv);if(!t)throw new Error("useBatchContext must be used within a BatchProvider");return t}const $T=t=>!!t.panZoom;function ym(){const t=zT(),a=Ke(),s=HT(),i=Oe($T),c=j.useMemo(()=>{const u=x=>a.getState().nodeLookup.get(x),f=x=>{s.nodeQueue.push(x)},m=x=>{s.edgeQueue.push(x)},p=x=>{const{nodeLookup:b,nodeOrigin:S}=a.getState(),_=Oy(x)?x:b.get(x.id),C=_.parentId?L1(_.position,_.measured,_.parentId,b,S):_.position,N={..._,position:C,width:_.measured?.width??_.width,height:_.measured?.height??_.height};return Yr(N)},g=(x,b,S={replace:!1})=>{f(_=>_.map(C=>{if(C.id===x){const N=typeof b=="function"?b(C):b;return S.replace&&Oy(N)?N:{...C,...N}}return C}))},y=(x,b,S={replace:!1})=>{m(_=>_.map(C=>{if(C.id===x){const N=typeof b=="function"?b(C):b;return S.replace&&DT(N)?N:{...C,...N}}return C}))};return{getNodes:()=>a.getState().nodes.map(x=>({...x})),getNode:x=>u(x)?.internals.userNode,getInternalNode:u,getEdges:()=>{const{edges:x=[]}=a.getState();return x.map(b=>({...b}))},getEdge:x=>a.getState().edgeLookup.get(x),setNodes:f,setEdges:m,addNodes:x=>{const b=Array.isArray(x)?x:[x];s.nodeQueue.push(S=>[...S,...b])},addEdges:x=>{const b=Array.isArray(x)?x:[x];s.edgeQueue.push(S=>[...S,...b])},toObject:()=>{const{nodes:x=[],edges:b=[],transform:S}=a.getState(),[_,C,N]=S;return{nodes:x.map(E=>({...E})),edges:b.map(E=>({...E})),viewport:{x:_,y:C,zoom:N}}},deleteElements:async({nodes:x=[],edges:b=[]})=>{const{nodes:S,edges:_,onNodesDelete:C,onEdgesDelete:N,triggerNodeChanges:E,triggerEdgeChanges:z,onDelete:T,onBeforeDelete:k}=a.getState(),{nodes:w,edges:R}=await c8({nodesToRemove:x,edgesToRemove:b,nodes:S,edges:_,onBeforeDelete:k}),M=R.length>0,U=w.length>0;if(M){const L=R.map(Dy);N?.(R),z(L)}if(U){const L=w.map(Dy);C?.(w),E(L)}return(U||M)&&T?.({nodes:w,edges:R}),{deletedNodes:w,deletedEdges:R}},getIntersectingNodes:(x,b=!0,S)=>{const _=oy(x),C=_?x:p(x),N=S!==void 0;return C?(S||a.getState().nodes).filter(E=>{const z=a.getState().nodeLookup.get(E.id);if(z&&!_&&(E.id===x.id||!z.internals.positionAbsolute))return!1;const T=Yr(N?E:z),k=po(T,C);return b&&k>0||k>=T.width*T.height||k>=C.width*C.height}):[]},isNodeIntersecting:(x,b,S=!0)=>{const C=oy(x)?x:p(x);if(!C)return!1;const N=po(C,b);return S&&N>0||N>=b.width*b.height||N>=C.width*C.height},updateNode:g,updateNodeData:(x,b,S={replace:!1})=>{g(x,_=>{const C=typeof b=="function"?b(_):b;return S.replace?{..._,data:C}:{..._,data:{..._.data,...C}}},S)},updateEdge:y,updateEdgeData:(x,b,S={replace:!1})=>{y(x,_=>{const C=typeof b=="function"?b(_):b;return S.replace?{..._,data:C}:{..._,data:{..._.data,...C}}},S)},getNodesBounds:x=>{const{nodeLookup:b,nodeOrigin:S}=a.getState();return r8(x,{nodeLookup:b,nodeOrigin:S})},getHandleConnections:({type:x,id:b,nodeId:S})=>Array.from(a.getState().connectionLookup.get(`${S}-${x}${b?`-${b}`:""}`)?.values()??[]),getNodeConnections:({type:x,handleId:b,nodeId:S})=>Array.from(a.getState().connectionLookup.get(`${S}${x?b?`-${x}-${b}`:`-${x}`:""}`)?.values()??[]),fitView:async x=>{const b=a.getState().fitViewResolver??h8();return a.setState({fitViewQueued:!0,fitViewOptions:x,fitViewResolver:b}),s.nodeQueue.push(S=>[...S]),b.promise}}},[]);return j.useMemo(()=>({...c,...t,viewportInitialized:i}),[i])}const Ly=t=>t.selected,UT=typeof window<"u"?window:void 0;function qT({deleteKeyCode:t,multiSelectionKeyCode:a}){const s=Ke(),{deleteElements:i}=ym(),c=xo(t,{actInsideInputWithModifier:!1}),u=xo(a,{target:UT});j.useEffect(()=>{if(c){const{edges:f,nodes:m}=s.getState();i({nodes:m.filter(Ly),edges:f.filter(Ly)}),s.setState({nodesSelectionActive:!1})}},[c]),j.useEffect(()=>{s.setState({multiSelectionActive:u})},[u])}function VT(t){const a=Ke();j.useEffect(()=>{const s=()=>{if(!t.current||!(t.current.checkVisibility?.()??!0))return!1;const i=fm(t.current);(i.height===0||i.width===0)&&a.getState().onError?.("004",Hn.error004()),a.setState({width:i.width||500,height:i.height||500})};if(t.current){s(),window.addEventListener("resize",s);const i=new ResizeObserver(()=>s());return i.observe(t.current),()=>{window.removeEventListener("resize",s),i&&t.current&&i.unobserve(t.current)}}},[])}const mu={position:"absolute",width:"100%",height:"100%",top:0,left:0},YT=t=>({userSelectionActive:t.userSelectionActive,lib:t.lib,connectionInProgress:t.connection.inProgress});function PT({onPaneContextMenu:t,zoomOnScroll:a=!0,zoomOnPinch:s=!0,panOnScroll:i=!1,panOnScrollSpeed:c=.5,panOnScrollMode:u=Rs.Free,zoomOnDoubleClick:f=!0,panOnDrag:m=!0,defaultViewport:p,translateExtent:g,minZoom:y,maxZoom:x,zoomActivationKeyCode:b,preventScrolling:S=!0,children:_,noWheelClassName:C,noPanClassName:N,onViewportChange:E,isControlledViewport:z,paneClickDistance:T,selectionOnDrag:k}){const w=Ke(),R=j.useRef(null),{userSelectionActive:M,lib:U,connectionInProgress:L}=Oe(YT,We),Q=xo(b),G=j.useRef();VT(R);const F=j.useCallback(se=>{E?.({x:se[0],y:se[1],zoom:se[2]}),z||w.setState({transform:se})},[E,z]);return j.useEffect(()=>{if(R.current){G.current=Z8({domNode:R.current,minZoom:y,maxZoom:x,translateExtent:g,viewport:p,onDraggingChange:B=>w.setState({paneDragging:B}),onPanZoomStart:(B,D)=>{const{onViewportChangeStart:Y,onMoveStart:H}=w.getState();H?.(B,D),Y?.(D)},onPanZoom:(B,D)=>{const{onViewportChange:Y,onMove:H}=w.getState();H?.(B,D),Y?.(D)},onPanZoomEnd:(B,D)=>{const{onViewportChangeEnd:Y,onMoveEnd:H}=w.getState();H?.(B,D),Y?.(D)}});const{x:se,y:q,zoom:I}=G.current.getViewport();return w.setState({panZoom:G.current,transform:[se,q,I],domNode:R.current.closest(".react-flow")}),()=>{G.current?.destroy()}}},[]),j.useEffect(()=>{G.current?.update({onPaneContextMenu:t,zoomOnScroll:a,zoomOnPinch:s,panOnScroll:i,panOnScrollSpeed:c,panOnScrollMode:u,zoomOnDoubleClick:f,panOnDrag:m,zoomActivationKeyPressed:Q,preventScrolling:S,noPanClassName:N,userSelectionActive:M,noWheelClassName:C,lib:U,onTransformChange:F,connectionInProgress:L,selectionOnDrag:k,paneClickDistance:T})},[t,a,s,i,c,u,f,m,Q,S,N,M,C,U,F,L,k,T]),o.jsx("div",{className:"react-flow__renderer",ref:R,style:mu,children:_})}const XT=t=>({userSelectionActive:t.userSelectionActive,userSelectionRect:t.userSelectionRect});function IT(){const{userSelectionActive:t,userSelectionRect:a}=Oe(XT,We);return t&&a?o.jsx("div",{className:"react-flow__selection react-flow__container",style:{width:a.width,height:a.height,transform:`translate(${a.x}px, ${a.y}px)`}}):null}const nh=(t,a)=>s=>{s.target===a.current&&t?.(s)},GT=t=>({userSelectionActive:t.userSelectionActive,elementsSelectable:t.elementsSelectable,connectionInProgress:t.connection.inProgress,dragging:t.paneDragging});function QT({isSelecting:t,selectionKeyPressed:a,selectionMode:s=mo.Full,panOnDrag:i,paneClickDistance:c,selectionOnDrag:u,onSelectionStart:f,onSelectionEnd:m,onPaneClick:p,onPaneContextMenu:g,onPaneScroll:y,onPaneMouseEnter:x,onPaneMouseMove:b,onPaneMouseLeave:S,children:_}){const C=Ke(),{userSelectionActive:N,elementsSelectable:E,dragging:z,connectionInProgress:T}=Oe(GT,We),k=E&&(t||N),w=j.useRef(null),R=j.useRef(),M=j.useRef(new Set),U=j.useRef(new Set),L=j.useRef(!1),Q=Y=>{if(L.current||T){L.current=!1;return}p?.(Y),C.getState().resetSelectedElements(),C.setState({nodesSelectionActive:!1})},G=Y=>{if(Array.isArray(i)&&i?.includes(2)){Y.preventDefault();return}g?.(Y)},F=y?Y=>y(Y):void 0,se=Y=>{L.current&&(Y.stopPropagation(),L.current=!1)},q=Y=>{const{domNode:H}=C.getState();if(R.current=H?.getBoundingClientRect(),!R.current)return;const W=Y.target===w.current;if(!W&&!!Y.target.closest(".nokey")||!t||!(u&&W||a)||Y.button!==0||!Y.isPrimary)return;Y.target?.setPointerCapture?.(Y.pointerId),L.current=!1;const{x:te,y:ae}=jn(Y.nativeEvent,R.current);C.setState({userSelectionRect:{width:0,height:0,startX:te,startY:ae,x:te,y:ae}}),W||(Y.stopPropagation(),Y.preventDefault())},I=Y=>{const{userSelectionRect:H,transform:W,nodeLookup:O,edgeLookup:P,connectionLookup:te,triggerNodeChanges:ae,triggerEdgeChanges:re,defaultEdgeOptions:de,resetSelectedElements:ue}=C.getState();if(!R.current||!H)return;const{x:$,y:ce}=jn(Y.nativeEvent,R.current),{startX:he,startY:ve}=H;if(!L.current){const Ee=a?0:c;if(Math.hypot($-he,ce-ve)<=Ee)return;ue(),f?.(Y)}L.current=!0;const pe={startX:he,startY:ve,x:$<he?$:he,y:ce<ve?ce:ve,width:Math.abs($-he),height:Math.abs(ce-ve)},be=M.current,Se=U.current;M.current=new Set(um(O,pe,W,s===mo.Partial,!0).map(Ee=>Ee.id)),U.current=new Set;const Ae=de?.selectable??!0;for(const Ee of M.current){const $e=te.get(Ee);if($e)for(const{edgeId:Re}of $e.values()){const gt=P.get(Re);gt&&(gt.selectable??Ae)&&U.current.add(Re)}}if(!ly(be,M.current)){const Ee=kr(O,M.current,!0);ae(Ee)}if(!ly(Se,U.current)){const Ee=kr(P,U.current);re(Ee)}C.setState({userSelectionRect:pe,userSelectionActive:!0,nodesSelectionActive:!1})},B=Y=>{Y.button===0&&(Y.target?.releasePointerCapture?.(Y.pointerId),!N&&Y.target===w.current&&C.getState().userSelectionRect&&Q?.(Y),C.setState({userSelectionActive:!1,userSelectionRect:null}),L.current&&(m?.(Y),C.setState({nodesSelectionActive:M.current.size>0})))},D=i===!0||Array.isArray(i)&&i.includes(0);return o.jsxs("div",{className:ut(["react-flow__pane",{draggable:D,dragging:z,selection:t}]),onClick:k?void 0:nh(Q,w),onContextMenu:nh(G,w),onWheel:nh(F,w),onPointerEnter:k?void 0:x,onPointerMove:k?I:b,onPointerUp:k?B:void 0,onPointerDownCapture:k?q:void 0,onClickCapture:k?se:void 0,onPointerLeave:S,ref:w,style:mu,children:[_,o.jsx(IT,{})]})}function zh({id:t,store:a,unselect:s=!1,nodeRef:i}){const{addSelectedNodes:c,unselectNodesAndEdges:u,multiSelectionActive:f,nodeLookup:m,onError:p}=a.getState(),g=m.get(t);if(!g){p?.("012",Hn.error012(t));return}a.setState({nodesSelectionActive:!1}),g.selected?(s||g.selected&&f)&&(u({nodes:[g],edges:[]}),requestAnimationFrame(()=>i?.current?.blur())):c([t])}function hv({nodeRef:t,disabled:a=!1,noDragClassName:s,handleSelector:i,nodeId:c,isSelectable:u,nodeClickDistance:f}){const m=Ke(),[p,g]=j.useState(!1),y=j.useRef();return j.useEffect(()=>{y.current=O8({getStoreItems:()=>m.getState(),onNodeMouseDown:x=>{zh({id:x,store:m,nodeRef:t})},onDragStart:()=>{g(!0)},onDragStop:()=>{g(!1)}})},[]),j.useEffect(()=>{if(a)y.current?.destroy();else if(t.current)return y.current?.update({noDragClassName:s,handleSelector:i,domNode:t.current,isSelectable:u,nodeId:c,nodeClickDistance:f}),()=>{y.current?.destroy()}},[s,i,a,u,t,c]),p}const ZT=t=>a=>a.selected&&(a.draggable||t&&typeof a.draggable>"u");function mv(){const t=Ke();return j.useCallback(s=>{const{nodeExtent:i,snapToGrid:c,snapGrid:u,nodesDraggable:f,onError:m,updateNodePositions:p,nodeLookup:g,nodeOrigin:y}=t.getState(),x=new Map,b=ZT(f),S=c?u[0]:5,_=c?u[1]:5,C=s.direction.x*S*s.factor,N=s.direction.y*_*s.factor;for(const[,E]of g){if(!b(E))continue;let z={x:E.internals.positionAbsolute.x+C,y:E.internals.positionAbsolute.y+N};c&&(z=Mo(z,u));const{position:T,positionAbsolute:k}=z1({nodeId:E.id,nextPosition:z,nodeLookup:g,nodeExtent:i,nodeOrigin:y,onError:m});E.position=T,E.internals.positionAbsolute=k,x.set(E.id,E)}p(x)},[])}const bm=j.createContext(null),FT=bm.Provider;bm.Consumer;const pv=()=>j.useContext(bm),WT=t=>({connectOnClick:t.connectOnClick,noPanClassName:t.noPanClassName,rfId:t.rfId}),KT=(t,a,s)=>i=>{const{connectionClickStartHandle:c,connectionMode:u,connection:f}=i,{fromHandle:m,toHandle:p,isValid:g}=f,y=p?.nodeId===t&&p?.id===a&&p?.type===s;return{connectingFrom:m?.nodeId===t&&m?.id===a&&m?.type===s,connectingTo:y,clickConnecting:c?.nodeId===t&&c?.id===a&&c?.type===s,isPossibleEndHandle:u===qr.Strict?m?.type!==s:t!==m?.nodeId||a!==m?.id,connectionInProcess:!!m,clickConnectionInProcess:!!c,valid:y&&g}};function JT({type:t="source",position:a=ge.Top,isValidConnection:s,isConnectable:i=!0,isConnectableStart:c=!0,isConnectableEnd:u=!0,id:f,onConnect:m,children:p,className:g,onMouseDown:y,onTouchStart:x,...b},S){const _=f||null,C=t==="target",N=Ke(),E=pv(),{connectOnClick:z,noPanClassName:T,rfId:k}=Oe(WT,We),{connectingFrom:w,connectingTo:R,clickConnecting:M,isPossibleEndHandle:U,connectionInProcess:L,clickConnectionInProcess:Q,valid:G}=Oe(KT(E,_,t),We);E||N.getState().onError?.("010",Hn.error010());const F=I=>{const{defaultEdgeOptions:B,onConnect:D,hasDefaultEdges:Y}=N.getState(),H={...B,...I};if(Y){const{edges:W,setEdges:O}=N.getState();O(P1(H,W))}D?.(H),m?.(H)},se=I=>{if(!E)return;const B=U1(I.nativeEvent);if(c&&(B&&I.button===0||!B)){const D=N.getState();kh.onPointerDown(I.nativeEvent,{handleDomNode:I.currentTarget,autoPanOnConnect:D.autoPanOnConnect,connectionMode:D.connectionMode,connectionRadius:D.connectionRadius,domNode:D.domNode,nodeLookup:D.nodeLookup,lib:D.lib,isTarget:C,handleId:_,nodeId:E,flowId:D.rfId,panBy:D.panBy,cancelConnection:D.cancelConnection,onConnectStart:D.onConnectStart,onConnectEnd:D.onConnectEnd,updateConnection:D.updateConnection,onConnect:F,isValidConnection:s||D.isValidConnection,getTransform:()=>N.getState().transform,getFromHandle:()=>N.getState().connection.fromHandle,autoPanSpeed:D.autoPanSpeed,dragThreshold:D.connectionDragThreshold})}B?y?.(I):x?.(I)},q=I=>{const{onClickConnectStart:B,onClickConnectEnd:D,connectionClickStartHandle:Y,connectionMode:H,isValidConnection:W,lib:O,rfId:P,nodeLookup:te,connection:ae}=N.getState();if(!E||!Y&&!c)return;if(!Y){B?.(I.nativeEvent,{nodeId:E,handleId:_,handleType:t}),N.setState({connectionClickStartHandle:{nodeId:E,type:t,id:_}});return}const re=H1(I.target),de=s||W,{connection:ue,isValid:$}=kh.isValid(I.nativeEvent,{handle:{nodeId:E,id:_,type:t},connectionMode:H,fromNodeId:Y.nodeId,fromHandleId:Y.id||null,fromType:Y.type,isValidConnection:de,flowId:P,doc:re,lib:O,nodeLookup:te});$&&ue&&F(ue);const ce=structuredClone(ae);delete ce.inProgress,ce.toPosition=ce.toHandle?ce.toHandle.position:null,D?.(I,ce),N.setState({connectionClickStartHandle:null})};return o.jsx("div",{"data-handleid":_,"data-nodeid":E,"data-handlepos":a,"data-id":`${k}-${E}-${_}-${t}`,className:ut(["react-flow__handle",`react-flow__handle-${a}`,"nodrag",T,g,{source:!C,target:C,connectable:i,connectablestart:c,connectableend:u,clickconnecting:M,connectingfrom:w,connectingto:R,valid:G,connectionindicator:i&&(!L||U)&&(L||Q?u:c)}]),onMouseDown:se,onTouchStart:se,onClick:z?q:void 0,ref:S,...b,children:p})}const Ir=j.memo(dv(JT));function eM({data:t,isConnectable:a,sourcePosition:s=ge.Bottom}){return o.jsxs(o.Fragment,{children:[t?.label,o.jsx(Ir,{type:"source",position:s,isConnectable:a})]})}function tM({data:t,isConnectable:a,targetPosition:s=ge.Top,sourcePosition:i=ge.Bottom}){return o.jsxs(o.Fragment,{children:[o.jsx(Ir,{type:"target",position:s,isConnectable:a}),t?.label,o.jsx(Ir,{type:"source",position:i,isConnectable:a})]})}function nM(){return null}function aM({data:t,isConnectable:a,targetPosition:s=ge.Top}){return o.jsxs(o.Fragment,{children:[o.jsx(Ir,{type:"target",position:s,isConnectable:a}),t?.label]})}const Qc={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},Hy={input:eM,default:tM,output:aM,group:nM};function sM(t){return t.internals.handleBounds===void 0?{width:t.width??t.initialWidth??t.style?.width,height:t.height??t.initialHeight??t.style?.height}:{width:t.width??t.style?.width,height:t.height??t.style?.height}}const rM=t=>{const{width:a,height:s,x:i,y:c}=To(t.nodeLookup,{filter:u=>!!u.selected});return{width:wn(a)?a:null,height:wn(s)?s:null,userSelectionActive:t.userSelectionActive,transformString:`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]}) translate(${i}px,${c}px)`}};function iM({onSelectionContextMenu:t,noPanClassName:a,disableKeyboardA11y:s}){const i=Ke(),{width:c,height:u,transformString:f,userSelectionActive:m}=Oe(rM,We),p=mv(),g=j.useRef(null);if(j.useEffect(()=>{s||g.current?.focus({preventScroll:!0})},[s]),hv({nodeRef:g}),m||!c||!u)return null;const y=t?b=>{const S=i.getState().nodes.filter(_=>_.selected);t(b,S)}:void 0,x=b=>{Object.prototype.hasOwnProperty.call(Qc,b.key)&&(b.preventDefault(),p({direction:Qc[b.key],factor:b.shiftKey?4:1}))};return o.jsx("div",{className:ut(["react-flow__nodesselection","react-flow__container",a]),style:{transform:f},children:o.jsx("div",{ref:g,className:"react-flow__nodesselection-rect",onContextMenu:y,tabIndex:s?void 0:-1,onKeyDown:s?void 0:x,style:{width:c,height:u}})})}const $y=typeof window<"u"?window:void 0,oM=t=>({nodesSelectionActive:t.nodesSelectionActive,userSelectionActive:t.userSelectionActive});function gv({children:t,onPaneClick:a,onPaneMouseEnter:s,onPaneMouseMove:i,onPaneMouseLeave:c,onPaneContextMenu:u,onPaneScroll:f,paneClickDistance:m,deleteKeyCode:p,selectionKeyCode:g,selectionOnDrag:y,selectionMode:x,onSelectionStart:b,onSelectionEnd:S,multiSelectionKeyCode:_,panActivationKeyCode:C,zoomActivationKeyCode:N,elementsSelectable:E,zoomOnScroll:z,zoomOnPinch:T,panOnScroll:k,panOnScrollSpeed:w,panOnScrollMode:R,zoomOnDoubleClick:M,panOnDrag:U,defaultViewport:L,translateExtent:Q,minZoom:G,maxZoom:F,preventScrolling:se,onSelectionContextMenu:q,noWheelClassName:I,noPanClassName:B,disableKeyboardA11y:D,onViewportChange:Y,isControlledViewport:H}){const{nodesSelectionActive:W,userSelectionActive:O}=Oe(oM,We),P=xo(g,{target:$y}),te=xo(C,{target:$y}),ae=te||U,re=te||k,de=y&&ae!==!0,ue=P||O||de;return qT({deleteKeyCode:p,multiSelectionKeyCode:_}),o.jsx(PT,{onPaneContextMenu:u,elementsSelectable:E,zoomOnScroll:z,zoomOnPinch:T,panOnScroll:re,panOnScrollSpeed:w,panOnScrollMode:R,zoomOnDoubleClick:M,panOnDrag:!P&&ae,defaultViewport:L,translateExtent:Q,minZoom:G,maxZoom:F,zoomActivationKeyCode:N,preventScrolling:se,noWheelClassName:I,noPanClassName:B,onViewportChange:Y,isControlledViewport:H,paneClickDistance:m,selectionOnDrag:de,children:o.jsxs(QT,{onSelectionStart:b,onSelectionEnd:S,onPaneClick:a,onPaneMouseEnter:s,onPaneMouseMove:i,onPaneMouseLeave:c,onPaneContextMenu:u,onPaneScroll:f,panOnDrag:ae,isSelecting:!!ue,selectionMode:x,selectionKeyPressed:P,paneClickDistance:m,selectionOnDrag:de,children:[t,W&&o.jsx(iM,{onSelectionContextMenu:q,noPanClassName:B,disableKeyboardA11y:D})]})})}gv.displayName="FlowRenderer";const lM=j.memo(gv),cM=t=>a=>t?um(a.nodeLookup,{x:0,y:0,width:a.width,height:a.height},a.transform,!0).map(s=>s.id):Array.from(a.nodeLookup.keys());function uM(t){return Oe(j.useCallback(cM(t),[t]),We)}const dM=t=>t.updateNodeInternals;function fM(){const t=Oe(dM),[a]=j.useState(()=>typeof ResizeObserver>"u"?null:new ResizeObserver(s=>{const i=new Map;s.forEach(c=>{const u=c.target.getAttribute("data-id");i.set(u,{id:u,nodeElement:c.target,force:!0})}),t(i)}));return j.useEffect(()=>()=>{a?.disconnect()},[a]),a}function hM({node:t,nodeType:a,hasDimensions:s,resizeObserver:i}){const c=Ke(),u=j.useRef(null),f=j.useRef(null),m=j.useRef(t.sourcePosition),p=j.useRef(t.targetPosition),g=j.useRef(a),y=s&&!!t.internals.handleBounds;return j.useEffect(()=>{u.current&&!t.hidden&&(!y||f.current!==u.current)&&(f.current&&i?.unobserve(f.current),i?.observe(u.current),f.current=u.current)},[y,t.hidden]),j.useEffect(()=>()=>{f.current&&(i?.unobserve(f.current),f.current=null)},[]),j.useEffect(()=>{if(u.current){const x=g.current!==a,b=m.current!==t.sourcePosition,S=p.current!==t.targetPosition;(x||b||S)&&(g.current=a,m.current=t.sourcePosition,p.current=t.targetPosition,c.getState().updateNodeInternals(new Map([[t.id,{id:t.id,nodeElement:u.current,force:!0}]])))}},[t.id,a,t.sourcePosition,t.targetPosition]),u}function mM({id:t,onClick:a,onMouseEnter:s,onMouseMove:i,onMouseLeave:c,onContextMenu:u,onDoubleClick:f,nodesDraggable:m,elementsSelectable:p,nodesConnectable:g,nodesFocusable:y,resizeObserver:x,noDragClassName:b,noPanClassName:S,disableKeyboardA11y:_,rfId:C,nodeTypes:N,nodeClickDistance:E,onError:z}){const{node:T,internals:k,isParent:w}=Oe($=>{const ce=$.nodeLookup.get(t),he=$.parentLookup.has(t);return{node:ce,internals:ce.internals,isParent:he}},We);let R=T.type||"default",M=N?.[R]||Hy[R];M===void 0&&(z?.("003",Hn.error003(R)),R="default",M=N?.default||Hy.default);const U=!!(T.draggable||m&&typeof T.draggable>"u"),L=!!(T.selectable||p&&typeof T.selectable>"u"),Q=!!(T.connectable||g&&typeof T.connectable>"u"),G=!!(T.focusable||y&&typeof T.focusable>"u"),F=Ke(),se=B1(T),q=hM({node:T,nodeType:R,hasDimensions:se,resizeObserver:x}),I=hv({nodeRef:q,disabled:T.hidden||!U,noDragClassName:b,handleSelector:T.dragHandle,nodeId:t,isSelectable:L,nodeClickDistance:E}),B=mv();if(T.hidden)return null;const D=wa(T),Y=sM(T),H=L||U||a||s||i||c,W=s?$=>s($,{...k.userNode}):void 0,O=i?$=>i($,{...k.userNode}):void 0,P=c?$=>c($,{...k.userNode}):void 0,te=u?$=>u($,{...k.userNode}):void 0,ae=f?$=>f($,{...k.userNode}):void 0,re=$=>{const{selectNodesOnDrag:ce,nodeDragThreshold:he}=F.getState();L&&(!ce||!U||he>0)&&zh({id:t,store:F,nodeRef:q}),a&&a($,{...k.userNode})},de=$=>{if(!($1($.nativeEvent)||_)){if(C1.includes($.key)&&L){const ce=$.key==="Escape";zh({id:t,store:F,unselect:ce,nodeRef:q})}else if(U&&T.selected&&Object.prototype.hasOwnProperty.call(Qc,$.key)){$.preventDefault();const{ariaLabelConfig:ce}=F.getState();F.setState({ariaLiveMessage:ce["node.a11yDescription.ariaLiveMessage"]({direction:$.key.replace("Arrow","").toLowerCase(),x:~~k.positionAbsolute.x,y:~~k.positionAbsolute.y})}),B({direction:Qc[$.key],factor:$.shiftKey?4:1})}}},ue=()=>{if(_||!q.current?.matches(":focus-visible"))return;const{transform:$,width:ce,height:he,autoPanOnNodeFocus:ve,setCenter:pe}=F.getState();if(!ve)return;um(new Map([[t,T]]),{x:0,y:0,width:ce,height:he},$,!0).length>0||pe(T.position.x+D.width/2,T.position.y+D.height/2,{zoom:$[2]})};return o.jsx("div",{className:ut(["react-flow__node",`react-flow__node-${R}`,{[S]:U},T.className,{selected:T.selected,selectable:L,parent:w,draggable:U,dragging:I}]),ref:q,style:{zIndex:k.z,transform:`translate(${k.positionAbsolute.x}px,${k.positionAbsolute.y}px)`,pointerEvents:H?"all":"none",visibility:se?"visible":"hidden",...T.style,...Y},"data-id":t,"data-testid":`rf__node-${t}`,onMouseEnter:W,onMouseMove:O,onMouseLeave:P,onContextMenu:te,onClick:re,onDoubleClick:ae,onKeyDown:G?de:void 0,tabIndex:G?0:void 0,onFocus:G?ue:void 0,role:T.ariaRole??(G?"group":void 0),"aria-roledescription":"node","aria-describedby":_?void 0:`${rv}-${C}`,"aria-label":T.ariaLabel,...T.domAttributes,children:o.jsx(FT,{value:t,children:o.jsx(M,{id:t,data:T.data,type:R,positionAbsoluteX:k.positionAbsolute.x,positionAbsoluteY:k.positionAbsolute.y,selected:T.selected??!1,selectable:L,draggable:U,deletable:T.deletable??!0,isConnectable:Q,sourcePosition:T.sourcePosition,targetPosition:T.targetPosition,dragging:I,dragHandle:T.dragHandle,zIndex:k.z,parentId:T.parentId,...D})})})}var pM=j.memo(mM);const gM=t=>({nodesDraggable:t.nodesDraggable,nodesConnectable:t.nodesConnectable,nodesFocusable:t.nodesFocusable,elementsSelectable:t.elementsSelectable,onError:t.onError});function xv(t){const{nodesDraggable:a,nodesConnectable:s,nodesFocusable:i,elementsSelectable:c,onError:u}=Oe(gM,We),f=uM(t.onlyRenderVisibleElements),m=fM();return o.jsx("div",{className:"react-flow__nodes",style:mu,children:f.map(p=>o.jsx(pM,{id:p,nodeTypes:t.nodeTypes,nodeExtent:t.nodeExtent,onClick:t.onNodeClick,onMouseEnter:t.onNodeMouseEnter,onMouseMove:t.onNodeMouseMove,onMouseLeave:t.onNodeMouseLeave,onContextMenu:t.onNodeContextMenu,onDoubleClick:t.onNodeDoubleClick,noDragClassName:t.noDragClassName,noPanClassName:t.noPanClassName,rfId:t.rfId,disableKeyboardA11y:t.disableKeyboardA11y,resizeObserver:m,nodesDraggable:a,nodesConnectable:s,nodesFocusable:i,elementsSelectable:c,nodeClickDistance:t.nodeClickDistance,onError:u},p))})}xv.displayName="NodeRenderer";const xM=j.memo(xv);function yM(t){return Oe(j.useCallback(s=>{if(!t)return s.edges.map(c=>c.id);const i=[];if(s.width&&s.height)for(const c of s.edges){const u=s.nodeLookup.get(c.source),f=s.nodeLookup.get(c.target);u&&f&&x8({sourceNode:u,targetNode:f,width:s.width,height:s.height,transform:s.transform})&&i.push(c.id)}return i},[t]),We)}const bM=({color:t="none",strokeWidth:a=1})=>{const s={strokeWidth:a,...t&&{stroke:t}};return o.jsx("polyline",{className:"arrow",style:s,strokeLinecap:"round",fill:"none",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4"})},vM=({color:t="none",strokeWidth:a=1})=>{const s={strokeWidth:a,...t&&{stroke:t,fill:t}};return o.jsx("polyline",{className:"arrowclosed",style:s,strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"})},Uy={[Xc.Arrow]:bM,[Xc.ArrowClosed]:vM};function wM(t){const a=Ke();return j.useMemo(()=>Object.prototype.hasOwnProperty.call(Uy,t)?Uy[t]:(a.getState().onError?.("009",Hn.error009(t)),null),[t])}const jM=({id:t,type:a,color:s,width:i=12.5,height:c=12.5,markerUnits:u="strokeWidth",strokeWidth:f,orient:m="auto-start-reverse"})=>{const p=wM(a);return p?o.jsx("marker",{className:"react-flow__arrowhead",id:t,markerWidth:`${i}`,markerHeight:`${c}`,viewBox:"-10 -10 20 20",markerUnits:u,orient:m,refX:"0",refY:"0",children:o.jsx(p,{color:s,strokeWidth:f})}):null},yv=({defaultColor:t,rfId:a})=>{const s=Oe(u=>u.edges),i=Oe(u=>u.defaultEdgeOptions),c=j.useMemo(()=>S8(s,{id:a,defaultColor:t,defaultMarkerStart:i?.markerStart,defaultMarkerEnd:i?.markerEnd}),[s,i,a,t]);return c.length?o.jsx("svg",{className:"react-flow__marker","aria-hidden":"true",children:o.jsx("defs",{children:c.map(u=>o.jsx(jM,{id:u.id,type:u.type,color:u.color,width:u.width,height:u.height,markerUnits:u.markerUnits,strokeWidth:u.strokeWidth,orient:u.orient},u.id))})}):null};yv.displayName="MarkerDefinitions";var NM=j.memo(yv);function bv({x:t,y:a,label:s,labelStyle:i,labelShowBg:c=!0,labelBgStyle:u,labelBgPadding:f=[2,4],labelBgBorderRadius:m=2,children:p,className:g,...y}){const[x,b]=j.useState({x:1,y:0,width:0,height:0}),S=ut(["react-flow__edge-textwrapper",g]),_=j.useRef(null);return j.useEffect(()=>{if(_.current){const C=_.current.getBBox();b({x:C.x,y:C.y,width:C.width,height:C.height})}},[s]),s?o.jsxs("g",{transform:`translate(${t-x.width/2} ${a-x.height/2})`,className:S,visibility:x.width?"visible":"hidden",...y,children:[c&&o.jsx("rect",{width:x.width+2*f[0],x:-f[0],y:-f[1],height:x.height+2*f[1],className:"react-flow__edge-textbg",style:u,rx:m,ry:m}),o.jsx("text",{className:"react-flow__edge-text",y:x.height/2,dy:"0.3em",ref:_,style:i,children:s}),p]}):null}bv.displayName="EdgeText";const SM=j.memo(bv);function pu({path:t,labelX:a,labelY:s,label:i,labelStyle:c,labelShowBg:u,labelBgStyle:f,labelBgPadding:m,labelBgBorderRadius:p,interactionWidth:g=20,...y}){return o.jsxs(o.Fragment,{children:[o.jsx("path",{...y,d:t,fill:"none",className:ut(["react-flow__edge-path",y.className])}),g?o.jsx("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:g,className:"react-flow__edge-interaction"}):null,i&&wn(a)&&wn(s)?o.jsx(SM,{x:a,y:s,label:i,labelStyle:c,labelShowBg:u,labelBgStyle:f,labelBgPadding:m,labelBgBorderRadius:p}):null]})}function qy({pos:t,x1:a,y1:s,x2:i,y2:c}){return t===ge.Left||t===ge.Right?[.5*(a+i),s]:[a,.5*(s+c)]}function vv({sourceX:t,sourceY:a,sourcePosition:s=ge.Bottom,targetX:i,targetY:c,targetPosition:u=ge.Top}){const[f,m]=qy({pos:s,x1:t,y1:a,x2:i,y2:c}),[p,g]=qy({pos:u,x1:i,y1:c,x2:t,y2:a}),[y,x,b,S]=q1({sourceX:t,sourceY:a,targetX:i,targetY:c,sourceControlX:f,sourceControlY:m,targetControlX:p,targetControlY:g});return[`M${t},${a} C${f},${m} ${p},${g} ${i},${c}`,y,x,b,S]}function wv(t){return j.memo(({id:a,sourceX:s,sourceY:i,targetX:c,targetY:u,sourcePosition:f,targetPosition:m,label:p,labelStyle:g,labelShowBg:y,labelBgStyle:x,labelBgPadding:b,labelBgBorderRadius:S,style:_,markerEnd:C,markerStart:N,interactionWidth:E})=>{const[z,T,k]=vv({sourceX:s,sourceY:i,sourcePosition:f,targetX:c,targetY:u,targetPosition:m}),w=t.isInternal?void 0:a;return o.jsx(pu,{id:w,path:z,labelX:T,labelY:k,label:p,labelStyle:g,labelShowBg:y,labelBgStyle:x,labelBgPadding:b,labelBgBorderRadius:S,style:_,markerEnd:C,markerStart:N,interactionWidth:E})})}const _M=wv({isInternal:!1}),jv=wv({isInternal:!0});_M.displayName="SimpleBezierEdge";jv.displayName="SimpleBezierEdgeInternal";function Nv(t){return j.memo(({id:a,sourceX:s,sourceY:i,targetX:c,targetY:u,label:f,labelStyle:m,labelShowBg:p,labelBgStyle:g,labelBgPadding:y,labelBgBorderRadius:x,style:b,sourcePosition:S=ge.Bottom,targetPosition:_=ge.Top,markerEnd:C,markerStart:N,pathOptions:E,interactionWidth:z})=>{const[T,k,w]=Th({sourceX:s,sourceY:i,sourcePosition:S,targetX:c,targetY:u,targetPosition:_,borderRadius:E?.borderRadius,offset:E?.offset,stepPosition:E?.stepPosition}),R=t.isInternal?void 0:a;return o.jsx(pu,{id:R,path:T,labelX:k,labelY:w,label:f,labelStyle:m,labelShowBg:p,labelBgStyle:g,labelBgPadding:y,labelBgBorderRadius:x,style:b,markerEnd:C,markerStart:N,interactionWidth:z})})}const Sv=Nv({isInternal:!1}),_v=Nv({isInternal:!0});Sv.displayName="SmoothStepEdge";_v.displayName="SmoothStepEdgeInternal";function Ev(t){return j.memo(({id:a,...s})=>{const i=t.isInternal?void 0:a;return o.jsx(Sv,{...s,id:i,pathOptions:j.useMemo(()=>({borderRadius:0,offset:s.pathOptions?.offset}),[s.pathOptions?.offset])})})}const EM=Ev({isInternal:!1}),Cv=Ev({isInternal:!0});EM.displayName="StepEdge";Cv.displayName="StepEdgeInternal";function Tv(t){return j.memo(({id:a,sourceX:s,sourceY:i,targetX:c,targetY:u,label:f,labelStyle:m,labelShowBg:p,labelBgStyle:g,labelBgPadding:y,labelBgBorderRadius:x,style:b,markerEnd:S,markerStart:_,interactionWidth:C})=>{const[N,E,z]=X1({sourceX:s,sourceY:i,targetX:c,targetY:u}),T=t.isInternal?void 0:a;return o.jsx(pu,{id:T,path:N,labelX:E,labelY:z,label:f,labelStyle:m,labelShowBg:p,labelBgStyle:g,labelBgPadding:y,labelBgBorderRadius:x,style:b,markerEnd:S,markerStart:_,interactionWidth:C})})}const CM=Tv({isInternal:!1}),Mv=Tv({isInternal:!0});CM.displayName="StraightEdge";Mv.displayName="StraightEdgeInternal";function Av(t){return j.memo(({id:a,sourceX:s,sourceY:i,targetX:c,targetY:u,sourcePosition:f=ge.Bottom,targetPosition:m=ge.Top,label:p,labelStyle:g,labelShowBg:y,labelBgStyle:x,labelBgPadding:b,labelBgBorderRadius:S,style:_,markerEnd:C,markerStart:N,pathOptions:E,interactionWidth:z})=>{const[T,k,w]=V1({sourceX:s,sourceY:i,sourcePosition:f,targetX:c,targetY:u,targetPosition:m,curvature:E?.curvature}),R=t.isInternal?void 0:a;return o.jsx(pu,{id:R,path:T,labelX:k,labelY:w,label:p,labelStyle:g,labelShowBg:y,labelBgStyle:x,labelBgPadding:b,labelBgBorderRadius:S,style:_,markerEnd:C,markerStart:N,interactionWidth:z})})}const TM=Av({isInternal:!1}),kv=Av({isInternal:!0});TM.displayName="BezierEdge";kv.displayName="BezierEdgeInternal";const Vy={default:kv,straight:Mv,step:Cv,smoothstep:_v,simplebezier:jv},Yy={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},MM=(t,a,s)=>s===ge.Left?t-a:s===ge.Right?t+a:t,AM=(t,a,s)=>s===ge.Top?t-a:s===ge.Bottom?t+a:t,Py="react-flow__edgeupdater";function Xy({position:t,centerX:a,centerY:s,radius:i=10,onMouseDown:c,onMouseEnter:u,onMouseOut:f,type:m}){return o.jsx("circle",{onMouseDown:c,onMouseEnter:u,onMouseOut:f,className:ut([Py,`${Py}-${m}`]),cx:MM(a,i,t),cy:AM(s,i,t),r:i,stroke:"transparent",fill:"transparent"})}function kM({isReconnectable:t,reconnectRadius:a,edge:s,sourceX:i,sourceY:c,targetX:u,targetY:f,sourcePosition:m,targetPosition:p,onReconnect:g,onReconnectStart:y,onReconnectEnd:x,setReconnecting:b,setUpdateHover:S}){const _=Ke(),C=(k,w)=>{if(k.button!==0)return;const{autoPanOnConnect:R,domNode:M,isValidConnection:U,connectionMode:L,connectionRadius:Q,lib:G,onConnectStart:F,onConnectEnd:se,cancelConnection:q,nodeLookup:I,rfId:B,panBy:D,updateConnection:Y}=_.getState(),H=w.type==="target",W=(te,ae)=>{b(!1),x?.(te,s,w.type,ae)},O=te=>g?.(s,te),P=(te,ae)=>{b(!0),y?.(k,s,w.type),F?.(te,ae)};kh.onPointerDown(k.nativeEvent,{autoPanOnConnect:R,connectionMode:L,connectionRadius:Q,domNode:M,handleId:w.id,nodeId:w.nodeId,nodeLookup:I,isTarget:H,edgeUpdaterType:w.type,lib:G,flowId:B,cancelConnection:q,panBy:D,isValidConnection:U,onConnect:O,onConnectStart:P,onConnectEnd:se,onReconnectEnd:W,updateConnection:Y,getTransform:()=>_.getState().transform,getFromHandle:()=>_.getState().connection.fromHandle,dragThreshold:_.getState().connectionDragThreshold,handleDomNode:k.currentTarget})},N=k=>C(k,{nodeId:s.target,id:s.targetHandle??null,type:"target"}),E=k=>C(k,{nodeId:s.source,id:s.sourceHandle??null,type:"source"}),z=()=>S(!0),T=()=>S(!1);return o.jsxs(o.Fragment,{children:[(t===!0||t==="source")&&o.jsx(Xy,{position:m,centerX:i,centerY:c,radius:a,onMouseDown:N,onMouseEnter:z,onMouseOut:T,type:"source"}),(t===!0||t==="target")&&o.jsx(Xy,{position:p,centerX:u,centerY:f,radius:a,onMouseDown:E,onMouseEnter:z,onMouseOut:T,type:"target"})]})}function zM({id:t,edgesFocusable:a,edgesReconnectable:s,elementsSelectable:i,onClick:c,onDoubleClick:u,onContextMenu:f,onMouseEnter:m,onMouseMove:p,onMouseLeave:g,reconnectRadius:y,onReconnect:x,onReconnectStart:b,onReconnectEnd:S,rfId:_,edgeTypes:C,noPanClassName:N,onError:E,disableKeyboardA11y:z}){let T=Oe(pe=>pe.edgeLookup.get(t));const k=Oe(pe=>pe.defaultEdgeOptions);T=k?{...k,...T}:T;let w=T.type||"default",R=C?.[w]||Vy[w];R===void 0&&(E?.("011",Hn.error011(w)),w="default",R=C?.default||Vy.default);const M=!!(T.focusable||a&&typeof T.focusable>"u"),U=typeof x<"u"&&(T.reconnectable||s&&typeof T.reconnectable>"u"),L=!!(T.selectable||i&&typeof T.selectable>"u"),Q=j.useRef(null),[G,F]=j.useState(!1),[se,q]=j.useState(!1),I=Ke(),{zIndex:B,sourceX:D,sourceY:Y,targetX:H,targetY:W,sourcePosition:O,targetPosition:P}=Oe(j.useCallback(pe=>{const be=pe.nodeLookup.get(T.source),Se=pe.nodeLookup.get(T.target);if(!be||!Se)return{zIndex:T.zIndex,...Yy};const Ae=N8({id:t,sourceNode:be,targetNode:Se,sourceHandle:T.sourceHandle||null,targetHandle:T.targetHandle||null,connectionMode:pe.connectionMode,onError:E});return{zIndex:g8({selected:T.selected,zIndex:T.zIndex,sourceNode:be,targetNode:Se,elevateOnSelect:pe.elevateEdgesOnSelect,zIndexMode:pe.zIndexMode}),...Ae||Yy}},[T.source,T.target,T.sourceHandle,T.targetHandle,T.selected,T.zIndex]),We),te=j.useMemo(()=>T.markerStart?`url('#${Mh(T.markerStart,_)}')`:void 0,[T.markerStart,_]),ae=j.useMemo(()=>T.markerEnd?`url('#${Mh(T.markerEnd,_)}')`:void 0,[T.markerEnd,_]);if(T.hidden||D===null||Y===null||H===null||W===null)return null;const re=pe=>{const{addSelectedEdges:be,unselectNodesAndEdges:Se,multiSelectionActive:Ae}=I.getState();L&&(I.setState({nodesSelectionActive:!1}),T.selected&&Ae?(Se({nodes:[],edges:[T]}),Q.current?.blur()):be([t])),c&&c(pe,T)},de=u?pe=>{u(pe,{...T})}:void 0,ue=f?pe=>{f(pe,{...T})}:void 0,$=m?pe=>{m(pe,{...T})}:void 0,ce=p?pe=>{p(pe,{...T})}:void 0,he=g?pe=>{g(pe,{...T})}:void 0,ve=pe=>{if(!z&&C1.includes(pe.key)&&L){const{unselectNodesAndEdges:be,addSelectedEdges:Se}=I.getState();pe.key==="Escape"?(Q.current?.blur(),be({edges:[T]})):Se([t])}};return o.jsx("svg",{style:{zIndex:B},children:o.jsxs("g",{className:ut(["react-flow__edge",`react-flow__edge-${w}`,T.className,N,{selected:T.selected,animated:T.animated,inactive:!L&&!c,updating:G,selectable:L}]),onClick:re,onDoubleClick:de,onContextMenu:ue,onMouseEnter:$,onMouseMove:ce,onMouseLeave:he,onKeyDown:M?ve:void 0,tabIndex:M?0:void 0,role:T.ariaRole??(M?"group":"img"),"aria-roledescription":"edge","data-id":t,"data-testid":`rf__edge-${t}`,"aria-label":T.ariaLabel===null?void 0:T.ariaLabel||`Edge from ${T.source} to ${T.target}`,"aria-describedby":M?`${iv}-${_}`:void 0,ref:Q,...T.domAttributes,children:[!se&&o.jsx(R,{id:t,source:T.source,target:T.target,type:T.type,selected:T.selected,animated:T.animated,selectable:L,deletable:T.deletable??!0,label:T.label,labelStyle:T.labelStyle,labelShowBg:T.labelShowBg,labelBgStyle:T.labelBgStyle,labelBgPadding:T.labelBgPadding,labelBgBorderRadius:T.labelBgBorderRadius,sourceX:D,sourceY:Y,targetX:H,targetY:W,sourcePosition:O,targetPosition:P,data:T.data,style:T.style,sourceHandleId:T.sourceHandle,targetHandleId:T.targetHandle,markerStart:te,markerEnd:ae,pathOptions:"pathOptions"in T?T.pathOptions:void 0,interactionWidth:T.interactionWidth}),U&&o.jsx(kM,{edge:T,isReconnectable:U,reconnectRadius:y,onReconnect:x,onReconnectStart:b,onReconnectEnd:S,sourceX:D,sourceY:Y,targetX:H,targetY:W,sourcePosition:O,targetPosition:P,setUpdateHover:F,setReconnecting:q})]})})}var RM=j.memo(zM);const DM=t=>({edgesFocusable:t.edgesFocusable,edgesReconnectable:t.edgesReconnectable,elementsSelectable:t.elementsSelectable,connectionMode:t.connectionMode,onError:t.onError});function zv({defaultMarkerColor:t,onlyRenderVisibleElements:a,rfId:s,edgeTypes:i,noPanClassName:c,onReconnect:u,onEdgeContextMenu:f,onEdgeMouseEnter:m,onEdgeMouseMove:p,onEdgeMouseLeave:g,onEdgeClick:y,reconnectRadius:x,onEdgeDoubleClick:b,onReconnectStart:S,onReconnectEnd:_,disableKeyboardA11y:C}){const{edgesFocusable:N,edgesReconnectable:E,elementsSelectable:z,onError:T}=Oe(DM,We),k=yM(a);return o.jsxs("div",{className:"react-flow__edges",children:[o.jsx(NM,{defaultColor:t,rfId:s}),k.map(w=>o.jsx(RM,{id:w,edgesFocusable:N,edgesReconnectable:E,elementsSelectable:z,noPanClassName:c,onReconnect:u,onContextMenu:f,onMouseEnter:m,onMouseMove:p,onMouseLeave:g,onClick:y,reconnectRadius:x,onDoubleClick:b,onReconnectStart:S,onReconnectEnd:_,rfId:s,onError:T,edgeTypes:i,disableKeyboardA11y:C},w))]})}zv.displayName="EdgeRenderer";const OM=j.memo(zv),BM=t=>`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`;function LM({children:t}){const a=Oe(BM);return o.jsx("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:a},children:t})}function HM(t){const a=ym(),s=j.useRef(!1);j.useEffect(()=>{!s.current&&a.viewportInitialized&&t&&(setTimeout(()=>t(a),1),s.current=!0)},[t,a.viewportInitialized])}const $M=t=>t.panZoom?.syncViewport;function UM(t){const a=Oe($M),s=Ke();return j.useEffect(()=>{t&&(a?.(t),s.setState({transform:[t.x,t.y,t.zoom]}))},[t,a]),null}function qM(t){return t.connection.inProgress?{...t.connection,to:Ao(t.connection.to,t.transform)}:{...t.connection}}function VM(t){return qM}function YM(t){const a=VM();return Oe(a,We)}const PM=t=>({nodesConnectable:t.nodesConnectable,isValid:t.connection.isValid,inProgress:t.connection.inProgress,width:t.width,height:t.height});function XM({containerStyle:t,style:a,type:s,component:i}){const{nodesConnectable:c,width:u,height:f,isValid:m,inProgress:p}=Oe(PM,We);return!(u&&c&&p)?null:o.jsx("svg",{style:t,width:u,height:f,className:"react-flow__connectionline react-flow__container",children:o.jsx("g",{className:ut(["react-flow__connection",A1(m)]),children:o.jsx(Rv,{style:a,type:s,CustomComponent:i,isValid:m})})})}const Rv=({style:t,type:a=Ja.Bezier,CustomComponent:s,isValid:i})=>{const{inProgress:c,from:u,fromNode:f,fromHandle:m,fromPosition:p,to:g,toNode:y,toHandle:x,toPosition:b,pointer:S}=YM();if(!c)return;if(s)return o.jsx(s,{connectionLineType:a,connectionLineStyle:t,fromNode:f,fromHandle:m,fromX:u.x,fromY:u.y,toX:g.x,toY:g.y,fromPosition:p,toPosition:b,connectionStatus:A1(i),toNode:y,toHandle:x,pointer:S});let _="";const C={sourceX:u.x,sourceY:u.y,sourcePosition:p,targetX:g.x,targetY:g.y,targetPosition:b};switch(a){case Ja.Bezier:[_]=V1(C);break;case Ja.SimpleBezier:[_]=vv(C);break;case Ja.Step:[_]=Th({...C,borderRadius:0});break;case Ja.SmoothStep:[_]=Th(C);break;default:[_]=X1(C)}return o.jsx("path",{d:_,fill:"none",className:"react-flow__connection-path",style:t})};Rv.displayName="ConnectionLine";const IM={};function Iy(t=IM){j.useRef(t),Ke(),j.useEffect(()=>{},[t])}function GM(){Ke(),j.useRef(!1),j.useEffect(()=>{},[])}function Dv({nodeTypes:t,edgeTypes:a,onInit:s,onNodeClick:i,onEdgeClick:c,onNodeDoubleClick:u,onEdgeDoubleClick:f,onNodeMouseEnter:m,onNodeMouseMove:p,onNodeMouseLeave:g,onNodeContextMenu:y,onSelectionContextMenu:x,onSelectionStart:b,onSelectionEnd:S,connectionLineType:_,connectionLineStyle:C,connectionLineComponent:N,connectionLineContainerStyle:E,selectionKeyCode:z,selectionOnDrag:T,selectionMode:k,multiSelectionKeyCode:w,panActivationKeyCode:R,zoomActivationKeyCode:M,deleteKeyCode:U,onlyRenderVisibleElements:L,elementsSelectable:Q,defaultViewport:G,translateExtent:F,minZoom:se,maxZoom:q,preventScrolling:I,defaultMarkerColor:B,zoomOnScroll:D,zoomOnPinch:Y,panOnScroll:H,panOnScrollSpeed:W,panOnScrollMode:O,zoomOnDoubleClick:P,panOnDrag:te,onPaneClick:ae,onPaneMouseEnter:re,onPaneMouseMove:de,onPaneMouseLeave:ue,onPaneScroll:$,onPaneContextMenu:ce,paneClickDistance:he,nodeClickDistance:ve,onEdgeContextMenu:pe,onEdgeMouseEnter:be,onEdgeMouseMove:Se,onEdgeMouseLeave:Ae,reconnectRadius:Ee,onReconnect:$e,onReconnectStart:Re,onReconnectEnd:gt,noDragClassName:ht,noWheelClassName:un,noPanClassName:Sn,disableKeyboardA11y:_n,nodeExtent:at,rfId:qn,viewport:dn,onViewportChange:Wt}){return Iy(t),Iy(a),GM(),HM(s),UM(dn),o.jsx(lM,{onPaneClick:ae,onPaneMouseEnter:re,onPaneMouseMove:de,onPaneMouseLeave:ue,onPaneContextMenu:ce,onPaneScroll:$,paneClickDistance:he,deleteKeyCode:U,selectionKeyCode:z,selectionOnDrag:T,selectionMode:k,onSelectionStart:b,onSelectionEnd:S,multiSelectionKeyCode:w,panActivationKeyCode:R,zoomActivationKeyCode:M,elementsSelectable:Q,zoomOnScroll:D,zoomOnPinch:Y,zoomOnDoubleClick:P,panOnScroll:H,panOnScrollSpeed:W,panOnScrollMode:O,panOnDrag:te,defaultViewport:G,translateExtent:F,minZoom:se,maxZoom:q,onSelectionContextMenu:x,preventScrolling:I,noDragClassName:ht,noWheelClassName:un,noPanClassName:Sn,disableKeyboardA11y:_n,onViewportChange:Wt,isControlledViewport:!!dn,children:o.jsxs(LM,{children:[o.jsx(OM,{edgeTypes:a,onEdgeClick:c,onEdgeDoubleClick:f,onReconnect:$e,onReconnectStart:Re,onReconnectEnd:gt,onlyRenderVisibleElements:L,onEdgeContextMenu:pe,onEdgeMouseEnter:be,onEdgeMouseMove:Se,onEdgeMouseLeave:Ae,reconnectRadius:Ee,defaultMarkerColor:B,noPanClassName:Sn,disableKeyboardA11y:_n,rfId:qn}),o.jsx(XM,{style:C,type:_,component:N,containerStyle:E}),o.jsx("div",{className:"react-flow__edgelabel-renderer"}),o.jsx(xM,{nodeTypes:t,onNodeClick:i,onNodeDoubleClick:u,onNodeMouseEnter:m,onNodeMouseMove:p,onNodeMouseLeave:g,onNodeContextMenu:y,nodeClickDistance:ve,onlyRenderVisibleElements:L,noPanClassName:Sn,noDragClassName:ht,disableKeyboardA11y:_n,nodeExtent:at,rfId:qn}),o.jsx("div",{className:"react-flow__viewport-portal"})]})})}Dv.displayName="GraphView";const QM=j.memo(Dv),Gy=({nodes:t,edges:a,defaultNodes:s,defaultEdges:i,width:c,height:u,fitView:f,fitViewOptions:m,minZoom:p=.5,maxZoom:g=2,nodeOrigin:y,nodeExtent:x,zIndexMode:b="basic"}={})=>{const S=new Map,_=new Map,C=new Map,N=new Map,E=i??a??[],z=s??t??[],T=y??[0,0],k=x??ho;Q1(C,N,E);const w=Ah(z,S,_,{nodeOrigin:T,nodeExtent:k,zIndexMode:b});let R=[0,0,1];if(f&&c&&u){const M=To(S,{filter:G=>!!((G.width||G.initialWidth)&&(G.height||G.initialHeight))}),{x:U,y:L,zoom:Q}=dm(M,c,u,p,g,m?.padding??.1);R=[U,L,Q]}return{rfId:"1",width:c??0,height:u??0,transform:R,nodes:z,nodesInitialized:w,nodeLookup:S,parentLookup:_,edges:E,edgeLookup:N,connectionLookup:C,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:s!==void 0,hasDefaultEdges:i!==void 0,panZoom:null,minZoom:p,maxZoom:g,translateExtent:ho,nodeExtent:k,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:qr.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:T,nodeDragThreshold:1,connectionDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!0,selectNodesOnDrag:!0,multiSelectionActive:!1,fitViewQueued:f??!1,fitViewOptions:m,fitViewResolver:null,connection:{...M1},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanOnNodeFocus:!0,autoPanSpeed:15,connectionRadius:20,onError:u8,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1,ariaLabelConfig:T1,zIndexMode:b,onNodesChangeMiddlewareMap:new Map,onEdgesChangeMiddlewareMap:new Map}},ZM=({nodes:t,edges:a,defaultNodes:s,defaultEdges:i,width:c,height:u,fitView:f,fitViewOptions:m,minZoom:p,maxZoom:g,nodeOrigin:y,nodeExtent:x,zIndexMode:b})=>hT((S,_)=>{async function C(){const{nodeLookup:N,panZoom:E,fitViewOptions:z,fitViewResolver:T,width:k,height:w,minZoom:R,maxZoom:M}=_();E&&(await l8({nodes:N,width:k,height:w,panZoom:E,minZoom:R,maxZoom:M},z),T?.resolve(!0),S({fitViewResolver:null}))}return{...Gy({nodes:t,edges:a,width:c,height:u,fitView:f,fitViewOptions:m,minZoom:p,maxZoom:g,nodeOrigin:y,nodeExtent:x,defaultNodes:s,defaultEdges:i,zIndexMode:b}),setNodes:N=>{const{nodeLookup:E,parentLookup:z,nodeOrigin:T,elevateNodesOnSelect:k,fitViewQueued:w,zIndexMode:R}=_(),M=Ah(N,E,z,{nodeOrigin:T,nodeExtent:x,elevateNodesOnSelect:k,checkEquality:!0,zIndexMode:R});w&&M?(C(),S({nodes:N,nodesInitialized:M,fitViewQueued:!1,fitViewOptions:void 0})):S({nodes:N,nodesInitialized:M})},setEdges:N=>{const{connectionLookup:E,edgeLookup:z}=_();Q1(E,z,N),S({edges:N})},setDefaultNodesAndEdges:(N,E)=>{if(N){const{setNodes:z}=_();z(N),S({hasDefaultNodes:!0})}if(E){const{setEdges:z}=_();z(E),S({hasDefaultEdges:!0})}},updateNodeInternals:N=>{const{triggerNodeChanges:E,nodeLookup:z,parentLookup:T,domNode:k,nodeOrigin:w,nodeExtent:R,debug:M,fitViewQueued:U,zIndexMode:L}=_(),{changes:Q,updatedInternals:G}=k8(N,z,T,k,w,R,L);G&&(C8(z,T,{nodeOrigin:w,nodeExtent:R,zIndexMode:L}),U?(C(),S({fitViewQueued:!1,fitViewOptions:void 0})):S({}),Q?.length>0&&(M&&console.log("React Flow: trigger node changes",Q),E?.(Q)))},updateNodePositions:(N,E=!1)=>{const z=[];let T=[];const{nodeLookup:k,triggerNodeChanges:w,connection:R,updateConnection:M,onNodesChangeMiddlewareMap:U}=_();for(const[L,Q]of N){const G=k.get(L),F=!!(G?.expandParent&&G?.parentId&&Q?.position),se={id:L,type:"position",position:F?{x:Math.max(0,Q.position.x),y:Math.max(0,Q.position.y)}:Q.position,dragging:E};if(G&&R.inProgress&&R.fromNode.id===G.id){const q=Hs(G,R.fromHandle,ge.Left,!0);M({...R,from:q})}F&&G.parentId&&z.push({id:L,parentId:G.parentId,rect:{...Q.internals.positionAbsolute,width:Q.measured.width??0,height:Q.measured.height??0}}),T.push(se)}if(z.length>0){const{parentLookup:L,nodeOrigin:Q}=_(),G=xm(z,k,L,Q);T.push(...G)}for(const L of U.values())T=L(T);w(T)},triggerNodeChanges:N=>{const{onNodesChange:E,setNodes:z,nodes:T,hasDefaultNodes:k,debug:w}=_();if(N?.length){if(k){const R=cv(N,T);z(R)}w&&console.log("React Flow: trigger node changes",N),E?.(N)}},triggerEdgeChanges:N=>{const{onEdgesChange:E,setEdges:z,edges:T,hasDefaultEdges:k,debug:w}=_();if(N?.length){if(k){const R=uv(N,T);z(R)}w&&console.log("React Flow: trigger edge changes",N),E?.(N)}},addSelectedNodes:N=>{const{multiSelectionActive:E,edgeLookup:z,nodeLookup:T,triggerNodeChanges:k,triggerEdgeChanges:w}=_();if(E){const R=N.map(M=>Ts(M,!0));k(R);return}k(kr(T,new Set([...N]),!0)),w(kr(z))},addSelectedEdges:N=>{const{multiSelectionActive:E,edgeLookup:z,nodeLookup:T,triggerNodeChanges:k,triggerEdgeChanges:w}=_();if(E){const R=N.map(M=>Ts(M,!0));w(R);return}w(kr(z,new Set([...N]))),k(kr(T,new Set,!0))},unselectNodesAndEdges:({nodes:N,edges:E}={})=>{const{edges:z,nodes:T,nodeLookup:k,triggerNodeChanges:w,triggerEdgeChanges:R}=_(),M=N||T,U=E||z,L=M.map(G=>{const F=k.get(G.id);return F&&(F.selected=!1),Ts(G.id,!1)}),Q=U.map(G=>Ts(G.id,!1));w(L),R(Q)},setMinZoom:N=>{const{panZoom:E,maxZoom:z}=_();E?.setScaleExtent([N,z]),S({minZoom:N})},setMaxZoom:N=>{const{panZoom:E,minZoom:z}=_();E?.setScaleExtent([z,N]),S({maxZoom:N})},setTranslateExtent:N=>{_().panZoom?.setTranslateExtent(N),S({translateExtent:N})},resetSelectedElements:()=>{const{edges:N,nodes:E,triggerNodeChanges:z,triggerEdgeChanges:T,elementsSelectable:k}=_();if(!k)return;const w=E.reduce((M,U)=>U.selected?[...M,Ts(U.id,!1)]:M,[]),R=N.reduce((M,U)=>U.selected?[...M,Ts(U.id,!1)]:M,[]);z(w),T(R)},setNodeExtent:N=>{const{nodes:E,nodeLookup:z,parentLookup:T,nodeOrigin:k,elevateNodesOnSelect:w,nodeExtent:R,zIndexMode:M}=_();N[0][0]===R[0][0]&&N[0][1]===R[0][1]&&N[1][0]===R[1][0]&&N[1][1]===R[1][1]||(Ah(E,z,T,{nodeOrigin:k,nodeExtent:N,elevateNodesOnSelect:w,checkEquality:!1,zIndexMode:M}),S({nodeExtent:N}))},panBy:N=>{const{transform:E,width:z,height:T,panZoom:k,translateExtent:w}=_();return z8({delta:N,panZoom:k,transform:E,translateExtent:w,width:z,height:T})},setCenter:async(N,E,z)=>{const{width:T,height:k,maxZoom:w,panZoom:R}=_();if(!R)return Promise.resolve(!1);const M=typeof z?.zoom<"u"?z.zoom:w;return await R.setViewport({x:T/2-N*M,y:k/2-E*M,zoom:M},{duration:z?.duration,ease:z?.ease,interpolate:z?.interpolate}),Promise.resolve(!0)},cancelConnection:()=>{S({connection:{...M1}})},updateConnection:N=>{S({connection:N})},reset:()=>S({...Gy()})}},Object.is);function FM({initialNodes:t,initialEdges:a,defaultNodes:s,defaultEdges:i,initialWidth:c,initialHeight:u,initialMinZoom:f,initialMaxZoom:m,initialFitViewOptions:p,fitView:g,nodeOrigin:y,nodeExtent:x,zIndexMode:b,children:S}){const[_]=j.useState(()=>ZM({nodes:t,edges:a,defaultNodes:s,defaultEdges:i,width:c,height:u,fitView:g,minZoom:f,maxZoom:m,fitViewOptions:p,nodeOrigin:y,nodeExtent:x,zIndexMode:b}));return o.jsx(mT,{value:_,children:o.jsx(LT,{children:S})})}function WM({children:t,nodes:a,edges:s,defaultNodes:i,defaultEdges:c,width:u,height:f,fitView:m,fitViewOptions:p,minZoom:g,maxZoom:y,nodeOrigin:x,nodeExtent:b,zIndexMode:S}){return j.useContext(fu)?o.jsx(o.Fragment,{children:t}):o.jsx(FM,{initialNodes:a,initialEdges:s,defaultNodes:i,defaultEdges:c,initialWidth:u,initialHeight:f,fitView:m,initialFitViewOptions:p,initialMinZoom:g,initialMaxZoom:y,nodeOrigin:x,nodeExtent:b,zIndexMode:S,children:t})}const KM={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};function JM({nodes:t,edges:a,defaultNodes:s,defaultEdges:i,className:c,nodeTypes:u,edgeTypes:f,onNodeClick:m,onEdgeClick:p,onInit:g,onMove:y,onMoveStart:x,onMoveEnd:b,onConnect:S,onConnectStart:_,onConnectEnd:C,onClickConnectStart:N,onClickConnectEnd:E,onNodeMouseEnter:z,onNodeMouseMove:T,onNodeMouseLeave:k,onNodeContextMenu:w,onNodeDoubleClick:R,onNodeDragStart:M,onNodeDrag:U,onNodeDragStop:L,onNodesDelete:Q,onEdgesDelete:G,onDelete:F,onSelectionChange:se,onSelectionDragStart:q,onSelectionDrag:I,onSelectionDragStop:B,onSelectionContextMenu:D,onSelectionStart:Y,onSelectionEnd:H,onBeforeDelete:W,connectionMode:O,connectionLineType:P=Ja.Bezier,connectionLineStyle:te,connectionLineComponent:ae,connectionLineContainerStyle:re,deleteKeyCode:de="Backspace",selectionKeyCode:ue="Shift",selectionOnDrag:$=!1,selectionMode:ce=mo.Full,panActivationKeyCode:he="Space",multiSelectionKeyCode:ve=go()?"Meta":"Control",zoomActivationKeyCode:pe=go()?"Meta":"Control",snapToGrid:be,snapGrid:Se,onlyRenderVisibleElements:Ae=!1,selectNodesOnDrag:Ee,nodesDraggable:$e,autoPanOnNodeFocus:Re,nodesConnectable:gt,nodesFocusable:ht,nodeOrigin:un=ov,edgesFocusable:Sn,edgesReconnectable:_n,elementsSelectable:at=!0,defaultViewport:qn=CT,minZoom:dn=.5,maxZoom:Wt=2,translateExtent:Vn=ho,preventScrolling:fn=!0,nodeExtent:Yn,defaultMarkerColor:as="#b1b1b7",zoomOnScroll:Jr=!0,zoomOnPinch:ss=!0,panOnScroll:Et=!1,panOnScrollSpeed:En=.5,panOnScrollMode:Ct=Rs.Free,zoomOnDoubleClick:yu=!0,panOnDrag:bu=!0,onPaneClick:vu,onPaneMouseEnter:Us,onPaneMouseMove:qs,onPaneMouseLeave:Vs,onPaneScroll:Pn,onPaneContextMenu:Ys,paneClickDistance:rs=1,nodeClickDistance:wu=0,children:Ro,onReconnect:ei,onReconnectStart:is,onReconnectEnd:ju,onEdgeContextMenu:Do,onEdgeDoubleClick:Oo,onEdgeMouseEnter:Bo,onEdgeMouseMove:ti,onEdgeMouseLeave:ni,reconnectRadius:Lo=10,onNodesChange:Ho,onEdgesChange:Cn,noDragClassName:dt="nodrag",noWheelClassName:wt="nowheel",noPanClassName:Xn="nopan",fitView:Ps,fitViewOptions:$o,connectOnClick:Nu,attributionPosition:Uo,proOptions:os,defaultEdgeOptions:ai,elevateNodesOnSelect:ja=!0,elevateEdgesOnSelect:Na=!1,disableKeyboardA11y:Sa=!1,autoPanOnConnect:_a,autoPanOnNodeDrag:st,autoPanSpeed:qo,connectionRadius:Vo,isValidConnection:In,onError:Ea,style:Su,id:si,nodeDragThreshold:Yo,connectionDragThreshold:_u,viewport:Xs,onViewportChange:Is,width:hn,height:At,colorMode:Po="light",debug:Eu,onScroll:Gs,ariaLabelConfig:Xo,zIndexMode:ls="basic",...Cu},kt){const cs=si||"1",Io=kT(Po),ri=j.useCallback(Gn=>{Gn.currentTarget.scrollTo({top:0,left:0,behavior:"instant"}),Gs?.(Gn)},[Gs]);return o.jsx("div",{"data-testid":"rf__wrapper",...Cu,onScroll:ri,style:{...Su,...KM},ref:kt,className:ut(["react-flow",c,Io]),id:si,role:"application",children:o.jsxs(WM,{nodes:t,edges:a,width:hn,height:At,fitView:Ps,fitViewOptions:$o,minZoom:dn,maxZoom:Wt,nodeOrigin:un,nodeExtent:Yn,zIndexMode:ls,children:[o.jsx(QM,{onInit:g,onNodeClick:m,onEdgeClick:p,onNodeMouseEnter:z,onNodeMouseMove:T,onNodeMouseLeave:k,onNodeContextMenu:w,onNodeDoubleClick:R,nodeTypes:u,edgeTypes:f,connectionLineType:P,connectionLineStyle:te,connectionLineComponent:ae,connectionLineContainerStyle:re,selectionKeyCode:ue,selectionOnDrag:$,selectionMode:ce,deleteKeyCode:de,multiSelectionKeyCode:ve,panActivationKeyCode:he,zoomActivationKeyCode:pe,onlyRenderVisibleElements:Ae,defaultViewport:qn,translateExtent:Vn,minZoom:dn,maxZoom:Wt,preventScrolling:fn,zoomOnScroll:Jr,zoomOnPinch:ss,zoomOnDoubleClick:yu,panOnScroll:Et,panOnScrollSpeed:En,panOnScrollMode:Ct,panOnDrag:bu,onPaneClick:vu,onPaneMouseEnter:Us,onPaneMouseMove:qs,onPaneMouseLeave:Vs,onPaneScroll:Pn,onPaneContextMenu:Ys,paneClickDistance:rs,nodeClickDistance:wu,onSelectionContextMenu:D,onSelectionStart:Y,onSelectionEnd:H,onReconnect:ei,onReconnectStart:is,onReconnectEnd:ju,onEdgeContextMenu:Do,onEdgeDoubleClick:Oo,onEdgeMouseEnter:Bo,onEdgeMouseMove:ti,onEdgeMouseLeave:ni,reconnectRadius:Lo,defaultMarkerColor:as,noDragClassName:dt,noWheelClassName:wt,noPanClassName:Xn,rfId:cs,disableKeyboardA11y:Sa,nodeExtent:Yn,viewport:Xs,onViewportChange:Is}),o.jsx(AT,{nodes:t,edges:a,defaultNodes:s,defaultEdges:i,onConnect:S,onConnectStart:_,onConnectEnd:C,onClickConnectStart:N,onClickConnectEnd:E,nodesDraggable:$e,autoPanOnNodeFocus:Re,nodesConnectable:gt,nodesFocusable:ht,edgesFocusable:Sn,edgesReconnectable:_n,elementsSelectable:at,elevateNodesOnSelect:ja,elevateEdgesOnSelect:Na,minZoom:dn,maxZoom:Wt,nodeExtent:Yn,onNodesChange:Ho,onEdgesChange:Cn,snapToGrid:be,snapGrid:Se,connectionMode:O,translateExtent:Vn,connectOnClick:Nu,defaultEdgeOptions:ai,fitView:Ps,fitViewOptions:$o,onNodesDelete:Q,onEdgesDelete:G,onDelete:F,onNodeDragStart:M,onNodeDrag:U,onNodeDragStop:L,onSelectionDrag:I,onSelectionDragStart:q,onSelectionDragStop:B,onMove:y,onMoveStart:x,onMoveEnd:b,noPanClassName:Xn,nodeOrigin:un,rfId:cs,autoPanOnConnect:_a,autoPanOnNodeDrag:st,autoPanSpeed:qo,onError:Ea,connectionRadius:Vo,isValidConnection:In,selectNodesOnDrag:Ee,nodeDragThreshold:Yo,connectionDragThreshold:_u,onBeforeDelete:W,debug:Eu,ariaLabelConfig:Xo,zIndexMode:ls}),o.jsx(ET,{onSelectionChange:se}),Ro,o.jsx(wT,{proOptions:os,position:Uo}),o.jsx(vT,{rfId:cs,disableKeyboardA11y:Sa})]})})}var eA=dv(JM);function tA({dimensions:t,lineWidth:a,variant:s,className:i}){return o.jsx("path",{strokeWidth:a,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`,className:ut(["react-flow__background-pattern",s,i])})}function nA({radius:t,className:a}){return o.jsx("circle",{cx:t,cy:t,r:t,className:ut(["react-flow__background-pattern","dots",a])})}var ts;(function(t){t.Lines="lines",t.Dots="dots",t.Cross="cross"})(ts||(ts={}));const aA={[ts.Dots]:1,[ts.Lines]:1,[ts.Cross]:6},sA=t=>({transform:t.transform,patternId:`pattern-${t.rfId}`});function Ov({id:t,variant:a=ts.Dots,gap:s=20,size:i,lineWidth:c=1,offset:u=0,color:f,bgColor:m,style:p,className:g,patternClassName:y}){const x=j.useRef(null),{transform:b,patternId:S}=Oe(sA,We),_=i||aA[a],C=a===ts.Dots,N=a===ts.Cross,E=Array.isArray(s)?s:[s,s],z=[E[0]*b[2]||1,E[1]*b[2]||1],T=_*b[2],k=Array.isArray(u)?u:[u,u],w=N?[T,T]:z,R=[k[0]*b[2]||1+w[0]/2,k[1]*b[2]||1+w[1]/2],M=`${S}${t||""}`;return o.jsxs("svg",{className:ut(["react-flow__background",g]),style:{...p,...mu,"--xy-background-color-props":m,"--xy-background-pattern-color-props":f},ref:x,"data-testid":"rf__background",children:[o.jsx("pattern",{id:M,x:b[0]%z[0],y:b[1]%z[1],width:z[0],height:z[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${R[0]},-${R[1]})`,children:C?o.jsx(nA,{radius:T/2,className:y}):o.jsx(tA,{dimensions:w,lineWidth:c,variant:a,className:y})}),o.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${M})`})]})}Ov.displayName="Background";const rA=j.memo(Ov);function iA(){return o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:o.jsx("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function oA(){return o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:o.jsx("path",{d:"M0 0h32v4.2H0z"})})}function lA(){return o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:o.jsx("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function cA(){return o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:o.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function uA(){return o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:o.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function mc({children:t,className:a,...s}){return o.jsx("button",{type:"button",className:ut(["react-flow__controls-button",a]),...s,children:t})}const dA=t=>({isInteractive:t.nodesDraggable||t.nodesConnectable||t.elementsSelectable,minZoomReached:t.transform[2]<=t.minZoom,maxZoomReached:t.transform[2]>=t.maxZoom,ariaLabelConfig:t.ariaLabelConfig});function Bv({style:t,showZoom:a=!0,showFitView:s=!0,showInteractive:i=!0,fitViewOptions:c,onZoomIn:u,onZoomOut:f,onFitView:m,onInteractiveChange:p,className:g,children:y,position:x="bottom-left",orientation:b="vertical","aria-label":S}){const _=Ke(),{isInteractive:C,minZoomReached:N,maxZoomReached:E,ariaLabelConfig:z}=Oe(dA,We),{zoomIn:T,zoomOut:k,fitView:w}=ym(),R=()=>{T(),u?.()},M=()=>{k(),f?.()},U=()=>{w(c),m?.()},L=()=>{_.setState({nodesDraggable:!C,nodesConnectable:!C,elementsSelectable:!C}),p?.(!C)},Q=b==="horizontal"?"horizontal":"vertical";return o.jsxs(hu,{className:ut(["react-flow__controls",Q,g]),position:x,style:t,"data-testid":"rf__controls","aria-label":S??z["controls.ariaLabel"],children:[a&&o.jsxs(o.Fragment,{children:[o.jsx(mc,{onClick:R,className:"react-flow__controls-zoomin",title:z["controls.zoomIn.ariaLabel"],"aria-label":z["controls.zoomIn.ariaLabel"],disabled:E,children:o.jsx(iA,{})}),o.jsx(mc,{onClick:M,className:"react-flow__controls-zoomout",title:z["controls.zoomOut.ariaLabel"],"aria-label":z["controls.zoomOut.ariaLabel"],disabled:N,children:o.jsx(oA,{})})]}),s&&o.jsx(mc,{className:"react-flow__controls-fitview",onClick:U,title:z["controls.fitView.ariaLabel"],"aria-label":z["controls.fitView.ariaLabel"],children:o.jsx(lA,{})}),i&&o.jsx(mc,{className:"react-flow__controls-interactive",onClick:L,title:z["controls.interactive.ariaLabel"],"aria-label":z["controls.interactive.ariaLabel"],children:C?o.jsx(uA,{}):o.jsx(cA,{})}),y]})}Bv.displayName="Controls";const fA=j.memo(Bv);function hA({id:t,x:a,y:s,width:i,height:c,style:u,color:f,strokeColor:m,strokeWidth:p,className:g,borderRadius:y,shapeRendering:x,selected:b,onClick:S}){const{background:_,backgroundColor:C}=u||{},N=f||_||C;return o.jsx("rect",{className:ut(["react-flow__minimap-node",{selected:b},g]),x:a,y:s,rx:y,ry:y,width:i,height:c,style:{fill:N,stroke:m,strokeWidth:p},shapeRendering:x,onClick:S?E=>S(E,t):void 0})}const mA=j.memo(hA),pA=t=>t.nodes.map(a=>a.id),ah=t=>t instanceof Function?t:()=>t;function gA({nodeStrokeColor:t,nodeColor:a,nodeClassName:s="",nodeBorderRadius:i=5,nodeStrokeWidth:c,nodeComponent:u=mA,onClick:f}){const m=Oe(pA,We),p=ah(a),g=ah(t),y=ah(s),x=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return o.jsx(o.Fragment,{children:m.map(b=>o.jsx(yA,{id:b,nodeColorFunc:p,nodeStrokeColorFunc:g,nodeClassNameFunc:y,nodeBorderRadius:i,nodeStrokeWidth:c,NodeComponent:u,onClick:f,shapeRendering:x},b))})}function xA({id:t,nodeColorFunc:a,nodeStrokeColorFunc:s,nodeClassNameFunc:i,nodeBorderRadius:c,nodeStrokeWidth:u,shapeRendering:f,NodeComponent:m,onClick:p}){const{node:g,x:y,y:x,width:b,height:S}=Oe(_=>{const{internals:C}=_.nodeLookup.get(t),N=C.userNode,{x:E,y:z}=C.positionAbsolute,{width:T,height:k}=wa(N);return{node:N,x:E,y:z,width:T,height:k}},We);return!g||g.hidden||!B1(g)?null:o.jsx(m,{x:y,y:x,width:b,height:S,style:g.style,selected:!!g.selected,className:i(g),color:a(g),borderRadius:c,strokeColor:s(g),strokeWidth:u,shapeRendering:f,onClick:p,id:g.id})}const yA=j.memo(xA);var bA=j.memo(gA);const vA=200,wA=150,jA=t=>!t.hidden,NA=t=>{const a={x:-t.transform[0]/t.transform[2],y:-t.transform[1]/t.transform[2],width:t.width/t.transform[2],height:t.height/t.transform[2]};return{viewBB:a,boundingRect:t.nodeLookup.size>0?O1(To(t.nodeLookup,{filter:jA}),a):a,rfId:t.rfId,panZoom:t.panZoom,translateExtent:t.translateExtent,flowWidth:t.width,flowHeight:t.height,ariaLabelConfig:t.ariaLabelConfig}},SA="react-flow__minimap-desc";function Lv({style:t,className:a,nodeStrokeColor:s,nodeColor:i,nodeClassName:c="",nodeBorderRadius:u=5,nodeStrokeWidth:f,nodeComponent:m,bgColor:p,maskColor:g,maskStrokeColor:y,maskStrokeWidth:x,position:b="bottom-right",onClick:S,onNodeClick:_,pannable:C=!1,zoomable:N=!1,ariaLabel:E,inversePan:z,zoomStep:T=1,offsetScale:k=5}){const w=Ke(),R=j.useRef(null),{boundingRect:M,viewBB:U,rfId:L,panZoom:Q,translateExtent:G,flowWidth:F,flowHeight:se,ariaLabelConfig:q}=Oe(NA,We),I=t?.width??vA,B=t?.height??wA,D=M.width/I,Y=M.height/B,H=Math.max(D,Y),W=H*I,O=H*B,P=k*H,te=M.x-(W-M.width)/2-P,ae=M.y-(O-M.height)/2-P,re=W+P*2,de=O+P*2,ue=`${SA}-${L}`,$=j.useRef(0),ce=j.useRef();$.current=H,j.useEffect(()=>{if(R.current&&Q)return ce.current=q8({domNode:R.current,panZoom:Q,getTransform:()=>w.getState().transform,getViewScale:()=>$.current}),()=>{ce.current?.destroy()}},[Q]),j.useEffect(()=>{ce.current?.update({translateExtent:G,width:F,height:se,inversePan:z,pannable:C,zoomStep:T,zoomable:N})},[C,N,z,T,G,F,se]);const he=S?be=>{const[Se,Ae]=ce.current?.pointer(be)||[0,0];S(be,{x:Se,y:Ae})}:void 0,ve=_?j.useCallback((be,Se)=>{const Ae=w.getState().nodeLookup.get(Se).internals.userNode;_(be,Ae)},[]):void 0,pe=E??q["minimap.ariaLabel"];return o.jsx(hu,{position:b,style:{...t,"--xy-minimap-background-color-props":typeof p=="string"?p:void 0,"--xy-minimap-mask-background-color-props":typeof g=="string"?g:void 0,"--xy-minimap-mask-stroke-color-props":typeof y=="string"?y:void 0,"--xy-minimap-mask-stroke-width-props":typeof x=="number"?x*H:void 0,"--xy-minimap-node-background-color-props":typeof i=="string"?i:void 0,"--xy-minimap-node-stroke-color-props":typeof s=="string"?s:void 0,"--xy-minimap-node-stroke-width-props":typeof f=="number"?f:void 0},className:ut(["react-flow__minimap",a]),"data-testid":"rf__minimap",children:o.jsxs("svg",{width:I,height:B,viewBox:`${te} ${ae} ${re} ${de}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":ue,ref:R,onClick:he,children:[pe&&o.jsx("title",{id:ue,children:pe}),o.jsx(bA,{onClick:ve,nodeColor:i,nodeStrokeColor:s,nodeBorderRadius:u,nodeClassName:c,nodeStrokeWidth:f,nodeComponent:m}),o.jsx("path",{className:"react-flow__minimap-mask",d:`M${te-P},${ae-P}h${re+P*2}v${de+P*2}h${-re-P*2}z
        M${U.x},${U.y}h${U.width}v${U.height}h${-U.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}Lv.displayName="MiniMap";const _A=j.memo(Lv),EA=t=>a=>t?`${Math.max(1/a.transform[2],1)}`:void 0,CA={[Xr.Line]:"right",[Xr.Handle]:"bottom-right"};function TA({nodeId:t,position:a,variant:s=Xr.Handle,className:i,style:c=void 0,children:u,color:f,minWidth:m=10,minHeight:p=10,maxWidth:g=Number.MAX_VALUE,maxHeight:y=Number.MAX_VALUE,keepAspectRatio:x=!1,resizeDirection:b,autoScale:S=!0,shouldResize:_,onResizeStart:C,onResize:N,onResizeEnd:E}){const z=pv(),T=typeof t=="string"?t:z,k=Ke(),w=j.useRef(null),R=s===Xr.Handle,M=Oe(j.useCallback(EA(R&&S),[R,S]),We),U=j.useRef(null),L=a??CA[s];j.useEffect(()=>{if(!(!w.current||!T))return U.current||(U.current=tT({domNode:w.current,nodeId:T,getStoreItems:()=>{const{nodeLookup:G,transform:F,snapGrid:se,snapToGrid:q,nodeOrigin:I,domNode:B}=k.getState();return{nodeLookup:G,transform:F,snapGrid:se,snapToGrid:q,nodeOrigin:I,paneDomNode:B}},onChange:(G,F)=>{const{triggerNodeChanges:se,nodeLookup:q,parentLookup:I,nodeOrigin:B}=k.getState(),D=[],Y={x:G.x,y:G.y},H=q.get(T);if(H&&H.expandParent&&H.parentId){const W=H.origin??B,O=G.width??H.measured.width??0,P=G.height??H.measured.height??0,te={id:H.id,parentId:H.parentId,rect:{width:O,height:P,...L1({x:G.x??H.position.x,y:G.y??H.position.y},{width:O,height:P},H.parentId,q,W)}},ae=xm([te],q,I,B);D.push(...ae),Y.x=G.x?Math.max(W[0]*O,G.x):void 0,Y.y=G.y?Math.max(W[1]*P,G.y):void 0}if(Y.x!==void 0&&Y.y!==void 0){const W={id:T,type:"position",position:{...Y}};D.push(W)}if(G.width!==void 0&&G.height!==void 0){const O={id:T,type:"dimensions",resizing:!0,setAttributes:b?b==="horizontal"?"width":"height":!0,dimensions:{width:G.width,height:G.height}};D.push(O)}for(const W of F){const O={...W,type:"position"};D.push(O)}se(D)},onEnd:({width:G,height:F})=>{const se={id:T,type:"dimensions",resizing:!1,dimensions:{width:G,height:F}};k.getState().triggerNodeChanges([se])}})),U.current.update({controlPosition:L,boundaries:{minWidth:m,minHeight:p,maxWidth:g,maxHeight:y},keepAspectRatio:x,resizeDirection:b,onResizeStart:C,onResize:N,onResizeEnd:E,shouldResize:_}),()=>{U.current?.destroy()}},[L,m,p,g,y,x,C,N,E,_]);const Q=L.split("-");return o.jsx("div",{className:ut(["react-flow__resize-control","nodrag",...Q,s,i]),ref:w,style:{...c,scale:M,...f&&{[R?"backgroundColor":"borderColor"]:f}},children:u})}j.memo(TA);const sh=[{id:"trigger-1",type:"trigger",position:{x:250,y:50},data:{label:"Inicio",config:{type:"classification",conditions:{intent:["sales"]}}}}],MA=[],Kr=bb((t,a)=>({flowId:null,flowName:"Nuevo Flujo",flowSlug:null,isActive:!1,isSaved:!0,nodes:sh,edges:MA,selectedNode:null,selectedEdge:null,isSidebarOpen:!0,isPropertiesOpen:!1,onNodesChange:s=>{t({nodes:cv(s,a().nodes),isSaved:!1})},onEdgesChange:s=>{t({edges:uv(s,a().edges),isSaved:!1})},onConnect:s=>{t({edges:P1({...s,type:"smoothstep",animated:!0,style:{stroke:"#25D366",strokeWidth:2}},a().edges),isSaved:!1})},addNode:(s,i)=>{const c=`${s}-${Date.now()}`,f={id:c,type:s,position:i,data:{trigger:{label:"Trigger",config:{type:"classification",conditions:{}}},message:{label:"Mensaje",content:"Escribe tu mensaje aqu..."},question:{label:"Pregunta",content:"Cul es tu opcin?",variable:"respuesta",options:[]},condition:{label:"Condicin",conditions:[]},action:{label:"Accin",action:"",payload:{}},transfer:{label:"Transferir",content:"Transfiriendo a un agente..."},end:{label:"Fin"}}[s]||{label:s}};return t({nodes:[...a().nodes,f],isSaved:!1}),c},updateNodeData:(s,i)=>{t({nodes:a().nodes.map(c=>c.id===s?{...c,data:{...c.data,...i}}:c),isSaved:!1})},deleteNode:s=>{t({nodes:a().nodes.filter(i=>i.id!==s),edges:a().edges.filter(i=>i.source!==s&&i.target!==s),selectedNode:null,isSaved:!1})},setSelectedNode:s=>t({selectedNode:s,isPropertiesOpen:!!s}),setSelectedEdge:s=>t({selectedEdge:s}),clearSelection:()=>t({selectedNode:null,selectedEdge:null}),toggleSidebar:()=>t({isSidebarOpen:!a().isSidebarOpen}),toggleProperties:()=>t({isPropertiesOpen:!a().isPropertiesOpen}),setFlowMeta:s=>t({flowId:s.id,flowName:s.name,flowSlug:s.slug,isActive:s.is_active}),loadFlow:s=>{const i={trigger:"Inicio",message:"Mensaje",question:"Pregunta",condition:"Condicin",action:"Accin",transfer:"Transferir",end:"Fin"},c=(s.nodes||[]).map(u=>{let f=i[u.type]||u.type;return u.content&&u.content.length>0&&(f=u.content.substring(0,25)+(u.content.length>25?"...":"")),u.action&&(f=`Accin: ${u.action}`),{id:u.id,type:u.type,position:u.position||{x:250,y:50},data:{label:f,content:u.content,variable:u.variable,options:u.options,conditions:u.conditions,action:u.action,payload:u.payload,config:u.config||(u.type==="trigger"?s.trigger_config:void 0)}}});t({flowId:s.id,flowName:s.name,flowSlug:s.slug,isActive:s.is_active,nodes:c.length>0?c:sh,edges:s.connections?.map(u=>({id:`${u.from}-${u.to}`,source:u.from,target:u.to,type:"smoothstep",animated:!0,label:u.label,style:{stroke:"#25D366",strokeWidth:2}}))||[],isSaved:!0})},resetFlow:()=>t({flowId:null,flowName:"Nuevo Flujo",flowSlug:null,isActive:!1,nodes:sh,edges:[],selectedNode:null,isSaved:!0}),markSaved:()=>t({isSaved:!0}),exportFlow:()=>{const s=a();return{name:s.flowName,trigger_config:s.nodes.find(i=>i.type==="trigger")?.data.config||{},nodes:s.nodes.map(i=>({id:i.id,type:i.type,content:i.data.content,variable:i.data.variable,options:i.data.options,conditions:i.data.conditions,action:i.data.action,payload:i.data.payload,position:i.position})),connections:s.edges.map(i=>({from:i.source,to:i.target,label:i.label}))}}}));function AA({onTestClick:t}){const{flowId:a,flowName:s,isActive:i,isSaved:c,exportFlow:u,markSaved:f,loadFlow:m,resetFlow:p,setFlowMeta:g}=Kr(),[y,x]=j.useState(!1),[b,S]=j.useState(!1),[_,C]=j.useState([]),[N,E]=j.useState(s),z=async()=>{x(!0);try{const M=u();if(M.name=N,a)await p_(a,M);else{const U=await m_(M);g({id:U.id,name:N,slug:U.slug,is_active:!1})}f(),alert("Flujo guardado correctamente")}catch(M){alert("Error al guardar: "+M.message)}finally{x(!1)}},T=async()=>{if(!a){alert("Primero guarda el flujo");return}try{await Zb(a,!i),g({id:a,name:N,is_active:!i}),alert(i?"Flujo desactivado":"Flujo activado")}catch(M){alert("Error: "+M.message)}},k=async()=>{try{const M=await Qb();C(M.flows||[]),S(!0)}catch(M){alert("Error cargando flujos: "+M.message)}},w=async M=>{try{const U=await yh(M.id);m(U.flow),E(U.flow.name),S(!1)}catch(U){alert("Error cargando flujo: "+U.message)}},R=()=>{!c&&!confirm("Tienes cambios sin guardar. Continuar?")||(p(),E("Nuevo Flujo"))};return o.jsxs("div",{style:{height:"56px",background:"white",borderBottom:"1px solid #e5e7eb",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0 16px"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[o.jsx("span",{style:{fontSize:"24px"},children:""}),o.jsx("span",{style:{fontWeight:600,color:"#075E54"},children:"Flow Builder"})]}),o.jsx("div",{style:{borderLeft:"1px solid #e5e7eb",height:"24px"}}),o.jsx("input",{type:"text",value:N,onChange:M=>E(M.target.value),style:{border:"none",fontSize:"15px",fontWeight:500,background:"transparent",width:"200px"},placeholder:"Nombre del flujo"}),!c&&o.jsx("span",{style:{fontSize:"11px",background:"#fef3c7",color:"#92400e",padding:"2px 8px",borderRadius:"4px"},children:"Sin guardar"}),i&&o.jsx("span",{style:{fontSize:"11px",background:"#d1fae5",color:"#065f46",padding:"2px 8px",borderRadius:"4px"},children:"Activo"})]}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[o.jsx("button",{onClick:t,style:{padding:"8px 16px",background:"linear-gradient(135deg, #075E54 0%, #128C7E 100%)",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"13px",fontWeight:500},children:" Probar"}),o.jsx("div",{style:{borderLeft:"1px solid #e5e7eb",height:"24px",margin:"0 4px"}}),o.jsx("button",{onClick:R,style:{padding:"8px 16px",background:"white",border:"1px solid #d1d5db",borderRadius:"6px",cursor:"pointer",fontSize:"13px"},children:"+ Nuevo"}),o.jsx("button",{onClick:k,style:{padding:"8px 16px",background:"white",border:"1px solid #d1d5db",borderRadius:"6px",cursor:"pointer",fontSize:"13px"},children:" Abrir"}),o.jsx("button",{onClick:z,disabled:y,style:{padding:"8px 16px",background:"#25D366",color:"white",border:"none",borderRadius:"6px",cursor:y?"wait":"pointer",fontSize:"13px",fontWeight:500},children:y?"Guardando...":" Guardar"}),a&&o.jsx("button",{onClick:T,style:{padding:"8px 16px",background:i?"#fee2e2":"#d1fae5",color:i?"#dc2626":"#065f46",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"13px",fontWeight:500},children:i?" Desactivar":" Activar"})]}),b&&o.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:o.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"24px",width:"400px",maxHeight:"500px",overflow:"auto"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"16px"},children:[o.jsx("h3",{style:{margin:0},children:"Seleccionar flujo"}),o.jsx("button",{onClick:()=>S(!1),style:{background:"none",border:"none",cursor:"pointer",fontSize:"18px"},children:""})]}),_.length===0?o.jsx("p",{style:{color:"#6b7280",textAlign:"center"},children:"No hay flujos guardados"}):o.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:_.map(M=>o.jsxs("div",{onClick:()=>w(M),style:{padding:"12px",border:"1px solid #e5e7eb",borderRadius:"8px",cursor:"pointer",display:"flex",justifyContent:"space-between",alignItems:"center"},onMouseOver:U=>U.currentTarget.style.background="#f9fafb",onMouseOut:U=>U.currentTarget.style.background="white",children:[o.jsxs("div",{children:[o.jsx("div",{style:{fontWeight:500},children:M.name}),o.jsx("div",{style:{fontSize:"12px",color:"#6b7280"},children:M.slug})]}),M.is_active&&o.jsx("span",{style:{fontSize:"10px",background:"#d1fae5",color:"#065f46",padding:"2px 6px",borderRadius:"4px"},children:"Activo"})]},M.id))})]})})]})}const kA=[{type:"trigger",label:"Trigger",icon:"",color:"#667eea",description:"Inicio del flujo"},{type:"message",label:"Mensaje",icon:"",color:"#25D366",description:"Enviar mensaje"},{type:"question",label:"Pregunta",icon:"",color:"#34B7F1",description:"Preguntar y esperar"},{type:"condition",label:"Condicin",icon:"",color:"#f59e0b",description:"Bifurcacin"},{type:"action",label:"Accin",icon:"",color:"#6366f1",description:"Ejecutar accin"},{type:"ai_response",label:"Respuesta IA",icon:"",color:"#8b5cf6",description:"Generar con IA"},{type:"webhook",label:"Webhook",icon:"",color:"#f97316",description:"Llamar API externa"},{type:"delay",label:"Espera",icon:"",color:"#64748b",description:"Pausar X segundos"},{type:"transfer",label:"Transferir",icon:"",color:"#ec4899",description:"Pasar a humano"},{type:"end",label:"Fin",icon:"",color:"#ef4444",description:"Terminar flujo"}];function zA(){const{isSidebarOpen:t,toggleSidebar:a}=Kr(),s=(i,c)=>{i.dataTransfer.setData("application/reactflow",c),i.dataTransfer.effectAllowed="move"};return t?o.jsxs("div",{style:{width:"240px",background:"white",borderRight:"1px solid #e5e7eb",padding:"16px",display:"flex",flexDirection:"column",height:"100%"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[o.jsx("h3",{style:{margin:0,fontSize:"14px",fontWeight:600},children:"Nodos"}),o.jsx("button",{onClick:a,style:{background:"none",border:"none",cursor:"pointer",fontSize:"18px",color:"#6b7280"},children:""})]}),o.jsx("p",{style:{fontSize:"12px",color:"#6b7280",marginBottom:"16px"},children:"Arrastra los nodos al canvas para construir tu flujo"}),o.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:kA.map(i=>o.jsxs("div",{draggable:!0,onDragStart:c=>s(c,i.type),style:{padding:"10px 12px",borderRadius:"8px",cursor:"grab",display:"flex",alignItems:"center",gap:"10px",background:`${i.color}15`,border:`1px solid ${i.color}30`,transition:"all 0.2s"},onMouseOver:c=>{c.currentTarget.style.transform="translateX(4px)",c.currentTarget.style.boxShadow="0 2px 8px rgba(0,0,0,0.1)"},onMouseOut:c=>{c.currentTarget.style.transform="none",c.currentTarget.style.boxShadow="none"},children:[o.jsx("span",{style:{fontSize:"20px"},children:i.icon}),o.jsxs("div",{children:[o.jsx("div",{style:{fontWeight:500,fontSize:"13px"},children:i.label}),o.jsx("div",{style:{fontSize:"11px",color:"#6b7280"},children:i.description})]})]},i.type))})]}):o.jsxs("button",{onClick:a,style:{position:"absolute",left:10,top:10,zIndex:10,background:"white",border:"1px solid #e5e7eb",borderRadius:"8px",padding:"8px 12px",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px"},children:[o.jsx("span",{children:""})," Nodos"]})}const Qy={trigger:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",border:"none"},message:{background:"white",border:"2px solid #25D366"},question:{background:"white",border:"2px solid #34B7F1"},condition:{background:"#fef3c7",border:"2px solid #f59e0b"},action:{background:"#e0e7ff",border:"2px solid #6366f1"},transfer:{background:"#fce7f3",border:"2px solid #ec4899"},end:{background:"#fee2e2",border:"2px solid #ef4444"}},RA={trigger:"",message:"",question:"",condition:"",action:"",transfer:"",end:""};function DA({id:t,data:a,type:s,selected:i}){const c=Qy[s]||Qy.message,u=RA[s]||"",f=s!=="end",m=s!=="trigger";return o.jsxs("div",{style:{...c,padding:"12px 16px",borderRadius:"8px",minWidth:"180px",maxWidth:"250px",boxShadow:i?"0 0 0 2px #3b82f6":"0 2px 8px rgba(0,0,0,0.1)",cursor:"pointer"},children:[m&&o.jsx(Ir,{type:"target",position:ge.Top,style:{background:"#6b7280",width:10,height:10}}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"4px"},children:[o.jsx("span",{style:{fontSize:"16px"},children:u}),o.jsx("strong",{style:{fontSize:"13px"},children:a.label||s})]}),a.content&&o.jsxs("div",{style:{fontSize:"11px",opacity:.8,marginTop:"4px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:[a.content.substring(0,40),a.content.length>40?"...":""]}),a.options&&a.options.length>0&&o.jsxs("div",{style:{fontSize:"10px",marginTop:"6px",opacity:.7},children:[a.options.length," opciones"]}),f&&o.jsx(Ir,{type:"source",position:ge.Bottom,style:{background:"#25D366",width:10,height:10}})]})}const Es=j.memo(DA),OA={trigger:t=>o.jsx(Es,{...t,type:"trigger"}),message:t=>o.jsx(Es,{...t,type:"message"}),question:t=>o.jsx(Es,{...t,type:"question"}),condition:t=>o.jsx(Es,{...t,type:"condition"}),action:t=>o.jsx(Es,{...t,type:"action"}),transfer:t=>o.jsx(Es,{...t,type:"transfer"}),end:t=>o.jsx(Es,{...t,type:"end"})};function BA(){const t=j.useRef(null),{nodes:a,edges:s,onNodesChange:i,onEdgesChange:c,onConnect:u,addNode:f,setSelectedNode:m}=Kr(),p=j.useCallback(b=>{b.preventDefault(),b.dataTransfer.dropEffect="move"},[]),g=j.useCallback(b=>{b.preventDefault();const S=b.dataTransfer.getData("application/reactflow");if(!S)return;const _=t.current.getBoundingClientRect(),C={x:b.clientX-_.left-90,y:b.clientY-_.top-25};f(S,C)},[f]),y=j.useCallback((b,S)=>{m(S)},[m]),x=j.useCallback(()=>{m(null)},[m]);return o.jsx("div",{ref:t,style:{flex:1,height:"100%"},children:o.jsxs(eA,{nodes:a,edges:s,onNodesChange:i,onEdgesChange:c,onConnect:u,onDrop:g,onDragOver:p,onNodeClick:y,onPaneClick:x,nodeTypes:OA,fitView:!0,snapToGrid:!0,snapGrid:[15,15],defaultEdgeOptions:{type:"smoothstep",animated:!0,style:{stroke:"#25D366",strokeWidth:2}},children:[o.jsx(rA,{color:"#e5e7eb",gap:20}),o.jsx(fA,{}),o.jsx(_A,{nodeColor:b=>({trigger:"#667eea",message:"#25D366",question:"#34B7F1",condition:"#f59e0b",action:"#6366f1",transfer:"#ec4899",end:"#ef4444"})[b.type]||"#6b7280",maskColor:"rgba(255, 255, 255, 0.8)"})]})})}const LA=[{value:"sales",label:"Ventas",color:"#10b981"},{value:"support",label:"Soporte",color:"#3b82f6"},{value:"complaint",label:"Quejas",color:"#ef4444"},{value:"info",label:"Informacin",color:"#8b5cf6"},{value:"greeting",label:"Saludo",color:"#f59e0b"}],HA=[{value:"low",label:"Baja"},{value:"medium",label:"Media"},{value:"high",label:"Alta"},{value:"critical",label:"Crtica"}];function $A(){const{selectedNode:t,updateNodeData:a,deleteNode:s,isPropertiesOpen:i,toggleProperties:c}=Kr(),[u,f]=j.useState({}),[m,p]=j.useState({type:"keyword",keywords:[],conditions:{}}),[g,y]=j.useState([]),x=Mt(w=>w.token);j.useEffect(()=>{t&&(f(t.data||{}),t.type==="trigger"&&t.data?.config&&p(t.data.config))},[t]),j.useEffect(()=>{t?.type==="transfer"&&g.length===0&&x&&fetch("/api/departments",{headers:{Authorization:`Bearer ${x}`}}).then(w=>w.json()).then(w=>y(w.departments||[])).catch(()=>{})},[t?.type,x]);const b=(w,R)=>{const M={...u,[w]:R};f(M),a(t.id,{[w]:R})},S=(w,R,M)=>{const U=[...u.options||[]];U[w]={...U[w],[R]:M},b("options",U)},_=()=>{const w=[...u.options||[],{label:"Nueva opcin",value:""}];b("options",w)},C=w=>{const R=u.options.filter((M,U)=>U!==w);b("options",R)},N=w=>{const R={type:w,keywords:[],conditions:{}};p(R),a(t.id,{config:R})},E=w=>{const R=w.split(",").map(U=>U.trim()).filter(U=>U),M={...m,keywords:R};p(M),a(t.id,{config:M})},z=w=>{const R=m.conditions?.intent||[];let M;R.includes(w)?M=R.filter(L=>L!==w):M=[...R,w];const U={...m,conditions:{...m.conditions,intent:M}};p(U),a(t.id,{config:U})},T=w=>{const R={...m,conditions:{...m.conditions,urgency:w}};p(R),a(t.id,{config:R})},k=w=>{const R={...m,conditions:{...m.conditions,min_lead_score:parseInt(w)||0}};p(R),a(t.id,{config:R})};return!i||!t?null:o.jsxs("div",{style:{width:"300px",background:"white",borderLeft:"1px solid #e5e7eb",padding:"16px",height:"100%",overflow:"auto"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[o.jsx("h3",{style:{margin:0,fontSize:"14px",fontWeight:600},children:"Propiedades"}),o.jsx("button",{onClick:c,style:{background:"none",border:"none",cursor:"pointer",fontSize:"18px",color:"#6b7280"},children:""})]}),o.jsxs("div",{style:{fontSize:"12px",color:"#6b7280",marginBottom:"16px"},children:["Tipo: ",o.jsx("strong",{children:t.type})]}),o.jsxs("div",{style:{marginBottom:"16px"},children:[o.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:500,marginBottom:"4px"},children:"Etiqueta"}),o.jsx("input",{type:"text",value:u.label||"",onChange:w=>b("label",w.target.value),style:{width:"100%",padding:"8px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"13px"}})]}),t.type==="trigger"&&o.jsxs("div",{style:{marginBottom:"16px",padding:"12px",background:"#f8fafc",borderRadius:"8px",border:"1px solid #e2e8f0"},children:[o.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:600,marginBottom:"12px",color:"#475569"},children:"Configuracin del Trigger"}),o.jsxs("div",{style:{marginBottom:"12px"},children:[o.jsx("label",{style:{display:"block",fontSize:"11px",fontWeight:500,marginBottom:"6px",color:"#64748b"},children:"Tipo de activacin"}),o.jsx("div",{style:{display:"flex",gap:"6px"},children:[{value:"keyword",label:"Palabras clave"},{value:"classification",label:"Clasificacin"},{value:"always",label:"Siempre"}].map(w=>o.jsx("button",{onClick:()=>N(w.value),style:{flex:1,padding:"8px 4px",fontSize:"11px",border:m.type===w.value?"2px solid #25D366":"1px solid #d1d5db",borderRadius:"6px",background:m.type===w.value?"#dcfce7":"white",color:m.type===w.value?"#166534":"#6b7280",cursor:"pointer",fontWeight:m.type===w.value?600:400},children:w.label},w.value))})]}),m.type==="keyword"&&o.jsxs("div",{style:{marginBottom:"12px"},children:[o.jsx("label",{style:{display:"block",fontSize:"11px",fontWeight:500,marginBottom:"4px",color:"#64748b"},children:"Palabras clave (separadas por coma)"}),o.jsx("input",{type:"text",value:(m.keywords||[]).join(", "),onChange:w=>E(w.target.value),placeholder:"precio, costo, cotizar, cuanto",style:{width:"100%",padding:"8px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"12px"}}),o.jsx("p",{style:{fontSize:"10px",color:"#94a3b8",marginTop:"4px"},children:"El flujo se activa si el mensaje contiene alguna de estas palabras"})]}),m.type==="classification"&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{style:{marginBottom:"12px"},children:[o.jsx("label",{style:{display:"block",fontSize:"11px",fontWeight:500,marginBottom:"6px",color:"#64748b"},children:"Intenciones del mensaje"}),o.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"6px"},children:LA.map(w=>{const R=(m.conditions?.intent||[]).includes(w.value);return o.jsxs("button",{onClick:()=>z(w.value),style:{padding:"6px 10px",fontSize:"11px",border:R?`2px solid ${w.color}`:"1px solid #d1d5db",borderRadius:"16px",background:R?`${w.color}20`:"white",color:R?w.color:"#6b7280",cursor:"pointer",fontWeight:R?600:400},children:[R&&" ",w.label]},w.value)})})]}),o.jsxs("div",{style:{marginBottom:"12px"},children:[o.jsx("label",{style:{display:"block",fontSize:"11px",fontWeight:500,marginBottom:"4px",color:"#64748b"},children:"Urgencia mnima"}),o.jsxs("select",{value:m.conditions?.urgency||"",onChange:w=>T(w.target.value),style:{width:"100%",padding:"8px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"12px"},children:[o.jsx("option",{value:"",children:"Cualquiera"}),HA.map(w=>o.jsx("option",{value:w.value,children:w.label},w.value))]})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"11px",fontWeight:500,marginBottom:"4px",color:"#64748b"},children:"Lead score mnimo"}),o.jsx("input",{type:"number",min:"0",max:"100",value:m.conditions?.min_lead_score||0,onChange:w=>k(w.target.value),style:{width:"100%",padding:"8px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"12px"}}),o.jsx("p",{style:{fontSize:"10px",color:"#94a3b8",marginTop:"4px"},children:"Solo activa si el lead tiene este puntaje o ms (0-100)"})]})]}),m.type==="always"&&o.jsx("div",{style:{padding:"12px",background:"#fef3c7",borderRadius:"6px",border:"1px solid #fcd34d"},children:o.jsx("p",{style:{fontSize:"11px",color:"#92400e",margin:0},children:" Este flujo se activar para TODOS los mensajes entrantes que no coincidan con otros flujos. salo como flujo por defecto."})})]}),["message","question","transfer"].includes(t.type)&&o.jsxs("div",{style:{marginBottom:"16px"},children:[o.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:500,marginBottom:"4px"},children:"Contenido del mensaje"}),o.jsx("textarea",{value:u.content||"",onChange:w=>b("content",w.target.value),rows:4,style:{width:"100%",padding:"8px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"13px",resize:"vertical"},placeholder:"Escribe el mensaje..."}),o.jsxs("p",{style:{fontSize:"11px",color:"#6b7280",marginTop:"4px"},children:["Usa ","{{variable}}"," para insertar variables"]})]}),t.type==="transfer"&&o.jsxs("div",{style:{marginBottom:"16px"},children:[o.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:500,marginBottom:"4px"},children:"Departamento destino"}),o.jsxs("select",{value:u.targetDepartmentId||"",onChange:w=>b("targetDepartmentId",w.target.value?Number(w.target.value):null),style:{width:"100%",padding:"8px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"13px"},children:[o.jsx("option",{value:"",children:"Auto (detectar por intent)"}),g.filter(w=>w.active).map(w=>o.jsx("option",{value:w.id,children:w.display_name||w.name},w.id))]}),o.jsx("p",{style:{fontSize:"11px",color:"#6b7280",marginTop:"4px"},children:'Si seleccionas "Auto", se usar el intent detectado para asignar departamento'})]}),t.type==="question"&&o.jsxs("div",{style:{marginBottom:"16px"},children:[o.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:500,marginBottom:"4px"},children:"Guardar respuesta en variable"}),o.jsx("input",{type:"text",value:u.variable||"",onChange:w=>b("variable",w.target.value),style:{width:"100%",padding:"8px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"13px"},placeholder:"nombre_variable"})]}),t.type==="question"&&o.jsxs("div",{style:{marginBottom:"16px"},children:[o.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:500,marginBottom:"8px"},children:"Opciones de respuesta"}),(u.options||[]).map((w,R)=>o.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"8px"},children:[o.jsx("input",{type:"text",value:w.label,onChange:M=>S(R,"label",M.target.value),placeholder:"Texto",style:{flex:1,padding:"6px",border:"1px solid #d1d5db",borderRadius:"4px",fontSize:"12px"}}),o.jsx("input",{type:"text",value:w.value,onChange:M=>S(R,"value",M.target.value),placeholder:"Valor",style:{width:"80px",padding:"6px",border:"1px solid #d1d5db",borderRadius:"4px",fontSize:"12px"}}),o.jsx("button",{onClick:()=>C(R),style:{background:"#fee2e2",border:"none",borderRadius:"4px",padding:"0 8px",cursor:"pointer",color:"#ef4444"},children:""})]},R)),o.jsx("button",{onClick:_,style:{background:"#f3f4f6",border:"1px dashed #d1d5db",borderRadius:"6px",padding:"8px",width:"100%",cursor:"pointer",fontSize:"12px"},children:"+ Agregar opcin"})]}),t.type==="action"&&o.jsxs("div",{style:{marginBottom:"16px"},children:[o.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:500,marginBottom:"4px"},children:"Tipo de accin"}),o.jsxs("select",{value:u.action||"",onChange:w=>b("action",w.target.value),style:{width:"100%",padding:"8px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"13px"},children:[o.jsx("option",{value:"",children:"Selecciona..."}),o.jsx("option",{value:"notify_sales",children:"Notificar a ventas"}),o.jsx("option",{value:"create_ticket",children:"Crear ticket"}),o.jsx("option",{value:"save_lead",children:"Guardar lead"}),o.jsx("option",{value:"send_email",children:"Enviar email"}),o.jsx("option",{value:"webhook",children:"Llamar webhook"}),o.jsx("option",{value:"search_faq",children:"Buscar en FAQ"})]})]}),t.type==="ai_response"&&o.jsxs("div",{style:{marginBottom:"16px",padding:"12px",background:"#f5f3ff",borderRadius:"8px",border:"1px solid #c4b5fd"},children:[o.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:600,marginBottom:"12px",color:"#5b21b6"},children:" Configuracin de IA"}),o.jsxs("div",{style:{marginBottom:"12px"},children:[o.jsx("label",{style:{display:"block",fontSize:"11px",fontWeight:500,marginBottom:"4px",color:"#6b7280"},children:"Prompt del sistema"}),o.jsx("textarea",{value:u.system_prompt||"",onChange:w=>b("system_prompt",w.target.value),rows:3,style:{width:"100%",padding:"8px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"12px",resize:"vertical"},placeholder:"Eres un asistente de ventas amable y profesional..."})]}),o.jsxs("div",{style:{marginBottom:"12px"},children:[o.jsx("label",{style:{display:"block",fontSize:"11px",fontWeight:500,marginBottom:"4px",color:"#6b7280"},children:"Prompt del usuario"}),o.jsx("textarea",{value:u.user_prompt||"",onChange:w=>b("user_prompt",w.target.value),rows:2,style:{width:"100%",padding:"8px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"12px",resize:"vertical"},placeholder:"El cliente pregunta: {{initial_message}}"}),o.jsxs("p",{style:{fontSize:"10px",color:"#94a3b8",marginTop:"4px"},children:["Usa ","{{variable}}"," para insertar datos dinmicos"]})]}),o.jsxs("div",{style:{marginBottom:"12px"},children:[o.jsx("label",{style:{display:"block",fontSize:"11px",fontWeight:500,marginBottom:"4px",color:"#6b7280"},children:"Modelo"}),o.jsxs("select",{value:u.model||"gpt-4o-mini",onChange:w=>b("model",w.target.value),style:{width:"100%",padding:"8px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"12px"},children:[o.jsx("option",{value:"gpt-4o-mini",children:"GPT-4o Mini (rpido)"}),o.jsx("option",{value:"gpt-4o",children:"GPT-4o (preciso)"}),o.jsx("option",{value:"gpt-4-turbo",children:"GPT-4 Turbo"})]})]}),o.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"12px"},children:[o.jsxs("div",{style:{flex:1},children:[o.jsx("label",{style:{display:"block",fontSize:"11px",fontWeight:500,marginBottom:"4px",color:"#6b7280"},children:"Temperatura"}),o.jsx("input",{type:"number",min:"0",max:"1",step:"0.1",value:u.temperature||.7,onChange:w=>b("temperature",parseFloat(w.target.value)),style:{width:"100%",padding:"8px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"12px"}})]}),o.jsxs("div",{style:{flex:1},children:[o.jsx("label",{style:{display:"block",fontSize:"11px",fontWeight:500,marginBottom:"4px",color:"#6b7280"},children:"Max tokens"}),o.jsx("input",{type:"number",min:"50",max:"2000",step:"50",value:u.max_tokens||200,onChange:w=>b("max_tokens",parseInt(w.target.value)),style:{width:"100%",padding:"8px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"12px"}})]})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"11px",fontWeight:500,marginBottom:"4px",color:"#6b7280"},children:"Guardar respuesta en variable (opcional)"}),o.jsx("input",{type:"text",value:u.variable||"",onChange:w=>b("variable",w.target.value),style:{width:"100%",padding:"8px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"12px"},placeholder:"ai_response"})]})]}),t.type==="webhook"&&o.jsxs("div",{style:{marginBottom:"16px",padding:"12px",background:"#fff7ed",borderRadius:"8px",border:"1px solid #fed7aa"},children:[o.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:600,marginBottom:"12px",color:"#c2410c"},children:" Configuracin de Webhook"}),o.jsxs("div",{style:{marginBottom:"12px"},children:[o.jsx("label",{style:{display:"block",fontSize:"11px",fontWeight:500,marginBottom:"4px",color:"#6b7280"},children:"URL del endpoint"}),o.jsx("input",{type:"text",value:u.url||"",onChange:w=>b("url",w.target.value),style:{width:"100%",padding:"8px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"12px"},placeholder:"https://api.ejemplo.com/endpoint"})]}),o.jsxs("div",{style:{marginBottom:"12px"},children:[o.jsx("label",{style:{display:"block",fontSize:"11px",fontWeight:500,marginBottom:"4px",color:"#6b7280"},children:"Mtodo HTTP"}),o.jsxs("select",{value:u.method||"POST",onChange:w=>b("method",w.target.value),style:{width:"100%",padding:"8px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"12px"},children:[o.jsx("option",{value:"GET",children:"GET"}),o.jsx("option",{value:"POST",children:"POST"}),o.jsx("option",{value:"PUT",children:"PUT"}),o.jsx("option",{value:"PATCH",children:"PATCH"}),o.jsx("option",{value:"DELETE",children:"DELETE"})]})]}),o.jsxs("div",{style:{marginBottom:"12px"},children:[o.jsx("label",{style:{display:"block",fontSize:"11px",fontWeight:500,marginBottom:"4px",color:"#6b7280"},children:"Headers (JSON)"}),o.jsx("textarea",{value:u.headers||`{
  "Content-Type": "application/json"
}`,onChange:w=>b("headers",w.target.value),rows:3,style:{width:"100%",padding:"8px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"11px",fontFamily:"monospace",resize:"vertical"}})]}),o.jsxs("div",{style:{marginBottom:"12px"},children:[o.jsxs("label",{style:{display:"block",fontSize:"11px",fontWeight:500,marginBottom:"4px",color:"#6b7280"},children:["Body (JSON) - Usa ","{{variable}}"," para datos dinmicos"]}),o.jsx("textarea",{value:u.body||`{
  "phone": "{{phone}}",
  "message": "{{initial_message}}"
}`,onChange:w=>b("body",w.target.value),rows:4,style:{width:"100%",padding:"8px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"11px",fontFamily:"monospace",resize:"vertical"}})]}),o.jsxs("div",{style:{marginBottom:"12px"},children:[o.jsx("label",{style:{display:"block",fontSize:"11px",fontWeight:500,marginBottom:"4px",color:"#6b7280"},children:"Timeout (ms)"}),o.jsx("input",{type:"number",min:"1000",max:"30000",step:"1000",value:u.timeout||5e3,onChange:w=>b("timeout",parseInt(w.target.value)),style:{width:"100%",padding:"8px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"12px"}})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"11px",fontWeight:500,marginBottom:"4px",color:"#6b7280"},children:"Guardar respuesta en variable"}),o.jsx("input",{type:"text",value:u.variable||"",onChange:w=>b("variable",w.target.value),style:{width:"100%",padding:"8px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"12px"},placeholder:"api_response"})]})]}),t.type==="delay"&&o.jsxs("div",{style:{marginBottom:"16px",padding:"12px",background:"#f8fafc",borderRadius:"8px",border:"1px solid #cbd5e1"},children:[o.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:600,marginBottom:"12px",color:"#475569"},children:" Configuracin de Espera"}),o.jsxs("div",{style:{marginBottom:"12px"},children:[o.jsx("label",{style:{display:"block",fontSize:"11px",fontWeight:500,marginBottom:"4px",color:"#6b7280"},children:"Segundos de espera"}),o.jsx("input",{type:"number",min:"1",max:"60",step:"1",value:u.seconds||2,onChange:w=>b("seconds",parseInt(w.target.value)),style:{width:"100%",padding:"8px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"13px"}}),o.jsx("p",{style:{fontSize:"10px",color:"#94a3b8",marginTop:"4px"},children:"Entre 1 y 60 segundos. Recomendado: 2-5 seg para parecer ms humano."})]}),o.jsx("div",{children:o.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer"},children:[o.jsx("input",{type:"checkbox",checked:u.typing_indicator!==!1,onChange:w=>b("typing_indicator",w.target.checked),style:{width:"16px",height:"16px"}}),o.jsx("span",{style:{fontSize:"12px",color:"#374151"},children:'Mostrar "escribiendo..." mientras espera'})]})})]}),o.jsx("div",{style:{marginTop:"24px",paddingTop:"16px",borderTop:"1px solid #e5e7eb"},children:o.jsx("button",{onClick:()=>s(t.id),style:{width:"100%",padding:"10px",background:"#fee2e2",border:"1px solid #fecaca",borderRadius:"6px",color:"#dc2626",cursor:"pointer",fontWeight:500,fontSize:"13px"},children:" Eliminar nodo"})})]})}function UA({isOpen:t,onClose:a}){const{nodes:s,edges:i,flowName:c}=Kr(),[u,f]=j.useState([]),[m,p]=j.useState(""),[g,y]=j.useState(null),[x,b]=j.useState({}),[S,_]=j.useState(!1),[C,N]=j.useState(null),[E,z]=j.useState("local"),[T,k]=j.useState(!1),w=j.useRef(null);j.useEffect(()=>{w.current?.scrollIntoView({behavior:"smooth"})},[u]),j.useEffect(()=>{t&&R()},[t]);const R=()=>{f([{type:"system",text:`Simulando flujo: "${c}"`},{type:"system",text:"Escribe un mensaje para iniciar..."}]),b({}),y(null),_(!0),N(null)},M=D=>s.find(Y=>Y.id===D),U=(D,Y=null)=>{const H=i.find(W=>!(W.source!==D||Y&&W.label&&W.label!==Y));return H?M(H.target):null},L=()=>s.find(D=>D.type==="trigger"),Q=async D=>{if(!D){F("system"," Flujo terminado (no hay siguiente nodo)"),_(!0);return}switch(N(D.id),y(D.id),await se(300),D.type){case"trigger":F("system"," Trigger activado");const Y=U(D.id);Q(Y);break;case"message":const H=G(D.data.content||"Mensaje vaco");F("bot",H),await se(500);const W=U(D.id);Q(W);break;case"question":const O=G(D.data.content||"?");F("bot",O),D.data.options&&D.data.options.length>0&&F("options",D.data.options),_(!0),y(D.id);break;case"condition":F("system"," Evaluando condicin..."),await se(300);const P=D.data.conditions||[];let te=null;for(const Ee of P){if(Ee.else){te=Ee.goto;break}const $e=Ee.if?.match(/(\w+)\s*==\s*["']?(\w+)["']?/);if($e){const[,Re,gt]=$e;if(x[Re]===gt){te=Ee.goto,F("system",` Condicin cumplida: ${Re} = ${gt}`);break}}}const ae=M(te)||U(D.id);Q(ae);break;case"action":F("system",` Ejecutando accin: ${D.data.action||"sin definir"}`),await se(500);const re=U(D.id);Q(re);break;case"ai_response":F("system"," Generando respuesta con IA..."),k(!0),await se(1500),k(!1);const de=D.data.system_prompt||"",ue=G(D.data.user_prompt||""),$=`[Respuesta IA simulada]
${de.substring(0,50)}...
Para: "${ue.substring(0,50)}..."`;F("bot",$),D.data.variable&&(b(Ee=>({...Ee,[D.data.variable]:"respuesta_ia_simulada"})),F("system",` Variable "${D.data.variable}" = respuesta IA`)),await se(300);const ce=U(D.id);Q(ce);break;case"webhook":F("system",` Llamando webhook: ${D.data.url||"URL no definida"}`),F("system",`   Mtodo: ${D.data.method||"POST"}`),k(!0),await se(1e3),k(!1);const he={success:!0,data:{status:"ok",simulated:!0}};F("system",` Webhook respondi: ${JSON.stringify(he).substring(0,50)}...`),D.data.variable&&b(Ee=>({...Ee,[D.data.variable]:he}));const ve=U(D.id);Q(ve);break;case"delay":const pe=D.data.seconds||2,be=D.data.typing_indicator!==!1;F("system",` Esperando ${pe} segundos...`),be&&k(!0),await se(pe*1e3),be&&k(!1);const Se=U(D.id);Q(Se);break;case"transfer":F("bot",D.data.content||"Transfiriendo a un agente..."),F("system"," Conversacin transferida a humano"),_(!0);break;case"end":F("system"," Flujo completado"),_(!0);break;default:F("system",`Nodo desconocido: ${D.type}`);const Ae=U(D.id);Q(Ae)}},G=D=>D&&D.replace(/\{\{(\w+)\}\}/g,(Y,H)=>x[H]||Y),F=(D,Y)=>{f(H=>[...H,{type:D,text:Y,time:new Date}])},se=D=>new Promise(Y=>setTimeout(Y,D)),q=()=>{if(!m.trim())return;const D=m.trim();p(""),F("user",D),_(!1);const Y=M(g);if(Y?.type==="question"&&Y.data.variable){let H=D;if(Y.data.options){const W=Y.data.options.find(O=>O.label.toLowerCase()===D.toLowerCase()||O.value===D);W&&(H=W.value)}b(W=>({...W,[Y.data.variable]:H})),F("system",` Variable "${Y.data.variable}" = "${H}"`),setTimeout(()=>{const W=U(g);Q(W)},300)}else if(!g){const H=L();H?Q(H):F("system"," No hay nodo Trigger en el flujo")}},I=D=>{p(D.label),setTimeout(()=>q(),100)},B=D=>{D.key==="Enter"&&!D.shiftKey&&(D.preventDefault(),q())};return t?o.jsxs("div",{style:{position:"fixed",right:"20px",bottom:"20px",width:"380px",height:"550px",background:"white",borderRadius:"16px",boxShadow:"0 10px 40px rgba(0,0,0,0.2)",display:"flex",flexDirection:"column",zIndex:1e3,overflow:"hidden"},children:[o.jsxs("div",{style:{background:"linear-gradient(135deg, #075E54 0%, #128C7E 100%)",color:"white",padding:"12px 16px"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[o.jsxs("div",{children:[o.jsx("div",{style:{fontWeight:600,fontSize:"15px"},children:" Simulador de Chat"}),o.jsx("div",{style:{fontSize:"12px",opacity:.8},children:"Prueba tu flujo aqu"})]}),o.jsxs("div",{style:{display:"flex",gap:"8px"},children:[o.jsx("button",{onClick:R,style:{background:"rgba(255,255,255,0.2)",border:"none",color:"white",padding:"6px 12px",borderRadius:"6px",cursor:"pointer",fontSize:"12px"},children:""}),o.jsx("button",{onClick:a,style:{background:"none",border:"none",color:"white",fontSize:"20px",cursor:"pointer",padding:"0 4px"},children:""})]})]}),o.jsxs("div",{style:{display:"flex",gap:"8px",background:"rgba(0,0,0,0.2)",borderRadius:"8px",padding:"4px"},children:[o.jsx("button",{onClick:()=>z("local"),style:{flex:1,background:E==="local"?"white":"transparent",color:E==="local"?"#075E54":"white",border:"none",padding:"6px 12px",borderRadius:"6px",cursor:"pointer",fontSize:"11px",fontWeight:E==="local"?600:400},children:"Local"}),o.jsx("button",{onClick:()=>z("server"),style:{flex:1,background:E==="server"?"white":"transparent",color:E==="server"?"#075E54":"white",border:"none",padding:"6px 12px",borderRadius:"6px",cursor:"pointer",fontSize:"11px",fontWeight:E==="server"?600:400},children:"Servidor"})]})]}),Object.keys(x).length>0&&o.jsxs("div",{style:{background:"#f0fdf4",padding:"8px 16px",fontSize:"11px",borderBottom:"1px solid #e5e7eb"},children:[o.jsx("strong",{children:"Variables:"})," ",Object.entries(x).map(([D,Y])=>o.jsxs("span",{style:{background:"#dcfce7",padding:"2px 6px",borderRadius:"4px",marginLeft:"4px"},children:[D,"=",typeof Y=="object"?JSON.stringify(Y).substring(0,30)+"...":String(Y)]},D))]}),o.jsxs("div",{style:{flex:1,overflowY:"auto",padding:"16px",background:"#e5ddd5",backgroundImage:'url("data:image/svg+xml,%3Csvg width="60" height="60" viewBox="0 0 60 60" xmlns="http://www.w3.org/2000/svg"%3E%3Cg fill="none" fill-rule="evenodd"%3E%3Cg fill="%239C92AC" fill-opacity="0.05"%3E%3Cpath d="M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z"/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")'},children:[u.map((D,Y)=>o.jsx(qA,{message:D,onOptionClick:I},Y)),T&&o.jsx("div",{style:{display:"flex",justifyContent:"flex-start",marginBottom:"8px"},children:o.jsxs("div",{style:{background:"white",padding:"12px 16px",borderRadius:"12px 12px 12px 0",boxShadow:"0 1px 2px rgba(0,0,0,0.1)",display:"flex",gap:"4px"},children:[o.jsx("span",{className:"typing-dot",style:{width:"8px",height:"8px",background:"#90a3ae",borderRadius:"50%",animation:"typing 1.4s infinite ease-in-out",animationDelay:"0s"}}),o.jsx("span",{className:"typing-dot",style:{width:"8px",height:"8px",background:"#90a3ae",borderRadius:"50%",animation:"typing 1.4s infinite ease-in-out",animationDelay:"0.2s"}}),o.jsx("span",{className:"typing-dot",style:{width:"8px",height:"8px",background:"#90a3ae",borderRadius:"50%",animation:"typing 1.4s infinite ease-in-out",animationDelay:"0.4s"}})]})}),o.jsx("div",{ref:w})]}),o.jsxs("div",{style:{padding:"12px",background:"#f0f2f5",display:"flex",gap:"8px"},children:[o.jsx("input",{type:"text",value:m,onChange:D=>p(D.target.value),onKeyPress:B,placeholder:S?"Escribe un mensaje...":"Esperando respuesta...",disabled:!S,style:{flex:1,padding:"10px 16px",border:"none",borderRadius:"24px",fontSize:"14px",outline:"none"}}),o.jsx("button",{onClick:q,disabled:!S||!m.trim(),style:{background:"#25D366",color:"white",border:"none",borderRadius:"50%",width:"40px",height:"40px",cursor:S&&m.trim()?"pointer":"not-allowed",opacity:S&&m.trim()?1:.5,fontSize:"18px"},children:""})]})]}):null}function qA({message:t,onOptionClick:a}){const{type:s,text:i}=t,c=f=>typeof f=="object"&&f!==null?JSON.stringify(f,null,2):String(f);if(s==="system")return o.jsx("div",{style:{textAlign:"center",margin:"8px 0",fontSize:"11px",color:"#667781",background:"rgba(255,255,255,0.8)",padding:"4px 12px",borderRadius:"8px",display:"inline-block",width:"100%"},children:c(i)});if(s==="options")return o.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px",margin:"8px 0"},children:i.map((f,m)=>o.jsx("button",{onClick:()=>a(f),style:{background:"white",border:"1px solid #25D366",color:"#25D366",padding:"8px 16px",borderRadius:"16px",cursor:"pointer",fontSize:"13px",fontWeight:500},children:f.label},m))});const u=s==="user";return o.jsx("div",{style:{display:"flex",justifyContent:u?"flex-end":"flex-start",marginBottom:"8px"},children:o.jsx("div",{style:{maxWidth:"80%",padding:"8px 12px",borderRadius:u?"12px 12px 0 12px":"12px 12px 12px 0",background:u?"#dcf8c6":"white",boxShadow:"0 1px 2px rgba(0,0,0,0.1)",fontSize:"14px",lineHeight:"1.4",whiteSpace:"pre-wrap"},children:c(i)})})}const rh=[{title:"Bienvenido al Flow Builder!",description:"Crea flujos de conversacin para tu chatbot de WhatsApp de forma visual, sin escribir cdigo.",icon:"",image:null},{title:"Arrastra nodos al canvas",description:"En la barra izquierda encontrars los nodos disponibles. Arrstralos al canvas para construir tu flujo.",icon:"",tips:[" Mensaje: Enva un texto al usuario"," Pregunta: Espera una respuesta del usuario"," Condicin: Bifurca el flujo segn una variable"," Accin: Ejecuta una accin (notificar, guardar, etc.)"]},{title:"Conecta los nodos",description:"Arrastra desde el punto verde (salida) de un nodo hasta el punto gris (entrada) de otro para conectarlos.",icon:"",tips:["El flujo siempre empieza en el Trigger","Puedes tener mltiples caminos con Condiciones","Termina con un nodo Fin o Transferir"]},{title:"Configura cada nodo",description:"Haz clic en un nodo para ver sus propiedades a la derecha. Ah puedes editar el contenido, opciones y variables.",icon:"",tips:["Usa {{variable}} para insertar datos dinmicos","Las preguntas guardan la respuesta en una variable","Las condiciones evalan esas variables"]},{title:"Guarda y activa!",description:"Cuando termines, guarda tu flujo y actvalo para que empiece a responder mensajes automticamente.",icon:"",tips:["Puedes tener varios flujos, pero solo algunos activos",'Usa "Abrir" para cargar flujos guardados',"Las plantillas te dan flujos de ejemplo para empezar"]}];function VA({onComplete:t}){const[a,s]=j.useState(0),[i,c]=j.useState(!1),u=rh[a],f=a===rh.length-1,m=()=>{f?c(!0):s(a+1)},p=()=>{t(null)},g=y=>{t(y)};return i?o.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:o.jsxs("div",{style:{background:"white",borderRadius:"16px",padding:"32px",maxWidth:"600px",width:"90%"},children:[o.jsx("h2",{style:{margin:"0 0 8px 0",fontSize:"24px"},children:"Cmo quieres empezar?"}),o.jsx("p",{style:{color:"#6b7280",margin:"0 0 24px 0"},children:"Puedes empezar desde cero o usar una plantilla predefinida"}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:[o.jsx(pc,{icon:"",title:"Empezar vaco",description:"Canvas en blanco para crear tu propio flujo",onClick:()=>g(null)}),o.jsx(pc,{icon:"",title:"Embudo de Ventas",description:"Califica leads y gualos a la compra",onClick:()=>g("sales_funnel"),color:"#25D366"}),o.jsx(pc,{icon:"",title:"Embudo de Soporte",description:"Resuelve dudas con FAQ y escala a humanos",onClick:()=>g("support_funnel"),color:"#34B7F1"}),o.jsx(pc,{icon:"",title:"Captura de Leads",description:"Recolecta informacin de contacto",onClick:()=>g("lead_capture"),color:"#f59e0b"})]}),o.jsx("button",{onClick:()=>g(null),style:{marginTop:"16px",padding:"8px",background:"none",border:"none",color:"#6b7280",cursor:"pointer",fontSize:"13px",width:"100%"},children:"Saltar y empezar vaco "})]})}):o.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:o.jsxs("div",{style:{background:"white",borderRadius:"16px",padding:"32px",maxWidth:"500px",width:"90%",textAlign:"center"},children:[o.jsx("div",{style:{display:"flex",justifyContent:"center",gap:"8px",marginBottom:"24px"},children:rh.map((y,x)=>o.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:x===a?"#25D366":"#e5e7eb",transition:"background 0.2s"}},x))}),o.jsx("div",{style:{fontSize:"64px",marginBottom:"16px"},children:u.icon}),o.jsx("h2",{style:{margin:"0 0 12px 0",fontSize:"24px",color:"#111827"},children:u.title}),o.jsx("p",{style:{color:"#6b7280",margin:"0 0 20px 0",lineHeight:"1.6"},children:u.description}),u.tips&&o.jsx("div",{style:{background:"#f9fafb",borderRadius:"8px",padding:"16px",textAlign:"left",marginBottom:"24px"},children:u.tips.map((y,x)=>o.jsx("div",{style:{fontSize:"13px",color:"#4b5563",marginBottom:x<u.tips.length-1?"8px":0},children:y},x))}),o.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"center"},children:[o.jsx("button",{onClick:p,style:{padding:"12px 24px",background:"white",border:"1px solid #d1d5db",borderRadius:"8px",cursor:"pointer",fontSize:"14px",color:"#6b7280"},children:"Saltar"}),o.jsx("button",{onClick:m,style:{padding:"12px 24px",background:"#25D366",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"14px",fontWeight:500},children:f?"Empezar":"Siguiente"})]})]})})}function pc({icon:t,title:a,description:s,onClick:i,color:c}){return o.jsxs("div",{onClick:i,style:{padding:"16px",border:"2px solid #e5e7eb",borderRadius:"12px",cursor:"pointer",transition:"all 0.2s",textAlign:"left"},onMouseOver:u=>{u.currentTarget.style.borderColor=c||"#25D366",u.currentTarget.style.transform="translateY(-2px)"},onMouseOut:u=>{u.currentTarget.style.borderColor="#e5e7eb",u.currentTarget.style.transform="none"},children:[o.jsx("div",{style:{fontSize:"28px",marginBottom:"8px"},children:t}),o.jsx("div",{style:{fontWeight:600,fontSize:"14px",marginBottom:"4px"},children:a}),o.jsx("div",{style:{fontSize:"12px",color:"#6b7280"},children:s})]})}function YA(){const{id:t}=Lj(),[a,s]=j.useState(!1),[i,c]=j.useState(!1),[u,f]=j.useState(null),[m,p]=j.useState(!1),{loadFlow:g}=Kr();j.useEffect(()=>{t?y(t):localStorage.getItem("flowbuilder_onboarding_seen")||c(!0)},[t]);const y=async S=>{p(!0);try{const _=await yh(S);if(_.flow)g(_.flow),x(`Flujo "${_.flow.name}" cargado correctamente`,"success");else throw new Error("No se pudo obtener los datos del flujo")}catch(_){console.error("Error loading flow:",_),x(`Error al cargar flujo: ${_.message}`,"error")}finally{p(!1)}},x=(S,_="info")=>{f({message:S,type:_}),setTimeout(()=>f(null),4e3)},b=async S=>{if(localStorage.setItem("flowbuilder_onboarding_seen","true"),c(!1),S){p(!0);try{console.log("Creating flow from template:",S);const _=await Fb(S,null);if(console.log("Template created, result:",_),_.id){const C=await yh(_.id);if(console.log("Flow data loaded:",C),C.flow)g(C.flow),x(`Flujo "${C.flow.name}" cargado correctamente`,"success");else throw new Error("No se pudo obtener los datos del flujo")}else throw new Error("No se recibi el ID del flujo creado")}catch(_){console.error("Error loading template:",_),x(`Error al cargar template: ${_.message}`,"error")}finally{p(!1)}}};return o.jsxs("div",{style:{display:"flex",flexDirection:"column",height:"100vh",overflow:"hidden"},children:[o.jsx(AA,{onTestClick:()=>s(!0)}),o.jsxs("div",{style:{display:"flex",flex:1,overflow:"hidden"},children:[o.jsx(zA,{}),o.jsx(BA,{}),o.jsx($A,{})]}),o.jsxs("button",{onClick:()=>s(!0),style:{position:"fixed",right:"20px",bottom:"20px",background:"linear-gradient(135deg, #075E54 0%, #25D366 100%)",color:"white",border:"none",borderRadius:"50px",padding:"14px 24px",cursor:"pointer",boxShadow:"0 4px 15px rgba(37, 211, 102, 0.4)",fontSize:"14px",fontWeight:600,display:a?"none":"flex",alignItems:"center",gap:"8px",zIndex:100},children:[o.jsx("span",{style:{fontSize:"18px"},children:""}),"Probar flujo"]}),m&&o.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1001},children:o.jsxs("div",{style:{background:"white",padding:"24px 32px",borderRadius:"12px",display:"flex",alignItems:"center",gap:"12px"},children:[o.jsx("div",{style:{width:"24px",height:"24px",border:"3px solid #e5e7eb",borderTop:"3px solid #25D366",borderRadius:"50%",animation:"spin 1s linear infinite"}}),o.jsx("span",{children:"Cargando flujo..."})]})}),u&&o.jsxs("div",{style:{position:"fixed",top:"20px",right:"20px",padding:"12px 20px",borderRadius:"8px",background:u.type==="success"?"#10b981":u.type==="error"?"#ef4444":"#3b82f6",color:"white",fontWeight:500,boxShadow:"0 4px 12px rgba(0,0,0,0.15)",zIndex:1002,animation:"slideIn 0.3s ease"},children:[u.type==="success"&&" ",u.type==="error"&&" ",u.message]}),o.jsx(UA,{isOpen:a,onClose:()=>s(!1)}),i&&o.jsx(VA,{onComplete:b})]})}const vm="/api/flow-logs";async function wm(t,a){if(!t.ok){let s=a;try{const i=await t.json();i.error&&(s=i.error)}catch{}throw new Error(s)}return t.json()}async function PA(t={}){const a=new URLSearchParams(t).toString(),s=await fetch(`${vm}?${a}`);return wm(s,"Error al cargar logs")}async function XA(t){const a=await fetch(`${vm}/${t}`);return wm(a,"Log no encontrado")}async function IA(t=7){const a=await fetch(`${vm}/stats/summary?days=${t}`);return wm(a,"Error al cargar estadsticas")}const Ji={completed:{label:"Completado",color:"#10b981",icon:zc},failed:{label:"Fallido",color:"#ef4444",icon:Ih},transferred:{label:"Transferido",color:"#f59e0b",icon:qh},running:{label:"En progreso",color:"#3b82f6",icon:ks},timeout:{label:"Timeout",color:"#6b7280",icon:Rc}};function GA(){const[t,a]=j.useState([]),[s,i]=j.useState(null),[c,u]=j.useState(!0),[f,m]=j.useState(null),[p,g]=j.useState(!1),[y,x]=j.useState({status:"",phone:"",flow_id:""});j.useEffect(()=>{b()},[]);const b=async()=>{u(!0);try{const[N,E]=await Promise.all([PA({limit:50,...y}),IA(7)]);a(N.logs||[]),i(E.stats)}catch(N){console.error("Error loading logs:",N)}finally{u(!1)}},S=async N=>{g(!0);try{const E=await XA(N.id);m(E.log)}catch(E){console.error("Error loading log detail:",E)}finally{g(!1)}},_=(N,E)=>{x(z=>({...z,[N]:E}))},C=()=>{b()};return c?o.jsx("div",{className:"p-8 flex items-center justify-center h-full",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-500"})}):o.jsxs("div",{className:"p-8",children:[o.jsxs("div",{className:"flex items-center justify-between mb-8",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Logs de Ejecucin"}),o.jsx("p",{className:"text-gray-500 mt-1",children:"Historial de ejecucin de flujos"})]}),o.jsxs("button",{onClick:b,className:"flex items-center gap-2 px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg text-gray-700 transition",children:[o.jsx(wo,{className:"w-4 h-4"}),"Actualizar"]})]}),s&&o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8",children:[o.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-100 shadow-sm",children:[o.jsx("p",{className:"text-sm text-gray-500",children:"Total ejecuciones"}),o.jsx("p",{className:"text-2xl font-bold text-gray-800",children:s.total_executions||0}),o.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"ltimos 7 das"})]}),o.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-100 shadow-sm",children:[o.jsx("p",{className:"text-sm text-gray-500",children:"Tasa de completado"}),o.jsxs("p",{className:"text-2xl font-bold text-green-600",children:[s.completion_rate||0,"%"]}),o.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:[s.completed||0," completados"]})]}),o.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-100 shadow-sm",children:[o.jsx("p",{className:"text-sm text-gray-500",children:"Fallidos"}),o.jsx("p",{className:"text-2xl font-bold text-red-500",children:s.failed||0}),o.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Requieren atencin"})]}),o.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-100 shadow-sm",children:[o.jsx("p",{className:"text-sm text-gray-500",children:"Tiempo promedio"}),o.jsx("p",{className:"text-2xl font-bold text-blue-600",children:s.avg_duration_ms?`${Math.round(s.avg_duration_ms)}ms`:"-"}),o.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Por ejecucin"})]})]}),o.jsx("div",{className:"bg-white rounded-xl p-4 border border-gray-100 shadow-sm mb-6",children:o.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Zh,{className:"w-4 h-4 text-gray-400"}),o.jsx("span",{className:"text-sm text-gray-600",children:"Filtrar:"})]}),o.jsxs("select",{value:y.status,onChange:N=>_("status",N.target.value),className:"px-3 py-2 border border-gray-200 rounded-lg text-sm focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none",children:[o.jsx("option",{value:"",children:"Todos los estados"}),o.jsx("option",{value:"completed",children:"Completados"}),o.jsx("option",{value:"failed",children:"Fallidos"}),o.jsx("option",{value:"transferred",children:"Transferidos"}),o.jsx("option",{value:"running",children:"En progreso"})]}),o.jsx("input",{type:"text",value:y.phone,onChange:N=>_("phone",N.target.value),placeholder:"Telfono...",className:"px-3 py-2 border border-gray-200 rounded-lg text-sm focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none w-40"}),o.jsx("button",{onClick:C,className:"px-4 py-2 bg-green-500 hover:bg-green-600 text-white rounded-lg text-sm transition",children:"Aplicar"})]})}),o.jsx("div",{className:"bg-white rounded-xl border border-gray-100 shadow-sm overflow-hidden",children:t.length===0?o.jsxs("div",{className:"p-12 text-center text-gray-400",children:[o.jsx(ks,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),o.jsx("p",{children:"No hay logs de ejecucin"}),o.jsx("p",{className:"text-sm mt-1",children:"Los logs aparecern cuando se ejecuten flujos"})]}):o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"bg-gray-50 text-left text-xs text-gray-500 uppercase tracking-wider",children:[o.jsx("th",{className:"px-4 py-3",children:"Fecha"}),o.jsx("th",{className:"px-4 py-3",children:"Flujo"}),o.jsx("th",{className:"px-4 py-3",children:"Telfono"}),o.jsx("th",{className:"px-4 py-3",children:"Estado"}),o.jsx("th",{className:"px-4 py-3",children:"Nodos"}),o.jsx("th",{className:"px-4 py-3",children:"Duracin"}),o.jsx("th",{className:"px-4 py-3"})]})}),o.jsx("tbody",{className:"divide-y divide-gray-100",children:t.map(N=>{const E=Ji[N.status]||Ji.running,z=E.icon;return o.jsxs("tr",{className:"hover:bg-gray-50 transition",children:[o.jsxs("td",{className:"px-4 py-3 text-sm",children:[o.jsx("div",{className:"text-gray-800",children:tu(new Date(N.started_at),"dd/MM HH:mm")}),o.jsx("div",{className:"text-xs text-gray-400",children:Fr(new Date(N.started_at),{addSuffix:!0,locale:ns})})]}),o.jsxs("td",{className:"px-4 py-3",children:[o.jsx("div",{className:"font-medium text-gray-800",children:N.flow_name||"Sin nombre"}),o.jsx("div",{className:"text-xs text-gray-400",children:N.trigger_type})]}),o.jsx("td",{className:"px-4 py-3",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Wc,{className:"w-3 h-3 text-gray-400"}),o.jsx("span",{className:"text-sm text-gray-700",children:N.phone})]})}),o.jsx("td",{className:"px-4 py-3",children:o.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium",style:{background:`${E.color}20`,color:E.color},children:[o.jsx(z,{className:"w-3 h-3"}),E.label]})}),o.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:N.total_nodes_executed||0}),o.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:N.total_duration_ms?`${Math.round(N.total_duration_ms)}ms`:"-"}),o.jsx("td",{className:"px-4 py-3",children:o.jsx("button",{onClick:()=>S(N),className:"p-2 hover:bg-gray-100 rounded-lg transition",title:"Ver detalle",children:o.jsx(Xh,{className:"w-4 h-4 text-gray-400"})})})]},N.id)})})]})}),f&&o.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:()=>m(null),children:o.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-2xl max-h-[80vh] overflow-auto m-4",onClick:N=>N.stopPropagation(),children:[o.jsxs("div",{className:"p-4 border-b border-gray-200 flex items-center justify-between sticky top-0 bg-white",children:[o.jsx("h3",{className:"font-semibold text-gray-800",children:"Detalle de Ejecucin"}),o.jsx("button",{onClick:()=>m(null),className:"p-2 hover:bg-gray-100 rounded-lg",children:o.jsx(Ds,{className:"w-4 h-4"})})]}),p?o.jsx("div",{className:"p-8 text-center",children:o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-green-500 mx-auto"})}):o.jsxs("div",{className:"p-4 space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-xs text-gray-400 mb-1",children:"Flujo"}),o.jsx("p",{className:"font-medium",children:f.flow_name})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-xs text-gray-400 mb-1",children:"Telfono"}),o.jsx("p",{className:"font-medium",children:f.phone})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-xs text-gray-400 mb-1",children:"Mensaje trigger"}),o.jsx("p",{className:"text-sm bg-gray-100 p-2 rounded",children:f.trigger_message||"-"})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-xs text-gray-400 mb-1",children:"Estado final"}),o.jsx("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium",style:{background:`${Ji[f.status]?.color}20`,color:Ji[f.status]?.color},children:Ji[f.status]?.label})]})]}),f.variables&&Object.keys(f.variables).length>0&&o.jsxs("div",{children:[o.jsx("p",{className:"text-xs text-gray-400 mb-2",children:"Variables capturadas"}),o.jsx("div",{className:"bg-gray-50 rounded-lg p-3 space-y-1",children:Object.entries(f.variables).map(([N,E])=>o.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[o.jsxs("span",{className:"font-mono text-purple-600",children:[N,":"]}),o.jsx("span",{className:"text-gray-700",children:String(E)})]},N))})]}),f.steps&&f.steps.length>0&&o.jsxs("div",{children:[o.jsx("p",{className:"text-xs text-gray-400 mb-2",children:"Nodos ejecutados"}),o.jsx("div",{className:"space-y-2",children:f.steps.map((N,E)=>o.jsxs("div",{className:"flex items-start gap-3 p-3 bg-gray-50 rounded-lg",children:[o.jsx("div",{className:"w-6 h-6 rounded-full bg-green-100 text-green-600 flex items-center justify-center text-xs font-medium",children:E+1}),o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"font-medium text-sm",children:N.node_id}),o.jsx("span",{className:"text-xs px-2 py-0.5 bg-gray-200 rounded text-gray-600",children:N.node_type}),o.jsxs("span",{className:"text-xs text-gray-400",children:[N.duration_ms,"ms"]})]}),N.output&&o.jsx("p",{className:"text-sm text-gray-600 mt-1 break-words",children:N.output})]})]},E))})]}),f.error_message&&o.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:[o.jsx("p",{className:"text-xs text-red-600 font-medium mb-1",children:"Error"}),o.jsx("p",{className:"text-sm text-red-700",children:f.error_message}),f.error_node_id&&o.jsxs("p",{className:"text-xs text-red-500 mt-1",children:["En nodo: ",f.error_node_id]})]})]})]})})]})}const gu="/api/leads";async function xu(t,a){if(!t.ok){let s=a;try{const i=await t.json();i.error&&(s=i.error)}catch{}throw new Error(s)}return t.json()}async function QA(t={}){const a=new URLSearchParams(t).toString(),s=await fetch(`${gu}?${a}`);return xu(s,"Error al cargar leads")}async function ZA(){const t=await fetch(`${gu}/stats`);return xu(t,"Error al cargar estadsticas")}async function FA(t,a){const s=await fetch(`${gu}/${encodeURIComponent(t)}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});return xu(s,"Error al actualizar lead")}async function WA(t,a,s){const i=await fetch(`${gu}/${encodeURIComponent(t)}/adjust-score`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({adjustment:a,reason:s})});return xu(i,"Error al ajustar score")}const gc={new:{label:"Nuevo",color:"#6b7280",bg:"#f3f4f6"},engaged:{label:"Interesado",color:"#3b82f6",bg:"#dbeafe"},qualified:{label:"Calificado",color:"#10b981",bg:"#d1fae5"},customer:{label:"Cliente",color:"#8b5cf6",bg:"#ede9fe"},inactive:{label:"Inactivo",color:"#9ca3af",bg:"#f9fafb"}},Zy={hot:{color:"#ef4444",label:"Caliente",range:"80-100"},warm:{color:"#f59e0b",label:"Tibio",range:"50-79"},cold:{color:"#3b82f6",label:"Fro",range:"20-49"},new:{color:"#6b7280",label:"Nuevo",range:"0-19"}};function KA(t){return t>=80?"hot":t>=50?"warm":t>=20?"cold":"new"}function JA(){const t=$s(),[a,s]=j.useState([]),[i,c]=j.useState(null),[u,f]=j.useState(!0),[m,p]=j.useState(null),[g,y]=j.useState({status:"",min_score:"",search:"",sort_by:"current_score",sort_dir:"desc"});j.useEffect(()=>{x()},[]);const x=async()=>{f(!0);try{const[N,E]=await Promise.all([QA({limit:100,...g}),ZA()]);s(N.leads||[]),c(E)}catch(N){console.error("Error loading leads:",N)}finally{f(!1)}},b=(N,E)=>{y(z=>({...z,[N]:E}))},S=()=>{x()},_=async(N,E)=>{try{await FA(N,{status:E}),x()}catch(z){console.error("Error updating lead:",z)}},C=async(N,E)=>{try{await WA(N,E,"Manual adjustment"),x()}catch(z){console.error("Error adjusting score:",z)}};return u?o.jsx("div",{className:"p-8 flex items-center justify-center h-full",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-500"})}):o.jsxs("div",{className:"p-8",children:[o.jsxs("div",{className:"flex items-center justify-between mb-8",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Gestin de Leads"}),o.jsx("p",{className:"text-gray-500 mt-1",children:"Administra y califica tus leads"})]}),o.jsxs("button",{onClick:x,className:"flex items-center gap-2 px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg text-gray-700 transition",children:[o.jsx(wo,{className:"w-4 h-4"}),"Actualizar"]})]}),i&&o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 mb-8",children:[o.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-100 shadow-sm",children:[o.jsx("p",{className:"text-sm text-gray-500",children:"Total Leads"}),o.jsx("p",{className:"text-2xl font-bold text-gray-800",children:i.stats?.total_leads||0})]}),o.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-100 shadow-sm",children:[o.jsx("p",{className:"text-sm text-gray-500",children:"Score Promedio"}),o.jsx("p",{className:"text-2xl font-bold text-blue-600",children:i.stats?.avg_score||0})]}),o.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-100 shadow-sm",children:[o.jsx("p",{className:"text-sm text-gray-500",children:"Nuevos"}),o.jsx("p",{className:"text-2xl font-bold text-gray-600",children:i.stats?.new_leads||0})]}),o.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-100 shadow-sm",children:[o.jsx("p",{className:"text-sm text-gray-500",children:"Calificados"}),o.jsx("p",{className:"text-2xl font-bold text-green-600",children:i.stats?.qualified_leads||0})]}),o.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-100 shadow-sm",children:[o.jsx("p",{className:"text-sm text-gray-500",children:"Clientes"}),o.jsx("p",{className:"text-2xl font-bold text-purple-600",children:i.stats?.customers||0})]})]}),i?.score_distribution&&o.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-100 shadow-sm mb-6",children:[o.jsx("p",{className:"text-sm font-medium text-gray-700 mb-3",children:"Distribucin de Scores"}),o.jsx("div",{className:"flex gap-4",children:Object.entries(Zy).map(([N,E])=>{const z=i.score_distribution.find(T=>T.category===N)?.count||0;return o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"w-3 h-3 rounded-full",style:{background:E.color}}),o.jsxs("span",{className:"text-sm text-gray-600",children:[E.label,": ",o.jsx("strong",{children:z})]})]},N)})})]}),o.jsx("div",{className:"bg-white rounded-xl p-4 border border-gray-100 shadow-sm mb-6",children:o.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Zh,{className:"w-4 h-4 text-gray-400"}),o.jsx("span",{className:"text-sm text-gray-600",children:"Filtrar:"})]}),o.jsxs("div",{className:"relative",children:[o.jsx(Sb,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),o.jsx("input",{type:"text",value:g.search,onChange:N=>b("search",N.target.value),placeholder:"Buscar...",className:"pl-10 pr-4 py-2 border border-gray-200 rounded-lg text-sm focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none w-48"})]}),o.jsxs("select",{value:g.status,onChange:N=>b("status",N.target.value),className:"px-3 py-2 border border-gray-200 rounded-lg text-sm focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none",children:[o.jsx("option",{value:"",children:"Todos los estados"}),Object.entries(gc).map(([N,E])=>o.jsx("option",{value:N,children:E.label},N))]}),o.jsxs("select",{value:g.min_score,onChange:N=>b("min_score",N.target.value),className:"px-3 py-2 border border-gray-200 rounded-lg text-sm focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none",children:[o.jsx("option",{value:"",children:"Todos los scores"}),o.jsx("option",{value:"80",children:"Score 80+ (Caliente)"}),o.jsx("option",{value:"50",children:"Score 50+ (Tibio)"}),o.jsx("option",{value:"20",children:"Score 20+ (Fro)"})]}),o.jsxs("select",{value:`${g.sort_by}-${g.sort_dir}`,onChange:N=>{const[E,z]=N.target.value.split("-");b("sort_by",E),b("sort_dir",z)},className:"px-3 py-2 border border-gray-200 rounded-lg text-sm focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none",children:[o.jsx("option",{value:"current_score-desc",children:"Mayor score"}),o.jsx("option",{value:"current_score-asc",children:"Menor score"}),o.jsx("option",{value:"last_interaction-desc",children:"Ms reciente"}),o.jsx("option",{value:"total_messages-desc",children:"Ms mensajes"})]}),o.jsx("button",{onClick:S,className:"px-4 py-2 bg-green-500 hover:bg-green-600 text-white rounded-lg text-sm transition",children:"Aplicar"})]})}),o.jsx("div",{className:"bg-white rounded-xl border border-gray-100 shadow-sm overflow-hidden",children:a.length===0?o.jsxs("div",{className:"p-12 text-center text-gray-400",children:[o.jsx(Jc,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),o.jsx("p",{children:"No hay leads registrados"}),o.jsx("p",{className:"text-sm mt-1",children:"Los leads se crean automticamente cuando interactan"})]}):o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"bg-gray-50 text-left text-xs text-gray-500 uppercase tracking-wider",children:[o.jsx("th",{className:"px-4 py-3",children:"Lead"}),o.jsx("th",{className:"px-4 py-3",children:"Score"}),o.jsx("th",{className:"px-4 py-3",children:"Estado"}),o.jsx("th",{className:"px-4 py-3",children:"Mensajes"}),o.jsx("th",{className:"px-4 py-3",children:"ltima actividad"}),o.jsx("th",{className:"px-4 py-3",children:"Acciones"})]})}),o.jsx("tbody",{className:"divide-y divide-gray-100",children:a.map(N=>{const E=KA(N.current_score),z=Zy[E],T=gc[N.status]||gc.new;return o.jsxs("tr",{className:"hover:bg-gray-50 transition",children:[o.jsx("td",{className:"px-4 py-3",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center",children:o.jsx("span",{className:"text-green-600 font-medium",children:N.contact_name?.[0]?.toUpperCase()||N.phone.slice(-2)})}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium text-gray-800",children:N.contact_name||"Sin nombre"}),o.jsxs("div",{className:"text-xs text-gray-400 flex items-center gap-1",children:[o.jsx(Wc,{className:"w-3 h-3"}),N.phone]})]})]})}),o.jsx("td",{className:"px-4 py-3",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center font-bold text-sm",style:{background:`${z.color}20`,color:z.color},children:N.current_score}),o.jsxs("div",{className:"flex flex-col gap-0.5",children:[o.jsx("button",{onClick:()=>C(N.phone,5),className:"p-1 hover:bg-green-100 rounded text-green-600",title:"+5 puntos",children:o.jsx(Fh,{className:"w-3 h-3"})}),o.jsx("button",{onClick:()=>C(N.phone,-5),className:"p-1 hover:bg-red-100 rounded text-red-600",title:"-5 puntos",children:o.jsx(BS,{className:"w-3 h-3"})})]})]})}),o.jsx("td",{className:"px-4 py-3",children:o.jsx("select",{value:N.status,onChange:k=>_(N.phone,k.target.value),className:"px-2 py-1 rounded-full text-xs font-medium border-0 cursor-pointer",style:{background:T.bg,color:T.color},children:Object.entries(gc).map(([k,w])=>o.jsx("option",{value:k,children:w.label},k))})}),o.jsx("td",{className:"px-4 py-3",children:o.jsxs("div",{className:"flex items-center gap-1 text-sm text-gray-600",children:[o.jsx(ga,{className:"w-4 h-4"}),N.total_messages||N.message_count||0]})}),o.jsx("td",{className:"px-4 py-3 text-sm text-gray-500",children:N.last_interaction?Fr(new Date(N.last_interaction),{addSuffix:!0,locale:ns}):"-"}),o.jsx("td",{className:"px-4 py-3",children:o.jsx("button",{onClick:()=>t(`/conversations?phone=${encodeURIComponent(N.phone)}`),className:"p-2 hover:bg-gray-100 rounded-lg transition",title:"Ver conversacin",children:o.jsx(Xh,{className:"w-4 h-4 text-gray-400"})})})]},N.phone)})})]})})]})}const ko="/api/flow-analytics";async function zo(t,a){if(!t.ok){let s=a;try{const i=await t.json();i.error&&(s=i.error)}catch{}throw new Error(s)}return t.json()}async function ek(t=7){const a=await fetch(`${ko}/summary?days=${t}`);return zo(a,"Error al cargar resumen")}async function tk(t=14){const a=await fetch(`${ko}/timeline?days=${t}`);return zo(a,"Error al cargar timeline")}async function nk(t=7){const a=await fetch(`${ko}/by-flow?days=${t}`);return zo(a,"Error al cargar mtricas por flujo")}async function ak(t=7){const a=await fetch(`${ko}/by-hour?days=${t}`);return zo(a,"Error al cargar distribucin horaria")}async function sk(t=7){const a=await fetch(`${ko}/trigger-types?days=${t}`);return zo(a,"Error al cargar tipos de trigger")}function rk(){const[t,a]=j.useState(null),[s,i]=j.useState([]),[c,u]=j.useState([]),[f,m]=j.useState([]),[p,g]=j.useState([]),[y,x]=j.useState(!0),[b,S]=j.useState(7);j.useEffect(()=>{_()},[b]);const _=async()=>{x(!0);try{const[E,z,T,k,w]=await Promise.all([ek(b),tk(b),nk(b),ak(b),sk(b)]);a(E.summary),i(z.timeline||[]),u(T.flows||[]),m(k.hourly||[]),g(w.trigger_types||[])}catch(E){console.error("Error loading analytics:",E)}finally{x(!1)}};if(y)return o.jsx("div",{className:"p-8 flex items-center justify-center h-full",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-500"})});const C=Math.max(...s.map(E=>E.total),1),N=Math.max(...f.map(E=>E.executions),1);return o.jsxs("div",{className:"p-8",children:[o.jsxs("div",{className:"flex items-center justify-between mb-8",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Analytics de Flujos"}),o.jsx("p",{className:"text-gray-500 mt-1",children:"Mtricas y anlisis de rendimiento"})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsxs("select",{value:b,onChange:E=>S(parseInt(E.target.value)),className:"px-3 py-2 border border-gray-200 rounded-lg text-sm focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none",children:[o.jsx("option",{value:7,children:"ltimos 7 das"}),o.jsx("option",{value:14,children:"ltimos 14 das"}),o.jsx("option",{value:30,children:"ltimos 30 das"})]}),o.jsxs("button",{onClick:_,className:"flex items-center gap-2 px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg text-gray-700 transition",children:[o.jsx(wo,{className:"w-4 h-4"}),"Actualizar"]})]})]}),t&&o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[o.jsx("div",{className:"bg-white rounded-xl p-5 border border-gray-100 shadow-sm",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-500",children:"Total Ejecuciones"}),o.jsx("p",{className:"text-3xl font-bold text-gray-800 mt-1",children:t.executions.total}),o.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:[t.executions.unique_users," usuarios nicos"]})]}),o.jsx("div",{className:"p-3 bg-blue-50 rounded-xl",children:o.jsx(ks,{className:"w-6 h-6 text-blue-600"})})]})}),o.jsx("div",{className:"bg-white rounded-xl p-5 border border-gray-100 shadow-sm",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-500",children:"Tasa de Completado"}),o.jsxs("p",{className:"text-3xl font-bold text-green-600 mt-1",children:[t.executions.completion_rate,"%"]}),o.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:[t.executions.completed," completados"]})]}),o.jsx("div",{className:"p-3 bg-green-50 rounded-xl",children:o.jsx(zc,{className:"w-6 h-6 text-green-600"})})]})}),o.jsx("div",{className:"bg-white rounded-xl p-5 border border-gray-100 shadow-sm",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-500",children:"Fallidos"}),o.jsx("p",{className:"text-3xl font-bold text-red-500 mt-1",children:t.executions.failed}),o.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:[t.executions.transferred," transferidos"]})]}),o.jsx("div",{className:"p-3 bg-red-50 rounded-xl",children:o.jsx(Ih,{className:"w-6 h-6 text-red-500"})})]})}),o.jsx("div",{className:"bg-white rounded-xl p-5 border border-gray-100 shadow-sm",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-500",children:"Tiempo Promedio"}),o.jsxs("p",{className:"text-3xl font-bold text-purple-600 mt-1",children:[t.executions.avg_duration_ms,"ms"]}),o.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:[t.executions.avg_nodes," nodos promedio"]})]}),o.jsx("div",{className:"p-3 bg-purple-50 rounded-xl",children:o.jsx(Rc,{className:"w-6 h-6 text-purple-600"})})]})})]}),o.jsxs("div",{className:"bg-white rounded-xl border border-gray-100 shadow-sm p-6 mb-6",children:[o.jsxs("h3",{className:"font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[o.jsx(Dc,{className:"w-5 h-5 text-gray-400"}),"Ejecuciones por da"]}),s.length===0?o.jsx("div",{className:"text-center text-gray-400 py-8",children:"No hay datos para mostrar"}):o.jsx("div",{className:"flex items-end gap-2 h-40",children:s.map((E,z)=>o.jsxs("div",{className:"flex-1 flex flex-col items-center",children:[o.jsxs("div",{className:"w-full flex flex-col gap-0.5",style:{height:"120px"},children:[o.jsx("div",{className:"w-full bg-green-500 rounded-t",style:{height:`${E.completed/C*100}%`},title:`Completados: ${E.completed}`}),o.jsx("div",{className:"w-full bg-red-400",style:{height:`${E.failed/C*100}%`},title:`Fallidos: ${E.failed}`}),o.jsx("div",{className:"w-full bg-yellow-400 rounded-b",style:{height:`${E.transferred/C*100}%`},title:`Transferidos: ${E.transferred}`})]}),o.jsx("div",{className:"text-xs text-gray-400 mt-2",children:tu(new Date(E.date),"dd/MM")})]},z))}),o.jsxs("div",{className:"flex items-center gap-4 mt-4 pt-4 border-t border-gray-100",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"w-3 h-3 rounded bg-green-500"}),o.jsx("span",{className:"text-xs text-gray-500",children:"Completados"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"w-3 h-3 rounded bg-red-400"}),o.jsx("span",{className:"text-xs text-gray-500",children:"Fallidos"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"w-3 h-3 rounded bg-yellow-400"}),o.jsx("span",{className:"text-xs text-gray-500",children:"Transferidos"})]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[o.jsxs("div",{className:"bg-white rounded-xl border border-gray-100 shadow-sm p-6",children:[o.jsxs("h3",{className:"font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[o.jsx(jb,{className:"w-5 h-5 text-gray-400"}),"Rendimiento por Flujo"]}),c.length===0?o.jsx("div",{className:"text-center text-gray-400 py-8",children:"No hay flujos configurados"}):o.jsx("div",{className:"space-y-3",children:c.slice(0,5).map((E,z)=>o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-8 h-8 rounded-lg bg-gray-100 flex items-center justify-center text-sm font-medium text-gray-600",children:z+1}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("p",{className:"font-medium text-gray-800 truncate",children:E.flow_name}),o.jsxs("span",{className:"text-sm text-gray-500",children:[E.recent_executions," ejecuciones"]})]}),o.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[o.jsx("div",{className:"flex-1 h-2 bg-gray-100 rounded-full overflow-hidden",children:o.jsx("div",{className:"h-full bg-green-500",style:{width:`${E.completion_rate}%`}})}),o.jsxs("span",{className:"text-xs text-gray-400",children:[E.completion_rate,"%"]})]})]})]},E.flow_id))}),o.jsx(Ms,{to:"/flows",className:"block text-center text-sm text-green-600 hover:text-green-700 mt-4 pt-4 border-t border-gray-100",children:"Ver todos los flujos"})]}),o.jsxs("div",{className:"bg-white rounded-xl border border-gray-100 shadow-sm p-6",children:[o.jsxs("h3",{className:"font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[o.jsx(Rc,{className:"w-5 h-5 text-gray-400"}),"Actividad por Hora"]}),o.jsx("div",{className:"flex items-end gap-1 h-32",children:f.map((E,z)=>o.jsx("div",{className:"flex-1 bg-blue-500 rounded-t transition-all hover:bg-blue-600",style:{height:`${E.executions/N*100}%`,minHeight:E.executions>0?"4px":"0"},title:`${E.hour}:00 - ${E.executions} ejecuciones`},z))}),o.jsxs("div",{className:"flex justify-between text-xs text-gray-400 mt-2",children:[o.jsx("span",{children:"00:00"}),o.jsx("span",{children:"06:00"}),o.jsx("span",{children:"12:00"}),o.jsx("span",{children:"18:00"}),o.jsx("span",{children:"23:00"})]})]})]}),o.jsxs("div",{className:"bg-white rounded-xl border border-gray-100 shadow-sm p-6",children:[o.jsxs("h3",{className:"font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[o.jsx(Ph,{className:"w-5 h-5 text-gray-400"}),"Distribucin por Tipo de Trigger"]}),p.length===0?o.jsx("div",{className:"text-center text-gray-400 py-8",children:"No hay datos de triggers"}):o.jsx("div",{className:"flex gap-6",children:p.map((E,z)=>{const T=["#10b981","#3b82f6","#f59e0b","#8b5cf6","#ec4899"],k=T[z%T.length],w=p.reduce((M,U)=>M+U.count,0),R=w>0?Math.round(E.count/w*100):0;return o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-2",style:{background:`${k}20`},children:o.jsxs("span",{className:"text-xl font-bold",style:{color:k},children:[R,"%"]})}),o.jsx("p",{className:"text-sm font-medium text-gray-800 capitalize",children:E.trigger_type}),o.jsxs("p",{className:"text-xs text-gray-400",children:[E.count," ejecuciones"]})]},E.trigger_type)})})]})]})}function ik(){const[t,a]=j.useState([]),[s,i]=j.useState(null),[c,u]=j.useState({running:0,connectedMonitors:0}),[f,m]=j.useState(!1);return j.useEffect(()=>{const p=new EventSource("/api/flow-monitor/stream");return p.onopen=()=>m(!0),p.onerror=()=>m(!1),p.onmessage=g=>{const y=JSON.parse(g.data);switch(y.type){case"connected":u({running:y.activeCount,connectedMonitors:0});break;case"active_execution":a(x=>x.find(S=>S.executionId===y.executionId)?x:[y,...x]);break;case"flow_started":a(x=>[y,...x]);break;case"node_started":case"node_completed":a(x=>x.map(b=>b.executionId===y.executionId?{...b,currentNodeId:y.nodeId,currentNodeType:y.nodeType,variables:y.variables,steps:y.type==="node_completed"?[...b.steps||[],{nodeId:y.nodeId,nodeType:y.nodeType,durationMs:y.durationMs,status:y.status,timestamp:y.timestamp}]:b.steps}:b));break;case"flow_completed":case"flow_error":case"flow_transferred":a(x=>x.map(b=>b.executionId===y.executionId?{...b,status:y.type.replace("flow_",""),completedAt:y.timestamp}:b));break}},()=>p.close()},[]),o.jsxs("div",{className:"h-screen flex flex-col bg-gray-50",children:[o.jsx("header",{className:"bg-white border-b px-6 py-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Monitor de Flujos"}),o.jsx("p",{className:"text-gray-500",children:"Tiempo real"})]}),o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:`w-2 h-2 rounded-full ${f?"bg-green-500":"bg-red-500"}`}),o.jsx("span",{className:"text-sm text-gray-600",children:f?"Conectado":"Desconectado"})]}),o.jsxs("div",{className:"text-sm text-gray-600",children:[t.filter(p=>!p.status).length," ejecuciones activas"]})]})]})}),o.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[o.jsxs("aside",{className:"w-80 bg-white border-r overflow-y-auto",children:[o.jsx("div",{className:"p-4 border-b",children:o.jsx("h2",{className:"font-semibold text-gray-700",children:"Ejecuciones"})}),o.jsx("div",{className:"divide-y",children:t.length===0?o.jsx("div",{className:"p-8 text-center text-gray-400",children:"Sin ejecuciones"}):t.map(p=>o.jsx("button",{onClick:()=>i(p),className:`w-full p-4 text-left hover:bg-gray-50 transition ${s?.executionId===p.executionId?"bg-green-50":""}`,children:o.jsxs("div",{className:"flex items-start justify-between gap-2",children:[o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[o.jsx(Wc,{className:"w-4 h-4 text-gray-400 flex-shrink-0"}),o.jsx("span",{className:"font-mono text-sm text-gray-700 truncate",children:p.phone})]}),o.jsx("p",{className:"text-xs text-gray-500 truncate mb-1",children:p.flowName||p.flowSlug}),p.currentNodeId&&o.jsxs("div",{className:"flex items-center gap-1 text-xs",children:[o.jsx(ks,{className:"w-3 h-3 text-green-500"}),o.jsx("span",{className:"text-gray-600",children:p.currentNodeId})]})]}),o.jsxs("div",{children:[p.status==="completed"&&o.jsx(zc,{className:"w-5 h-5 text-green-500"}),p.status==="error"&&o.jsx(Ih,{className:"w-5 h-5 text-red-500"}),p.status==="transferred"&&o.jsx(Rr,{className:"w-5 h-5 text-yellow-500"}),!p.status&&o.jsx(ks,{className:"w-5 h-5 text-green-500 animate-pulse"})]})]})},p.executionId))})]}),o.jsx("main",{className:"flex-1 flex",children:s?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"flex-1 p-6 overflow-auto",children:o.jsxs("div",{className:"bg-white rounded-lg border p-6",children:[o.jsx("h3",{className:"font-semibold text-gray-700 mb-4",children:"Ejecucin del Flujo"}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{children:[o.jsx("span",{className:"text-sm text-gray-500",children:"Flujo:"}),o.jsx("p",{className:"font-medium",children:s.flowName})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-sm text-gray-500",children:"Telfono:"}),o.jsx("p",{className:"font-mono text-sm",children:s.phone})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-sm text-gray-500",children:"Nodo Actual:"}),o.jsx("p",{className:"font-mono text-sm",children:s.currentNodeId||"N/A"})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-sm text-gray-500",children:"Tipo de Nodo:"}),o.jsx("p",{className:"font-mono text-sm",children:s.currentNodeType||"N/A"})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-sm text-gray-500",children:"Estado:"}),o.jsxs("p",{className:"font-medium",children:[s.status==="completed"&&"Completado ",s.status==="error"&&"Error ",s.status==="transferred"&&"Transferido ",!s.status&&"En ejecucin..."]})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-sm text-gray-500",children:"Iniciado:"}),o.jsx("p",{className:"text-sm",children:s.timestamp?new Date(s.timestamp).toLocaleString("es-CL"):"N/A"})]}),s.completedAt&&o.jsxs("div",{children:[o.jsx("span",{className:"text-sm text-gray-500",children:"Completado:"}),o.jsx("p",{className:"text-sm",children:new Date(s.completedAt).toLocaleString("es-CL")})]})]})]})}),o.jsxs("aside",{className:"w-96 bg-white border-l overflow-y-auto",children:[o.jsx("div",{className:"p-4 border-b",children:o.jsx("h2",{className:"font-semibold text-gray-700",children:"Detalles"})}),o.jsxs("div",{className:"p-4 space-y-4",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-sm font-semibold text-gray-600 mb-2",children:"Variables"}),o.jsx("div",{className:"bg-gray-50 rounded p-3 font-mono text-xs",children:o.jsx("pre",{className:"whitespace-pre-wrap break-words",children:JSON.stringify(s.variables||{},null,2)})})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-sm font-semibold text-gray-600 mb-2",children:"Timeline"}),o.jsx("div",{className:"space-y-2",children:s.steps&&s.steps.length>0?s.steps.map((p,g)=>o.jsxs("div",{className:"flex items-start gap-2 text-xs",children:[o.jsx(zc,{className:"w-4 h-4 text-green-500 flex-shrink-0 mt-0.5"}),o.jsxs("div",{className:"flex-1",children:[o.jsx("p",{className:"font-medium text-gray-700",children:p.nodeId}),o.jsxs("p",{className:"text-gray-500",children:[p.nodeType,"  ",p.durationMs,"ms"]}),p.timestamp&&o.jsx("p",{className:"text-gray-400",children:new Date(p.timestamp).toLocaleTimeString("es-CL")})]})]},g)):o.jsx("p",{className:"text-gray-400 text-sm",children:"Sin eventos an"})})]})]})]})]}):o.jsx("div",{className:"flex-1 flex items-center justify-center text-gray-400",children:o.jsxs("div",{className:"text-center",children:[o.jsx(ks,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),o.jsx("p",{children:"Selecciona una ejecucin para ver detalles"})]})})})]})]})}const Tr=()=>{const t=Mt.getState().token;return{"Content-Type":"application/json",...t?{Authorization:`Bearer ${t}`}:{}}};function ok(){const[t,a]=j.useState([]),[s,i]=j.useState([]),[c,u]=j.useState(!0),[f,m]=j.useState(!1),[p,g]=j.useState(null),[y,x]=j.useState({}),[b,S]=j.useState({username:"",password:"",name:"",email:"",role:"agent",departmentId:"",avatarColor:"#6366f1"}),[_,C]=j.useState(""),[N,E]=j.useState(!1),z=async()=>{try{const[L,Q]=await Promise.all([fetch("/api/agents",{headers:Tr()}),fetch("/api/departments",{headers:Tr()})]),G=await L.json(),F=await Q.json();G.ok&&a(G.agents),F.ok&&i(F.departments)}catch(L){console.error("Error loading data:",L)}finally{u(!1)}};j.useEffect(()=>{z()},[]);const T=()=>{g(null),S({username:"",password:"",name:"",email:"",role:"agent",departmentId:"",avatarColor:"#6366f1"}),C(""),m(!0)},k=L=>{g(L),S({username:L.username,password:"",name:L.name,email:L.email||"",role:L.role,departmentId:L.department_id||"",avatarColor:L.avatar_color||"#6366f1"}),C(""),m(!0)},w=async L=>{L.preventDefault(),C(""),E(!0);try{const Q={name:b.name,email:b.email||null,role:b.role,departmentId:b.departmentId?Number(b.departmentId):null,avatarColor:b.avatarColor};if(p){b.password&&(Q.password=b.password);const F=await(await fetch(`/api/agents/${p.id}`,{method:"PUT",headers:Tr(),body:JSON.stringify(Q)})).json();if(!F.ok)throw new Error(F.error)}else{Q.username=b.username,Q.password=b.password;const F=await(await fetch("/api/agents",{method:"POST",headers:Tr(),body:JSON.stringify(Q)})).json();if(!F.ok)throw new Error(F.error)}m(!1),z()}catch(Q){C(Q.message)}finally{E(!1)}},R=async L=>{if(confirm(`Desactivar agente "${L.name}"?`))try{await fetch(`/api/agents/${L.id}`,{method:"DELETE",headers:Tr()}),z()}catch(Q){alert("Error: "+Q.message)}},M=async L=>{if(confirm(`Regenerar API key de "${L.name}"? La anterior dejara de funcionar.`))try{const G=await(await fetch(`/api/agents/${L.id}/regenerate-api-key`,{method:"POST",headers:Tr()})).json();G.ok&&(z(),alert(`Nueva API key: ${G.apiKey}`))}catch(Q){alert("Error: "+Q.message)}},U=["#6366f1","#22c55e","#ef4444","#f59e0b","#3b82f6","#ec4899","#8b5cf6","#14b8a6","#f97316","#06b6d4"];return c?o.jsx("div",{className:"p-8 flex justify-center",children:o.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-green-500 border-t-transparent rounded-full"})}):o.jsxs("div",{className:"p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Agentes"}),o.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Gestiona los agentes del sistema"})]}),o.jsxs("button",{onClick:T,className:"flex items-center gap-2 bg-green-600 hover:bg-green-700 text-white px-4 py-2.5 rounded-lg transition font-medium",children:[o.jsx(Hr,{className:"w-4 h-4"})," Nuevo Agente"]})]}),o.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"bg-gray-50 border-b border-gray-200",children:[o.jsx("th",{className:"text-left px-6 py-3 text-xs font-semibold text-gray-500 uppercase",children:"Agente"}),o.jsx("th",{className:"text-left px-6 py-3 text-xs font-semibold text-gray-500 uppercase",children:"Rol"}),o.jsx("th",{className:"text-left px-6 py-3 text-xs font-semibold text-gray-500 uppercase",children:"Departamento"}),o.jsx("th",{className:"text-left px-6 py-3 text-xs font-semibold text-gray-500 uppercase",children:"Estado"}),o.jsx("th",{className:"text-left px-6 py-3 text-xs font-semibold text-gray-500 uppercase",children:"API Key"}),o.jsx("th",{className:"text-left px-6 py-3 text-xs font-semibold text-gray-500 uppercase",children:"Ultimo Login"}),o.jsx("th",{className:"text-right px-6 py-3 text-xs font-semibold text-gray-500 uppercase",children:"Acciones"})]})}),o.jsxs("tbody",{className:"divide-y divide-gray-100",children:[t.map(L=>o.jsxs("tr",{className:`hover:bg-gray-50 ${L.status==="inactive"?"opacity-50":""}`,children:[o.jsx("td",{className:"px-6 py-4",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-9 h-9 rounded-full flex items-center justify-center flex-shrink-0",style:{backgroundColor:L.avatar_color||"#6366f1"},children:o.jsx("span",{className:"text-white text-sm font-medium",children:L.name?.[0]?.toUpperCase()})}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium text-gray-900 text-sm",children:L.name}),o.jsxs("p",{className:"text-xs text-gray-400",children:["@",L.username]})]})]})}),o.jsx("td",{className:"px-6 py-4",children:o.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium ${L.role==="supervisor"?"bg-purple-50 text-purple-700":"bg-blue-50 text-blue-700"}`,children:[L.role==="supervisor"?o.jsx(KS,{className:"w-3 h-3"}):o.jsx(Rr,{className:"w-3 h-3"}),L.role==="supervisor"?"Supervisor":"Agente"]})}),o.jsx("td",{className:"px-6 py-4",children:L.department_name?o.jsx("span",{className:"text-sm px-2 py-1 rounded-full",style:{backgroundColor:`${L.department_color}20`,color:L.department_color},children:L.department_name}):o.jsx("span",{className:"text-xs text-gray-400",children:"Sin asignar"})}),o.jsx("td",{className:"px-6 py-4",children:o.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${L.status==="active"?"bg-green-50 text-green-700":"bg-gray-100 text-gray-500"}`,children:L.status==="active"?"Activo":"Inactivo"})}),o.jsx("td",{className:"px-6 py-4",children:o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx("code",{className:"text-xs text-gray-400 font-mono",children:y[L.id]?L.api_key:L.api_key?"":"-"}),L.api_key&&o.jsx("button",{onClick:()=>x(Q=>({...Q,[L.id]:!Q[L.id]})),className:"p-1 text-gray-400 hover:text-gray-600",children:y[L.id]?o.jsx(mS,{className:"w-3 h-3"}):o.jsx(Gh,{className:"w-3 h-3"})})]})}),o.jsx("td",{className:"px-6 py-4",children:o.jsx("span",{className:"text-xs text-gray-400",children:L.last_login?new Date(L.last_login).toLocaleString("es-CL"):"Nunca"})}),o.jsx("td",{className:"px-6 py-4 text-right",children:o.jsxs("div",{className:"flex items-center justify-end gap-1",children:[o.jsx("button",{onClick:()=>k(L),className:"p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg",title:"Editar",children:o.jsx(Kc,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>M(L),className:"p-2 text-gray-400 hover:text-yellow-600 hover:bg-yellow-50 rounded-lg",title:"Regenerar API Key",children:o.jsx(_S,{className:"w-4 h-4"})}),L.status==="active"&&o.jsx("button",{onClick:()=>R(L),className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg",title:"Desactivar",children:o.jsx(jo,{className:"w-4 h-4"})})]})})]},L.id)),!t.length&&o.jsx("tr",{children:o.jsx("td",{colSpan:"7",className:"text-center py-12 text-gray-400",children:"No hay agentes. Crea el primero."})})]})]})}),f&&o.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md p-6",children:[o.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-4",children:p?"Editar Agente":"Nuevo Agente"}),_&&o.jsx("div",{className:"bg-red-50 text-red-600 px-4 py-2 rounded-lg text-sm mb-4",children:_}),o.jsxs("form",{onSubmit:w,className:"space-y-4",children:[!p&&o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Username"}),o.jsx("input",{type:"text",value:b.username,onChange:L=>S({...b,username:L.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",required:!0,minLength:3})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:p?"Nueva Contrasena (dejar vacio para no cambiar)":"Contrasena"}),o.jsx("input",{type:"password",value:b.password,onChange:L=>S({...b,password:L.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",required:!p,minLength:6})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre completo"}),o.jsx("input",{type:"text",value:b.name,onChange:L=>S({...b,name:L.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email (opcional)"}),o.jsx("input",{type:"email",value:b.email,onChange:L=>S({...b,email:L.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm"})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Rol"}),o.jsxs("select",{value:b.role,onChange:L=>S({...b,role:L.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",children:[o.jsx("option",{value:"agent",children:"Agente"}),o.jsx("option",{value:"supervisor",children:"Supervisor"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Departamento"}),o.jsxs("select",{value:b.departmentId,onChange:L=>S({...b,departmentId:L.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",children:[o.jsx("option",{value:"",children:"Sin asignar"}),s.filter(L=>L.active).map(L=>o.jsx("option",{value:L.id,children:L.display_name},L.id))]})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Color avatar"}),o.jsx("div",{className:"flex gap-2",children:U.map(L=>o.jsx("button",{type:"button",onClick:()=>S({...b,avatarColor:L}),className:`w-8 h-8 rounded-full transition ${b.avatarColor===L?"ring-2 ring-offset-2 ring-gray-400":""}`,style:{backgroundColor:L}},L))})]}),o.jsxs("div",{className:"flex gap-3 pt-2",children:[o.jsx("button",{type:"button",onClick:()=>m(!1),className:"flex-1 px-4 py-2.5 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition",children:"Cancelar"}),o.jsx("button",{type:"submit",disabled:N,className:"flex-1 px-4 py-2.5 bg-green-600 hover:bg-green-700 text-white rounded-lg transition disabled:opacity-50",children:N?"Guardando...":p?"Guardar":"Crear"})]})]})]})})]})}const xc=()=>{const t=Mt.getState().token;return{"Content-Type":"application/json",...t?{Authorization:`Bearer ${t}`}:{}}};function lk(){const[t,a]=j.useState([]),[s,i]=j.useState(!0),[c,u]=j.useState(!1),[f,m]=j.useState(null),[p,g]=j.useState({name:"",displayName:"",icon:"MessageSquare",color:"#6f42c1",autoAssignIntents:""}),[y,x]=j.useState(""),[b,S]=j.useState(!1),_=async()=>{try{const R=await(await fetch("/api/departments",{headers:xc()})).json();R.ok&&a(R.departments)}catch(w){console.error("Error loading departments:",w)}finally{i(!1)}};j.useEffect(()=>{_()},[]);const C=()=>{m(null),g({name:"",displayName:"",icon:"MessageSquare",color:"#6f42c1",autoAssignIntents:""}),x(""),u(!0)},N=w=>{m(w);const R=w.auto_assign_intents,M=Array.isArray(R)?R.join(", "):typeof R=="string"?JSON.parse(R||"[]").join(", "):"";g({name:w.name,displayName:w.display_name,icon:w.icon||"MessageSquare",color:w.color||"#6f42c1",autoAssignIntents:M}),x(""),u(!0)},E=async w=>{w.preventDefault(),x(""),S(!0);try{const R=p.autoAssignIntents.split(",").map(M=>M.trim().toLowerCase()).filter(Boolean);if(f){const U=await(await fetch(`/api/departments/${f.id}`,{method:"PUT",headers:xc(),body:JSON.stringify({displayName:p.displayName,icon:p.icon,color:p.color,autoAssignIntents:R})})).json();if(!U.ok)throw new Error(U.error)}else{const U=await(await fetch("/api/departments",{method:"POST",headers:xc(),body:JSON.stringify({name:p.name.toLowerCase().replace(/\s+/g,"_"),displayName:p.displayName,icon:p.icon,color:p.color,autoAssignIntents:R})})).json();if(!U.ok)throw new Error(U.error)}u(!1),_()}catch(R){x(R.message)}finally{S(!1)}},z=async w=>{if(confirm(`Desactivar departamento "${w.display_name}"?`))try{const M=await(await fetch(`/api/departments/${w.id}`,{method:"DELETE",headers:xc()})).json();if(!M.ok)throw new Error(M.error);_()}catch(R){alert("Error: "+R.message)}},T=["#28a745","#17a2b8","#ffc107","#6f42c1","#dc3545","#fd7e14","#20c997","#6610f2","#e83e8c","#007bff"],k=["MessageSquare","ShoppingCart","Wrench","Package","Phone","Mail","Star","Heart","Zap","Globe"];return s?o.jsx("div",{className:"p-8 flex justify-center",children:o.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-green-500 border-t-transparent rounded-full"})}):o.jsxs("div",{className:"p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Departamentos"}),o.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Organiza los agentes por area"})]}),o.jsxs("button",{onClick:C,className:"flex items-center gap-2 bg-green-600 hover:bg-green-700 text-white px-4 py-2.5 rounded-lg transition font-medium",children:[o.jsx(Fh,{className:"w-4 h-4"})," Nuevo Departamento"]})]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map(w=>{const R=Array.isArray(w.auto_assign_intents)?w.auto_assign_intents:JSON.parse(w.auto_assign_intents||"[]");return o.jsxs("div",{className:`bg-white rounded-xl border-2 p-5 ${w.active?"border-gray-200":"border-gray-100 opacity-50"}`,children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center",style:{backgroundColor:`${w.color}20`},children:o.jsx("span",{className:"text-lg",style:{color:w.color},children:w.icon==="ShoppingCart"?"":w.icon==="Wrench"?"":w.icon==="Package"?"":""})}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold text-gray-900",children:w.display_name}),o.jsxs("p",{className:"text-xs text-gray-400",children:["@",w.name]})]})]}),o.jsxs("div",{className:"flex gap-1",children:[o.jsx("button",{onClick:()=>N(w),className:"p-1.5 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg",children:o.jsx(Kc,{className:"w-4 h-4"})}),w.name!=="general"&&w.active&&o.jsx("button",{onClick:()=>z(w),className:"p-1.5 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg",children:o.jsx(jo,{className:"w-4 h-4"})})]})]}),o.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[o.jsxs("span",{className:"text-xs text-gray-500",children:[w.agent_count||0," agentes"]}),o.jsx("span",{className:"w-1 h-1 bg-gray-300 rounded-full"}),o.jsx("span",{className:`text-xs ${w.active?"text-green-600":"text-gray-400"}`,children:w.active?"Activo":"Inactivo"})]}),R.length>0&&o.jsxs("div",{children:[o.jsxs("p",{className:"text-xs text-gray-400 mb-1.5 flex items-center gap-1",children:[o.jsx(n4,{className:"w-3 h-3"})," Intents auto-asignados:"]}),o.jsx("div",{className:"flex flex-wrap gap-1",children:R.map((M,U)=>o.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full bg-gray-100 text-gray-600",children:M},U))})]})]},w.id)})}),c&&o.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md p-6",children:[o.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-4",children:f?"Editar Departamento":"Nuevo Departamento"}),y&&o.jsx("div",{className:"bg-red-50 text-red-600 px-4 py-2 rounded-lg text-sm mb-4",children:y}),o.jsxs("form",{onSubmit:E,className:"space-y-4",children:[!f&&o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Identificador (slug)"}),o.jsx("input",{type:"text",value:p.name,onChange:w=>g({...p,name:w.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",required:!0,placeholder:"ej: ventas, soporte"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre visible"}),o.jsx("input",{type:"text",value:p.displayName,onChange:w=>g({...p,displayName:w.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",required:!0,placeholder:"ej: Ventas, Soporte Tecnico"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Color"}),o.jsx("div",{className:"flex gap-2",children:T.map(w=>o.jsx("button",{type:"button",onClick:()=>g({...p,color:w}),className:`w-8 h-8 rounded-full transition ${p.color===w?"ring-2 ring-offset-2 ring-gray-400":""}`,style:{backgroundColor:w}},w))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Icono"}),o.jsx("select",{value:p.icon,onChange:w=>g({...p,icon:w.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",children:k.map(w=>o.jsx("option",{value:w,children:w},w))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Intents para auto-asignacion"}),o.jsx("input",{type:"text",value:p.autoAssignIntents,onChange:w=>g({...p,autoAssignIntents:w.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",placeholder:"ventas, comprar, precio (separados por coma)"}),o.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Cuando el chatbot detecta estos intents, asigna automaticamente a este departamento."})]}),o.jsxs("div",{className:"flex gap-3 pt-2",children:[o.jsx("button",{type:"button",onClick:()=>u(!1),className:"flex-1 px-4 py-2.5 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition",children:"Cancelar"}),o.jsx("button",{type:"submit",disabled:b,className:"flex-1 px-4 py-2.5 bg-green-600 hover:bg-green-700 text-white rounded-lg transition disabled:opacity-50",children:b?"Guardando...":f?"Guardar":"Crear"})]})]})]})})]})}const Un="/api/learning",St=()=>{const t=Mt.getState().token;return{"Content-Type":"application/json",...t?{Authorization:`Bearer ${t}`}:{}}};async function _t(t){const a=await t.json();if(!t.ok||!a.ok)throw new Error(a.error||"Error en la solicitud");return a}async function ck(){const t=await fetch(`${Un}/stats`,{headers:St()});return _t(t)}async function uk(t={}){const a=Object.fromEntries(Object.entries(t).filter(([,c])=>c!==""&&c!=null)),s=new URLSearchParams(a).toString(),i=await fetch(`${Un}/pairs${s?"?"+s:""}`,{headers:St()});return _t(i)}async function Fy(t,a){const s=await fetch(`${Un}/pairs/${t}`,{method:"PATCH",headers:St(),body:JSON.stringify({status:a})});return _t(s)}async function dk(t){const a=await fetch(`${Un}/pairs/${t}`,{method:"DELETE",headers:St()});return _t(a)}async function fk(t,a){const s=await fetch(`${Un}/reprocess`,{method:"POST",headers:St(),body:JSON.stringify({from:t||void 0,to:a||void 0})});return _t(s)}async function hk(t=!0){const a=await fetch(`${Un}/prices?active=${t}`,{headers:St()});return _t(a)}async function mk(t){const a=await fetch(`${Un}/prices`,{method:"POST",headers:St(),body:JSON.stringify(t)});return _t(a)}async function pk(t,a){const s=await fetch(`${Un}/prices/${t}`,{method:"PUT",headers:St(),body:JSON.stringify(a)});return _t(s)}async function gk(t){const a=await fetch(`${Un}/prices/${t}`,{method:"DELETE",headers:St()});return _t(a)}async function Wy(t=!1){const a=await fetch(`${Un}/brain-report${t?"?force=true":""}`,{headers:St()});return _t(a)}async function xk(){const t=await fetch("/api/chatbot/config",{headers:St()});return _t(t)}async function yk(t){const a=await fetch("/api/chatbot/config",{method:"PUT",headers:St(),body:JSON.stringify(t)});return _t(a)}async function bk(t=null){const a=t?`?phone=${encodeURIComponent(t)}`:"",s=await fetch(`/api/chatbot/current-prompt${a}`,{headers:St()});return _t(s)}async function vk(t=50,a=0){const s=await fetch(`/api/chat/bot-conversations?limit=${t}&offset=${a}`,{headers:St()});return _t(s)}async function wk(t){const a=await fetch(`/api/chat/bot-conversations/${t}/messages`,{headers:St()});return _t(a)}async function jk(t,a,s){const i=await fetch(`/api/chat/bot-conversations/${t}/correct`,{method:"POST",headers:St(),body:JSON.stringify({messageId:a,correctedAnswer:s})});return _t(i)}const Nk=[{id:"brain",label:"Cerebro IA",icon:zr},{id:"instructions",label:"Instrucciones",icon:Qh},{id:"bot-conversations",label:"Conversaciones IA",icon:ga},{id:"dashboard",label:"Dashboard",icon:Ph},{id:"pairs",label:"Pares Q&A",icon:Vh},{id:"prices",label:"Precios",icon:wb}];function Sk({label:t,value:a}){const s=a>=80?"#10b981":a>=50?"#f59e0b":"#ef4444",i=2*Math.PI*36,c=i-a/100*i;return o.jsxs("div",{className:"bg-white rounded-xl border border-gray-100 shadow-sm p-4 flex flex-col items-center",children:[o.jsxs("svg",{width:"88",height:"88",className:"mb-2",children:[o.jsx("circle",{cx:"44",cy:"44",r:"36",fill:"none",stroke:"#f3f4f6",strokeWidth:"8"}),o.jsx("circle",{cx:"44",cy:"44",r:"36",fill:"none",stroke:s,strokeWidth:"8",strokeDasharray:i,strokeDashoffset:c,strokeLinecap:"round",transform:"rotate(-90 44 44)",className:"transition-all duration-700"}),o.jsxs("text",{x:"44",y:"48",textAnchor:"middle",fontSize:"18",fontWeight:"bold",fill:"#1f2937",children:[a,"%"]})]}),o.jsx("span",{className:"text-xs text-gray-500 text-center",children:t})]})}const _k={confianza_general:"Confianza General",cobertura_temas:"Cobertura de Temas",calidad_respuestas:"Calidad Respuestas",actualizacion_precios:"Precios Actualizados"},Ek={puede_responder_precios:"Responder Precios",puede_comparar_productos:"Comparar Productos",puede_recomendar:"Recomendar",puede_dar_plazos:"Informar Plazos",puede_informar_despacho:"Informar Despacho"},ih={pending:{label:"Pendiente",cls:"bg-yellow-50 text-yellow-700"},approved:{label:"Aprobado",cls:"bg-green-50 text-green-700"},rejected:{label:"Rechazado",cls:"bg-red-50 text-red-700"}};function Ck(){const[t,a]=j.useState(null),[s,i]=j.useState(!0),[c,u]=j.useState(!1),[f,m]=j.useState(null),[p,g]=j.useState(!1),[y,x]=j.useState("");j.useEffect(()=>{b()},[]);const b=async()=>{i(!0),x("");try{const C=await Wy(!1);a(C.report),m(C.generated_at),g(C.cached)}catch(C){x(C.message)}finally{i(!1)}},S=async()=>{u(!0),x("");try{const C=await Wy(!0);a(C.report),m(C.generated_at),g(!1)}catch(C){x(C.message)}finally{u(!1)}};if(s)return o.jsx("div",{className:"flex items-center justify-center py-20",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-500"})});if(y&&!t)return o.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-6 text-center",children:[o.jsx(eo,{className:"w-8 h-8 text-red-400 mx-auto mb-2"}),o.jsx("p",{className:"text-red-700",children:y}),o.jsx("button",{onClick:b,className:"mt-3 text-sm text-red-600 underline",children:"Reintentar"})]});const _=t?.ai_analysis;return o.jsxs("div",{className:"space-y-6",children:[o.jsx("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 rounded-2xl p-8 text-white",children:o.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"w-16 h-16 bg-white/20 rounded-2xl flex items-center justify-center",children:o.jsx(zr,{className:"w-8 h-8"})}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Cerebro IA"}),o.jsxs("p",{className:"text-indigo-200 text-sm mt-1",children:[f?`Ultimo analisis: ${Fr(new Date(f),{addSuffix:!0,locale:ns})}`:"Sin analisis previo",p&&" (cacheado)"]})]})]}),o.jsxs("button",{onClick:S,disabled:c,className:"flex items-center gap-2 bg-white/20 hover:bg-white/30 px-4 py-2.5 rounded-lg transition disabled:opacity-50",children:[o.jsx(wo,{className:`w-4 h-4 ${c?"animate-spin":""}`}),c?"Generando...":"Regenerar Analisis"]})]})}),t?.ai_available===!1&&o.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-xl p-4 flex items-center gap-3",children:[o.jsx(eo,{className:"w-5 h-5 text-yellow-600 flex-shrink-0"}),o.jsx("p",{className:"text-yellow-800 text-sm",children:"OpenAI no configurado. Se muestran datos basicos sin analisis IA. Configure OPENAI_API_KEY para el reporte completo."})]}),t?.stats&&o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[o.jsx(ln,{title:"Pares Aprobados",value:t.stats.approved,icon:Vh,color:"green",subtitle:"Base de conocimiento"}),o.jsx(ln,{title:"Pendientes",value:t.stats.pending,icon:eo,color:"yellow",subtitle:"Por revisar"}),o.jsx(ln,{title:"Precios Activos",value:t.stats.active_prices,icon:wb,color:"blue",subtitle:"Productos con precio"}),o.jsx(ln,{title:"Calidad Promedio",value:`${t.stats.avg_quality||0}/100`,icon:Dc,color:"purple",subtitle:"Score Q&A"})]}),y&&o.jsx("div",{className:"bg-red-50 border border-red-200 rounded-xl p-3 text-red-700 text-sm",children:y}),_?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"bg-white rounded-xl border border-gray-100 shadow-sm p-6",children:o.jsxs("div",{className:"border-l-4 border-indigo-500 pl-4",children:[o.jsxs("h3",{className:"font-semibold text-gray-800 mb-2 flex items-center gap-2",children:[o.jsx(dh,{className:"w-5 h-5 text-indigo-500"})," Resumen General"]}),o.jsx("p",{className:"text-gray-600 leading-relaxed",children:_.resumen})]})}),_.metricas_confianza&&o.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:Object.entries(_.metricas_confianza).map(([C,N])=>o.jsx(Sk,{label:_k[C]||C,value:Number(N)||0},C))}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"bg-white rounded-xl border border-gray-100 shadow-sm p-6",children:[o.jsxs("h3",{className:"font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[o.jsx(s4,{className:"w-5 h-5 text-green-500"})," Temas Dominados"]}),(_.temas_dominados||[]).length===0?o.jsx("p",{className:"text-gray-400 text-sm text-center py-4",children:"Sin temas detectados aun"}):o.jsx("div",{className:"space-y-3",children:_.temas_dominados.map((C,N)=>o.jsxs("div",{children:[o.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[o.jsx("span",{className:"text-gray-700 font-medium",children:C.tema}),o.jsxs("span",{className:"text-gray-500",children:[C.confianza,"% (",C.ejemplos," ej.)"]})]}),o.jsx("div",{className:"h-2 bg-gray-100 rounded-full overflow-hidden",children:o.jsx("div",{className:"h-full rounded-full transition-all duration-500",style:{width:`${C.confianza}%`,backgroundColor:C.confianza>=80?"#10b981":C.confianza>=50?"#f59e0b":"#ef4444"}})}),C.detalle&&o.jsx("p",{className:"text-xs text-gray-400 mt-1",children:C.detalle})]},N))})]}),o.jsxs("div",{className:"bg-white rounded-xl border border-gray-100 shadow-sm p-6",children:[o.jsxs("h3",{className:"font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[o.jsx(eo,{className:"w-5 h-5 text-yellow-500"})," Brechas de Conocimiento"]}),(_.brechas_conocimiento||[]).length===0?o.jsx("p",{className:"text-gray-400 text-sm text-center py-4",children:"Sin brechas detectadas"}):o.jsx("div",{className:"space-y-3",children:_.brechas_conocimiento.map((C,N)=>o.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[o.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full font-medium ${C.prioridad==="alta"?"bg-red-100 text-red-700":C.prioridad==="media"?"bg-yellow-100 text-yellow-700":"bg-blue-100 text-blue-700"}`,children:C.prioridad}),o.jsx("span",{className:"font-medium text-gray-800 text-sm",children:C.area})]}),o.jsx("p",{className:"text-gray-500 text-sm",children:C.descripcion})]},N))})]})]}),_.capacidades&&o.jsxs("div",{className:"bg-white rounded-xl border border-gray-100 shadow-sm p-6",children:[o.jsxs("h3",{className:"font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[o.jsx(p4,{className:"w-5 h-5 text-blue-500"})," Capacidades"]}),o.jsx("div",{className:"flex flex-wrap gap-3",children:Object.entries(_.capacidades).map(([C,N])=>o.jsxs("span",{className:`inline-flex items-center gap-1.5 px-3 py-1.5 rounded-full text-sm font-medium ${N?"bg-green-50 text-green-700":"bg-gray-100 text-gray-400"}`,children:[N?o.jsx(bn,{className:"w-4 h-4"}):o.jsx(Ds,{className:"w-4 h-4"}),Ek[C]||C]},C))})]}),_.razonamiento&&o.jsxs("div",{className:"bg-white rounded-xl border border-gray-100 shadow-sm p-6",children:[o.jsxs("h3",{className:"font-semibold text-gray-800 mb-3 flex items-center gap-2",children:[o.jsx(zr,{className:"w-5 h-5 text-purple-500"})," Razonamiento"]}),o.jsx("p",{className:"text-gray-600 leading-relaxed italic",children:_.razonamiento})]}),_.recomendaciones?.length>0&&o.jsxs("div",{className:"bg-white rounded-xl border border-gray-100 shadow-sm p-6",children:[o.jsxs("h3",{className:"font-semibold text-gray-800 mb-3 flex items-center gap-2",children:[o.jsx(Dc,{className:"w-5 h-5 text-indigo-500"})," Recomendaciones"]}),o.jsx("ul",{className:"space-y-2",children:_.recomendaciones.map((C,N)=>o.jsxs("li",{className:"flex items-start gap-2 text-sm text-gray-600",children:[o.jsx(dh,{className:"w-4 h-4 text-indigo-400 mt-0.5 flex-shrink-0"}),C]},N))})]}),o.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 text-xs text-gray-400 flex items-center justify-between",children:[o.jsxs("span",{children:["Datos base: ",t?.stats?.approved||0," pares aprobados, ",t?.stats?.active_prices||0," precios"]}),o.jsx("span",{children:t?.ai_available?"Analisis generado por IA":"Datos sin analisis IA"})]})]}):o.jsxs("div",{className:"bg-white rounded-xl border border-gray-100 shadow-sm p-12 text-center",children:[o.jsx(zr,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),o.jsx("p",{className:"text-gray-400",children:'Sin datos de analisis. Aprueba pares Q&A y presiona "Regenerar Analisis".'})]})]})}function Tk({stats:t}){if(!t)return o.jsx("p",{className:"text-gray-400 text-center py-8",children:"Cargando estadisticas..."});const a=Object.entries(t.by_channel||{}),s=a.reduce((i,[,c])=>i+c,0)||1;return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[o.jsx(ln,{title:"Total Pares",value:t.total,icon:Vh,color:"blue",subtitle:"Q&A aprendidos"}),o.jsx(ln,{title:"Aprobados",value:t.approved,icon:bn,color:"green",subtitle:`${t.with_embedding} con embedding`}),o.jsx(ln,{title:"Pendientes",value:t.pending,icon:eo,color:"yellow",subtitle:"Por revisar"}),o.jsx(ln,{title:"Calidad Promedio",value:`${t.avg_quality||0}/100`,icon:Dc,color:"purple",subtitle:"Score de calidad"})]}),a.length>0&&o.jsxs("div",{className:"bg-white rounded-xl border border-gray-100 shadow-sm p-6",children:[o.jsx("h3",{className:"font-semibold text-gray-800 mb-4",children:"Distribucion por Canal"}),o.jsx("div",{className:"space-y-3",children:a.map(([i,c])=>o.jsxs("div",{children:[o.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[o.jsx("span",{className:"text-gray-700 font-medium capitalize",children:i}),o.jsxs("span",{className:"text-gray-500",children:[c," pares (",Math.round(c/s*100),"%)"]})]}),o.jsx("div",{className:"h-2 bg-gray-100 rounded-full overflow-hidden",children:o.jsx("div",{className:"h-full bg-indigo-500 rounded-full transition-all",style:{width:`${Math.round(c/s*100)}%`}})})]},i))})]})]})}function Mk(){const[t,a]=j.useState([]),[s,i]=j.useState(1),[c,u]=j.useState(1),[f,m]=j.useState(0),[p,g]=j.useState(!0),[y,x]=j.useState({status:"",channel:"",minQuality:""}),[b,S]=j.useState(null),[_,C]=j.useState(!1),[N,E]=j.useState({from:"",to:""}),[z,T]=j.useState(!1);j.useEffect(()=>{k()},[s,y]);const k=async()=>{g(!0);try{const Q=await uk({page:s,limit:20,...y});a(Q.pairs),u(Q.pages),m(Q.total)}catch(Q){console.error(Q)}finally{g(!1)}},w=async Q=>{try{await Fy(Q,"approved"),k()}catch(G){alert(G.message)}},R=async Q=>{try{await Fy(Q,"rejected"),k()}catch(G){alert(G.message)}},M=async Q=>{if(confirm("Eliminar este par permanentemente?"))try{await dk(Q),k()}catch(G){alert(G.message)}},U=async()=>{T(!0);try{const Q=await fk(N.from,N.to);alert(`Reprocesadas: ${Q.processed} sesiones`),C(!1),k()}catch(Q){alert(Q.message)}finally{T(!1)}},L=(Q,G)=>{x(F=>({...F,[Q]:G})),i(1)};return o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[o.jsxs("select",{value:y.status,onChange:Q=>L("status",Q.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm",children:[o.jsx("option",{value:"",children:"Todos los estados"}),o.jsx("option",{value:"pending",children:"Pendientes"}),o.jsx("option",{value:"approved",children:"Aprobados"}),o.jsx("option",{value:"rejected",children:"Rechazados"})]}),o.jsxs("select",{value:y.channel,onChange:Q=>L("channel",Q.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm",children:[o.jsx("option",{value:"",children:"Todos los canales"}),o.jsx("option",{value:"whatsapp",children:"WhatsApp"}),o.jsx("option",{value:"instagram",children:"Instagram"})]}),o.jsx("input",{type:"number",placeholder:"Calidad min.",value:y.minQuality,onChange:Q=>L("minQuality",Q.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm w-28",min:"0",max:"100"}),o.jsxs("span",{className:"text-sm text-gray-400 ml-auto",children:[f," pares en total"]}),o.jsxs("button",{onClick:()=>C(!0),className:"flex items-center gap-1 text-sm text-indigo-600 hover:text-indigo-700 font-medium",children:[o.jsx(wo,{className:"w-4 h-4"})," Reprocesar"]})]}),o.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"bg-gray-50 border-b border-gray-200",children:[o.jsx("th",{className:"text-left px-4 py-3 text-xs font-semibold text-gray-500 uppercase",children:"Pregunta"}),o.jsx("th",{className:"text-left px-4 py-3 text-xs font-semibold text-gray-500 uppercase",children:"Respuesta"}),o.jsx("th",{className:"text-center px-4 py-3 text-xs font-semibold text-gray-500 uppercase",children:"Calidad"}),o.jsx("th",{className:"text-center px-4 py-3 text-xs font-semibold text-gray-500 uppercase",children:"Canal"}),o.jsx("th",{className:"text-center px-4 py-3 text-xs font-semibold text-gray-500 uppercase",children:"Estado"}),o.jsx("th",{className:"text-right px-4 py-3 text-xs font-semibold text-gray-500 uppercase",children:"Acciones"})]})}),o.jsx("tbody",{className:"divide-y divide-gray-100",children:p?o.jsx("tr",{children:o.jsx("td",{colSpan:"6",className:"text-center py-8 text-gray-400",children:"Cargando..."})}):t.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:"6",className:"text-center py-12 text-gray-400",children:"No hay pares que coincidan con los filtros"})}):t.map(Q=>o.jsxs("tr",{className:"hover:bg-gray-50",children:[o.jsx("td",{className:"px-4 py-3 text-sm text-gray-700 max-w-[200px] truncate",children:Q.question}),o.jsx("td",{className:"px-4 py-3 text-sm text-gray-500 max-w-[250px] truncate",children:Q.answer}),o.jsx("td",{className:"px-4 py-3 text-center",children:o.jsx("span",{className:`text-sm font-medium ${Q.quality_score>=80?"text-green-600":Q.quality_score>=50?"text-yellow-600":"text-red-600"}`,children:Q.quality_score})}),o.jsx("td",{className:"px-4 py-3 text-center",children:o.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full bg-gray-100 text-gray-600 capitalize",children:Q.channel})}),o.jsx("td",{className:"px-4 py-3 text-center",children:o.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full font-medium ${ih[Q.status]?.cls||""}`,children:ih[Q.status]?.label||Q.status})}),o.jsx("td",{className:"px-4 py-3 text-right",children:o.jsxs("div",{className:"flex items-center justify-end gap-1",children:[o.jsx("button",{onClick:()=>S(Q),className:"p-1.5 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg",title:"Ver detalle",children:o.jsx(Gh,{className:"w-4 h-4"})}),Q.status!=="approved"&&o.jsx("button",{onClick:()=>w(Q.id),className:"p-1.5 text-gray-400 hover:text-green-600 hover:bg-green-50 rounded-lg",title:"Aprobar",children:o.jsx(bn,{className:"w-4 h-4"})}),Q.status!=="rejected"&&o.jsx("button",{onClick:()=>R(Q.id),className:"p-1.5 text-gray-400 hover:text-orange-600 hover:bg-orange-50 rounded-lg",title:"Rechazar",children:o.jsx(Ds,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>M(Q.id),className:"p-1.5 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg",title:"Eliminar",children:o.jsx(jo,{className:"w-4 h-4"})})]})})]},Q.id))})]})}),c>1&&o.jsxs("div",{className:"flex items-center justify-center gap-4",children:[o.jsx("button",{onClick:()=>i(Q=>Math.max(1,Q-1)),disabled:s===1,className:"p-2 text-gray-500 hover:text-gray-700 disabled:opacity-30",children:o.jsx(sS,{className:"w-5 h-5"})}),o.jsxs("span",{className:"text-sm text-gray-600",children:["Pagina ",s," de ",c]}),o.jsx("button",{onClick:()=>i(Q=>Math.min(c,Q+1)),disabled:s===c,className:"p-2 text-gray-500 hover:text-gray-700 disabled:opacity-30",children:o.jsx(Xh,{className:"w-5 h-5"})})]}),b&&o.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:()=>S(null),children:o.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-lg p-6",onClick:Q=>Q.stopPropagation(),children:[o.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-4",children:"Detalle del Par Q&A"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-semibold text-gray-500 uppercase mb-1",children:"Pregunta del cliente"}),o.jsx("p",{className:"text-gray-800 bg-gray-50 rounded-lg p-3 text-sm",children:b.question})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-semibold text-gray-500 uppercase mb-1",children:"Respuesta del agente"}),o.jsx("p",{className:"text-gray-800 bg-gray-50 rounded-lg p-3 text-sm whitespace-pre-wrap",children:b.answer})]}),o.jsxs("div",{className:"flex gap-4 text-sm text-gray-500",children:[o.jsxs("span",{children:["Calidad: ",o.jsx("strong",{className:"text-gray-700",children:b.quality_score})]}),o.jsxs("span",{children:["Canal: ",o.jsx("strong",{className:"text-gray-700 capitalize",children:b.channel})]}),o.jsxs("span",{children:["Estado: ",o.jsx("strong",{className:"text-gray-700",children:ih[b.status]?.label})]})]})]}),o.jsxs("div",{className:"flex gap-3 mt-6",children:[b.status!=="approved"&&o.jsx("button",{onClick:()=>{w(b.id),S(null)},className:"flex-1 px-4 py-2.5 bg-green-600 hover:bg-green-700 text-white rounded-lg transition text-sm font-medium",children:"Aprobar"}),b.status!=="rejected"&&o.jsx("button",{onClick:()=>{R(b.id),S(null)},className:"flex-1 px-4 py-2.5 bg-orange-500 hover:bg-orange-600 text-white rounded-lg transition text-sm font-medium",children:"Rechazar"}),o.jsx("button",{onClick:()=>S(null),className:"flex-1 px-4 py-2.5 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition text-sm",children:"Cerrar"})]})]})}),_&&o.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:()=>C(!1),children:o.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-sm p-6",onClick:Q=>Q.stopPropagation(),children:[o.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-4",children:"Reprocesar Sesiones"}),o.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Extrae pares Q&A de conversaciones pasadas. Opcional: filtra por rango de fechas."}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Desde (opcional)"}),o.jsx("input",{type:"date",value:N.from,onChange:Q=>E(G=>({...G,from:Q.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Hasta (opcional)"}),o.jsx("input",{type:"date",value:N.to,onChange:Q=>E(G=>({...G,to:Q.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm"})]})]}),o.jsxs("div",{className:"flex gap-3 mt-6",children:[o.jsx("button",{onClick:()=>C(!1),className:"flex-1 px-4 py-2.5 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition text-sm",children:"Cancelar"}),o.jsx("button",{onClick:U,disabled:z,className:"flex-1 px-4 py-2.5 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg transition text-sm font-medium disabled:opacity-50",children:z?"Procesando...":"Reprocesar"})]})]})})]})}function Ak(){const[t,a]=j.useState([]),[s,i]=j.useState(!0),[c,u]=j.useState(!1),[f,m]=j.useState(!1),[p,g]=j.useState(null),[y,x]=j.useState({product_name:"",variant:"",price:"",currency:"CLP",notes:""}),[b,S]=j.useState(!1),[_,C]=j.useState("");j.useEffect(()=>{N()},[c]);const N=async()=>{i(!0);try{const w=await hk(!c);a(w.prices)}catch(w){console.error(w)}finally{i(!1)}},E=()=>{g(null),x({product_name:"",variant:"",price:"",currency:"CLP",notes:""}),C(""),m(!0)},z=w=>{g(w),x({product_name:w.product_name,variant:w.variant||"",price:w.price,currency:w.currency||"CLP",notes:w.notes||""}),C(""),m(!0)},T=async w=>{w.preventDefault(),C(""),S(!0);try{p?await pk(p.id,{product_name:y.product_name,variant:y.variant||null,price:Number(y.price),currency:y.currency,notes:y.notes||null}):await mk({product_name:y.product_name,variant:y.variant||null,price:Number(y.price),currency:y.currency,notes:y.notes||null}),m(!1),N()}catch(R){C(R.message)}finally{S(!1)}},k=async w=>{if(confirm("Desactivar este precio?"))try{await gk(w),N()}catch(R){alert(R.message)}};return o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-600",children:[o.jsx("input",{type:"checkbox",checked:c,onChange:w=>u(w.target.checked),className:"rounded border-gray-300"}),"Mostrar inactivos"]}),o.jsxs("button",{onClick:E,className:"flex items-center gap-2 bg-green-600 hover:bg-green-700 text-white px-4 py-2.5 rounded-lg transition font-medium text-sm",children:[o.jsx(Fh,{className:"w-4 h-4"})," Nuevo Precio"]})]}),o.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"bg-gray-50 border-b border-gray-200",children:[o.jsx("th",{className:"text-left px-4 py-3 text-xs font-semibold text-gray-500 uppercase",children:"Producto"}),o.jsx("th",{className:"text-left px-4 py-3 text-xs font-semibold text-gray-500 uppercase",children:"Variante"}),o.jsx("th",{className:"text-right px-4 py-3 text-xs font-semibold text-gray-500 uppercase",children:"Precio"}),o.jsx("th",{className:"text-center px-4 py-3 text-xs font-semibold text-gray-500 uppercase",children:"Estado"}),o.jsx("th",{className:"text-left px-4 py-3 text-xs font-semibold text-gray-500 uppercase",children:"Notas"}),o.jsx("th",{className:"text-right px-4 py-3 text-xs font-semibold text-gray-500 uppercase",children:"Acciones"})]})}),o.jsx("tbody",{className:"divide-y divide-gray-100",children:s?o.jsx("tr",{children:o.jsx("td",{colSpan:"6",className:"text-center py-8 text-gray-400",children:"Cargando..."})}):t.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:"6",className:"text-center py-12 text-gray-400",children:"No hay precios. Crea el primero."})}):t.map(w=>o.jsxs("tr",{className:`hover:bg-gray-50 ${w.is_active?"":"opacity-50"}`,children:[o.jsx("td",{className:"px-4 py-3 text-sm font-medium text-gray-800",children:w.product_name}),o.jsx("td",{className:"px-4 py-3 text-sm text-gray-500",children:w.variant||"-"}),o.jsxs("td",{className:"px-4 py-3 text-sm text-right font-mono font-medium text-gray-800",children:[w.currency," $",Number(w.price).toLocaleString("es-CL")]}),o.jsx("td",{className:"px-4 py-3 text-center",children:o.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full font-medium ${w.is_active?"bg-green-50 text-green-700":"bg-gray-100 text-gray-500"}`,children:w.is_active?"Activo":"Inactivo"})}),o.jsx("td",{className:"px-4 py-3 text-sm text-gray-500 max-w-[200px] truncate",children:w.notes||"-"}),o.jsx("td",{className:"px-4 py-3 text-right",children:o.jsxs("div",{className:"flex items-center justify-end gap-1",children:[o.jsx("button",{onClick:()=>z(w),className:"p-1.5 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg",title:"Editar",children:o.jsx(Kc,{className:"w-4 h-4"})}),w.is_active&&o.jsx("button",{onClick:()=>k(w.id),className:"p-1.5 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg",title:"Desactivar",children:o.jsx(jo,{className:"w-4 h-4"})})]})})]},w.id))})]})}),f&&o.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:()=>m(!1),children:o.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md p-6",onClick:w=>w.stopPropagation(),children:[o.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-4",children:p?"Editar Precio":"Nuevo Precio"}),_&&o.jsx("div",{className:"bg-red-50 text-red-600 px-4 py-2 rounded-lg text-sm mb-4",children:_}),o.jsxs("form",{onSubmit:T,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Producto"}),o.jsx("input",{type:"text",value:y.product_name,onChange:w=>x({...y,product_name:w.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",required:!0,placeholder:"Ej: Colchon Spring"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Variante (opcional)"}),o.jsx("input",{type:"text",value:y.variant,onChange:w=>x({...y,variant:w.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",placeholder:"Ej: King, Queen, 2 Plazas"})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Precio"}),o.jsx("input",{type:"number",value:y.price,onChange:w=>x({...y,price:w.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",required:!0,min:"0",step:"1"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Moneda"}),o.jsxs("select",{value:y.currency,onChange:w=>x({...y,currency:w.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",children:[o.jsx("option",{value:"CLP",children:"CLP"}),o.jsx("option",{value:"USD",children:"USD"})]})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notas (opcional)"}),o.jsx("input",{type:"text",value:y.notes,onChange:w=>x({...y,notes:w.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",placeholder:"Ej: Precio promocional hasta Marzo"})]}),o.jsxs("div",{className:"flex gap-3 pt-2",children:[o.jsx("button",{type:"button",onClick:()=>m(!1),className:"flex-1 px-4 py-2.5 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition text-sm",children:"Cancelar"}),o.jsx("button",{type:"submit",disabled:b,className:"flex-1 px-4 py-2.5 bg-green-600 hover:bg-green-700 text-white rounded-lg transition text-sm font-medium disabled:opacity-50",children:b?"Guardando...":p?"Guardar":"Crear"})]})]})]})})]})}const Ky=`Eres un vendedor amable de Respaldos Chile que conversa por WhatsApp/Instagram.

ESTILO:
- Habla como una persona real, no como un catalogo
- Usa lenguaje casual pero profesional (chileno neutro)
- Haz preguntas para entender que necesita el cliente
- Sugiere opciones en vez de listar todo
- Cierra con una pregunta ("te interesa?", "en que color lo buscas?")
- Maximo 3-4 lineas por mensaje

NUNCA:
- Listes especificaciones como ficha tecnica
- Uses bullets o formatos de catalogo
- Digas "Estimado/a cliente" ni "Le informamos que..."
- Inventes precios o plazos que no estan en el contexto

SI NO SABES:
- "Dejame confirmarlo con el equipo y te respondo altiro"
- NO inventes informacion`;function kk(){const[t,a]=j.useState(null),[s,i]=j.useState(""),[c,u]=j.useState(""),[f,m]=j.useState(!1),[p,g]=j.useState(!0),[y,x]=j.useState(!1),[b,S]=j.useState(!1),[_,C]=j.useState(""),[N,E]=j.useState(!1),[z,T]=j.useState(null),[k,w]=j.useState(!1);j.useEffect(()=>{R()},[]);const R=async()=>{g(!0),C("");try{const L=await xk();a(L.config),i(L.config?.custom_instructions||""),u(L.config?.system_prompt||""),L.config?.system_prompt&&m(!0)}catch(L){C(L.message)}finally{g(!1)}},M=async()=>{x(!0),S(!1),C("");try{await yk({...t,custom_instructions:s,system_prompt:c||null}),S(!0),setTimeout(()=>S(!1),3e3)}catch(L){C(L.message)}finally{x(!1)}},U=async()=>{w(!0),E(!0);try{const L=await bk();T(L)}catch(L){C(L.message)}finally{w(!1)}};return p?o.jsx("div",{className:"flex items-center justify-center py-20",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-500"})}):o.jsxs("div",{className:"space-y-6",children:[o.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 rounded-2xl p-8 text-white",children:o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"w-16 h-16 bg-white/20 rounded-2xl flex items-center justify-center",children:o.jsx(Qh,{className:"w-8 h-8"})}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Instrucciones para la IA"}),o.jsx("p",{className:"text-blue-200 text-sm mt-1",children:"Escribe reglas, conocimiento y procedimientos que la IA debe seguir"})]})]})}),_&&o.jsx("div",{className:"bg-red-50 border border-red-200 rounded-xl p-3 text-red-700 text-sm",children:_}),o.jsxs("div",{className:"bg-white rounded-xl border border-gray-100 shadow-sm p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Prompt del sistema (cerebro general)"}),f?o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("button",{onClick:()=>u(Ky),className:"text-xs text-gray-500 hover:text-orange-600 font-medium flex items-center gap-1",children:[o.jsx(XS,{className:"w-3.5 h-3.5"})," Restaurar default"]}),o.jsxs("button",{onClick:()=>{u(""),m(!1)},className:"text-xs text-gray-400 hover:text-red-500 font-medium flex items-center gap-1",children:[o.jsx(Ds,{className:"w-3.5 h-3.5"})," Quitar"]})]}):o.jsxs("button",{onClick:()=>{m(!0),c||u(Ky)},className:"text-xs text-indigo-600 hover:text-indigo-800 font-medium flex items-center gap-1",children:[o.jsx(Kc,{className:"w-3.5 h-3.5"})," Personalizar"]})]}),f?o.jsxs(o.Fragment,{children:[o.jsx("textarea",{value:c,onChange:L=>u(L.target.value),rows:12,className:"w-full px-4 py-3 border border-gray-300 rounded-xl text-sm focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 resize-y font-mono",placeholder:"Define la personalidad, tono y reglas base de la IA..."}),o.jsxs("p",{className:"mt-2 text-xs text-gray-400",children:["Este es el prompt base que define quien es la IA. Usa ",o.jsx("code",{className:"bg-gray-100 px-1 rounded",children:"{{nombre}}"})," para inyectar el nombre del cliente."]})]}):o.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 text-sm text-gray-500",children:[o.jsx("p",{children:'Usando el prompt por defecto. Haz click en "Personalizar" para editarlo.'}),o.jsxs("p",{className:"mt-1 text-xs text-gray-400",children:["Tip: Usa ",o.jsx("code",{className:"bg-gray-200 px-1 rounded",children:"{{nombre}}"})," para inyectar el nombre del cliente automaticamente."]})]})]}),o.jsxs("div",{className:"bg-white rounded-xl border border-gray-100 shadow-sm p-6",children:[o.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"Instrucciones adicionales"}),o.jsx("p",{className:"text-xs text-gray-400 mb-3",children:"Reglas especificas, conocimiento del negocio, procedimientos. Se agregan al prompt del sistema."}),o.jsx("textarea",{value:s,onChange:L=>i(L.target.value),rows:10,className:"w-full px-4 py-3 border border-gray-300 rounded-xl text-sm focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 resize-y font-mono",placeholder:`Ejemplos:
- Los modelos disponibles son: Venecia, Florencia, Roma, Milan
- Si preguntan por despacho: "Dentro de Santiago 3-5 dias habiles"
- Formas de pago: transferencia, tarjeta de credito, webpay
- Siempre ofrecer la opcion de hablar con un vendedor
- No dar informacion sobre competidores
- Horario de atencion: Lunes a Viernes 9:00 a 18:00`}),o.jsxs("div",{className:"flex items-center justify-between mt-4",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsxs("button",{onClick:M,disabled:y,className:"flex items-center gap-2 bg-indigo-600 hover:bg-indigo-700 text-white px-5 py-2.5 rounded-lg transition font-medium text-sm disabled:opacity-50",children:[o.jsx(GS,{className:"w-4 h-4"}),y?"Guardando...":"Guardar Todo"]}),b&&o.jsxs("span",{className:"text-green-600 text-sm font-medium flex items-center gap-1",children:[o.jsx(bn,{className:"w-4 h-4"})," Guardado"]})]}),o.jsxs("button",{onClick:U,className:"flex items-center gap-2 text-sm text-gray-600 hover:text-indigo-600 font-medium transition",children:[o.jsx(Nx,{className:"w-4 h-4"})," Ver Prompt Actual"]})]})]}),o.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-5",children:[o.jsxs("h3",{className:"font-semibold text-blue-800 mb-3 flex items-center gap-2",children:[o.jsx(dh,{className:"w-5 h-5"})," Tips para mejores instrucciones"]}),o.jsxs("ul",{className:"space-y-2 text-sm text-blue-700",children:[o.jsxs("li",{className:"flex items-start gap-2",children:[o.jsx(bn,{className:"w-4 h-4 mt-0.5 flex-shrink-0"}),'Se especifico: "El despacho a Santiago demora 3-5 dias" es mejor que "informar plazos"']}),o.jsxs("li",{className:"flex items-start gap-2",children:[o.jsx(bn,{className:"w-4 h-4 mt-0.5 flex-shrink-0"}),"Incluye respuestas exactas para preguntas frecuentes"]}),o.jsxs("li",{className:"flex items-start gap-2",children:[o.jsx(bn,{className:"w-4 h-4 mt-0.5 flex-shrink-0"}),'Los precios se manejan en la tab "Precios"  no los pongas aqui']}),o.jsxs("li",{className:"flex items-start gap-2",children:[o.jsx(bn,{className:"w-4 h-4 mt-0.5 flex-shrink-0"}),'Define el tono: "Responde como vendedor amigable, tutea al cliente"']}),o.jsxs("li",{className:"flex items-start gap-2",children:[o.jsx(bn,{className:"w-4 h-4 mt-0.5 flex-shrink-0"}),'Indica que NO hacer: "Nunca ofrezcas descuentos sin autorizacion"']})]})]}),N&&o.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:()=>E(!1),children:o.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-3xl max-h-[85vh] overflow-hidden flex flex-col",onClick:L=>L.stopPropagation(),children:[o.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex items-center justify-between",children:[o.jsxs("h2",{className:"text-lg font-bold text-gray-900 flex items-center gap-2",children:[o.jsx(Nx,{className:"w-5 h-5 text-indigo-500"})," Prompt Actual"]}),o.jsx("button",{onClick:()=>E(!1),className:"p-1.5 text-gray-400 hover:text-gray-600 rounded-lg",children:o.jsx(Ds,{className:"w-5 h-5"})})]}),o.jsx("div",{className:"overflow-y-auto p-6 space-y-4",children:k?o.jsx("div",{className:"flex items-center justify-center py-12",children:o.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-indigo-500"})}):z?o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex flex-wrap gap-3 text-sm",children:[o.jsxs("span",{className:"px-3 py-1 bg-indigo-50 text-indigo-700 rounded-full font-medium",children:["Modelo: ",z.model]}),o.jsxs("span",{className:"px-3 py-1 bg-green-50 text-green-700 rounded-full font-medium",children:["Conocimiento: ",z.knowledgeCount," pares"]}),o.jsxs("span",{className:"px-3 py-1 bg-blue-50 text-blue-700 rounded-full font-medium",children:["Precios: ",z.priceCount," activos"]}),o.jsxs("span",{className:"px-3 py-1 bg-purple-50 text-purple-700 rounded-full font-medium",children:["Fidelidad: ",z.fidelityLevel]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-semibold text-gray-500 uppercase mb-2",children:"System Prompt"}),o.jsx("pre",{className:"bg-gray-900 text-gray-100 rounded-xl p-4 text-sm overflow-x-auto whitespace-pre-wrap font-mono leading-relaxed",children:z.systemPrompt})]}),z.customInstructions&&o.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4",children:[o.jsx("span",{className:"text-xs font-semibold text-blue-600 uppercase",children:"Tus instrucciones (incluidas arriba)"}),o.jsx("p",{className:"text-sm text-blue-800 mt-1 whitespace-pre-wrap",children:z.customInstructions})]})]}):o.jsx("p",{className:"text-gray-400 text-center py-8",children:"Error cargando prompt"})})]})})]})}function zk(){const[t,a]=j.useState([]),[s,i]=j.useState(!0),[c,u]=j.useState(null),[f,m]=j.useState([]),[p,g]=j.useState(!1),[y,x]=j.useState(null),[b,S]=j.useState(""),[_,C]=j.useState(!1),[N,E]=j.useState(""),[z,T]=j.useState("");j.useEffect(()=>{k()},[]);const k=async()=>{i(!0),E("");try{const M=await vk();a(M.conversations||[])}catch(M){E(M.message)}finally{i(!1)}},w=async M=>{u(M),g(!0),x(null),E("");try{const U=await wk(M);m(U.messages||[])}catch(U){E(U.message)}finally{g(!1)}},R=async M=>{if(b.trim()){C(!0),E(""),T("");try{const U=await jk(c,M,b);T(`Correccion guardada: "${U.question?.slice(0,40)}..."  nueva respuesta aprobada`),x(null),S(""),setTimeout(()=>T(""),5e3),await w(c)}catch(U){E(U.message)}finally{C(!1)}}};return s?o.jsx("div",{className:"flex items-center justify-center py-20",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-500"})}):c?o.jsxs("div",{className:"space-y-4",children:[o.jsxs("button",{onClick:()=>{u(null),m([])},className:"flex items-center gap-2 text-sm text-gray-600 hover:text-indigo-600 font-medium transition",children:[o.jsx(GN,{className:"w-4 h-4"})," Volver a conversaciones"]}),N&&o.jsx("div",{className:"bg-red-50 border border-red-200 rounded-xl p-3 text-red-700 text-sm",children:N}),z&&o.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-xl p-3 text-green-700 text-sm flex items-center gap-2",children:[o.jsx(bn,{className:"w-4 h-4"})," ",z]}),o.jsxs("div",{className:"bg-white rounded-xl border border-gray-100 shadow-sm p-4",children:[o.jsxs("h3",{className:"font-semibold text-gray-800 mb-4 text-sm",children:["Sesion #",c,"  ",f.length," mensajes"]}),p?o.jsx("div",{className:"flex items-center justify-center py-12",children:o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-500"})}):o.jsx("div",{className:"space-y-3 max-h-[60vh] overflow-y-auto",children:f.map(M=>o.jsx("div",{className:`flex ${M.direction==="in"?"justify-start":"justify-end"}`,children:o.jsxs("div",{className:`max-w-[75%] rounded-2xl px-4 py-2.5 ${M.direction==="in"?"bg-gray-100 text-gray-800":M.is_ai_generated?"bg-purple-100 text-purple-900 border border-purple-200":"bg-indigo-600 text-white"}`,children:[M.direction==="out"&&M.is_ai_generated&&o.jsx("span",{className:"text-[10px] font-semibold uppercase tracking-wider opacity-70 block mb-1",children:"Bot IA"}),o.jsx("p",{className:"text-sm whitespace-pre-wrap",children:M.text}),o.jsxs("div",{className:"flex items-center justify-between mt-1.5 gap-3",children:[o.jsx("span",{className:"text-[10px] opacity-60",children:new Date(M.created_at).toLocaleTimeString("es-CL",{hour:"2-digit",minute:"2-digit"})}),M.direction==="out"&&M.is_ai_generated&&M.status!=="corrected"&&o.jsxs("button",{onClick:()=>{x(M.id),S("")},className:"text-[10px] font-semibold text-purple-700 hover:text-purple-900 flex items-center gap-0.5",children:[o.jsx(HS,{className:"w-3 h-3"})," Corregir"]}),M.status==="corrected"&&o.jsxs("span",{className:"text-[10px] font-semibold text-green-700 flex items-center gap-0.5",children:[o.jsx(bn,{className:"w-3 h-3"})," Corregido"]})]}),y===M.id&&o.jsxs("div",{className:"mt-3 pt-3 border-t border-purple-300",children:[o.jsx("label",{className:"block text-xs font-semibold text-purple-700 mb-1",children:"Respuesta correcta:"}),o.jsx("textarea",{value:b,onChange:U=>S(U.target.value),rows:3,className:"w-full px-3 py-2 border border-purple-300 rounded-lg text-sm text-gray-800 bg-white focus:ring-2 focus:ring-purple-500",placeholder:"Escribe la respuesta correcta que deberia dar el bot...",autoFocus:!0}),o.jsxs("div",{className:"flex gap-2 mt-2",children:[o.jsx("button",{onClick:()=>R(M.id),disabled:_||!b.trim(),className:"px-3 py-1.5 bg-purple-600 text-white rounded-lg text-xs font-medium disabled:opacity-50 hover:bg-purple-700",children:_?"Guardando...":"Guardar Correccion"}),o.jsx("button",{onClick:()=>x(null),className:"px-3 py-1.5 border border-purple-300 text-purple-700 rounded-lg text-xs hover:bg-purple-50",children:"Cancelar"})]})]})]})},M.id))})]})]}):o.jsxs("div",{className:"space-y-6",children:[o.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 rounded-2xl p-8 text-white",children:o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"w-16 h-16 bg-white/20 rounded-2xl flex items-center justify-center",children:o.jsx(ga,{className:"w-8 h-8"})}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Conversaciones del Bot"}),o.jsx("p",{className:"text-purple-200 text-sm mt-1",children:"Revisa y corrige las respuestas automaticas de la IA"})]})]})}),N&&o.jsx("div",{className:"bg-red-50 border border-red-200 rounded-xl p-3 text-red-700 text-sm",children:N}),t.length===0?o.jsxs("div",{className:"bg-white rounded-xl border border-gray-100 shadow-sm p-12 text-center",children:[o.jsx(ga,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),o.jsx("p",{className:"text-gray-400",children:"Aun no hay conversaciones donde el bot haya respondido"}),o.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"Cuando la IA responda mensajes, apareceran aqui"})]}):o.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"bg-gray-50 border-b border-gray-200",children:[o.jsx("th",{className:"text-left px-4 py-3 text-xs font-semibold text-gray-500 uppercase",children:"Sesion"}),o.jsx("th",{className:"text-left px-4 py-3 text-xs font-semibold text-gray-500 uppercase",children:"Telefono"}),o.jsx("th",{className:"text-center px-4 py-3 text-xs font-semibold text-gray-500 uppercase",children:"Msgs IA"}),o.jsx("th",{className:"text-center px-4 py-3 text-xs font-semibold text-gray-500 uppercase",children:"Total"}),o.jsx("th",{className:"text-left px-4 py-3 text-xs font-semibold text-gray-500 uppercase",children:"Ultimo mensaje"}),o.jsx("th",{className:"text-left px-4 py-3 text-xs font-semibold text-gray-500 uppercase",children:"Fecha"}),o.jsx("th",{className:"text-right px-4 py-3 text-xs font-semibold text-gray-500 uppercase"})]})}),o.jsx("tbody",{className:"divide-y divide-gray-100",children:t.map(M=>o.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer",onClick:()=>w(M.sessionId),children:[o.jsxs("td",{className:"px-4 py-3 text-sm font-medium text-gray-800",children:["#",M.sessionId]}),o.jsx("td",{className:"px-4 py-3 text-sm text-gray-600 font-mono",children:M.phone}),o.jsx("td",{className:"px-4 py-3 text-center",children:o.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-medium bg-purple-50 text-purple-700",children:[o.jsx(zr,{className:"w-3 h-3"})," ",M.ai_message_count]})}),o.jsx("td",{className:"px-4 py-3 text-center text-sm text-gray-500",children:M.total_messages}),o.jsx("td",{className:"px-4 py-3 text-sm text-gray-500 max-w-[200px] truncate",children:M.last_message}),o.jsx("td",{className:"px-4 py-3 text-sm text-gray-400",children:M.last_message_at?Fr(new Date(M.last_message_at),{addSuffix:!0,locale:ns}):"-"}),o.jsx("td",{className:"px-4 py-3 text-right",children:o.jsx(Gh,{className:"w-4 h-4 text-gray-400"})})]},M.sessionId))})]})})]})}function Rk(){const[t,a]=j.useState("brain"),[s,i]=j.useState(null);return j.useEffect(()=>{ck().then(c=>i(c.stats)).catch(c=>console.error("Error loading learning stats:",c))},[]),o.jsxs("div",{className:"p-8",children:[o.jsxs("div",{className:"mb-6",children:[o.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Cerebro IA - Aprendizaje"}),o.jsx("p",{className:"text-gray-500 mt-1",children:"Sistema de conocimiento adquirido por la IA"})]}),o.jsx("div",{className:"flex gap-1 mb-6 bg-gray-100 rounded-xl p-1 w-fit",children:Nk.map(c=>{const u=c.icon;return o.jsxs("button",{onClick:()=>a(c.id),className:`flex items-center gap-2 px-4 py-2.5 rounded-lg text-sm font-medium transition ${t===c.id?"bg-white text-indigo-600 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:[o.jsx(u,{className:"w-4 h-4"}),c.label]},c.id)})}),t==="brain"&&o.jsx(Ck,{}),t==="instructions"&&o.jsx(kk,{}),t==="bot-conversations"&&o.jsx(zk,{}),t==="dashboard"&&o.jsx(Tk,{stats:s}),t==="pairs"&&o.jsx(Mk,{}),t==="prices"&&o.jsx(Ak,{})]})}function Dk({children:t}){return Mt(s=>s.isAuthenticated)?t:o.jsx(kc,{to:"/login",replace:!0})}function fa({children:t}){return Mt(s=>s.agent)?.role!=="supervisor"?o.jsx(kc,{to:"/dashboard",replace:!0}):t}function Ok(){return o.jsxs(Jj,{children:[o.jsx(Nt,{path:"/login",element:o.jsx(y4,{})}),o.jsxs(Nt,{path:"/",element:o.jsx(Dk,{children:o.jsx(g4,{})}),children:[o.jsx(Nt,{index:!0,element:o.jsx(kc,{to:"/dashboard",replace:!0})}),o.jsx(Nt,{path:"dashboard",element:o.jsx(d3,{})}),o.jsx(Nt,{path:"conversations",element:o.jsx(h_,{})}),o.jsx(Nt,{path:"agents",element:o.jsx(fa,{children:o.jsx(ok,{})})}),o.jsx(Nt,{path:"departments",element:o.jsx(fa,{children:o.jsx(lk,{})})}),o.jsx(Nt,{path:"flows",element:o.jsx(fa,{children:o.jsx(S_,{})})}),o.jsx(Nt,{path:"flows/builder/:id?",element:o.jsx(fa,{children:o.jsx(YA,{})})}),o.jsx(Nt,{path:"logs",element:o.jsx(fa,{children:o.jsx(GA,{})})}),o.jsx(Nt,{path:"leads",element:o.jsx(fa,{children:o.jsx(JA,{})})}),o.jsx(Nt,{path:"analytics",element:o.jsx(fa,{children:o.jsx(rk,{})})}),o.jsx(Nt,{path:"monitor",element:o.jsx(fa,{children:o.jsx(ik,{})})}),o.jsx(Nt,{path:"learning",element:o.jsx(fa,{children:o.jsx(Rk,{})})})]}),o.jsx(Nt,{path:"*",element:o.jsx(kc,{to:"/dashboard",replace:!0})})]})}Kw.createRoot(document.getElementById("root")).render(o.jsx(Mr.StrictMode,{children:o.jsx(SN,{children:o.jsx(Ok,{})})}));
