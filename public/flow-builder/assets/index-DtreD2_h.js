(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))i(c);new MutationObserver(c=>{for(const u of c)if(u.type==="childList")for(const f of u.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&i(f)}).observe(document,{childList:!0,subtree:!0});function s(c){const u={};return c.integrity&&(u.integrity=c.integrity),c.referrerPolicy&&(u.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?u.credentials="include":c.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function i(c){if(c.ep)return;c.ep=!0;const u=s(c);fetch(c.href,u)}})();function vh(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Sf={exports:{}},Bi={};var q0;function Nw(){if(q0)return Bi;q0=1;var t=Symbol.for("react.transitional.element"),a=Symbol.for("react.fragment");function s(i,c,u){var f=null;if(u!==void 0&&(f=""+u),c.key!==void 0&&(f=""+c.key),"key"in c){u={};for(var m in c)m!=="key"&&(u[m]=c[m])}else u=c;return c=u.ref,{$$typeof:t,type:i,key:f,ref:c!==void 0?c:null,props:u}}return Bi.Fragment=a,Bi.jsx=s,Bi.jsxs=s,Bi}var V0;function jw(){return V0||(V0=1,Sf.exports=Nw()),Sf.exports}var l=jw(),Nf={exports:{}},Se={};var Y0;function Ew(){if(Y0)return Se;Y0=1;var t=Symbol.for("react.transitional.element"),a=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),c=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),f=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),x=Symbol.for("react.activity"),b=Symbol.iterator;function S(R){return R===null||typeof R!="object"?null:(R=b&&R[b]||R["@@iterator"],typeof R=="function"?R:null)}var j={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A=Object.assign,N={};function E(R,X,ee){this.props=R,this.context=X,this.refs=N,this.updater=ee||j}E.prototype.isReactComponent={},E.prototype.setState=function(R,X){if(typeof R!="object"&&typeof R!="function"&&R!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,R,X,"setState")},E.prototype.forceUpdate=function(R){this.updater.enqueueForceUpdate(this,R,"forceUpdate")};function D(){}D.prototype=E.prototype;function C(R,X,ee){this.props=R,this.context=X,this.refs=N,this.updater=ee||j}var k=C.prototype=new D;k.constructor=C,A(k,E.prototype),k.isPureReactComponent=!0;var w=Array.isArray;function z(){}var M={H:null,A:null,T:null,S:null},Y=Object.prototype.hasOwnProperty;function U(R,X,ee){var H=ee.ref;return{$$typeof:t,type:R,key:X,ref:H!==void 0?H:null,props:ee}}function ne(R,X){return U(R.type,X,R.props)}function Q(R){return typeof R=="object"&&R!==null&&R.$$typeof===t}function I(R){var X={"=":"=0",":":"=2"};return"$"+R.replace(/[=:]/g,function(ee){return X[ee]})}var ae=/\/+/g;function $(R,X){return typeof R=="object"&&R!==null&&R.key!=null?I(""+R.key):X.toString(36)}function F(R){switch(R.status){case"fulfilled":return R.value;case"rejected":throw R.reason;default:switch(typeof R.status=="string"?R.then(z,z):(R.status="pending",R.then(function(X){R.status==="pending"&&(R.status="fulfilled",R.value=X)},function(X){R.status==="pending"&&(R.status="rejected",R.reason=X)})),R.status){case"fulfilled":return R.value;case"rejected":throw R.reason}}throw R}function O(R,X,ee,H,oe){var ue=typeof R;(ue==="undefined"||ue==="boolean")&&(R=null);var ce=!1;if(R===null)ce=!0;else switch(ue){case"bigint":case"string":case"number":ce=!0;break;case"object":switch(R.$$typeof){case t:case a:ce=!0;break;case y:return ce=R._init,O(ce(R._payload),X,ee,H,oe)}}if(ce)return oe=oe(R),ce=H===""?"."+$(R,0):H,w(oe)?(ee="",ce!=null&&(ee=ce.replace(ae,"$&/")+"/"),O(oe,X,ee,"",function(we){return we})):oe!=null&&(Q(oe)&&(oe=ne(oe,ee+(oe.key==null||R&&R.key===oe.key?"":(""+oe.key).replace(ae,"$&/")+"/")+ce)),X.push(oe)),1;ce=0;var le=H===""?".":H+":";if(w(R))for(var de=0;de<R.length;de++)H=R[de],ue=le+$(H,de),ce+=O(H,X,ee,ue,oe);else if(de=S(R),typeof de=="function")for(R=de.call(R),de=0;!(H=R.next()).done;)H=H.value,ue=le+$(H,de++),ce+=O(H,X,ee,ue,oe);else if(ue==="object"){if(typeof R.then=="function")return O(F(R),X,ee,H,oe);throw X=String(R),Error("Objects are not valid as a React child (found: "+(X==="[object Object]"?"object with keys {"+Object.keys(R).join(", ")+"}":X)+"). If you meant to render a collection of children, use an array instead.")}return ce}function B(R,X,ee){if(R==null)return R;var H=[],oe=0;return O(R,H,"","",function(ue){return X.call(ee,ue,oe++)}),H}function V(R){if(R._status===-1){var X=R._result;X=X(),X.then(function(ee){(R._status===0||R._status===-1)&&(R._status=1,R._result=ee)},function(ee){(R._status===0||R._status===-1)&&(R._status=2,R._result=ee)}),R._status===-1&&(R._status=0,R._result=X)}if(R._status===1)return R._result.default;throw R._result}var L=typeof reportError=="function"?reportError:function(R){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var X=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof R=="object"&&R!==null&&typeof R.message=="string"?String(R.message):String(R),error:R});if(!window.dispatchEvent(X))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",R);return}console.error(R)},Z={map:B,forEach:function(R,X,ee){B(R,function(){X.apply(this,arguments)},ee)},count:function(R){var X=0;return B(R,function(){X++}),X},toArray:function(R){return B(R,function(X){return X})||[]},only:function(R){if(!Q(R))throw Error("React.Children.only expected to receive a single React element child.");return R}};return Se.Activity=x,Se.Children=Z,Se.Component=E,Se.Fragment=s,Se.Profiler=c,Se.PureComponent=C,Se.StrictMode=i,Se.Suspense=p,Se.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=M,Se.__COMPILER_RUNTIME={__proto__:null,c:function(R){return M.H.useMemoCache(R)}},Se.cache=function(R){return function(){return R.apply(null,arguments)}},Se.cacheSignal=function(){return null},Se.cloneElement=function(R,X,ee){if(R==null)throw Error("The argument must be a React element, but you passed "+R+".");var H=A({},R.props),oe=R.key;if(X!=null)for(ue in X.key!==void 0&&(oe=""+X.key),X)!Y.call(X,ue)||ue==="key"||ue==="__self"||ue==="__source"||ue==="ref"&&X.ref===void 0||(H[ue]=X[ue]);var ue=arguments.length-2;if(ue===1)H.children=ee;else if(1<ue){for(var ce=Array(ue),le=0;le<ue;le++)ce[le]=arguments[le+2];H.children=ce}return U(R.type,oe,H)},Se.createContext=function(R){return R={$$typeof:f,_currentValue:R,_currentValue2:R,_threadCount:0,Provider:null,Consumer:null},R.Provider=R,R.Consumer={$$typeof:u,_context:R},R},Se.createElement=function(R,X,ee){var H,oe={},ue=null;if(X!=null)for(H in X.key!==void 0&&(ue=""+X.key),X)Y.call(X,H)&&H!=="key"&&H!=="__self"&&H!=="__source"&&(oe[H]=X[H]);var ce=arguments.length-2;if(ce===1)oe.children=ee;else if(1<ce){for(var le=Array(ce),de=0;de<ce;de++)le[de]=arguments[de+2];oe.children=le}if(R&&R.defaultProps)for(H in ce=R.defaultProps,ce)oe[H]===void 0&&(oe[H]=ce[H]);return U(R,ue,oe)},Se.createRef=function(){return{current:null}},Se.forwardRef=function(R){return{$$typeof:m,render:R}},Se.isValidElement=Q,Se.lazy=function(R){return{$$typeof:y,_payload:{_status:-1,_result:R},_init:V}},Se.memo=function(R,X){return{$$typeof:g,type:R,compare:X===void 0?null:X}},Se.startTransition=function(R){var X=M.T,ee={};M.T=ee;try{var H=R(),oe=M.S;oe!==null&&oe(ee,H),typeof H=="object"&&H!==null&&typeof H.then=="function"&&H.then(z,L)}catch(ue){L(ue)}finally{X!==null&&ee.types!==null&&(X.types=ee.types),M.T=X}},Se.unstable_useCacheRefresh=function(){return M.H.useCacheRefresh()},Se.use=function(R){return M.H.use(R)},Se.useActionState=function(R,X,ee){return M.H.useActionState(R,X,ee)},Se.useCallback=function(R,X){return M.H.useCallback(R,X)},Se.useContext=function(R){return M.H.useContext(R)},Se.useDebugValue=function(){},Se.useDeferredValue=function(R,X){return M.H.useDeferredValue(R,X)},Se.useEffect=function(R,X){return M.H.useEffect(R,X)},Se.useEffectEvent=function(R){return M.H.useEffectEvent(R)},Se.useId=function(){return M.H.useId()},Se.useImperativeHandle=function(R,X,ee){return M.H.useImperativeHandle(R,X,ee)},Se.useInsertionEffect=function(R,X){return M.H.useInsertionEffect(R,X)},Se.useLayoutEffect=function(R,X){return M.H.useLayoutEffect(R,X)},Se.useMemo=function(R,X){return M.H.useMemo(R,X)},Se.useOptimistic=function(R,X){return M.H.useOptimistic(R,X)},Se.useReducer=function(R,X,ee){return M.H.useReducer(R,X,ee)},Se.useRef=function(R){return M.H.useRef(R)},Se.useState=function(R){return M.H.useState(R)},Se.useSyncExternalStore=function(R,X,ee){return M.H.useSyncExternalStore(R,X,ee)},Se.useTransition=function(){return M.H.useTransition()},Se.version="19.2.3",Se}var X0;function ro(){return X0||(X0=1,Nf.exports=Ew()),Nf.exports}var _=ro();const br=vh(_);var jf={exports:{}},Hi={},Ef={exports:{}},_f={};var G0;function _w(){return G0||(G0=1,(function(t){function a(O,B){var V=O.length;O.push(B);e:for(;0<V;){var L=V-1>>>1,Z=O[L];if(0<c(Z,B))O[L]=B,O[V]=Z,V=L;else break e}}function s(O){return O.length===0?null:O[0]}function i(O){if(O.length===0)return null;var B=O[0],V=O.pop();if(V!==B){O[0]=V;e:for(var L=0,Z=O.length,R=Z>>>1;L<R;){var X=2*(L+1)-1,ee=O[X],H=X+1,oe=O[H];if(0>c(ee,V))H<Z&&0>c(oe,ee)?(O[L]=oe,O[H]=V,L=H):(O[L]=ee,O[X]=V,L=X);else if(H<Z&&0>c(oe,V))O[L]=oe,O[H]=V,L=H;else break e}}return B}function c(O,B){var V=O.sortIndex-B.sortIndex;return V!==0?V:O.id-B.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;t.unstable_now=function(){return u.now()}}else{var f=Date,m=f.now();t.unstable_now=function(){return f.now()-m}}var p=[],g=[],y=1,x=null,b=3,S=!1,j=!1,A=!1,N=!1,E=typeof setTimeout=="function"?setTimeout:null,D=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;function k(O){for(var B=s(g);B!==null;){if(B.callback===null)i(g);else if(B.startTime<=O)i(g),B.sortIndex=B.expirationTime,a(p,B);else break;B=s(g)}}function w(O){if(A=!1,k(O),!j)if(s(p)!==null)j=!0,z||(z=!0,I());else{var B=s(g);B!==null&&F(w,B.startTime-O)}}var z=!1,M=-1,Y=5,U=-1;function ne(){return N?!0:!(t.unstable_now()-U<Y)}function Q(){if(N=!1,z){var O=t.unstable_now();U=O;var B=!0;try{e:{j=!1,A&&(A=!1,D(M),M=-1),S=!0;var V=b;try{t:{for(k(O),x=s(p);x!==null&&!(x.expirationTime>O&&ne());){var L=x.callback;if(typeof L=="function"){x.callback=null,b=x.priorityLevel;var Z=L(x.expirationTime<=O);if(O=t.unstable_now(),typeof Z=="function"){x.callback=Z,k(O),B=!0;break t}x===s(p)&&i(p),k(O)}else i(p);x=s(p)}if(x!==null)B=!0;else{var R=s(g);R!==null&&F(w,R.startTime-O),B=!1}}break e}finally{x=null,b=V,S=!1}B=void 0}}finally{B?I():z=!1}}}var I;if(typeof C=="function")I=function(){C(Q)};else if(typeof MessageChannel<"u"){var ae=new MessageChannel,$=ae.port2;ae.port1.onmessage=Q,I=function(){$.postMessage(null)}}else I=function(){E(Q,0)};function F(O,B){M=E(function(){O(t.unstable_now())},B)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(O){O.callback=null},t.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Y=0<O?Math.floor(1e3/O):5},t.unstable_getCurrentPriorityLevel=function(){return b},t.unstable_next=function(O){switch(b){case 1:case 2:case 3:var B=3;break;default:B=b}var V=b;b=B;try{return O()}finally{b=V}},t.unstable_requestPaint=function(){N=!0},t.unstable_runWithPriority=function(O,B){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var V=b;b=O;try{return B()}finally{b=V}},t.unstable_scheduleCallback=function(O,B,V){var L=t.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?L+V:L):V=L,O){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=V+Z,O={id:y++,callback:B,priorityLevel:O,startTime:V,expirationTime:Z,sortIndex:-1},V>L?(O.sortIndex=V,a(g,O),s(p)===null&&O===s(g)&&(A?(D(M),M=-1):A=!0,F(w,V-L))):(O.sortIndex=Z,a(p,O),j||S||(j=!0,z||(z=!0,I()))),O},t.unstable_shouldYield=ne,t.unstable_wrapCallback=function(O){var B=b;return function(){var V=b;b=B;try{return O.apply(this,arguments)}finally{b=V}}}})(_f)),_f}var I0;function Cw(){return I0||(I0=1,Ef.exports=_w()),Ef.exports}var Cf={exports:{}},wt={};var P0;function Tw(){if(P0)return wt;P0=1;var t=ro();function a(p){var g="https://react.dev/errors/"+p;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)g+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+p+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(){}var i={d:{f:s,r:function(){throw Error(a(522))},D:s,C:s,L:s,m:s,X:s,S:s,M:s},p:0,findDOMNode:null},c=Symbol.for("react.portal");function u(p,g,y){var x=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:c,key:x==null?null:""+x,children:p,containerInfo:g,implementation:y}}var f=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(p,g){if(p==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return wt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,wt.createPortal=function(p,g){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(a(299));return u(p,g,null,y)},wt.flushSync=function(p){var g=f.T,y=i.p;try{if(f.T=null,i.p=2,p)return p()}finally{f.T=g,i.p=y,i.d.f()}},wt.preconnect=function(p,g){typeof p=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,i.d.C(p,g))},wt.prefetchDNS=function(p){typeof p=="string"&&i.d.D(p)},wt.preinit=function(p,g){if(typeof p=="string"&&g&&typeof g.as=="string"){var y=g.as,x=m(y,g.crossOrigin),b=typeof g.integrity=="string"?g.integrity:void 0,S=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;y==="style"?i.d.S(p,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:x,integrity:b,fetchPriority:S}):y==="script"&&i.d.X(p,{crossOrigin:x,integrity:b,fetchPriority:S,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},wt.preinitModule=function(p,g){if(typeof p=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var y=m(g.as,g.crossOrigin);i.d.M(p,{crossOrigin:y,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&i.d.M(p)},wt.preload=function(p,g){if(typeof p=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var y=g.as,x=m(y,g.crossOrigin);i.d.L(p,y,{crossOrigin:x,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},wt.preloadModule=function(p,g){if(typeof p=="string")if(g){var y=m(g.as,g.crossOrigin);i.d.m(p,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:y,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else i.d.m(p)},wt.requestFormReset=function(p){i.d.r(p)},wt.unstable_batchedUpdates=function(p,g){return p(g)},wt.useFormState=function(p,g,y){return f.H.useFormState(p,g,y)},wt.useFormStatus=function(){return f.H.useHostTransitionStatus()},wt.version="19.2.3",wt}var Z0;function ky(){if(Z0)return Cf.exports;Z0=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(a){console.error(a)}}return t(),Cf.exports=Tw(),Cf.exports}var Q0;function Mw(){if(Q0)return Hi;Q0=1;var t=Cw(),a=ro(),s=ky();function i(e){var n="https://react.dev/errors/"+e;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)n+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function c(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function u(e){var n=e,r=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,(n.flags&4098)!==0&&(r=n.return),e=n.return;while(e)}return n.tag===3?r:null}function f(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function m(e){if(e.tag===31){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function p(e){if(u(e)!==e)throw Error(i(188))}function g(e){var n=e.alternate;if(!n){if(n=u(e),n===null)throw Error(i(188));return n!==e?null:e}for(var r=e,o=n;;){var d=r.return;if(d===null)break;var h=d.alternate;if(h===null){if(o=d.return,o!==null){r=o;continue}break}if(d.child===h.child){for(h=d.child;h;){if(h===r)return p(d),e;if(h===o)return p(d),n;h=h.sibling}throw Error(i(188))}if(r.return!==o.return)r=d,o=h;else{for(var v=!1,T=d.child;T;){if(T===r){v=!0,r=d,o=h;break}if(T===o){v=!0,o=d,r=h;break}T=T.sibling}if(!v){for(T=h.child;T;){if(T===r){v=!0,r=h,o=d;break}if(T===o){v=!0,o=h,r=d;break}T=T.sibling}if(!v)throw Error(i(189))}}if(r.alternate!==o)throw Error(i(190))}if(r.tag!==3)throw Error(i(188));return r.stateNode.current===r?e:n}function y(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e;for(e=e.child;e!==null;){if(n=y(e),n!==null)return n;e=e.sibling}return null}var x=Object.assign,b=Symbol.for("react.element"),S=Symbol.for("react.transitional.element"),j=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),N=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),D=Symbol.for("react.consumer"),C=Symbol.for("react.context"),k=Symbol.for("react.forward_ref"),w=Symbol.for("react.suspense"),z=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),Y=Symbol.for("react.lazy"),U=Symbol.for("react.activity"),ne=Symbol.for("react.memo_cache_sentinel"),Q=Symbol.iterator;function I(e){return e===null||typeof e!="object"?null:(e=Q&&e[Q]||e["@@iterator"],typeof e=="function"?e:null)}var ae=Symbol.for("react.client.reference");function $(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===ae?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case A:return"Fragment";case E:return"Profiler";case N:return"StrictMode";case w:return"Suspense";case z:return"SuspenseList";case U:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case j:return"Portal";case C:return e.displayName||"Context";case D:return(e._context.displayName||"Context")+".Consumer";case k:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case M:return n=e.displayName||null,n!==null?n:$(e.type)||"Memo";case Y:n=e._payload,e=e._init;try{return $(e(n))}catch{}}return null}var F=Array.isArray,O=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,B=s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,V={pending:!1,data:null,method:null,action:null},L=[],Z=-1;function R(e){return{current:e}}function X(e){0>Z||(e.current=L[Z],L[Z]=null,Z--)}function ee(e,n){Z++,L[Z]=e.current,e.current=n}var H=R(null),oe=R(null),ue=R(null),ce=R(null);function le(e,n){switch(ee(ue,n),ee(oe,e),ee(H,null),n.nodeType){case 9:case 11:e=(e=n.documentElement)&&(e=e.namespaceURI)?u0(e):0;break;default:if(e=n.tagName,n=n.namespaceURI)n=u0(n),e=d0(n,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}X(H),ee(H,e)}function de(){X(H),X(oe),X(ue)}function we(e){e.memoizedState!==null&&ee(ce,e);var n=H.current,r=d0(n,e.type);n!==r&&(ee(oe,e),ee(H,r))}function be(e){oe.current===e&&(X(H),X(oe)),ce.current===e&&(X(ce),Ri._currentValue=V)}var pe,ge;function me(e){if(pe===void 0)try{throw Error()}catch(r){var n=r.stack.trim().match(/\n( *(at )?)/);pe=n&&n[1]||"",ge=-1<r.stack.indexOf(`
    at`)?" (<anonymous>)":-1<r.stack.indexOf("@")?"@unknown:0:0":""}return`
`+pe+e+ge}var Te=!1;function _e(e,n){if(!e||Te)return"";Te=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(n){var ie=function(){throw Error()};if(Object.defineProperty(ie.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ie,[])}catch(te){var J=te}Reflect.construct(e,[],ie)}else{try{ie.call()}catch(te){J=te}e.call(ie.prototype)}}else{try{throw Error()}catch(te){J=te}(ie=e())&&typeof ie.catch=="function"&&ie.catch(function(){})}}catch(te){if(te&&J&&typeof te.stack=="string")return[te.stack,J.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var d=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");d&&d.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var h=o.DetermineComponentFrameRoot(),v=h[0],T=h[1];if(v&&T){var q=v.split(`
`),K=T.split(`
`);for(d=o=0;o<q.length&&!q[o].includes("DetermineComponentFrameRoot");)o++;for(;d<K.length&&!K[d].includes("DetermineComponentFrameRoot");)d++;if(o===q.length||d===K.length)for(o=q.length-1,d=K.length-1;1<=o&&0<=d&&q[o]!==K[d];)d--;for(;1<=o&&0<=d;o--,d--)if(q[o]!==K[d]){if(o!==1||d!==1)do if(o--,d--,0>d||q[o]!==K[d]){var se=`
`+q[o].replace(" at new "," at ");return e.displayName&&se.includes("<anonymous>")&&(se=se.replace("<anonymous>",e.displayName)),se}while(1<=o&&0<=d);break}}}finally{Te=!1,Error.prepareStackTrace=r}return(r=e?e.displayName||e.name:"")?me(r):""}function Ze(e,n){switch(e.tag){case 26:case 27:case 5:return me(e.type);case 16:return me("Lazy");case 13:return e.child!==n&&n!==null?me("Suspense Fallback"):me("Suspense");case 19:return me("SuspenseList");case 0:case 15:return _e(e.type,!1);case 11:return _e(e.type.render,!1);case 1:return _e(e.type,!0);case 31:return me("Activity");default:return""}}function pt(e){try{var n="",r=null;do n+=Ze(e,r),r=e,e=e.return;while(e);return n}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}var ut=Object.prototype.hasOwnProperty,_t=t.unstable_scheduleCallback,on=t.unstable_cancelCallback,ln=t.unstable_shouldYield,zn=t.unstable_requestPaint,Ge=t.unstable_now,On=t.unstable_getCurrentPriorityLevel,Bt=t.unstable_ImmediatePriority,bn=t.unstable_UserBlockingPriority,Pa=t.unstable_NormalPriority,su=t.unstable_LowPriority,Ms=t.unstable_IdlePriority,ru=t.log,iu=t.unstable_setDisableYieldValue,Za=null,St=null;function vn(e){if(typeof ru=="function"&&iu(e),St&&typeof St.setStrictMode=="function")try{St.setStrictMode(Za,e)}catch{}}var Nt=Math.clz32?Math.clz32:cu,ou=Math.log,lu=Math.LN2;function cu(e){return e>>>=0,e===0?32:31-(ou(e)/lu|0)|0}var As=256,ks=262144,Rs=4194304;function Bn(e){var n=e&42;if(n!==0)return n;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Ds(e,n,r){var o=e.pendingLanes;if(o===0)return 0;var d=0,h=e.suspendedLanes,v=e.pingedLanes;e=e.warmLanes;var T=o&134217727;return T!==0?(o=T&~h,o!==0?d=Bn(o):(v&=T,v!==0?d=Bn(v):r||(r=T&~e,r!==0&&(d=Bn(r))))):(T=o&~h,T!==0?d=Bn(T):v!==0?d=Bn(v):r||(r=o&~e,r!==0&&(d=Bn(r)))),d===0?0:n!==0&&n!==d&&(n&h)===0&&(h=d&-d,r=n&-n,h>=r||h===32&&(r&4194048)!==0)?n:d}function Qa(e,n){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&n)===0}function uu(e,n){switch(e){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function bo(){var e=Rs;return Rs<<=1,(Rs&62914560)===0&&(Rs=4194304),e}function Yr(e){for(var n=[],r=0;31>r;r++)n.push(e);return n}function Fa(e,n){e.pendingLanes|=n,n!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function du(e,n,r,o,d,h){var v=e.pendingLanes;e.pendingLanes=r,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=r,e.entangledLanes&=r,e.errorRecoveryDisabledLanes&=r,e.shellSuspendCounter=0;var T=e.entanglements,q=e.expirationTimes,K=e.hiddenUpdates;for(r=v&~r;0<r;){var se=31-Nt(r),ie=1<<se;T[se]=0,q[se]=-1;var J=K[se];if(J!==null)for(K[se]=null,se=0;se<J.length;se++){var te=J[se];te!==null&&(te.lane&=-536870913)}r&=~ie}o!==0&&vo(e,o,0),h!==0&&d===0&&e.tag!==0&&(e.suspendedLanes|=h&~(v&~n))}function vo(e,n,r){e.pendingLanes|=n,e.suspendedLanes&=~n;var o=31-Nt(n);e.entangledLanes|=n,e.entanglements[o]=e.entanglements[o]|1073741824|r&261930}function wo(e,n){var r=e.entangledLanes|=n;for(e=e.entanglements;r;){var o=31-Nt(r),d=1<<o;d&n|e[o]&n&&(e[o]|=n),r&=~d}}function So(e,n){var r=n&-n;return r=(r&42)!==0?1:Xr(r),(r&(e.suspendedLanes|n))!==0?0:r}function Xr(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Gr(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function No(){var e=B.p;return e!==0?e:(e=window.event,e===void 0?32:z0(e.type))}function jo(e,n){var r=B.p;try{return B.p=e,n()}finally{B.p=r}}var wn=Math.random().toString(36).slice(2),dt="__reactFiber$"+wn,vt="__reactProps$"+wn,Hn="__reactContainer$"+wn,zs="__reactEvents$"+wn,Eo="__reactListeners$"+wn,fu="__reactHandles$"+wn,_o="__reactResources$"+wn,Wa="__reactMarker$"+wn;function Ir(e){delete e[dt],delete e[vt],delete e[zs],delete e[Eo],delete e[fu]}function fa(e){var n=e[dt];if(n)return n;for(var r=e.parentNode;r;){if(n=r[Hn]||r[dt]){if(r=n.alternate,n.child!==null||r!==null&&r.child!==null)for(e=y0(e);e!==null;){if(r=e[dt])return r;e=y0(e)}return n}e=r,r=e.parentNode}return null}function ha(e){if(e=e[dt]||e[Hn]){var n=e.tag;if(n===5||n===6||n===13||n===31||n===26||n===27||n===3)return e}return null}function ma(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e.stateNode;throw Error(i(33))}function pa(e){var n=e[_o];return n||(n=e[_o]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function at(e){e[Wa]=!0}var Co=new Set,To={};function Ln(e,n){ga(e,n),ga(e+"Capture",n)}function ga(e,n){for(To[e]=n,e=0;e<n.length;e++)Co.add(n[e])}var hu=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Pr={},Mo={};function mu(e){return ut.call(Mo,e)?!0:ut.call(Pr,e)?!1:hu.test(e)?Mo[e]=!0:(Pr[e]=!0,!1)}function Os(e,n,r){if(mu(n))if(r===null)e.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":e.removeAttribute(n);return;case"boolean":var o=n.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){e.removeAttribute(n);return}}e.setAttribute(n,""+r)}}function Bs(e,n,r){if(r===null)e.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttribute(n,""+r)}}function cn(e,n,r,o){if(o===null)e.removeAttribute(r);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(r);return}e.setAttributeNS(n,r,""+o)}}function Ct(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Ao(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function pu(e,n,r){var o=Object.getOwnPropertyDescriptor(e.constructor.prototype,n);if(!e.hasOwnProperty(n)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var d=o.get,h=o.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return d.call(this)},set:function(v){r=""+v,h.call(this,v)}}),Object.defineProperty(e,n,{enumerable:o.enumerable}),{getValue:function(){return r},setValue:function(v){r=""+v},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function Hs(e){if(!e._valueTracker){var n=Ao(e)?"checked":"value";e._valueTracker=pu(e,n,""+e[n])}}function ko(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var r=n.getValue(),o="";return e&&(o=Ao(e)?e.checked?"true":"false":e.value),e=o,e!==r?(n.setValue(e),!0):!1}function Ka(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var gu=/[\n"\\]/g;function Tt(e){return e.replace(gu,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function Ja(e,n,r,o,d,h,v,T){e.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?e.type=v:e.removeAttribute("type"),n!=null?v==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+Ct(n)):e.value!==""+Ct(n)&&(e.value=""+Ct(n)):v!=="submit"&&v!=="reset"||e.removeAttribute("value"),n!=null?Zr(e,v,Ct(n)):r!=null?Zr(e,v,Ct(r)):o!=null&&e.removeAttribute("value"),d==null&&h!=null&&(e.defaultChecked=!!h),d!=null&&(e.checked=d&&typeof d!="function"&&typeof d!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?e.name=""+Ct(T):e.removeAttribute("name")}function Ro(e,n,r,o,d,h,v,T){if(h!=null&&typeof h!="function"&&typeof h!="symbol"&&typeof h!="boolean"&&(e.type=h),n!=null||r!=null){if(!(h!=="submit"&&h!=="reset"||n!=null)){Hs(e);return}r=r!=null?""+Ct(r):"",n=n!=null?""+Ct(n):r,T||n===e.value||(e.value=n),e.defaultValue=n}o=o??d,o=typeof o!="function"&&typeof o!="symbol"&&!!o,e.checked=T?e.checked:!!o,e.defaultChecked=!!o,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(e.name=v),Hs(e)}function Zr(e,n,r){n==="number"&&Ka(e.ownerDocument)===e||e.defaultValue===""+r||(e.defaultValue=""+r)}function Un(e,n,r,o){if(e=e.options,n){n={};for(var d=0;d<r.length;d++)n["$"+r[d]]=!0;for(r=0;r<e.length;r++)d=n.hasOwnProperty("$"+e[r].value),e[r].selected!==d&&(e[r].selected=d),d&&o&&(e[r].defaultSelected=!0)}else{for(r=""+Ct(r),n=null,d=0;d<e.length;d++){if(e[d].value===r){e[d].selected=!0,o&&(e[d].defaultSelected=!0);return}n!==null||e[d].disabled||(n=e[d])}n!==null&&(n.selected=!0)}}function rm(e,n,r){if(n!=null&&(n=""+Ct(n),n!==e.value&&(e.value=n),r==null)){e.defaultValue!==n&&(e.defaultValue=n);return}e.defaultValue=r!=null?""+Ct(r):""}function im(e,n,r,o){if(n==null){if(o!=null){if(r!=null)throw Error(i(92));if(F(o)){if(1<o.length)throw Error(i(93));o=o[0]}r=o}r==null&&(r=""),n=r}r=Ct(n),e.defaultValue=r,o=e.textContent,o===r&&o!==""&&o!==null&&(e.value=o),Hs(e)}function Ls(e,n){if(n){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=n;return}}e.textContent=n}var yv=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function om(e,n,r){var o=n.indexOf("--")===0;r==null||typeof r=="boolean"||r===""?o?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="":o?e.setProperty(n,r):typeof r!="number"||r===0||yv.has(n)?n==="float"?e.cssFloat=r:e[n]=(""+r).trim():e[n]=r+"px"}function lm(e,n,r){if(n!=null&&typeof n!="object")throw Error(i(62));if(e=e.style,r!=null){for(var o in r)!r.hasOwnProperty(o)||n!=null&&n.hasOwnProperty(o)||(o.indexOf("--")===0?e.setProperty(o,""):o==="float"?e.cssFloat="":e[o]="");for(var d in n)o=n[d],n.hasOwnProperty(d)&&r[d]!==o&&om(e,d,o)}else for(var h in n)n.hasOwnProperty(h)&&om(e,h,n[h])}function xu(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var bv=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),vv=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Do(e){return vv.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function $n(){}var yu=null;function bu(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Us=null,$s=null;function cm(e){var n=ha(e);if(n&&(e=n.stateNode)){var r=e[vt]||null;e:switch(e=n.stateNode,n.type){case"input":if(Ja(e,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name),n=r.name,r.type==="radio"&&n!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll('input[name="'+Tt(""+n)+'"][type="radio"]'),n=0;n<r.length;n++){var o=r[n];if(o!==e&&o.form===e.form){var d=o[vt]||null;if(!d)throw Error(i(90));Ja(o,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name)}}for(n=0;n<r.length;n++)o=r[n],o.form===e.form&&ko(o)}break e;case"textarea":rm(e,r.value,r.defaultValue);break e;case"select":n=r.value,n!=null&&Un(e,!!r.multiple,n,!1)}}}var vu=!1;function um(e,n,r){if(vu)return e(n,r);vu=!0;try{var o=e(n);return o}finally{if(vu=!1,(Us!==null||$s!==null)&&(vl(),Us&&(n=Us,e=$s,$s=Us=null,cm(n),e)))for(n=0;n<e.length;n++)cm(e[n])}}function Qr(e,n){var r=e.stateNode;if(r===null)return null;var o=r[vt]||null;if(o===null)return null;r=o[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(e=e.type,o=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!o;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(i(231,n,typeof r));return r}var qn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),wu=!1;if(qn)try{var Fr={};Object.defineProperty(Fr,"passive",{get:function(){wu=!0}}),window.addEventListener("test",Fr,Fr),window.removeEventListener("test",Fr,Fr)}catch{wu=!1}var xa=null,Su=null,zo=null;function dm(){if(zo)return zo;var e,n=Su,r=n.length,o,d="value"in xa?xa.value:xa.textContent,h=d.length;for(e=0;e<r&&n[e]===d[e];e++);var v=r-e;for(o=1;o<=v&&n[r-o]===d[h-o];o++);return zo=d.slice(e,1<o?1-o:void 0)}function Oo(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function Bo(){return!0}function fm(){return!1}function Mt(e){function n(r,o,d,h,v){this._reactName=r,this._targetInst=d,this.type=o,this.nativeEvent=h,this.target=v,this.currentTarget=null;for(var T in e)e.hasOwnProperty(T)&&(r=e[T],this[T]=r?r(h):h[T]);return this.isDefaultPrevented=(h.defaultPrevented!=null?h.defaultPrevented:h.returnValue===!1)?Bo:fm,this.isPropagationStopped=fm,this}return x(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Bo)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Bo)},persist:function(){},isPersistent:Bo}),n}var es={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ho=Mt(es),Wr=x({},es,{view:0,detail:0}),wv=Mt(Wr),Nu,ju,Kr,Lo=x({},Wr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_u,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Kr&&(Kr&&e.type==="mousemove"?(Nu=e.screenX-Kr.screenX,ju=e.screenY-Kr.screenY):ju=Nu=0,Kr=e),Nu)},movementY:function(e){return"movementY"in e?e.movementY:ju}}),hm=Mt(Lo),Sv=x({},Lo,{dataTransfer:0}),Nv=Mt(Sv),jv=x({},Wr,{relatedTarget:0}),Eu=Mt(jv),Ev=x({},es,{animationName:0,elapsedTime:0,pseudoElement:0}),_v=Mt(Ev),Cv=x({},es,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Tv=Mt(Cv),Mv=x({},es,{data:0}),mm=Mt(Mv),Av={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kv={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Rv={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Dv(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=Rv[e])?!!n[e]:!1}function _u(){return Dv}var zv=x({},Wr,{key:function(e){if(e.key){var n=Av[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=Oo(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?kv[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_u,charCode:function(e){return e.type==="keypress"?Oo(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Oo(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Ov=Mt(zv),Bv=x({},Lo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),pm=Mt(Bv),Hv=x({},Wr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_u}),Lv=Mt(Hv),Uv=x({},es,{propertyName:0,elapsedTime:0,pseudoElement:0}),$v=Mt(Uv),qv=x({},Lo,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Vv=Mt(qv),Yv=x({},es,{newState:0,oldState:0}),Xv=Mt(Yv),Gv=[9,13,27,32],Cu=qn&&"CompositionEvent"in window,Jr=null;qn&&"documentMode"in document&&(Jr=document.documentMode);var Iv=qn&&"TextEvent"in window&&!Jr,gm=qn&&(!Cu||Jr&&8<Jr&&11>=Jr),xm=" ",ym=!1;function bm(e,n){switch(e){case"keyup":return Gv.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function vm(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var qs=!1;function Pv(e,n){switch(e){case"compositionend":return vm(n);case"keypress":return n.which!==32?null:(ym=!0,xm);case"textInput":return e=n.data,e===xm&&ym?null:e;default:return null}}function Zv(e,n){if(qs)return e==="compositionend"||!Cu&&bm(e,n)?(e=dm(),zo=Su=xa=null,qs=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return gm&&n.locale!=="ko"?null:n.data;default:return null}}var Qv={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function wm(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!Qv[e.type]:n==="textarea"}function Sm(e,n,r,o){Us?$s?$s.push(o):$s=[o]:Us=o,n=Cl(n,"onChange"),0<n.length&&(r=new Ho("onChange","change",null,r,o),e.push({event:r,listeners:n}))}var ei=null,ti=null;function Fv(e){s0(e,0)}function Uo(e){var n=ma(e);if(ko(n))return e}function Nm(e,n){if(e==="change")return n}var jm=!1;if(qn){var Tu;if(qn){var Mu="oninput"in document;if(!Mu){var Em=document.createElement("div");Em.setAttribute("oninput","return;"),Mu=typeof Em.oninput=="function"}Tu=Mu}else Tu=!1;jm=Tu&&(!document.documentMode||9<document.documentMode)}function _m(){ei&&(ei.detachEvent("onpropertychange",Cm),ti=ei=null)}function Cm(e){if(e.propertyName==="value"&&Uo(ti)){var n=[];Sm(n,ti,e,bu(e)),um(Fv,n)}}function Wv(e,n,r){e==="focusin"?(_m(),ei=n,ti=r,ei.attachEvent("onpropertychange",Cm)):e==="focusout"&&_m()}function Kv(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Uo(ti)}function Jv(e,n){if(e==="click")return Uo(n)}function e2(e,n){if(e==="input"||e==="change")return Uo(n)}function t2(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var Ht=typeof Object.is=="function"?Object.is:t2;function ni(e,n){if(Ht(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var r=Object.keys(e),o=Object.keys(n);if(r.length!==o.length)return!1;for(o=0;o<r.length;o++){var d=r[o];if(!ut.call(n,d)||!Ht(e[d],n[d]))return!1}return!0}function Tm(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Mm(e,n){var r=Tm(e);e=0;for(var o;r;){if(r.nodeType===3){if(o=e+r.textContent.length,e<=n&&o>=n)return{node:r,offset:n-e};e=o}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Tm(r)}}function Am(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?Am(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function km(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var n=Ka(e.document);n instanceof e.HTMLIFrameElement;){try{var r=typeof n.contentWindow.location.href=="string"}catch{r=!1}if(r)e=n.contentWindow;else break;n=Ka(e.document)}return n}function Au(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}var n2=qn&&"documentMode"in document&&11>=document.documentMode,Vs=null,ku=null,ai=null,Ru=!1;function Rm(e,n,r){var o=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Ru||Vs==null||Vs!==Ka(o)||(o=Vs,"selectionStart"in o&&Au(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),ai&&ni(ai,o)||(ai=o,o=Cl(ku,"onSelect"),0<o.length&&(n=new Ho("onSelect","select",null,n,r),e.push({event:n,listeners:o}),n.target=Vs)))}function ts(e,n){var r={};return r[e.toLowerCase()]=n.toLowerCase(),r["Webkit"+e]="webkit"+n,r["Moz"+e]="moz"+n,r}var Ys={animationend:ts("Animation","AnimationEnd"),animationiteration:ts("Animation","AnimationIteration"),animationstart:ts("Animation","AnimationStart"),transitionrun:ts("Transition","TransitionRun"),transitionstart:ts("Transition","TransitionStart"),transitioncancel:ts("Transition","TransitionCancel"),transitionend:ts("Transition","TransitionEnd")},Du={},Dm={};qn&&(Dm=document.createElement("div").style,"AnimationEvent"in window||(delete Ys.animationend.animation,delete Ys.animationiteration.animation,delete Ys.animationstart.animation),"TransitionEvent"in window||delete Ys.transitionend.transition);function ns(e){if(Du[e])return Du[e];if(!Ys[e])return e;var n=Ys[e],r;for(r in n)if(n.hasOwnProperty(r)&&r in Dm)return Du[e]=n[r];return e}var zm=ns("animationend"),Om=ns("animationiteration"),Bm=ns("animationstart"),a2=ns("transitionrun"),s2=ns("transitionstart"),r2=ns("transitioncancel"),Hm=ns("transitionend"),Lm=new Map,zu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");zu.push("scrollEnd");function un(e,n){Lm.set(e,n),Ln(n,[e])}var $o=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Ft=[],Xs=0,Ou=0;function qo(){for(var e=Xs,n=Ou=Xs=0;n<e;){var r=Ft[n];Ft[n++]=null;var o=Ft[n];Ft[n++]=null;var d=Ft[n];Ft[n++]=null;var h=Ft[n];if(Ft[n++]=null,o!==null&&d!==null){var v=o.pending;v===null?d.next=d:(d.next=v.next,v.next=d),o.pending=d}h!==0&&Um(r,d,h)}}function Vo(e,n,r,o){Ft[Xs++]=e,Ft[Xs++]=n,Ft[Xs++]=r,Ft[Xs++]=o,Ou|=o,e.lanes|=o,e=e.alternate,e!==null&&(e.lanes|=o)}function Bu(e,n,r,o){return Vo(e,n,r,o),Yo(e)}function as(e,n){return Vo(e,null,null,n),Yo(e)}function Um(e,n,r){e.lanes|=r;var o=e.alternate;o!==null&&(o.lanes|=r);for(var d=!1,h=e.return;h!==null;)h.childLanes|=r,o=h.alternate,o!==null&&(o.childLanes|=r),h.tag===22&&(e=h.stateNode,e===null||e._visibility&1||(d=!0)),e=h,h=h.return;return e.tag===3?(h=e.stateNode,d&&n!==null&&(d=31-Nt(r),e=h.hiddenUpdates,o=e[d],o===null?e[d]=[n]:o.push(n),n.lane=r|536870912),h):null}function Yo(e){if(50<Ei)throw Ei=0,Gd=null,Error(i(185));for(var n=e.return;n!==null;)e=n,n=e.return;return e.tag===3?e.stateNode:null}var Gs={};function i2(e,n,r,o){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Lt(e,n,r,o){return new i2(e,n,r,o)}function Hu(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Vn(e,n){var r=e.alternate;return r===null?(r=Lt(e.tag,n,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=n,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&65011712,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,n=e.dependencies,r.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r.refCleanup=e.refCleanup,r}function $m(e,n){e.flags&=65011714;var r=e.alternate;return r===null?(e.childLanes=0,e.lanes=n,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=r.childLanes,e.lanes=r.lanes,e.child=r.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=r.memoizedProps,e.memoizedState=r.memoizedState,e.updateQueue=r.updateQueue,e.type=r.type,n=r.dependencies,e.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),e}function Xo(e,n,r,o,d,h){var v=0;if(o=e,typeof e=="function")Hu(e)&&(v=1);else if(typeof e=="string")v=dw(e,r,H.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case U:return e=Lt(31,r,n,d),e.elementType=U,e.lanes=h,e;case A:return ss(r.children,d,h,n);case N:v=8,d|=24;break;case E:return e=Lt(12,r,n,d|2),e.elementType=E,e.lanes=h,e;case w:return e=Lt(13,r,n,d),e.elementType=w,e.lanes=h,e;case z:return e=Lt(19,r,n,d),e.elementType=z,e.lanes=h,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case C:v=10;break e;case D:v=9;break e;case k:v=11;break e;case M:v=14;break e;case Y:v=16,o=null;break e}v=29,r=Error(i(130,e===null?"null":typeof e,"")),o=null}return n=Lt(v,r,n,d),n.elementType=e,n.type=o,n.lanes=h,n}function ss(e,n,r,o){return e=Lt(7,e,o,n),e.lanes=r,e}function Lu(e,n,r){return e=Lt(6,e,null,n),e.lanes=r,e}function qm(e){var n=Lt(18,null,null,0);return n.stateNode=e,n}function Uu(e,n,r){return n=Lt(4,e.children!==null?e.children:[],e.key,n),n.lanes=r,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}var Vm=new WeakMap;function Wt(e,n){if(typeof e=="object"&&e!==null){var r=Vm.get(e);return r!==void 0?r:(n={value:e,source:n,stack:pt(n)},Vm.set(e,n),n)}return{value:e,source:n,stack:pt(n)}}var Is=[],Ps=0,Go=null,si=0,Kt=[],Jt=0,ya=null,Sn=1,Nn="";function Yn(e,n){Is[Ps++]=si,Is[Ps++]=Go,Go=e,si=n}function Ym(e,n,r){Kt[Jt++]=Sn,Kt[Jt++]=Nn,Kt[Jt++]=ya,ya=e;var o=Sn;e=Nn;var d=32-Nt(o)-1;o&=~(1<<d),r+=1;var h=32-Nt(n)+d;if(30<h){var v=d-d%5;h=(o&(1<<v)-1).toString(32),o>>=v,d-=v,Sn=1<<32-Nt(n)+d|r<<d|o,Nn=h+e}else Sn=1<<h|r<<d|o,Nn=e}function $u(e){e.return!==null&&(Yn(e,1),Ym(e,1,0))}function qu(e){for(;e===Go;)Go=Is[--Ps],Is[Ps]=null,si=Is[--Ps],Is[Ps]=null;for(;e===ya;)ya=Kt[--Jt],Kt[Jt]=null,Nn=Kt[--Jt],Kt[Jt]=null,Sn=Kt[--Jt],Kt[Jt]=null}function Xm(e,n){Kt[Jt++]=Sn,Kt[Jt++]=Nn,Kt[Jt++]=ya,Sn=n.id,Nn=n.overflow,ya=e}var gt=null,Ie=null,De=!1,ba=null,en=!1,Vu=Error(i(519));function va(e){var n=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw ri(Wt(n,e)),Vu}function Gm(e){var n=e.stateNode,r=e.type,o=e.memoizedProps;switch(n[dt]=e,n[vt]=o,r){case"dialog":Ae("cancel",n),Ae("close",n);break;case"iframe":case"object":case"embed":Ae("load",n);break;case"video":case"audio":for(r=0;r<Ci.length;r++)Ae(Ci[r],n);break;case"source":Ae("error",n);break;case"img":case"image":case"link":Ae("error",n),Ae("load",n);break;case"details":Ae("toggle",n);break;case"input":Ae("invalid",n),Ro(n,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0);break;case"select":Ae("invalid",n);break;case"textarea":Ae("invalid",n),im(n,o.value,o.defaultValue,o.children)}r=o.children,typeof r!="string"&&typeof r!="number"&&typeof r!="bigint"||n.textContent===""+r||o.suppressHydrationWarning===!0||l0(n.textContent,r)?(o.popover!=null&&(Ae("beforetoggle",n),Ae("toggle",n)),o.onScroll!=null&&Ae("scroll",n),o.onScrollEnd!=null&&Ae("scrollend",n),o.onClick!=null&&(n.onclick=$n),n=!0):n=!1,n||va(e,!0)}function Im(e){for(gt=e.return;gt;)switch(gt.tag){case 5:case 31:case 13:en=!1;return;case 27:case 3:en=!0;return;default:gt=gt.return}}function Zs(e){if(e!==gt)return!1;if(!De)return Im(e),De=!0,!1;var n=e.tag,r;if((r=n!==3&&n!==27)&&((r=n===5)&&(r=e.type,r=!(r!=="form"&&r!=="button")||of(e.type,e.memoizedProps)),r=!r),r&&Ie&&va(e),Im(e),n===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(i(317));Ie=x0(e)}else if(n===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(i(317));Ie=x0(e)}else n===27?(n=Ie,za(e.type)?(e=ff,ff=null,Ie=e):Ie=n):Ie=gt?nn(e.stateNode.nextSibling):null;return!0}function rs(){Ie=gt=null,De=!1}function Yu(){var e=ba;return e!==null&&(Dt===null?Dt=e:Dt.push.apply(Dt,e),ba=null),e}function ri(e){ba===null?ba=[e]:ba.push(e)}var Xu=R(null),is=null,Xn=null;function wa(e,n,r){ee(Xu,n._currentValue),n._currentValue=r}function Gn(e){e._currentValue=Xu.current,X(Xu)}function Gu(e,n,r){for(;e!==null;){var o=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,o!==null&&(o.childLanes|=n)):o!==null&&(o.childLanes&n)!==n&&(o.childLanes|=n),e===r)break;e=e.return}}function Iu(e,n,r,o){var d=e.child;for(d!==null&&(d.return=e);d!==null;){var h=d.dependencies;if(h!==null){var v=d.child;h=h.firstContext;e:for(;h!==null;){var T=h;h=d;for(var q=0;q<n.length;q++)if(T.context===n[q]){h.lanes|=r,T=h.alternate,T!==null&&(T.lanes|=r),Gu(h.return,r,e),o||(v=null);break e}h=T.next}}else if(d.tag===18){if(v=d.return,v===null)throw Error(i(341));v.lanes|=r,h=v.alternate,h!==null&&(h.lanes|=r),Gu(v,r,e),v=null}else v=d.child;if(v!==null)v.return=d;else for(v=d;v!==null;){if(v===e){v=null;break}if(d=v.sibling,d!==null){d.return=v.return,v=d;break}v=v.return}d=v}}function Qs(e,n,r,o){e=null;for(var d=n,h=!1;d!==null;){if(!h){if((d.flags&524288)!==0)h=!0;else if((d.flags&262144)!==0)break}if(d.tag===10){var v=d.alternate;if(v===null)throw Error(i(387));if(v=v.memoizedProps,v!==null){var T=d.type;Ht(d.pendingProps.value,v.value)||(e!==null?e.push(T):e=[T])}}else if(d===ce.current){if(v=d.alternate,v===null)throw Error(i(387));v.memoizedState.memoizedState!==d.memoizedState.memoizedState&&(e!==null?e.push(Ri):e=[Ri])}d=d.return}e!==null&&Iu(n,e,r,o),n.flags|=262144}function Io(e){for(e=e.firstContext;e!==null;){if(!Ht(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function os(e){is=e,Xn=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function xt(e){return Pm(is,e)}function Po(e,n){return is===null&&os(e),Pm(e,n)}function Pm(e,n){var r=n._currentValue;if(n={context:n,memoizedValue:r,next:null},Xn===null){if(e===null)throw Error(i(308));Xn=n,e.dependencies={lanes:0,firstContext:n},e.flags|=524288}else Xn=Xn.next=n;return r}var o2=typeof AbortController<"u"?AbortController:function(){var e=[],n=this.signal={aborted:!1,addEventListener:function(r,o){e.push(o)}};this.abort=function(){n.aborted=!0,e.forEach(function(r){return r()})}},l2=t.unstable_scheduleCallback,c2=t.unstable_NormalPriority,st={$$typeof:C,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Pu(){return{controller:new o2,data:new Map,refCount:0}}function ii(e){e.refCount--,e.refCount===0&&l2(c2,function(){e.controller.abort()})}var oi=null,Zu=0,Fs=0,Ws=null;function u2(e,n){if(oi===null){var r=oi=[];Zu=0,Fs=Wd(),Ws={status:"pending",value:void 0,then:function(o){r.push(o)}}}return Zu++,n.then(Zm,Zm),n}function Zm(){if(--Zu===0&&oi!==null){Ws!==null&&(Ws.status="fulfilled");var e=oi;oi=null,Fs=0,Ws=null;for(var n=0;n<e.length;n++)(0,e[n])()}}function d2(e,n){var r=[],o={status:"pending",value:null,reason:null,then:function(d){r.push(d)}};return e.then(function(){o.status="fulfilled",o.value=n;for(var d=0;d<r.length;d++)(0,r[d])(n)},function(d){for(o.status="rejected",o.reason=d,d=0;d<r.length;d++)(0,r[d])(void 0)}),o}var Qm=O.S;O.S=function(e,n){Rg=Ge(),typeof n=="object"&&n!==null&&typeof n.then=="function"&&u2(e,n),Qm!==null&&Qm(e,n)};var ls=R(null);function Qu(){var e=ls.current;return e!==null?e:Xe.pooledCache}function Zo(e,n){n===null?ee(ls,ls.current):ee(ls,n.pool)}function Fm(){var e=Qu();return e===null?null:{parent:st._currentValue,pool:e}}var Ks=Error(i(460)),Fu=Error(i(474)),Qo=Error(i(542)),Fo={then:function(){}};function Wm(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Km(e,n,r){switch(r=e[r],r===void 0?e.push(n):r!==n&&(n.then($n,$n),n=r),n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,ep(e),e;default:if(typeof n.status=="string")n.then($n,$n);else{if(e=Xe,e!==null&&100<e.shellSuspendCounter)throw Error(i(482));e=n,e.status="pending",e.then(function(o){if(n.status==="pending"){var d=n;d.status="fulfilled",d.value=o}},function(o){if(n.status==="pending"){var d=n;d.status="rejected",d.reason=o}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,ep(e),e}throw us=n,Ks}}function cs(e){try{var n=e._init;return n(e._payload)}catch(r){throw r!==null&&typeof r=="object"&&typeof r.then=="function"?(us=r,Ks):r}}var us=null;function Jm(){if(us===null)throw Error(i(459));var e=us;return us=null,e}function ep(e){if(e===Ks||e===Qo)throw Error(i(483))}var Js=null,li=0;function Wo(e){var n=li;return li+=1,Js===null&&(Js=[]),Km(Js,e,n)}function ci(e,n){n=n.props.ref,e.ref=n!==void 0?n:null}function Ko(e,n){throw n.$$typeof===b?Error(i(525)):(e=Object.prototype.toString.call(n),Error(i(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)))}function tp(e){function n(P,G){if(e){var W=P.deletions;W===null?(P.deletions=[G],P.flags|=16):W.push(G)}}function r(P,G){if(!e)return null;for(;G!==null;)n(P,G),G=G.sibling;return null}function o(P){for(var G=new Map;P!==null;)P.key!==null?G.set(P.key,P):G.set(P.index,P),P=P.sibling;return G}function d(P,G){return P=Vn(P,G),P.index=0,P.sibling=null,P}function h(P,G,W){return P.index=W,e?(W=P.alternate,W!==null?(W=W.index,W<G?(P.flags|=67108866,G):W):(P.flags|=67108866,G)):(P.flags|=1048576,G)}function v(P){return e&&P.alternate===null&&(P.flags|=67108866),P}function T(P,G,W,re){return G===null||G.tag!==6?(G=Lu(W,P.mode,re),G.return=P,G):(G=d(G,W),G.return=P,G)}function q(P,G,W,re){var ye=W.type;return ye===A?se(P,G,W.props.children,re,W.key):G!==null&&(G.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===Y&&cs(ye)===G.type)?(G=d(G,W.props),ci(G,W),G.return=P,G):(G=Xo(W.type,W.key,W.props,null,P.mode,re),ci(G,W),G.return=P,G)}function K(P,G,W,re){return G===null||G.tag!==4||G.stateNode.containerInfo!==W.containerInfo||G.stateNode.implementation!==W.implementation?(G=Uu(W,P.mode,re),G.return=P,G):(G=d(G,W.children||[]),G.return=P,G)}function se(P,G,W,re,ye){return G===null||G.tag!==7?(G=ss(W,P.mode,re,ye),G.return=P,G):(G=d(G,W),G.return=P,G)}function ie(P,G,W){if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return G=Lu(""+G,P.mode,W),G.return=P,G;if(typeof G=="object"&&G!==null){switch(G.$$typeof){case S:return W=Xo(G.type,G.key,G.props,null,P.mode,W),ci(W,G),W.return=P,W;case j:return G=Uu(G,P.mode,W),G.return=P,G;case Y:return G=cs(G),ie(P,G,W)}if(F(G)||I(G))return G=ss(G,P.mode,W,null),G.return=P,G;if(typeof G.then=="function")return ie(P,Wo(G),W);if(G.$$typeof===C)return ie(P,Po(P,G),W);Ko(P,G)}return null}function J(P,G,W,re){var ye=G!==null?G.key:null;if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return ye!==null?null:T(P,G,""+W,re);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case S:return W.key===ye?q(P,G,W,re):null;case j:return W.key===ye?K(P,G,W,re):null;case Y:return W=cs(W),J(P,G,W,re)}if(F(W)||I(W))return ye!==null?null:se(P,G,W,re,null);if(typeof W.then=="function")return J(P,G,Wo(W),re);if(W.$$typeof===C)return J(P,G,Po(P,W),re);Ko(P,W)}return null}function te(P,G,W,re,ye){if(typeof re=="string"&&re!==""||typeof re=="number"||typeof re=="bigint")return P=P.get(W)||null,T(G,P,""+re,ye);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case S:return P=P.get(re.key===null?W:re.key)||null,q(G,P,re,ye);case j:return P=P.get(re.key===null?W:re.key)||null,K(G,P,re,ye);case Y:return re=cs(re),te(P,G,W,re,ye)}if(F(re)||I(re))return P=P.get(W)||null,se(G,P,re,ye,null);if(typeof re.then=="function")return te(P,G,W,Wo(re),ye);if(re.$$typeof===C)return te(P,G,W,Po(G,re),ye);Ko(G,re)}return null}function fe(P,G,W,re){for(var ye=null,Oe=null,he=G,Ee=G=0,Re=null;he!==null&&Ee<W.length;Ee++){he.index>Ee?(Re=he,he=null):Re=he.sibling;var Be=J(P,he,W[Ee],re);if(Be===null){he===null&&(he=Re);break}e&&he&&Be.alternate===null&&n(P,he),G=h(Be,G,Ee),Oe===null?ye=Be:Oe.sibling=Be,Oe=Be,he=Re}if(Ee===W.length)return r(P,he),De&&Yn(P,Ee),ye;if(he===null){for(;Ee<W.length;Ee++)he=ie(P,W[Ee],re),he!==null&&(G=h(he,G,Ee),Oe===null?ye=he:Oe.sibling=he,Oe=he);return De&&Yn(P,Ee),ye}for(he=o(he);Ee<W.length;Ee++)Re=te(he,P,Ee,W[Ee],re),Re!==null&&(e&&Re.alternate!==null&&he.delete(Re.key===null?Ee:Re.key),G=h(Re,G,Ee),Oe===null?ye=Re:Oe.sibling=Re,Oe=Re);return e&&he.forEach(function(Ua){return n(P,Ua)}),De&&Yn(P,Ee),ye}function ve(P,G,W,re){if(W==null)throw Error(i(151));for(var ye=null,Oe=null,he=G,Ee=G=0,Re=null,Be=W.next();he!==null&&!Be.done;Ee++,Be=W.next()){he.index>Ee?(Re=he,he=null):Re=he.sibling;var Ua=J(P,he,Be.value,re);if(Ua===null){he===null&&(he=Re);break}e&&he&&Ua.alternate===null&&n(P,he),G=h(Ua,G,Ee),Oe===null?ye=Ua:Oe.sibling=Ua,Oe=Ua,he=Re}if(Be.done)return r(P,he),De&&Yn(P,Ee),ye;if(he===null){for(;!Be.done;Ee++,Be=W.next())Be=ie(P,Be.value,re),Be!==null&&(G=h(Be,G,Ee),Oe===null?ye=Be:Oe.sibling=Be,Oe=Be);return De&&Yn(P,Ee),ye}for(he=o(he);!Be.done;Ee++,Be=W.next())Be=te(he,P,Ee,Be.value,re),Be!==null&&(e&&Be.alternate!==null&&he.delete(Be.key===null?Ee:Be.key),G=h(Be,G,Ee),Oe===null?ye=Be:Oe.sibling=Be,Oe=Be);return e&&he.forEach(function(Sw){return n(P,Sw)}),De&&Yn(P,Ee),ye}function Ye(P,G,W,re){if(typeof W=="object"&&W!==null&&W.type===A&&W.key===null&&(W=W.props.children),typeof W=="object"&&W!==null){switch(W.$$typeof){case S:e:{for(var ye=W.key;G!==null;){if(G.key===ye){if(ye=W.type,ye===A){if(G.tag===7){r(P,G.sibling),re=d(G,W.props.children),re.return=P,P=re;break e}}else if(G.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===Y&&cs(ye)===G.type){r(P,G.sibling),re=d(G,W.props),ci(re,W),re.return=P,P=re;break e}r(P,G);break}else n(P,G);G=G.sibling}W.type===A?(re=ss(W.props.children,P.mode,re,W.key),re.return=P,P=re):(re=Xo(W.type,W.key,W.props,null,P.mode,re),ci(re,W),re.return=P,P=re)}return v(P);case j:e:{for(ye=W.key;G!==null;){if(G.key===ye)if(G.tag===4&&G.stateNode.containerInfo===W.containerInfo&&G.stateNode.implementation===W.implementation){r(P,G.sibling),re=d(G,W.children||[]),re.return=P,P=re;break e}else{r(P,G);break}else n(P,G);G=G.sibling}re=Uu(W,P.mode,re),re.return=P,P=re}return v(P);case Y:return W=cs(W),Ye(P,G,W,re)}if(F(W))return fe(P,G,W,re);if(I(W)){if(ye=I(W),typeof ye!="function")throw Error(i(150));return W=ye.call(W),ve(P,G,W,re)}if(typeof W.then=="function")return Ye(P,G,Wo(W),re);if(W.$$typeof===C)return Ye(P,G,Po(P,W),re);Ko(P,W)}return typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint"?(W=""+W,G!==null&&G.tag===6?(r(P,G.sibling),re=d(G,W),re.return=P,P=re):(r(P,G),re=Lu(W,P.mode,re),re.return=P,P=re),v(P)):r(P,G)}return function(P,G,W,re){try{li=0;var ye=Ye(P,G,W,re);return Js=null,ye}catch(he){if(he===Ks||he===Qo)throw he;var Oe=Lt(29,he,null,P.mode);return Oe.lanes=re,Oe.return=P,Oe}}}var ds=tp(!0),np=tp(!1),Sa=!1;function Wu(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ku(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Na(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function ja(e,n,r){var o=e.updateQueue;if(o===null)return null;if(o=o.shared,(He&2)!==0){var d=o.pending;return d===null?n.next=n:(n.next=d.next,d.next=n),o.pending=n,n=Yo(e),Um(e,null,r),n}return Vo(e,o,n,r),Yo(e)}function ui(e,n,r){if(n=n.updateQueue,n!==null&&(n=n.shared,(r&4194048)!==0)){var o=n.lanes;o&=e.pendingLanes,r|=o,n.lanes=r,wo(e,r)}}function Ju(e,n){var r=e.updateQueue,o=e.alternate;if(o!==null&&(o=o.updateQueue,r===o)){var d=null,h=null;if(r=r.firstBaseUpdate,r!==null){do{var v={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};h===null?d=h=v:h=h.next=v,r=r.next}while(r!==null);h===null?d=h=n:h=h.next=n}else d=h=n;r={baseState:o.baseState,firstBaseUpdate:d,lastBaseUpdate:h,shared:o.shared,callbacks:o.callbacks},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=n:e.next=n,r.lastBaseUpdate=n}var ed=!1;function di(){if(ed){var e=Ws;if(e!==null)throw e}}function fi(e,n,r,o){ed=!1;var d=e.updateQueue;Sa=!1;var h=d.firstBaseUpdate,v=d.lastBaseUpdate,T=d.shared.pending;if(T!==null){d.shared.pending=null;var q=T,K=q.next;q.next=null,v===null?h=K:v.next=K,v=q;var se=e.alternate;se!==null&&(se=se.updateQueue,T=se.lastBaseUpdate,T!==v&&(T===null?se.firstBaseUpdate=K:T.next=K,se.lastBaseUpdate=q))}if(h!==null){var ie=d.baseState;v=0,se=K=q=null,T=h;do{var J=T.lane&-536870913,te=J!==T.lane;if(te?(ke&J)===J:(o&J)===J){J!==0&&J===Fs&&(ed=!0),se!==null&&(se=se.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});e:{var fe=e,ve=T;J=n;var Ye=r;switch(ve.tag){case 1:if(fe=ve.payload,typeof fe=="function"){ie=fe.call(Ye,ie,J);break e}ie=fe;break e;case 3:fe.flags=fe.flags&-65537|128;case 0:if(fe=ve.payload,J=typeof fe=="function"?fe.call(Ye,ie,J):fe,J==null)break e;ie=x({},ie,J);break e;case 2:Sa=!0}}J=T.callback,J!==null&&(e.flags|=64,te&&(e.flags|=8192),te=d.callbacks,te===null?d.callbacks=[J]:te.push(J))}else te={lane:J,tag:T.tag,payload:T.payload,callback:T.callback,next:null},se===null?(K=se=te,q=ie):se=se.next=te,v|=J;if(T=T.next,T===null){if(T=d.shared.pending,T===null)break;te=T,T=te.next,te.next=null,d.lastBaseUpdate=te,d.shared.pending=null}}while(!0);se===null&&(q=ie),d.baseState=q,d.firstBaseUpdate=K,d.lastBaseUpdate=se,h===null&&(d.shared.lanes=0),Ma|=v,e.lanes=v,e.memoizedState=ie}}function ap(e,n){if(typeof e!="function")throw Error(i(191,e));e.call(n)}function sp(e,n){var r=e.callbacks;if(r!==null)for(e.callbacks=null,e=0;e<r.length;e++)ap(r[e],n)}var er=R(null),Jo=R(0);function rp(e,n){e=ea,ee(Jo,e),ee(er,n),ea=e|n.baseLanes}function td(){ee(Jo,ea),ee(er,er.current)}function nd(){ea=Jo.current,X(er),X(Jo)}var Ut=R(null),tn=null;function Ea(e){var n=e.alternate;ee(tt,tt.current&1),ee(Ut,e),tn===null&&(n===null||er.current!==null||n.memoizedState!==null)&&(tn=e)}function ad(e){ee(tt,tt.current),ee(Ut,e),tn===null&&(tn=e)}function ip(e){e.tag===22?(ee(tt,tt.current),ee(Ut,e),tn===null&&(tn=e)):_a()}function _a(){ee(tt,tt.current),ee(Ut,Ut.current)}function $t(e){X(Ut),tn===e&&(tn=null),X(tt)}var tt=R(0);function el(e){for(var n=e;n!==null;){if(n.tag===13){var r=n.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||uf(r)||df(r)))return n}else if(n.tag===19&&(n.memoizedProps.revealOrder==="forwards"||n.memoizedProps.revealOrder==="backwards"||n.memoizedProps.revealOrder==="unstable_legacy-backwards"||n.memoizedProps.revealOrder==="together")){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var In=0,Ne=null,qe=null,rt=null,tl=!1,tr=!1,fs=!1,nl=0,hi=0,nr=null,f2=0;function Je(){throw Error(i(321))}function sd(e,n){if(n===null)return!1;for(var r=0;r<n.length&&r<e.length;r++)if(!Ht(e[r],n[r]))return!1;return!0}function rd(e,n,r,o,d,h){return In=h,Ne=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,O.H=e===null||e.memoizedState===null?Yp:vd,fs=!1,h=r(o,d),fs=!1,tr&&(h=lp(n,r,o,d)),op(e),h}function op(e){O.H=gi;var n=qe!==null&&qe.next!==null;if(In=0,rt=qe=Ne=null,tl=!1,hi=0,nr=null,n)throw Error(i(300));e===null||it||(e=e.dependencies,e!==null&&Io(e)&&(it=!0))}function lp(e,n,r,o){Ne=e;var d=0;do{if(tr&&(nr=null),hi=0,tr=!1,25<=d)throw Error(i(301));if(d+=1,rt=qe=null,e.updateQueue!=null){var h=e.updateQueue;h.lastEffect=null,h.events=null,h.stores=null,h.memoCache!=null&&(h.memoCache.index=0)}O.H=Xp,h=n(r,o)}while(tr);return h}function h2(){var e=O.H,n=e.useState()[0];return n=typeof n.then=="function"?mi(n):n,e=e.useState()[0],(qe!==null?qe.memoizedState:null)!==e&&(Ne.flags|=1024),n}function id(){var e=nl!==0;return nl=0,e}function od(e,n,r){n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~r}function ld(e){if(tl){for(e=e.memoizedState;e!==null;){var n=e.queue;n!==null&&(n.pending=null),e=e.next}tl=!1}In=0,rt=qe=Ne=null,tr=!1,hi=nl=0,nr=null}function jt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return rt===null?Ne.memoizedState=rt=e:rt=rt.next=e,rt}function nt(){if(qe===null){var e=Ne.alternate;e=e!==null?e.memoizedState:null}else e=qe.next;var n=rt===null?Ne.memoizedState:rt.next;if(n!==null)rt=n,qe=e;else{if(e===null)throw Ne.alternate===null?Error(i(467)):Error(i(310));qe=e,e={memoizedState:qe.memoizedState,baseState:qe.baseState,baseQueue:qe.baseQueue,queue:qe.queue,next:null},rt===null?Ne.memoizedState=rt=e:rt=rt.next=e}return rt}function al(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function mi(e){var n=hi;return hi+=1,nr===null&&(nr=[]),e=Km(nr,e,n),n=Ne,(rt===null?n.memoizedState:rt.next)===null&&(n=n.alternate,O.H=n===null||n.memoizedState===null?Yp:vd),e}function sl(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return mi(e);if(e.$$typeof===C)return xt(e)}throw Error(i(438,String(e)))}function cd(e){var n=null,r=Ne.updateQueue;if(r!==null&&(n=r.memoCache),n==null){var o=Ne.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(n={data:o.data.map(function(d){return d.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),r===null&&(r=al(),Ne.updateQueue=r),r.memoCache=n,r=n.data[n.index],r===void 0)for(r=n.data[n.index]=Array(e),o=0;o<e;o++)r[o]=ne;return n.index++,r}function Pn(e,n){return typeof n=="function"?n(e):n}function rl(e){var n=nt();return ud(n,qe,e)}function ud(e,n,r){var o=e.queue;if(o===null)throw Error(i(311));o.lastRenderedReducer=r;var d=e.baseQueue,h=o.pending;if(h!==null){if(d!==null){var v=d.next;d.next=h.next,h.next=v}n.baseQueue=d=h,o.pending=null}if(h=e.baseState,d===null)e.memoizedState=h;else{n=d.next;var T=v=null,q=null,K=n,se=!1;do{var ie=K.lane&-536870913;if(ie!==K.lane?(ke&ie)===ie:(In&ie)===ie){var J=K.revertLane;if(J===0)q!==null&&(q=q.next={lane:0,revertLane:0,gesture:null,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null}),ie===Fs&&(se=!0);else if((In&J)===J){K=K.next,J===Fs&&(se=!0);continue}else ie={lane:0,revertLane:K.revertLane,gesture:null,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},q===null?(T=q=ie,v=h):q=q.next=ie,Ne.lanes|=J,Ma|=J;ie=K.action,fs&&r(h,ie),h=K.hasEagerState?K.eagerState:r(h,ie)}else J={lane:ie,revertLane:K.revertLane,gesture:K.gesture,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},q===null?(T=q=J,v=h):q=q.next=J,Ne.lanes|=ie,Ma|=ie;K=K.next}while(K!==null&&K!==n);if(q===null?v=h:q.next=T,!Ht(h,e.memoizedState)&&(it=!0,se&&(r=Ws,r!==null)))throw r;e.memoizedState=h,e.baseState=v,e.baseQueue=q,o.lastRenderedState=h}return d===null&&(o.lanes=0),[e.memoizedState,o.dispatch]}function dd(e){var n=nt(),r=n.queue;if(r===null)throw Error(i(311));r.lastRenderedReducer=e;var o=r.dispatch,d=r.pending,h=n.memoizedState;if(d!==null){r.pending=null;var v=d=d.next;do h=e(h,v.action),v=v.next;while(v!==d);Ht(h,n.memoizedState)||(it=!0),n.memoizedState=h,n.baseQueue===null&&(n.baseState=h),r.lastRenderedState=h}return[h,o]}function cp(e,n,r){var o=Ne,d=nt(),h=De;if(h){if(r===void 0)throw Error(i(407));r=r()}else r=n();var v=!Ht((qe||d).memoizedState,r);if(v&&(d.memoizedState=r,it=!0),d=d.queue,md(fp.bind(null,o,d,e),[e]),d.getSnapshot!==n||v||rt!==null&&rt.memoizedState.tag&1){if(o.flags|=2048,ar(9,{destroy:void 0},dp.bind(null,o,d,r,n),null),Xe===null)throw Error(i(349));h||(In&127)!==0||up(o,n,r)}return r}function up(e,n,r){e.flags|=16384,e={getSnapshot:n,value:r},n=Ne.updateQueue,n===null?(n=al(),Ne.updateQueue=n,n.stores=[e]):(r=n.stores,r===null?n.stores=[e]:r.push(e))}function dp(e,n,r,o){n.value=r,n.getSnapshot=o,hp(n)&&mp(e)}function fp(e,n,r){return r(function(){hp(n)&&mp(e)})}function hp(e){var n=e.getSnapshot;e=e.value;try{var r=n();return!Ht(e,r)}catch{return!0}}function mp(e){var n=as(e,2);n!==null&&zt(n,e,2)}function fd(e){var n=jt();if(typeof e=="function"){var r=e;if(e=r(),fs){vn(!0);try{r()}finally{vn(!1)}}}return n.memoizedState=n.baseState=e,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pn,lastRenderedState:e},n}function pp(e,n,r,o){return e.baseState=r,ud(e,qe,typeof o=="function"?o:Pn)}function m2(e,n,r,o,d){if(ll(e))throw Error(i(485));if(e=n.action,e!==null){var h={payload:d,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){h.listeners.push(v)}};O.T!==null?r(!0):h.isTransition=!1,o(h),r=n.pending,r===null?(h.next=n.pending=h,gp(n,h)):(h.next=r.next,n.pending=r.next=h)}}function gp(e,n){var r=n.action,o=n.payload,d=e.state;if(n.isTransition){var h=O.T,v={};O.T=v;try{var T=r(d,o),q=O.S;q!==null&&q(v,T),xp(e,n,T)}catch(K){hd(e,n,K)}finally{h!==null&&v.types!==null&&(h.types=v.types),O.T=h}}else try{h=r(d,o),xp(e,n,h)}catch(K){hd(e,n,K)}}function xp(e,n,r){r!==null&&typeof r=="object"&&typeof r.then=="function"?r.then(function(o){yp(e,n,o)},function(o){return hd(e,n,o)}):yp(e,n,r)}function yp(e,n,r){n.status="fulfilled",n.value=r,bp(n),e.state=r,n=e.pending,n!==null&&(r=n.next,r===n?e.pending=null:(r=r.next,n.next=r,gp(e,r)))}function hd(e,n,r){var o=e.pending;if(e.pending=null,o!==null){o=o.next;do n.status="rejected",n.reason=r,bp(n),n=n.next;while(n!==o)}e.action=null}function bp(e){e=e.listeners;for(var n=0;n<e.length;n++)(0,e[n])()}function vp(e,n){return n}function wp(e,n){if(De){var r=Xe.formState;if(r!==null){e:{var o=Ne;if(De){if(Ie){t:{for(var d=Ie,h=en;d.nodeType!==8;){if(!h){d=null;break t}if(d=nn(d.nextSibling),d===null){d=null;break t}}h=d.data,d=h==="F!"||h==="F"?d:null}if(d){Ie=nn(d.nextSibling),o=d.data==="F!";break e}}va(o)}o=!1}o&&(n=r[0])}}return r=jt(),r.memoizedState=r.baseState=n,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:vp,lastRenderedState:n},r.queue=o,r=$p.bind(null,Ne,o),o.dispatch=r,o=fd(!1),h=bd.bind(null,Ne,!1,o.queue),o=jt(),d={state:n,dispatch:null,action:e,pending:null},o.queue=d,r=m2.bind(null,Ne,d,h,r),d.dispatch=r,o.memoizedState=e,[n,r,!1]}function Sp(e){var n=nt();return Np(n,qe,e)}function Np(e,n,r){if(n=ud(e,n,vp)[0],e=rl(Pn)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var o=mi(n)}catch(v){throw v===Ks?Qo:v}else o=n;n=nt();var d=n.queue,h=d.dispatch;return r!==n.memoizedState&&(Ne.flags|=2048,ar(9,{destroy:void 0},p2.bind(null,d,r),null)),[o,h,e]}function p2(e,n){e.action=n}function jp(e){var n=nt(),r=qe;if(r!==null)return Np(n,r,e);nt(),n=n.memoizedState,r=nt();var o=r.queue.dispatch;return r.memoizedState=e,[n,o,!1]}function ar(e,n,r,o){return e={tag:e,create:r,deps:o,inst:n,next:null},n=Ne.updateQueue,n===null&&(n=al(),Ne.updateQueue=n),r=n.lastEffect,r===null?n.lastEffect=e.next=e:(o=r.next,r.next=e,e.next=o,n.lastEffect=e),e}function Ep(){return nt().memoizedState}function il(e,n,r,o){var d=jt();Ne.flags|=e,d.memoizedState=ar(1|n,{destroy:void 0},r,o===void 0?null:o)}function ol(e,n,r,o){var d=nt();o=o===void 0?null:o;var h=d.memoizedState.inst;qe!==null&&o!==null&&sd(o,qe.memoizedState.deps)?d.memoizedState=ar(n,h,r,o):(Ne.flags|=e,d.memoizedState=ar(1|n,h,r,o))}function _p(e,n){il(8390656,8,e,n)}function md(e,n){ol(2048,8,e,n)}function g2(e){Ne.flags|=4;var n=Ne.updateQueue;if(n===null)n=al(),Ne.updateQueue=n,n.events=[e];else{var r=n.events;r===null?n.events=[e]:r.push(e)}}function Cp(e){var n=nt().memoizedState;return g2({ref:n,nextImpl:e}),function(){if((He&2)!==0)throw Error(i(440));return n.impl.apply(void 0,arguments)}}function Tp(e,n){return ol(4,2,e,n)}function Mp(e,n){return ol(4,4,e,n)}function Ap(e,n){if(typeof n=="function"){e=e();var r=n(e);return function(){typeof r=="function"?r():n(null)}}if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function kp(e,n,r){r=r!=null?r.concat([e]):null,ol(4,4,Ap.bind(null,n,e),r)}function pd(){}function Rp(e,n){var r=nt();n=n===void 0?null:n;var o=r.memoizedState;return n!==null&&sd(n,o[1])?o[0]:(r.memoizedState=[e,n],e)}function Dp(e,n){var r=nt();n=n===void 0?null:n;var o=r.memoizedState;if(n!==null&&sd(n,o[1]))return o[0];if(o=e(),fs){vn(!0);try{e()}finally{vn(!1)}}return r.memoizedState=[o,n],o}function gd(e,n,r){return r===void 0||(In&1073741824)!==0&&(ke&261930)===0?e.memoizedState=n:(e.memoizedState=r,e=zg(),Ne.lanes|=e,Ma|=e,r)}function zp(e,n,r,o){return Ht(r,n)?r:er.current!==null?(e=gd(e,r,o),Ht(e,n)||(it=!0),e):(In&42)===0||(In&1073741824)!==0&&(ke&261930)===0?(it=!0,e.memoizedState=r):(e=zg(),Ne.lanes|=e,Ma|=e,n)}function Op(e,n,r,o,d){var h=B.p;B.p=h!==0&&8>h?h:8;var v=O.T,T={};O.T=T,bd(e,!1,n,r);try{var q=d(),K=O.S;if(K!==null&&K(T,q),q!==null&&typeof q=="object"&&typeof q.then=="function"){var se=d2(q,o);pi(e,n,se,Yt(e))}else pi(e,n,o,Yt(e))}catch(ie){pi(e,n,{then:function(){},status:"rejected",reason:ie},Yt())}finally{B.p=h,v!==null&&T.types!==null&&(v.types=T.types),O.T=v}}function x2(){}function xd(e,n,r,o){if(e.tag!==5)throw Error(i(476));var d=Bp(e).queue;Op(e,d,n,V,r===null?x2:function(){return Hp(e),r(o)})}function Bp(e){var n=e.memoizedState;if(n!==null)return n;n={memoizedState:V,baseState:V,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pn,lastRenderedState:V},next:null};var r={};return n.next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pn,lastRenderedState:r},next:null},e.memoizedState=n,e=e.alternate,e!==null&&(e.memoizedState=n),n}function Hp(e){var n=Bp(e);n.next===null&&(n=e.alternate.memoizedState),pi(e,n.next.queue,{},Yt())}function yd(){return xt(Ri)}function Lp(){return nt().memoizedState}function Up(){return nt().memoizedState}function y2(e){for(var n=e.return;n!==null;){switch(n.tag){case 24:case 3:var r=Yt();e=Na(r);var o=ja(n,e,r);o!==null&&(zt(o,n,r),ui(o,n,r)),n={cache:Pu()},e.payload=n;return}n=n.return}}function b2(e,n,r){var o=Yt();r={lane:o,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},ll(e)?qp(n,r):(r=Bu(e,n,r,o),r!==null&&(zt(r,e,o),Vp(r,n,o)))}function $p(e,n,r){var o=Yt();pi(e,n,r,o)}function pi(e,n,r,o){var d={lane:o,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null};if(ll(e))qp(n,d);else{var h=e.alternate;if(e.lanes===0&&(h===null||h.lanes===0)&&(h=n.lastRenderedReducer,h!==null))try{var v=n.lastRenderedState,T=h(v,r);if(d.hasEagerState=!0,d.eagerState=T,Ht(T,v))return Vo(e,n,d,0),Xe===null&&qo(),!1}catch{}if(r=Bu(e,n,d,o),r!==null)return zt(r,e,o),Vp(r,n,o),!0}return!1}function bd(e,n,r,o){if(o={lane:2,revertLane:Wd(),gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},ll(e)){if(n)throw Error(i(479))}else n=Bu(e,r,o,2),n!==null&&zt(n,e,2)}function ll(e){var n=e.alternate;return e===Ne||n!==null&&n===Ne}function qp(e,n){tr=tl=!0;var r=e.pending;r===null?n.next=n:(n.next=r.next,r.next=n),e.pending=n}function Vp(e,n,r){if((r&4194048)!==0){var o=n.lanes;o&=e.pendingLanes,r|=o,n.lanes=r,wo(e,r)}}var gi={readContext:xt,use:sl,useCallback:Je,useContext:Je,useEffect:Je,useImperativeHandle:Je,useLayoutEffect:Je,useInsertionEffect:Je,useMemo:Je,useReducer:Je,useRef:Je,useState:Je,useDebugValue:Je,useDeferredValue:Je,useTransition:Je,useSyncExternalStore:Je,useId:Je,useHostTransitionStatus:Je,useFormState:Je,useActionState:Je,useOptimistic:Je,useMemoCache:Je,useCacheRefresh:Je};gi.useEffectEvent=Je;var Yp={readContext:xt,use:sl,useCallback:function(e,n){return jt().memoizedState=[e,n===void 0?null:n],e},useContext:xt,useEffect:_p,useImperativeHandle:function(e,n,r){r=r!=null?r.concat([e]):null,il(4194308,4,Ap.bind(null,n,e),r)},useLayoutEffect:function(e,n){return il(4194308,4,e,n)},useInsertionEffect:function(e,n){il(4,2,e,n)},useMemo:function(e,n){var r=jt();n=n===void 0?null:n;var o=e();if(fs){vn(!0);try{e()}finally{vn(!1)}}return r.memoizedState=[o,n],o},useReducer:function(e,n,r){var o=jt();if(r!==void 0){var d=r(n);if(fs){vn(!0);try{r(n)}finally{vn(!1)}}}else d=n;return o.memoizedState=o.baseState=d,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:d},o.queue=e,e=e.dispatch=b2.bind(null,Ne,e),[o.memoizedState,e]},useRef:function(e){var n=jt();return e={current:e},n.memoizedState=e},useState:function(e){e=fd(e);var n=e.queue,r=$p.bind(null,Ne,n);return n.dispatch=r,[e.memoizedState,r]},useDebugValue:pd,useDeferredValue:function(e,n){var r=jt();return gd(r,e,n)},useTransition:function(){var e=fd(!1);return e=Op.bind(null,Ne,e.queue,!0,!1),jt().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,n,r){var o=Ne,d=jt();if(De){if(r===void 0)throw Error(i(407));r=r()}else{if(r=n(),Xe===null)throw Error(i(349));(ke&127)!==0||up(o,n,r)}d.memoizedState=r;var h={value:r,getSnapshot:n};return d.queue=h,_p(fp.bind(null,o,h,e),[e]),o.flags|=2048,ar(9,{destroy:void 0},dp.bind(null,o,h,r,n),null),r},useId:function(){var e=jt(),n=Xe.identifierPrefix;if(De){var r=Nn,o=Sn;r=(o&~(1<<32-Nt(o)-1)).toString(32)+r,n="_"+n+"R_"+r,r=nl++,0<r&&(n+="H"+r.toString(32)),n+="_"}else r=f2++,n="_"+n+"r_"+r.toString(32)+"_";return e.memoizedState=n},useHostTransitionStatus:yd,useFormState:wp,useActionState:wp,useOptimistic:function(e){var n=jt();n.memoizedState=n.baseState=e;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=r,n=bd.bind(null,Ne,!0,r),r.dispatch=n,[e,n]},useMemoCache:cd,useCacheRefresh:function(){return jt().memoizedState=y2.bind(null,Ne)},useEffectEvent:function(e){var n=jt(),r={impl:e};return n.memoizedState=r,function(){if((He&2)!==0)throw Error(i(440));return r.impl.apply(void 0,arguments)}}},vd={readContext:xt,use:sl,useCallback:Rp,useContext:xt,useEffect:md,useImperativeHandle:kp,useInsertionEffect:Tp,useLayoutEffect:Mp,useMemo:Dp,useReducer:rl,useRef:Ep,useState:function(){return rl(Pn)},useDebugValue:pd,useDeferredValue:function(e,n){var r=nt();return zp(r,qe.memoizedState,e,n)},useTransition:function(){var e=rl(Pn)[0],n=nt().memoizedState;return[typeof e=="boolean"?e:mi(e),n]},useSyncExternalStore:cp,useId:Lp,useHostTransitionStatus:yd,useFormState:Sp,useActionState:Sp,useOptimistic:function(e,n){var r=nt();return pp(r,qe,e,n)},useMemoCache:cd,useCacheRefresh:Up};vd.useEffectEvent=Cp;var Xp={readContext:xt,use:sl,useCallback:Rp,useContext:xt,useEffect:md,useImperativeHandle:kp,useInsertionEffect:Tp,useLayoutEffect:Mp,useMemo:Dp,useReducer:dd,useRef:Ep,useState:function(){return dd(Pn)},useDebugValue:pd,useDeferredValue:function(e,n){var r=nt();return qe===null?gd(r,e,n):zp(r,qe.memoizedState,e,n)},useTransition:function(){var e=dd(Pn)[0],n=nt().memoizedState;return[typeof e=="boolean"?e:mi(e),n]},useSyncExternalStore:cp,useId:Lp,useHostTransitionStatus:yd,useFormState:jp,useActionState:jp,useOptimistic:function(e,n){var r=nt();return qe!==null?pp(r,qe,e,n):(r.baseState=e,[e,r.queue.dispatch])},useMemoCache:cd,useCacheRefresh:Up};Xp.useEffectEvent=Cp;function wd(e,n,r,o){n=e.memoizedState,r=r(o,n),r=r==null?n:x({},n,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Sd={enqueueSetState:function(e,n,r){e=e._reactInternals;var o=Yt(),d=Na(o);d.payload=n,r!=null&&(d.callback=r),n=ja(e,d,o),n!==null&&(zt(n,e,o),ui(n,e,o))},enqueueReplaceState:function(e,n,r){e=e._reactInternals;var o=Yt(),d=Na(o);d.tag=1,d.payload=n,r!=null&&(d.callback=r),n=ja(e,d,o),n!==null&&(zt(n,e,o),ui(n,e,o))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var r=Yt(),o=Na(r);o.tag=2,n!=null&&(o.callback=n),n=ja(e,o,r),n!==null&&(zt(n,e,r),ui(n,e,r))}};function Gp(e,n,r,o,d,h,v){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(o,h,v):n.prototype&&n.prototype.isPureReactComponent?!ni(r,o)||!ni(d,h):!0}function Ip(e,n,r,o){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(r,o),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(r,o),n.state!==e&&Sd.enqueueReplaceState(n,n.state,null)}function hs(e,n){var r=n;if("ref"in n){r={};for(var o in n)o!=="ref"&&(r[o]=n[o])}if(e=e.defaultProps){r===n&&(r=x({},r));for(var d in e)r[d]===void 0&&(r[d]=e[d])}return r}function Pp(e){$o(e)}function Zp(e){console.error(e)}function Qp(e){$o(e)}function cl(e,n){try{var r=e.onUncaughtError;r(n.value,{componentStack:n.stack})}catch(o){setTimeout(function(){throw o})}}function Fp(e,n,r){try{var o=e.onCaughtError;o(r.value,{componentStack:r.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(d){setTimeout(function(){throw d})}}function Nd(e,n,r){return r=Na(r),r.tag=3,r.payload={element:null},r.callback=function(){cl(e,n)},r}function Wp(e){return e=Na(e),e.tag=3,e}function Kp(e,n,r,o){var d=r.type.getDerivedStateFromError;if(typeof d=="function"){var h=o.value;e.payload=function(){return d(h)},e.callback=function(){Fp(n,r,o)}}var v=r.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(e.callback=function(){Fp(n,r,o),typeof d!="function"&&(Aa===null?Aa=new Set([this]):Aa.add(this));var T=o.stack;this.componentDidCatch(o.value,{componentStack:T!==null?T:""})})}function v2(e,n,r,o,d){if(r.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(n=r.alternate,n!==null&&Qs(n,r,d,!0),r=Ut.current,r!==null){switch(r.tag){case 31:case 13:return tn===null?wl():r.alternate===null&&et===0&&(et=3),r.flags&=-257,r.flags|=65536,r.lanes=d,o===Fo?r.flags|=16384:(n=r.updateQueue,n===null?r.updateQueue=new Set([o]):n.add(o),Zd(e,o,d)),!1;case 22:return r.flags|=65536,o===Fo?r.flags|=16384:(n=r.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([o])},r.updateQueue=n):(r=n.retryQueue,r===null?n.retryQueue=new Set([o]):r.add(o)),Zd(e,o,d)),!1}throw Error(i(435,r.tag))}return Zd(e,o,d),wl(),!1}if(De)return n=Ut.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=d,o!==Vu&&(e=Error(i(422),{cause:o}),ri(Wt(e,r)))):(o!==Vu&&(n=Error(i(423),{cause:o}),ri(Wt(n,r))),e=e.current.alternate,e.flags|=65536,d&=-d,e.lanes|=d,o=Wt(o,r),d=Nd(e.stateNode,o,d),Ju(e,d),et!==4&&(et=2)),!1;var h=Error(i(520),{cause:o});if(h=Wt(h,r),ji===null?ji=[h]:ji.push(h),et!==4&&(et=2),n===null)return!0;o=Wt(o,r),r=n;do{switch(r.tag){case 3:return r.flags|=65536,e=d&-d,r.lanes|=e,e=Nd(r.stateNode,o,e),Ju(r,e),!1;case 1:if(n=r.type,h=r.stateNode,(r.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||h!==null&&typeof h.componentDidCatch=="function"&&(Aa===null||!Aa.has(h))))return r.flags|=65536,d&=-d,r.lanes|=d,d=Wp(d),Kp(d,e,r,o),Ju(r,d),!1}r=r.return}while(r!==null);return!1}var jd=Error(i(461)),it=!1;function yt(e,n,r,o){n.child=e===null?np(n,null,r,o):ds(n,e.child,r,o)}function Jp(e,n,r,o,d){r=r.render;var h=n.ref;if("ref"in o){var v={};for(var T in o)T!=="ref"&&(v[T]=o[T])}else v=o;return os(n),o=rd(e,n,r,v,h,d),T=id(),e!==null&&!it?(od(e,n,d),Zn(e,n,d)):(De&&T&&$u(n),n.flags|=1,yt(e,n,o,d),n.child)}function eg(e,n,r,o,d){if(e===null){var h=r.type;return typeof h=="function"&&!Hu(h)&&h.defaultProps===void 0&&r.compare===null?(n.tag=15,n.type=h,tg(e,n,h,o,d)):(e=Xo(r.type,null,o,n,n.mode,d),e.ref=n.ref,e.return=n,n.child=e)}if(h=e.child,!Rd(e,d)){var v=h.memoizedProps;if(r=r.compare,r=r!==null?r:ni,r(v,o)&&e.ref===n.ref)return Zn(e,n,d)}return n.flags|=1,e=Vn(h,o),e.ref=n.ref,e.return=n,n.child=e}function tg(e,n,r,o,d){if(e!==null){var h=e.memoizedProps;if(ni(h,o)&&e.ref===n.ref)if(it=!1,n.pendingProps=o=h,Rd(e,d))(e.flags&131072)!==0&&(it=!0);else return n.lanes=e.lanes,Zn(e,n,d)}return Ed(e,n,r,o,d)}function ng(e,n,r,o){var d=o.children,h=e!==null?e.memoizedState:null;if(e===null&&n.stateNode===null&&(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.mode==="hidden"){if((n.flags&128)!==0){if(h=h!==null?h.baseLanes|r:r,e!==null){for(o=n.child=e.child,d=0;o!==null;)d=d|o.lanes|o.childLanes,o=o.sibling;o=d&~h}else o=0,n.child=null;return ag(e,n,h,r,o)}if((r&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},e!==null&&Zo(n,h!==null?h.cachePool:null),h!==null?rp(n,h):td(),ip(n);else return o=n.lanes=536870912,ag(e,n,h!==null?h.baseLanes|r:r,r,o)}else h!==null?(Zo(n,h.cachePool),rp(n,h),_a(),n.memoizedState=null):(e!==null&&Zo(n,null),td(),_a());return yt(e,n,d,r),n.child}function xi(e,n){return e!==null&&e.tag===22||n.stateNode!==null||(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.sibling}function ag(e,n,r,o,d){var h=Qu();return h=h===null?null:{parent:st._currentValue,pool:h},n.memoizedState={baseLanes:r,cachePool:h},e!==null&&Zo(n,null),td(),ip(n),e!==null&&Qs(e,n,o,!0),n.childLanes=d,null}function ul(e,n){return n=fl({mode:n.mode,children:n.children},e.mode),n.ref=e.ref,e.child=n,n.return=e,n}function sg(e,n,r){return ds(n,e.child,null,r),e=ul(n,n.pendingProps),e.flags|=2,$t(n),n.memoizedState=null,e}function w2(e,n,r){var o=n.pendingProps,d=(n.flags&128)!==0;if(n.flags&=-129,e===null){if(De){if(o.mode==="hidden")return e=ul(n,o),n.lanes=536870912,xi(null,e);if(ad(n),(e=Ie)?(e=g0(e,en),e=e!==null&&e.data==="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:ya!==null?{id:Sn,overflow:Nn}:null,retryLane:536870912,hydrationErrors:null},r=qm(e),r.return=n,n.child=r,gt=n,Ie=null)):e=null,e===null)throw va(n);return n.lanes=536870912,null}return ul(n,o)}var h=e.memoizedState;if(h!==null){var v=h.dehydrated;if(ad(n),d)if(n.flags&256)n.flags&=-257,n=sg(e,n,r);else if(n.memoizedState!==null)n.child=e.child,n.flags|=128,n=null;else throw Error(i(558));else if(it||Qs(e,n,r,!1),d=(r&e.childLanes)!==0,it||d){if(o=Xe,o!==null&&(v=So(o,r),v!==0&&v!==h.retryLane))throw h.retryLane=v,as(e,v),zt(o,e,v),jd;wl(),n=sg(e,n,r)}else e=h.treeContext,Ie=nn(v.nextSibling),gt=n,De=!0,ba=null,en=!1,e!==null&&Xm(n,e),n=ul(n,o),n.flags|=4096;return n}return e=Vn(e.child,{mode:o.mode,children:o.children}),e.ref=n.ref,n.child=e,e.return=n,e}function dl(e,n){var r=n.ref;if(r===null)e!==null&&e.ref!==null&&(n.flags|=4194816);else{if(typeof r!="function"&&typeof r!="object")throw Error(i(284));(e===null||e.ref!==r)&&(n.flags|=4194816)}}function Ed(e,n,r,o,d){return os(n),r=rd(e,n,r,o,void 0,d),o=id(),e!==null&&!it?(od(e,n,d),Zn(e,n,d)):(De&&o&&$u(n),n.flags|=1,yt(e,n,r,d),n.child)}function rg(e,n,r,o,d,h){return os(n),n.updateQueue=null,r=lp(n,o,r,d),op(e),o=id(),e!==null&&!it?(od(e,n,h),Zn(e,n,h)):(De&&o&&$u(n),n.flags|=1,yt(e,n,r,h),n.child)}function ig(e,n,r,o,d){if(os(n),n.stateNode===null){var h=Gs,v=r.contextType;typeof v=="object"&&v!==null&&(h=xt(v)),h=new r(o,h),n.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,h.updater=Sd,n.stateNode=h,h._reactInternals=n,h=n.stateNode,h.props=o,h.state=n.memoizedState,h.refs={},Wu(n),v=r.contextType,h.context=typeof v=="object"&&v!==null?xt(v):Gs,h.state=n.memoizedState,v=r.getDerivedStateFromProps,typeof v=="function"&&(wd(n,r,v,o),h.state=n.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof h.getSnapshotBeforeUpdate=="function"||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(v=h.state,typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount(),v!==h.state&&Sd.enqueueReplaceState(h,h.state,null),fi(n,o,h,d),di(),h.state=n.memoizedState),typeof h.componentDidMount=="function"&&(n.flags|=4194308),o=!0}else if(e===null){h=n.stateNode;var T=n.memoizedProps,q=hs(r,T);h.props=q;var K=h.context,se=r.contextType;v=Gs,typeof se=="object"&&se!==null&&(v=xt(se));var ie=r.getDerivedStateFromProps;se=typeof ie=="function"||typeof h.getSnapshotBeforeUpdate=="function",T=n.pendingProps!==T,se||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(T||K!==v)&&Ip(n,h,o,v),Sa=!1;var J=n.memoizedState;h.state=J,fi(n,o,h,d),di(),K=n.memoizedState,T||J!==K||Sa?(typeof ie=="function"&&(wd(n,r,ie,o),K=n.memoizedState),(q=Sa||Gp(n,r,q,o,J,K,v))?(se||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount()),typeof h.componentDidMount=="function"&&(n.flags|=4194308)):(typeof h.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=o,n.memoizedState=K),h.props=o,h.state=K,h.context=v,o=q):(typeof h.componentDidMount=="function"&&(n.flags|=4194308),o=!1)}else{h=n.stateNode,Ku(e,n),v=n.memoizedProps,se=hs(r,v),h.props=se,ie=n.pendingProps,J=h.context,K=r.contextType,q=Gs,typeof K=="object"&&K!==null&&(q=xt(K)),T=r.getDerivedStateFromProps,(K=typeof T=="function"||typeof h.getSnapshotBeforeUpdate=="function")||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(v!==ie||J!==q)&&Ip(n,h,o,q),Sa=!1,J=n.memoizedState,h.state=J,fi(n,o,h,d),di();var te=n.memoizedState;v!==ie||J!==te||Sa||e!==null&&e.dependencies!==null&&Io(e.dependencies)?(typeof T=="function"&&(wd(n,r,T,o),te=n.memoizedState),(se=Sa||Gp(n,r,se,o,J,te,q)||e!==null&&e.dependencies!==null&&Io(e.dependencies))?(K||typeof h.UNSAFE_componentWillUpdate!="function"&&typeof h.componentWillUpdate!="function"||(typeof h.componentWillUpdate=="function"&&h.componentWillUpdate(o,te,q),typeof h.UNSAFE_componentWillUpdate=="function"&&h.UNSAFE_componentWillUpdate(o,te,q)),typeof h.componentDidUpdate=="function"&&(n.flags|=4),typeof h.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof h.componentDidUpdate!="function"||v===e.memoizedProps&&J===e.memoizedState||(n.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&J===e.memoizedState||(n.flags|=1024),n.memoizedProps=o,n.memoizedState=te),h.props=o,h.state=te,h.context=q,o=se):(typeof h.componentDidUpdate!="function"||v===e.memoizedProps&&J===e.memoizedState||(n.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&J===e.memoizedState||(n.flags|=1024),o=!1)}return h=o,dl(e,n),o=(n.flags&128)!==0,h||o?(h=n.stateNode,r=o&&typeof r.getDerivedStateFromError!="function"?null:h.render(),n.flags|=1,e!==null&&o?(n.child=ds(n,e.child,null,d),n.child=ds(n,null,r,d)):yt(e,n,r,d),n.memoizedState=h.state,e=n.child):e=Zn(e,n,d),e}function og(e,n,r,o){return rs(),n.flags|=256,yt(e,n,r,o),n.child}var _d={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Cd(e){return{baseLanes:e,cachePool:Fm()}}function Td(e,n,r){return e=e!==null?e.childLanes&~r:0,n&&(e|=Vt),e}function lg(e,n,r){var o=n.pendingProps,d=!1,h=(n.flags&128)!==0,v;if((v=h)||(v=e!==null&&e.memoizedState===null?!1:(tt.current&2)!==0),v&&(d=!0,n.flags&=-129),v=(n.flags&32)!==0,n.flags&=-33,e===null){if(De){if(d?Ea(n):_a(),(e=Ie)?(e=g0(e,en),e=e!==null&&e.data!=="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:ya!==null?{id:Sn,overflow:Nn}:null,retryLane:536870912,hydrationErrors:null},r=qm(e),r.return=n,n.child=r,gt=n,Ie=null)):e=null,e===null)throw va(n);return df(e)?n.lanes=32:n.lanes=536870912,null}var T=o.children;return o=o.fallback,d?(_a(),d=n.mode,T=fl({mode:"hidden",children:T},d),o=ss(o,d,r,null),T.return=n,o.return=n,T.sibling=o,n.child=T,o=n.child,o.memoizedState=Cd(r),o.childLanes=Td(e,v,r),n.memoizedState=_d,xi(null,o)):(Ea(n),Md(n,T))}var q=e.memoizedState;if(q!==null&&(T=q.dehydrated,T!==null)){if(h)n.flags&256?(Ea(n),n.flags&=-257,n=Ad(e,n,r)):n.memoizedState!==null?(_a(),n.child=e.child,n.flags|=128,n=null):(_a(),T=o.fallback,d=n.mode,o=fl({mode:"visible",children:o.children},d),T=ss(T,d,r,null),T.flags|=2,o.return=n,T.return=n,o.sibling=T,n.child=o,ds(n,e.child,null,r),o=n.child,o.memoizedState=Cd(r),o.childLanes=Td(e,v,r),n.memoizedState=_d,n=xi(null,o));else if(Ea(n),df(T)){if(v=T.nextSibling&&T.nextSibling.dataset,v)var K=v.dgst;v=K,o=Error(i(419)),o.stack="",o.digest=v,ri({value:o,source:null,stack:null}),n=Ad(e,n,r)}else if(it||Qs(e,n,r,!1),v=(r&e.childLanes)!==0,it||v){if(v=Xe,v!==null&&(o=So(v,r),o!==0&&o!==q.retryLane))throw q.retryLane=o,as(e,o),zt(v,e,o),jd;uf(T)||wl(),n=Ad(e,n,r)}else uf(T)?(n.flags|=192,n.child=e.child,n=null):(e=q.treeContext,Ie=nn(T.nextSibling),gt=n,De=!0,ba=null,en=!1,e!==null&&Xm(n,e),n=Md(n,o.children),n.flags|=4096);return n}return d?(_a(),T=o.fallback,d=n.mode,q=e.child,K=q.sibling,o=Vn(q,{mode:"hidden",children:o.children}),o.subtreeFlags=q.subtreeFlags&65011712,K!==null?T=Vn(K,T):(T=ss(T,d,r,null),T.flags|=2),T.return=n,o.return=n,o.sibling=T,n.child=o,xi(null,o),o=n.child,T=e.child.memoizedState,T===null?T=Cd(r):(d=T.cachePool,d!==null?(q=st._currentValue,d=d.parent!==q?{parent:q,pool:q}:d):d=Fm(),T={baseLanes:T.baseLanes|r,cachePool:d}),o.memoizedState=T,o.childLanes=Td(e,v,r),n.memoizedState=_d,xi(e.child,o)):(Ea(n),r=e.child,e=r.sibling,r=Vn(r,{mode:"visible",children:o.children}),r.return=n,r.sibling=null,e!==null&&(v=n.deletions,v===null?(n.deletions=[e],n.flags|=16):v.push(e)),n.child=r,n.memoizedState=null,r)}function Md(e,n){return n=fl({mode:"visible",children:n},e.mode),n.return=e,e.child=n}function fl(e,n){return e=Lt(22,e,null,n),e.lanes=0,e}function Ad(e,n,r){return ds(n,e.child,null,r),e=Md(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function cg(e,n,r){e.lanes|=n;var o=e.alternate;o!==null&&(o.lanes|=n),Gu(e.return,n,r)}function kd(e,n,r,o,d,h){var v=e.memoizedState;v===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:o,tail:r,tailMode:d,treeForkCount:h}:(v.isBackwards=n,v.rendering=null,v.renderingStartTime=0,v.last=o,v.tail=r,v.tailMode=d,v.treeForkCount=h)}function ug(e,n,r){var o=n.pendingProps,d=o.revealOrder,h=o.tail;o=o.children;var v=tt.current,T=(v&2)!==0;if(T?(v=v&1|2,n.flags|=128):v&=1,ee(tt,v),yt(e,n,o,r),o=De?si:0,!T&&e!==null&&(e.flags&128)!==0)e:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&cg(e,r,n);else if(e.tag===19)cg(e,r,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break e;for(;e.sibling===null;){if(e.return===null||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(d){case"forwards":for(r=n.child,d=null;r!==null;)e=r.alternate,e!==null&&el(e)===null&&(d=r),r=r.sibling;r=d,r===null?(d=n.child,n.child=null):(d=r.sibling,r.sibling=null),kd(n,!1,d,r,h,o);break;case"backwards":case"unstable_legacy-backwards":for(r=null,d=n.child,n.child=null;d!==null;){if(e=d.alternate,e!==null&&el(e)===null){n.child=d;break}e=d.sibling,d.sibling=r,r=d,d=e}kd(n,!0,r,null,h,o);break;case"together":kd(n,!1,null,null,void 0,o);break;default:n.memoizedState=null}return n.child}function Zn(e,n,r){if(e!==null&&(n.dependencies=e.dependencies),Ma|=n.lanes,(r&n.childLanes)===0)if(e!==null){if(Qs(e,n,r,!1),(r&n.childLanes)===0)return null}else return null;if(e!==null&&n.child!==e.child)throw Error(i(153));if(n.child!==null){for(e=n.child,r=Vn(e,e.pendingProps),n.child=r,r.return=n;e.sibling!==null;)e=e.sibling,r=r.sibling=Vn(e,e.pendingProps),r.return=n;r.sibling=null}return n.child}function Rd(e,n){return(e.lanes&n)!==0?!0:(e=e.dependencies,!!(e!==null&&Io(e)))}function S2(e,n,r){switch(n.tag){case 3:le(n,n.stateNode.containerInfo),wa(n,st,e.memoizedState.cache),rs();break;case 27:case 5:we(n);break;case 4:le(n,n.stateNode.containerInfo);break;case 10:wa(n,n.type,n.memoizedProps.value);break;case 31:if(n.memoizedState!==null)return n.flags|=128,ad(n),null;break;case 13:var o=n.memoizedState;if(o!==null)return o.dehydrated!==null?(Ea(n),n.flags|=128,null):(r&n.child.childLanes)!==0?lg(e,n,r):(Ea(n),e=Zn(e,n,r),e!==null?e.sibling:null);Ea(n);break;case 19:var d=(e.flags&128)!==0;if(o=(r&n.childLanes)!==0,o||(Qs(e,n,r,!1),o=(r&n.childLanes)!==0),d){if(o)return ug(e,n,r);n.flags|=128}if(d=n.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),ee(tt,tt.current),o)break;return null;case 22:return n.lanes=0,ng(e,n,r,n.pendingProps);case 24:wa(n,st,e.memoizedState.cache)}return Zn(e,n,r)}function dg(e,n,r){if(e!==null)if(e.memoizedProps!==n.pendingProps)it=!0;else{if(!Rd(e,r)&&(n.flags&128)===0)return it=!1,S2(e,n,r);it=(e.flags&131072)!==0}else it=!1,De&&(n.flags&1048576)!==0&&Ym(n,si,n.index);switch(n.lanes=0,n.tag){case 16:e:{var o=n.pendingProps;if(e=cs(n.elementType),n.type=e,typeof e=="function")Hu(e)?(o=hs(e,o),n.tag=1,n=ig(null,n,e,o,r)):(n.tag=0,n=Ed(null,n,e,o,r));else{if(e!=null){var d=e.$$typeof;if(d===k){n.tag=11,n=Jp(null,n,e,o,r);break e}else if(d===M){n.tag=14,n=eg(null,n,e,o,r);break e}}throw n=$(e)||e,Error(i(306,n,""))}}return n;case 0:return Ed(e,n,n.type,n.pendingProps,r);case 1:return o=n.type,d=hs(o,n.pendingProps),ig(e,n,o,d,r);case 3:e:{if(le(n,n.stateNode.containerInfo),e===null)throw Error(i(387));o=n.pendingProps;var h=n.memoizedState;d=h.element,Ku(e,n),fi(n,o,null,r);var v=n.memoizedState;if(o=v.cache,wa(n,st,o),o!==h.cache&&Iu(n,[st],r,!0),di(),o=v.element,h.isDehydrated)if(h={element:o,isDehydrated:!1,cache:v.cache},n.updateQueue.baseState=h,n.memoizedState=h,n.flags&256){n=og(e,n,o,r);break e}else if(o!==d){d=Wt(Error(i(424)),n),ri(d),n=og(e,n,o,r);break e}else for(e=n.stateNode.containerInfo,e.nodeType===9?e=e.body:e=e.nodeName==="HTML"?e.ownerDocument.body:e,Ie=nn(e.firstChild),gt=n,De=!0,ba=null,en=!0,r=np(n,null,o,r),n.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(rs(),o===d){n=Zn(e,n,r);break e}yt(e,n,o,r)}n=n.child}return n;case 26:return dl(e,n),e===null?(r=S0(n.type,null,n.pendingProps,null))?n.memoizedState=r:De||(r=n.type,e=n.pendingProps,o=Tl(ue.current).createElement(r),o[dt]=n,o[vt]=e,bt(o,r,e),at(o),n.stateNode=o):n.memoizedState=S0(n.type,e.memoizedProps,n.pendingProps,e.memoizedState),null;case 27:return we(n),e===null&&De&&(o=n.stateNode=b0(n.type,n.pendingProps,ue.current),gt=n,en=!0,d=Ie,za(n.type)?(ff=d,Ie=nn(o.firstChild)):Ie=d),yt(e,n,n.pendingProps.children,r),dl(e,n),e===null&&(n.flags|=4194304),n.child;case 5:return e===null&&De&&((d=o=Ie)&&(o=K2(o,n.type,n.pendingProps,en),o!==null?(n.stateNode=o,gt=n,Ie=nn(o.firstChild),en=!1,d=!0):d=!1),d||va(n)),we(n),d=n.type,h=n.pendingProps,v=e!==null?e.memoizedProps:null,o=h.children,of(d,h)?o=null:v!==null&&of(d,v)&&(n.flags|=32),n.memoizedState!==null&&(d=rd(e,n,h2,null,null,r),Ri._currentValue=d),dl(e,n),yt(e,n,o,r),n.child;case 6:return e===null&&De&&((e=r=Ie)&&(r=J2(r,n.pendingProps,en),r!==null?(n.stateNode=r,gt=n,Ie=null,e=!0):e=!1),e||va(n)),null;case 13:return lg(e,n,r);case 4:return le(n,n.stateNode.containerInfo),o=n.pendingProps,e===null?n.child=ds(n,null,o,r):yt(e,n,o,r),n.child;case 11:return Jp(e,n,n.type,n.pendingProps,r);case 7:return yt(e,n,n.pendingProps,r),n.child;case 8:return yt(e,n,n.pendingProps.children,r),n.child;case 12:return yt(e,n,n.pendingProps.children,r),n.child;case 10:return o=n.pendingProps,wa(n,n.type,o.value),yt(e,n,o.children,r),n.child;case 9:return d=n.type._context,o=n.pendingProps.children,os(n),d=xt(d),o=o(d),n.flags|=1,yt(e,n,o,r),n.child;case 14:return eg(e,n,n.type,n.pendingProps,r);case 15:return tg(e,n,n.type,n.pendingProps,r);case 19:return ug(e,n,r);case 31:return w2(e,n,r);case 22:return ng(e,n,r,n.pendingProps);case 24:return os(n),o=xt(st),e===null?(d=Qu(),d===null&&(d=Xe,h=Pu(),d.pooledCache=h,h.refCount++,h!==null&&(d.pooledCacheLanes|=r),d=h),n.memoizedState={parent:o,cache:d},Wu(n),wa(n,st,d)):((e.lanes&r)!==0&&(Ku(e,n),fi(n,null,null,r),di()),d=e.memoizedState,h=n.memoizedState,d.parent!==o?(d={parent:o,cache:o},n.memoizedState=d,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=d),wa(n,st,o)):(o=h.cache,wa(n,st,o),o!==d.cache&&Iu(n,[st],r,!0))),yt(e,n,n.pendingProps.children,r),n.child;case 29:throw n.pendingProps}throw Error(i(156,n.tag))}function Qn(e){e.flags|=4}function Dd(e,n,r,o,d){if((n=(e.mode&32)!==0)&&(n=!1),n){if(e.flags|=16777216,(d&335544128)===d)if(e.stateNode.complete)e.flags|=8192;else if(Lg())e.flags|=8192;else throw us=Fo,Fu}else e.flags&=-16777217}function fg(e,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!C0(n))if(Lg())e.flags|=8192;else throw us=Fo,Fu}function hl(e,n){n!==null&&(e.flags|=4),e.flags&16384&&(n=e.tag!==22?bo():536870912,e.lanes|=n,or|=n)}function yi(e,n){if(!De)switch(e.tailMode){case"hidden":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var o=null;r!==null;)r.alternate!==null&&(o=r),r=r.sibling;o===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:o.sibling=null}}function Pe(e){var n=e.alternate!==null&&e.alternate.child===e.child,r=0,o=0;if(n)for(var d=e.child;d!==null;)r|=d.lanes|d.childLanes,o|=d.subtreeFlags&65011712,o|=d.flags&65011712,d.return=e,d=d.sibling;else for(d=e.child;d!==null;)r|=d.lanes|d.childLanes,o|=d.subtreeFlags,o|=d.flags,d.return=e,d=d.sibling;return e.subtreeFlags|=o,e.childLanes=r,n}function N2(e,n,r){var o=n.pendingProps;switch(qu(n),n.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Pe(n),null;case 1:return Pe(n),null;case 3:return r=n.stateNode,o=null,e!==null&&(o=e.memoizedState.cache),n.memoizedState.cache!==o&&(n.flags|=2048),Gn(st),de(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Zs(n)?Qn(n):e===null||e.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,Yu())),Pe(n),null;case 26:var d=n.type,h=n.memoizedState;return e===null?(Qn(n),h!==null?(Pe(n),fg(n,h)):(Pe(n),Dd(n,d,null,o,r))):h?h!==e.memoizedState?(Qn(n),Pe(n),fg(n,h)):(Pe(n),n.flags&=-16777217):(e=e.memoizedProps,e!==o&&Qn(n),Pe(n),Dd(n,d,e,o,r)),null;case 27:if(be(n),r=ue.current,d=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==o&&Qn(n);else{if(!o){if(n.stateNode===null)throw Error(i(166));return Pe(n),null}e=H.current,Zs(n)?Gm(n):(e=b0(d,o,r),n.stateNode=e,Qn(n))}return Pe(n),null;case 5:if(be(n),d=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==o&&Qn(n);else{if(!o){if(n.stateNode===null)throw Error(i(166));return Pe(n),null}if(h=H.current,Zs(n))Gm(n);else{var v=Tl(ue.current);switch(h){case 1:h=v.createElementNS("http://www.w3.org/2000/svg",d);break;case 2:h=v.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;default:switch(d){case"svg":h=v.createElementNS("http://www.w3.org/2000/svg",d);break;case"math":h=v.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;case"script":h=v.createElement("div"),h.innerHTML="<script><\/script>",h=h.removeChild(h.firstChild);break;case"select":h=typeof o.is=="string"?v.createElement("select",{is:o.is}):v.createElement("select"),o.multiple?h.multiple=!0:o.size&&(h.size=o.size);break;default:h=typeof o.is=="string"?v.createElement(d,{is:o.is}):v.createElement(d)}}h[dt]=n,h[vt]=o;e:for(v=n.child;v!==null;){if(v.tag===5||v.tag===6)h.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===n)break e;for(;v.sibling===null;){if(v.return===null||v.return===n)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}n.stateNode=h;e:switch(bt(h,d,o),d){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}o&&Qn(n)}}return Pe(n),Dd(n,n.type,e===null?null:e.memoizedProps,n.pendingProps,r),null;case 6:if(e&&n.stateNode!=null)e.memoizedProps!==o&&Qn(n);else{if(typeof o!="string"&&n.stateNode===null)throw Error(i(166));if(e=ue.current,Zs(n)){if(e=n.stateNode,r=n.memoizedProps,o=null,d=gt,d!==null)switch(d.tag){case 27:case 5:o=d.memoizedProps}e[dt]=n,e=!!(e.nodeValue===r||o!==null&&o.suppressHydrationWarning===!0||l0(e.nodeValue,r)),e||va(n,!0)}else e=Tl(e).createTextNode(o),e[dt]=n,n.stateNode=e}return Pe(n),null;case 31:if(r=n.memoizedState,e===null||e.memoizedState!==null){if(o=Zs(n),r!==null){if(e===null){if(!o)throw Error(i(318));if(e=n.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(i(557));e[dt]=n}else rs(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;Pe(n),e=!1}else r=Yu(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=r),e=!0;if(!e)return n.flags&256?($t(n),n):($t(n),null);if((n.flags&128)!==0)throw Error(i(558))}return Pe(n),null;case 13:if(o=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(d=Zs(n),o!==null&&o.dehydrated!==null){if(e===null){if(!d)throw Error(i(318));if(d=n.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(i(317));d[dt]=n}else rs(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;Pe(n),d=!1}else d=Yu(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=d),d=!0;if(!d)return n.flags&256?($t(n),n):($t(n),null)}return $t(n),(n.flags&128)!==0?(n.lanes=r,n):(r=o!==null,e=e!==null&&e.memoizedState!==null,r&&(o=n.child,d=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(d=o.alternate.memoizedState.cachePool.pool),h=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(h=o.memoizedState.cachePool.pool),h!==d&&(o.flags|=2048)),r!==e&&r&&(n.child.flags|=8192),hl(n,n.updateQueue),Pe(n),null);case 4:return de(),e===null&&tf(n.stateNode.containerInfo),Pe(n),null;case 10:return Gn(n.type),Pe(n),null;case 19:if(X(tt),o=n.memoizedState,o===null)return Pe(n),null;if(d=(n.flags&128)!==0,h=o.rendering,h===null)if(d)yi(o,!1);else{if(et!==0||e!==null&&(e.flags&128)!==0)for(e=n.child;e!==null;){if(h=el(e),h!==null){for(n.flags|=128,yi(o,!1),e=h.updateQueue,n.updateQueue=e,hl(n,e),n.subtreeFlags=0,e=r,r=n.child;r!==null;)$m(r,e),r=r.sibling;return ee(tt,tt.current&1|2),De&&Yn(n,o.treeForkCount),n.child}e=e.sibling}o.tail!==null&&Ge()>yl&&(n.flags|=128,d=!0,yi(o,!1),n.lanes=4194304)}else{if(!d)if(e=el(h),e!==null){if(n.flags|=128,d=!0,e=e.updateQueue,n.updateQueue=e,hl(n,e),yi(o,!0),o.tail===null&&o.tailMode==="hidden"&&!h.alternate&&!De)return Pe(n),null}else 2*Ge()-o.renderingStartTime>yl&&r!==536870912&&(n.flags|=128,d=!0,yi(o,!1),n.lanes=4194304);o.isBackwards?(h.sibling=n.child,n.child=h):(e=o.last,e!==null?e.sibling=h:n.child=h,o.last=h)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=Ge(),e.sibling=null,r=tt.current,ee(tt,d?r&1|2:r&1),De&&Yn(n,o.treeForkCount),e):(Pe(n),null);case 22:case 23:return $t(n),nd(),o=n.memoizedState!==null,e!==null?e.memoizedState!==null!==o&&(n.flags|=8192):o&&(n.flags|=8192),o?(r&536870912)!==0&&(n.flags&128)===0&&(Pe(n),n.subtreeFlags&6&&(n.flags|=8192)):Pe(n),r=n.updateQueue,r!==null&&hl(n,r.retryQueue),r=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(r=e.memoizedState.cachePool.pool),o=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),o!==r&&(n.flags|=2048),e!==null&&X(ls),null;case 24:return r=null,e!==null&&(r=e.memoizedState.cache),n.memoizedState.cache!==r&&(n.flags|=2048),Gn(st),Pe(n),null;case 25:return null;case 30:return null}throw Error(i(156,n.tag))}function j2(e,n){switch(qu(n),n.tag){case 1:return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return Gn(st),de(),e=n.flags,(e&65536)!==0&&(e&128)===0?(n.flags=e&-65537|128,n):null;case 26:case 27:case 5:return be(n),null;case 31:if(n.memoizedState!==null){if($t(n),n.alternate===null)throw Error(i(340));rs()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 13:if($t(n),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(i(340));rs()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return X(tt),null;case 4:return de(),null;case 10:return Gn(n.type),null;case 22:case 23:return $t(n),nd(),e!==null&&X(ls),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 24:return Gn(st),null;case 25:return null;default:return null}}function hg(e,n){switch(qu(n),n.tag){case 3:Gn(st),de();break;case 26:case 27:case 5:be(n);break;case 4:de();break;case 31:n.memoizedState!==null&&$t(n);break;case 13:$t(n);break;case 19:X(tt);break;case 10:Gn(n.type);break;case 22:case 23:$t(n),nd(),e!==null&&X(ls);break;case 24:Gn(st)}}function bi(e,n){try{var r=n.updateQueue,o=r!==null?r.lastEffect:null;if(o!==null){var d=o.next;r=d;do{if((r.tag&e)===e){o=void 0;var h=r.create,v=r.inst;o=h(),v.destroy=o}r=r.next}while(r!==d)}}catch(T){Ue(n,n.return,T)}}function Ca(e,n,r){try{var o=n.updateQueue,d=o!==null?o.lastEffect:null;if(d!==null){var h=d.next;o=h;do{if((o.tag&e)===e){var v=o.inst,T=v.destroy;if(T!==void 0){v.destroy=void 0,d=n;var q=r,K=T;try{K()}catch(se){Ue(d,q,se)}}}o=o.next}while(o!==h)}}catch(se){Ue(n,n.return,se)}}function mg(e){var n=e.updateQueue;if(n!==null){var r=e.stateNode;try{sp(n,r)}catch(o){Ue(e,e.return,o)}}}function pg(e,n,r){r.props=hs(e.type,e.memoizedProps),r.state=e.memoizedState;try{r.componentWillUnmount()}catch(o){Ue(e,n,o)}}function vi(e,n){try{var r=e.ref;if(r!==null){switch(e.tag){case 26:case 27:case 5:var o=e.stateNode;break;case 30:o=e.stateNode;break;default:o=e.stateNode}typeof r=="function"?e.refCleanup=r(o):r.current=o}}catch(d){Ue(e,n,d)}}function jn(e,n){var r=e.ref,o=e.refCleanup;if(r!==null)if(typeof o=="function")try{o()}catch(d){Ue(e,n,d)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof r=="function")try{r(null)}catch(d){Ue(e,n,d)}else r.current=null}function gg(e){var n=e.type,r=e.memoizedProps,o=e.stateNode;try{e:switch(n){case"button":case"input":case"select":case"textarea":r.autoFocus&&o.focus();break e;case"img":r.src?o.src=r.src:r.srcSet&&(o.srcset=r.srcSet)}}catch(d){Ue(e,e.return,d)}}function zd(e,n,r){try{var o=e.stateNode;I2(o,e.type,r,n),o[vt]=n}catch(d){Ue(e,e.return,d)}}function xg(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&za(e.type)||e.tag===4}function Od(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||xg(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&za(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Bd(e,n,r){var o=e.tag;if(o===5||o===6)e=e.stateNode,n?(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r).insertBefore(e,n):(n=r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,n.appendChild(e),r=r._reactRootContainer,r!=null||n.onclick!==null||(n.onclick=$n));else if(o!==4&&(o===27&&za(e.type)&&(r=e.stateNode,n=null),e=e.child,e!==null))for(Bd(e,n,r),e=e.sibling;e!==null;)Bd(e,n,r),e=e.sibling}function ml(e,n,r){var o=e.tag;if(o===5||o===6)e=e.stateNode,n?r.insertBefore(e,n):r.appendChild(e);else if(o!==4&&(o===27&&za(e.type)&&(r=e.stateNode),e=e.child,e!==null))for(ml(e,n,r),e=e.sibling;e!==null;)ml(e,n,r),e=e.sibling}function yg(e){var n=e.stateNode,r=e.memoizedProps;try{for(var o=e.type,d=n.attributes;d.length;)n.removeAttributeNode(d[0]);bt(n,o,r),n[dt]=e,n[vt]=r}catch(h){Ue(e,e.return,h)}}var Fn=!1,ot=!1,Hd=!1,bg=typeof WeakSet=="function"?WeakSet:Set,ht=null;function E2(e,n){if(e=e.containerInfo,sf=Ol,e=km(e),Au(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var o=r.getSelection&&r.getSelection();if(o&&o.rangeCount!==0){r=o.anchorNode;var d=o.anchorOffset,h=o.focusNode;o=o.focusOffset;try{r.nodeType,h.nodeType}catch{r=null;break e}var v=0,T=-1,q=-1,K=0,se=0,ie=e,J=null;t:for(;;){for(var te;ie!==r||d!==0&&ie.nodeType!==3||(T=v+d),ie!==h||o!==0&&ie.nodeType!==3||(q=v+o),ie.nodeType===3&&(v+=ie.nodeValue.length),(te=ie.firstChild)!==null;)J=ie,ie=te;for(;;){if(ie===e)break t;if(J===r&&++K===d&&(T=v),J===h&&++se===o&&(q=v),(te=ie.nextSibling)!==null)break;ie=J,J=ie.parentNode}ie=te}r=T===-1||q===-1?null:{start:T,end:q}}else r=null}r=r||{start:0,end:0}}else r=null;for(rf={focusedElem:e,selectionRange:r},Ol=!1,ht=n;ht!==null;)if(n=ht,e=n.child,(n.subtreeFlags&1028)!==0&&e!==null)e.return=n,ht=e;else for(;ht!==null;){switch(n=ht,h=n.alternate,e=n.flags,n.tag){case 0:if((e&4)!==0&&(e=n.updateQueue,e=e!==null?e.events:null,e!==null))for(r=0;r<e.length;r++)d=e[r],d.ref.impl=d.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&h!==null){e=void 0,r=n,d=h.memoizedProps,h=h.memoizedState,o=r.stateNode;try{var fe=hs(r.type,d);e=o.getSnapshotBeforeUpdate(fe,h),o.__reactInternalSnapshotBeforeUpdate=e}catch(ve){Ue(r,r.return,ve)}}break;case 3:if((e&1024)!==0){if(e=n.stateNode.containerInfo,r=e.nodeType,r===9)cf(e);else if(r===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":cf(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(i(163))}if(e=n.sibling,e!==null){e.return=n.return,ht=e;break}ht=n.return}}function vg(e,n,r){var o=r.flags;switch(r.tag){case 0:case 11:case 15:Kn(e,r),o&4&&bi(5,r);break;case 1:if(Kn(e,r),o&4)if(e=r.stateNode,n===null)try{e.componentDidMount()}catch(v){Ue(r,r.return,v)}else{var d=hs(r.type,n.memoizedProps);n=n.memoizedState;try{e.componentDidUpdate(d,n,e.__reactInternalSnapshotBeforeUpdate)}catch(v){Ue(r,r.return,v)}}o&64&&mg(r),o&512&&vi(r,r.return);break;case 3:if(Kn(e,r),o&64&&(e=r.updateQueue,e!==null)){if(n=null,r.child!==null)switch(r.child.tag){case 27:case 5:n=r.child.stateNode;break;case 1:n=r.child.stateNode}try{sp(e,n)}catch(v){Ue(r,r.return,v)}}break;case 27:n===null&&o&4&&yg(r);case 26:case 5:Kn(e,r),n===null&&o&4&&gg(r),o&512&&vi(r,r.return);break;case 12:Kn(e,r);break;case 31:Kn(e,r),o&4&&Ng(e,r);break;case 13:Kn(e,r),o&4&&jg(e,r),o&64&&(e=r.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(r=z2.bind(null,r),ew(e,r))));break;case 22:if(o=r.memoizedState!==null||Fn,!o){n=n!==null&&n.memoizedState!==null||ot,d=Fn;var h=ot;Fn=o,(ot=n)&&!h?Jn(e,r,(r.subtreeFlags&8772)!==0):Kn(e,r),Fn=d,ot=h}break;case 30:break;default:Kn(e,r)}}function wg(e){var n=e.alternate;n!==null&&(e.alternate=null,wg(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&Ir(n)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Qe=null,At=!1;function Wn(e,n,r){for(r=r.child;r!==null;)Sg(e,n,r),r=r.sibling}function Sg(e,n,r){if(St&&typeof St.onCommitFiberUnmount=="function")try{St.onCommitFiberUnmount(Za,r)}catch{}switch(r.tag){case 26:ot||jn(r,n),Wn(e,n,r),r.memoizedState?r.memoizedState.count--:r.stateNode&&(r=r.stateNode,r.parentNode.removeChild(r));break;case 27:ot||jn(r,n);var o=Qe,d=At;za(r.type)&&(Qe=r.stateNode,At=!1),Wn(e,n,r),Mi(r.stateNode),Qe=o,At=d;break;case 5:ot||jn(r,n);case 6:if(o=Qe,d=At,Qe=null,Wn(e,n,r),Qe=o,At=d,Qe!==null)if(At)try{(Qe.nodeType===9?Qe.body:Qe.nodeName==="HTML"?Qe.ownerDocument.body:Qe).removeChild(r.stateNode)}catch(h){Ue(r,n,h)}else try{Qe.removeChild(r.stateNode)}catch(h){Ue(r,n,h)}break;case 18:Qe!==null&&(At?(e=Qe,m0(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,r.stateNode),pr(e)):m0(Qe,r.stateNode));break;case 4:o=Qe,d=At,Qe=r.stateNode.containerInfo,At=!0,Wn(e,n,r),Qe=o,At=d;break;case 0:case 11:case 14:case 15:Ca(2,r,n),ot||Ca(4,r,n),Wn(e,n,r);break;case 1:ot||(jn(r,n),o=r.stateNode,typeof o.componentWillUnmount=="function"&&pg(r,n,o)),Wn(e,n,r);break;case 21:Wn(e,n,r);break;case 22:ot=(o=ot)||r.memoizedState!==null,Wn(e,n,r),ot=o;break;default:Wn(e,n,r)}}function Ng(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{pr(e)}catch(r){Ue(n,n.return,r)}}}function jg(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{pr(e)}catch(r){Ue(n,n.return,r)}}function _2(e){switch(e.tag){case 31:case 13:case 19:var n=e.stateNode;return n===null&&(n=e.stateNode=new bg),n;case 22:return e=e.stateNode,n=e._retryCache,n===null&&(n=e._retryCache=new bg),n;default:throw Error(i(435,e.tag))}}function pl(e,n){var r=_2(e);n.forEach(function(o){if(!r.has(o)){r.add(o);var d=O2.bind(null,e,o);o.then(d,d)}})}function kt(e,n){var r=n.deletions;if(r!==null)for(var o=0;o<r.length;o++){var d=r[o],h=e,v=n,T=v;e:for(;T!==null;){switch(T.tag){case 27:if(za(T.type)){Qe=T.stateNode,At=!1;break e}break;case 5:Qe=T.stateNode,At=!1;break e;case 3:case 4:Qe=T.stateNode.containerInfo,At=!0;break e}T=T.return}if(Qe===null)throw Error(i(160));Sg(h,v,d),Qe=null,At=!1,h=d.alternate,h!==null&&(h.return=null),d.return=null}if(n.subtreeFlags&13886)for(n=n.child;n!==null;)Eg(n,e),n=n.sibling}var dn=null;function Eg(e,n){var r=e.alternate,o=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:kt(n,e),Rt(e),o&4&&(Ca(3,e,e.return),bi(3,e),Ca(5,e,e.return));break;case 1:kt(n,e),Rt(e),o&512&&(ot||r===null||jn(r,r.return)),o&64&&Fn&&(e=e.updateQueue,e!==null&&(o=e.callbacks,o!==null&&(r=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=r===null?o:r.concat(o))));break;case 26:var d=dn;if(kt(n,e),Rt(e),o&512&&(ot||r===null||jn(r,r.return)),o&4){var h=r!==null?r.memoizedState:null;if(o=e.memoizedState,r===null)if(o===null)if(e.stateNode===null){e:{o=e.type,r=e.memoizedProps,d=d.ownerDocument||d;t:switch(o){case"title":h=d.getElementsByTagName("title")[0],(!h||h[Wa]||h[dt]||h.namespaceURI==="http://www.w3.org/2000/svg"||h.hasAttribute("itemprop"))&&(h=d.createElement(o),d.head.insertBefore(h,d.querySelector("head > title"))),bt(h,o,r),h[dt]=e,at(h),o=h;break e;case"link":var v=E0("link","href",d).get(o+(r.href||""));if(v){for(var T=0;T<v.length;T++)if(h=v[T],h.getAttribute("href")===(r.href==null||r.href===""?null:r.href)&&h.getAttribute("rel")===(r.rel==null?null:r.rel)&&h.getAttribute("title")===(r.title==null?null:r.title)&&h.getAttribute("crossorigin")===(r.crossOrigin==null?null:r.crossOrigin)){v.splice(T,1);break t}}h=d.createElement(o),bt(h,o,r),d.head.appendChild(h);break;case"meta":if(v=E0("meta","content",d).get(o+(r.content||""))){for(T=0;T<v.length;T++)if(h=v[T],h.getAttribute("content")===(r.content==null?null:""+r.content)&&h.getAttribute("name")===(r.name==null?null:r.name)&&h.getAttribute("property")===(r.property==null?null:r.property)&&h.getAttribute("http-equiv")===(r.httpEquiv==null?null:r.httpEquiv)&&h.getAttribute("charset")===(r.charSet==null?null:r.charSet)){v.splice(T,1);break t}}h=d.createElement(o),bt(h,o,r),d.head.appendChild(h);break;default:throw Error(i(468,o))}h[dt]=e,at(h),o=h}e.stateNode=o}else _0(d,e.type,e.stateNode);else e.stateNode=j0(d,o,e.memoizedProps);else h!==o?(h===null?r.stateNode!==null&&(r=r.stateNode,r.parentNode.removeChild(r)):h.count--,o===null?_0(d,e.type,e.stateNode):j0(d,o,e.memoizedProps)):o===null&&e.stateNode!==null&&zd(e,e.memoizedProps,r.memoizedProps)}break;case 27:kt(n,e),Rt(e),o&512&&(ot||r===null||jn(r,r.return)),r!==null&&o&4&&zd(e,e.memoizedProps,r.memoizedProps);break;case 5:if(kt(n,e),Rt(e),o&512&&(ot||r===null||jn(r,r.return)),e.flags&32){d=e.stateNode;try{Ls(d,"")}catch(fe){Ue(e,e.return,fe)}}o&4&&e.stateNode!=null&&(d=e.memoizedProps,zd(e,d,r!==null?r.memoizedProps:d)),o&1024&&(Hd=!0);break;case 6:if(kt(n,e),Rt(e),o&4){if(e.stateNode===null)throw Error(i(162));o=e.memoizedProps,r=e.stateNode;try{r.nodeValue=o}catch(fe){Ue(e,e.return,fe)}}break;case 3:if(kl=null,d=dn,dn=Ml(n.containerInfo),kt(n,e),dn=d,Rt(e),o&4&&r!==null&&r.memoizedState.isDehydrated)try{pr(n.containerInfo)}catch(fe){Ue(e,e.return,fe)}Hd&&(Hd=!1,_g(e));break;case 4:o=dn,dn=Ml(e.stateNode.containerInfo),kt(n,e),Rt(e),dn=o;break;case 12:kt(n,e),Rt(e);break;case 31:kt(n,e),Rt(e),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,pl(e,o)));break;case 13:kt(n,e),Rt(e),e.child.flags&8192&&e.memoizedState!==null!=(r!==null&&r.memoizedState!==null)&&(xl=Ge()),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,pl(e,o)));break;case 22:d=e.memoizedState!==null;var q=r!==null&&r.memoizedState!==null,K=Fn,se=ot;if(Fn=K||d,ot=se||q,kt(n,e),ot=se,Fn=K,Rt(e),o&8192)e:for(n=e.stateNode,n._visibility=d?n._visibility&-2:n._visibility|1,d&&(r===null||q||Fn||ot||ms(e)),r=null,n=e;;){if(n.tag===5||n.tag===26){if(r===null){q=r=n;try{if(h=q.stateNode,d)v=h.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{T=q.stateNode;var ie=q.memoizedProps.style,J=ie!=null&&ie.hasOwnProperty("display")?ie.display:null;T.style.display=J==null||typeof J=="boolean"?"":(""+J).trim()}}catch(fe){Ue(q,q.return,fe)}}}else if(n.tag===6){if(r===null){q=n;try{q.stateNode.nodeValue=d?"":q.memoizedProps}catch(fe){Ue(q,q.return,fe)}}}else if(n.tag===18){if(r===null){q=n;try{var te=q.stateNode;d?p0(te,!0):p0(q.stateNode,!1)}catch(fe){Ue(q,q.return,fe)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===e)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;r===n&&(r=null),n=n.return}r===n&&(r=null),n.sibling.return=n.return,n=n.sibling}o&4&&(o=e.updateQueue,o!==null&&(r=o.retryQueue,r!==null&&(o.retryQueue=null,pl(e,r))));break;case 19:kt(n,e),Rt(e),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,pl(e,o)));break;case 30:break;case 21:break;default:kt(n,e),Rt(e)}}function Rt(e){var n=e.flags;if(n&2){try{for(var r,o=e.return;o!==null;){if(xg(o)){r=o;break}o=o.return}if(r==null)throw Error(i(160));switch(r.tag){case 27:var d=r.stateNode,h=Od(e);ml(e,h,d);break;case 5:var v=r.stateNode;r.flags&32&&(Ls(v,""),r.flags&=-33);var T=Od(e);ml(e,T,v);break;case 3:case 4:var q=r.stateNode.containerInfo,K=Od(e);Bd(e,K,q);break;default:throw Error(i(161))}}catch(se){Ue(e,e.return,se)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function _g(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var n=e;_g(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),e=e.sibling}}function Kn(e,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)vg(e,n.alternate,n),n=n.sibling}function ms(e){for(e=e.child;e!==null;){var n=e;switch(n.tag){case 0:case 11:case 14:case 15:Ca(4,n,n.return),ms(n);break;case 1:jn(n,n.return);var r=n.stateNode;typeof r.componentWillUnmount=="function"&&pg(n,n.return,r),ms(n);break;case 27:Mi(n.stateNode);case 26:case 5:jn(n,n.return),ms(n);break;case 22:n.memoizedState===null&&ms(n);break;case 30:ms(n);break;default:ms(n)}e=e.sibling}}function Jn(e,n,r){for(r=r&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var o=n.alternate,d=e,h=n,v=h.flags;switch(h.tag){case 0:case 11:case 15:Jn(d,h,r),bi(4,h);break;case 1:if(Jn(d,h,r),o=h,d=o.stateNode,typeof d.componentDidMount=="function")try{d.componentDidMount()}catch(K){Ue(o,o.return,K)}if(o=h,d=o.updateQueue,d!==null){var T=o.stateNode;try{var q=d.shared.hiddenCallbacks;if(q!==null)for(d.shared.hiddenCallbacks=null,d=0;d<q.length;d++)ap(q[d],T)}catch(K){Ue(o,o.return,K)}}r&&v&64&&mg(h),vi(h,h.return);break;case 27:yg(h);case 26:case 5:Jn(d,h,r),r&&o===null&&v&4&&gg(h),vi(h,h.return);break;case 12:Jn(d,h,r);break;case 31:Jn(d,h,r),r&&v&4&&Ng(d,h);break;case 13:Jn(d,h,r),r&&v&4&&jg(d,h);break;case 22:h.memoizedState===null&&Jn(d,h,r),vi(h,h.return);break;case 30:break;default:Jn(d,h,r)}n=n.sibling}}function Ld(e,n){var r=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(r=e.memoizedState.cachePool.pool),e=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(e=n.memoizedState.cachePool.pool),e!==r&&(e!=null&&e.refCount++,r!=null&&ii(r))}function Ud(e,n){e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&ii(e))}function fn(e,n,r,o){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Cg(e,n,r,o),n=n.sibling}function Cg(e,n,r,o){var d=n.flags;switch(n.tag){case 0:case 11:case 15:fn(e,n,r,o),d&2048&&bi(9,n);break;case 1:fn(e,n,r,o);break;case 3:fn(e,n,r,o),d&2048&&(e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&ii(e)));break;case 12:if(d&2048){fn(e,n,r,o),e=n.stateNode;try{var h=n.memoizedProps,v=h.id,T=h.onPostCommit;typeof T=="function"&&T(v,n.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(q){Ue(n,n.return,q)}}else fn(e,n,r,o);break;case 31:fn(e,n,r,o);break;case 13:fn(e,n,r,o);break;case 23:break;case 22:h=n.stateNode,v=n.alternate,n.memoizedState!==null?h._visibility&2?fn(e,n,r,o):wi(e,n):h._visibility&2?fn(e,n,r,o):(h._visibility|=2,sr(e,n,r,o,(n.subtreeFlags&10256)!==0||!1)),d&2048&&Ld(v,n);break;case 24:fn(e,n,r,o),d&2048&&Ud(n.alternate,n);break;default:fn(e,n,r,o)}}function sr(e,n,r,o,d){for(d=d&&((n.subtreeFlags&10256)!==0||!1),n=n.child;n!==null;){var h=e,v=n,T=r,q=o,K=v.flags;switch(v.tag){case 0:case 11:case 15:sr(h,v,T,q,d),bi(8,v);break;case 23:break;case 22:var se=v.stateNode;v.memoizedState!==null?se._visibility&2?sr(h,v,T,q,d):wi(h,v):(se._visibility|=2,sr(h,v,T,q,d)),d&&K&2048&&Ld(v.alternate,v);break;case 24:sr(h,v,T,q,d),d&&K&2048&&Ud(v.alternate,v);break;default:sr(h,v,T,q,d)}n=n.sibling}}function wi(e,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var r=e,o=n,d=o.flags;switch(o.tag){case 22:wi(r,o),d&2048&&Ld(o.alternate,o);break;case 24:wi(r,o),d&2048&&Ud(o.alternate,o);break;default:wi(r,o)}n=n.sibling}}var Si=8192;function rr(e,n,r){if(e.subtreeFlags&Si)for(e=e.child;e!==null;)Tg(e,n,r),e=e.sibling}function Tg(e,n,r){switch(e.tag){case 26:rr(e,n,r),e.flags&Si&&e.memoizedState!==null&&fw(r,dn,e.memoizedState,e.memoizedProps);break;case 5:rr(e,n,r);break;case 3:case 4:var o=dn;dn=Ml(e.stateNode.containerInfo),rr(e,n,r),dn=o;break;case 22:e.memoizedState===null&&(o=e.alternate,o!==null&&o.memoizedState!==null?(o=Si,Si=16777216,rr(e,n,r),Si=o):rr(e,n,r));break;default:rr(e,n,r)}}function Mg(e){var n=e.alternate;if(n!==null&&(e=n.child,e!==null)){n.child=null;do n=e.sibling,e.sibling=null,e=n;while(e!==null)}}function Ni(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var r=0;r<n.length;r++){var o=n[r];ht=o,kg(o,e)}Mg(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Ag(e),e=e.sibling}function Ag(e){switch(e.tag){case 0:case 11:case 15:Ni(e),e.flags&2048&&Ca(9,e,e.return);break;case 3:Ni(e);break;case 12:Ni(e);break;case 22:var n=e.stateNode;e.memoizedState!==null&&n._visibility&2&&(e.return===null||e.return.tag!==13)?(n._visibility&=-3,gl(e)):Ni(e);break;default:Ni(e)}}function gl(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var r=0;r<n.length;r++){var o=n[r];ht=o,kg(o,e)}Mg(e)}for(e=e.child;e!==null;){switch(n=e,n.tag){case 0:case 11:case 15:Ca(8,n,n.return),gl(n);break;case 22:r=n.stateNode,r._visibility&2&&(r._visibility&=-3,gl(n));break;default:gl(n)}e=e.sibling}}function kg(e,n){for(;ht!==null;){var r=ht;switch(r.tag){case 0:case 11:case 15:Ca(8,r,n);break;case 23:case 22:if(r.memoizedState!==null&&r.memoizedState.cachePool!==null){var o=r.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:ii(r.memoizedState.cache)}if(o=r.child,o!==null)o.return=r,ht=o;else e:for(r=e;ht!==null;){o=ht;var d=o.sibling,h=o.return;if(wg(o),o===r){ht=null;break e}if(d!==null){d.return=h,ht=d;break e}ht=h}}}var C2={getCacheForType:function(e){var n=xt(st),r=n.data.get(e);return r===void 0&&(r=e(),n.data.set(e,r)),r},cacheSignal:function(){return xt(st).controller.signal}},T2=typeof WeakMap=="function"?WeakMap:Map,He=0,Xe=null,Me=null,ke=0,Le=0,qt=null,Ta=!1,ir=!1,$d=!1,ea=0,et=0,Ma=0,ps=0,qd=0,Vt=0,or=0,ji=null,Dt=null,Vd=!1,xl=0,Rg=0,yl=1/0,bl=null,Aa=null,ft=0,ka=null,lr=null,ta=0,Yd=0,Xd=null,Dg=null,Ei=0,Gd=null;function Yt(){return(He&2)!==0&&ke!==0?ke&-ke:O.T!==null?Wd():No()}function zg(){if(Vt===0)if((ke&536870912)===0||De){var e=ks;ks<<=1,(ks&3932160)===0&&(ks=262144),Vt=e}else Vt=536870912;return e=Ut.current,e!==null&&(e.flags|=32),Vt}function zt(e,n,r){(e===Xe&&(Le===2||Le===9)||e.cancelPendingCommit!==null)&&(cr(e,0),Ra(e,ke,Vt,!1)),Fa(e,r),((He&2)===0||e!==Xe)&&(e===Xe&&((He&2)===0&&(ps|=r),et===4&&Ra(e,ke,Vt,!1)),En(e))}function Og(e,n,r){if((He&6)!==0)throw Error(i(327));var o=!r&&(n&127)===0&&(n&e.expiredLanes)===0||Qa(e,n),d=o?k2(e,n):Pd(e,n,!0),h=o;do{if(d===0){ir&&!o&&Ra(e,n,0,!1);break}else{if(r=e.current.alternate,h&&!M2(r)){d=Pd(e,n,!1),h=!1;continue}if(d===2){if(h=n,e.errorRecoveryDisabledLanes&h)var v=0;else v=e.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){n=v;e:{var T=e;d=ji;var q=T.current.memoizedState.isDehydrated;if(q&&(cr(T,v).flags|=256),v=Pd(T,v,!1),v!==2){if($d&&!q){T.errorRecoveryDisabledLanes|=h,ps|=h,d=4;break e}h=Dt,Dt=d,h!==null&&(Dt===null?Dt=h:Dt.push.apply(Dt,h))}d=v}if(h=!1,d!==2)continue}}if(d===1){cr(e,0),Ra(e,n,0,!0);break}e:{switch(o=e,h=d,h){case 0:case 1:throw Error(i(345));case 4:if((n&4194048)!==n)break;case 6:Ra(o,n,Vt,!Ta);break e;case 2:Dt=null;break;case 3:case 5:break;default:throw Error(i(329))}if((n&62914560)===n&&(d=xl+300-Ge(),10<d)){if(Ra(o,n,Vt,!Ta),Ds(o,0,!0)!==0)break e;ta=n,o.timeoutHandle=f0(Bg.bind(null,o,r,Dt,bl,Vd,n,Vt,ps,or,Ta,h,"Throttled",-0,0),d);break e}Bg(o,r,Dt,bl,Vd,n,Vt,ps,or,Ta,h,null,-0,0)}}break}while(!0);En(e)}function Bg(e,n,r,o,d,h,v,T,q,K,se,ie,J,te){if(e.timeoutHandle=-1,ie=n.subtreeFlags,ie&8192||(ie&16785408)===16785408){ie={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:$n},Tg(n,h,ie);var fe=(h&62914560)===h?xl-Ge():(h&4194048)===h?Rg-Ge():0;if(fe=hw(ie,fe),fe!==null){ta=h,e.cancelPendingCommit=fe(Xg.bind(null,e,n,h,r,o,d,v,T,q,se,ie,null,J,te)),Ra(e,h,v,!K);return}}Xg(e,n,h,r,o,d,v,T,q)}function M2(e){for(var n=e;;){var r=n.tag;if((r===0||r===11||r===15)&&n.flags&16384&&(r=n.updateQueue,r!==null&&(r=r.stores,r!==null)))for(var o=0;o<r.length;o++){var d=r[o],h=d.getSnapshot;d=d.value;try{if(!Ht(h(),d))return!1}catch{return!1}}if(r=n.child,n.subtreeFlags&16384&&r!==null)r.return=n,n=r;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function Ra(e,n,r,o){n&=~qd,n&=~ps,e.suspendedLanes|=n,e.pingedLanes&=~n,o&&(e.warmLanes|=n),o=e.expirationTimes;for(var d=n;0<d;){var h=31-Nt(d),v=1<<h;o[h]=-1,d&=~v}r!==0&&vo(e,r,n)}function vl(){return(He&6)===0?(_i(0),!1):!0}function Id(){if(Me!==null){if(Le===0)var e=Me.return;else e=Me,Xn=is=null,ld(e),Js=null,li=0,e=Me;for(;e!==null;)hg(e.alternate,e),e=e.return;Me=null}}function cr(e,n){var r=e.timeoutHandle;r!==-1&&(e.timeoutHandle=-1,Q2(r)),r=e.cancelPendingCommit,r!==null&&(e.cancelPendingCommit=null,r()),ta=0,Id(),Xe=e,Me=r=Vn(e.current,null),ke=n,Le=0,qt=null,Ta=!1,ir=Qa(e,n),$d=!1,or=Vt=qd=ps=Ma=et=0,Dt=ji=null,Vd=!1,(n&8)!==0&&(n|=n&32);var o=e.entangledLanes;if(o!==0)for(e=e.entanglements,o&=n;0<o;){var d=31-Nt(o),h=1<<d;n|=e[d],o&=~h}return ea=n,qo(),r}function Hg(e,n){Ne=null,O.H=gi,n===Ks||n===Qo?(n=Jm(),Le=3):n===Fu?(n=Jm(),Le=4):Le=n===jd?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,qt=n,Me===null&&(et=1,cl(e,Wt(n,e.current)))}function Lg(){var e=Ut.current;return e===null?!0:(ke&4194048)===ke?tn===null:(ke&62914560)===ke||(ke&536870912)!==0?e===tn:!1}function Ug(){var e=O.H;return O.H=gi,e===null?gi:e}function $g(){var e=O.A;return O.A=C2,e}function wl(){et=4,Ta||(ke&4194048)!==ke&&Ut.current!==null||(ir=!0),(Ma&134217727)===0&&(ps&134217727)===0||Xe===null||Ra(Xe,ke,Vt,!1)}function Pd(e,n,r){var o=He;He|=2;var d=Ug(),h=$g();(Xe!==e||ke!==n)&&(bl=null,cr(e,n)),n=!1;var v=et;e:do try{if(Le!==0&&Me!==null){var T=Me,q=qt;switch(Le){case 8:Id(),v=6;break e;case 3:case 2:case 9:case 6:Ut.current===null&&(n=!0);var K=Le;if(Le=0,qt=null,ur(e,T,q,K),r&&ir){v=0;break e}break;default:K=Le,Le=0,qt=null,ur(e,T,q,K)}}A2(),v=et;break}catch(se){Hg(e,se)}while(!0);return n&&e.shellSuspendCounter++,Xn=is=null,He=o,O.H=d,O.A=h,Me===null&&(Xe=null,ke=0,qo()),v}function A2(){for(;Me!==null;)qg(Me)}function k2(e,n){var r=He;He|=2;var o=Ug(),d=$g();Xe!==e||ke!==n?(bl=null,yl=Ge()+500,cr(e,n)):ir=Qa(e,n);e:do try{if(Le!==0&&Me!==null){n=Me;var h=qt;t:switch(Le){case 1:Le=0,qt=null,ur(e,n,h,1);break;case 2:case 9:if(Wm(h)){Le=0,qt=null,Vg(n);break}n=function(){Le!==2&&Le!==9||Xe!==e||(Le=7),En(e)},h.then(n,n);break e;case 3:Le=7;break e;case 4:Le=5;break e;case 7:Wm(h)?(Le=0,qt=null,Vg(n)):(Le=0,qt=null,ur(e,n,h,7));break;case 5:var v=null;switch(Me.tag){case 26:v=Me.memoizedState;case 5:case 27:var T=Me;if(v?C0(v):T.stateNode.complete){Le=0,qt=null;var q=T.sibling;if(q!==null)Me=q;else{var K=T.return;K!==null?(Me=K,Sl(K)):Me=null}break t}}Le=0,qt=null,ur(e,n,h,5);break;case 6:Le=0,qt=null,ur(e,n,h,6);break;case 8:Id(),et=6;break e;default:throw Error(i(462))}}R2();break}catch(se){Hg(e,se)}while(!0);return Xn=is=null,O.H=o,O.A=d,He=r,Me!==null?0:(Xe=null,ke=0,qo(),et)}function R2(){for(;Me!==null&&!ln();)qg(Me)}function qg(e){var n=dg(e.alternate,e,ea);e.memoizedProps=e.pendingProps,n===null?Sl(e):Me=n}function Vg(e){var n=e,r=n.alternate;switch(n.tag){case 15:case 0:n=rg(r,n,n.pendingProps,n.type,void 0,ke);break;case 11:n=rg(r,n,n.pendingProps,n.type.render,n.ref,ke);break;case 5:ld(n);default:hg(r,n),n=Me=$m(n,ea),n=dg(r,n,ea)}e.memoizedProps=e.pendingProps,n===null?Sl(e):Me=n}function ur(e,n,r,o){Xn=is=null,ld(n),Js=null,li=0;var d=n.return;try{if(v2(e,d,n,r,ke)){et=1,cl(e,Wt(r,e.current)),Me=null;return}}catch(h){if(d!==null)throw Me=d,h;et=1,cl(e,Wt(r,e.current)),Me=null;return}n.flags&32768?(De||o===1?e=!0:ir||(ke&536870912)!==0?e=!1:(Ta=e=!0,(o===2||o===9||o===3||o===6)&&(o=Ut.current,o!==null&&o.tag===13&&(o.flags|=16384))),Yg(n,e)):Sl(n)}function Sl(e){var n=e;do{if((n.flags&32768)!==0){Yg(n,Ta);return}e=n.return;var r=N2(n.alternate,n,ea);if(r!==null){Me=r;return}if(n=n.sibling,n!==null){Me=n;return}Me=n=e}while(n!==null);et===0&&(et=5)}function Yg(e,n){do{var r=j2(e.alternate,e);if(r!==null){r.flags&=32767,Me=r;return}if(r=e.return,r!==null&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!n&&(e=e.sibling,e!==null)){Me=e;return}Me=e=r}while(e!==null);et=6,Me=null}function Xg(e,n,r,o,d,h,v,T,q){e.cancelPendingCommit=null;do Nl();while(ft!==0);if((He&6)!==0)throw Error(i(327));if(n!==null){if(n===e.current)throw Error(i(177));if(h=n.lanes|n.childLanes,h|=Ou,du(e,r,h,v,T,q),e===Xe&&(Me=Xe=null,ke=0),lr=n,ka=e,ta=r,Yd=h,Xd=d,Dg=o,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,B2(Pa,function(){return Qg(),null})):(e.callbackNode=null,e.callbackPriority=0),o=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||o){o=O.T,O.T=null,d=B.p,B.p=2,v=He,He|=4;try{E2(e,n,r)}finally{He=v,B.p=d,O.T=o}}ft=1,Gg(),Ig(),Pg()}}function Gg(){if(ft===1){ft=0;var e=ka,n=lr,r=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||r){r=O.T,O.T=null;var o=B.p;B.p=2;var d=He;He|=4;try{Eg(n,e);var h=rf,v=km(e.containerInfo),T=h.focusedElem,q=h.selectionRange;if(v!==T&&T&&T.ownerDocument&&Am(T.ownerDocument.documentElement,T)){if(q!==null&&Au(T)){var K=q.start,se=q.end;if(se===void 0&&(se=K),"selectionStart"in T)T.selectionStart=K,T.selectionEnd=Math.min(se,T.value.length);else{var ie=T.ownerDocument||document,J=ie&&ie.defaultView||window;if(J.getSelection){var te=J.getSelection(),fe=T.textContent.length,ve=Math.min(q.start,fe),Ye=q.end===void 0?ve:Math.min(q.end,fe);!te.extend&&ve>Ye&&(v=Ye,Ye=ve,ve=v);var P=Mm(T,ve),G=Mm(T,Ye);if(P&&G&&(te.rangeCount!==1||te.anchorNode!==P.node||te.anchorOffset!==P.offset||te.focusNode!==G.node||te.focusOffset!==G.offset)){var W=ie.createRange();W.setStart(P.node,P.offset),te.removeAllRanges(),ve>Ye?(te.addRange(W),te.extend(G.node,G.offset)):(W.setEnd(G.node,G.offset),te.addRange(W))}}}}for(ie=[],te=T;te=te.parentNode;)te.nodeType===1&&ie.push({element:te,left:te.scrollLeft,top:te.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<ie.length;T++){var re=ie[T];re.element.scrollLeft=re.left,re.element.scrollTop=re.top}}Ol=!!sf,rf=sf=null}finally{He=d,B.p=o,O.T=r}}e.current=n,ft=2}}function Ig(){if(ft===2){ft=0;var e=ka,n=lr,r=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||r){r=O.T,O.T=null;var o=B.p;B.p=2;var d=He;He|=4;try{vg(e,n.alternate,n)}finally{He=d,B.p=o,O.T=r}}ft=3}}function Pg(){if(ft===4||ft===3){ft=0,zn();var e=ka,n=lr,r=ta,o=Dg;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?ft=5:(ft=0,lr=ka=null,Zg(e,e.pendingLanes));var d=e.pendingLanes;if(d===0&&(Aa=null),Gr(r),n=n.stateNode,St&&typeof St.onCommitFiberRoot=="function")try{St.onCommitFiberRoot(Za,n,void 0,(n.current.flags&128)===128)}catch{}if(o!==null){n=O.T,d=B.p,B.p=2,O.T=null;try{for(var h=e.onRecoverableError,v=0;v<o.length;v++){var T=o[v];h(T.value,{componentStack:T.stack})}}finally{O.T=n,B.p=d}}(ta&3)!==0&&Nl(),En(e),d=e.pendingLanes,(r&261930)!==0&&(d&42)!==0?e===Gd?Ei++:(Ei=0,Gd=e):Ei=0,_i(0)}}function Zg(e,n){(e.pooledCacheLanes&=n)===0&&(n=e.pooledCache,n!=null&&(e.pooledCache=null,ii(n)))}function Nl(){return Gg(),Ig(),Pg(),Qg()}function Qg(){if(ft!==5)return!1;var e=ka,n=Yd;Yd=0;var r=Gr(ta),o=O.T,d=B.p;try{B.p=32>r?32:r,O.T=null,r=Xd,Xd=null;var h=ka,v=ta;if(ft=0,lr=ka=null,ta=0,(He&6)!==0)throw Error(i(331));var T=He;if(He|=4,Ag(h.current),Cg(h,h.current,v,r),He=T,_i(0,!1),St&&typeof St.onPostCommitFiberRoot=="function")try{St.onPostCommitFiberRoot(Za,h)}catch{}return!0}finally{B.p=d,O.T=o,Zg(e,n)}}function Fg(e,n,r){n=Wt(r,n),n=Nd(e.stateNode,n,2),e=ja(e,n,2),e!==null&&(Fa(e,2),En(e))}function Ue(e,n,r){if(e.tag===3)Fg(e,e,r);else for(;n!==null;){if(n.tag===3){Fg(n,e,r);break}else if(n.tag===1){var o=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(Aa===null||!Aa.has(o))){e=Wt(r,e),r=Wp(2),o=ja(n,r,2),o!==null&&(Kp(r,o,n,e),Fa(o,2),En(o));break}}n=n.return}}function Zd(e,n,r){var o=e.pingCache;if(o===null){o=e.pingCache=new T2;var d=new Set;o.set(n,d)}else d=o.get(n),d===void 0&&(d=new Set,o.set(n,d));d.has(r)||($d=!0,d.add(r),e=D2.bind(null,e,n,r),n.then(e,e))}function D2(e,n,r){var o=e.pingCache;o!==null&&o.delete(n),e.pingedLanes|=e.suspendedLanes&r,e.warmLanes&=~r,Xe===e&&(ke&r)===r&&(et===4||et===3&&(ke&62914560)===ke&&300>Ge()-xl?(He&2)===0&&cr(e,0):qd|=r,or===ke&&(or=0)),En(e)}function Wg(e,n){n===0&&(n=bo()),e=as(e,n),e!==null&&(Fa(e,n),En(e))}function z2(e){var n=e.memoizedState,r=0;n!==null&&(r=n.retryLane),Wg(e,r)}function O2(e,n){var r=0;switch(e.tag){case 31:case 13:var o=e.stateNode,d=e.memoizedState;d!==null&&(r=d.retryLane);break;case 19:o=e.stateNode;break;case 22:o=e.stateNode._retryCache;break;default:throw Error(i(314))}o!==null&&o.delete(n),Wg(e,r)}function B2(e,n){return _t(e,n)}var jl=null,dr=null,Qd=!1,El=!1,Fd=!1,Da=0;function En(e){e!==dr&&e.next===null&&(dr===null?jl=dr=e:dr=dr.next=e),El=!0,Qd||(Qd=!0,L2())}function _i(e,n){if(!Fd&&El){Fd=!0;do for(var r=!1,o=jl;o!==null;){if(e!==0){var d=o.pendingLanes;if(d===0)var h=0;else{var v=o.suspendedLanes,T=o.pingedLanes;h=(1<<31-Nt(42|e)+1)-1,h&=d&~(v&~T),h=h&201326741?h&201326741|1:h?h|2:0}h!==0&&(r=!0,t0(o,h))}else h=ke,h=Ds(o,o===Xe?h:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(h&3)===0||Qa(o,h)||(r=!0,t0(o,h));o=o.next}while(r);Fd=!1}}function H2(){Kg()}function Kg(){El=Qd=!1;var e=0;Da!==0&&Z2()&&(e=Da);for(var n=Ge(),r=null,o=jl;o!==null;){var d=o.next,h=Jg(o,n);h===0?(o.next=null,r===null?jl=d:r.next=d,d===null&&(dr=r)):(r=o,(e!==0||(h&3)!==0)&&(El=!0)),o=d}ft!==0&&ft!==5||_i(e),Da!==0&&(Da=0)}function Jg(e,n){for(var r=e.suspendedLanes,o=e.pingedLanes,d=e.expirationTimes,h=e.pendingLanes&-62914561;0<h;){var v=31-Nt(h),T=1<<v,q=d[v];q===-1?((T&r)===0||(T&o)!==0)&&(d[v]=uu(T,n)):q<=n&&(e.expiredLanes|=T),h&=~T}if(n=Xe,r=ke,r=Ds(e,e===n?r:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o=e.callbackNode,r===0||e===n&&(Le===2||Le===9)||e.cancelPendingCommit!==null)return o!==null&&o!==null&&on(o),e.callbackNode=null,e.callbackPriority=0;if((r&3)===0||Qa(e,r)){if(n=r&-r,n===e.callbackPriority)return n;switch(o!==null&&on(o),Gr(r)){case 2:case 8:r=bn;break;case 32:r=Pa;break;case 268435456:r=Ms;break;default:r=Pa}return o=e0.bind(null,e),r=_t(r,o),e.callbackPriority=n,e.callbackNode=r,n}return o!==null&&o!==null&&on(o),e.callbackPriority=2,e.callbackNode=null,2}function e0(e,n){if(ft!==0&&ft!==5)return e.callbackNode=null,e.callbackPriority=0,null;var r=e.callbackNode;if(Nl()&&e.callbackNode!==r)return null;var o=ke;return o=Ds(e,e===Xe?o:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o===0?null:(Og(e,o,n),Jg(e,Ge()),e.callbackNode!=null&&e.callbackNode===r?e0.bind(null,e):null)}function t0(e,n){if(Nl())return null;Og(e,n,!0)}function L2(){F2(function(){(He&6)!==0?_t(Bt,H2):Kg()})}function Wd(){if(Da===0){var e=Fs;e===0&&(e=As,As<<=1,(As&261888)===0&&(As=256)),Da=e}return Da}function n0(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Do(""+e)}function a0(e,n){var r=n.ownerDocument.createElement("input");return r.name=n.name,r.value=n.value,e.id&&r.setAttribute("form",e.id),n.parentNode.insertBefore(r,n),e=new FormData(e),r.parentNode.removeChild(r),e}function U2(e,n,r,o,d){if(n==="submit"&&r&&r.stateNode===d){var h=n0((d[vt]||null).action),v=o.submitter;v&&(n=(n=v[vt]||null)?n0(n.formAction):v.getAttribute("formAction"),n!==null&&(h=n,v=null));var T=new Ho("action","action",null,o,d);e.push({event:T,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(Da!==0){var q=v?a0(d,v):new FormData(d);xd(r,{pending:!0,data:q,method:d.method,action:h},null,q)}}else typeof h=="function"&&(T.preventDefault(),q=v?a0(d,v):new FormData(d),xd(r,{pending:!0,data:q,method:d.method,action:h},h,q))},currentTarget:d}]})}}for(var Kd=0;Kd<zu.length;Kd++){var Jd=zu[Kd],$2=Jd.toLowerCase(),q2=Jd[0].toUpperCase()+Jd.slice(1);un($2,"on"+q2)}un(zm,"onAnimationEnd"),un(Om,"onAnimationIteration"),un(Bm,"onAnimationStart"),un("dblclick","onDoubleClick"),un("focusin","onFocus"),un("focusout","onBlur"),un(a2,"onTransitionRun"),un(s2,"onTransitionStart"),un(r2,"onTransitionCancel"),un(Hm,"onTransitionEnd"),ga("onMouseEnter",["mouseout","mouseover"]),ga("onMouseLeave",["mouseout","mouseover"]),ga("onPointerEnter",["pointerout","pointerover"]),ga("onPointerLeave",["pointerout","pointerover"]),Ln("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ln("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ln("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ln("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ln("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ln("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ci="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),V2=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ci));function s0(e,n){n=(n&4)!==0;for(var r=0;r<e.length;r++){var o=e[r],d=o.event;o=o.listeners;e:{var h=void 0;if(n)for(var v=o.length-1;0<=v;v--){var T=o[v],q=T.instance,K=T.currentTarget;if(T=T.listener,q!==h&&d.isPropagationStopped())break e;h=T,d.currentTarget=K;try{h(d)}catch(se){$o(se)}d.currentTarget=null,h=q}else for(v=0;v<o.length;v++){if(T=o[v],q=T.instance,K=T.currentTarget,T=T.listener,q!==h&&d.isPropagationStopped())break e;h=T,d.currentTarget=K;try{h(d)}catch(se){$o(se)}d.currentTarget=null,h=q}}}}function Ae(e,n){var r=n[zs];r===void 0&&(r=n[zs]=new Set);var o=e+"__bubble";r.has(o)||(r0(n,e,2,!1),r.add(o))}function ef(e,n,r){var o=0;n&&(o|=4),r0(r,e,o,n)}var _l="_reactListening"+Math.random().toString(36).slice(2);function tf(e){if(!e[_l]){e[_l]=!0,Co.forEach(function(r){r!=="selectionchange"&&(V2.has(r)||ef(r,!1,e),ef(r,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[_l]||(n[_l]=!0,ef("selectionchange",!1,n))}}function r0(e,n,r,o){switch(z0(n)){case 2:var d=gw;break;case 8:d=xw;break;default:d=xf}r=d.bind(null,n,r,e),d=void 0,!wu||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(d=!0),o?d!==void 0?e.addEventListener(n,r,{capture:!0,passive:d}):e.addEventListener(n,r,!0):d!==void 0?e.addEventListener(n,r,{passive:d}):e.addEventListener(n,r,!1)}function nf(e,n,r,o,d){var h=o;if((n&1)===0&&(n&2)===0&&o!==null)e:for(;;){if(o===null)return;var v=o.tag;if(v===3||v===4){var T=o.stateNode.containerInfo;if(T===d)break;if(v===4)for(v=o.return;v!==null;){var q=v.tag;if((q===3||q===4)&&v.stateNode.containerInfo===d)return;v=v.return}for(;T!==null;){if(v=fa(T),v===null)return;if(q=v.tag,q===5||q===6||q===26||q===27){o=h=v;continue e}T=T.parentNode}}o=o.return}um(function(){var K=h,se=bu(r),ie=[];e:{var J=Lm.get(e);if(J!==void 0){var te=Ho,fe=e;switch(e){case"keypress":if(Oo(r)===0)break e;case"keydown":case"keyup":te=Ov;break;case"focusin":fe="focus",te=Eu;break;case"focusout":fe="blur",te=Eu;break;case"beforeblur":case"afterblur":te=Eu;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":te=hm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":te=Nv;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":te=Lv;break;case zm:case Om:case Bm:te=_v;break;case Hm:te=$v;break;case"scroll":case"scrollend":te=wv;break;case"wheel":te=Vv;break;case"copy":case"cut":case"paste":te=Tv;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":te=pm;break;case"toggle":case"beforetoggle":te=Xv}var ve=(n&4)!==0,Ye=!ve&&(e==="scroll"||e==="scrollend"),P=ve?J!==null?J+"Capture":null:J;ve=[];for(var G=K,W;G!==null;){var re=G;if(W=re.stateNode,re=re.tag,re!==5&&re!==26&&re!==27||W===null||P===null||(re=Qr(G,P),re!=null&&ve.push(Ti(G,re,W))),Ye)break;G=G.return}0<ve.length&&(J=new te(J,fe,null,r,se),ie.push({event:J,listeners:ve}))}}if((n&7)===0){e:{if(J=e==="mouseover"||e==="pointerover",te=e==="mouseout"||e==="pointerout",J&&r!==yu&&(fe=r.relatedTarget||r.fromElement)&&(fa(fe)||fe[Hn]))break e;if((te||J)&&(J=se.window===se?se:(J=se.ownerDocument)?J.defaultView||J.parentWindow:window,te?(fe=r.relatedTarget||r.toElement,te=K,fe=fe?fa(fe):null,fe!==null&&(Ye=u(fe),ve=fe.tag,fe!==Ye||ve!==5&&ve!==27&&ve!==6)&&(fe=null)):(te=null,fe=K),te!==fe)){if(ve=hm,re="onMouseLeave",P="onMouseEnter",G="mouse",(e==="pointerout"||e==="pointerover")&&(ve=pm,re="onPointerLeave",P="onPointerEnter",G="pointer"),Ye=te==null?J:ma(te),W=fe==null?J:ma(fe),J=new ve(re,G+"leave",te,r,se),J.target=Ye,J.relatedTarget=W,re=null,fa(se)===K&&(ve=new ve(P,G+"enter",fe,r,se),ve.target=W,ve.relatedTarget=Ye,re=ve),Ye=re,te&&fe)t:{for(ve=Y2,P=te,G=fe,W=0,re=P;re;re=ve(re))W++;re=0;for(var ye=G;ye;ye=ve(ye))re++;for(;0<W-re;)P=ve(P),W--;for(;0<re-W;)G=ve(G),re--;for(;W--;){if(P===G||G!==null&&P===G.alternate){ve=P;break t}P=ve(P),G=ve(G)}ve=null}else ve=null;te!==null&&i0(ie,J,te,ve,!1),fe!==null&&Ye!==null&&i0(ie,Ye,fe,ve,!0)}}e:{if(J=K?ma(K):window,te=J.nodeName&&J.nodeName.toLowerCase(),te==="select"||te==="input"&&J.type==="file")var Oe=Nm;else if(wm(J))if(jm)Oe=e2;else{Oe=Kv;var he=Wv}else te=J.nodeName,!te||te.toLowerCase()!=="input"||J.type!=="checkbox"&&J.type!=="radio"?K&&xu(K.elementType)&&(Oe=Nm):Oe=Jv;if(Oe&&(Oe=Oe(e,K))){Sm(ie,Oe,r,se);break e}he&&he(e,J,K),e==="focusout"&&K&&J.type==="number"&&K.memoizedProps.value!=null&&Zr(J,"number",J.value)}switch(he=K?ma(K):window,e){case"focusin":(wm(he)||he.contentEditable==="true")&&(Vs=he,ku=K,ai=null);break;case"focusout":ai=ku=Vs=null;break;case"mousedown":Ru=!0;break;case"contextmenu":case"mouseup":case"dragend":Ru=!1,Rm(ie,r,se);break;case"selectionchange":if(n2)break;case"keydown":case"keyup":Rm(ie,r,se)}var Ee;if(Cu)e:{switch(e){case"compositionstart":var Re="onCompositionStart";break e;case"compositionend":Re="onCompositionEnd";break e;case"compositionupdate":Re="onCompositionUpdate";break e}Re=void 0}else qs?bm(e,r)&&(Re="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(Re="onCompositionStart");Re&&(gm&&r.locale!=="ko"&&(qs||Re!=="onCompositionStart"?Re==="onCompositionEnd"&&qs&&(Ee=dm()):(xa=se,Su="value"in xa?xa.value:xa.textContent,qs=!0)),he=Cl(K,Re),0<he.length&&(Re=new mm(Re,e,null,r,se),ie.push({event:Re,listeners:he}),Ee?Re.data=Ee:(Ee=vm(r),Ee!==null&&(Re.data=Ee)))),(Ee=Iv?Pv(e,r):Zv(e,r))&&(Re=Cl(K,"onBeforeInput"),0<Re.length&&(he=new mm("onBeforeInput","beforeinput",null,r,se),ie.push({event:he,listeners:Re}),he.data=Ee)),U2(ie,e,K,r,se)}s0(ie,n)})}function Ti(e,n,r){return{instance:e,listener:n,currentTarget:r}}function Cl(e,n){for(var r=n+"Capture",o=[];e!==null;){var d=e,h=d.stateNode;if(d=d.tag,d!==5&&d!==26&&d!==27||h===null||(d=Qr(e,r),d!=null&&o.unshift(Ti(e,d,h)),d=Qr(e,n),d!=null&&o.push(Ti(e,d,h))),e.tag===3)return o;e=e.return}return[]}function Y2(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function i0(e,n,r,o,d){for(var h=n._reactName,v=[];r!==null&&r!==o;){var T=r,q=T.alternate,K=T.stateNode;if(T=T.tag,q!==null&&q===o)break;T!==5&&T!==26&&T!==27||K===null||(q=K,d?(K=Qr(r,h),K!=null&&v.unshift(Ti(r,K,q))):d||(K=Qr(r,h),K!=null&&v.push(Ti(r,K,q)))),r=r.return}v.length!==0&&e.push({event:n,listeners:v})}var X2=/\r\n?/g,G2=/\u0000|\uFFFD/g;function o0(e){return(typeof e=="string"?e:""+e).replace(X2,`
`).replace(G2,"")}function l0(e,n){return n=o0(n),o0(e)===n}function Ve(e,n,r,o,d,h){switch(r){case"children":typeof o=="string"?n==="body"||n==="textarea"&&o===""||Ls(e,o):(typeof o=="number"||typeof o=="bigint")&&n!=="body"&&Ls(e,""+o);break;case"className":Bs(e,"class",o);break;case"tabIndex":Bs(e,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":Bs(e,r,o);break;case"style":lm(e,o,h);break;case"data":if(n!=="object"){Bs(e,"data",o);break}case"src":case"href":if(o===""&&(n!=="a"||r!=="href")){e.removeAttribute(r);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(r);break}o=Do(""+o),e.setAttribute(r,o);break;case"action":case"formAction":if(typeof o=="function"){e.setAttribute(r,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof h=="function"&&(r==="formAction"?(n!=="input"&&Ve(e,n,"name",d.name,d,null),Ve(e,n,"formEncType",d.formEncType,d,null),Ve(e,n,"formMethod",d.formMethod,d,null),Ve(e,n,"formTarget",d.formTarget,d,null)):(Ve(e,n,"encType",d.encType,d,null),Ve(e,n,"method",d.method,d,null),Ve(e,n,"target",d.target,d,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(r);break}o=Do(""+o),e.setAttribute(r,o);break;case"onClick":o!=null&&(e.onclick=$n);break;case"onScroll":o!=null&&Ae("scroll",e);break;case"onScrollEnd":o!=null&&Ae("scrollend",e);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(i(61));if(r=o.__html,r!=null){if(d.children!=null)throw Error(i(60));e.innerHTML=r}}break;case"multiple":e.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":e.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){e.removeAttribute("xlink:href");break}r=Do(""+o),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(r,""+o):e.removeAttribute(r);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(r,""):e.removeAttribute(r);break;case"capture":case"download":o===!0?e.setAttribute(r,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(r,o):e.removeAttribute(r);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?e.setAttribute(r,o):e.removeAttribute(r);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?e.removeAttribute(r):e.setAttribute(r,o);break;case"popover":Ae("beforetoggle",e),Ae("toggle",e),Os(e,"popover",o);break;case"xlinkActuate":cn(e,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":cn(e,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":cn(e,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":cn(e,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":cn(e,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":cn(e,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":cn(e,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":cn(e,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":cn(e,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":Os(e,"is",o);break;case"innerText":case"textContent":break;default:(!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(r=bv.get(r)||r,Os(e,r,o))}}function af(e,n,r,o,d,h){switch(r){case"style":lm(e,o,h);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(i(61));if(r=o.__html,r!=null){if(d.children!=null)throw Error(i(60));e.innerHTML=r}}break;case"children":typeof o=="string"?Ls(e,o):(typeof o=="number"||typeof o=="bigint")&&Ls(e,""+o);break;case"onScroll":o!=null&&Ae("scroll",e);break;case"onScrollEnd":o!=null&&Ae("scrollend",e);break;case"onClick":o!=null&&(e.onclick=$n);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!To.hasOwnProperty(r))e:{if(r[0]==="o"&&r[1]==="n"&&(d=r.endsWith("Capture"),n=r.slice(2,d?r.length-7:void 0),h=e[vt]||null,h=h!=null?h[r]:null,typeof h=="function"&&e.removeEventListener(n,h,d),typeof o=="function")){typeof h!="function"&&h!==null&&(r in e?e[r]=null:e.hasAttribute(r)&&e.removeAttribute(r)),e.addEventListener(n,o,d);break e}r in e?e[r]=o:o===!0?e.setAttribute(r,""):Os(e,r,o)}}}function bt(e,n,r){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ae("error",e),Ae("load",e);var o=!1,d=!1,h;for(h in r)if(r.hasOwnProperty(h)){var v=r[h];if(v!=null)switch(h){case"src":o=!0;break;case"srcSet":d=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,n));default:Ve(e,n,h,v,r,null)}}d&&Ve(e,n,"srcSet",r.srcSet,r,null),o&&Ve(e,n,"src",r.src,r,null);return;case"input":Ae("invalid",e);var T=h=v=d=null,q=null,K=null;for(o in r)if(r.hasOwnProperty(o)){var se=r[o];if(se!=null)switch(o){case"name":d=se;break;case"type":v=se;break;case"checked":q=se;break;case"defaultChecked":K=se;break;case"value":h=se;break;case"defaultValue":T=se;break;case"children":case"dangerouslySetInnerHTML":if(se!=null)throw Error(i(137,n));break;default:Ve(e,n,o,se,r,null)}}Ro(e,h,T,q,K,v,d,!1);return;case"select":Ae("invalid",e),o=v=h=null;for(d in r)if(r.hasOwnProperty(d)&&(T=r[d],T!=null))switch(d){case"value":h=T;break;case"defaultValue":v=T;break;case"multiple":o=T;default:Ve(e,n,d,T,r,null)}n=h,r=v,e.multiple=!!o,n!=null?Un(e,!!o,n,!1):r!=null&&Un(e,!!o,r,!0);return;case"textarea":Ae("invalid",e),h=d=o=null;for(v in r)if(r.hasOwnProperty(v)&&(T=r[v],T!=null))switch(v){case"value":o=T;break;case"defaultValue":d=T;break;case"children":h=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(i(91));break;default:Ve(e,n,v,T,r,null)}im(e,o,d,h);return;case"option":for(q in r)r.hasOwnProperty(q)&&(o=r[q],o!=null)&&(q==="selected"?e.selected=o&&typeof o!="function"&&typeof o!="symbol":Ve(e,n,q,o,r,null));return;case"dialog":Ae("beforetoggle",e),Ae("toggle",e),Ae("cancel",e),Ae("close",e);break;case"iframe":case"object":Ae("load",e);break;case"video":case"audio":for(o=0;o<Ci.length;o++)Ae(Ci[o],e);break;case"image":Ae("error",e),Ae("load",e);break;case"details":Ae("toggle",e);break;case"embed":case"source":case"link":Ae("error",e),Ae("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(K in r)if(r.hasOwnProperty(K)&&(o=r[K],o!=null))switch(K){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,n));default:Ve(e,n,K,o,r,null)}return;default:if(xu(n)){for(se in r)r.hasOwnProperty(se)&&(o=r[se],o!==void 0&&af(e,n,se,o,r,void 0));return}}for(T in r)r.hasOwnProperty(T)&&(o=r[T],o!=null&&Ve(e,n,T,o,r,null))}function I2(e,n,r,o){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var d=null,h=null,v=null,T=null,q=null,K=null,se=null;for(te in r){var ie=r[te];if(r.hasOwnProperty(te)&&ie!=null)switch(te){case"checked":break;case"value":break;case"defaultValue":q=ie;default:o.hasOwnProperty(te)||Ve(e,n,te,null,o,ie)}}for(var J in o){var te=o[J];if(ie=r[J],o.hasOwnProperty(J)&&(te!=null||ie!=null))switch(J){case"type":h=te;break;case"name":d=te;break;case"checked":K=te;break;case"defaultChecked":se=te;break;case"value":v=te;break;case"defaultValue":T=te;break;case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(i(137,n));break;default:te!==ie&&Ve(e,n,J,te,o,ie)}}Ja(e,v,T,q,K,se,h,d);return;case"select":te=v=T=J=null;for(h in r)if(q=r[h],r.hasOwnProperty(h)&&q!=null)switch(h){case"value":break;case"multiple":te=q;default:o.hasOwnProperty(h)||Ve(e,n,h,null,o,q)}for(d in o)if(h=o[d],q=r[d],o.hasOwnProperty(d)&&(h!=null||q!=null))switch(d){case"value":J=h;break;case"defaultValue":T=h;break;case"multiple":v=h;default:h!==q&&Ve(e,n,d,h,o,q)}n=T,r=v,o=te,J!=null?Un(e,!!r,J,!1):!!o!=!!r&&(n!=null?Un(e,!!r,n,!0):Un(e,!!r,r?[]:"",!1));return;case"textarea":te=J=null;for(T in r)if(d=r[T],r.hasOwnProperty(T)&&d!=null&&!o.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:Ve(e,n,T,null,o,d)}for(v in o)if(d=o[v],h=r[v],o.hasOwnProperty(v)&&(d!=null||h!=null))switch(v){case"value":J=d;break;case"defaultValue":te=d;break;case"children":break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(i(91));break;default:d!==h&&Ve(e,n,v,d,o,h)}rm(e,J,te);return;case"option":for(var fe in r)J=r[fe],r.hasOwnProperty(fe)&&J!=null&&!o.hasOwnProperty(fe)&&(fe==="selected"?e.selected=!1:Ve(e,n,fe,null,o,J));for(q in o)J=o[q],te=r[q],o.hasOwnProperty(q)&&J!==te&&(J!=null||te!=null)&&(q==="selected"?e.selected=J&&typeof J!="function"&&typeof J!="symbol":Ve(e,n,q,J,o,te));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ve in r)J=r[ve],r.hasOwnProperty(ve)&&J!=null&&!o.hasOwnProperty(ve)&&Ve(e,n,ve,null,o,J);for(K in o)if(J=o[K],te=r[K],o.hasOwnProperty(K)&&J!==te&&(J!=null||te!=null))switch(K){case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(i(137,n));break;default:Ve(e,n,K,J,o,te)}return;default:if(xu(n)){for(var Ye in r)J=r[Ye],r.hasOwnProperty(Ye)&&J!==void 0&&!o.hasOwnProperty(Ye)&&af(e,n,Ye,void 0,o,J);for(se in o)J=o[se],te=r[se],!o.hasOwnProperty(se)||J===te||J===void 0&&te===void 0||af(e,n,se,J,o,te);return}}for(var P in r)J=r[P],r.hasOwnProperty(P)&&J!=null&&!o.hasOwnProperty(P)&&Ve(e,n,P,null,o,J);for(ie in o)J=o[ie],te=r[ie],!o.hasOwnProperty(ie)||J===te||J==null&&te==null||Ve(e,n,ie,J,o,te)}function c0(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function P2(){if(typeof performance.getEntriesByType=="function"){for(var e=0,n=0,r=performance.getEntriesByType("resource"),o=0;o<r.length;o++){var d=r[o],h=d.transferSize,v=d.initiatorType,T=d.duration;if(h&&T&&c0(v)){for(v=0,T=d.responseEnd,o+=1;o<r.length;o++){var q=r[o],K=q.startTime;if(K>T)break;var se=q.transferSize,ie=q.initiatorType;se&&c0(ie)&&(q=q.responseEnd,v+=se*(q<T?1:(T-K)/(q-K)))}if(--o,n+=8*(h+v)/(d.duration/1e3),e++,10<e)break}}if(0<e)return n/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var sf=null,rf=null;function Tl(e){return e.nodeType===9?e:e.ownerDocument}function u0(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function d0(e,n){if(e===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&n==="foreignObject"?0:e}function of(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var lf=null;function Z2(){var e=window.event;return e&&e.type==="popstate"?e===lf?!1:(lf=e,!0):(lf=null,!1)}var f0=typeof setTimeout=="function"?setTimeout:void 0,Q2=typeof clearTimeout=="function"?clearTimeout:void 0,h0=typeof Promise=="function"?Promise:void 0,F2=typeof queueMicrotask=="function"?queueMicrotask:typeof h0<"u"?function(e){return h0.resolve(null).then(e).catch(W2)}:f0;function W2(e){setTimeout(function(){throw e})}function za(e){return e==="head"}function m0(e,n){var r=n,o=0;do{var d=r.nextSibling;if(e.removeChild(r),d&&d.nodeType===8)if(r=d.data,r==="/$"||r==="/&"){if(o===0){e.removeChild(d),pr(n);return}o--}else if(r==="$"||r==="$?"||r==="$~"||r==="$!"||r==="&")o++;else if(r==="html")Mi(e.ownerDocument.documentElement);else if(r==="head"){r=e.ownerDocument.head,Mi(r);for(var h=r.firstChild;h;){var v=h.nextSibling,T=h.nodeName;h[Wa]||T==="SCRIPT"||T==="STYLE"||T==="LINK"&&h.rel.toLowerCase()==="stylesheet"||r.removeChild(h),h=v}}else r==="body"&&Mi(e.ownerDocument.body);r=d}while(r);pr(n)}function p0(e,n){var r=e;e=0;do{var o=r.nextSibling;if(r.nodeType===1?n?(r._stashedDisplay=r.style.display,r.style.display="none"):(r.style.display=r._stashedDisplay||"",r.getAttribute("style")===""&&r.removeAttribute("style")):r.nodeType===3&&(n?(r._stashedText=r.nodeValue,r.nodeValue=""):r.nodeValue=r._stashedText||""),o&&o.nodeType===8)if(r=o.data,r==="/$"){if(e===0)break;e--}else r!=="$"&&r!=="$?"&&r!=="$~"&&r!=="$!"||e++;r=o}while(r)}function cf(e){var n=e.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var r=n;switch(n=n.nextSibling,r.nodeName){case"HTML":case"HEAD":case"BODY":cf(r),Ir(r);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(r.rel.toLowerCase()==="stylesheet")continue}e.removeChild(r)}}function K2(e,n,r,o){for(;e.nodeType===1;){var d=r;if(e.nodeName.toLowerCase()!==n.toLowerCase()){if(!o&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(o){if(!e[Wa])switch(n){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(h=e.getAttribute("rel"),h==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(h!==d.rel||e.getAttribute("href")!==(d.href==null||d.href===""?null:d.href)||e.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin)||e.getAttribute("title")!==(d.title==null?null:d.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(h=e.getAttribute("src"),(h!==(d.src==null?null:d.src)||e.getAttribute("type")!==(d.type==null?null:d.type)||e.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin))&&h&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(n==="input"&&e.type==="hidden"){var h=d.name==null?null:""+d.name;if(d.type==="hidden"&&e.getAttribute("name")===h)return e}else return e;if(e=nn(e.nextSibling),e===null)break}return null}function J2(e,n,r){if(n==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!r||(e=nn(e.nextSibling),e===null))return null;return e}function g0(e,n){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=nn(e.nextSibling),e===null))return null;return e}function uf(e){return e.data==="$?"||e.data==="$~"}function df(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function ew(e,n){var r=e.ownerDocument;if(e.data==="$~")e._reactRetry=n;else if(e.data!=="$?"||r.readyState!=="loading")n();else{var o=function(){n(),r.removeEventListener("DOMContentLoaded",o)};r.addEventListener("DOMContentLoaded",o),e._reactRetry=o}}function nn(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"||n==="F!"||n==="F")break;if(n==="/$"||n==="/&")return null}}return e}var ff=null;function x0(e){e=e.nextSibling;for(var n=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"||r==="/&"){if(n===0)return nn(e.nextSibling);n--}else r!=="$"&&r!=="$!"&&r!=="$?"&&r!=="$~"&&r!=="&"||n++}e=e.nextSibling}return null}function y0(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"){if(n===0)return e;n--}else r!=="/$"&&r!=="/&"||n++}e=e.previousSibling}return null}function b0(e,n,r){switch(n=Tl(r),e){case"html":if(e=n.documentElement,!e)throw Error(i(452));return e;case"head":if(e=n.head,!e)throw Error(i(453));return e;case"body":if(e=n.body,!e)throw Error(i(454));return e;default:throw Error(i(451))}}function Mi(e){for(var n=e.attributes;n.length;)e.removeAttributeNode(n[0]);Ir(e)}var an=new Map,v0=new Set;function Ml(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var na=B.d;B.d={f:tw,r:nw,D:aw,C:sw,L:rw,m:iw,X:lw,S:ow,M:cw};function tw(){var e=na.f(),n=vl();return e||n}function nw(e){var n=ha(e);n!==null&&n.tag===5&&n.type==="form"?Hp(n):na.r(e)}var fr=typeof document>"u"?null:document;function w0(e,n,r){var o=fr;if(o&&typeof n=="string"&&n){var d=Tt(n);d='link[rel="'+e+'"][href="'+d+'"]',typeof r=="string"&&(d+='[crossorigin="'+r+'"]'),v0.has(d)||(v0.add(d),e={rel:e,crossOrigin:r,href:n},o.querySelector(d)===null&&(n=o.createElement("link"),bt(n,"link",e),at(n),o.head.appendChild(n)))}}function aw(e){na.D(e),w0("dns-prefetch",e,null)}function sw(e,n){na.C(e,n),w0("preconnect",e,n)}function rw(e,n,r){na.L(e,n,r);var o=fr;if(o&&e&&n){var d='link[rel="preload"][as="'+Tt(n)+'"]';n==="image"&&r&&r.imageSrcSet?(d+='[imagesrcset="'+Tt(r.imageSrcSet)+'"]',typeof r.imageSizes=="string"&&(d+='[imagesizes="'+Tt(r.imageSizes)+'"]')):d+='[href="'+Tt(e)+'"]';var h=d;switch(n){case"style":h=hr(e);break;case"script":h=mr(e)}an.has(h)||(e=x({rel:"preload",href:n==="image"&&r&&r.imageSrcSet?void 0:e,as:n},r),an.set(h,e),o.querySelector(d)!==null||n==="style"&&o.querySelector(Ai(h))||n==="script"&&o.querySelector(ki(h))||(n=o.createElement("link"),bt(n,"link",e),at(n),o.head.appendChild(n)))}}function iw(e,n){na.m(e,n);var r=fr;if(r&&e){var o=n&&typeof n.as=="string"?n.as:"script",d='link[rel="modulepreload"][as="'+Tt(o)+'"][href="'+Tt(e)+'"]',h=d;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":h=mr(e)}if(!an.has(h)&&(e=x({rel:"modulepreload",href:e},n),an.set(h,e),r.querySelector(d)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(r.querySelector(ki(h)))return}o=r.createElement("link"),bt(o,"link",e),at(o),r.head.appendChild(o)}}}function ow(e,n,r){na.S(e,n,r);var o=fr;if(o&&e){var d=pa(o).hoistableStyles,h=hr(e);n=n||"default";var v=d.get(h);if(!v){var T={loading:0,preload:null};if(v=o.querySelector(Ai(h)))T.loading=5;else{e=x({rel:"stylesheet",href:e,"data-precedence":n},r),(r=an.get(h))&&hf(e,r);var q=v=o.createElement("link");at(q),bt(q,"link",e),q._p=new Promise(function(K,se){q.onload=K,q.onerror=se}),q.addEventListener("load",function(){T.loading|=1}),q.addEventListener("error",function(){T.loading|=2}),T.loading|=4,Al(v,n,o)}v={type:"stylesheet",instance:v,count:1,state:T},d.set(h,v)}}}function lw(e,n){na.X(e,n);var r=fr;if(r&&e){var o=pa(r).hoistableScripts,d=mr(e),h=o.get(d);h||(h=r.querySelector(ki(d)),h||(e=x({src:e,async:!0},n),(n=an.get(d))&&mf(e,n),h=r.createElement("script"),at(h),bt(h,"link",e),r.head.appendChild(h)),h={type:"script",instance:h,count:1,state:null},o.set(d,h))}}function cw(e,n){na.M(e,n);var r=fr;if(r&&e){var o=pa(r).hoistableScripts,d=mr(e),h=o.get(d);h||(h=r.querySelector(ki(d)),h||(e=x({src:e,async:!0,type:"module"},n),(n=an.get(d))&&mf(e,n),h=r.createElement("script"),at(h),bt(h,"link",e),r.head.appendChild(h)),h={type:"script",instance:h,count:1,state:null},o.set(d,h))}}function S0(e,n,r,o){var d=(d=ue.current)?Ml(d):null;if(!d)throw Error(i(446));switch(e){case"meta":case"title":return null;case"style":return typeof r.precedence=="string"&&typeof r.href=="string"?(n=hr(r.href),r=pa(d).hoistableStyles,o=r.get(n),o||(o={type:"style",instance:null,count:0,state:null},r.set(n,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(r.rel==="stylesheet"&&typeof r.href=="string"&&typeof r.precedence=="string"){e=hr(r.href);var h=pa(d).hoistableStyles,v=h.get(e);if(v||(d=d.ownerDocument||d,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},h.set(e,v),(h=d.querySelector(Ai(e)))&&!h._p&&(v.instance=h,v.state.loading=5),an.has(e)||(r={rel:"preload",as:"style",href:r.href,crossOrigin:r.crossOrigin,integrity:r.integrity,media:r.media,hrefLang:r.hrefLang,referrerPolicy:r.referrerPolicy},an.set(e,r),h||uw(d,e,r,v.state))),n&&o===null)throw Error(i(528,""));return v}if(n&&o!==null)throw Error(i(529,""));return null;case"script":return n=r.async,r=r.src,typeof r=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=mr(r),r=pa(d).hoistableScripts,o=r.get(n),o||(o={type:"script",instance:null,count:0,state:null},r.set(n,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,e))}}function hr(e){return'href="'+Tt(e)+'"'}function Ai(e){return'link[rel="stylesheet"]['+e+"]"}function N0(e){return x({},e,{"data-precedence":e.precedence,precedence:null})}function uw(e,n,r,o){e.querySelector('link[rel="preload"][as="style"]['+n+"]")?o.loading=1:(n=e.createElement("link"),o.preload=n,n.addEventListener("load",function(){return o.loading|=1}),n.addEventListener("error",function(){return o.loading|=2}),bt(n,"link",r),at(n),e.head.appendChild(n))}function mr(e){return'[src="'+Tt(e)+'"]'}function ki(e){return"script[async]"+e}function j0(e,n,r){if(n.count++,n.instance===null)switch(n.type){case"style":var o=e.querySelector('style[data-href~="'+Tt(r.href)+'"]');if(o)return n.instance=o,at(o),o;var d=x({},r,{"data-href":r.href,"data-precedence":r.precedence,href:null,precedence:null});return o=(e.ownerDocument||e).createElement("style"),at(o),bt(o,"style",d),Al(o,r.precedence,e),n.instance=o;case"stylesheet":d=hr(r.href);var h=e.querySelector(Ai(d));if(h)return n.state.loading|=4,n.instance=h,at(h),h;o=N0(r),(d=an.get(d))&&hf(o,d),h=(e.ownerDocument||e).createElement("link"),at(h);var v=h;return v._p=new Promise(function(T,q){v.onload=T,v.onerror=q}),bt(h,"link",o),n.state.loading|=4,Al(h,r.precedence,e),n.instance=h;case"script":return h=mr(r.src),(d=e.querySelector(ki(h)))?(n.instance=d,at(d),d):(o=r,(d=an.get(h))&&(o=x({},r),mf(o,d)),e=e.ownerDocument||e,d=e.createElement("script"),at(d),bt(d,"link",o),e.head.appendChild(d),n.instance=d);case"void":return null;default:throw Error(i(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(o=n.instance,n.state.loading|=4,Al(o,r.precedence,e));return n.instance}function Al(e,n,r){for(var o=r.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),d=o.length?o[o.length-1]:null,h=d,v=0;v<o.length;v++){var T=o[v];if(T.dataset.precedence===n)h=T;else if(h!==d)break}h?h.parentNode.insertBefore(e,h.nextSibling):(n=r.nodeType===9?r.head:r,n.insertBefore(e,n.firstChild))}function hf(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.title==null&&(e.title=n.title)}function mf(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.integrity==null&&(e.integrity=n.integrity)}var kl=null;function E0(e,n,r){if(kl===null){var o=new Map,d=kl=new Map;d.set(r,o)}else d=kl,o=d.get(r),o||(o=new Map,d.set(r,o));if(o.has(e))return o;for(o.set(e,null),r=r.getElementsByTagName(e),d=0;d<r.length;d++){var h=r[d];if(!(h[Wa]||h[dt]||e==="link"&&h.getAttribute("rel")==="stylesheet")&&h.namespaceURI!=="http://www.w3.org/2000/svg"){var v=h.getAttribute(n)||"";v=e+v;var T=o.get(v);T?T.push(h):o.set(v,[h])}}return o}function _0(e,n,r){e=e.ownerDocument||e,e.head.insertBefore(r,n==="title"?e.querySelector("head > title"):null)}function dw(e,n,r){if(r===1||n.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;return n.rel==="stylesheet"?(e=n.disabled,typeof n.precedence=="string"&&e==null):!0;case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function C0(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function fw(e,n,r,o){if(r.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var d=hr(o.href),h=n.querySelector(Ai(d));if(h){n=h._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(e.count++,e=Rl.bind(e),n.then(e,e)),r.state.loading|=4,r.instance=h,at(h);return}h=n.ownerDocument||n,o=N0(o),(d=an.get(d))&&hf(o,d),h=h.createElement("link"),at(h);var v=h;v._p=new Promise(function(T,q){v.onload=T,v.onerror=q}),bt(h,"link",o),r.instance=h}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(r,n),(n=r.state.preload)&&(r.state.loading&3)===0&&(e.count++,r=Rl.bind(e),n.addEventListener("load",r),n.addEventListener("error",r))}}var pf=0;function hw(e,n){return e.stylesheets&&e.count===0&&zl(e,e.stylesheets),0<e.count||0<e.imgCount?function(r){var o=setTimeout(function(){if(e.stylesheets&&zl(e,e.stylesheets),e.unsuspend){var h=e.unsuspend;e.unsuspend=null,h()}},6e4+n);0<e.imgBytes&&pf===0&&(pf=62500*P2());var d=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&zl(e,e.stylesheets),e.unsuspend)){var h=e.unsuspend;e.unsuspend=null,h()}},(e.imgBytes>pf?50:800)+n);return e.unsuspend=r,function(){e.unsuspend=null,clearTimeout(o),clearTimeout(d)}}:null}function Rl(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)zl(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Dl=null;function zl(e,n){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Dl=new Map,n.forEach(mw,e),Dl=null,Rl.call(e))}function mw(e,n){if(!(n.state.loading&4)){var r=Dl.get(e);if(r)var o=r.get(null);else{r=new Map,Dl.set(e,r);for(var d=e.querySelectorAll("link[data-precedence],style[data-precedence]"),h=0;h<d.length;h++){var v=d[h];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(r.set(v.dataset.precedence,v),o=v)}o&&r.set(null,o)}d=n.instance,v=d.getAttribute("data-precedence"),h=r.get(v)||o,h===o&&r.set(null,d),r.set(v,d),this.count++,o=Rl.bind(this),d.addEventListener("load",o),d.addEventListener("error",o),h?h.parentNode.insertBefore(d,h.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(d,e.firstChild)),n.state.loading|=4}}var Ri={$$typeof:C,Provider:null,Consumer:null,_currentValue:V,_currentValue2:V,_threadCount:0};function pw(e,n,r,o,d,h,v,T,q){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Yr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Yr(0),this.hiddenUpdates=Yr(null),this.identifierPrefix=o,this.onUncaughtError=d,this.onCaughtError=h,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=q,this.incompleteTransitions=new Map}function T0(e,n,r,o,d,h,v,T,q,K,se,ie){return e=new pw(e,n,r,v,q,K,se,ie,T),n=1,h===!0&&(n|=24),h=Lt(3,null,null,n),e.current=h,h.stateNode=e,n=Pu(),n.refCount++,e.pooledCache=n,n.refCount++,h.memoizedState={element:o,isDehydrated:r,cache:n},Wu(h),e}function M0(e){return e?(e=Gs,e):Gs}function A0(e,n,r,o,d,h){d=M0(d),o.context===null?o.context=d:o.pendingContext=d,o=Na(n),o.payload={element:r},h=h===void 0?null:h,h!==null&&(o.callback=h),r=ja(e,o,n),r!==null&&(zt(r,e,n),ui(r,e,n))}function k0(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<n?r:n}}function gf(e,n){k0(e,n),(e=e.alternate)&&k0(e,n)}function R0(e){if(e.tag===13||e.tag===31){var n=as(e,67108864);n!==null&&zt(n,e,67108864),gf(e,67108864)}}function D0(e){if(e.tag===13||e.tag===31){var n=Yt();n=Xr(n);var r=as(e,n);r!==null&&zt(r,e,n),gf(e,n)}}var Ol=!0;function gw(e,n,r,o){var d=O.T;O.T=null;var h=B.p;try{B.p=2,xf(e,n,r,o)}finally{B.p=h,O.T=d}}function xw(e,n,r,o){var d=O.T;O.T=null;var h=B.p;try{B.p=8,xf(e,n,r,o)}finally{B.p=h,O.T=d}}function xf(e,n,r,o){if(Ol){var d=yf(o);if(d===null)nf(e,n,o,Bl,r),O0(e,o);else if(bw(d,e,n,r,o))o.stopPropagation();else if(O0(e,o),n&4&&-1<yw.indexOf(e)){for(;d!==null;){var h=ha(d);if(h!==null)switch(h.tag){case 3:if(h=h.stateNode,h.current.memoizedState.isDehydrated){var v=Bn(h.pendingLanes);if(v!==0){var T=h;for(T.pendingLanes|=2,T.entangledLanes|=2;v;){var q=1<<31-Nt(v);T.entanglements[1]|=q,v&=~q}En(h),(He&6)===0&&(yl=Ge()+500,_i(0))}}break;case 31:case 13:T=as(h,2),T!==null&&zt(T,h,2),vl(),gf(h,2)}if(h=yf(o),h===null&&nf(e,n,o,Bl,r),h===d)break;d=h}d!==null&&o.stopPropagation()}else nf(e,n,o,null,r)}}function yf(e){return e=bu(e),bf(e)}var Bl=null;function bf(e){if(Bl=null,e=fa(e),e!==null){var n=u(e);if(n===null)e=null;else{var r=n.tag;if(r===13){if(e=f(n),e!==null)return e;e=null}else if(r===31){if(e=m(n),e!==null)return e;e=null}else if(r===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null)}}return Bl=e,null}function z0(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(On()){case Bt:return 2;case bn:return 8;case Pa:case su:return 32;case Ms:return 268435456;default:return 32}default:return 32}}var vf=!1,Oa=null,Ba=null,Ha=null,Di=new Map,zi=new Map,La=[],yw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function O0(e,n){switch(e){case"focusin":case"focusout":Oa=null;break;case"dragenter":case"dragleave":Ba=null;break;case"mouseover":case"mouseout":Ha=null;break;case"pointerover":case"pointerout":Di.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":zi.delete(n.pointerId)}}function Oi(e,n,r,o,d,h){return e===null||e.nativeEvent!==h?(e={blockedOn:n,domEventName:r,eventSystemFlags:o,nativeEvent:h,targetContainers:[d]},n!==null&&(n=ha(n),n!==null&&R0(n)),e):(e.eventSystemFlags|=o,n=e.targetContainers,d!==null&&n.indexOf(d)===-1&&n.push(d),e)}function bw(e,n,r,o,d){switch(n){case"focusin":return Oa=Oi(Oa,e,n,r,o,d),!0;case"dragenter":return Ba=Oi(Ba,e,n,r,o,d),!0;case"mouseover":return Ha=Oi(Ha,e,n,r,o,d),!0;case"pointerover":var h=d.pointerId;return Di.set(h,Oi(Di.get(h)||null,e,n,r,o,d)),!0;case"gotpointercapture":return h=d.pointerId,zi.set(h,Oi(zi.get(h)||null,e,n,r,o,d)),!0}return!1}function B0(e){var n=fa(e.target);if(n!==null){var r=u(n);if(r!==null){if(n=r.tag,n===13){if(n=f(r),n!==null){e.blockedOn=n,jo(e.priority,function(){D0(r)});return}}else if(n===31){if(n=m(r),n!==null){e.blockedOn=n,jo(e.priority,function(){D0(r)});return}}else if(n===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Hl(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var r=yf(e.nativeEvent);if(r===null){r=e.nativeEvent;var o=new r.constructor(r.type,r);yu=o,r.target.dispatchEvent(o),yu=null}else return n=ha(r),n!==null&&R0(n),e.blockedOn=r,!1;n.shift()}return!0}function H0(e,n,r){Hl(e)&&r.delete(n)}function vw(){vf=!1,Oa!==null&&Hl(Oa)&&(Oa=null),Ba!==null&&Hl(Ba)&&(Ba=null),Ha!==null&&Hl(Ha)&&(Ha=null),Di.forEach(H0),zi.forEach(H0)}function Ll(e,n){e.blockedOn===n&&(e.blockedOn=null,vf||(vf=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,vw)))}var Ul=null;function L0(e){Ul!==e&&(Ul=e,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Ul===e&&(Ul=null);for(var n=0;n<e.length;n+=3){var r=e[n],o=e[n+1],d=e[n+2];if(typeof o!="function"){if(bf(o||r)===null)continue;break}var h=ha(r);h!==null&&(e.splice(n,3),n-=3,xd(h,{pending:!0,data:d,method:r.method,action:o},o,d))}}))}function pr(e){function n(q){return Ll(q,e)}Oa!==null&&Ll(Oa,e),Ba!==null&&Ll(Ba,e),Ha!==null&&Ll(Ha,e),Di.forEach(n),zi.forEach(n);for(var r=0;r<La.length;r++){var o=La[r];o.blockedOn===e&&(o.blockedOn=null)}for(;0<La.length&&(r=La[0],r.blockedOn===null);)B0(r),r.blockedOn===null&&La.shift();if(r=(e.ownerDocument||e).$$reactFormReplay,r!=null)for(o=0;o<r.length;o+=3){var d=r[o],h=r[o+1],v=d[vt]||null;if(typeof h=="function")v||L0(r);else if(v){var T=null;if(h&&h.hasAttribute("formAction")){if(d=h,v=h[vt]||null)T=v.formAction;else if(bf(d)!==null)continue}else T=v.action;typeof T=="function"?r[o+1]=T:(r.splice(o,3),o-=3),L0(r)}}}function U0(){function e(h){h.canIntercept&&h.info==="react-transition"&&h.intercept({handler:function(){return new Promise(function(v){return d=v})},focusReset:"manual",scroll:"manual"})}function n(){d!==null&&(d(),d=null),o||setTimeout(r,20)}function r(){if(!o&&!navigation.transition){var h=navigation.currentEntry;h&&h.url!=null&&navigation.navigate(h.url,{state:h.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var o=!1,d=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",n),navigation.addEventListener("navigateerror",n),setTimeout(r,100),function(){o=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",n),navigation.removeEventListener("navigateerror",n),d!==null&&(d(),d=null)}}}function wf(e){this._internalRoot=e}$l.prototype.render=wf.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(i(409));var r=n.current,o=Yt();A0(r,o,e,n,null,null)},$l.prototype.unmount=wf.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;A0(e.current,2,null,e,null,null),vl(),n[Hn]=null}};function $l(e){this._internalRoot=e}$l.prototype.unstable_scheduleHydration=function(e){if(e){var n=No();e={blockedOn:null,target:e,priority:n};for(var r=0;r<La.length&&n!==0&&n<La[r].priority;r++);La.splice(r,0,e),r===0&&B0(e)}};var $0=a.version;if($0!=="19.2.3")throw Error(i(527,$0,"19.2.3"));B.findDOMNode=function(e){var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(i(188)):(e=Object.keys(e).join(","),Error(i(268,e)));return e=g(n),e=e!==null?y(e):null,e=e===null?null:e.stateNode,e};var ww={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:O,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ql=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ql.isDisabled&&ql.supportsFiber)try{Za=ql.inject(ww),St=ql}catch{}}return Hi.createRoot=function(e,n){if(!c(e))throw Error(i(299));var r=!1,o="",d=Pp,h=Zp,v=Qp;return n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onUncaughtError!==void 0&&(d=n.onUncaughtError),n.onCaughtError!==void 0&&(h=n.onCaughtError),n.onRecoverableError!==void 0&&(v=n.onRecoverableError)),n=T0(e,1,!1,null,null,r,o,null,d,h,v,U0),e[Hn]=n.current,tf(e),new wf(n)},Hi.hydrateRoot=function(e,n,r){if(!c(e))throw Error(i(299));var o=!1,d="",h=Pp,v=Zp,T=Qp,q=null;return r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(d=r.identifierPrefix),r.onUncaughtError!==void 0&&(h=r.onUncaughtError),r.onCaughtError!==void 0&&(v=r.onCaughtError),r.onRecoverableError!==void 0&&(T=r.onRecoverableError),r.formState!==void 0&&(q=r.formState)),n=T0(e,1,!0,n,r??null,o,d,q,h,v,T,U0),n.context=M0(null),r=n.current,o=Yt(),o=Xr(o),d=Na(o),d.callback=null,ja(r,d,o),r=o,n.current.lanes=r,Fa(n,r),En(n),e[Hn]=n.current,tf(e),new $l(n)},Hi.version="19.2.3",Hi}var F0;function Aw(){if(F0)return jf.exports;F0=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(a){console.error(a)}}return t(),jf.exports=Mw(),jf.exports}var kw=Aw();const Rw=vh(kw);var W0="popstate";function Dw(t={}){function a(i,c){let{pathname:u,search:f,hash:m}=i.location;return Qf("",{pathname:u,search:f,hash:m},c.state&&c.state.usr||null,c.state&&c.state.key||"default")}function s(i,c){return typeof c=="string"?c:Zi(c)}return Ow(a,s,null,t)}function Fe(t,a){if(t===!1||t===null||typeof t>"u")throw new Error(a)}function Gt(t,a){if(!t){typeof console<"u"&&console.warn(a);try{throw new Error(a)}catch{}}}function zw(){return Math.random().toString(36).substring(2,10)}function K0(t,a){return{usr:t.state,key:t.key,idx:a}}function Qf(t,a,s=null,i){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof a=="string"?Lr(a):a,state:s,key:a&&a.key||i||zw()}}function Zi({pathname:t="/",search:a="",hash:s=""}){return a&&a!=="?"&&(t+=a.charAt(0)==="?"?a:"?"+a),s&&s!=="#"&&(t+=s.charAt(0)==="#"?s:"#"+s),t}function Lr(t){let a={};if(t){let s=t.indexOf("#");s>=0&&(a.hash=t.substring(s),t=t.substring(0,s));let i=t.indexOf("?");i>=0&&(a.search=t.substring(i),t=t.substring(0,i)),t&&(a.pathname=t)}return a}function Ow(t,a,s,i={}){let{window:c=document.defaultView,v5Compat:u=!1}=i,f=c.history,m="POP",p=null,g=y();g==null&&(g=0,f.replaceState({...f.state,idx:g},""));function y(){return(f.state||{idx:null}).idx}function x(){m="POP";let N=y(),E=N==null?null:N-g;g=N,p&&p({action:m,location:A.location,delta:E})}function b(N,E){m="PUSH";let D=Qf(A.location,N,E);g=y()+1;let C=K0(D,g),k=A.createHref(D);try{f.pushState(C,"",k)}catch(w){if(w instanceof DOMException&&w.name==="DataCloneError")throw w;c.location.assign(k)}u&&p&&p({action:m,location:A.location,delta:1})}function S(N,E){m="REPLACE";let D=Qf(A.location,N,E);g=y();let C=K0(D,g),k=A.createHref(D);f.replaceState(C,"",k),u&&p&&p({action:m,location:A.location,delta:0})}function j(N){return Bw(N)}let A={get action(){return m},get location(){return t(c,f)},listen(N){if(p)throw new Error("A history only accepts one active listener");return c.addEventListener(W0,x),p=N,()=>{c.removeEventListener(W0,x),p=null}},createHref(N){return a(c,N)},createURL:j,encodeLocation(N){let E=j(N);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:b,replace:S,go(N){return f.go(N)}};return A}function Bw(t,a=!1){let s="http://localhost";typeof window<"u"&&(s=window.location.origin!=="null"?window.location.origin:window.location.href),Fe(s,"No window.location.(origin|href) available to create URL");let i=typeof t=="string"?t:Zi(t);return i=i.replace(/ $/,"%20"),!a&&i.startsWith("//")&&(i=s+i),new URL(i,s)}function Ry(t,a,s="/"){return Hw(t,a,s,!1)}function Hw(t,a,s,i){let c=typeof a=="string"?Lr(a):a,u=ia(c.pathname||"/",s);if(u==null)return null;let f=Dy(t);Lw(f);let m=null;for(let p=0;m==null&&p<f.length;++p){let g=Qw(u);m=Pw(f[p],g,i)}return m}function Dy(t,a=[],s=[],i="",c=!1){let u=(f,m,p=c,g)=>{let y={relativePath:g===void 0?f.path||"":g,caseSensitive:f.caseSensitive===!0,childrenIndex:m,route:f};if(y.relativePath.startsWith("/")){if(!y.relativePath.startsWith(i)&&p)return;Fe(y.relativePath.startsWith(i),`Absolute route path "${y.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),y.relativePath=y.relativePath.slice(i.length)}let x=ra([i,y.relativePath]),b=s.concat(y);f.children&&f.children.length>0&&(Fe(f.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${x}".`),Dy(f.children,a,b,x,p)),!(f.path==null&&!f.index)&&a.push({path:x,score:Gw(x,f.index),routesMeta:b})};return t.forEach((f,m)=>{if(f.path===""||!f.path?.includes("?"))u(f,m);else for(let p of zy(f.path))u(f,m,!0,p)}),a}function zy(t){let a=t.split("/");if(a.length===0)return[];let[s,...i]=a,c=s.endsWith("?"),u=s.replace(/\?$/,"");if(i.length===0)return c?[u,""]:[u];let f=zy(i.join("/")),m=[];return m.push(...f.map(p=>p===""?u:[u,p].join("/"))),c&&m.push(...f),m.map(p=>t.startsWith("/")&&p===""?"/":p)}function Lw(t){t.sort((a,s)=>a.score!==s.score?s.score-a.score:Iw(a.routesMeta.map(i=>i.childrenIndex),s.routesMeta.map(i=>i.childrenIndex)))}var Uw=/^:[\w-]+$/,$w=3,qw=2,Vw=1,Yw=10,Xw=-2,J0=t=>t==="*";function Gw(t,a){let s=t.split("/"),i=s.length;return s.some(J0)&&(i+=Xw),a&&(i+=qw),s.filter(c=>!J0(c)).reduce((c,u)=>c+(Uw.test(u)?$w:u===""?Vw:Yw),i)}function Iw(t,a){return t.length===a.length&&t.slice(0,-1).every((i,c)=>i===a[c])?t[t.length-1]-a[a.length-1]:0}function Pw(t,a,s=!1){let{routesMeta:i}=t,c={},u="/",f=[];for(let m=0;m<i.length;++m){let p=i[m],g=m===i.length-1,y=u==="/"?a:a.slice(u.length)||"/",x=xc({path:p.relativePath,caseSensitive:p.caseSensitive,end:g},y),b=p.route;if(!x&&g&&s&&!i[i.length-1].route.index&&(x=xc({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},y)),!x)return null;Object.assign(c,x.params),f.push({params:c,pathname:ra([u,x.pathname]),pathnameBase:Jw(ra([u,x.pathnameBase])),route:b}),x.pathnameBase!=="/"&&(u=ra([u,x.pathnameBase]))}return f}function xc(t,a){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[s,i]=Zw(t.path,t.caseSensitive,t.end),c=a.match(s);if(!c)return null;let u=c[0],f=u.replace(/(.)\/+$/,"$1"),m=c.slice(1);return{params:i.reduce((g,{paramName:y,isOptional:x},b)=>{if(y==="*"){let j=m[b]||"";f=u.slice(0,u.length-j.length).replace(/(.)\/+$/,"$1")}const S=m[b];return x&&!S?g[y]=void 0:g[y]=(S||"").replace(/%2F/g,"/"),g},{}),pathname:u,pathnameBase:f,pattern:t}}function Zw(t,a=!1,s=!0){Gt(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let i=[],c="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(f,m,p)=>(i.push({paramName:m,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(i.push({paramName:"*"}),c+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?c+="\\/*$":t!==""&&t!=="/"&&(c+="(?:(?=\\/|$))"),[new RegExp(c,a?void 0:"i"),i]}function Qw(t){try{return t.split("/").map(a=>decodeURIComponent(a).replace(/\//g,"%2F")).join("/")}catch(a){return Gt(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${a}).`),t}}function ia(t,a){if(a==="/")return t;if(!t.toLowerCase().startsWith(a.toLowerCase()))return null;let s=a.endsWith("/")?a.length-1:a.length,i=t.charAt(s);return i&&i!=="/"?null:t.slice(s)||"/"}var Oy=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Fw=t=>Oy.test(t);function Ww(t,a="/"){let{pathname:s,search:i="",hash:c=""}=typeof t=="string"?Lr(t):t,u;if(s)if(Fw(s))u=s;else{if(s.includes("//")){let f=s;s=s.replace(/\/\/+/g,"/"),Gt(!1,`Pathnames cannot have embedded double slashes - normalizing ${f} -> ${s}`)}s.startsWith("/")?u=ex(s.substring(1),"/"):u=ex(s,a)}else u=a;return{pathname:u,search:eS(i),hash:tS(c)}}function ex(t,a){let s=a.replace(/\/+$/,"").split("/");return t.split("/").forEach(c=>{c===".."?s.length>1&&s.pop():c!=="."&&s.push(c)}),s.length>1?s.join("/"):"/"}function Tf(t,a,s,i){return`Cannot include a '${t}' character in a manually specified \`to.${a}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${s}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Kw(t){return t.filter((a,s)=>s===0||a.route.path&&a.route.path.length>0)}function wh(t){let a=Kw(t);return a.map((s,i)=>i===a.length-1?s.pathname:s.pathnameBase)}function Sh(t,a,s,i=!1){let c;typeof t=="string"?c=Lr(t):(c={...t},Fe(!c.pathname||!c.pathname.includes("?"),Tf("?","pathname","search",c)),Fe(!c.pathname||!c.pathname.includes("#"),Tf("#","pathname","hash",c)),Fe(!c.search||!c.search.includes("#"),Tf("#","search","hash",c)));let u=t===""||c.pathname==="",f=u?"/":c.pathname,m;if(f==null)m=s;else{let x=a.length-1;if(!i&&f.startsWith("..")){let b=f.split("/");for(;b[0]==="..";)b.shift(),x-=1;c.pathname=b.join("/")}m=x>=0?a[x]:"/"}let p=Ww(c,m),g=f&&f!=="/"&&f.endsWith("/"),y=(u||f===".")&&s.endsWith("/");return!p.pathname.endsWith("/")&&(g||y)&&(p.pathname+="/"),p}var ra=t=>t.join("/").replace(/\/\/+/g,"/"),Jw=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),eS=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,tS=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t,nS=class{constructor(t,a,s,i=!1){this.status=t,this.statusText=a||"",this.internal=i,s instanceof Error?(this.data=s.toString(),this.error=s):this.data=s}};function aS(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}function sS(t){return t.map(a=>a.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var By=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Hy(t,a){let s=t;if(typeof s!="string"||!Oy.test(s))return{absoluteURL:void 0,isExternal:!1,to:s};let i=s,c=!1;if(By)try{let u=new URL(window.location.href),f=s.startsWith("//")?new URL(u.protocol+s):new URL(s),m=ia(f.pathname,a);f.origin===u.origin&&m!=null?s=m+f.search+f.hash:c=!0}catch{Gt(!1,`<Link to="${s}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:i,isExternal:c,to:s}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var Ly=["POST","PUT","PATCH","DELETE"];new Set(Ly);var rS=["GET",...Ly];new Set(rS);var Ur=_.createContext(null);Ur.displayName="DataRouter";var Oc=_.createContext(null);Oc.displayName="DataRouterState";var iS=_.createContext(!1),Uy=_.createContext({isTransitioning:!1});Uy.displayName="ViewTransition";var oS=_.createContext(new Map);oS.displayName="Fetchers";var lS=_.createContext(null);lS.displayName="Await";var Zt=_.createContext(null);Zt.displayName="Navigation";var io=_.createContext(null);io.displayName="Location";var rn=_.createContext({outlet:null,matches:[],isDataRoute:!1});rn.displayName="Route";var Nh=_.createContext(null);Nh.displayName="RouteError";var $y="REACT_ROUTER_ERROR",cS="REDIRECT",uS="ROUTE_ERROR_RESPONSE";function dS(t){if(t.startsWith(`${$y}:${cS}:{`))try{let a=JSON.parse(t.slice(28));if(typeof a=="object"&&a&&typeof a.status=="number"&&typeof a.statusText=="string"&&typeof a.location=="string"&&typeof a.reloadDocument=="boolean"&&typeof a.replace=="boolean")return a}catch{}}function fS(t){if(t.startsWith(`${$y}:${uS}:{`))try{let a=JSON.parse(t.slice(40));if(typeof a=="object"&&a&&typeof a.status=="number"&&typeof a.statusText=="string")return new nS(a.status,a.statusText,a.data)}catch{}}function hS(t,{relative:a}={}){Fe($r(),"useHref() may be used only in the context of a <Router> component.");let{basename:s,navigator:i}=_.useContext(Zt),{hash:c,pathname:u,search:f}=oo(t,{relative:a}),m=u;return s!=="/"&&(m=u==="/"?s:ra([s,u])),i.createHref({pathname:m,search:f,hash:c})}function $r(){return _.useContext(io)!=null}function ca(){return Fe($r(),"useLocation() may be used only in the context of a <Router> component."),_.useContext(io).location}var qy="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Vy(t){_.useContext(Zt).static||_.useLayoutEffect(t)}function Ts(){let{isDataRoute:t}=_.useContext(rn);return t?MS():mS()}function mS(){Fe($r(),"useNavigate() may be used only in the context of a <Router> component.");let t=_.useContext(Ur),{basename:a,navigator:s}=_.useContext(Zt),{matches:i}=_.useContext(rn),{pathname:c}=ca(),u=JSON.stringify(wh(i)),f=_.useRef(!1);return Vy(()=>{f.current=!0}),_.useCallback((p,g={})=>{if(Gt(f.current,qy),!f.current)return;if(typeof p=="number"){s.go(p);return}let y=Sh(p,JSON.parse(u),c,g.relative==="path");t==null&&a!=="/"&&(y.pathname=y.pathname==="/"?a:ra([a,y.pathname])),(g.replace?s.replace:s.push)(y,g.state,g)},[a,s,u,c,t])}var pS=_.createContext(null);function gS(t){let a=_.useContext(rn).outlet;return _.useMemo(()=>a&&_.createElement(pS.Provider,{value:t},a),[a,t])}function xS(){let{matches:t}=_.useContext(rn),a=t[t.length-1];return a?a.params:{}}function oo(t,{relative:a}={}){let{matches:s}=_.useContext(rn),{pathname:i}=ca(),c=JSON.stringify(wh(s));return _.useMemo(()=>Sh(t,JSON.parse(c),i,a==="path"),[t,c,i,a])}function yS(t,a){return Yy(t,a)}function Yy(t,a,s,i,c){Fe($r(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:u}=_.useContext(Zt),{matches:f}=_.useContext(rn),m=f[f.length-1],p=m?m.params:{},g=m?m.pathname:"/",y=m?m.pathnameBase:"/",x=m&&m.route;{let D=x&&x.path||"";Gy(g,!x||D.endsWith("*")||D.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${g}" (under <Route path="${D}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${D}"> to <Route path="${D==="/"?"*":`${D}/*`}">.`)}let b=ca(),S;if(a){let D=typeof a=="string"?Lr(a):a;Fe(y==="/"||D.pathname?.startsWith(y),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${y}" but pathname "${D.pathname}" was given in the \`location\` prop.`),S=D}else S=b;let j=S.pathname||"/",A=j;if(y!=="/"){let D=y.replace(/^\//,"").split("/");A="/"+j.replace(/^\//,"").split("/").slice(D.length).join("/")}let N=Ry(t,{pathname:A});Gt(x||N!=null,`No routes matched location "${S.pathname}${S.search}${S.hash}" `),Gt(N==null||N[N.length-1].route.element!==void 0||N[N.length-1].route.Component!==void 0||N[N.length-1].route.lazy!==void 0,`Matched leaf route at location "${S.pathname}${S.search}${S.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let E=NS(N&&N.map(D=>Object.assign({},D,{params:Object.assign({},p,D.params),pathname:ra([y,u.encodeLocation?u.encodeLocation(D.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:D.pathname]),pathnameBase:D.pathnameBase==="/"?y:ra([y,u.encodeLocation?u.encodeLocation(D.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:D.pathnameBase])})),f,s,i,c);return a&&E?_.createElement(io.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...S},navigationType:"POP"}},E):E}function bS(){let t=TS(),a=aS(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),s=t instanceof Error?t.stack:null,i="rgba(200,200,200, 0.5)",c={padding:"0.5rem",backgroundColor:i},u={padding:"2px 4px",backgroundColor:i},f=null;return console.error("Error handled by React Router default ErrorBoundary:",t),f=_.createElement(_.Fragment,null,_.createElement("p",null," Hey developer "),_.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",_.createElement("code",{style:u},"ErrorBoundary")," or"," ",_.createElement("code",{style:u},"errorElement")," prop on your route.")),_.createElement(_.Fragment,null,_.createElement("h2",null,"Unexpected Application Error!"),_.createElement("h3",{style:{fontStyle:"italic"}},a),s?_.createElement("pre",{style:c},s):null,f)}var vS=_.createElement(bS,null),Xy=class extends _.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,a){return a.location!==t.location||a.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:a.error,location:a.location,revalidation:t.revalidation||a.revalidation}}componentDidCatch(t,a){this.props.onError?this.props.onError(t,a):console.error("React Router caught the following error during render",t)}render(){let t=this.state.error;if(this.context&&typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){const s=fS(t.digest);s&&(t=s)}let a=t!==void 0?_.createElement(rn.Provider,{value:this.props.routeContext},_.createElement(Nh.Provider,{value:t,children:this.props.component})):this.props.children;return this.context?_.createElement(wS,{error:t},a):a}};Xy.contextType=iS;var Mf=new WeakMap;function wS({children:t,error:a}){let{basename:s}=_.useContext(Zt);if(typeof a=="object"&&a&&"digest"in a&&typeof a.digest=="string"){let i=dS(a.digest);if(i){let c=Mf.get(a);if(c)throw c;let u=Hy(i.location,s);if(By&&!Mf.get(a))if(u.isExternal||i.reloadDocument)window.location.href=u.absoluteURL||u.to;else{const f=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(u.to,{replace:i.replace}));throw Mf.set(a,f),f}return _.createElement("meta",{httpEquiv:"refresh",content:`0;url=${u.absoluteURL||u.to}`})}}return t}function SS({routeContext:t,match:a,children:s}){let i=_.useContext(Ur);return i&&i.static&&i.staticContext&&(a.route.errorElement||a.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=a.route.id),_.createElement(rn.Provider,{value:t},s)}function NS(t,a=[],s=null,i=null,c=null){if(t==null){if(!s)return null;if(s.errors)t=s.matches;else if(a.length===0&&!s.initialized&&s.matches.length>0)t=s.matches;else return null}let u=t,f=s?.errors;if(f!=null){let y=u.findIndex(x=>x.route.id&&f?.[x.route.id]!==void 0);Fe(y>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(f).join(",")}`),u=u.slice(0,Math.min(u.length,y+1))}let m=!1,p=-1;if(s)for(let y=0;y<u.length;y++){let x=u[y];if((x.route.HydrateFallback||x.route.hydrateFallbackElement)&&(p=y),x.route.id){let{loaderData:b,errors:S}=s,j=x.route.loader&&!b.hasOwnProperty(x.route.id)&&(!S||S[x.route.id]===void 0);if(x.route.lazy||j){m=!0,p>=0?u=u.slice(0,p+1):u=[u[0]];break}}}let g=s&&i?(y,x)=>{i(y,{location:s.location,params:s.matches?.[0]?.params??{},unstable_pattern:sS(s.matches),errorInfo:x})}:void 0;return u.reduceRight((y,x,b)=>{let S,j=!1,A=null,N=null;s&&(S=f&&x.route.id?f[x.route.id]:void 0,A=x.route.errorElement||vS,m&&(p<0&&b===0?(Gy("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),j=!0,N=null):p===b&&(j=!0,N=x.route.hydrateFallbackElement||null)));let E=a.concat(u.slice(0,b+1)),D=()=>{let C;return S?C=A:j?C=N:x.route.Component?C=_.createElement(x.route.Component,null):x.route.element?C=x.route.element:C=y,_.createElement(SS,{match:x,routeContext:{outlet:y,matches:E,isDataRoute:s!=null},children:C})};return s&&(x.route.ErrorBoundary||x.route.errorElement||b===0)?_.createElement(Xy,{location:s.location,revalidation:s.revalidation,component:A,error:S,children:D(),routeContext:{outlet:null,matches:E,isDataRoute:!0},onError:g}):D()},null)}function jh(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function jS(t){let a=_.useContext(Ur);return Fe(a,jh(t)),a}function ES(t){let a=_.useContext(Oc);return Fe(a,jh(t)),a}function _S(t){let a=_.useContext(rn);return Fe(a,jh(t)),a}function Eh(t){let a=_S(t),s=a.matches[a.matches.length-1];return Fe(s.route.id,`${t} can only be used on routes that contain a unique "id"`),s.route.id}function CS(){return Eh("useRouteId")}function TS(){let t=_.useContext(Nh),a=ES("useRouteError"),s=Eh("useRouteError");return t!==void 0?t:a.errors?.[s]}function MS(){let{router:t}=jS("useNavigate"),a=Eh("useNavigate"),s=_.useRef(!1);return Vy(()=>{s.current=!0}),_.useCallback(async(c,u={})=>{Gt(s.current,qy),s.current&&(typeof c=="number"?await t.navigate(c):await t.navigate(c,{fromRouteId:a,...u}))},[t,a])}var tx={};function Gy(t,a,s){!a&&!tx[t]&&(tx[t]=!0,Gt(!1,s))}_.memo(AS);function AS({routes:t,future:a,state:s,onError:i}){return Yy(t,void 0,s,i,a)}function yc({to:t,replace:a,state:s,relative:i}){Fe($r(),"<Navigate> may be used only in the context of a <Router> component.");let{static:c}=_.useContext(Zt);Gt(!c,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:u}=_.useContext(rn),{pathname:f}=ca(),m=Ts(),p=Sh(t,wh(u),f,i==="path"),g=JSON.stringify(p);return _.useEffect(()=>{m(JSON.parse(g),{replace:a,state:s,relative:i})},[m,g,i,a,s]),null}function kS(t){return gS(t.context)}function Et(t){Fe(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function RS({basename:t="/",children:a=null,location:s,navigationType:i="POP",navigator:c,static:u=!1,unstable_useTransitions:f}){Fe(!$r(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let m=t.replace(/^\/*/,"/"),p=_.useMemo(()=>({basename:m,navigator:c,static:u,unstable_useTransitions:f,future:{}}),[m,c,u,f]);typeof s=="string"&&(s=Lr(s));let{pathname:g="/",search:y="",hash:x="",state:b=null,key:S="default"}=s,j=_.useMemo(()=>{let A=ia(g,m);return A==null?null:{location:{pathname:A,search:y,hash:x,state:b,key:S},navigationType:i}},[m,g,y,x,b,S,i]);return Gt(j!=null,`<Router basename="${m}"> is not able to match the URL "${g}${y}${x}" because it does not start with the basename, so the <Router> won't render anything.`),j==null?null:_.createElement(Zt.Provider,{value:p},_.createElement(io.Provider,{children:a,value:j}))}function DS({children:t,location:a}){return yS(Ff(t),a)}function Ff(t,a=[]){let s=[];return _.Children.forEach(t,(i,c)=>{if(!_.isValidElement(i))return;let u=[...a,c];if(i.type===_.Fragment){s.push.apply(s,Ff(i.props.children,u));return}Fe(i.type===Et,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Fe(!i.props.index||!i.props.children,"An index route cannot have child routes.");let f={id:i.props.id||u.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,middleware:i.props.middleware,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(f.children=Ff(i.props.children,u)),s.push(f)}),s}var rc="get",ic="application/x-www-form-urlencoded";function Bc(t){return typeof HTMLElement<"u"&&t instanceof HTMLElement}function zS(t){return Bc(t)&&t.tagName.toLowerCase()==="button"}function OS(t){return Bc(t)&&t.tagName.toLowerCase()==="form"}function BS(t){return Bc(t)&&t.tagName.toLowerCase()==="input"}function HS(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function LS(t,a){return t.button===0&&(!a||a==="_self")&&!HS(t)}function Wf(t=""){return new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((a,s)=>{let i=t[s];return a.concat(Array.isArray(i)?i.map(c=>[s,c]):[[s,i]])},[]))}function US(t,a){let s=Wf(t);return a&&a.forEach((i,c)=>{s.has(c)||a.getAll(c).forEach(u=>{s.append(c,u)})}),s}var Vl=null;function $S(){if(Vl===null)try{new FormData(document.createElement("form"),0),Vl=!1}catch{Vl=!0}return Vl}var qS=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Af(t){return t!=null&&!qS.has(t)?(Gt(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${ic}"`),null):t}function VS(t,a){let s,i,c,u,f;if(OS(t)){let m=t.getAttribute("action");i=m?ia(m,a):null,s=t.getAttribute("method")||rc,c=Af(t.getAttribute("enctype"))||ic,u=new FormData(t)}else if(zS(t)||BS(t)&&(t.type==="submit"||t.type==="image")){let m=t.form;if(m==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=t.getAttribute("formaction")||m.getAttribute("action");if(i=p?ia(p,a):null,s=t.getAttribute("formmethod")||m.getAttribute("method")||rc,c=Af(t.getAttribute("formenctype"))||Af(m.getAttribute("enctype"))||ic,u=new FormData(m,t),!$S()){let{name:g,type:y,value:x}=t;if(y==="image"){let b=g?`${g}.`:"";u.append(`${b}x`,"0"),u.append(`${b}y`,"0")}else g&&u.append(g,x)}}else{if(Bc(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');s=rc,i=null,c=ic,f=t}return u&&c==="text/plain"&&(f=u,u=void 0),{action:i,method:s.toLowerCase(),encType:c,formData:u,body:f}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function _h(t,a){if(t===!1||t===null||typeof t>"u")throw new Error(a)}function YS(t,a,s,i){let c=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return s?c.pathname.endsWith("/")?c.pathname=`${c.pathname}_.${i}`:c.pathname=`${c.pathname}.${i}`:c.pathname==="/"?c.pathname=`_root.${i}`:a&&ia(c.pathname,a)==="/"?c.pathname=`${a.replace(/\/$/,"")}/_root.${i}`:c.pathname=`${c.pathname.replace(/\/$/,"")}.${i}`,c}async function XS(t,a){if(t.id in a)return a[t.id];try{let s=await import(t.module);return a[t.id]=s,s}catch(s){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(s),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function GS(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function IS(t,a,s){let i=await Promise.all(t.map(async c=>{let u=a.routes[c.route.id];if(u){let f=await XS(u,s);return f.links?f.links():[]}return[]}));return FS(i.flat(1).filter(GS).filter(c=>c.rel==="stylesheet"||c.rel==="preload").map(c=>c.rel==="stylesheet"?{...c,rel:"prefetch",as:"style"}:{...c,rel:"prefetch"}))}function nx(t,a,s,i,c,u){let f=(p,g)=>s[g]?p.route.id!==s[g].route.id:!0,m=(p,g)=>s[g].pathname!==p.pathname||s[g].route.path?.endsWith("*")&&s[g].params["*"]!==p.params["*"];return u==="assets"?a.filter((p,g)=>f(p,g)||m(p,g)):u==="data"?a.filter((p,g)=>{let y=i.routes[p.route.id];if(!y||!y.hasLoader)return!1;if(f(p,g)||m(p,g))return!0;if(p.route.shouldRevalidate){let x=p.route.shouldRevalidate({currentUrl:new URL(c.pathname+c.search+c.hash,window.origin),currentParams:s[0]?.params||{},nextUrl:new URL(t,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof x=="boolean")return x}return!0}):[]}function PS(t,a,{includeHydrateFallback:s}={}){return ZS(t.map(i=>{let c=a.routes[i.route.id];if(!c)return[];let u=[c.module];return c.clientActionModule&&(u=u.concat(c.clientActionModule)),c.clientLoaderModule&&(u=u.concat(c.clientLoaderModule)),s&&c.hydrateFallbackModule&&(u=u.concat(c.hydrateFallbackModule)),c.imports&&(u=u.concat(c.imports)),u}).flat(1))}function ZS(t){return[...new Set(t)]}function QS(t){let a={},s=Object.keys(t).sort();for(let i of s)a[i]=t[i];return a}function FS(t,a){let s=new Set;return new Set(a),t.reduce((i,c)=>{let u=JSON.stringify(QS(c));return s.has(u)||(s.add(u),i.push({key:u,link:c})),i},[])}function Iy(){let t=_.useContext(Ur);return _h(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function WS(){let t=_.useContext(Oc);return _h(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var Ch=_.createContext(void 0);Ch.displayName="FrameworkContext";function Py(){let t=_.useContext(Ch);return _h(t,"You must render this element inside a <HydratedRouter> element"),t}function KS(t,a){let s=_.useContext(Ch),[i,c]=_.useState(!1),[u,f]=_.useState(!1),{onFocus:m,onBlur:p,onMouseEnter:g,onMouseLeave:y,onTouchStart:x}=a,b=_.useRef(null);_.useEffect(()=>{if(t==="render"&&f(!0),t==="viewport"){let A=E=>{E.forEach(D=>{f(D.isIntersecting)})},N=new IntersectionObserver(A,{threshold:.5});return b.current&&N.observe(b.current),()=>{N.disconnect()}}},[t]),_.useEffect(()=>{if(i){let A=setTimeout(()=>{f(!0)},100);return()=>{clearTimeout(A)}}},[i]);let S=()=>{c(!0)},j=()=>{c(!1),f(!1)};return s?t!=="intent"?[u,b,{}]:[u,b,{onFocus:Li(m,S),onBlur:Li(p,j),onMouseEnter:Li(g,S),onMouseLeave:Li(y,j),onTouchStart:Li(x,S)}]:[!1,b,{}]}function Li(t,a){return s=>{t&&t(s),s.defaultPrevented||a(s)}}function JS({page:t,...a}){let{router:s}=Iy(),i=_.useMemo(()=>Ry(s.routes,t,s.basename),[s.routes,t,s.basename]);return i?_.createElement(tN,{page:t,matches:i,...a}):null}function eN(t){let{manifest:a,routeModules:s}=Py(),[i,c]=_.useState([]);return _.useEffect(()=>{let u=!1;return IS(t,a,s).then(f=>{u||c(f)}),()=>{u=!0}},[t,a,s]),i}function tN({page:t,matches:a,...s}){let i=ca(),{future:c,manifest:u,routeModules:f}=Py(),{basename:m}=Iy(),{loaderData:p,matches:g}=WS(),y=_.useMemo(()=>nx(t,a,g,u,i,"data"),[t,a,g,u,i]),x=_.useMemo(()=>nx(t,a,g,u,i,"assets"),[t,a,g,u,i]),b=_.useMemo(()=>{if(t===i.pathname+i.search+i.hash)return[];let A=new Set,N=!1;if(a.forEach(D=>{let C=u.routes[D.route.id];!C||!C.hasLoader||(!y.some(k=>k.route.id===D.route.id)&&D.route.id in p&&f[D.route.id]?.shouldRevalidate||C.hasClientLoader?N=!0:A.add(D.route.id))}),A.size===0)return[];let E=YS(t,m,c.unstable_trailingSlashAwareDataRequests,"data");return N&&A.size>0&&E.searchParams.set("_routes",a.filter(D=>A.has(D.route.id)).map(D=>D.route.id).join(",")),[E.pathname+E.search]},[m,c.unstable_trailingSlashAwareDataRequests,p,i,u,y,a,t,f]),S=_.useMemo(()=>PS(x,u),[x,u]),j=eN(x);return _.createElement(_.Fragment,null,b.map(A=>_.createElement("link",{key:A,rel:"prefetch",as:"fetch",href:A,...s})),S.map(A=>_.createElement("link",{key:A,rel:"modulepreload",href:A,...s})),j.map(({key:A,link:N})=>_.createElement("link",{key:A,nonce:s.nonce,...N})))}function nN(...t){return a=>{t.forEach(s=>{typeof s=="function"?s(a):s!=null&&(s.current=a)})}}var aN=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{aN&&(window.__reactRouterVersion="7.12.0")}catch{}function sN({basename:t,children:a,unstable_useTransitions:s,window:i}){let c=_.useRef();c.current==null&&(c.current=Dw({window:i,v5Compat:!0}));let u=c.current,[f,m]=_.useState({action:u.action,location:u.location}),p=_.useCallback(g=>{s===!1?m(g):_.startTransition(()=>m(g))},[s]);return _.useLayoutEffect(()=>u.listen(p),[u,p]),_.createElement(RS,{basename:t,children:a,location:f.location,navigationType:f.action,navigator:u,unstable_useTransitions:s})}var Zy=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,bs=_.forwardRef(function({onClick:a,discover:s="render",prefetch:i="none",relative:c,reloadDocument:u,replace:f,state:m,target:p,to:g,preventScrollReset:y,viewTransition:x,unstable_defaultShouldRevalidate:b,...S},j){let{basename:A,unstable_useTransitions:N}=_.useContext(Zt),E=typeof g=="string"&&Zy.test(g),D=Hy(g,A);g=D.to;let C=hS(g,{relative:c}),[k,w,z]=KS(i,S),M=oN(g,{replace:f,state:m,target:p,preventScrollReset:y,relative:c,viewTransition:x,unstable_defaultShouldRevalidate:b,unstable_useTransitions:N});function Y(ne){a&&a(ne),ne.defaultPrevented||M(ne)}let U=_.createElement("a",{...S,...z,href:D.absoluteURL||C,onClick:D.isExternal||u?a:Y,ref:nN(j,w),target:p,"data-discover":!E&&s==="render"?"true":void 0});return k&&!E?_.createElement(_.Fragment,null,U,_.createElement(JS,{page:C})):U});bs.displayName="Link";var Qy=_.forwardRef(function({"aria-current":a="page",caseSensitive:s=!1,className:i="",end:c=!1,style:u,to:f,viewTransition:m,children:p,...g},y){let x=oo(f,{relative:g.relative}),b=ca(),S=_.useContext(Oc),{navigator:j,basename:A}=_.useContext(Zt),N=S!=null&&hN(x)&&m===!0,E=j.encodeLocation?j.encodeLocation(x).pathname:x.pathname,D=b.pathname,C=S&&S.navigation&&S.navigation.location?S.navigation.location.pathname:null;s||(D=D.toLowerCase(),C=C?C.toLowerCase():null,E=E.toLowerCase()),C&&A&&(C=ia(C,A)||C);const k=E!=="/"&&E.endsWith("/")?E.length-1:E.length;let w=D===E||!c&&D.startsWith(E)&&D.charAt(k)==="/",z=C!=null&&(C===E||!c&&C.startsWith(E)&&C.charAt(E.length)==="/"),M={isActive:w,isPending:z,isTransitioning:N},Y=w?a:void 0,U;typeof i=="function"?U=i(M):U=[i,w?"active":null,z?"pending":null,N?"transitioning":null].filter(Boolean).join(" ");let ne=typeof u=="function"?u(M):u;return _.createElement(bs,{...g,"aria-current":Y,className:U,ref:y,style:ne,to:f,viewTransition:m},typeof p=="function"?p(M):p)});Qy.displayName="NavLink";var rN=_.forwardRef(({discover:t="render",fetcherKey:a,navigate:s,reloadDocument:i,replace:c,state:u,method:f=rc,action:m,onSubmit:p,relative:g,preventScrollReset:y,viewTransition:x,unstable_defaultShouldRevalidate:b,...S},j)=>{let{unstable_useTransitions:A}=_.useContext(Zt),N=dN(),E=fN(m,{relative:g}),D=f.toLowerCase()==="get"?"get":"post",C=typeof m=="string"&&Zy.test(m),k=w=>{if(p&&p(w),w.defaultPrevented)return;w.preventDefault();let z=w.nativeEvent.submitter,M=z?.getAttribute("formmethod")||f,Y=()=>N(z||w.currentTarget,{fetcherKey:a,method:M,navigate:s,replace:c,state:u,relative:g,preventScrollReset:y,viewTransition:x,unstable_defaultShouldRevalidate:b});A&&s!==!1?_.startTransition(()=>Y()):Y()};return _.createElement("form",{ref:j,method:D,action:E,onSubmit:i?p:k,...S,"data-discover":!C&&t==="render"?"true":void 0})});rN.displayName="Form";function iN(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Fy(t){let a=_.useContext(Ur);return Fe(a,iN(t)),a}function oN(t,{target:a,replace:s,state:i,preventScrollReset:c,relative:u,viewTransition:f,unstable_defaultShouldRevalidate:m,unstable_useTransitions:p}={}){let g=Ts(),y=ca(),x=oo(t,{relative:u});return _.useCallback(b=>{if(LS(b,a)){b.preventDefault();let S=s!==void 0?s:Zi(y)===Zi(x),j=()=>g(t,{replace:S,state:i,preventScrollReset:c,relative:u,viewTransition:f,unstable_defaultShouldRevalidate:m});p?_.startTransition(()=>j()):j()}},[y,g,x,s,i,a,t,c,u,f,m,p])}function lN(t){Gt(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let a=_.useRef(Wf(t)),s=_.useRef(!1),i=ca(),c=_.useMemo(()=>US(i.search,s.current?null:a.current),[i.search]),u=Ts(),f=_.useCallback((m,p)=>{const g=Wf(typeof m=="function"?m(new URLSearchParams(c)):m);s.current=!0,u("?"+g,p)},[u,c]);return[c,f]}var cN=0,uN=()=>`__${String(++cN)}__`;function dN(){let{router:t}=Fy("useSubmit"),{basename:a}=_.useContext(Zt),s=CS(),i=t.fetch,c=t.navigate;return _.useCallback(async(u,f={})=>{let{action:m,method:p,encType:g,formData:y,body:x}=VS(u,a);if(f.navigate===!1){let b=f.fetcherKey||uN();await i(b,s,f.action||m,{unstable_defaultShouldRevalidate:f.unstable_defaultShouldRevalidate,preventScrollReset:f.preventScrollReset,formData:y,body:x,formMethod:f.method||p,formEncType:f.encType||g,flushSync:f.flushSync})}else await c(f.action||m,{unstable_defaultShouldRevalidate:f.unstable_defaultShouldRevalidate,preventScrollReset:f.preventScrollReset,formData:y,body:x,formMethod:f.method||p,formEncType:f.encType||g,replace:f.replace,state:f.state,fromRouteId:s,flushSync:f.flushSync,viewTransition:f.viewTransition})},[i,c,a,s])}function fN(t,{relative:a}={}){let{basename:s}=_.useContext(Zt),i=_.useContext(rn);Fe(i,"useFormAction must be used inside a RouteContext");let[c]=i.matches.slice(-1),u={...oo(t||".",{relative:a})},f=ca();if(t==null){u.search=f.search;let m=new URLSearchParams(u.search),p=m.getAll("index");if(p.some(y=>y==="")){m.delete("index"),p.filter(x=>x).forEach(x=>m.append("index",x));let y=m.toString();u.search=y?`?${y}`:""}}return(!t||t===".")&&c.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),s!=="/"&&(u.pathname=u.pathname==="/"?s:ra([s,u.pathname])),Zi(u)}function hN(t,{relative:a}={}){let s=_.useContext(Uy);Fe(s!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=Fy("useViewTransitionState"),c=oo(t,{relative:a});if(!s.isTransitioning)return!1;let u=ia(s.currentLocation.pathname,i)||s.currentLocation.pathname,f=ia(s.nextLocation.pathname,i)||s.nextLocation.pathname;return xc(c.pathname,f)!=null||xc(c.pathname,u)!=null}ky();const ax=t=>{let a;const s=new Set,i=(g,y)=>{const x=typeof g=="function"?g(a):g;if(!Object.is(x,a)){const b=a;a=y??(typeof x!="object"||x===null)?x:Object.assign({},a,x),s.forEach(S=>S(a,b))}},c=()=>a,m={setState:i,getState:c,getInitialState:()=>p,subscribe:g=>(s.add(g),()=>s.delete(g))},p=a=t(i,c,m);return m},mN=(t=>t?ax(t):ax),pN=t=>t;function gN(t,a=pN){const s=br.useSyncExternalStore(t.subscribe,br.useCallback(()=>a(t.getState()),[t,a]),br.useCallback(()=>a(t.getInitialState()),[t,a]));return br.useDebugValue(s),s}const sx=t=>{const a=mN(t),s=i=>gN(a,i);return Object.assign(s,a),s},Wy=(t=>t?sx(t):sx);function xN(t,a){let s;try{s=t()}catch{return}return{getItem:c=>{var u;const f=p=>p===null?null:JSON.parse(p,void 0),m=(u=s.getItem(c))!=null?u:null;return m instanceof Promise?m.then(f):f(m)},setItem:(c,u)=>s.setItem(c,JSON.stringify(u,void 0)),removeItem:c=>s.removeItem(c)}}const Kf=t=>a=>{try{const s=t(a);return s instanceof Promise?s:{then(i){return Kf(i)(s)},catch(i){return this}}}catch(s){return{then(i){return this},catch(i){return Kf(i)(s)}}}},yN=(t,a)=>(s,i,c)=>{let u={storage:xN(()=>localStorage),partialize:N=>N,version:0,merge:(N,E)=>({...E,...N}),...a},f=!1,m=0;const p=new Set,g=new Set;let y=u.storage;if(!y)return t((...N)=>{console.warn(`[zustand persist middleware] Unable to update item '${u.name}', the given storage is currently unavailable.`),s(...N)},i,c);const x=()=>{const N=u.partialize({...i()});return y.setItem(u.name,{state:N,version:u.version})},b=c.setState;c.setState=(N,E)=>(b(N,E),x());const S=t((...N)=>(s(...N),x()),i,c);c.getInitialState=()=>S;let j;const A=()=>{var N,E;if(!y)return;const D=++m;f=!1,p.forEach(k=>{var w;return k((w=i())!=null?w:S)});const C=((E=u.onRehydrateStorage)==null?void 0:E.call(u,(N=i())!=null?N:S))||void 0;return Kf(y.getItem.bind(y))(u.name).then(k=>{if(k)if(typeof k.version=="number"&&k.version!==u.version){if(u.migrate){const w=u.migrate(k.state,k.version);return w instanceof Promise?w.then(z=>[!0,z]):[!0,w]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,k.state];return[!1,void 0]}).then(k=>{var w;if(D!==m)return;const[z,M]=k;if(j=u.merge(M,(w=i())!=null?w:S),s(j,!0),z)return x()}).then(()=>{D===m&&(C?.(j,void 0),j=i(),f=!0,g.forEach(k=>k(j)))}).catch(k=>{D===m&&C?.(void 0,k)})};return c.persist={setOptions:N=>{u={...u,...N},N.storage&&(y=N.storage)},clearStorage:()=>{y?.removeItem(u.name)},getOptions:()=>u,rehydrate:()=>A(),hasHydrated:()=>f,onHydrate:N=>(p.add(N),()=>{p.delete(N)}),onFinishHydration:N=>(g.add(N),()=>{g.delete(N)})},u.skipHydration||A(),j||S},bN=yN,It=Wy(bN(t=>({user:null,agent:null,token:null,basicToken:null,isAuthenticated:!1,login:(a,s,i)=>{t({user:a,agent:a,token:s,basicToken:i,isAuthenticated:!0})},logout:()=>{t({user:null,agent:null,token:null,basicToken:null,isAuthenticated:!1})}}),{name:"auth-storage"}));const vN=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),wN=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(a,s,i)=>i?i.toUpperCase():s.toLowerCase()),rx=t=>{const a=wN(t);return a.charAt(0).toUpperCase()+a.slice(1)},Ky=(...t)=>t.filter((a,s,i)=>!!a&&a.trim()!==""&&i.indexOf(a)===s).join(" ").trim(),SN=t=>{for(const a in t)if(a.startsWith("aria-")||a==="role"||a==="title")return!0};var NN={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const jN=_.forwardRef(({color:t="currentColor",size:a=24,strokeWidth:s=2,absoluteStrokeWidth:i,className:c="",children:u,iconNode:f,...m},p)=>_.createElement("svg",{ref:p,...NN,width:a,height:a,stroke:t,strokeWidth:i?Number(s)*24/Number(a):s,className:Ky("lucide",c),...!u&&!SN(m)&&{"aria-hidden":"true"},...m},[...f.map(([g,y])=>_.createElement(g,y)),...Array.isArray(u)?u:[u]]));const je=(t,a)=>{const s=_.forwardRef(({className:i,...c},u)=>_.createElement(jN,{ref:u,iconNode:a,className:Ky(`lucide-${vN(rx(t))}`,`lucide-${t}`,i),...c}));return s.displayName=rx(t),s};const EN=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],ws=je("activity",EN);const _N=[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]],Th=je("arrow-right-left",_N);const CN=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],TN=je("arrow-right",CN);const MN=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],Mh=je("bot",MN);const AN=[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]],_r=je("building-2",AN);const kN=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],Jy=je("chart-column",kN);const RN=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],eb=je("chevron-right",RN);const DN=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],bc=je("circle-check-big",DN);const zN=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Ah=je("circle-x",zN);const ON=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],vc=je("clock",ON);const BN=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],HN=je("download",BN);const LN=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],UN=je("eye-off",LN);const $N=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],qN=je("eye",$N);const VN=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],YN=je("file-text",VN);const XN=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],kh=je("funnel",XN);const GN=[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]],tb=je("git-branch",GN);const IN=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],PN=je("heart",IN);const ZN=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],QN=je("image",ZN);const FN=[["polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12",key:"o97t9d"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}]],nb=je("inbox",FN);const WN=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],KN=je("key",WN);const JN=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],ej=je("layout-dashboard",JN);const tj=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],nj=je("log-out",tj);const aj=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],sj=je("map-pin",aj);const rj=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],Cr=je("message-square",rj);const ij=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]],oj=je("mic",ij);const lj=[["path",{d:"M5 12h14",key:"1ays0h"}]],cj=je("minus",lj);const uj=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],Hc=je("phone",uj);const dj=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],ab=je("plus",dj);const fj=[["path",{d:"M16.247 7.761a6 6 0 0 1 0 8.478",key:"1fwjs5"}],["path",{d:"M19.075 4.933a10 10 0 0 1 0 14.134",key:"ehdyv1"}],["path",{d:"M4.925 19.067a10 10 0 0 1 0-14.134",key:"1q22gi"}],["path",{d:"M7.753 16.239a6 6 0 0 1 0-8.478",key:"r2q7qm"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],hj=je("radio",fj);const mj=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Rh=je("refresh-cw",mj);const pj=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],sb=je("search",pj);const gj=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],xj=je("send",gj);const yj=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],bj=je("shield",yj);const vj=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],rb=je("square-pen",vj);const wj=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],Sj=je("tag",wj);const Nj=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],ib=je("trash-2",Nj);const jj=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],Ej=je("trending-up",jj);const _j=[["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m14.305 16.53.923-.382",key:"1itpsq"}],["path",{d:"m15.228 13.852-.923-.383",key:"eplpkm"}],["path",{d:"m16.852 12.228-.383-.923",key:"13v3q0"}],["path",{d:"m16.852 17.772-.383.924",key:"1i8mnm"}],["path",{d:"m19.148 12.228.383-.923",key:"1q8j1v"}],["path",{d:"m19.53 18.696-.382-.924",key:"vk1qj3"}],["path",{d:"m20.772 13.852.924-.383",key:"n880s0"}],["path",{d:"m20.772 16.148.924.383",key:"1g6xey"}],["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Cj=je("user-cog",_j);const Tj=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],Tr=je("user-plus",Tj);const Mj=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Sr=je("user",Mj);const Aj=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Lc=je("users",Aj);const kj=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Dh=je("x",kj);function Rj(){const t=Ts(),{agent:a,logout:s}=It(),i=a?.role==="supervisor",c=[{to:"/dashboard",icon:ej,label:"Dashboard"},{to:"/conversations",icon:Cr,label:"Conversaciones"},...i?[{to:"/agents",icon:Cj,label:"Agentes"},{to:"/departments",icon:_r,label:"Departamentos"},{to:"/flows",icon:tb,label:"Flujos"},{to:"/logs",icon:ws,label:"Logs"},{to:"/leads",icon:Lc,label:"Leads"},{to:"/analytics",icon:Jy,label:"Analytics"},{to:"/monitor",icon:hj,label:"Monitor"}]:[]],u=()=>{s(),t("/login")},f=i?"Supervisor":"Agente";return l.jsxs("div",{className:"min-h-screen bg-gray-50 flex",children:[l.jsxs("aside",{className:"w-64 bg-white border-r border-gray-200 flex flex-col",children:[l.jsxs("div",{className:"h-16 flex items-center gap-3 px-6 border-b border-gray-200",children:[l.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-green-500 to-green-700 rounded-xl flex items-center justify-center",children:l.jsx(Mh,{className:"w-6 h-6 text-white"})}),l.jsxs("div",{children:[l.jsx("h1",{className:"font-bold text-gray-800",children:"WhatsApp Bot"}),l.jsx("p",{className:"text-xs text-gray-400",children:"Platform"})]})]}),l.jsx("nav",{className:"flex-1 p-4 space-y-1",children:c.map(({to:m,icon:p,label:g})=>l.jsxs(Qy,{to:m,className:({isActive:y})=>`flex items-center gap-3 px-4 py-3 rounded-lg transition ${y?"bg-green-50 text-green-600 font-medium":"text-gray-600 hover:bg-gray-100"}`,children:[l.jsx(p,{className:"w-5 h-5"}),l.jsx("span",{children:g})]},m))}),l.jsx("div",{className:"p-4 border-t border-gray-200",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center",style:{backgroundColor:a?.avatarColor||"#6366f1"},children:l.jsx("span",{className:"text-white font-medium text-sm",children:a?.name?.[0]?.toUpperCase()||a?.username?.[0]?.toUpperCase()||"A"})}),l.jsxs("div",{children:[l.jsx("p",{className:"font-medium text-gray-800 text-sm",children:a?.name||a?.username||"Admin"}),l.jsx("p",{className:"text-xs text-gray-400",children:f})]})]}),l.jsx("button",{onClick:u,className:"p-2 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded-lg transition",title:"Cerrar sesion",children:l.jsx(nj,{className:"w-5 h-5"})})]})})]}),l.jsx("main",{className:"flex-1 overflow-auto",children:l.jsx(kS,{})})]})}async function Dj(t,a){const s=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:t,password:a})});if(!s.ok){const c=await s.json().catch(()=>({}));throw new Error(c.error||"Credenciales invlidas")}const i=await s.json();return{agent:i.agent,token:i.token,basicToken:i.basicToken}}function zj(){const[t,a]=_.useState(""),[s,i]=_.useState(""),[c,u]=_.useState(""),[f,m]=_.useState(!1),p=Ts(),g=It(x=>x.login),y=async x=>{x.preventDefault(),u(""),m(!0);try{const{agent:b,token:S,basicToken:j}=await Dj(t,s);g(b,S,j),p("/dashboard")}catch(b){u(b.message||"Error al iniciar sesin")}finally{m(!1)}};return l.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-50 to-green-100 flex items-center justify-center p-5",children:l.jsxs("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-md p-10",children:[l.jsxs("div",{className:"text-center mb-8",children:[l.jsx("div",{className:"w-18 h-18 bg-gradient-to-br from-green-500 to-green-700 rounded-2xl flex items-center justify-center mx-auto mb-5 p-4",children:l.jsx("svg",{className:"w-11 h-11 text-white",fill:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})})}),l.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"WhatsApp Bot Platform"}),l.jsx("p",{className:"text-gray-500 text-sm",children:"Ingresa tus credenciales para continuar"})]}),l.jsxs("form",{onSubmit:y,children:[c&&l.jsx("div",{className:"bg-red-50 text-red-600 px-4 py-3 rounded-xl text-sm mb-5 border border-red-200",children:c}),l.jsxs("div",{className:"mb-5",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Usuario"}),l.jsx("input",{type:"text",value:t,onChange:x=>a(x.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl text-base outline-none transition-colors focus:border-green-500",placeholder:"admin",required:!0})]}),l.jsxs("div",{className:"mb-6",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Contrasea"}),l.jsx("input",{type:"password",value:s,onChange:x=>i(x.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl text-base outline-none transition-colors focus:border-green-500",placeholder:"",required:!0})]}),l.jsx("button",{type:"submit",disabled:f,className:"w-full bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white font-semibold py-3.5 px-5 rounded-xl text-base transition-all shadow-lg shadow-green-500/30 disabled:opacity-60 disabled:cursor-not-allowed",children:f?"Ingresando...":"Ingresar"})]}),l.jsx("p",{className:"text-center text-gray-400 text-xs mt-8",children:"Respaldos Chile  2025"})]})})}const lo=()=>{const t=It.getState().token;return{"Content-Type":"application/json",...t?{Authorization:`Bearer ${t}`}:{}}};async function ob(t,a){const s=new URLSearchParams;t&&s.set("filter",t);const i=s.toString(),c=await fetch(`/api/chat/conversations${i?"?"+i:""}`,{headers:lo()});if(!c.ok)throw new Error("Error loading conversations");return c.json()}async function Oj(t){const a=await fetch(`/api/chat/conversations/${encodeURIComponent(t)}`,{headers:lo()});if(!a.ok)throw new Error("Error loading conversation");return a.json()}async function Bj(t,a){const s=await fetch("/api/chat/send",{method:"POST",headers:lo(),body:JSON.stringify({to:t,message:a})});if(!s.ok)throw new Error("Error sending message");return s.json()}async function ix(t){const a=await fetch("/api/chat/mark-read",{method:"POST",headers:lo(),body:JSON.stringify({phone:t})});if(!a.ok)throw new Error("Error marking as read");return a.json()}async function Hj(){const t=await fetch("/api/chatbot/stats",{headers:lo()});if(!t.ok)throw new Error("Error loading stats");return t.json()}function Yl({title:t,value:a,icon:s,color:i="green",subtitle:c}){const u={green:"bg-green-50 text-green-600",blue:"bg-blue-50 text-blue-600",yellow:"bg-yellow-50 text-yellow-600",purple:"bg-purple-50 text-purple-600",red:"bg-red-50 text-red-600"};return l.jsx("div",{className:"bg-white rounded-xl p-6 border border-gray-100 shadow-sm",children:l.jsxs("div",{className:"flex items-start justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-500 font-medium",children:t}),l.jsx("p",{className:"text-3xl font-bold text-gray-800 mt-2",children:a}),c&&l.jsx("p",{className:"text-xs text-gray-400 mt-1",children:c})]}),s&&l.jsx("div",{className:`p-3 rounded-xl ${u[i]}`,children:l.jsx(s,{className:"w-6 h-6"})})]})})}const lb=6048e5,Lj=864e5,Xl=43200,ox=1440,lx=Symbol.for("constructDateFrom");function oa(t,a){return typeof t=="function"?t(a):t&&typeof t=="object"&&lx in t?t[lx](a):t instanceof Date?new t.constructor(a):new Date(a)}function mt(t,a){return oa(a||t,t)}let Uj={};function co(){return Uj}function Qi(t,a){const s=co(),i=a?.weekStartsOn??a?.locale?.options?.weekStartsOn??s.weekStartsOn??s.locale?.options?.weekStartsOn??0,c=mt(t,a?.in),u=c.getDay(),f=(u<i?7:0)+u-i;return c.setDate(c.getDate()-f),c.setHours(0,0,0,0),c}function wc(t,a){return Qi(t,{...a,weekStartsOn:1})}function cb(t,a){const s=mt(t,a?.in),i=s.getFullYear(),c=oa(s,0);c.setFullYear(i+1,0,4),c.setHours(0,0,0,0);const u=wc(c),f=oa(s,0);f.setFullYear(i,0,4),f.setHours(0,0,0,0);const m=wc(f);return s.getTime()>=u.getTime()?i+1:s.getTime()>=m.getTime()?i:i-1}function Sc(t){const a=mt(t),s=new Date(Date.UTC(a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes(),a.getSeconds(),a.getMilliseconds()));return s.setUTCFullYear(a.getFullYear()),+t-+s}function Uc(t,...a){const s=oa.bind(null,t||a.find(i=>typeof i=="object"));return a.map(s)}function cx(t,a){const s=mt(t,a?.in);return s.setHours(0,0,0,0),s}function $j(t,a,s){const[i,c]=Uc(s?.in,t,a),u=cx(i),f=cx(c),m=+u-Sc(u),p=+f-Sc(f);return Math.round((m-p)/Lj)}function qj(t,a){const s=cb(t,a),i=oa(t,0);return i.setFullYear(s,0,4),i.setHours(0,0,0,0),wc(i)}function oc(t,a){const s=+mt(t)-+mt(a);return s<0?-1:s>0?1:s}function Vj(t){return oa(t,Date.now())}function Yj(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function Xj(t){return!(!Yj(t)&&typeof t!="number"||isNaN(+mt(t)))}function Gj(t,a,s){const[i,c]=Uc(s?.in,t,a),u=i.getFullYear()-c.getFullYear(),f=i.getMonth()-c.getMonth();return u*12+f}function Ij(t){return a=>{const i=(t?Math[t]:Math.trunc)(a);return i===0?0:i}}function Pj(t,a){return+mt(t)-+mt(a)}function Zj(t,a){const s=mt(t,a?.in);return s.setHours(23,59,59,999),s}function Qj(t,a){const s=mt(t,a?.in),i=s.getMonth();return s.setFullYear(s.getFullYear(),i+1,0),s.setHours(23,59,59,999),s}function Fj(t,a){const s=mt(t,a?.in);return+Zj(s,a)==+Qj(s,a)}function Wj(t,a,s){const[i,c,u]=Uc(s?.in,t,t,a),f=oc(c,u),m=Math.abs(Gj(c,u));if(m<1)return 0;c.getMonth()===1&&c.getDate()>27&&c.setDate(30),c.setMonth(c.getMonth()-f*m);let p=oc(c,u)===-f;Fj(i)&&m===1&&oc(i,u)===1&&(p=!1);const g=f*(m-+p);return g===0?0:g}function Kj(t,a,s){const i=Pj(t,a)/1e3;return Ij(s?.roundingMethod)(i)}function Jj(t,a){const s=mt(t,a?.in);return s.setFullYear(s.getFullYear(),0,1),s.setHours(0,0,0,0),s}const e4={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},t4=(t,a,s)=>{let i;const c=e4[t];return typeof c=="string"?i=c:a===1?i=c.one:i=c.other.replace("{{count}}",a.toString()),s?.addSuffix?s.comparison&&s.comparison>0?"in "+i:i+" ago":i};function Nr(t){return(a={})=>{const s=a.width?String(a.width):t.defaultWidth;return t.formats[s]||t.formats[t.defaultWidth]}}const n4={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},a4={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},s4={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},r4={date:Nr({formats:n4,defaultWidth:"full"}),time:Nr({formats:a4,defaultWidth:"full"}),dateTime:Nr({formats:s4,defaultWidth:"full"})},i4={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},o4=(t,a,s,i)=>i4[t];function Cn(t){return(a,s)=>{const i=s?.context?String(s.context):"standalone";let c;if(i==="formatting"&&t.formattingValues){const f=t.defaultFormattingWidth||t.defaultWidth,m=s?.width?String(s.width):f;c=t.formattingValues[m]||t.formattingValues[f]}else{const f=t.defaultWidth,m=s?.width?String(s.width):t.defaultWidth;c=t.values[m]||t.values[f]}const u=t.argumentCallback?t.argumentCallback(a):a;return c[u]}}const l4={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},c4={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},u4={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},d4={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},f4={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},h4={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},m4=(t,a)=>{const s=Number(t),i=s%100;if(i>20||i<10)switch(i%10){case 1:return s+"st";case 2:return s+"nd";case 3:return s+"rd"}return s+"th"},p4={ordinalNumber:m4,era:Cn({values:l4,defaultWidth:"wide"}),quarter:Cn({values:c4,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Cn({values:u4,defaultWidth:"wide"}),day:Cn({values:d4,defaultWidth:"wide"}),dayPeriod:Cn({values:f4,defaultWidth:"wide",formattingValues:h4,defaultFormattingWidth:"wide"})};function Tn(t){return(a,s={})=>{const i=s.width,c=i&&t.matchPatterns[i]||t.matchPatterns[t.defaultMatchWidth],u=a.match(c);if(!u)return null;const f=u[0],m=i&&t.parsePatterns[i]||t.parsePatterns[t.defaultParseWidth],p=Array.isArray(m)?x4(m,x=>x.test(f)):g4(m,x=>x.test(f));let g;g=t.valueCallback?t.valueCallback(p):p,g=s.valueCallback?s.valueCallback(g):g;const y=a.slice(f.length);return{value:g,rest:y}}}function g4(t,a){for(const s in t)if(Object.prototype.hasOwnProperty.call(t,s)&&a(t[s]))return s}function x4(t,a){for(let s=0;s<t.length;s++)if(a(t[s]))return s}function ub(t){return(a,s={})=>{const i=a.match(t.matchPattern);if(!i)return null;const c=i[0],u=a.match(t.parsePattern);if(!u)return null;let f=t.valueCallback?t.valueCallback(u[0]):u[0];f=s.valueCallback?s.valueCallback(f):f;const m=a.slice(c.length);return{value:f,rest:m}}}const y4=/^(\d+)(th|st|nd|rd)?/i,b4=/\d+/i,v4={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},w4={any:[/^b/i,/^(a|c)/i]},S4={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},N4={any:[/1/i,/2/i,/3/i,/4/i]},j4={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},E4={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},_4={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},C4={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},T4={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},M4={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},A4={ordinalNumber:ub({matchPattern:y4,parsePattern:b4,valueCallback:t=>parseInt(t,10)}),era:Tn({matchPatterns:v4,defaultMatchWidth:"wide",parsePatterns:w4,defaultParseWidth:"any"}),quarter:Tn({matchPatterns:S4,defaultMatchWidth:"wide",parsePatterns:N4,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Tn({matchPatterns:j4,defaultMatchWidth:"wide",parsePatterns:E4,defaultParseWidth:"any"}),day:Tn({matchPatterns:_4,defaultMatchWidth:"wide",parsePatterns:C4,defaultParseWidth:"any"}),dayPeriod:Tn({matchPatterns:T4,defaultMatchWidth:"any",parsePatterns:M4,defaultParseWidth:"any"})},db={code:"en-US",formatDistance:t4,formatLong:r4,formatRelative:o4,localize:p4,match:A4,options:{weekStartsOn:0,firstWeekContainsDate:1}};function k4(t,a){const s=mt(t,a?.in);return $j(s,Jj(s))+1}function R4(t,a){const s=mt(t,a?.in),i=+wc(s)-+qj(s);return Math.round(i/lb)+1}function fb(t,a){const s=mt(t,a?.in),i=s.getFullYear(),c=co(),u=a?.firstWeekContainsDate??a?.locale?.options?.firstWeekContainsDate??c.firstWeekContainsDate??c.locale?.options?.firstWeekContainsDate??1,f=oa(a?.in||t,0);f.setFullYear(i+1,0,u),f.setHours(0,0,0,0);const m=Qi(f,a),p=oa(a?.in||t,0);p.setFullYear(i,0,u),p.setHours(0,0,0,0);const g=Qi(p,a);return+s>=+m?i+1:+s>=+g?i:i-1}function D4(t,a){const s=co(),i=a?.firstWeekContainsDate??a?.locale?.options?.firstWeekContainsDate??s.firstWeekContainsDate??s.locale?.options?.firstWeekContainsDate??1,c=fb(t,a),u=oa(a?.in||t,0);return u.setFullYear(c,0,i),u.setHours(0,0,0,0),Qi(u,a)}function z4(t,a){const s=mt(t,a?.in),i=+Qi(s,a)-+D4(s,a);return Math.round(i/lb)+1}function $e(t,a){const s=t<0?"-":"",i=Math.abs(t).toString().padStart(a,"0");return s+i}const $a={y(t,a){const s=t.getFullYear(),i=s>0?s:1-s;return $e(a==="yy"?i%100:i,a.length)},M(t,a){const s=t.getMonth();return a==="M"?String(s+1):$e(s+1,2)},d(t,a){return $e(t.getDate(),a.length)},a(t,a){const s=t.getHours()/12>=1?"pm":"am";switch(a){case"a":case"aa":return s.toUpperCase();case"aaa":return s;case"aaaaa":return s[0];default:return s==="am"?"a.m.":"p.m."}},h(t,a){return $e(t.getHours()%12||12,a.length)},H(t,a){return $e(t.getHours(),a.length)},m(t,a){return $e(t.getMinutes(),a.length)},s(t,a){return $e(t.getSeconds(),a.length)},S(t,a){const s=a.length,i=t.getMilliseconds(),c=Math.trunc(i*Math.pow(10,s-3));return $e(c,a.length)}},gr={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},ux={G:function(t,a,s){const i=t.getFullYear()>0?1:0;switch(a){case"G":case"GG":case"GGG":return s.era(i,{width:"abbreviated"});case"GGGGG":return s.era(i,{width:"narrow"});default:return s.era(i,{width:"wide"})}},y:function(t,a,s){if(a==="yo"){const i=t.getFullYear(),c=i>0?i:1-i;return s.ordinalNumber(c,{unit:"year"})}return $a.y(t,a)},Y:function(t,a,s,i){const c=fb(t,i),u=c>0?c:1-c;if(a==="YY"){const f=u%100;return $e(f,2)}return a==="Yo"?s.ordinalNumber(u,{unit:"year"}):$e(u,a.length)},R:function(t,a){const s=cb(t);return $e(s,a.length)},u:function(t,a){const s=t.getFullYear();return $e(s,a.length)},Q:function(t,a,s){const i=Math.ceil((t.getMonth()+1)/3);switch(a){case"Q":return String(i);case"QQ":return $e(i,2);case"Qo":return s.ordinalNumber(i,{unit:"quarter"});case"QQQ":return s.quarter(i,{width:"abbreviated",context:"formatting"});case"QQQQQ":return s.quarter(i,{width:"narrow",context:"formatting"});default:return s.quarter(i,{width:"wide",context:"formatting"})}},q:function(t,a,s){const i=Math.ceil((t.getMonth()+1)/3);switch(a){case"q":return String(i);case"qq":return $e(i,2);case"qo":return s.ordinalNumber(i,{unit:"quarter"});case"qqq":return s.quarter(i,{width:"abbreviated",context:"standalone"});case"qqqqq":return s.quarter(i,{width:"narrow",context:"standalone"});default:return s.quarter(i,{width:"wide",context:"standalone"})}},M:function(t,a,s){const i=t.getMonth();switch(a){case"M":case"MM":return $a.M(t,a);case"Mo":return s.ordinalNumber(i+1,{unit:"month"});case"MMM":return s.month(i,{width:"abbreviated",context:"formatting"});case"MMMMM":return s.month(i,{width:"narrow",context:"formatting"});default:return s.month(i,{width:"wide",context:"formatting"})}},L:function(t,a,s){const i=t.getMonth();switch(a){case"L":return String(i+1);case"LL":return $e(i+1,2);case"Lo":return s.ordinalNumber(i+1,{unit:"month"});case"LLL":return s.month(i,{width:"abbreviated",context:"standalone"});case"LLLLL":return s.month(i,{width:"narrow",context:"standalone"});default:return s.month(i,{width:"wide",context:"standalone"})}},w:function(t,a,s,i){const c=z4(t,i);return a==="wo"?s.ordinalNumber(c,{unit:"week"}):$e(c,a.length)},I:function(t,a,s){const i=R4(t);return a==="Io"?s.ordinalNumber(i,{unit:"week"}):$e(i,a.length)},d:function(t,a,s){return a==="do"?s.ordinalNumber(t.getDate(),{unit:"date"}):$a.d(t,a)},D:function(t,a,s){const i=k4(t);return a==="Do"?s.ordinalNumber(i,{unit:"dayOfYear"}):$e(i,a.length)},E:function(t,a,s){const i=t.getDay();switch(a){case"E":case"EE":case"EEE":return s.day(i,{width:"abbreviated",context:"formatting"});case"EEEEE":return s.day(i,{width:"narrow",context:"formatting"});case"EEEEEE":return s.day(i,{width:"short",context:"formatting"});default:return s.day(i,{width:"wide",context:"formatting"})}},e:function(t,a,s,i){const c=t.getDay(),u=(c-i.weekStartsOn+8)%7||7;switch(a){case"e":return String(u);case"ee":return $e(u,2);case"eo":return s.ordinalNumber(u,{unit:"day"});case"eee":return s.day(c,{width:"abbreviated",context:"formatting"});case"eeeee":return s.day(c,{width:"narrow",context:"formatting"});case"eeeeee":return s.day(c,{width:"short",context:"formatting"});default:return s.day(c,{width:"wide",context:"formatting"})}},c:function(t,a,s,i){const c=t.getDay(),u=(c-i.weekStartsOn+8)%7||7;switch(a){case"c":return String(u);case"cc":return $e(u,a.length);case"co":return s.ordinalNumber(u,{unit:"day"});case"ccc":return s.day(c,{width:"abbreviated",context:"standalone"});case"ccccc":return s.day(c,{width:"narrow",context:"standalone"});case"cccccc":return s.day(c,{width:"short",context:"standalone"});default:return s.day(c,{width:"wide",context:"standalone"})}},i:function(t,a,s){const i=t.getDay(),c=i===0?7:i;switch(a){case"i":return String(c);case"ii":return $e(c,a.length);case"io":return s.ordinalNumber(c,{unit:"day"});case"iii":return s.day(i,{width:"abbreviated",context:"formatting"});case"iiiii":return s.day(i,{width:"narrow",context:"formatting"});case"iiiiii":return s.day(i,{width:"short",context:"formatting"});default:return s.day(i,{width:"wide",context:"formatting"})}},a:function(t,a,s){const c=t.getHours()/12>=1?"pm":"am";switch(a){case"a":case"aa":return s.dayPeriod(c,{width:"abbreviated",context:"formatting"});case"aaa":return s.dayPeriod(c,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return s.dayPeriod(c,{width:"narrow",context:"formatting"});default:return s.dayPeriod(c,{width:"wide",context:"formatting"})}},b:function(t,a,s){const i=t.getHours();let c;switch(i===12?c=gr.noon:i===0?c=gr.midnight:c=i/12>=1?"pm":"am",a){case"b":case"bb":return s.dayPeriod(c,{width:"abbreviated",context:"formatting"});case"bbb":return s.dayPeriod(c,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return s.dayPeriod(c,{width:"narrow",context:"formatting"});default:return s.dayPeriod(c,{width:"wide",context:"formatting"})}},B:function(t,a,s){const i=t.getHours();let c;switch(i>=17?c=gr.evening:i>=12?c=gr.afternoon:i>=4?c=gr.morning:c=gr.night,a){case"B":case"BB":case"BBB":return s.dayPeriod(c,{width:"abbreviated",context:"formatting"});case"BBBBB":return s.dayPeriod(c,{width:"narrow",context:"formatting"});default:return s.dayPeriod(c,{width:"wide",context:"formatting"})}},h:function(t,a,s){if(a==="ho"){let i=t.getHours()%12;return i===0&&(i=12),s.ordinalNumber(i,{unit:"hour"})}return $a.h(t,a)},H:function(t,a,s){return a==="Ho"?s.ordinalNumber(t.getHours(),{unit:"hour"}):$a.H(t,a)},K:function(t,a,s){const i=t.getHours()%12;return a==="Ko"?s.ordinalNumber(i,{unit:"hour"}):$e(i,a.length)},k:function(t,a,s){let i=t.getHours();return i===0&&(i=24),a==="ko"?s.ordinalNumber(i,{unit:"hour"}):$e(i,a.length)},m:function(t,a,s){return a==="mo"?s.ordinalNumber(t.getMinutes(),{unit:"minute"}):$a.m(t,a)},s:function(t,a,s){return a==="so"?s.ordinalNumber(t.getSeconds(),{unit:"second"}):$a.s(t,a)},S:function(t,a){return $a.S(t,a)},X:function(t,a,s){const i=t.getTimezoneOffset();if(i===0)return"Z";switch(a){case"X":return fx(i);case"XXXX":case"XX":return xs(i);default:return xs(i,":")}},x:function(t,a,s){const i=t.getTimezoneOffset();switch(a){case"x":return fx(i);case"xxxx":case"xx":return xs(i);default:return xs(i,":")}},O:function(t,a,s){const i=t.getTimezoneOffset();switch(a){case"O":case"OO":case"OOO":return"GMT"+dx(i,":");default:return"GMT"+xs(i,":")}},z:function(t,a,s){const i=t.getTimezoneOffset();switch(a){case"z":case"zz":case"zzz":return"GMT"+dx(i,":");default:return"GMT"+xs(i,":")}},t:function(t,a,s){const i=Math.trunc(+t/1e3);return $e(i,a.length)},T:function(t,a,s){return $e(+t,a.length)}};function dx(t,a=""){const s=t>0?"-":"+",i=Math.abs(t),c=Math.trunc(i/60),u=i%60;return u===0?s+String(c):s+String(c)+a+$e(u,2)}function fx(t,a){return t%60===0?(t>0?"-":"+")+$e(Math.abs(t)/60,2):xs(t,a)}function xs(t,a=""){const s=t>0?"-":"+",i=Math.abs(t),c=$e(Math.trunc(i/60),2),u=$e(i%60,2);return s+c+a+u}const hx=(t,a)=>{switch(t){case"P":return a.date({width:"short"});case"PP":return a.date({width:"medium"});case"PPP":return a.date({width:"long"});default:return a.date({width:"full"})}},hb=(t,a)=>{switch(t){case"p":return a.time({width:"short"});case"pp":return a.time({width:"medium"});case"ppp":return a.time({width:"long"});default:return a.time({width:"full"})}},O4=(t,a)=>{const s=t.match(/(P+)(p+)?/)||[],i=s[1],c=s[2];if(!c)return hx(t,a);let u;switch(i){case"P":u=a.dateTime({width:"short"});break;case"PP":u=a.dateTime({width:"medium"});break;case"PPP":u=a.dateTime({width:"long"});break;default:u=a.dateTime({width:"full"});break}return u.replace("{{date}}",hx(i,a)).replace("{{time}}",hb(c,a))},B4={p:hb,P:O4},H4=/^D+$/,L4=/^Y+$/,U4=["D","DD","YY","YYYY"];function $4(t){return H4.test(t)}function q4(t){return L4.test(t)}function V4(t,a,s){const i=Y4(t,a,s);if(console.warn(i),U4.includes(t))throw new RangeError(i)}function Y4(t,a,s){const i=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${a}\`) for formatting ${i} to the input \`${s}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const X4=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,G4=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,I4=/^'([^]*?)'?$/,P4=/''/g,Z4=/[a-zA-Z]/;function $c(t,a,s){const i=co(),c=s?.locale??i.locale??db,u=s?.firstWeekContainsDate??s?.locale?.options?.firstWeekContainsDate??i.firstWeekContainsDate??i.locale?.options?.firstWeekContainsDate??1,f=s?.weekStartsOn??s?.locale?.options?.weekStartsOn??i.weekStartsOn??i.locale?.options?.weekStartsOn??0,m=mt(t,s?.in);if(!Xj(m))throw new RangeError("Invalid time value");let p=a.match(G4).map(y=>{const x=y[0];if(x==="p"||x==="P"){const b=B4[x];return b(y,c.formatLong)}return y}).join("").match(X4).map(y=>{if(y==="''")return{isToken:!1,value:"'"};const x=y[0];if(x==="'")return{isToken:!1,value:Q4(y)};if(ux[x])return{isToken:!0,value:y};if(x.match(Z4))throw new RangeError("Format string contains an unescaped latin alphabet character `"+x+"`");return{isToken:!1,value:y}});c.localize.preprocessor&&(p=c.localize.preprocessor(m,p));const g={firstWeekContainsDate:u,weekStartsOn:f,locale:c};return p.map(y=>{if(!y.isToken)return y.value;const x=y.value;(!s?.useAdditionalWeekYearTokens&&q4(x)||!s?.useAdditionalDayOfYearTokens&&$4(x))&&V4(x,a,String(t));const b=ux[x[0]];return b(m,x,c.localize,g)}).join("")}function Q4(t){const a=t.match(I4);return a?a[1].replace(P4,"'"):t}function F4(t,a,s){const i=co(),c=s?.locale??i.locale??db,u=2520,f=oc(t,a);if(isNaN(f))throw new RangeError("Invalid time value");const m=Object.assign({},s,{addSuffix:s?.addSuffix,comparison:f}),[p,g]=Uc(s?.in,...f>0?[a,t]:[t,a]),y=Kj(g,p),x=(Sc(g)-Sc(p))/1e3,b=Math.round((y-x)/60);let S;if(b<2)return s?.includeSeconds?y<5?c.formatDistance("lessThanXSeconds",5,m):y<10?c.formatDistance("lessThanXSeconds",10,m):y<20?c.formatDistance("lessThanXSeconds",20,m):y<40?c.formatDistance("halfAMinute",0,m):y<60?c.formatDistance("lessThanXMinutes",1,m):c.formatDistance("xMinutes",1,m):b===0?c.formatDistance("lessThanXMinutes",1,m):c.formatDistance("xMinutes",b,m);if(b<45)return c.formatDistance("xMinutes",b,m);if(b<90)return c.formatDistance("aboutXHours",1,m);if(b<ox){const j=Math.round(b/60);return c.formatDistance("aboutXHours",j,m)}else{if(b<u)return c.formatDistance("xDays",1,m);if(b<Xl){const j=Math.round(b/ox);return c.formatDistance("xDays",j,m)}else if(b<Xl*2)return S=Math.round(b/Xl),c.formatDistance("aboutXMonths",S,m)}if(S=Wj(g,p),S<12){const j=Math.round(b/Xl);return c.formatDistance("xMonths",j,m)}else{const j=S%12,A=Math.trunc(S/12);return j<3?c.formatDistance("aboutXYears",A,m):j<9?c.formatDistance("overXYears",A,m):c.formatDistance("almostXYears",A+1,m)}}function qc(t,a){return F4(t,Vj(t),a)}const W4={lessThanXSeconds:{one:"menos de un segundo",other:"menos de {{count}} segundos"},xSeconds:{one:"1 segundo",other:"{{count}} segundos"},halfAMinute:"medio minuto",lessThanXMinutes:{one:"menos de un minuto",other:"menos de {{count}} minutos"},xMinutes:{one:"1 minuto",other:"{{count}} minutos"},aboutXHours:{one:"alrededor de 1 hora",other:"alrededor de {{count}} horas"},xHours:{one:"1 hora",other:"{{count}} horas"},xDays:{one:"1 da",other:"{{count}} das"},aboutXWeeks:{one:"alrededor de 1 semana",other:"alrededor de {{count}} semanas"},xWeeks:{one:"1 semana",other:"{{count}} semanas"},aboutXMonths:{one:"alrededor de 1 mes",other:"alrededor de {{count}} meses"},xMonths:{one:"1 mes",other:"{{count}} meses"},aboutXYears:{one:"alrededor de 1 ao",other:"alrededor de {{count}} aos"},xYears:{one:"1 ao",other:"{{count}} aos"},overXYears:{one:"ms de 1 ao",other:"ms de {{count}} aos"},almostXYears:{one:"casi 1 ao",other:"casi {{count}} aos"}},K4=(t,a,s)=>{let i;const c=W4[t];return typeof c=="string"?i=c:a===1?i=c.one:i=c.other.replace("{{count}}",a.toString()),s?.addSuffix?s.comparison&&s.comparison>0?"en "+i:"hace "+i:i},J4={full:"EEEE, d 'de' MMMM 'de' y",long:"d 'de' MMMM 'de' y",medium:"d MMM y",short:"dd/MM/y"},eE={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},tE={full:"{{date}} 'a las' {{time}}",long:"{{date}} 'a las' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},nE={date:Nr({formats:J4,defaultWidth:"full"}),time:Nr({formats:eE,defaultWidth:"full"}),dateTime:Nr({formats:tE,defaultWidth:"full"})},aE={lastWeek:"'el' eeee 'pasado a la' p",yesterday:"'ayer a la' p",today:"'hoy a la' p",tomorrow:"'maana a la' p",nextWeek:"eeee 'a la' p",other:"P"},sE={lastWeek:"'el' eeee 'pasado a las' p",yesterday:"'ayer a las' p",today:"'hoy a las' p",tomorrow:"'maana a las' p",nextWeek:"eeee 'a las' p",other:"P"},rE=(t,a,s,i)=>a.getHours()!==1?sE[t]:aE[t],iE={narrow:["AC","DC"],abbreviated:["AC","DC"],wide:["antes de cristo","despus de cristo"]},oE={narrow:["1","2","3","4"],abbreviated:["T1","T2","T3","T4"],wide:["1 trimestre","2 trimestre","3 trimestre","4 trimestre"]},lE={narrow:["e","f","m","a","m","j","j","a","s","o","n","d"],abbreviated:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"],wide:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"]},cE={narrow:["d","l","m","m","j","v","s"],short:["do","lu","ma","mi","ju","vi","s"],abbreviated:["dom","lun","mar","mi","jue","vie","sb"],wide:["domingo","lunes","martes","mircoles","jueves","viernes","sbado"]},uE={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"maana",afternoon:"tarde",evening:"tarde",night:"noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"maana",afternoon:"tarde",evening:"tarde",night:"noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"maana",afternoon:"tarde",evening:"tarde",night:"noche"}},dE={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"de la maana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"de la maana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"de la maana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"}},fE=(t,a)=>Number(t)+"",hE={ordinalNumber:fE,era:Cn({values:iE,defaultWidth:"wide"}),quarter:Cn({values:oE,defaultWidth:"wide",argumentCallback:t=>Number(t)-1}),month:Cn({values:lE,defaultWidth:"wide"}),day:Cn({values:cE,defaultWidth:"wide"}),dayPeriod:Cn({values:uE,defaultWidth:"wide",formattingValues:dE,defaultFormattingWidth:"wide"})},mE=/^(\d+)()?/i,pE=/\d+/i,gE={narrow:/^(ac|dc|a|d)/i,abbreviated:/^(a\.?\s?c\.?|a\.?\s?e\.?\s?c\.?|d\.?\s?c\.?|e\.?\s?c\.?)/i,wide:/^(antes de cristo|antes de la era com[u]n|despu[e]s de cristo|era com[u]n)/i},xE={any:[/^ac/i,/^dc/i],wide:[/^(antes de cristo|antes de la era com[u]n)/i,/^(despu[e]s de cristo|era com[u]n)/i]},yE={narrow:/^[1234]/i,abbreviated:/^T[1234]/i,wide:/^[1234]()? trimestre/i},bE={any:[/1/i,/2/i,/3/i,/4/i]},vE={narrow:/^[efmajsond]/i,abbreviated:/^(ene|feb|mar|abr|may|jun|jul|ago|sep|oct|nov|dic)/i,wide:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i},wE={narrow:[/^e/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^en/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i]},SE={narrow:/^[dlmjvs]/i,short:/^(do|lu|ma|mi|ju|vi|s[a])/i,abbreviated:/^(dom|lun|mar|mi[e]|jue|vie|s[a]b)/i,wide:/^(domingo|lunes|martes|mi[e]rcoles|jueves|viernes|s[a]bado)/i},NE={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^do/i,/^lu/i,/^ma/i,/^mi/i,/^ju/i,/^vi/i,/^sa/i]},jE={narrow:/^(a|p|mn|md|(de la|a las) (maana|tarde|noche))/i,any:/^([ap]\.?\s?m\.?|medianoche|mediodia|(de la|a las) (maana|tarde|noche))/i},EE={any:{am:/^a/i,pm:/^p/i,midnight:/^mn/i,noon:/^md/i,morning:/maana/i,afternoon:/tarde/i,evening:/tarde/i,night:/noche/i}},_E={ordinalNumber:ub({matchPattern:mE,parsePattern:pE,valueCallback:function(t){return parseInt(t,10)}}),era:Tn({matchPatterns:gE,defaultMatchWidth:"wide",parsePatterns:xE,defaultParseWidth:"any"}),quarter:Tn({matchPatterns:yE,defaultMatchWidth:"wide",parsePatterns:bE,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Tn({matchPatterns:vE,defaultMatchWidth:"wide",parsePatterns:wE,defaultParseWidth:"any"}),day:Tn({matchPatterns:SE,defaultMatchWidth:"wide",parsePatterns:NE,defaultParseWidth:"any"}),dayPeriod:Tn({matchPatterns:jE,defaultMatchWidth:"any",parsePatterns:EE,defaultParseWidth:"any"})},Mr={code:"es",formatDistance:K4,formatLong:nE,formatRelative:rE,localize:hE,match:_E,options:{weekStartsOn:1,firstWeekContainsDate:1}};function CE(){const[t,a]=_.useState(null),[s,i]=_.useState([]),[c,u]=_.useState(!0);_.useEffect(()=>{f()},[]);const f=async()=>{try{const[p,g]=await Promise.all([Hj(),ob()]);a(p),i(g.conversations||[])}catch(p){console.error("Error loading dashboard:",p)}finally{u(!1)}};if(c)return l.jsx("div",{className:"p-8 flex items-center justify-center h-full",children:l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-500"})});const m=s.slice(0,5);return l.jsxs("div",{className:"p-8",children:[l.jsxs("div",{className:"mb-8",children:[l.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Dashboard"}),l.jsx("p",{className:"text-gray-500 mt-1",children:"Resumen de tu chatbot de WhatsApp"})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[l.jsx(Yl,{title:"Conversaciones",value:s.length,icon:Cr,color:"green",subtitle:"Total activas"}),l.jsx(Yl,{title:"Usuarios nicos",value:t?.unique_users||0,icon:Lc,color:"blue",subtitle:"ltimos 30 das"}),l.jsx(Yl,{title:"Interacciones",value:t?.interactions||0,icon:Mh,color:"purple",subtitle:"Procesadas por el bot"}),l.jsx(Yl,{title:"Confianza",value:`${Math.round((t?.avg_confidence||0)*100)}%`,icon:vc,color:"yellow",subtitle:"Promedio clasificacin"})]}),l.jsxs("div",{className:"bg-white rounded-xl border border-gray-100 shadow-sm",children:[l.jsxs("div",{className:"p-6 border-b border-gray-100 flex items-center justify-between",children:[l.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"Conversaciones Recientes"}),l.jsxs(bs,{to:"/conversations",className:"text-green-600 hover:text-green-700 text-sm font-medium flex items-center gap-1",children:["Ver todas ",l.jsx(TN,{className:"w-4 h-4"})]})]}),m.length===0?l.jsxs("div",{className:"p-12 text-center text-gray-400",children:[l.jsx(Cr,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),l.jsx("p",{children:"No hay conversaciones todava"})]}):l.jsx("div",{className:"divide-y divide-gray-100",children:m.map(p=>l.jsxs(bs,{to:`/conversations?phone=${encodeURIComponent(p.phone)}`,className:"flex items-center gap-4 p-4 hover:bg-gray-50 transition",children:[l.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center flex-shrink-0",children:l.jsx("span",{className:"text-green-600 font-medium",children:p.contact_name?.[0]?.toUpperCase()||p.phone.slice(-2)})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("p",{className:"font-medium text-gray-800 truncate",children:p.contact_name||p.phone}),l.jsx("span",{className:"text-xs text-gray-400",children:p.last_message_time?qc(new Date(p.last_message_time),{addSuffix:!0,locale:Mr}):""})]}),l.jsx("p",{className:"text-sm text-gray-500 truncate mt-1",children:p.last_message||"Sin mensajes"})]}),p.unread_count>0&&l.jsx("span",{className:"bg-green-500 text-white text-xs font-medium px-2 py-1 rounded-full",children:p.unread_count})]},p.phone))})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-8",children:[l.jsxs(bs,{to:"/flows",className:"bg-gradient-to-r from-green-500 to-green-600 rounded-xl p-6 text-white hover:from-green-600 hover:to-green-700 transition",children:[l.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Editor de Flujos"}),l.jsx("p",{className:"text-green-100 text-sm",children:"Crea y edita flujos conversacionales de forma visual"})]}),l.jsxs(bs,{to:"/conversations",className:"bg-gradient-to-r from-blue-500 to-blue-600 rounded-xl p-6 text-white hover:from-blue-600 hover:to-blue-700 transition",children:[l.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Ver Conversaciones"}),l.jsx("p",{className:"text-blue-100 text-sm",children:"Responde a tus clientes en tiempo real"})]})]})]})}const kn=Object.create(null);kn.open="0";kn.close="1";kn.ping="2";kn.pong="3";kn.message="4";kn.upgrade="5";kn.noop="6";const lc=Object.create(null);Object.keys(kn).forEach(t=>{lc[kn[t]]=t});const Jf={type:"error",data:"parser error"},mb=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",pb=typeof ArrayBuffer=="function",gb=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,zh=({type:t,data:a},s,i)=>mb&&a instanceof Blob?s?i(a):mx(a,i):pb&&(a instanceof ArrayBuffer||gb(a))?s?i(a):mx(new Blob([a]),i):i(kn[t]+(a||"")),mx=(t,a)=>{const s=new FileReader;return s.onload=function(){const i=s.result.split(",")[1];a("b"+(i||""))},s.readAsDataURL(t)};function px(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}let kf;function TE(t,a){if(mb&&t.data instanceof Blob)return t.data.arrayBuffer().then(px).then(a);if(pb&&(t.data instanceof ArrayBuffer||gb(t.data)))return a(px(t.data));zh(t,!1,s=>{kf||(kf=new TextEncoder),a(kf.encode(s))})}const gx="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Yi=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let t=0;t<gx.length;t++)Yi[gx.charCodeAt(t)]=t;const ME=t=>{let a=t.length*.75,s=t.length,i,c=0,u,f,m,p;t[t.length-1]==="="&&(a--,t[t.length-2]==="="&&a--);const g=new ArrayBuffer(a),y=new Uint8Array(g);for(i=0;i<s;i+=4)u=Yi[t.charCodeAt(i)],f=Yi[t.charCodeAt(i+1)],m=Yi[t.charCodeAt(i+2)],p=Yi[t.charCodeAt(i+3)],y[c++]=u<<2|f>>4,y[c++]=(f&15)<<4|m>>2,y[c++]=(m&3)<<6|p&63;return g},AE=typeof ArrayBuffer=="function",Oh=(t,a)=>{if(typeof t!="string")return{type:"message",data:xb(t,a)};const s=t.charAt(0);return s==="b"?{type:"message",data:kE(t.substring(1),a)}:lc[s]?t.length>1?{type:lc[s],data:t.substring(1)}:{type:lc[s]}:Jf},kE=(t,a)=>{if(AE){const s=ME(t);return xb(s,a)}else return{base64:!0,data:t}},xb=(t,a)=>a==="blob"?t instanceof Blob?t:new Blob([t]):t instanceof ArrayBuffer?t:t.buffer,yb="",RE=(t,a)=>{const s=t.length,i=new Array(s);let c=0;t.forEach((u,f)=>{zh(u,!1,m=>{i[f]=m,++c===s&&a(i.join(yb))})})},DE=(t,a)=>{const s=t.split(yb),i=[];for(let c=0;c<s.length;c++){const u=Oh(s[c],a);if(i.push(u),u.type==="error")break}return i};function zE(){return new TransformStream({transform(t,a){TE(t,s=>{const i=s.length;let c;if(i<126)c=new Uint8Array(1),new DataView(c.buffer).setUint8(0,i);else if(i<65536){c=new Uint8Array(3);const u=new DataView(c.buffer);u.setUint8(0,126),u.setUint16(1,i)}else{c=new Uint8Array(9);const u=new DataView(c.buffer);u.setUint8(0,127),u.setBigUint64(1,BigInt(i))}t.data&&typeof t.data!="string"&&(c[0]|=128),a.enqueue(c),a.enqueue(s)})}})}let Rf;function Gl(t){return t.reduce((a,s)=>a+s.length,0)}function Il(t,a){if(t[0].length===a)return t.shift();const s=new Uint8Array(a);let i=0;for(let c=0;c<a;c++)s[c]=t[0][i++],i===t[0].length&&(t.shift(),i=0);return t.length&&i<t[0].length&&(t[0]=t[0].slice(i)),s}function OE(t,a){Rf||(Rf=new TextDecoder);const s=[];let i=0,c=-1,u=!1;return new TransformStream({transform(f,m){for(s.push(f);;){if(i===0){if(Gl(s)<1)break;const p=Il(s,1);u=(p[0]&128)===128,c=p[0]&127,c<126?i=3:c===126?i=1:i=2}else if(i===1){if(Gl(s)<2)break;const p=Il(s,2);c=new DataView(p.buffer,p.byteOffset,p.length).getUint16(0),i=3}else if(i===2){if(Gl(s)<8)break;const p=Il(s,8),g=new DataView(p.buffer,p.byteOffset,p.length),y=g.getUint32(0);if(y>Math.pow(2,21)-1){m.enqueue(Jf);break}c=y*Math.pow(2,32)+g.getUint32(4),i=3}else{if(Gl(s)<c)break;const p=Il(s,c);m.enqueue(Oh(u?p:Rf.decode(p),a)),i=0}if(c===0||c>t){m.enqueue(Jf);break}}}})}const bb=4;function lt(t){if(t)return BE(t)}function BE(t){for(var a in lt.prototype)t[a]=lt.prototype[a];return t}lt.prototype.on=lt.prototype.addEventListener=function(t,a){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(a),this};lt.prototype.once=function(t,a){function s(){this.off(t,s),a.apply(this,arguments)}return s.fn=a,this.on(t,s),this};lt.prototype.off=lt.prototype.removeListener=lt.prototype.removeAllListeners=lt.prototype.removeEventListener=function(t,a){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var s=this._callbacks["$"+t];if(!s)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var i,c=0;c<s.length;c++)if(i=s[c],i===a||i.fn===a){s.splice(c,1);break}return s.length===0&&delete this._callbacks["$"+t],this};lt.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var a=new Array(arguments.length-1),s=this._callbacks["$"+t],i=1;i<arguments.length;i++)a[i-1]=arguments[i];if(s){s=s.slice(0);for(var i=0,c=s.length;i<c;++i)s[i].apply(this,a)}return this};lt.prototype.emitReserved=lt.prototype.emit;lt.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]};lt.prototype.hasListeners=function(t){return!!this.listeners(t).length};const Vc=typeof Promise=="function"&&typeof Promise.resolve=="function"?a=>Promise.resolve().then(a):(a,s)=>s(a,0),sn=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),HE="arraybuffer";function vb(t,...a){return a.reduce((s,i)=>(t.hasOwnProperty(i)&&(s[i]=t[i]),s),{})}const LE=sn.setTimeout,UE=sn.clearTimeout;function Yc(t,a){a.useNativeTimers?(t.setTimeoutFn=LE.bind(sn),t.clearTimeoutFn=UE.bind(sn)):(t.setTimeoutFn=sn.setTimeout.bind(sn),t.clearTimeoutFn=sn.clearTimeout.bind(sn))}const $E=1.33;function qE(t){return typeof t=="string"?VE(t):Math.ceil((t.byteLength||t.size)*$E)}function VE(t){let a=0,s=0;for(let i=0,c=t.length;i<c;i++)a=t.charCodeAt(i),a<128?s+=1:a<2048?s+=2:a<55296||a>=57344?s+=3:(i++,s+=4);return s}function wb(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function YE(t){let a="";for(let s in t)t.hasOwnProperty(s)&&(a.length&&(a+="&"),a+=encodeURIComponent(s)+"="+encodeURIComponent(t[s]));return a}function XE(t){let a={},s=t.split("&");for(let i=0,c=s.length;i<c;i++){let u=s[i].split("=");a[decodeURIComponent(u[0])]=decodeURIComponent(u[1])}return a}class GE extends Error{constructor(a,s,i){super(a),this.description=s,this.context=i,this.type="TransportError"}}class Bh extends lt{constructor(a){super(),this.writable=!1,Yc(this,a),this.opts=a,this.query=a.query,this.socket=a.socket,this.supportsBinary=!a.forceBase64}onError(a,s,i){return super.emitReserved("error",new GE(a,s,i)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(a){this.readyState==="open"&&this.write(a)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(a){const s=Oh(a,this.socket.binaryType);this.onPacket(s)}onPacket(a){super.emitReserved("packet",a)}onClose(a){this.readyState="closed",super.emitReserved("close",a)}pause(a){}createUri(a,s={}){return a+"://"+this._hostname()+this._port()+this.opts.path+this._query(s)}_hostname(){const a=this.opts.hostname;return a.indexOf(":")===-1?a:"["+a+"]"}_port(){return this.opts.port&&(this.opts.secure&&Number(this.opts.port)!==443||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(a){const s=YE(a);return s.length?"?"+s:""}}class IE extends Bh{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(a){this.readyState="pausing";const s=()=>{this.readyState="paused",a()};if(this._polling||!this.writable){let i=0;this._polling&&(i++,this.once("pollComplete",function(){--i||s()})),this.writable||(i++,this.once("drain",function(){--i||s()}))}else s()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(a){const s=i=>{if(this.readyState==="opening"&&i.type==="open"&&this.onOpen(),i.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(i)};DE(a,this.socket.binaryType).forEach(s),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const a=()=>{this.write([{type:"close"}])};this.readyState==="open"?a():this.once("open",a)}write(a){this.writable=!1,RE(a,s=>{this.doWrite(s,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const a=this.opts.secure?"https":"http",s=this.query||{};return this.opts.timestampRequests!==!1&&(s[this.opts.timestampParam]=wb()),!this.supportsBinary&&!s.sid&&(s.b64=1),this.createUri(a,s)}}let Sb=!1;try{Sb=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const PE=Sb;function ZE(){}class QE extends IE{constructor(a){if(super(a),typeof location<"u"){const s=location.protocol==="https:";let i=location.port;i||(i=s?"443":"80"),this.xd=typeof location<"u"&&a.hostname!==location.hostname||i!==a.port}}doWrite(a,s){const i=this.request({method:"POST",data:a});i.on("success",s),i.on("error",(c,u)=>{this.onError("xhr post error",c,u)})}doPoll(){const a=this.request();a.on("data",this.onData.bind(this)),a.on("error",(s,i)=>{this.onError("xhr poll error",s,i)}),this.pollXhr=a}}class Mn extends lt{constructor(a,s,i){super(),this.createRequest=a,Yc(this,i),this._opts=i,this._method=i.method||"GET",this._uri=s,this._data=i.data!==void 0?i.data:null,this._create()}_create(){var a;const s=vb(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");s.xdomain=!!this._opts.xd;const i=this._xhr=this.createRequest(s);try{i.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){i.setDisableHeaderCheck&&i.setDisableHeaderCheck(!0);for(let c in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(c)&&i.setRequestHeader(c,this._opts.extraHeaders[c])}}catch{}if(this._method==="POST")try{i.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{i.setRequestHeader("Accept","*/*")}catch{}(a=this._opts.cookieJar)===null||a===void 0||a.addCookies(i),"withCredentials"in i&&(i.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(i.timeout=this._opts.requestTimeout),i.onreadystatechange=()=>{var c;i.readyState===3&&((c=this._opts.cookieJar)===null||c===void 0||c.parseCookies(i.getResponseHeader("set-cookie"))),i.readyState===4&&(i.status===200||i.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof i.status=="number"?i.status:0)},0))},i.send(this._data)}catch(c){this.setTimeoutFn(()=>{this._onError(c)},0);return}typeof document<"u"&&(this._index=Mn.requestsCount++,Mn.requests[this._index]=this)}_onError(a){this.emitReserved("error",a,this._xhr),this._cleanup(!0)}_cleanup(a){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=ZE,a)try{this._xhr.abort()}catch{}typeof document<"u"&&delete Mn.requests[this._index],this._xhr=null}}_onLoad(){const a=this._xhr.responseText;a!==null&&(this.emitReserved("data",a),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}Mn.requestsCount=0;Mn.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",xx);else if(typeof addEventListener=="function"){const t="onpagehide"in sn?"pagehide":"unload";addEventListener(t,xx,!1)}}function xx(){for(let t in Mn.requests)Mn.requests.hasOwnProperty(t)&&Mn.requests[t].abort()}const FE=(function(){const t=Nb({xdomain:!1});return t&&t.responseType!==null})();class WE extends QE{constructor(a){super(a);const s=a&&a.forceBase64;this.supportsBinary=FE&&!s}request(a={}){return Object.assign(a,{xd:this.xd},this.opts),new Mn(Nb,this.uri(),a)}}function Nb(t){const a=t.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!a||PE))return new XMLHttpRequest}catch{}if(!a)try{return new sn[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const jb=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class KE extends Bh{get name(){return"websocket"}doOpen(){const a=this.uri(),s=this.opts.protocols,i=jb?{}:vb(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(i.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(a,s,i)}catch(c){return this.emitReserved("error",c)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=a=>this.onClose({description:"websocket connection closed",context:a}),this.ws.onmessage=a=>this.onData(a.data),this.ws.onerror=a=>this.onError("websocket error",a)}write(a){this.writable=!1;for(let s=0;s<a.length;s++){const i=a[s],c=s===a.length-1;zh(i,this.supportsBinary,u=>{try{this.doWrite(i,u)}catch{}c&&Vc(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const a=this.opts.secure?"wss":"ws",s=this.query||{};return this.opts.timestampRequests&&(s[this.opts.timestampParam]=wb()),this.supportsBinary||(s.b64=1),this.createUri(a,s)}}const Df=sn.WebSocket||sn.MozWebSocket;class JE extends KE{createSocket(a,s,i){return jb?new Df(a,s,i):s?new Df(a,s):new Df(a)}doWrite(a,s){this.ws.send(s)}}class e_ extends Bh{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(a){return this.emitReserved("error",a)}this._transport.closed.then(()=>{this.onClose()}).catch(a=>{this.onError("webtransport error",a)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(a=>{const s=OE(Number.MAX_SAFE_INTEGER,this.socket.binaryType),i=a.readable.pipeThrough(s).getReader(),c=zE();c.readable.pipeTo(a.writable),this._writer=c.writable.getWriter();const u=()=>{i.read().then(({done:m,value:p})=>{m||(this.onPacket(p),u())}).catch(m=>{})};u();const f={type:"open"};this.query.sid&&(f.data=`{"sid":"${this.query.sid}"}`),this._writer.write(f).then(()=>this.onOpen())})})}write(a){this.writable=!1;for(let s=0;s<a.length;s++){const i=a[s],c=s===a.length-1;this._writer.write(i).then(()=>{c&&Vc(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var a;(a=this._transport)===null||a===void 0||a.close()}}const t_={websocket:JE,webtransport:e_,polling:WE},n_=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,a_=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function eh(t){if(t.length>8e3)throw"URI too long";const a=t,s=t.indexOf("["),i=t.indexOf("]");s!=-1&&i!=-1&&(t=t.substring(0,s)+t.substring(s,i).replace(/:/g,";")+t.substring(i,t.length));let c=n_.exec(t||""),u={},f=14;for(;f--;)u[a_[f]]=c[f]||"";return s!=-1&&i!=-1&&(u.source=a,u.host=u.host.substring(1,u.host.length-1).replace(/;/g,":"),u.authority=u.authority.replace("[","").replace("]","").replace(/;/g,":"),u.ipv6uri=!0),u.pathNames=s_(u,u.path),u.queryKey=r_(u,u.query),u}function s_(t,a){const s=/\/{2,9}/g,i=a.replace(s,"/").split("/");return(a.slice(0,1)=="/"||a.length===0)&&i.splice(0,1),a.slice(-1)=="/"&&i.splice(i.length-1,1),i}function r_(t,a){const s={};return a.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(i,c,u){c&&(s[c]=u)}),s}const th=typeof addEventListener=="function"&&typeof removeEventListener=="function",cc=[];th&&addEventListener("offline",()=>{cc.forEach(t=>t())},!1);class Ga extends lt{constructor(a,s){if(super(),this.binaryType=HE,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,a&&typeof a=="object"&&(s=a,a=null),a){const i=eh(a);s.hostname=i.host,s.secure=i.protocol==="https"||i.protocol==="wss",s.port=i.port,i.query&&(s.query=i.query)}else s.host&&(s.hostname=eh(s.host).host);Yc(this,s),this.secure=s.secure!=null?s.secure:typeof location<"u"&&location.protocol==="https:",s.hostname&&!s.port&&(s.port=this.secure?"443":"80"),this.hostname=s.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=s.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},s.transports.forEach(i=>{const c=i.prototype.name;this.transports.push(c),this._transportsByName[c]=i}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},s),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=XE(this.opts.query)),th&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},cc.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(a){const s=Object.assign({},this.opts.query);s.EIO=bb,s.transport=a,this.id&&(s.sid=this.id);const i=Object.assign({},this.opts,{query:s,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[a]);return new this._transportsByName[a](i)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const a=this.opts.rememberUpgrade&&Ga.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const s=this.createTransport(a);s.open(),this.setTransport(s)}setTransport(a){this.transport&&this.transport.removeAllListeners(),this.transport=a,a.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",s=>this._onClose("transport close",s))}onOpen(){this.readyState="open",Ga.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(a){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",a),this.emitReserved("heartbeat"),a.type){case"open":this.onHandshake(JSON.parse(a.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const s=new Error("server error");s.code=a.data,this._onError(s);break;case"message":this.emitReserved("data",a.data),this.emitReserved("message",a.data);break}}onHandshake(a){this.emitReserved("handshake",a),this.id=a.sid,this.transport.query.sid=a.sid,this._pingInterval=a.pingInterval,this._pingTimeout=a.pingTimeout,this._maxPayload=a.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const a=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+a,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},a),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const a=this._getWritablePackets();this.transport.send(a),this._prevBufferLen=a.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let s=1;for(let i=0;i<this.writeBuffer.length;i++){const c=this.writeBuffer[i].data;if(c&&(s+=qE(c)),i>0&&s>this._maxPayload)return this.writeBuffer.slice(0,i);s+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const a=Date.now()>this._pingTimeoutTime;return a&&(this._pingTimeoutTime=0,Vc(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),a}write(a,s,i){return this._sendPacket("message",a,s,i),this}send(a,s,i){return this._sendPacket("message",a,s,i),this}_sendPacket(a,s,i,c){if(typeof s=="function"&&(c=s,s=void 0),typeof i=="function"&&(c=i,i=null),this.readyState==="closing"||this.readyState==="closed")return;i=i||{},i.compress=i.compress!==!1;const u={type:a,data:s,options:i};this.emitReserved("packetCreate",u),this.writeBuffer.push(u),c&&this.once("flush",c),this.flush()}close(){const a=()=>{this._onClose("forced close"),this.transport.close()},s=()=>{this.off("upgrade",s),this.off("upgradeError",s),a()},i=()=>{this.once("upgrade",s),this.once("upgradeError",s)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?i():a()}):this.upgrading?i():a()),this}_onError(a){if(Ga.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",a),this._onClose("transport error",a)}_onClose(a,s){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),th&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const i=cc.indexOf(this._offlineEventListener);i!==-1&&cc.splice(i,1)}this.readyState="closed",this.id=null,this.emitReserved("close",a,s),this.writeBuffer=[],this._prevBufferLen=0}}}Ga.protocol=bb;class i_ extends Ga{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let a=0;a<this._upgrades.length;a++)this._probe(this._upgrades[a])}_probe(a){let s=this.createTransport(a),i=!1;Ga.priorWebsocketSuccess=!1;const c=()=>{i||(s.send([{type:"ping",data:"probe"}]),s.once("packet",x=>{if(!i)if(x.type==="pong"&&x.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",s),!s)return;Ga.priorWebsocketSuccess=s.name==="websocket",this.transport.pause(()=>{i||this.readyState!=="closed"&&(y(),this.setTransport(s),s.send([{type:"upgrade"}]),this.emitReserved("upgrade",s),s=null,this.upgrading=!1,this.flush())})}else{const b=new Error("probe error");b.transport=s.name,this.emitReserved("upgradeError",b)}}))};function u(){i||(i=!0,y(),s.close(),s=null)}const f=x=>{const b=new Error("probe error: "+x);b.transport=s.name,u(),this.emitReserved("upgradeError",b)};function m(){f("transport closed")}function p(){f("socket closed")}function g(x){s&&x.name!==s.name&&u()}const y=()=>{s.removeListener("open",c),s.removeListener("error",f),s.removeListener("close",m),this.off("close",p),this.off("upgrading",g)};s.once("open",c),s.once("error",f),s.once("close",m),this.once("close",p),this.once("upgrading",g),this._upgrades.indexOf("webtransport")!==-1&&a!=="webtransport"?this.setTimeoutFn(()=>{i||s.open()},200):s.open()}onHandshake(a){this._upgrades=this._filterUpgrades(a.upgrades),super.onHandshake(a)}_filterUpgrades(a){const s=[];for(let i=0;i<a.length;i++)~this.transports.indexOf(a[i])&&s.push(a[i]);return s}}let o_=class extends i_{constructor(a,s={}){const i=typeof a=="object"?a:s;(!i.transports||i.transports&&typeof i.transports[0]=="string")&&(i.transports=(i.transports||["polling","websocket","webtransport"]).map(c=>t_[c]).filter(c=>!!c)),super(a,i)}};function l_(t,a="",s){let i=t;s=s||typeof location<"u"&&location,t==null&&(t=s.protocol+"//"+s.host),typeof t=="string"&&(t.charAt(0)==="/"&&(t.charAt(1)==="/"?t=s.protocol+t:t=s.host+t),/^(https?|wss?):\/\//.test(t)||(typeof s<"u"?t=s.protocol+"//"+t:t="https://"+t),i=eh(t)),i.port||(/^(http|ws)$/.test(i.protocol)?i.port="80":/^(http|ws)s$/.test(i.protocol)&&(i.port="443")),i.path=i.path||"/";const u=i.host.indexOf(":")!==-1?"["+i.host+"]":i.host;return i.id=i.protocol+"://"+u+":"+i.port+a,i.href=i.protocol+"://"+u+(s&&s.port===i.port?"":":"+i.port),i}const c_=typeof ArrayBuffer=="function",u_=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,Eb=Object.prototype.toString,d_=typeof Blob=="function"||typeof Blob<"u"&&Eb.call(Blob)==="[object BlobConstructor]",f_=typeof File=="function"||typeof File<"u"&&Eb.call(File)==="[object FileConstructor]";function Hh(t){return c_&&(t instanceof ArrayBuffer||u_(t))||d_&&t instanceof Blob||f_&&t instanceof File}function uc(t,a){if(!t||typeof t!="object")return!1;if(Array.isArray(t)){for(let s=0,i=t.length;s<i;s++)if(uc(t[s]))return!0;return!1}if(Hh(t))return!0;if(t.toJSON&&typeof t.toJSON=="function"&&arguments.length===1)return uc(t.toJSON(),!0);for(const s in t)if(Object.prototype.hasOwnProperty.call(t,s)&&uc(t[s]))return!0;return!1}function h_(t){const a=[],s=t.data,i=t;return i.data=nh(s,a),i.attachments=a.length,{packet:i,buffers:a}}function nh(t,a){if(!t)return t;if(Hh(t)){const s={_placeholder:!0,num:a.length};return a.push(t),s}else if(Array.isArray(t)){const s=new Array(t.length);for(let i=0;i<t.length;i++)s[i]=nh(t[i],a);return s}else if(typeof t=="object"&&!(t instanceof Date)){const s={};for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(s[i]=nh(t[i],a));return s}return t}function m_(t,a){return t.data=ah(t.data,a),delete t.attachments,t}function ah(t,a){if(!t)return t;if(t&&t._placeholder===!0){if(typeof t.num=="number"&&t.num>=0&&t.num<a.length)return a[t.num];throw new Error("illegal attachments")}else if(Array.isArray(t))for(let s=0;s<t.length;s++)t[s]=ah(t[s],a);else if(typeof t=="object")for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(t[s]=ah(t[s],a));return t}const _b=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],p_=5;var Ce;(function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"})(Ce||(Ce={}));class g_{constructor(a){this.replacer=a}encode(a){return(a.type===Ce.EVENT||a.type===Ce.ACK)&&uc(a)?this.encodeAsBinary({type:a.type===Ce.EVENT?Ce.BINARY_EVENT:Ce.BINARY_ACK,nsp:a.nsp,data:a.data,id:a.id}):[this.encodeAsString(a)]}encodeAsString(a){let s=""+a.type;return(a.type===Ce.BINARY_EVENT||a.type===Ce.BINARY_ACK)&&(s+=a.attachments+"-"),a.nsp&&a.nsp!=="/"&&(s+=a.nsp+","),a.id!=null&&(s+=a.id),a.data!=null&&(s+=JSON.stringify(a.data,this.replacer)),s}encodeAsBinary(a){const s=h_(a),i=this.encodeAsString(s.packet),c=s.buffers;return c.unshift(i),c}}class Lh extends lt{constructor(a){super(),this.reviver=a}add(a){let s;if(typeof a=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");s=this.decodeString(a);const i=s.type===Ce.BINARY_EVENT;i||s.type===Ce.BINARY_ACK?(s.type=i?Ce.EVENT:Ce.ACK,this.reconstructor=new x_(s),s.attachments===0&&super.emitReserved("decoded",s)):super.emitReserved("decoded",s)}else if(Hh(a)||a.base64)if(this.reconstructor)s=this.reconstructor.takeBinaryData(a),s&&(this.reconstructor=null,super.emitReserved("decoded",s));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+a)}decodeString(a){let s=0;const i={type:Number(a.charAt(0))};if(Ce[i.type]===void 0)throw new Error("unknown packet type "+i.type);if(i.type===Ce.BINARY_EVENT||i.type===Ce.BINARY_ACK){const u=s+1;for(;a.charAt(++s)!=="-"&&s!=a.length;);const f=a.substring(u,s);if(f!=Number(f)||a.charAt(s)!=="-")throw new Error("Illegal attachments");i.attachments=Number(f)}if(a.charAt(s+1)==="/"){const u=s+1;for(;++s&&!(a.charAt(s)===","||s===a.length););i.nsp=a.substring(u,s)}else i.nsp="/";const c=a.charAt(s+1);if(c!==""&&Number(c)==c){const u=s+1;for(;++s;){const f=a.charAt(s);if(f==null||Number(f)!=f){--s;break}if(s===a.length)break}i.id=Number(a.substring(u,s+1))}if(a.charAt(++s)){const u=this.tryParse(a.substr(s));if(Lh.isPayloadValid(i.type,u))i.data=u;else throw new Error("invalid payload")}return i}tryParse(a){try{return JSON.parse(a,this.reviver)}catch{return!1}}static isPayloadValid(a,s){switch(a){case Ce.CONNECT:return Nc(s);case Ce.DISCONNECT:return s===void 0;case Ce.CONNECT_ERROR:return typeof s=="string"||Nc(s);case Ce.EVENT:case Ce.BINARY_EVENT:return Array.isArray(s)&&(typeof s[0]=="number"||typeof s[0]=="string"&&_b.indexOf(s[0])===-1);case Ce.ACK:case Ce.BINARY_ACK:return Array.isArray(s)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class x_{constructor(a){this.packet=a,this.buffers=[],this.reconPack=a}takeBinaryData(a){if(this.buffers.push(a),this.buffers.length===this.reconPack.attachments){const s=m_(this.reconPack,this.buffers);return this.finishedReconstruction(),s}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}function y_(t){return typeof t=="string"}const b_=Number.isInteger||function(t){return typeof t=="number"&&isFinite(t)&&Math.floor(t)===t};function v_(t){return t===void 0||b_(t)}function Nc(t){return Object.prototype.toString.call(t)==="[object Object]"}function w_(t,a){switch(t){case Ce.CONNECT:return a===void 0||Nc(a);case Ce.DISCONNECT:return a===void 0;case Ce.EVENT:return Array.isArray(a)&&(typeof a[0]=="number"||typeof a[0]=="string"&&_b.indexOf(a[0])===-1);case Ce.ACK:return Array.isArray(a);case Ce.CONNECT_ERROR:return typeof a=="string"||Nc(a);default:return!1}}function S_(t){return y_(t.nsp)&&v_(t.id)&&w_(t.type,t.data)}const N_=Object.freeze(Object.defineProperty({__proto__:null,Decoder:Lh,Encoder:g_,get PacketType(){return Ce},isPacketValid:S_,protocol:p_},Symbol.toStringTag,{value:"Module"}));function hn(t,a,s){return t.on(a,s),function(){t.off(a,s)}}const j_=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class Cb extends lt{constructor(a,s,i){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=a,this.nsp=s,i&&i.auth&&(this.auth=i.auth),this._opts=Object.assign({},i),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const a=this.io;this.subs=[hn(a,"open",this.onopen.bind(this)),hn(a,"packet",this.onpacket.bind(this)),hn(a,"error",this.onerror.bind(this)),hn(a,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...a){return a.unshift("message"),this.emit.apply(this,a),this}emit(a,...s){var i,c,u;if(j_.hasOwnProperty(a))throw new Error('"'+a.toString()+'" is a reserved event name');if(s.unshift(a),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(s),this;const f={type:Ce.EVENT,data:s};if(f.options={},f.options.compress=this.flags.compress!==!1,typeof s[s.length-1]=="function"){const y=this.ids++,x=s.pop();this._registerAckCallback(y,x),f.id=y}const m=(c=(i=this.io.engine)===null||i===void 0?void 0:i.transport)===null||c===void 0?void 0:c.writable,p=this.connected&&!(!((u=this.io.engine)===null||u===void 0)&&u._hasPingExpired());return this.flags.volatile&&!m||(p?(this.notifyOutgoingListeners(f),this.packet(f)):this.sendBuffer.push(f)),this.flags={},this}_registerAckCallback(a,s){var i;const c=(i=this.flags.timeout)!==null&&i!==void 0?i:this._opts.ackTimeout;if(c===void 0){this.acks[a]=s;return}const u=this.io.setTimeoutFn(()=>{delete this.acks[a];for(let m=0;m<this.sendBuffer.length;m++)this.sendBuffer[m].id===a&&this.sendBuffer.splice(m,1);s.call(this,new Error("operation has timed out"))},c),f=(...m)=>{this.io.clearTimeoutFn(u),s.apply(this,m)};f.withError=!0,this.acks[a]=f}emitWithAck(a,...s){return new Promise((i,c)=>{const u=(f,m)=>f?c(f):i(m);u.withError=!0,s.push(u),this.emit(a,...s)})}_addToQueue(a){let s;typeof a[a.length-1]=="function"&&(s=a.pop());const i={id:this._queueSeq++,tryCount:0,pending:!1,args:a,flags:Object.assign({fromQueue:!0},this.flags)};a.push((c,...u)=>(this._queue[0],c!==null?i.tryCount>this._opts.retries&&(this._queue.shift(),s&&s(c)):(this._queue.shift(),s&&s(null,...u)),i.pending=!1,this._drainQueue())),this._queue.push(i),this._drainQueue()}_drainQueue(a=!1){if(!this.connected||this._queue.length===0)return;const s=this._queue[0];s.pending&&!a||(s.pending=!0,s.tryCount++,this.flags=s.flags,this.emit.apply(this,s.args))}packet(a){a.nsp=this.nsp,this.io._packet(a)}onopen(){typeof this.auth=="function"?this.auth(a=>{this._sendConnectPacket(a)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(a){this.packet({type:Ce.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},a):a})}onerror(a){this.connected||this.emitReserved("connect_error",a)}onclose(a,s){this.connected=!1,delete this.id,this.emitReserved("disconnect",a,s),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(a=>{if(!this.sendBuffer.some(i=>String(i.id)===a)){const i=this.acks[a];delete this.acks[a],i.withError&&i.call(this,new Error("socket has been disconnected"))}})}onpacket(a){if(a.nsp===this.nsp)switch(a.type){case Ce.CONNECT:a.data&&a.data.sid?this.onconnect(a.data.sid,a.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Ce.EVENT:case Ce.BINARY_EVENT:this.onevent(a);break;case Ce.ACK:case Ce.BINARY_ACK:this.onack(a);break;case Ce.DISCONNECT:this.ondisconnect();break;case Ce.CONNECT_ERROR:this.destroy();const i=new Error(a.data.message);i.data=a.data.data,this.emitReserved("connect_error",i);break}}onevent(a){const s=a.data||[];a.id!=null&&s.push(this.ack(a.id)),this.connected?this.emitEvent(s):this.receiveBuffer.push(Object.freeze(s))}emitEvent(a){if(this._anyListeners&&this._anyListeners.length){const s=this._anyListeners.slice();for(const i of s)i.apply(this,a)}super.emit.apply(this,a),this._pid&&a.length&&typeof a[a.length-1]=="string"&&(this._lastOffset=a[a.length-1])}ack(a){const s=this;let i=!1;return function(...c){i||(i=!0,s.packet({type:Ce.ACK,id:a,data:c}))}}onack(a){const s=this.acks[a.id];typeof s=="function"&&(delete this.acks[a.id],s.withError&&a.data.unshift(null),s.apply(this,a.data))}onconnect(a,s){this.id=a,this.recovered=s&&this._pid===s,this._pid=s,this.connected=!0,this.emitBuffered(),this._drainQueue(!0),this.emitReserved("connect")}emitBuffered(){this.receiveBuffer.forEach(a=>this.emitEvent(a)),this.receiveBuffer=[],this.sendBuffer.forEach(a=>{this.notifyOutgoingListeners(a),this.packet(a)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(a=>a()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:Ce.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(a){return this.flags.compress=a,this}get volatile(){return this.flags.volatile=!0,this}timeout(a){return this.flags.timeout=a,this}onAny(a){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(a),this}prependAny(a){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(a),this}offAny(a){if(!this._anyListeners)return this;if(a){const s=this._anyListeners;for(let i=0;i<s.length;i++)if(a===s[i])return s.splice(i,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(a){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(a),this}prependAnyOutgoing(a){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(a),this}offAnyOutgoing(a){if(!this._anyOutgoingListeners)return this;if(a){const s=this._anyOutgoingListeners;for(let i=0;i<s.length;i++)if(a===s[i])return s.splice(i,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(a){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const s=this._anyOutgoingListeners.slice();for(const i of s)i.apply(this,a.data)}}}function qr(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}qr.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var a=Math.random(),s=Math.floor(a*this.jitter*t);t=(Math.floor(a*10)&1)==0?t-s:t+s}return Math.min(t,this.max)|0};qr.prototype.reset=function(){this.attempts=0};qr.prototype.setMin=function(t){this.ms=t};qr.prototype.setMax=function(t){this.max=t};qr.prototype.setJitter=function(t){this.jitter=t};class sh extends lt{constructor(a,s){var i;super(),this.nsps={},this.subs=[],a&&typeof a=="object"&&(s=a,a=void 0),s=s||{},s.path=s.path||"/socket.io",this.opts=s,Yc(this,s),this.reconnection(s.reconnection!==!1),this.reconnectionAttempts(s.reconnectionAttempts||1/0),this.reconnectionDelay(s.reconnectionDelay||1e3),this.reconnectionDelayMax(s.reconnectionDelayMax||5e3),this.randomizationFactor((i=s.randomizationFactor)!==null&&i!==void 0?i:.5),this.backoff=new qr({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(s.timeout==null?2e4:s.timeout),this._readyState="closed",this.uri=a;const c=s.parser||N_;this.encoder=new c.Encoder,this.decoder=new c.Decoder,this._autoConnect=s.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(a){return arguments.length?(this._reconnection=!!a,a||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(a){return a===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=a,this)}reconnectionDelay(a){var s;return a===void 0?this._reconnectionDelay:(this._reconnectionDelay=a,(s=this.backoff)===null||s===void 0||s.setMin(a),this)}randomizationFactor(a){var s;return a===void 0?this._randomizationFactor:(this._randomizationFactor=a,(s=this.backoff)===null||s===void 0||s.setJitter(a),this)}reconnectionDelayMax(a){var s;return a===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=a,(s=this.backoff)===null||s===void 0||s.setMax(a),this)}timeout(a){return arguments.length?(this._timeout=a,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(a){if(~this._readyState.indexOf("open"))return this;this.engine=new o_(this.uri,this.opts);const s=this.engine,i=this;this._readyState="opening",this.skipReconnect=!1;const c=hn(s,"open",function(){i.onopen(),a&&a()}),u=m=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",m),a?a(m):this.maybeReconnectOnOpen()},f=hn(s,"error",u);if(this._timeout!==!1){const m=this._timeout,p=this.setTimeoutFn(()=>{c(),u(new Error("timeout")),s.close()},m);this.opts.autoUnref&&p.unref(),this.subs.push(()=>{this.clearTimeoutFn(p)})}return this.subs.push(c),this.subs.push(f),this}connect(a){return this.open(a)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const a=this.engine;this.subs.push(hn(a,"ping",this.onping.bind(this)),hn(a,"data",this.ondata.bind(this)),hn(a,"error",this.onerror.bind(this)),hn(a,"close",this.onclose.bind(this)),hn(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(a){try{this.decoder.add(a)}catch(s){this.onclose("parse error",s)}}ondecoded(a){Vc(()=>{this.emitReserved("packet",a)},this.setTimeoutFn)}onerror(a){this.emitReserved("error",a)}socket(a,s){let i=this.nsps[a];return i?this._autoConnect&&!i.active&&i.connect():(i=new Cb(this,a,s),this.nsps[a]=i),i}_destroy(a){const s=Object.keys(this.nsps);for(const i of s)if(this.nsps[i].active)return;this._close()}_packet(a){const s=this.encoder.encode(a);for(let i=0;i<s.length;i++)this.engine.write(s[i],a.options)}cleanup(){this.subs.forEach(a=>a()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(a,s){var i;this.cleanup(),(i=this.engine)===null||i===void 0||i.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",a,s),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const a=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const s=this.backoff.duration();this._reconnecting=!0;const i=this.setTimeoutFn(()=>{a.skipReconnect||(this.emitReserved("reconnect_attempt",a.backoff.attempts),!a.skipReconnect&&a.open(c=>{c?(a._reconnecting=!1,a.reconnect(),this.emitReserved("reconnect_error",c)):a.onreconnect()}))},s);this.opts.autoUnref&&i.unref(),this.subs.push(()=>{this.clearTimeoutFn(i)})}}onreconnect(){const a=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",a)}}const Ui={};function dc(t,a){typeof t=="object"&&(a=t,t=void 0),a=a||{};const s=l_(t,a.path||"/socket.io"),i=s.source,c=s.id,u=s.path,f=Ui[c]&&u in Ui[c].nsps,m=a.forceNew||a["force new connection"]||a.multiplex===!1||f;let p;return m?p=new sh(i,a):(Ui[c]||(Ui[c]=new sh(i,a)),p=Ui[c]),s.query&&!a.query&&(a.query=s.queryKey),p.socket(s.path,a)}Object.assign(dc,{Manager:sh,Socket:Cb,io:dc,connect:dc});function E_(t){const[a,s]=_.useState(!1),i=_.useRef(null),c=It(u=>u.token);return _.useEffect(()=>{if(!c)return;const u=dc(t,{path:"/socket.io/",auth:{dashboardToken:c},transports:["websocket","polling"],reconnection:!0,reconnectionAttempts:1/0,reconnectionDelay:2e3,reconnectionDelayMax:1e4,timeout:2e4});return u.on("connect",()=>{console.log(`Dashboard socket conectado a ${t}`),s(!0)}),u.on("disconnect",f=>{console.log(`Dashboard socket desconectado: ${f}`),s(!1)}),u.on("connect_error",f=>{console.error("Error de conexin Socket.IO:",f.message)}),i.current=u,()=>{u.disconnect(),i.current=null,s(!1)}},[t,c]),{socket:i.current,connected:a}}function __({sessionId:t,currentAgentId:a,currentDepartmentId:s,onClose:i,onAssigned:c}){const[u,f]=_.useState([]),[m,p]=_.useState([]),[g,y]=_.useState(a||""),[x,b]=_.useState(s||""),[S,j]=_.useState(!1),[A,N]=_.useState(""),E=It(w=>w.token),D={"Content-Type":"application/json",...E?{Authorization:`Bearer ${E}`}:{}};_.useEffect(()=>{Promise.all([fetch("/api/agents",{headers:D}).then(w=>w.json()),fetch("/api/departments",{headers:D}).then(w=>w.json())]).then(([w,z])=>{f(w.agents||[]),p(z.departments||[])}).catch(()=>{})},[]);const C=async()=>{j(!0),N("");try{const w={sessionId:Number(t)};g&&(w.agentId=Number(g)),x&&(w.departmentId=Number(x));const M=await(await fetch("/api/chat/assign",{method:"POST",headers:D,body:JSON.stringify(w)})).json();if(!M.ok)throw new Error(M.error||"Error al asignar");c&&c(M),i()}catch(w){N(w.message)}finally{j(!1)}},k={};return u.filter(w=>w.status==="active").forEach(w=>{const z=w.department_name||"Sin departamento";k[z]||(k[z]=[]),k[z].push(w)}),l.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:i,children:l.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md p-6",onClick:w=>w.stopPropagation(),children:[l.jsxs("div",{className:"flex items-center justify-between mb-5",children:[l.jsxs("h3",{className:"text-lg font-bold text-gray-800 flex items-center gap-2",children:[l.jsx(Tr,{className:"w-5 h-5 text-green-600"}),"Asignar Conversacin"]}),l.jsx("button",{onClick:i,className:"text-gray-400 hover:text-gray-600",children:l.jsx(Dh,{className:"w-5 h-5"})})]}),A&&l.jsx("div",{className:"bg-red-50 text-red-600 px-4 py-2 rounded-lg text-sm mb-4 border border-red-200",children:A}),l.jsxs("div",{className:"mb-4",children:[l.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[l.jsx(_r,{className:"w-4 h-4 inline mr-1"}),"Departamento"]}),l.jsxs("select",{value:x,onChange:w=>b(w.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 outline-none",children:[l.jsx("option",{value:"",children:"Sin asignar departamento"}),m.filter(w=>w.active).map(w=>l.jsx("option",{value:w.id,children:w.display_name||w.name},w.id))]})]}),l.jsxs("div",{className:"mb-6",children:[l.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[l.jsx(Tr,{className:"w-4 h-4 inline mr-1"}),"Agente"]}),l.jsxs("select",{value:g,onChange:w=>y(w.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 outline-none",children:[l.jsx("option",{value:"",children:"Sin asignar agente"}),Object.entries(k).map(([w,z])=>l.jsx("optgroup",{label:w,children:z.map(M=>l.jsxs("option",{value:M.id,children:[M.name," (",M.username,") - ",M.role]},M.id))},w))]})]}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx("button",{onClick:i,className:"flex-1 px-4 py-2.5 border border-gray-300 rounded-xl text-gray-700 hover:bg-gray-50 transition",children:"Cancelar"}),l.jsx("button",{onClick:C,disabled:S||!g&&!x,className:"flex-1 px-4 py-2.5 bg-green-500 hover:bg-green-600 text-white rounded-xl transition disabled:opacity-50 disabled:cursor-not-allowed",children:S?"Asignando...":"Asignar"})]})]})})}function C_({sessionId:t,currentAgentId:a,currentDepartmentId:s,onClose:i,onTransferred:c}){const[u,f]=_.useState([]),[m,p]=_.useState([]),[g,y]=_.useState(""),[x,b]=_.useState(""),[S,j]=_.useState(""),[A,N]=_.useState(!1),[E,D]=_.useState(""),C=It(M=>M.token),k={"Content-Type":"application/json",...C?{Authorization:`Bearer ${C}`}:{}};_.useEffect(()=>{Promise.all([fetch("/api/agents",{headers:k}).then(M=>M.json()),fetch("/api/departments",{headers:k}).then(M=>M.json())]).then(([M,Y])=>{f(M.agents||[]),p(Y.departments||[])}).catch(()=>{})},[]);const w=async()=>{N(!0),D("");try{const M={sessionId:Number(t)};g&&(M.targetAgentId=Number(g)),x&&(M.targetDepartmentId=Number(x)),S&&(M.reason=S);const U=await(await fetch("/api/chat/transfer",{method:"POST",headers:k,body:JSON.stringify(M)})).json();if(!U.ok)throw new Error(U.error||"Error al transferir");c&&c(U),i()}catch(M){D(M.message)}finally{N(!1)}},z={};return u.filter(M=>M.status==="active"&&M.id!==a).forEach(M=>{const Y=M.department_name||"Sin departamento";z[Y]||(z[Y]=[]),z[Y].push(M)}),l.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:i,children:l.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md p-6",onClick:M=>M.stopPropagation(),children:[l.jsxs("div",{className:"flex items-center justify-between mb-5",children:[l.jsxs("h3",{className:"text-lg font-bold text-gray-800 flex items-center gap-2",children:[l.jsx(Th,{className:"w-5 h-5 text-blue-600"}),"Transferir Conversacin"]}),l.jsx("button",{onClick:i,className:"text-gray-400 hover:text-gray-600",children:l.jsx(Dh,{className:"w-5 h-5"})})]}),E&&l.jsx("div",{className:"bg-red-50 text-red-600 px-4 py-2 rounded-lg text-sm mb-4 border border-red-200",children:E}),l.jsxs("div",{className:"mb-4",children:[l.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[l.jsx(_r,{className:"w-4 h-4 inline mr-1"}),"Departamento destino"]}),l.jsxs("select",{value:x,onChange:M=>b(M.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",children:[l.jsx("option",{value:"",children:"Mantener departamento actual"}),m.filter(M=>M.active).map(M=>l.jsx("option",{value:M.id,children:M.display_name||M.name},M.id))]})]}),l.jsxs("div",{className:"mb-4",children:[l.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[l.jsx(Tr,{className:"w-4 h-4 inline mr-1"}),"Agente destino"]}),l.jsxs("select",{value:g,onChange:M=>y(M.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",children:[l.jsx("option",{value:"",children:"Sin asignar agente"}),Object.entries(z).map(([M,Y])=>l.jsx("optgroup",{label:M,children:Y.map(U=>l.jsxs("option",{value:U.id,children:[U.name," (",U.username,") - ",U.role]},U.id))},M))]})]}),l.jsxs("div",{className:"mb-6",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Razn (opcional)"}),l.jsx("input",{type:"text",value:S,onChange:M=>j(M.target.value),placeholder:"Ej: Cliente necesita soporte tcnico",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none"})]}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx("button",{onClick:i,className:"flex-1 px-4 py-2.5 border border-gray-300 rounded-xl text-gray-700 hover:bg-gray-50 transition",children:"Cancelar"}),l.jsx("button",{onClick:w,disabled:A||!g&&!x,className:"flex-1 px-4 py-2.5 bg-blue-500 hover:bg-blue-600 text-white rounded-xl transition disabled:opacity-50 disabled:cursor-not-allowed",children:A?"Transfiriendo...":"Transferir"})]})]})})}const yx=["bg-blue-500","bg-green-500","bg-purple-500","bg-pink-500","bg-indigo-500","bg-teal-500","bg-orange-500","bg-red-400","bg-cyan-500","bg-emerald-500"];function bx(t){let a=0;for(let s=0;s<t.length;s++)a=t.charCodeAt(s)+((a<<5)-a);return yx[Math.abs(a)%yx.length]}function vx(t,a){if(t){const s=t.trim().split(/\s+/);return s.length>=2?(s[0][0]+s[s.length-1][0]).toUpperCase():t[0].toUpperCase()}return a.slice(-2)}const wx=[{key:"mine",label:"Mis Chats",icon:Sr},{key:"department",label:"Departamento",icon:_r},{key:"unassigned",label:"Sin Asignar",icon:nb},{key:"all",label:"Todos",icon:kh}];function T_(){const[t,a]=lN(),[s,i]=_.useState([]),[c,u]=_.useState(t.get("phone")||null),[f,m]=_.useState([]),[p,g]=_.useState(""),[y,x]=_.useState(!0),[b,S]=_.useState(!1),[j,A]=_.useState(""),[N,E]=_.useState(!1),[D,C]=_.useState(!1),k=_.useRef(null),w=_.useRef(!0),z=It(H=>H.agent),M=z?.role==="supervisor",[Y,U]=_.useState(M?"all":"mine"),ne=s.find(H=>H.phone===c),Q=_.useRef(c);Q.current=c;const{socket:I,connected:ae}=E_("/chat");_.useEffect(()=>{$();const H=setInterval(()=>{$()},3e4);return()=>{clearInterval(H)}},[Y]),_.useEffect(()=>{c&&(w.current=!0,F(c),a({phone:c}))},[c]),_.useEffect(()=>{if(I)return I.on("new_message",H=>{if(console.log("Nuevo mensaje via WebSocket:",H),H.phone&&H.phone===Q.current){m(oe=>oe.find(ce=>ce.waMsgId===H.msgId||ce.id===H.dbId)?oe:[...oe,{id:H.dbId||Date.now(),direction:H.direction==="in"?"incoming":"outgoing",body:H.text,content:H.text,created_at:new Date(H.timestamp).toISOString(),status:H.status,waMsgId:H.msgId,is_bot:H.isAI||!1,mediaType:H.media?.type||null,mediaId:H.media?.id||H.mediaId||null,mediaMime:H.media?.mime||null,mediaCaption:H.media?.caption||null,mediaExtra:H.media?.extra||null,media:H.media}]),ix(H.phone).then(()=>$());return}$()}),I.on("escalation",H=>{console.log("Escalamiento detectado:",H),$()}),I.on("message_status_update",H=>{console.log("Status actualizado:",H),m(oe=>oe.map(ue=>ue.waMsgId===H.msgId?{...ue,status:H.status}:ue))}),I.on("chat_assigned",H=>{console.log("Chat asignado:",H),$()}),I.on("chat_transferred",H=>{console.log("Chat transferido:",H),$()}),I.on("chat_unassigned",H=>{console.log("Chat liberado:",H),$()}),I.on("agent_status_change",H=>{console.log("Agent status change:",H)}),()=>{I.off("new_message"),I.off("escalation"),I.off("message_status_update"),I.off("chat_assigned"),I.off("chat_transferred"),I.off("chat_unassigned"),I.off("agent_status_change")}},[I]),_.useEffect(()=>{w.current?(k.current?.scrollIntoView({behavior:"instant"}),w.current=!1):k.current?.scrollIntoView({behavior:"smooth"})},[f]);const $=async()=>{try{const H=await ob(Y);i(H.conversations||[])}catch(H){console.error("Error loading conversations:",H)}finally{x(!1)}},F=async H=>{try{const oe=await Oj(H);m(oe.messages||[]),await ix(H)}catch(oe){console.error("Error loading messages:",oe)}},O=H=>{g(H.target.value)},B=async()=>{if(!(!p.trim()||!c||b)){S(!0);try{await Bj(c,p),g("")}catch(H){console.error("Error sending message:",H),alert("Error al enviar mensaje")}finally{S(!1)}}},V=H=>{H.key==="Enter"&&!H.shiftKey&&(H.preventDefault(),B())},L=async()=>{if(!ne)return;const H=It.getState().token;try{(await(await fetch("/api/chat/self-assign",{method:"POST",headers:{"Content-Type":"application/json",...H?{Authorization:`Bearer ${H}`}:{}},body:JSON.stringify({sessionId:ne.session_id||ne.sessionId||ne.id})})).json()).ok&&$()}catch(oe){console.error("Error self-assigning:",oe)}},Z=s.filter(H=>(H.contact_name?.toLowerCase()||"").includes(j.toLowerCase())||H.phone.includes(j)),R=s.find(H=>H.phone===c),X=M?wx:wx.filter(H=>H.key!=="all"),ee=H=>{const{mediaType:oe,mediaId:ue,mediaExtra:ce,mediaMime:le,media:de}=H,we=oe||de?.type,be=ue||de?.id,pe=le||de?.mime,ge=ce||de?.extra;if(!we)return null;const me=H.direction==="outgoing",Te="/api/chat/media";switch(we){case"image":return l.jsxs("div",{className:"mt-2 rounded-lg overflow-hidden max-w-xs",children:[l.jsx("img",{src:`${Te}/${be}`,alt:"Imagen",className:"w-full h-auto cursor-pointer hover:opacity-90",onClick:()=>window.open(`${Te}/${be}`,"_blank"),onError:Ge=>{Ge.target.style.display="none",Ge.target.nextSibling.style.display="flex"}}),l.jsxs("div",{className:"hidden items-center gap-2 p-3 bg-gray-100 rounded-lg",children:[l.jsx(QN,{className:"w-5 h-5 text-gray-500"}),l.jsx("span",{className:"text-sm text-gray-600",children:"Imagen no disponible"})]})]});case"video":return l.jsx("div",{className:"mt-2 rounded-lg overflow-hidden max-w-xs",children:l.jsx("video",{src:`${Te}/${be}`,controls:!0,className:"w-full h-auto rounded-lg",preload:"metadata",children:"Tu navegador no soporta video"})});case"audio":return l.jsxs("div",{className:`mt-2 flex items-center gap-2 p-2 rounded-lg ${me?"bg-green-600":"bg-gray-100"}`,children:[l.jsx(oj,{className:`w-5 h-5 ${me?"text-white":"text-green-600"}`}),l.jsx("audio",{src:`${Te}/${be}`,controls:!0,className:"h-8 flex-1",preload:"metadata"})]});case"document":const _e=ge?.filename||"Documento";return l.jsxs("a",{href:`${Te}/${be}`,target:"_blank",rel:"noopener noreferrer",className:`mt-2 flex items-center gap-3 p-3 rounded-lg ${me?"bg-green-600 hover:bg-green-700":"bg-gray-100 hover:bg-gray-200"} transition`,children:[l.jsx(YN,{className:`w-8 h-8 ${me?"text-white":"text-blue-600"}`}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("p",{className:`text-sm font-medium truncate ${me?"text-white":"text-gray-800"}`,children:_e}),l.jsx("p",{className:`text-xs ${me?"text-green-100":"text-gray-500"}`,children:pe||"Documento"})]}),l.jsx(HN,{className:`w-5 h-5 ${me?"text-white":"text-gray-500"}`})]});case"sticker":return l.jsx("div",{className:"mt-2",children:l.jsx("img",{src:`${Te}/${be}`,alt:"Sticker",className:"w-32 h-32 object-contain",onError:Ge=>{Ge.target.src='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="128" height="128" viewBox="0 0 24 24" fill="none" stroke="gray" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="M8 14s1.5 2 4 2 4-2 4-2"/><line x1="9" y1="9" x2="9.01" y2="9"/><line x1="15" y1="9" x2="15.01" y2="9"/></svg>'}})});case"location":const Ze=ge?.latitude,pt=ge?.longitude,ut=ge?.name,_t=ge?.address,on=`https://www.google.com/maps?q=${Ze},${pt}`;return l.jsx("a",{href:on,target:"_blank",rel:"noopener noreferrer",className:`mt-2 block p-3 rounded-lg ${me?"bg-green-600 hover:bg-green-700":"bg-gray-100 hover:bg-gray-200"} transition`,children:l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("div",{className:`p-2 rounded-full ${me?"bg-green-500":"bg-red-100"}`,children:l.jsx(sj,{className:`w-5 h-5 ${me?"text-white":"text-red-600"}`})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[ut&&l.jsx("p",{className:`font-medium ${me?"text-white":"text-gray-800"}`,children:ut}),_t&&l.jsx("p",{className:`text-sm ${me?"text-green-100":"text-gray-600"}`,children:_t}),l.jsxs("p",{className:`text-xs mt-1 ${me?"text-green-200":"text-gray-500"}`,children:[Ze?.toFixed(6),", ",pt?.toFixed(6)]})]})]})});case"contacts":const ln=ge?.contacts||[];return l.jsxs("div",{className:`mt-2 p-3 rounded-lg ${me?"bg-green-600":"bg-gray-100"}`,children:[l.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[l.jsx(Lc,{className:`w-5 h-5 ${me?"text-white":"text-blue-600"}`}),l.jsx("span",{className:`font-medium ${me?"text-white":"text-gray-800"}`,children:ln.length===1?"Contacto compartido":`${ln.length} contactos`})]}),ln.map((Ge,On)=>l.jsxs("div",{className:`p-2 rounded ${me?"bg-green-500":"bg-white"} ${On>0?"mt-2":""}`,children:[l.jsx("p",{className:`font-medium ${me?"text-white":"text-gray-800"}`,children:Ge.name}),Ge.phones?.map((Bt,bn)=>l.jsxs("p",{className:`text-sm ${me?"text-green-100":"text-gray-600"}`,children:[Bt.phone," ",Bt.type&&`(${Bt.type})`]},bn))]},On))]});case"reaction":const zn=ge?.emoji||H.body;return l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(PN,{className:`w-4 h-4 ${me?"text-white":"text-pink-500"}`}),l.jsx("span",{className:"text-2xl",children:zn})]});default:return null}};return y?l.jsx("div",{className:"h-full flex items-center justify-center",children:l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-500"})}):l.jsxs("div",{className:"h-screen flex",children:[l.jsxs("div",{className:"w-96 bg-white border-r border-gray-200 flex flex-col",children:[l.jsxs("div",{className:"p-4 border-b border-gray-200",children:[l.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-3",children:"Conversaciones"}),l.jsx("div",{className:`grid ${M?"grid-cols-4":"grid-cols-3"} gap-1 mb-3 bg-gray-100 p-1 rounded-xl`,children:X.map(H=>{const oe=H.icon;return l.jsxs("button",{onClick:()=>U(H.key),className:`flex items-center justify-center gap-1.5 py-2 rounded-lg text-xs font-semibold transition-all ${Y===H.key?"bg-white text-green-700 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:[l.jsx(oe,{className:"w-3.5 h-3.5"}),l.jsx("span",{className:"hidden sm:inline",children:H.label})]},H.key)})}),l.jsxs("div",{className:"relative",children:[l.jsx(sb,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),l.jsx("input",{type:"text",value:j,onChange:H=>A(H.target.value),placeholder:"Buscar conversacin...",className:"w-full pl-10 pr-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none"})]})]}),l.jsx("div",{className:"flex-1 overflow-y-auto",children:Z.length===0?l.jsxs("div",{className:"p-8 text-center text-gray-400",children:[l.jsx(Cr,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),l.jsx("p",{children:"No hay conversaciones"})]}):Z.map(H=>l.jsxs("button",{onClick:()=>u(H.phone),className:`w-full flex items-center gap-3 p-4 border-b border-gray-100 hover:bg-gray-50 transition text-left ${c===H.phone?"bg-green-50":""}`,children:[l.jsx("div",{className:`w-12 h-12 ${bx(H.contact_name||H.phone)} rounded-full flex items-center justify-center flex-shrink-0`,children:l.jsx("span",{className:"text-white font-semibold text-sm",children:vx(H.contact_name,H.phone)})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("p",{className:"font-medium text-gray-800 truncate",children:H.contact_name||H.phone}),H.unread_count>0&&l.jsx("span",{className:"bg-green-500 text-white text-xs font-medium px-2 py-0.5 rounded-full",children:H.unread_count})]}),l.jsx("p",{className:"text-sm text-gray-500 truncate",children:H.last_message||"Sin mensajes"}),l.jsxs("div",{className:"flex items-center gap-1.5 mt-1 flex-wrap",children:[H.department_name&&l.jsxs("span",{className:"inline-flex items-center gap-0.5 text-[10px] px-1.5 py-0.5 rounded-full font-medium",style:{backgroundColor:(H.department_color||"#6b7280")+"20",color:H.department_color||"#6b7280"},children:[l.jsx(_r,{className:"w-2.5 h-2.5"}),H.department_name]}),H.agent_name&&l.jsxs("span",{className:"inline-flex items-center gap-0.5 text-[10px] px-1.5 py-0.5 rounded-full bg-blue-50 text-blue-600 font-medium",children:[l.jsx(Sr,{className:"w-2.5 h-2.5"}),H.agent_name]}),!H.agent_name&&!H.department_name&&H.escalation_status==="ESCALATED"&&l.jsxs("span",{className:"inline-flex items-center gap-0.5 text-[10px] px-1.5 py-0.5 rounded-full bg-yellow-50 text-yellow-600 font-medium",children:[l.jsx(nb,{className:"w-2.5 h-2.5"}),"Sin asignar"]}),l.jsx("span",{className:"text-xs text-gray-400",children:H.last_message_time?qc(new Date(H.last_message_time),{addSuffix:!0,locale:Mr}):""})]})]})]},H.phone))})]}),l.jsx("div",{className:"flex-1 flex flex-col bg-gray-50",children:c?l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"bg-white border-b border-gray-200 p-4 flex items-center justify-between gap-4",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:`w-10 h-10 ${bx(R?.contact_name||c)} rounded-full flex items-center justify-center`,children:l.jsx("span",{className:"text-white font-semibold text-sm",children:vx(R?.contact_name,c)})}),l.jsxs("div",{children:[l.jsx("p",{className:"font-medium text-gray-800",children:R?.contact_name||c}),l.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[l.jsxs("span",{className:"flex items-center gap-1",children:[l.jsx(Hc,{className:"w-3 h-3"}),c]}),R?.department_name&&l.jsxs("span",{className:"inline-flex items-center gap-0.5 text-[10px] px-1.5 py-0.5 rounded-full font-medium",style:{backgroundColor:(R.department_color||"#6b7280")+"20",color:R.department_color||"#6b7280"},children:[l.jsx(_r,{className:"w-2.5 h-2.5"}),R.department_name]}),R?.agent_name&&l.jsxs("span",{className:"inline-flex items-center gap-0.5 text-[10px] px-1.5 py-0.5 rounded-full bg-blue-50 text-blue-600 font-medium",children:[l.jsx(Sr,{className:"w-2.5 h-2.5"}),R.agent_name]})]})]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[R&&z?.id>0&&(!R.assigned_agent_id||R.assigned_agent_id!==z.id)&&l.jsxs("button",{onClick:L,className:"flex items-center gap-1.5 px-3 py-2 text-xs font-medium bg-green-50 text-green-700 hover:bg-green-100 rounded-lg border border-green-200 transition",title:"Tomar este chat",children:[l.jsx(Tr,{className:"w-4 h-4"}),"Tomar"]}),R&&l.jsxs("button",{onClick:()=>E(!0),className:"flex items-center gap-1.5 px-3 py-2 text-xs font-medium bg-gray-50 text-gray-700 hover:bg-gray-100 rounded-lg border border-gray-200 transition",title:"Asignar chat",children:[l.jsx(Tr,{className:"w-4 h-4"}),"Asignar"]}),R&&l.jsxs("button",{onClick:()=>C(!0),className:"flex items-center gap-1.5 px-3 py-2 text-xs font-medium bg-blue-50 text-blue-700 hover:bg-blue-100 rounded-lg border border-blue-200 transition",title:"Transferir chat",children:[l.jsx(Th,{className:"w-4 h-4"}),"Transferir"]}),l.jsx("div",{className:"text-sm",children:ae?l.jsxs("span",{className:"text-green-600 flex items-center gap-1",children:[l.jsx("span",{className:"w-2 h-2 bg-green-600 rounded-full"}),"Tiempo real"]}):l.jsxs("span",{className:"text-yellow-600 flex items-center gap-1",children:[l.jsx("span",{className:"w-2 h-2 bg-yellow-600 rounded-full"}),"Reconectando..."]})})]})]}),l.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[f.map((H,oe)=>l.jsx("div",{className:`flex ${H.direction==="outgoing"?"justify-end":"justify-start"}`,children:l.jsxs("div",{className:`max-w-md px-4 py-2 rounded-2xl ${H.direction==="outgoing"?"bg-green-500 text-white rounded-br-md":"bg-white text-gray-800 rounded-bl-md shadow-sm"}`,children:[H.direction==="incoming"&&l.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-400 mb-1",children:[l.jsx(Sr,{className:"w-3 h-3"}),"Cliente"]}),H.direction==="outgoing"&&H.is_bot&&l.jsxs("div",{className:"flex items-center gap-1 text-xs text-green-100 mb-1",children:[l.jsx(Mh,{className:"w-3 h-3"}),"Bot"]}),ee(H),(H.body||H.content)&&(!H.mediaType||H.mediaType==="reaction")&&l.jsx("p",{className:"whitespace-pre-wrap",children:H.body||H.content}),H.mediaType&&H.mediaType!=="reaction"&&(H.mediaCaption||H.body)&&l.jsx("p",{className:"whitespace-pre-wrap mt-2 text-sm",children:H.mediaCaption||H.body}),l.jsxs("div",{className:`flex items-center gap-1 text-xs mt-1 ${H.direction==="outgoing"?"text-white opacity-90":"text-gray-400"}`,children:[l.jsx("span",{children:H.created_at?$c(new Date(H.created_at),"HH:mm",{locale:Mr}):""}),H.direction==="outgoing"&&l.jsxs("span",{className:"ml-1",children:[H.status==="sent"&&"",H.status==="delivered"&&"",H.status==="read"&&l.jsx("span",{className:"text-blue-400",children:""})]})]})]})},oe)),l.jsx("div",{ref:k})]}),l.jsx("div",{className:"bg-white border-t border-gray-200 p-4",children:l.jsxs("div",{className:"flex gap-3",children:[l.jsx("input",{type:"text",value:p,onChange:O,onKeyPress:V,placeholder:"Escribe un mensaje...",className:"flex-1 px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none"}),l.jsxs("button",{onClick:B,disabled:!p.trim()||b,className:"bg-green-500 hover:bg-green-600 text-white px-6 py-3 rounded-xl transition disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[l.jsx(xj,{className:"w-5 h-5"}),b?"Enviando...":"Enviar"]})]})})]}):l.jsx("div",{className:"flex-1 flex items-center justify-center text-gray-400",children:l.jsxs("div",{className:"text-center",children:[l.jsx(Cr,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),l.jsx("p",{className:"text-lg",children:"Selecciona una conversacin"})]})})}),N&&R&&l.jsx(__,{sessionId:R.session_id||R.sessionId||R.id,currentAgentId:R.assigned_agent_id,currentDepartmentId:R.assigned_department_id,onClose:()=>E(!1),onAssigned:()=>$()}),D&&R&&l.jsx(C_,{sessionId:R.session_id||R.sessionId||R.id,currentAgentId:R.assigned_agent_id,currentDepartmentId:R.assigned_department_id,onClose:()=>C(!1),onTransferred:()=>$()})]})}const ua="/api/visual-flows-live";async function Qt(t,a){if(!t.ok){let s=a;try{const i=await t.json();i.error&&(s=i.error)}catch{}throw new Error(s)}return t.json()}async function Tb(){const t=await fetch(ua);return Qt(t,"Error al cargar flujos")}async function rh(t){const a=await fetch(`${ua}/${t}`);return Qt(a,"Flujo no encontrado")}async function M_(t){const a=await fetch(ua,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});return Qt(a,"Error al crear flujo")}async function A_(t,a){const s=await fetch(`${ua}/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});return Qt(s,"Error al actualizar flujo")}async function k_(t){const a=await fetch(`${ua}/${t}`,{method:"DELETE"});return Qt(a,"Error al eliminar flujo")}async function Mb(t,a=!0){const s=await fetch(`${ua}/${t}/activate`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({active:a})});return Qt(s,"Error al activar flujo")}async function R_(t,a){const s=await fetch(`${ua}/${t}/duplicate`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({new_name:a})});return Qt(s,"Error al duplicar flujo")}async function D_(){const t=await fetch(`${ua}/templates/list`);return Qt(t,"Error al cargar plantillas")}async function Ab(t,a){const s=await fetch(`${ua}/templates/${t}/create`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:a})});return Qt(s,"Error al crear desde plantilla")}async function z_(t={}){const a=new URLSearchParams;t.status&&a.append("status",t.status),t.category&&a.append("category",t.category),t.lang&&a.append("lang",t.lang),a.append("with","components"),a.append("limit","200");const s=await fetch(`/api/chat/templates?${a}`);return Qt(s,"Error al cargar plantillas de Meta")}async function O_({templateName:t,languageCode:a,phone:s,parameters:i=[],headerParams:c=[],buttonParams:u=[]}){const f=await fetch("/api/templates/test",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({templateName:t,languageCode:a,phone:s,parameters:i,headerParams:c,buttonParams:u})});return Qt(f,"Error al enviar plantilla de prueba")}async function B_(){const t=await fetch("/api/settings/visual-flows");return Qt(t,"Error al obtener estado de Visual Flows")}async function H_(t){const a=await fetch("/api/settings/visual-flows",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({enabled:t})});return Qt(a,"Error al cambiar estado de Visual Flows")}const Sx="whatsapp_test_phone";function L_({template:t,onClose:a}){const[s,i]=_.useState(""),[c,u]=_.useState(!0),[f,m]=_.useState([]),[p,g]=_.useState([]),[y,x]=_.useState([]),[b,S]=_.useState(!1),[j,A]=_.useState(null);_.useEffect(()=>{const k=localStorage.getItem(Sx);k&&i(k)},[]),_.useEffect(()=>{if(!t?.components)return;const k=t.components.find(M=>M.type==="BODY"),w=t.components.find(M=>M.type==="HEADER"),z=t.components.filter(M=>M.type==="BUTTONS");if(k?.text){const M=k.text.match(/\{\{(\d+)\}\}/g)||[];m(M.map(()=>""))}if(w?.text){const M=w.text.match(/\{\{(\d+)\}\}/g)||[];g(M.map(()=>""))}if(z.length>0){const M=[];z.forEach(Y=>{Y.buttons&&Y.buttons.forEach(U=>{U.type==="URL"&&U.url?.includes("{{")&&M.push("")})}),x(M)}},[t]);const N=async()=>{if(!s.trim()){A({ok:!1,error:"Ingresa un nmero de telfono"});return}S(!0),A(null);try{c&&localStorage.setItem(Sx,s);const k=await O_({templateName:t.name,languageCode:t.language,phone:s.trim(),parameters:f.filter(w=>w!==""),headerParams:p.filter(w=>w!==""),buttonParams:y.filter(w=>w!=="")});A(k)}catch(k){A({ok:!1,error:k.message})}finally{S(!1)}},E=()=>{if(!t?.components)return"";const k=t.components.find(z=>z.type==="BODY");if(!k?.text)return"";let w=k.text;return f.forEach((z,M)=>{w=w.replace(`{{${M+1}}}`,z||`[param ${M+1}]`)}),w},D={APPROVED:{bg:"#dcfce7",text:"#166534"},PENDING:{bg:"#fef3c7",text:"#92400e"},REJECTED:{bg:"#fee2e2",text:"#991b1b"}},C={MARKETING:{bg:"#dbeafe",text:"#1e40af"},UTILITY:{bg:"#f3e8ff",text:"#6b21a8"},AUTHENTICATION:{bg:"#fce7f3",text:"#9d174d"}};return l.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:l.jsxs("div",{style:{background:"white",borderRadius:"16px",padding:"24px",maxWidth:"500px",width:"90%",maxHeight:"90vh",overflow:"auto"},children:[l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"16px"},children:[l.jsxs("div",{children:[l.jsx("h2",{style:{margin:"0 0 8px 0",fontSize:"20px"},children:"Probar Plantilla"}),l.jsxs("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:[l.jsx("span",{style:{padding:"2px 8px",borderRadius:"4px",fontSize:"12px",fontWeight:"500",background:D[t.status]?.bg||"#f3f4f6",color:D[t.status]?.text||"#374151"},children:t.status}),l.jsx("span",{style:{padding:"2px 8px",borderRadius:"4px",fontSize:"12px",fontWeight:"500",background:C[t.category]?.bg||"#f3f4f6",color:C[t.category]?.text||"#374151"},children:t.category}),l.jsx("span",{style:{padding:"2px 8px",borderRadius:"4px",fontSize:"12px",background:"#f3f4f6",color:"#374151"},children:t.language})]})]}),l.jsx("button",{onClick:a,style:{background:"none",border:"none",fontSize:"24px",cursor:"pointer",color:"#6b7280"},children:""})]}),l.jsxs("div",{style:{background:"#f9fafb",padding:"12px",borderRadius:"8px",marginBottom:"16px"},children:[l.jsx("div",{style:{fontSize:"12px",color:"#6b7280",marginBottom:"4px"},children:"Nombre de la plantilla"}),l.jsx("div",{style:{fontFamily:"monospace",fontWeight:"500"},children:t.name})]}),l.jsxs("div",{style:{background:"#dcf8c6",padding:"12px",borderRadius:"8px",marginBottom:"16px",whiteSpace:"pre-wrap"},children:[l.jsx("div",{style:{fontSize:"12px",color:"#075e54",marginBottom:"4px"},children:"Vista previa"}),l.jsx("div",{style:{color:"#000"},children:E()||"(Sin contenido)"})]}),f.length>0&&l.jsxs("div",{style:{marginBottom:"16px"},children:[l.jsx("div",{style:{fontSize:"14px",fontWeight:"500",marginBottom:"8px"},children:"Parmetros del mensaje"}),f.map((k,w)=>l.jsx("input",{type:"text",placeholder:`Parmetro {{${w+1}}}`,value:k,onChange:z=>{const M=[...f];M[w]=z.target.value,m(M)},style:{width:"100%",padding:"8px 12px",border:"1px solid #d1d5db",borderRadius:"6px",marginBottom:"8px",fontSize:"14px"}},`body-${w}`))]}),p.length>0&&l.jsxs("div",{style:{marginBottom:"16px"},children:[l.jsx("div",{style:{fontSize:"14px",fontWeight:"500",marginBottom:"8px"},children:"Parmetros del encabezado"}),p.map((k,w)=>l.jsx("input",{type:"text",placeholder:`Header {{${w+1}}}`,value:k,onChange:z=>{const M=[...p];M[w]=z.target.value,g(M)},style:{width:"100%",padding:"8px 12px",border:"1px solid #d1d5db",borderRadius:"6px",marginBottom:"8px",fontSize:"14px"}},`header-${w}`))]}),y.length>0&&l.jsxs("div",{style:{marginBottom:"16px"},children:[l.jsx("div",{style:{fontSize:"14px",fontWeight:"500",marginBottom:"8px"},children:"Parmetros de botn URL"}),y.map((k,w)=>l.jsx("input",{type:"text",placeholder:`Texto dinmico del botn ${w+1}`,value:k,onChange:z=>{const M=[...y];M[w]=z.target.value,x(M)},style:{width:"100%",padding:"8px 12px",border:"1px solid #d1d5db",borderRadius:"6px",marginBottom:"8px",fontSize:"14px"}},`btn-${w}`))]}),l.jsxs("div",{style:{marginBottom:"16px"},children:[l.jsx("div",{style:{fontSize:"14px",fontWeight:"500",marginBottom:"8px"},children:"Nmero de telfono destino"}),l.jsx("input",{type:"tel",placeholder:"56912345678",value:s,onChange:k=>i(k.target.value),style:{width:"100%",padding:"8px 12px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"14px"}}),l.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",marginTop:"8px",fontSize:"13px",color:"#6b7280",cursor:"pointer"},children:[l.jsx("input",{type:"checkbox",checked:c,onChange:k=>u(k.target.checked)}),"Recordar este nmero"]})]}),j&&l.jsx("div",{style:{padding:"12px",borderRadius:"8px",marginBottom:"16px",background:j.ok?"#dcfce7":"#fee2e2",color:j.ok?"#166534":"#991b1b"},children:j.ok?l.jsxs(l.Fragment,{children:[l.jsx("div",{style:{fontWeight:"500"},children:"Enviado correctamente"}),l.jsxs("div",{style:{fontSize:"13px",marginTop:"4px"},children:["Mensaje enviado a ",j.sentTo]})]}):l.jsxs(l.Fragment,{children:[l.jsx("div",{style:{fontWeight:"500"},children:"Error al enviar"}),l.jsx("div",{style:{fontSize:"13px",marginTop:"4px"},children:j.error})]})}),l.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end"},children:[l.jsx("button",{onClick:a,style:{padding:"10px 20px",border:"1px solid #d1d5db",borderRadius:"8px",background:"white",cursor:"pointer",fontSize:"14px"},children:"Cerrar"}),l.jsx("button",{onClick:N,disabled:b||t.status!=="APPROVED",style:{padding:"10px 20px",border:"none",borderRadius:"8px",background:t.status==="APPROVED"?"#25d366":"#9ca3af",color:"white",cursor:t.status==="APPROVED"?"pointer":"not-allowed",fontSize:"14px",fontWeight:"500",display:"flex",alignItems:"center",gap:"8px"},children:b?"Enviando...":"Enviar Prueba"})]}),t.status!=="APPROVED"&&l.jsx("div",{style:{marginTop:"12px",padding:"8px",background:"#fef3c7",borderRadius:"6px",fontSize:"13px",color:"#92400e",textAlign:"center"},children:"Solo se pueden probar plantillas con estado APPROVED"})]})})}function U_(){const t=Ts(),[a,s]=_.useState("flows"),[i,c]=_.useState([]),[u,f]=_.useState([]),[m,p]=_.useState([]),[g,y]=_.useState(!1),[x,b]=_.useState({status:"",category:""}),[S,j]=_.useState(null),[A,N]=_.useState(!0),[E,D]=_.useState(null),[C,k]=_.useState(null),[w,z]=_.useState(!0),[M,Y]=_.useState(!1);_.useEffect(()=>{Q(),U()},[]),_.useEffect(()=>{a==="whatsapp"&&I()},[a,x]);const U=async()=>{try{const L=await B_();z(L.enabled)}catch(L){console.error("Error loading visual flows status:",L)}},ne=async()=>{try{Y(!0);const Z=await H_(!w);z(Z.enabled),ae(Z.enabled?"Modo automtico ACTIVADO":"Modo automtico DESACTIVADO",Z.enabled?"success":"info")}catch(L){console.error("Error toggling visual flows:",L),ae(`Error: ${L.message}`,"error")}finally{Y(!1)}},Q=async()=>{try{N(!0),D(null);const[L,Z]=await Promise.all([Tb(),D_()]);c(L.flows||[]),f(Z.templates||[])}catch(L){console.error("Error loading flows:",L),D(L.message)}finally{N(!1)}},I=async()=>{try{y(!0);const L={};x.status&&(L.status=x.status),x.category&&(L.category=x.category);const Z=await z_(L);p(Z.items||[])}catch(L){console.error("Error loading Meta templates:",L),ae(`Error al cargar plantillas: ${L.message}`,"error")}finally{y(!1)}},ae=(L,Z="success")=>{k({message:L,type:Z}),setTimeout(()=>k(null),4e3)},$=async(L,Z)=>{try{const R=await Ab(L,null);ae(`Flujo "${Z}" creado correctamente`,"success"),await Q(),R.id&&t(`/flows/builder/${R.id}`)}catch(R){console.error("Error creating from template:",R),ae(`Error al crear flujo: ${R.message}`,"error")}},F=async L=>{try{const Z=!L.is_active;await Mb(L.id,Z),ae(`Flujo "${L.name}" ${Z?"activado":"desactivado"}`,"success"),await Q()}catch(Z){console.error("Error toggling flow:",Z),ae(`Error: ${Z.message}`,"error")}},O=async L=>{try{await R_(L.id,`${L.name} (copia)`),ae("Flujo duplicado correctamente","success"),await Q()}catch(Z){console.error("Error duplicating flow:",Z),ae(`Error al duplicar: ${Z.message}`,"error")}},B=async L=>{if(confirm(`Ests seguro de eliminar el flujo "${L.name}"?`))try{await k_(L.id),ae("Flujo eliminado correctamente","success"),await Q()}catch(Z){console.error("Error deleting flow:",Z),ae(`Error al eliminar: ${Z.message}`,"error")}},V=L=>({sales:"bg-green-100 text-green-800",support:"bg-blue-100 text-blue-800",service:"bg-purple-100 text-purple-800",feedback:"bg-yellow-100 text-yellow-800",engagement:"bg-pink-100 text-pink-800"})[L]||"bg-gray-100 text-gray-800";return A?l.jsx("div",{className:"flex items-center justify-center h-screen",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-500 mx-auto mb-4"}),l.jsx("p",{className:"text-gray-600",children:"Cargando flujos..."})]})}):E?l.jsx("div",{className:"p-8",children:l.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[l.jsx("h3",{className:"text-red-800 font-semibold mb-2",children:"Error al cargar flujos"}),l.jsx("p",{className:"text-red-600",children:E}),l.jsx("button",{onClick:Q,className:"mt-4 px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700",children:"Reintentar"})]})}):l.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[l.jsxs("div",{className:"mb-6 flex justify-between items-start",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Gestin de Flujos"}),l.jsx("p",{className:"text-gray-600",children:"Administra tus flujos conversacionales y crea nuevos desde plantillas predefinidas"})]}),l.jsxs("div",{className:`flex items-center gap-3 px-4 py-3 rounded-lg border ${w?"bg-green-50 border-green-200":"bg-gray-50 border-gray-300"}`,children:[l.jsxs("div",{className:"text-right",children:[l.jsx("p",{className:`text-sm font-medium ${w?"text-green-800":"text-gray-600"}`,children:"Modo Automtico"}),l.jsx("p",{className:`text-xs ${w?"text-green-600":"text-gray-500"}`,children:w?"Bot respondiendo":"Bot pausado"})]}),l.jsx("button",{onClick:ne,disabled:M,className:`relative inline-flex h-7 w-14 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 ${w?"bg-green-500 focus:ring-green-500":"bg-gray-300 focus:ring-gray-500"} ${M?"opacity-50 cursor-wait":"cursor-pointer"}`,children:l.jsx("span",{className:`inline-block h-5 w-5 transform rounded-full bg-white shadow-md transition-transform ${w?"translate-x-8":"translate-x-1"}`})})]})]}),C&&l.jsx("div",{className:`mb-4 p-4 rounded-lg ${C.type==="success"?"bg-green-50 text-green-800 border border-green-200":C.type==="error"?"bg-red-50 text-red-800 border border-red-200":"bg-blue-50 text-blue-800 border border-blue-200"}`,children:C.message}),l.jsx("div",{className:"mb-6 border-b border-gray-200",children:l.jsxs("div",{className:"flex space-x-8",children:[l.jsxs("button",{onClick:()=>s("flows"),className:`pb-4 px-1 border-b-2 font-medium transition-colors ${a==="flows"?"border-green-500 text-green-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:["Mis Flujos (",i.length,")"]}),l.jsxs("button",{onClick:()=>s("templates"),className:`pb-4 px-1 border-b-2 font-medium transition-colors ${a==="templates"?"border-green-500 text-green-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:["Plantillas (",u.length,")"]}),l.jsxs("button",{onClick:()=>s("whatsapp"),className:`pb-4 px-1 border-b-2 font-medium transition-colors flex items-center gap-2 ${a==="whatsapp"?"border-green-500 text-green-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[l.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})}),"WhatsApp Templates"]})]})}),a==="flows"&&l.jsx("div",{children:i.length===0?l.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300",children:[l.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),l.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No tienes flujos creados"}),l.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Comienza creando un flujo desde una plantilla"}),l.jsx("div",{className:"mt-6",children:l.jsx("button",{onClick:()=>s("templates"),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:"Ver Plantillas"})})]}):l.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:l.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[l.jsx("thead",{className:"bg-gray-50",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nombre"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estado"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estadsticas"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ltima actualizacin"}),l.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),l.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i.map(L=>l.jsxs("tr",{className:"hover:bg-gray-50",children:[l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsx("div",{className:"flex items-center",children:l.jsxs("div",{children:[l.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[L.name,L.is_default&&l.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800",children:"Por defecto"})]}),L.description&&l.jsx("div",{className:"text-sm text-gray-500",children:L.description})]})})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsx("button",{onClick:()=>F(L),className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium cursor-pointer transition-colors ${L.is_active?"bg-green-100 text-green-800 hover:bg-green-200":"bg-gray-100 text-gray-800 hover:bg-gray-200"}`,children:L.is_active?"Activo":"Inactivo"})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:l.jsxs("div",{className:"flex flex-col space-y-1",children:[l.jsxs("span",{children:["Ejecutado: ",L.times_triggered||0," veces"]}),l.jsxs("span",{children:["Completado: ",L.times_completed||0," veces"]})]})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:L.updated_at?$c(new Date(L.updated_at),"dd MMM yyyy, HH:mm",{locale:Mr}):"-"}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:l.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[l.jsx("button",{onClick:()=>t(`/flows/builder/${L.id}`),className:"text-blue-600 hover:text-blue-900",title:"Editar",children:l.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),l.jsx("button",{onClick:()=>O(L),className:"text-gray-600 hover:text-gray-900",title:"Duplicar",children:l.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})})}),l.jsx("button",{onClick:()=>B(L),className:"text-red-600 hover:text-red-900",title:"Eliminar",children:l.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})})]},L.id))})]})})}),a==="templates"&&l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:u.map(L=>l.jsx("div",{className:"bg-white rounded-lg shadow-md hover:shadow-lg transition-shadow overflow-hidden border border-gray-200",children:l.jsxs("div",{className:"p-6",children:[l.jsxs("div",{className:"flex items-start justify-between mb-3",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:L.name}),l.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${V(L.category)}`,children:L.category})]}),l.jsx("p",{className:"text-sm text-gray-600 mb-4 line-clamp-2",children:L.description}),l.jsxs("div",{className:"flex items-center text-sm text-gray-500 mb-4",children:[l.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"})}),l.jsxs("span",{children:[L.nodes_count," nodos"]})]}),L.features&&L.features.length>0&&l.jsx("div",{className:"flex flex-wrap gap-1 mb-4",children:L.features.map(Z=>l.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-purple-50 text-purple-700 border border-purple-200",children:Z},Z))}),l.jsx("button",{onClick:()=>$(L.id,L.name),className:"w-full px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors font-medium",children:"Crear desde esta plantilla"})]})},L.id))}),a==="whatsapp"&&l.jsxs("div",{children:[l.jsxs("div",{className:"mb-6 flex flex-wrap gap-4 items-center",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Estado"}),l.jsxs("select",{value:x.status,onChange:L=>b({...x,status:L.target.value}),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-green-500 focus:border-green-500",children:[l.jsx("option",{value:"",children:"Todos"}),l.jsx("option",{value:"APPROVED",children:"Aprobadas"}),l.jsx("option",{value:"PENDING",children:"Pendientes"}),l.jsx("option",{value:"REJECTED",children:"Rechazadas"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Categora"}),l.jsxs("select",{value:x.category,onChange:L=>b({...x,category:L.target.value}),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-green-500 focus:border-green-500",children:[l.jsx("option",{value:"",children:"Todas"}),l.jsx("option",{value:"MARKETING",children:"Marketing"}),l.jsx("option",{value:"UTILITY",children:"Utilidad"}),l.jsx("option",{value:"AUTHENTICATION",children:"Autenticacin"})]})]}),l.jsx("div",{className:"flex-1"}),l.jsxs("div",{className:"text-sm text-gray-500",children:[m.length," plantillas encontradas"]})]}),g?l.jsxs("div",{className:"flex items-center justify-center py-12",children:[l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-green-500"}),l.jsx("span",{className:"ml-3 text-gray-600",children:"Cargando plantillas de Meta..."})]}):m.length===0?l.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300",children:[l.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),l.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No se encontraron plantillas"}),l.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Ajusta los filtros o crea plantillas en Meta Business Suite"})]}):l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:m.map((L,Z)=>{const X=L.components?.find(oe=>oe.type==="BODY")?.text||"",ee={APPROVED:"bg-green-100 text-green-800",PENDING:"bg-yellow-100 text-yellow-800",REJECTED:"bg-red-100 text-red-800"},H={MARKETING:"bg-blue-100 text-blue-800",UTILITY:"bg-purple-100 text-purple-800",AUTHENTICATION:"bg-pink-100 text-pink-800"};return l.jsx("div",{className:"bg-white rounded-lg shadow-md hover:shadow-lg transition-shadow overflow-hidden border border-gray-200",children:l.jsxs("div",{className:"p-5",children:[l.jsx("div",{className:"flex items-start justify-between mb-3",children:l.jsx("h3",{className:"text-base font-semibold text-gray-900 font-mono",children:L.name})}),l.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[l.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded text-xs font-medium ${ee[L.status]||"bg-gray-100 text-gray-800"}`,children:L.status}),l.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded text-xs font-medium ${H[L.category]||"bg-gray-100 text-gray-800"}`,children:L.category}),l.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-gray-100 text-gray-800",children:L.language})]}),l.jsx("div",{className:"bg-gray-50 rounded-lg p-3 mb-4 max-h-32 overflow-y-auto",children:l.jsx("p",{className:"text-sm text-gray-700 whitespace-pre-wrap",children:X.length>200?X.substring(0,200)+"...":X||"(Sin contenido)"})}),l.jsx("button",{onClick:()=>j(L),disabled:L.status!=="APPROVED",className:`w-full px-4 py-2 rounded-lg font-medium transition-colors ${L.status==="APPROVED"?"bg-green-600 text-white hover:bg-green-700":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:L.status==="APPROVED"?"Probar Plantilla":"No disponible"})]})},`${L.name}-${L.language}-${Z}`)})})]}),S&&l.jsx(L_,{template:S,onClose:()=>j(null)})]})}function ct(t){if(typeof t=="string"||typeof t=="number")return""+t;let a="";if(Array.isArray(t))for(let s=0,i;s<t.length;s++)(i=ct(t[s]))!==""&&(a+=(a&&" ")+i);else for(let s in t)t[s]&&(a+=(a&&" ")+s);return a}var $_={value:()=>{}};function Xc(){for(var t=0,a=arguments.length,s={},i;t<a;++t){if(!(i=arguments[t]+"")||i in s||/[\s.]/.test(i))throw new Error("illegal type: "+i);s[i]=[]}return new fc(s)}function fc(t){this._=t}function q_(t,a){return t.trim().split(/^|\s+/).map(function(s){var i="",c=s.indexOf(".");if(c>=0&&(i=s.slice(c+1),s=s.slice(0,c)),s&&!a.hasOwnProperty(s))throw new Error("unknown type: "+s);return{type:s,name:i}})}fc.prototype=Xc.prototype={constructor:fc,on:function(t,a){var s=this._,i=q_(t+"",s),c,u=-1,f=i.length;if(arguments.length<2){for(;++u<f;)if((c=(t=i[u]).type)&&(c=V_(s[c],t.name)))return c;return}if(a!=null&&typeof a!="function")throw new Error("invalid callback: "+a);for(;++u<f;)if(c=(t=i[u]).type)s[c]=Nx(s[c],t.name,a);else if(a==null)for(c in s)s[c]=Nx(s[c],t.name,null);return this},copy:function(){var t={},a=this._;for(var s in a)t[s]=a[s].slice();return new fc(t)},call:function(t,a){if((c=arguments.length-2)>0)for(var s=new Array(c),i=0,c,u;i<c;++i)s[i]=arguments[i+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(u=this._[t],i=0,c=u.length;i<c;++i)u[i].value.apply(a,s)},apply:function(t,a,s){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],c=0,u=i.length;c<u;++c)i[c].value.apply(a,s)}};function V_(t,a){for(var s=0,i=t.length,c;s<i;++s)if((c=t[s]).name===a)return c.value}function Nx(t,a,s){for(var i=0,c=t.length;i<c;++i)if(t[i].name===a){t[i]=$_,t=t.slice(0,i).concat(t.slice(i+1));break}return s!=null&&t.push({name:a,value:s}),t}var ih="http://www.w3.org/1999/xhtml";const jx={svg:"http://www.w3.org/2000/svg",xhtml:ih,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Gc(t){var a=t+="",s=a.indexOf(":");return s>=0&&(a=t.slice(0,s))!=="xmlns"&&(t=t.slice(s+1)),jx.hasOwnProperty(a)?{space:jx[a],local:t}:t}function Y_(t){return function(){var a=this.ownerDocument,s=this.namespaceURI;return s===ih&&a.documentElement.namespaceURI===ih?a.createElement(t):a.createElementNS(s,t)}}function X_(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function kb(t){var a=Gc(t);return(a.local?X_:Y_)(a)}function G_(){}function Uh(t){return t==null?G_:function(){return this.querySelector(t)}}function I_(t){typeof t!="function"&&(t=Uh(t));for(var a=this._groups,s=a.length,i=new Array(s),c=0;c<s;++c)for(var u=a[c],f=u.length,m=i[c]=new Array(f),p,g,y=0;y<f;++y)(p=u[y])&&(g=t.call(p,p.__data__,y,u))&&("__data__"in p&&(g.__data__=p.__data__),m[y]=g);return new Pt(i,this._parents)}function P_(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function Z_(){return[]}function Rb(t){return t==null?Z_:function(){return this.querySelectorAll(t)}}function Q_(t){return function(){return P_(t.apply(this,arguments))}}function F_(t){typeof t=="function"?t=Q_(t):t=Rb(t);for(var a=this._groups,s=a.length,i=[],c=[],u=0;u<s;++u)for(var f=a[u],m=f.length,p,g=0;g<m;++g)(p=f[g])&&(i.push(t.call(p,p.__data__,g,f)),c.push(p));return new Pt(i,c)}function Db(t){return function(){return this.matches(t)}}function zb(t){return function(a){return a.matches(t)}}var W_=Array.prototype.find;function K_(t){return function(){return W_.call(this.children,t)}}function J_(){return this.firstElementChild}function e5(t){return this.select(t==null?J_:K_(typeof t=="function"?t:zb(t)))}var t5=Array.prototype.filter;function n5(){return Array.from(this.children)}function a5(t){return function(){return t5.call(this.children,t)}}function s5(t){return this.selectAll(t==null?n5:a5(typeof t=="function"?t:zb(t)))}function r5(t){typeof t!="function"&&(t=Db(t));for(var a=this._groups,s=a.length,i=new Array(s),c=0;c<s;++c)for(var u=a[c],f=u.length,m=i[c]=[],p,g=0;g<f;++g)(p=u[g])&&t.call(p,p.__data__,g,u)&&m.push(p);return new Pt(i,this._parents)}function Ob(t){return new Array(t.length)}function i5(){return new Pt(this._enter||this._groups.map(Ob),this._parents)}function jc(t,a){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=a}jc.prototype={constructor:jc,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,a){return this._parent.insertBefore(t,a)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function o5(t){return function(){return t}}function l5(t,a,s,i,c,u){for(var f=0,m,p=a.length,g=u.length;f<g;++f)(m=a[f])?(m.__data__=u[f],i[f]=m):s[f]=new jc(t,u[f]);for(;f<p;++f)(m=a[f])&&(c[f]=m)}function c5(t,a,s,i,c,u,f){var m,p,g=new Map,y=a.length,x=u.length,b=new Array(y),S;for(m=0;m<y;++m)(p=a[m])&&(b[m]=S=f.call(p,p.__data__,m,a)+"",g.has(S)?c[m]=p:g.set(S,p));for(m=0;m<x;++m)S=f.call(t,u[m],m,u)+"",(p=g.get(S))?(i[m]=p,p.__data__=u[m],g.delete(S)):s[m]=new jc(t,u[m]);for(m=0;m<y;++m)(p=a[m])&&g.get(b[m])===p&&(c[m]=p)}function u5(t){return t.__data__}function d5(t,a){if(!arguments.length)return Array.from(this,u5);var s=a?c5:l5,i=this._parents,c=this._groups;typeof t!="function"&&(t=o5(t));for(var u=c.length,f=new Array(u),m=new Array(u),p=new Array(u),g=0;g<u;++g){var y=i[g],x=c[g],b=x.length,S=f5(t.call(y,y&&y.__data__,g,i)),j=S.length,A=m[g]=new Array(j),N=f[g]=new Array(j),E=p[g]=new Array(b);s(y,x,A,N,E,S,a);for(var D=0,C=0,k,w;D<j;++D)if(k=A[D]){for(D>=C&&(C=D+1);!(w=N[C])&&++C<j;);k._next=w||null}}return f=new Pt(f,i),f._enter=m,f._exit=p,f}function f5(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function h5(){return new Pt(this._exit||this._groups.map(Ob),this._parents)}function m5(t,a,s){var i=this.enter(),c=this,u=this.exit();return typeof t=="function"?(i=t(i),i&&(i=i.selection())):i=i.append(t+""),a!=null&&(c=a(c),c&&(c=c.selection())),s==null?u.remove():s(u),i&&c?i.merge(c).order():c}function p5(t){for(var a=t.selection?t.selection():t,s=this._groups,i=a._groups,c=s.length,u=i.length,f=Math.min(c,u),m=new Array(c),p=0;p<f;++p)for(var g=s[p],y=i[p],x=g.length,b=m[p]=new Array(x),S,j=0;j<x;++j)(S=g[j]||y[j])&&(b[j]=S);for(;p<c;++p)m[p]=s[p];return new Pt(m,this._parents)}function g5(){for(var t=this._groups,a=-1,s=t.length;++a<s;)for(var i=t[a],c=i.length-1,u=i[c],f;--c>=0;)(f=i[c])&&(u&&f.compareDocumentPosition(u)^4&&u.parentNode.insertBefore(f,u),u=f);return this}function x5(t){t||(t=y5);function a(x,b){return x&&b?t(x.__data__,b.__data__):!x-!b}for(var s=this._groups,i=s.length,c=new Array(i),u=0;u<i;++u){for(var f=s[u],m=f.length,p=c[u]=new Array(m),g,y=0;y<m;++y)(g=f[y])&&(p[y]=g);p.sort(a)}return new Pt(c,this._parents).order()}function y5(t,a){return t<a?-1:t>a?1:t>=a?0:NaN}function b5(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function v5(){return Array.from(this)}function w5(){for(var t=this._groups,a=0,s=t.length;a<s;++a)for(var i=t[a],c=0,u=i.length;c<u;++c){var f=i[c];if(f)return f}return null}function S5(){let t=0;for(const a of this)++t;return t}function N5(){return!this.node()}function j5(t){for(var a=this._groups,s=0,i=a.length;s<i;++s)for(var c=a[s],u=0,f=c.length,m;u<f;++u)(m=c[u])&&t.call(m,m.__data__,u,c);return this}function E5(t){return function(){this.removeAttribute(t)}}function _5(t){return function(){this.removeAttributeNS(t.space,t.local)}}function C5(t,a){return function(){this.setAttribute(t,a)}}function T5(t,a){return function(){this.setAttributeNS(t.space,t.local,a)}}function M5(t,a){return function(){var s=a.apply(this,arguments);s==null?this.removeAttribute(t):this.setAttribute(t,s)}}function A5(t,a){return function(){var s=a.apply(this,arguments);s==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,s)}}function k5(t,a){var s=Gc(t);if(arguments.length<2){var i=this.node();return s.local?i.getAttributeNS(s.space,s.local):i.getAttribute(s)}return this.each((a==null?s.local?_5:E5:typeof a=="function"?s.local?A5:M5:s.local?T5:C5)(s,a))}function Bb(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function R5(t){return function(){this.style.removeProperty(t)}}function D5(t,a,s){return function(){this.style.setProperty(t,a,s)}}function z5(t,a,s){return function(){var i=a.apply(this,arguments);i==null?this.style.removeProperty(t):this.style.setProperty(t,i,s)}}function O5(t,a,s){return arguments.length>1?this.each((a==null?R5:typeof a=="function"?z5:D5)(t,a,s??"")):Ar(this.node(),t)}function Ar(t,a){return t.style.getPropertyValue(a)||Bb(t).getComputedStyle(t,null).getPropertyValue(a)}function B5(t){return function(){delete this[t]}}function H5(t,a){return function(){this[t]=a}}function L5(t,a){return function(){var s=a.apply(this,arguments);s==null?delete this[t]:this[t]=s}}function U5(t,a){return arguments.length>1?this.each((a==null?B5:typeof a=="function"?L5:H5)(t,a)):this.node()[t]}function Hb(t){return t.trim().split(/^|\s+/)}function $h(t){return t.classList||new Lb(t)}function Lb(t){this._node=t,this._names=Hb(t.getAttribute("class")||"")}Lb.prototype={add:function(t){var a=this._names.indexOf(t);a<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var a=this._names.indexOf(t);a>=0&&(this._names.splice(a,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function Ub(t,a){for(var s=$h(t),i=-1,c=a.length;++i<c;)s.add(a[i])}function $b(t,a){for(var s=$h(t),i=-1,c=a.length;++i<c;)s.remove(a[i])}function $5(t){return function(){Ub(this,t)}}function q5(t){return function(){$b(this,t)}}function V5(t,a){return function(){(a.apply(this,arguments)?Ub:$b)(this,t)}}function Y5(t,a){var s=Hb(t+"");if(arguments.length<2){for(var i=$h(this.node()),c=-1,u=s.length;++c<u;)if(!i.contains(s[c]))return!1;return!0}return this.each((typeof a=="function"?V5:a?$5:q5)(s,a))}function X5(){this.textContent=""}function G5(t){return function(){this.textContent=t}}function I5(t){return function(){var a=t.apply(this,arguments);this.textContent=a??""}}function P5(t){return arguments.length?this.each(t==null?X5:(typeof t=="function"?I5:G5)(t)):this.node().textContent}function Z5(){this.innerHTML=""}function Q5(t){return function(){this.innerHTML=t}}function F5(t){return function(){var a=t.apply(this,arguments);this.innerHTML=a??""}}function W5(t){return arguments.length?this.each(t==null?Z5:(typeof t=="function"?F5:Q5)(t)):this.node().innerHTML}function K5(){this.nextSibling&&this.parentNode.appendChild(this)}function J5(){return this.each(K5)}function e3(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function t3(){return this.each(e3)}function n3(t){var a=typeof t=="function"?t:kb(t);return this.select(function(){return this.appendChild(a.apply(this,arguments))})}function a3(){return null}function s3(t,a){var s=typeof t=="function"?t:kb(t),i=a==null?a3:typeof a=="function"?a:Uh(a);return this.select(function(){return this.insertBefore(s.apply(this,arguments),i.apply(this,arguments)||null)})}function r3(){var t=this.parentNode;t&&t.removeChild(this)}function i3(){return this.each(r3)}function o3(){var t=this.cloneNode(!1),a=this.parentNode;return a?a.insertBefore(t,this.nextSibling):t}function l3(){var t=this.cloneNode(!0),a=this.parentNode;return a?a.insertBefore(t,this.nextSibling):t}function c3(t){return this.select(t?l3:o3)}function u3(t){return arguments.length?this.property("__data__",t):this.node().__data__}function d3(t){return function(a){t.call(this,a,this.__data__)}}function f3(t){return t.trim().split(/^|\s+/).map(function(a){var s="",i=a.indexOf(".");return i>=0&&(s=a.slice(i+1),a=a.slice(0,i)),{type:a,name:s}})}function h3(t){return function(){var a=this.__on;if(a){for(var s=0,i=-1,c=a.length,u;s<c;++s)u=a[s],(!t.type||u.type===t.type)&&u.name===t.name?this.removeEventListener(u.type,u.listener,u.options):a[++i]=u;++i?a.length=i:delete this.__on}}}function m3(t,a,s){return function(){var i=this.__on,c,u=d3(a);if(i){for(var f=0,m=i.length;f<m;++f)if((c=i[f]).type===t.type&&c.name===t.name){this.removeEventListener(c.type,c.listener,c.options),this.addEventListener(c.type,c.listener=u,c.options=s),c.value=a;return}}this.addEventListener(t.type,u,s),c={type:t.type,name:t.name,value:a,listener:u,options:s},i?i.push(c):this.__on=[c]}}function p3(t,a,s){var i=f3(t+""),c,u=i.length,f;if(arguments.length<2){var m=this.node().__on;if(m){for(var p=0,g=m.length,y;p<g;++p)for(c=0,y=m[p];c<u;++c)if((f=i[c]).type===y.type&&f.name===y.name)return y.value}return}for(m=a?m3:h3,c=0;c<u;++c)this.each(m(i[c],a,s));return this}function qb(t,a,s){var i=Bb(t),c=i.CustomEvent;typeof c=="function"?c=new c(a,s):(c=i.document.createEvent("Event"),s?(c.initEvent(a,s.bubbles,s.cancelable),c.detail=s.detail):c.initEvent(a,!1,!1)),t.dispatchEvent(c)}function g3(t,a){return function(){return qb(this,t,a)}}function x3(t,a){return function(){return qb(this,t,a.apply(this,arguments))}}function y3(t,a){return this.each((typeof a=="function"?x3:g3)(t,a))}function*b3(){for(var t=this._groups,a=0,s=t.length;a<s;++a)for(var i=t[a],c=0,u=i.length,f;c<u;++c)(f=i[c])&&(yield f)}var Vb=[null];function Pt(t,a){this._groups=t,this._parents=a}function uo(){return new Pt([[document.documentElement]],Vb)}function v3(){return this}Pt.prototype=uo.prototype={constructor:Pt,select:I_,selectAll:F_,selectChild:e5,selectChildren:s5,filter:r5,data:d5,enter:i5,exit:h5,join:m5,merge:p5,selection:v3,order:g5,sort:x5,call:b5,nodes:v5,node:w5,size:S5,empty:N5,each:j5,attr:k5,style:O5,property:U5,classed:Y5,text:P5,html:W5,raise:J5,lower:t3,append:n3,insert:s3,remove:i3,clone:c3,datum:u3,on:p3,dispatch:y3,[Symbol.iterator]:b3};function Xt(t){return typeof t=="string"?new Pt([[document.querySelector(t)]],[document.documentElement]):new Pt([[t]],Vb)}function w3(t){let a;for(;a=t.sourceEvent;)t=a;return t}function mn(t,a){if(t=w3(t),a===void 0&&(a=t.currentTarget),a){var s=a.ownerSVGElement||a;if(s.createSVGPoint){var i=s.createSVGPoint();return i.x=t.clientX,i.y=t.clientY,i=i.matrixTransform(a.getScreenCTM().inverse()),[i.x,i.y]}if(a.getBoundingClientRect){var c=a.getBoundingClientRect();return[t.clientX-c.left-a.clientLeft,t.clientY-c.top-a.clientTop]}}return[t.pageX,t.pageY]}const S3={passive:!1},Fi={capture:!0,passive:!1};function zf(t){t.stopImmediatePropagation()}function jr(t){t.preventDefault(),t.stopImmediatePropagation()}function Yb(t){var a=t.document.documentElement,s=Xt(t).on("dragstart.drag",jr,Fi);"onselectstart"in a?s.on("selectstart.drag",jr,Fi):(a.__noselect=a.style.MozUserSelect,a.style.MozUserSelect="none")}function Xb(t,a){var s=t.document.documentElement,i=Xt(t).on("dragstart.drag",null);a&&(i.on("click.drag",jr,Fi),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in s?i.on("selectstart.drag",null):(s.style.MozUserSelect=s.__noselect,delete s.__noselect)}const Pl=t=>()=>t;function oh(t,{sourceEvent:a,subject:s,target:i,identifier:c,active:u,x:f,y:m,dx:p,dy:g,dispatch:y}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:a,enumerable:!0,configurable:!0},subject:{value:s,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:c,enumerable:!0,configurable:!0},active:{value:u,enumerable:!0,configurable:!0},x:{value:f,enumerable:!0,configurable:!0},y:{value:m,enumerable:!0,configurable:!0},dx:{value:p,enumerable:!0,configurable:!0},dy:{value:g,enumerable:!0,configurable:!0},_:{value:y}})}oh.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function N3(t){return!t.ctrlKey&&!t.button}function j3(){return this.parentNode}function E3(t,a){return a??{x:t.x,y:t.y}}function _3(){return navigator.maxTouchPoints||"ontouchstart"in this}function Gb(){var t=N3,a=j3,s=E3,i=_3,c={},u=Xc("start","drag","end"),f=0,m,p,g,y,x=0;function b(k){k.on("mousedown.drag",S).filter(i).on("touchstart.drag",N).on("touchmove.drag",E,S3).on("touchend.drag touchcancel.drag",D).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function S(k,w){if(!(y||!t.call(this,k,w))){var z=C(this,a.call(this,k,w),k,w,"mouse");z&&(Xt(k.view).on("mousemove.drag",j,Fi).on("mouseup.drag",A,Fi),Yb(k.view),zf(k),g=!1,m=k.clientX,p=k.clientY,z("start",k))}}function j(k){if(jr(k),!g){var w=k.clientX-m,z=k.clientY-p;g=w*w+z*z>x}c.mouse("drag",k)}function A(k){Xt(k.view).on("mousemove.drag mouseup.drag",null),Xb(k.view,g),jr(k),c.mouse("end",k)}function N(k,w){if(t.call(this,k,w)){var z=k.changedTouches,M=a.call(this,k,w),Y=z.length,U,ne;for(U=0;U<Y;++U)(ne=C(this,M,k,w,z[U].identifier,z[U]))&&(zf(k),ne("start",k,z[U]))}}function E(k){var w=k.changedTouches,z=w.length,M,Y;for(M=0;M<z;++M)(Y=c[w[M].identifier])&&(jr(k),Y("drag",k,w[M]))}function D(k){var w=k.changedTouches,z=w.length,M,Y;for(y&&clearTimeout(y),y=setTimeout(function(){y=null},500),M=0;M<z;++M)(Y=c[w[M].identifier])&&(zf(k),Y("end",k,w[M]))}function C(k,w,z,M,Y,U){var ne=u.copy(),Q=mn(U||z,w),I,ae,$;if(($=s.call(k,new oh("beforestart",{sourceEvent:z,target:b,identifier:Y,active:f,x:Q[0],y:Q[1],dx:0,dy:0,dispatch:ne}),M))!=null)return I=$.x-Q[0]||0,ae=$.y-Q[1]||0,function F(O,B,V){var L=Q,Z;switch(O){case"start":c[Y]=F,Z=f++;break;case"end":delete c[Y],--f;case"drag":Q=mn(V||B,w),Z=f;break}ne.call(O,k,new oh(O,{sourceEvent:B,subject:$,target:b,identifier:Y,active:Z,x:Q[0]+I,y:Q[1]+ae,dx:Q[0]-L[0],dy:Q[1]-L[1],dispatch:ne}),M)}}return b.filter=function(k){return arguments.length?(t=typeof k=="function"?k:Pl(!!k),b):t},b.container=function(k){return arguments.length?(a=typeof k=="function"?k:Pl(k),b):a},b.subject=function(k){return arguments.length?(s=typeof k=="function"?k:Pl(k),b):s},b.touchable=function(k){return arguments.length?(i=typeof k=="function"?k:Pl(!!k),b):i},b.on=function(){var k=u.on.apply(u,arguments);return k===u?b:k},b.clickDistance=function(k){return arguments.length?(x=(k=+k)*k,b):Math.sqrt(x)},b}function qh(t,a,s){t.prototype=a.prototype=s,s.constructor=t}function Ib(t,a){var s=Object.create(t.prototype);for(var i in a)s[i]=a[i];return s}function fo(){}var Wi=.7,Ec=1/Wi,Er="\\s*([+-]?\\d+)\\s*",Ki="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",An="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",C3=/^#([0-9a-f]{3,8})$/,T3=new RegExp(`^rgb\\(${Er},${Er},${Er}\\)$`),M3=new RegExp(`^rgb\\(${An},${An},${An}\\)$`),A3=new RegExp(`^rgba\\(${Er},${Er},${Er},${Ki}\\)$`),k3=new RegExp(`^rgba\\(${An},${An},${An},${Ki}\\)$`),R3=new RegExp(`^hsl\\(${Ki},${An},${An}\\)$`),D3=new RegExp(`^hsla\\(${Ki},${An},${An},${Ki}\\)$`),Ex={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};qh(fo,js,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:_x,formatHex:_x,formatHex8:z3,formatHsl:O3,formatRgb:Cx,toString:Cx});function _x(){return this.rgb().formatHex()}function z3(){return this.rgb().formatHex8()}function O3(){return Pb(this).formatHsl()}function Cx(){return this.rgb().formatRgb()}function js(t){var a,s;return t=(t+"").trim().toLowerCase(),(a=C3.exec(t))?(s=a[1].length,a=parseInt(a[1],16),s===6?Tx(a):s===3?new Ot(a>>8&15|a>>4&240,a>>4&15|a&240,(a&15)<<4|a&15,1):s===8?Zl(a>>24&255,a>>16&255,a>>8&255,(a&255)/255):s===4?Zl(a>>12&15|a>>8&240,a>>8&15|a>>4&240,a>>4&15|a&240,((a&15)<<4|a&15)/255):null):(a=T3.exec(t))?new Ot(a[1],a[2],a[3],1):(a=M3.exec(t))?new Ot(a[1]*255/100,a[2]*255/100,a[3]*255/100,1):(a=A3.exec(t))?Zl(a[1],a[2],a[3],a[4]):(a=k3.exec(t))?Zl(a[1]*255/100,a[2]*255/100,a[3]*255/100,a[4]):(a=R3.exec(t))?kx(a[1],a[2]/100,a[3]/100,1):(a=D3.exec(t))?kx(a[1],a[2]/100,a[3]/100,a[4]):Ex.hasOwnProperty(t)?Tx(Ex[t]):t==="transparent"?new Ot(NaN,NaN,NaN,0):null}function Tx(t){return new Ot(t>>16&255,t>>8&255,t&255,1)}function Zl(t,a,s,i){return i<=0&&(t=a=s=NaN),new Ot(t,a,s,i)}function B3(t){return t instanceof fo||(t=js(t)),t?(t=t.rgb(),new Ot(t.r,t.g,t.b,t.opacity)):new Ot}function lh(t,a,s,i){return arguments.length===1?B3(t):new Ot(t,a,s,i??1)}function Ot(t,a,s,i){this.r=+t,this.g=+a,this.b=+s,this.opacity=+i}qh(Ot,lh,Ib(fo,{brighter(t){return t=t==null?Ec:Math.pow(Ec,t),new Ot(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Wi:Math.pow(Wi,t),new Ot(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Ot(Ss(this.r),Ss(this.g),Ss(this.b),_c(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Mx,formatHex:Mx,formatHex8:H3,formatRgb:Ax,toString:Ax}));function Mx(){return`#${vs(this.r)}${vs(this.g)}${vs(this.b)}`}function H3(){return`#${vs(this.r)}${vs(this.g)}${vs(this.b)}${vs((isNaN(this.opacity)?1:this.opacity)*255)}`}function Ax(){const t=_c(this.opacity);return`${t===1?"rgb(":"rgba("}${Ss(this.r)}, ${Ss(this.g)}, ${Ss(this.b)}${t===1?")":`, ${t})`}`}function _c(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Ss(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function vs(t){return t=Ss(t),(t<16?"0":"")+t.toString(16)}function kx(t,a,s,i){return i<=0?t=a=s=NaN:s<=0||s>=1?t=a=NaN:a<=0&&(t=NaN),new pn(t,a,s,i)}function Pb(t){if(t instanceof pn)return new pn(t.h,t.s,t.l,t.opacity);if(t instanceof fo||(t=js(t)),!t)return new pn;if(t instanceof pn)return t;t=t.rgb();var a=t.r/255,s=t.g/255,i=t.b/255,c=Math.min(a,s,i),u=Math.max(a,s,i),f=NaN,m=u-c,p=(u+c)/2;return m?(a===u?f=(s-i)/m+(s<i)*6:s===u?f=(i-a)/m+2:f=(a-s)/m+4,m/=p<.5?u+c:2-u-c,f*=60):m=p>0&&p<1?0:f,new pn(f,m,p,t.opacity)}function L3(t,a,s,i){return arguments.length===1?Pb(t):new pn(t,a,s,i??1)}function pn(t,a,s,i){this.h=+t,this.s=+a,this.l=+s,this.opacity=+i}qh(pn,L3,Ib(fo,{brighter(t){return t=t==null?Ec:Math.pow(Ec,t),new pn(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Wi:Math.pow(Wi,t),new pn(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,a=isNaN(t)||isNaN(this.s)?0:this.s,s=this.l,i=s+(s<.5?s:1-s)*a,c=2*s-i;return new Ot(Of(t>=240?t-240:t+120,c,i),Of(t,c,i),Of(t<120?t+240:t-120,c,i),this.opacity)},clamp(){return new pn(Rx(this.h),Ql(this.s),Ql(this.l),_c(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=_c(this.opacity);return`${t===1?"hsl(":"hsla("}${Rx(this.h)}, ${Ql(this.s)*100}%, ${Ql(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Rx(t){return t=(t||0)%360,t<0?t+360:t}function Ql(t){return Math.max(0,Math.min(1,t||0))}function Of(t,a,s){return(t<60?a+(s-a)*t/60:t<180?s:t<240?a+(s-a)*(240-t)/60:a)*255}const Vh=t=>()=>t;function U3(t,a){return function(s){return t+s*a}}function $3(t,a,s){return t=Math.pow(t,s),a=Math.pow(a,s)-t,s=1/s,function(i){return Math.pow(t+i*a,s)}}function q3(t){return(t=+t)==1?Zb:function(a,s){return s-a?$3(a,s,t):Vh(isNaN(a)?s:a)}}function Zb(t,a){var s=a-t;return s?U3(t,s):Vh(isNaN(t)?a:t)}const Cc=(function t(a){var s=q3(a);function i(c,u){var f=s((c=lh(c)).r,(u=lh(u)).r),m=s(c.g,u.g),p=s(c.b,u.b),g=Zb(c.opacity,u.opacity);return function(y){return c.r=f(y),c.g=m(y),c.b=p(y),c.opacity=g(y),c+""}}return i.gamma=t,i})(1);function V3(t,a){a||(a=[]);var s=t?Math.min(a.length,t.length):0,i=a.slice(),c;return function(u){for(c=0;c<s;++c)i[c]=t[c]*(1-u)+a[c]*u;return i}}function Y3(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function X3(t,a){var s=a?a.length:0,i=t?Math.min(s,t.length):0,c=new Array(i),u=new Array(s),f;for(f=0;f<i;++f)c[f]=Ii(t[f],a[f]);for(;f<s;++f)u[f]=a[f];return function(m){for(f=0;f<i;++f)u[f]=c[f](m);return u}}function G3(t,a){var s=new Date;return t=+t,a=+a,function(i){return s.setTime(t*(1-i)+a*i),s}}function _n(t,a){return t=+t,a=+a,function(s){return t*(1-s)+a*s}}function I3(t,a){var s={},i={},c;(t===null||typeof t!="object")&&(t={}),(a===null||typeof a!="object")&&(a={});for(c in a)c in t?s[c]=Ii(t[c],a[c]):i[c]=a[c];return function(u){for(c in s)i[c]=s[c](u);return i}}var ch=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Bf=new RegExp(ch.source,"g");function P3(t){return function(){return t}}function Z3(t){return function(a){return t(a)+""}}function Qb(t,a){var s=ch.lastIndex=Bf.lastIndex=0,i,c,u,f=-1,m=[],p=[];for(t=t+"",a=a+"";(i=ch.exec(t))&&(c=Bf.exec(a));)(u=c.index)>s&&(u=a.slice(s,u),m[f]?m[f]+=u:m[++f]=u),(i=i[0])===(c=c[0])?m[f]?m[f]+=c:m[++f]=c:(m[++f]=null,p.push({i:f,x:_n(i,c)})),s=Bf.lastIndex;return s<a.length&&(u=a.slice(s),m[f]?m[f]+=u:m[++f]=u),m.length<2?p[0]?Z3(p[0].x):P3(a):(a=p.length,function(g){for(var y=0,x;y<a;++y)m[(x=p[y]).i]=x.x(g);return m.join("")})}function Ii(t,a){var s=typeof a,i;return a==null||s==="boolean"?Vh(a):(s==="number"?_n:s==="string"?(i=js(a))?(a=i,Cc):Qb:a instanceof js?Cc:a instanceof Date?G3:Y3(a)?V3:Array.isArray(a)?X3:typeof a.valueOf!="function"&&typeof a.toString!="function"||isNaN(a)?I3:_n)(t,a)}var Dx=180/Math.PI,uh={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Fb(t,a,s,i,c,u){var f,m,p;return(f=Math.sqrt(t*t+a*a))&&(t/=f,a/=f),(p=t*s+a*i)&&(s-=t*p,i-=a*p),(m=Math.sqrt(s*s+i*i))&&(s/=m,i/=m,p/=m),t*i<a*s&&(t=-t,a=-a,p=-p,f=-f),{translateX:c,translateY:u,rotate:Math.atan2(a,t)*Dx,skewX:Math.atan(p)*Dx,scaleX:f,scaleY:m}}var Fl;function Q3(t){const a=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return a.isIdentity?uh:Fb(a.a,a.b,a.c,a.d,a.e,a.f)}function F3(t){return t==null||(Fl||(Fl=document.createElementNS("http://www.w3.org/2000/svg","g")),Fl.setAttribute("transform",t),!(t=Fl.transform.baseVal.consolidate()))?uh:(t=t.matrix,Fb(t.a,t.b,t.c,t.d,t.e,t.f))}function Wb(t,a,s,i){function c(g){return g.length?g.pop()+" ":""}function u(g,y,x,b,S,j){if(g!==x||y!==b){var A=S.push("translate(",null,a,null,s);j.push({i:A-4,x:_n(g,x)},{i:A-2,x:_n(y,b)})}else(x||b)&&S.push("translate("+x+a+b+s)}function f(g,y,x,b){g!==y?(g-y>180?y+=360:y-g>180&&(g+=360),b.push({i:x.push(c(x)+"rotate(",null,i)-2,x:_n(g,y)})):y&&x.push(c(x)+"rotate("+y+i)}function m(g,y,x,b){g!==y?b.push({i:x.push(c(x)+"skewX(",null,i)-2,x:_n(g,y)}):y&&x.push(c(x)+"skewX("+y+i)}function p(g,y,x,b,S,j){if(g!==x||y!==b){var A=S.push(c(S)+"scale(",null,",",null,")");j.push({i:A-4,x:_n(g,x)},{i:A-2,x:_n(y,b)})}else(x!==1||b!==1)&&S.push(c(S)+"scale("+x+","+b+")")}return function(g,y){var x=[],b=[];return g=t(g),y=t(y),u(g.translateX,g.translateY,y.translateX,y.translateY,x,b),f(g.rotate,y.rotate,x,b),m(g.skewX,y.skewX,x,b),p(g.scaleX,g.scaleY,y.scaleX,y.scaleY,x,b),g=y=null,function(S){for(var j=-1,A=b.length,N;++j<A;)x[(N=b[j]).i]=N.x(S);return x.join("")}}}var W3=Wb(Q3,"px, ","px)","deg)"),K3=Wb(F3,", ",")",")"),J3=1e-12;function zx(t){return((t=Math.exp(t))+1/t)/2}function e6(t){return((t=Math.exp(t))-1/t)/2}function t6(t){return((t=Math.exp(2*t))-1)/(t+1)}const hc=(function t(a,s,i){function c(u,f){var m=u[0],p=u[1],g=u[2],y=f[0],x=f[1],b=f[2],S=y-m,j=x-p,A=S*S+j*j,N,E;if(A<J3)E=Math.log(b/g)/a,N=function(M){return[m+M*S,p+M*j,g*Math.exp(a*M*E)]};else{var D=Math.sqrt(A),C=(b*b-g*g+i*A)/(2*g*s*D),k=(b*b-g*g-i*A)/(2*b*s*D),w=Math.log(Math.sqrt(C*C+1)-C),z=Math.log(Math.sqrt(k*k+1)-k);E=(z-w)/a,N=function(M){var Y=M*E,U=zx(w),ne=g/(s*D)*(U*t6(a*Y+w)-e6(w));return[m+ne*S,p+ne*j,g*U/zx(a*Y+w)]}}return N.duration=E*1e3*a/Math.SQRT2,N}return c.rho=function(u){var f=Math.max(.001,+u),m=f*f,p=m*m;return t(f,m,p)},c})(Math.SQRT2,2,4);var kr=0,Xi=0,$i=0,Kb=1e3,Tc,Gi,Mc=0,Es=0,Ic=0,Ji=typeof performance=="object"&&performance.now?performance:Date,Jb=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Yh(){return Es||(Jb(n6),Es=Ji.now()+Ic)}function n6(){Es=0}function Ac(){this._call=this._time=this._next=null}Ac.prototype=e1.prototype={constructor:Ac,restart:function(t,a,s){if(typeof t!="function")throw new TypeError("callback is not a function");s=(s==null?Yh():+s)+(a==null?0:+a),!this._next&&Gi!==this&&(Gi?Gi._next=this:Tc=this,Gi=this),this._call=t,this._time=s,dh()},stop:function(){this._call&&(this._call=null,this._time=1/0,dh())}};function e1(t,a,s){var i=new Ac;return i.restart(t,a,s),i}function a6(){Yh(),++kr;for(var t=Tc,a;t;)(a=Es-t._time)>=0&&t._call.call(void 0,a),t=t._next;--kr}function Ox(){Es=(Mc=Ji.now())+Ic,kr=Xi=0;try{a6()}finally{kr=0,r6(),Es=0}}function s6(){var t=Ji.now(),a=t-Mc;a>Kb&&(Ic-=a,Mc=t)}function r6(){for(var t,a=Tc,s,i=1/0;a;)a._call?(i>a._time&&(i=a._time),t=a,a=a._next):(s=a._next,a._next=null,a=t?t._next=s:Tc=s);Gi=t,dh(i)}function dh(t){if(!kr){Xi&&(Xi=clearTimeout(Xi));var a=t-Es;a>24?(t<1/0&&(Xi=setTimeout(Ox,t-Ji.now()-Ic)),$i&&($i=clearInterval($i))):($i||(Mc=Ji.now(),$i=setInterval(s6,Kb)),kr=1,Jb(Ox))}}function Bx(t,a,s){var i=new Ac;return a=a==null?0:+a,i.restart(c=>{i.stop(),t(c+a)},a,s),i}var i6=Xc("start","end","cancel","interrupt"),o6=[],t1=0,Hx=1,fh=2,mc=3,Lx=4,hh=5,pc=6;function Pc(t,a,s,i,c,u){var f=t.__transition;if(!f)t.__transition={};else if(s in f)return;l6(t,s,{name:a,index:i,group:c,on:i6,tween:o6,time:u.time,delay:u.delay,duration:u.duration,ease:u.ease,timer:null,state:t1})}function Xh(t,a){var s=yn(t,a);if(s.state>t1)throw new Error("too late; already scheduled");return s}function Dn(t,a){var s=yn(t,a);if(s.state>mc)throw new Error("too late; already running");return s}function yn(t,a){var s=t.__transition;if(!s||!(s=s[a]))throw new Error("transition not found");return s}function l6(t,a,s){var i=t.__transition,c;i[a]=s,s.timer=e1(u,0,s.time);function u(g){s.state=Hx,s.timer.restart(f,s.delay,s.time),s.delay<=g&&f(g-s.delay)}function f(g){var y,x,b,S;if(s.state!==Hx)return p();for(y in i)if(S=i[y],S.name===s.name){if(S.state===mc)return Bx(f);S.state===Lx?(S.state=pc,S.timer.stop(),S.on.call("interrupt",t,t.__data__,S.index,S.group),delete i[y]):+y<a&&(S.state=pc,S.timer.stop(),S.on.call("cancel",t,t.__data__,S.index,S.group),delete i[y])}if(Bx(function(){s.state===mc&&(s.state=Lx,s.timer.restart(m,s.delay,s.time),m(g))}),s.state=fh,s.on.call("start",t,t.__data__,s.index,s.group),s.state===fh){for(s.state=mc,c=new Array(b=s.tween.length),y=0,x=-1;y<b;++y)(S=s.tween[y].value.call(t,t.__data__,s.index,s.group))&&(c[++x]=S);c.length=x+1}}function m(g){for(var y=g<s.duration?s.ease.call(null,g/s.duration):(s.timer.restart(p),s.state=hh,1),x=-1,b=c.length;++x<b;)c[x].call(t,y);s.state===hh&&(s.on.call("end",t,t.__data__,s.index,s.group),p())}function p(){s.state=pc,s.timer.stop(),delete i[a];for(var g in i)return;delete t.__transition}}function gc(t,a){var s=t.__transition,i,c,u=!0,f;if(s){a=a==null?null:a+"";for(f in s){if((i=s[f]).name!==a){u=!1;continue}c=i.state>fh&&i.state<hh,i.state=pc,i.timer.stop(),i.on.call(c?"interrupt":"cancel",t,t.__data__,i.index,i.group),delete s[f]}u&&delete t.__transition}}function c6(t){return this.each(function(){gc(this,t)})}function u6(t,a){var s,i;return function(){var c=Dn(this,t),u=c.tween;if(u!==s){i=s=u;for(var f=0,m=i.length;f<m;++f)if(i[f].name===a){i=i.slice(),i.splice(f,1);break}}c.tween=i}}function d6(t,a,s){var i,c;if(typeof s!="function")throw new Error;return function(){var u=Dn(this,t),f=u.tween;if(f!==i){c=(i=f).slice();for(var m={name:a,value:s},p=0,g=c.length;p<g;++p)if(c[p].name===a){c[p]=m;break}p===g&&c.push(m)}u.tween=c}}function f6(t,a){var s=this._id;if(t+="",arguments.length<2){for(var i=yn(this.node(),s).tween,c=0,u=i.length,f;c<u;++c)if((f=i[c]).name===t)return f.value;return null}return this.each((a==null?u6:d6)(s,t,a))}function Gh(t,a,s){var i=t._id;return t.each(function(){var c=Dn(this,i);(c.value||(c.value={}))[a]=s.apply(this,arguments)}),function(c){return yn(c,i).value[a]}}function n1(t,a){var s;return(typeof a=="number"?_n:a instanceof js?Cc:(s=js(a))?(a=s,Cc):Qb)(t,a)}function h6(t){return function(){this.removeAttribute(t)}}function m6(t){return function(){this.removeAttributeNS(t.space,t.local)}}function p6(t,a,s){var i,c=s+"",u;return function(){var f=this.getAttribute(t);return f===c?null:f===i?u:u=a(i=f,s)}}function g6(t,a,s){var i,c=s+"",u;return function(){var f=this.getAttributeNS(t.space,t.local);return f===c?null:f===i?u:u=a(i=f,s)}}function x6(t,a,s){var i,c,u;return function(){var f,m=s(this),p;return m==null?void this.removeAttribute(t):(f=this.getAttribute(t),p=m+"",f===p?null:f===i&&p===c?u:(c=p,u=a(i=f,m)))}}function y6(t,a,s){var i,c,u;return function(){var f,m=s(this),p;return m==null?void this.removeAttributeNS(t.space,t.local):(f=this.getAttributeNS(t.space,t.local),p=m+"",f===p?null:f===i&&p===c?u:(c=p,u=a(i=f,m)))}}function b6(t,a){var s=Gc(t),i=s==="transform"?K3:n1;return this.attrTween(t,typeof a=="function"?(s.local?y6:x6)(s,i,Gh(this,"attr."+t,a)):a==null?(s.local?m6:h6)(s):(s.local?g6:p6)(s,i,a))}function v6(t,a){return function(s){this.setAttribute(t,a.call(this,s))}}function w6(t,a){return function(s){this.setAttributeNS(t.space,t.local,a.call(this,s))}}function S6(t,a){var s,i;function c(){var u=a.apply(this,arguments);return u!==i&&(s=(i=u)&&w6(t,u)),s}return c._value=a,c}function N6(t,a){var s,i;function c(){var u=a.apply(this,arguments);return u!==i&&(s=(i=u)&&v6(t,u)),s}return c._value=a,c}function j6(t,a){var s="attr."+t;if(arguments.length<2)return(s=this.tween(s))&&s._value;if(a==null)return this.tween(s,null);if(typeof a!="function")throw new Error;var i=Gc(t);return this.tween(s,(i.local?S6:N6)(i,a))}function E6(t,a){return function(){Xh(this,t).delay=+a.apply(this,arguments)}}function _6(t,a){return a=+a,function(){Xh(this,t).delay=a}}function C6(t){var a=this._id;return arguments.length?this.each((typeof t=="function"?E6:_6)(a,t)):yn(this.node(),a).delay}function T6(t,a){return function(){Dn(this,t).duration=+a.apply(this,arguments)}}function M6(t,a){return a=+a,function(){Dn(this,t).duration=a}}function A6(t){var a=this._id;return arguments.length?this.each((typeof t=="function"?T6:M6)(a,t)):yn(this.node(),a).duration}function k6(t,a){if(typeof a!="function")throw new Error;return function(){Dn(this,t).ease=a}}function R6(t){var a=this._id;return arguments.length?this.each(k6(a,t)):yn(this.node(),a).ease}function D6(t,a){return function(){var s=a.apply(this,arguments);if(typeof s!="function")throw new Error;Dn(this,t).ease=s}}function z6(t){if(typeof t!="function")throw new Error;return this.each(D6(this._id,t))}function O6(t){typeof t!="function"&&(t=Db(t));for(var a=this._groups,s=a.length,i=new Array(s),c=0;c<s;++c)for(var u=a[c],f=u.length,m=i[c]=[],p,g=0;g<f;++g)(p=u[g])&&t.call(p,p.__data__,g,u)&&m.push(p);return new la(i,this._parents,this._name,this._id)}function B6(t){if(t._id!==this._id)throw new Error;for(var a=this._groups,s=t._groups,i=a.length,c=s.length,u=Math.min(i,c),f=new Array(i),m=0;m<u;++m)for(var p=a[m],g=s[m],y=p.length,x=f[m]=new Array(y),b,S=0;S<y;++S)(b=p[S]||g[S])&&(x[S]=b);for(;m<i;++m)f[m]=a[m];return new la(f,this._parents,this._name,this._id)}function H6(t){return(t+"").trim().split(/^|\s+/).every(function(a){var s=a.indexOf(".");return s>=0&&(a=a.slice(0,s)),!a||a==="start"})}function L6(t,a,s){var i,c,u=H6(a)?Xh:Dn;return function(){var f=u(this,t),m=f.on;m!==i&&(c=(i=m).copy()).on(a,s),f.on=c}}function U6(t,a){var s=this._id;return arguments.length<2?yn(this.node(),s).on.on(t):this.each(L6(s,t,a))}function $6(t){return function(){var a=this.parentNode;for(var s in this.__transition)if(+s!==t)return;a&&a.removeChild(this)}}function q6(){return this.on("end.remove",$6(this._id))}function V6(t){var a=this._name,s=this._id;typeof t!="function"&&(t=Uh(t));for(var i=this._groups,c=i.length,u=new Array(c),f=0;f<c;++f)for(var m=i[f],p=m.length,g=u[f]=new Array(p),y,x,b=0;b<p;++b)(y=m[b])&&(x=t.call(y,y.__data__,b,m))&&("__data__"in y&&(x.__data__=y.__data__),g[b]=x,Pc(g[b],a,s,b,g,yn(y,s)));return new la(u,this._parents,a,s)}function Y6(t){var a=this._name,s=this._id;typeof t!="function"&&(t=Rb(t));for(var i=this._groups,c=i.length,u=[],f=[],m=0;m<c;++m)for(var p=i[m],g=p.length,y,x=0;x<g;++x)if(y=p[x]){for(var b=t.call(y,y.__data__,x,p),S,j=yn(y,s),A=0,N=b.length;A<N;++A)(S=b[A])&&Pc(S,a,s,A,b,j);u.push(b),f.push(y)}return new la(u,f,a,s)}var X6=uo.prototype.constructor;function G6(){return new X6(this._groups,this._parents)}function I6(t,a){var s,i,c;return function(){var u=Ar(this,t),f=(this.style.removeProperty(t),Ar(this,t));return u===f?null:u===s&&f===i?c:c=a(s=u,i=f)}}function a1(t){return function(){this.style.removeProperty(t)}}function P6(t,a,s){var i,c=s+"",u;return function(){var f=Ar(this,t);return f===c?null:f===i?u:u=a(i=f,s)}}function Z6(t,a,s){var i,c,u;return function(){var f=Ar(this,t),m=s(this),p=m+"";return m==null&&(p=m=(this.style.removeProperty(t),Ar(this,t))),f===p?null:f===i&&p===c?u:(c=p,u=a(i=f,m))}}function Q6(t,a){var s,i,c,u="style."+a,f="end."+u,m;return function(){var p=Dn(this,t),g=p.on,y=p.value[u]==null?m||(m=a1(a)):void 0;(g!==s||c!==y)&&(i=(s=g).copy()).on(f,c=y),p.on=i}}function F6(t,a,s){var i=(t+="")=="transform"?W3:n1;return a==null?this.styleTween(t,I6(t,i)).on("end.style."+t,a1(t)):typeof a=="function"?this.styleTween(t,Z6(t,i,Gh(this,"style."+t,a))).each(Q6(this._id,t)):this.styleTween(t,P6(t,i,a),s).on("end.style."+t,null)}function W6(t,a,s){return function(i){this.style.setProperty(t,a.call(this,i),s)}}function K6(t,a,s){var i,c;function u(){var f=a.apply(this,arguments);return f!==c&&(i=(c=f)&&W6(t,f,s)),i}return u._value=a,u}function J6(t,a,s){var i="style."+(t+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(a==null)return this.tween(i,null);if(typeof a!="function")throw new Error;return this.tween(i,K6(t,a,s??""))}function eC(t){return function(){this.textContent=t}}function tC(t){return function(){var a=t(this);this.textContent=a??""}}function nC(t){return this.tween("text",typeof t=="function"?tC(Gh(this,"text",t)):eC(t==null?"":t+""))}function aC(t){return function(a){this.textContent=t.call(this,a)}}function sC(t){var a,s;function i(){var c=t.apply(this,arguments);return c!==s&&(a=(s=c)&&aC(c)),a}return i._value=t,i}function rC(t){var a="text";if(arguments.length<1)return(a=this.tween(a))&&a._value;if(t==null)return this.tween(a,null);if(typeof t!="function")throw new Error;return this.tween(a,sC(t))}function iC(){for(var t=this._name,a=this._id,s=s1(),i=this._groups,c=i.length,u=0;u<c;++u)for(var f=i[u],m=f.length,p,g=0;g<m;++g)if(p=f[g]){var y=yn(p,a);Pc(p,t,s,g,f,{time:y.time+y.delay+y.duration,delay:0,duration:y.duration,ease:y.ease})}return new la(i,this._parents,t,s)}function oC(){var t,a,s=this,i=s._id,c=s.size();return new Promise(function(u,f){var m={value:f},p={value:function(){--c===0&&u()}};s.each(function(){var g=Dn(this,i),y=g.on;y!==t&&(a=(t=y).copy(),a._.cancel.push(m),a._.interrupt.push(m),a._.end.push(p)),g.on=a}),c===0&&u()})}var lC=0;function la(t,a,s,i){this._groups=t,this._parents=a,this._name=s,this._id=i}function s1(){return++lC}var aa=uo.prototype;la.prototype={constructor:la,select:V6,selectAll:Y6,selectChild:aa.selectChild,selectChildren:aa.selectChildren,filter:O6,merge:B6,selection:G6,transition:iC,call:aa.call,nodes:aa.nodes,node:aa.node,size:aa.size,empty:aa.empty,each:aa.each,on:U6,attr:b6,attrTween:j6,style:F6,styleTween:J6,text:nC,textTween:rC,remove:q6,tween:f6,delay:C6,duration:A6,ease:R6,easeVarying:z6,end:oC,[Symbol.iterator]:aa[Symbol.iterator]};function cC(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var uC={time:null,delay:0,duration:250,ease:cC};function dC(t,a){for(var s;!(s=t.__transition)||!(s=s[a]);)if(!(t=t.parentNode))throw new Error(`transition ${a} not found`);return s}function fC(t){var a,s;t instanceof la?(a=t._id,t=t._name):(a=s1(),(s=uC).time=Yh(),t=t==null?null:t+"");for(var i=this._groups,c=i.length,u=0;u<c;++u)for(var f=i[u],m=f.length,p,g=0;g<m;++g)(p=f[g])&&Pc(p,t,a,g,f,s||dC(p,a));return new la(i,this._parents,t,a)}uo.prototype.interrupt=c6;uo.prototype.transition=fC;const Wl=t=>()=>t;function hC(t,{sourceEvent:a,target:s,transform:i,dispatch:c}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:a,enumerable:!0,configurable:!0},target:{value:s,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:c}})}function sa(t,a,s){this.k=t,this.x=a,this.y=s}sa.prototype={constructor:sa,scale:function(t){return t===1?this:new sa(this.k*t,this.x,this.y)},translate:function(t,a){return t===0&a===0?this:new sa(this.k,this.x+this.k*t,this.y+this.k*a)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Zc=new sa(1,0,0);r1.prototype=sa.prototype;function r1(t){for(;!t.__zoom;)if(!(t=t.parentNode))return Zc;return t.__zoom}function Hf(t){t.stopImmediatePropagation()}function qi(t){t.preventDefault(),t.stopImmediatePropagation()}function mC(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function pC(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function Ux(){return this.__zoom||Zc}function gC(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function xC(){return navigator.maxTouchPoints||"ontouchstart"in this}function yC(t,a,s){var i=t.invertX(a[0][0])-s[0][0],c=t.invertX(a[1][0])-s[1][0],u=t.invertY(a[0][1])-s[0][1],f=t.invertY(a[1][1])-s[1][1];return t.translate(c>i?(i+c)/2:Math.min(0,i)||Math.max(0,c),f>u?(u+f)/2:Math.min(0,u)||Math.max(0,f))}function i1(){var t=mC,a=pC,s=yC,i=gC,c=xC,u=[0,1/0],f=[[-1/0,-1/0],[1/0,1/0]],m=250,p=hc,g=Xc("start","zoom","end"),y,x,b,S=500,j=150,A=0,N=10;function E($){$.property("__zoom",Ux).on("wheel.zoom",Y,{passive:!1}).on("mousedown.zoom",U).on("dblclick.zoom",ne).filter(c).on("touchstart.zoom",Q).on("touchmove.zoom",I).on("touchend.zoom touchcancel.zoom",ae).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}E.transform=function($,F,O,B){var V=$.selection?$.selection():$;V.property("__zoom",Ux),$!==V?w($,F,O,B):V.interrupt().each(function(){z(this,arguments).event(B).start().zoom(null,typeof F=="function"?F.apply(this,arguments):F).end()})},E.scaleBy=function($,F,O,B){E.scaleTo($,function(){var V=this.__zoom.k,L=typeof F=="function"?F.apply(this,arguments):F;return V*L},O,B)},E.scaleTo=function($,F,O,B){E.transform($,function(){var V=a.apply(this,arguments),L=this.__zoom,Z=O==null?k(V):typeof O=="function"?O.apply(this,arguments):O,R=L.invert(Z),X=typeof F=="function"?F.apply(this,arguments):F;return s(C(D(L,X),Z,R),V,f)},O,B)},E.translateBy=function($,F,O,B){E.transform($,function(){return s(this.__zoom.translate(typeof F=="function"?F.apply(this,arguments):F,typeof O=="function"?O.apply(this,arguments):O),a.apply(this,arguments),f)},null,B)},E.translateTo=function($,F,O,B,V){E.transform($,function(){var L=a.apply(this,arguments),Z=this.__zoom,R=B==null?k(L):typeof B=="function"?B.apply(this,arguments):B;return s(Zc.translate(R[0],R[1]).scale(Z.k).translate(typeof F=="function"?-F.apply(this,arguments):-F,typeof O=="function"?-O.apply(this,arguments):-O),L,f)},B,V)};function D($,F){return F=Math.max(u[0],Math.min(u[1],F)),F===$.k?$:new sa(F,$.x,$.y)}function C($,F,O){var B=F[0]-O[0]*$.k,V=F[1]-O[1]*$.k;return B===$.x&&V===$.y?$:new sa($.k,B,V)}function k($){return[(+$[0][0]+ +$[1][0])/2,(+$[0][1]+ +$[1][1])/2]}function w($,F,O,B){$.on("start.zoom",function(){z(this,arguments).event(B).start()}).on("interrupt.zoom end.zoom",function(){z(this,arguments).event(B).end()}).tween("zoom",function(){var V=this,L=arguments,Z=z(V,L).event(B),R=a.apply(V,L),X=O==null?k(R):typeof O=="function"?O.apply(V,L):O,ee=Math.max(R[1][0]-R[0][0],R[1][1]-R[0][1]),H=V.__zoom,oe=typeof F=="function"?F.apply(V,L):F,ue=p(H.invert(X).concat(ee/H.k),oe.invert(X).concat(ee/oe.k));return function(ce){if(ce===1)ce=oe;else{var le=ue(ce),de=ee/le[2];ce=new sa(de,X[0]-le[0]*de,X[1]-le[1]*de)}Z.zoom(null,ce)}})}function z($,F,O){return!O&&$.__zooming||new M($,F)}function M($,F){this.that=$,this.args=F,this.active=0,this.sourceEvent=null,this.extent=a.apply($,F),this.taps=0}M.prototype={event:function($){return $&&(this.sourceEvent=$),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function($,F){return this.mouse&&$!=="mouse"&&(this.mouse[1]=F.invert(this.mouse[0])),this.touch0&&$!=="touch"&&(this.touch0[1]=F.invert(this.touch0[0])),this.touch1&&$!=="touch"&&(this.touch1[1]=F.invert(this.touch1[0])),this.that.__zoom=F,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function($){var F=Xt(this.that).datum();g.call($,this.that,new hC($,{sourceEvent:this.sourceEvent,target:E,transform:this.that.__zoom,dispatch:g}),F)}};function Y($,...F){if(!t.apply(this,arguments))return;var O=z(this,F).event($),B=this.__zoom,V=Math.max(u[0],Math.min(u[1],B.k*Math.pow(2,i.apply(this,arguments)))),L=mn($);if(O.wheel)(O.mouse[0][0]!==L[0]||O.mouse[0][1]!==L[1])&&(O.mouse[1]=B.invert(O.mouse[0]=L)),clearTimeout(O.wheel);else{if(B.k===V)return;O.mouse=[L,B.invert(L)],gc(this),O.start()}qi($),O.wheel=setTimeout(Z,j),O.zoom("mouse",s(C(D(B,V),O.mouse[0],O.mouse[1]),O.extent,f));function Z(){O.wheel=null,O.end()}}function U($,...F){if(b||!t.apply(this,arguments))return;var O=$.currentTarget,B=z(this,F,!0).event($),V=Xt($.view).on("mousemove.zoom",X,!0).on("mouseup.zoom",ee,!0),L=mn($,O),Z=$.clientX,R=$.clientY;Yb($.view),Hf($),B.mouse=[L,this.__zoom.invert(L)],gc(this),B.start();function X(H){if(qi(H),!B.moved){var oe=H.clientX-Z,ue=H.clientY-R;B.moved=oe*oe+ue*ue>A}B.event(H).zoom("mouse",s(C(B.that.__zoom,B.mouse[0]=mn(H,O),B.mouse[1]),B.extent,f))}function ee(H){V.on("mousemove.zoom mouseup.zoom",null),Xb(H.view,B.moved),qi(H),B.event(H).end()}}function ne($,...F){if(t.apply(this,arguments)){var O=this.__zoom,B=mn($.changedTouches?$.changedTouches[0]:$,this),V=O.invert(B),L=O.k*($.shiftKey?.5:2),Z=s(C(D(O,L),B,V),a.apply(this,F),f);qi($),m>0?Xt(this).transition().duration(m).call(w,Z,B,$):Xt(this).call(E.transform,Z,B,$)}}function Q($,...F){if(t.apply(this,arguments)){var O=$.touches,B=O.length,V=z(this,F,$.changedTouches.length===B).event($),L,Z,R,X;for(Hf($),Z=0;Z<B;++Z)R=O[Z],X=mn(R,this),X=[X,this.__zoom.invert(X),R.identifier],V.touch0?!V.touch1&&V.touch0[2]!==X[2]&&(V.touch1=X,V.taps=0):(V.touch0=X,L=!0,V.taps=1+!!y);y&&(y=clearTimeout(y)),L&&(V.taps<2&&(x=X[0],y=setTimeout(function(){y=null},S)),gc(this),V.start())}}function I($,...F){if(this.__zooming){var O=z(this,F).event($),B=$.changedTouches,V=B.length,L,Z,R,X;for(qi($),L=0;L<V;++L)Z=B[L],R=mn(Z,this),O.touch0&&O.touch0[2]===Z.identifier?O.touch0[0]=R:O.touch1&&O.touch1[2]===Z.identifier&&(O.touch1[0]=R);if(Z=O.that.__zoom,O.touch1){var ee=O.touch0[0],H=O.touch0[1],oe=O.touch1[0],ue=O.touch1[1],ce=(ce=oe[0]-ee[0])*ce+(ce=oe[1]-ee[1])*ce,le=(le=ue[0]-H[0])*le+(le=ue[1]-H[1])*le;Z=D(Z,Math.sqrt(ce/le)),R=[(ee[0]+oe[0])/2,(ee[1]+oe[1])/2],X=[(H[0]+ue[0])/2,(H[1]+ue[1])/2]}else if(O.touch0)R=O.touch0[0],X=O.touch0[1];else return;O.zoom("touch",s(C(Z,R,X),O.extent,f))}}function ae($,...F){if(this.__zooming){var O=z(this,F).event($),B=$.changedTouches,V=B.length,L,Z;for(Hf($),b&&clearTimeout(b),b=setTimeout(function(){b=null},S),L=0;L<V;++L)Z=B[L],O.touch0&&O.touch0[2]===Z.identifier?delete O.touch0:O.touch1&&O.touch1[2]===Z.identifier&&delete O.touch1;if(O.touch1&&!O.touch0&&(O.touch0=O.touch1,delete O.touch1),O.touch0)O.touch0[1]=this.__zoom.invert(O.touch0[0]);else if(O.end(),O.taps===2&&(Z=mn(Z,this),Math.hypot(x[0]-Z[0],x[1]-Z[1])<N)){var R=Xt(this).on("dblclick.zoom");R&&R.apply(this,arguments)}}}return E.wheelDelta=function($){return arguments.length?(i=typeof $=="function"?$:Wl(+$),E):i},E.filter=function($){return arguments.length?(t=typeof $=="function"?$:Wl(!!$),E):t},E.touchable=function($){return arguments.length?(c=typeof $=="function"?$:Wl(!!$),E):c},E.extent=function($){return arguments.length?(a=typeof $=="function"?$:Wl([[+$[0][0],+$[0][1]],[+$[1][0],+$[1][1]]]),E):a},E.scaleExtent=function($){return arguments.length?(u[0]=+$[0],u[1]=+$[1],E):[u[0],u[1]]},E.translateExtent=function($){return arguments.length?(f[0][0]=+$[0][0],f[1][0]=+$[1][0],f[0][1]=+$[0][1],f[1][1]=+$[1][1],E):[[f[0][0],f[0][1]],[f[1][0],f[1][1]]]},E.constrain=function($){return arguments.length?(s=$,E):s},E.duration=function($){return arguments.length?(m=+$,E):m},E.interpolate=function($){return arguments.length?(p=$,E):p},E.on=function(){var $=g.on.apply(g,arguments);return $===g?E:$},E.clickDistance=function($){return arguments.length?(A=($=+$)*$,E):Math.sqrt(A)},E.tapDistance=function($){return arguments.length?(N=+$,E):N},E}const Rn={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:t=>`Node type "${t}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:t=>`The old edge with id=${t} does not exist.`,error009:t=>`Marker type "${t}" doesn't exist.`,error008:(t,{id:a,sourceHandle:s,targetHandle:i})=>`Couldn't create edge for ${t} handle id: "${t==="source"?s:i}", edge id: ${a}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:t=>`Edge type "${t}" not found. Using fallback type "default".`,error012:t=>`Node with id "${t}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(t="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${t}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",error015:()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."},eo=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],o1=["Enter"," ","Escape"],l1={"node.a11yDescription.default":"Press enter or space to select a node. Press delete to remove it and escape to cancel.","node.a11yDescription.keyboardDisabled":"Press enter or space to select a node. You can then use the arrow keys to move the node around. Press delete to remove it and escape to cancel.","node.a11yDescription.ariaLiveMessage":({direction:t,x:a,y:s})=>`Moved selected node ${t}. New position, x: ${a}, y: ${s}`,"edge.a11yDescription.default":"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel.","controls.ariaLabel":"Control Panel","controls.zoomIn.ariaLabel":"Zoom In","controls.zoomOut.ariaLabel":"Zoom Out","controls.fitView.ariaLabel":"Fit View","controls.interactive.ariaLabel":"Toggle Interactivity","minimap.ariaLabel":"Mini Map","handle.ariaLabel":"Handle"};var Rr;(function(t){t.Strict="strict",t.Loose="loose"})(Rr||(Rr={}));var Ns;(function(t){t.Free="free",t.Vertical="vertical",t.Horizontal="horizontal"})(Ns||(Ns={}));var to;(function(t){t.Partial="partial",t.Full="full"})(to||(to={}));const c1={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null,pointer:null};var Xa;(function(t){t.Bezier="default",t.Straight="straight",t.Step="step",t.SmoothStep="smoothstep",t.SimpleBezier="simplebezier"})(Xa||(Xa={}));var kc;(function(t){t.Arrow="arrow",t.ArrowClosed="arrowclosed"})(kc||(kc={}));var xe;(function(t){t.Left="left",t.Top="top",t.Right="right",t.Bottom="bottom"})(xe||(xe={}));const $x={[xe.Left]:xe.Right,[xe.Right]:xe.Left,[xe.Top]:xe.Bottom,[xe.Bottom]:xe.Top};function u1(t){return t===null?null:t?"valid":"invalid"}const d1=t=>"id"in t&&"source"in t&&"target"in t,bC=t=>"id"in t&&"position"in t&&!("source"in t)&&!("target"in t),Ih=t=>"id"in t&&"internals"in t&&!("source"in t)&&!("target"in t),ho=(t,a=[0,0])=>{const{width:s,height:i}=da(t),c=t.origin??a,u=s*c[0],f=i*c[1];return{x:t.position.x-u,y:t.position.y-f}},vC=(t,a={nodeOrigin:[0,0]})=>{if(t.length===0)return{x:0,y:0,width:0,height:0};const s=t.reduce((i,c)=>{const u=typeof c=="string";let f=!a.nodeLookup&&!u?c:void 0;a.nodeLookup&&(f=u?a.nodeLookup.get(c):Ih(c)?c:a.nodeLookup.get(c.id));const m=f?Rc(f,a.nodeOrigin):{x:0,y:0,x2:0,y2:0};return Qc(i,m)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return Fc(s)},mo=(t,a={})=>{let s={x:1/0,y:1/0,x2:-1/0,y2:-1/0},i=!1;return t.forEach(c=>{(a.filter===void 0||a.filter(c))&&(s=Qc(s,Rc(c)),i=!0)}),i?Fc(s):{x:0,y:0,width:0,height:0}},Ph=(t,a,[s,i,c]=[0,0,1],u=!1,f=!1)=>{const m={...go(a,[s,i,c]),width:a.width/c,height:a.height/c},p=[];for(const g of t.values()){const{measured:y,selectable:x=!0,hidden:b=!1}=g;if(f&&!x||b)continue;const S=y.width??g.width??g.initialWidth??null,j=y.height??g.height??g.initialHeight??null,A=no(m,zr(g)),N=(S??0)*(j??0),E=u&&A>0;(!g.internals.handleBounds||E||A>=N||g.dragging)&&p.push(g)}return p},wC=(t,a)=>{const s=new Set;return t.forEach(i=>{s.add(i.id)}),a.filter(i=>s.has(i.source)||s.has(i.target))};function SC(t,a){const s=new Map,i=a?.nodes?new Set(a.nodes.map(c=>c.id)):null;return t.forEach(c=>{c.measured.width&&c.measured.height&&(a?.includeHiddenNodes||!c.hidden)&&(!i||i.has(c.id))&&s.set(c.id,c)}),s}async function NC({nodes:t,width:a,height:s,panZoom:i,minZoom:c,maxZoom:u},f){if(t.size===0)return Promise.resolve(!0);const m=SC(t,f),p=mo(m),g=Zh(p,a,s,f?.minZoom??c,f?.maxZoom??u,f?.padding??.1);return await i.setViewport(g,{duration:f?.duration,ease:f?.ease,interpolate:f?.interpolate}),Promise.resolve(!0)}function f1({nodeId:t,nextPosition:a,nodeLookup:s,nodeOrigin:i=[0,0],nodeExtent:c,onError:u}){const f=s.get(t),m=f.parentId?s.get(f.parentId):void 0,{x:p,y:g}=m?m.internals.positionAbsolute:{x:0,y:0},y=f.origin??i;let x=f.extent||c;if(f.extent==="parent"&&!f.expandParent)if(!m)u?.("005",Rn.error005());else{const S=m.measured.width,j=m.measured.height;S&&j&&(x=[[p,g],[p+S,g+j]])}else m&&Or(f.extent)&&(x=[[f.extent[0][0]+p,f.extent[0][1]+g],[f.extent[1][0]+p,f.extent[1][1]+g]]);const b=Or(x)?_s(a,x,f.measured):a;return(f.measured.width===void 0||f.measured.height===void 0)&&u?.("015",Rn.error015()),{position:{x:b.x-p+(f.measured.width??0)*y[0],y:b.y-g+(f.measured.height??0)*y[1]},positionAbsolute:b}}async function jC({nodesToRemove:t=[],edgesToRemove:a=[],nodes:s,edges:i,onBeforeDelete:c}){const u=new Set(t.map(b=>b.id)),f=[];for(const b of s){if(b.deletable===!1)continue;const S=u.has(b.id),j=!S&&b.parentId&&f.find(A=>A.id===b.parentId);(S||j)&&f.push(b)}const m=new Set(a.map(b=>b.id)),p=i.filter(b=>b.deletable!==!1),y=wC(f,p);for(const b of p)m.has(b.id)&&!y.find(j=>j.id===b.id)&&y.push(b);if(!c)return{edges:y,nodes:f};const x=await c({nodes:f,edges:y});return typeof x=="boolean"?x?{edges:y,nodes:f}:{edges:[],nodes:[]}:x}const Dr=(t,a=0,s=1)=>Math.min(Math.max(t,a),s),_s=(t={x:0,y:0},a,s)=>({x:Dr(t.x,a[0][0],a[1][0]-(s?.width??0)),y:Dr(t.y,a[0][1],a[1][1]-(s?.height??0))});function h1(t,a,s){const{width:i,height:c}=da(s),{x:u,y:f}=s.internals.positionAbsolute;return _s(t,[[u,f],[u+i,f+c]],a)}const qx=(t,a,s)=>t<a?Dr(Math.abs(t-a),1,a)/a:t>s?-Dr(Math.abs(t-s),1,a)/a:0,m1=(t,a,s=15,i=40)=>{const c=qx(t.x,i,a.width-i)*s,u=qx(t.y,i,a.height-i)*s;return[c,u]},Qc=(t,a)=>({x:Math.min(t.x,a.x),y:Math.min(t.y,a.y),x2:Math.max(t.x2,a.x2),y2:Math.max(t.y2,a.y2)}),mh=({x:t,y:a,width:s,height:i})=>({x:t,y:a,x2:t+s,y2:a+i}),Fc=({x:t,y:a,x2:s,y2:i})=>({x:t,y:a,width:s-t,height:i-a}),zr=(t,a=[0,0])=>{const{x:s,y:i}=Ih(t)?t.internals.positionAbsolute:ho(t,a);return{x:s,y:i,width:t.measured?.width??t.width??t.initialWidth??0,height:t.measured?.height??t.height??t.initialHeight??0}},Rc=(t,a=[0,0])=>{const{x:s,y:i}=Ih(t)?t.internals.positionAbsolute:ho(t,a);return{x:s,y:i,x2:s+(t.measured?.width??t.width??t.initialWidth??0),y2:i+(t.measured?.height??t.height??t.initialHeight??0)}},p1=(t,a)=>Fc(Qc(mh(t),mh(a))),no=(t,a)=>{const s=Math.max(0,Math.min(t.x+t.width,a.x+a.width)-Math.max(t.x,a.x)),i=Math.max(0,Math.min(t.y+t.height,a.y+a.height)-Math.max(t.y,a.y));return Math.ceil(s*i)},Vx=t=>gn(t.width)&&gn(t.height)&&gn(t.x)&&gn(t.y),gn=t=>!isNaN(t)&&isFinite(t),EC=(t,a)=>{},po=(t,a=[1,1])=>({x:a[0]*Math.round(t.x/a[0]),y:a[1]*Math.round(t.y/a[1])}),go=({x:t,y:a},[s,i,c],u=!1,f=[1,1])=>{const m={x:(t-s)/c,y:(a-i)/c};return u?po(m,f):m},Dc=({x:t,y:a},[s,i,c])=>({x:t*c+s,y:a*c+i});function xr(t,a){if(typeof t=="number")return Math.floor((a-a/(1+t))*.5);if(typeof t=="string"&&t.endsWith("px")){const s=parseFloat(t);if(!Number.isNaN(s))return Math.floor(s)}if(typeof t=="string"&&t.endsWith("%")){const s=parseFloat(t);if(!Number.isNaN(s))return Math.floor(a*s*.01)}return console.error(`[React Flow] The padding value "${t}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function _C(t,a,s){if(typeof t=="string"||typeof t=="number"){const i=xr(t,s),c=xr(t,a);return{top:i,right:c,bottom:i,left:c,x:c*2,y:i*2}}if(typeof t=="object"){const i=xr(t.top??t.y??0,s),c=xr(t.bottom??t.y??0,s),u=xr(t.left??t.x??0,a),f=xr(t.right??t.x??0,a);return{top:i,right:f,bottom:c,left:u,x:u+f,y:i+c}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function CC(t,a,s,i,c,u){const{x:f,y:m}=Dc(t,[a,s,i]),{x:p,y:g}=Dc({x:t.x+t.width,y:t.y+t.height},[a,s,i]),y=c-p,x=u-g;return{left:Math.floor(f),top:Math.floor(m),right:Math.floor(y),bottom:Math.floor(x)}}const Zh=(t,a,s,i,c,u)=>{const f=_C(u,a,s),m=(a-f.x)/t.width,p=(s-f.y)/t.height,g=Math.min(m,p),y=Dr(g,i,c),x=t.x+t.width/2,b=t.y+t.height/2,S=a/2-x*y,j=s/2-b*y,A=CC(t,S,j,y,a,s),N={left:Math.min(A.left-f.left,0),top:Math.min(A.top-f.top,0),right:Math.min(A.right-f.right,0),bottom:Math.min(A.bottom-f.bottom,0)};return{x:S-N.left+N.right,y:j-N.top+N.bottom,zoom:y}},ao=()=>typeof navigator<"u"&&navigator?.userAgent?.indexOf("Mac")>=0;function Or(t){return t!=null&&t!=="parent"}function da(t){return{width:t.measured?.width??t.width??t.initialWidth??0,height:t.measured?.height??t.height??t.initialHeight??0}}function g1(t){return(t.measured?.width??t.width??t.initialWidth)!==void 0&&(t.measured?.height??t.height??t.initialHeight)!==void 0}function x1(t,a={width:0,height:0},s,i,c){const u={...t},f=i.get(s);if(f){const m=f.origin||c;u.x+=f.internals.positionAbsolute.x-(a.width??0)*m[0],u.y+=f.internals.positionAbsolute.y-(a.height??0)*m[1]}return u}function Yx(t,a){if(t.size!==a.size)return!1;for(const s of t)if(!a.has(s))return!1;return!0}function TC(){let t,a;return{promise:new Promise((i,c)=>{t=i,a=c}),resolve:t,reject:a}}function MC(t){return{...l1,...t||{}}}function Pi(t,{snapGrid:a=[0,0],snapToGrid:s=!1,transform:i,containerBounds:c}){const{x:u,y:f}=xn(t),m=go({x:u-(c?.left??0),y:f-(c?.top??0)},i),{x:p,y:g}=s?po(m,a):m;return{xSnapped:p,ySnapped:g,...m}}const Qh=t=>({width:t.offsetWidth,height:t.offsetHeight}),y1=t=>t?.getRootNode?.()||window?.document,AC=["INPUT","SELECT","TEXTAREA"];function b1(t){const a=t.composedPath?.()?.[0]||t.target;return a?.nodeType!==1?!1:AC.includes(a.nodeName)||a.hasAttribute("contenteditable")||!!a.closest(".nokey")}const v1=t=>"clientX"in t,xn=(t,a)=>{const s=v1(t),i=s?t.clientX:t.touches?.[0].clientX,c=s?t.clientY:t.touches?.[0].clientY;return{x:i-(a?.left??0),y:c-(a?.top??0)}},Xx=(t,a,s,i,c)=>{const u=a.querySelectorAll(`.${t}`);return!u||!u.length?null:Array.from(u).map(f=>{const m=f.getBoundingClientRect();return{id:f.getAttribute("data-handleid"),type:t,nodeId:c,position:f.getAttribute("data-handlepos"),x:(m.left-s.left)/i,y:(m.top-s.top)/i,...Qh(f)}})};function w1({sourceX:t,sourceY:a,targetX:s,targetY:i,sourceControlX:c,sourceControlY:u,targetControlX:f,targetControlY:m}){const p=t*.125+c*.375+f*.375+s*.125,g=a*.125+u*.375+m*.375+i*.125,y=Math.abs(p-t),x=Math.abs(g-a);return[p,g,y,x]}function Kl(t,a){return t>=0?.5*t:a*25*Math.sqrt(-t)}function Gx({pos:t,x1:a,y1:s,x2:i,y2:c,c:u}){switch(t){case xe.Left:return[a-Kl(a-i,u),s];case xe.Right:return[a+Kl(i-a,u),s];case xe.Top:return[a,s-Kl(s-c,u)];case xe.Bottom:return[a,s+Kl(c-s,u)]}}function S1({sourceX:t,sourceY:a,sourcePosition:s=xe.Bottom,targetX:i,targetY:c,targetPosition:u=xe.Top,curvature:f=.25}){const[m,p]=Gx({pos:s,x1:t,y1:a,x2:i,y2:c,c:f}),[g,y]=Gx({pos:u,x1:i,y1:c,x2:t,y2:a,c:f}),[x,b,S,j]=w1({sourceX:t,sourceY:a,targetX:i,targetY:c,sourceControlX:m,sourceControlY:p,targetControlX:g,targetControlY:y});return[`M${t},${a} C${m},${p} ${g},${y} ${i},${c}`,x,b,S,j]}function N1({sourceX:t,sourceY:a,targetX:s,targetY:i}){const c=Math.abs(s-t)/2,u=s<t?s+c:s-c,f=Math.abs(i-a)/2,m=i<a?i+f:i-f;return[u,m,c,f]}function kC({sourceNode:t,targetNode:a,selected:s=!1,zIndex:i=0,elevateOnSelect:c=!1,zIndexMode:u="basic"}){if(u==="manual")return i;const f=c&&s?i+1e3:i,m=Math.max(t.parentId||c&&t.selected?t.internals.z:0,a.parentId||c&&a.selected?a.internals.z:0);return f+m}function RC({sourceNode:t,targetNode:a,width:s,height:i,transform:c}){const u=Qc(Rc(t),Rc(a));u.x===u.x2&&(u.x2+=1),u.y===u.y2&&(u.y2+=1);const f={x:-c[0]/c[2],y:-c[1]/c[2],width:s/c[2],height:i/c[2]};return no(f,Fc(u))>0}const DC=({source:t,sourceHandle:a,target:s,targetHandle:i})=>`xy-edge__${t}${a||""}-${s}${i||""}`,zC=(t,a)=>a.some(s=>s.source===t.source&&s.target===t.target&&(s.sourceHandle===t.sourceHandle||!s.sourceHandle&&!t.sourceHandle)&&(s.targetHandle===t.targetHandle||!s.targetHandle&&!t.targetHandle)),j1=(t,a,s={})=>{if(!t.source||!t.target)return a;const i=s.getEdgeId||DC;let c;return d1(t)?c={...t}:c={...t,id:i(t)},zC(c,a)?a:(c.sourceHandle===null&&delete c.sourceHandle,c.targetHandle===null&&delete c.targetHandle,a.concat(c))};function E1({sourceX:t,sourceY:a,targetX:s,targetY:i}){const[c,u,f,m]=N1({sourceX:t,sourceY:a,targetX:s,targetY:i});return[`M ${t},${a}L ${s},${i}`,c,u,f,m]}const Ix={[xe.Left]:{x:-1,y:0},[xe.Right]:{x:1,y:0},[xe.Top]:{x:0,y:-1},[xe.Bottom]:{x:0,y:1}},OC=({source:t,sourcePosition:a=xe.Bottom,target:s})=>a===xe.Left||a===xe.Right?t.x<s.x?{x:1,y:0}:{x:-1,y:0}:t.y<s.y?{x:0,y:1}:{x:0,y:-1},Px=(t,a)=>Math.sqrt(Math.pow(a.x-t.x,2)+Math.pow(a.y-t.y,2));function BC({source:t,sourcePosition:a=xe.Bottom,target:s,targetPosition:i=xe.Top,center:c,offset:u,stepPosition:f}){const m=Ix[a],p=Ix[i],g={x:t.x+m.x*u,y:t.y+m.y*u},y={x:s.x+p.x*u,y:s.y+p.y*u},x=OC({source:g,sourcePosition:a,target:y}),b=x.x!==0?"x":"y",S=x[b];let j=[],A,N;const E={x:0,y:0},D={x:0,y:0},[,,C,k]=N1({sourceX:t.x,sourceY:t.y,targetX:s.x,targetY:s.y});if(m[b]*p[b]===-1){b==="x"?(A=c.x??g.x+(y.x-g.x)*f,N=c.y??(g.y+y.y)/2):(A=c.x??(g.x+y.x)/2,N=c.y??g.y+(y.y-g.y)*f);const z=[{x:A,y:g.y},{x:A,y:y.y}],M=[{x:g.x,y:N},{x:y.x,y:N}];m[b]===S?j=b==="x"?z:M:j=b==="x"?M:z}else{const z=[{x:g.x,y:y.y}],M=[{x:y.x,y:g.y}];if(b==="x"?j=m.x===S?M:z:j=m.y===S?z:M,a===i){const I=Math.abs(t[b]-s[b]);if(I<=u){const ae=Math.min(u-1,u-I);m[b]===S?E[b]=(g[b]>t[b]?-1:1)*ae:D[b]=(y[b]>s[b]?-1:1)*ae}}if(a!==i){const I=b==="x"?"y":"x",ae=m[b]===p[I],$=g[I]>y[I],F=g[I]<y[I];(m[b]===1&&(!ae&&$||ae&&F)||m[b]!==1&&(!ae&&F||ae&&$))&&(j=b==="x"?z:M)}const Y={x:g.x+E.x,y:g.y+E.y},U={x:y.x+D.x,y:y.y+D.y},ne=Math.max(Math.abs(Y.x-j[0].x),Math.abs(U.x-j[0].x)),Q=Math.max(Math.abs(Y.y-j[0].y),Math.abs(U.y-j[0].y));ne>=Q?(A=(Y.x+U.x)/2,N=j[0].y):(A=j[0].x,N=(Y.y+U.y)/2)}return[[t,{x:g.x+E.x,y:g.y+E.y},...j,{x:y.x+D.x,y:y.y+D.y},s],A,N,C,k]}function HC(t,a,s,i){const c=Math.min(Px(t,a)/2,Px(a,s)/2,i),{x:u,y:f}=a;if(t.x===u&&u===s.x||t.y===f&&f===s.y)return`L${u} ${f}`;if(t.y===f){const g=t.x<s.x?-1:1,y=t.y<s.y?1:-1;return`L ${u+c*g},${f}Q ${u},${f} ${u},${f+c*y}`}const m=t.x<s.x?1:-1,p=t.y<s.y?-1:1;return`L ${u},${f+c*p}Q ${u},${f} ${u+c*m},${f}`}function ph({sourceX:t,sourceY:a,sourcePosition:s=xe.Bottom,targetX:i,targetY:c,targetPosition:u=xe.Top,borderRadius:f=5,centerX:m,centerY:p,offset:g=20,stepPosition:y=.5}){const[x,b,S,j,A]=BC({source:{x:t,y:a},sourcePosition:s,target:{x:i,y:c},targetPosition:u,center:{x:m,y:p},offset:g,stepPosition:y});return[x.reduce((E,D,C)=>{let k="";return C>0&&C<x.length-1?k=HC(x[C-1],D,x[C+1],f):k=`${C===0?"M":"L"}${D.x} ${D.y}`,E+=k,E},""),b,S,j,A]}function Zx(t){return t&&!!(t.internals.handleBounds||t.handles?.length)&&!!(t.measured.width||t.width||t.initialWidth)}function LC(t){const{sourceNode:a,targetNode:s}=t;if(!Zx(a)||!Zx(s))return null;const i=a.internals.handleBounds||Qx(a.handles),c=s.internals.handleBounds||Qx(s.handles),u=Fx(i?.source??[],t.sourceHandle),f=Fx(t.connectionMode===Rr.Strict?c?.target??[]:(c?.target??[]).concat(c?.source??[]),t.targetHandle);if(!u||!f)return t.onError?.("008",Rn.error008(u?"target":"source",{id:t.id,sourceHandle:t.sourceHandle,targetHandle:t.targetHandle})),null;const m=u?.position||xe.Bottom,p=f?.position||xe.Top,g=Cs(a,u,m),y=Cs(s,f,p);return{sourceX:g.x,sourceY:g.y,targetX:y.x,targetY:y.y,sourcePosition:m,targetPosition:p}}function Qx(t){if(!t)return null;const a=[],s=[];for(const i of t)i.width=i.width??1,i.height=i.height??1,i.type==="source"?a.push(i):i.type==="target"&&s.push(i);return{source:a,target:s}}function Cs(t,a,s=xe.Left,i=!1){const c=(a?.x??0)+t.internals.positionAbsolute.x,u=(a?.y??0)+t.internals.positionAbsolute.y,{width:f,height:m}=a??da(t);if(i)return{x:c+f/2,y:u+m/2};switch(a?.position??s){case xe.Top:return{x:c+f/2,y:u};case xe.Right:return{x:c+f,y:u+m/2};case xe.Bottom:return{x:c+f/2,y:u+m};case xe.Left:return{x:c,y:u+m/2}}}function Fx(t,a){return t&&(a?t.find(s=>s.id===a):t[0])||null}function gh(t,a){return t?typeof t=="string"?t:`${a?`${a}__`:""}${Object.keys(t).sort().map(i=>`${i}=${t[i]}`).join("&")}`:""}function UC(t,{id:a,defaultColor:s,defaultMarkerStart:i,defaultMarkerEnd:c}){const u=new Set;return t.reduce((f,m)=>([m.markerStart||i,m.markerEnd||c].forEach(p=>{if(p&&typeof p=="object"){const g=gh(p,a);u.has(g)||(f.push({id:g,color:p.color||s,...p}),u.add(g))}}),f),[]).sort((f,m)=>f.id.localeCompare(m.id))}const _1=1e3,$C=10,Fh={nodeOrigin:[0,0],nodeExtent:eo,elevateNodesOnSelect:!0,zIndexMode:"basic",defaults:{}},qC={...Fh,checkEquality:!0};function Wh(t,a){const s={...t};for(const i in a)a[i]!==void 0&&(s[i]=a[i]);return s}function VC(t,a,s){const i=Wh(Fh,s);for(const c of t.values())if(c.parentId)Jh(c,t,a,i);else{const u=ho(c,i.nodeOrigin),f=Or(c.extent)?c.extent:i.nodeExtent,m=_s(u,f,da(c));c.internals.positionAbsolute=m}}function YC(t,a){if(!t.handles)return t.measured?a?.internals.handleBounds:void 0;const s=[],i=[];for(const c of t.handles){const u={id:c.id,width:c.width??1,height:c.height??1,nodeId:t.id,x:c.x,y:c.y,position:c.position,type:c.type};c.type==="source"?s.push(u):c.type==="target"&&i.push(u)}return{source:s,target:i}}function Kh(t){return t==="manual"}function xh(t,a,s,i={}){const c=Wh(qC,i),u={i:0},f=new Map(a),m=c?.elevateNodesOnSelect&&!Kh(c.zIndexMode)?_1:0;let p=t.length>0;a.clear(),s.clear();for(const g of t){let y=f.get(g.id);if(c.checkEquality&&g===y?.internals.userNode)a.set(g.id,y);else{const x=ho(g,c.nodeOrigin),b=Or(g.extent)?g.extent:c.nodeExtent,S=_s(x,b,da(g));y={...c.defaults,...g,measured:{width:g.measured?.width,height:g.measured?.height},internals:{positionAbsolute:S,handleBounds:YC(g,y),z:C1(g,m,c.zIndexMode),userNode:g}},a.set(g.id,y)}(y.measured===void 0||y.measured.width===void 0||y.measured.height===void 0)&&!y.hidden&&(p=!1),g.parentId&&Jh(y,a,s,i,u)}return p}function XC(t,a){if(!t.parentId)return;const s=a.get(t.parentId);s?s.set(t.id,t):a.set(t.parentId,new Map([[t.id,t]]))}function Jh(t,a,s,i,c){const{elevateNodesOnSelect:u,nodeOrigin:f,nodeExtent:m,zIndexMode:p}=Wh(Fh,i),g=t.parentId,y=a.get(g);if(!y){console.warn(`Parent node ${g} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}XC(t,s),c&&!y.parentId&&y.internals.rootParentIndex===void 0&&p==="auto"&&(y.internals.rootParentIndex=++c.i,y.internals.z=y.internals.z+c.i*$C),c&&y.internals.rootParentIndex!==void 0&&(c.i=y.internals.rootParentIndex);const x=u&&!Kh(p)?_1:0,{x:b,y:S,z:j}=GC(t,y,f,m,x,p),{positionAbsolute:A}=t.internals,N=b!==A.x||S!==A.y;(N||j!==t.internals.z)&&a.set(t.id,{...t,internals:{...t.internals,positionAbsolute:N?{x:b,y:S}:A,z:j}})}function C1(t,a,s){const i=gn(t.zIndex)?t.zIndex:0;return Kh(s)?i:i+(t.selected?a:0)}function GC(t,a,s,i,c,u){const{x:f,y:m}=a.internals.positionAbsolute,p=da(t),g=ho(t,s),y=Or(t.extent)?_s(g,t.extent,p):g;let x=_s({x:f+y.x,y:m+y.y},i,p);t.extent==="parent"&&(x=h1(x,p,a));const b=C1(t,c,u),S=a.internals.z??0;return{x:x.x,y:x.y,z:S>=b?S+1:b}}function em(t,a,s,i=[0,0]){const c=[],u=new Map;for(const f of t){const m=a.get(f.parentId);if(!m)continue;const p=u.get(f.parentId)?.expandedRect??zr(m),g=p1(p,f.rect);u.set(f.parentId,{expandedRect:g,parent:m})}return u.size>0&&u.forEach(({expandedRect:f,parent:m},p)=>{const g=m.internals.positionAbsolute,y=da(m),x=m.origin??i,b=f.x<g.x?Math.round(Math.abs(g.x-f.x)):0,S=f.y<g.y?Math.round(Math.abs(g.y-f.y)):0,j=Math.max(y.width,Math.round(f.width)),A=Math.max(y.height,Math.round(f.height)),N=(j-y.width)*x[0],E=(A-y.height)*x[1];(b>0||S>0||N||E)&&(c.push({id:p,type:"position",position:{x:m.position.x-b+N,y:m.position.y-S+E}}),s.get(p)?.forEach(D=>{t.some(C=>C.id===D.id)||c.push({id:D.id,type:"position",position:{x:D.position.x+b,y:D.position.y+S}})})),(y.width<f.width||y.height<f.height||b||S)&&c.push({id:p,type:"dimensions",setAttributes:!0,dimensions:{width:j+(b?x[0]*b-N:0),height:A+(S?x[1]*S-E:0)}})}),c}function IC(t,a,s,i,c,u,f){const m=i?.querySelector(".xyflow__viewport");let p=!1;if(!m)return{changes:[],updatedInternals:p};const g=[],y=window.getComputedStyle(m),{m22:x}=new window.DOMMatrixReadOnly(y.transform),b=[];for(const S of t.values()){const j=a.get(S.id);if(!j)continue;if(j.hidden){a.set(j.id,{...j,internals:{...j.internals,handleBounds:void 0}}),p=!0;continue}const A=Qh(S.nodeElement),N=j.measured.width!==A.width||j.measured.height!==A.height;if(!!(A.width&&A.height&&(N||!j.internals.handleBounds||S.force))){const D=S.nodeElement.getBoundingClientRect(),C=Or(j.extent)?j.extent:u;let{positionAbsolute:k}=j.internals;j.parentId&&j.extent==="parent"?k=h1(k,A,a.get(j.parentId)):C&&(k=_s(k,C,A));const w={...j,measured:A,internals:{...j.internals,positionAbsolute:k,handleBounds:{source:Xx("source",S.nodeElement,D,x,j.id),target:Xx("target",S.nodeElement,D,x,j.id)}}};a.set(j.id,w),j.parentId&&Jh(w,a,s,{nodeOrigin:c,zIndexMode:f}),p=!0,N&&(g.push({id:j.id,type:"dimensions",dimensions:A}),j.expandParent&&j.parentId&&b.push({id:j.id,parentId:j.parentId,rect:zr(w,c)}))}}if(b.length>0){const S=em(b,a,s,c);g.push(...S)}return{changes:g,updatedInternals:p}}async function PC({delta:t,panZoom:a,transform:s,translateExtent:i,width:c,height:u}){if(!a||!t.x&&!t.y)return Promise.resolve(!1);const f=await a.setViewportConstrained({x:s[0]+t.x,y:s[1]+t.y,zoom:s[2]},[[0,0],[c,u]],i),m=!!f&&(f.x!==s[0]||f.y!==s[1]||f.k!==s[2]);return Promise.resolve(m)}function Wx(t,a,s,i,c,u){let f=c;const m=i.get(f)||new Map;i.set(f,m.set(s,a)),f=`${c}-${t}`;const p=i.get(f)||new Map;if(i.set(f,p.set(s,a)),u){f=`${c}-${t}-${u}`;const g=i.get(f)||new Map;i.set(f,g.set(s,a))}}function T1(t,a,s){t.clear(),a.clear();for(const i of s){const{source:c,target:u,sourceHandle:f=null,targetHandle:m=null}=i,p={edgeId:i.id,source:c,target:u,sourceHandle:f,targetHandle:m},g=`${c}-${f}--${u}-${m}`,y=`${u}-${m}--${c}-${f}`;Wx("source",p,y,t,c,f),Wx("target",p,g,t,u,m),a.set(i.id,i)}}function M1(t,a){if(!t.parentId)return!1;const s=a.get(t.parentId);return s?s.selected?!0:M1(s,a):!1}function Kx(t,a,s){let i=t;do{if(i?.matches?.(a))return!0;if(i===s)return!1;i=i?.parentElement}while(i);return!1}function ZC(t,a,s,i){const c=new Map;for(const[u,f]of t)if((f.selected||f.id===i)&&(!f.parentId||!M1(f,t))&&(f.draggable||a&&typeof f.draggable>"u")){const m=t.get(u);m&&c.set(u,{id:u,position:m.position||{x:0,y:0},distance:{x:s.x-m.internals.positionAbsolute.x,y:s.y-m.internals.positionAbsolute.y},extent:m.extent,parentId:m.parentId,origin:m.origin,expandParent:m.expandParent,internals:{positionAbsolute:m.internals.positionAbsolute||{x:0,y:0}},measured:{width:m.measured.width??0,height:m.measured.height??0}})}return c}function Lf({nodeId:t,dragItems:a,nodeLookup:s,dragging:i=!0}){const c=[];for(const[f,m]of a){const p=s.get(f)?.internals.userNode;p&&c.push({...p,position:m.position,dragging:i})}if(!t)return[c[0],c];const u=s.get(t)?.internals.userNode;return[u?{...u,position:a.get(t)?.position||u.position,dragging:i}:c[0],c]}function QC({dragItems:t,snapGrid:a,x:s,y:i}){const c=t.values().next().value;if(!c)return null;const u={x:s-c.distance.x,y:i-c.distance.y},f=po(u,a);return{x:f.x-u.x,y:f.y-u.y}}function FC({onNodeMouseDown:t,getStoreItems:a,onDragStart:s,onDrag:i,onDragStop:c}){let u={x:null,y:null},f=0,m=new Map,p=!1,g={x:0,y:0},y=null,x=!1,b=null,S=!1,j=!1,A=null;function N({noDragClassName:D,handleSelector:C,domNode:k,isSelectable:w,nodeId:z,nodeClickDistance:M=0}){b=Xt(k);function Y({x:I,y:ae}){const{nodeLookup:$,nodeExtent:F,snapGrid:O,snapToGrid:B,nodeOrigin:V,onNodeDrag:L,onSelectionDrag:Z,onError:R,updateNodePositions:X}=a();u={x:I,y:ae};let ee=!1;const H=m.size>1,oe=H&&F?mh(mo(m)):null,ue=H&&B?QC({dragItems:m,snapGrid:O,x:I,y:ae}):null;for(const[ce,le]of m){if(!$.has(ce))continue;let de={x:I-le.distance.x,y:ae-le.distance.y};B&&(de=ue?{x:Math.round(de.x+ue.x),y:Math.round(de.y+ue.y)}:po(de,O));let we=null;if(H&&F&&!le.extent&&oe){const{positionAbsolute:ge}=le.internals,me=ge.x-oe.x+F[0][0],Te=ge.x+le.measured.width-oe.x2+F[1][0],_e=ge.y-oe.y+F[0][1],Ze=ge.y+le.measured.height-oe.y2+F[1][1];we=[[me,_e],[Te,Ze]]}const{position:be,positionAbsolute:pe}=f1({nodeId:ce,nextPosition:de,nodeLookup:$,nodeExtent:we||F,nodeOrigin:V,onError:R});ee=ee||le.position.x!==be.x||le.position.y!==be.y,le.position=be,le.internals.positionAbsolute=pe}if(j=j||ee,!!ee&&(X(m,!0),A&&(i||L||!z&&Z))){const[ce,le]=Lf({nodeId:z,dragItems:m,nodeLookup:$});i?.(A,m,ce,le),L?.(A,ce,le),z||Z?.(A,le)}}async function U(){if(!y)return;const{transform:I,panBy:ae,autoPanSpeed:$,autoPanOnNodeDrag:F}=a();if(!F){p=!1,cancelAnimationFrame(f);return}const[O,B]=m1(g,y,$);(O!==0||B!==0)&&(u.x=(u.x??0)-O/I[2],u.y=(u.y??0)-B/I[2],await ae({x:O,y:B})&&Y(u)),f=requestAnimationFrame(U)}function ne(I){const{nodeLookup:ae,multiSelectionActive:$,nodesDraggable:F,transform:O,snapGrid:B,snapToGrid:V,selectNodesOnDrag:L,onNodeDragStart:Z,onSelectionDragStart:R,unselectNodesAndEdges:X}=a();x=!0,(!L||!w)&&!$&&z&&(ae.get(z)?.selected||X()),w&&L&&z&&t?.(z);const ee=Pi(I.sourceEvent,{transform:O,snapGrid:B,snapToGrid:V,containerBounds:y});if(u=ee,m=ZC(ae,F,ee,z),m.size>0&&(s||Z||!z&&R)){const[H,oe]=Lf({nodeId:z,dragItems:m,nodeLookup:ae});s?.(I.sourceEvent,m,H,oe),Z?.(I.sourceEvent,H,oe),z||R?.(I.sourceEvent,oe)}}const Q=Gb().clickDistance(M).on("start",I=>{const{domNode:ae,nodeDragThreshold:$,transform:F,snapGrid:O,snapToGrid:B}=a();y=ae?.getBoundingClientRect()||null,S=!1,j=!1,A=I.sourceEvent,$===0&&ne(I),u=Pi(I.sourceEvent,{transform:F,snapGrid:O,snapToGrid:B,containerBounds:y}),g=xn(I.sourceEvent,y)}).on("drag",I=>{const{autoPanOnNodeDrag:ae,transform:$,snapGrid:F,snapToGrid:O,nodeDragThreshold:B,nodeLookup:V}=a(),L=Pi(I.sourceEvent,{transform:$,snapGrid:F,snapToGrid:O,containerBounds:y});if(A=I.sourceEvent,(I.sourceEvent.type==="touchmove"&&I.sourceEvent.touches.length>1||z&&!V.has(z))&&(S=!0),!S){if(!p&&ae&&x&&(p=!0,U()),!x){const Z=xn(I.sourceEvent,y),R=Z.x-g.x,X=Z.y-g.y;Math.sqrt(R*R+X*X)>B&&ne(I)}(u.x!==L.xSnapped||u.y!==L.ySnapped)&&m&&x&&(g=xn(I.sourceEvent,y),Y(L))}}).on("end",I=>{if(!(!x||S)&&(p=!1,x=!1,cancelAnimationFrame(f),m.size>0)){const{nodeLookup:ae,updateNodePositions:$,onNodeDragStop:F,onSelectionDragStop:O}=a();if(j&&($(m,!1),j=!1),c||F||!z&&O){const[B,V]=Lf({nodeId:z,dragItems:m,nodeLookup:ae,dragging:!1});c?.(I.sourceEvent,m,B,V),F?.(I.sourceEvent,B,V),z||O?.(I.sourceEvent,V)}}}).filter(I=>{const ae=I.target;return!I.button&&(!D||!Kx(ae,`.${D}`,k))&&(!C||Kx(ae,C,k))});b.call(Q)}function E(){b?.on(".drag",null)}return{update:N,destroy:E}}function WC(t,a,s){const i=[],c={x:t.x-s,y:t.y-s,width:s*2,height:s*2};for(const u of a.values())no(c,zr(u))>0&&i.push(u);return i}const KC=250;function JC(t,a,s,i){let c=[],u=1/0;const f=WC(t,s,a+KC);for(const m of f){const p=[...m.internals.handleBounds?.source??[],...m.internals.handleBounds?.target??[]];for(const g of p){if(i.nodeId===g.nodeId&&i.type===g.type&&i.id===g.id)continue;const{x:y,y:x}=Cs(m,g,g.position,!0),b=Math.sqrt(Math.pow(y-t.x,2)+Math.pow(x-t.y,2));b>a||(b<u?(c=[{...g,x:y,y:x}],u=b):b===u&&c.push({...g,x:y,y:x}))}}if(!c.length)return null;if(c.length>1){const m=i.type==="source"?"target":"source";return c.find(p=>p.type===m)??c[0]}return c[0]}function A1(t,a,s,i,c,u=!1){const f=i.get(t);if(!f)return null;const m=c==="strict"?f.internals.handleBounds?.[a]:[...f.internals.handleBounds?.source??[],...f.internals.handleBounds?.target??[]],p=(s?m?.find(g=>g.id===s):m?.[0])??null;return p&&u?{...p,...Cs(f,p,p.position,!0)}:p}function k1(t,a){return t||(a?.classList.contains("target")?"target":a?.classList.contains("source")?"source":null)}function e8(t,a){let s=null;return a?s=!0:t&&!a&&(s=!1),s}const R1=()=>!0;function t8(t,{connectionMode:a,connectionRadius:s,handleId:i,nodeId:c,edgeUpdaterType:u,isTarget:f,domNode:m,nodeLookup:p,lib:g,autoPanOnConnect:y,flowId:x,panBy:b,cancelConnection:S,onConnectStart:j,onConnect:A,onConnectEnd:N,isValidConnection:E=R1,onReconnectEnd:D,updateConnection:C,getTransform:k,getFromHandle:w,autoPanSpeed:z,dragThreshold:M=1,handleDomNode:Y}){const U=y1(t.target);let ne=0,Q;const{x:I,y:ae}=xn(t),$=k1(u,Y),F=m?.getBoundingClientRect();let O=!1;if(!F||!$)return;const B=A1(c,$,i,p,a);if(!B)return;let V=xn(t,F),L=!1,Z=null,R=!1,X=null;function ee(){if(!y||!F)return;const[be,pe]=m1(V,F,z);b({x:be,y:pe}),ne=requestAnimationFrame(ee)}const H={...B,nodeId:c,type:$,position:B.position},oe=p.get(c);let ce={inProgress:!0,isValid:null,from:Cs(oe,H,xe.Left,!0),fromHandle:H,fromPosition:H.position,fromNode:oe,to:V,toHandle:null,toPosition:$x[H.position],toNode:null,pointer:V};function le(){O=!0,C(ce),j?.(t,{nodeId:c,handleId:i,handleType:$})}M===0&&le();function de(be){if(!O){const{x:Ze,y:pt}=xn(be),ut=Ze-I,_t=pt-ae;if(!(ut*ut+_t*_t>M*M))return;le()}if(!w()||!H){we(be);return}const pe=k();V=xn(be,F),Q=JC(go(V,pe,!1,[1,1]),s,p,H),L||(ee(),L=!0);const ge=D1(be,{handle:Q,connectionMode:a,fromNodeId:c,fromHandleId:i,fromType:f?"target":"source",isValidConnection:E,doc:U,lib:g,flowId:x,nodeLookup:p});X=ge.handleDomNode,Z=ge.connection,R=e8(!!Q,ge.isValid);const me=p.get(c),Te=me?Cs(me,H,xe.Left,!0):ce.from,_e={...ce,from:Te,isValid:R,to:ge.toHandle&&R?Dc({x:ge.toHandle.x,y:ge.toHandle.y},pe):V,toHandle:ge.toHandle,toPosition:R&&ge.toHandle?ge.toHandle.position:$x[H.position],toNode:ge.toHandle?p.get(ge.toHandle.nodeId):null,pointer:V};C(_e),ce=_e}function we(be){if(!("touches"in be&&be.touches.length>0)){if(O){(Q||X)&&Z&&R&&A?.(Z);const{inProgress:pe,...ge}=ce,me={...ge,toPosition:ce.toHandle?ce.toPosition:null};N?.(be,me),u&&D?.(be,me)}S(),cancelAnimationFrame(ne),L=!1,R=!1,Z=null,X=null,U.removeEventListener("mousemove",de),U.removeEventListener("mouseup",we),U.removeEventListener("touchmove",de),U.removeEventListener("touchend",we)}}U.addEventListener("mousemove",de),U.addEventListener("mouseup",we),U.addEventListener("touchmove",de),U.addEventListener("touchend",we)}function D1(t,{handle:a,connectionMode:s,fromNodeId:i,fromHandleId:c,fromType:u,doc:f,lib:m,flowId:p,isValidConnection:g=R1,nodeLookup:y}){const x=u==="target",b=a?f.querySelector(`.${m}-flow__handle[data-id="${p}-${a?.nodeId}-${a?.id}-${a?.type}"]`):null,{x:S,y:j}=xn(t),A=f.elementFromPoint(S,j),N=A?.classList.contains(`${m}-flow__handle`)?A:b,E={handleDomNode:N,isValid:!1,connection:null,toHandle:null};if(N){const D=k1(void 0,N),C=N.getAttribute("data-nodeid"),k=N.getAttribute("data-handleid"),w=N.classList.contains("connectable"),z=N.classList.contains("connectableend");if(!C||!D)return E;const M={source:x?C:i,sourceHandle:x?k:c,target:x?i:C,targetHandle:x?c:k};E.connection=M;const U=w&&z&&(s===Rr.Strict?x&&D==="source"||!x&&D==="target":C!==i||k!==c);E.isValid=U&&g(M),E.toHandle=A1(C,D,k,y,s,!0)}return E}const yh={onPointerDown:t8,isValid:D1};function n8({domNode:t,panZoom:a,getTransform:s,getViewScale:i}){const c=Xt(t);function u({translateExtent:m,width:p,height:g,zoomStep:y=1,pannable:x=!0,zoomable:b=!0,inversePan:S=!1}){const j=C=>{if(C.sourceEvent.type!=="wheel"||!a)return;const k=s(),w=C.sourceEvent.ctrlKey&&ao()?10:1,z=-C.sourceEvent.deltaY*(C.sourceEvent.deltaMode===1?.05:C.sourceEvent.deltaMode?1:.002)*y,M=k[2]*Math.pow(2,z*w);a.scaleTo(M)};let A=[0,0];const N=C=>{(C.sourceEvent.type==="mousedown"||C.sourceEvent.type==="touchstart")&&(A=[C.sourceEvent.clientX??C.sourceEvent.touches[0].clientX,C.sourceEvent.clientY??C.sourceEvent.touches[0].clientY])},E=C=>{const k=s();if(C.sourceEvent.type!=="mousemove"&&C.sourceEvent.type!=="touchmove"||!a)return;const w=[C.sourceEvent.clientX??C.sourceEvent.touches[0].clientX,C.sourceEvent.clientY??C.sourceEvent.touches[0].clientY],z=[w[0]-A[0],w[1]-A[1]];A=w;const M=i()*Math.max(k[2],Math.log(k[2]))*(S?-1:1),Y={x:k[0]-z[0]*M,y:k[1]-z[1]*M},U=[[0,0],[p,g]];a.setViewportConstrained({x:Y.x,y:Y.y,zoom:k[2]},U,m)},D=i1().on("start",N).on("zoom",x?E:null).on("zoom.wheel",b?j:null);c.call(D,{})}function f(){c.on("zoom",null)}return{update:u,destroy:f,pointer:mn}}const Wc=t=>({x:t.x,y:t.y,zoom:t.k}),Uf=({x:t,y:a,zoom:s})=>Zc.translate(t,a).scale(s),vr=(t,a)=>t.target.closest(`.${a}`),z1=(t,a)=>a===2&&Array.isArray(t)&&t.includes(2),a8=t=>((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2,$f=(t,a=0,s=a8,i=()=>{})=>{const c=typeof a=="number"&&a>0;return c||i(),c?t.transition().duration(a).ease(s).on("end",i):t},O1=t=>{const a=t.ctrlKey&&ao()?10:1;return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*a};function s8({zoomPanValues:t,noWheelClassName:a,d3Selection:s,d3Zoom:i,panOnScrollMode:c,panOnScrollSpeed:u,zoomOnPinch:f,onPanZoomStart:m,onPanZoom:p,onPanZoomEnd:g}){return y=>{if(vr(y,a))return y.ctrlKey&&y.preventDefault(),!1;y.preventDefault(),y.stopImmediatePropagation();const x=s.property("__zoom").k||1;if(y.ctrlKey&&f){const N=mn(y),E=O1(y),D=x*Math.pow(2,E);i.scaleTo(s,D,N,y);return}const b=y.deltaMode===1?20:1;let S=c===Ns.Vertical?0:y.deltaX*b,j=c===Ns.Horizontal?0:y.deltaY*b;!ao()&&y.shiftKey&&c!==Ns.Vertical&&(S=y.deltaY*b,j=0),i.translateBy(s,-(S/x)*u,-(j/x)*u,{internal:!0});const A=Wc(s.property("__zoom"));clearTimeout(t.panScrollTimeout),t.isPanScrolling?(p?.(y,A),t.panScrollTimeout=setTimeout(()=>{g?.(y,A),t.isPanScrolling=!1},150)):(t.isPanScrolling=!0,m?.(y,A))}}function r8({noWheelClassName:t,preventScrolling:a,d3ZoomHandler:s}){return function(i,c){const u=i.type==="wheel",f=!a&&u&&!i.ctrlKey,m=vr(i,t);if(i.ctrlKey&&u&&m&&i.preventDefault(),f||m)return null;i.preventDefault(),s.call(this,i,c)}}function i8({zoomPanValues:t,onDraggingChange:a,onPanZoomStart:s}){return i=>{if(i.sourceEvent?.internal)return;const c=Wc(i.transform);t.mouseButton=i.sourceEvent?.button||0,t.isZoomingOrPanning=!0,t.prevViewport=c,i.sourceEvent?.type==="mousedown"&&a(!0),s&&s?.(i.sourceEvent,c)}}function o8({zoomPanValues:t,panOnDrag:a,onPaneContextMenu:s,onTransformChange:i,onPanZoom:c}){return u=>{t.usedRightMouseButton=!!(s&&z1(a,t.mouseButton??0)),u.sourceEvent?.sync||i([u.transform.x,u.transform.y,u.transform.k]),c&&!u.sourceEvent?.internal&&c?.(u.sourceEvent,Wc(u.transform))}}function l8({zoomPanValues:t,panOnDrag:a,panOnScroll:s,onDraggingChange:i,onPanZoomEnd:c,onPaneContextMenu:u}){return f=>{if(!f.sourceEvent?.internal&&(t.isZoomingOrPanning=!1,u&&z1(a,t.mouseButton??0)&&!t.usedRightMouseButton&&f.sourceEvent&&u(f.sourceEvent),t.usedRightMouseButton=!1,i(!1),c)){const m=Wc(f.transform);t.prevViewport=m,clearTimeout(t.timerId),t.timerId=setTimeout(()=>{c?.(f.sourceEvent,m)},s?150:0)}}}function c8({zoomActivationKeyPressed:t,zoomOnScroll:a,zoomOnPinch:s,panOnDrag:i,panOnScroll:c,zoomOnDoubleClick:u,userSelectionActive:f,noWheelClassName:m,noPanClassName:p,lib:g,connectionInProgress:y}){return x=>{const b=t||a,S=s&&x.ctrlKey,j=x.type==="wheel";if(x.button===1&&x.type==="mousedown"&&(vr(x,`${g}-flow__node`)||vr(x,`${g}-flow__edge`)))return!0;if(!i&&!b&&!c&&!u&&!s||f||y&&!j||vr(x,m)&&j||vr(x,p)&&(!j||c&&j&&!t)||!s&&x.ctrlKey&&j)return!1;if(!s&&x.type==="touchstart"&&x.touches?.length>1)return x.preventDefault(),!1;if(!b&&!c&&!S&&j||!i&&(x.type==="mousedown"||x.type==="touchstart")||Array.isArray(i)&&!i.includes(x.button)&&x.type==="mousedown")return!1;const A=Array.isArray(i)&&i.includes(x.button)||!x.button||x.button<=1;return(!x.ctrlKey||j)&&A}}function u8({domNode:t,minZoom:a,maxZoom:s,translateExtent:i,viewport:c,onPanZoom:u,onPanZoomStart:f,onPanZoomEnd:m,onDraggingChange:p}){const g={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},y=t.getBoundingClientRect(),x=i1().scaleExtent([a,s]).translateExtent(i),b=Xt(t).call(x);D({x:c.x,y:c.y,zoom:Dr(c.zoom,a,s)},[[0,0],[y.width,y.height]],i);const S=b.on("wheel.zoom"),j=b.on("dblclick.zoom");x.wheelDelta(O1);function A(Q,I){return b?new Promise(ae=>{x?.interpolate(I?.interpolate==="linear"?Ii:hc).transform($f(b,I?.duration,I?.ease,()=>ae(!0)),Q)}):Promise.resolve(!1)}function N({noWheelClassName:Q,noPanClassName:I,onPaneContextMenu:ae,userSelectionActive:$,panOnScroll:F,panOnDrag:O,panOnScrollMode:B,panOnScrollSpeed:V,preventScrolling:L,zoomOnPinch:Z,zoomOnScroll:R,zoomOnDoubleClick:X,zoomActivationKeyPressed:ee,lib:H,onTransformChange:oe,connectionInProgress:ue,paneClickDistance:ce,selectionOnDrag:le}){$&&!g.isZoomingOrPanning&&E();const de=F&&!ee&&!$;x.clickDistance(le?1/0:!gn(ce)||ce<0?0:ce);const we=de?s8({zoomPanValues:g,noWheelClassName:Q,d3Selection:b,d3Zoom:x,panOnScrollMode:B,panOnScrollSpeed:V,zoomOnPinch:Z,onPanZoomStart:f,onPanZoom:u,onPanZoomEnd:m}):r8({noWheelClassName:Q,preventScrolling:L,d3ZoomHandler:S});if(b.on("wheel.zoom",we,{passive:!1}),!$){const pe=i8({zoomPanValues:g,onDraggingChange:p,onPanZoomStart:f});x.on("start",pe);const ge=o8({zoomPanValues:g,panOnDrag:O,onPaneContextMenu:!!ae,onPanZoom:u,onTransformChange:oe});x.on("zoom",ge);const me=l8({zoomPanValues:g,panOnDrag:O,panOnScroll:F,onPaneContextMenu:ae,onPanZoomEnd:m,onDraggingChange:p});x.on("end",me)}const be=c8({zoomActivationKeyPressed:ee,panOnDrag:O,zoomOnScroll:R,panOnScroll:F,zoomOnDoubleClick:X,zoomOnPinch:Z,userSelectionActive:$,noPanClassName:I,noWheelClassName:Q,lib:H,connectionInProgress:ue});x.filter(be),X?b.on("dblclick.zoom",j):b.on("dblclick.zoom",null)}function E(){x.on("zoom",null)}async function D(Q,I,ae){const $=Uf(Q),F=x?.constrain()($,I,ae);return F&&await A(F),new Promise(O=>O(F))}async function C(Q,I){const ae=Uf(Q);return await A(ae,I),new Promise($=>$(ae))}function k(Q){if(b){const I=Uf(Q),ae=b.property("__zoom");(ae.k!==Q.zoom||ae.x!==Q.x||ae.y!==Q.y)&&x?.transform(b,I,null,{sync:!0})}}function w(){const Q=b?r1(b.node()):{x:0,y:0,k:1};return{x:Q.x,y:Q.y,zoom:Q.k}}function z(Q,I){return b?new Promise(ae=>{x?.interpolate(I?.interpolate==="linear"?Ii:hc).scaleTo($f(b,I?.duration,I?.ease,()=>ae(!0)),Q)}):Promise.resolve(!1)}function M(Q,I){return b?new Promise(ae=>{x?.interpolate(I?.interpolate==="linear"?Ii:hc).scaleBy($f(b,I?.duration,I?.ease,()=>ae(!0)),Q)}):Promise.resolve(!1)}function Y(Q){x?.scaleExtent(Q)}function U(Q){x?.translateExtent(Q)}function ne(Q){const I=!gn(Q)||Q<0?0:Q;x?.clickDistance(I)}return{update:N,destroy:E,setViewport:C,setViewportConstrained:D,getViewport:w,scaleTo:z,scaleBy:M,setScaleExtent:Y,setTranslateExtent:U,syncViewport:k,setClickDistance:ne}}var Br;(function(t){t.Line="line",t.Handle="handle"})(Br||(Br={}));function d8({width:t,prevWidth:a,height:s,prevHeight:i,affectsX:c,affectsY:u}){const f=t-a,m=s-i,p=[f>0?1:f<0?-1:0,m>0?1:m<0?-1:0];return f&&c&&(p[0]=p[0]*-1),m&&u&&(p[1]=p[1]*-1),p}function Jx(t){const a=t.includes("right")||t.includes("left"),s=t.includes("bottom")||t.includes("top"),i=t.includes("left"),c=t.includes("top");return{isHorizontal:a,isVertical:s,affectsX:i,affectsY:c}}function qa(t,a){return Math.max(0,a-t)}function Va(t,a){return Math.max(0,t-a)}function Jl(t,a,s){return Math.max(0,a-t,t-s)}function ey(t,a){return t?!a:a}function f8(t,a,s,i,c,u,f,m){let{affectsX:p,affectsY:g}=a;const{isHorizontal:y,isVertical:x}=a,b=y&&x,{xSnapped:S,ySnapped:j}=s,{minWidth:A,maxWidth:N,minHeight:E,maxHeight:D}=i,{x:C,y:k,width:w,height:z,aspectRatio:M}=t;let Y=Math.floor(y?S-t.pointerX:0),U=Math.floor(x?j-t.pointerY:0);const ne=w+(p?-Y:Y),Q=z+(g?-U:U),I=-u[0]*w,ae=-u[1]*z;let $=Jl(ne,A,N),F=Jl(Q,E,D);if(f){let V=0,L=0;p&&Y<0?V=qa(C+Y+I,f[0][0]):!p&&Y>0&&(V=Va(C+ne+I,f[1][0])),g&&U<0?L=qa(k+U+ae,f[0][1]):!g&&U>0&&(L=Va(k+Q+ae,f[1][1])),$=Math.max($,V),F=Math.max(F,L)}if(m){let V=0,L=0;p&&Y>0?V=Va(C+Y,m[0][0]):!p&&Y<0&&(V=qa(C+ne,m[1][0])),g&&U>0?L=Va(k+U,m[0][1]):!g&&U<0&&(L=qa(k+Q,m[1][1])),$=Math.max($,V),F=Math.max(F,L)}if(c){if(y){const V=Jl(ne/M,E,D)*M;if($=Math.max($,V),f){let L=0;!p&&!g||p&&!g&&b?L=Va(k+ae+ne/M,f[1][1])*M:L=qa(k+ae+(p?Y:-Y)/M,f[0][1])*M,$=Math.max($,L)}if(m){let L=0;!p&&!g||p&&!g&&b?L=qa(k+ne/M,m[1][1])*M:L=Va(k+(p?Y:-Y)/M,m[0][1])*M,$=Math.max($,L)}}if(x){const V=Jl(Q*M,A,N)/M;if(F=Math.max(F,V),f){let L=0;!p&&!g||g&&!p&&b?L=Va(C+Q*M+I,f[1][0])/M:L=qa(C+(g?U:-U)*M+I,f[0][0])/M,F=Math.max(F,L)}if(m){let L=0;!p&&!g||g&&!p&&b?L=qa(C+Q*M,m[1][0])/M:L=Va(C+(g?U:-U)*M,m[0][0])/M,F=Math.max(F,L)}}}U=U+(U<0?F:-F),Y=Y+(Y<0?$:-$),c&&(b?ne>Q*M?U=(ey(p,g)?-Y:Y)/M:Y=(ey(p,g)?-U:U)*M:y?(U=Y/M,g=p):(Y=U*M,p=g));const O=p?C+Y:C,B=g?k+U:k;return{width:w+(p?-Y:Y),height:z+(g?-U:U),x:u[0]*Y*(p?-1:1)+O,y:u[1]*U*(g?-1:1)+B}}const B1={width:0,height:0,x:0,y:0},h8={...B1,pointerX:0,pointerY:0,aspectRatio:1};function m8(t){return[[0,0],[t.measured.width,t.measured.height]]}function p8(t,a,s){const i=a.position.x+t.position.x,c=a.position.y+t.position.y,u=t.measured.width??0,f=t.measured.height??0,m=s[0]*u,p=s[1]*f;return[[i-m,c-p],[i+u-m,c+f-p]]}function g8({domNode:t,nodeId:a,getStoreItems:s,onChange:i,onEnd:c}){const u=Xt(t);let f={controlDirection:Jx("bottom-right"),boundaries:{minWidth:0,minHeight:0,maxWidth:Number.MAX_VALUE,maxHeight:Number.MAX_VALUE},resizeDirection:void 0,keepAspectRatio:!1};function m({controlPosition:g,boundaries:y,keepAspectRatio:x,resizeDirection:b,onResizeStart:S,onResize:j,onResizeEnd:A,shouldResize:N}){let E={...B1},D={...h8};f={boundaries:y,resizeDirection:b,keepAspectRatio:x,controlDirection:Jx(g)};let C,k=null,w=[],z,M,Y,U=!1;const ne=Gb().on("start",Q=>{const{nodeLookup:I,transform:ae,snapGrid:$,snapToGrid:F,nodeOrigin:O,paneDomNode:B}=s();if(C=I.get(a),!C)return;k=B?.getBoundingClientRect()??null;const{xSnapped:V,ySnapped:L}=Pi(Q.sourceEvent,{transform:ae,snapGrid:$,snapToGrid:F,containerBounds:k});E={width:C.measured.width??0,height:C.measured.height??0,x:C.position.x??0,y:C.position.y??0},D={...E,pointerX:V,pointerY:L,aspectRatio:E.width/E.height},z=void 0,C.parentId&&(C.extent==="parent"||C.expandParent)&&(z=I.get(C.parentId),M=z&&C.extent==="parent"?m8(z):void 0),w=[],Y=void 0;for(const[Z,R]of I)if(R.parentId===a&&(w.push({id:Z,position:{...R.position},extent:R.extent}),R.extent==="parent"||R.expandParent)){const X=p8(R,C,R.origin??O);Y?Y=[[Math.min(X[0][0],Y[0][0]),Math.min(X[0][1],Y[0][1])],[Math.max(X[1][0],Y[1][0]),Math.max(X[1][1],Y[1][1])]]:Y=X}S?.(Q,{...E})}).on("drag",Q=>{const{transform:I,snapGrid:ae,snapToGrid:$,nodeOrigin:F}=s(),O=Pi(Q.sourceEvent,{transform:I,snapGrid:ae,snapToGrid:$,containerBounds:k}),B=[];if(!C)return;const{x:V,y:L,width:Z,height:R}=E,X={},ee=C.origin??F,{width:H,height:oe,x:ue,y:ce}=f8(D,f.controlDirection,O,f.boundaries,f.keepAspectRatio,ee,M,Y),le=H!==Z,de=oe!==R,we=ue!==V&&le,be=ce!==L&&de;if(!we&&!be&&!le&&!de)return;if((we||be||ee[0]===1||ee[1]===1)&&(X.x=we?ue:E.x,X.y=be?ce:E.y,E.x=X.x,E.y=X.y,w.length>0)){const Te=ue-V,_e=ce-L;for(const Ze of w)Ze.position={x:Ze.position.x-Te+ee[0]*(H-Z),y:Ze.position.y-_e+ee[1]*(oe-R)},B.push(Ze)}if((le||de)&&(X.width=le&&(!f.resizeDirection||f.resizeDirection==="horizontal")?H:E.width,X.height=de&&(!f.resizeDirection||f.resizeDirection==="vertical")?oe:E.height,E.width=X.width,E.height=X.height),z&&C.expandParent){const Te=ee[0]*(X.width??0);X.x&&X.x<Te&&(E.x=Te,D.x=D.x-(X.x-Te));const _e=ee[1]*(X.height??0);X.y&&X.y<_e&&(E.y=_e,D.y=D.y-(X.y-_e))}const pe=d8({width:E.width,prevWidth:Z,height:E.height,prevHeight:R,affectsX:f.controlDirection.affectsX,affectsY:f.controlDirection.affectsY}),ge={...E,direction:pe};N?.(Q,ge)!==!1&&(U=!0,j?.(Q,ge),i(X,B))}).on("end",Q=>{U&&(A?.(Q,{...E}),c?.({...E}),U=!1)});u.call(ne)}function p(){u.on(".drag",null)}return{update:m,destroy:p}}var qf={exports:{}},Vf={},Yf={exports:{}},Xf={};var ty;function x8(){if(ty)return Xf;ty=1;var t=ro();function a(x,b){return x===b&&(x!==0||1/x===1/b)||x!==x&&b!==b}var s=typeof Object.is=="function"?Object.is:a,i=t.useState,c=t.useEffect,u=t.useLayoutEffect,f=t.useDebugValue;function m(x,b){var S=b(),j=i({inst:{value:S,getSnapshot:b}}),A=j[0].inst,N=j[1];return u(function(){A.value=S,A.getSnapshot=b,p(A)&&N({inst:A})},[x,S,b]),c(function(){return p(A)&&N({inst:A}),x(function(){p(A)&&N({inst:A})})},[x]),f(S),S}function p(x){var b=x.getSnapshot;x=x.value;try{var S=b();return!s(x,S)}catch{return!0}}function g(x,b){return b()}var y=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?g:m;return Xf.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:y,Xf}var ny;function y8(){return ny||(ny=1,Yf.exports=x8()),Yf.exports}var ay;function b8(){if(ay)return Vf;ay=1;var t=ro(),a=y8();function s(g,y){return g===y&&(g!==0||1/g===1/y)||g!==g&&y!==y}var i=typeof Object.is=="function"?Object.is:s,c=a.useSyncExternalStore,u=t.useRef,f=t.useEffect,m=t.useMemo,p=t.useDebugValue;return Vf.useSyncExternalStoreWithSelector=function(g,y,x,b,S){var j=u(null);if(j.current===null){var A={hasValue:!1,value:null};j.current=A}else A=j.current;j=m(function(){function E(z){if(!D){if(D=!0,C=z,z=b(z),S!==void 0&&A.hasValue){var M=A.value;if(S(M,z))return k=M}return k=z}if(M=k,i(C,z))return M;var Y=b(z);return S!==void 0&&S(M,Y)?(C=z,M):(C=z,k=Y)}var D=!1,C,k,w=x===void 0?null:x;return[function(){return E(y())},w===null?void 0:function(){return E(w())}]},[y,x,b,S]);var N=c(g,j[0],j[1]);return f(function(){A.hasValue=!0,A.value=N},[N]),p(N),N},Vf}var sy;function v8(){return sy||(sy=1,qf.exports=b8()),qf.exports}var w8=v8();const S8=vh(w8),N8={},ry=t=>{let a;const s=new Set,i=(y,x)=>{const b=typeof y=="function"?y(a):y;if(!Object.is(b,a)){const S=a;a=x??(typeof b!="object"||b===null)?b:Object.assign({},a,b),s.forEach(j=>j(a,S))}},c=()=>a,p={setState:i,getState:c,getInitialState:()=>g,subscribe:y=>(s.add(y),()=>s.delete(y)),destroy:()=>{(N8?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),s.clear()}},g=a=t(i,c,p);return p},j8=t=>t?ry(t):ry,{useDebugValue:E8}=br,{useSyncExternalStoreWithSelector:_8}=S8,C8=t=>t;function H1(t,a=C8,s){const i=_8(t.subscribe,t.getState,t.getServerState||t.getInitialState,a,s);return E8(i),i}const iy=(t,a)=>{const s=j8(t),i=(c,u=a)=>H1(s,c,u);return Object.assign(i,s),i},T8=(t,a)=>t?iy(t,a):iy;function We(t,a){if(Object.is(t,a))return!0;if(typeof t!="object"||t===null||typeof a!="object"||a===null)return!1;if(t instanceof Map&&a instanceof Map){if(t.size!==a.size)return!1;for(const[i,c]of t)if(!Object.is(c,a.get(i)))return!1;return!0}if(t instanceof Set&&a instanceof Set){if(t.size!==a.size)return!1;for(const i of t)if(!a.has(i))return!1;return!0}const s=Object.keys(t);if(s.length!==Object.keys(a).length)return!1;for(const i of s)if(!Object.prototype.hasOwnProperty.call(a,i)||!Object.is(t[i],a[i]))return!1;return!0}const Kc=_.createContext(null),M8=Kc.Provider,L1=Rn.error001();function ze(t,a){const s=_.useContext(Kc);if(s===null)throw new Error(L1);return H1(s,t,a)}function Ke(){const t=_.useContext(Kc);if(t===null)throw new Error(L1);return _.useMemo(()=>({getState:t.getState,setState:t.setState,subscribe:t.subscribe}),[t])}const oy={display:"none"},A8={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},U1="react-flow__node-desc",$1="react-flow__edge-desc",k8="react-flow__aria-live",R8=t=>t.ariaLiveMessage,D8=t=>t.ariaLabelConfig;function z8({rfId:t}){const a=ze(R8);return l.jsx("div",{id:`${k8}-${t}`,"aria-live":"assertive","aria-atomic":"true",style:A8,children:a})}function O8({rfId:t,disableKeyboardA11y:a}){const s=ze(D8);return l.jsxs(l.Fragment,{children:[l.jsx("div",{id:`${U1}-${t}`,style:oy,children:a?s["node.a11yDescription.default"]:s["node.a11yDescription.keyboardDisabled"]}),l.jsx("div",{id:`${$1}-${t}`,style:oy,children:s["edge.a11yDescription.default"]}),!a&&l.jsx(z8,{rfId:t})]})}const Jc=_.forwardRef(({position:t="top-left",children:a,className:s,style:i,...c},u)=>{const f=`${t}`.split("-");return l.jsx("div",{className:ct(["react-flow__panel",s,...f]),style:i,ref:u,...c,children:a})});Jc.displayName="Panel";function B8({proOptions:t,position:a="bottom-right"}){return t?.hideAttribution?null:l.jsx(Jc,{position:a,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:l.jsx("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const H8=t=>{const a=[],s=[];for(const[,i]of t.nodeLookup)i.selected&&a.push(i.internals.userNode);for(const[,i]of t.edgeLookup)i.selected&&s.push(i);return{selectedNodes:a,selectedEdges:s}},ec=t=>t.id;function L8(t,a){return We(t.selectedNodes.map(ec),a.selectedNodes.map(ec))&&We(t.selectedEdges.map(ec),a.selectedEdges.map(ec))}function U8({onSelectionChange:t}){const a=Ke(),{selectedNodes:s,selectedEdges:i}=ze(H8,L8);return _.useEffect(()=>{const c={nodes:s,edges:i};t?.(c),a.getState().onSelectionChangeHandlers.forEach(u=>u(c))},[s,i,t]),null}const $8=t=>!!t.onSelectionChangeHandlers;function q8({onSelectionChange:t}){const a=ze($8);return t||a?l.jsx(U8,{onSelectionChange:t}):null}const q1=[0,0],V8={x:0,y:0,zoom:1},Y8=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","autoPanOnNodeFocus","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","connectionDragThreshold","onBeforeDelete","debug","autoPanSpeed","ariaLabelConfig","zIndexMode"],ly=[...Y8,"rfId"],X8=t=>({setNodes:t.setNodes,setEdges:t.setEdges,setMinZoom:t.setMinZoom,setMaxZoom:t.setMaxZoom,setTranslateExtent:t.setTranslateExtent,setNodeExtent:t.setNodeExtent,reset:t.reset,setDefaultNodesAndEdges:t.setDefaultNodesAndEdges}),cy={translateExtent:eo,nodeOrigin:q1,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1"};function G8(t){const{setNodes:a,setEdges:s,setMinZoom:i,setMaxZoom:c,setTranslateExtent:u,setNodeExtent:f,reset:m,setDefaultNodesAndEdges:p}=ze(X8,We),g=Ke();_.useEffect(()=>(p(t.defaultNodes,t.defaultEdges),()=>{y.current=cy,m()}),[]);const y=_.useRef(cy);return _.useEffect(()=>{for(const x of ly){const b=t[x],S=y.current[x];b!==S&&(typeof t[x]>"u"||(x==="nodes"?a(b):x==="edges"?s(b):x==="minZoom"?i(b):x==="maxZoom"?c(b):x==="translateExtent"?u(b):x==="nodeExtent"?f(b):x==="ariaLabelConfig"?g.setState({ariaLabelConfig:MC(b)}):x==="fitView"?g.setState({fitViewQueued:b}):x==="fitViewOptions"?g.setState({fitViewOptions:b}):g.setState({[x]:b})))}y.current=t},ly.map(x=>t[x])),null}function uy(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function I8(t){const[a,s]=_.useState(t==="system"?null:t);return _.useEffect(()=>{if(t!=="system"){s(t);return}const i=uy(),c=()=>s(i?.matches?"dark":"light");return c(),i?.addEventListener("change",c),()=>{i?.removeEventListener("change",c)}},[t]),a!==null?a:uy()?.matches?"dark":"light"}const dy=typeof document<"u"?document:null;function so(t=null,a={target:dy,actInsideInputWithModifier:!0}){const[s,i]=_.useState(!1),c=_.useRef(!1),u=_.useRef(new Set([])),[f,m]=_.useMemo(()=>{if(t!==null){const g=(Array.isArray(t)?t:[t]).filter(x=>typeof x=="string").map(x=>x.replace("+",`
`).replace(`

`,`
+`).split(`
`)),y=g.reduce((x,b)=>x.concat(...b),[]);return[g,y]}return[[],[]]},[t]);return _.useEffect(()=>{const p=a?.target??dy,g=a?.actInsideInputWithModifier??!0;if(t!==null){const y=S=>{if(c.current=S.ctrlKey||S.metaKey||S.shiftKey||S.altKey,(!c.current||c.current&&!g)&&b1(S))return!1;const A=hy(S.code,m);if(u.current.add(S[A]),fy(f,u.current,!1)){const N=S.composedPath?.()?.[0]||S.target,E=N?.nodeName==="BUTTON"||N?.nodeName==="A";a.preventDefault!==!1&&(c.current||!E)&&S.preventDefault(),i(!0)}},x=S=>{const j=hy(S.code,m);fy(f,u.current,!0)?(i(!1),u.current.clear()):u.current.delete(S[j]),S.key==="Meta"&&u.current.clear(),c.current=!1},b=()=>{u.current.clear(),i(!1)};return p?.addEventListener("keydown",y),p?.addEventListener("keyup",x),window.addEventListener("blur",b),window.addEventListener("contextmenu",b),()=>{p?.removeEventListener("keydown",y),p?.removeEventListener("keyup",x),window.removeEventListener("blur",b),window.removeEventListener("contextmenu",b)}}},[t,i]),s}function fy(t,a,s){return t.filter(i=>s||i.length===a.size).some(i=>i.every(c=>a.has(c)))}function hy(t,a){return a.includes(t)?"code":"key"}const P8=()=>{const t=Ke();return _.useMemo(()=>({zoomIn:a=>{const{panZoom:s}=t.getState();return s?s.scaleBy(1.2,{duration:a?.duration}):Promise.resolve(!1)},zoomOut:a=>{const{panZoom:s}=t.getState();return s?s.scaleBy(1/1.2,{duration:a?.duration}):Promise.resolve(!1)},zoomTo:(a,s)=>{const{panZoom:i}=t.getState();return i?i.scaleTo(a,{duration:s?.duration}):Promise.resolve(!1)},getZoom:()=>t.getState().transform[2],setViewport:async(a,s)=>{const{transform:[i,c,u],panZoom:f}=t.getState();return f?(await f.setViewport({x:a.x??i,y:a.y??c,zoom:a.zoom??u},s),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[a,s,i]=t.getState().transform;return{x:a,y:s,zoom:i}},setCenter:async(a,s,i)=>t.getState().setCenter(a,s,i),fitBounds:async(a,s)=>{const{width:i,height:c,minZoom:u,maxZoom:f,panZoom:m}=t.getState(),p=Zh(a,i,c,u,f,s?.padding??.1);return m?(await m.setViewport(p,{duration:s?.duration,ease:s?.ease,interpolate:s?.interpolate}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(a,s={})=>{const{transform:i,snapGrid:c,snapToGrid:u,domNode:f}=t.getState();if(!f)return a;const{x:m,y:p}=f.getBoundingClientRect(),g={x:a.x-m,y:a.y-p},y=s.snapGrid??c,x=s.snapToGrid??u;return go(g,i,x,y)},flowToScreenPosition:a=>{const{transform:s,domNode:i}=t.getState();if(!i)return a;const{x:c,y:u}=i.getBoundingClientRect(),f=Dc(a,s);return{x:f.x+c,y:f.y+u}}}),[])};function V1(t,a){const s=[],i=new Map,c=[];for(const u of t)if(u.type==="add"){c.push(u);continue}else if(u.type==="remove"||u.type==="replace")i.set(u.id,[u]);else{const f=i.get(u.id);f?f.push(u):i.set(u.id,[u])}for(const u of a){const f=i.get(u.id);if(!f){s.push(u);continue}if(f[0].type==="remove")continue;if(f[0].type==="replace"){s.push({...f[0].item});continue}const m={...u};for(const p of f)Z8(p,m);s.push(m)}return c.length&&c.forEach(u=>{u.index!==void 0?s.splice(u.index,0,{...u.item}):s.push({...u.item})}),s}function Z8(t,a){switch(t.type){case"select":{a.selected=t.selected;break}case"position":{typeof t.position<"u"&&(a.position=t.position),typeof t.dragging<"u"&&(a.dragging=t.dragging);break}case"dimensions":{typeof t.dimensions<"u"&&(a.measured={...t.dimensions},t.setAttributes&&((t.setAttributes===!0||t.setAttributes==="width")&&(a.width=t.dimensions.width),(t.setAttributes===!0||t.setAttributes==="height")&&(a.height=t.dimensions.height))),typeof t.resizing=="boolean"&&(a.resizing=t.resizing);break}}}function Y1(t,a){return V1(t,a)}function X1(t,a){return V1(t,a)}function ys(t,a){return{id:t,type:"select",selected:a}}function wr(t,a=new Set,s=!1){const i=[];for(const[c,u]of t){const f=a.has(c);!(u.selected===void 0&&!f)&&u.selected!==f&&(s&&(u.selected=f),i.push(ys(u.id,f)))}return i}function my({items:t=[],lookup:a}){const s=[],i=new Map(t.map(c=>[c.id,c]));for(const[c,u]of t.entries()){const f=a.get(u.id),m=f?.internals?.userNode??f;m!==void 0&&m!==u&&s.push({id:u.id,item:u,type:"replace"}),m===void 0&&s.push({item:u,type:"add",index:c})}for(const[c]of a)i.get(c)===void 0&&s.push({id:c,type:"remove"});return s}function py(t){return{id:t.id,type:"remove"}}const gy=t=>bC(t),Q8=t=>d1(t);function G1(t){return _.forwardRef(t)}const F8=typeof window<"u"?_.useLayoutEffect:_.useEffect;function xy(t){const[a,s]=_.useState(BigInt(0)),[i]=_.useState(()=>W8(()=>s(c=>c+BigInt(1))));return F8(()=>{const c=i.get();c.length&&(t(c),i.reset())},[a]),i}function W8(t){let a=[];return{get:()=>a,reset:()=>{a=[]},push:s=>{a.push(s),t()}}}const I1=_.createContext(null);function K8({children:t}){const a=Ke(),s=_.useCallback(m=>{const{nodes:p=[],setNodes:g,hasDefaultNodes:y,onNodesChange:x,nodeLookup:b,fitViewQueued:S,onNodesChangeMiddlewareMap:j}=a.getState();let A=p;for(const E of m)A=typeof E=="function"?E(A):E;let N=my({items:A,lookup:b});for(const E of j.values())N=E(N);y&&g(A),N.length>0?x?.(N):S&&window.requestAnimationFrame(()=>{const{fitViewQueued:E,nodes:D,setNodes:C}=a.getState();E&&C(D)})},[]),i=xy(s),c=_.useCallback(m=>{const{edges:p=[],setEdges:g,hasDefaultEdges:y,onEdgesChange:x,edgeLookup:b}=a.getState();let S=p;for(const j of m)S=typeof j=="function"?j(S):j;y?g(S):x&&x(my({items:S,lookup:b}))},[]),u=xy(c),f=_.useMemo(()=>({nodeQueue:i,edgeQueue:u}),[]);return l.jsx(I1.Provider,{value:f,children:t})}function J8(){const t=_.useContext(I1);if(!t)throw new Error("useBatchContext must be used within a BatchProvider");return t}const eT=t=>!!t.panZoom;function tm(){const t=P8(),a=Ke(),s=J8(),i=ze(eT),c=_.useMemo(()=>{const u=x=>a.getState().nodeLookup.get(x),f=x=>{s.nodeQueue.push(x)},m=x=>{s.edgeQueue.push(x)},p=x=>{const{nodeLookup:b,nodeOrigin:S}=a.getState(),j=gy(x)?x:b.get(x.id),A=j.parentId?x1(j.position,j.measured,j.parentId,b,S):j.position,N={...j,position:A,width:j.measured?.width??j.width,height:j.measured?.height??j.height};return zr(N)},g=(x,b,S={replace:!1})=>{f(j=>j.map(A=>{if(A.id===x){const N=typeof b=="function"?b(A):b;return S.replace&&gy(N)?N:{...A,...N}}return A}))},y=(x,b,S={replace:!1})=>{m(j=>j.map(A=>{if(A.id===x){const N=typeof b=="function"?b(A):b;return S.replace&&Q8(N)?N:{...A,...N}}return A}))};return{getNodes:()=>a.getState().nodes.map(x=>({...x})),getNode:x=>u(x)?.internals.userNode,getInternalNode:u,getEdges:()=>{const{edges:x=[]}=a.getState();return x.map(b=>({...b}))},getEdge:x=>a.getState().edgeLookup.get(x),setNodes:f,setEdges:m,addNodes:x=>{const b=Array.isArray(x)?x:[x];s.nodeQueue.push(S=>[...S,...b])},addEdges:x=>{const b=Array.isArray(x)?x:[x];s.edgeQueue.push(S=>[...S,...b])},toObject:()=>{const{nodes:x=[],edges:b=[],transform:S}=a.getState(),[j,A,N]=S;return{nodes:x.map(E=>({...E})),edges:b.map(E=>({...E})),viewport:{x:j,y:A,zoom:N}}},deleteElements:async({nodes:x=[],edges:b=[]})=>{const{nodes:S,edges:j,onNodesDelete:A,onEdgesDelete:N,triggerNodeChanges:E,triggerEdgeChanges:D,onDelete:C,onBeforeDelete:k}=a.getState(),{nodes:w,edges:z}=await jC({nodesToRemove:x,edgesToRemove:b,nodes:S,edges:j,onBeforeDelete:k}),M=z.length>0,Y=w.length>0;if(M){const U=z.map(py);N?.(z),D(U)}if(Y){const U=w.map(py);A?.(w),E(U)}return(Y||M)&&C?.({nodes:w,edges:z}),{deletedNodes:w,deletedEdges:z}},getIntersectingNodes:(x,b=!0,S)=>{const j=Vx(x),A=j?x:p(x),N=S!==void 0;return A?(S||a.getState().nodes).filter(E=>{const D=a.getState().nodeLookup.get(E.id);if(D&&!j&&(E.id===x.id||!D.internals.positionAbsolute))return!1;const C=zr(N?E:D),k=no(C,A);return b&&k>0||k>=C.width*C.height||k>=A.width*A.height}):[]},isNodeIntersecting:(x,b,S=!0)=>{const A=Vx(x)?x:p(x);if(!A)return!1;const N=no(A,b);return S&&N>0||N>=b.width*b.height||N>=A.width*A.height},updateNode:g,updateNodeData:(x,b,S={replace:!1})=>{g(x,j=>{const A=typeof b=="function"?b(j):b;return S.replace?{...j,data:A}:{...j,data:{...j.data,...A}}},S)},updateEdge:y,updateEdgeData:(x,b,S={replace:!1})=>{y(x,j=>{const A=typeof b=="function"?b(j):b;return S.replace?{...j,data:A}:{...j,data:{...j.data,...A}}},S)},getNodesBounds:x=>{const{nodeLookup:b,nodeOrigin:S}=a.getState();return vC(x,{nodeLookup:b,nodeOrigin:S})},getHandleConnections:({type:x,id:b,nodeId:S})=>Array.from(a.getState().connectionLookup.get(`${S}-${x}${b?`-${b}`:""}`)?.values()??[]),getNodeConnections:({type:x,handleId:b,nodeId:S})=>Array.from(a.getState().connectionLookup.get(`${S}${x?b?`-${x}-${b}`:`-${x}`:""}`)?.values()??[]),fitView:async x=>{const b=a.getState().fitViewResolver??TC();return a.setState({fitViewQueued:!0,fitViewOptions:x,fitViewResolver:b}),s.nodeQueue.push(S=>[...S]),b.promise}}},[]);return _.useMemo(()=>({...c,...t,viewportInitialized:i}),[i])}const yy=t=>t.selected,tT=typeof window<"u"?window:void 0;function nT({deleteKeyCode:t,multiSelectionKeyCode:a}){const s=Ke(),{deleteElements:i}=tm(),c=so(t,{actInsideInputWithModifier:!1}),u=so(a,{target:tT});_.useEffect(()=>{if(c){const{edges:f,nodes:m}=s.getState();i({nodes:m.filter(yy),edges:f.filter(yy)}),s.setState({nodesSelectionActive:!1})}},[c]),_.useEffect(()=>{s.setState({multiSelectionActive:u})},[u])}function aT(t){const a=Ke();_.useEffect(()=>{const s=()=>{if(!t.current||!(t.current.checkVisibility?.()??!0))return!1;const i=Qh(t.current);(i.height===0||i.width===0)&&a.getState().onError?.("004",Rn.error004()),a.setState({width:i.width||500,height:i.height||500})};if(t.current){s(),window.addEventListener("resize",s);const i=new ResizeObserver(()=>s());return i.observe(t.current),()=>{window.removeEventListener("resize",s),i&&t.current&&i.unobserve(t.current)}}},[])}const eu={position:"absolute",width:"100%",height:"100%",top:0,left:0},sT=t=>({userSelectionActive:t.userSelectionActive,lib:t.lib,connectionInProgress:t.connection.inProgress});function rT({onPaneContextMenu:t,zoomOnScroll:a=!0,zoomOnPinch:s=!0,panOnScroll:i=!1,panOnScrollSpeed:c=.5,panOnScrollMode:u=Ns.Free,zoomOnDoubleClick:f=!0,panOnDrag:m=!0,defaultViewport:p,translateExtent:g,minZoom:y,maxZoom:x,zoomActivationKeyCode:b,preventScrolling:S=!0,children:j,noWheelClassName:A,noPanClassName:N,onViewportChange:E,isControlledViewport:D,paneClickDistance:C,selectionOnDrag:k}){const w=Ke(),z=_.useRef(null),{userSelectionActive:M,lib:Y,connectionInProgress:U}=ze(sT,We),ne=so(b),Q=_.useRef();aT(z);const I=_.useCallback(ae=>{E?.({x:ae[0],y:ae[1],zoom:ae[2]}),D||w.setState({transform:ae})},[E,D]);return _.useEffect(()=>{if(z.current){Q.current=u8({domNode:z.current,minZoom:y,maxZoom:x,translateExtent:g,viewport:p,onDraggingChange:O=>w.setState({paneDragging:O}),onPanZoomStart:(O,B)=>{const{onViewportChangeStart:V,onMoveStart:L}=w.getState();L?.(O,B),V?.(B)},onPanZoom:(O,B)=>{const{onViewportChange:V,onMove:L}=w.getState();L?.(O,B),V?.(B)},onPanZoomEnd:(O,B)=>{const{onViewportChangeEnd:V,onMoveEnd:L}=w.getState();L?.(O,B),V?.(B)}});const{x:ae,y:$,zoom:F}=Q.current.getViewport();return w.setState({panZoom:Q.current,transform:[ae,$,F],domNode:z.current.closest(".react-flow")}),()=>{Q.current?.destroy()}}},[]),_.useEffect(()=>{Q.current?.update({onPaneContextMenu:t,zoomOnScroll:a,zoomOnPinch:s,panOnScroll:i,panOnScrollSpeed:c,panOnScrollMode:u,zoomOnDoubleClick:f,panOnDrag:m,zoomActivationKeyPressed:ne,preventScrolling:S,noPanClassName:N,userSelectionActive:M,noWheelClassName:A,lib:Y,onTransformChange:I,connectionInProgress:U,selectionOnDrag:k,paneClickDistance:C})},[t,a,s,i,c,u,f,m,ne,S,N,M,A,Y,I,U,k,C]),l.jsx("div",{className:"react-flow__renderer",ref:z,style:eu,children:j})}const iT=t=>({userSelectionActive:t.userSelectionActive,userSelectionRect:t.userSelectionRect});function oT(){const{userSelectionActive:t,userSelectionRect:a}=ze(iT,We);return t&&a?l.jsx("div",{className:"react-flow__selection react-flow__container",style:{width:a.width,height:a.height,transform:`translate(${a.x}px, ${a.y}px)`}}):null}const Gf=(t,a)=>s=>{s.target===a.current&&t?.(s)},lT=t=>({userSelectionActive:t.userSelectionActive,elementsSelectable:t.elementsSelectable,connectionInProgress:t.connection.inProgress,dragging:t.paneDragging});function cT({isSelecting:t,selectionKeyPressed:a,selectionMode:s=to.Full,panOnDrag:i,paneClickDistance:c,selectionOnDrag:u,onSelectionStart:f,onSelectionEnd:m,onPaneClick:p,onPaneContextMenu:g,onPaneScroll:y,onPaneMouseEnter:x,onPaneMouseMove:b,onPaneMouseLeave:S,children:j}){const A=Ke(),{userSelectionActive:N,elementsSelectable:E,dragging:D,connectionInProgress:C}=ze(lT,We),k=E&&(t||N),w=_.useRef(null),z=_.useRef(),M=_.useRef(new Set),Y=_.useRef(new Set),U=_.useRef(!1),ne=V=>{if(U.current||C){U.current=!1;return}p?.(V),A.getState().resetSelectedElements(),A.setState({nodesSelectionActive:!1})},Q=V=>{if(Array.isArray(i)&&i?.includes(2)){V.preventDefault();return}g?.(V)},I=y?V=>y(V):void 0,ae=V=>{U.current&&(V.stopPropagation(),U.current=!1)},$=V=>{const{domNode:L}=A.getState();if(z.current=L?.getBoundingClientRect(),!z.current)return;const Z=V.target===w.current;if(!Z&&!!V.target.closest(".nokey")||!t||!(u&&Z||a)||V.button!==0||!V.isPrimary)return;V.target?.setPointerCapture?.(V.pointerId),U.current=!1;const{x:ee,y:H}=xn(V.nativeEvent,z.current);A.setState({userSelectionRect:{width:0,height:0,startX:ee,startY:H,x:ee,y:H}}),Z||(V.stopPropagation(),V.preventDefault())},F=V=>{const{userSelectionRect:L,transform:Z,nodeLookup:R,edgeLookup:X,connectionLookup:ee,triggerNodeChanges:H,triggerEdgeChanges:oe,defaultEdgeOptions:ue,resetSelectedElements:ce}=A.getState();if(!z.current||!L)return;const{x:le,y:de}=xn(V.nativeEvent,z.current),{startX:we,startY:be}=L;if(!U.current){const _e=a?0:c;if(Math.hypot(le-we,de-be)<=_e)return;ce(),f?.(V)}U.current=!0;const pe={startX:we,startY:be,x:le<we?le:we,y:de<be?de:be,width:Math.abs(le-we),height:Math.abs(de-be)},ge=M.current,me=Y.current;M.current=new Set(Ph(R,pe,Z,s===to.Partial,!0).map(_e=>_e.id)),Y.current=new Set;const Te=ue?.selectable??!0;for(const _e of M.current){const Ze=ee.get(_e);if(Ze)for(const{edgeId:pt}of Ze.values()){const ut=X.get(pt);ut&&(ut.selectable??Te)&&Y.current.add(pt)}}if(!Yx(ge,M.current)){const _e=wr(R,M.current,!0);H(_e)}if(!Yx(me,Y.current)){const _e=wr(X,Y.current);oe(_e)}A.setState({userSelectionRect:pe,userSelectionActive:!0,nodesSelectionActive:!1})},O=V=>{V.button===0&&(V.target?.releasePointerCapture?.(V.pointerId),!N&&V.target===w.current&&A.getState().userSelectionRect&&ne?.(V),A.setState({userSelectionActive:!1,userSelectionRect:null}),U.current&&(m?.(V),A.setState({nodesSelectionActive:M.current.size>0})))},B=i===!0||Array.isArray(i)&&i.includes(0);return l.jsxs("div",{className:ct(["react-flow__pane",{draggable:B,dragging:D,selection:t}]),onClick:k?void 0:Gf(ne,w),onContextMenu:Gf(Q,w),onWheel:Gf(I,w),onPointerEnter:k?void 0:x,onPointerMove:k?F:b,onPointerUp:k?O:void 0,onPointerDownCapture:k?$:void 0,onClickCapture:k?ae:void 0,onPointerLeave:S,ref:w,style:eu,children:[j,l.jsx(oT,{})]})}function bh({id:t,store:a,unselect:s=!1,nodeRef:i}){const{addSelectedNodes:c,unselectNodesAndEdges:u,multiSelectionActive:f,nodeLookup:m,onError:p}=a.getState(),g=m.get(t);if(!g){p?.("012",Rn.error012(t));return}a.setState({nodesSelectionActive:!1}),g.selected?(s||g.selected&&f)&&(u({nodes:[g],edges:[]}),requestAnimationFrame(()=>i?.current?.blur())):c([t])}function P1({nodeRef:t,disabled:a=!1,noDragClassName:s,handleSelector:i,nodeId:c,isSelectable:u,nodeClickDistance:f}){const m=Ke(),[p,g]=_.useState(!1),y=_.useRef();return _.useEffect(()=>{y.current=FC({getStoreItems:()=>m.getState(),onNodeMouseDown:x=>{bh({id:x,store:m,nodeRef:t})},onDragStart:()=>{g(!0)},onDragStop:()=>{g(!1)}})},[]),_.useEffect(()=>{if(a)y.current?.destroy();else if(t.current)return y.current?.update({noDragClassName:s,handleSelector:i,domNode:t.current,isSelectable:u,nodeId:c,nodeClickDistance:f}),()=>{y.current?.destroy()}},[s,i,a,u,t,c]),p}const uT=t=>a=>a.selected&&(a.draggable||t&&typeof a.draggable>"u");function Z1(){const t=Ke();return _.useCallback(s=>{const{nodeExtent:i,snapToGrid:c,snapGrid:u,nodesDraggable:f,onError:m,updateNodePositions:p,nodeLookup:g,nodeOrigin:y}=t.getState(),x=new Map,b=uT(f),S=c?u[0]:5,j=c?u[1]:5,A=s.direction.x*S*s.factor,N=s.direction.y*j*s.factor;for(const[,E]of g){if(!b(E))continue;let D={x:E.internals.positionAbsolute.x+A,y:E.internals.positionAbsolute.y+N};c&&(D=po(D,u));const{position:C,positionAbsolute:k}=f1({nodeId:E.id,nextPosition:D,nodeLookup:g,nodeExtent:i,nodeOrigin:y,onError:m});E.position=C,E.internals.positionAbsolute=k,x.set(E.id,E)}p(x)},[])}const nm=_.createContext(null),dT=nm.Provider;nm.Consumer;const Q1=()=>_.useContext(nm),fT=t=>({connectOnClick:t.connectOnClick,noPanClassName:t.noPanClassName,rfId:t.rfId}),hT=(t,a,s)=>i=>{const{connectionClickStartHandle:c,connectionMode:u,connection:f}=i,{fromHandle:m,toHandle:p,isValid:g}=f,y=p?.nodeId===t&&p?.id===a&&p?.type===s;return{connectingFrom:m?.nodeId===t&&m?.id===a&&m?.type===s,connectingTo:y,clickConnecting:c?.nodeId===t&&c?.id===a&&c?.type===s,isPossibleEndHandle:u===Rr.Strict?m?.type!==s:t!==m?.nodeId||a!==m?.id,connectionInProcess:!!m,clickConnectionInProcess:!!c,valid:y&&g}};function mT({type:t="source",position:a=xe.Top,isValidConnection:s,isConnectable:i=!0,isConnectableStart:c=!0,isConnectableEnd:u=!0,id:f,onConnect:m,children:p,className:g,onMouseDown:y,onTouchStart:x,...b},S){const j=f||null,A=t==="target",N=Ke(),E=Q1(),{connectOnClick:D,noPanClassName:C,rfId:k}=ze(fT,We),{connectingFrom:w,connectingTo:z,clickConnecting:M,isPossibleEndHandle:Y,connectionInProcess:U,clickConnectionInProcess:ne,valid:Q}=ze(hT(E,j,t),We);E||N.getState().onError?.("010",Rn.error010());const I=F=>{const{defaultEdgeOptions:O,onConnect:B,hasDefaultEdges:V}=N.getState(),L={...O,...F};if(V){const{edges:Z,setEdges:R}=N.getState();R(j1(L,Z))}B?.(L),m?.(L)},ae=F=>{if(!E)return;const O=v1(F.nativeEvent);if(c&&(O&&F.button===0||!O)){const B=N.getState();yh.onPointerDown(F.nativeEvent,{handleDomNode:F.currentTarget,autoPanOnConnect:B.autoPanOnConnect,connectionMode:B.connectionMode,connectionRadius:B.connectionRadius,domNode:B.domNode,nodeLookup:B.nodeLookup,lib:B.lib,isTarget:A,handleId:j,nodeId:E,flowId:B.rfId,panBy:B.panBy,cancelConnection:B.cancelConnection,onConnectStart:B.onConnectStart,onConnectEnd:B.onConnectEnd,updateConnection:B.updateConnection,onConnect:I,isValidConnection:s||B.isValidConnection,getTransform:()=>N.getState().transform,getFromHandle:()=>N.getState().connection.fromHandle,autoPanSpeed:B.autoPanSpeed,dragThreshold:B.connectionDragThreshold})}O?y?.(F):x?.(F)},$=F=>{const{onClickConnectStart:O,onClickConnectEnd:B,connectionClickStartHandle:V,connectionMode:L,isValidConnection:Z,lib:R,rfId:X,nodeLookup:ee,connection:H}=N.getState();if(!E||!V&&!c)return;if(!V){O?.(F.nativeEvent,{nodeId:E,handleId:j,handleType:t}),N.setState({connectionClickStartHandle:{nodeId:E,type:t,id:j}});return}const oe=y1(F.target),ue=s||Z,{connection:ce,isValid:le}=yh.isValid(F.nativeEvent,{handle:{nodeId:E,id:j,type:t},connectionMode:L,fromNodeId:V.nodeId,fromHandleId:V.id||null,fromType:V.type,isValidConnection:ue,flowId:X,doc:oe,lib:R,nodeLookup:ee});le&&ce&&I(ce);const de=structuredClone(H);delete de.inProgress,de.toPosition=de.toHandle?de.toHandle.position:null,B?.(F,de),N.setState({connectionClickStartHandle:null})};return l.jsx("div",{"data-handleid":j,"data-nodeid":E,"data-handlepos":a,"data-id":`${k}-${E}-${j}-${t}`,className:ct(["react-flow__handle",`react-flow__handle-${a}`,"nodrag",C,g,{source:!A,target:A,connectable:i,connectablestart:c,connectableend:u,clickconnecting:M,connectingfrom:w,connectingto:z,valid:Q,connectionindicator:i&&(!U||Y)&&(U||ne?u:c)}]),onMouseDown:ae,onTouchStart:ae,onClick:D?$:void 0,ref:S,...b,children:p})}const Hr=_.memo(G1(mT));function pT({data:t,isConnectable:a,sourcePosition:s=xe.Bottom}){return l.jsxs(l.Fragment,{children:[t?.label,l.jsx(Hr,{type:"source",position:s,isConnectable:a})]})}function gT({data:t,isConnectable:a,targetPosition:s=xe.Top,sourcePosition:i=xe.Bottom}){return l.jsxs(l.Fragment,{children:[l.jsx(Hr,{type:"target",position:s,isConnectable:a}),t?.label,l.jsx(Hr,{type:"source",position:i,isConnectable:a})]})}function xT(){return null}function yT({data:t,isConnectable:a,targetPosition:s=xe.Top}){return l.jsxs(l.Fragment,{children:[l.jsx(Hr,{type:"target",position:s,isConnectable:a}),t?.label]})}const zc={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},by={input:pT,default:gT,output:yT,group:xT};function bT(t){return t.internals.handleBounds===void 0?{width:t.width??t.initialWidth??t.style?.width,height:t.height??t.initialHeight??t.style?.height}:{width:t.width??t.style?.width,height:t.height??t.style?.height}}const vT=t=>{const{width:a,height:s,x:i,y:c}=mo(t.nodeLookup,{filter:u=>!!u.selected});return{width:gn(a)?a:null,height:gn(s)?s:null,userSelectionActive:t.userSelectionActive,transformString:`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]}) translate(${i}px,${c}px)`}};function wT({onSelectionContextMenu:t,noPanClassName:a,disableKeyboardA11y:s}){const i=Ke(),{width:c,height:u,transformString:f,userSelectionActive:m}=ze(vT,We),p=Z1(),g=_.useRef(null);if(_.useEffect(()=>{s||g.current?.focus({preventScroll:!0})},[s]),P1({nodeRef:g}),m||!c||!u)return null;const y=t?b=>{const S=i.getState().nodes.filter(j=>j.selected);t(b,S)}:void 0,x=b=>{Object.prototype.hasOwnProperty.call(zc,b.key)&&(b.preventDefault(),p({direction:zc[b.key],factor:b.shiftKey?4:1}))};return l.jsx("div",{className:ct(["react-flow__nodesselection","react-flow__container",a]),style:{transform:f},children:l.jsx("div",{ref:g,className:"react-flow__nodesselection-rect",onContextMenu:y,tabIndex:s?void 0:-1,onKeyDown:s?void 0:x,style:{width:c,height:u}})})}const vy=typeof window<"u"?window:void 0,ST=t=>({nodesSelectionActive:t.nodesSelectionActive,userSelectionActive:t.userSelectionActive});function F1({children:t,onPaneClick:a,onPaneMouseEnter:s,onPaneMouseMove:i,onPaneMouseLeave:c,onPaneContextMenu:u,onPaneScroll:f,paneClickDistance:m,deleteKeyCode:p,selectionKeyCode:g,selectionOnDrag:y,selectionMode:x,onSelectionStart:b,onSelectionEnd:S,multiSelectionKeyCode:j,panActivationKeyCode:A,zoomActivationKeyCode:N,elementsSelectable:E,zoomOnScroll:D,zoomOnPinch:C,panOnScroll:k,panOnScrollSpeed:w,panOnScrollMode:z,zoomOnDoubleClick:M,panOnDrag:Y,defaultViewport:U,translateExtent:ne,minZoom:Q,maxZoom:I,preventScrolling:ae,onSelectionContextMenu:$,noWheelClassName:F,noPanClassName:O,disableKeyboardA11y:B,onViewportChange:V,isControlledViewport:L}){const{nodesSelectionActive:Z,userSelectionActive:R}=ze(ST,We),X=so(g,{target:vy}),ee=so(A,{target:vy}),H=ee||Y,oe=ee||k,ue=y&&H!==!0,ce=X||R||ue;return nT({deleteKeyCode:p,multiSelectionKeyCode:j}),l.jsx(rT,{onPaneContextMenu:u,elementsSelectable:E,zoomOnScroll:D,zoomOnPinch:C,panOnScroll:oe,panOnScrollSpeed:w,panOnScrollMode:z,zoomOnDoubleClick:M,panOnDrag:!X&&H,defaultViewport:U,translateExtent:ne,minZoom:Q,maxZoom:I,zoomActivationKeyCode:N,preventScrolling:ae,noWheelClassName:F,noPanClassName:O,onViewportChange:V,isControlledViewport:L,paneClickDistance:m,selectionOnDrag:ue,children:l.jsxs(cT,{onSelectionStart:b,onSelectionEnd:S,onPaneClick:a,onPaneMouseEnter:s,onPaneMouseMove:i,onPaneMouseLeave:c,onPaneContextMenu:u,onPaneScroll:f,panOnDrag:H,isSelecting:!!ce,selectionMode:x,selectionKeyPressed:X,paneClickDistance:m,selectionOnDrag:ue,children:[t,Z&&l.jsx(wT,{onSelectionContextMenu:$,noPanClassName:O,disableKeyboardA11y:B})]})})}F1.displayName="FlowRenderer";const NT=_.memo(F1),jT=t=>a=>t?Ph(a.nodeLookup,{x:0,y:0,width:a.width,height:a.height},a.transform,!0).map(s=>s.id):Array.from(a.nodeLookup.keys());function ET(t){return ze(_.useCallback(jT(t),[t]),We)}const _T=t=>t.updateNodeInternals;function CT(){const t=ze(_T),[a]=_.useState(()=>typeof ResizeObserver>"u"?null:new ResizeObserver(s=>{const i=new Map;s.forEach(c=>{const u=c.target.getAttribute("data-id");i.set(u,{id:u,nodeElement:c.target,force:!0})}),t(i)}));return _.useEffect(()=>()=>{a?.disconnect()},[a]),a}function TT({node:t,nodeType:a,hasDimensions:s,resizeObserver:i}){const c=Ke(),u=_.useRef(null),f=_.useRef(null),m=_.useRef(t.sourcePosition),p=_.useRef(t.targetPosition),g=_.useRef(a),y=s&&!!t.internals.handleBounds;return _.useEffect(()=>{u.current&&!t.hidden&&(!y||f.current!==u.current)&&(f.current&&i?.unobserve(f.current),i?.observe(u.current),f.current=u.current)},[y,t.hidden]),_.useEffect(()=>()=>{f.current&&(i?.unobserve(f.current),f.current=null)},[]),_.useEffect(()=>{if(u.current){const x=g.current!==a,b=m.current!==t.sourcePosition,S=p.current!==t.targetPosition;(x||b||S)&&(g.current=a,m.current=t.sourcePosition,p.current=t.targetPosition,c.getState().updateNodeInternals(new Map([[t.id,{id:t.id,nodeElement:u.current,force:!0}]])))}},[t.id,a,t.sourcePosition,t.targetPosition]),u}function MT({id:t,onClick:a,onMouseEnter:s,onMouseMove:i,onMouseLeave:c,onContextMenu:u,onDoubleClick:f,nodesDraggable:m,elementsSelectable:p,nodesConnectable:g,nodesFocusable:y,resizeObserver:x,noDragClassName:b,noPanClassName:S,disableKeyboardA11y:j,rfId:A,nodeTypes:N,nodeClickDistance:E,onError:D}){const{node:C,internals:k,isParent:w}=ze(le=>{const de=le.nodeLookup.get(t),we=le.parentLookup.has(t);return{node:de,internals:de.internals,isParent:we}},We);let z=C.type||"default",M=N?.[z]||by[z];M===void 0&&(D?.("003",Rn.error003(z)),z="default",M=N?.default||by.default);const Y=!!(C.draggable||m&&typeof C.draggable>"u"),U=!!(C.selectable||p&&typeof C.selectable>"u"),ne=!!(C.connectable||g&&typeof C.connectable>"u"),Q=!!(C.focusable||y&&typeof C.focusable>"u"),I=Ke(),ae=g1(C),$=TT({node:C,nodeType:z,hasDimensions:ae,resizeObserver:x}),F=P1({nodeRef:$,disabled:C.hidden||!Y,noDragClassName:b,handleSelector:C.dragHandle,nodeId:t,isSelectable:U,nodeClickDistance:E}),O=Z1();if(C.hidden)return null;const B=da(C),V=bT(C),L=U||Y||a||s||i||c,Z=s?le=>s(le,{...k.userNode}):void 0,R=i?le=>i(le,{...k.userNode}):void 0,X=c?le=>c(le,{...k.userNode}):void 0,ee=u?le=>u(le,{...k.userNode}):void 0,H=f?le=>f(le,{...k.userNode}):void 0,oe=le=>{const{selectNodesOnDrag:de,nodeDragThreshold:we}=I.getState();U&&(!de||!Y||we>0)&&bh({id:t,store:I,nodeRef:$}),a&&a(le,{...k.userNode})},ue=le=>{if(!(b1(le.nativeEvent)||j)){if(o1.includes(le.key)&&U){const de=le.key==="Escape";bh({id:t,store:I,unselect:de,nodeRef:$})}else if(Y&&C.selected&&Object.prototype.hasOwnProperty.call(zc,le.key)){le.preventDefault();const{ariaLabelConfig:de}=I.getState();I.setState({ariaLiveMessage:de["node.a11yDescription.ariaLiveMessage"]({direction:le.key.replace("Arrow","").toLowerCase(),x:~~k.positionAbsolute.x,y:~~k.positionAbsolute.y})}),O({direction:zc[le.key],factor:le.shiftKey?4:1})}}},ce=()=>{if(j||!$.current?.matches(":focus-visible"))return;const{transform:le,width:de,height:we,autoPanOnNodeFocus:be,setCenter:pe}=I.getState();if(!be)return;Ph(new Map([[t,C]]),{x:0,y:0,width:de,height:we},le,!0).length>0||pe(C.position.x+B.width/2,C.position.y+B.height/2,{zoom:le[2]})};return l.jsx("div",{className:ct(["react-flow__node",`react-flow__node-${z}`,{[S]:Y},C.className,{selected:C.selected,selectable:U,parent:w,draggable:Y,dragging:F}]),ref:$,style:{zIndex:k.z,transform:`translate(${k.positionAbsolute.x}px,${k.positionAbsolute.y}px)`,pointerEvents:L?"all":"none",visibility:ae?"visible":"hidden",...C.style,...V},"data-id":t,"data-testid":`rf__node-${t}`,onMouseEnter:Z,onMouseMove:R,onMouseLeave:X,onContextMenu:ee,onClick:oe,onDoubleClick:H,onKeyDown:Q?ue:void 0,tabIndex:Q?0:void 0,onFocus:Q?ce:void 0,role:C.ariaRole??(Q?"group":void 0),"aria-roledescription":"node","aria-describedby":j?void 0:`${U1}-${A}`,"aria-label":C.ariaLabel,...C.domAttributes,children:l.jsx(dT,{value:t,children:l.jsx(M,{id:t,data:C.data,type:z,positionAbsoluteX:k.positionAbsolute.x,positionAbsoluteY:k.positionAbsolute.y,selected:C.selected??!1,selectable:U,draggable:Y,deletable:C.deletable??!0,isConnectable:ne,sourcePosition:C.sourcePosition,targetPosition:C.targetPosition,dragging:F,dragHandle:C.dragHandle,zIndex:k.z,parentId:C.parentId,...B})})})}var AT=_.memo(MT);const kT=t=>({nodesDraggable:t.nodesDraggable,nodesConnectable:t.nodesConnectable,nodesFocusable:t.nodesFocusable,elementsSelectable:t.elementsSelectable,onError:t.onError});function W1(t){const{nodesDraggable:a,nodesConnectable:s,nodesFocusable:i,elementsSelectable:c,onError:u}=ze(kT,We),f=ET(t.onlyRenderVisibleElements),m=CT();return l.jsx("div",{className:"react-flow__nodes",style:eu,children:f.map(p=>l.jsx(AT,{id:p,nodeTypes:t.nodeTypes,nodeExtent:t.nodeExtent,onClick:t.onNodeClick,onMouseEnter:t.onNodeMouseEnter,onMouseMove:t.onNodeMouseMove,onMouseLeave:t.onNodeMouseLeave,onContextMenu:t.onNodeContextMenu,onDoubleClick:t.onNodeDoubleClick,noDragClassName:t.noDragClassName,noPanClassName:t.noPanClassName,rfId:t.rfId,disableKeyboardA11y:t.disableKeyboardA11y,resizeObserver:m,nodesDraggable:a,nodesConnectable:s,nodesFocusable:i,elementsSelectable:c,nodeClickDistance:t.nodeClickDistance,onError:u},p))})}W1.displayName="NodeRenderer";const RT=_.memo(W1);function DT(t){return ze(_.useCallback(s=>{if(!t)return s.edges.map(c=>c.id);const i=[];if(s.width&&s.height)for(const c of s.edges){const u=s.nodeLookup.get(c.source),f=s.nodeLookup.get(c.target);u&&f&&RC({sourceNode:u,targetNode:f,width:s.width,height:s.height,transform:s.transform})&&i.push(c.id)}return i},[t]),We)}const zT=({color:t="none",strokeWidth:a=1})=>{const s={strokeWidth:a,...t&&{stroke:t}};return l.jsx("polyline",{className:"arrow",style:s,strokeLinecap:"round",fill:"none",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4"})},OT=({color:t="none",strokeWidth:a=1})=>{const s={strokeWidth:a,...t&&{stroke:t,fill:t}};return l.jsx("polyline",{className:"arrowclosed",style:s,strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"})},wy={[kc.Arrow]:zT,[kc.ArrowClosed]:OT};function BT(t){const a=Ke();return _.useMemo(()=>Object.prototype.hasOwnProperty.call(wy,t)?wy[t]:(a.getState().onError?.("009",Rn.error009(t)),null),[t])}const HT=({id:t,type:a,color:s,width:i=12.5,height:c=12.5,markerUnits:u="strokeWidth",strokeWidth:f,orient:m="auto-start-reverse"})=>{const p=BT(a);return p?l.jsx("marker",{className:"react-flow__arrowhead",id:t,markerWidth:`${i}`,markerHeight:`${c}`,viewBox:"-10 -10 20 20",markerUnits:u,orient:m,refX:"0",refY:"0",children:l.jsx(p,{color:s,strokeWidth:f})}):null},K1=({defaultColor:t,rfId:a})=>{const s=ze(u=>u.edges),i=ze(u=>u.defaultEdgeOptions),c=_.useMemo(()=>UC(s,{id:a,defaultColor:t,defaultMarkerStart:i?.markerStart,defaultMarkerEnd:i?.markerEnd}),[s,i,a,t]);return c.length?l.jsx("svg",{className:"react-flow__marker","aria-hidden":"true",children:l.jsx("defs",{children:c.map(u=>l.jsx(HT,{id:u.id,type:u.type,color:u.color,width:u.width,height:u.height,markerUnits:u.markerUnits,strokeWidth:u.strokeWidth,orient:u.orient},u.id))})}):null};K1.displayName="MarkerDefinitions";var LT=_.memo(K1);function J1({x:t,y:a,label:s,labelStyle:i,labelShowBg:c=!0,labelBgStyle:u,labelBgPadding:f=[2,4],labelBgBorderRadius:m=2,children:p,className:g,...y}){const[x,b]=_.useState({x:1,y:0,width:0,height:0}),S=ct(["react-flow__edge-textwrapper",g]),j=_.useRef(null);return _.useEffect(()=>{if(j.current){const A=j.current.getBBox();b({x:A.x,y:A.y,width:A.width,height:A.height})}},[s]),s?l.jsxs("g",{transform:`translate(${t-x.width/2} ${a-x.height/2})`,className:S,visibility:x.width?"visible":"hidden",...y,children:[c&&l.jsx("rect",{width:x.width+2*f[0],x:-f[0],y:-f[1],height:x.height+2*f[1],className:"react-flow__edge-textbg",style:u,rx:m,ry:m}),l.jsx("text",{className:"react-flow__edge-text",y:x.height/2,dy:"0.3em",ref:j,style:i,children:s}),p]}):null}J1.displayName="EdgeText";const UT=_.memo(J1);function tu({path:t,labelX:a,labelY:s,label:i,labelStyle:c,labelShowBg:u,labelBgStyle:f,labelBgPadding:m,labelBgBorderRadius:p,interactionWidth:g=20,...y}){return l.jsxs(l.Fragment,{children:[l.jsx("path",{...y,d:t,fill:"none",className:ct(["react-flow__edge-path",y.className])}),g?l.jsx("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:g,className:"react-flow__edge-interaction"}):null,i&&gn(a)&&gn(s)?l.jsx(UT,{x:a,y:s,label:i,labelStyle:c,labelShowBg:u,labelBgStyle:f,labelBgPadding:m,labelBgBorderRadius:p}):null]})}function Sy({pos:t,x1:a,y1:s,x2:i,y2:c}){return t===xe.Left||t===xe.Right?[.5*(a+i),s]:[a,.5*(s+c)]}function ev({sourceX:t,sourceY:a,sourcePosition:s=xe.Bottom,targetX:i,targetY:c,targetPosition:u=xe.Top}){const[f,m]=Sy({pos:s,x1:t,y1:a,x2:i,y2:c}),[p,g]=Sy({pos:u,x1:i,y1:c,x2:t,y2:a}),[y,x,b,S]=w1({sourceX:t,sourceY:a,targetX:i,targetY:c,sourceControlX:f,sourceControlY:m,targetControlX:p,targetControlY:g});return[`M${t},${a} C${f},${m} ${p},${g} ${i},${c}`,y,x,b,S]}function tv(t){return _.memo(({id:a,sourceX:s,sourceY:i,targetX:c,targetY:u,sourcePosition:f,targetPosition:m,label:p,labelStyle:g,labelShowBg:y,labelBgStyle:x,labelBgPadding:b,labelBgBorderRadius:S,style:j,markerEnd:A,markerStart:N,interactionWidth:E})=>{const[D,C,k]=ev({sourceX:s,sourceY:i,sourcePosition:f,targetX:c,targetY:u,targetPosition:m}),w=t.isInternal?void 0:a;return l.jsx(tu,{id:w,path:D,labelX:C,labelY:k,label:p,labelStyle:g,labelShowBg:y,labelBgStyle:x,labelBgPadding:b,labelBgBorderRadius:S,style:j,markerEnd:A,markerStart:N,interactionWidth:E})})}const $T=tv({isInternal:!1}),nv=tv({isInternal:!0});$T.displayName="SimpleBezierEdge";nv.displayName="SimpleBezierEdgeInternal";function av(t){return _.memo(({id:a,sourceX:s,sourceY:i,targetX:c,targetY:u,label:f,labelStyle:m,labelShowBg:p,labelBgStyle:g,labelBgPadding:y,labelBgBorderRadius:x,style:b,sourcePosition:S=xe.Bottom,targetPosition:j=xe.Top,markerEnd:A,markerStart:N,pathOptions:E,interactionWidth:D})=>{const[C,k,w]=ph({sourceX:s,sourceY:i,sourcePosition:S,targetX:c,targetY:u,targetPosition:j,borderRadius:E?.borderRadius,offset:E?.offset,stepPosition:E?.stepPosition}),z=t.isInternal?void 0:a;return l.jsx(tu,{id:z,path:C,labelX:k,labelY:w,label:f,labelStyle:m,labelShowBg:p,labelBgStyle:g,labelBgPadding:y,labelBgBorderRadius:x,style:b,markerEnd:A,markerStart:N,interactionWidth:D})})}const sv=av({isInternal:!1}),rv=av({isInternal:!0});sv.displayName="SmoothStepEdge";rv.displayName="SmoothStepEdgeInternal";function iv(t){return _.memo(({id:a,...s})=>{const i=t.isInternal?void 0:a;return l.jsx(sv,{...s,id:i,pathOptions:_.useMemo(()=>({borderRadius:0,offset:s.pathOptions?.offset}),[s.pathOptions?.offset])})})}const qT=iv({isInternal:!1}),ov=iv({isInternal:!0});qT.displayName="StepEdge";ov.displayName="StepEdgeInternal";function lv(t){return _.memo(({id:a,sourceX:s,sourceY:i,targetX:c,targetY:u,label:f,labelStyle:m,labelShowBg:p,labelBgStyle:g,labelBgPadding:y,labelBgBorderRadius:x,style:b,markerEnd:S,markerStart:j,interactionWidth:A})=>{const[N,E,D]=E1({sourceX:s,sourceY:i,targetX:c,targetY:u}),C=t.isInternal?void 0:a;return l.jsx(tu,{id:C,path:N,labelX:E,labelY:D,label:f,labelStyle:m,labelShowBg:p,labelBgStyle:g,labelBgPadding:y,labelBgBorderRadius:x,style:b,markerEnd:S,markerStart:j,interactionWidth:A})})}const VT=lv({isInternal:!1}),cv=lv({isInternal:!0});VT.displayName="StraightEdge";cv.displayName="StraightEdgeInternal";function uv(t){return _.memo(({id:a,sourceX:s,sourceY:i,targetX:c,targetY:u,sourcePosition:f=xe.Bottom,targetPosition:m=xe.Top,label:p,labelStyle:g,labelShowBg:y,labelBgStyle:x,labelBgPadding:b,labelBgBorderRadius:S,style:j,markerEnd:A,markerStart:N,pathOptions:E,interactionWidth:D})=>{const[C,k,w]=S1({sourceX:s,sourceY:i,sourcePosition:f,targetX:c,targetY:u,targetPosition:m,curvature:E?.curvature}),z=t.isInternal?void 0:a;return l.jsx(tu,{id:z,path:C,labelX:k,labelY:w,label:p,labelStyle:g,labelShowBg:y,labelBgStyle:x,labelBgPadding:b,labelBgBorderRadius:S,style:j,markerEnd:A,markerStart:N,interactionWidth:D})})}const YT=uv({isInternal:!1}),dv=uv({isInternal:!0});YT.displayName="BezierEdge";dv.displayName="BezierEdgeInternal";const Ny={default:dv,straight:cv,step:ov,smoothstep:rv,simplebezier:nv},jy={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},XT=(t,a,s)=>s===xe.Left?t-a:s===xe.Right?t+a:t,GT=(t,a,s)=>s===xe.Top?t-a:s===xe.Bottom?t+a:t,Ey="react-flow__edgeupdater";function _y({position:t,centerX:a,centerY:s,radius:i=10,onMouseDown:c,onMouseEnter:u,onMouseOut:f,type:m}){return l.jsx("circle",{onMouseDown:c,onMouseEnter:u,onMouseOut:f,className:ct([Ey,`${Ey}-${m}`]),cx:XT(a,i,t),cy:GT(s,i,t),r:i,stroke:"transparent",fill:"transparent"})}function IT({isReconnectable:t,reconnectRadius:a,edge:s,sourceX:i,sourceY:c,targetX:u,targetY:f,sourcePosition:m,targetPosition:p,onReconnect:g,onReconnectStart:y,onReconnectEnd:x,setReconnecting:b,setUpdateHover:S}){const j=Ke(),A=(k,w)=>{if(k.button!==0)return;const{autoPanOnConnect:z,domNode:M,isValidConnection:Y,connectionMode:U,connectionRadius:ne,lib:Q,onConnectStart:I,onConnectEnd:ae,cancelConnection:$,nodeLookup:F,rfId:O,panBy:B,updateConnection:V}=j.getState(),L=w.type==="target",Z=(ee,H)=>{b(!1),x?.(ee,s,w.type,H)},R=ee=>g?.(s,ee),X=(ee,H)=>{b(!0),y?.(k,s,w.type),I?.(ee,H)};yh.onPointerDown(k.nativeEvent,{autoPanOnConnect:z,connectionMode:U,connectionRadius:ne,domNode:M,handleId:w.id,nodeId:w.nodeId,nodeLookup:F,isTarget:L,edgeUpdaterType:w.type,lib:Q,flowId:O,cancelConnection:$,panBy:B,isValidConnection:Y,onConnect:R,onConnectStart:X,onConnectEnd:ae,onReconnectEnd:Z,updateConnection:V,getTransform:()=>j.getState().transform,getFromHandle:()=>j.getState().connection.fromHandle,dragThreshold:j.getState().connectionDragThreshold,handleDomNode:k.currentTarget})},N=k=>A(k,{nodeId:s.target,id:s.targetHandle??null,type:"target"}),E=k=>A(k,{nodeId:s.source,id:s.sourceHandle??null,type:"source"}),D=()=>S(!0),C=()=>S(!1);return l.jsxs(l.Fragment,{children:[(t===!0||t==="source")&&l.jsx(_y,{position:m,centerX:i,centerY:c,radius:a,onMouseDown:N,onMouseEnter:D,onMouseOut:C,type:"source"}),(t===!0||t==="target")&&l.jsx(_y,{position:p,centerX:u,centerY:f,radius:a,onMouseDown:E,onMouseEnter:D,onMouseOut:C,type:"target"})]})}function PT({id:t,edgesFocusable:a,edgesReconnectable:s,elementsSelectable:i,onClick:c,onDoubleClick:u,onContextMenu:f,onMouseEnter:m,onMouseMove:p,onMouseLeave:g,reconnectRadius:y,onReconnect:x,onReconnectStart:b,onReconnectEnd:S,rfId:j,edgeTypes:A,noPanClassName:N,onError:E,disableKeyboardA11y:D}){let C=ze(pe=>pe.edgeLookup.get(t));const k=ze(pe=>pe.defaultEdgeOptions);C=k?{...k,...C}:C;let w=C.type||"default",z=A?.[w]||Ny[w];z===void 0&&(E?.("011",Rn.error011(w)),w="default",z=A?.default||Ny.default);const M=!!(C.focusable||a&&typeof C.focusable>"u"),Y=typeof x<"u"&&(C.reconnectable||s&&typeof C.reconnectable>"u"),U=!!(C.selectable||i&&typeof C.selectable>"u"),ne=_.useRef(null),[Q,I]=_.useState(!1),[ae,$]=_.useState(!1),F=Ke(),{zIndex:O,sourceX:B,sourceY:V,targetX:L,targetY:Z,sourcePosition:R,targetPosition:X}=ze(_.useCallback(pe=>{const ge=pe.nodeLookup.get(C.source),me=pe.nodeLookup.get(C.target);if(!ge||!me)return{zIndex:C.zIndex,...jy};const Te=LC({id:t,sourceNode:ge,targetNode:me,sourceHandle:C.sourceHandle||null,targetHandle:C.targetHandle||null,connectionMode:pe.connectionMode,onError:E});return{zIndex:kC({selected:C.selected,zIndex:C.zIndex,sourceNode:ge,targetNode:me,elevateOnSelect:pe.elevateEdgesOnSelect,zIndexMode:pe.zIndexMode}),...Te||jy}},[C.source,C.target,C.sourceHandle,C.targetHandle,C.selected,C.zIndex]),We),ee=_.useMemo(()=>C.markerStart?`url('#${gh(C.markerStart,j)}')`:void 0,[C.markerStart,j]),H=_.useMemo(()=>C.markerEnd?`url('#${gh(C.markerEnd,j)}')`:void 0,[C.markerEnd,j]);if(C.hidden||B===null||V===null||L===null||Z===null)return null;const oe=pe=>{const{addSelectedEdges:ge,unselectNodesAndEdges:me,multiSelectionActive:Te}=F.getState();U&&(F.setState({nodesSelectionActive:!1}),C.selected&&Te?(me({nodes:[],edges:[C]}),ne.current?.blur()):ge([t])),c&&c(pe,C)},ue=u?pe=>{u(pe,{...C})}:void 0,ce=f?pe=>{f(pe,{...C})}:void 0,le=m?pe=>{m(pe,{...C})}:void 0,de=p?pe=>{p(pe,{...C})}:void 0,we=g?pe=>{g(pe,{...C})}:void 0,be=pe=>{if(!D&&o1.includes(pe.key)&&U){const{unselectNodesAndEdges:ge,addSelectedEdges:me}=F.getState();pe.key==="Escape"?(ne.current?.blur(),ge({edges:[C]})):me([t])}};return l.jsx("svg",{style:{zIndex:O},children:l.jsxs("g",{className:ct(["react-flow__edge",`react-flow__edge-${w}`,C.className,N,{selected:C.selected,animated:C.animated,inactive:!U&&!c,updating:Q,selectable:U}]),onClick:oe,onDoubleClick:ue,onContextMenu:ce,onMouseEnter:le,onMouseMove:de,onMouseLeave:we,onKeyDown:M?be:void 0,tabIndex:M?0:void 0,role:C.ariaRole??(M?"group":"img"),"aria-roledescription":"edge","data-id":t,"data-testid":`rf__edge-${t}`,"aria-label":C.ariaLabel===null?void 0:C.ariaLabel||`Edge from ${C.source} to ${C.target}`,"aria-describedby":M?`${$1}-${j}`:void 0,ref:ne,...C.domAttributes,children:[!ae&&l.jsx(z,{id:t,source:C.source,target:C.target,type:C.type,selected:C.selected,animated:C.animated,selectable:U,deletable:C.deletable??!0,label:C.label,labelStyle:C.labelStyle,labelShowBg:C.labelShowBg,labelBgStyle:C.labelBgStyle,labelBgPadding:C.labelBgPadding,labelBgBorderRadius:C.labelBgBorderRadius,sourceX:B,sourceY:V,targetX:L,targetY:Z,sourcePosition:R,targetPosition:X,data:C.data,style:C.style,sourceHandleId:C.sourceHandle,targetHandleId:C.targetHandle,markerStart:ee,markerEnd:H,pathOptions:"pathOptions"in C?C.pathOptions:void 0,interactionWidth:C.interactionWidth}),Y&&l.jsx(IT,{edge:C,isReconnectable:Y,reconnectRadius:y,onReconnect:x,onReconnectStart:b,onReconnectEnd:S,sourceX:B,sourceY:V,targetX:L,targetY:Z,sourcePosition:R,targetPosition:X,setUpdateHover:I,setReconnecting:$})]})})}var ZT=_.memo(PT);const QT=t=>({edgesFocusable:t.edgesFocusable,edgesReconnectable:t.edgesReconnectable,elementsSelectable:t.elementsSelectable,connectionMode:t.connectionMode,onError:t.onError});function fv({defaultMarkerColor:t,onlyRenderVisibleElements:a,rfId:s,edgeTypes:i,noPanClassName:c,onReconnect:u,onEdgeContextMenu:f,onEdgeMouseEnter:m,onEdgeMouseMove:p,onEdgeMouseLeave:g,onEdgeClick:y,reconnectRadius:x,onEdgeDoubleClick:b,onReconnectStart:S,onReconnectEnd:j,disableKeyboardA11y:A}){const{edgesFocusable:N,edgesReconnectable:E,elementsSelectable:D,onError:C}=ze(QT,We),k=DT(a);return l.jsxs("div",{className:"react-flow__edges",children:[l.jsx(LT,{defaultColor:t,rfId:s}),k.map(w=>l.jsx(ZT,{id:w,edgesFocusable:N,edgesReconnectable:E,elementsSelectable:D,noPanClassName:c,onReconnect:u,onContextMenu:f,onMouseEnter:m,onMouseMove:p,onMouseLeave:g,onClick:y,reconnectRadius:x,onDoubleClick:b,onReconnectStart:S,onReconnectEnd:j,rfId:s,onError:C,edgeTypes:i,disableKeyboardA11y:A},w))]})}fv.displayName="EdgeRenderer";const FT=_.memo(fv),WT=t=>`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`;function KT({children:t}){const a=ze(WT);return l.jsx("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:a},children:t})}function JT(t){const a=tm(),s=_.useRef(!1);_.useEffect(()=>{!s.current&&a.viewportInitialized&&t&&(setTimeout(()=>t(a),1),s.current=!0)},[t,a.viewportInitialized])}const eM=t=>t.panZoom?.syncViewport;function tM(t){const a=ze(eM),s=Ke();return _.useEffect(()=>{t&&(a?.(t),s.setState({transform:[t.x,t.y,t.zoom]}))},[t,a]),null}function nM(t){return t.connection.inProgress?{...t.connection,to:go(t.connection.to,t.transform)}:{...t.connection}}function aM(t){return nM}function sM(t){const a=aM();return ze(a,We)}const rM=t=>({nodesConnectable:t.nodesConnectable,isValid:t.connection.isValid,inProgress:t.connection.inProgress,width:t.width,height:t.height});function iM({containerStyle:t,style:a,type:s,component:i}){const{nodesConnectable:c,width:u,height:f,isValid:m,inProgress:p}=ze(rM,We);return!(u&&c&&p)?null:l.jsx("svg",{style:t,width:u,height:f,className:"react-flow__connectionline react-flow__container",children:l.jsx("g",{className:ct(["react-flow__connection",u1(m)]),children:l.jsx(hv,{style:a,type:s,CustomComponent:i,isValid:m})})})}const hv=({style:t,type:a=Xa.Bezier,CustomComponent:s,isValid:i})=>{const{inProgress:c,from:u,fromNode:f,fromHandle:m,fromPosition:p,to:g,toNode:y,toHandle:x,toPosition:b,pointer:S}=sM();if(!c)return;if(s)return l.jsx(s,{connectionLineType:a,connectionLineStyle:t,fromNode:f,fromHandle:m,fromX:u.x,fromY:u.y,toX:g.x,toY:g.y,fromPosition:p,toPosition:b,connectionStatus:u1(i),toNode:y,toHandle:x,pointer:S});let j="";const A={sourceX:u.x,sourceY:u.y,sourcePosition:p,targetX:g.x,targetY:g.y,targetPosition:b};switch(a){case Xa.Bezier:[j]=S1(A);break;case Xa.SimpleBezier:[j]=ev(A);break;case Xa.Step:[j]=ph({...A,borderRadius:0});break;case Xa.SmoothStep:[j]=ph(A);break;default:[j]=E1(A)}return l.jsx("path",{d:j,fill:"none",className:"react-flow__connection-path",style:t})};hv.displayName="ConnectionLine";const oM={};function Cy(t=oM){_.useRef(t),Ke(),_.useEffect(()=>{},[t])}function lM(){Ke(),_.useRef(!1),_.useEffect(()=>{},[])}function mv({nodeTypes:t,edgeTypes:a,onInit:s,onNodeClick:i,onEdgeClick:c,onNodeDoubleClick:u,onEdgeDoubleClick:f,onNodeMouseEnter:m,onNodeMouseMove:p,onNodeMouseLeave:g,onNodeContextMenu:y,onSelectionContextMenu:x,onSelectionStart:b,onSelectionEnd:S,connectionLineType:j,connectionLineStyle:A,connectionLineComponent:N,connectionLineContainerStyle:E,selectionKeyCode:D,selectionOnDrag:C,selectionMode:k,multiSelectionKeyCode:w,panActivationKeyCode:z,zoomActivationKeyCode:M,deleteKeyCode:Y,onlyRenderVisibleElements:U,elementsSelectable:ne,defaultViewport:Q,translateExtent:I,minZoom:ae,maxZoom:$,preventScrolling:F,defaultMarkerColor:O,zoomOnScroll:B,zoomOnPinch:V,panOnScroll:L,panOnScrollSpeed:Z,panOnScrollMode:R,zoomOnDoubleClick:X,panOnDrag:ee,onPaneClick:H,onPaneMouseEnter:oe,onPaneMouseMove:ue,onPaneMouseLeave:ce,onPaneScroll:le,onPaneContextMenu:de,paneClickDistance:we,nodeClickDistance:be,onEdgeContextMenu:pe,onEdgeMouseEnter:ge,onEdgeMouseMove:me,onEdgeMouseLeave:Te,reconnectRadius:_e,onReconnect:Ze,onReconnectStart:pt,onReconnectEnd:ut,noDragClassName:_t,noWheelClassName:on,noPanClassName:ln,disableKeyboardA11y:zn,nodeExtent:Ge,rfId:On,viewport:Bt,onViewportChange:bn}){return Cy(t),Cy(a),lM(),JT(s),tM(Bt),l.jsx(NT,{onPaneClick:H,onPaneMouseEnter:oe,onPaneMouseMove:ue,onPaneMouseLeave:ce,onPaneContextMenu:de,onPaneScroll:le,paneClickDistance:we,deleteKeyCode:Y,selectionKeyCode:D,selectionOnDrag:C,selectionMode:k,onSelectionStart:b,onSelectionEnd:S,multiSelectionKeyCode:w,panActivationKeyCode:z,zoomActivationKeyCode:M,elementsSelectable:ne,zoomOnScroll:B,zoomOnPinch:V,zoomOnDoubleClick:X,panOnScroll:L,panOnScrollSpeed:Z,panOnScrollMode:R,panOnDrag:ee,defaultViewport:Q,translateExtent:I,minZoom:ae,maxZoom:$,onSelectionContextMenu:x,preventScrolling:F,noDragClassName:_t,noWheelClassName:on,noPanClassName:ln,disableKeyboardA11y:zn,onViewportChange:bn,isControlledViewport:!!Bt,children:l.jsxs(KT,{children:[l.jsx(FT,{edgeTypes:a,onEdgeClick:c,onEdgeDoubleClick:f,onReconnect:Ze,onReconnectStart:pt,onReconnectEnd:ut,onlyRenderVisibleElements:U,onEdgeContextMenu:pe,onEdgeMouseEnter:ge,onEdgeMouseMove:me,onEdgeMouseLeave:Te,reconnectRadius:_e,defaultMarkerColor:O,noPanClassName:ln,disableKeyboardA11y:zn,rfId:On}),l.jsx(iM,{style:A,type:j,component:N,containerStyle:E}),l.jsx("div",{className:"react-flow__edgelabel-renderer"}),l.jsx(RT,{nodeTypes:t,onNodeClick:i,onNodeDoubleClick:u,onNodeMouseEnter:m,onNodeMouseMove:p,onNodeMouseLeave:g,onNodeContextMenu:y,nodeClickDistance:be,onlyRenderVisibleElements:U,noPanClassName:ln,noDragClassName:_t,disableKeyboardA11y:zn,nodeExtent:Ge,rfId:On}),l.jsx("div",{className:"react-flow__viewport-portal"})]})})}mv.displayName="GraphView";const cM=_.memo(mv),Ty=({nodes:t,edges:a,defaultNodes:s,defaultEdges:i,width:c,height:u,fitView:f,fitViewOptions:m,minZoom:p=.5,maxZoom:g=2,nodeOrigin:y,nodeExtent:x,zIndexMode:b="basic"}={})=>{const S=new Map,j=new Map,A=new Map,N=new Map,E=i??a??[],D=s??t??[],C=y??[0,0],k=x??eo;T1(A,N,E);const w=xh(D,S,j,{nodeOrigin:C,nodeExtent:k,zIndexMode:b});let z=[0,0,1];if(f&&c&&u){const M=mo(S,{filter:Q=>!!((Q.width||Q.initialWidth)&&(Q.height||Q.initialHeight))}),{x:Y,y:U,zoom:ne}=Zh(M,c,u,p,g,m?.padding??.1);z=[Y,U,ne]}return{rfId:"1",width:c??0,height:u??0,transform:z,nodes:D,nodesInitialized:w,nodeLookup:S,parentLookup:j,edges:E,edgeLookup:N,connectionLookup:A,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:s!==void 0,hasDefaultEdges:i!==void 0,panZoom:null,minZoom:p,maxZoom:g,translateExtent:eo,nodeExtent:k,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:Rr.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:C,nodeDragThreshold:1,connectionDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!0,selectNodesOnDrag:!0,multiSelectionActive:!1,fitViewQueued:f??!1,fitViewOptions:m,fitViewResolver:null,connection:{...c1},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanOnNodeFocus:!0,autoPanSpeed:15,connectionRadius:20,onError:EC,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1,ariaLabelConfig:l1,zIndexMode:b,onNodesChangeMiddlewareMap:new Map,onEdgesChangeMiddlewareMap:new Map}},uM=({nodes:t,edges:a,defaultNodes:s,defaultEdges:i,width:c,height:u,fitView:f,fitViewOptions:m,minZoom:p,maxZoom:g,nodeOrigin:y,nodeExtent:x,zIndexMode:b})=>T8((S,j)=>{async function A(){const{nodeLookup:N,panZoom:E,fitViewOptions:D,fitViewResolver:C,width:k,height:w,minZoom:z,maxZoom:M}=j();E&&(await NC({nodes:N,width:k,height:w,panZoom:E,minZoom:z,maxZoom:M},D),C?.resolve(!0),S({fitViewResolver:null}))}return{...Ty({nodes:t,edges:a,width:c,height:u,fitView:f,fitViewOptions:m,minZoom:p,maxZoom:g,nodeOrigin:y,nodeExtent:x,defaultNodes:s,defaultEdges:i,zIndexMode:b}),setNodes:N=>{const{nodeLookup:E,parentLookup:D,nodeOrigin:C,elevateNodesOnSelect:k,fitViewQueued:w,zIndexMode:z}=j(),M=xh(N,E,D,{nodeOrigin:C,nodeExtent:x,elevateNodesOnSelect:k,checkEquality:!0,zIndexMode:z});w&&M?(A(),S({nodes:N,nodesInitialized:M,fitViewQueued:!1,fitViewOptions:void 0})):S({nodes:N,nodesInitialized:M})},setEdges:N=>{const{connectionLookup:E,edgeLookup:D}=j();T1(E,D,N),S({edges:N})},setDefaultNodesAndEdges:(N,E)=>{if(N){const{setNodes:D}=j();D(N),S({hasDefaultNodes:!0})}if(E){const{setEdges:D}=j();D(E),S({hasDefaultEdges:!0})}},updateNodeInternals:N=>{const{triggerNodeChanges:E,nodeLookup:D,parentLookup:C,domNode:k,nodeOrigin:w,nodeExtent:z,debug:M,fitViewQueued:Y,zIndexMode:U}=j(),{changes:ne,updatedInternals:Q}=IC(N,D,C,k,w,z,U);Q&&(VC(D,C,{nodeOrigin:w,nodeExtent:z,zIndexMode:U}),Y?(A(),S({fitViewQueued:!1,fitViewOptions:void 0})):S({}),ne?.length>0&&(M&&console.log("React Flow: trigger node changes",ne),E?.(ne)))},updateNodePositions:(N,E=!1)=>{const D=[];let C=[];const{nodeLookup:k,triggerNodeChanges:w,connection:z,updateConnection:M,onNodesChangeMiddlewareMap:Y}=j();for(const[U,ne]of N){const Q=k.get(U),I=!!(Q?.expandParent&&Q?.parentId&&ne?.position),ae={id:U,type:"position",position:I?{x:Math.max(0,ne.position.x),y:Math.max(0,ne.position.y)}:ne.position,dragging:E};if(Q&&z.inProgress&&z.fromNode.id===Q.id){const $=Cs(Q,z.fromHandle,xe.Left,!0);M({...z,from:$})}I&&Q.parentId&&D.push({id:U,parentId:Q.parentId,rect:{...ne.internals.positionAbsolute,width:ne.measured.width??0,height:ne.measured.height??0}}),C.push(ae)}if(D.length>0){const{parentLookup:U,nodeOrigin:ne}=j(),Q=em(D,k,U,ne);C.push(...Q)}for(const U of Y.values())C=U(C);w(C)},triggerNodeChanges:N=>{const{onNodesChange:E,setNodes:D,nodes:C,hasDefaultNodes:k,debug:w}=j();if(N?.length){if(k){const z=Y1(N,C);D(z)}w&&console.log("React Flow: trigger node changes",N),E?.(N)}},triggerEdgeChanges:N=>{const{onEdgesChange:E,setEdges:D,edges:C,hasDefaultEdges:k,debug:w}=j();if(N?.length){if(k){const z=X1(N,C);D(z)}w&&console.log("React Flow: trigger edge changes",N),E?.(N)}},addSelectedNodes:N=>{const{multiSelectionActive:E,edgeLookup:D,nodeLookup:C,triggerNodeChanges:k,triggerEdgeChanges:w}=j();if(E){const z=N.map(M=>ys(M,!0));k(z);return}k(wr(C,new Set([...N]),!0)),w(wr(D))},addSelectedEdges:N=>{const{multiSelectionActive:E,edgeLookup:D,nodeLookup:C,triggerNodeChanges:k,triggerEdgeChanges:w}=j();if(E){const z=N.map(M=>ys(M,!0));w(z);return}w(wr(D,new Set([...N]))),k(wr(C,new Set,!0))},unselectNodesAndEdges:({nodes:N,edges:E}={})=>{const{edges:D,nodes:C,nodeLookup:k,triggerNodeChanges:w,triggerEdgeChanges:z}=j(),M=N||C,Y=E||D,U=M.map(Q=>{const I=k.get(Q.id);return I&&(I.selected=!1),ys(Q.id,!1)}),ne=Y.map(Q=>ys(Q.id,!1));w(U),z(ne)},setMinZoom:N=>{const{panZoom:E,maxZoom:D}=j();E?.setScaleExtent([N,D]),S({minZoom:N})},setMaxZoom:N=>{const{panZoom:E,minZoom:D}=j();E?.setScaleExtent([D,N]),S({maxZoom:N})},setTranslateExtent:N=>{j().panZoom?.setTranslateExtent(N),S({translateExtent:N})},resetSelectedElements:()=>{const{edges:N,nodes:E,triggerNodeChanges:D,triggerEdgeChanges:C,elementsSelectable:k}=j();if(!k)return;const w=E.reduce((M,Y)=>Y.selected?[...M,ys(Y.id,!1)]:M,[]),z=N.reduce((M,Y)=>Y.selected?[...M,ys(Y.id,!1)]:M,[]);D(w),C(z)},setNodeExtent:N=>{const{nodes:E,nodeLookup:D,parentLookup:C,nodeOrigin:k,elevateNodesOnSelect:w,nodeExtent:z,zIndexMode:M}=j();N[0][0]===z[0][0]&&N[0][1]===z[0][1]&&N[1][0]===z[1][0]&&N[1][1]===z[1][1]||(xh(E,D,C,{nodeOrigin:k,nodeExtent:N,elevateNodesOnSelect:w,checkEquality:!1,zIndexMode:M}),S({nodeExtent:N}))},panBy:N=>{const{transform:E,width:D,height:C,panZoom:k,translateExtent:w}=j();return PC({delta:N,panZoom:k,transform:E,translateExtent:w,width:D,height:C})},setCenter:async(N,E,D)=>{const{width:C,height:k,maxZoom:w,panZoom:z}=j();if(!z)return Promise.resolve(!1);const M=typeof D?.zoom<"u"?D.zoom:w;return await z.setViewport({x:C/2-N*M,y:k/2-E*M,zoom:M},{duration:D?.duration,ease:D?.ease,interpolate:D?.interpolate}),Promise.resolve(!0)},cancelConnection:()=>{S({connection:{...c1}})},updateConnection:N=>{S({connection:N})},reset:()=>S({...Ty()})}},Object.is);function dM({initialNodes:t,initialEdges:a,defaultNodes:s,defaultEdges:i,initialWidth:c,initialHeight:u,initialMinZoom:f,initialMaxZoom:m,initialFitViewOptions:p,fitView:g,nodeOrigin:y,nodeExtent:x,zIndexMode:b,children:S}){const[j]=_.useState(()=>uM({nodes:t,edges:a,defaultNodes:s,defaultEdges:i,width:c,height:u,fitView:g,minZoom:f,maxZoom:m,fitViewOptions:p,nodeOrigin:y,nodeExtent:x,zIndexMode:b}));return l.jsx(M8,{value:j,children:l.jsx(K8,{children:S})})}function fM({children:t,nodes:a,edges:s,defaultNodes:i,defaultEdges:c,width:u,height:f,fitView:m,fitViewOptions:p,minZoom:g,maxZoom:y,nodeOrigin:x,nodeExtent:b,zIndexMode:S}){return _.useContext(Kc)?l.jsx(l.Fragment,{children:t}):l.jsx(dM,{initialNodes:a,initialEdges:s,defaultNodes:i,defaultEdges:c,initialWidth:u,initialHeight:f,fitView:m,initialFitViewOptions:p,initialMinZoom:g,initialMaxZoom:y,nodeOrigin:x,nodeExtent:b,zIndexMode:S,children:t})}const hM={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};function mM({nodes:t,edges:a,defaultNodes:s,defaultEdges:i,className:c,nodeTypes:u,edgeTypes:f,onNodeClick:m,onEdgeClick:p,onInit:g,onMove:y,onMoveStart:x,onMoveEnd:b,onConnect:S,onConnectStart:j,onConnectEnd:A,onClickConnectStart:N,onClickConnectEnd:E,onNodeMouseEnter:D,onNodeMouseMove:C,onNodeMouseLeave:k,onNodeContextMenu:w,onNodeDoubleClick:z,onNodeDragStart:M,onNodeDrag:Y,onNodeDragStop:U,onNodesDelete:ne,onEdgesDelete:Q,onDelete:I,onSelectionChange:ae,onSelectionDragStart:$,onSelectionDrag:F,onSelectionDragStop:O,onSelectionContextMenu:B,onSelectionStart:V,onSelectionEnd:L,onBeforeDelete:Z,connectionMode:R,connectionLineType:X=Xa.Bezier,connectionLineStyle:ee,connectionLineComponent:H,connectionLineContainerStyle:oe,deleteKeyCode:ue="Backspace",selectionKeyCode:ce="Shift",selectionOnDrag:le=!1,selectionMode:de=to.Full,panActivationKeyCode:we="Space",multiSelectionKeyCode:be=ao()?"Meta":"Control",zoomActivationKeyCode:pe=ao()?"Meta":"Control",snapToGrid:ge,snapGrid:me,onlyRenderVisibleElements:Te=!1,selectNodesOnDrag:_e,nodesDraggable:Ze,autoPanOnNodeFocus:pt,nodesConnectable:ut,nodesFocusable:_t,nodeOrigin:on=q1,edgesFocusable:ln,edgesReconnectable:zn,elementsSelectable:Ge=!0,defaultViewport:On=V8,minZoom:Bt=.5,maxZoom:bn=2,translateExtent:Pa=eo,preventScrolling:su=!0,nodeExtent:Ms,defaultMarkerColor:ru="#b1b1b7",zoomOnScroll:iu=!0,zoomOnPinch:Za=!0,panOnScroll:St=!1,panOnScrollSpeed:vn=.5,panOnScrollMode:Nt=Ns.Free,zoomOnDoubleClick:ou=!0,panOnDrag:lu=!0,onPaneClick:cu,onPaneMouseEnter:As,onPaneMouseMove:ks,onPaneMouseLeave:Rs,onPaneScroll:Bn,onPaneContextMenu:Ds,paneClickDistance:Qa=1,nodeClickDistance:uu=0,children:bo,onReconnect:Yr,onReconnectStart:Fa,onReconnectEnd:du,onEdgeContextMenu:vo,onEdgeDoubleClick:wo,onEdgeMouseEnter:So,onEdgeMouseMove:Xr,onEdgeMouseLeave:Gr,reconnectRadius:No=10,onNodesChange:jo,onEdgesChange:wn,noDragClassName:dt="nodrag",noWheelClassName:vt="nowheel",noPanClassName:Hn="nopan",fitView:zs,fitViewOptions:Eo,connectOnClick:fu,attributionPosition:_o,proOptions:Wa,defaultEdgeOptions:Ir,elevateNodesOnSelect:fa=!0,elevateEdgesOnSelect:ha=!1,disableKeyboardA11y:ma=!1,autoPanOnConnect:pa,autoPanOnNodeDrag:at,autoPanSpeed:Co,connectionRadius:To,isValidConnection:Ln,onError:ga,style:hu,id:Pr,nodeDragThreshold:Mo,connectionDragThreshold:mu,viewport:Os,onViewportChange:Bs,width:cn,height:Ct,colorMode:Ao="light",debug:pu,onScroll:Hs,ariaLabelConfig:ko,zIndexMode:Ka="basic",...gu},Tt){const Ja=Pr||"1",Ro=I8(Ao),Zr=_.useCallback(Un=>{Un.currentTarget.scrollTo({top:0,left:0,behavior:"instant"}),Hs?.(Un)},[Hs]);return l.jsx("div",{"data-testid":"rf__wrapper",...gu,onScroll:Zr,style:{...hu,...hM},ref:Tt,className:ct(["react-flow",c,Ro]),id:Pr,role:"application",children:l.jsxs(fM,{nodes:t,edges:a,width:cn,height:Ct,fitView:zs,fitViewOptions:Eo,minZoom:Bt,maxZoom:bn,nodeOrigin:on,nodeExtent:Ms,zIndexMode:Ka,children:[l.jsx(cM,{onInit:g,onNodeClick:m,onEdgeClick:p,onNodeMouseEnter:D,onNodeMouseMove:C,onNodeMouseLeave:k,onNodeContextMenu:w,onNodeDoubleClick:z,nodeTypes:u,edgeTypes:f,connectionLineType:X,connectionLineStyle:ee,connectionLineComponent:H,connectionLineContainerStyle:oe,selectionKeyCode:ce,selectionOnDrag:le,selectionMode:de,deleteKeyCode:ue,multiSelectionKeyCode:be,panActivationKeyCode:we,zoomActivationKeyCode:pe,onlyRenderVisibleElements:Te,defaultViewport:On,translateExtent:Pa,minZoom:Bt,maxZoom:bn,preventScrolling:su,zoomOnScroll:iu,zoomOnPinch:Za,zoomOnDoubleClick:ou,panOnScroll:St,panOnScrollSpeed:vn,panOnScrollMode:Nt,panOnDrag:lu,onPaneClick:cu,onPaneMouseEnter:As,onPaneMouseMove:ks,onPaneMouseLeave:Rs,onPaneScroll:Bn,onPaneContextMenu:Ds,paneClickDistance:Qa,nodeClickDistance:uu,onSelectionContextMenu:B,onSelectionStart:V,onSelectionEnd:L,onReconnect:Yr,onReconnectStart:Fa,onReconnectEnd:du,onEdgeContextMenu:vo,onEdgeDoubleClick:wo,onEdgeMouseEnter:So,onEdgeMouseMove:Xr,onEdgeMouseLeave:Gr,reconnectRadius:No,defaultMarkerColor:ru,noDragClassName:dt,noWheelClassName:vt,noPanClassName:Hn,rfId:Ja,disableKeyboardA11y:ma,nodeExtent:Ms,viewport:Os,onViewportChange:Bs}),l.jsx(G8,{nodes:t,edges:a,defaultNodes:s,defaultEdges:i,onConnect:S,onConnectStart:j,onConnectEnd:A,onClickConnectStart:N,onClickConnectEnd:E,nodesDraggable:Ze,autoPanOnNodeFocus:pt,nodesConnectable:ut,nodesFocusable:_t,edgesFocusable:ln,edgesReconnectable:zn,elementsSelectable:Ge,elevateNodesOnSelect:fa,elevateEdgesOnSelect:ha,minZoom:Bt,maxZoom:bn,nodeExtent:Ms,onNodesChange:jo,onEdgesChange:wn,snapToGrid:ge,snapGrid:me,connectionMode:R,translateExtent:Pa,connectOnClick:fu,defaultEdgeOptions:Ir,fitView:zs,fitViewOptions:Eo,onNodesDelete:ne,onEdgesDelete:Q,onDelete:I,onNodeDragStart:M,onNodeDrag:Y,onNodeDragStop:U,onSelectionDrag:F,onSelectionDragStart:$,onSelectionDragStop:O,onMove:y,onMoveStart:x,onMoveEnd:b,noPanClassName:Hn,nodeOrigin:on,rfId:Ja,autoPanOnConnect:pa,autoPanOnNodeDrag:at,autoPanSpeed:Co,onError:ga,connectionRadius:To,isValidConnection:Ln,selectNodesOnDrag:_e,nodeDragThreshold:Mo,connectionDragThreshold:mu,onBeforeDelete:Z,debug:pu,ariaLabelConfig:ko,zIndexMode:Ka}),l.jsx(q8,{onSelectionChange:ae}),bo,l.jsx(B8,{proOptions:Wa,position:_o}),l.jsx(O8,{rfId:Ja,disableKeyboardA11y:ma})]})})}var pM=G1(mM);function gM({dimensions:t,lineWidth:a,variant:s,className:i}){return l.jsx("path",{strokeWidth:a,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`,className:ct(["react-flow__background-pattern",s,i])})}function xM({radius:t,className:a}){return l.jsx("circle",{cx:t,cy:t,r:t,className:ct(["react-flow__background-pattern","dots",a])})}var Ia;(function(t){t.Lines="lines",t.Dots="dots",t.Cross="cross"})(Ia||(Ia={}));const yM={[Ia.Dots]:1,[Ia.Lines]:1,[Ia.Cross]:6},bM=t=>({transform:t.transform,patternId:`pattern-${t.rfId}`});function pv({id:t,variant:a=Ia.Dots,gap:s=20,size:i,lineWidth:c=1,offset:u=0,color:f,bgColor:m,style:p,className:g,patternClassName:y}){const x=_.useRef(null),{transform:b,patternId:S}=ze(bM,We),j=i||yM[a],A=a===Ia.Dots,N=a===Ia.Cross,E=Array.isArray(s)?s:[s,s],D=[E[0]*b[2]||1,E[1]*b[2]||1],C=j*b[2],k=Array.isArray(u)?u:[u,u],w=N?[C,C]:D,z=[k[0]*b[2]||1+w[0]/2,k[1]*b[2]||1+w[1]/2],M=`${S}${t||""}`;return l.jsxs("svg",{className:ct(["react-flow__background",g]),style:{...p,...eu,"--xy-background-color-props":m,"--xy-background-pattern-color-props":f},ref:x,"data-testid":"rf__background",children:[l.jsx("pattern",{id:M,x:b[0]%D[0],y:b[1]%D[1],width:D[0],height:D[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${z[0]},-${z[1]})`,children:A?l.jsx(xM,{radius:C/2,className:y}):l.jsx(gM,{dimensions:w,lineWidth:c,variant:a,className:y})}),l.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${M})`})]})}pv.displayName="Background";const vM=_.memo(pv);function wM(){return l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:l.jsx("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function SM(){return l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:l.jsx("path",{d:"M0 0h32v4.2H0z"})})}function NM(){return l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:l.jsx("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function jM(){return l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:l.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function EM(){return l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:l.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function tc({children:t,className:a,...s}){return l.jsx("button",{type:"button",className:ct(["react-flow__controls-button",a]),...s,children:t})}const _M=t=>({isInteractive:t.nodesDraggable||t.nodesConnectable||t.elementsSelectable,minZoomReached:t.transform[2]<=t.minZoom,maxZoomReached:t.transform[2]>=t.maxZoom,ariaLabelConfig:t.ariaLabelConfig});function gv({style:t,showZoom:a=!0,showFitView:s=!0,showInteractive:i=!0,fitViewOptions:c,onZoomIn:u,onZoomOut:f,onFitView:m,onInteractiveChange:p,className:g,children:y,position:x="bottom-left",orientation:b="vertical","aria-label":S}){const j=Ke(),{isInteractive:A,minZoomReached:N,maxZoomReached:E,ariaLabelConfig:D}=ze(_M,We),{zoomIn:C,zoomOut:k,fitView:w}=tm(),z=()=>{C(),u?.()},M=()=>{k(),f?.()},Y=()=>{w(c),m?.()},U=()=>{j.setState({nodesDraggable:!A,nodesConnectable:!A,elementsSelectable:!A}),p?.(!A)},ne=b==="horizontal"?"horizontal":"vertical";return l.jsxs(Jc,{className:ct(["react-flow__controls",ne,g]),position:x,style:t,"data-testid":"rf__controls","aria-label":S??D["controls.ariaLabel"],children:[a&&l.jsxs(l.Fragment,{children:[l.jsx(tc,{onClick:z,className:"react-flow__controls-zoomin",title:D["controls.zoomIn.ariaLabel"],"aria-label":D["controls.zoomIn.ariaLabel"],disabled:E,children:l.jsx(wM,{})}),l.jsx(tc,{onClick:M,className:"react-flow__controls-zoomout",title:D["controls.zoomOut.ariaLabel"],"aria-label":D["controls.zoomOut.ariaLabel"],disabled:N,children:l.jsx(SM,{})})]}),s&&l.jsx(tc,{className:"react-flow__controls-fitview",onClick:Y,title:D["controls.fitView.ariaLabel"],"aria-label":D["controls.fitView.ariaLabel"],children:l.jsx(NM,{})}),i&&l.jsx(tc,{className:"react-flow__controls-interactive",onClick:U,title:D["controls.interactive.ariaLabel"],"aria-label":D["controls.interactive.ariaLabel"],children:A?l.jsx(EM,{}):l.jsx(jM,{})}),y]})}gv.displayName="Controls";const CM=_.memo(gv);function TM({id:t,x:a,y:s,width:i,height:c,style:u,color:f,strokeColor:m,strokeWidth:p,className:g,borderRadius:y,shapeRendering:x,selected:b,onClick:S}){const{background:j,backgroundColor:A}=u||{},N=f||j||A;return l.jsx("rect",{className:ct(["react-flow__minimap-node",{selected:b},g]),x:a,y:s,rx:y,ry:y,width:i,height:c,style:{fill:N,stroke:m,strokeWidth:p},shapeRendering:x,onClick:S?E=>S(E,t):void 0})}const MM=_.memo(TM),AM=t=>t.nodes.map(a=>a.id),If=t=>t instanceof Function?t:()=>t;function kM({nodeStrokeColor:t,nodeColor:a,nodeClassName:s="",nodeBorderRadius:i=5,nodeStrokeWidth:c,nodeComponent:u=MM,onClick:f}){const m=ze(AM,We),p=If(a),g=If(t),y=If(s),x=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return l.jsx(l.Fragment,{children:m.map(b=>l.jsx(DM,{id:b,nodeColorFunc:p,nodeStrokeColorFunc:g,nodeClassNameFunc:y,nodeBorderRadius:i,nodeStrokeWidth:c,NodeComponent:u,onClick:f,shapeRendering:x},b))})}function RM({id:t,nodeColorFunc:a,nodeStrokeColorFunc:s,nodeClassNameFunc:i,nodeBorderRadius:c,nodeStrokeWidth:u,shapeRendering:f,NodeComponent:m,onClick:p}){const{node:g,x:y,y:x,width:b,height:S}=ze(j=>{const{internals:A}=j.nodeLookup.get(t),N=A.userNode,{x:E,y:D}=A.positionAbsolute,{width:C,height:k}=da(N);return{node:N,x:E,y:D,width:C,height:k}},We);return!g||g.hidden||!g1(g)?null:l.jsx(m,{x:y,y:x,width:b,height:S,style:g.style,selected:!!g.selected,className:i(g),color:a(g),borderRadius:c,strokeColor:s(g),strokeWidth:u,shapeRendering:f,onClick:p,id:g.id})}const DM=_.memo(RM);var zM=_.memo(kM);const OM=200,BM=150,HM=t=>!t.hidden,LM=t=>{const a={x:-t.transform[0]/t.transform[2],y:-t.transform[1]/t.transform[2],width:t.width/t.transform[2],height:t.height/t.transform[2]};return{viewBB:a,boundingRect:t.nodeLookup.size>0?p1(mo(t.nodeLookup,{filter:HM}),a):a,rfId:t.rfId,panZoom:t.panZoom,translateExtent:t.translateExtent,flowWidth:t.width,flowHeight:t.height,ariaLabelConfig:t.ariaLabelConfig}},UM="react-flow__minimap-desc";function xv({style:t,className:a,nodeStrokeColor:s,nodeColor:i,nodeClassName:c="",nodeBorderRadius:u=5,nodeStrokeWidth:f,nodeComponent:m,bgColor:p,maskColor:g,maskStrokeColor:y,maskStrokeWidth:x,position:b="bottom-right",onClick:S,onNodeClick:j,pannable:A=!1,zoomable:N=!1,ariaLabel:E,inversePan:D,zoomStep:C=1,offsetScale:k=5}){const w=Ke(),z=_.useRef(null),{boundingRect:M,viewBB:Y,rfId:U,panZoom:ne,translateExtent:Q,flowWidth:I,flowHeight:ae,ariaLabelConfig:$}=ze(LM,We),F=t?.width??OM,O=t?.height??BM,B=M.width/F,V=M.height/O,L=Math.max(B,V),Z=L*F,R=L*O,X=k*L,ee=M.x-(Z-M.width)/2-X,H=M.y-(R-M.height)/2-X,oe=Z+X*2,ue=R+X*2,ce=`${UM}-${U}`,le=_.useRef(0),de=_.useRef();le.current=L,_.useEffect(()=>{if(z.current&&ne)return de.current=n8({domNode:z.current,panZoom:ne,getTransform:()=>w.getState().transform,getViewScale:()=>le.current}),()=>{de.current?.destroy()}},[ne]),_.useEffect(()=>{de.current?.update({translateExtent:Q,width:I,height:ae,inversePan:D,pannable:A,zoomStep:C,zoomable:N})},[A,N,D,C,Q,I,ae]);const we=S?ge=>{const[me,Te]=de.current?.pointer(ge)||[0,0];S(ge,{x:me,y:Te})}:void 0,be=j?_.useCallback((ge,me)=>{const Te=w.getState().nodeLookup.get(me).internals.userNode;j(ge,Te)},[]):void 0,pe=E??$["minimap.ariaLabel"];return l.jsx(Jc,{position:b,style:{...t,"--xy-minimap-background-color-props":typeof p=="string"?p:void 0,"--xy-minimap-mask-background-color-props":typeof g=="string"?g:void 0,"--xy-minimap-mask-stroke-color-props":typeof y=="string"?y:void 0,"--xy-minimap-mask-stroke-width-props":typeof x=="number"?x*L:void 0,"--xy-minimap-node-background-color-props":typeof i=="string"?i:void 0,"--xy-minimap-node-stroke-color-props":typeof s=="string"?s:void 0,"--xy-minimap-node-stroke-width-props":typeof f=="number"?f:void 0},className:ct(["react-flow__minimap",a]),"data-testid":"rf__minimap",children:l.jsxs("svg",{width:F,height:O,viewBox:`${ee} ${H} ${oe} ${ue}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":ce,ref:z,onClick:we,children:[pe&&l.jsx("title",{id:ce,children:pe}),l.jsx(zM,{onClick:be,nodeColor:i,nodeStrokeColor:s,nodeBorderRadius:u,nodeClassName:c,nodeStrokeWidth:f,nodeComponent:m}),l.jsx("path",{className:"react-flow__minimap-mask",d:`M${ee-X},${H-X}h${oe+X*2}v${ue+X*2}h${-oe-X*2}z
        M${Y.x},${Y.y}h${Y.width}v${Y.height}h${-Y.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}xv.displayName="MiniMap";const $M=_.memo(xv),qM=t=>a=>t?`${Math.max(1/a.transform[2],1)}`:void 0,VM={[Br.Line]:"right",[Br.Handle]:"bottom-right"};function YM({nodeId:t,position:a,variant:s=Br.Handle,className:i,style:c=void 0,children:u,color:f,minWidth:m=10,minHeight:p=10,maxWidth:g=Number.MAX_VALUE,maxHeight:y=Number.MAX_VALUE,keepAspectRatio:x=!1,resizeDirection:b,autoScale:S=!0,shouldResize:j,onResizeStart:A,onResize:N,onResizeEnd:E}){const D=Q1(),C=typeof t=="string"?t:D,k=Ke(),w=_.useRef(null),z=s===Br.Handle,M=ze(_.useCallback(qM(z&&S),[z,S]),We),Y=_.useRef(null),U=a??VM[s];_.useEffect(()=>{if(!(!w.current||!C))return Y.current||(Y.current=g8({domNode:w.current,nodeId:C,getStoreItems:()=>{const{nodeLookup:Q,transform:I,snapGrid:ae,snapToGrid:$,nodeOrigin:F,domNode:O}=k.getState();return{nodeLookup:Q,transform:I,snapGrid:ae,snapToGrid:$,nodeOrigin:F,paneDomNode:O}},onChange:(Q,I)=>{const{triggerNodeChanges:ae,nodeLookup:$,parentLookup:F,nodeOrigin:O}=k.getState(),B=[],V={x:Q.x,y:Q.y},L=$.get(C);if(L&&L.expandParent&&L.parentId){const Z=L.origin??O,R=Q.width??L.measured.width??0,X=Q.height??L.measured.height??0,ee={id:L.id,parentId:L.parentId,rect:{width:R,height:X,...x1({x:Q.x??L.position.x,y:Q.y??L.position.y},{width:R,height:X},L.parentId,$,Z)}},H=em([ee],$,F,O);B.push(...H),V.x=Q.x?Math.max(Z[0]*R,Q.x):void 0,V.y=Q.y?Math.max(Z[1]*X,Q.y):void 0}if(V.x!==void 0&&V.y!==void 0){const Z={id:C,type:"position",position:{...V}};B.push(Z)}if(Q.width!==void 0&&Q.height!==void 0){const R={id:C,type:"dimensions",resizing:!0,setAttributes:b?b==="horizontal"?"width":"height":!0,dimensions:{width:Q.width,height:Q.height}};B.push(R)}for(const Z of I){const R={...Z,type:"position"};B.push(R)}ae(B)},onEnd:({width:Q,height:I})=>{const ae={id:C,type:"dimensions",resizing:!1,dimensions:{width:Q,height:I}};k.getState().triggerNodeChanges([ae])}})),Y.current.update({controlPosition:U,boundaries:{minWidth:m,minHeight:p,maxWidth:g,maxHeight:y},keepAspectRatio:x,resizeDirection:b,onResizeStart:A,onResize:N,onResizeEnd:E,shouldResize:j}),()=>{Y.current?.destroy()}},[U,m,p,g,y,x,A,N,E,j]);const ne=U.split("-");return l.jsx("div",{className:ct(["react-flow__resize-control","nodrag",...ne,s,i]),ref:w,style:{...c,scale:M,...f&&{[z?"backgroundColor":"borderColor"]:f}},children:u})}_.memo(YM);const Pf=[{id:"trigger-1",type:"trigger",position:{x:250,y:50},data:{label:"Inicio",config:{type:"classification",conditions:{intent:["sales"]}}}}],XM=[],Vr=Wy((t,a)=>({flowId:null,flowName:"Nuevo Flujo",flowSlug:null,isActive:!1,isSaved:!0,nodes:Pf,edges:XM,selectedNode:null,selectedEdge:null,isSidebarOpen:!0,isPropertiesOpen:!1,onNodesChange:s=>{t({nodes:Y1(s,a().nodes),isSaved:!1})},onEdgesChange:s=>{t({edges:X1(s,a().edges),isSaved:!1})},onConnect:s=>{t({edges:j1({...s,type:"smoothstep",animated:!0,style:{stroke:"#25D366",strokeWidth:2}},a().edges),isSaved:!1})},addNode:(s,i)=>{const c=`${s}-${Date.now()}`,f={id:c,type:s,position:i,data:{trigger:{label:"Trigger",config:{type:"classification",conditions:{}}},message:{label:"Mensaje",content:"Escribe tu mensaje aqu..."},question:{label:"Pregunta",content:"Cul es tu opcin?",variable:"respuesta",options:[]},condition:{label:"Condicin",conditions:[]},action:{label:"Accin",action:"",payload:{}},transfer:{label:"Transferir",content:"Transfiriendo a un agente..."},end:{label:"Fin"}}[s]||{label:s}};return t({nodes:[...a().nodes,f],isSaved:!1}),c},updateNodeData:(s,i)=>{t({nodes:a().nodes.map(c=>c.id===s?{...c,data:{...c.data,...i}}:c),isSaved:!1})},deleteNode:s=>{t({nodes:a().nodes.filter(i=>i.id!==s),edges:a().edges.filter(i=>i.source!==s&&i.target!==s),selectedNode:null,isSaved:!1})},setSelectedNode:s=>t({selectedNode:s,isPropertiesOpen:!!s}),setSelectedEdge:s=>t({selectedEdge:s}),clearSelection:()=>t({selectedNode:null,selectedEdge:null}),toggleSidebar:()=>t({isSidebarOpen:!a().isSidebarOpen}),toggleProperties:()=>t({isPropertiesOpen:!a().isPropertiesOpen}),setFlowMeta:s=>t({flowId:s.id,flowName:s.name,flowSlug:s.slug,isActive:s.is_active}),loadFlow:s=>{const i={trigger:"Inicio",message:"Mensaje",question:"Pregunta",condition:"Condicin",action:"Accin",transfer:"Transferir",end:"Fin"},c=(s.nodes||[]).map(u=>{let f=i[u.type]||u.type;return u.content&&u.content.length>0&&(f=u.content.substring(0,25)+(u.content.length>25?"...":"")),u.action&&(f=`Accin: ${u.action}`),{id:u.id,type:u.type,position:u.position||{x:250,y:50},data:{label:f,content:u.content,variable:u.variable,options:u.options,conditions:u.conditions,action:u.action,payload:u.payload,config:u.config||(u.type==="trigger"?s.trigger_config:void 0)}}});t({flowId:s.id,flowName:s.name,flowSlug:s.slug,isActive:s.is_active,nodes:c.length>0?c:Pf,edges:s.connections?.map(u=>({id:`${u.from}-${u.to}`,source:u.from,target:u.to,type:"smoothstep",animated:!0,label:u.label,style:{stroke:"#25D366",strokeWidth:2}}))||[],isSaved:!0})},resetFlow:()=>t({flowId:null,flowName:"Nuevo Flujo",flowSlug:null,isActive:!1,nodes:Pf,edges:[],selectedNode:null,isSaved:!0}),markSaved:()=>t({isSaved:!0}),exportFlow:()=>{const s=a();return{name:s.flowName,trigger_config:s.nodes.find(i=>i.type==="trigger")?.data.config||{},nodes:s.nodes.map(i=>({id:i.id,type:i.type,content:i.data.content,variable:i.data.variable,options:i.data.options,conditions:i.data.conditions,action:i.data.action,payload:i.data.payload,position:i.position})),connections:s.edges.map(i=>({from:i.source,to:i.target,label:i.label}))}}}));function GM({onTestClick:t}){const{flowId:a,flowName:s,isActive:i,isSaved:c,exportFlow:u,markSaved:f,loadFlow:m,resetFlow:p,setFlowMeta:g}=Vr(),[y,x]=_.useState(!1),[b,S]=_.useState(!1),[j,A]=_.useState([]),[N,E]=_.useState(s),D=async()=>{x(!0);try{const M=u();if(M.name=N,a)await A_(a,M);else{const Y=await M_(M);g({id:Y.id,name:N,slug:Y.slug,is_active:!1})}f(),alert("Flujo guardado correctamente")}catch(M){alert("Error al guardar: "+M.message)}finally{x(!1)}},C=async()=>{if(!a){alert("Primero guarda el flujo");return}try{await Mb(a,!i),g({id:a,name:N,is_active:!i}),alert(i?"Flujo desactivado":"Flujo activado")}catch(M){alert("Error: "+M.message)}},k=async()=>{try{const M=await Tb();A(M.flows||[]),S(!0)}catch(M){alert("Error cargando flujos: "+M.message)}},w=async M=>{try{const Y=await rh(M.id);m(Y.flow),E(Y.flow.name),S(!1)}catch(Y){alert("Error cargando flujo: "+Y.message)}},z=()=>{!c&&!confirm("Tienes cambios sin guardar. Continuar?")||(p(),E("Nuevo Flujo"))};return l.jsxs("div",{style:{height:"56px",background:"white",borderBottom:"1px solid #e5e7eb",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0 16px"},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[l.jsx("span",{style:{fontSize:"24px"},children:""}),l.jsx("span",{style:{fontWeight:600,color:"#075E54"},children:"Flow Builder"})]}),l.jsx("div",{style:{borderLeft:"1px solid #e5e7eb",height:"24px"}}),l.jsx("input",{type:"text",value:N,onChange:M=>E(M.target.value),style:{border:"none",fontSize:"15px",fontWeight:500,background:"transparent",width:"200px"},placeholder:"Nombre del flujo"}),!c&&l.jsx("span",{style:{fontSize:"11px",background:"#fef3c7",color:"#92400e",padding:"2px 8px",borderRadius:"4px"},children:"Sin guardar"}),i&&l.jsx("span",{style:{fontSize:"11px",background:"#d1fae5",color:"#065f46",padding:"2px 8px",borderRadius:"4px"},children:"Activo"})]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[l.jsx("button",{onClick:t,style:{padding:"8px 16px",background:"linear-gradient(135deg, #075E54 0%, #128C7E 100%)",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"13px",fontWeight:500},children:" Probar"}),l.jsx("div",{style:{borderLeft:"1px solid #e5e7eb",height:"24px",margin:"0 4px"}}),l.jsx("button",{onClick:z,style:{padding:"8px 16px",background:"white",border:"1px solid #d1d5db",borderRadius:"6px",cursor:"pointer",fontSize:"13px"},children:"+ Nuevo"}),l.jsx("button",{onClick:k,style:{padding:"8px 16px",background:"white",border:"1px solid #d1d5db",borderRadius:"6px",cursor:"pointer",fontSize:"13px"},children:" Abrir"}),l.jsx("button",{onClick:D,disabled:y,style:{padding:"8px 16px",background:"#25D366",color:"white",border:"none",borderRadius:"6px",cursor:y?"wait":"pointer",fontSize:"13px",fontWeight:500},children:y?"Guardando...":" Guardar"}),a&&l.jsx("button",{onClick:C,style:{padding:"8px 16px",background:i?"#fee2e2":"#d1fae5",color:i?"#dc2626":"#065f46",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"13px",fontWeight:500},children:i?" Desactivar":" Activar"})]}),b&&l.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:l.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"24px",width:"400px",maxHeight:"500px",overflow:"auto"},children:[l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"16px"},children:[l.jsx("h3",{style:{margin:0},children:"Seleccionar flujo"}),l.jsx("button",{onClick:()=>S(!1),style:{background:"none",border:"none",cursor:"pointer",fontSize:"18px"},children:""})]}),j.length===0?l.jsx("p",{style:{color:"#6b7280",textAlign:"center"},children:"No hay flujos guardados"}):l.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:j.map(M=>l.jsxs("div",{onClick:()=>w(M),style:{padding:"12px",border:"1px solid #e5e7eb",borderRadius:"8px",cursor:"pointer",display:"flex",justifyContent:"space-between",alignItems:"center"},onMouseOver:Y=>Y.currentTarget.style.background="#f9fafb",onMouseOut:Y=>Y.currentTarget.style.background="white",children:[l.jsxs("div",{children:[l.jsx("div",{style:{fontWeight:500},children:M.name}),l.jsx("div",{style:{fontSize:"12px",color:"#6b7280"},children:M.slug})]}),M.is_active&&l.jsx("span",{style:{fontSize:"10px",background:"#d1fae5",color:"#065f46",padding:"2px 6px",borderRadius:"4px"},children:"Activo"})]},M.id))})]})})]})}const IM=[{type:"trigger",label:"Trigger",icon:"",color:"#667eea",description:"Inicio del flujo"},{type:"message",label:"Mensaje",icon:"",color:"#25D366",description:"Enviar mensaje"},{type:"question",label:"Pregunta",icon:"",color:"#34B7F1",description:"Preguntar y esperar"},{type:"condition",label:"Condicin",icon:"",color:"#f59e0b",description:"Bifurcacin"},{type:"action",label:"Accin",icon:"",color:"#6366f1",description:"Ejecutar accin"},{type:"ai_response",label:"Respuesta IA",icon:"",color:"#8b5cf6",description:"Generar con IA"},{type:"webhook",label:"Webhook",icon:"",color:"#f97316",description:"Llamar API externa"},{type:"delay",label:"Espera",icon:"",color:"#64748b",description:"Pausar X segundos"},{type:"transfer",label:"Transferir",icon:"",color:"#ec4899",description:"Pasar a humano"},{type:"end",label:"Fin",icon:"",color:"#ef4444",description:"Terminar flujo"}];function PM(){const{isSidebarOpen:t,toggleSidebar:a}=Vr(),s=(i,c)=>{i.dataTransfer.setData("application/reactflow",c),i.dataTransfer.effectAllowed="move"};return t?l.jsxs("div",{style:{width:"240px",background:"white",borderRight:"1px solid #e5e7eb",padding:"16px",display:"flex",flexDirection:"column",height:"100%"},children:[l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[l.jsx("h3",{style:{margin:0,fontSize:"14px",fontWeight:600},children:"Nodos"}),l.jsx("button",{onClick:a,style:{background:"none",border:"none",cursor:"pointer",fontSize:"18px",color:"#6b7280"},children:""})]}),l.jsx("p",{style:{fontSize:"12px",color:"#6b7280",marginBottom:"16px"},children:"Arrastra los nodos al canvas para construir tu flujo"}),l.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:IM.map(i=>l.jsxs("div",{draggable:!0,onDragStart:c=>s(c,i.type),style:{padding:"10px 12px",borderRadius:"8px",cursor:"grab",display:"flex",alignItems:"center",gap:"10px",background:`${i.color}15`,border:`1px solid ${i.color}30`,transition:"all 0.2s"},onMouseOver:c=>{c.currentTarget.style.transform="translateX(4px)",c.currentTarget.style.boxShadow="0 2px 8px rgba(0,0,0,0.1)"},onMouseOut:c=>{c.currentTarget.style.transform="none",c.currentTarget.style.boxShadow="none"},children:[l.jsx("span",{style:{fontSize:"20px"},children:i.icon}),l.jsxs("div",{children:[l.jsx("div",{style:{fontWeight:500,fontSize:"13px"},children:i.label}),l.jsx("div",{style:{fontSize:"11px",color:"#6b7280"},children:i.description})]})]},i.type))})]}):l.jsxs("button",{onClick:a,style:{position:"absolute",left:10,top:10,zIndex:10,background:"white",border:"1px solid #e5e7eb",borderRadius:"8px",padding:"8px 12px",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px"},children:[l.jsx("span",{children:""})," Nodos"]})}const My={trigger:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",border:"none"},message:{background:"white",border:"2px solid #25D366"},question:{background:"white",border:"2px solid #34B7F1"},condition:{background:"#fef3c7",border:"2px solid #f59e0b"},action:{background:"#e0e7ff",border:"2px solid #6366f1"},transfer:{background:"#fce7f3",border:"2px solid #ec4899"},end:{background:"#fee2e2",border:"2px solid #ef4444"}},ZM={trigger:"",message:"",question:"",condition:"",action:"",transfer:"",end:""};function QM({id:t,data:a,type:s,selected:i}){const c=My[s]||My.message,u=ZM[s]||"",f=s!=="end",m=s!=="trigger";return l.jsxs("div",{style:{...c,padding:"12px 16px",borderRadius:"8px",minWidth:"180px",maxWidth:"250px",boxShadow:i?"0 0 0 2px #3b82f6":"0 2px 8px rgba(0,0,0,0.1)",cursor:"pointer"},children:[m&&l.jsx(Hr,{type:"target",position:xe.Top,style:{background:"#6b7280",width:10,height:10}}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"4px"},children:[l.jsx("span",{style:{fontSize:"16px"},children:u}),l.jsx("strong",{style:{fontSize:"13px"},children:a.label||s})]}),a.content&&l.jsxs("div",{style:{fontSize:"11px",opacity:.8,marginTop:"4px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:[a.content.substring(0,40),a.content.length>40?"...":""]}),a.options&&a.options.length>0&&l.jsxs("div",{style:{fontSize:"10px",marginTop:"6px",opacity:.7},children:[a.options.length," opciones"]}),f&&l.jsx(Hr,{type:"source",position:xe.Bottom,style:{background:"#25D366",width:10,height:10}})]})}const gs=_.memo(QM),FM={trigger:t=>l.jsx(gs,{...t,type:"trigger"}),message:t=>l.jsx(gs,{...t,type:"message"}),question:t=>l.jsx(gs,{...t,type:"question"}),condition:t=>l.jsx(gs,{...t,type:"condition"}),action:t=>l.jsx(gs,{...t,type:"action"}),transfer:t=>l.jsx(gs,{...t,type:"transfer"}),end:t=>l.jsx(gs,{...t,type:"end"})};function WM(){const t=_.useRef(null),{nodes:a,edges:s,onNodesChange:i,onEdgesChange:c,onConnect:u,addNode:f,setSelectedNode:m}=Vr(),p=_.useCallback(b=>{b.preventDefault(),b.dataTransfer.dropEffect="move"},[]),g=_.useCallback(b=>{b.preventDefault();const S=b.dataTransfer.getData("application/reactflow");if(!S)return;const j=t.current.getBoundingClientRect(),A={x:b.clientX-j.left-90,y:b.clientY-j.top-25};f(S,A)},[f]),y=_.useCallback((b,S)=>{m(S)},[m]),x=_.useCallback(()=>{m(null)},[m]);return l.jsx("div",{ref:t,style:{flex:1,height:"100%"},children:l.jsxs(pM,{nodes:a,edges:s,onNodesChange:i,onEdgesChange:c,onConnect:u,onDrop:g,onDragOver:p,onNodeClick:y,onPaneClick:x,nodeTypes:FM,fitView:!0,snapToGrid:!0,snapGrid:[15,15],defaultEdgeOptions:{type:"smoothstep",animated:!0,style:{stroke:"#25D366",strokeWidth:2}},children:[l.jsx(vM,{color:"#e5e7eb",gap:20}),l.jsx(CM,{}),l.jsx($M,{nodeColor:b=>({trigger:"#667eea",message:"#25D366",question:"#34B7F1",condition:"#f59e0b",action:"#6366f1",transfer:"#ec4899",end:"#ef4444"})[b.type]||"#6b7280",maskColor:"rgba(255, 255, 255, 0.8)"})]})})}const KM=[{value:"sales",label:"Ventas",color:"#10b981"},{value:"support",label:"Soporte",color:"#3b82f6"},{value:"complaint",label:"Quejas",color:"#ef4444"},{value:"info",label:"Informacin",color:"#8b5cf6"},{value:"greeting",label:"Saludo",color:"#f59e0b"}],JM=[{value:"low",label:"Baja"},{value:"medium",label:"Media"},{value:"high",label:"Alta"},{value:"critical",label:"Crtica"}];function eA(){const{selectedNode:t,updateNodeData:a,deleteNode:s,isPropertiesOpen:i,toggleProperties:c}=Vr(),[u,f]=_.useState({}),[m,p]=_.useState({type:"keyword",keywords:[],conditions:{}}),[g,y]=_.useState([]),x=It(w=>w.token);_.useEffect(()=>{t&&(f(t.data||{}),t.type==="trigger"&&t.data?.config&&p(t.data.config))},[t]),_.useEffect(()=>{t?.type==="transfer"&&g.length===0&&x&&fetch("/api/departments",{headers:{Authorization:`Bearer ${x}`}}).then(w=>w.json()).then(w=>y(w.departments||[])).catch(()=>{})},[t?.type,x]);const b=(w,z)=>{const M={...u,[w]:z};f(M),a(t.id,{[w]:z})},S=(w,z,M)=>{const Y=[...u.options||[]];Y[w]={...Y[w],[z]:M},b("options",Y)},j=()=>{const w=[...u.options||[],{label:"Nueva opcin",value:""}];b("options",w)},A=w=>{const z=u.options.filter((M,Y)=>Y!==w);b("options",z)},N=w=>{const z={type:w,keywords:[],conditions:{}};p(z),a(t.id,{config:z})},E=w=>{const z=w.split(",").map(Y=>Y.trim()).filter(Y=>Y),M={...m,keywords:z};p(M),a(t.id,{config:M})},D=w=>{const z=m.conditions?.intent||[];let M;z.includes(w)?M=z.filter(U=>U!==w):M=[...z,w];const Y={...m,conditions:{...m.conditions,intent:M}};p(Y),a(t.id,{config:Y})},C=w=>{const z={...m,conditions:{...m.conditions,urgency:w}};p(z),a(t.id,{config:z})},k=w=>{const z={...m,conditions:{...m.conditions,min_lead_score:parseInt(w)||0}};p(z),a(t.id,{config:z})};return!i||!t?null:l.jsxs("div",{style:{width:"300px",background:"white",borderLeft:"1px solid #e5e7eb",padding:"16px",height:"100%",overflow:"auto"},children:[l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[l.jsx("h3",{style:{margin:0,fontSize:"14px",fontWeight:600},children:"Propiedades"}),l.jsx("button",{onClick:c,style:{background:"none",border:"none",cursor:"pointer",fontSize:"18px",color:"#6b7280"},children:""})]}),l.jsxs("div",{style:{fontSize:"12px",color:"#6b7280",marginBottom:"16px"},children:["Tipo: ",l.jsx("strong",{children:t.type})]}),l.jsxs("div",{style:{marginBottom:"16px"},children:[l.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:500,marginBottom:"4px"},children:"Etiqueta"}),l.jsx("input",{type:"text",value:u.label||"",onChange:w=>b("label",w.target.value),style:{width:"100%",padding:"8px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"13px"}})]}),t.type==="trigger"&&l.jsxs("div",{style:{marginBottom:"16px",padding:"12px",background:"#f8fafc",borderRadius:"8px",border:"1px solid #e2e8f0"},children:[l.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:600,marginBottom:"12px",color:"#475569"},children:"Configuracin del Trigger"}),l.jsxs("div",{style:{marginBottom:"12px"},children:[l.jsx("label",{style:{display:"block",fontSize:"11px",fontWeight:500,marginBottom:"6px",color:"#64748b"},children:"Tipo de activacin"}),l.jsx("div",{style:{display:"flex",gap:"6px"},children:[{value:"keyword",label:"Palabras clave"},{value:"classification",label:"Clasificacin"},{value:"always",label:"Siempre"}].map(w=>l.jsx("button",{onClick:()=>N(w.value),style:{flex:1,padding:"8px 4px",fontSize:"11px",border:m.type===w.value?"2px solid #25D366":"1px solid #d1d5db",borderRadius:"6px",background:m.type===w.value?"#dcfce7":"white",color:m.type===w.value?"#166534":"#6b7280",cursor:"pointer",fontWeight:m.type===w.value?600:400},children:w.label},w.value))})]}),m.type==="keyword"&&l.jsxs("div",{style:{marginBottom:"12px"},children:[l.jsx("label",{style:{display:"block",fontSize:"11px",fontWeight:500,marginBottom:"4px",color:"#64748b"},children:"Palabras clave (separadas por coma)"}),l.jsx("input",{type:"text",value:(m.keywords||[]).join(", "),onChange:w=>E(w.target.value),placeholder:"precio, costo, cotizar, cuanto",style:{width:"100%",padding:"8px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"12px"}}),l.jsx("p",{style:{fontSize:"10px",color:"#94a3b8",marginTop:"4px"},children:"El flujo se activa si el mensaje contiene alguna de estas palabras"})]}),m.type==="classification"&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{style:{marginBottom:"12px"},children:[l.jsx("label",{style:{display:"block",fontSize:"11px",fontWeight:500,marginBottom:"6px",color:"#64748b"},children:"Intenciones del mensaje"}),l.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"6px"},children:KM.map(w=>{const z=(m.conditions?.intent||[]).includes(w.value);return l.jsxs("button",{onClick:()=>D(w.value),style:{padding:"6px 10px",fontSize:"11px",border:z?`2px solid ${w.color}`:"1px solid #d1d5db",borderRadius:"16px",background:z?`${w.color}20`:"white",color:z?w.color:"#6b7280",cursor:"pointer",fontWeight:z?600:400},children:[z&&" ",w.label]},w.value)})})]}),l.jsxs("div",{style:{marginBottom:"12px"},children:[l.jsx("label",{style:{display:"block",fontSize:"11px",fontWeight:500,marginBottom:"4px",color:"#64748b"},children:"Urgencia mnima"}),l.jsxs("select",{value:m.conditions?.urgency||"",onChange:w=>C(w.target.value),style:{width:"100%",padding:"8px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"12px"},children:[l.jsx("option",{value:"",children:"Cualquiera"}),JM.map(w=>l.jsx("option",{value:w.value,children:w.label},w.value))]})]}),l.jsxs("div",{children:[l.jsx("label",{style:{display:"block",fontSize:"11px",fontWeight:500,marginBottom:"4px",color:"#64748b"},children:"Lead score mnimo"}),l.jsx("input",{type:"number",min:"0",max:"100",value:m.conditions?.min_lead_score||0,onChange:w=>k(w.target.value),style:{width:"100%",padding:"8px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"12px"}}),l.jsx("p",{style:{fontSize:"10px",color:"#94a3b8",marginTop:"4px"},children:"Solo activa si el lead tiene este puntaje o ms (0-100)"})]})]}),m.type==="always"&&l.jsx("div",{style:{padding:"12px",background:"#fef3c7",borderRadius:"6px",border:"1px solid #fcd34d"},children:l.jsx("p",{style:{fontSize:"11px",color:"#92400e",margin:0},children:" Este flujo se activar para TODOS los mensajes entrantes que no coincidan con otros flujos. salo como flujo por defecto."})})]}),["message","question","transfer"].includes(t.type)&&l.jsxs("div",{style:{marginBottom:"16px"},children:[l.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:500,marginBottom:"4px"},children:"Contenido del mensaje"}),l.jsx("textarea",{value:u.content||"",onChange:w=>b("content",w.target.value),rows:4,style:{width:"100%",padding:"8px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"13px",resize:"vertical"},placeholder:"Escribe el mensaje..."}),l.jsxs("p",{style:{fontSize:"11px",color:"#6b7280",marginTop:"4px"},children:["Usa ","{{variable}}"," para insertar variables"]})]}),t.type==="transfer"&&l.jsxs("div",{style:{marginBottom:"16px"},children:[l.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:500,marginBottom:"4px"},children:"Departamento destino"}),l.jsxs("select",{value:u.targetDepartmentId||"",onChange:w=>b("targetDepartmentId",w.target.value?Number(w.target.value):null),style:{width:"100%",padding:"8px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"13px"},children:[l.jsx("option",{value:"",children:"Auto (detectar por intent)"}),g.filter(w=>w.active).map(w=>l.jsx("option",{value:w.id,children:w.display_name||w.name},w.id))]}),l.jsx("p",{style:{fontSize:"11px",color:"#6b7280",marginTop:"4px"},children:'Si seleccionas "Auto", se usar el intent detectado para asignar departamento'})]}),t.type==="question"&&l.jsxs("div",{style:{marginBottom:"16px"},children:[l.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:500,marginBottom:"4px"},children:"Guardar respuesta en variable"}),l.jsx("input",{type:"text",value:u.variable||"",onChange:w=>b("variable",w.target.value),style:{width:"100%",padding:"8px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"13px"},placeholder:"nombre_variable"})]}),t.type==="question"&&l.jsxs("div",{style:{marginBottom:"16px"},children:[l.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:500,marginBottom:"8px"},children:"Opciones de respuesta"}),(u.options||[]).map((w,z)=>l.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"8px"},children:[l.jsx("input",{type:"text",value:w.label,onChange:M=>S(z,"label",M.target.value),placeholder:"Texto",style:{flex:1,padding:"6px",border:"1px solid #d1d5db",borderRadius:"4px",fontSize:"12px"}}),l.jsx("input",{type:"text",value:w.value,onChange:M=>S(z,"value",M.target.value),placeholder:"Valor",style:{width:"80px",padding:"6px",border:"1px solid #d1d5db",borderRadius:"4px",fontSize:"12px"}}),l.jsx("button",{onClick:()=>A(z),style:{background:"#fee2e2",border:"none",borderRadius:"4px",padding:"0 8px",cursor:"pointer",color:"#ef4444"},children:""})]},z)),l.jsx("button",{onClick:j,style:{background:"#f3f4f6",border:"1px dashed #d1d5db",borderRadius:"6px",padding:"8px",width:"100%",cursor:"pointer",fontSize:"12px"},children:"+ Agregar opcin"})]}),t.type==="action"&&l.jsxs("div",{style:{marginBottom:"16px"},children:[l.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:500,marginBottom:"4px"},children:"Tipo de accin"}),l.jsxs("select",{value:u.action||"",onChange:w=>b("action",w.target.value),style:{width:"100%",padding:"8px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"13px"},children:[l.jsx("option",{value:"",children:"Selecciona..."}),l.jsx("option",{value:"notify_sales",children:"Notificar a ventas"}),l.jsx("option",{value:"create_ticket",children:"Crear ticket"}),l.jsx("option",{value:"save_lead",children:"Guardar lead"}),l.jsx("option",{value:"send_email",children:"Enviar email"}),l.jsx("option",{value:"webhook",children:"Llamar webhook"}),l.jsx("option",{value:"search_faq",children:"Buscar en FAQ"})]})]}),t.type==="ai_response"&&l.jsxs("div",{style:{marginBottom:"16px",padding:"12px",background:"#f5f3ff",borderRadius:"8px",border:"1px solid #c4b5fd"},children:[l.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:600,marginBottom:"12px",color:"#5b21b6"},children:" Configuracin de IA"}),l.jsxs("div",{style:{marginBottom:"12px"},children:[l.jsx("label",{style:{display:"block",fontSize:"11px",fontWeight:500,marginBottom:"4px",color:"#6b7280"},children:"Prompt del sistema"}),l.jsx("textarea",{value:u.system_prompt||"",onChange:w=>b("system_prompt",w.target.value),rows:3,style:{width:"100%",padding:"8px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"12px",resize:"vertical"},placeholder:"Eres un asistente de ventas amable y profesional..."})]}),l.jsxs("div",{style:{marginBottom:"12px"},children:[l.jsx("label",{style:{display:"block",fontSize:"11px",fontWeight:500,marginBottom:"4px",color:"#6b7280"},children:"Prompt del usuario"}),l.jsx("textarea",{value:u.user_prompt||"",onChange:w=>b("user_prompt",w.target.value),rows:2,style:{width:"100%",padding:"8px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"12px",resize:"vertical"},placeholder:"El cliente pregunta: {{initial_message}}"}),l.jsxs("p",{style:{fontSize:"10px",color:"#94a3b8",marginTop:"4px"},children:["Usa ","{{variable}}"," para insertar datos dinmicos"]})]}),l.jsxs("div",{style:{marginBottom:"12px"},children:[l.jsx("label",{style:{display:"block",fontSize:"11px",fontWeight:500,marginBottom:"4px",color:"#6b7280"},children:"Modelo"}),l.jsxs("select",{value:u.model||"gpt-4o-mini",onChange:w=>b("model",w.target.value),style:{width:"100%",padding:"8px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"12px"},children:[l.jsx("option",{value:"gpt-4o-mini",children:"GPT-4o Mini (rpido)"}),l.jsx("option",{value:"gpt-4o",children:"GPT-4o (preciso)"}),l.jsx("option",{value:"gpt-4-turbo",children:"GPT-4 Turbo"})]})]}),l.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"12px"},children:[l.jsxs("div",{style:{flex:1},children:[l.jsx("label",{style:{display:"block",fontSize:"11px",fontWeight:500,marginBottom:"4px",color:"#6b7280"},children:"Temperatura"}),l.jsx("input",{type:"number",min:"0",max:"1",step:"0.1",value:u.temperature||.7,onChange:w=>b("temperature",parseFloat(w.target.value)),style:{width:"100%",padding:"8px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"12px"}})]}),l.jsxs("div",{style:{flex:1},children:[l.jsx("label",{style:{display:"block",fontSize:"11px",fontWeight:500,marginBottom:"4px",color:"#6b7280"},children:"Max tokens"}),l.jsx("input",{type:"number",min:"50",max:"2000",step:"50",value:u.max_tokens||200,onChange:w=>b("max_tokens",parseInt(w.target.value)),style:{width:"100%",padding:"8px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"12px"}})]})]}),l.jsxs("div",{children:[l.jsx("label",{style:{display:"block",fontSize:"11px",fontWeight:500,marginBottom:"4px",color:"#6b7280"},children:"Guardar respuesta en variable (opcional)"}),l.jsx("input",{type:"text",value:u.variable||"",onChange:w=>b("variable",w.target.value),style:{width:"100%",padding:"8px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"12px"},placeholder:"ai_response"})]})]}),t.type==="webhook"&&l.jsxs("div",{style:{marginBottom:"16px",padding:"12px",background:"#fff7ed",borderRadius:"8px",border:"1px solid #fed7aa"},children:[l.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:600,marginBottom:"12px",color:"#c2410c"},children:" Configuracin de Webhook"}),l.jsxs("div",{style:{marginBottom:"12px"},children:[l.jsx("label",{style:{display:"block",fontSize:"11px",fontWeight:500,marginBottom:"4px",color:"#6b7280"},children:"URL del endpoint"}),l.jsx("input",{type:"text",value:u.url||"",onChange:w=>b("url",w.target.value),style:{width:"100%",padding:"8px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"12px"},placeholder:"https://api.ejemplo.com/endpoint"})]}),l.jsxs("div",{style:{marginBottom:"12px"},children:[l.jsx("label",{style:{display:"block",fontSize:"11px",fontWeight:500,marginBottom:"4px",color:"#6b7280"},children:"Mtodo HTTP"}),l.jsxs("select",{value:u.method||"POST",onChange:w=>b("method",w.target.value),style:{width:"100%",padding:"8px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"12px"},children:[l.jsx("option",{value:"GET",children:"GET"}),l.jsx("option",{value:"POST",children:"POST"}),l.jsx("option",{value:"PUT",children:"PUT"}),l.jsx("option",{value:"PATCH",children:"PATCH"}),l.jsx("option",{value:"DELETE",children:"DELETE"})]})]}),l.jsxs("div",{style:{marginBottom:"12px"},children:[l.jsx("label",{style:{display:"block",fontSize:"11px",fontWeight:500,marginBottom:"4px",color:"#6b7280"},children:"Headers (JSON)"}),l.jsx("textarea",{value:u.headers||`{
  "Content-Type": "application/json"
}`,onChange:w=>b("headers",w.target.value),rows:3,style:{width:"100%",padding:"8px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"11px",fontFamily:"monospace",resize:"vertical"}})]}),l.jsxs("div",{style:{marginBottom:"12px"},children:[l.jsxs("label",{style:{display:"block",fontSize:"11px",fontWeight:500,marginBottom:"4px",color:"#6b7280"},children:["Body (JSON) - Usa ","{{variable}}"," para datos dinmicos"]}),l.jsx("textarea",{value:u.body||`{
  "phone": "{{phone}}",
  "message": "{{initial_message}}"
}`,onChange:w=>b("body",w.target.value),rows:4,style:{width:"100%",padding:"8px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"11px",fontFamily:"monospace",resize:"vertical"}})]}),l.jsxs("div",{style:{marginBottom:"12px"},children:[l.jsx("label",{style:{display:"block",fontSize:"11px",fontWeight:500,marginBottom:"4px",color:"#6b7280"},children:"Timeout (ms)"}),l.jsx("input",{type:"number",min:"1000",max:"30000",step:"1000",value:u.timeout||5e3,onChange:w=>b("timeout",parseInt(w.target.value)),style:{width:"100%",padding:"8px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"12px"}})]}),l.jsxs("div",{children:[l.jsx("label",{style:{display:"block",fontSize:"11px",fontWeight:500,marginBottom:"4px",color:"#6b7280"},children:"Guardar respuesta en variable"}),l.jsx("input",{type:"text",value:u.variable||"",onChange:w=>b("variable",w.target.value),style:{width:"100%",padding:"8px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"12px"},placeholder:"api_response"})]})]}),t.type==="delay"&&l.jsxs("div",{style:{marginBottom:"16px",padding:"12px",background:"#f8fafc",borderRadius:"8px",border:"1px solid #cbd5e1"},children:[l.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:600,marginBottom:"12px",color:"#475569"},children:" Configuracin de Espera"}),l.jsxs("div",{style:{marginBottom:"12px"},children:[l.jsx("label",{style:{display:"block",fontSize:"11px",fontWeight:500,marginBottom:"4px",color:"#6b7280"},children:"Segundos de espera"}),l.jsx("input",{type:"number",min:"1",max:"60",step:"1",value:u.seconds||2,onChange:w=>b("seconds",parseInt(w.target.value)),style:{width:"100%",padding:"8px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"13px"}}),l.jsx("p",{style:{fontSize:"10px",color:"#94a3b8",marginTop:"4px"},children:"Entre 1 y 60 segundos. Recomendado: 2-5 seg para parecer ms humano."})]}),l.jsx("div",{children:l.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer"},children:[l.jsx("input",{type:"checkbox",checked:u.typing_indicator!==!1,onChange:w=>b("typing_indicator",w.target.checked),style:{width:"16px",height:"16px"}}),l.jsx("span",{style:{fontSize:"12px",color:"#374151"},children:'Mostrar "escribiendo..." mientras espera'})]})})]}),l.jsx("div",{style:{marginTop:"24px",paddingTop:"16px",borderTop:"1px solid #e5e7eb"},children:l.jsx("button",{onClick:()=>s(t.id),style:{width:"100%",padding:"10px",background:"#fee2e2",border:"1px solid #fecaca",borderRadius:"6px",color:"#dc2626",cursor:"pointer",fontWeight:500,fontSize:"13px"},children:" Eliminar nodo"})})]})}function tA({isOpen:t,onClose:a}){const{nodes:s,edges:i,flowName:c}=Vr(),[u,f]=_.useState([]),[m,p]=_.useState(""),[g,y]=_.useState(null),[x,b]=_.useState({}),[S,j]=_.useState(!1),[A,N]=_.useState(null),[E,D]=_.useState("local"),[C,k]=_.useState(!1),w=_.useRef(null);_.useEffect(()=>{w.current?.scrollIntoView({behavior:"smooth"})},[u]),_.useEffect(()=>{t&&z()},[t]);const z=()=>{f([{type:"system",text:`Simulando flujo: "${c}"`},{type:"system",text:"Escribe un mensaje para iniciar..."}]),b({}),y(null),j(!0),N(null)},M=B=>s.find(V=>V.id===B),Y=(B,V=null)=>{const L=i.find(Z=>!(Z.source!==B||V&&Z.label&&Z.label!==V));return L?M(L.target):null},U=()=>s.find(B=>B.type==="trigger"),ne=async B=>{if(!B){I("system"," Flujo terminado (no hay siguiente nodo)"),j(!0);return}switch(N(B.id),y(B.id),await ae(300),B.type){case"trigger":I("system"," Trigger activado");const V=Y(B.id);ne(V);break;case"message":const L=Q(B.data.content||"Mensaje vaco");I("bot",L),await ae(500);const Z=Y(B.id);ne(Z);break;case"question":const R=Q(B.data.content||"?");I("bot",R),B.data.options&&B.data.options.length>0&&I("options",B.data.options),j(!0),y(B.id);break;case"condition":I("system"," Evaluando condicin..."),await ae(300);const X=B.data.conditions||[];let ee=null;for(const _e of X){if(_e.else){ee=_e.goto;break}const Ze=_e.if?.match(/(\w+)\s*==\s*["']?(\w+)["']?/);if(Ze){const[,pt,ut]=Ze;if(x[pt]===ut){ee=_e.goto,I("system",` Condicin cumplida: ${pt} = ${ut}`);break}}}const H=M(ee)||Y(B.id);ne(H);break;case"action":I("system",` Ejecutando accin: ${B.data.action||"sin definir"}`),await ae(500);const oe=Y(B.id);ne(oe);break;case"ai_response":I("system"," Generando respuesta con IA..."),k(!0),await ae(1500),k(!1);const ue=B.data.system_prompt||"",ce=Q(B.data.user_prompt||""),le=`[Respuesta IA simulada]
${ue.substring(0,50)}...
Para: "${ce.substring(0,50)}..."`;I("bot",le),B.data.variable&&(b(_e=>({..._e,[B.data.variable]:"respuesta_ia_simulada"})),I("system",` Variable "${B.data.variable}" = respuesta IA`)),await ae(300);const de=Y(B.id);ne(de);break;case"webhook":I("system",` Llamando webhook: ${B.data.url||"URL no definida"}`),I("system",`   Mtodo: ${B.data.method||"POST"}`),k(!0),await ae(1e3),k(!1);const we={success:!0,data:{status:"ok",simulated:!0}};I("system",` Webhook respondi: ${JSON.stringify(we).substring(0,50)}...`),B.data.variable&&b(_e=>({..._e,[B.data.variable]:we}));const be=Y(B.id);ne(be);break;case"delay":const pe=B.data.seconds||2,ge=B.data.typing_indicator!==!1;I("system",` Esperando ${pe} segundos...`),ge&&k(!0),await ae(pe*1e3),ge&&k(!1);const me=Y(B.id);ne(me);break;case"transfer":I("bot",B.data.content||"Transfiriendo a un agente..."),I("system"," Conversacin transferida a humano"),j(!0);break;case"end":I("system"," Flujo completado"),j(!0);break;default:I("system",`Nodo desconocido: ${B.type}`);const Te=Y(B.id);ne(Te)}},Q=B=>B&&B.replace(/\{\{(\w+)\}\}/g,(V,L)=>x[L]||V),I=(B,V)=>{f(L=>[...L,{type:B,text:V,time:new Date}])},ae=B=>new Promise(V=>setTimeout(V,B)),$=()=>{if(!m.trim())return;const B=m.trim();p(""),I("user",B),j(!1);const V=M(g);if(V?.type==="question"&&V.data.variable){let L=B;if(V.data.options){const Z=V.data.options.find(R=>R.label.toLowerCase()===B.toLowerCase()||R.value===B);Z&&(L=Z.value)}b(Z=>({...Z,[V.data.variable]:L})),I("system",` Variable "${V.data.variable}" = "${L}"`),setTimeout(()=>{const Z=Y(g);ne(Z)},300)}else if(!g){const L=U();L?ne(L):I("system"," No hay nodo Trigger en el flujo")}},F=B=>{p(B.label),setTimeout(()=>$(),100)},O=B=>{B.key==="Enter"&&!B.shiftKey&&(B.preventDefault(),$())};return t?l.jsxs("div",{style:{position:"fixed",right:"20px",bottom:"20px",width:"380px",height:"550px",background:"white",borderRadius:"16px",boxShadow:"0 10px 40px rgba(0,0,0,0.2)",display:"flex",flexDirection:"column",zIndex:1e3,overflow:"hidden"},children:[l.jsxs("div",{style:{background:"linear-gradient(135deg, #075E54 0%, #128C7E 100%)",color:"white",padding:"12px 16px"},children:[l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[l.jsxs("div",{children:[l.jsx("div",{style:{fontWeight:600,fontSize:"15px"},children:" Simulador de Chat"}),l.jsx("div",{style:{fontSize:"12px",opacity:.8},children:"Prueba tu flujo aqu"})]}),l.jsxs("div",{style:{display:"flex",gap:"8px"},children:[l.jsx("button",{onClick:z,style:{background:"rgba(255,255,255,0.2)",border:"none",color:"white",padding:"6px 12px",borderRadius:"6px",cursor:"pointer",fontSize:"12px"},children:""}),l.jsx("button",{onClick:a,style:{background:"none",border:"none",color:"white",fontSize:"20px",cursor:"pointer",padding:"0 4px"},children:""})]})]}),l.jsxs("div",{style:{display:"flex",gap:"8px",background:"rgba(0,0,0,0.2)",borderRadius:"8px",padding:"4px"},children:[l.jsx("button",{onClick:()=>D("local"),style:{flex:1,background:E==="local"?"white":"transparent",color:E==="local"?"#075E54":"white",border:"none",padding:"6px 12px",borderRadius:"6px",cursor:"pointer",fontSize:"11px",fontWeight:E==="local"?600:400},children:"Local"}),l.jsx("button",{onClick:()=>D("server"),style:{flex:1,background:E==="server"?"white":"transparent",color:E==="server"?"#075E54":"white",border:"none",padding:"6px 12px",borderRadius:"6px",cursor:"pointer",fontSize:"11px",fontWeight:E==="server"?600:400},children:"Servidor"})]})]}),Object.keys(x).length>0&&l.jsxs("div",{style:{background:"#f0fdf4",padding:"8px 16px",fontSize:"11px",borderBottom:"1px solid #e5e7eb"},children:[l.jsx("strong",{children:"Variables:"})," ",Object.entries(x).map(([B,V])=>l.jsxs("span",{style:{background:"#dcfce7",padding:"2px 6px",borderRadius:"4px",marginLeft:"4px"},children:[B,"=",typeof V=="object"?JSON.stringify(V).substring(0,30)+"...":String(V)]},B))]}),l.jsxs("div",{style:{flex:1,overflowY:"auto",padding:"16px",background:"#e5ddd5",backgroundImage:'url("data:image/svg+xml,%3Csvg width="60" height="60" viewBox="0 0 60 60" xmlns="http://www.w3.org/2000/svg"%3E%3Cg fill="none" fill-rule="evenodd"%3E%3Cg fill="%239C92AC" fill-opacity="0.05"%3E%3Cpath d="M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z"/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")'},children:[u.map((B,V)=>l.jsx(nA,{message:B,onOptionClick:F},V)),C&&l.jsx("div",{style:{display:"flex",justifyContent:"flex-start",marginBottom:"8px"},children:l.jsxs("div",{style:{background:"white",padding:"12px 16px",borderRadius:"12px 12px 12px 0",boxShadow:"0 1px 2px rgba(0,0,0,0.1)",display:"flex",gap:"4px"},children:[l.jsx("span",{className:"typing-dot",style:{width:"8px",height:"8px",background:"#90a3ae",borderRadius:"50%",animation:"typing 1.4s infinite ease-in-out",animationDelay:"0s"}}),l.jsx("span",{className:"typing-dot",style:{width:"8px",height:"8px",background:"#90a3ae",borderRadius:"50%",animation:"typing 1.4s infinite ease-in-out",animationDelay:"0.2s"}}),l.jsx("span",{className:"typing-dot",style:{width:"8px",height:"8px",background:"#90a3ae",borderRadius:"50%",animation:"typing 1.4s infinite ease-in-out",animationDelay:"0.4s"}})]})}),l.jsx("div",{ref:w})]}),l.jsxs("div",{style:{padding:"12px",background:"#f0f2f5",display:"flex",gap:"8px"},children:[l.jsx("input",{type:"text",value:m,onChange:B=>p(B.target.value),onKeyPress:O,placeholder:S?"Escribe un mensaje...":"Esperando respuesta...",disabled:!S,style:{flex:1,padding:"10px 16px",border:"none",borderRadius:"24px",fontSize:"14px",outline:"none"}}),l.jsx("button",{onClick:$,disabled:!S||!m.trim(),style:{background:"#25D366",color:"white",border:"none",borderRadius:"50%",width:"40px",height:"40px",cursor:S&&m.trim()?"pointer":"not-allowed",opacity:S&&m.trim()?1:.5,fontSize:"18px"},children:""})]})]}):null}function nA({message:t,onOptionClick:a}){const{type:s,text:i}=t,c=f=>typeof f=="object"&&f!==null?JSON.stringify(f,null,2):String(f);if(s==="system")return l.jsx("div",{style:{textAlign:"center",margin:"8px 0",fontSize:"11px",color:"#667781",background:"rgba(255,255,255,0.8)",padding:"4px 12px",borderRadius:"8px",display:"inline-block",width:"100%"},children:c(i)});if(s==="options")return l.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px",margin:"8px 0"},children:i.map((f,m)=>l.jsx("button",{onClick:()=>a(f),style:{background:"white",border:"1px solid #25D366",color:"#25D366",padding:"8px 16px",borderRadius:"16px",cursor:"pointer",fontSize:"13px",fontWeight:500},children:f.label},m))});const u=s==="user";return l.jsx("div",{style:{display:"flex",justifyContent:u?"flex-end":"flex-start",marginBottom:"8px"},children:l.jsx("div",{style:{maxWidth:"80%",padding:"8px 12px",borderRadius:u?"12px 12px 0 12px":"12px 12px 12px 0",background:u?"#dcf8c6":"white",boxShadow:"0 1px 2px rgba(0,0,0,0.1)",fontSize:"14px",lineHeight:"1.4",whiteSpace:"pre-wrap"},children:c(i)})})}const Zf=[{title:"Bienvenido al Flow Builder!",description:"Crea flujos de conversacin para tu chatbot de WhatsApp de forma visual, sin escribir cdigo.",icon:"",image:null},{title:"Arrastra nodos al canvas",description:"En la barra izquierda encontrars los nodos disponibles. Arrstralos al canvas para construir tu flujo.",icon:"",tips:[" Mensaje: Enva un texto al usuario"," Pregunta: Espera una respuesta del usuario"," Condicin: Bifurca el flujo segn una variable"," Accin: Ejecuta una accin (notificar, guardar, etc.)"]},{title:"Conecta los nodos",description:"Arrastra desde el punto verde (salida) de un nodo hasta el punto gris (entrada) de otro para conectarlos.",icon:"",tips:["El flujo siempre empieza en el Trigger","Puedes tener mltiples caminos con Condiciones","Termina con un nodo Fin o Transferir"]},{title:"Configura cada nodo",description:"Haz clic en un nodo para ver sus propiedades a la derecha. Ah puedes editar el contenido, opciones y variables.",icon:"",tips:["Usa {{variable}} para insertar datos dinmicos","Las preguntas guardan la respuesta en una variable","Las condiciones evalan esas variables"]},{title:"Guarda y activa!",description:"Cuando termines, guarda tu flujo y actvalo para que empiece a responder mensajes automticamente.",icon:"",tips:["Puedes tener varios flujos, pero solo algunos activos",'Usa "Abrir" para cargar flujos guardados',"Las plantillas te dan flujos de ejemplo para empezar"]}];function aA({onComplete:t}){const[a,s]=_.useState(0),[i,c]=_.useState(!1),u=Zf[a],f=a===Zf.length-1,m=()=>{f?c(!0):s(a+1)},p=()=>{t(null)},g=y=>{t(y)};return i?l.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:l.jsxs("div",{style:{background:"white",borderRadius:"16px",padding:"32px",maxWidth:"600px",width:"90%"},children:[l.jsx("h2",{style:{margin:"0 0 8px 0",fontSize:"24px"},children:"Cmo quieres empezar?"}),l.jsx("p",{style:{color:"#6b7280",margin:"0 0 24px 0"},children:"Puedes empezar desde cero o usar una plantilla predefinida"}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:[l.jsx(nc,{icon:"",title:"Empezar vaco",description:"Canvas en blanco para crear tu propio flujo",onClick:()=>g(null)}),l.jsx(nc,{icon:"",title:"Embudo de Ventas",description:"Califica leads y gualos a la compra",onClick:()=>g("sales_funnel"),color:"#25D366"}),l.jsx(nc,{icon:"",title:"Embudo de Soporte",description:"Resuelve dudas con FAQ y escala a humanos",onClick:()=>g("support_funnel"),color:"#34B7F1"}),l.jsx(nc,{icon:"",title:"Captura de Leads",description:"Recolecta informacin de contacto",onClick:()=>g("lead_capture"),color:"#f59e0b"})]}),l.jsx("button",{onClick:()=>g(null),style:{marginTop:"16px",padding:"8px",background:"none",border:"none",color:"#6b7280",cursor:"pointer",fontSize:"13px",width:"100%"},children:"Saltar y empezar vaco "})]})}):l.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:l.jsxs("div",{style:{background:"white",borderRadius:"16px",padding:"32px",maxWidth:"500px",width:"90%",textAlign:"center"},children:[l.jsx("div",{style:{display:"flex",justifyContent:"center",gap:"8px",marginBottom:"24px"},children:Zf.map((y,x)=>l.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:x===a?"#25D366":"#e5e7eb",transition:"background 0.2s"}},x))}),l.jsx("div",{style:{fontSize:"64px",marginBottom:"16px"},children:u.icon}),l.jsx("h2",{style:{margin:"0 0 12px 0",fontSize:"24px",color:"#111827"},children:u.title}),l.jsx("p",{style:{color:"#6b7280",margin:"0 0 20px 0",lineHeight:"1.6"},children:u.description}),u.tips&&l.jsx("div",{style:{background:"#f9fafb",borderRadius:"8px",padding:"16px",textAlign:"left",marginBottom:"24px"},children:u.tips.map((y,x)=>l.jsx("div",{style:{fontSize:"13px",color:"#4b5563",marginBottom:x<u.tips.length-1?"8px":0},children:y},x))}),l.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"center"},children:[l.jsx("button",{onClick:p,style:{padding:"12px 24px",background:"white",border:"1px solid #d1d5db",borderRadius:"8px",cursor:"pointer",fontSize:"14px",color:"#6b7280"},children:"Saltar"}),l.jsx("button",{onClick:m,style:{padding:"12px 24px",background:"#25D366",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"14px",fontWeight:500},children:f?"Empezar":"Siguiente"})]})]})})}function nc({icon:t,title:a,description:s,onClick:i,color:c}){return l.jsxs("div",{onClick:i,style:{padding:"16px",border:"2px solid #e5e7eb",borderRadius:"12px",cursor:"pointer",transition:"all 0.2s",textAlign:"left"},onMouseOver:u=>{u.currentTarget.style.borderColor=c||"#25D366",u.currentTarget.style.transform="translateY(-2px)"},onMouseOut:u=>{u.currentTarget.style.borderColor="#e5e7eb",u.currentTarget.style.transform="none"},children:[l.jsx("div",{style:{fontSize:"28px",marginBottom:"8px"},children:t}),l.jsx("div",{style:{fontWeight:600,fontSize:"14px",marginBottom:"4px"},children:a}),l.jsx("div",{style:{fontSize:"12px",color:"#6b7280"},children:s})]})}function sA(){const{id:t}=xS(),[a,s]=_.useState(!1),[i,c]=_.useState(!1),[u,f]=_.useState(null),[m,p]=_.useState(!1),{loadFlow:g}=Vr();_.useEffect(()=>{t?y(t):localStorage.getItem("flowbuilder_onboarding_seen")||c(!0)},[t]);const y=async S=>{p(!0);try{const j=await rh(S);if(j.flow)g(j.flow),x(`Flujo "${j.flow.name}" cargado correctamente`,"success");else throw new Error("No se pudo obtener los datos del flujo")}catch(j){console.error("Error loading flow:",j),x(`Error al cargar flujo: ${j.message}`,"error")}finally{p(!1)}},x=(S,j="info")=>{f({message:S,type:j}),setTimeout(()=>f(null),4e3)},b=async S=>{if(localStorage.setItem("flowbuilder_onboarding_seen","true"),c(!1),S){p(!0);try{console.log("Creating flow from template:",S);const j=await Ab(S,null);if(console.log("Template created, result:",j),j.id){const A=await rh(j.id);if(console.log("Flow data loaded:",A),A.flow)g(A.flow),x(`Flujo "${A.flow.name}" cargado correctamente`,"success");else throw new Error("No se pudo obtener los datos del flujo")}else throw new Error("No se recibi el ID del flujo creado")}catch(j){console.error("Error loading template:",j),x(`Error al cargar template: ${j.message}`,"error")}finally{p(!1)}}};return l.jsxs("div",{style:{display:"flex",flexDirection:"column",height:"100vh",overflow:"hidden"},children:[l.jsx(GM,{onTestClick:()=>s(!0)}),l.jsxs("div",{style:{display:"flex",flex:1,overflow:"hidden"},children:[l.jsx(PM,{}),l.jsx(WM,{}),l.jsx(eA,{})]}),l.jsxs("button",{onClick:()=>s(!0),style:{position:"fixed",right:"20px",bottom:"20px",background:"linear-gradient(135deg, #075E54 0%, #25D366 100%)",color:"white",border:"none",borderRadius:"50px",padding:"14px 24px",cursor:"pointer",boxShadow:"0 4px 15px rgba(37, 211, 102, 0.4)",fontSize:"14px",fontWeight:600,display:a?"none":"flex",alignItems:"center",gap:"8px",zIndex:100},children:[l.jsx("span",{style:{fontSize:"18px"},children:""}),"Probar flujo"]}),m&&l.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1001},children:l.jsxs("div",{style:{background:"white",padding:"24px 32px",borderRadius:"12px",display:"flex",alignItems:"center",gap:"12px"},children:[l.jsx("div",{style:{width:"24px",height:"24px",border:"3px solid #e5e7eb",borderTop:"3px solid #25D366",borderRadius:"50%",animation:"spin 1s linear infinite"}}),l.jsx("span",{children:"Cargando flujo..."})]})}),u&&l.jsxs("div",{style:{position:"fixed",top:"20px",right:"20px",padding:"12px 20px",borderRadius:"8px",background:u.type==="success"?"#10b981":u.type==="error"?"#ef4444":"#3b82f6",color:"white",fontWeight:500,boxShadow:"0 4px 12px rgba(0,0,0,0.15)",zIndex:1002,animation:"slideIn 0.3s ease"},children:[u.type==="success"&&" ",u.type==="error"&&" ",u.message]}),l.jsx(tA,{isOpen:a,onClose:()=>s(!1)}),i&&l.jsx(aA,{onComplete:b})]})}const am="/api/flow-logs";async function sm(t,a){if(!t.ok){let s=a;try{const i=await t.json();i.error&&(s=i.error)}catch{}throw new Error(s)}return t.json()}async function rA(t={}){const a=new URLSearchParams(t).toString(),s=await fetch(`${am}?${a}`);return sm(s,"Error al cargar logs")}async function iA(t){const a=await fetch(`${am}/${t}`);return sm(a,"Log no encontrado")}async function oA(t=7){const a=await fetch(`${am}/stats/summary?days=${t}`);return sm(a,"Error al cargar estadsticas")}const Vi={completed:{label:"Completado",color:"#10b981",icon:bc},failed:{label:"Fallido",color:"#ef4444",icon:Ah},transferred:{label:"Transferido",color:"#f59e0b",icon:Th},running:{label:"En progreso",color:"#3b82f6",icon:ws},timeout:{label:"Timeout",color:"#6b7280",icon:vc}};function lA(){const[t,a]=_.useState([]),[s,i]=_.useState(null),[c,u]=_.useState(!0),[f,m]=_.useState(null),[p,g]=_.useState(!1),[y,x]=_.useState({status:"",phone:"",flow_id:""});_.useEffect(()=>{b()},[]);const b=async()=>{u(!0);try{const[N,E]=await Promise.all([rA({limit:50,...y}),oA(7)]);a(N.logs||[]),i(E.stats)}catch(N){console.error("Error loading logs:",N)}finally{u(!1)}},S=async N=>{g(!0);try{const E=await iA(N.id);m(E.log)}catch(E){console.error("Error loading log detail:",E)}finally{g(!1)}},j=(N,E)=>{x(D=>({...D,[N]:E}))},A=()=>{b()};return c?l.jsx("div",{className:"p-8 flex items-center justify-center h-full",children:l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-500"})}):l.jsxs("div",{className:"p-8",children:[l.jsxs("div",{className:"flex items-center justify-between mb-8",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Logs de Ejecucin"}),l.jsx("p",{className:"text-gray-500 mt-1",children:"Historial de ejecucin de flujos"})]}),l.jsxs("button",{onClick:b,className:"flex items-center gap-2 px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg text-gray-700 transition",children:[l.jsx(Rh,{className:"w-4 h-4"}),"Actualizar"]})]}),s&&l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8",children:[l.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-100 shadow-sm",children:[l.jsx("p",{className:"text-sm text-gray-500",children:"Total ejecuciones"}),l.jsx("p",{className:"text-2xl font-bold text-gray-800",children:s.total_executions||0}),l.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"ltimos 7 das"})]}),l.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-100 shadow-sm",children:[l.jsx("p",{className:"text-sm text-gray-500",children:"Tasa de completado"}),l.jsxs("p",{className:"text-2xl font-bold text-green-600",children:[s.completion_rate||0,"%"]}),l.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:[s.completed||0," completados"]})]}),l.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-100 shadow-sm",children:[l.jsx("p",{className:"text-sm text-gray-500",children:"Fallidos"}),l.jsx("p",{className:"text-2xl font-bold text-red-500",children:s.failed||0}),l.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Requieren atencin"})]}),l.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-100 shadow-sm",children:[l.jsx("p",{className:"text-sm text-gray-500",children:"Tiempo promedio"}),l.jsx("p",{className:"text-2xl font-bold text-blue-600",children:s.avg_duration_ms?`${Math.round(s.avg_duration_ms)}ms`:"-"}),l.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Por ejecucin"})]})]}),l.jsx("div",{className:"bg-white rounded-xl p-4 border border-gray-100 shadow-sm mb-6",children:l.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(kh,{className:"w-4 h-4 text-gray-400"}),l.jsx("span",{className:"text-sm text-gray-600",children:"Filtrar:"})]}),l.jsxs("select",{value:y.status,onChange:N=>j("status",N.target.value),className:"px-3 py-2 border border-gray-200 rounded-lg text-sm focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none",children:[l.jsx("option",{value:"",children:"Todos los estados"}),l.jsx("option",{value:"completed",children:"Completados"}),l.jsx("option",{value:"failed",children:"Fallidos"}),l.jsx("option",{value:"transferred",children:"Transferidos"}),l.jsx("option",{value:"running",children:"En progreso"})]}),l.jsx("input",{type:"text",value:y.phone,onChange:N=>j("phone",N.target.value),placeholder:"Telfono...",className:"px-3 py-2 border border-gray-200 rounded-lg text-sm focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none w-40"}),l.jsx("button",{onClick:A,className:"px-4 py-2 bg-green-500 hover:bg-green-600 text-white rounded-lg text-sm transition",children:"Aplicar"})]})}),l.jsx("div",{className:"bg-white rounded-xl border border-gray-100 shadow-sm overflow-hidden",children:t.length===0?l.jsxs("div",{className:"p-12 text-center text-gray-400",children:[l.jsx(ws,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),l.jsx("p",{children:"No hay logs de ejecucin"}),l.jsx("p",{className:"text-sm mt-1",children:"Los logs aparecern cuando se ejecuten flujos"})]}):l.jsxs("table",{className:"w-full",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"bg-gray-50 text-left text-xs text-gray-500 uppercase tracking-wider",children:[l.jsx("th",{className:"px-4 py-3",children:"Fecha"}),l.jsx("th",{className:"px-4 py-3",children:"Flujo"}),l.jsx("th",{className:"px-4 py-3",children:"Telfono"}),l.jsx("th",{className:"px-4 py-3",children:"Estado"}),l.jsx("th",{className:"px-4 py-3",children:"Nodos"}),l.jsx("th",{className:"px-4 py-3",children:"Duracin"}),l.jsx("th",{className:"px-4 py-3"})]})}),l.jsx("tbody",{className:"divide-y divide-gray-100",children:t.map(N=>{const E=Vi[N.status]||Vi.running,D=E.icon;return l.jsxs("tr",{className:"hover:bg-gray-50 transition",children:[l.jsxs("td",{className:"px-4 py-3 text-sm",children:[l.jsx("div",{className:"text-gray-800",children:$c(new Date(N.started_at),"dd/MM HH:mm")}),l.jsx("div",{className:"text-xs text-gray-400",children:qc(new Date(N.started_at),{addSuffix:!0,locale:Mr})})]}),l.jsxs("td",{className:"px-4 py-3",children:[l.jsx("div",{className:"font-medium text-gray-800",children:N.flow_name||"Sin nombre"}),l.jsx("div",{className:"text-xs text-gray-400",children:N.trigger_type})]}),l.jsx("td",{className:"px-4 py-3",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Hc,{className:"w-3 h-3 text-gray-400"}),l.jsx("span",{className:"text-sm text-gray-700",children:N.phone})]})}),l.jsx("td",{className:"px-4 py-3",children:l.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium",style:{background:`${E.color}20`,color:E.color},children:[l.jsx(D,{className:"w-3 h-3"}),E.label]})}),l.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:N.total_nodes_executed||0}),l.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:N.total_duration_ms?`${Math.round(N.total_duration_ms)}ms`:"-"}),l.jsx("td",{className:"px-4 py-3",children:l.jsx("button",{onClick:()=>S(N),className:"p-2 hover:bg-gray-100 rounded-lg transition",title:"Ver detalle",children:l.jsx(eb,{className:"w-4 h-4 text-gray-400"})})})]},N.id)})})]})}),f&&l.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:()=>m(null),children:l.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-2xl max-h-[80vh] overflow-auto m-4",onClick:N=>N.stopPropagation(),children:[l.jsxs("div",{className:"p-4 border-b border-gray-200 flex items-center justify-between sticky top-0 bg-white",children:[l.jsx("h3",{className:"font-semibold text-gray-800",children:"Detalle de Ejecucin"}),l.jsx("button",{onClick:()=>m(null),className:"p-2 hover:bg-gray-100 rounded-lg",children:l.jsx(Dh,{className:"w-4 h-4"})})]}),p?l.jsx("div",{className:"p-8 text-center",children:l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-green-500 mx-auto"})}):l.jsxs("div",{className:"p-4 space-y-6",children:[l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-xs text-gray-400 mb-1",children:"Flujo"}),l.jsx("p",{className:"font-medium",children:f.flow_name})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-xs text-gray-400 mb-1",children:"Telfono"}),l.jsx("p",{className:"font-medium",children:f.phone})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-xs text-gray-400 mb-1",children:"Mensaje trigger"}),l.jsx("p",{className:"text-sm bg-gray-100 p-2 rounded",children:f.trigger_message||"-"})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-xs text-gray-400 mb-1",children:"Estado final"}),l.jsx("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium",style:{background:`${Vi[f.status]?.color}20`,color:Vi[f.status]?.color},children:Vi[f.status]?.label})]})]}),f.variables&&Object.keys(f.variables).length>0&&l.jsxs("div",{children:[l.jsx("p",{className:"text-xs text-gray-400 mb-2",children:"Variables capturadas"}),l.jsx("div",{className:"bg-gray-50 rounded-lg p-3 space-y-1",children:Object.entries(f.variables).map(([N,E])=>l.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[l.jsxs("span",{className:"font-mono text-purple-600",children:[N,":"]}),l.jsx("span",{className:"text-gray-700",children:String(E)})]},N))})]}),f.steps&&f.steps.length>0&&l.jsxs("div",{children:[l.jsx("p",{className:"text-xs text-gray-400 mb-2",children:"Nodos ejecutados"}),l.jsx("div",{className:"space-y-2",children:f.steps.map((N,E)=>l.jsxs("div",{className:"flex items-start gap-3 p-3 bg-gray-50 rounded-lg",children:[l.jsx("div",{className:"w-6 h-6 rounded-full bg-green-100 text-green-600 flex items-center justify-center text-xs font-medium",children:E+1}),l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"font-medium text-sm",children:N.node_id}),l.jsx("span",{className:"text-xs px-2 py-0.5 bg-gray-200 rounded text-gray-600",children:N.node_type}),l.jsxs("span",{className:"text-xs text-gray-400",children:[N.duration_ms,"ms"]})]}),N.output&&l.jsx("p",{className:"text-sm text-gray-600 mt-1 break-words",children:N.output})]})]},E))})]}),f.error_message&&l.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:[l.jsx("p",{className:"text-xs text-red-600 font-medium mb-1",children:"Error"}),l.jsx("p",{className:"text-sm text-red-700",children:f.error_message}),f.error_node_id&&l.jsxs("p",{className:"text-xs text-red-500 mt-1",children:["En nodo: ",f.error_node_id]})]})]})]})})]})}const nu="/api/leads";async function au(t,a){if(!t.ok){let s=a;try{const i=await t.json();i.error&&(s=i.error)}catch{}throw new Error(s)}return t.json()}async function cA(t={}){const a=new URLSearchParams(t).toString(),s=await fetch(`${nu}?${a}`);return au(s,"Error al cargar leads")}async function uA(){const t=await fetch(`${nu}/stats`);return au(t,"Error al cargar estadsticas")}async function dA(t,a){const s=await fetch(`${nu}/${encodeURIComponent(t)}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});return au(s,"Error al actualizar lead")}async function fA(t,a,s){const i=await fetch(`${nu}/${encodeURIComponent(t)}/adjust-score`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({adjustment:a,reason:s})});return au(i,"Error al ajustar score")}const ac={new:{label:"Nuevo",color:"#6b7280",bg:"#f3f4f6"},engaged:{label:"Interesado",color:"#3b82f6",bg:"#dbeafe"},qualified:{label:"Calificado",color:"#10b981",bg:"#d1fae5"},customer:{label:"Cliente",color:"#8b5cf6",bg:"#ede9fe"},inactive:{label:"Inactivo",color:"#9ca3af",bg:"#f9fafb"}},Ay={hot:{color:"#ef4444",label:"Caliente",range:"80-100"},warm:{color:"#f59e0b",label:"Tibio",range:"50-79"},cold:{color:"#3b82f6",label:"Fro",range:"20-49"},new:{color:"#6b7280",label:"Nuevo",range:"0-19"}};function hA(t){return t>=80?"hot":t>=50?"warm":t>=20?"cold":"new"}function mA(){const t=Ts(),[a,s]=_.useState([]),[i,c]=_.useState(null),[u,f]=_.useState(!0),[m,p]=_.useState(null),[g,y]=_.useState({status:"",min_score:"",search:"",sort_by:"current_score",sort_dir:"desc"});_.useEffect(()=>{x()},[]);const x=async()=>{f(!0);try{const[N,E]=await Promise.all([cA({limit:100,...g}),uA()]);s(N.leads||[]),c(E)}catch(N){console.error("Error loading leads:",N)}finally{f(!1)}},b=(N,E)=>{y(D=>({...D,[N]:E}))},S=()=>{x()},j=async(N,E)=>{try{await dA(N,{status:E}),x()}catch(D){console.error("Error updating lead:",D)}},A=async(N,E)=>{try{await fA(N,E,"Manual adjustment"),x()}catch(D){console.error("Error adjusting score:",D)}};return u?l.jsx("div",{className:"p-8 flex items-center justify-center h-full",children:l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-500"})}):l.jsxs("div",{className:"p-8",children:[l.jsxs("div",{className:"flex items-center justify-between mb-8",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Gestin de Leads"}),l.jsx("p",{className:"text-gray-500 mt-1",children:"Administra y califica tus leads"})]}),l.jsxs("button",{onClick:x,className:"flex items-center gap-2 px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg text-gray-700 transition",children:[l.jsx(Rh,{className:"w-4 h-4"}),"Actualizar"]})]}),i&&l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 mb-8",children:[l.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-100 shadow-sm",children:[l.jsx("p",{className:"text-sm text-gray-500",children:"Total Leads"}),l.jsx("p",{className:"text-2xl font-bold text-gray-800",children:i.stats?.total_leads||0})]}),l.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-100 shadow-sm",children:[l.jsx("p",{className:"text-sm text-gray-500",children:"Score Promedio"}),l.jsx("p",{className:"text-2xl font-bold text-blue-600",children:i.stats?.avg_score||0})]}),l.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-100 shadow-sm",children:[l.jsx("p",{className:"text-sm text-gray-500",children:"Nuevos"}),l.jsx("p",{className:"text-2xl font-bold text-gray-600",children:i.stats?.new_leads||0})]}),l.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-100 shadow-sm",children:[l.jsx("p",{className:"text-sm text-gray-500",children:"Calificados"}),l.jsx("p",{className:"text-2xl font-bold text-green-600",children:i.stats?.qualified_leads||0})]}),l.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-100 shadow-sm",children:[l.jsx("p",{className:"text-sm text-gray-500",children:"Clientes"}),l.jsx("p",{className:"text-2xl font-bold text-purple-600",children:i.stats?.customers||0})]})]}),i?.score_distribution&&l.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-100 shadow-sm mb-6",children:[l.jsx("p",{className:"text-sm font-medium text-gray-700 mb-3",children:"Distribucin de Scores"}),l.jsx("div",{className:"flex gap-4",children:Object.entries(Ay).map(([N,E])=>{const D=i.score_distribution.find(C=>C.category===N)?.count||0;return l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-3 h-3 rounded-full",style:{background:E.color}}),l.jsxs("span",{className:"text-sm text-gray-600",children:[E.label,": ",l.jsx("strong",{children:D})]})]},N)})})]}),l.jsx("div",{className:"bg-white rounded-xl p-4 border border-gray-100 shadow-sm mb-6",children:l.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(kh,{className:"w-4 h-4 text-gray-400"}),l.jsx("span",{className:"text-sm text-gray-600",children:"Filtrar:"})]}),l.jsxs("div",{className:"relative",children:[l.jsx(sb,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),l.jsx("input",{type:"text",value:g.search,onChange:N=>b("search",N.target.value),placeholder:"Buscar...",className:"pl-10 pr-4 py-2 border border-gray-200 rounded-lg text-sm focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none w-48"})]}),l.jsxs("select",{value:g.status,onChange:N=>b("status",N.target.value),className:"px-3 py-2 border border-gray-200 rounded-lg text-sm focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none",children:[l.jsx("option",{value:"",children:"Todos los estados"}),Object.entries(ac).map(([N,E])=>l.jsx("option",{value:N,children:E.label},N))]}),l.jsxs("select",{value:g.min_score,onChange:N=>b("min_score",N.target.value),className:"px-3 py-2 border border-gray-200 rounded-lg text-sm focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none",children:[l.jsx("option",{value:"",children:"Todos los scores"}),l.jsx("option",{value:"80",children:"Score 80+ (Caliente)"}),l.jsx("option",{value:"50",children:"Score 50+ (Tibio)"}),l.jsx("option",{value:"20",children:"Score 20+ (Fro)"})]}),l.jsxs("select",{value:`${g.sort_by}-${g.sort_dir}`,onChange:N=>{const[E,D]=N.target.value.split("-");b("sort_by",E),b("sort_dir",D)},className:"px-3 py-2 border border-gray-200 rounded-lg text-sm focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none",children:[l.jsx("option",{value:"current_score-desc",children:"Mayor score"}),l.jsx("option",{value:"current_score-asc",children:"Menor score"}),l.jsx("option",{value:"last_interaction-desc",children:"Ms reciente"}),l.jsx("option",{value:"total_messages-desc",children:"Ms mensajes"})]}),l.jsx("button",{onClick:S,className:"px-4 py-2 bg-green-500 hover:bg-green-600 text-white rounded-lg text-sm transition",children:"Aplicar"})]})}),l.jsx("div",{className:"bg-white rounded-xl border border-gray-100 shadow-sm overflow-hidden",children:a.length===0?l.jsxs("div",{className:"p-12 text-center text-gray-400",children:[l.jsx(Lc,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),l.jsx("p",{children:"No hay leads registrados"}),l.jsx("p",{className:"text-sm mt-1",children:"Los leads se crean automticamente cuando interactan"})]}):l.jsxs("table",{className:"w-full",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"bg-gray-50 text-left text-xs text-gray-500 uppercase tracking-wider",children:[l.jsx("th",{className:"px-4 py-3",children:"Lead"}),l.jsx("th",{className:"px-4 py-3",children:"Score"}),l.jsx("th",{className:"px-4 py-3",children:"Estado"}),l.jsx("th",{className:"px-4 py-3",children:"Mensajes"}),l.jsx("th",{className:"px-4 py-3",children:"ltima actividad"}),l.jsx("th",{className:"px-4 py-3",children:"Acciones"})]})}),l.jsx("tbody",{className:"divide-y divide-gray-100",children:a.map(N=>{const E=hA(N.current_score),D=Ay[E],C=ac[N.status]||ac.new;return l.jsxs("tr",{className:"hover:bg-gray-50 transition",children:[l.jsx("td",{className:"px-4 py-3",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center",children:l.jsx("span",{className:"text-green-600 font-medium",children:N.contact_name?.[0]?.toUpperCase()||N.phone.slice(-2)})}),l.jsxs("div",{children:[l.jsx("div",{className:"font-medium text-gray-800",children:N.contact_name||"Sin nombre"}),l.jsxs("div",{className:"text-xs text-gray-400 flex items-center gap-1",children:[l.jsx(Hc,{className:"w-3 h-3"}),N.phone]})]})]})}),l.jsx("td",{className:"px-4 py-3",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center font-bold text-sm",style:{background:`${D.color}20`,color:D.color},children:N.current_score}),l.jsxs("div",{className:"flex flex-col gap-0.5",children:[l.jsx("button",{onClick:()=>A(N.phone,5),className:"p-1 hover:bg-green-100 rounded text-green-600",title:"+5 puntos",children:l.jsx(ab,{className:"w-3 h-3"})}),l.jsx("button",{onClick:()=>A(N.phone,-5),className:"p-1 hover:bg-red-100 rounded text-red-600",title:"-5 puntos",children:l.jsx(cj,{className:"w-3 h-3"})})]})]})}),l.jsx("td",{className:"px-4 py-3",children:l.jsx("select",{value:N.status,onChange:k=>j(N.phone,k.target.value),className:"px-2 py-1 rounded-full text-xs font-medium border-0 cursor-pointer",style:{background:C.bg,color:C.color},children:Object.entries(ac).map(([k,w])=>l.jsx("option",{value:k,children:w.label},k))})}),l.jsx("td",{className:"px-4 py-3",children:l.jsxs("div",{className:"flex items-center gap-1 text-sm text-gray-600",children:[l.jsx(Cr,{className:"w-4 h-4"}),N.total_messages||N.message_count||0]})}),l.jsx("td",{className:"px-4 py-3 text-sm text-gray-500",children:N.last_interaction?qc(new Date(N.last_interaction),{addSuffix:!0,locale:Mr}):"-"}),l.jsx("td",{className:"px-4 py-3",children:l.jsx("button",{onClick:()=>t(`/conversations?phone=${encodeURIComponent(N.phone)}`),className:"p-2 hover:bg-gray-100 rounded-lg transition",title:"Ver conversacin",children:l.jsx(eb,{className:"w-4 h-4 text-gray-400"})})})]},N.phone)})})]})})]})}const xo="/api/flow-analytics";async function yo(t,a){if(!t.ok){let s=a;try{const i=await t.json();i.error&&(s=i.error)}catch{}throw new Error(s)}return t.json()}async function pA(t=7){const a=await fetch(`${xo}/summary?days=${t}`);return yo(a,"Error al cargar resumen")}async function gA(t=14){const a=await fetch(`${xo}/timeline?days=${t}`);return yo(a,"Error al cargar timeline")}async function xA(t=7){const a=await fetch(`${xo}/by-flow?days=${t}`);return yo(a,"Error al cargar mtricas por flujo")}async function yA(t=7){const a=await fetch(`${xo}/by-hour?days=${t}`);return yo(a,"Error al cargar distribucin horaria")}async function bA(t=7){const a=await fetch(`${xo}/trigger-types?days=${t}`);return yo(a,"Error al cargar tipos de trigger")}function vA(){const[t,a]=_.useState(null),[s,i]=_.useState([]),[c,u]=_.useState([]),[f,m]=_.useState([]),[p,g]=_.useState([]),[y,x]=_.useState(!0),[b,S]=_.useState(7);_.useEffect(()=>{j()},[b]);const j=async()=>{x(!0);try{const[E,D,C,k,w]=await Promise.all([pA(b),gA(b),xA(b),yA(b),bA(b)]);a(E.summary),i(D.timeline||[]),u(C.flows||[]),m(k.hourly||[]),g(w.trigger_types||[])}catch(E){console.error("Error loading analytics:",E)}finally{x(!1)}};if(y)return l.jsx("div",{className:"p-8 flex items-center justify-center h-full",children:l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-500"})});const A=Math.max(...s.map(E=>E.total),1),N=Math.max(...f.map(E=>E.executions),1);return l.jsxs("div",{className:"p-8",children:[l.jsxs("div",{className:"flex items-center justify-between mb-8",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Analytics de Flujos"}),l.jsx("p",{className:"text-gray-500 mt-1",children:"Mtricas y anlisis de rendimiento"})]}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsxs("select",{value:b,onChange:E=>S(parseInt(E.target.value)),className:"px-3 py-2 border border-gray-200 rounded-lg text-sm focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none",children:[l.jsx("option",{value:7,children:"ltimos 7 das"}),l.jsx("option",{value:14,children:"ltimos 14 das"}),l.jsx("option",{value:30,children:"ltimos 30 das"})]}),l.jsxs("button",{onClick:j,className:"flex items-center gap-2 px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg text-gray-700 transition",children:[l.jsx(Rh,{className:"w-4 h-4"}),"Actualizar"]})]})]}),t&&l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[l.jsx("div",{className:"bg-white rounded-xl p-5 border border-gray-100 shadow-sm",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-500",children:"Total Ejecuciones"}),l.jsx("p",{className:"text-3xl font-bold text-gray-800 mt-1",children:t.executions.total}),l.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:[t.executions.unique_users," usuarios nicos"]})]}),l.jsx("div",{className:"p-3 bg-blue-50 rounded-xl",children:l.jsx(ws,{className:"w-6 h-6 text-blue-600"})})]})}),l.jsx("div",{className:"bg-white rounded-xl p-5 border border-gray-100 shadow-sm",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-500",children:"Tasa de Completado"}),l.jsxs("p",{className:"text-3xl font-bold text-green-600 mt-1",children:[t.executions.completion_rate,"%"]}),l.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:[t.executions.completed," completados"]})]}),l.jsx("div",{className:"p-3 bg-green-50 rounded-xl",children:l.jsx(bc,{className:"w-6 h-6 text-green-600"})})]})}),l.jsx("div",{className:"bg-white rounded-xl p-5 border border-gray-100 shadow-sm",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-500",children:"Fallidos"}),l.jsx("p",{className:"text-3xl font-bold text-red-500 mt-1",children:t.executions.failed}),l.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:[t.executions.transferred," transferidos"]})]}),l.jsx("div",{className:"p-3 bg-red-50 rounded-xl",children:l.jsx(Ah,{className:"w-6 h-6 text-red-500"})})]})}),l.jsx("div",{className:"bg-white rounded-xl p-5 border border-gray-100 shadow-sm",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-500",children:"Tiempo Promedio"}),l.jsxs("p",{className:"text-3xl font-bold text-purple-600 mt-1",children:[t.executions.avg_duration_ms,"ms"]}),l.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:[t.executions.avg_nodes," nodos promedio"]})]}),l.jsx("div",{className:"p-3 bg-purple-50 rounded-xl",children:l.jsx(vc,{className:"w-6 h-6 text-purple-600"})})]})})]}),l.jsxs("div",{className:"bg-white rounded-xl border border-gray-100 shadow-sm p-6 mb-6",children:[l.jsxs("h3",{className:"font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[l.jsx(Ej,{className:"w-5 h-5 text-gray-400"}),"Ejecuciones por da"]}),s.length===0?l.jsx("div",{className:"text-center text-gray-400 py-8",children:"No hay datos para mostrar"}):l.jsx("div",{className:"flex items-end gap-2 h-40",children:s.map((E,D)=>l.jsxs("div",{className:"flex-1 flex flex-col items-center",children:[l.jsxs("div",{className:"w-full flex flex-col gap-0.5",style:{height:"120px"},children:[l.jsx("div",{className:"w-full bg-green-500 rounded-t",style:{height:`${E.completed/A*100}%`},title:`Completados: ${E.completed}`}),l.jsx("div",{className:"w-full bg-red-400",style:{height:`${E.failed/A*100}%`},title:`Fallidos: ${E.failed}`}),l.jsx("div",{className:"w-full bg-yellow-400 rounded-b",style:{height:`${E.transferred/A*100}%`},title:`Transferidos: ${E.transferred}`})]}),l.jsx("div",{className:"text-xs text-gray-400 mt-2",children:$c(new Date(E.date),"dd/MM")})]},D))}),l.jsxs("div",{className:"flex items-center gap-4 mt-4 pt-4 border-t border-gray-100",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-3 h-3 rounded bg-green-500"}),l.jsx("span",{className:"text-xs text-gray-500",children:"Completados"})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-3 h-3 rounded bg-red-400"}),l.jsx("span",{className:"text-xs text-gray-500",children:"Fallidos"})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-3 h-3 rounded bg-yellow-400"}),l.jsx("span",{className:"text-xs text-gray-500",children:"Transferidos"})]})]})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[l.jsxs("div",{className:"bg-white rounded-xl border border-gray-100 shadow-sm p-6",children:[l.jsxs("h3",{className:"font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[l.jsx(tb,{className:"w-5 h-5 text-gray-400"}),"Rendimiento por Flujo"]}),c.length===0?l.jsx("div",{className:"text-center text-gray-400 py-8",children:"No hay flujos configurados"}):l.jsx("div",{className:"space-y-3",children:c.slice(0,5).map((E,D)=>l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-8 h-8 rounded-lg bg-gray-100 flex items-center justify-center text-sm font-medium text-gray-600",children:D+1}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("p",{className:"font-medium text-gray-800 truncate",children:E.flow_name}),l.jsxs("span",{className:"text-sm text-gray-500",children:[E.recent_executions," ejecuciones"]})]}),l.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[l.jsx("div",{className:"flex-1 h-2 bg-gray-100 rounded-full overflow-hidden",children:l.jsx("div",{className:"h-full bg-green-500",style:{width:`${E.completion_rate}%`}})}),l.jsxs("span",{className:"text-xs text-gray-400",children:[E.completion_rate,"%"]})]})]})]},E.flow_id))}),l.jsx(bs,{to:"/flows",className:"block text-center text-sm text-green-600 hover:text-green-700 mt-4 pt-4 border-t border-gray-100",children:"Ver todos los flujos"})]}),l.jsxs("div",{className:"bg-white rounded-xl border border-gray-100 shadow-sm p-6",children:[l.jsxs("h3",{className:"font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[l.jsx(vc,{className:"w-5 h-5 text-gray-400"}),"Actividad por Hora"]}),l.jsx("div",{className:"flex items-end gap-1 h-32",children:f.map((E,D)=>l.jsx("div",{className:"flex-1 bg-blue-500 rounded-t transition-all hover:bg-blue-600",style:{height:`${E.executions/N*100}%`,minHeight:E.executions>0?"4px":"0"},title:`${E.hour}:00 - ${E.executions} ejecuciones`},D))}),l.jsxs("div",{className:"flex justify-between text-xs text-gray-400 mt-2",children:[l.jsx("span",{children:"00:00"}),l.jsx("span",{children:"06:00"}),l.jsx("span",{children:"12:00"}),l.jsx("span",{children:"18:00"}),l.jsx("span",{children:"23:00"})]})]})]}),l.jsxs("div",{className:"bg-white rounded-xl border border-gray-100 shadow-sm p-6",children:[l.jsxs("h3",{className:"font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[l.jsx(Jy,{className:"w-5 h-5 text-gray-400"}),"Distribucin por Tipo de Trigger"]}),p.length===0?l.jsx("div",{className:"text-center text-gray-400 py-8",children:"No hay datos de triggers"}):l.jsx("div",{className:"flex gap-6",children:p.map((E,D)=>{const C=["#10b981","#3b82f6","#f59e0b","#8b5cf6","#ec4899"],k=C[D%C.length],w=p.reduce((M,Y)=>M+Y.count,0),z=w>0?Math.round(E.count/w*100):0;return l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-2",style:{background:`${k}20`},children:l.jsxs("span",{className:"text-xl font-bold",style:{color:k},children:[z,"%"]})}),l.jsx("p",{className:"text-sm font-medium text-gray-800 capitalize",children:E.trigger_type}),l.jsxs("p",{className:"text-xs text-gray-400",children:[E.count," ejecuciones"]})]},E.trigger_type)})})]})]})}function wA(){const[t,a]=_.useState([]),[s,i]=_.useState(null),[c,u]=_.useState({running:0,connectedMonitors:0}),[f,m]=_.useState(!1);return _.useEffect(()=>{const p=new EventSource("/api/flow-monitor/stream");return p.onopen=()=>m(!0),p.onerror=()=>m(!1),p.onmessage=g=>{const y=JSON.parse(g.data);switch(y.type){case"connected":u({running:y.activeCount,connectedMonitors:0});break;case"active_execution":a(x=>x.find(S=>S.executionId===y.executionId)?x:[y,...x]);break;case"flow_started":a(x=>[y,...x]);break;case"node_started":case"node_completed":a(x=>x.map(b=>b.executionId===y.executionId?{...b,currentNodeId:y.nodeId,currentNodeType:y.nodeType,variables:y.variables,steps:y.type==="node_completed"?[...b.steps||[],{nodeId:y.nodeId,nodeType:y.nodeType,durationMs:y.durationMs,status:y.status,timestamp:y.timestamp}]:b.steps}:b));break;case"flow_completed":case"flow_error":case"flow_transferred":a(x=>x.map(b=>b.executionId===y.executionId?{...b,status:y.type.replace("flow_",""),completedAt:y.timestamp}:b));break}},()=>p.close()},[]),l.jsxs("div",{className:"h-screen flex flex-col bg-gray-50",children:[l.jsx("header",{className:"bg-white border-b px-6 py-4",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Monitor de Flujos"}),l.jsx("p",{className:"text-gray-500",children:"Tiempo real"})]}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:`w-2 h-2 rounded-full ${f?"bg-green-500":"bg-red-500"}`}),l.jsx("span",{className:"text-sm text-gray-600",children:f?"Conectado":"Desconectado"})]}),l.jsxs("div",{className:"text-sm text-gray-600",children:[t.filter(p=>!p.status).length," ejecuciones activas"]})]})]})}),l.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[l.jsxs("aside",{className:"w-80 bg-white border-r overflow-y-auto",children:[l.jsx("div",{className:"p-4 border-b",children:l.jsx("h2",{className:"font-semibold text-gray-700",children:"Ejecuciones"})}),l.jsx("div",{className:"divide-y",children:t.length===0?l.jsx("div",{className:"p-8 text-center text-gray-400",children:"Sin ejecuciones"}):t.map(p=>l.jsx("button",{onClick:()=>i(p),className:`w-full p-4 text-left hover:bg-gray-50 transition ${s?.executionId===p.executionId?"bg-green-50":""}`,children:l.jsxs("div",{className:"flex items-start justify-between gap-2",children:[l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[l.jsx(Hc,{className:"w-4 h-4 text-gray-400 flex-shrink-0"}),l.jsx("span",{className:"font-mono text-sm text-gray-700 truncate",children:p.phone})]}),l.jsx("p",{className:"text-xs text-gray-500 truncate mb-1",children:p.flowName||p.flowSlug}),p.currentNodeId&&l.jsxs("div",{className:"flex items-center gap-1 text-xs",children:[l.jsx(ws,{className:"w-3 h-3 text-green-500"}),l.jsx("span",{className:"text-gray-600",children:p.currentNodeId})]})]}),l.jsxs("div",{children:[p.status==="completed"&&l.jsx(bc,{className:"w-5 h-5 text-green-500"}),p.status==="error"&&l.jsx(Ah,{className:"w-5 h-5 text-red-500"}),p.status==="transferred"&&l.jsx(Sr,{className:"w-5 h-5 text-yellow-500"}),!p.status&&l.jsx(ws,{className:"w-5 h-5 text-green-500 animate-pulse"})]})]})},p.executionId))})]}),l.jsx("main",{className:"flex-1 flex",children:s?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"flex-1 p-6 overflow-auto",children:l.jsxs("div",{className:"bg-white rounded-lg border p-6",children:[l.jsx("h3",{className:"font-semibold text-gray-700 mb-4",children:"Ejecucin del Flujo"}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{children:[l.jsx("span",{className:"text-sm text-gray-500",children:"Flujo:"}),l.jsx("p",{className:"font-medium",children:s.flowName})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-sm text-gray-500",children:"Telfono:"}),l.jsx("p",{className:"font-mono text-sm",children:s.phone})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-sm text-gray-500",children:"Nodo Actual:"}),l.jsx("p",{className:"font-mono text-sm",children:s.currentNodeId||"N/A"})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-sm text-gray-500",children:"Tipo de Nodo:"}),l.jsx("p",{className:"font-mono text-sm",children:s.currentNodeType||"N/A"})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-sm text-gray-500",children:"Estado:"}),l.jsxs("p",{className:"font-medium",children:[s.status==="completed"&&"Completado ",s.status==="error"&&"Error ",s.status==="transferred"&&"Transferido ",!s.status&&"En ejecucin..."]})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-sm text-gray-500",children:"Iniciado:"}),l.jsx("p",{className:"text-sm",children:s.timestamp?new Date(s.timestamp).toLocaleString("es-CL"):"N/A"})]}),s.completedAt&&l.jsxs("div",{children:[l.jsx("span",{className:"text-sm text-gray-500",children:"Completado:"}),l.jsx("p",{className:"text-sm",children:new Date(s.completedAt).toLocaleString("es-CL")})]})]})]})}),l.jsxs("aside",{className:"w-96 bg-white border-l overflow-y-auto",children:[l.jsx("div",{className:"p-4 border-b",children:l.jsx("h2",{className:"font-semibold text-gray-700",children:"Detalles"})}),l.jsxs("div",{className:"p-4 space-y-4",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"text-sm font-semibold text-gray-600 mb-2",children:"Variables"}),l.jsx("div",{className:"bg-gray-50 rounded p-3 font-mono text-xs",children:l.jsx("pre",{className:"whitespace-pre-wrap break-words",children:JSON.stringify(s.variables||{},null,2)})})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-sm font-semibold text-gray-600 mb-2",children:"Timeline"}),l.jsx("div",{className:"space-y-2",children:s.steps&&s.steps.length>0?s.steps.map((p,g)=>l.jsxs("div",{className:"flex items-start gap-2 text-xs",children:[l.jsx(bc,{className:"w-4 h-4 text-green-500 flex-shrink-0 mt-0.5"}),l.jsxs("div",{className:"flex-1",children:[l.jsx("p",{className:"font-medium text-gray-700",children:p.nodeId}),l.jsxs("p",{className:"text-gray-500",children:[p.nodeType,"  ",p.durationMs,"ms"]}),p.timestamp&&l.jsx("p",{className:"text-gray-400",children:new Date(p.timestamp).toLocaleTimeString("es-CL")})]})]},g)):l.jsx("p",{className:"text-gray-400 text-sm",children:"Sin eventos an"})})]})]})]})]}):l.jsx("div",{className:"flex-1 flex items-center justify-center text-gray-400",children:l.jsxs("div",{className:"text-center",children:[l.jsx(ws,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),l.jsx("p",{children:"Selecciona una ejecucin para ver detalles"})]})})})]})]})}const yr=()=>{const t=It.getState().token;return{"Content-Type":"application/json",...t?{Authorization:`Bearer ${t}`}:{}}};function SA(){const[t,a]=_.useState([]),[s,i]=_.useState([]),[c,u]=_.useState(!0),[f,m]=_.useState(!1),[p,g]=_.useState(null),[y,x]=_.useState({}),[b,S]=_.useState({username:"",password:"",name:"",email:"",role:"agent",departmentId:"",avatarColor:"#6366f1"}),[j,A]=_.useState(""),[N,E]=_.useState(!1),D=async()=>{try{const[U,ne]=await Promise.all([fetch("/api/agents",{headers:yr()}),fetch("/api/departments",{headers:yr()})]),Q=await U.json(),I=await ne.json();Q.ok&&a(Q.agents),I.ok&&i(I.departments)}catch(U){console.error("Error loading data:",U)}finally{u(!1)}};_.useEffect(()=>{D()},[]);const C=()=>{g(null),S({username:"",password:"",name:"",email:"",role:"agent",departmentId:"",avatarColor:"#6366f1"}),A(""),m(!0)},k=U=>{g(U),S({username:U.username,password:"",name:U.name,email:U.email||"",role:U.role,departmentId:U.department_id||"",avatarColor:U.avatar_color||"#6366f1"}),A(""),m(!0)},w=async U=>{U.preventDefault(),A(""),E(!0);try{const ne={name:b.name,email:b.email||null,role:b.role,departmentId:b.departmentId?Number(b.departmentId):null,avatarColor:b.avatarColor};if(p){b.password&&(ne.password=b.password);const I=await(await fetch(`/api/agents/${p.id}`,{method:"PUT",headers:yr(),body:JSON.stringify(ne)})).json();if(!I.ok)throw new Error(I.error)}else{ne.username=b.username,ne.password=b.password;const I=await(await fetch("/api/agents",{method:"POST",headers:yr(),body:JSON.stringify(ne)})).json();if(!I.ok)throw new Error(I.error)}m(!1),D()}catch(ne){A(ne.message)}finally{E(!1)}},z=async U=>{if(confirm(`Desactivar agente "${U.name}"?`))try{await fetch(`/api/agents/${U.id}`,{method:"DELETE",headers:yr()}),D()}catch(ne){alert("Error: "+ne.message)}},M=async U=>{if(confirm(`Regenerar API key de "${U.name}"? La anterior dejara de funcionar.`))try{const Q=await(await fetch(`/api/agents/${U.id}/regenerate-api-key`,{method:"POST",headers:yr()})).json();Q.ok&&(D(),alert(`Nueva API key: ${Q.apiKey}`))}catch(ne){alert("Error: "+ne.message)}},Y=["#6366f1","#22c55e","#ef4444","#f59e0b","#3b82f6","#ec4899","#8b5cf6","#14b8a6","#f97316","#06b6d4"];return c?l.jsx("div",{className:"p-8 flex justify-center",children:l.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-green-500 border-t-transparent rounded-full"})}):l.jsxs("div",{className:"p-6",children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Agentes"}),l.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Gestiona los agentes del sistema"})]}),l.jsxs("button",{onClick:C,className:"flex items-center gap-2 bg-green-600 hover:bg-green-700 text-white px-4 py-2.5 rounded-lg transition font-medium",children:[l.jsx(Tr,{className:"w-4 h-4"})," Nuevo Agente"]})]}),l.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:l.jsxs("table",{className:"w-full",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"bg-gray-50 border-b border-gray-200",children:[l.jsx("th",{className:"text-left px-6 py-3 text-xs font-semibold text-gray-500 uppercase",children:"Agente"}),l.jsx("th",{className:"text-left px-6 py-3 text-xs font-semibold text-gray-500 uppercase",children:"Rol"}),l.jsx("th",{className:"text-left px-6 py-3 text-xs font-semibold text-gray-500 uppercase",children:"Departamento"}),l.jsx("th",{className:"text-left px-6 py-3 text-xs font-semibold text-gray-500 uppercase",children:"Estado"}),l.jsx("th",{className:"text-left px-6 py-3 text-xs font-semibold text-gray-500 uppercase",children:"API Key"}),l.jsx("th",{className:"text-left px-6 py-3 text-xs font-semibold text-gray-500 uppercase",children:"Ultimo Login"}),l.jsx("th",{className:"text-right px-6 py-3 text-xs font-semibold text-gray-500 uppercase",children:"Acciones"})]})}),l.jsxs("tbody",{className:"divide-y divide-gray-100",children:[t.map(U=>l.jsxs("tr",{className:`hover:bg-gray-50 ${U.status==="inactive"?"opacity-50":""}`,children:[l.jsx("td",{className:"px-6 py-4",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-9 h-9 rounded-full flex items-center justify-center flex-shrink-0",style:{backgroundColor:U.avatar_color||"#6366f1"},children:l.jsx("span",{className:"text-white text-sm font-medium",children:U.name?.[0]?.toUpperCase()})}),l.jsxs("div",{children:[l.jsx("p",{className:"font-medium text-gray-900 text-sm",children:U.name}),l.jsxs("p",{className:"text-xs text-gray-400",children:["@",U.username]})]})]})}),l.jsx("td",{className:"px-6 py-4",children:l.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium ${U.role==="supervisor"?"bg-purple-50 text-purple-700":"bg-blue-50 text-blue-700"}`,children:[U.role==="supervisor"?l.jsx(bj,{className:"w-3 h-3"}):l.jsx(Sr,{className:"w-3 h-3"}),U.role==="supervisor"?"Supervisor":"Agente"]})}),l.jsx("td",{className:"px-6 py-4",children:U.department_name?l.jsx("span",{className:"text-sm px-2 py-1 rounded-full",style:{backgroundColor:`${U.department_color}20`,color:U.department_color},children:U.department_name}):l.jsx("span",{className:"text-xs text-gray-400",children:"Sin asignar"})}),l.jsx("td",{className:"px-6 py-4",children:l.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${U.status==="active"?"bg-green-50 text-green-700":"bg-gray-100 text-gray-500"}`,children:U.status==="active"?"Activo":"Inactivo"})}),l.jsx("td",{className:"px-6 py-4",children:l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx("code",{className:"text-xs text-gray-400 font-mono",children:y[U.id]?U.api_key:U.api_key?"":"-"}),U.api_key&&l.jsx("button",{onClick:()=>x(ne=>({...ne,[U.id]:!ne[U.id]})),className:"p-1 text-gray-400 hover:text-gray-600",children:y[U.id]?l.jsx(UN,{className:"w-3 h-3"}):l.jsx(qN,{className:"w-3 h-3"})})]})}),l.jsx("td",{className:"px-6 py-4",children:l.jsx("span",{className:"text-xs text-gray-400",children:U.last_login?new Date(U.last_login).toLocaleString("es-CL"):"Nunca"})}),l.jsx("td",{className:"px-6 py-4 text-right",children:l.jsxs("div",{className:"flex items-center justify-end gap-1",children:[l.jsx("button",{onClick:()=>k(U),className:"p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg",title:"Editar",children:l.jsx(rb,{className:"w-4 h-4"})}),l.jsx("button",{onClick:()=>M(U),className:"p-2 text-gray-400 hover:text-yellow-600 hover:bg-yellow-50 rounded-lg",title:"Regenerar API Key",children:l.jsx(KN,{className:"w-4 h-4"})}),U.status==="active"&&l.jsx("button",{onClick:()=>z(U),className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg",title:"Desactivar",children:l.jsx(ib,{className:"w-4 h-4"})})]})})]},U.id)),!t.length&&l.jsx("tr",{children:l.jsx("td",{colSpan:"7",className:"text-center py-12 text-gray-400",children:"No hay agentes. Crea el primero."})})]})]})}),f&&l.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:l.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md p-6",children:[l.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-4",children:p?"Editar Agente":"Nuevo Agente"}),j&&l.jsx("div",{className:"bg-red-50 text-red-600 px-4 py-2 rounded-lg text-sm mb-4",children:j}),l.jsxs("form",{onSubmit:w,className:"space-y-4",children:[!p&&l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Username"}),l.jsx("input",{type:"text",value:b.username,onChange:U=>S({...b,username:U.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",required:!0,minLength:3})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:p?"Nueva Contrasena (dejar vacio para no cambiar)":"Contrasena"}),l.jsx("input",{type:"password",value:b.password,onChange:U=>S({...b,password:U.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",required:!p,minLength:6})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre completo"}),l.jsx("input",{type:"text",value:b.name,onChange:U=>S({...b,name:U.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email (opcional)"}),l.jsx("input",{type:"email",value:b.email,onChange:U=>S({...b,email:U.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm"})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Rol"}),l.jsxs("select",{value:b.role,onChange:U=>S({...b,role:U.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",children:[l.jsx("option",{value:"agent",children:"Agente"}),l.jsx("option",{value:"supervisor",children:"Supervisor"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Departamento"}),l.jsxs("select",{value:b.departmentId,onChange:U=>S({...b,departmentId:U.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",children:[l.jsx("option",{value:"",children:"Sin asignar"}),s.filter(U=>U.active).map(U=>l.jsx("option",{value:U.id,children:U.display_name},U.id))]})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Color avatar"}),l.jsx("div",{className:"flex gap-2",children:Y.map(U=>l.jsx("button",{type:"button",onClick:()=>S({...b,avatarColor:U}),className:`w-8 h-8 rounded-full transition ${b.avatarColor===U?"ring-2 ring-offset-2 ring-gray-400":""}`,style:{backgroundColor:U}},U))})]}),l.jsxs("div",{className:"flex gap-3 pt-2",children:[l.jsx("button",{type:"button",onClick:()=>m(!1),className:"flex-1 px-4 py-2.5 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition",children:"Cancelar"}),l.jsx("button",{type:"submit",disabled:N,className:"flex-1 px-4 py-2.5 bg-green-600 hover:bg-green-700 text-white rounded-lg transition disabled:opacity-50",children:N?"Guardando...":p?"Guardar":"Crear"})]})]})]})})]})}const sc=()=>{const t=It.getState().token;return{"Content-Type":"application/json",...t?{Authorization:`Bearer ${t}`}:{}}};function NA(){const[t,a]=_.useState([]),[s,i]=_.useState(!0),[c,u]=_.useState(!1),[f,m]=_.useState(null),[p,g]=_.useState({name:"",displayName:"",icon:"MessageSquare",color:"#6f42c1",autoAssignIntents:""}),[y,x]=_.useState(""),[b,S]=_.useState(!1),j=async()=>{try{const z=await(await fetch("/api/departments",{headers:sc()})).json();z.ok&&a(z.departments)}catch(w){console.error("Error loading departments:",w)}finally{i(!1)}};_.useEffect(()=>{j()},[]);const A=()=>{m(null),g({name:"",displayName:"",icon:"MessageSquare",color:"#6f42c1",autoAssignIntents:""}),x(""),u(!0)},N=w=>{m(w);const z=w.auto_assign_intents,M=Array.isArray(z)?z.join(", "):typeof z=="string"?JSON.parse(z||"[]").join(", "):"";g({name:w.name,displayName:w.display_name,icon:w.icon||"MessageSquare",color:w.color||"#6f42c1",autoAssignIntents:M}),x(""),u(!0)},E=async w=>{w.preventDefault(),x(""),S(!0);try{const z=p.autoAssignIntents.split(",").map(M=>M.trim().toLowerCase()).filter(Boolean);if(f){const Y=await(await fetch(`/api/departments/${f.id}`,{method:"PUT",headers:sc(),body:JSON.stringify({displayName:p.displayName,icon:p.icon,color:p.color,autoAssignIntents:z})})).json();if(!Y.ok)throw new Error(Y.error)}else{const Y=await(await fetch("/api/departments",{method:"POST",headers:sc(),body:JSON.stringify({name:p.name.toLowerCase().replace(/\s+/g,"_"),displayName:p.displayName,icon:p.icon,color:p.color,autoAssignIntents:z})})).json();if(!Y.ok)throw new Error(Y.error)}u(!1),j()}catch(z){x(z.message)}finally{S(!1)}},D=async w=>{if(confirm(`Desactivar departamento "${w.display_name}"?`))try{const M=await(await fetch(`/api/departments/${w.id}`,{method:"DELETE",headers:sc()})).json();if(!M.ok)throw new Error(M.error);j()}catch(z){alert("Error: "+z.message)}},C=["#28a745","#17a2b8","#ffc107","#6f42c1","#dc3545","#fd7e14","#20c997","#6610f2","#e83e8c","#007bff"],k=["MessageSquare","ShoppingCart","Wrench","Package","Phone","Mail","Star","Heart","Zap","Globe"];return s?l.jsx("div",{className:"p-8 flex justify-center",children:l.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-green-500 border-t-transparent rounded-full"})}):l.jsxs("div",{className:"p-6",children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Departamentos"}),l.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Organiza los agentes por area"})]}),l.jsxs("button",{onClick:A,className:"flex items-center gap-2 bg-green-600 hover:bg-green-700 text-white px-4 py-2.5 rounded-lg transition font-medium",children:[l.jsx(ab,{className:"w-4 h-4"})," Nuevo Departamento"]})]}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map(w=>{const z=Array.isArray(w.auto_assign_intents)?w.auto_assign_intents:JSON.parse(w.auto_assign_intents||"[]");return l.jsxs("div",{className:`bg-white rounded-xl border-2 p-5 ${w.active?"border-gray-200":"border-gray-100 opacity-50"}`,children:[l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center",style:{backgroundColor:`${w.color}20`},children:l.jsx("span",{className:"text-lg",style:{color:w.color},children:w.icon==="ShoppingCart"?"":w.icon==="Wrench"?"":w.icon==="Package"?"":""})}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-semibold text-gray-900",children:w.display_name}),l.jsxs("p",{className:"text-xs text-gray-400",children:["@",w.name]})]})]}),l.jsxs("div",{className:"flex gap-1",children:[l.jsx("button",{onClick:()=>N(w),className:"p-1.5 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg",children:l.jsx(rb,{className:"w-4 h-4"})}),w.name!=="general"&&w.active&&l.jsx("button",{onClick:()=>D(w),className:"p-1.5 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg",children:l.jsx(ib,{className:"w-4 h-4"})})]})]}),l.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[l.jsxs("span",{className:"text-xs text-gray-500",children:[w.agent_count||0," agentes"]}),l.jsx("span",{className:"w-1 h-1 bg-gray-300 rounded-full"}),l.jsx("span",{className:`text-xs ${w.active?"text-green-600":"text-gray-400"}`,children:w.active?"Activo":"Inactivo"})]}),z.length>0&&l.jsxs("div",{children:[l.jsxs("p",{className:"text-xs text-gray-400 mb-1.5 flex items-center gap-1",children:[l.jsx(Sj,{className:"w-3 h-3"})," Intents auto-asignados:"]}),l.jsx("div",{className:"flex flex-wrap gap-1",children:z.map((M,Y)=>l.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full bg-gray-100 text-gray-600",children:M},Y))})]})]},w.id)})}),c&&l.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:l.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md p-6",children:[l.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-4",children:f?"Editar Departamento":"Nuevo Departamento"}),y&&l.jsx("div",{className:"bg-red-50 text-red-600 px-4 py-2 rounded-lg text-sm mb-4",children:y}),l.jsxs("form",{onSubmit:E,className:"space-y-4",children:[!f&&l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Identificador (slug)"}),l.jsx("input",{type:"text",value:p.name,onChange:w=>g({...p,name:w.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",required:!0,placeholder:"ej: ventas, soporte"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre visible"}),l.jsx("input",{type:"text",value:p.displayName,onChange:w=>g({...p,displayName:w.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",required:!0,placeholder:"ej: Ventas, Soporte Tecnico"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Color"}),l.jsx("div",{className:"flex gap-2",children:C.map(w=>l.jsx("button",{type:"button",onClick:()=>g({...p,color:w}),className:`w-8 h-8 rounded-full transition ${p.color===w?"ring-2 ring-offset-2 ring-gray-400":""}`,style:{backgroundColor:w}},w))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Icono"}),l.jsx("select",{value:p.icon,onChange:w=>g({...p,icon:w.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",children:k.map(w=>l.jsx("option",{value:w,children:w},w))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Intents para auto-asignacion"}),l.jsx("input",{type:"text",value:p.autoAssignIntents,onChange:w=>g({...p,autoAssignIntents:w.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",placeholder:"ventas, comprar, precio (separados por coma)"}),l.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Cuando el chatbot detecta estos intents, asigna automaticamente a este departamento."})]}),l.jsxs("div",{className:"flex gap-3 pt-2",children:[l.jsx("button",{type:"button",onClick:()=>u(!1),className:"flex-1 px-4 py-2.5 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition",children:"Cancelar"}),l.jsx("button",{type:"submit",disabled:b,className:"flex-1 px-4 py-2.5 bg-green-600 hover:bg-green-700 text-white rounded-lg transition disabled:opacity-50",children:b?"Guardando...":f?"Guardar":"Crear"})]})]})]})})]})}function jA({children:t}){return It(s=>s.isAuthenticated)?t:l.jsx(yc,{to:"/login",replace:!0})}function Ya({children:t}){return It(s=>s.agent)?.role!=="supervisor"?l.jsx(yc,{to:"/dashboard",replace:!0}):t}function EA(){return l.jsxs(DS,{children:[l.jsx(Et,{path:"/login",element:l.jsx(zj,{})}),l.jsxs(Et,{path:"/",element:l.jsx(jA,{children:l.jsx(Rj,{})}),children:[l.jsx(Et,{index:!0,element:l.jsx(yc,{to:"/dashboard",replace:!0})}),l.jsx(Et,{path:"dashboard",element:l.jsx(CE,{})}),l.jsx(Et,{path:"conversations",element:l.jsx(T_,{})}),l.jsx(Et,{path:"agents",element:l.jsx(Ya,{children:l.jsx(SA,{})})}),l.jsx(Et,{path:"departments",element:l.jsx(Ya,{children:l.jsx(NA,{})})}),l.jsx(Et,{path:"flows",element:l.jsx(Ya,{children:l.jsx(U_,{})})}),l.jsx(Et,{path:"flows/builder/:id?",element:l.jsx(Ya,{children:l.jsx(sA,{})})}),l.jsx(Et,{path:"logs",element:l.jsx(Ya,{children:l.jsx(lA,{})})}),l.jsx(Et,{path:"leads",element:l.jsx(Ya,{children:l.jsx(mA,{})})}),l.jsx(Et,{path:"analytics",element:l.jsx(Ya,{children:l.jsx(vA,{})})}),l.jsx(Et,{path:"monitor",element:l.jsx(Ya,{children:l.jsx(wA,{})})})]}),l.jsx(Et,{path:"*",element:l.jsx(yc,{to:"/dashboard",replace:!0})})]})}Rw.createRoot(document.getElementById("root")).render(l.jsx(br.StrictMode,{children:l.jsx(sN,{children:l.jsx(EA,{})})}));
