(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))o(c);new MutationObserver(c=>{for(const u of c)if(u.type==="childList")for(const f of u.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&o(f)}).observe(document,{childList:!0,subtree:!0});function s(c){const u={};return c.integrity&&(u.integrity=c.integrity),c.referrerPolicy&&(u.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?u.credentials="include":c.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function o(c){if(c.ep)return;c.ep=!0;const u=s(c);fetch(c.href,u)}})();function Rh(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Rf={exports:{}},Gi={};var sx;function Xw(){if(sx)return Gi;sx=1;var t=Symbol.for("react.transitional.element"),a=Symbol.for("react.fragment");function s(o,c,u){var f=null;if(u!==void 0&&(f=""+u),c.key!==void 0&&(f=""+c.key),"key"in c){u={};for(var m in c)m!=="key"&&(u[m]=c[m])}else u=c;return c=u.ref,{$$typeof:t,type:o,key:f,ref:c!==void 0?c:null,props:u}}return Gi.Fragment=a,Gi.jsx=s,Gi.jsxs=s,Gi}var rx;function Iw(){return rx||(rx=1,Rf.exports=Xw()),Rf.exports}var i=Iw(),Df={exports:{}},je={};var ix;function Gw(){if(ix)return je;ix=1;var t=Symbol.for("react.transitional.element"),a=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),c=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),f=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),x=Symbol.for("react.activity"),b=Symbol.iterator;function S(B){return B===null||typeof B!="object"?null:(B=b&&B[b]||B["@@iterator"],typeof B=="function"?B:null)}var _={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,N={};function E(B,H,te){this.props=B,this.context=H,this.refs=N,this.updater=te||_}E.prototype.isReactComponent={},E.prototype.setState=function(B,H){if(typeof B!="object"&&typeof B!="function"&&B!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,B,H,"setState")},E.prototype.forceUpdate=function(B){this.updater.enqueueForceUpdate(this,B,"forceUpdate")};function z(){}z.prototype=E.prototype;function T(B,H,te){this.props=B,this.context=H,this.refs=N,this.updater=te||_}var k=T.prototype=new z;k.constructor=T,C(k,E.prototype),k.isPureReactComponent=!0;var w=Array.isArray;function R(){}var M={H:null,A:null,T:null,S:null},q=Object.prototype.hasOwnProperty;function $(B,H,te){var ne=te.ref;return{$$typeof:t,type:B,key:H,ref:ne!==void 0?ne:null,props:te}}function G(B,H){return $(B.type,H,B.props)}function Q(B){return typeof B=="object"&&B!==null&&B.$$typeof===t}function Z(B){var H={"=":"=0",":":"=2"};return"$"+B.replace(/[=:]/g,function(te){return H[te]})}var re=/\/+/g;function V(B,H){return typeof B=="object"&&B!==null&&B.key!=null?Z(""+B.key):H.toString(36)}function I(B){switch(B.status){case"fulfilled":return B.value;case"rejected":throw B.reason;default:switch(typeof B.status=="string"?B.then(R,R):(B.status="pending",B.then(function(H){B.status==="pending"&&(B.status="fulfilled",B.value=H)},function(H){B.status==="pending"&&(B.status="rejected",B.reason=H)})),B.status){case"fulfilled":return B.value;case"rejected":throw B.reason}}throw B}function O(B,H,te,ne,se){var de=typeof B;(de==="undefined"||de==="boolean")&&(B=null);var ue=!1;if(B===null)ue=!0;else switch(de){case"bigint":case"string":case"number":ue=!0;break;case"object":switch(B.$$typeof){case t:case a:ue=!0;break;case y:return ue=B._init,O(ue(B._payload),H,te,ne,se)}}if(ue)return se=se(B),ue=ne===""?"."+V(B,0):ne,w(se)?(te="",ue!=null&&(te=ue.replace(re,"$&/")+"/"),O(se,H,te,"",function(he){return he})):se!=null&&(Q(se)&&(se=G(se,te+(se.key==null||B&&B.key===se.key?"":(""+se.key).replace(re,"$&/")+"/")+ue)),H.push(se)),1;ue=0;var U=ne===""?".":ne+":";if(w(B))for(var ce=0;ce<B.length;ce++)ne=B[ce],de=U+V(ne,ce),ue+=O(ne,H,te,de,se);else if(ce=S(B),typeof ce=="function")for(B=ce.call(B),ce=0;!(ne=B.next()).done;)ne=ne.value,de=U+V(ne,ce++),ue+=O(ne,H,te,de,se);else if(de==="object"){if(typeof B.then=="function")return O(I(B),H,te,ne,se);throw H=String(B),Error("Objects are not valid as a React child (found: "+(H==="[object Object]"?"object with keys {"+Object.keys(B).join(", ")+"}":H)+"). If you meant to render a collection of children, use an array instead.")}return ue}function D(B,H,te){if(B==null)return B;var ne=[],se=0;return O(B,ne,"","",function(de){return H.call(te,de,se++)}),ne}function P(B){if(B._status===-1){var H=B._result;H=H(),H.then(function(te){(B._status===0||B._status===-1)&&(B._status=1,B._result=te)},function(te){(B._status===0||B._status===-1)&&(B._status=2,B._result=te)}),B._status===-1&&(B._status=0,B._result=H)}if(B._status===1)return B._result.default;throw B._result}var L=typeof reportError=="function"?reportError:function(B){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var H=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof B=="object"&&B!==null&&typeof B.message=="string"?String(B.message):String(B),error:B});if(!window.dispatchEvent(H))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",B);return}console.error(B)},W={map:D,forEach:function(B,H,te){D(B,function(){H.apply(this,arguments)},te)},count:function(B){var H=0;return D(B,function(){H++}),H},toArray:function(B){return D(B,function(H){return H})||[]},only:function(B){if(!Q(B))throw Error("React.Children.only expected to receive a single React element child.");return B}};return je.Activity=x,je.Children=W,je.Component=E,je.Fragment=s,je.Profiler=c,je.PureComponent=T,je.StrictMode=o,je.Suspense=p,je.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=M,je.__COMPILER_RUNTIME={__proto__:null,c:function(B){return M.H.useMemoCache(B)}},je.cache=function(B){return function(){return B.apply(null,arguments)}},je.cacheSignal=function(){return null},je.cloneElement=function(B,H,te){if(B==null)throw Error("The argument must be a React element, but you passed "+B+".");var ne=C({},B.props),se=B.key;if(H!=null)for(de in H.key!==void 0&&(se=""+H.key),H)!q.call(H,de)||de==="key"||de==="__self"||de==="__source"||de==="ref"&&H.ref===void 0||(ne[de]=H[de]);var de=arguments.length-2;if(de===1)ne.children=te;else if(1<de){for(var ue=Array(de),U=0;U<de;U++)ue[U]=arguments[U+2];ne.children=ue}return $(B.type,se,ne)},je.createContext=function(B){return B={$$typeof:f,_currentValue:B,_currentValue2:B,_threadCount:0,Provider:null,Consumer:null},B.Provider=B,B.Consumer={$$typeof:u,_context:B},B},je.createElement=function(B,H,te){var ne,se={},de=null;if(H!=null)for(ne in H.key!==void 0&&(de=""+H.key),H)q.call(H,ne)&&ne!=="key"&&ne!=="__self"&&ne!=="__source"&&(se[ne]=H[ne]);var ue=arguments.length-2;if(ue===1)se.children=te;else if(1<ue){for(var U=Array(ue),ce=0;ce<ue;ce++)U[ce]=arguments[ce+2];se.children=U}if(B&&B.defaultProps)for(ne in ue=B.defaultProps,ue)se[ne]===void 0&&(se[ne]=ue[ne]);return $(B,de,se)},je.createRef=function(){return{current:null}},je.forwardRef=function(B){return{$$typeof:m,render:B}},je.isValidElement=Q,je.lazy=function(B){return{$$typeof:y,_payload:{_status:-1,_result:B},_init:P}},je.memo=function(B,H){return{$$typeof:g,type:B,compare:H===void 0?null:H}},je.startTransition=function(B){var H=M.T,te={};M.T=te;try{var ne=B(),se=M.S;se!==null&&se(te,ne),typeof ne=="object"&&ne!==null&&typeof ne.then=="function"&&ne.then(R,L)}catch(de){L(de)}finally{H!==null&&te.types!==null&&(H.types=te.types),M.T=H}},je.unstable_useCacheRefresh=function(){return M.H.useCacheRefresh()},je.use=function(B){return M.H.use(B)},je.useActionState=function(B,H,te){return M.H.useActionState(B,H,te)},je.useCallback=function(B,H){return M.H.useCallback(B,H)},je.useContext=function(B){return M.H.useContext(B)},je.useDebugValue=function(){},je.useDeferredValue=function(B,H){return M.H.useDeferredValue(B,H)},je.useEffect=function(B,H){return M.H.useEffect(B,H)},je.useEffectEvent=function(B){return M.H.useEffectEvent(B)},je.useId=function(){return M.H.useId()},je.useImperativeHandle=function(B,H,te){return M.H.useImperativeHandle(B,H,te)},je.useInsertionEffect=function(B,H){return M.H.useInsertionEffect(B,H)},je.useLayoutEffect=function(B,H){return M.H.useLayoutEffect(B,H)},je.useMemo=function(B,H){return M.H.useMemo(B,H)},je.useOptimistic=function(B,H){return M.H.useOptimistic(B,H)},je.useReducer=function(B,H,te){return M.H.useReducer(B,H,te)},je.useRef=function(B){return M.H.useRef(B)},je.useState=function(B){return M.H.useState(B)},je.useSyncExternalStore=function(B,H,te){return M.H.useSyncExternalStore(B,H,te)},je.useTransition=function(){return M.H.useTransition()},je.version="19.2.3",je}var ox;function yo(){return ox||(ox=1,Df.exports=Gw()),Df.exports}var j=yo();const Mr=Rh(j);var Of={exports:{}},Qi={},Bf={exports:{}},Lf={};var lx;function Qw(){return lx||(lx=1,(function(t){function a(O,D){var P=O.length;O.push(D);e:for(;0<P;){var L=P-1>>>1,W=O[L];if(0<c(W,D))O[L]=D,O[P]=W,P=L;else break e}}function s(O){return O.length===0?null:O[0]}function o(O){if(O.length===0)return null;var D=O[0],P=O.pop();if(P!==D){O[0]=P;e:for(var L=0,W=O.length,B=W>>>1;L<B;){var H=2*(L+1)-1,te=O[H],ne=H+1,se=O[ne];if(0>c(te,P))ne<W&&0>c(se,te)?(O[L]=se,O[ne]=P,L=ne):(O[L]=te,O[H]=P,L=H);else if(ne<W&&0>c(se,P))O[L]=se,O[ne]=P,L=ne;else break e}}return D}function c(O,D){var P=O.sortIndex-D.sortIndex;return P!==0?P:O.id-D.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;t.unstable_now=function(){return u.now()}}else{var f=Date,m=f.now();t.unstable_now=function(){return f.now()-m}}var p=[],g=[],y=1,x=null,b=3,S=!1,_=!1,C=!1,N=!1,E=typeof setTimeout=="function"?setTimeout:null,z=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;function k(O){for(var D=s(g);D!==null;){if(D.callback===null)o(g);else if(D.startTime<=O)o(g),D.sortIndex=D.expirationTime,a(p,D);else break;D=s(g)}}function w(O){if(C=!1,k(O),!_)if(s(p)!==null)_=!0,R||(R=!0,Z());else{var D=s(g);D!==null&&I(w,D.startTime-O)}}var R=!1,M=-1,q=5,$=-1;function G(){return N?!0:!(t.unstable_now()-$<q)}function Q(){if(N=!1,R){var O=t.unstable_now();$=O;var D=!0;try{e:{_=!1,C&&(C=!1,z(M),M=-1),S=!0;var P=b;try{t:{for(k(O),x=s(p);x!==null&&!(x.expirationTime>O&&G());){var L=x.callback;if(typeof L=="function"){x.callback=null,b=x.priorityLevel;var W=L(x.expirationTime<=O);if(O=t.unstable_now(),typeof W=="function"){x.callback=W,k(O),D=!0;break t}x===s(p)&&o(p),k(O)}else o(p);x=s(p)}if(x!==null)D=!0;else{var B=s(g);B!==null&&I(w,B.startTime-O),D=!1}}break e}finally{x=null,b=P,S=!1}D=void 0}}finally{D?Z():R=!1}}}var Z;if(typeof T=="function")Z=function(){T(Q)};else if(typeof MessageChannel<"u"){var re=new MessageChannel,V=re.port2;re.port1.onmessage=Q,Z=function(){V.postMessage(null)}}else Z=function(){E(Q,0)};function I(O,D){M=E(function(){O(t.unstable_now())},D)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(O){O.callback=null},t.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):q=0<O?Math.floor(1e3/O):5},t.unstable_getCurrentPriorityLevel=function(){return b},t.unstable_next=function(O){switch(b){case 1:case 2:case 3:var D=3;break;default:D=b}var P=b;b=D;try{return O()}finally{b=P}},t.unstable_requestPaint=function(){N=!0},t.unstable_runWithPriority=function(O,D){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var P=b;b=O;try{return D()}finally{b=P}},t.unstable_scheduleCallback=function(O,D,P){var L=t.unstable_now();switch(typeof P=="object"&&P!==null?(P=P.delay,P=typeof P=="number"&&0<P?L+P:L):P=L,O){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=P+W,O={id:y++,callback:D,priorityLevel:O,startTime:P,expirationTime:W,sortIndex:-1},P>L?(O.sortIndex=P,a(g,O),s(p)===null&&O===s(g)&&(C?(z(M),M=-1):C=!0,I(w,P-L))):(O.sortIndex=W,a(p,O),_||S||(_=!0,R||(R=!0,Z()))),O},t.unstable_shouldYield=G,t.unstable_wrapCallback=function(O){var D=b;return function(){var P=b;b=D;try{return O.apply(this,arguments)}finally{b=P}}}})(Lf)),Lf}var cx;function Zw(){return cx||(cx=1,Bf.exports=Qw()),Bf.exports}var Hf={exports:{}},St={};var ux;function Fw(){if(ux)return St;ux=1;var t=yo();function a(p){var g="https://react.dev/errors/"+p;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)g+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+p+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(){}var o={d:{f:s,r:function(){throw Error(a(522))},D:s,C:s,L:s,m:s,X:s,S:s,M:s},p:0,findDOMNode:null},c=Symbol.for("react.portal");function u(p,g,y){var x=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:c,key:x==null?null:""+x,children:p,containerInfo:g,implementation:y}}var f=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(p,g){if(p==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return St.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,St.createPortal=function(p,g){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(a(299));return u(p,g,null,y)},St.flushSync=function(p){var g=f.T,y=o.p;try{if(f.T=null,o.p=2,p)return p()}finally{f.T=g,o.p=y,o.d.f()}},St.preconnect=function(p,g){typeof p=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,o.d.C(p,g))},St.prefetchDNS=function(p){typeof p=="string"&&o.d.D(p)},St.preinit=function(p,g){if(typeof p=="string"&&g&&typeof g.as=="string"){var y=g.as,x=m(y,g.crossOrigin),b=typeof g.integrity=="string"?g.integrity:void 0,S=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;y==="style"?o.d.S(p,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:x,integrity:b,fetchPriority:S}):y==="script"&&o.d.X(p,{crossOrigin:x,integrity:b,fetchPriority:S,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},St.preinitModule=function(p,g){if(typeof p=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var y=m(g.as,g.crossOrigin);o.d.M(p,{crossOrigin:y,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&o.d.M(p)},St.preload=function(p,g){if(typeof p=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var y=g.as,x=m(y,g.crossOrigin);o.d.L(p,y,{crossOrigin:x,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},St.preloadModule=function(p,g){if(typeof p=="string")if(g){var y=m(g.as,g.crossOrigin);o.d.m(p,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:y,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else o.d.m(p)},St.requestFormReset=function(p){o.d.r(p)},St.unstable_batchedUpdates=function(p,g){return p(g)},St.useFormState=function(p,g,y){return f.H.useFormState(p,g,y)},St.useFormStatus=function(){return f.H.useHostTransitionStatus()},St.version="19.2.3",St}var dx;function eb(){if(dx)return Hf.exports;dx=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(a){console.error(a)}}return t(),Hf.exports=Fw(),Hf.exports}var fx;function Ww(){if(fx)return Qi;fx=1;var t=Zw(),a=yo(),s=eb();function o(e){var n="https://react.dev/errors/"+e;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)n+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function c(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function u(e){var n=e,r=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,(n.flags&4098)!==0&&(r=n.return),e=n.return;while(e)}return n.tag===3?r:null}function f(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function m(e){if(e.tag===31){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function p(e){if(u(e)!==e)throw Error(o(188))}function g(e){var n=e.alternate;if(!n){if(n=u(e),n===null)throw Error(o(188));return n!==e?null:e}for(var r=e,l=n;;){var d=r.return;if(d===null)break;var h=d.alternate;if(h===null){if(l=d.return,l!==null){r=l;continue}break}if(d.child===h.child){for(h=d.child;h;){if(h===r)return p(d),e;if(h===l)return p(d),n;h=h.sibling}throw Error(o(188))}if(r.return!==l.return)r=d,l=h;else{for(var v=!1,A=d.child;A;){if(A===r){v=!0,r=d,l=h;break}if(A===l){v=!0,l=d,r=h;break}A=A.sibling}if(!v){for(A=h.child;A;){if(A===r){v=!0,r=h,l=d;break}if(A===l){v=!0,l=h,r=d;break}A=A.sibling}if(!v)throw Error(o(189))}}if(r.alternate!==l)throw Error(o(190))}if(r.tag!==3)throw Error(o(188));return r.stateNode.current===r?e:n}function y(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e;for(e=e.child;e!==null;){if(n=y(e),n!==null)return n;e=e.sibling}return null}var x=Object.assign,b=Symbol.for("react.element"),S=Symbol.for("react.transitional.element"),_=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),N=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),z=Symbol.for("react.consumer"),T=Symbol.for("react.context"),k=Symbol.for("react.forward_ref"),w=Symbol.for("react.suspense"),R=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),q=Symbol.for("react.lazy"),$=Symbol.for("react.activity"),G=Symbol.for("react.memo_cache_sentinel"),Q=Symbol.iterator;function Z(e){return e===null||typeof e!="object"?null:(e=Q&&e[Q]||e["@@iterator"],typeof e=="function"?e:null)}var re=Symbol.for("react.client.reference");function V(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===re?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case C:return"Fragment";case E:return"Profiler";case N:return"StrictMode";case w:return"Suspense";case R:return"SuspenseList";case $:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case _:return"Portal";case T:return e.displayName||"Context";case z:return(e._context.displayName||"Context")+".Consumer";case k:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case M:return n=e.displayName||null,n!==null?n:V(e.type)||"Memo";case q:n=e._payload,e=e._init;try{return V(e(n))}catch{}}return null}var I=Array.isArray,O=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,D=s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,P={pending:!1,data:null,method:null,action:null},L=[],W=-1;function B(e){return{current:e}}function H(e){0>W||(e.current=L[W],L[W]=null,W--)}function te(e,n){W++,L[W]=e.current,e.current=n}var ne=B(null),se=B(null),de=B(null),ue=B(null);function U(e,n){switch(te(de,n),te(se,e),te(ne,null),n.nodeType){case 9:case 11:e=(e=n.documentElement)&&(e=e.namespaceURI)?Cg(e):0;break;default:if(e=n.tagName,n=n.namespaceURI)n=Cg(n),e=Tg(n,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}H(ne),te(ne,e)}function ce(){H(ne),H(se),H(de)}function he(e){e.memoizedState!==null&&te(ue,e);var n=ne.current,r=Tg(n,e.type);n!==r&&(te(se,e),te(ne,r))}function ve(e){se.current===e&&(H(ne),H(se)),ue.current===e&&(H(ue),Yi._currentValue=P)}var pe,be;function Se(e){if(pe===void 0)try{throw Error()}catch(r){var n=r.stack.trim().match(/\n( *(at )?)/);pe=n&&n[1]||"",be=-1<r.stack.indexOf(`
    at`)?" (<anonymous>)":-1<r.stack.indexOf("@")?"@unknown:0:0":""}return`
`+pe+e+be}var Ae=!1;function Ee(e,n){if(!e||Ae)return"";Ae=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(n){var le=function(){throw Error()};if(Object.defineProperty(le.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(le,[])}catch(ae){var ee=ae}Reflect.construct(e,[],le)}else{try{le.call()}catch(ae){ee=ae}e.call(le.prototype)}}else{try{throw Error()}catch(ae){ee=ae}(le=e())&&typeof le.catch=="function"&&le.catch(function(){})}}catch(ae){if(ae&&ee&&typeof ae.stack=="string")return[ae.stack,ee.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var d=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");d&&d.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var h=l.DetermineComponentFrameRoot(),v=h[0],A=h[1];if(v&&A){var Y=v.split(`
`),J=A.split(`
`);for(d=l=0;l<Y.length&&!Y[l].includes("DetermineComponentFrameRoot");)l++;for(;d<J.length&&!J[d].includes("DetermineComponentFrameRoot");)d++;if(l===Y.length||d===J.length)for(l=Y.length-1,d=J.length-1;1<=l&&0<=d&&Y[l]!==J[d];)d--;for(;1<=l&&0<=d;l--,d--)if(Y[l]!==J[d]){if(l!==1||d!==1)do if(l--,d--,0>d||Y[l]!==J[d]){var ie=`
`+Y[l].replace(" at new "," at ");return e.displayName&&ie.includes("<anonymous>")&&(ie=ie.replace("<anonymous>",e.displayName)),ie}while(1<=l&&0<=d);break}}}finally{Ae=!1,Error.prepareStackTrace=r}return(r=e?e.displayName||e.name:"")?Se(r):""}function $e(e,n){switch(e.tag){case 26:case 27:case 5:return Se(e.type);case 16:return Se("Lazy");case 13:return e.child!==n&&n!==null?Se("Suspense Fallback"):Se("Suspense");case 19:return Se("SuspenseList");case 0:case 15:return Ee(e.type,!1);case 11:return Ee(e.type.render,!1);case 1:return Ee(e.type,!0);case 31:return Se("Activity");default:return""}}function Re(e){try{var n="",r=null;do n+=$e(e,r),r=e,e=e.return;while(e);return n}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var gt=Object.prototype.hasOwnProperty,ht=t.unstable_scheduleCallback,un=t.unstable_cancelCallback,Sn=t.unstable_shouldYield,_n=t.unstable_requestPaint,at=t.unstable_now,Vn=t.unstable_getCurrentPriorityLevel,dn=t.unstable_ImmediatePriority,Wt=t.unstable_UserBlockingPriority,Yn=t.unstable_NormalPriority,fn=t.unstable_LowPriority,Pn=t.unstable_IdlePriority,ss=t.log,Jr=t.unstable_setDisableYieldValue,rs=null,Et=null;function En(e){if(typeof ss=="function"&&Jr(e),Et&&typeof Et.setStrictMode=="function")try{Et.setStrictMode(rs,e)}catch{}}var Ct=Math.clz32?Math.clz32:vu,yu=Math.log,bu=Math.LN2;function vu(e){return e>>>=0,e===0?32:31-(yu(e)/bu|0)|0}var Us=256,qs=262144,Vs=4194304;function Xn(e){var n=e&42;if(n!==0)return n;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Ys(e,n,r){var l=e.pendingLanes;if(l===0)return 0;var d=0,h=e.suspendedLanes,v=e.pingedLanes;e=e.warmLanes;var A=l&134217727;return A!==0?(l=A&~h,l!==0?d=Xn(l):(v&=A,v!==0?d=Xn(v):r||(r=A&~e,r!==0&&(d=Xn(r))))):(A=l&~h,A!==0?d=Xn(A):v!==0?d=Xn(v):r||(r=l&~e,r!==0&&(d=Xn(r)))),d===0?0:n!==0&&n!==d&&(n&h)===0&&(h=d&-d,r=n&-n,h>=r||h===32&&(r&4194048)!==0)?n:d}function is(e,n){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&n)===0}function wu(e,n){switch(e){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ro(){var e=Vs;return Vs<<=1,(Vs&62914560)===0&&(Vs=4194304),e}function ei(e){for(var n=[],r=0;31>r;r++)n.push(e);return n}function os(e,n){e.pendingLanes|=n,n!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function ju(e,n,r,l,d,h){var v=e.pendingLanes;e.pendingLanes=r,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=r,e.entangledLanes&=r,e.errorRecoveryDisabledLanes&=r,e.shellSuspendCounter=0;var A=e.entanglements,Y=e.expirationTimes,J=e.hiddenUpdates;for(r=v&~r;0<r;){var ie=31-Ct(r),le=1<<ie;A[ie]=0,Y[ie]=-1;var ee=J[ie];if(ee!==null)for(J[ie]=null,ie=0;ie<ee.length;ie++){var ae=ee[ie];ae!==null&&(ae.lane&=-536870913)}r&=~le}l!==0&&Do(e,l,0),h!==0&&d===0&&e.tag!==0&&(e.suspendedLanes|=h&~(v&~n))}function Do(e,n,r){e.pendingLanes|=n,e.suspendedLanes&=~n;var l=31-Ct(n);e.entangledLanes|=n,e.entanglements[l]=e.entanglements[l]|1073741824|r&261930}function Oo(e,n){var r=e.entangledLanes|=n;for(e=e.entanglements;r;){var l=31-Ct(r),d=1<<l;d&n|e[l]&n&&(e[l]|=n),r&=~d}}function Bo(e,n){var r=n&-n;return r=(r&42)!==0?1:ti(r),(r&(e.suspendedLanes|n))!==0?0:r}function ti(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function ni(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Lo(){var e=D.p;return e!==0?e:(e=window.event,e===void 0?32:Wg(e.type))}function Ho(e,n){var r=D.p;try{return D.p=e,n()}finally{D.p=r}}var Cn=Math.random().toString(36).slice(2),dt="__reactFiber$"+Cn,Nt="__reactProps$"+Cn,In="__reactContainer$"+Cn,Ps="__reactEvents$"+Cn,$o="__reactListeners$"+Cn,Nu="__reactHandles$"+Cn,Uo="__reactResources$"+Cn,ls="__reactMarker$"+Cn;function ai(e){delete e[dt],delete e[Nt],delete e[Ps],delete e[$o],delete e[Nu]}function ja(e){var n=e[dt];if(n)return n;for(var r=e.parentNode;r;){if(n=r[In]||r[dt]){if(r=n.alternate,n.child!==null||r!==null&&r.child!==null)for(e=Og(e);e!==null;){if(r=e[dt])return r;e=Og(e)}return n}e=r,r=e.parentNode}return null}function Na(e){if(e=e[dt]||e[In]){var n=e.tag;if(n===5||n===6||n===13||n===31||n===26||n===27||n===3)return e}return null}function Sa(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e.stateNode;throw Error(o(33))}function _a(e){var n=e[Uo];return n||(n=e[Uo]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function st(e){e[ls]=!0}var qo=new Set,Vo={};function Gn(e,n){Ea(e,n),Ea(e+"Capture",n)}function Ea(e,n){for(Vo[e]=n,e=0;e<n.length;e++)qo.add(n[e])}var Su=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),si={},Yo={};function _u(e){return gt.call(Yo,e)?!0:gt.call(si,e)?!1:Su.test(e)?Yo[e]=!0:(si[e]=!0,!1)}function Xs(e,n,r){if(_u(n))if(r===null)e.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":e.removeAttribute(n);return;case"boolean":var l=n.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){e.removeAttribute(n);return}}e.setAttribute(n,""+r)}}function Is(e,n,r){if(r===null)e.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttribute(n,""+r)}}function hn(e,n,r,l){if(l===null)e.removeAttribute(r);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(r);return}e.setAttributeNS(n,r,""+l)}}function At(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Po(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function Eu(e,n,r){var l=Object.getOwnPropertyDescriptor(e.constructor.prototype,n);if(!e.hasOwnProperty(n)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var d=l.get,h=l.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return d.call(this)},set:function(v){r=""+v,h.call(this,v)}}),Object.defineProperty(e,n,{enumerable:l.enumerable}),{getValue:function(){return r},setValue:function(v){r=""+v},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function Gs(e){if(!e._valueTracker){var n=Po(e)?"checked":"value";e._valueTracker=Eu(e,n,""+e[n])}}function Xo(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var r=n.getValue(),l="";return e&&(l=Po(e)?e.checked?"true":"false":e.value),e=l,e!==r?(n.setValue(e),!0):!1}function cs(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Cu=/[\n"\\]/g;function kt(e){return e.replace(Cu,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function us(e,n,r,l,d,h,v,A){e.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?e.type=v:e.removeAttribute("type"),n!=null?v==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+At(n)):e.value!==""+At(n)&&(e.value=""+At(n)):v!=="submit"&&v!=="reset"||e.removeAttribute("value"),n!=null?ri(e,v,At(n)):r!=null?ri(e,v,At(r)):l!=null&&e.removeAttribute("value"),d==null&&h!=null&&(e.defaultChecked=!!h),d!=null&&(e.checked=d&&typeof d!="function"&&typeof d!="symbol"),A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?e.name=""+At(A):e.removeAttribute("name")}function Io(e,n,r,l,d,h,v,A){if(h!=null&&typeof h!="function"&&typeof h!="symbol"&&typeof h!="boolean"&&(e.type=h),n!=null||r!=null){if(!(h!=="submit"&&h!=="reset"||n!=null)){Gs(e);return}r=r!=null?""+At(r):"",n=n!=null?""+At(n):r,A||n===e.value||(e.value=n),e.defaultValue=n}l=l??d,l=typeof l!="function"&&typeof l!="symbol"&&!!l,e.checked=A?e.checked:!!l,e.defaultChecked=!!l,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(e.name=v),Gs(e)}function ri(e,n,r){n==="number"&&cs(e.ownerDocument)===e||e.defaultValue===""+r||(e.defaultValue=""+r)}function Qn(e,n,r,l){if(e=e.options,n){n={};for(var d=0;d<r.length;d++)n["$"+r[d]]=!0;for(r=0;r<e.length;r++)d=n.hasOwnProperty("$"+e[r].value),e[r].selected!==d&&(e[r].selected=d),d&&l&&(e[r].defaultSelected=!0)}else{for(r=""+At(r),n=null,d=0;d<e.length;d++){if(e[d].value===r){e[d].selected=!0,l&&(e[d].defaultSelected=!0);return}n!==null||e[d].disabled||(n=e[d])}n!==null&&(n.selected=!0)}}function jm(e,n,r){if(n!=null&&(n=""+At(n),n!==e.value&&(e.value=n),r==null)){e.defaultValue!==n&&(e.defaultValue=n);return}e.defaultValue=r!=null?""+At(r):""}function Nm(e,n,r,l){if(n==null){if(l!=null){if(r!=null)throw Error(o(92));if(I(l)){if(1<l.length)throw Error(o(93));l=l[0]}r=l}r==null&&(r=""),n=r}r=At(n),e.defaultValue=r,l=e.textContent,l===r&&l!==""&&l!==null&&(e.value=l),Gs(e)}function Qs(e,n){if(n){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=n;return}}e.textContent=n}var Uv=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Sm(e,n,r){var l=n.indexOf("--")===0;r==null||typeof r=="boolean"||r===""?l?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="":l?e.setProperty(n,r):typeof r!="number"||r===0||Uv.has(n)?n==="float"?e.cssFloat=r:e[n]=(""+r).trim():e[n]=r+"px"}function _m(e,n,r){if(n!=null&&typeof n!="object")throw Error(o(62));if(e=e.style,r!=null){for(var l in r)!r.hasOwnProperty(l)||n!=null&&n.hasOwnProperty(l)||(l.indexOf("--")===0?e.setProperty(l,""):l==="float"?e.cssFloat="":e[l]="");for(var d in n)l=n[d],n.hasOwnProperty(d)&&r[d]!==l&&Sm(e,d,l)}else for(var h in n)n.hasOwnProperty(h)&&Sm(e,h,n[h])}function Tu(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var qv=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Vv=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Go(e){return Vv.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Zn(){}var Mu=null;function Au(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Zs=null,Fs=null;function Em(e){var n=Na(e);if(n&&(e=n.stateNode)){var r=e[Nt]||null;e:switch(e=n.stateNode,n.type){case"input":if(us(e,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name),n=r.name,r.type==="radio"&&n!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll('input[name="'+kt(""+n)+'"][type="radio"]'),n=0;n<r.length;n++){var l=r[n];if(l!==e&&l.form===e.form){var d=l[Nt]||null;if(!d)throw Error(o(90));us(l,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name)}}for(n=0;n<r.length;n++)l=r[n],l.form===e.form&&Xo(l)}break e;case"textarea":jm(e,r.value,r.defaultValue);break e;case"select":n=r.value,n!=null&&Qn(e,!!r.multiple,n,!1)}}}var ku=!1;function Cm(e,n,r){if(ku)return e(n,r);ku=!0;try{var l=e(n);return l}finally{if(ku=!1,(Zs!==null||Fs!==null)&&(Dl(),Zs&&(n=Zs,e=Fs,Fs=Zs=null,Em(n),e)))for(n=0;n<e.length;n++)Em(e[n])}}function ii(e,n){var r=e.stateNode;if(r===null)return null;var l=r[Nt]||null;if(l===null)return null;r=l[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(o(231,n,typeof r));return r}var Fn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),zu=!1;if(Fn)try{var oi={};Object.defineProperty(oi,"passive",{get:function(){zu=!0}}),window.addEventListener("test",oi,oi),window.removeEventListener("test",oi,oi)}catch{zu=!1}var Ca=null,Ru=null,Qo=null;function Tm(){if(Qo)return Qo;var e,n=Ru,r=n.length,l,d="value"in Ca?Ca.value:Ca.textContent,h=d.length;for(e=0;e<r&&n[e]===d[e];e++);var v=r-e;for(l=1;l<=v&&n[r-l]===d[h-l];l++);return Qo=d.slice(e,1<l?1-l:void 0)}function Zo(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function Fo(){return!0}function Mm(){return!1}function zt(e){function n(r,l,d,h,v){this._reactName=r,this._targetInst=d,this.type=l,this.nativeEvent=h,this.target=v,this.currentTarget=null;for(var A in e)e.hasOwnProperty(A)&&(r=e[A],this[A]=r?r(h):h[A]);return this.isDefaultPrevented=(h.defaultPrevented!=null?h.defaultPrevented:h.returnValue===!1)?Fo:Mm,this.isPropagationStopped=Mm,this}return x(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Fo)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Fo)},persist:function(){},isPersistent:Fo}),n}var ds={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Wo=zt(ds),li=x({},ds,{view:0,detail:0}),Yv=zt(li),Du,Ou,ci,Ko=x({},li,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Lu,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ci&&(ci&&e.type==="mousemove"?(Du=e.screenX-ci.screenX,Ou=e.screenY-ci.screenY):Ou=Du=0,ci=e),Du)},movementY:function(e){return"movementY"in e?e.movementY:Ou}}),Am=zt(Ko),Pv=x({},Ko,{dataTransfer:0}),Xv=zt(Pv),Iv=x({},li,{relatedTarget:0}),Bu=zt(Iv),Gv=x({},ds,{animationName:0,elapsedTime:0,pseudoElement:0}),Qv=zt(Gv),Zv=x({},ds,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Fv=zt(Zv),Wv=x({},ds,{data:0}),km=zt(Wv),Kv={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Jv={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},e2={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function t2(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=e2[e])?!!n[e]:!1}function Lu(){return t2}var n2=x({},li,{key:function(e){if(e.key){var n=Kv[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=Zo(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Jv[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Lu,charCode:function(e){return e.type==="keypress"?Zo(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Zo(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),a2=zt(n2),s2=x({},Ko,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),zm=zt(s2),r2=x({},li,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Lu}),i2=zt(r2),o2=x({},ds,{propertyName:0,elapsedTime:0,pseudoElement:0}),l2=zt(o2),c2=x({},Ko,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),u2=zt(c2),d2=x({},ds,{newState:0,oldState:0}),f2=zt(d2),h2=[9,13,27,32],Hu=Fn&&"CompositionEvent"in window,ui=null;Fn&&"documentMode"in document&&(ui=document.documentMode);var m2=Fn&&"TextEvent"in window&&!ui,Rm=Fn&&(!Hu||ui&&8<ui&&11>=ui),Dm=" ",Om=!1;function Bm(e,n){switch(e){case"keyup":return h2.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Lm(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ws=!1;function p2(e,n){switch(e){case"compositionend":return Lm(n);case"keypress":return n.which!==32?null:(Om=!0,Dm);case"textInput":return e=n.data,e===Dm&&Om?null:e;default:return null}}function g2(e,n){if(Ws)return e==="compositionend"||!Hu&&Bm(e,n)?(e=Tm(),Qo=Ru=Ca=null,Ws=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return Rm&&n.locale!=="ko"?null:n.data;default:return null}}var x2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hm(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!x2[e.type]:n==="textarea"}function $m(e,n,r,l){Zs?Fs?Fs.push(l):Fs=[l]:Zs=l,n=ql(n,"onChange"),0<n.length&&(r=new Wo("onChange","change",null,r,l),e.push({event:r,listeners:n}))}var di=null,fi=null;function y2(e){wg(e,0)}function Jo(e){var n=Sa(e);if(Xo(n))return e}function Um(e,n){if(e==="change")return n}var qm=!1;if(Fn){var $u;if(Fn){var Uu="oninput"in document;if(!Uu){var Vm=document.createElement("div");Vm.setAttribute("oninput","return;"),Uu=typeof Vm.oninput=="function"}$u=Uu}else $u=!1;qm=$u&&(!document.documentMode||9<document.documentMode)}function Ym(){di&&(di.detachEvent("onpropertychange",Pm),fi=di=null)}function Pm(e){if(e.propertyName==="value"&&Jo(fi)){var n=[];$m(n,fi,e,Au(e)),Cm(y2,n)}}function b2(e,n,r){e==="focusin"?(Ym(),di=n,fi=r,di.attachEvent("onpropertychange",Pm)):e==="focusout"&&Ym()}function v2(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Jo(fi)}function w2(e,n){if(e==="click")return Jo(n)}function j2(e,n){if(e==="input"||e==="change")return Jo(n)}function N2(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var $t=typeof Object.is=="function"?Object.is:N2;function hi(e,n){if($t(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var r=Object.keys(e),l=Object.keys(n);if(r.length!==l.length)return!1;for(l=0;l<r.length;l++){var d=r[l];if(!gt.call(n,d)||!$t(e[d],n[d]))return!1}return!0}function Xm(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Im(e,n){var r=Xm(e);e=0;for(var l;r;){if(r.nodeType===3){if(l=e+r.textContent.length,e<=n&&l>=n)return{node:r,offset:n-e};e=l}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Xm(r)}}function Gm(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?Gm(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function Qm(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var n=cs(e.document);n instanceof e.HTMLIFrameElement;){try{var r=typeof n.contentWindow.location.href=="string"}catch{r=!1}if(r)e=n.contentWindow;else break;n=cs(e.document)}return n}function qu(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}var S2=Fn&&"documentMode"in document&&11>=document.documentMode,Ks=null,Vu=null,mi=null,Yu=!1;function Zm(e,n,r){var l=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Yu||Ks==null||Ks!==cs(l)||(l=Ks,"selectionStart"in l&&qu(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),mi&&hi(mi,l)||(mi=l,l=ql(Vu,"onSelect"),0<l.length&&(n=new Wo("onSelect","select",null,n,r),e.push({event:n,listeners:l}),n.target=Ks)))}function fs(e,n){var r={};return r[e.toLowerCase()]=n.toLowerCase(),r["Webkit"+e]="webkit"+n,r["Moz"+e]="moz"+n,r}var Js={animationend:fs("Animation","AnimationEnd"),animationiteration:fs("Animation","AnimationIteration"),animationstart:fs("Animation","AnimationStart"),transitionrun:fs("Transition","TransitionRun"),transitionstart:fs("Transition","TransitionStart"),transitioncancel:fs("Transition","TransitionCancel"),transitionend:fs("Transition","TransitionEnd")},Pu={},Fm={};Fn&&(Fm=document.createElement("div").style,"AnimationEvent"in window||(delete Js.animationend.animation,delete Js.animationiteration.animation,delete Js.animationstart.animation),"TransitionEvent"in window||delete Js.transitionend.transition);function hs(e){if(Pu[e])return Pu[e];if(!Js[e])return e;var n=Js[e],r;for(r in n)if(n.hasOwnProperty(r)&&r in Fm)return Pu[e]=n[r];return e}var Wm=hs("animationend"),Km=hs("animationiteration"),Jm=hs("animationstart"),_2=hs("transitionrun"),E2=hs("transitionstart"),C2=hs("transitioncancel"),ep=hs("transitionend"),tp=new Map,Xu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Xu.push("scrollEnd");function mn(e,n){tp.set(e,n),Gn(n,[e])}var el=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Kt=[],er=0,Iu=0;function tl(){for(var e=er,n=Iu=er=0;n<e;){var r=Kt[n];Kt[n++]=null;var l=Kt[n];Kt[n++]=null;var d=Kt[n];Kt[n++]=null;var h=Kt[n];if(Kt[n++]=null,l!==null&&d!==null){var v=l.pending;v===null?d.next=d:(d.next=v.next,v.next=d),l.pending=d}h!==0&&np(r,d,h)}}function nl(e,n,r,l){Kt[er++]=e,Kt[er++]=n,Kt[er++]=r,Kt[er++]=l,Iu|=l,e.lanes|=l,e=e.alternate,e!==null&&(e.lanes|=l)}function Gu(e,n,r,l){return nl(e,n,r,l),al(e)}function ms(e,n){return nl(e,null,null,n),al(e)}function np(e,n,r){e.lanes|=r;var l=e.alternate;l!==null&&(l.lanes|=r);for(var d=!1,h=e.return;h!==null;)h.childLanes|=r,l=h.alternate,l!==null&&(l.childLanes|=r),h.tag===22&&(e=h.stateNode,e===null||e._visibility&1||(d=!0)),e=h,h=h.return;return e.tag===3?(h=e.stateNode,d&&n!==null&&(d=31-Ct(r),e=h.hiddenUpdates,l=e[d],l===null?e[d]=[n]:l.push(n),n.lane=r|536870912),h):null}function al(e){if(50<Bi)throw Bi=0,nf=null,Error(o(185));for(var n=e.return;n!==null;)e=n,n=e.return;return e.tag===3?e.stateNode:null}var tr={};function T2(e,n,r,l){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ut(e,n,r,l){return new T2(e,n,r,l)}function Qu(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Wn(e,n){var r=e.alternate;return r===null?(r=Ut(e.tag,n,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=n,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&65011712,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,n=e.dependencies,r.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r.refCleanup=e.refCleanup,r}function ap(e,n){e.flags&=65011714;var r=e.alternate;return r===null?(e.childLanes=0,e.lanes=n,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=r.childLanes,e.lanes=r.lanes,e.child=r.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=r.memoizedProps,e.memoizedState=r.memoizedState,e.updateQueue=r.updateQueue,e.type=r.type,n=r.dependencies,e.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),e}function sl(e,n,r,l,d,h){var v=0;if(l=e,typeof e=="function")Qu(e)&&(v=1);else if(typeof e=="string")v=Rw(e,r,ne.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case $:return e=Ut(31,r,n,d),e.elementType=$,e.lanes=h,e;case C:return ps(r.children,d,h,n);case N:v=8,d|=24;break;case E:return e=Ut(12,r,n,d|2),e.elementType=E,e.lanes=h,e;case w:return e=Ut(13,r,n,d),e.elementType=w,e.lanes=h,e;case R:return e=Ut(19,r,n,d),e.elementType=R,e.lanes=h,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case T:v=10;break e;case z:v=9;break e;case k:v=11;break e;case M:v=14;break e;case q:v=16,l=null;break e}v=29,r=Error(o(130,e===null?"null":typeof e,"")),l=null}return n=Ut(v,r,n,d),n.elementType=e,n.type=l,n.lanes=h,n}function ps(e,n,r,l){return e=Ut(7,e,l,n),e.lanes=r,e}function Zu(e,n,r){return e=Ut(6,e,null,n),e.lanes=r,e}function sp(e){var n=Ut(18,null,null,0);return n.stateNode=e,n}function Fu(e,n,r){return n=Ut(4,e.children!==null?e.children:[],e.key,n),n.lanes=r,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}var rp=new WeakMap;function Jt(e,n){if(typeof e=="object"&&e!==null){var r=rp.get(e);return r!==void 0?r:(n={value:e,source:n,stack:Re(n)},rp.set(e,n),n)}return{value:e,source:n,stack:Re(n)}}var nr=[],ar=0,rl=null,pi=0,en=[],tn=0,Ta=null,Tn=1,Mn="";function Kn(e,n){nr[ar++]=pi,nr[ar++]=rl,rl=e,pi=n}function ip(e,n,r){en[tn++]=Tn,en[tn++]=Mn,en[tn++]=Ta,Ta=e;var l=Tn;e=Mn;var d=32-Ct(l)-1;l&=~(1<<d),r+=1;var h=32-Ct(n)+d;if(30<h){var v=d-d%5;h=(l&(1<<v)-1).toString(32),l>>=v,d-=v,Tn=1<<32-Ct(n)+d|r<<d|l,Mn=h+e}else Tn=1<<h|r<<d|l,Mn=e}function Wu(e){e.return!==null&&(Kn(e,1),ip(e,1,0))}function Ku(e){for(;e===rl;)rl=nr[--ar],nr[ar]=null,pi=nr[--ar],nr[ar]=null;for(;e===Ta;)Ta=en[--tn],en[tn]=null,Mn=en[--tn],en[tn]=null,Tn=en[--tn],en[tn]=null}function op(e,n){en[tn++]=Tn,en[tn++]=Mn,en[tn++]=Ta,Tn=n.id,Mn=n.overflow,Ta=e}var xt=null,Ge=null,De=!1,Ma=null,nn=!1,Ju=Error(o(519));function Aa(e){var n=Error(o(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw gi(Jt(n,e)),Ju}function lp(e){var n=e.stateNode,r=e.type,l=e.memoizedProps;switch(n[dt]=e,n[Nt]=l,r){case"dialog":Me("cancel",n),Me("close",n);break;case"iframe":case"object":case"embed":Me("load",n);break;case"video":case"audio":for(r=0;r<Hi.length;r++)Me(Hi[r],n);break;case"source":Me("error",n);break;case"img":case"image":case"link":Me("error",n),Me("load",n);break;case"details":Me("toggle",n);break;case"input":Me("invalid",n),Io(n,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":Me("invalid",n);break;case"textarea":Me("invalid",n),Nm(n,l.value,l.defaultValue,l.children)}r=l.children,typeof r!="string"&&typeof r!="number"&&typeof r!="bigint"||n.textContent===""+r||l.suppressHydrationWarning===!0||_g(n.textContent,r)?(l.popover!=null&&(Me("beforetoggle",n),Me("toggle",n)),l.onScroll!=null&&Me("scroll",n),l.onScrollEnd!=null&&Me("scrollend",n),l.onClick!=null&&(n.onclick=Zn),n=!0):n=!1,n||Aa(e,!0)}function cp(e){for(xt=e.return;xt;)switch(xt.tag){case 5:case 31:case 13:nn=!1;return;case 27:case 3:nn=!0;return;default:xt=xt.return}}function sr(e){if(e!==xt)return!1;if(!De)return cp(e),De=!0,!1;var n=e.tag,r;if((r=n!==3&&n!==27)&&((r=n===5)&&(r=e.type,r=!(r!=="form"&&r!=="button")||yf(e.type,e.memoizedProps)),r=!r),r&&Ge&&Aa(e),cp(e),n===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(317));Ge=Dg(e)}else if(n===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(317));Ge=Dg(e)}else n===27?(n=Ge,Pa(e.type)?(e=Nf,Nf=null,Ge=e):Ge=n):Ge=xt?sn(e.stateNode.nextSibling):null;return!0}function gs(){Ge=xt=null,De=!1}function ed(){var e=Ma;return e!==null&&(Bt===null?Bt=e:Bt.push.apply(Bt,e),Ma=null),e}function gi(e){Ma===null?Ma=[e]:Ma.push(e)}var td=B(null),xs=null,Jn=null;function ka(e,n,r){te(td,n._currentValue),n._currentValue=r}function ea(e){e._currentValue=td.current,H(td)}function nd(e,n,r){for(;e!==null;){var l=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,l!==null&&(l.childLanes|=n)):l!==null&&(l.childLanes&n)!==n&&(l.childLanes|=n),e===r)break;e=e.return}}function ad(e,n,r,l){var d=e.child;for(d!==null&&(d.return=e);d!==null;){var h=d.dependencies;if(h!==null){var v=d.child;h=h.firstContext;e:for(;h!==null;){var A=h;h=d;for(var Y=0;Y<n.length;Y++)if(A.context===n[Y]){h.lanes|=r,A=h.alternate,A!==null&&(A.lanes|=r),nd(h.return,r,e),l||(v=null);break e}h=A.next}}else if(d.tag===18){if(v=d.return,v===null)throw Error(o(341));v.lanes|=r,h=v.alternate,h!==null&&(h.lanes|=r),nd(v,r,e),v=null}else v=d.child;if(v!==null)v.return=d;else for(v=d;v!==null;){if(v===e){v=null;break}if(d=v.sibling,d!==null){d.return=v.return,v=d;break}v=v.return}d=v}}function rr(e,n,r,l){e=null;for(var d=n,h=!1;d!==null;){if(!h){if((d.flags&524288)!==0)h=!0;else if((d.flags&262144)!==0)break}if(d.tag===10){var v=d.alternate;if(v===null)throw Error(o(387));if(v=v.memoizedProps,v!==null){var A=d.type;$t(d.pendingProps.value,v.value)||(e!==null?e.push(A):e=[A])}}else if(d===ue.current){if(v=d.alternate,v===null)throw Error(o(387));v.memoizedState.memoizedState!==d.memoizedState.memoizedState&&(e!==null?e.push(Yi):e=[Yi])}d=d.return}e!==null&&ad(n,e,r,l),n.flags|=262144}function il(e){for(e=e.firstContext;e!==null;){if(!$t(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function ys(e){xs=e,Jn=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function yt(e){return up(xs,e)}function ol(e,n){return xs===null&&ys(e),up(e,n)}function up(e,n){var r=n._currentValue;if(n={context:n,memoizedValue:r,next:null},Jn===null){if(e===null)throw Error(o(308));Jn=n,e.dependencies={lanes:0,firstContext:n},e.flags|=524288}else Jn=Jn.next=n;return r}var M2=typeof AbortController<"u"?AbortController:function(){var e=[],n=this.signal={aborted:!1,addEventListener:function(r,l){e.push(l)}};this.abort=function(){n.aborted=!0,e.forEach(function(r){return r()})}},A2=t.unstable_scheduleCallback,k2=t.unstable_NormalPriority,rt={$$typeof:T,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function sd(){return{controller:new M2,data:new Map,refCount:0}}function xi(e){e.refCount--,e.refCount===0&&A2(k2,function(){e.controller.abort()})}var yi=null,rd=0,ir=0,or=null;function z2(e,n){if(yi===null){var r=yi=[];rd=0,ir=cf(),or={status:"pending",value:void 0,then:function(l){r.push(l)}}}return rd++,n.then(dp,dp),n}function dp(){if(--rd===0&&yi!==null){or!==null&&(or.status="fulfilled");var e=yi;yi=null,ir=0,or=null;for(var n=0;n<e.length;n++)(0,e[n])()}}function R2(e,n){var r=[],l={status:"pending",value:null,reason:null,then:function(d){r.push(d)}};return e.then(function(){l.status="fulfilled",l.value=n;for(var d=0;d<r.length;d++)(0,r[d])(n)},function(d){for(l.status="rejected",l.reason=d,d=0;d<r.length;d++)(0,r[d])(void 0)}),l}var fp=O.S;O.S=function(e,n){Z0=at(),typeof n=="object"&&n!==null&&typeof n.then=="function"&&z2(e,n),fp!==null&&fp(e,n)};var bs=B(null);function id(){var e=bs.current;return e!==null?e:Ie.pooledCache}function ll(e,n){n===null?te(bs,bs.current):te(bs,n.pool)}function hp(){var e=id();return e===null?null:{parent:rt._currentValue,pool:e}}var lr=Error(o(460)),od=Error(o(474)),cl=Error(o(542)),ul={then:function(){}};function mp(e){return e=e.status,e==="fulfilled"||e==="rejected"}function pp(e,n,r){switch(r=e[r],r===void 0?e.push(n):r!==n&&(n.then(Zn,Zn),n=r),n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,xp(e),e;default:if(typeof n.status=="string")n.then(Zn,Zn);else{if(e=Ie,e!==null&&100<e.shellSuspendCounter)throw Error(o(482));e=n,e.status="pending",e.then(function(l){if(n.status==="pending"){var d=n;d.status="fulfilled",d.value=l}},function(l){if(n.status==="pending"){var d=n;d.status="rejected",d.reason=l}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,xp(e),e}throw ws=n,lr}}function vs(e){try{var n=e._init;return n(e._payload)}catch(r){throw r!==null&&typeof r=="object"&&typeof r.then=="function"?(ws=r,lr):r}}var ws=null;function gp(){if(ws===null)throw Error(o(459));var e=ws;return ws=null,e}function xp(e){if(e===lr||e===cl)throw Error(o(483))}var cr=null,bi=0;function dl(e){var n=bi;return bi+=1,cr===null&&(cr=[]),pp(cr,e,n)}function vi(e,n){n=n.props.ref,e.ref=n!==void 0?n:null}function fl(e,n){throw n.$$typeof===b?Error(o(525)):(e=Object.prototype.toString.call(n),Error(o(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)))}function yp(e){function n(F,X){if(e){var K=F.deletions;K===null?(F.deletions=[X],F.flags|=16):K.push(X)}}function r(F,X){if(!e)return null;for(;X!==null;)n(F,X),X=X.sibling;return null}function l(F){for(var X=new Map;F!==null;)F.key!==null?X.set(F.key,F):X.set(F.index,F),F=F.sibling;return X}function d(F,X){return F=Wn(F,X),F.index=0,F.sibling=null,F}function h(F,X,K){return F.index=K,e?(K=F.alternate,K!==null?(K=K.index,K<X?(F.flags|=67108866,X):K):(F.flags|=67108866,X)):(F.flags|=1048576,X)}function v(F){return e&&F.alternate===null&&(F.flags|=67108866),F}function A(F,X,K,oe){return X===null||X.tag!==6?(X=Zu(K,F.mode,oe),X.return=F,X):(X=d(X,K),X.return=F,X)}function Y(F,X,K,oe){var ye=K.type;return ye===C?ie(F,X,K.props.children,oe,K.key):X!==null&&(X.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===q&&vs(ye)===X.type)?(X=d(X,K.props),vi(X,K),X.return=F,X):(X=sl(K.type,K.key,K.props,null,F.mode,oe),vi(X,K),X.return=F,X)}function J(F,X,K,oe){return X===null||X.tag!==4||X.stateNode.containerInfo!==K.containerInfo||X.stateNode.implementation!==K.implementation?(X=Fu(K,F.mode,oe),X.return=F,X):(X=d(X,K.children||[]),X.return=F,X)}function ie(F,X,K,oe,ye){return X===null||X.tag!==7?(X=ps(K,F.mode,oe,ye),X.return=F,X):(X=d(X,K),X.return=F,X)}function le(F,X,K){if(typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint")return X=Zu(""+X,F.mode,K),X.return=F,X;if(typeof X=="object"&&X!==null){switch(X.$$typeof){case S:return K=sl(X.type,X.key,X.props,null,F.mode,K),vi(K,X),K.return=F,K;case _:return X=Fu(X,F.mode,K),X.return=F,X;case q:return X=vs(X),le(F,X,K)}if(I(X)||Z(X))return X=ps(X,F.mode,K,null),X.return=F,X;if(typeof X.then=="function")return le(F,dl(X),K);if(X.$$typeof===T)return le(F,ol(F,X),K);fl(F,X)}return null}function ee(F,X,K,oe){var ye=X!==null?X.key:null;if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return ye!==null?null:A(F,X,""+K,oe);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case S:return K.key===ye?Y(F,X,K,oe):null;case _:return K.key===ye?J(F,X,K,oe):null;case q:return K=vs(K),ee(F,X,K,oe)}if(I(K)||Z(K))return ye!==null?null:ie(F,X,K,oe,null);if(typeof K.then=="function")return ee(F,X,dl(K),oe);if(K.$$typeof===T)return ee(F,X,ol(F,K),oe);fl(F,K)}return null}function ae(F,X,K,oe,ye){if(typeof oe=="string"&&oe!==""||typeof oe=="number"||typeof oe=="bigint")return F=F.get(K)||null,A(X,F,""+oe,ye);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case S:return F=F.get(oe.key===null?K:oe.key)||null,Y(X,F,oe,ye);case _:return F=F.get(oe.key===null?K:oe.key)||null,J(X,F,oe,ye);case q:return oe=vs(oe),ae(F,X,K,oe,ye)}if(I(oe)||Z(oe))return F=F.get(K)||null,ie(X,F,oe,ye,null);if(typeof oe.then=="function")return ae(F,X,K,dl(oe),ye);if(oe.$$typeof===T)return ae(F,X,K,ol(X,oe),ye);fl(X,oe)}return null}function fe(F,X,K,oe){for(var ye=null,Be=null,me=X,_e=X=0,ze=null;me!==null&&_e<K.length;_e++){me.index>_e?(ze=me,me=null):ze=me.sibling;var Le=ee(F,me,K[_e],oe);if(Le===null){me===null&&(me=ze);break}e&&me&&Le.alternate===null&&n(F,me),X=h(Le,X,_e),Be===null?ye=Le:Be.sibling=Le,Be=Le,me=ze}if(_e===K.length)return r(F,me),De&&Kn(F,_e),ye;if(me===null){for(;_e<K.length;_e++)me=le(F,K[_e],oe),me!==null&&(X=h(me,X,_e),Be===null?ye=me:Be.sibling=me,Be=me);return De&&Kn(F,_e),ye}for(me=l(me);_e<K.length;_e++)ze=ae(me,F,_e,K[_e],oe),ze!==null&&(e&&ze.alternate!==null&&me.delete(ze.key===null?_e:ze.key),X=h(ze,X,_e),Be===null?ye=ze:Be.sibling=ze,Be=ze);return e&&me.forEach(function(Za){return n(F,Za)}),De&&Kn(F,_e),ye}function we(F,X,K,oe){if(K==null)throw Error(o(151));for(var ye=null,Be=null,me=X,_e=X=0,ze=null,Le=K.next();me!==null&&!Le.done;_e++,Le=K.next()){me.index>_e?(ze=me,me=null):ze=me.sibling;var Za=ee(F,me,Le.value,oe);if(Za===null){me===null&&(me=ze);break}e&&me&&Za.alternate===null&&n(F,me),X=h(Za,X,_e),Be===null?ye=Za:Be.sibling=Za,Be=Za,me=ze}if(Le.done)return r(F,me),De&&Kn(F,_e),ye;if(me===null){for(;!Le.done;_e++,Le=K.next())Le=le(F,Le.value,oe),Le!==null&&(X=h(Le,X,_e),Be===null?ye=Le:Be.sibling=Le,Be=Le);return De&&Kn(F,_e),ye}for(me=l(me);!Le.done;_e++,Le=K.next())Le=ae(me,F,_e,Le.value,oe),Le!==null&&(e&&Le.alternate!==null&&me.delete(Le.key===null?_e:Le.key),X=h(Le,X,_e),Be===null?ye=Le:Be.sibling=Le,Be=Le);return e&&me.forEach(function(Pw){return n(F,Pw)}),De&&Kn(F,_e),ye}function Xe(F,X,K,oe){if(typeof K=="object"&&K!==null&&K.type===C&&K.key===null&&(K=K.props.children),typeof K=="object"&&K!==null){switch(K.$$typeof){case S:e:{for(var ye=K.key;X!==null;){if(X.key===ye){if(ye=K.type,ye===C){if(X.tag===7){r(F,X.sibling),oe=d(X,K.props.children),oe.return=F,F=oe;break e}}else if(X.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===q&&vs(ye)===X.type){r(F,X.sibling),oe=d(X,K.props),vi(oe,K),oe.return=F,F=oe;break e}r(F,X);break}else n(F,X);X=X.sibling}K.type===C?(oe=ps(K.props.children,F.mode,oe,K.key),oe.return=F,F=oe):(oe=sl(K.type,K.key,K.props,null,F.mode,oe),vi(oe,K),oe.return=F,F=oe)}return v(F);case _:e:{for(ye=K.key;X!==null;){if(X.key===ye)if(X.tag===4&&X.stateNode.containerInfo===K.containerInfo&&X.stateNode.implementation===K.implementation){r(F,X.sibling),oe=d(X,K.children||[]),oe.return=F,F=oe;break e}else{r(F,X);break}else n(F,X);X=X.sibling}oe=Fu(K,F.mode,oe),oe.return=F,F=oe}return v(F);case q:return K=vs(K),Xe(F,X,K,oe)}if(I(K))return fe(F,X,K,oe);if(Z(K)){if(ye=Z(K),typeof ye!="function")throw Error(o(150));return K=ye.call(K),we(F,X,K,oe)}if(typeof K.then=="function")return Xe(F,X,dl(K),oe);if(K.$$typeof===T)return Xe(F,X,ol(F,K),oe);fl(F,K)}return typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint"?(K=""+K,X!==null&&X.tag===6?(r(F,X.sibling),oe=d(X,K),oe.return=F,F=oe):(r(F,X),oe=Zu(K,F.mode,oe),oe.return=F,F=oe),v(F)):r(F,X)}return function(F,X,K,oe){try{bi=0;var ye=Xe(F,X,K,oe);return cr=null,ye}catch(me){if(me===lr||me===cl)throw me;var Be=Ut(29,me,null,F.mode);return Be.lanes=oe,Be.return=F,Be}}}var js=yp(!0),bp=yp(!1),za=!1;function ld(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function cd(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Ra(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Da(e,n,r){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,(He&2)!==0){var d=l.pending;return d===null?n.next=n:(n.next=d.next,d.next=n),l.pending=n,n=al(e),np(e,null,r),n}return nl(e,l,n,r),al(e)}function wi(e,n,r){if(n=n.updateQueue,n!==null&&(n=n.shared,(r&4194048)!==0)){var l=n.lanes;l&=e.pendingLanes,r|=l,n.lanes=r,Oo(e,r)}}function ud(e,n){var r=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,r===l)){var d=null,h=null;if(r=r.firstBaseUpdate,r!==null){do{var v={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};h===null?d=h=v:h=h.next=v,r=r.next}while(r!==null);h===null?d=h=n:h=h.next=n}else d=h=n;r={baseState:l.baseState,firstBaseUpdate:d,lastBaseUpdate:h,shared:l.shared,callbacks:l.callbacks},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=n:e.next=n,r.lastBaseUpdate=n}var dd=!1;function ji(){if(dd){var e=or;if(e!==null)throw e}}function Ni(e,n,r,l){dd=!1;var d=e.updateQueue;za=!1;var h=d.firstBaseUpdate,v=d.lastBaseUpdate,A=d.shared.pending;if(A!==null){d.shared.pending=null;var Y=A,J=Y.next;Y.next=null,v===null?h=J:v.next=J,v=Y;var ie=e.alternate;ie!==null&&(ie=ie.updateQueue,A=ie.lastBaseUpdate,A!==v&&(A===null?ie.firstBaseUpdate=J:A.next=J,ie.lastBaseUpdate=Y))}if(h!==null){var le=d.baseState;v=0,ie=J=Y=null,A=h;do{var ee=A.lane&-536870913,ae=ee!==A.lane;if(ae?(ke&ee)===ee:(l&ee)===ee){ee!==0&&ee===ir&&(dd=!0),ie!==null&&(ie=ie.next={lane:0,tag:A.tag,payload:A.payload,callback:null,next:null});e:{var fe=e,we=A;ee=n;var Xe=r;switch(we.tag){case 1:if(fe=we.payload,typeof fe=="function"){le=fe.call(Xe,le,ee);break e}le=fe;break e;case 3:fe.flags=fe.flags&-65537|128;case 0:if(fe=we.payload,ee=typeof fe=="function"?fe.call(Xe,le,ee):fe,ee==null)break e;le=x({},le,ee);break e;case 2:za=!0}}ee=A.callback,ee!==null&&(e.flags|=64,ae&&(e.flags|=8192),ae=d.callbacks,ae===null?d.callbacks=[ee]:ae.push(ee))}else ae={lane:ee,tag:A.tag,payload:A.payload,callback:A.callback,next:null},ie===null?(J=ie=ae,Y=le):ie=ie.next=ae,v|=ee;if(A=A.next,A===null){if(A=d.shared.pending,A===null)break;ae=A,A=ae.next,ae.next=null,d.lastBaseUpdate=ae,d.shared.pending=null}}while(!0);ie===null&&(Y=le),d.baseState=Y,d.firstBaseUpdate=J,d.lastBaseUpdate=ie,h===null&&(d.shared.lanes=0),$a|=v,e.lanes=v,e.memoizedState=le}}function vp(e,n){if(typeof e!="function")throw Error(o(191,e));e.call(n)}function wp(e,n){var r=e.callbacks;if(r!==null)for(e.callbacks=null,e=0;e<r.length;e++)vp(r[e],n)}var ur=B(null),hl=B(0);function jp(e,n){e=ca,te(hl,e),te(ur,n),ca=e|n.baseLanes}function fd(){te(hl,ca),te(ur,ur.current)}function hd(){ca=hl.current,H(ur),H(hl)}var qt=B(null),an=null;function Oa(e){var n=e.alternate;te(tt,tt.current&1),te(qt,e),an===null&&(n===null||ur.current!==null||n.memoizedState!==null)&&(an=e)}function md(e){te(tt,tt.current),te(qt,e),an===null&&(an=e)}function Np(e){e.tag===22?(te(tt,tt.current),te(qt,e),an===null&&(an=e)):Ba()}function Ba(){te(tt,tt.current),te(qt,qt.current)}function Vt(e){H(qt),an===e&&(an=null),H(tt)}var tt=B(0);function ml(e){for(var n=e;n!==null;){if(n.tag===13){var r=n.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||wf(r)||jf(r)))return n}else if(n.tag===19&&(n.memoizedProps.revealOrder==="forwards"||n.memoizedProps.revealOrder==="backwards"||n.memoizedProps.revealOrder==="unstable_legacy-backwards"||n.memoizedProps.revealOrder==="together")){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var ta=0,Ne=null,Ye=null,it=null,pl=!1,dr=!1,Ns=!1,gl=0,Si=0,fr=null,D2=0;function Je(){throw Error(o(321))}function pd(e,n){if(n===null)return!1;for(var r=0;r<n.length&&r<e.length;r++)if(!$t(e[r],n[r]))return!1;return!0}function gd(e,n,r,l,d,h){return ta=h,Ne=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,O.H=e===null||e.memoizedState===null?i0:kd,Ns=!1,h=r(l,d),Ns=!1,dr&&(h=_p(n,r,l,d)),Sp(e),h}function Sp(e){O.H=Ci;var n=Ye!==null&&Ye.next!==null;if(ta=0,it=Ye=Ne=null,pl=!1,Si=0,fr=null,n)throw Error(o(300));e===null||ot||(e=e.dependencies,e!==null&&il(e)&&(ot=!0))}function _p(e,n,r,l){Ne=e;var d=0;do{if(dr&&(fr=null),Si=0,dr=!1,25<=d)throw Error(o(301));if(d+=1,it=Ye=null,e.updateQueue!=null){var h=e.updateQueue;h.lastEffect=null,h.events=null,h.stores=null,h.memoCache!=null&&(h.memoCache.index=0)}O.H=o0,h=n(r,l)}while(dr);return h}function O2(){var e=O.H,n=e.useState()[0];return n=typeof n.then=="function"?_i(n):n,e=e.useState()[0],(Ye!==null?Ye.memoizedState:null)!==e&&(Ne.flags|=1024),n}function xd(){var e=gl!==0;return gl=0,e}function yd(e,n,r){n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~r}function bd(e){if(pl){for(e=e.memoizedState;e!==null;){var n=e.queue;n!==null&&(n.pending=null),e=e.next}pl=!1}ta=0,it=Ye=Ne=null,dr=!1,Si=gl=0,fr=null}function Tt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return it===null?Ne.memoizedState=it=e:it=it.next=e,it}function nt(){if(Ye===null){var e=Ne.alternate;e=e!==null?e.memoizedState:null}else e=Ye.next;var n=it===null?Ne.memoizedState:it.next;if(n!==null)it=n,Ye=e;else{if(e===null)throw Ne.alternate===null?Error(o(467)):Error(o(310));Ye=e,e={memoizedState:Ye.memoizedState,baseState:Ye.baseState,baseQueue:Ye.baseQueue,queue:Ye.queue,next:null},it===null?Ne.memoizedState=it=e:it=it.next=e}return it}function xl(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function _i(e){var n=Si;return Si+=1,fr===null&&(fr=[]),e=pp(fr,e,n),n=Ne,(it===null?n.memoizedState:it.next)===null&&(n=n.alternate,O.H=n===null||n.memoizedState===null?i0:kd),e}function yl(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return _i(e);if(e.$$typeof===T)return yt(e)}throw Error(o(438,String(e)))}function vd(e){var n=null,r=Ne.updateQueue;if(r!==null&&(n=r.memoCache),n==null){var l=Ne.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(n={data:l.data.map(function(d){return d.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),r===null&&(r=xl(),Ne.updateQueue=r),r.memoCache=n,r=n.data[n.index],r===void 0)for(r=n.data[n.index]=Array(e),l=0;l<e;l++)r[l]=G;return n.index++,r}function na(e,n){return typeof n=="function"?n(e):n}function bl(e){var n=nt();return wd(n,Ye,e)}function wd(e,n,r){var l=e.queue;if(l===null)throw Error(o(311));l.lastRenderedReducer=r;var d=e.baseQueue,h=l.pending;if(h!==null){if(d!==null){var v=d.next;d.next=h.next,h.next=v}n.baseQueue=d=h,l.pending=null}if(h=e.baseState,d===null)e.memoizedState=h;else{n=d.next;var A=v=null,Y=null,J=n,ie=!1;do{var le=J.lane&-536870913;if(le!==J.lane?(ke&le)===le:(ta&le)===le){var ee=J.revertLane;if(ee===0)Y!==null&&(Y=Y.next={lane:0,revertLane:0,gesture:null,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null}),le===ir&&(ie=!0);else if((ta&ee)===ee){J=J.next,ee===ir&&(ie=!0);continue}else le={lane:0,revertLane:J.revertLane,gesture:null,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},Y===null?(A=Y=le,v=h):Y=Y.next=le,Ne.lanes|=ee,$a|=ee;le=J.action,Ns&&r(h,le),h=J.hasEagerState?J.eagerState:r(h,le)}else ee={lane:le,revertLane:J.revertLane,gesture:J.gesture,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},Y===null?(A=Y=ee,v=h):Y=Y.next=ee,Ne.lanes|=le,$a|=le;J=J.next}while(J!==null&&J!==n);if(Y===null?v=h:Y.next=A,!$t(h,e.memoizedState)&&(ot=!0,ie&&(r=or,r!==null)))throw r;e.memoizedState=h,e.baseState=v,e.baseQueue=Y,l.lastRenderedState=h}return d===null&&(l.lanes=0),[e.memoizedState,l.dispatch]}function jd(e){var n=nt(),r=n.queue;if(r===null)throw Error(o(311));r.lastRenderedReducer=e;var l=r.dispatch,d=r.pending,h=n.memoizedState;if(d!==null){r.pending=null;var v=d=d.next;do h=e(h,v.action),v=v.next;while(v!==d);$t(h,n.memoizedState)||(ot=!0),n.memoizedState=h,n.baseQueue===null&&(n.baseState=h),r.lastRenderedState=h}return[h,l]}function Ep(e,n,r){var l=Ne,d=nt(),h=De;if(h){if(r===void 0)throw Error(o(407));r=r()}else r=n();var v=!$t((Ye||d).memoizedState,r);if(v&&(d.memoizedState=r,ot=!0),d=d.queue,_d(Mp.bind(null,l,d,e),[e]),d.getSnapshot!==n||v||it!==null&&it.memoizedState.tag&1){if(l.flags|=2048,hr(9,{destroy:void 0},Tp.bind(null,l,d,r,n),null),Ie===null)throw Error(o(349));h||(ta&127)!==0||Cp(l,n,r)}return r}function Cp(e,n,r){e.flags|=16384,e={getSnapshot:n,value:r},n=Ne.updateQueue,n===null?(n=xl(),Ne.updateQueue=n,n.stores=[e]):(r=n.stores,r===null?n.stores=[e]:r.push(e))}function Tp(e,n,r,l){n.value=r,n.getSnapshot=l,Ap(n)&&kp(e)}function Mp(e,n,r){return r(function(){Ap(n)&&kp(e)})}function Ap(e){var n=e.getSnapshot;e=e.value;try{var r=n();return!$t(e,r)}catch{return!0}}function kp(e){var n=ms(e,2);n!==null&&Lt(n,e,2)}function Nd(e){var n=Tt();if(typeof e=="function"){var r=e;if(e=r(),Ns){En(!0);try{r()}finally{En(!1)}}}return n.memoizedState=n.baseState=e,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:na,lastRenderedState:e},n}function zp(e,n,r,l){return e.baseState=r,wd(e,Ye,typeof l=="function"?l:na)}function B2(e,n,r,l,d){if(jl(e))throw Error(o(485));if(e=n.action,e!==null){var h={payload:d,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){h.listeners.push(v)}};O.T!==null?r(!0):h.isTransition=!1,l(h),r=n.pending,r===null?(h.next=n.pending=h,Rp(n,h)):(h.next=r.next,n.pending=r.next=h)}}function Rp(e,n){var r=n.action,l=n.payload,d=e.state;if(n.isTransition){var h=O.T,v={};O.T=v;try{var A=r(d,l),Y=O.S;Y!==null&&Y(v,A),Dp(e,n,A)}catch(J){Sd(e,n,J)}finally{h!==null&&v.types!==null&&(h.types=v.types),O.T=h}}else try{h=r(d,l),Dp(e,n,h)}catch(J){Sd(e,n,J)}}function Dp(e,n,r){r!==null&&typeof r=="object"&&typeof r.then=="function"?r.then(function(l){Op(e,n,l)},function(l){return Sd(e,n,l)}):Op(e,n,r)}function Op(e,n,r){n.status="fulfilled",n.value=r,Bp(n),e.state=r,n=e.pending,n!==null&&(r=n.next,r===n?e.pending=null:(r=r.next,n.next=r,Rp(e,r)))}function Sd(e,n,r){var l=e.pending;if(e.pending=null,l!==null){l=l.next;do n.status="rejected",n.reason=r,Bp(n),n=n.next;while(n!==l)}e.action=null}function Bp(e){e=e.listeners;for(var n=0;n<e.length;n++)(0,e[n])()}function Lp(e,n){return n}function Hp(e,n){if(De){var r=Ie.formState;if(r!==null){e:{var l=Ne;if(De){if(Ge){t:{for(var d=Ge,h=nn;d.nodeType!==8;){if(!h){d=null;break t}if(d=sn(d.nextSibling),d===null){d=null;break t}}h=d.data,d=h==="F!"||h==="F"?d:null}if(d){Ge=sn(d.nextSibling),l=d.data==="F!";break e}}Aa(l)}l=!1}l&&(n=r[0])}}return r=Tt(),r.memoizedState=r.baseState=n,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Lp,lastRenderedState:n},r.queue=l,r=a0.bind(null,Ne,l),l.dispatch=r,l=Nd(!1),h=Ad.bind(null,Ne,!1,l.queue),l=Tt(),d={state:n,dispatch:null,action:e,pending:null},l.queue=d,r=B2.bind(null,Ne,d,h,r),d.dispatch=r,l.memoizedState=e,[n,r,!1]}function $p(e){var n=nt();return Up(n,Ye,e)}function Up(e,n,r){if(n=wd(e,n,Lp)[0],e=bl(na)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var l=_i(n)}catch(v){throw v===lr?cl:v}else l=n;n=nt();var d=n.queue,h=d.dispatch;return r!==n.memoizedState&&(Ne.flags|=2048,hr(9,{destroy:void 0},L2.bind(null,d,r),null)),[l,h,e]}function L2(e,n){e.action=n}function qp(e){var n=nt(),r=Ye;if(r!==null)return Up(n,r,e);nt(),n=n.memoizedState,r=nt();var l=r.queue.dispatch;return r.memoizedState=e,[n,l,!1]}function hr(e,n,r,l){return e={tag:e,create:r,deps:l,inst:n,next:null},n=Ne.updateQueue,n===null&&(n=xl(),Ne.updateQueue=n),r=n.lastEffect,r===null?n.lastEffect=e.next=e:(l=r.next,r.next=e,e.next=l,n.lastEffect=e),e}function Vp(){return nt().memoizedState}function vl(e,n,r,l){var d=Tt();Ne.flags|=e,d.memoizedState=hr(1|n,{destroy:void 0},r,l===void 0?null:l)}function wl(e,n,r,l){var d=nt();l=l===void 0?null:l;var h=d.memoizedState.inst;Ye!==null&&l!==null&&pd(l,Ye.memoizedState.deps)?d.memoizedState=hr(n,h,r,l):(Ne.flags|=e,d.memoizedState=hr(1|n,h,r,l))}function Yp(e,n){vl(8390656,8,e,n)}function _d(e,n){wl(2048,8,e,n)}function H2(e){Ne.flags|=4;var n=Ne.updateQueue;if(n===null)n=xl(),Ne.updateQueue=n,n.events=[e];else{var r=n.events;r===null?n.events=[e]:r.push(e)}}function Pp(e){var n=nt().memoizedState;return H2({ref:n,nextImpl:e}),function(){if((He&2)!==0)throw Error(o(440));return n.impl.apply(void 0,arguments)}}function Xp(e,n){return wl(4,2,e,n)}function Ip(e,n){return wl(4,4,e,n)}function Gp(e,n){if(typeof n=="function"){e=e();var r=n(e);return function(){typeof r=="function"?r():n(null)}}if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function Qp(e,n,r){r=r!=null?r.concat([e]):null,wl(4,4,Gp.bind(null,n,e),r)}function Ed(){}function Zp(e,n){var r=nt();n=n===void 0?null:n;var l=r.memoizedState;return n!==null&&pd(n,l[1])?l[0]:(r.memoizedState=[e,n],e)}function Fp(e,n){var r=nt();n=n===void 0?null:n;var l=r.memoizedState;if(n!==null&&pd(n,l[1]))return l[0];if(l=e(),Ns){En(!0);try{e()}finally{En(!1)}}return r.memoizedState=[l,n],l}function Cd(e,n,r){return r===void 0||(ta&1073741824)!==0&&(ke&261930)===0?e.memoizedState=n:(e.memoizedState=r,e=W0(),Ne.lanes|=e,$a|=e,r)}function Wp(e,n,r,l){return $t(r,n)?r:ur.current!==null?(e=Cd(e,r,l),$t(e,n)||(ot=!0),e):(ta&42)===0||(ta&1073741824)!==0&&(ke&261930)===0?(ot=!0,e.memoizedState=r):(e=W0(),Ne.lanes|=e,$a|=e,n)}function Kp(e,n,r,l,d){var h=D.p;D.p=h!==0&&8>h?h:8;var v=O.T,A={};O.T=A,Ad(e,!1,n,r);try{var Y=d(),J=O.S;if(J!==null&&J(A,Y),Y!==null&&typeof Y=="object"&&typeof Y.then=="function"){var ie=R2(Y,l);Ei(e,n,ie,Xt(e))}else Ei(e,n,l,Xt(e))}catch(le){Ei(e,n,{then:function(){},status:"rejected",reason:le},Xt())}finally{D.p=h,v!==null&&A.types!==null&&(v.types=A.types),O.T=v}}function $2(){}function Td(e,n,r,l){if(e.tag!==5)throw Error(o(476));var d=Jp(e).queue;Kp(e,d,n,P,r===null?$2:function(){return e0(e),r(l)})}function Jp(e){var n=e.memoizedState;if(n!==null)return n;n={memoizedState:P,baseState:P,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:na,lastRenderedState:P},next:null};var r={};return n.next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:na,lastRenderedState:r},next:null},e.memoizedState=n,e=e.alternate,e!==null&&(e.memoizedState=n),n}function e0(e){var n=Jp(e);n.next===null&&(n=e.alternate.memoizedState),Ei(e,n.next.queue,{},Xt())}function Md(){return yt(Yi)}function t0(){return nt().memoizedState}function n0(){return nt().memoizedState}function U2(e){for(var n=e.return;n!==null;){switch(n.tag){case 24:case 3:var r=Xt();e=Ra(r);var l=Da(n,e,r);l!==null&&(Lt(l,n,r),wi(l,n,r)),n={cache:sd()},e.payload=n;return}n=n.return}}function q2(e,n,r){var l=Xt();r={lane:l,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},jl(e)?s0(n,r):(r=Gu(e,n,r,l),r!==null&&(Lt(r,e,l),r0(r,n,l)))}function a0(e,n,r){var l=Xt();Ei(e,n,r,l)}function Ei(e,n,r,l){var d={lane:l,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null};if(jl(e))s0(n,d);else{var h=e.alternate;if(e.lanes===0&&(h===null||h.lanes===0)&&(h=n.lastRenderedReducer,h!==null))try{var v=n.lastRenderedState,A=h(v,r);if(d.hasEagerState=!0,d.eagerState=A,$t(A,v))return nl(e,n,d,0),Ie===null&&tl(),!1}catch{}if(r=Gu(e,n,d,l),r!==null)return Lt(r,e,l),r0(r,n,l),!0}return!1}function Ad(e,n,r,l){if(l={lane:2,revertLane:cf(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},jl(e)){if(n)throw Error(o(479))}else n=Gu(e,r,l,2),n!==null&&Lt(n,e,2)}function jl(e){var n=e.alternate;return e===Ne||n!==null&&n===Ne}function s0(e,n){dr=pl=!0;var r=e.pending;r===null?n.next=n:(n.next=r.next,r.next=n),e.pending=n}function r0(e,n,r){if((r&4194048)!==0){var l=n.lanes;l&=e.pendingLanes,r|=l,n.lanes=r,Oo(e,r)}}var Ci={readContext:yt,use:yl,useCallback:Je,useContext:Je,useEffect:Je,useImperativeHandle:Je,useLayoutEffect:Je,useInsertionEffect:Je,useMemo:Je,useReducer:Je,useRef:Je,useState:Je,useDebugValue:Je,useDeferredValue:Je,useTransition:Je,useSyncExternalStore:Je,useId:Je,useHostTransitionStatus:Je,useFormState:Je,useActionState:Je,useOptimistic:Je,useMemoCache:Je,useCacheRefresh:Je};Ci.useEffectEvent=Je;var i0={readContext:yt,use:yl,useCallback:function(e,n){return Tt().memoizedState=[e,n===void 0?null:n],e},useContext:yt,useEffect:Yp,useImperativeHandle:function(e,n,r){r=r!=null?r.concat([e]):null,vl(4194308,4,Gp.bind(null,n,e),r)},useLayoutEffect:function(e,n){return vl(4194308,4,e,n)},useInsertionEffect:function(e,n){vl(4,2,e,n)},useMemo:function(e,n){var r=Tt();n=n===void 0?null:n;var l=e();if(Ns){En(!0);try{e()}finally{En(!1)}}return r.memoizedState=[l,n],l},useReducer:function(e,n,r){var l=Tt();if(r!==void 0){var d=r(n);if(Ns){En(!0);try{r(n)}finally{En(!1)}}}else d=n;return l.memoizedState=l.baseState=d,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:d},l.queue=e,e=e.dispatch=q2.bind(null,Ne,e),[l.memoizedState,e]},useRef:function(e){var n=Tt();return e={current:e},n.memoizedState=e},useState:function(e){e=Nd(e);var n=e.queue,r=a0.bind(null,Ne,n);return n.dispatch=r,[e.memoizedState,r]},useDebugValue:Ed,useDeferredValue:function(e,n){var r=Tt();return Cd(r,e,n)},useTransition:function(){var e=Nd(!1);return e=Kp.bind(null,Ne,e.queue,!0,!1),Tt().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,n,r){var l=Ne,d=Tt();if(De){if(r===void 0)throw Error(o(407));r=r()}else{if(r=n(),Ie===null)throw Error(o(349));(ke&127)!==0||Cp(l,n,r)}d.memoizedState=r;var h={value:r,getSnapshot:n};return d.queue=h,Yp(Mp.bind(null,l,h,e),[e]),l.flags|=2048,hr(9,{destroy:void 0},Tp.bind(null,l,h,r,n),null),r},useId:function(){var e=Tt(),n=Ie.identifierPrefix;if(De){var r=Mn,l=Tn;r=(l&~(1<<32-Ct(l)-1)).toString(32)+r,n="_"+n+"R_"+r,r=gl++,0<r&&(n+="H"+r.toString(32)),n+="_"}else r=D2++,n="_"+n+"r_"+r.toString(32)+"_";return e.memoizedState=n},useHostTransitionStatus:Md,useFormState:Hp,useActionState:Hp,useOptimistic:function(e){var n=Tt();n.memoizedState=n.baseState=e;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=r,n=Ad.bind(null,Ne,!0,r),r.dispatch=n,[e,n]},useMemoCache:vd,useCacheRefresh:function(){return Tt().memoizedState=U2.bind(null,Ne)},useEffectEvent:function(e){var n=Tt(),r={impl:e};return n.memoizedState=r,function(){if((He&2)!==0)throw Error(o(440));return r.impl.apply(void 0,arguments)}}},kd={readContext:yt,use:yl,useCallback:Zp,useContext:yt,useEffect:_d,useImperativeHandle:Qp,useInsertionEffect:Xp,useLayoutEffect:Ip,useMemo:Fp,useReducer:bl,useRef:Vp,useState:function(){return bl(na)},useDebugValue:Ed,useDeferredValue:function(e,n){var r=nt();return Wp(r,Ye.memoizedState,e,n)},useTransition:function(){var e=bl(na)[0],n=nt().memoizedState;return[typeof e=="boolean"?e:_i(e),n]},useSyncExternalStore:Ep,useId:t0,useHostTransitionStatus:Md,useFormState:$p,useActionState:$p,useOptimistic:function(e,n){var r=nt();return zp(r,Ye,e,n)},useMemoCache:vd,useCacheRefresh:n0};kd.useEffectEvent=Pp;var o0={readContext:yt,use:yl,useCallback:Zp,useContext:yt,useEffect:_d,useImperativeHandle:Qp,useInsertionEffect:Xp,useLayoutEffect:Ip,useMemo:Fp,useReducer:jd,useRef:Vp,useState:function(){return jd(na)},useDebugValue:Ed,useDeferredValue:function(e,n){var r=nt();return Ye===null?Cd(r,e,n):Wp(r,Ye.memoizedState,e,n)},useTransition:function(){var e=jd(na)[0],n=nt().memoizedState;return[typeof e=="boolean"?e:_i(e),n]},useSyncExternalStore:Ep,useId:t0,useHostTransitionStatus:Md,useFormState:qp,useActionState:qp,useOptimistic:function(e,n){var r=nt();return Ye!==null?zp(r,Ye,e,n):(r.baseState=e,[e,r.queue.dispatch])},useMemoCache:vd,useCacheRefresh:n0};o0.useEffectEvent=Pp;function zd(e,n,r,l){n=e.memoizedState,r=r(l,n),r=r==null?n:x({},n,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Rd={enqueueSetState:function(e,n,r){e=e._reactInternals;var l=Xt(),d=Ra(l);d.payload=n,r!=null&&(d.callback=r),n=Da(e,d,l),n!==null&&(Lt(n,e,l),wi(n,e,l))},enqueueReplaceState:function(e,n,r){e=e._reactInternals;var l=Xt(),d=Ra(l);d.tag=1,d.payload=n,r!=null&&(d.callback=r),n=Da(e,d,l),n!==null&&(Lt(n,e,l),wi(n,e,l))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var r=Xt(),l=Ra(r);l.tag=2,n!=null&&(l.callback=n),n=Da(e,l,r),n!==null&&(Lt(n,e,r),wi(n,e,r))}};function l0(e,n,r,l,d,h,v){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,h,v):n.prototype&&n.prototype.isPureReactComponent?!hi(r,l)||!hi(d,h):!0}function c0(e,n,r,l){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(r,l),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(r,l),n.state!==e&&Rd.enqueueReplaceState(n,n.state,null)}function Ss(e,n){var r=n;if("ref"in n){r={};for(var l in n)l!=="ref"&&(r[l]=n[l])}if(e=e.defaultProps){r===n&&(r=x({},r));for(var d in e)r[d]===void 0&&(r[d]=e[d])}return r}function u0(e){el(e)}function d0(e){console.error(e)}function f0(e){el(e)}function Nl(e,n){try{var r=e.onUncaughtError;r(n.value,{componentStack:n.stack})}catch(l){setTimeout(function(){throw l})}}function h0(e,n,r){try{var l=e.onCaughtError;l(r.value,{componentStack:r.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(d){setTimeout(function(){throw d})}}function Dd(e,n,r){return r=Ra(r),r.tag=3,r.payload={element:null},r.callback=function(){Nl(e,n)},r}function m0(e){return e=Ra(e),e.tag=3,e}function p0(e,n,r,l){var d=r.type.getDerivedStateFromError;if(typeof d=="function"){var h=l.value;e.payload=function(){return d(h)},e.callback=function(){h0(n,r,l)}}var v=r.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(e.callback=function(){h0(n,r,l),typeof d!="function"&&(Ua===null?Ua=new Set([this]):Ua.add(this));var A=l.stack;this.componentDidCatch(l.value,{componentStack:A!==null?A:""})})}function V2(e,n,r,l,d){if(r.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(n=r.alternate,n!==null&&rr(n,r,d,!0),r=qt.current,r!==null){switch(r.tag){case 31:case 13:return an===null?Ol():r.alternate===null&&et===0&&(et=3),r.flags&=-257,r.flags|=65536,r.lanes=d,l===ul?r.flags|=16384:(n=r.updateQueue,n===null?r.updateQueue=new Set([l]):n.add(l),rf(e,l,d)),!1;case 22:return r.flags|=65536,l===ul?r.flags|=16384:(n=r.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([l])},r.updateQueue=n):(r=n.retryQueue,r===null?n.retryQueue=new Set([l]):r.add(l)),rf(e,l,d)),!1}throw Error(o(435,r.tag))}return rf(e,l,d),Ol(),!1}if(De)return n=qt.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=d,l!==Ju&&(e=Error(o(422),{cause:l}),gi(Jt(e,r)))):(l!==Ju&&(n=Error(o(423),{cause:l}),gi(Jt(n,r))),e=e.current.alternate,e.flags|=65536,d&=-d,e.lanes|=d,l=Jt(l,r),d=Dd(e.stateNode,l,d),ud(e,d),et!==4&&(et=2)),!1;var h=Error(o(520),{cause:l});if(h=Jt(h,r),Oi===null?Oi=[h]:Oi.push(h),et!==4&&(et=2),n===null)return!0;l=Jt(l,r),r=n;do{switch(r.tag){case 3:return r.flags|=65536,e=d&-d,r.lanes|=e,e=Dd(r.stateNode,l,e),ud(r,e),!1;case 1:if(n=r.type,h=r.stateNode,(r.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||h!==null&&typeof h.componentDidCatch=="function"&&(Ua===null||!Ua.has(h))))return r.flags|=65536,d&=-d,r.lanes|=d,d=m0(d),p0(d,e,r,l),ud(r,d),!1}r=r.return}while(r!==null);return!1}var Od=Error(o(461)),ot=!1;function bt(e,n,r,l){n.child=e===null?bp(n,null,r,l):js(n,e.child,r,l)}function g0(e,n,r,l,d){r=r.render;var h=n.ref;if("ref"in l){var v={};for(var A in l)A!=="ref"&&(v[A]=l[A])}else v=l;return ys(n),l=gd(e,n,r,v,h,d),A=xd(),e!==null&&!ot?(yd(e,n,d),aa(e,n,d)):(De&&A&&Wu(n),n.flags|=1,bt(e,n,l,d),n.child)}function x0(e,n,r,l,d){if(e===null){var h=r.type;return typeof h=="function"&&!Qu(h)&&h.defaultProps===void 0&&r.compare===null?(n.tag=15,n.type=h,y0(e,n,h,l,d)):(e=sl(r.type,null,l,n,n.mode,d),e.ref=n.ref,e.return=n,n.child=e)}if(h=e.child,!Yd(e,d)){var v=h.memoizedProps;if(r=r.compare,r=r!==null?r:hi,r(v,l)&&e.ref===n.ref)return aa(e,n,d)}return n.flags|=1,e=Wn(h,l),e.ref=n.ref,e.return=n,n.child=e}function y0(e,n,r,l,d){if(e!==null){var h=e.memoizedProps;if(hi(h,l)&&e.ref===n.ref)if(ot=!1,n.pendingProps=l=h,Yd(e,d))(e.flags&131072)!==0&&(ot=!0);else return n.lanes=e.lanes,aa(e,n,d)}return Bd(e,n,r,l,d)}function b0(e,n,r,l){var d=l.children,h=e!==null?e.memoizedState:null;if(e===null&&n.stateNode===null&&(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((n.flags&128)!==0){if(h=h!==null?h.baseLanes|r:r,e!==null){for(l=n.child=e.child,d=0;l!==null;)d=d|l.lanes|l.childLanes,l=l.sibling;l=d&~h}else l=0,n.child=null;return v0(e,n,h,r,l)}if((r&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},e!==null&&ll(n,h!==null?h.cachePool:null),h!==null?jp(n,h):fd(),Np(n);else return l=n.lanes=536870912,v0(e,n,h!==null?h.baseLanes|r:r,r,l)}else h!==null?(ll(n,h.cachePool),jp(n,h),Ba(),n.memoizedState=null):(e!==null&&ll(n,null),fd(),Ba());return bt(e,n,d,r),n.child}function Ti(e,n){return e!==null&&e.tag===22||n.stateNode!==null||(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.sibling}function v0(e,n,r,l,d){var h=id();return h=h===null?null:{parent:rt._currentValue,pool:h},n.memoizedState={baseLanes:r,cachePool:h},e!==null&&ll(n,null),fd(),Np(n),e!==null&&rr(e,n,l,!0),n.childLanes=d,null}function Sl(e,n){return n=El({mode:n.mode,children:n.children},e.mode),n.ref=e.ref,e.child=n,n.return=e,n}function w0(e,n,r){return js(n,e.child,null,r),e=Sl(n,n.pendingProps),e.flags|=2,Vt(n),n.memoizedState=null,e}function Y2(e,n,r){var l=n.pendingProps,d=(n.flags&128)!==0;if(n.flags&=-129,e===null){if(De){if(l.mode==="hidden")return e=Sl(n,l),n.lanes=536870912,Ti(null,e);if(md(n),(e=Ge)?(e=Rg(e,nn),e=e!==null&&e.data==="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:Ta!==null?{id:Tn,overflow:Mn}:null,retryLane:536870912,hydrationErrors:null},r=sp(e),r.return=n,n.child=r,xt=n,Ge=null)):e=null,e===null)throw Aa(n);return n.lanes=536870912,null}return Sl(n,l)}var h=e.memoizedState;if(h!==null){var v=h.dehydrated;if(md(n),d)if(n.flags&256)n.flags&=-257,n=w0(e,n,r);else if(n.memoizedState!==null)n.child=e.child,n.flags|=128,n=null;else throw Error(o(558));else if(ot||rr(e,n,r,!1),d=(r&e.childLanes)!==0,ot||d){if(l=Ie,l!==null&&(v=Bo(l,r),v!==0&&v!==h.retryLane))throw h.retryLane=v,ms(e,v),Lt(l,e,v),Od;Ol(),n=w0(e,n,r)}else e=h.treeContext,Ge=sn(v.nextSibling),xt=n,De=!0,Ma=null,nn=!1,e!==null&&op(n,e),n=Sl(n,l),n.flags|=4096;return n}return e=Wn(e.child,{mode:l.mode,children:l.children}),e.ref=n.ref,n.child=e,e.return=n,e}function _l(e,n){var r=n.ref;if(r===null)e!==null&&e.ref!==null&&(n.flags|=4194816);else{if(typeof r!="function"&&typeof r!="object")throw Error(o(284));(e===null||e.ref!==r)&&(n.flags|=4194816)}}function Bd(e,n,r,l,d){return ys(n),r=gd(e,n,r,l,void 0,d),l=xd(),e!==null&&!ot?(yd(e,n,d),aa(e,n,d)):(De&&l&&Wu(n),n.flags|=1,bt(e,n,r,d),n.child)}function j0(e,n,r,l,d,h){return ys(n),n.updateQueue=null,r=_p(n,l,r,d),Sp(e),l=xd(),e!==null&&!ot?(yd(e,n,h),aa(e,n,h)):(De&&l&&Wu(n),n.flags|=1,bt(e,n,r,h),n.child)}function N0(e,n,r,l,d){if(ys(n),n.stateNode===null){var h=tr,v=r.contextType;typeof v=="object"&&v!==null&&(h=yt(v)),h=new r(l,h),n.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,h.updater=Rd,n.stateNode=h,h._reactInternals=n,h=n.stateNode,h.props=l,h.state=n.memoizedState,h.refs={},ld(n),v=r.contextType,h.context=typeof v=="object"&&v!==null?yt(v):tr,h.state=n.memoizedState,v=r.getDerivedStateFromProps,typeof v=="function"&&(zd(n,r,v,l),h.state=n.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof h.getSnapshotBeforeUpdate=="function"||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(v=h.state,typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount(),v!==h.state&&Rd.enqueueReplaceState(h,h.state,null),Ni(n,l,h,d),ji(),h.state=n.memoizedState),typeof h.componentDidMount=="function"&&(n.flags|=4194308),l=!0}else if(e===null){h=n.stateNode;var A=n.memoizedProps,Y=Ss(r,A);h.props=Y;var J=h.context,ie=r.contextType;v=tr,typeof ie=="object"&&ie!==null&&(v=yt(ie));var le=r.getDerivedStateFromProps;ie=typeof le=="function"||typeof h.getSnapshotBeforeUpdate=="function",A=n.pendingProps!==A,ie||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(A||J!==v)&&c0(n,h,l,v),za=!1;var ee=n.memoizedState;h.state=ee,Ni(n,l,h,d),ji(),J=n.memoizedState,A||ee!==J||za?(typeof le=="function"&&(zd(n,r,le,l),J=n.memoizedState),(Y=za||l0(n,r,Y,l,ee,J,v))?(ie||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount()),typeof h.componentDidMount=="function"&&(n.flags|=4194308)):(typeof h.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=l,n.memoizedState=J),h.props=l,h.state=J,h.context=v,l=Y):(typeof h.componentDidMount=="function"&&(n.flags|=4194308),l=!1)}else{h=n.stateNode,cd(e,n),v=n.memoizedProps,ie=Ss(r,v),h.props=ie,le=n.pendingProps,ee=h.context,J=r.contextType,Y=tr,typeof J=="object"&&J!==null&&(Y=yt(J)),A=r.getDerivedStateFromProps,(J=typeof A=="function"||typeof h.getSnapshotBeforeUpdate=="function")||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(v!==le||ee!==Y)&&c0(n,h,l,Y),za=!1,ee=n.memoizedState,h.state=ee,Ni(n,l,h,d),ji();var ae=n.memoizedState;v!==le||ee!==ae||za||e!==null&&e.dependencies!==null&&il(e.dependencies)?(typeof A=="function"&&(zd(n,r,A,l),ae=n.memoizedState),(ie=za||l0(n,r,ie,l,ee,ae,Y)||e!==null&&e.dependencies!==null&&il(e.dependencies))?(J||typeof h.UNSAFE_componentWillUpdate!="function"&&typeof h.componentWillUpdate!="function"||(typeof h.componentWillUpdate=="function"&&h.componentWillUpdate(l,ae,Y),typeof h.UNSAFE_componentWillUpdate=="function"&&h.UNSAFE_componentWillUpdate(l,ae,Y)),typeof h.componentDidUpdate=="function"&&(n.flags|=4),typeof h.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof h.componentDidUpdate!="function"||v===e.memoizedProps&&ee===e.memoizedState||(n.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&ee===e.memoizedState||(n.flags|=1024),n.memoizedProps=l,n.memoizedState=ae),h.props=l,h.state=ae,h.context=Y,l=ie):(typeof h.componentDidUpdate!="function"||v===e.memoizedProps&&ee===e.memoizedState||(n.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&ee===e.memoizedState||(n.flags|=1024),l=!1)}return h=l,_l(e,n),l=(n.flags&128)!==0,h||l?(h=n.stateNode,r=l&&typeof r.getDerivedStateFromError!="function"?null:h.render(),n.flags|=1,e!==null&&l?(n.child=js(n,e.child,null,d),n.child=js(n,null,r,d)):bt(e,n,r,d),n.memoizedState=h.state,e=n.child):e=aa(e,n,d),e}function S0(e,n,r,l){return gs(),n.flags|=256,bt(e,n,r,l),n.child}var Ld={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Hd(e){return{baseLanes:e,cachePool:hp()}}function $d(e,n,r){return e=e!==null?e.childLanes&~r:0,n&&(e|=Pt),e}function _0(e,n,r){var l=n.pendingProps,d=!1,h=(n.flags&128)!==0,v;if((v=h)||(v=e!==null&&e.memoizedState===null?!1:(tt.current&2)!==0),v&&(d=!0,n.flags&=-129),v=(n.flags&32)!==0,n.flags&=-33,e===null){if(De){if(d?Oa(n):Ba(),(e=Ge)?(e=Rg(e,nn),e=e!==null&&e.data!=="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:Ta!==null?{id:Tn,overflow:Mn}:null,retryLane:536870912,hydrationErrors:null},r=sp(e),r.return=n,n.child=r,xt=n,Ge=null)):e=null,e===null)throw Aa(n);return jf(e)?n.lanes=32:n.lanes=536870912,null}var A=l.children;return l=l.fallback,d?(Ba(),d=n.mode,A=El({mode:"hidden",children:A},d),l=ps(l,d,r,null),A.return=n,l.return=n,A.sibling=l,n.child=A,l=n.child,l.memoizedState=Hd(r),l.childLanes=$d(e,v,r),n.memoizedState=Ld,Ti(null,l)):(Oa(n),Ud(n,A))}var Y=e.memoizedState;if(Y!==null&&(A=Y.dehydrated,A!==null)){if(h)n.flags&256?(Oa(n),n.flags&=-257,n=qd(e,n,r)):n.memoizedState!==null?(Ba(),n.child=e.child,n.flags|=128,n=null):(Ba(),A=l.fallback,d=n.mode,l=El({mode:"visible",children:l.children},d),A=ps(A,d,r,null),A.flags|=2,l.return=n,A.return=n,l.sibling=A,n.child=l,js(n,e.child,null,r),l=n.child,l.memoizedState=Hd(r),l.childLanes=$d(e,v,r),n.memoizedState=Ld,n=Ti(null,l));else if(Oa(n),jf(A)){if(v=A.nextSibling&&A.nextSibling.dataset,v)var J=v.dgst;v=J,l=Error(o(419)),l.stack="",l.digest=v,gi({value:l,source:null,stack:null}),n=qd(e,n,r)}else if(ot||rr(e,n,r,!1),v=(r&e.childLanes)!==0,ot||v){if(v=Ie,v!==null&&(l=Bo(v,r),l!==0&&l!==Y.retryLane))throw Y.retryLane=l,ms(e,l),Lt(v,e,l),Od;wf(A)||Ol(),n=qd(e,n,r)}else wf(A)?(n.flags|=192,n.child=e.child,n=null):(e=Y.treeContext,Ge=sn(A.nextSibling),xt=n,De=!0,Ma=null,nn=!1,e!==null&&op(n,e),n=Ud(n,l.children),n.flags|=4096);return n}return d?(Ba(),A=l.fallback,d=n.mode,Y=e.child,J=Y.sibling,l=Wn(Y,{mode:"hidden",children:l.children}),l.subtreeFlags=Y.subtreeFlags&65011712,J!==null?A=Wn(J,A):(A=ps(A,d,r,null),A.flags|=2),A.return=n,l.return=n,l.sibling=A,n.child=l,Ti(null,l),l=n.child,A=e.child.memoizedState,A===null?A=Hd(r):(d=A.cachePool,d!==null?(Y=rt._currentValue,d=d.parent!==Y?{parent:Y,pool:Y}:d):d=hp(),A={baseLanes:A.baseLanes|r,cachePool:d}),l.memoizedState=A,l.childLanes=$d(e,v,r),n.memoizedState=Ld,Ti(e.child,l)):(Oa(n),r=e.child,e=r.sibling,r=Wn(r,{mode:"visible",children:l.children}),r.return=n,r.sibling=null,e!==null&&(v=n.deletions,v===null?(n.deletions=[e],n.flags|=16):v.push(e)),n.child=r,n.memoizedState=null,r)}function Ud(e,n){return n=El({mode:"visible",children:n},e.mode),n.return=e,e.child=n}function El(e,n){return e=Ut(22,e,null,n),e.lanes=0,e}function qd(e,n,r){return js(n,e.child,null,r),e=Ud(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function E0(e,n,r){e.lanes|=n;var l=e.alternate;l!==null&&(l.lanes|=n),nd(e.return,n,r)}function Vd(e,n,r,l,d,h){var v=e.memoizedState;v===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:l,tail:r,tailMode:d,treeForkCount:h}:(v.isBackwards=n,v.rendering=null,v.renderingStartTime=0,v.last=l,v.tail=r,v.tailMode=d,v.treeForkCount=h)}function C0(e,n,r){var l=n.pendingProps,d=l.revealOrder,h=l.tail;l=l.children;var v=tt.current,A=(v&2)!==0;if(A?(v=v&1|2,n.flags|=128):v&=1,te(tt,v),bt(e,n,l,r),l=De?pi:0,!A&&e!==null&&(e.flags&128)!==0)e:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&E0(e,r,n);else if(e.tag===19)E0(e,r,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break e;for(;e.sibling===null;){if(e.return===null||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(d){case"forwards":for(r=n.child,d=null;r!==null;)e=r.alternate,e!==null&&ml(e)===null&&(d=r),r=r.sibling;r=d,r===null?(d=n.child,n.child=null):(d=r.sibling,r.sibling=null),Vd(n,!1,d,r,h,l);break;case"backwards":case"unstable_legacy-backwards":for(r=null,d=n.child,n.child=null;d!==null;){if(e=d.alternate,e!==null&&ml(e)===null){n.child=d;break}e=d.sibling,d.sibling=r,r=d,d=e}Vd(n,!0,r,null,h,l);break;case"together":Vd(n,!1,null,null,void 0,l);break;default:n.memoizedState=null}return n.child}function aa(e,n,r){if(e!==null&&(n.dependencies=e.dependencies),$a|=n.lanes,(r&n.childLanes)===0)if(e!==null){if(rr(e,n,r,!1),(r&n.childLanes)===0)return null}else return null;if(e!==null&&n.child!==e.child)throw Error(o(153));if(n.child!==null){for(e=n.child,r=Wn(e,e.pendingProps),n.child=r,r.return=n;e.sibling!==null;)e=e.sibling,r=r.sibling=Wn(e,e.pendingProps),r.return=n;r.sibling=null}return n.child}function Yd(e,n){return(e.lanes&n)!==0?!0:(e=e.dependencies,!!(e!==null&&il(e)))}function P2(e,n,r){switch(n.tag){case 3:U(n,n.stateNode.containerInfo),ka(n,rt,e.memoizedState.cache),gs();break;case 27:case 5:he(n);break;case 4:U(n,n.stateNode.containerInfo);break;case 10:ka(n,n.type,n.memoizedProps.value);break;case 31:if(n.memoizedState!==null)return n.flags|=128,md(n),null;break;case 13:var l=n.memoizedState;if(l!==null)return l.dehydrated!==null?(Oa(n),n.flags|=128,null):(r&n.child.childLanes)!==0?_0(e,n,r):(Oa(n),e=aa(e,n,r),e!==null?e.sibling:null);Oa(n);break;case 19:var d=(e.flags&128)!==0;if(l=(r&n.childLanes)!==0,l||(rr(e,n,r,!1),l=(r&n.childLanes)!==0),d){if(l)return C0(e,n,r);n.flags|=128}if(d=n.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),te(tt,tt.current),l)break;return null;case 22:return n.lanes=0,b0(e,n,r,n.pendingProps);case 24:ka(n,rt,e.memoizedState.cache)}return aa(e,n,r)}function T0(e,n,r){if(e!==null)if(e.memoizedProps!==n.pendingProps)ot=!0;else{if(!Yd(e,r)&&(n.flags&128)===0)return ot=!1,P2(e,n,r);ot=(e.flags&131072)!==0}else ot=!1,De&&(n.flags&1048576)!==0&&ip(n,pi,n.index);switch(n.lanes=0,n.tag){case 16:e:{var l=n.pendingProps;if(e=vs(n.elementType),n.type=e,typeof e=="function")Qu(e)?(l=Ss(e,l),n.tag=1,n=N0(null,n,e,l,r)):(n.tag=0,n=Bd(null,n,e,l,r));else{if(e!=null){var d=e.$$typeof;if(d===k){n.tag=11,n=g0(null,n,e,l,r);break e}else if(d===M){n.tag=14,n=x0(null,n,e,l,r);break e}}throw n=V(e)||e,Error(o(306,n,""))}}return n;case 0:return Bd(e,n,n.type,n.pendingProps,r);case 1:return l=n.type,d=Ss(l,n.pendingProps),N0(e,n,l,d,r);case 3:e:{if(U(n,n.stateNode.containerInfo),e===null)throw Error(o(387));l=n.pendingProps;var h=n.memoizedState;d=h.element,cd(e,n),Ni(n,l,null,r);var v=n.memoizedState;if(l=v.cache,ka(n,rt,l),l!==h.cache&&ad(n,[rt],r,!0),ji(),l=v.element,h.isDehydrated)if(h={element:l,isDehydrated:!1,cache:v.cache},n.updateQueue.baseState=h,n.memoizedState=h,n.flags&256){n=S0(e,n,l,r);break e}else if(l!==d){d=Jt(Error(o(424)),n),gi(d),n=S0(e,n,l,r);break e}else for(e=n.stateNode.containerInfo,e.nodeType===9?e=e.body:e=e.nodeName==="HTML"?e.ownerDocument.body:e,Ge=sn(e.firstChild),xt=n,De=!0,Ma=null,nn=!0,r=bp(n,null,l,r),n.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(gs(),l===d){n=aa(e,n,r);break e}bt(e,n,l,r)}n=n.child}return n;case 26:return _l(e,n),e===null?(r=$g(n.type,null,n.pendingProps,null))?n.memoizedState=r:De||(r=n.type,e=n.pendingProps,l=Vl(de.current).createElement(r),l[dt]=n,l[Nt]=e,vt(l,r,e),st(l),n.stateNode=l):n.memoizedState=$g(n.type,e.memoizedProps,n.pendingProps,e.memoizedState),null;case 27:return he(n),e===null&&De&&(l=n.stateNode=Bg(n.type,n.pendingProps,de.current),xt=n,nn=!0,d=Ge,Pa(n.type)?(Nf=d,Ge=sn(l.firstChild)):Ge=d),bt(e,n,n.pendingProps.children,r),_l(e,n),e===null&&(n.flags|=4194304),n.child;case 5:return e===null&&De&&((d=l=Ge)&&(l=vw(l,n.type,n.pendingProps,nn),l!==null?(n.stateNode=l,xt=n,Ge=sn(l.firstChild),nn=!1,d=!0):d=!1),d||Aa(n)),he(n),d=n.type,h=n.pendingProps,v=e!==null?e.memoizedProps:null,l=h.children,yf(d,h)?l=null:v!==null&&yf(d,v)&&(n.flags|=32),n.memoizedState!==null&&(d=gd(e,n,O2,null,null,r),Yi._currentValue=d),_l(e,n),bt(e,n,l,r),n.child;case 6:return e===null&&De&&((e=r=Ge)&&(r=ww(r,n.pendingProps,nn),r!==null?(n.stateNode=r,xt=n,Ge=null,e=!0):e=!1),e||Aa(n)),null;case 13:return _0(e,n,r);case 4:return U(n,n.stateNode.containerInfo),l=n.pendingProps,e===null?n.child=js(n,null,l,r):bt(e,n,l,r),n.child;case 11:return g0(e,n,n.type,n.pendingProps,r);case 7:return bt(e,n,n.pendingProps,r),n.child;case 8:return bt(e,n,n.pendingProps.children,r),n.child;case 12:return bt(e,n,n.pendingProps.children,r),n.child;case 10:return l=n.pendingProps,ka(n,n.type,l.value),bt(e,n,l.children,r),n.child;case 9:return d=n.type._context,l=n.pendingProps.children,ys(n),d=yt(d),l=l(d),n.flags|=1,bt(e,n,l,r),n.child;case 14:return x0(e,n,n.type,n.pendingProps,r);case 15:return y0(e,n,n.type,n.pendingProps,r);case 19:return C0(e,n,r);case 31:return Y2(e,n,r);case 22:return b0(e,n,r,n.pendingProps);case 24:return ys(n),l=yt(rt),e===null?(d=id(),d===null&&(d=Ie,h=sd(),d.pooledCache=h,h.refCount++,h!==null&&(d.pooledCacheLanes|=r),d=h),n.memoizedState={parent:l,cache:d},ld(n),ka(n,rt,d)):((e.lanes&r)!==0&&(cd(e,n),Ni(n,null,null,r),ji()),d=e.memoizedState,h=n.memoizedState,d.parent!==l?(d={parent:l,cache:l},n.memoizedState=d,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=d),ka(n,rt,l)):(l=h.cache,ka(n,rt,l),l!==d.cache&&ad(n,[rt],r,!0))),bt(e,n,n.pendingProps.children,r),n.child;case 29:throw n.pendingProps}throw Error(o(156,n.tag))}function sa(e){e.flags|=4}function Pd(e,n,r,l,d){if((n=(e.mode&32)!==0)&&(n=!1),n){if(e.flags|=16777216,(d&335544128)===d)if(e.stateNode.complete)e.flags|=8192;else if(tg())e.flags|=8192;else throw ws=ul,od}else e.flags&=-16777217}function M0(e,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Pg(n))if(tg())e.flags|=8192;else throw ws=ul,od}function Cl(e,n){n!==null&&(e.flags|=4),e.flags&16384&&(n=e.tag!==22?Ro():536870912,e.lanes|=n,xr|=n)}function Mi(e,n){if(!De)switch(e.tailMode){case"hidden":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var l=null;r!==null;)r.alternate!==null&&(l=r),r=r.sibling;l===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function Qe(e){var n=e.alternate!==null&&e.alternate.child===e.child,r=0,l=0;if(n)for(var d=e.child;d!==null;)r|=d.lanes|d.childLanes,l|=d.subtreeFlags&65011712,l|=d.flags&65011712,d.return=e,d=d.sibling;else for(d=e.child;d!==null;)r|=d.lanes|d.childLanes,l|=d.subtreeFlags,l|=d.flags,d.return=e,d=d.sibling;return e.subtreeFlags|=l,e.childLanes=r,n}function X2(e,n,r){var l=n.pendingProps;switch(Ku(n),n.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Qe(n),null;case 1:return Qe(n),null;case 3:return r=n.stateNode,l=null,e!==null&&(l=e.memoizedState.cache),n.memoizedState.cache!==l&&(n.flags|=2048),ea(rt),ce(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(sr(n)?sa(n):e===null||e.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,ed())),Qe(n),null;case 26:var d=n.type,h=n.memoizedState;return e===null?(sa(n),h!==null?(Qe(n),M0(n,h)):(Qe(n),Pd(n,d,null,l,r))):h?h!==e.memoizedState?(sa(n),Qe(n),M0(n,h)):(Qe(n),n.flags&=-16777217):(e=e.memoizedProps,e!==l&&sa(n),Qe(n),Pd(n,d,e,l,r)),null;case 27:if(ve(n),r=de.current,d=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==l&&sa(n);else{if(!l){if(n.stateNode===null)throw Error(o(166));return Qe(n),null}e=ne.current,sr(n)?lp(n):(e=Bg(d,l,r),n.stateNode=e,sa(n))}return Qe(n),null;case 5:if(ve(n),d=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==l&&sa(n);else{if(!l){if(n.stateNode===null)throw Error(o(166));return Qe(n),null}if(h=ne.current,sr(n))lp(n);else{var v=Vl(de.current);switch(h){case 1:h=v.createElementNS("http://www.w3.org/2000/svg",d);break;case 2:h=v.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;default:switch(d){case"svg":h=v.createElementNS("http://www.w3.org/2000/svg",d);break;case"math":h=v.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;case"script":h=v.createElement("div"),h.innerHTML="<script><\/script>",h=h.removeChild(h.firstChild);break;case"select":h=typeof l.is=="string"?v.createElement("select",{is:l.is}):v.createElement("select"),l.multiple?h.multiple=!0:l.size&&(h.size=l.size);break;default:h=typeof l.is=="string"?v.createElement(d,{is:l.is}):v.createElement(d)}}h[dt]=n,h[Nt]=l;e:for(v=n.child;v!==null;){if(v.tag===5||v.tag===6)h.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===n)break e;for(;v.sibling===null;){if(v.return===null||v.return===n)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}n.stateNode=h;e:switch(vt(h,d,l),d){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&sa(n)}}return Qe(n),Pd(n,n.type,e===null?null:e.memoizedProps,n.pendingProps,r),null;case 6:if(e&&n.stateNode!=null)e.memoizedProps!==l&&sa(n);else{if(typeof l!="string"&&n.stateNode===null)throw Error(o(166));if(e=de.current,sr(n)){if(e=n.stateNode,r=n.memoizedProps,l=null,d=xt,d!==null)switch(d.tag){case 27:case 5:l=d.memoizedProps}e[dt]=n,e=!!(e.nodeValue===r||l!==null&&l.suppressHydrationWarning===!0||_g(e.nodeValue,r)),e||Aa(n,!0)}else e=Vl(e).createTextNode(l),e[dt]=n,n.stateNode=e}return Qe(n),null;case 31:if(r=n.memoizedState,e===null||e.memoizedState!==null){if(l=sr(n),r!==null){if(e===null){if(!l)throw Error(o(318));if(e=n.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(557));e[dt]=n}else gs(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;Qe(n),e=!1}else r=ed(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=r),e=!0;if(!e)return n.flags&256?(Vt(n),n):(Vt(n),null);if((n.flags&128)!==0)throw Error(o(558))}return Qe(n),null;case 13:if(l=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(d=sr(n),l!==null&&l.dehydrated!==null){if(e===null){if(!d)throw Error(o(318));if(d=n.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(o(317));d[dt]=n}else gs(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;Qe(n),d=!1}else d=ed(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=d),d=!0;if(!d)return n.flags&256?(Vt(n),n):(Vt(n),null)}return Vt(n),(n.flags&128)!==0?(n.lanes=r,n):(r=l!==null,e=e!==null&&e.memoizedState!==null,r&&(l=n.child,d=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(d=l.alternate.memoizedState.cachePool.pool),h=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(h=l.memoizedState.cachePool.pool),h!==d&&(l.flags|=2048)),r!==e&&r&&(n.child.flags|=8192),Cl(n,n.updateQueue),Qe(n),null);case 4:return ce(),e===null&&hf(n.stateNode.containerInfo),Qe(n),null;case 10:return ea(n.type),Qe(n),null;case 19:if(H(tt),l=n.memoizedState,l===null)return Qe(n),null;if(d=(n.flags&128)!==0,h=l.rendering,h===null)if(d)Mi(l,!1);else{if(et!==0||e!==null&&(e.flags&128)!==0)for(e=n.child;e!==null;){if(h=ml(e),h!==null){for(n.flags|=128,Mi(l,!1),e=h.updateQueue,n.updateQueue=e,Cl(n,e),n.subtreeFlags=0,e=r,r=n.child;r!==null;)ap(r,e),r=r.sibling;return te(tt,tt.current&1|2),De&&Kn(n,l.treeForkCount),n.child}e=e.sibling}l.tail!==null&&at()>zl&&(n.flags|=128,d=!0,Mi(l,!1),n.lanes=4194304)}else{if(!d)if(e=ml(h),e!==null){if(n.flags|=128,d=!0,e=e.updateQueue,n.updateQueue=e,Cl(n,e),Mi(l,!0),l.tail===null&&l.tailMode==="hidden"&&!h.alternate&&!De)return Qe(n),null}else 2*at()-l.renderingStartTime>zl&&r!==536870912&&(n.flags|=128,d=!0,Mi(l,!1),n.lanes=4194304);l.isBackwards?(h.sibling=n.child,n.child=h):(e=l.last,e!==null?e.sibling=h:n.child=h,l.last=h)}return l.tail!==null?(e=l.tail,l.rendering=e,l.tail=e.sibling,l.renderingStartTime=at(),e.sibling=null,r=tt.current,te(tt,d?r&1|2:r&1),De&&Kn(n,l.treeForkCount),e):(Qe(n),null);case 22:case 23:return Vt(n),hd(),l=n.memoizedState!==null,e!==null?e.memoizedState!==null!==l&&(n.flags|=8192):l&&(n.flags|=8192),l?(r&536870912)!==0&&(n.flags&128)===0&&(Qe(n),n.subtreeFlags&6&&(n.flags|=8192)):Qe(n),r=n.updateQueue,r!==null&&Cl(n,r.retryQueue),r=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(r=e.memoizedState.cachePool.pool),l=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(l=n.memoizedState.cachePool.pool),l!==r&&(n.flags|=2048),e!==null&&H(bs),null;case 24:return r=null,e!==null&&(r=e.memoizedState.cache),n.memoizedState.cache!==r&&(n.flags|=2048),ea(rt),Qe(n),null;case 25:return null;case 30:return null}throw Error(o(156,n.tag))}function I2(e,n){switch(Ku(n),n.tag){case 1:return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return ea(rt),ce(),e=n.flags,(e&65536)!==0&&(e&128)===0?(n.flags=e&-65537|128,n):null;case 26:case 27:case 5:return ve(n),null;case 31:if(n.memoizedState!==null){if(Vt(n),n.alternate===null)throw Error(o(340));gs()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 13:if(Vt(n),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(o(340));gs()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return H(tt),null;case 4:return ce(),null;case 10:return ea(n.type),null;case 22:case 23:return Vt(n),hd(),e!==null&&H(bs),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 24:return ea(rt),null;case 25:return null;default:return null}}function A0(e,n){switch(Ku(n),n.tag){case 3:ea(rt),ce();break;case 26:case 27:case 5:ve(n);break;case 4:ce();break;case 31:n.memoizedState!==null&&Vt(n);break;case 13:Vt(n);break;case 19:H(tt);break;case 10:ea(n.type);break;case 22:case 23:Vt(n),hd(),e!==null&&H(bs);break;case 24:ea(rt)}}function Ai(e,n){try{var r=n.updateQueue,l=r!==null?r.lastEffect:null;if(l!==null){var d=l.next;r=d;do{if((r.tag&e)===e){l=void 0;var h=r.create,v=r.inst;l=h(),v.destroy=l}r=r.next}while(r!==d)}}catch(A){qe(n,n.return,A)}}function La(e,n,r){try{var l=n.updateQueue,d=l!==null?l.lastEffect:null;if(d!==null){var h=d.next;l=h;do{if((l.tag&e)===e){var v=l.inst,A=v.destroy;if(A!==void 0){v.destroy=void 0,d=n;var Y=r,J=A;try{J()}catch(ie){qe(d,Y,ie)}}}l=l.next}while(l!==h)}}catch(ie){qe(n,n.return,ie)}}function k0(e){var n=e.updateQueue;if(n!==null){var r=e.stateNode;try{wp(n,r)}catch(l){qe(e,e.return,l)}}}function z0(e,n,r){r.props=Ss(e.type,e.memoizedProps),r.state=e.memoizedState;try{r.componentWillUnmount()}catch(l){qe(e,n,l)}}function ki(e,n){try{var r=e.ref;if(r!==null){switch(e.tag){case 26:case 27:case 5:var l=e.stateNode;break;case 30:l=e.stateNode;break;default:l=e.stateNode}typeof r=="function"?e.refCleanup=r(l):r.current=l}}catch(d){qe(e,n,d)}}function An(e,n){var r=e.ref,l=e.refCleanup;if(r!==null)if(typeof l=="function")try{l()}catch(d){qe(e,n,d)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof r=="function")try{r(null)}catch(d){qe(e,n,d)}else r.current=null}function R0(e){var n=e.type,r=e.memoizedProps,l=e.stateNode;try{e:switch(n){case"button":case"input":case"select":case"textarea":r.autoFocus&&l.focus();break e;case"img":r.src?l.src=r.src:r.srcSet&&(l.srcset=r.srcSet)}}catch(d){qe(e,e.return,d)}}function Xd(e,n,r){try{var l=e.stateNode;mw(l,e.type,r,n),l[Nt]=n}catch(d){qe(e,e.return,d)}}function D0(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Pa(e.type)||e.tag===4}function Id(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||D0(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Pa(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Gd(e,n,r){var l=e.tag;if(l===5||l===6)e=e.stateNode,n?(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r).insertBefore(e,n):(n=r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,n.appendChild(e),r=r._reactRootContainer,r!=null||n.onclick!==null||(n.onclick=Zn));else if(l!==4&&(l===27&&Pa(e.type)&&(r=e.stateNode,n=null),e=e.child,e!==null))for(Gd(e,n,r),e=e.sibling;e!==null;)Gd(e,n,r),e=e.sibling}function Tl(e,n,r){var l=e.tag;if(l===5||l===6)e=e.stateNode,n?r.insertBefore(e,n):r.appendChild(e);else if(l!==4&&(l===27&&Pa(e.type)&&(r=e.stateNode),e=e.child,e!==null))for(Tl(e,n,r),e=e.sibling;e!==null;)Tl(e,n,r),e=e.sibling}function O0(e){var n=e.stateNode,r=e.memoizedProps;try{for(var l=e.type,d=n.attributes;d.length;)n.removeAttributeNode(d[0]);vt(n,l,r),n[dt]=e,n[Nt]=r}catch(h){qe(e,e.return,h)}}var ra=!1,lt=!1,Qd=!1,B0=typeof WeakSet=="function"?WeakSet:Set,mt=null;function G2(e,n){if(e=e.containerInfo,gf=Zl,e=Qm(e),qu(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var l=r.getSelection&&r.getSelection();if(l&&l.rangeCount!==0){r=l.anchorNode;var d=l.anchorOffset,h=l.focusNode;l=l.focusOffset;try{r.nodeType,h.nodeType}catch{r=null;break e}var v=0,A=-1,Y=-1,J=0,ie=0,le=e,ee=null;t:for(;;){for(var ae;le!==r||d!==0&&le.nodeType!==3||(A=v+d),le!==h||l!==0&&le.nodeType!==3||(Y=v+l),le.nodeType===3&&(v+=le.nodeValue.length),(ae=le.firstChild)!==null;)ee=le,le=ae;for(;;){if(le===e)break t;if(ee===r&&++J===d&&(A=v),ee===h&&++ie===l&&(Y=v),(ae=le.nextSibling)!==null)break;le=ee,ee=le.parentNode}le=ae}r=A===-1||Y===-1?null:{start:A,end:Y}}else r=null}r=r||{start:0,end:0}}else r=null;for(xf={focusedElem:e,selectionRange:r},Zl=!1,mt=n;mt!==null;)if(n=mt,e=n.child,(n.subtreeFlags&1028)!==0&&e!==null)e.return=n,mt=e;else for(;mt!==null;){switch(n=mt,h=n.alternate,e=n.flags,n.tag){case 0:if((e&4)!==0&&(e=n.updateQueue,e=e!==null?e.events:null,e!==null))for(r=0;r<e.length;r++)d=e[r],d.ref.impl=d.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&h!==null){e=void 0,r=n,d=h.memoizedProps,h=h.memoizedState,l=r.stateNode;try{var fe=Ss(r.type,d);e=l.getSnapshotBeforeUpdate(fe,h),l.__reactInternalSnapshotBeforeUpdate=e}catch(we){qe(r,r.return,we)}}break;case 3:if((e&1024)!==0){if(e=n.stateNode.containerInfo,r=e.nodeType,r===9)vf(e);else if(r===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":vf(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(o(163))}if(e=n.sibling,e!==null){e.return=n.return,mt=e;break}mt=n.return}}function L0(e,n,r){var l=r.flags;switch(r.tag){case 0:case 11:case 15:oa(e,r),l&4&&Ai(5,r);break;case 1:if(oa(e,r),l&4)if(e=r.stateNode,n===null)try{e.componentDidMount()}catch(v){qe(r,r.return,v)}else{var d=Ss(r.type,n.memoizedProps);n=n.memoizedState;try{e.componentDidUpdate(d,n,e.__reactInternalSnapshotBeforeUpdate)}catch(v){qe(r,r.return,v)}}l&64&&k0(r),l&512&&ki(r,r.return);break;case 3:if(oa(e,r),l&64&&(e=r.updateQueue,e!==null)){if(n=null,r.child!==null)switch(r.child.tag){case 27:case 5:n=r.child.stateNode;break;case 1:n=r.child.stateNode}try{wp(e,n)}catch(v){qe(r,r.return,v)}}break;case 27:n===null&&l&4&&O0(r);case 26:case 5:oa(e,r),n===null&&l&4&&R0(r),l&512&&ki(r,r.return);break;case 12:oa(e,r);break;case 31:oa(e,r),l&4&&U0(e,r);break;case 13:oa(e,r),l&4&&q0(e,r),l&64&&(e=r.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(r=nw.bind(null,r),jw(e,r))));break;case 22:if(l=r.memoizedState!==null||ra,!l){n=n!==null&&n.memoizedState!==null||lt,d=ra;var h=lt;ra=l,(lt=n)&&!h?la(e,r,(r.subtreeFlags&8772)!==0):oa(e,r),ra=d,lt=h}break;case 30:break;default:oa(e,r)}}function H0(e){var n=e.alternate;n!==null&&(e.alternate=null,H0(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&ai(n)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Ze=null,Rt=!1;function ia(e,n,r){for(r=r.child;r!==null;)$0(e,n,r),r=r.sibling}function $0(e,n,r){if(Et&&typeof Et.onCommitFiberUnmount=="function")try{Et.onCommitFiberUnmount(rs,r)}catch{}switch(r.tag){case 26:lt||An(r,n),ia(e,n,r),r.memoizedState?r.memoizedState.count--:r.stateNode&&(r=r.stateNode,r.parentNode.removeChild(r));break;case 27:lt||An(r,n);var l=Ze,d=Rt;Pa(r.type)&&(Ze=r.stateNode,Rt=!1),ia(e,n,r),Ui(r.stateNode),Ze=l,Rt=d;break;case 5:lt||An(r,n);case 6:if(l=Ze,d=Rt,Ze=null,ia(e,n,r),Ze=l,Rt=d,Ze!==null)if(Rt)try{(Ze.nodeType===9?Ze.body:Ze.nodeName==="HTML"?Ze.ownerDocument.body:Ze).removeChild(r.stateNode)}catch(h){qe(r,n,h)}else try{Ze.removeChild(r.stateNode)}catch(h){qe(r,n,h)}break;case 18:Ze!==null&&(Rt?(e=Ze,kg(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,r.stateNode),_r(e)):kg(Ze,r.stateNode));break;case 4:l=Ze,d=Rt,Ze=r.stateNode.containerInfo,Rt=!0,ia(e,n,r),Ze=l,Rt=d;break;case 0:case 11:case 14:case 15:La(2,r,n),lt||La(4,r,n),ia(e,n,r);break;case 1:lt||(An(r,n),l=r.stateNode,typeof l.componentWillUnmount=="function"&&z0(r,n,l)),ia(e,n,r);break;case 21:ia(e,n,r);break;case 22:lt=(l=lt)||r.memoizedState!==null,ia(e,n,r),lt=l;break;default:ia(e,n,r)}}function U0(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{_r(e)}catch(r){qe(n,n.return,r)}}}function q0(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{_r(e)}catch(r){qe(n,n.return,r)}}function Q2(e){switch(e.tag){case 31:case 13:case 19:var n=e.stateNode;return n===null&&(n=e.stateNode=new B0),n;case 22:return e=e.stateNode,n=e._retryCache,n===null&&(n=e._retryCache=new B0),n;default:throw Error(o(435,e.tag))}}function Ml(e,n){var r=Q2(e);n.forEach(function(l){if(!r.has(l)){r.add(l);var d=aw.bind(null,e,l);l.then(d,d)}})}function Dt(e,n){var r=n.deletions;if(r!==null)for(var l=0;l<r.length;l++){var d=r[l],h=e,v=n,A=v;e:for(;A!==null;){switch(A.tag){case 27:if(Pa(A.type)){Ze=A.stateNode,Rt=!1;break e}break;case 5:Ze=A.stateNode,Rt=!1;break e;case 3:case 4:Ze=A.stateNode.containerInfo,Rt=!0;break e}A=A.return}if(Ze===null)throw Error(o(160));$0(h,v,d),Ze=null,Rt=!1,h=d.alternate,h!==null&&(h.return=null),d.return=null}if(n.subtreeFlags&13886)for(n=n.child;n!==null;)V0(n,e),n=n.sibling}var pn=null;function V0(e,n){var r=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Dt(n,e),Ot(e),l&4&&(La(3,e,e.return),Ai(3,e),La(5,e,e.return));break;case 1:Dt(n,e),Ot(e),l&512&&(lt||r===null||An(r,r.return)),l&64&&ra&&(e=e.updateQueue,e!==null&&(l=e.callbacks,l!==null&&(r=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=r===null?l:r.concat(l))));break;case 26:var d=pn;if(Dt(n,e),Ot(e),l&512&&(lt||r===null||An(r,r.return)),l&4){var h=r!==null?r.memoizedState:null;if(l=e.memoizedState,r===null)if(l===null)if(e.stateNode===null){e:{l=e.type,r=e.memoizedProps,d=d.ownerDocument||d;t:switch(l){case"title":h=d.getElementsByTagName("title")[0],(!h||h[ls]||h[dt]||h.namespaceURI==="http://www.w3.org/2000/svg"||h.hasAttribute("itemprop"))&&(h=d.createElement(l),d.head.insertBefore(h,d.querySelector("head > title"))),vt(h,l,r),h[dt]=e,st(h),l=h;break e;case"link":var v=Vg("link","href",d).get(l+(r.href||""));if(v){for(var A=0;A<v.length;A++)if(h=v[A],h.getAttribute("href")===(r.href==null||r.href===""?null:r.href)&&h.getAttribute("rel")===(r.rel==null?null:r.rel)&&h.getAttribute("title")===(r.title==null?null:r.title)&&h.getAttribute("crossorigin")===(r.crossOrigin==null?null:r.crossOrigin)){v.splice(A,1);break t}}h=d.createElement(l),vt(h,l,r),d.head.appendChild(h);break;case"meta":if(v=Vg("meta","content",d).get(l+(r.content||""))){for(A=0;A<v.length;A++)if(h=v[A],h.getAttribute("content")===(r.content==null?null:""+r.content)&&h.getAttribute("name")===(r.name==null?null:r.name)&&h.getAttribute("property")===(r.property==null?null:r.property)&&h.getAttribute("http-equiv")===(r.httpEquiv==null?null:r.httpEquiv)&&h.getAttribute("charset")===(r.charSet==null?null:r.charSet)){v.splice(A,1);break t}}h=d.createElement(l),vt(h,l,r),d.head.appendChild(h);break;default:throw Error(o(468,l))}h[dt]=e,st(h),l=h}e.stateNode=l}else Yg(d,e.type,e.stateNode);else e.stateNode=qg(d,l,e.memoizedProps);else h!==l?(h===null?r.stateNode!==null&&(r=r.stateNode,r.parentNode.removeChild(r)):h.count--,l===null?Yg(d,e.type,e.stateNode):qg(d,l,e.memoizedProps)):l===null&&e.stateNode!==null&&Xd(e,e.memoizedProps,r.memoizedProps)}break;case 27:Dt(n,e),Ot(e),l&512&&(lt||r===null||An(r,r.return)),r!==null&&l&4&&Xd(e,e.memoizedProps,r.memoizedProps);break;case 5:if(Dt(n,e),Ot(e),l&512&&(lt||r===null||An(r,r.return)),e.flags&32){d=e.stateNode;try{Qs(d,"")}catch(fe){qe(e,e.return,fe)}}l&4&&e.stateNode!=null&&(d=e.memoizedProps,Xd(e,d,r!==null?r.memoizedProps:d)),l&1024&&(Qd=!0);break;case 6:if(Dt(n,e),Ot(e),l&4){if(e.stateNode===null)throw Error(o(162));l=e.memoizedProps,r=e.stateNode;try{r.nodeValue=l}catch(fe){qe(e,e.return,fe)}}break;case 3:if(Xl=null,d=pn,pn=Yl(n.containerInfo),Dt(n,e),pn=d,Ot(e),l&4&&r!==null&&r.memoizedState.isDehydrated)try{_r(n.containerInfo)}catch(fe){qe(e,e.return,fe)}Qd&&(Qd=!1,Y0(e));break;case 4:l=pn,pn=Yl(e.stateNode.containerInfo),Dt(n,e),Ot(e),pn=l;break;case 12:Dt(n,e),Ot(e);break;case 31:Dt(n,e),Ot(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Ml(e,l)));break;case 13:Dt(n,e),Ot(e),e.child.flags&8192&&e.memoizedState!==null!=(r!==null&&r.memoizedState!==null)&&(kl=at()),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Ml(e,l)));break;case 22:d=e.memoizedState!==null;var Y=r!==null&&r.memoizedState!==null,J=ra,ie=lt;if(ra=J||d,lt=ie||Y,Dt(n,e),lt=ie,ra=J,Ot(e),l&8192)e:for(n=e.stateNode,n._visibility=d?n._visibility&-2:n._visibility|1,d&&(r===null||Y||ra||lt||_s(e)),r=null,n=e;;){if(n.tag===5||n.tag===26){if(r===null){Y=r=n;try{if(h=Y.stateNode,d)v=h.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{A=Y.stateNode;var le=Y.memoizedProps.style,ee=le!=null&&le.hasOwnProperty("display")?le.display:null;A.style.display=ee==null||typeof ee=="boolean"?"":(""+ee).trim()}}catch(fe){qe(Y,Y.return,fe)}}}else if(n.tag===6){if(r===null){Y=n;try{Y.stateNode.nodeValue=d?"":Y.memoizedProps}catch(fe){qe(Y,Y.return,fe)}}}else if(n.tag===18){if(r===null){Y=n;try{var ae=Y.stateNode;d?zg(ae,!0):zg(Y.stateNode,!1)}catch(fe){qe(Y,Y.return,fe)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===e)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;r===n&&(r=null),n=n.return}r===n&&(r=null),n.sibling.return=n.return,n=n.sibling}l&4&&(l=e.updateQueue,l!==null&&(r=l.retryQueue,r!==null&&(l.retryQueue=null,Ml(e,r))));break;case 19:Dt(n,e),Ot(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Ml(e,l)));break;case 30:break;case 21:break;default:Dt(n,e),Ot(e)}}function Ot(e){var n=e.flags;if(n&2){try{for(var r,l=e.return;l!==null;){if(D0(l)){r=l;break}l=l.return}if(r==null)throw Error(o(160));switch(r.tag){case 27:var d=r.stateNode,h=Id(e);Tl(e,h,d);break;case 5:var v=r.stateNode;r.flags&32&&(Qs(v,""),r.flags&=-33);var A=Id(e);Tl(e,A,v);break;case 3:case 4:var Y=r.stateNode.containerInfo,J=Id(e);Gd(e,J,Y);break;default:throw Error(o(161))}}catch(ie){qe(e,e.return,ie)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function Y0(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var n=e;Y0(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),e=e.sibling}}function oa(e,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)L0(e,n.alternate,n),n=n.sibling}function _s(e){for(e=e.child;e!==null;){var n=e;switch(n.tag){case 0:case 11:case 14:case 15:La(4,n,n.return),_s(n);break;case 1:An(n,n.return);var r=n.stateNode;typeof r.componentWillUnmount=="function"&&z0(n,n.return,r),_s(n);break;case 27:Ui(n.stateNode);case 26:case 5:An(n,n.return),_s(n);break;case 22:n.memoizedState===null&&_s(n);break;case 30:_s(n);break;default:_s(n)}e=e.sibling}}function la(e,n,r){for(r=r&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var l=n.alternate,d=e,h=n,v=h.flags;switch(h.tag){case 0:case 11:case 15:la(d,h,r),Ai(4,h);break;case 1:if(la(d,h,r),l=h,d=l.stateNode,typeof d.componentDidMount=="function")try{d.componentDidMount()}catch(J){qe(l,l.return,J)}if(l=h,d=l.updateQueue,d!==null){var A=l.stateNode;try{var Y=d.shared.hiddenCallbacks;if(Y!==null)for(d.shared.hiddenCallbacks=null,d=0;d<Y.length;d++)vp(Y[d],A)}catch(J){qe(l,l.return,J)}}r&&v&64&&k0(h),ki(h,h.return);break;case 27:O0(h);case 26:case 5:la(d,h,r),r&&l===null&&v&4&&R0(h),ki(h,h.return);break;case 12:la(d,h,r);break;case 31:la(d,h,r),r&&v&4&&U0(d,h);break;case 13:la(d,h,r),r&&v&4&&q0(d,h);break;case 22:h.memoizedState===null&&la(d,h,r),ki(h,h.return);break;case 30:break;default:la(d,h,r)}n=n.sibling}}function Zd(e,n){var r=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(r=e.memoizedState.cachePool.pool),e=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(e=n.memoizedState.cachePool.pool),e!==r&&(e!=null&&e.refCount++,r!=null&&xi(r))}function Fd(e,n){e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&xi(e))}function gn(e,n,r,l){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)P0(e,n,r,l),n=n.sibling}function P0(e,n,r,l){var d=n.flags;switch(n.tag){case 0:case 11:case 15:gn(e,n,r,l),d&2048&&Ai(9,n);break;case 1:gn(e,n,r,l);break;case 3:gn(e,n,r,l),d&2048&&(e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&xi(e)));break;case 12:if(d&2048){gn(e,n,r,l),e=n.stateNode;try{var h=n.memoizedProps,v=h.id,A=h.onPostCommit;typeof A=="function"&&A(v,n.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(Y){qe(n,n.return,Y)}}else gn(e,n,r,l);break;case 31:gn(e,n,r,l);break;case 13:gn(e,n,r,l);break;case 23:break;case 22:h=n.stateNode,v=n.alternate,n.memoizedState!==null?h._visibility&2?gn(e,n,r,l):zi(e,n):h._visibility&2?gn(e,n,r,l):(h._visibility|=2,mr(e,n,r,l,(n.subtreeFlags&10256)!==0||!1)),d&2048&&Zd(v,n);break;case 24:gn(e,n,r,l),d&2048&&Fd(n.alternate,n);break;default:gn(e,n,r,l)}}function mr(e,n,r,l,d){for(d=d&&((n.subtreeFlags&10256)!==0||!1),n=n.child;n!==null;){var h=e,v=n,A=r,Y=l,J=v.flags;switch(v.tag){case 0:case 11:case 15:mr(h,v,A,Y,d),Ai(8,v);break;case 23:break;case 22:var ie=v.stateNode;v.memoizedState!==null?ie._visibility&2?mr(h,v,A,Y,d):zi(h,v):(ie._visibility|=2,mr(h,v,A,Y,d)),d&&J&2048&&Zd(v.alternate,v);break;case 24:mr(h,v,A,Y,d),d&&J&2048&&Fd(v.alternate,v);break;default:mr(h,v,A,Y,d)}n=n.sibling}}function zi(e,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var r=e,l=n,d=l.flags;switch(l.tag){case 22:zi(r,l),d&2048&&Zd(l.alternate,l);break;case 24:zi(r,l),d&2048&&Fd(l.alternate,l);break;default:zi(r,l)}n=n.sibling}}var Ri=8192;function pr(e,n,r){if(e.subtreeFlags&Ri)for(e=e.child;e!==null;)X0(e,n,r),e=e.sibling}function X0(e,n,r){switch(e.tag){case 26:pr(e,n,r),e.flags&Ri&&e.memoizedState!==null&&Dw(r,pn,e.memoizedState,e.memoizedProps);break;case 5:pr(e,n,r);break;case 3:case 4:var l=pn;pn=Yl(e.stateNode.containerInfo),pr(e,n,r),pn=l;break;case 22:e.memoizedState===null&&(l=e.alternate,l!==null&&l.memoizedState!==null?(l=Ri,Ri=16777216,pr(e,n,r),Ri=l):pr(e,n,r));break;default:pr(e,n,r)}}function I0(e){var n=e.alternate;if(n!==null&&(e=n.child,e!==null)){n.child=null;do n=e.sibling,e.sibling=null,e=n;while(e!==null)}}function Di(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var r=0;r<n.length;r++){var l=n[r];mt=l,Q0(l,e)}I0(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)G0(e),e=e.sibling}function G0(e){switch(e.tag){case 0:case 11:case 15:Di(e),e.flags&2048&&La(9,e,e.return);break;case 3:Di(e);break;case 12:Di(e);break;case 22:var n=e.stateNode;e.memoizedState!==null&&n._visibility&2&&(e.return===null||e.return.tag!==13)?(n._visibility&=-3,Al(e)):Di(e);break;default:Di(e)}}function Al(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var r=0;r<n.length;r++){var l=n[r];mt=l,Q0(l,e)}I0(e)}for(e=e.child;e!==null;){switch(n=e,n.tag){case 0:case 11:case 15:La(8,n,n.return),Al(n);break;case 22:r=n.stateNode,r._visibility&2&&(r._visibility&=-3,Al(n));break;default:Al(n)}e=e.sibling}}function Q0(e,n){for(;mt!==null;){var r=mt;switch(r.tag){case 0:case 11:case 15:La(8,r,n);break;case 23:case 22:if(r.memoizedState!==null&&r.memoizedState.cachePool!==null){var l=r.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:xi(r.memoizedState.cache)}if(l=r.child,l!==null)l.return=r,mt=l;else e:for(r=e;mt!==null;){l=mt;var d=l.sibling,h=l.return;if(H0(l),l===r){mt=null;break e}if(d!==null){d.return=h,mt=d;break e}mt=h}}}var Z2={getCacheForType:function(e){var n=yt(rt),r=n.data.get(e);return r===void 0&&(r=e(),n.data.set(e,r)),r},cacheSignal:function(){return yt(rt).controller.signal}},F2=typeof WeakMap=="function"?WeakMap:Map,He=0,Ie=null,Te=null,ke=0,Ue=0,Yt=null,Ha=!1,gr=!1,Wd=!1,ca=0,et=0,$a=0,Es=0,Kd=0,Pt=0,xr=0,Oi=null,Bt=null,Jd=!1,kl=0,Z0=0,zl=1/0,Rl=null,Ua=null,ft=0,qa=null,yr=null,ua=0,ef=0,tf=null,F0=null,Bi=0,nf=null;function Xt(){return(He&2)!==0&&ke!==0?ke&-ke:O.T!==null?cf():Lo()}function W0(){if(Pt===0)if((ke&536870912)===0||De){var e=qs;qs<<=1,(qs&3932160)===0&&(qs=262144),Pt=e}else Pt=536870912;return e=qt.current,e!==null&&(e.flags|=32),Pt}function Lt(e,n,r){(e===Ie&&(Ue===2||Ue===9)||e.cancelPendingCommit!==null)&&(br(e,0),Va(e,ke,Pt,!1)),os(e,r),((He&2)===0||e!==Ie)&&(e===Ie&&((He&2)===0&&(Es|=r),et===4&&Va(e,ke,Pt,!1)),kn(e))}function K0(e,n,r){if((He&6)!==0)throw Error(o(327));var l=!r&&(n&127)===0&&(n&e.expiredLanes)===0||is(e,n),d=l?J2(e,n):sf(e,n,!0),h=l;do{if(d===0){gr&&!l&&Va(e,n,0,!1);break}else{if(r=e.current.alternate,h&&!W2(r)){d=sf(e,n,!1),h=!1;continue}if(d===2){if(h=n,e.errorRecoveryDisabledLanes&h)var v=0;else v=e.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){n=v;e:{var A=e;d=Oi;var Y=A.current.memoizedState.isDehydrated;if(Y&&(br(A,v).flags|=256),v=sf(A,v,!1),v!==2){if(Wd&&!Y){A.errorRecoveryDisabledLanes|=h,Es|=h,d=4;break e}h=Bt,Bt=d,h!==null&&(Bt===null?Bt=h:Bt.push.apply(Bt,h))}d=v}if(h=!1,d!==2)continue}}if(d===1){br(e,0),Va(e,n,0,!0);break}e:{switch(l=e,h=d,h){case 0:case 1:throw Error(o(345));case 4:if((n&4194048)!==n)break;case 6:Va(l,n,Pt,!Ha);break e;case 2:Bt=null;break;case 3:case 5:break;default:throw Error(o(329))}if((n&62914560)===n&&(d=kl+300-at(),10<d)){if(Va(l,n,Pt,!Ha),Ys(l,0,!0)!==0)break e;ua=n,l.timeoutHandle=Mg(J0.bind(null,l,r,Bt,Rl,Jd,n,Pt,Es,xr,Ha,h,"Throttled",-0,0),d);break e}J0(l,r,Bt,Rl,Jd,n,Pt,Es,xr,Ha,h,null,-0,0)}}break}while(!0);kn(e)}function J0(e,n,r,l,d,h,v,A,Y,J,ie,le,ee,ae){if(e.timeoutHandle=-1,le=n.subtreeFlags,le&8192||(le&16785408)===16785408){le={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Zn},X0(n,h,le);var fe=(h&62914560)===h?kl-at():(h&4194048)===h?Z0-at():0;if(fe=Ow(le,fe),fe!==null){ua=h,e.cancelPendingCommit=fe(og.bind(null,e,n,h,r,l,d,v,A,Y,ie,le,null,ee,ae)),Va(e,h,v,!J);return}}og(e,n,h,r,l,d,v,A,Y)}function W2(e){for(var n=e;;){var r=n.tag;if((r===0||r===11||r===15)&&n.flags&16384&&(r=n.updateQueue,r!==null&&(r=r.stores,r!==null)))for(var l=0;l<r.length;l++){var d=r[l],h=d.getSnapshot;d=d.value;try{if(!$t(h(),d))return!1}catch{return!1}}if(r=n.child,n.subtreeFlags&16384&&r!==null)r.return=n,n=r;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function Va(e,n,r,l){n&=~Kd,n&=~Es,e.suspendedLanes|=n,e.pingedLanes&=~n,l&&(e.warmLanes|=n),l=e.expirationTimes;for(var d=n;0<d;){var h=31-Ct(d),v=1<<h;l[h]=-1,d&=~v}r!==0&&Do(e,r,n)}function Dl(){return(He&6)===0?(Li(0),!1):!0}function af(){if(Te!==null){if(Ue===0)var e=Te.return;else e=Te,Jn=xs=null,bd(e),cr=null,bi=0,e=Te;for(;e!==null;)A0(e.alternate,e),e=e.return;Te=null}}function br(e,n){var r=e.timeoutHandle;r!==-1&&(e.timeoutHandle=-1,xw(r)),r=e.cancelPendingCommit,r!==null&&(e.cancelPendingCommit=null,r()),ua=0,af(),Ie=e,Te=r=Wn(e.current,null),ke=n,Ue=0,Yt=null,Ha=!1,gr=is(e,n),Wd=!1,xr=Pt=Kd=Es=$a=et=0,Bt=Oi=null,Jd=!1,(n&8)!==0&&(n|=n&32);var l=e.entangledLanes;if(l!==0)for(e=e.entanglements,l&=n;0<l;){var d=31-Ct(l),h=1<<d;n|=e[d],l&=~h}return ca=n,tl(),r}function eg(e,n){Ne=null,O.H=Ci,n===lr||n===cl?(n=gp(),Ue=3):n===od?(n=gp(),Ue=4):Ue=n===Od?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,Yt=n,Te===null&&(et=1,Nl(e,Jt(n,e.current)))}function tg(){var e=qt.current;return e===null?!0:(ke&4194048)===ke?an===null:(ke&62914560)===ke||(ke&536870912)!==0?e===an:!1}function ng(){var e=O.H;return O.H=Ci,e===null?Ci:e}function ag(){var e=O.A;return O.A=Z2,e}function Ol(){et=4,Ha||(ke&4194048)!==ke&&qt.current!==null||(gr=!0),($a&134217727)===0&&(Es&134217727)===0||Ie===null||Va(Ie,ke,Pt,!1)}function sf(e,n,r){var l=He;He|=2;var d=ng(),h=ag();(Ie!==e||ke!==n)&&(Rl=null,br(e,n)),n=!1;var v=et;e:do try{if(Ue!==0&&Te!==null){var A=Te,Y=Yt;switch(Ue){case 8:af(),v=6;break e;case 3:case 2:case 9:case 6:qt.current===null&&(n=!0);var J=Ue;if(Ue=0,Yt=null,vr(e,A,Y,J),r&&gr){v=0;break e}break;default:J=Ue,Ue=0,Yt=null,vr(e,A,Y,J)}}K2(),v=et;break}catch(ie){eg(e,ie)}while(!0);return n&&e.shellSuspendCounter++,Jn=xs=null,He=l,O.H=d,O.A=h,Te===null&&(Ie=null,ke=0,tl()),v}function K2(){for(;Te!==null;)sg(Te)}function J2(e,n){var r=He;He|=2;var l=ng(),d=ag();Ie!==e||ke!==n?(Rl=null,zl=at()+500,br(e,n)):gr=is(e,n);e:do try{if(Ue!==0&&Te!==null){n=Te;var h=Yt;t:switch(Ue){case 1:Ue=0,Yt=null,vr(e,n,h,1);break;case 2:case 9:if(mp(h)){Ue=0,Yt=null,rg(n);break}n=function(){Ue!==2&&Ue!==9||Ie!==e||(Ue=7),kn(e)},h.then(n,n);break e;case 3:Ue=7;break e;case 4:Ue=5;break e;case 7:mp(h)?(Ue=0,Yt=null,rg(n)):(Ue=0,Yt=null,vr(e,n,h,7));break;case 5:var v=null;switch(Te.tag){case 26:v=Te.memoizedState;case 5:case 27:var A=Te;if(v?Pg(v):A.stateNode.complete){Ue=0,Yt=null;var Y=A.sibling;if(Y!==null)Te=Y;else{var J=A.return;J!==null?(Te=J,Bl(J)):Te=null}break t}}Ue=0,Yt=null,vr(e,n,h,5);break;case 6:Ue=0,Yt=null,vr(e,n,h,6);break;case 8:af(),et=6;break e;default:throw Error(o(462))}}ew();break}catch(ie){eg(e,ie)}while(!0);return Jn=xs=null,O.H=l,O.A=d,He=r,Te!==null?0:(Ie=null,ke=0,tl(),et)}function ew(){for(;Te!==null&&!Sn();)sg(Te)}function sg(e){var n=T0(e.alternate,e,ca);e.memoizedProps=e.pendingProps,n===null?Bl(e):Te=n}function rg(e){var n=e,r=n.alternate;switch(n.tag){case 15:case 0:n=j0(r,n,n.pendingProps,n.type,void 0,ke);break;case 11:n=j0(r,n,n.pendingProps,n.type.render,n.ref,ke);break;case 5:bd(n);default:A0(r,n),n=Te=ap(n,ca),n=T0(r,n,ca)}e.memoizedProps=e.pendingProps,n===null?Bl(e):Te=n}function vr(e,n,r,l){Jn=xs=null,bd(n),cr=null,bi=0;var d=n.return;try{if(V2(e,d,n,r,ke)){et=1,Nl(e,Jt(r,e.current)),Te=null;return}}catch(h){if(d!==null)throw Te=d,h;et=1,Nl(e,Jt(r,e.current)),Te=null;return}n.flags&32768?(De||l===1?e=!0:gr||(ke&536870912)!==0?e=!1:(Ha=e=!0,(l===2||l===9||l===3||l===6)&&(l=qt.current,l!==null&&l.tag===13&&(l.flags|=16384))),ig(n,e)):Bl(n)}function Bl(e){var n=e;do{if((n.flags&32768)!==0){ig(n,Ha);return}e=n.return;var r=X2(n.alternate,n,ca);if(r!==null){Te=r;return}if(n=n.sibling,n!==null){Te=n;return}Te=n=e}while(n!==null);et===0&&(et=5)}function ig(e,n){do{var r=I2(e.alternate,e);if(r!==null){r.flags&=32767,Te=r;return}if(r=e.return,r!==null&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!n&&(e=e.sibling,e!==null)){Te=e;return}Te=e=r}while(e!==null);et=6,Te=null}function og(e,n,r,l,d,h,v,A,Y){e.cancelPendingCommit=null;do Ll();while(ft!==0);if((He&6)!==0)throw Error(o(327));if(n!==null){if(n===e.current)throw Error(o(177));if(h=n.lanes|n.childLanes,h|=Iu,ju(e,r,h,v,A,Y),e===Ie&&(Te=Ie=null,ke=0),yr=n,qa=e,ua=r,ef=h,tf=d,F0=l,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,sw(Yn,function(){return fg(),null})):(e.callbackNode=null,e.callbackPriority=0),l=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||l){l=O.T,O.T=null,d=D.p,D.p=2,v=He,He|=4;try{G2(e,n,r)}finally{He=v,D.p=d,O.T=l}}ft=1,lg(),cg(),ug()}}function lg(){if(ft===1){ft=0;var e=qa,n=yr,r=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||r){r=O.T,O.T=null;var l=D.p;D.p=2;var d=He;He|=4;try{V0(n,e);var h=xf,v=Qm(e.containerInfo),A=h.focusedElem,Y=h.selectionRange;if(v!==A&&A&&A.ownerDocument&&Gm(A.ownerDocument.documentElement,A)){if(Y!==null&&qu(A)){var J=Y.start,ie=Y.end;if(ie===void 0&&(ie=J),"selectionStart"in A)A.selectionStart=J,A.selectionEnd=Math.min(ie,A.value.length);else{var le=A.ownerDocument||document,ee=le&&le.defaultView||window;if(ee.getSelection){var ae=ee.getSelection(),fe=A.textContent.length,we=Math.min(Y.start,fe),Xe=Y.end===void 0?we:Math.min(Y.end,fe);!ae.extend&&we>Xe&&(v=Xe,Xe=we,we=v);var F=Im(A,we),X=Im(A,Xe);if(F&&X&&(ae.rangeCount!==1||ae.anchorNode!==F.node||ae.anchorOffset!==F.offset||ae.focusNode!==X.node||ae.focusOffset!==X.offset)){var K=le.createRange();K.setStart(F.node,F.offset),ae.removeAllRanges(),we>Xe?(ae.addRange(K),ae.extend(X.node,X.offset)):(K.setEnd(X.node,X.offset),ae.addRange(K))}}}}for(le=[],ae=A;ae=ae.parentNode;)ae.nodeType===1&&le.push({element:ae,left:ae.scrollLeft,top:ae.scrollTop});for(typeof A.focus=="function"&&A.focus(),A=0;A<le.length;A++){var oe=le[A];oe.element.scrollLeft=oe.left,oe.element.scrollTop=oe.top}}Zl=!!gf,xf=gf=null}finally{He=d,D.p=l,O.T=r}}e.current=n,ft=2}}function cg(){if(ft===2){ft=0;var e=qa,n=yr,r=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||r){r=O.T,O.T=null;var l=D.p;D.p=2;var d=He;He|=4;try{L0(e,n.alternate,n)}finally{He=d,D.p=l,O.T=r}}ft=3}}function ug(){if(ft===4||ft===3){ft=0,_n();var e=qa,n=yr,r=ua,l=F0;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?ft=5:(ft=0,yr=qa=null,dg(e,e.pendingLanes));var d=e.pendingLanes;if(d===0&&(Ua=null),ni(r),n=n.stateNode,Et&&typeof Et.onCommitFiberRoot=="function")try{Et.onCommitFiberRoot(rs,n,void 0,(n.current.flags&128)===128)}catch{}if(l!==null){n=O.T,d=D.p,D.p=2,O.T=null;try{for(var h=e.onRecoverableError,v=0;v<l.length;v++){var A=l[v];h(A.value,{componentStack:A.stack})}}finally{O.T=n,D.p=d}}(ua&3)!==0&&Ll(),kn(e),d=e.pendingLanes,(r&261930)!==0&&(d&42)!==0?e===nf?Bi++:(Bi=0,nf=e):Bi=0,Li(0)}}function dg(e,n){(e.pooledCacheLanes&=n)===0&&(n=e.pooledCache,n!=null&&(e.pooledCache=null,xi(n)))}function Ll(){return lg(),cg(),ug(),fg()}function fg(){if(ft!==5)return!1;var e=qa,n=ef;ef=0;var r=ni(ua),l=O.T,d=D.p;try{D.p=32>r?32:r,O.T=null,r=tf,tf=null;var h=qa,v=ua;if(ft=0,yr=qa=null,ua=0,(He&6)!==0)throw Error(o(331));var A=He;if(He|=4,G0(h.current),P0(h,h.current,v,r),He=A,Li(0,!1),Et&&typeof Et.onPostCommitFiberRoot=="function")try{Et.onPostCommitFiberRoot(rs,h)}catch{}return!0}finally{D.p=d,O.T=l,dg(e,n)}}function hg(e,n,r){n=Jt(r,n),n=Dd(e.stateNode,n,2),e=Da(e,n,2),e!==null&&(os(e,2),kn(e))}function qe(e,n,r){if(e.tag===3)hg(e,e,r);else for(;n!==null;){if(n.tag===3){hg(n,e,r);break}else if(n.tag===1){var l=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Ua===null||!Ua.has(l))){e=Jt(r,e),r=m0(2),l=Da(n,r,2),l!==null&&(p0(r,l,n,e),os(l,2),kn(l));break}}n=n.return}}function rf(e,n,r){var l=e.pingCache;if(l===null){l=e.pingCache=new F2;var d=new Set;l.set(n,d)}else d=l.get(n),d===void 0&&(d=new Set,l.set(n,d));d.has(r)||(Wd=!0,d.add(r),e=tw.bind(null,e,n,r),n.then(e,e))}function tw(e,n,r){var l=e.pingCache;l!==null&&l.delete(n),e.pingedLanes|=e.suspendedLanes&r,e.warmLanes&=~r,Ie===e&&(ke&r)===r&&(et===4||et===3&&(ke&62914560)===ke&&300>at()-kl?(He&2)===0&&br(e,0):Kd|=r,xr===ke&&(xr=0)),kn(e)}function mg(e,n){n===0&&(n=Ro()),e=ms(e,n),e!==null&&(os(e,n),kn(e))}function nw(e){var n=e.memoizedState,r=0;n!==null&&(r=n.retryLane),mg(e,r)}function aw(e,n){var r=0;switch(e.tag){case 31:case 13:var l=e.stateNode,d=e.memoizedState;d!==null&&(r=d.retryLane);break;case 19:l=e.stateNode;break;case 22:l=e.stateNode._retryCache;break;default:throw Error(o(314))}l!==null&&l.delete(n),mg(e,r)}function sw(e,n){return ht(e,n)}var Hl=null,wr=null,of=!1,$l=!1,lf=!1,Ya=0;function kn(e){e!==wr&&e.next===null&&(wr===null?Hl=wr=e:wr=wr.next=e),$l=!0,of||(of=!0,iw())}function Li(e,n){if(!lf&&$l){lf=!0;do for(var r=!1,l=Hl;l!==null;){if(e!==0){var d=l.pendingLanes;if(d===0)var h=0;else{var v=l.suspendedLanes,A=l.pingedLanes;h=(1<<31-Ct(42|e)+1)-1,h&=d&~(v&~A),h=h&201326741?h&201326741|1:h?h|2:0}h!==0&&(r=!0,yg(l,h))}else h=ke,h=Ys(l,l===Ie?h:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(h&3)===0||is(l,h)||(r=!0,yg(l,h));l=l.next}while(r);lf=!1}}function rw(){pg()}function pg(){$l=of=!1;var e=0;Ya!==0&&gw()&&(e=Ya);for(var n=at(),r=null,l=Hl;l!==null;){var d=l.next,h=gg(l,n);h===0?(l.next=null,r===null?Hl=d:r.next=d,d===null&&(wr=r)):(r=l,(e!==0||(h&3)!==0)&&($l=!0)),l=d}ft!==0&&ft!==5||Li(e),Ya!==0&&(Ya=0)}function gg(e,n){for(var r=e.suspendedLanes,l=e.pingedLanes,d=e.expirationTimes,h=e.pendingLanes&-62914561;0<h;){var v=31-Ct(h),A=1<<v,Y=d[v];Y===-1?((A&r)===0||(A&l)!==0)&&(d[v]=wu(A,n)):Y<=n&&(e.expiredLanes|=A),h&=~A}if(n=Ie,r=ke,r=Ys(e,e===n?r:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l=e.callbackNode,r===0||e===n&&(Ue===2||Ue===9)||e.cancelPendingCommit!==null)return l!==null&&l!==null&&un(l),e.callbackNode=null,e.callbackPriority=0;if((r&3)===0||is(e,r)){if(n=r&-r,n===e.callbackPriority)return n;switch(l!==null&&un(l),ni(r)){case 2:case 8:r=Wt;break;case 32:r=Yn;break;case 268435456:r=Pn;break;default:r=Yn}return l=xg.bind(null,e),r=ht(r,l),e.callbackPriority=n,e.callbackNode=r,n}return l!==null&&l!==null&&un(l),e.callbackPriority=2,e.callbackNode=null,2}function xg(e,n){if(ft!==0&&ft!==5)return e.callbackNode=null,e.callbackPriority=0,null;var r=e.callbackNode;if(Ll()&&e.callbackNode!==r)return null;var l=ke;return l=Ys(e,e===Ie?l:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l===0?null:(K0(e,l,n),gg(e,at()),e.callbackNode!=null&&e.callbackNode===r?xg.bind(null,e):null)}function yg(e,n){if(Ll())return null;K0(e,n,!0)}function iw(){yw(function(){(He&6)!==0?ht(dn,rw):pg()})}function cf(){if(Ya===0){var e=ir;e===0&&(e=Us,Us<<=1,(Us&261888)===0&&(Us=256)),Ya=e}return Ya}function bg(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Go(""+e)}function vg(e,n){var r=n.ownerDocument.createElement("input");return r.name=n.name,r.value=n.value,e.id&&r.setAttribute("form",e.id),n.parentNode.insertBefore(r,n),e=new FormData(e),r.parentNode.removeChild(r),e}function ow(e,n,r,l,d){if(n==="submit"&&r&&r.stateNode===d){var h=bg((d[Nt]||null).action),v=l.submitter;v&&(n=(n=v[Nt]||null)?bg(n.formAction):v.getAttribute("formAction"),n!==null&&(h=n,v=null));var A=new Wo("action","action",null,l,d);e.push({event:A,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Ya!==0){var Y=v?vg(d,v):new FormData(d);Td(r,{pending:!0,data:Y,method:d.method,action:h},null,Y)}}else typeof h=="function"&&(A.preventDefault(),Y=v?vg(d,v):new FormData(d),Td(r,{pending:!0,data:Y,method:d.method,action:h},h,Y))},currentTarget:d}]})}}for(var uf=0;uf<Xu.length;uf++){var df=Xu[uf],lw=df.toLowerCase(),cw=df[0].toUpperCase()+df.slice(1);mn(lw,"on"+cw)}mn(Wm,"onAnimationEnd"),mn(Km,"onAnimationIteration"),mn(Jm,"onAnimationStart"),mn("dblclick","onDoubleClick"),mn("focusin","onFocus"),mn("focusout","onBlur"),mn(_2,"onTransitionRun"),mn(E2,"onTransitionStart"),mn(C2,"onTransitionCancel"),mn(ep,"onTransitionEnd"),Ea("onMouseEnter",["mouseout","mouseover"]),Ea("onMouseLeave",["mouseout","mouseover"]),Ea("onPointerEnter",["pointerout","pointerover"]),Ea("onPointerLeave",["pointerout","pointerover"]),Gn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Gn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Gn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Gn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Gn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Gn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Hi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),uw=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Hi));function wg(e,n){n=(n&4)!==0;for(var r=0;r<e.length;r++){var l=e[r],d=l.event;l=l.listeners;e:{var h=void 0;if(n)for(var v=l.length-1;0<=v;v--){var A=l[v],Y=A.instance,J=A.currentTarget;if(A=A.listener,Y!==h&&d.isPropagationStopped())break e;h=A,d.currentTarget=J;try{h(d)}catch(ie){el(ie)}d.currentTarget=null,h=Y}else for(v=0;v<l.length;v++){if(A=l[v],Y=A.instance,J=A.currentTarget,A=A.listener,Y!==h&&d.isPropagationStopped())break e;h=A,d.currentTarget=J;try{h(d)}catch(ie){el(ie)}d.currentTarget=null,h=Y}}}}function Me(e,n){var r=n[Ps];r===void 0&&(r=n[Ps]=new Set);var l=e+"__bubble";r.has(l)||(jg(n,e,2,!1),r.add(l))}function ff(e,n,r){var l=0;n&&(l|=4),jg(r,e,l,n)}var Ul="_reactListening"+Math.random().toString(36).slice(2);function hf(e){if(!e[Ul]){e[Ul]=!0,qo.forEach(function(r){r!=="selectionchange"&&(uw.has(r)||ff(r,!1,e),ff(r,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[Ul]||(n[Ul]=!0,ff("selectionchange",!1,n))}}function jg(e,n,r,l){switch(Wg(n)){case 2:var d=Hw;break;case 8:d=$w;break;default:d=Tf}r=d.bind(null,n,r,e),d=void 0,!zu||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(d=!0),l?d!==void 0?e.addEventListener(n,r,{capture:!0,passive:d}):e.addEventListener(n,r,!0):d!==void 0?e.addEventListener(n,r,{passive:d}):e.addEventListener(n,r,!1)}function mf(e,n,r,l,d){var h=l;if((n&1)===0&&(n&2)===0&&l!==null)e:for(;;){if(l===null)return;var v=l.tag;if(v===3||v===4){var A=l.stateNode.containerInfo;if(A===d)break;if(v===4)for(v=l.return;v!==null;){var Y=v.tag;if((Y===3||Y===4)&&v.stateNode.containerInfo===d)return;v=v.return}for(;A!==null;){if(v=ja(A),v===null)return;if(Y=v.tag,Y===5||Y===6||Y===26||Y===27){l=h=v;continue e}A=A.parentNode}}l=l.return}Cm(function(){var J=h,ie=Au(r),le=[];e:{var ee=tp.get(e);if(ee!==void 0){var ae=Wo,fe=e;switch(e){case"keypress":if(Zo(r)===0)break e;case"keydown":case"keyup":ae=a2;break;case"focusin":fe="focus",ae=Bu;break;case"focusout":fe="blur",ae=Bu;break;case"beforeblur":case"afterblur":ae=Bu;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ae=Am;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ae=Xv;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ae=i2;break;case Wm:case Km:case Jm:ae=Qv;break;case ep:ae=l2;break;case"scroll":case"scrollend":ae=Yv;break;case"wheel":ae=u2;break;case"copy":case"cut":case"paste":ae=Fv;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ae=zm;break;case"toggle":case"beforetoggle":ae=f2}var we=(n&4)!==0,Xe=!we&&(e==="scroll"||e==="scrollend"),F=we?ee!==null?ee+"Capture":null:ee;we=[];for(var X=J,K;X!==null;){var oe=X;if(K=oe.stateNode,oe=oe.tag,oe!==5&&oe!==26&&oe!==27||K===null||F===null||(oe=ii(X,F),oe!=null&&we.push($i(X,oe,K))),Xe)break;X=X.return}0<we.length&&(ee=new ae(ee,fe,null,r,ie),le.push({event:ee,listeners:we}))}}if((n&7)===0){e:{if(ee=e==="mouseover"||e==="pointerover",ae=e==="mouseout"||e==="pointerout",ee&&r!==Mu&&(fe=r.relatedTarget||r.fromElement)&&(ja(fe)||fe[In]))break e;if((ae||ee)&&(ee=ie.window===ie?ie:(ee=ie.ownerDocument)?ee.defaultView||ee.parentWindow:window,ae?(fe=r.relatedTarget||r.toElement,ae=J,fe=fe?ja(fe):null,fe!==null&&(Xe=u(fe),we=fe.tag,fe!==Xe||we!==5&&we!==27&&we!==6)&&(fe=null)):(ae=null,fe=J),ae!==fe)){if(we=Am,oe="onMouseLeave",F="onMouseEnter",X="mouse",(e==="pointerout"||e==="pointerover")&&(we=zm,oe="onPointerLeave",F="onPointerEnter",X="pointer"),Xe=ae==null?ee:Sa(ae),K=fe==null?ee:Sa(fe),ee=new we(oe,X+"leave",ae,r,ie),ee.target=Xe,ee.relatedTarget=K,oe=null,ja(ie)===J&&(we=new we(F,X+"enter",fe,r,ie),we.target=K,we.relatedTarget=Xe,oe=we),Xe=oe,ae&&fe)t:{for(we=dw,F=ae,X=fe,K=0,oe=F;oe;oe=we(oe))K++;oe=0;for(var ye=X;ye;ye=we(ye))oe++;for(;0<K-oe;)F=we(F),K--;for(;0<oe-K;)X=we(X),oe--;for(;K--;){if(F===X||X!==null&&F===X.alternate){we=F;break t}F=we(F),X=we(X)}we=null}else we=null;ae!==null&&Ng(le,ee,ae,we,!1),fe!==null&&Xe!==null&&Ng(le,Xe,fe,we,!0)}}e:{if(ee=J?Sa(J):window,ae=ee.nodeName&&ee.nodeName.toLowerCase(),ae==="select"||ae==="input"&&ee.type==="file")var Be=Um;else if(Hm(ee))if(qm)Be=j2;else{Be=v2;var me=b2}else ae=ee.nodeName,!ae||ae.toLowerCase()!=="input"||ee.type!=="checkbox"&&ee.type!=="radio"?J&&Tu(J.elementType)&&(Be=Um):Be=w2;if(Be&&(Be=Be(e,J))){$m(le,Be,r,ie);break e}me&&me(e,ee,J),e==="focusout"&&J&&ee.type==="number"&&J.memoizedProps.value!=null&&ri(ee,"number",ee.value)}switch(me=J?Sa(J):window,e){case"focusin":(Hm(me)||me.contentEditable==="true")&&(Ks=me,Vu=J,mi=null);break;case"focusout":mi=Vu=Ks=null;break;case"mousedown":Yu=!0;break;case"contextmenu":case"mouseup":case"dragend":Yu=!1,Zm(le,r,ie);break;case"selectionchange":if(S2)break;case"keydown":case"keyup":Zm(le,r,ie)}var _e;if(Hu)e:{switch(e){case"compositionstart":var ze="onCompositionStart";break e;case"compositionend":ze="onCompositionEnd";break e;case"compositionupdate":ze="onCompositionUpdate";break e}ze=void 0}else Ws?Bm(e,r)&&(ze="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(ze="onCompositionStart");ze&&(Rm&&r.locale!=="ko"&&(Ws||ze!=="onCompositionStart"?ze==="onCompositionEnd"&&Ws&&(_e=Tm()):(Ca=ie,Ru="value"in Ca?Ca.value:Ca.textContent,Ws=!0)),me=ql(J,ze),0<me.length&&(ze=new km(ze,e,null,r,ie),le.push({event:ze,listeners:me}),_e?ze.data=_e:(_e=Lm(r),_e!==null&&(ze.data=_e)))),(_e=m2?p2(e,r):g2(e,r))&&(ze=ql(J,"onBeforeInput"),0<ze.length&&(me=new km("onBeforeInput","beforeinput",null,r,ie),le.push({event:me,listeners:ze}),me.data=_e)),ow(le,e,J,r,ie)}wg(le,n)})}function $i(e,n,r){return{instance:e,listener:n,currentTarget:r}}function ql(e,n){for(var r=n+"Capture",l=[];e!==null;){var d=e,h=d.stateNode;if(d=d.tag,d!==5&&d!==26&&d!==27||h===null||(d=ii(e,r),d!=null&&l.unshift($i(e,d,h)),d=ii(e,n),d!=null&&l.push($i(e,d,h))),e.tag===3)return l;e=e.return}return[]}function dw(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Ng(e,n,r,l,d){for(var h=n._reactName,v=[];r!==null&&r!==l;){var A=r,Y=A.alternate,J=A.stateNode;if(A=A.tag,Y!==null&&Y===l)break;A!==5&&A!==26&&A!==27||J===null||(Y=J,d?(J=ii(r,h),J!=null&&v.unshift($i(r,J,Y))):d||(J=ii(r,h),J!=null&&v.push($i(r,J,Y)))),r=r.return}v.length!==0&&e.push({event:n,listeners:v})}var fw=/\r\n?/g,hw=/\u0000|\uFFFD/g;function Sg(e){return(typeof e=="string"?e:""+e).replace(fw,`
`).replace(hw,"")}function _g(e,n){return n=Sg(n),Sg(e)===n}function Pe(e,n,r,l,d,h){switch(r){case"children":typeof l=="string"?n==="body"||n==="textarea"&&l===""||Qs(e,l):(typeof l=="number"||typeof l=="bigint")&&n!=="body"&&Qs(e,""+l);break;case"className":Is(e,"class",l);break;case"tabIndex":Is(e,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Is(e,r,l);break;case"style":_m(e,l,h);break;case"data":if(n!=="object"){Is(e,"data",l);break}case"src":case"href":if(l===""&&(n!=="a"||r!=="href")){e.removeAttribute(r);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(r);break}l=Go(""+l),e.setAttribute(r,l);break;case"action":case"formAction":if(typeof l=="function"){e.setAttribute(r,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof h=="function"&&(r==="formAction"?(n!=="input"&&Pe(e,n,"name",d.name,d,null),Pe(e,n,"formEncType",d.formEncType,d,null),Pe(e,n,"formMethod",d.formMethod,d,null),Pe(e,n,"formTarget",d.formTarget,d,null)):(Pe(e,n,"encType",d.encType,d,null),Pe(e,n,"method",d.method,d,null),Pe(e,n,"target",d.target,d,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(r);break}l=Go(""+l),e.setAttribute(r,l);break;case"onClick":l!=null&&(e.onclick=Zn);break;case"onScroll":l!=null&&Me("scroll",e);break;case"onScrollEnd":l!=null&&Me("scrollend",e);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(o(61));if(r=l.__html,r!=null){if(d.children!=null)throw Error(o(60));e.innerHTML=r}}break;case"multiple":e.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":e.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){e.removeAttribute("xlink:href");break}r=Go(""+l),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(r,""+l):e.removeAttribute(r);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(r,""):e.removeAttribute(r);break;case"capture":case"download":l===!0?e.setAttribute(r,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(r,l):e.removeAttribute(r);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?e.setAttribute(r,l):e.removeAttribute(r);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?e.removeAttribute(r):e.setAttribute(r,l);break;case"popover":Me("beforetoggle",e),Me("toggle",e),Xs(e,"popover",l);break;case"xlinkActuate":hn(e,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":hn(e,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":hn(e,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":hn(e,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":hn(e,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":hn(e,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":hn(e,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":hn(e,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":hn(e,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Xs(e,"is",l);break;case"innerText":case"textContent":break;default:(!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(r=qv.get(r)||r,Xs(e,r,l))}}function pf(e,n,r,l,d,h){switch(r){case"style":_m(e,l,h);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(o(61));if(r=l.__html,r!=null){if(d.children!=null)throw Error(o(60));e.innerHTML=r}}break;case"children":typeof l=="string"?Qs(e,l):(typeof l=="number"||typeof l=="bigint")&&Qs(e,""+l);break;case"onScroll":l!=null&&Me("scroll",e);break;case"onScrollEnd":l!=null&&Me("scrollend",e);break;case"onClick":l!=null&&(e.onclick=Zn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Vo.hasOwnProperty(r))e:{if(r[0]==="o"&&r[1]==="n"&&(d=r.endsWith("Capture"),n=r.slice(2,d?r.length-7:void 0),h=e[Nt]||null,h=h!=null?h[r]:null,typeof h=="function"&&e.removeEventListener(n,h,d),typeof l=="function")){typeof h!="function"&&h!==null&&(r in e?e[r]=null:e.hasAttribute(r)&&e.removeAttribute(r)),e.addEventListener(n,l,d);break e}r in e?e[r]=l:l===!0?e.setAttribute(r,""):Xs(e,r,l)}}}function vt(e,n,r){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Me("error",e),Me("load",e);var l=!1,d=!1,h;for(h in r)if(r.hasOwnProperty(h)){var v=r[h];if(v!=null)switch(h){case"src":l=!0;break;case"srcSet":d=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,n));default:Pe(e,n,h,v,r,null)}}d&&Pe(e,n,"srcSet",r.srcSet,r,null),l&&Pe(e,n,"src",r.src,r,null);return;case"input":Me("invalid",e);var A=h=v=d=null,Y=null,J=null;for(l in r)if(r.hasOwnProperty(l)){var ie=r[l];if(ie!=null)switch(l){case"name":d=ie;break;case"type":v=ie;break;case"checked":Y=ie;break;case"defaultChecked":J=ie;break;case"value":h=ie;break;case"defaultValue":A=ie;break;case"children":case"dangerouslySetInnerHTML":if(ie!=null)throw Error(o(137,n));break;default:Pe(e,n,l,ie,r,null)}}Io(e,h,A,Y,J,v,d,!1);return;case"select":Me("invalid",e),l=v=h=null;for(d in r)if(r.hasOwnProperty(d)&&(A=r[d],A!=null))switch(d){case"value":h=A;break;case"defaultValue":v=A;break;case"multiple":l=A;default:Pe(e,n,d,A,r,null)}n=h,r=v,e.multiple=!!l,n!=null?Qn(e,!!l,n,!1):r!=null&&Qn(e,!!l,r,!0);return;case"textarea":Me("invalid",e),h=d=l=null;for(v in r)if(r.hasOwnProperty(v)&&(A=r[v],A!=null))switch(v){case"value":l=A;break;case"defaultValue":d=A;break;case"children":h=A;break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(o(91));break;default:Pe(e,n,v,A,r,null)}Nm(e,l,d,h);return;case"option":for(Y in r)r.hasOwnProperty(Y)&&(l=r[Y],l!=null)&&(Y==="selected"?e.selected=l&&typeof l!="function"&&typeof l!="symbol":Pe(e,n,Y,l,r,null));return;case"dialog":Me("beforetoggle",e),Me("toggle",e),Me("cancel",e),Me("close",e);break;case"iframe":case"object":Me("load",e);break;case"video":case"audio":for(l=0;l<Hi.length;l++)Me(Hi[l],e);break;case"image":Me("error",e),Me("load",e);break;case"details":Me("toggle",e);break;case"embed":case"source":case"link":Me("error",e),Me("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(J in r)if(r.hasOwnProperty(J)&&(l=r[J],l!=null))switch(J){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,n));default:Pe(e,n,J,l,r,null)}return;default:if(Tu(n)){for(ie in r)r.hasOwnProperty(ie)&&(l=r[ie],l!==void 0&&pf(e,n,ie,l,r,void 0));return}}for(A in r)r.hasOwnProperty(A)&&(l=r[A],l!=null&&Pe(e,n,A,l,r,null))}function mw(e,n,r,l){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var d=null,h=null,v=null,A=null,Y=null,J=null,ie=null;for(ae in r){var le=r[ae];if(r.hasOwnProperty(ae)&&le!=null)switch(ae){case"checked":break;case"value":break;case"defaultValue":Y=le;default:l.hasOwnProperty(ae)||Pe(e,n,ae,null,l,le)}}for(var ee in l){var ae=l[ee];if(le=r[ee],l.hasOwnProperty(ee)&&(ae!=null||le!=null))switch(ee){case"type":h=ae;break;case"name":d=ae;break;case"checked":J=ae;break;case"defaultChecked":ie=ae;break;case"value":v=ae;break;case"defaultValue":A=ae;break;case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(o(137,n));break;default:ae!==le&&Pe(e,n,ee,ae,l,le)}}us(e,v,A,Y,J,ie,h,d);return;case"select":ae=v=A=ee=null;for(h in r)if(Y=r[h],r.hasOwnProperty(h)&&Y!=null)switch(h){case"value":break;case"multiple":ae=Y;default:l.hasOwnProperty(h)||Pe(e,n,h,null,l,Y)}for(d in l)if(h=l[d],Y=r[d],l.hasOwnProperty(d)&&(h!=null||Y!=null))switch(d){case"value":ee=h;break;case"defaultValue":A=h;break;case"multiple":v=h;default:h!==Y&&Pe(e,n,d,h,l,Y)}n=A,r=v,l=ae,ee!=null?Qn(e,!!r,ee,!1):!!l!=!!r&&(n!=null?Qn(e,!!r,n,!0):Qn(e,!!r,r?[]:"",!1));return;case"textarea":ae=ee=null;for(A in r)if(d=r[A],r.hasOwnProperty(A)&&d!=null&&!l.hasOwnProperty(A))switch(A){case"value":break;case"children":break;default:Pe(e,n,A,null,l,d)}for(v in l)if(d=l[v],h=r[v],l.hasOwnProperty(v)&&(d!=null||h!=null))switch(v){case"value":ee=d;break;case"defaultValue":ae=d;break;case"children":break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(o(91));break;default:d!==h&&Pe(e,n,v,d,l,h)}jm(e,ee,ae);return;case"option":for(var fe in r)ee=r[fe],r.hasOwnProperty(fe)&&ee!=null&&!l.hasOwnProperty(fe)&&(fe==="selected"?e.selected=!1:Pe(e,n,fe,null,l,ee));for(Y in l)ee=l[Y],ae=r[Y],l.hasOwnProperty(Y)&&ee!==ae&&(ee!=null||ae!=null)&&(Y==="selected"?e.selected=ee&&typeof ee!="function"&&typeof ee!="symbol":Pe(e,n,Y,ee,l,ae));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var we in r)ee=r[we],r.hasOwnProperty(we)&&ee!=null&&!l.hasOwnProperty(we)&&Pe(e,n,we,null,l,ee);for(J in l)if(ee=l[J],ae=r[J],l.hasOwnProperty(J)&&ee!==ae&&(ee!=null||ae!=null))switch(J){case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(o(137,n));break;default:Pe(e,n,J,ee,l,ae)}return;default:if(Tu(n)){for(var Xe in r)ee=r[Xe],r.hasOwnProperty(Xe)&&ee!==void 0&&!l.hasOwnProperty(Xe)&&pf(e,n,Xe,void 0,l,ee);for(ie in l)ee=l[ie],ae=r[ie],!l.hasOwnProperty(ie)||ee===ae||ee===void 0&&ae===void 0||pf(e,n,ie,ee,l,ae);return}}for(var F in r)ee=r[F],r.hasOwnProperty(F)&&ee!=null&&!l.hasOwnProperty(F)&&Pe(e,n,F,null,l,ee);for(le in l)ee=l[le],ae=r[le],!l.hasOwnProperty(le)||ee===ae||ee==null&&ae==null||Pe(e,n,le,ee,l,ae)}function Eg(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function pw(){if(typeof performance.getEntriesByType=="function"){for(var e=0,n=0,r=performance.getEntriesByType("resource"),l=0;l<r.length;l++){var d=r[l],h=d.transferSize,v=d.initiatorType,A=d.duration;if(h&&A&&Eg(v)){for(v=0,A=d.responseEnd,l+=1;l<r.length;l++){var Y=r[l],J=Y.startTime;if(J>A)break;var ie=Y.transferSize,le=Y.initiatorType;ie&&Eg(le)&&(Y=Y.responseEnd,v+=ie*(Y<A?1:(A-J)/(Y-J)))}if(--l,n+=8*(h+v)/(d.duration/1e3),e++,10<e)break}}if(0<e)return n/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var gf=null,xf=null;function Vl(e){return e.nodeType===9?e:e.ownerDocument}function Cg(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Tg(e,n){if(e===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&n==="foreignObject"?0:e}function yf(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var bf=null;function gw(){var e=window.event;return e&&e.type==="popstate"?e===bf?!1:(bf=e,!0):(bf=null,!1)}var Mg=typeof setTimeout=="function"?setTimeout:void 0,xw=typeof clearTimeout=="function"?clearTimeout:void 0,Ag=typeof Promise=="function"?Promise:void 0,yw=typeof queueMicrotask=="function"?queueMicrotask:typeof Ag<"u"?function(e){return Ag.resolve(null).then(e).catch(bw)}:Mg;function bw(e){setTimeout(function(){throw e})}function Pa(e){return e==="head"}function kg(e,n){var r=n,l=0;do{var d=r.nextSibling;if(e.removeChild(r),d&&d.nodeType===8)if(r=d.data,r==="/$"||r==="/&"){if(l===0){e.removeChild(d),_r(n);return}l--}else if(r==="$"||r==="$?"||r==="$~"||r==="$!"||r==="&")l++;else if(r==="html")Ui(e.ownerDocument.documentElement);else if(r==="head"){r=e.ownerDocument.head,Ui(r);for(var h=r.firstChild;h;){var v=h.nextSibling,A=h.nodeName;h[ls]||A==="SCRIPT"||A==="STYLE"||A==="LINK"&&h.rel.toLowerCase()==="stylesheet"||r.removeChild(h),h=v}}else r==="body"&&Ui(e.ownerDocument.body);r=d}while(r);_r(n)}function zg(e,n){var r=e;e=0;do{var l=r.nextSibling;if(r.nodeType===1?n?(r._stashedDisplay=r.style.display,r.style.display="none"):(r.style.display=r._stashedDisplay||"",r.getAttribute("style")===""&&r.removeAttribute("style")):r.nodeType===3&&(n?(r._stashedText=r.nodeValue,r.nodeValue=""):r.nodeValue=r._stashedText||""),l&&l.nodeType===8)if(r=l.data,r==="/$"){if(e===0)break;e--}else r!=="$"&&r!=="$?"&&r!=="$~"&&r!=="$!"||e++;r=l}while(r)}function vf(e){var n=e.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var r=n;switch(n=n.nextSibling,r.nodeName){case"HTML":case"HEAD":case"BODY":vf(r),ai(r);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(r.rel.toLowerCase()==="stylesheet")continue}e.removeChild(r)}}function vw(e,n,r,l){for(;e.nodeType===1;){var d=r;if(e.nodeName.toLowerCase()!==n.toLowerCase()){if(!l&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(l){if(!e[ls])switch(n){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(h=e.getAttribute("rel"),h==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(h!==d.rel||e.getAttribute("href")!==(d.href==null||d.href===""?null:d.href)||e.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin)||e.getAttribute("title")!==(d.title==null?null:d.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(h=e.getAttribute("src"),(h!==(d.src==null?null:d.src)||e.getAttribute("type")!==(d.type==null?null:d.type)||e.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin))&&h&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(n==="input"&&e.type==="hidden"){var h=d.name==null?null:""+d.name;if(d.type==="hidden"&&e.getAttribute("name")===h)return e}else return e;if(e=sn(e.nextSibling),e===null)break}return null}function ww(e,n,r){if(n==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!r||(e=sn(e.nextSibling),e===null))return null;return e}function Rg(e,n){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=sn(e.nextSibling),e===null))return null;return e}function wf(e){return e.data==="$?"||e.data==="$~"}function jf(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function jw(e,n){var r=e.ownerDocument;if(e.data==="$~")e._reactRetry=n;else if(e.data!=="$?"||r.readyState!=="loading")n();else{var l=function(){n(),r.removeEventListener("DOMContentLoaded",l)};r.addEventListener("DOMContentLoaded",l),e._reactRetry=l}}function sn(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"||n==="F!"||n==="F")break;if(n==="/$"||n==="/&")return null}}return e}var Nf=null;function Dg(e){e=e.nextSibling;for(var n=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"||r==="/&"){if(n===0)return sn(e.nextSibling);n--}else r!=="$"&&r!=="$!"&&r!=="$?"&&r!=="$~"&&r!=="&"||n++}e=e.nextSibling}return null}function Og(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"){if(n===0)return e;n--}else r!=="/$"&&r!=="/&"||n++}e=e.previousSibling}return null}function Bg(e,n,r){switch(n=Vl(r),e){case"html":if(e=n.documentElement,!e)throw Error(o(452));return e;case"head":if(e=n.head,!e)throw Error(o(453));return e;case"body":if(e=n.body,!e)throw Error(o(454));return e;default:throw Error(o(451))}}function Ui(e){for(var n=e.attributes;n.length;)e.removeAttributeNode(n[0]);ai(e)}var rn=new Map,Lg=new Set;function Yl(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var da=D.d;D.d={f:Nw,r:Sw,D:_w,C:Ew,L:Cw,m:Tw,X:Aw,S:Mw,M:kw};function Nw(){var e=da.f(),n=Dl();return e||n}function Sw(e){var n=Na(e);n!==null&&n.tag===5&&n.type==="form"?e0(n):da.r(e)}var jr=typeof document>"u"?null:document;function Hg(e,n,r){var l=jr;if(l&&typeof n=="string"&&n){var d=kt(n);d='link[rel="'+e+'"][href="'+d+'"]',typeof r=="string"&&(d+='[crossorigin="'+r+'"]'),Lg.has(d)||(Lg.add(d),e={rel:e,crossOrigin:r,href:n},l.querySelector(d)===null&&(n=l.createElement("link"),vt(n,"link",e),st(n),l.head.appendChild(n)))}}function _w(e){da.D(e),Hg("dns-prefetch",e,null)}function Ew(e,n){da.C(e,n),Hg("preconnect",e,n)}function Cw(e,n,r){da.L(e,n,r);var l=jr;if(l&&e&&n){var d='link[rel="preload"][as="'+kt(n)+'"]';n==="image"&&r&&r.imageSrcSet?(d+='[imagesrcset="'+kt(r.imageSrcSet)+'"]',typeof r.imageSizes=="string"&&(d+='[imagesizes="'+kt(r.imageSizes)+'"]')):d+='[href="'+kt(e)+'"]';var h=d;switch(n){case"style":h=Nr(e);break;case"script":h=Sr(e)}rn.has(h)||(e=x({rel:"preload",href:n==="image"&&r&&r.imageSrcSet?void 0:e,as:n},r),rn.set(h,e),l.querySelector(d)!==null||n==="style"&&l.querySelector(qi(h))||n==="script"&&l.querySelector(Vi(h))||(n=l.createElement("link"),vt(n,"link",e),st(n),l.head.appendChild(n)))}}function Tw(e,n){da.m(e,n);var r=jr;if(r&&e){var l=n&&typeof n.as=="string"?n.as:"script",d='link[rel="modulepreload"][as="'+kt(l)+'"][href="'+kt(e)+'"]',h=d;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":h=Sr(e)}if(!rn.has(h)&&(e=x({rel:"modulepreload",href:e},n),rn.set(h,e),r.querySelector(d)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(r.querySelector(Vi(h)))return}l=r.createElement("link"),vt(l,"link",e),st(l),r.head.appendChild(l)}}}function Mw(e,n,r){da.S(e,n,r);var l=jr;if(l&&e){var d=_a(l).hoistableStyles,h=Nr(e);n=n||"default";var v=d.get(h);if(!v){var A={loading:0,preload:null};if(v=l.querySelector(qi(h)))A.loading=5;else{e=x({rel:"stylesheet",href:e,"data-precedence":n},r),(r=rn.get(h))&&Sf(e,r);var Y=v=l.createElement("link");st(Y),vt(Y,"link",e),Y._p=new Promise(function(J,ie){Y.onload=J,Y.onerror=ie}),Y.addEventListener("load",function(){A.loading|=1}),Y.addEventListener("error",function(){A.loading|=2}),A.loading|=4,Pl(v,n,l)}v={type:"stylesheet",instance:v,count:1,state:A},d.set(h,v)}}}function Aw(e,n){da.X(e,n);var r=jr;if(r&&e){var l=_a(r).hoistableScripts,d=Sr(e),h=l.get(d);h||(h=r.querySelector(Vi(d)),h||(e=x({src:e,async:!0},n),(n=rn.get(d))&&_f(e,n),h=r.createElement("script"),st(h),vt(h,"link",e),r.head.appendChild(h)),h={type:"script",instance:h,count:1,state:null},l.set(d,h))}}function kw(e,n){da.M(e,n);var r=jr;if(r&&e){var l=_a(r).hoistableScripts,d=Sr(e),h=l.get(d);h||(h=r.querySelector(Vi(d)),h||(e=x({src:e,async:!0,type:"module"},n),(n=rn.get(d))&&_f(e,n),h=r.createElement("script"),st(h),vt(h,"link",e),r.head.appendChild(h)),h={type:"script",instance:h,count:1,state:null},l.set(d,h))}}function $g(e,n,r,l){var d=(d=de.current)?Yl(d):null;if(!d)throw Error(o(446));switch(e){case"meta":case"title":return null;case"style":return typeof r.precedence=="string"&&typeof r.href=="string"?(n=Nr(r.href),r=_a(d).hoistableStyles,l=r.get(n),l||(l={type:"style",instance:null,count:0,state:null},r.set(n,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(r.rel==="stylesheet"&&typeof r.href=="string"&&typeof r.precedence=="string"){e=Nr(r.href);var h=_a(d).hoistableStyles,v=h.get(e);if(v||(d=d.ownerDocument||d,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},h.set(e,v),(h=d.querySelector(qi(e)))&&!h._p&&(v.instance=h,v.state.loading=5),rn.has(e)||(r={rel:"preload",as:"style",href:r.href,crossOrigin:r.crossOrigin,integrity:r.integrity,media:r.media,hrefLang:r.hrefLang,referrerPolicy:r.referrerPolicy},rn.set(e,r),h||zw(d,e,r,v.state))),n&&l===null)throw Error(o(528,""));return v}if(n&&l!==null)throw Error(o(529,""));return null;case"script":return n=r.async,r=r.src,typeof r=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=Sr(r),r=_a(d).hoistableScripts,l=r.get(n),l||(l={type:"script",instance:null,count:0,state:null},r.set(n,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,e))}}function Nr(e){return'href="'+kt(e)+'"'}function qi(e){return'link[rel="stylesheet"]['+e+"]"}function Ug(e){return x({},e,{"data-precedence":e.precedence,precedence:null})}function zw(e,n,r,l){e.querySelector('link[rel="preload"][as="style"]['+n+"]")?l.loading=1:(n=e.createElement("link"),l.preload=n,n.addEventListener("load",function(){return l.loading|=1}),n.addEventListener("error",function(){return l.loading|=2}),vt(n,"link",r),st(n),e.head.appendChild(n))}function Sr(e){return'[src="'+kt(e)+'"]'}function Vi(e){return"script[async]"+e}function qg(e,n,r){if(n.count++,n.instance===null)switch(n.type){case"style":var l=e.querySelector('style[data-href~="'+kt(r.href)+'"]');if(l)return n.instance=l,st(l),l;var d=x({},r,{"data-href":r.href,"data-precedence":r.precedence,href:null,precedence:null});return l=(e.ownerDocument||e).createElement("style"),st(l),vt(l,"style",d),Pl(l,r.precedence,e),n.instance=l;case"stylesheet":d=Nr(r.href);var h=e.querySelector(qi(d));if(h)return n.state.loading|=4,n.instance=h,st(h),h;l=Ug(r),(d=rn.get(d))&&Sf(l,d),h=(e.ownerDocument||e).createElement("link"),st(h);var v=h;return v._p=new Promise(function(A,Y){v.onload=A,v.onerror=Y}),vt(h,"link",l),n.state.loading|=4,Pl(h,r.precedence,e),n.instance=h;case"script":return h=Sr(r.src),(d=e.querySelector(Vi(h)))?(n.instance=d,st(d),d):(l=r,(d=rn.get(h))&&(l=x({},r),_f(l,d)),e=e.ownerDocument||e,d=e.createElement("script"),st(d),vt(d,"link",l),e.head.appendChild(d),n.instance=d);case"void":return null;default:throw Error(o(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(l=n.instance,n.state.loading|=4,Pl(l,r.precedence,e));return n.instance}function Pl(e,n,r){for(var l=r.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),d=l.length?l[l.length-1]:null,h=d,v=0;v<l.length;v++){var A=l[v];if(A.dataset.precedence===n)h=A;else if(h!==d)break}h?h.parentNode.insertBefore(e,h.nextSibling):(n=r.nodeType===9?r.head:r,n.insertBefore(e,n.firstChild))}function Sf(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.title==null&&(e.title=n.title)}function _f(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.integrity==null&&(e.integrity=n.integrity)}var Xl=null;function Vg(e,n,r){if(Xl===null){var l=new Map,d=Xl=new Map;d.set(r,l)}else d=Xl,l=d.get(r),l||(l=new Map,d.set(r,l));if(l.has(e))return l;for(l.set(e,null),r=r.getElementsByTagName(e),d=0;d<r.length;d++){var h=r[d];if(!(h[ls]||h[dt]||e==="link"&&h.getAttribute("rel")==="stylesheet")&&h.namespaceURI!=="http://www.w3.org/2000/svg"){var v=h.getAttribute(n)||"";v=e+v;var A=l.get(v);A?A.push(h):l.set(v,[h])}}return l}function Yg(e,n,r){e=e.ownerDocument||e,e.head.insertBefore(r,n==="title"?e.querySelector("head > title"):null)}function Rw(e,n,r){if(r===1||n.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;return n.rel==="stylesheet"?(e=n.disabled,typeof n.precedence=="string"&&e==null):!0;case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function Pg(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function Dw(e,n,r,l){if(r.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var d=Nr(l.href),h=n.querySelector(qi(d));if(h){n=h._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(e.count++,e=Il.bind(e),n.then(e,e)),r.state.loading|=4,r.instance=h,st(h);return}h=n.ownerDocument||n,l=Ug(l),(d=rn.get(d))&&Sf(l,d),h=h.createElement("link"),st(h);var v=h;v._p=new Promise(function(A,Y){v.onload=A,v.onerror=Y}),vt(h,"link",l),r.instance=h}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(r,n),(n=r.state.preload)&&(r.state.loading&3)===0&&(e.count++,r=Il.bind(e),n.addEventListener("load",r),n.addEventListener("error",r))}}var Ef=0;function Ow(e,n){return e.stylesheets&&e.count===0&&Ql(e,e.stylesheets),0<e.count||0<e.imgCount?function(r){var l=setTimeout(function(){if(e.stylesheets&&Ql(e,e.stylesheets),e.unsuspend){var h=e.unsuspend;e.unsuspend=null,h()}},6e4+n);0<e.imgBytes&&Ef===0&&(Ef=62500*pw());var d=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Ql(e,e.stylesheets),e.unsuspend)){var h=e.unsuspend;e.unsuspend=null,h()}},(e.imgBytes>Ef?50:800)+n);return e.unsuspend=r,function(){e.unsuspend=null,clearTimeout(l),clearTimeout(d)}}:null}function Il(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Ql(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Gl=null;function Ql(e,n){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Gl=new Map,n.forEach(Bw,e),Gl=null,Il.call(e))}function Bw(e,n){if(!(n.state.loading&4)){var r=Gl.get(e);if(r)var l=r.get(null);else{r=new Map,Gl.set(e,r);for(var d=e.querySelectorAll("link[data-precedence],style[data-precedence]"),h=0;h<d.length;h++){var v=d[h];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(r.set(v.dataset.precedence,v),l=v)}l&&r.set(null,l)}d=n.instance,v=d.getAttribute("data-precedence"),h=r.get(v)||l,h===l&&r.set(null,d),r.set(v,d),this.count++,l=Il.bind(this),d.addEventListener("load",l),d.addEventListener("error",l),h?h.parentNode.insertBefore(d,h.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(d,e.firstChild)),n.state.loading|=4}}var Yi={$$typeof:T,Provider:null,Consumer:null,_currentValue:P,_currentValue2:P,_threadCount:0};function Lw(e,n,r,l,d,h,v,A,Y){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ei(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ei(0),this.hiddenUpdates=ei(null),this.identifierPrefix=l,this.onUncaughtError=d,this.onCaughtError=h,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Y,this.incompleteTransitions=new Map}function Xg(e,n,r,l,d,h,v,A,Y,J,ie,le){return e=new Lw(e,n,r,v,Y,J,ie,le,A),n=1,h===!0&&(n|=24),h=Ut(3,null,null,n),e.current=h,h.stateNode=e,n=sd(),n.refCount++,e.pooledCache=n,n.refCount++,h.memoizedState={element:l,isDehydrated:r,cache:n},ld(h),e}function Ig(e){return e?(e=tr,e):tr}function Gg(e,n,r,l,d,h){d=Ig(d),l.context===null?l.context=d:l.pendingContext=d,l=Ra(n),l.payload={element:r},h=h===void 0?null:h,h!==null&&(l.callback=h),r=Da(e,l,n),r!==null&&(Lt(r,e,n),wi(r,e,n))}function Qg(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<n?r:n}}function Cf(e,n){Qg(e,n),(e=e.alternate)&&Qg(e,n)}function Zg(e){if(e.tag===13||e.tag===31){var n=ms(e,67108864);n!==null&&Lt(n,e,67108864),Cf(e,67108864)}}function Fg(e){if(e.tag===13||e.tag===31){var n=Xt();n=ti(n);var r=ms(e,n);r!==null&&Lt(r,e,n),Cf(e,n)}}var Zl=!0;function Hw(e,n,r,l){var d=O.T;O.T=null;var h=D.p;try{D.p=2,Tf(e,n,r,l)}finally{D.p=h,O.T=d}}function $w(e,n,r,l){var d=O.T;O.T=null;var h=D.p;try{D.p=8,Tf(e,n,r,l)}finally{D.p=h,O.T=d}}function Tf(e,n,r,l){if(Zl){var d=Mf(l);if(d===null)mf(e,n,l,Fl,r),Kg(e,l);else if(qw(d,e,n,r,l))l.stopPropagation();else if(Kg(e,l),n&4&&-1<Uw.indexOf(e)){for(;d!==null;){var h=Na(d);if(h!==null)switch(h.tag){case 3:if(h=h.stateNode,h.current.memoizedState.isDehydrated){var v=Xn(h.pendingLanes);if(v!==0){var A=h;for(A.pendingLanes|=2,A.entangledLanes|=2;v;){var Y=1<<31-Ct(v);A.entanglements[1]|=Y,v&=~Y}kn(h),(He&6)===0&&(zl=at()+500,Li(0))}}break;case 31:case 13:A=ms(h,2),A!==null&&Lt(A,h,2),Dl(),Cf(h,2)}if(h=Mf(l),h===null&&mf(e,n,l,Fl,r),h===d)break;d=h}d!==null&&l.stopPropagation()}else mf(e,n,l,null,r)}}function Mf(e){return e=Au(e),Af(e)}var Fl=null;function Af(e){if(Fl=null,e=ja(e),e!==null){var n=u(e);if(n===null)e=null;else{var r=n.tag;if(r===13){if(e=f(n),e!==null)return e;e=null}else if(r===31){if(e=m(n),e!==null)return e;e=null}else if(r===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null)}}return Fl=e,null}function Wg(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Vn()){case dn:return 2;case Wt:return 8;case Yn:case fn:return 32;case Pn:return 268435456;default:return 32}default:return 32}}var kf=!1,Xa=null,Ia=null,Ga=null,Pi=new Map,Xi=new Map,Qa=[],Uw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Kg(e,n){switch(e){case"focusin":case"focusout":Xa=null;break;case"dragenter":case"dragleave":Ia=null;break;case"mouseover":case"mouseout":Ga=null;break;case"pointerover":case"pointerout":Pi.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xi.delete(n.pointerId)}}function Ii(e,n,r,l,d,h){return e===null||e.nativeEvent!==h?(e={blockedOn:n,domEventName:r,eventSystemFlags:l,nativeEvent:h,targetContainers:[d]},n!==null&&(n=Na(n),n!==null&&Zg(n)),e):(e.eventSystemFlags|=l,n=e.targetContainers,d!==null&&n.indexOf(d)===-1&&n.push(d),e)}function qw(e,n,r,l,d){switch(n){case"focusin":return Xa=Ii(Xa,e,n,r,l,d),!0;case"dragenter":return Ia=Ii(Ia,e,n,r,l,d),!0;case"mouseover":return Ga=Ii(Ga,e,n,r,l,d),!0;case"pointerover":var h=d.pointerId;return Pi.set(h,Ii(Pi.get(h)||null,e,n,r,l,d)),!0;case"gotpointercapture":return h=d.pointerId,Xi.set(h,Ii(Xi.get(h)||null,e,n,r,l,d)),!0}return!1}function Jg(e){var n=ja(e.target);if(n!==null){var r=u(n);if(r!==null){if(n=r.tag,n===13){if(n=f(r),n!==null){e.blockedOn=n,Ho(e.priority,function(){Fg(r)});return}}else if(n===31){if(n=m(r),n!==null){e.blockedOn=n,Ho(e.priority,function(){Fg(r)});return}}else if(n===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Wl(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var r=Mf(e.nativeEvent);if(r===null){r=e.nativeEvent;var l=new r.constructor(r.type,r);Mu=l,r.target.dispatchEvent(l),Mu=null}else return n=Na(r),n!==null&&Zg(n),e.blockedOn=r,!1;n.shift()}return!0}function ex(e,n,r){Wl(e)&&r.delete(n)}function Vw(){kf=!1,Xa!==null&&Wl(Xa)&&(Xa=null),Ia!==null&&Wl(Ia)&&(Ia=null),Ga!==null&&Wl(Ga)&&(Ga=null),Pi.forEach(ex),Xi.forEach(ex)}function Kl(e,n){e.blockedOn===n&&(e.blockedOn=null,kf||(kf=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,Vw)))}var Jl=null;function tx(e){Jl!==e&&(Jl=e,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Jl===e&&(Jl=null);for(var n=0;n<e.length;n+=3){var r=e[n],l=e[n+1],d=e[n+2];if(typeof l!="function"){if(Af(l||r)===null)continue;break}var h=Na(r);h!==null&&(e.splice(n,3),n-=3,Td(h,{pending:!0,data:d,method:r.method,action:l},l,d))}}))}function _r(e){function n(Y){return Kl(Y,e)}Xa!==null&&Kl(Xa,e),Ia!==null&&Kl(Ia,e),Ga!==null&&Kl(Ga,e),Pi.forEach(n),Xi.forEach(n);for(var r=0;r<Qa.length;r++){var l=Qa[r];l.blockedOn===e&&(l.blockedOn=null)}for(;0<Qa.length&&(r=Qa[0],r.blockedOn===null);)Jg(r),r.blockedOn===null&&Qa.shift();if(r=(e.ownerDocument||e).$$reactFormReplay,r!=null)for(l=0;l<r.length;l+=3){var d=r[l],h=r[l+1],v=d[Nt]||null;if(typeof h=="function")v||tx(r);else if(v){var A=null;if(h&&h.hasAttribute("formAction")){if(d=h,v=h[Nt]||null)A=v.formAction;else if(Af(d)!==null)continue}else A=v.action;typeof A=="function"?r[l+1]=A:(r.splice(l,3),l-=3),tx(r)}}}function nx(){function e(h){h.canIntercept&&h.info==="react-transition"&&h.intercept({handler:function(){return new Promise(function(v){return d=v})},focusReset:"manual",scroll:"manual"})}function n(){d!==null&&(d(),d=null),l||setTimeout(r,20)}function r(){if(!l&&!navigation.transition){var h=navigation.currentEntry;h&&h.url!=null&&navigation.navigate(h.url,{state:h.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,d=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",n),navigation.addEventListener("navigateerror",n),setTimeout(r,100),function(){l=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",n),navigation.removeEventListener("navigateerror",n),d!==null&&(d(),d=null)}}}function zf(e){this._internalRoot=e}ec.prototype.render=zf.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(o(409));var r=n.current,l=Xt();Gg(r,l,e,n,null,null)},ec.prototype.unmount=zf.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;Gg(e.current,2,null,e,null,null),Dl(),n[In]=null}};function ec(e){this._internalRoot=e}ec.prototype.unstable_scheduleHydration=function(e){if(e){var n=Lo();e={blockedOn:null,target:e,priority:n};for(var r=0;r<Qa.length&&n!==0&&n<Qa[r].priority;r++);Qa.splice(r,0,e),r===0&&Jg(e)}};var ax=a.version;if(ax!=="19.2.3")throw Error(o(527,ax,"19.2.3"));D.findDOMNode=function(e){var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(o(188)):(e=Object.keys(e).join(","),Error(o(268,e)));return e=g(n),e=e!==null?y(e):null,e=e===null?null:e.stateNode,e};var Yw={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:O,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var tc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!tc.isDisabled&&tc.supportsFiber)try{rs=tc.inject(Yw),Et=tc}catch{}}return Qi.createRoot=function(e,n){if(!c(e))throw Error(o(299));var r=!1,l="",d=u0,h=d0,v=f0;return n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onUncaughtError!==void 0&&(d=n.onUncaughtError),n.onCaughtError!==void 0&&(h=n.onCaughtError),n.onRecoverableError!==void 0&&(v=n.onRecoverableError)),n=Xg(e,1,!1,null,null,r,l,null,d,h,v,nx),e[In]=n.current,hf(e),new zf(n)},Qi.hydrateRoot=function(e,n,r){if(!c(e))throw Error(o(299));var l=!1,d="",h=u0,v=d0,A=f0,Y=null;return r!=null&&(r.unstable_strictMode===!0&&(l=!0),r.identifierPrefix!==void 0&&(d=r.identifierPrefix),r.onUncaughtError!==void 0&&(h=r.onUncaughtError),r.onCaughtError!==void 0&&(v=r.onCaughtError),r.onRecoverableError!==void 0&&(A=r.onRecoverableError),r.formState!==void 0&&(Y=r.formState)),n=Xg(e,1,!0,n,r??null,l,d,Y,h,v,A,nx),n.context=Ig(null),r=n.current,l=Xt(),l=ti(l),d=Ra(l),d.callback=null,Da(r,d,l),r=l,n.current.lanes=r,os(n,r),kn(n),e[In]=n.current,hf(e),new ec(n)},Qi.version="19.2.3",Qi}var hx;function Kw(){if(hx)return Of.exports;hx=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(a){console.error(a)}}return t(),Of.exports=Ww(),Of.exports}var Jw=Kw();const ej=Rh(Jw);var mx="popstate";function tj(t={}){function a(o,c){let{pathname:u,search:f,hash:m}=o.location;return oh("",{pathname:u,search:f,hash:m},c.state&&c.state.usr||null,c.state&&c.state.key||"default")}function s(o,c){return typeof c=="string"?c:io(c)}return aj(a,s,null,t)}function Fe(t,a){if(t===!1||t===null||typeof t>"u")throw new Error(a)}function Gt(t,a){if(!t){typeof console<"u"&&console.warn(a);try{throw new Error(a)}catch{}}}function nj(){return Math.random().toString(36).substring(2,10)}function px(t,a){return{usr:t.state,key:t.key,idx:a}}function oh(t,a,s=null,o){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof a=="string"?Gr(a):a,state:s,key:a&&a.key||o||nj()}}function io({pathname:t="/",search:a="",hash:s=""}){return a&&a!=="?"&&(t+=a.charAt(0)==="?"?a:"?"+a),s&&s!=="#"&&(t+=s.charAt(0)==="#"?s:"#"+s),t}function Gr(t){let a={};if(t){let s=t.indexOf("#");s>=0&&(a.hash=t.substring(s),t=t.substring(0,s));let o=t.indexOf("?");o>=0&&(a.search=t.substring(o),t=t.substring(0,o)),t&&(a.pathname=t)}return a}function aj(t,a,s,o={}){let{window:c=document.defaultView,v5Compat:u=!1}=o,f=c.history,m="POP",p=null,g=y();g==null&&(g=0,f.replaceState({...f.state,idx:g},""));function y(){return(f.state||{idx:null}).idx}function x(){m="POP";let N=y(),E=N==null?null:N-g;g=N,p&&p({action:m,location:C.location,delta:E})}function b(N,E){m="PUSH";let z=oh(C.location,N,E);g=y()+1;let T=px(z,g),k=C.createHref(z);try{f.pushState(T,"",k)}catch(w){if(w instanceof DOMException&&w.name==="DataCloneError")throw w;c.location.assign(k)}u&&p&&p({action:m,location:C.location,delta:1})}function S(N,E){m="REPLACE";let z=oh(C.location,N,E);g=y();let T=px(z,g),k=C.createHref(z);f.replaceState(T,"",k),u&&p&&p({action:m,location:C.location,delta:0})}function _(N){return sj(N)}let C={get action(){return m},get location(){return t(c,f)},listen(N){if(p)throw new Error("A history only accepts one active listener");return c.addEventListener(mx,x),p=N,()=>{c.removeEventListener(mx,x),p=null}},createHref(N){return a(c,N)},createURL:_,encodeLocation(N){let E=_(N);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:b,replace:S,go(N){return f.go(N)}};return C}function sj(t,a=!1){let s="http://localhost";typeof window<"u"&&(s=window.location.origin!=="null"?window.location.origin:window.location.href),Fe(s,"No window.location.(origin|href) available to create URL");let o=typeof t=="string"?t:io(t);return o=o.replace(/ $/,"%20"),!a&&o.startsWith("//")&&(o=s+o),new URL(o,s)}function tb(t,a,s="/"){return rj(t,a,s,!1)}function rj(t,a,s,o){let c=typeof a=="string"?Gr(a):a,u=ga(c.pathname||"/",s);if(u==null)return null;let f=nb(t);ij(f);let m=null;for(let p=0;m==null&&p<f.length;++p){let g=xj(u);m=pj(f[p],g,o)}return m}function nb(t,a=[],s=[],o="",c=!1){let u=(f,m,p=c,g)=>{let y={relativePath:g===void 0?f.path||"":g,caseSensitive:f.caseSensitive===!0,childrenIndex:m,route:f};if(y.relativePath.startsWith("/")){if(!y.relativePath.startsWith(o)&&p)return;Fe(y.relativePath.startsWith(o),`Absolute route path "${y.relativePath}" nested under path "${o}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),y.relativePath=y.relativePath.slice(o.length)}let x=pa([o,y.relativePath]),b=s.concat(y);f.children&&f.children.length>0&&(Fe(f.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${x}".`),nb(f.children,a,b,x,p)),!(f.path==null&&!f.index)&&a.push({path:x,score:hj(x,f.index),routesMeta:b})};return t.forEach((f,m)=>{if(f.path===""||!f.path?.includes("?"))u(f,m);else for(let p of ab(f.path))u(f,m,!0,p)}),a}function ab(t){let a=t.split("/");if(a.length===0)return[];let[s,...o]=a,c=s.endsWith("?"),u=s.replace(/\?$/,"");if(o.length===0)return c?[u,""]:[u];let f=ab(o.join("/")),m=[];return m.push(...f.map(p=>p===""?u:[u,p].join("/"))),c&&m.push(...f),m.map(p=>t.startsWith("/")&&p===""?"/":p)}function ij(t){t.sort((a,s)=>a.score!==s.score?s.score-a.score:mj(a.routesMeta.map(o=>o.childrenIndex),s.routesMeta.map(o=>o.childrenIndex)))}var oj=/^:[\w-]+$/,lj=3,cj=2,uj=1,dj=10,fj=-2,gx=t=>t==="*";function hj(t,a){let s=t.split("/"),o=s.length;return s.some(gx)&&(o+=fj),a&&(o+=cj),s.filter(c=>!gx(c)).reduce((c,u)=>c+(oj.test(u)?lj:u===""?uj:dj),o)}function mj(t,a){return t.length===a.length&&t.slice(0,-1).every((o,c)=>o===a[c])?t[t.length-1]-a[a.length-1]:0}function pj(t,a,s=!1){let{routesMeta:o}=t,c={},u="/",f=[];for(let m=0;m<o.length;++m){let p=o[m],g=m===o.length-1,y=u==="/"?a:a.slice(u.length)||"/",x=Ac({path:p.relativePath,caseSensitive:p.caseSensitive,end:g},y),b=p.route;if(!x&&g&&s&&!o[o.length-1].route.index&&(x=Ac({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},y)),!x)return null;Object.assign(c,x.params),f.push({params:c,pathname:pa([u,x.pathname]),pathnameBase:wj(pa([u,x.pathnameBase])),route:b}),x.pathnameBase!=="/"&&(u=pa([u,x.pathnameBase]))}return f}function Ac(t,a){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[s,o]=gj(t.path,t.caseSensitive,t.end),c=a.match(s);if(!c)return null;let u=c[0],f=u.replace(/(.)\/+$/,"$1"),m=c.slice(1);return{params:o.reduce((g,{paramName:y,isOptional:x},b)=>{if(y==="*"){let _=m[b]||"";f=u.slice(0,u.length-_.length).replace(/(.)\/+$/,"$1")}const S=m[b];return x&&!S?g[y]=void 0:g[y]=(S||"").replace(/%2F/g,"/"),g},{}),pathname:u,pathnameBase:f,pattern:t}}function gj(t,a=!1,s=!0){Gt(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let o=[],c="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(f,m,p)=>(o.push({paramName:m,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(o.push({paramName:"*"}),c+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?c+="\\/*$":t!==""&&t!=="/"&&(c+="(?:(?=\\/|$))"),[new RegExp(c,a?void 0:"i"),o]}function xj(t){try{return t.split("/").map(a=>decodeURIComponent(a).replace(/\//g,"%2F")).join("/")}catch(a){return Gt(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${a}).`),t}}function ga(t,a){if(a==="/")return t;if(!t.toLowerCase().startsWith(a.toLowerCase()))return null;let s=a.endsWith("/")?a.length-1:a.length,o=t.charAt(s);return o&&o!=="/"?null:t.slice(s)||"/"}var sb=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,yj=t=>sb.test(t);function bj(t,a="/"){let{pathname:s,search:o="",hash:c=""}=typeof t=="string"?Gr(t):t,u;if(s)if(yj(s))u=s;else{if(s.includes("//")){let f=s;s=s.replace(/\/\/+/g,"/"),Gt(!1,`Pathnames cannot have embedded double slashes - normalizing ${f} -> ${s}`)}s.startsWith("/")?u=xx(s.substring(1),"/"):u=xx(s,a)}else u=a;return{pathname:u,search:jj(o),hash:Nj(c)}}function xx(t,a){let s=a.replace(/\/+$/,"").split("/");return t.split("/").forEach(c=>{c===".."?s.length>1&&s.pop():c!=="."&&s.push(c)}),s.length>1?s.join("/"):"/"}function $f(t,a,s,o){return`Cannot include a '${t}' character in a manually specified \`to.${a}\` field [${JSON.stringify(o)}].  Please separate it out to the \`to.${s}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function vj(t){return t.filter((a,s)=>s===0||a.route.path&&a.route.path.length>0)}function Dh(t){let a=vj(t);return a.map((s,o)=>o===a.length-1?s.pathname:s.pathnameBase)}function Oh(t,a,s,o=!1){let c;typeof t=="string"?c=Gr(t):(c={...t},Fe(!c.pathname||!c.pathname.includes("?"),$f("?","pathname","search",c)),Fe(!c.pathname||!c.pathname.includes("#"),$f("#","pathname","hash",c)),Fe(!c.search||!c.search.includes("#"),$f("#","search","hash",c)));let u=t===""||c.pathname==="",f=u?"/":c.pathname,m;if(f==null)m=s;else{let x=a.length-1;if(!o&&f.startsWith("..")){let b=f.split("/");for(;b[0]==="..";)b.shift(),x-=1;c.pathname=b.join("/")}m=x>=0?a[x]:"/"}let p=bj(c,m),g=f&&f!=="/"&&f.endsWith("/"),y=(u||f===".")&&s.endsWith("/");return!p.pathname.endsWith("/")&&(g||y)&&(p.pathname+="/"),p}var pa=t=>t.join("/").replace(/\/\/+/g,"/"),wj=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),jj=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Nj=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t,Sj=class{constructor(t,a,s,o=!1){this.status=t,this.statusText=a||"",this.internal=o,s instanceof Error?(this.data=s.toString(),this.error=s):this.data=s}};function _j(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}function Ej(t){return t.map(a=>a.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var rb=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function ib(t,a){let s=t;if(typeof s!="string"||!sb.test(s))return{absoluteURL:void 0,isExternal:!1,to:s};let o=s,c=!1;if(rb)try{let u=new URL(window.location.href),f=s.startsWith("//")?new URL(u.protocol+s):new URL(s),m=ga(f.pathname,a);f.origin===u.origin&&m!=null?s=m+f.search+f.hash:c=!0}catch{Gt(!1,`<Link to="${s}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:o,isExternal:c,to:s}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var ob=["POST","PUT","PATCH","DELETE"];new Set(ob);var Cj=["GET",...ob];new Set(Cj);var Qr=j.createContext(null);Qr.displayName="DataRouter";var Zc=j.createContext(null);Zc.displayName="DataRouterState";var Tj=j.createContext(!1),lb=j.createContext({isTransitioning:!1});lb.displayName="ViewTransition";var Mj=j.createContext(new Map);Mj.displayName="Fetchers";var Aj=j.createContext(null);Aj.displayName="Await";var Zt=j.createContext(null);Zt.displayName="Navigation";var bo=j.createContext(null);bo.displayName="Location";var cn=j.createContext({outlet:null,matches:[],isDataRoute:!1});cn.displayName="Route";var Bh=j.createContext(null);Bh.displayName="RouteError";var cb="REACT_ROUTER_ERROR",kj="REDIRECT",zj="ROUTE_ERROR_RESPONSE";function Rj(t){if(t.startsWith(`${cb}:${kj}:{`))try{let a=JSON.parse(t.slice(28));if(typeof a=="object"&&a&&typeof a.status=="number"&&typeof a.statusText=="string"&&typeof a.location=="string"&&typeof a.reloadDocument=="boolean"&&typeof a.replace=="boolean")return a}catch{}}function Dj(t){if(t.startsWith(`${cb}:${zj}:{`))try{let a=JSON.parse(t.slice(40));if(typeof a=="object"&&a&&typeof a.status=="number"&&typeof a.statusText=="string")return new Sj(a.status,a.statusText,a.data)}catch{}}function Oj(t,{relative:a}={}){Fe(Zr(),"useHref() may be used only in the context of a <Router> component.");let{basename:s,navigator:o}=j.useContext(Zt),{hash:c,pathname:u,search:f}=vo(t,{relative:a}),m=u;return s!=="/"&&(m=u==="/"?s:pa([s,u])),o.createHref({pathname:m,search:f,hash:c})}function Zr(){return j.useContext(bo)!=null}function ba(){return Fe(Zr(),"useLocation() may be used only in the context of a <Router> component."),j.useContext(bo).location}var ub="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function db(t){j.useContext(Zt).static||j.useLayoutEffect(t)}function $s(){let{isDataRoute:t}=j.useContext(cn);return t?Wj():Bj()}function Bj(){Fe(Zr(),"useNavigate() may be used only in the context of a <Router> component.");let t=j.useContext(Qr),{basename:a,navigator:s}=j.useContext(Zt),{matches:o}=j.useContext(cn),{pathname:c}=ba(),u=JSON.stringify(Dh(o)),f=j.useRef(!1);return db(()=>{f.current=!0}),j.useCallback((p,g={})=>{if(Gt(f.current,ub),!f.current)return;if(typeof p=="number"){s.go(p);return}let y=Oh(p,JSON.parse(u),c,g.relative==="path");t==null&&a!=="/"&&(y.pathname=y.pathname==="/"?a:pa([a,y.pathname])),(g.replace?s.replace:s.push)(y,g.state,g)},[a,s,u,c,t])}var Lj=j.createContext(null);function Hj(t){let a=j.useContext(cn).outlet;return j.useMemo(()=>a&&j.createElement(Lj.Provider,{value:t},a),[a,t])}function $j(){let{matches:t}=j.useContext(cn),a=t[t.length-1];return a?a.params:{}}function vo(t,{relative:a}={}){let{matches:s}=j.useContext(cn),{pathname:o}=ba(),c=JSON.stringify(Dh(s));return j.useMemo(()=>Oh(t,JSON.parse(c),o,a==="path"),[t,c,o,a])}function Uj(t,a){return fb(t,a)}function fb(t,a,s,o,c){Fe(Zr(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:u}=j.useContext(Zt),{matches:f}=j.useContext(cn),m=f[f.length-1],p=m?m.params:{},g=m?m.pathname:"/",y=m?m.pathnameBase:"/",x=m&&m.route;{let z=x&&x.path||"";mb(g,!x||z.endsWith("*")||z.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${g}" (under <Route path="${z}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${z}"> to <Route path="${z==="/"?"*":`${z}/*`}">.`)}let b=ba(),S;if(a){let z=typeof a=="string"?Gr(a):a;Fe(y==="/"||z.pathname?.startsWith(y),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${y}" but pathname "${z.pathname}" was given in the \`location\` prop.`),S=z}else S=b;let _=S.pathname||"/",C=_;if(y!=="/"){let z=y.replace(/^\//,"").split("/");C="/"+_.replace(/^\//,"").split("/").slice(z.length).join("/")}let N=tb(t,{pathname:C});Gt(x||N!=null,`No routes matched location "${S.pathname}${S.search}${S.hash}" `),Gt(N==null||N[N.length-1].route.element!==void 0||N[N.length-1].route.Component!==void 0||N[N.length-1].route.lazy!==void 0,`Matched leaf route at location "${S.pathname}${S.search}${S.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let E=Xj(N&&N.map(z=>Object.assign({},z,{params:Object.assign({},p,z.params),pathname:pa([y,u.encodeLocation?u.encodeLocation(z.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:z.pathname]),pathnameBase:z.pathnameBase==="/"?y:pa([y,u.encodeLocation?u.encodeLocation(z.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:z.pathnameBase])})),f,s,o,c);return a&&E?j.createElement(bo.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...S},navigationType:"POP"}},E):E}function qj(){let t=Fj(),a=_j(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),s=t instanceof Error?t.stack:null,o="rgba(200,200,200, 0.5)",c={padding:"0.5rem",backgroundColor:o},u={padding:"2px 4px",backgroundColor:o},f=null;return console.error("Error handled by React Router default ErrorBoundary:",t),f=j.createElement(j.Fragment,null,j.createElement("p",null," Hey developer "),j.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",j.createElement("code",{style:u},"ErrorBoundary")," or"," ",j.createElement("code",{style:u},"errorElement")," prop on your route.")),j.createElement(j.Fragment,null,j.createElement("h2",null,"Unexpected Application Error!"),j.createElement("h3",{style:{fontStyle:"italic"}},a),s?j.createElement("pre",{style:c},s):null,f)}var Vj=j.createElement(qj,null),hb=class extends j.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,a){return a.location!==t.location||a.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:a.error,location:a.location,revalidation:t.revalidation||a.revalidation}}componentDidCatch(t,a){this.props.onError?this.props.onError(t,a):console.error("React Router caught the following error during render",t)}render(){let t=this.state.error;if(this.context&&typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){const s=Dj(t.digest);s&&(t=s)}let a=t!==void 0?j.createElement(cn.Provider,{value:this.props.routeContext},j.createElement(Bh.Provider,{value:t,children:this.props.component})):this.props.children;return this.context?j.createElement(Yj,{error:t},a):a}};hb.contextType=Tj;var Uf=new WeakMap;function Yj({children:t,error:a}){let{basename:s}=j.useContext(Zt);if(typeof a=="object"&&a&&"digest"in a&&typeof a.digest=="string"){let o=Rj(a.digest);if(o){let c=Uf.get(a);if(c)throw c;let u=ib(o.location,s);if(rb&&!Uf.get(a))if(u.isExternal||o.reloadDocument)window.location.href=u.absoluteURL||u.to;else{const f=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(u.to,{replace:o.replace}));throw Uf.set(a,f),f}return j.createElement("meta",{httpEquiv:"refresh",content:`0;url=${u.absoluteURL||u.to}`})}}return t}function Pj({routeContext:t,match:a,children:s}){let o=j.useContext(Qr);return o&&o.static&&o.staticContext&&(a.route.errorElement||a.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=a.route.id),j.createElement(cn.Provider,{value:t},s)}function Xj(t,a=[],s=null,o=null,c=null){if(t==null){if(!s)return null;if(s.errors)t=s.matches;else if(a.length===0&&!s.initialized&&s.matches.length>0)t=s.matches;else return null}let u=t,f=s?.errors;if(f!=null){let y=u.findIndex(x=>x.route.id&&f?.[x.route.id]!==void 0);Fe(y>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(f).join(",")}`),u=u.slice(0,Math.min(u.length,y+1))}let m=!1,p=-1;if(s)for(let y=0;y<u.length;y++){let x=u[y];if((x.route.HydrateFallback||x.route.hydrateFallbackElement)&&(p=y),x.route.id){let{loaderData:b,errors:S}=s,_=x.route.loader&&!b.hasOwnProperty(x.route.id)&&(!S||S[x.route.id]===void 0);if(x.route.lazy||_){m=!0,p>=0?u=u.slice(0,p+1):u=[u[0]];break}}}let g=s&&o?(y,x)=>{o(y,{location:s.location,params:s.matches?.[0]?.params??{},unstable_pattern:Ej(s.matches),errorInfo:x})}:void 0;return u.reduceRight((y,x,b)=>{let S,_=!1,C=null,N=null;s&&(S=f&&x.route.id?f[x.route.id]:void 0,C=x.route.errorElement||Vj,m&&(p<0&&b===0?(mb("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),_=!0,N=null):p===b&&(_=!0,N=x.route.hydrateFallbackElement||null)));let E=a.concat(u.slice(0,b+1)),z=()=>{let T;return S?T=C:_?T=N:x.route.Component?T=j.createElement(x.route.Component,null):x.route.element?T=x.route.element:T=y,j.createElement(Pj,{match:x,routeContext:{outlet:y,matches:E,isDataRoute:s!=null},children:T})};return s&&(x.route.ErrorBoundary||x.route.errorElement||b===0)?j.createElement(hb,{location:s.location,revalidation:s.revalidation,component:C,error:S,children:z(),routeContext:{outlet:null,matches:E,isDataRoute:!0},onError:g}):z()},null)}function Lh(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Ij(t){let a=j.useContext(Qr);return Fe(a,Lh(t)),a}function Gj(t){let a=j.useContext(Zc);return Fe(a,Lh(t)),a}function Qj(t){let a=j.useContext(cn);return Fe(a,Lh(t)),a}function Hh(t){let a=Qj(t),s=a.matches[a.matches.length-1];return Fe(s.route.id,`${t} can only be used on routes that contain a unique "id"`),s.route.id}function Zj(){return Hh("useRouteId")}function Fj(){let t=j.useContext(Bh),a=Gj("useRouteError"),s=Hh("useRouteError");return t!==void 0?t:a.errors?.[s]}function Wj(){let{router:t}=Ij("useNavigate"),a=Hh("useNavigate"),s=j.useRef(!1);return db(()=>{s.current=!0}),j.useCallback(async(c,u={})=>{Gt(s.current,ub),s.current&&(typeof c=="number"?await t.navigate(c):await t.navigate(c,{fromRouteId:a,...u}))},[t,a])}var yx={};function mb(t,a,s){!a&&!yx[t]&&(yx[t]=!0,Gt(!1,s))}j.memo(Kj);function Kj({routes:t,future:a,state:s,onError:o}){return fb(t,void 0,s,o,a)}function kc({to:t,replace:a,state:s,relative:o}){Fe(Zr(),"<Navigate> may be used only in the context of a <Router> component.");let{static:c}=j.useContext(Zt);Gt(!c,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:u}=j.useContext(cn),{pathname:f}=ba(),m=$s(),p=Oh(t,Dh(u),f,o==="path"),g=JSON.stringify(p);return j.useEffect(()=>{m(JSON.parse(g),{replace:a,state:s,relative:o})},[m,g,o,a,s]),null}function Jj(t){return Hj(t.context)}function _t(t){Fe(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function eN({basename:t="/",children:a=null,location:s,navigationType:o="POP",navigator:c,static:u=!1,unstable_useTransitions:f}){Fe(!Zr(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let m=t.replace(/^\/*/,"/"),p=j.useMemo(()=>({basename:m,navigator:c,static:u,unstable_useTransitions:f,future:{}}),[m,c,u,f]);typeof s=="string"&&(s=Gr(s));let{pathname:g="/",search:y="",hash:x="",state:b=null,key:S="default"}=s,_=j.useMemo(()=>{let C=ga(g,m);return C==null?null:{location:{pathname:C,search:y,hash:x,state:b,key:S},navigationType:o}},[m,g,y,x,b,S,o]);return Gt(_!=null,`<Router basename="${m}"> is not able to match the URL "${g}${y}${x}" because it does not start with the basename, so the <Router> won't render anything.`),_==null?null:j.createElement(Zt.Provider,{value:p},j.createElement(bo.Provider,{children:a,value:_}))}function tN({children:t,location:a}){return Uj(lh(t),a)}function lh(t,a=[]){let s=[];return j.Children.forEach(t,(o,c)=>{if(!j.isValidElement(o))return;let u=[...a,c];if(o.type===j.Fragment){s.push.apply(s,lh(o.props.children,u));return}Fe(o.type===_t,`[${typeof o.type=="string"?o.type:o.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Fe(!o.props.index||!o.props.children,"An index route cannot have child routes.");let f={id:o.props.id||u.join("-"),caseSensitive:o.props.caseSensitive,element:o.props.element,Component:o.props.Component,index:o.props.index,path:o.props.path,middleware:o.props.middleware,loader:o.props.loader,action:o.props.action,hydrateFallbackElement:o.props.hydrateFallbackElement,HydrateFallback:o.props.HydrateFallback,errorElement:o.props.errorElement,ErrorBoundary:o.props.ErrorBoundary,hasErrorBoundary:o.props.hasErrorBoundary===!0||o.props.ErrorBoundary!=null||o.props.errorElement!=null,shouldRevalidate:o.props.shouldRevalidate,handle:o.props.handle,lazy:o.props.lazy};o.props.children&&(f.children=lh(o.props.children,u)),s.push(f)}),s}var yc="get",bc="application/x-www-form-urlencoded";function Fc(t){return typeof HTMLElement<"u"&&t instanceof HTMLElement}function nN(t){return Fc(t)&&t.tagName.toLowerCase()==="button"}function aN(t){return Fc(t)&&t.tagName.toLowerCase()==="form"}function sN(t){return Fc(t)&&t.tagName.toLowerCase()==="input"}function rN(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function iN(t,a){return t.button===0&&(!a||a==="_self")&&!rN(t)}function ch(t=""){return new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((a,s)=>{let o=t[s];return a.concat(Array.isArray(o)?o.map(c=>[s,c]):[[s,o]])},[]))}function oN(t,a){let s=ch(t);return a&&a.forEach((o,c)=>{s.has(c)||a.getAll(c).forEach(u=>{s.append(c,u)})}),s}var nc=null;function lN(){if(nc===null)try{new FormData(document.createElement("form"),0),nc=!1}catch{nc=!0}return nc}var cN=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function qf(t){return t!=null&&!cN.has(t)?(Gt(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${bc}"`),null):t}function uN(t,a){let s,o,c,u,f;if(aN(t)){let m=t.getAttribute("action");o=m?ga(m,a):null,s=t.getAttribute("method")||yc,c=qf(t.getAttribute("enctype"))||bc,u=new FormData(t)}else if(nN(t)||sN(t)&&(t.type==="submit"||t.type==="image")){let m=t.form;if(m==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=t.getAttribute("formaction")||m.getAttribute("action");if(o=p?ga(p,a):null,s=t.getAttribute("formmethod")||m.getAttribute("method")||yc,c=qf(t.getAttribute("formenctype"))||qf(m.getAttribute("enctype"))||bc,u=new FormData(m,t),!lN()){let{name:g,type:y,value:x}=t;if(y==="image"){let b=g?`${g}.`:"";u.append(`${b}x`,"0"),u.append(`${b}y`,"0")}else g&&u.append(g,x)}}else{if(Fc(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');s=yc,o=null,c=bc,f=t}return u&&c==="text/plain"&&(f=u,u=void 0),{action:o,method:s.toLowerCase(),encType:c,formData:u,body:f}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function $h(t,a){if(t===!1||t===null||typeof t>"u")throw new Error(a)}function dN(t,a,s,o){let c=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return s?c.pathname.endsWith("/")?c.pathname=`${c.pathname}_.${o}`:c.pathname=`${c.pathname}.${o}`:c.pathname==="/"?c.pathname=`_root.${o}`:a&&ga(c.pathname,a)==="/"?c.pathname=`${a.replace(/\/$/,"")}/_root.${o}`:c.pathname=`${c.pathname.replace(/\/$/,"")}.${o}`,c}async function fN(t,a){if(t.id in a)return a[t.id];try{let s=await import(t.module);return a[t.id]=s,s}catch(s){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(s),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function hN(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function mN(t,a,s){let o=await Promise.all(t.map(async c=>{let u=a.routes[c.route.id];if(u){let f=await fN(u,s);return f.links?f.links():[]}return[]}));return yN(o.flat(1).filter(hN).filter(c=>c.rel==="stylesheet"||c.rel==="preload").map(c=>c.rel==="stylesheet"?{...c,rel:"prefetch",as:"style"}:{...c,rel:"prefetch"}))}function bx(t,a,s,o,c,u){let f=(p,g)=>s[g]?p.route.id!==s[g].route.id:!0,m=(p,g)=>s[g].pathname!==p.pathname||s[g].route.path?.endsWith("*")&&s[g].params["*"]!==p.params["*"];return u==="assets"?a.filter((p,g)=>f(p,g)||m(p,g)):u==="data"?a.filter((p,g)=>{let y=o.routes[p.route.id];if(!y||!y.hasLoader)return!1;if(f(p,g)||m(p,g))return!0;if(p.route.shouldRevalidate){let x=p.route.shouldRevalidate({currentUrl:new URL(c.pathname+c.search+c.hash,window.origin),currentParams:s[0]?.params||{},nextUrl:new URL(t,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof x=="boolean")return x}return!0}):[]}function pN(t,a,{includeHydrateFallback:s}={}){return gN(t.map(o=>{let c=a.routes[o.route.id];if(!c)return[];let u=[c.module];return c.clientActionModule&&(u=u.concat(c.clientActionModule)),c.clientLoaderModule&&(u=u.concat(c.clientLoaderModule)),s&&c.hydrateFallbackModule&&(u=u.concat(c.hydrateFallbackModule)),c.imports&&(u=u.concat(c.imports)),u}).flat(1))}function gN(t){return[...new Set(t)]}function xN(t){let a={},s=Object.keys(t).sort();for(let o of s)a[o]=t[o];return a}function yN(t,a){let s=new Set;return new Set(a),t.reduce((o,c)=>{let u=JSON.stringify(xN(c));return s.has(u)||(s.add(u),o.push({key:u,link:c})),o},[])}function pb(){let t=j.useContext(Qr);return $h(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function bN(){let t=j.useContext(Zc);return $h(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var Uh=j.createContext(void 0);Uh.displayName="FrameworkContext";function gb(){let t=j.useContext(Uh);return $h(t,"You must render this element inside a <HydratedRouter> element"),t}function vN(t,a){let s=j.useContext(Uh),[o,c]=j.useState(!1),[u,f]=j.useState(!1),{onFocus:m,onBlur:p,onMouseEnter:g,onMouseLeave:y,onTouchStart:x}=a,b=j.useRef(null);j.useEffect(()=>{if(t==="render"&&f(!0),t==="viewport"){let C=E=>{E.forEach(z=>{f(z.isIntersecting)})},N=new IntersectionObserver(C,{threshold:.5});return b.current&&N.observe(b.current),()=>{N.disconnect()}}},[t]),j.useEffect(()=>{if(o){let C=setTimeout(()=>{f(!0)},100);return()=>{clearTimeout(C)}}},[o]);let S=()=>{c(!0)},_=()=>{c(!1),f(!1)};return s?t!=="intent"?[u,b,{}]:[u,b,{onFocus:Zi(m,S),onBlur:Zi(p,_),onMouseEnter:Zi(g,S),onMouseLeave:Zi(y,_),onTouchStart:Zi(x,S)}]:[!1,b,{}]}function Zi(t,a){return s=>{t&&t(s),s.defaultPrevented||a(s)}}function wN({page:t,...a}){let{router:s}=pb(),o=j.useMemo(()=>tb(s.routes,t,s.basename),[s.routes,t,s.basename]);return o?j.createElement(NN,{page:t,matches:o,...a}):null}function jN(t){let{manifest:a,routeModules:s}=gb(),[o,c]=j.useState([]);return j.useEffect(()=>{let u=!1;return mN(t,a,s).then(f=>{u||c(f)}),()=>{u=!0}},[t,a,s]),o}function NN({page:t,matches:a,...s}){let o=ba(),{future:c,manifest:u,routeModules:f}=gb(),{basename:m}=pb(),{loaderData:p,matches:g}=bN(),y=j.useMemo(()=>bx(t,a,g,u,o,"data"),[t,a,g,u,o]),x=j.useMemo(()=>bx(t,a,g,u,o,"assets"),[t,a,g,u,o]),b=j.useMemo(()=>{if(t===o.pathname+o.search+o.hash)return[];let C=new Set,N=!1;if(a.forEach(z=>{let T=u.routes[z.route.id];!T||!T.hasLoader||(!y.some(k=>k.route.id===z.route.id)&&z.route.id in p&&f[z.route.id]?.shouldRevalidate||T.hasClientLoader?N=!0:C.add(z.route.id))}),C.size===0)return[];let E=dN(t,m,c.unstable_trailingSlashAwareDataRequests,"data");return N&&C.size>0&&E.searchParams.set("_routes",a.filter(z=>C.has(z.route.id)).map(z=>z.route.id).join(",")),[E.pathname+E.search]},[m,c.unstable_trailingSlashAwareDataRequests,p,o,u,y,a,t,f]),S=j.useMemo(()=>pN(x,u),[x,u]),_=jN(x);return j.createElement(j.Fragment,null,b.map(C=>j.createElement("link",{key:C,rel:"prefetch",as:"fetch",href:C,...s})),S.map(C=>j.createElement("link",{key:C,rel:"modulepreload",href:C,...s})),_.map(({key:C,link:N})=>j.createElement("link",{key:C,nonce:s.nonce,...N})))}function SN(...t){return a=>{t.forEach(s=>{typeof s=="function"?s(a):s!=null&&(s.current=a)})}}var _N=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{_N&&(window.__reactRouterVersion="7.12.0")}catch{}function EN({basename:t,children:a,unstable_useTransitions:s,window:o}){let c=j.useRef();c.current==null&&(c.current=tj({window:o,v5Compat:!0}));let u=c.current,[f,m]=j.useState({action:u.action,location:u.location}),p=j.useCallback(g=>{s===!1?m(g):j.startTransition(()=>m(g))},[s]);return j.useLayoutEffect(()=>u.listen(p),[u,p]),j.createElement(eN,{basename:t,children:a,location:f.location,navigationType:f.action,navigator:u,unstable_useTransitions:s})}var xb=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,As=j.forwardRef(function({onClick:a,discover:s="render",prefetch:o="none",relative:c,reloadDocument:u,replace:f,state:m,target:p,to:g,preventScrollReset:y,viewTransition:x,unstable_defaultShouldRevalidate:b,...S},_){let{basename:C,unstable_useTransitions:N}=j.useContext(Zt),E=typeof g=="string"&&xb.test(g),z=ib(g,C);g=z.to;let T=Oj(g,{relative:c}),[k,w,R]=vN(o,S),M=MN(g,{replace:f,state:m,target:p,preventScrollReset:y,relative:c,viewTransition:x,unstable_defaultShouldRevalidate:b,unstable_useTransitions:N});function q(G){a&&a(G),G.defaultPrevented||M(G)}let $=j.createElement("a",{...S,...R,href:z.absoluteURL||T,onClick:z.isExternal||u?a:q,ref:SN(_,w),target:p,"data-discover":!E&&s==="render"?"true":void 0});return k&&!E?j.createElement(j.Fragment,null,$,j.createElement(wN,{page:T})):$});As.displayName="Link";var yb=j.forwardRef(function({"aria-current":a="page",caseSensitive:s=!1,className:o="",end:c=!1,style:u,to:f,viewTransition:m,children:p,...g},y){let x=vo(f,{relative:g.relative}),b=ba(),S=j.useContext(Zc),{navigator:_,basename:C}=j.useContext(Zt),N=S!=null&&ON(x)&&m===!0,E=_.encodeLocation?_.encodeLocation(x).pathname:x.pathname,z=b.pathname,T=S&&S.navigation&&S.navigation.location?S.navigation.location.pathname:null;s||(z=z.toLowerCase(),T=T?T.toLowerCase():null,E=E.toLowerCase()),T&&C&&(T=ga(T,C)||T);const k=E!=="/"&&E.endsWith("/")?E.length-1:E.length;let w=z===E||!c&&z.startsWith(E)&&z.charAt(k)==="/",R=T!=null&&(T===E||!c&&T.startsWith(E)&&T.charAt(E.length)==="/"),M={isActive:w,isPending:R,isTransitioning:N},q=w?a:void 0,$;typeof o=="function"?$=o(M):$=[o,w?"active":null,R?"pending":null,N?"transitioning":null].filter(Boolean).join(" ");let G=typeof u=="function"?u(M):u;return j.createElement(As,{...g,"aria-current":q,className:$,ref:y,style:G,to:f,viewTransition:m},typeof p=="function"?p(M):p)});yb.displayName="NavLink";var CN=j.forwardRef(({discover:t="render",fetcherKey:a,navigate:s,reloadDocument:o,replace:c,state:u,method:f=yc,action:m,onSubmit:p,relative:g,preventScrollReset:y,viewTransition:x,unstable_defaultShouldRevalidate:b,...S},_)=>{let{unstable_useTransitions:C}=j.useContext(Zt),N=RN(),E=DN(m,{relative:g}),z=f.toLowerCase()==="get"?"get":"post",T=typeof m=="string"&&xb.test(m),k=w=>{if(p&&p(w),w.defaultPrevented)return;w.preventDefault();let R=w.nativeEvent.submitter,M=R?.getAttribute("formmethod")||f,q=()=>N(R||w.currentTarget,{fetcherKey:a,method:M,navigate:s,replace:c,state:u,relative:g,preventScrollReset:y,viewTransition:x,unstable_defaultShouldRevalidate:b});C&&s!==!1?j.startTransition(()=>q()):q()};return j.createElement("form",{ref:_,method:z,action:E,onSubmit:o?p:k,...S,"data-discover":!T&&t==="render"?"true":void 0})});CN.displayName="Form";function TN(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function bb(t){let a=j.useContext(Qr);return Fe(a,TN(t)),a}function MN(t,{target:a,replace:s,state:o,preventScrollReset:c,relative:u,viewTransition:f,unstable_defaultShouldRevalidate:m,unstable_useTransitions:p}={}){let g=$s(),y=ba(),x=vo(t,{relative:u});return j.useCallback(b=>{if(iN(b,a)){b.preventDefault();let S=s!==void 0?s:io(y)===io(x),_=()=>g(t,{replace:S,state:o,preventScrollReset:c,relative:u,viewTransition:f,unstable_defaultShouldRevalidate:m});p?j.startTransition(()=>_()):_()}},[y,g,x,s,o,a,t,c,u,f,m,p])}function AN(t){Gt(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let a=j.useRef(ch(t)),s=j.useRef(!1),o=ba(),c=j.useMemo(()=>oN(o.search,s.current?null:a.current),[o.search]),u=$s(),f=j.useCallback((m,p)=>{const g=ch(typeof m=="function"?m(new URLSearchParams(c)):m);s.current=!0,u("?"+g,p)},[u,c]);return[c,f]}var kN=0,zN=()=>`__${String(++kN)}__`;function RN(){let{router:t}=bb("useSubmit"),{basename:a}=j.useContext(Zt),s=Zj(),o=t.fetch,c=t.navigate;return j.useCallback(async(u,f={})=>{let{action:m,method:p,encType:g,formData:y,body:x}=uN(u,a);if(f.navigate===!1){let b=f.fetcherKey||zN();await o(b,s,f.action||m,{unstable_defaultShouldRevalidate:f.unstable_defaultShouldRevalidate,preventScrollReset:f.preventScrollReset,formData:y,body:x,formMethod:f.method||p,formEncType:f.encType||g,flushSync:f.flushSync})}else await c(f.action||m,{unstable_defaultShouldRevalidate:f.unstable_defaultShouldRevalidate,preventScrollReset:f.preventScrollReset,formData:y,body:x,formMethod:f.method||p,formEncType:f.encType||g,replace:f.replace,state:f.state,fromRouteId:s,flushSync:f.flushSync,viewTransition:f.viewTransition})},[o,c,a,s])}function DN(t,{relative:a}={}){let{basename:s}=j.useContext(Zt),o=j.useContext(cn);Fe(o,"useFormAction must be used inside a RouteContext");let[c]=o.matches.slice(-1),u={...vo(t||".",{relative:a})},f=ba();if(t==null){u.search=f.search;let m=new URLSearchParams(u.search),p=m.getAll("index");if(p.some(y=>y==="")){m.delete("index"),p.filter(x=>x).forEach(x=>m.append("index",x));let y=m.toString();u.search=y?`?${y}`:""}}return(!t||t===".")&&c.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),s!=="/"&&(u.pathname=u.pathname==="/"?s:pa([s,u.pathname])),io(u)}function ON(t,{relative:a}={}){let s=j.useContext(lb);Fe(s!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:o}=bb("useViewTransitionState"),c=vo(t,{relative:a});if(!s.isTransitioning)return!1;let u=ga(s.currentLocation.pathname,o)||s.currentLocation.pathname,f=ga(s.nextLocation.pathname,o)||s.nextLocation.pathname;return Ac(c.pathname,f)!=null||Ac(c.pathname,u)!=null}eb();const vx=t=>{let a;const s=new Set,o=(g,y)=>{const x=typeof g=="function"?g(a):g;if(!Object.is(x,a)){const b=a;a=y??(typeof x!="object"||x===null)?x:Object.assign({},a,x),s.forEach(S=>S(a,b))}},c=()=>a,m={setState:o,getState:c,getInitialState:()=>p,subscribe:g=>(s.add(g),()=>s.delete(g))},p=a=t(o,c,m);return m},BN=(t=>t?vx(t):vx),LN=t=>t;function HN(t,a=LN){const s=Mr.useSyncExternalStore(t.subscribe,Mr.useCallback(()=>a(t.getState()),[t,a]),Mr.useCallback(()=>a(t.getInitialState()),[t,a]));return Mr.useDebugValue(s),s}const wx=t=>{const a=BN(t),s=o=>HN(a,o);return Object.assign(s,a),s},vb=(t=>t?wx(t):wx);function $N(t,a){let s;try{s=t()}catch{return}return{getItem:c=>{var u;const f=p=>p===null?null:JSON.parse(p,void 0),m=(u=s.getItem(c))!=null?u:null;return m instanceof Promise?m.then(f):f(m)},setItem:(c,u)=>s.setItem(c,JSON.stringify(u,void 0)),removeItem:c=>s.removeItem(c)}}const uh=t=>a=>{try{const s=t(a);return s instanceof Promise?s:{then(o){return uh(o)(s)},catch(o){return this}}}catch(s){return{then(o){return this},catch(o){return uh(o)(s)}}}},UN=(t,a)=>(s,o,c)=>{let u={storage:$N(()=>localStorage),partialize:N=>N,version:0,merge:(N,E)=>({...E,...N}),...a},f=!1,m=0;const p=new Set,g=new Set;let y=u.storage;if(!y)return t((...N)=>{console.warn(`[zustand persist middleware] Unable to update item '${u.name}', the given storage is currently unavailable.`),s(...N)},o,c);const x=()=>{const N=u.partialize({...o()});return y.setItem(u.name,{state:N,version:u.version})},b=c.setState;c.setState=(N,E)=>(b(N,E),x());const S=t((...N)=>(s(...N),x()),o,c);c.getInitialState=()=>S;let _;const C=()=>{var N,E;if(!y)return;const z=++m;f=!1,p.forEach(k=>{var w;return k((w=o())!=null?w:S)});const T=((E=u.onRehydrateStorage)==null?void 0:E.call(u,(N=o())!=null?N:S))||void 0;return uh(y.getItem.bind(y))(u.name).then(k=>{if(k)if(typeof k.version=="number"&&k.version!==u.version){if(u.migrate){const w=u.migrate(k.state,k.version);return w instanceof Promise?w.then(R=>[!0,R]):[!0,w]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,k.state];return[!1,void 0]}).then(k=>{var w;if(z!==m)return;const[R,M]=k;if(_=u.merge(M,(w=o())!=null?w:S),s(_,!0),R)return x()}).then(()=>{z===m&&(T?.(_,void 0),_=o(),f=!0,g.forEach(k=>k(_)))}).catch(k=>{z===m&&T?.(void 0,k)})};return c.persist={setOptions:N=>{u={...u,...N},N.storage&&(y=N.storage)},clearStorage:()=>{y?.removeItem(u.name)},getOptions:()=>u,rehydrate:()=>C(),hasHydrated:()=>f,onHydrate:N=>(p.add(N),()=>{p.delete(N)}),onFinishHydration:N=>(g.add(N),()=>{g.delete(N)})},u.skipHydration||C(),_||S},qN=UN,Mt=vb(qN(t=>({user:null,agent:null,token:null,basicToken:null,isAuthenticated:!1,login:(a,s,o)=>{t({user:a,agent:a,token:s,basicToken:o,isAuthenticated:!0})},logout:()=>{t({user:null,agent:null,token:null,basicToken:null,isAuthenticated:!1})}}),{name:"auth-storage"}));const VN=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),YN=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(a,s,o)=>o?o.toUpperCase():s.toLowerCase()),jx=t=>{const a=YN(t);return a.charAt(0).toUpperCase()+a.slice(1)},wb=(...t)=>t.filter((a,s,o)=>!!a&&a.trim()!==""&&o.indexOf(a)===s).join(" ").trim(),PN=t=>{for(const a in t)if(a.startsWith("aria-")||a==="role"||a==="title")return!0};var XN={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const IN=j.forwardRef(({color:t="currentColor",size:a=24,strokeWidth:s=2,absoluteStrokeWidth:o,className:c="",children:u,iconNode:f,...m},p)=>j.createElement("svg",{ref:p,...XN,width:a,height:a,stroke:t,strokeWidth:o?Number(s)*24/Number(a):s,className:wb("lucide",c),...!u&&!PN(m)&&{"aria-hidden":"true"},...m},[...f.map(([g,y])=>j.createElement(g,y)),...Array.isArray(u)?u:[u]]));const ge=(t,a)=>{const s=j.forwardRef(({className:o,...c},u)=>j.createElement(IN,{ref:u,iconNode:a,className:wb(`lucide-${VN(jx(t))}`,`lucide-${t}`,o),...c}));return s.displayName=jx(t),s};const GN=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],zs=ge("activity",GN);const QN=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],ZN=ge("arrow-left",QN);const FN=[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]],qh=ge("arrow-right-left",FN);const WN=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],KN=ge("arrow-right",WN);const JN=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],Vh=ge("book-open",JN);const eS=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],Yh=ge("bot",eS);const tS=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],zr=ge("brain",tS);const nS=[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]],Lr=ge("building-2",nS);const aS=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],Ph=ge("chart-column",aS);const sS=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],bn=ge("check",sS);const rS=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],iS=ge("chevron-left",rS);const oS=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Xh=ge("chevron-right",oS);const lS=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],zc=ge("circle-check-big",lS);const cS=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Ih=ge("circle-x",cS);const uS=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Rc=ge("clock",uS);const dS=[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]],Nx=ge("code",dS);const fS=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],jb=ge("dollar-sign",fS);const hS=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],mS=ge("download",hS);const pS=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],gS=ge("eye-off",pS);const xS=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Gh=ge("eye",xS);const yS=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Qh=ge("file-text",yS);const bS=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],Zh=ge("funnel",bS);const vS=[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]],Nb=ge("git-branch",vS);const wS=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],jS=ge("heart",wS);const NS=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],SS=ge("image",NS);const _S=[["polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12",key:"o97t9d"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}]],Sb=ge("inbox",_S);const ES=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],CS=ge("key",ES);const TS=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],MS=ge("layout-dashboard",TS);const AS=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],kS=ge("log-out",AS);const zS=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],RS=ge("map-pin",zS);const DS=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],Ln=ge("message-square",DS);const OS=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]],BS=ge("mic",OS);const LS=[["path",{d:"M5 12h14",key:"1ays0h"}]],HS=ge("minus",LS);const $S=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],US=ge("pen-line",$S);const qS=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],Wc=ge("phone",qS);const VS=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],Sx=ge("play",VS);const YS=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Fh=ge("plus",YS);const PS=[["path",{d:"M16.247 7.761a6 6 0 0 1 0 8.478",key:"1fwjs5"}],["path",{d:"M19.075 4.933a10 10 0 0 1 0 14.134",key:"ehdyv1"}],["path",{d:"M4.925 19.067a10 10 0 0 1 0-14.134",key:"1q22gi"}],["path",{d:"M7.753 16.239a6 6 0 0 1 0-8.478",key:"r2q7qm"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],XS=ge("radio",PS);const IS=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],wo=ge("refresh-cw",IS);const GS=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],QS=ge("rotate-ccw",GS);const ZS=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],FS=ge("save",ZS);const WS=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],_b=ge("search",WS);const KS=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Eb=ge("send",KS);const JS=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],e4=ge("shield",JS);const t4=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],dh=ge("sparkles",t4);const n4=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Kc=ge("square-pen",n4);const a4=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],s4=ge("tag",a4);const r4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],i4=ge("target",r4);const o4=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],jo=ge("trash-2",o4);const l4=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],Dc=ge("trending-up",l4);const c4=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],eo=ge("triangle-alert",c4);const u4=[["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m14.305 16.53.923-.382",key:"1itpsq"}],["path",{d:"m15.228 13.852-.923-.383",key:"eplpkm"}],["path",{d:"m16.852 12.228-.383-.923",key:"13v3q0"}],["path",{d:"m16.852 17.772-.383.924",key:"1i8mnm"}],["path",{d:"m19.148 12.228.383-.923",key:"1q8j1v"}],["path",{d:"m19.53 18.696-.382-.924",key:"vk1qj3"}],["path",{d:"m20.772 13.852.924-.383",key:"n880s0"}],["path",{d:"m20.772 16.148.924.383",key:"1g6xey"}],["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],d4=ge("user-cog",u4);const f4=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],Hr=ge("user-plus",f4);const h4=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Rr=ge("user",h4);const m4=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Jc=ge("users",m4);const p4=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],es=ge("x",p4);const g4=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],x4=ge("zap",g4);function y4(){const t=$s(),{agent:a,logout:s}=Mt(),o=a?.role==="supervisor",c=[{to:"/dashboard",icon:MS,label:"Dashboard"},{to:"/conversations",icon:Ln,label:"Conversaciones"},...o?[{to:"/agents",icon:d4,label:"Agentes"},{to:"/departments",icon:Lr,label:"Departamentos"},{to:"/flows",icon:Nb,label:"Flujos"},{to:"/logs",icon:zs,label:"Logs"},{to:"/leads",icon:Jc,label:"Leads"},{to:"/analytics",icon:Ph,label:"Analytics"},{to:"/monitor",icon:XS,label:"Monitor"},{to:"/learning",icon:zr,label:"Cerebro IA"}]:[]],u=()=>{s(),t("/login")},f=o?"Supervisor":"Agente";return i.jsxs("div",{className:"min-h-screen bg-gray-50 flex",children:[i.jsxs("aside",{className:"w-64 bg-white border-r border-gray-200 flex flex-col",children:[i.jsxs("div",{className:"h-16 flex items-center gap-3 px-6 border-b border-gray-200",children:[i.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-indigo-500 to-blue-600 rounded-xl flex items-center justify-center",children:i.jsx(Yh,{className:"w-6 h-6 text-white"})}),i.jsxs("div",{children:[i.jsx("h1",{className:"font-bold text-gray-800",children:"Chat Platform"}),i.jsx("p",{className:"text-xs text-gray-400",children:"Respaldos Chile"})]})]}),i.jsx("nav",{className:"flex-1 p-4 space-y-1",children:c.map(({to:m,icon:p,label:g})=>i.jsxs(yb,{to:m,className:({isActive:y})=>`flex items-center gap-3 px-4 py-3 rounded-lg transition ${y?"bg-indigo-50 text-indigo-600 font-medium":"text-gray-600 hover:bg-gray-100"}`,children:[i.jsx(p,{className:"w-5 h-5"}),i.jsx("span",{children:g})]},m))}),i.jsx("div",{className:"p-4 border-t border-gray-200",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center",style:{backgroundColor:a?.avatarColor||"#6366f1"},children:i.jsx("span",{className:"text-white font-medium text-sm",children:a?.name?.[0]?.toUpperCase()||a?.username?.[0]?.toUpperCase()||"A"})}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-gray-800 text-sm",children:a?.name||a?.username||"Admin"}),i.jsx("p",{className:"text-xs text-gray-400",children:f})]})]}),i.jsx("button",{onClick:u,className:"p-2 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded-lg transition",title:"Cerrar sesion",children:i.jsx(kS,{className:"w-5 h-5"})})]})})]}),i.jsx("main",{className:"flex-1 overflow-auto",children:i.jsx(Jj,{})})]})}async function b4(t,a){const s=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:t,password:a})});if(!s.ok){const c=await s.json().catch(()=>({}));throw new Error(c.error||"Credenciales invlidas")}const o=await s.json();return{agent:o.agent,token:o.token,basicToken:o.basicToken}}function v4(){const[t,a]=j.useState(""),[s,o]=j.useState(""),[c,u]=j.useState(""),[f,m]=j.useState(!1),p=$s(),g=Mt(x=>x.login),y=async x=>{x.preventDefault(),u(""),m(!0);try{const{agent:b,token:S,basicToken:_}=await b4(t,s);g(b,S,_),p("/dashboard")}catch(b){u(b.message||"Error al iniciar sesin")}finally{m(!1)}};return i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 flex items-center justify-center p-5",children:i.jsxs("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-md p-10",children:[i.jsxs("div",{className:"text-center mb-8",children:[i.jsx("div",{className:"w-18 h-18 bg-gradient-to-br from-indigo-500 to-blue-600 rounded-2xl flex items-center justify-center mx-auto mb-5 p-4",children:i.jsx("svg",{className:"w-11 h-11 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})})}),i.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Chat Platform"}),i.jsx("p",{className:"text-gray-500 text-sm",children:"Ingresa tus credenciales para continuar"})]}),i.jsxs("form",{onSubmit:y,children:[c&&i.jsx("div",{className:"bg-red-50 text-red-600 px-4 py-3 rounded-xl text-sm mb-5 border border-red-200",children:c}),i.jsxs("div",{className:"mb-5",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Usuario"}),i.jsx("input",{type:"text",value:t,onChange:x=>a(x.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl text-base outline-none transition-colors focus:border-indigo-500",placeholder:"admin",required:!0})]}),i.jsxs("div",{className:"mb-6",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Contrasea"}),i.jsx("input",{type:"password",value:s,onChange:x=>o(x.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl text-base outline-none transition-colors focus:border-indigo-500",placeholder:"",required:!0})]}),i.jsx("button",{type:"submit",disabled:f,className:"w-full bg-gradient-to-r from-indigo-500 to-blue-600 hover:from-indigo-600 hover:to-blue-700 text-white font-semibold py-3.5 px-5 rounded-xl text-base transition-all shadow-lg shadow-indigo-500/30 disabled:opacity-60 disabled:cursor-not-allowed",children:f?"Ingresando...":"Ingresar"})]}),i.jsx("p",{className:"text-center text-gray-400 text-xs mt-8",children:"Respaldos Chile  2025"})]})})}const No=()=>{const t=Mt.getState().token;return{"Content-Type":"application/json",...t?{Authorization:`Bearer ${t}`}:{}}};async function Cb(t,a){const s=new URLSearchParams;t&&s.set("filter",t);const o=s.toString(),c=await fetch(`/api/chat/conversations${o?"?"+o:""}`,{headers:No()});if(!c.ok)throw new Error("Error loading conversations");return c.json()}async function w4(t){const a=await fetch(`/api/chat/conversations/${encodeURIComponent(t)}`,{headers:No()});if(!a.ok)throw new Error("Error loading conversation");return a.json()}async function j4(t,a){const s=await fetch("/api/chat/send",{method:"POST",headers:No(),body:JSON.stringify({to:t,message:a})});if(!s.ok)throw new Error("Error sending message");return s.json()}async function _x(t){const a=await fetch("/api/chat/mark-read",{method:"POST",headers:No(),body:JSON.stringify({phone:t})});if(!a.ok)throw new Error("Error marking as read");return a.json()}async function N4(){const t=await fetch("/api/chatbot/stats",{headers:No()});if(!t.ok)throw new Error("Error loading stats");return t.json()}function ln({title:t,value:a,icon:s,color:o="green",subtitle:c}){const u={green:"bg-green-50 text-green-600",blue:"bg-blue-50 text-blue-600",yellow:"bg-yellow-50 text-yellow-600",purple:"bg-purple-50 text-purple-600",red:"bg-red-50 text-red-600"};return i.jsx("div",{className:"bg-white rounded-xl p-6 border border-gray-100 shadow-sm",children:i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-500 font-medium",children:t}),i.jsx("p",{className:"text-3xl font-bold text-gray-800 mt-2",children:a}),c&&i.jsx("p",{className:"text-xs text-gray-400 mt-1",children:c})]}),s&&i.jsx("div",{className:`p-3 rounded-xl ${u[o]}`,children:i.jsx(s,{className:"w-6 h-6"})})]})})}const Tb=6048e5,S4=864e5,ac=43200,Ex=1440,Cx=Symbol.for("constructDateFrom");function xa(t,a){return typeof t=="function"?t(a):t&&typeof t=="object"&&Cx in t?t[Cx](a):t instanceof Date?new t.constructor(a):new Date(a)}function pt(t,a){return xa(a||t,t)}let _4={};function So(){return _4}function oo(t,a){const s=So(),o=a?.weekStartsOn??a?.locale?.options?.weekStartsOn??s.weekStartsOn??s.locale?.options?.weekStartsOn??0,c=pt(t,a?.in),u=c.getDay(),f=(u<o?7:0)+u-o;return c.setDate(c.getDate()-f),c.setHours(0,0,0,0),c}function Oc(t,a){return oo(t,{...a,weekStartsOn:1})}function Mb(t,a){const s=pt(t,a?.in),o=s.getFullYear(),c=xa(s,0);c.setFullYear(o+1,0,4),c.setHours(0,0,0,0);const u=Oc(c),f=xa(s,0);f.setFullYear(o,0,4),f.setHours(0,0,0,0);const m=Oc(f);return s.getTime()>=u.getTime()?o+1:s.getTime()>=m.getTime()?o:o-1}function Bc(t){const a=pt(t),s=new Date(Date.UTC(a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes(),a.getSeconds(),a.getMilliseconds()));return s.setUTCFullYear(a.getFullYear()),+t-+s}function eu(t,...a){const s=xa.bind(null,t||a.find(o=>typeof o=="object"));return a.map(s)}function Tx(t,a){const s=pt(t,a?.in);return s.setHours(0,0,0,0),s}function E4(t,a,s){const[o,c]=eu(s?.in,t,a),u=Tx(o),f=Tx(c),m=+u-Bc(u),p=+f-Bc(f);return Math.round((m-p)/S4)}function C4(t,a){const s=Mb(t,a),o=xa(t,0);return o.setFullYear(s,0,4),o.setHours(0,0,0,0),Oc(o)}function vc(t,a){const s=+pt(t)-+pt(a);return s<0?-1:s>0?1:s}function T4(t){return xa(t,Date.now())}function M4(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function A4(t){return!(!M4(t)&&typeof t!="number"||isNaN(+pt(t)))}function k4(t,a,s){const[o,c]=eu(s?.in,t,a),u=o.getFullYear()-c.getFullYear(),f=o.getMonth()-c.getMonth();return u*12+f}function z4(t){return a=>{const o=(t?Math[t]:Math.trunc)(a);return o===0?0:o}}function R4(t,a){return+pt(t)-+pt(a)}function D4(t,a){const s=pt(t,a?.in);return s.setHours(23,59,59,999),s}function O4(t,a){const s=pt(t,a?.in),o=s.getMonth();return s.setFullYear(s.getFullYear(),o+1,0),s.setHours(23,59,59,999),s}function B4(t,a){const s=pt(t,a?.in);return+D4(s,a)==+O4(s,a)}function L4(t,a,s){const[o,c,u]=eu(s?.in,t,t,a),f=vc(c,u),m=Math.abs(k4(c,u));if(m<1)return 0;c.getMonth()===1&&c.getDate()>27&&c.setDate(30),c.setMonth(c.getMonth()-f*m);let p=vc(c,u)===-f;B4(o)&&m===1&&vc(o,u)===1&&(p=!1);const g=f*(m-+p);return g===0?0:g}function H4(t,a,s){const o=R4(t,a)/1e3;return z4(s?.roundingMethod)(o)}function $4(t,a){const s=pt(t,a?.in);return s.setFullYear(s.getFullYear(),0,1),s.setHours(0,0,0,0),s}const U4={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},q4=(t,a,s)=>{let o;const c=U4[t];return typeof c=="string"?o=c:a===1?o=c.one:o=c.other.replace("{{count}}",a.toString()),s?.addSuffix?s.comparison&&s.comparison>0?"in "+o:o+" ago":o};function Dr(t){return(a={})=>{const s=a.width?String(a.width):t.defaultWidth;return t.formats[s]||t.formats[t.defaultWidth]}}const V4={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Y4={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},P4={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},X4={date:Dr({formats:V4,defaultWidth:"full"}),time:Dr({formats:Y4,defaultWidth:"full"}),dateTime:Dr({formats:P4,defaultWidth:"full"})},I4={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},G4=(t,a,s,o)=>I4[t];function Rn(t){return(a,s)=>{const o=s?.context?String(s.context):"standalone";let c;if(o==="formatting"&&t.formattingValues){const f=t.defaultFormattingWidth||t.defaultWidth,m=s?.width?String(s.width):f;c=t.formattingValues[m]||t.formattingValues[f]}else{const f=t.defaultWidth,m=s?.width?String(s.width):t.defaultWidth;c=t.values[m]||t.values[f]}const u=t.argumentCallback?t.argumentCallback(a):a;return c[u]}}const Q4={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Z4={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},F4={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},W4={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},K4={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},J4={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},e5=(t,a)=>{const s=Number(t),o=s%100;if(o>20||o<10)switch(o%10){case 1:return s+"st";case 2:return s+"nd";case 3:return s+"rd"}return s+"th"},t5={ordinalNumber:e5,era:Rn({values:Q4,defaultWidth:"wide"}),quarter:Rn({values:Z4,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Rn({values:F4,defaultWidth:"wide"}),day:Rn({values:W4,defaultWidth:"wide"}),dayPeriod:Rn({values:K4,defaultWidth:"wide",formattingValues:J4,defaultFormattingWidth:"wide"})};function Dn(t){return(a,s={})=>{const o=s.width,c=o&&t.matchPatterns[o]||t.matchPatterns[t.defaultMatchWidth],u=a.match(c);if(!u)return null;const f=u[0],m=o&&t.parsePatterns[o]||t.parsePatterns[t.defaultParseWidth],p=Array.isArray(m)?a5(m,x=>x.test(f)):n5(m,x=>x.test(f));let g;g=t.valueCallback?t.valueCallback(p):p,g=s.valueCallback?s.valueCallback(g):g;const y=a.slice(f.length);return{value:g,rest:y}}}function n5(t,a){for(const s in t)if(Object.prototype.hasOwnProperty.call(t,s)&&a(t[s]))return s}function a5(t,a){for(let s=0;s<t.length;s++)if(a(t[s]))return s}function Ab(t){return(a,s={})=>{const o=a.match(t.matchPattern);if(!o)return null;const c=o[0],u=a.match(t.parsePattern);if(!u)return null;let f=t.valueCallback?t.valueCallback(u[0]):u[0];f=s.valueCallback?s.valueCallback(f):f;const m=a.slice(c.length);return{value:f,rest:m}}}const s5=/^(\d+)(th|st|nd|rd)?/i,r5=/\d+/i,i5={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},o5={any:[/^b/i,/^(a|c)/i]},l5={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},c5={any:[/1/i,/2/i,/3/i,/4/i]},u5={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},d5={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},f5={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},h5={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},m5={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},p5={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},g5={ordinalNumber:Ab({matchPattern:s5,parsePattern:r5,valueCallback:t=>parseInt(t,10)}),era:Dn({matchPatterns:i5,defaultMatchWidth:"wide",parsePatterns:o5,defaultParseWidth:"any"}),quarter:Dn({matchPatterns:l5,defaultMatchWidth:"wide",parsePatterns:c5,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Dn({matchPatterns:u5,defaultMatchWidth:"wide",parsePatterns:d5,defaultParseWidth:"any"}),day:Dn({matchPatterns:f5,defaultMatchWidth:"wide",parsePatterns:h5,defaultParseWidth:"any"}),dayPeriod:Dn({matchPatterns:m5,defaultMatchWidth:"any",parsePatterns:p5,defaultParseWidth:"any"})},kb={code:"en-US",formatDistance:q4,formatLong:X4,formatRelative:G4,localize:t5,match:g5,options:{weekStartsOn:0,firstWeekContainsDate:1}};function x5(t,a){const s=pt(t,a?.in);return E4(s,$4(s))+1}function y5(t,a){const s=pt(t,a?.in),o=+Oc(s)-+C4(s);return Math.round(o/Tb)+1}function zb(t,a){const s=pt(t,a?.in),o=s.getFullYear(),c=So(),u=a?.firstWeekContainsDate??a?.locale?.options?.firstWeekContainsDate??c.firstWeekContainsDate??c.locale?.options?.firstWeekContainsDate??1,f=xa(a?.in||t,0);f.setFullYear(o+1,0,u),f.setHours(0,0,0,0);const m=oo(f,a),p=xa(a?.in||t,0);p.setFullYear(o,0,u),p.setHours(0,0,0,0);const g=oo(p,a);return+s>=+m?o+1:+s>=+g?o:o-1}function b5(t,a){const s=So(),o=a?.firstWeekContainsDate??a?.locale?.options?.firstWeekContainsDate??s.firstWeekContainsDate??s.locale?.options?.firstWeekContainsDate??1,c=zb(t,a),u=xa(a?.in||t,0);return u.setFullYear(c,0,o),u.setHours(0,0,0,0),oo(u,a)}function v5(t,a){const s=pt(t,a?.in),o=+oo(s,a)-+b5(s,a);return Math.round(o/Tb)+1}function Ve(t,a){const s=t<0?"-":"",o=Math.abs(t).toString().padStart(a,"0");return s+o}const Fa={y(t,a){const s=t.getFullYear(),o=s>0?s:1-s;return Ve(a==="yy"?o%100:o,a.length)},M(t,a){const s=t.getMonth();return a==="M"?String(s+1):Ve(s+1,2)},d(t,a){return Ve(t.getDate(),a.length)},a(t,a){const s=t.getHours()/12>=1?"pm":"am";switch(a){case"a":case"aa":return s.toUpperCase();case"aaa":return s;case"aaaaa":return s[0];default:return s==="am"?"a.m.":"p.m."}},h(t,a){return Ve(t.getHours()%12||12,a.length)},H(t,a){return Ve(t.getHours(),a.length)},m(t,a){return Ve(t.getMinutes(),a.length)},s(t,a){return Ve(t.getSeconds(),a.length)},S(t,a){const s=a.length,o=t.getMilliseconds(),c=Math.trunc(o*Math.pow(10,s-3));return Ve(c,a.length)}},Er={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Mx={G:function(t,a,s){const o=t.getFullYear()>0?1:0;switch(a){case"G":case"GG":case"GGG":return s.era(o,{width:"abbreviated"});case"GGGGG":return s.era(o,{width:"narrow"});default:return s.era(o,{width:"wide"})}},y:function(t,a,s){if(a==="yo"){const o=t.getFullYear(),c=o>0?o:1-o;return s.ordinalNumber(c,{unit:"year"})}return Fa.y(t,a)},Y:function(t,a,s,o){const c=zb(t,o),u=c>0?c:1-c;if(a==="YY"){const f=u%100;return Ve(f,2)}return a==="Yo"?s.ordinalNumber(u,{unit:"year"}):Ve(u,a.length)},R:function(t,a){const s=Mb(t);return Ve(s,a.length)},u:function(t,a){const s=t.getFullYear();return Ve(s,a.length)},Q:function(t,a,s){const o=Math.ceil((t.getMonth()+1)/3);switch(a){case"Q":return String(o);case"QQ":return Ve(o,2);case"Qo":return s.ordinalNumber(o,{unit:"quarter"});case"QQQ":return s.quarter(o,{width:"abbreviated",context:"formatting"});case"QQQQQ":return s.quarter(o,{width:"narrow",context:"formatting"});default:return s.quarter(o,{width:"wide",context:"formatting"})}},q:function(t,a,s){const o=Math.ceil((t.getMonth()+1)/3);switch(a){case"q":return String(o);case"qq":return Ve(o,2);case"qo":return s.ordinalNumber(o,{unit:"quarter"});case"qqq":return s.quarter(o,{width:"abbreviated",context:"standalone"});case"qqqqq":return s.quarter(o,{width:"narrow",context:"standalone"});default:return s.quarter(o,{width:"wide",context:"standalone"})}},M:function(t,a,s){const o=t.getMonth();switch(a){case"M":case"MM":return Fa.M(t,a);case"Mo":return s.ordinalNumber(o+1,{unit:"month"});case"MMM":return s.month(o,{width:"abbreviated",context:"formatting"});case"MMMMM":return s.month(o,{width:"narrow",context:"formatting"});default:return s.month(o,{width:"wide",context:"formatting"})}},L:function(t,a,s){const o=t.getMonth();switch(a){case"L":return String(o+1);case"LL":return Ve(o+1,2);case"Lo":return s.ordinalNumber(o+1,{unit:"month"});case"LLL":return s.month(o,{width:"abbreviated",context:"standalone"});case"LLLLL":return s.month(o,{width:"narrow",context:"standalone"});default:return s.month(o,{width:"wide",context:"standalone"})}},w:function(t,a,s,o){const c=v5(t,o);return a==="wo"?s.ordinalNumber(c,{unit:"week"}):Ve(c,a.length)},I:function(t,a,s){const o=y5(t);return a==="Io"?s.ordinalNumber(o,{unit:"week"}):Ve(o,a.length)},d:function(t,a,s){return a==="do"?s.ordinalNumber(t.getDate(),{unit:"date"}):Fa.d(t,a)},D:function(t,a,s){const o=x5(t);return a==="Do"?s.ordinalNumber(o,{unit:"dayOfYear"}):Ve(o,a.length)},E:function(t,a,s){const o=t.getDay();switch(a){case"E":case"EE":case"EEE":return s.day(o,{width:"abbreviated",context:"formatting"});case"EEEEE":return s.day(o,{width:"narrow",context:"formatting"});case"EEEEEE":return s.day(o,{width:"short",context:"formatting"});default:return s.day(o,{width:"wide",context:"formatting"})}},e:function(t,a,s,o){const c=t.getDay(),u=(c-o.weekStartsOn+8)%7||7;switch(a){case"e":return String(u);case"ee":return Ve(u,2);case"eo":return s.ordinalNumber(u,{unit:"day"});case"eee":return s.day(c,{width:"abbreviated",context:"formatting"});case"eeeee":return s.day(c,{width:"narrow",context:"formatting"});case"eeeeee":return s.day(c,{width:"short",context:"formatting"});default:return s.day(c,{width:"wide",context:"formatting"})}},c:function(t,a,s,o){const c=t.getDay(),u=(c-o.weekStartsOn+8)%7||7;switch(a){case"c":return String(u);case"cc":return Ve(u,a.length);case"co":return s.ordinalNumber(u,{unit:"day"});case"ccc":return s.day(c,{width:"abbreviated",context:"standalone"});case"ccccc":return s.day(c,{width:"narrow",context:"standalone"});case"cccccc":return s.day(c,{width:"short",context:"standalone"});default:return s.day(c,{width:"wide",context:"standalone"})}},i:function(t,a,s){const o=t.getDay(),c=o===0?7:o;switch(a){case"i":return String(c);case"ii":return Ve(c,a.length);case"io":return s.ordinalNumber(c,{unit:"day"});case"iii":return s.day(o,{width:"abbreviated",context:"formatting"});case"iiiii":return s.day(o,{width:"narrow",context:"formatting"});case"iiiiii":return s.day(o,{width:"short",context:"formatting"});default:return s.day(o,{width:"wide",context:"formatting"})}},a:function(t,a,s){const c=t.getHours()/12>=1?"pm":"am";switch(a){case"a":case"aa":return s.dayPeriod(c,{width:"abbreviated",context:"formatting"});case"aaa":return s.dayPeriod(c,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return s.dayPeriod(c,{width:"narrow",context:"formatting"});default:return s.dayPeriod(c,{width:"wide",context:"formatting"})}},b:function(t,a,s){const o=t.getHours();let c;switch(o===12?c=Er.noon:o===0?c=Er.midnight:c=o/12>=1?"pm":"am",a){case"b":case"bb":return s.dayPeriod(c,{width:"abbreviated",context:"formatting"});case"bbb":return s.dayPeriod(c,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return s.dayPeriod(c,{width:"narrow",context:"formatting"});default:return s.dayPeriod(c,{width:"wide",context:"formatting"})}},B:function(t,a,s){const o=t.getHours();let c;switch(o>=17?c=Er.evening:o>=12?c=Er.afternoon:o>=4?c=Er.morning:c=Er.night,a){case"B":case"BB":case"BBB":return s.dayPeriod(c,{width:"abbreviated",context:"formatting"});case"BBBBB":return s.dayPeriod(c,{width:"narrow",context:"formatting"});default:return s.dayPeriod(c,{width:"wide",context:"formatting"})}},h:function(t,a,s){if(a==="ho"){let o=t.getHours()%12;return o===0&&(o=12),s.ordinalNumber(o,{unit:"hour"})}return Fa.h(t,a)},H:function(t,a,s){return a==="Ho"?s.ordinalNumber(t.getHours(),{unit:"hour"}):Fa.H(t,a)},K:function(t,a,s){const o=t.getHours()%12;return a==="Ko"?s.ordinalNumber(o,{unit:"hour"}):Ve(o,a.length)},k:function(t,a,s){let o=t.getHours();return o===0&&(o=24),a==="ko"?s.ordinalNumber(o,{unit:"hour"}):Ve(o,a.length)},m:function(t,a,s){return a==="mo"?s.ordinalNumber(t.getMinutes(),{unit:"minute"}):Fa.m(t,a)},s:function(t,a,s){return a==="so"?s.ordinalNumber(t.getSeconds(),{unit:"second"}):Fa.s(t,a)},S:function(t,a){return Fa.S(t,a)},X:function(t,a,s){const o=t.getTimezoneOffset();if(o===0)return"Z";switch(a){case"X":return kx(o);case"XXXX":case"XX":return Ts(o);default:return Ts(o,":")}},x:function(t,a,s){const o=t.getTimezoneOffset();switch(a){case"x":return kx(o);case"xxxx":case"xx":return Ts(o);default:return Ts(o,":")}},O:function(t,a,s){const o=t.getTimezoneOffset();switch(a){case"O":case"OO":case"OOO":return"GMT"+Ax(o,":");default:return"GMT"+Ts(o,":")}},z:function(t,a,s){const o=t.getTimezoneOffset();switch(a){case"z":case"zz":case"zzz":return"GMT"+Ax(o,":");default:return"GMT"+Ts(o,":")}},t:function(t,a,s){const o=Math.trunc(+t/1e3);return Ve(o,a.length)},T:function(t,a,s){return Ve(+t,a.length)}};function Ax(t,a=""){const s=t>0?"-":"+",o=Math.abs(t),c=Math.trunc(o/60),u=o%60;return u===0?s+String(c):s+String(c)+a+Ve(u,2)}function kx(t,a){return t%60===0?(t>0?"-":"+")+Ve(Math.abs(t)/60,2):Ts(t,a)}function Ts(t,a=""){const s=t>0?"-":"+",o=Math.abs(t),c=Ve(Math.trunc(o/60),2),u=Ve(o%60,2);return s+c+a+u}const zx=(t,a)=>{switch(t){case"P":return a.date({width:"short"});case"PP":return a.date({width:"medium"});case"PPP":return a.date({width:"long"});default:return a.date({width:"full"})}},Rb=(t,a)=>{switch(t){case"p":return a.time({width:"short"});case"pp":return a.time({width:"medium"});case"ppp":return a.time({width:"long"});default:return a.time({width:"full"})}},w5=(t,a)=>{const s=t.match(/(P+)(p+)?/)||[],o=s[1],c=s[2];if(!c)return zx(t,a);let u;switch(o){case"P":u=a.dateTime({width:"short"});break;case"PP":u=a.dateTime({width:"medium"});break;case"PPP":u=a.dateTime({width:"long"});break;default:u=a.dateTime({width:"full"});break}return u.replace("{{date}}",zx(o,a)).replace("{{time}}",Rb(c,a))},j5={p:Rb,P:w5},N5=/^D+$/,S5=/^Y+$/,_5=["D","DD","YY","YYYY"];function E5(t){return N5.test(t)}function C5(t){return S5.test(t)}function T5(t,a,s){const o=M5(t,a,s);if(console.warn(o),_5.includes(t))throw new RangeError(o)}function M5(t,a,s){const o=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${a}\`) for formatting ${o} to the input \`${s}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const A5=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,k5=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,z5=/^'([^]*?)'?$/,R5=/''/g,D5=/[a-zA-Z]/;function tu(t,a,s){const o=So(),c=s?.locale??o.locale??kb,u=s?.firstWeekContainsDate??s?.locale?.options?.firstWeekContainsDate??o.firstWeekContainsDate??o.locale?.options?.firstWeekContainsDate??1,f=s?.weekStartsOn??s?.locale?.options?.weekStartsOn??o.weekStartsOn??o.locale?.options?.weekStartsOn??0,m=pt(t,s?.in);if(!A4(m))throw new RangeError("Invalid time value");let p=a.match(k5).map(y=>{const x=y[0];if(x==="p"||x==="P"){const b=j5[x];return b(y,c.formatLong)}return y}).join("").match(A5).map(y=>{if(y==="''")return{isToken:!1,value:"'"};const x=y[0];if(x==="'")return{isToken:!1,value:O5(y)};if(Mx[x])return{isToken:!0,value:y};if(x.match(D5))throw new RangeError("Format string contains an unescaped latin alphabet character `"+x+"`");return{isToken:!1,value:y}});c.localize.preprocessor&&(p=c.localize.preprocessor(m,p));const g={firstWeekContainsDate:u,weekStartsOn:f,locale:c};return p.map(y=>{if(!y.isToken)return y.value;const x=y.value;(!s?.useAdditionalWeekYearTokens&&C5(x)||!s?.useAdditionalDayOfYearTokens&&E5(x))&&T5(x,a,String(t));const b=Mx[x[0]];return b(m,x,c.localize,g)}).join("")}function O5(t){const a=t.match(z5);return a?a[1].replace(R5,"'"):t}function B5(t,a,s){const o=So(),c=s?.locale??o.locale??kb,u=2520,f=vc(t,a);if(isNaN(f))throw new RangeError("Invalid time value");const m=Object.assign({},s,{addSuffix:s?.addSuffix,comparison:f}),[p,g]=eu(s?.in,...f>0?[a,t]:[t,a]),y=H4(g,p),x=(Bc(g)-Bc(p))/1e3,b=Math.round((y-x)/60);let S;if(b<2)return s?.includeSeconds?y<5?c.formatDistance("lessThanXSeconds",5,m):y<10?c.formatDistance("lessThanXSeconds",10,m):y<20?c.formatDistance("lessThanXSeconds",20,m):y<40?c.formatDistance("halfAMinute",0,m):y<60?c.formatDistance("lessThanXMinutes",1,m):c.formatDistance("xMinutes",1,m):b===0?c.formatDistance("lessThanXMinutes",1,m):c.formatDistance("xMinutes",b,m);if(b<45)return c.formatDistance("xMinutes",b,m);if(b<90)return c.formatDistance("aboutXHours",1,m);if(b<Ex){const _=Math.round(b/60);return c.formatDistance("aboutXHours",_,m)}else{if(b<u)return c.formatDistance("xDays",1,m);if(b<ac){const _=Math.round(b/Ex);return c.formatDistance("xDays",_,m)}else if(b<ac*2)return S=Math.round(b/ac),c.formatDistance("aboutXMonths",S,m)}if(S=L4(g,p),S<12){const _=Math.round(b/ac);return c.formatDistance("xMonths",_,m)}else{const _=S%12,C=Math.trunc(S/12);return _<3?c.formatDistance("aboutXYears",C,m):_<9?c.formatDistance("overXYears",C,m):c.formatDistance("almostXYears",C+1,m)}}function Fr(t,a){return B5(t,T4(t),a)}const L5={lessThanXSeconds:{one:"menos de un segundo",other:"menos de {{count}} segundos"},xSeconds:{one:"1 segundo",other:"{{count}} segundos"},halfAMinute:"medio minuto",lessThanXMinutes:{one:"menos de un minuto",other:"menos de {{count}} minutos"},xMinutes:{one:"1 minuto",other:"{{count}} minutos"},aboutXHours:{one:"alrededor de 1 hora",other:"alrededor de {{count}} horas"},xHours:{one:"1 hora",other:"{{count}} horas"},xDays:{one:"1 da",other:"{{count}} das"},aboutXWeeks:{one:"alrededor de 1 semana",other:"alrededor de {{count}} semanas"},xWeeks:{one:"1 semana",other:"{{count}} semanas"},aboutXMonths:{one:"alrededor de 1 mes",other:"alrededor de {{count}} meses"},xMonths:{one:"1 mes",other:"{{count}} meses"},aboutXYears:{one:"alrededor de 1 ao",other:"alrededor de {{count}} aos"},xYears:{one:"1 ao",other:"{{count}} aos"},overXYears:{one:"ms de 1 ao",other:"ms de {{count}} aos"},almostXYears:{one:"casi 1 ao",other:"casi {{count}} aos"}},H5=(t,a,s)=>{let o;const c=L5[t];return typeof c=="string"?o=c:a===1?o=c.one:o=c.other.replace("{{count}}",a.toString()),s?.addSuffix?s.comparison&&s.comparison>0?"en "+o:"hace "+o:o},$5={full:"EEEE, d 'de' MMMM 'de' y",long:"d 'de' MMMM 'de' y",medium:"d MMM y",short:"dd/MM/y"},U5={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},q5={full:"{{date}} 'a las' {{time}}",long:"{{date}} 'a las' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},V5={date:Dr({formats:$5,defaultWidth:"full"}),time:Dr({formats:U5,defaultWidth:"full"}),dateTime:Dr({formats:q5,defaultWidth:"full"})},Y5={lastWeek:"'el' eeee 'pasado a la' p",yesterday:"'ayer a la' p",today:"'hoy a la' p",tomorrow:"'maana a la' p",nextWeek:"eeee 'a la' p",other:"P"},P5={lastWeek:"'el' eeee 'pasado a las' p",yesterday:"'ayer a las' p",today:"'hoy a las' p",tomorrow:"'maana a las' p",nextWeek:"eeee 'a las' p",other:"P"},X5=(t,a,s,o)=>a.getHours()!==1?P5[t]:Y5[t],I5={narrow:["AC","DC"],abbreviated:["AC","DC"],wide:["antes de cristo","despus de cristo"]},G5={narrow:["1","2","3","4"],abbreviated:["T1","T2","T3","T4"],wide:["1 trimestre","2 trimestre","3 trimestre","4 trimestre"]},Q5={narrow:["e","f","m","a","m","j","j","a","s","o","n","d"],abbreviated:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"],wide:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"]},Z5={narrow:["d","l","m","m","j","v","s"],short:["do","lu","ma","mi","ju","vi","s"],abbreviated:["dom","lun","mar","mi","jue","vie","sb"],wide:["domingo","lunes","martes","mircoles","jueves","viernes","sbado"]},F5={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"maana",afternoon:"tarde",evening:"tarde",night:"noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"maana",afternoon:"tarde",evening:"tarde",night:"noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"maana",afternoon:"tarde",evening:"tarde",night:"noche"}},W5={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"de la maana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"de la maana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"de la maana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"}},K5=(t,a)=>Number(t)+"",J5={ordinalNumber:K5,era:Rn({values:I5,defaultWidth:"wide"}),quarter:Rn({values:G5,defaultWidth:"wide",argumentCallback:t=>Number(t)-1}),month:Rn({values:Q5,defaultWidth:"wide"}),day:Rn({values:Z5,defaultWidth:"wide"}),dayPeriod:Rn({values:F5,defaultWidth:"wide",formattingValues:W5,defaultFormattingWidth:"wide"})},e3=/^(\d+)()?/i,t3=/\d+/i,n3={narrow:/^(ac|dc|a|d)/i,abbreviated:/^(a\.?\s?c\.?|a\.?\s?e\.?\s?c\.?|d\.?\s?c\.?|e\.?\s?c\.?)/i,wide:/^(antes de cristo|antes de la era com[u]n|despu[e]s de cristo|era com[u]n)/i},a3={any:[/^ac/i,/^dc/i],wide:[/^(antes de cristo|antes de la era com[u]n)/i,/^(despu[e]s de cristo|era com[u]n)/i]},s3={narrow:/^[1234]/i,abbreviated:/^T[1234]/i,wide:/^[1234]()? trimestre/i},r3={any:[/1/i,/2/i,/3/i,/4/i]},i3={narrow:/^[efmajsond]/i,abbreviated:/^(ene|feb|mar|abr|may|jun|jul|ago|sep|oct|nov|dic)/i,wide:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i},o3={narrow:[/^e/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^en/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i]},l3={narrow:/^[dlmjvs]/i,short:/^(do|lu|ma|mi|ju|vi|s[a])/i,abbreviated:/^(dom|lun|mar|mi[e]|jue|vie|s[a]b)/i,wide:/^(domingo|lunes|martes|mi[e]rcoles|jueves|viernes|s[a]bado)/i},c3={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^do/i,/^lu/i,/^ma/i,/^mi/i,/^ju/i,/^vi/i,/^sa/i]},u3={narrow:/^(a|p|mn|md|(de la|a las) (maana|tarde|noche))/i,any:/^([ap]\.?\s?m\.?|medianoche|mediodia|(de la|a las) (maana|tarde|noche))/i},d3={any:{am:/^a/i,pm:/^p/i,midnight:/^mn/i,noon:/^md/i,morning:/maana/i,afternoon:/tarde/i,evening:/tarde/i,night:/noche/i}},f3={ordinalNumber:Ab({matchPattern:e3,parsePattern:t3,valueCallback:function(t){return parseInt(t,10)}}),era:Dn({matchPatterns:n3,defaultMatchWidth:"wide",parsePatterns:a3,defaultParseWidth:"any"}),quarter:Dn({matchPatterns:s3,defaultMatchWidth:"wide",parsePatterns:r3,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Dn({matchPatterns:i3,defaultMatchWidth:"wide",parsePatterns:o3,defaultParseWidth:"any"}),day:Dn({matchPatterns:l3,defaultMatchWidth:"wide",parsePatterns:c3,defaultParseWidth:"any"}),dayPeriod:Dn({matchPatterns:u3,defaultMatchWidth:"any",parsePatterns:d3,defaultParseWidth:"any"})},as={code:"es",formatDistance:H5,formatLong:V5,formatRelative:X5,localize:J5,match:f3,options:{weekStartsOn:1,firstWeekContainsDate:1}};function h3(){const[t,a]=j.useState(null),[s,o]=j.useState([]),[c,u]=j.useState(!0);j.useEffect(()=>{f()},[]);const f=async()=>{try{const[p,g]=await Promise.all([N4(),Cb()]);a(p),o(g.conversations||[])}catch(p){console.error("Error loading dashboard:",p)}finally{u(!1)}};if(c)return i.jsx("div",{className:"p-8 flex items-center justify-center h-full",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-500"})});const m=s.slice(0,5);return i.jsxs("div",{className:"p-8",children:[i.jsxs("div",{className:"mb-8",children:[i.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Dashboard"}),i.jsx("p",{className:"text-gray-500 mt-1",children:"Resumen de tu chatbot de WhatsApp"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[i.jsx(ln,{title:"Conversaciones",value:s.length,icon:Ln,color:"green",subtitle:"Total activas"}),i.jsx(ln,{title:"Usuarios nicos",value:t?.unique_users||0,icon:Jc,color:"blue",subtitle:"ltimos 30 das"}),i.jsx(ln,{title:"Interacciones",value:t?.interactions||0,icon:Yh,color:"purple",subtitle:"Procesadas por el bot"}),i.jsx(ln,{title:"Confianza",value:`${Math.round((t?.avg_confidence||0)*100)}%`,icon:Rc,color:"yellow",subtitle:"Promedio clasificacin"})]}),i.jsxs("div",{className:"bg-white rounded-xl border border-gray-100 shadow-sm",children:[i.jsxs("div",{className:"p-6 border-b border-gray-100 flex items-center justify-between",children:[i.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"Conversaciones Recientes"}),i.jsxs(As,{to:"/conversations",className:"text-green-600 hover:text-green-700 text-sm font-medium flex items-center gap-1",children:["Ver todas ",i.jsx(KN,{className:"w-4 h-4"})]})]}),m.length===0?i.jsxs("div",{className:"p-12 text-center text-gray-400",children:[i.jsx(Ln,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),i.jsx("p",{children:"No hay conversaciones todava"})]}):i.jsx("div",{className:"divide-y divide-gray-100",children:m.map(p=>i.jsxs(As,{to:`/conversations?phone=${encodeURIComponent(p.phone)}`,className:"flex items-center gap-4 p-4 hover:bg-gray-50 transition",children:[i.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center flex-shrink-0",children:i.jsx("span",{className:"text-green-600 font-medium",children:p.contact_name?.[0]?.toUpperCase()||p.phone.slice(-2)})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("p",{className:"font-medium text-gray-800 truncate",children:p.contact_name||p.phone}),i.jsx("span",{className:"text-xs text-gray-400",children:p.last_message_time?Fr(new Date(p.last_message_time),{addSuffix:!0,locale:as}):""})]}),i.jsx("p",{className:"text-sm text-gray-500 truncate mt-1",children:p.last_message||"Sin mensajes"})]}),p.unread_count>0&&i.jsx("span",{className:"bg-green-500 text-white text-xs font-medium px-2 py-1 rounded-full",children:p.unread_count})]},p.phone))})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-8",children:[i.jsxs(As,{to:"/flows",className:"bg-gradient-to-r from-green-500 to-green-600 rounded-xl p-6 text-white hover:from-green-600 hover:to-green-700 transition",children:[i.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Editor de Flujos"}),i.jsx("p",{className:"text-green-100 text-sm",children:"Crea y edita flujos conversacionales de forma visual"})]}),i.jsxs(As,{to:"/conversations",className:"bg-gradient-to-r from-blue-500 to-blue-600 rounded-xl p-6 text-white hover:from-blue-600 hover:to-blue-700 transition",children:[i.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Ver Conversaciones"}),i.jsx("p",{className:"text-blue-100 text-sm",children:"Responde a tus clientes en tiempo real"})]})]})]})}const Hn=Object.create(null);Hn.open="0";Hn.close="1";Hn.ping="2";Hn.pong="3";Hn.message="4";Hn.upgrade="5";Hn.noop="6";const wc=Object.create(null);Object.keys(Hn).forEach(t=>{wc[Hn[t]]=t});const fh={type:"error",data:"parser error"},Db=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",Ob=typeof ArrayBuffer=="function",Bb=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,Wh=({type:t,data:a},s,o)=>Db&&a instanceof Blob?s?o(a):Rx(a,o):Ob&&(a instanceof ArrayBuffer||Bb(a))?s?o(a):Rx(new Blob([a]),o):o(Hn[t]+(a||"")),Rx=(t,a)=>{const s=new FileReader;return s.onload=function(){const o=s.result.split(",")[1];a("b"+(o||""))},s.readAsDataURL(t)};function Dx(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}let Vf;function m3(t,a){if(Db&&t.data instanceof Blob)return t.data.arrayBuffer().then(Dx).then(a);if(Ob&&(t.data instanceof ArrayBuffer||Bb(t.data)))return a(Dx(t.data));Wh(t,!1,s=>{Vf||(Vf=new TextEncoder),a(Vf.encode(s))})}const Ox="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",to=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let t=0;t<Ox.length;t++)to[Ox.charCodeAt(t)]=t;const p3=t=>{let a=t.length*.75,s=t.length,o,c=0,u,f,m,p;t[t.length-1]==="="&&(a--,t[t.length-2]==="="&&a--);const g=new ArrayBuffer(a),y=new Uint8Array(g);for(o=0;o<s;o+=4)u=to[t.charCodeAt(o)],f=to[t.charCodeAt(o+1)],m=to[t.charCodeAt(o+2)],p=to[t.charCodeAt(o+3)],y[c++]=u<<2|f>>4,y[c++]=(f&15)<<4|m>>2,y[c++]=(m&3)<<6|p&63;return g},g3=typeof ArrayBuffer=="function",Kh=(t,a)=>{if(typeof t!="string")return{type:"message",data:Lb(t,a)};const s=t.charAt(0);return s==="b"?{type:"message",data:x3(t.substring(1),a)}:wc[s]?t.length>1?{type:wc[s],data:t.substring(1)}:{type:wc[s]}:fh},x3=(t,a)=>{if(g3){const s=p3(t);return Lb(s,a)}else return{base64:!0,data:t}},Lb=(t,a)=>a==="blob"?t instanceof Blob?t:new Blob([t]):t instanceof ArrayBuffer?t:t.buffer,Hb="",y3=(t,a)=>{const s=t.length,o=new Array(s);let c=0;t.forEach((u,f)=>{Wh(u,!1,m=>{o[f]=m,++c===s&&a(o.join(Hb))})})},b3=(t,a)=>{const s=t.split(Hb),o=[];for(let c=0;c<s.length;c++){const u=Kh(s[c],a);if(o.push(u),u.type==="error")break}return o};function v3(){return new TransformStream({transform(t,a){m3(t,s=>{const o=s.length;let c;if(o<126)c=new Uint8Array(1),new DataView(c.buffer).setUint8(0,o);else if(o<65536){c=new Uint8Array(3);const u=new DataView(c.buffer);u.setUint8(0,126),u.setUint16(1,o)}else{c=new Uint8Array(9);const u=new DataView(c.buffer);u.setUint8(0,127),u.setBigUint64(1,BigInt(o))}t.data&&typeof t.data!="string"&&(c[0]|=128),a.enqueue(c),a.enqueue(s)})}})}let Yf;function sc(t){return t.reduce((a,s)=>a+s.length,0)}function rc(t,a){if(t[0].length===a)return t.shift();const s=new Uint8Array(a);let o=0;for(let c=0;c<a;c++)s[c]=t[0][o++],o===t[0].length&&(t.shift(),o=0);return t.length&&o<t[0].length&&(t[0]=t[0].slice(o)),s}function w3(t,a){Yf||(Yf=new TextDecoder);const s=[];let o=0,c=-1,u=!1;return new TransformStream({transform(f,m){for(s.push(f);;){if(o===0){if(sc(s)<1)break;const p=rc(s,1);u=(p[0]&128)===128,c=p[0]&127,c<126?o=3:c===126?o=1:o=2}else if(o===1){if(sc(s)<2)break;const p=rc(s,2);c=new DataView(p.buffer,p.byteOffset,p.length).getUint16(0),o=3}else if(o===2){if(sc(s)<8)break;const p=rc(s,8),g=new DataView(p.buffer,p.byteOffset,p.length),y=g.getUint32(0);if(y>Math.pow(2,21)-1){m.enqueue(fh);break}c=y*Math.pow(2,32)+g.getUint32(4),o=3}else{if(sc(s)<c)break;const p=rc(s,c);m.enqueue(Kh(u?p:Yf.decode(p),a)),o=0}if(c===0||c>t){m.enqueue(fh);break}}}})}const $b=4;function ct(t){if(t)return j3(t)}function j3(t){for(var a in ct.prototype)t[a]=ct.prototype[a];return t}ct.prototype.on=ct.prototype.addEventListener=function(t,a){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(a),this};ct.prototype.once=function(t,a){function s(){this.off(t,s),a.apply(this,arguments)}return s.fn=a,this.on(t,s),this};ct.prototype.off=ct.prototype.removeListener=ct.prototype.removeAllListeners=ct.prototype.removeEventListener=function(t,a){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var s=this._callbacks["$"+t];if(!s)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var o,c=0;c<s.length;c++)if(o=s[c],o===a||o.fn===a){s.splice(c,1);break}return s.length===0&&delete this._callbacks["$"+t],this};ct.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var a=new Array(arguments.length-1),s=this._callbacks["$"+t],o=1;o<arguments.length;o++)a[o-1]=arguments[o];if(s){s=s.slice(0);for(var o=0,c=s.length;o<c;++o)s[o].apply(this,a)}return this};ct.prototype.emitReserved=ct.prototype.emit;ct.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]};ct.prototype.hasListeners=function(t){return!!this.listeners(t).length};const nu=typeof Promise=="function"&&typeof Promise.resolve=="function"?a=>Promise.resolve().then(a):(a,s)=>s(a,0),on=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),N3="arraybuffer";function Ub(t,...a){return a.reduce((s,o)=>(t.hasOwnProperty(o)&&(s[o]=t[o]),s),{})}const S3=on.setTimeout,_3=on.clearTimeout;function au(t,a){a.useNativeTimers?(t.setTimeoutFn=S3.bind(on),t.clearTimeoutFn=_3.bind(on)):(t.setTimeoutFn=on.setTimeout.bind(on),t.clearTimeoutFn=on.clearTimeout.bind(on))}const E3=1.33;function C3(t){return typeof t=="string"?T3(t):Math.ceil((t.byteLength||t.size)*E3)}function T3(t){let a=0,s=0;for(let o=0,c=t.length;o<c;o++)a=t.charCodeAt(o),a<128?s+=1:a<2048?s+=2:a<55296||a>=57344?s+=3:(o++,s+=4);return s}function qb(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function M3(t){let a="";for(let s in t)t.hasOwnProperty(s)&&(a.length&&(a+="&"),a+=encodeURIComponent(s)+"="+encodeURIComponent(t[s]));return a}function A3(t){let a={},s=t.split("&");for(let o=0,c=s.length;o<c;o++){let u=s[o].split("=");a[decodeURIComponent(u[0])]=decodeURIComponent(u[1])}return a}class k3 extends Error{constructor(a,s,o){super(a),this.description=s,this.context=o,this.type="TransportError"}}class Jh extends ct{constructor(a){super(),this.writable=!1,au(this,a),this.opts=a,this.query=a.query,this.socket=a.socket,this.supportsBinary=!a.forceBase64}onError(a,s,o){return super.emitReserved("error",new k3(a,s,o)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(a){this.readyState==="open"&&this.write(a)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(a){const s=Kh(a,this.socket.binaryType);this.onPacket(s)}onPacket(a){super.emitReserved("packet",a)}onClose(a){this.readyState="closed",super.emitReserved("close",a)}pause(a){}createUri(a,s={}){return a+"://"+this._hostname()+this._port()+this.opts.path+this._query(s)}_hostname(){const a=this.opts.hostname;return a.indexOf(":")===-1?a:"["+a+"]"}_port(){return this.opts.port&&(this.opts.secure&&Number(this.opts.port)!==443||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(a){const s=M3(a);return s.length?"?"+s:""}}class z3 extends Jh{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(a){this.readyState="pausing";const s=()=>{this.readyState="paused",a()};if(this._polling||!this.writable){let o=0;this._polling&&(o++,this.once("pollComplete",function(){--o||s()})),this.writable||(o++,this.once("drain",function(){--o||s()}))}else s()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(a){const s=o=>{if(this.readyState==="opening"&&o.type==="open"&&this.onOpen(),o.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(o)};b3(a,this.socket.binaryType).forEach(s),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const a=()=>{this.write([{type:"close"}])};this.readyState==="open"?a():this.once("open",a)}write(a){this.writable=!1,y3(a,s=>{this.doWrite(s,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const a=this.opts.secure?"https":"http",s=this.query||{};return this.opts.timestampRequests!==!1&&(s[this.opts.timestampParam]=qb()),!this.supportsBinary&&!s.sid&&(s.b64=1),this.createUri(a,s)}}let Vb=!1;try{Vb=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const R3=Vb;function D3(){}class O3 extends z3{constructor(a){if(super(a),typeof location<"u"){const s=location.protocol==="https:";let o=location.port;o||(o=s?"443":"80"),this.xd=typeof location<"u"&&a.hostname!==location.hostname||o!==a.port}}doWrite(a,s){const o=this.request({method:"POST",data:a});o.on("success",s),o.on("error",(c,u)=>{this.onError("xhr post error",c,u)})}doPoll(){const a=this.request();a.on("data",this.onData.bind(this)),a.on("error",(s,o)=>{this.onError("xhr poll error",s,o)}),this.pollXhr=a}}class On extends ct{constructor(a,s,o){super(),this.createRequest=a,au(this,o),this._opts=o,this._method=o.method||"GET",this._uri=s,this._data=o.data!==void 0?o.data:null,this._create()}_create(){var a;const s=Ub(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");s.xdomain=!!this._opts.xd;const o=this._xhr=this.createRequest(s);try{o.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){o.setDisableHeaderCheck&&o.setDisableHeaderCheck(!0);for(let c in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(c)&&o.setRequestHeader(c,this._opts.extraHeaders[c])}}catch{}if(this._method==="POST")try{o.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{o.setRequestHeader("Accept","*/*")}catch{}(a=this._opts.cookieJar)===null||a===void 0||a.addCookies(o),"withCredentials"in o&&(o.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(o.timeout=this._opts.requestTimeout),o.onreadystatechange=()=>{var c;o.readyState===3&&((c=this._opts.cookieJar)===null||c===void 0||c.parseCookies(o.getResponseHeader("set-cookie"))),o.readyState===4&&(o.status===200||o.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof o.status=="number"?o.status:0)},0))},o.send(this._data)}catch(c){this.setTimeoutFn(()=>{this._onError(c)},0);return}typeof document<"u"&&(this._index=On.requestsCount++,On.requests[this._index]=this)}_onError(a){this.emitReserved("error",a,this._xhr),this._cleanup(!0)}_cleanup(a){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=D3,a)try{this._xhr.abort()}catch{}typeof document<"u"&&delete On.requests[this._index],this._xhr=null}}_onLoad(){const a=this._xhr.responseText;a!==null&&(this.emitReserved("data",a),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}On.requestsCount=0;On.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",Bx);else if(typeof addEventListener=="function"){const t="onpagehide"in on?"pagehide":"unload";addEventListener(t,Bx,!1)}}function Bx(){for(let t in On.requests)On.requests.hasOwnProperty(t)&&On.requests[t].abort()}const B3=(function(){const t=Yb({xdomain:!1});return t&&t.responseType!==null})();class L3 extends O3{constructor(a){super(a);const s=a&&a.forceBase64;this.supportsBinary=B3&&!s}request(a={}){return Object.assign(a,{xd:this.xd},this.opts),new On(Yb,this.uri(),a)}}function Yb(t){const a=t.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!a||R3))return new XMLHttpRequest}catch{}if(!a)try{return new on[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const Pb=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class H3 extends Jh{get name(){return"websocket"}doOpen(){const a=this.uri(),s=this.opts.protocols,o=Pb?{}:Ub(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(o.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(a,s,o)}catch(c){return this.emitReserved("error",c)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=a=>this.onClose({description:"websocket connection closed",context:a}),this.ws.onmessage=a=>this.onData(a.data),this.ws.onerror=a=>this.onError("websocket error",a)}write(a){this.writable=!1;for(let s=0;s<a.length;s++){const o=a[s],c=s===a.length-1;Wh(o,this.supportsBinary,u=>{try{this.doWrite(o,u)}catch{}c&&nu(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const a=this.opts.secure?"wss":"ws",s=this.query||{};return this.opts.timestampRequests&&(s[this.opts.timestampParam]=qb()),this.supportsBinary||(s.b64=1),this.createUri(a,s)}}const Pf=on.WebSocket||on.MozWebSocket;class $3 extends H3{createSocket(a,s,o){return Pb?new Pf(a,s,o):s?new Pf(a,s):new Pf(a)}doWrite(a,s){this.ws.send(s)}}class U3 extends Jh{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(a){return this.emitReserved("error",a)}this._transport.closed.then(()=>{this.onClose()}).catch(a=>{this.onError("webtransport error",a)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(a=>{const s=w3(Number.MAX_SAFE_INTEGER,this.socket.binaryType),o=a.readable.pipeThrough(s).getReader(),c=v3();c.readable.pipeTo(a.writable),this._writer=c.writable.getWriter();const u=()=>{o.read().then(({done:m,value:p})=>{m||(this.onPacket(p),u())}).catch(m=>{})};u();const f={type:"open"};this.query.sid&&(f.data=`{"sid":"${this.query.sid}"}`),this._writer.write(f).then(()=>this.onOpen())})})}write(a){this.writable=!1;for(let s=0;s<a.length;s++){const o=a[s],c=s===a.length-1;this._writer.write(o).then(()=>{c&&nu(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var a;(a=this._transport)===null||a===void 0||a.close()}}const q3={websocket:$3,webtransport:U3,polling:L3},V3=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,Y3=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function hh(t){if(t.length>8e3)throw"URI too long";const a=t,s=t.indexOf("["),o=t.indexOf("]");s!=-1&&o!=-1&&(t=t.substring(0,s)+t.substring(s,o).replace(/:/g,";")+t.substring(o,t.length));let c=V3.exec(t||""),u={},f=14;for(;f--;)u[Y3[f]]=c[f]||"";return s!=-1&&o!=-1&&(u.source=a,u.host=u.host.substring(1,u.host.length-1).replace(/;/g,":"),u.authority=u.authority.replace("[","").replace("]","").replace(/;/g,":"),u.ipv6uri=!0),u.pathNames=P3(u,u.path),u.queryKey=X3(u,u.query),u}function P3(t,a){const s=/\/{2,9}/g,o=a.replace(s,"/").split("/");return(a.slice(0,1)=="/"||a.length===0)&&o.splice(0,1),a.slice(-1)=="/"&&o.splice(o.length-1,1),o}function X3(t,a){const s={};return a.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(o,c,u){c&&(s[c]=u)}),s}const mh=typeof addEventListener=="function"&&typeof removeEventListener=="function",jc=[];mh&&addEventListener("offline",()=>{jc.forEach(t=>t())},!1);class ts extends ct{constructor(a,s){if(super(),this.binaryType=N3,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,a&&typeof a=="object"&&(s=a,a=null),a){const o=hh(a);s.hostname=o.host,s.secure=o.protocol==="https"||o.protocol==="wss",s.port=o.port,o.query&&(s.query=o.query)}else s.host&&(s.hostname=hh(s.host).host);au(this,s),this.secure=s.secure!=null?s.secure:typeof location<"u"&&location.protocol==="https:",s.hostname&&!s.port&&(s.port=this.secure?"443":"80"),this.hostname=s.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=s.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},s.transports.forEach(o=>{const c=o.prototype.name;this.transports.push(c),this._transportsByName[c]=o}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},s),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=A3(this.opts.query)),mh&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},jc.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(a){const s=Object.assign({},this.opts.query);s.EIO=$b,s.transport=a,this.id&&(s.sid=this.id);const o=Object.assign({},this.opts,{query:s,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[a]);return new this._transportsByName[a](o)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const a=this.opts.rememberUpgrade&&ts.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const s=this.createTransport(a);s.open(),this.setTransport(s)}setTransport(a){this.transport&&this.transport.removeAllListeners(),this.transport=a,a.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",s=>this._onClose("transport close",s))}onOpen(){this.readyState="open",ts.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(a){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",a),this.emitReserved("heartbeat"),a.type){case"open":this.onHandshake(JSON.parse(a.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const s=new Error("server error");s.code=a.data,this._onError(s);break;case"message":this.emitReserved("data",a.data),this.emitReserved("message",a.data);break}}onHandshake(a){this.emitReserved("handshake",a),this.id=a.sid,this.transport.query.sid=a.sid,this._pingInterval=a.pingInterval,this._pingTimeout=a.pingTimeout,this._maxPayload=a.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const a=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+a,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},a),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const a=this._getWritablePackets();this.transport.send(a),this._prevBufferLen=a.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let s=1;for(let o=0;o<this.writeBuffer.length;o++){const c=this.writeBuffer[o].data;if(c&&(s+=C3(c)),o>0&&s>this._maxPayload)return this.writeBuffer.slice(0,o);s+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const a=Date.now()>this._pingTimeoutTime;return a&&(this._pingTimeoutTime=0,nu(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),a}write(a,s,o){return this._sendPacket("message",a,s,o),this}send(a,s,o){return this._sendPacket("message",a,s,o),this}_sendPacket(a,s,o,c){if(typeof s=="function"&&(c=s,s=void 0),typeof o=="function"&&(c=o,o=null),this.readyState==="closing"||this.readyState==="closed")return;o=o||{},o.compress=o.compress!==!1;const u={type:a,data:s,options:o};this.emitReserved("packetCreate",u),this.writeBuffer.push(u),c&&this.once("flush",c),this.flush()}close(){const a=()=>{this._onClose("forced close"),this.transport.close()},s=()=>{this.off("upgrade",s),this.off("upgradeError",s),a()},o=()=>{this.once("upgrade",s),this.once("upgradeError",s)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?o():a()}):this.upgrading?o():a()),this}_onError(a){if(ts.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",a),this._onClose("transport error",a)}_onClose(a,s){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),mh&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const o=jc.indexOf(this._offlineEventListener);o!==-1&&jc.splice(o,1)}this.readyState="closed",this.id=null,this.emitReserved("close",a,s),this.writeBuffer=[],this._prevBufferLen=0}}}ts.protocol=$b;class I3 extends ts{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let a=0;a<this._upgrades.length;a++)this._probe(this._upgrades[a])}_probe(a){let s=this.createTransport(a),o=!1;ts.priorWebsocketSuccess=!1;const c=()=>{o||(s.send([{type:"ping",data:"probe"}]),s.once("packet",x=>{if(!o)if(x.type==="pong"&&x.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",s),!s)return;ts.priorWebsocketSuccess=s.name==="websocket",this.transport.pause(()=>{o||this.readyState!=="closed"&&(y(),this.setTransport(s),s.send([{type:"upgrade"}]),this.emitReserved("upgrade",s),s=null,this.upgrading=!1,this.flush())})}else{const b=new Error("probe error");b.transport=s.name,this.emitReserved("upgradeError",b)}}))};function u(){o||(o=!0,y(),s.close(),s=null)}const f=x=>{const b=new Error("probe error: "+x);b.transport=s.name,u(),this.emitReserved("upgradeError",b)};function m(){f("transport closed")}function p(){f("socket closed")}function g(x){s&&x.name!==s.name&&u()}const y=()=>{s.removeListener("open",c),s.removeListener("error",f),s.removeListener("close",m),this.off("close",p),this.off("upgrading",g)};s.once("open",c),s.once("error",f),s.once("close",m),this.once("close",p),this.once("upgrading",g),this._upgrades.indexOf("webtransport")!==-1&&a!=="webtransport"?this.setTimeoutFn(()=>{o||s.open()},200):s.open()}onHandshake(a){this._upgrades=this._filterUpgrades(a.upgrades),super.onHandshake(a)}_filterUpgrades(a){const s=[];for(let o=0;o<a.length;o++)~this.transports.indexOf(a[o])&&s.push(a[o]);return s}}let G3=class extends I3{constructor(a,s={}){const o=typeof a=="object"?a:s;(!o.transports||o.transports&&typeof o.transports[0]=="string")&&(o.transports=(o.transports||["polling","websocket","webtransport"]).map(c=>q3[c]).filter(c=>!!c)),super(a,o)}};function Q3(t,a="",s){let o=t;s=s||typeof location<"u"&&location,t==null&&(t=s.protocol+"//"+s.host),typeof t=="string"&&(t.charAt(0)==="/"&&(t.charAt(1)==="/"?t=s.protocol+t:t=s.host+t),/^(https?|wss?):\/\//.test(t)||(typeof s<"u"?t=s.protocol+"//"+t:t="https://"+t),o=hh(t)),o.port||(/^(http|ws)$/.test(o.protocol)?o.port="80":/^(http|ws)s$/.test(o.protocol)&&(o.port="443")),o.path=o.path||"/";const u=o.host.indexOf(":")!==-1?"["+o.host+"]":o.host;return o.id=o.protocol+"://"+u+":"+o.port+a,o.href=o.protocol+"://"+u+(s&&s.port===o.port?"":":"+o.port),o}const Z3=typeof ArrayBuffer=="function",F3=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,Xb=Object.prototype.toString,W3=typeof Blob=="function"||typeof Blob<"u"&&Xb.call(Blob)==="[object BlobConstructor]",K3=typeof File=="function"||typeof File<"u"&&Xb.call(File)==="[object FileConstructor]";function em(t){return Z3&&(t instanceof ArrayBuffer||F3(t))||W3&&t instanceof Blob||K3&&t instanceof File}function Nc(t,a){if(!t||typeof t!="object")return!1;if(Array.isArray(t)){for(let s=0,o=t.length;s<o;s++)if(Nc(t[s]))return!0;return!1}if(em(t))return!0;if(t.toJSON&&typeof t.toJSON=="function"&&arguments.length===1)return Nc(t.toJSON(),!0);for(const s in t)if(Object.prototype.hasOwnProperty.call(t,s)&&Nc(t[s]))return!0;return!1}function J3(t){const a=[],s=t.data,o=t;return o.data=ph(s,a),o.attachments=a.length,{packet:o,buffers:a}}function ph(t,a){if(!t)return t;if(em(t)){const s={_placeholder:!0,num:a.length};return a.push(t),s}else if(Array.isArray(t)){const s=new Array(t.length);for(let o=0;o<t.length;o++)s[o]=ph(t[o],a);return s}else if(typeof t=="object"&&!(t instanceof Date)){const s={};for(const o in t)Object.prototype.hasOwnProperty.call(t,o)&&(s[o]=ph(t[o],a));return s}return t}function e_(t,a){return t.data=gh(t.data,a),delete t.attachments,t}function gh(t,a){if(!t)return t;if(t&&t._placeholder===!0){if(typeof t.num=="number"&&t.num>=0&&t.num<a.length)return a[t.num];throw new Error("illegal attachments")}else if(Array.isArray(t))for(let s=0;s<t.length;s++)t[s]=gh(t[s],a);else if(typeof t=="object")for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(t[s]=gh(t[s],a));return t}const Ib=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],t_=5;var Ce;(function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"})(Ce||(Ce={}));class n_{constructor(a){this.replacer=a}encode(a){return(a.type===Ce.EVENT||a.type===Ce.ACK)&&Nc(a)?this.encodeAsBinary({type:a.type===Ce.EVENT?Ce.BINARY_EVENT:Ce.BINARY_ACK,nsp:a.nsp,data:a.data,id:a.id}):[this.encodeAsString(a)]}encodeAsString(a){let s=""+a.type;return(a.type===Ce.BINARY_EVENT||a.type===Ce.BINARY_ACK)&&(s+=a.attachments+"-"),a.nsp&&a.nsp!=="/"&&(s+=a.nsp+","),a.id!=null&&(s+=a.id),a.data!=null&&(s+=JSON.stringify(a.data,this.replacer)),s}encodeAsBinary(a){const s=J3(a),o=this.encodeAsString(s.packet),c=s.buffers;return c.unshift(o),c}}class tm extends ct{constructor(a){super(),this.reviver=a}add(a){let s;if(typeof a=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");s=this.decodeString(a);const o=s.type===Ce.BINARY_EVENT;o||s.type===Ce.BINARY_ACK?(s.type=o?Ce.EVENT:Ce.ACK,this.reconstructor=new a_(s),s.attachments===0&&super.emitReserved("decoded",s)):super.emitReserved("decoded",s)}else if(em(a)||a.base64)if(this.reconstructor)s=this.reconstructor.takeBinaryData(a),s&&(this.reconstructor=null,super.emitReserved("decoded",s));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+a)}decodeString(a){let s=0;const o={type:Number(a.charAt(0))};if(Ce[o.type]===void 0)throw new Error("unknown packet type "+o.type);if(o.type===Ce.BINARY_EVENT||o.type===Ce.BINARY_ACK){const u=s+1;for(;a.charAt(++s)!=="-"&&s!=a.length;);const f=a.substring(u,s);if(f!=Number(f)||a.charAt(s)!=="-")throw new Error("Illegal attachments");o.attachments=Number(f)}if(a.charAt(s+1)==="/"){const u=s+1;for(;++s&&!(a.charAt(s)===","||s===a.length););o.nsp=a.substring(u,s)}else o.nsp="/";const c=a.charAt(s+1);if(c!==""&&Number(c)==c){const u=s+1;for(;++s;){const f=a.charAt(s);if(f==null||Number(f)!=f){--s;break}if(s===a.length)break}o.id=Number(a.substring(u,s+1))}if(a.charAt(++s)){const u=this.tryParse(a.substr(s));if(tm.isPayloadValid(o.type,u))o.data=u;else throw new Error("invalid payload")}return o}tryParse(a){try{return JSON.parse(a,this.reviver)}catch{return!1}}static isPayloadValid(a,s){switch(a){case Ce.CONNECT:return Lc(s);case Ce.DISCONNECT:return s===void 0;case Ce.CONNECT_ERROR:return typeof s=="string"||Lc(s);case Ce.EVENT:case Ce.BINARY_EVENT:return Array.isArray(s)&&(typeof s[0]=="number"||typeof s[0]=="string"&&Ib.indexOf(s[0])===-1);case Ce.ACK:case Ce.BINARY_ACK:return Array.isArray(s)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class a_{constructor(a){this.packet=a,this.buffers=[],this.reconPack=a}takeBinaryData(a){if(this.buffers.push(a),this.buffers.length===this.reconPack.attachments){const s=e_(this.reconPack,this.buffers);return this.finishedReconstruction(),s}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}function s_(t){return typeof t=="string"}const r_=Number.isInteger||function(t){return typeof t=="number"&&isFinite(t)&&Math.floor(t)===t};function i_(t){return t===void 0||r_(t)}function Lc(t){return Object.prototype.toString.call(t)==="[object Object]"}function o_(t,a){switch(t){case Ce.CONNECT:return a===void 0||Lc(a);case Ce.DISCONNECT:return a===void 0;case Ce.EVENT:return Array.isArray(a)&&(typeof a[0]=="number"||typeof a[0]=="string"&&Ib.indexOf(a[0])===-1);case Ce.ACK:return Array.isArray(a);case Ce.CONNECT_ERROR:return typeof a=="string"||Lc(a);default:return!1}}function l_(t){return s_(t.nsp)&&i_(t.id)&&o_(t.type,t.data)}const c_=Object.freeze(Object.defineProperty({__proto__:null,Decoder:tm,Encoder:n_,get PacketType(){return Ce},isPacketValid:l_,protocol:t_},Symbol.toStringTag,{value:"Module"}));function xn(t,a,s){return t.on(a,s),function(){t.off(a,s)}}const u_=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class Gb extends ct{constructor(a,s,o){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=a,this.nsp=s,o&&o.auth&&(this.auth=o.auth),this._opts=Object.assign({},o),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const a=this.io;this.subs=[xn(a,"open",this.onopen.bind(this)),xn(a,"packet",this.onpacket.bind(this)),xn(a,"error",this.onerror.bind(this)),xn(a,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...a){return a.unshift("message"),this.emit.apply(this,a),this}emit(a,...s){var o,c,u;if(u_.hasOwnProperty(a))throw new Error('"'+a.toString()+'" is a reserved event name');if(s.unshift(a),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(s),this;const f={type:Ce.EVENT,data:s};if(f.options={},f.options.compress=this.flags.compress!==!1,typeof s[s.length-1]=="function"){const y=this.ids++,x=s.pop();this._registerAckCallback(y,x),f.id=y}const m=(c=(o=this.io.engine)===null||o===void 0?void 0:o.transport)===null||c===void 0?void 0:c.writable,p=this.connected&&!(!((u=this.io.engine)===null||u===void 0)&&u._hasPingExpired());return this.flags.volatile&&!m||(p?(this.notifyOutgoingListeners(f),this.packet(f)):this.sendBuffer.push(f)),this.flags={},this}_registerAckCallback(a,s){var o;const c=(o=this.flags.timeout)!==null&&o!==void 0?o:this._opts.ackTimeout;if(c===void 0){this.acks[a]=s;return}const u=this.io.setTimeoutFn(()=>{delete this.acks[a];for(let m=0;m<this.sendBuffer.length;m++)this.sendBuffer[m].id===a&&this.sendBuffer.splice(m,1);s.call(this,new Error("operation has timed out"))},c),f=(...m)=>{this.io.clearTimeoutFn(u),s.apply(this,m)};f.withError=!0,this.acks[a]=f}emitWithAck(a,...s){return new Promise((o,c)=>{const u=(f,m)=>f?c(f):o(m);u.withError=!0,s.push(u),this.emit(a,...s)})}_addToQueue(a){let s;typeof a[a.length-1]=="function"&&(s=a.pop());const o={id:this._queueSeq++,tryCount:0,pending:!1,args:a,flags:Object.assign({fromQueue:!0},this.flags)};a.push((c,...u)=>(this._queue[0],c!==null?o.tryCount>this._opts.retries&&(this._queue.shift(),s&&s(c)):(this._queue.shift(),s&&s(null,...u)),o.pending=!1,this._drainQueue())),this._queue.push(o),this._drainQueue()}_drainQueue(a=!1){if(!this.connected||this._queue.length===0)return;const s=this._queue[0];s.pending&&!a||(s.pending=!0,s.tryCount++,this.flags=s.flags,this.emit.apply(this,s.args))}packet(a){a.nsp=this.nsp,this.io._packet(a)}onopen(){typeof this.auth=="function"?this.auth(a=>{this._sendConnectPacket(a)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(a){this.packet({type:Ce.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},a):a})}onerror(a){this.connected||this.emitReserved("connect_error",a)}onclose(a,s){this.connected=!1,delete this.id,this.emitReserved("disconnect",a,s),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(a=>{if(!this.sendBuffer.some(o=>String(o.id)===a)){const o=this.acks[a];delete this.acks[a],o.withError&&o.call(this,new Error("socket has been disconnected"))}})}onpacket(a){if(a.nsp===this.nsp)switch(a.type){case Ce.CONNECT:a.data&&a.data.sid?this.onconnect(a.data.sid,a.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Ce.EVENT:case Ce.BINARY_EVENT:this.onevent(a);break;case Ce.ACK:case Ce.BINARY_ACK:this.onack(a);break;case Ce.DISCONNECT:this.ondisconnect();break;case Ce.CONNECT_ERROR:this.destroy();const o=new Error(a.data.message);o.data=a.data.data,this.emitReserved("connect_error",o);break}}onevent(a){const s=a.data||[];a.id!=null&&s.push(this.ack(a.id)),this.connected?this.emitEvent(s):this.receiveBuffer.push(Object.freeze(s))}emitEvent(a){if(this._anyListeners&&this._anyListeners.length){const s=this._anyListeners.slice();for(const o of s)o.apply(this,a)}super.emit.apply(this,a),this._pid&&a.length&&typeof a[a.length-1]=="string"&&(this._lastOffset=a[a.length-1])}ack(a){const s=this;let o=!1;return function(...c){o||(o=!0,s.packet({type:Ce.ACK,id:a,data:c}))}}onack(a){const s=this.acks[a.id];typeof s=="function"&&(delete this.acks[a.id],s.withError&&a.data.unshift(null),s.apply(this,a.data))}onconnect(a,s){this.id=a,this.recovered=s&&this._pid===s,this._pid=s,this.connected=!0,this.emitBuffered(),this._drainQueue(!0),this.emitReserved("connect")}emitBuffered(){this.receiveBuffer.forEach(a=>this.emitEvent(a)),this.receiveBuffer=[],this.sendBuffer.forEach(a=>{this.notifyOutgoingListeners(a),this.packet(a)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(a=>a()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:Ce.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(a){return this.flags.compress=a,this}get volatile(){return this.flags.volatile=!0,this}timeout(a){return this.flags.timeout=a,this}onAny(a){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(a),this}prependAny(a){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(a),this}offAny(a){if(!this._anyListeners)return this;if(a){const s=this._anyListeners;for(let o=0;o<s.length;o++)if(a===s[o])return s.splice(o,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(a){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(a),this}prependAnyOutgoing(a){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(a),this}offAnyOutgoing(a){if(!this._anyOutgoingListeners)return this;if(a){const s=this._anyOutgoingListeners;for(let o=0;o<s.length;o++)if(a===s[o])return s.splice(o,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(a){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const s=this._anyOutgoingListeners.slice();for(const o of s)o.apply(this,a.data)}}}function Wr(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}Wr.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var a=Math.random(),s=Math.floor(a*this.jitter*t);t=(Math.floor(a*10)&1)==0?t-s:t+s}return Math.min(t,this.max)|0};Wr.prototype.reset=function(){this.attempts=0};Wr.prototype.setMin=function(t){this.ms=t};Wr.prototype.setMax=function(t){this.max=t};Wr.prototype.setJitter=function(t){this.jitter=t};class xh extends ct{constructor(a,s){var o;super(),this.nsps={},this.subs=[],a&&typeof a=="object"&&(s=a,a=void 0),s=s||{},s.path=s.path||"/socket.io",this.opts=s,au(this,s),this.reconnection(s.reconnection!==!1),this.reconnectionAttempts(s.reconnectionAttempts||1/0),this.reconnectionDelay(s.reconnectionDelay||1e3),this.reconnectionDelayMax(s.reconnectionDelayMax||5e3),this.randomizationFactor((o=s.randomizationFactor)!==null&&o!==void 0?o:.5),this.backoff=new Wr({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(s.timeout==null?2e4:s.timeout),this._readyState="closed",this.uri=a;const c=s.parser||c_;this.encoder=new c.Encoder,this.decoder=new c.Decoder,this._autoConnect=s.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(a){return arguments.length?(this._reconnection=!!a,a||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(a){return a===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=a,this)}reconnectionDelay(a){var s;return a===void 0?this._reconnectionDelay:(this._reconnectionDelay=a,(s=this.backoff)===null||s===void 0||s.setMin(a),this)}randomizationFactor(a){var s;return a===void 0?this._randomizationFactor:(this._randomizationFactor=a,(s=this.backoff)===null||s===void 0||s.setJitter(a),this)}reconnectionDelayMax(a){var s;return a===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=a,(s=this.backoff)===null||s===void 0||s.setMax(a),this)}timeout(a){return arguments.length?(this._timeout=a,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(a){if(~this._readyState.indexOf("open"))return this;this.engine=new G3(this.uri,this.opts);const s=this.engine,o=this;this._readyState="opening",this.skipReconnect=!1;const c=xn(s,"open",function(){o.onopen(),a&&a()}),u=m=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",m),a?a(m):this.maybeReconnectOnOpen()},f=xn(s,"error",u);if(this._timeout!==!1){const m=this._timeout,p=this.setTimeoutFn(()=>{c(),u(new Error("timeout")),s.close()},m);this.opts.autoUnref&&p.unref(),this.subs.push(()=>{this.clearTimeoutFn(p)})}return this.subs.push(c),this.subs.push(f),this}connect(a){return this.open(a)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const a=this.engine;this.subs.push(xn(a,"ping",this.onping.bind(this)),xn(a,"data",this.ondata.bind(this)),xn(a,"error",this.onerror.bind(this)),xn(a,"close",this.onclose.bind(this)),xn(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(a){try{this.decoder.add(a)}catch(s){this.onclose("parse error",s)}}ondecoded(a){nu(()=>{this.emitReserved("packet",a)},this.setTimeoutFn)}onerror(a){this.emitReserved("error",a)}socket(a,s){let o=this.nsps[a];return o?this._autoConnect&&!o.active&&o.connect():(o=new Gb(this,a,s),this.nsps[a]=o),o}_destroy(a){const s=Object.keys(this.nsps);for(const o of s)if(this.nsps[o].active)return;this._close()}_packet(a){const s=this.encoder.encode(a);for(let o=0;o<s.length;o++)this.engine.write(s[o],a.options)}cleanup(){this.subs.forEach(a=>a()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(a,s){var o;this.cleanup(),(o=this.engine)===null||o===void 0||o.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",a,s),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const a=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const s=this.backoff.duration();this._reconnecting=!0;const o=this.setTimeoutFn(()=>{a.skipReconnect||(this.emitReserved("reconnect_attempt",a.backoff.attempts),!a.skipReconnect&&a.open(c=>{c?(a._reconnecting=!1,a.reconnect(),this.emitReserved("reconnect_error",c)):a.onreconnect()}))},s);this.opts.autoUnref&&o.unref(),this.subs.push(()=>{this.clearTimeoutFn(o)})}}onreconnect(){const a=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",a)}}const Fi={};function Sc(t,a){typeof t=="object"&&(a=t,t=void 0),a=a||{};const s=Q3(t,a.path||"/socket.io"),o=s.source,c=s.id,u=s.path,f=Fi[c]&&u in Fi[c].nsps,m=a.forceNew||a["force new connection"]||a.multiplex===!1||f;let p;return m?p=new xh(o,a):(Fi[c]||(Fi[c]=new xh(o,a)),p=Fi[c]),s.query&&!a.query&&(a.query=s.queryKey),p.socket(s.path,a)}Object.assign(Sc,{Manager:xh,Socket:Gb,io:Sc,connect:Sc});function d_(t){const[a,s]=j.useState(!1),o=j.useRef(null),c=Mt(u=>u.token);return j.useEffect(()=>{if(!c)return;const u=Sc(t,{path:"/socket.io/",auth:{dashboardToken:c},transports:["websocket","polling"],reconnection:!0,reconnectionAttempts:1/0,reconnectionDelay:2e3,reconnectionDelayMax:1e4,timeout:2e4});return u.on("connect",()=>{console.log(`Dashboard socket conectado a ${t}`),s(!0)}),u.on("disconnect",f=>{console.log(`Dashboard socket desconectado: ${f}`),s(!1)}),u.on("connect_error",f=>{console.error("Error de conexin Socket.IO:",f.message)}),o.current=u,()=>{u.disconnect(),o.current=null,s(!1)}},[t,c]),{socket:o.current,connected:a}}function f_({sessionId:t,currentAgentId:a,currentDepartmentId:s,onClose:o,onAssigned:c}){const[u,f]=j.useState([]),[m,p]=j.useState([]),[g,y]=j.useState(a||""),[x,b]=j.useState(s||""),[S,_]=j.useState(!1),[C,N]=j.useState(""),E=Mt(w=>w.token),z={"Content-Type":"application/json",...E?{Authorization:`Bearer ${E}`}:{}};j.useEffect(()=>{Promise.all([fetch("/api/agents",{headers:z}).then(w=>w.json()),fetch("/api/departments",{headers:z}).then(w=>w.json())]).then(([w,R])=>{f(w.agents||[]),p(R.departments||[])}).catch(()=>{})},[]);const T=async()=>{_(!0),N("");try{const w={sessionId:Number(t)};g&&(w.agentId=Number(g)),x&&(w.departmentId=Number(x));const M=await(await fetch("/api/chat/assign",{method:"POST",headers:z,body:JSON.stringify(w)})).json();if(!M.ok)throw new Error(M.error||"Error al asignar");c&&c(M),o()}catch(w){N(w.message)}finally{_(!1)}},k={};return u.filter(w=>w.status==="active").forEach(w=>{const R=w.department_name||"Sin departamento";k[R]||(k[R]=[]),k[R].push(w)}),i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:o,children:i.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md p-6",onClick:w=>w.stopPropagation(),children:[i.jsxs("div",{className:"flex items-center justify-between mb-5",children:[i.jsxs("h3",{className:"text-lg font-bold text-gray-800 flex items-center gap-2",children:[i.jsx(Hr,{className:"w-5 h-5 text-green-600"}),"Asignar Conversacin"]}),i.jsx("button",{onClick:o,className:"text-gray-400 hover:text-gray-600",children:i.jsx(es,{className:"w-5 h-5"})})]}),C&&i.jsx("div",{className:"bg-red-50 text-red-600 px-4 py-2 rounded-lg text-sm mb-4 border border-red-200",children:C}),i.jsxs("div",{className:"mb-4",children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[i.jsx(Lr,{className:"w-4 h-4 inline mr-1"}),"Departamento"]}),i.jsxs("select",{value:x,onChange:w=>b(w.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 outline-none",children:[i.jsx("option",{value:"",children:"Sin asignar departamento"}),m.filter(w=>w.active).map(w=>i.jsx("option",{value:w.id,children:w.display_name||w.name},w.id))]})]}),i.jsxs("div",{className:"mb-6",children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[i.jsx(Hr,{className:"w-4 h-4 inline mr-1"}),"Agente"]}),i.jsxs("select",{value:g,onChange:w=>y(w.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 outline-none",children:[i.jsx("option",{value:"",children:"Sin asignar agente"}),Object.entries(k).map(([w,R])=>i.jsx("optgroup",{label:w,children:R.map(M=>i.jsxs("option",{value:M.id,children:[M.name," (",M.username,") - ",M.role]},M.id))},w))]})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{onClick:o,className:"flex-1 px-4 py-2.5 border border-gray-300 rounded-xl text-gray-700 hover:bg-gray-50 transition",children:"Cancelar"}),i.jsx("button",{onClick:T,disabled:S||!g&&!x,className:"flex-1 px-4 py-2.5 bg-green-500 hover:bg-green-600 text-white rounded-xl transition disabled:opacity-50 disabled:cursor-not-allowed",children:S?"Asignando...":"Asignar"})]})]})})}function h_({sessionId:t,currentAgentId:a,currentDepartmentId:s,onClose:o,onTransferred:c}){const[u,f]=j.useState([]),[m,p]=j.useState([]),[g,y]=j.useState(""),[x,b]=j.useState(""),[S,_]=j.useState(""),[C,N]=j.useState(!1),[E,z]=j.useState(""),T=Mt(M=>M.token),k={"Content-Type":"application/json",...T?{Authorization:`Bearer ${T}`}:{}};j.useEffect(()=>{Promise.all([fetch("/api/agents",{headers:k}).then(M=>M.json()),fetch("/api/departments",{headers:k}).then(M=>M.json())]).then(([M,q])=>{f(M.agents||[]),p(q.departments||[])}).catch(()=>{})},[]);const w=async()=>{N(!0),z("");try{const M={sessionId:Number(t)};g&&(M.targetAgentId=Number(g)),x&&(M.targetDepartmentId=Number(x)),S&&(M.reason=S);const $=await(await fetch("/api/chat/transfer",{method:"POST",headers:k,body:JSON.stringify(M)})).json();if(!$.ok)throw new Error($.error||"Error al transferir");c&&c($),o()}catch(M){z(M.message)}finally{N(!1)}},R={};return u.filter(M=>M.status==="active"&&M.id!==a).forEach(M=>{const q=M.department_name||"Sin departamento";R[q]||(R[q]=[]),R[q].push(M)}),i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:o,children:i.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md p-6",onClick:M=>M.stopPropagation(),children:[i.jsxs("div",{className:"flex items-center justify-between mb-5",children:[i.jsxs("h3",{className:"text-lg font-bold text-gray-800 flex items-center gap-2",children:[i.jsx(qh,{className:"w-5 h-5 text-blue-600"}),"Transferir Conversacin"]}),i.jsx("button",{onClick:o,className:"text-gray-400 hover:text-gray-600",children:i.jsx(es,{className:"w-5 h-5"})})]}),E&&i.jsx("div",{className:"bg-red-50 text-red-600 px-4 py-2 rounded-lg text-sm mb-4 border border-red-200",children:E}),i.jsxs("div",{className:"mb-4",children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[i.jsx(Lr,{className:"w-4 h-4 inline mr-1"}),"Departamento destino"]}),i.jsxs("select",{value:x,onChange:M=>b(M.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",children:[i.jsx("option",{value:"",children:"Mantener departamento actual"}),m.filter(M=>M.active).map(M=>i.jsx("option",{value:M.id,children:M.display_name||M.name},M.id))]})]}),i.jsxs("div",{className:"mb-4",children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[i.jsx(Hr,{className:"w-4 h-4 inline mr-1"}),"Agente destino"]}),i.jsxs("select",{value:g,onChange:M=>y(M.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",children:[i.jsx("option",{value:"",children:"Sin asignar agente"}),Object.entries(R).map(([M,q])=>i.jsx("optgroup",{label:M,children:q.map($=>i.jsxs("option",{value:$.id,children:[$.name," (",$.username,") - ",$.role]},$.id))},M))]})]}),i.jsxs("div",{className:"mb-6",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Razn (opcional)"}),i.jsx("input",{type:"text",value:S,onChange:M=>_(M.target.value),placeholder:"Ej: Cliente necesita soporte tcnico",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none"})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{onClick:o,className:"flex-1 px-4 py-2.5 border border-gray-300 rounded-xl text-gray-700 hover:bg-gray-50 transition",children:"Cancelar"}),i.jsx("button",{onClick:w,disabled:C||!g&&!x,className:"flex-1 px-4 py-2.5 bg-blue-500 hover:bg-blue-600 text-white rounded-xl transition disabled:opacity-50 disabled:cursor-not-allowed",children:C?"Transfiriendo...":"Transferir"})]})]})})}function Qb({className:t}){return i.jsx("svg",{className:t,viewBox:"0 0 24 24",fill:"currentColor",children:i.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})})}function Zb({className:t}){return i.jsx("svg",{className:t,viewBox:"0 0 24 24",fill:"currentColor",children:i.jsx("path",{d:"M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zM12 0C8.741 0 8.333.014 7.053.072 2.695.272.273 2.69.073 7.052.014 8.333 0 8.741 0 12c0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98C8.333 23.986 8.741 24 12 24c3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98C15.668.014 15.259 0 12 0zm0 5.838a6.162 6.162 0 100 12.324 6.162 6.162 0 000-12.324zM12 16a4 4 0 110-8 4 4 0 010 8zm6.406-11.845a1.44 1.44 0 100 2.881 1.44 1.44 0 000-2.881z"})})}function m_({className:t}){return i.jsx("svg",{className:t,viewBox:"0 0 24 24",fill:"currentColor",children:i.jsx("path",{d:"M12 0C5.373 0 0 4.974 0 11.111c0 3.498 1.744 6.614 4.469 8.654V24l4.088-2.242c1.092.3 2.246.464 3.443.464 6.627 0 12-4.974 12-11.111S18.627 0 12 0zm1.191 14.963l-3.055-3.26-5.963 3.26L10.732 8.2l3.131 3.26 5.887-3.26-6.559 6.763z"})})}function Lx({channel:t}){return!t||t==="whatsapp"?i.jsxs("span",{className:"inline-flex items-center gap-0.5 text-[10px] px-1.5 py-0.5 rounded-full bg-green-50 text-green-600 font-medium",title:"WhatsApp",children:[i.jsx(Qb,{className:"w-2.5 h-2.5"}),"WA"]}):t==="instagram"?i.jsxs("span",{className:"inline-flex items-center gap-0.5 text-[10px] px-1.5 py-0.5 rounded-full bg-pink-50 text-pink-600 font-medium",title:"Instagram",children:[i.jsx(Zb,{className:"w-2.5 h-2.5"}),"IG"]}):t==="messenger"?i.jsxs("span",{className:"inline-flex items-center gap-0.5 text-[10px] px-1.5 py-0.5 rounded-full bg-blue-50 text-blue-600 font-medium",title:"Messenger",children:[i.jsx(m_,{className:"w-2.5 h-2.5"}),"FB"]}):null}const Hx=["bg-blue-500","bg-green-500","bg-purple-500","bg-pink-500","bg-indigo-500","bg-teal-500","bg-orange-500","bg-red-400","bg-cyan-500","bg-emerald-500"];function $x(t){let a=0;for(let s=0;s<t.length;s++)a=t.charCodeAt(s)+((a<<5)-a);return Hx[Math.abs(a)%Hx.length]}function Ux(t,a){if(t){const s=t.trim().split(/\s+/);return s.length>=2?(s[0][0]+s[s.length-1][0]).toUpperCase():t[0].toUpperCase()}return a.slice(-2)}const qx=[{key:"mine",label:"Mis Chats",icon:Rr},{key:"department",label:"Departamento",icon:Lr},{key:"unassigned",label:"Sin Asignar",icon:Sb},{key:"all",label:"Todos",icon:Zh}];function p_(){const[t,a]=AN(),[s,o]=j.useState([]),[c,u]=j.useState(t.get("phone")||null),[f,m]=j.useState([]),[p,g]=j.useState(""),[y,x]=j.useState(!0),[b,S]=j.useState(!1),[_,C]=j.useState(""),[N,E]=j.useState("all"),[z,T]=j.useState(!1),[k,w]=j.useState(!1),R=j.useRef(null),M=j.useRef(!0),q=Mt(U=>U.agent),$=q?.role==="supervisor",[G,Q]=j.useState($?"all":"mine"),Z=j.useRef(G);Z.current=G;const re=s.find(U=>U.phone===c),V=j.useRef(c);V.current=c;const{socket:I,connected:O}=d_("/chat");j.useEffect(()=>{D();const U=setInterval(()=>{D()},3e4);return()=>{clearInterval(U)}},[G]),j.useEffect(()=>{c&&(M.current=!0,P(c),a({phone:c}))},[c]),j.useEffect(()=>{if(I)return I.on("new_message",U=>{if(console.log("Nuevo mensaje via WebSocket:",U),U.phone&&U.phone===V.current){m(ce=>ce.find(ve=>ve.waMsgId===U.msgId||ve.id===U.dbId)?ce:[...ce,{id:U.dbId||Date.now(),direction:U.direction==="in"?"incoming":"outgoing",body:U.text,content:U.text,created_at:new Date(U.timestamp).toISOString(),status:U.status,waMsgId:U.msgId,is_bot:U.isAI||!1,mediaType:U.media?.type||null,mediaId:U.media?.id||U.mediaId||null,mediaMime:U.media?.mime||null,mediaCaption:U.media?.caption||null,mediaExtra:U.media?.extra||null,media:U.media}]),_x(U.phone).then(()=>D());return}D()}),I.on("escalation",U=>{console.log("Escalamiento detectado:",U),D()}),I.on("message_status_update",U=>{console.log("Status actualizado:",U),m(ce=>ce.map(he=>he.waMsgId===U.msgId?{...he,status:U.status}:he))}),I.on("chat_assigned",U=>{console.log("Chat asignado:",U),D()}),I.on("chat_transferred",U=>{console.log("Chat transferido:",U),D()}),I.on("chat_unassigned",U=>{console.log("Chat liberado:",U),D()}),I.on("agent_status_change",U=>{console.log("Agent status change:",U)}),()=>{I.off("new_message"),I.off("escalation"),I.off("message_status_update"),I.off("chat_assigned"),I.off("chat_transferred"),I.off("chat_unassigned"),I.off("agent_status_change")}},[I]),j.useEffect(()=>{M.current?(R.current?.scrollIntoView({behavior:"instant"}),M.current=!1):R.current?.scrollIntoView({behavior:"smooth"})},[f]);const D=async U=>{try{const ce=U||Z.current,he=await Cb(ce);o(he.conversations||[])}catch(ce){console.error("Error loading conversations:",ce)}finally{x(!1)}},P=async U=>{try{const ce=await w4(U);m(ce.messages||[]),await _x(U)}catch(ce){console.error("Error loading messages:",ce)}},L=U=>{g(U.target.value)},W=async()=>{if(!(!p.trim()||!c||b)){S(!0);try{await j4(c,p),g("")}catch(U){console.error("Error sending message:",U),alert("Error al enviar mensaje")}finally{S(!1)}}},B=U=>{U.key==="Enter"&&!U.shiftKey&&(U.preventDefault(),W())},H=async()=>{if(!se)return;const U=se.session_id||se.sessionId||se.id;if(!confirm(`Eliminar conversacin con ${se.contact_name||se.phone}? Se borrarn todos los mensajes.`))return;const ce=Mt.getState().token;try{const ve=await(await fetch(`/api/chat/conversations/${U}`,{method:"DELETE",headers:{"Content-Type":"application/json",...ce?{Authorization:`Bearer ${ce}`}:{}}})).json();ve.ok?(u(null),m([]),D()):alert(ve.error||"Error al eliminar")}catch(he){console.error("Error deleting conversation:",he),alert("Error al eliminar conversacin")}},te=async()=>{if(!re)return;const U=Mt.getState().token;try{(await(await fetch("/api/chat/self-assign",{method:"POST",headers:{"Content-Type":"application/json",...U?{Authorization:`Bearer ${U}`}:{}},body:JSON.stringify({sessionId:re.session_id||re.sessionId||re.id})})).json()).ok&&D()}catch(ce){console.error("Error self-assigning:",ce)}},ne=s.filter(U=>{const ce=(U.contact_name?.toLowerCase()||"").includes(_.toLowerCase())||U.phone.includes(_),he=U.channel||"whatsapp";return ce&&(N==="all"||he===N)}),se=s.find(U=>U.phone===c),de=$?qx:qx.filter(U=>U.key!=="all"),ue=U=>{const{mediaType:ce,mediaId:he,mediaExtra:ve,mediaMime:pe,media:be}=U,Se=ce||be?.type,Ae=he||be?.id,Ee=pe||be?.mime,$e=ve||be?.extra;if(!Se)return null;const Re=U.direction==="outgoing",ht=Ae&&(Ae.startsWith("http://")||Ae.startsWith("https://"))?Ae:`/api/chat/media/${Ae}`;switch(Se){case"image":return i.jsxs("div",{className:"mt-2 rounded-lg overflow-hidden max-w-xs",children:[i.jsx("img",{src:ht,alt:"Imagen",className:"w-full h-auto cursor-pointer hover:opacity-90",onClick:()=>window.open(ht,"_blank"),onError:fn=>{fn.target.style.display="none",fn.target.nextSibling.style.display="flex"}}),i.jsxs("div",{className:"hidden items-center gap-2 p-3 bg-gray-100 rounded-lg",children:[i.jsx(SS,{className:"w-5 h-5 text-gray-500"}),i.jsx("span",{className:"text-sm text-gray-600",children:"Imagen no disponible"})]})]});case"video":return i.jsx("div",{className:"mt-2 rounded-lg overflow-hidden max-w-xs",children:i.jsx("video",{src:ht,controls:!0,className:"w-full h-auto rounded-lg",preload:"metadata",children:"Tu navegador no soporta video"})});case"audio":return i.jsxs("div",{className:`mt-2 flex items-center gap-2 p-2 rounded-lg ${Re?"bg-green-600":"bg-gray-100"}`,children:[i.jsx(BS,{className:`w-5 h-5 ${Re?"text-white":"text-green-600"}`}),i.jsx("audio",{src:ht,controls:!0,className:"h-8 flex-1",preload:"metadata"})]});case"document":const un=$e?.filename||"Documento";return i.jsxs("a",{href:ht,target:"_blank",rel:"noopener noreferrer",className:`mt-2 flex items-center gap-3 p-3 rounded-lg ${Re?"bg-green-600 hover:bg-green-700":"bg-gray-100 hover:bg-gray-200"} transition`,children:[i.jsx(Qh,{className:`w-8 h-8 ${Re?"text-white":"text-blue-600"}`}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("p",{className:`text-sm font-medium truncate ${Re?"text-white":"text-gray-800"}`,children:un}),i.jsx("p",{className:`text-xs ${Re?"text-green-100":"text-gray-500"}`,children:Ee||"Documento"})]}),i.jsx(mS,{className:`w-5 h-5 ${Re?"text-white":"text-gray-500"}`})]});case"sticker":return i.jsx("div",{className:"mt-2",children:i.jsx("img",{src:ht,alt:"Sticker",className:"w-32 h-32 object-contain",onError:fn=>{fn.target.src='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="128" height="128" viewBox="0 0 24 24" fill="none" stroke="gray" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="M8 14s1.5 2 4 2 4-2 4-2"/><line x1="9" y1="9" x2="9.01" y2="9"/><line x1="15" y1="9" x2="15.01" y2="9"/></svg>'}})});case"location":const Sn=$e?.latitude,_n=$e?.longitude,at=$e?.name,Vn=$e?.address,dn=`https://www.google.com/maps?q=${Sn},${_n}`;return i.jsx("a",{href:dn,target:"_blank",rel:"noopener noreferrer",className:`mt-2 block p-3 rounded-lg ${Re?"bg-green-600 hover:bg-green-700":"bg-gray-100 hover:bg-gray-200"} transition`,children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx("div",{className:`p-2 rounded-full ${Re?"bg-green-500":"bg-red-100"}`,children:i.jsx(RS,{className:`w-5 h-5 ${Re?"text-white":"text-red-600"}`})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[at&&i.jsx("p",{className:`font-medium ${Re?"text-white":"text-gray-800"}`,children:at}),Vn&&i.jsx("p",{className:`text-sm ${Re?"text-green-100":"text-gray-600"}`,children:Vn}),i.jsxs("p",{className:`text-xs mt-1 ${Re?"text-green-200":"text-gray-500"}`,children:[Sn?.toFixed(6),", ",_n?.toFixed(6)]})]})]})});case"contacts":const Wt=$e?.contacts||[];return i.jsxs("div",{className:`mt-2 p-3 rounded-lg ${Re?"bg-green-600":"bg-gray-100"}`,children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx(Jc,{className:`w-5 h-5 ${Re?"text-white":"text-blue-600"}`}),i.jsx("span",{className:`font-medium ${Re?"text-white":"text-gray-800"}`,children:Wt.length===1?"Contacto compartido":`${Wt.length} contactos`})]}),Wt.map((fn,Pn)=>i.jsxs("div",{className:`p-2 rounded ${Re?"bg-green-500":"bg-white"} ${Pn>0?"mt-2":""}`,children:[i.jsx("p",{className:`font-medium ${Re?"text-white":"text-gray-800"}`,children:fn.name}),fn.phones?.map((ss,Jr)=>i.jsxs("p",{className:`text-sm ${Re?"text-green-100":"text-gray-600"}`,children:[ss.phone," ",ss.type&&`(${ss.type})`]},Jr))]},Pn))]});case"reaction":const Yn=$e?.emoji||U.body;return i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(jS,{className:`w-4 h-4 ${Re?"text-white":"text-pink-500"}`}),i.jsx("span",{className:"text-2xl",children:Yn})]});default:return null}};return y?i.jsx("div",{className:"h-full flex items-center justify-center",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-500"})}):i.jsxs("div",{className:"h-screen flex",children:[i.jsxs("div",{className:"w-96 bg-white border-r border-gray-200 flex flex-col",children:[i.jsxs("div",{className:"p-4 border-b border-gray-200",children:[i.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-3",children:"Conversaciones"}),i.jsx("div",{className:`grid ${$?"grid-cols-4":"grid-cols-3"} gap-1 mb-3 bg-gray-100 p-1 rounded-xl`,children:de.map(U=>{const ce=U.icon;return i.jsxs("button",{onClick:()=>{Q(U.key),Z.current=U.key,D(U.key)},className:`flex items-center justify-center gap-1.5 py-2 rounded-lg text-xs font-semibold transition-all ${G===U.key?"bg-white text-green-700 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:[i.jsx(ce,{className:"w-3.5 h-3.5"}),U.label]},U.key)})}),i.jsx("div",{className:"flex gap-1 mb-3",children:[{key:"all",label:"Todos",icon:null,color:"gray"},{key:"whatsapp",label:"WhatsApp",icon:Qb,color:"green"},{key:"instagram",label:"Instagram",icon:Zb,color:"pink"}].map(U=>{const ce=U.icon,he=N===U.key;return i.jsxs("button",{onClick:()=>E(U.key),className:`flex items-center gap-1 px-2.5 py-1.5 rounded-lg text-xs font-medium transition-all border ${he?U.key==="whatsapp"?"bg-green-50 text-green-700 border-green-200":U.key==="instagram"?"bg-pink-50 text-pink-700 border-pink-200":"bg-indigo-50 text-indigo-700 border-indigo-200":"bg-white text-gray-500 border-gray-200 hover:bg-gray-50"}`,children:[ce&&i.jsx(ce,{className:"w-3 h-3"}),U.label]},U.key)})}),i.jsxs("div",{className:"relative",children:[i.jsx(_b,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),i.jsx("input",{type:"text",value:_,onChange:U=>C(U.target.value),placeholder:"Buscar conversacin...",className:"w-full pl-10 pr-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none"})]})]}),i.jsx("div",{className:"flex-1 overflow-y-auto",children:ne.length===0?i.jsxs("div",{className:"p-8 text-center text-gray-400",children:[i.jsx(Ln,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),i.jsx("p",{children:"No hay conversaciones"})]}):ne.map(U=>i.jsxs("button",{onClick:()=>u(U.phone),className:`w-full flex items-center gap-3 p-4 border-b border-gray-100 hover:bg-gray-50 transition text-left ${c===U.phone?"bg-green-50":""}`,children:[i.jsx("div",{className:`w-12 h-12 ${$x(U.contact_name||U.phone)} rounded-full flex items-center justify-center flex-shrink-0`,children:i.jsx("span",{className:"text-white font-semibold text-sm",children:Ux(U.contact_name,U.phone)})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("p",{className:"font-medium text-gray-800 truncate",children:U.contact_name||U.phone}),U.unread_count>0&&i.jsx("span",{className:"bg-green-500 text-white text-xs font-medium px-2 py-0.5 rounded-full",children:U.unread_count})]}),i.jsx("p",{className:"text-sm text-gray-500 truncate",children:U.last_message||"Sin mensajes"}),i.jsxs("div",{className:"flex items-center gap-1.5 mt-1 flex-wrap",children:[i.jsx(Lx,{channel:U.channel}),U.department_name&&i.jsxs("span",{className:"inline-flex items-center gap-0.5 text-[10px] px-1.5 py-0.5 rounded-full font-medium",style:{backgroundColor:(U.department_color||"#6b7280")+"20",color:U.department_color||"#6b7280"},children:[i.jsx(Lr,{className:"w-2.5 h-2.5"}),U.department_name]}),U.agent_name&&i.jsxs("span",{className:"inline-flex items-center gap-0.5 text-[10px] px-1.5 py-0.5 rounded-full bg-blue-50 text-blue-600 font-medium",children:[i.jsx(Rr,{className:"w-2.5 h-2.5"}),U.agent_name]}),!U.agent_name&&!U.department_name&&U.escalation_status==="ESCALATED"&&i.jsxs("span",{className:"inline-flex items-center gap-0.5 text-[10px] px-1.5 py-0.5 rounded-full bg-yellow-50 text-yellow-600 font-medium",children:[i.jsx(Sb,{className:"w-2.5 h-2.5"}),"Sin asignar"]}),i.jsx("span",{className:"text-xs text-gray-400",children:U.last_message_time?Fr(new Date(U.last_message_time),{addSuffix:!0,locale:as}):""})]})]})]},U.phone))})]}),i.jsx("div",{className:"flex-1 flex flex-col bg-gray-50",children:c?i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"bg-white border-b border-gray-200 p-4 flex items-center justify-between gap-4",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:`w-10 h-10 ${$x(se?.contact_name||c)} rounded-full flex items-center justify-center`,children:i.jsx("span",{className:"text-white font-semibold text-sm",children:Ux(se?.contact_name,c)})}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-gray-800",children:se?.contact_name||c}),i.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[i.jsx(Lx,{channel:se?.channel}),i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(Wc,{className:"w-3 h-3"}),c]}),se?.department_name&&i.jsxs("span",{className:"inline-flex items-center gap-0.5 text-[10px] px-1.5 py-0.5 rounded-full font-medium",style:{backgroundColor:(se.department_color||"#6b7280")+"20",color:se.department_color||"#6b7280"},children:[i.jsx(Lr,{className:"w-2.5 h-2.5"}),se.department_name]}),se?.agent_name&&i.jsxs("span",{className:"inline-flex items-center gap-0.5 text-[10px] px-1.5 py-0.5 rounded-full bg-blue-50 text-blue-600 font-medium",children:[i.jsx(Rr,{className:"w-2.5 h-2.5"}),se.agent_name]})]})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[se&&q?.id>0&&(!se.assigned_agent_id||se.assigned_agent_id!==q.id)&&i.jsxs("button",{onClick:te,className:"flex items-center gap-1.5 px-3 py-2 text-xs font-medium bg-green-50 text-green-700 hover:bg-green-100 rounded-lg border border-green-200 transition",title:"Tomar este chat",children:[i.jsx(Hr,{className:"w-4 h-4"}),"Tomar"]}),se&&i.jsxs("button",{onClick:()=>T(!0),className:"flex items-center gap-1.5 px-3 py-2 text-xs font-medium bg-gray-50 text-gray-700 hover:bg-gray-100 rounded-lg border border-gray-200 transition",title:"Asignar chat",children:[i.jsx(Hr,{className:"w-4 h-4"}),"Asignar"]}),se&&i.jsxs("button",{onClick:()=>w(!0),className:"flex items-center gap-1.5 px-3 py-2 text-xs font-medium bg-blue-50 text-blue-700 hover:bg-blue-100 rounded-lg border border-blue-200 transition",title:"Transferir chat",children:[i.jsx(qh,{className:"w-4 h-4"}),"Transferir"]}),se&&$&&i.jsxs("button",{onClick:H,className:"flex items-center gap-1.5 px-3 py-2 text-xs font-medium bg-red-50 text-red-700 hover:bg-red-100 rounded-lg border border-red-200 transition",title:"Eliminar conversacin",children:[i.jsx(jo,{className:"w-4 h-4"}),"Eliminar"]}),i.jsx("div",{className:"text-sm",children:O?i.jsxs("span",{className:"text-green-600 flex items-center gap-1",children:[i.jsx("span",{className:"w-2 h-2 bg-green-600 rounded-full"}),"Tiempo real"]}):i.jsxs("span",{className:"text-yellow-600 flex items-center gap-1",children:[i.jsx("span",{className:"w-2 h-2 bg-yellow-600 rounded-full"}),"Reconectando..."]})})]})]}),i.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[f.map((U,ce)=>i.jsx("div",{className:`flex ${U.direction==="outgoing"?"justify-end":"justify-start"}`,children:i.jsxs("div",{className:`max-w-md px-4 py-2 rounded-2xl ${U.direction==="outgoing"?"bg-green-500 text-white rounded-br-md":"bg-white text-gray-800 rounded-bl-md shadow-sm"}`,children:[U.direction==="incoming"&&i.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-400 mb-1",children:[i.jsx(Rr,{className:"w-3 h-3"}),"Cliente"]}),U.direction==="outgoing"&&U.is_bot&&i.jsxs("div",{className:"flex items-center gap-1 text-xs text-green-100 mb-1",children:[i.jsx(Yh,{className:"w-3 h-3"}),"Bot"]}),ue(U),(U.body||U.content)&&(!U.mediaType||U.mediaType==="reaction")&&i.jsx("p",{className:"whitespace-pre-wrap",children:U.body||U.content}),U.mediaType&&U.mediaType!=="reaction"&&(U.mediaCaption||U.body)&&i.jsx("p",{className:"whitespace-pre-wrap mt-2 text-sm",children:U.mediaCaption||U.body}),i.jsxs("div",{className:`flex items-center gap-1 text-xs mt-1 ${U.direction==="outgoing"?"text-white opacity-90":"text-gray-400"}`,children:[i.jsx("span",{children:U.created_at?tu(new Date(U.created_at),"HH:mm",{locale:as}):""}),U.direction==="outgoing"&&i.jsxs("span",{className:"ml-1",children:[U.status==="sent"&&"",U.status==="delivered"&&"",U.status==="read"&&i.jsx("span",{className:"text-blue-400",children:""})]})]})]})},ce)),i.jsx("div",{ref:R})]}),i.jsx("div",{className:"bg-white border-t border-gray-200 p-4",children:i.jsxs("div",{className:"flex gap-3",children:[i.jsx("input",{type:"text",value:p,onChange:L,onKeyPress:B,placeholder:"Escribe un mensaje...",className:"flex-1 px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none"}),i.jsxs("button",{onClick:W,disabled:!p.trim()||b,className:"bg-green-500 hover:bg-green-600 text-white px-6 py-3 rounded-xl transition disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[i.jsx(Eb,{className:"w-5 h-5"}),b?"Enviando...":"Enviar"]})]})})]}):i.jsx("div",{className:"flex-1 flex items-center justify-center text-gray-400",children:i.jsxs("div",{className:"text-center",children:[i.jsx(Ln,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),i.jsx("p",{className:"text-lg",children:"Selecciona una conversacin"})]})})}),z&&se&&i.jsx(f_,{sessionId:se.session_id||se.sessionId||se.id,currentAgentId:se.assigned_agent_id,currentDepartmentId:se.assigned_department_id,onClose:()=>T(!1),onAssigned:()=>D()}),k&&se&&i.jsx(h_,{sessionId:se.session_id||se.sessionId||se.id,currentAgentId:se.assigned_agent_id,currentDepartmentId:se.assigned_department_id,onClose:()=>w(!1),onTransferred:()=>D()})]})}const va="/api/visual-flows-live";async function Ft(t,a){if(!t.ok){let s=a;try{const o=await t.json();o.error&&(s=o.error)}catch{}throw new Error(s)}return t.json()}async function Fb(){const t=await fetch(va);return Ft(t,"Error al cargar flujos")}async function yh(t){const a=await fetch(`${va}/${t}`);return Ft(a,"Flujo no encontrado")}async function g_(t){const a=await fetch(va,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});return Ft(a,"Error al crear flujo")}async function x_(t,a){const s=await fetch(`${va}/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});return Ft(s,"Error al actualizar flujo")}async function y_(t){const a=await fetch(`${va}/${t}`,{method:"DELETE"});return Ft(a,"Error al eliminar flujo")}async function Wb(t,a=!0){const s=await fetch(`${va}/${t}/activate`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({active:a})});return Ft(s,"Error al activar flujo")}async function b_(t,a){const s=await fetch(`${va}/${t}/duplicate`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({new_name:a})});return Ft(s,"Error al duplicar flujo")}async function v_(){const t=await fetch(`${va}/templates/list`);return Ft(t,"Error al cargar plantillas")}async function Kb(t,a){const s=await fetch(`${va}/templates/${t}/create`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:a})});return Ft(s,"Error al crear desde plantilla")}async function w_(t={}){const a=new URLSearchParams;t.status&&a.append("status",t.status),t.category&&a.append("category",t.category),t.lang&&a.append("lang",t.lang),a.append("with","components"),a.append("limit","200");const s=await fetch(`/api/chat/templates?${a}`);return Ft(s,"Error al cargar plantillas de Meta")}async function j_({templateName:t,languageCode:a,phone:s,parameters:o=[],headerParams:c=[],buttonParams:u=[]}){const f=await fetch("/api/templates/test",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({templateName:t,languageCode:a,phone:s,parameters:o,headerParams:c,buttonParams:u})});return Ft(f,"Error al enviar plantilla de prueba")}async function N_(){const t=await fetch("/api/settings/visual-flows");return Ft(t,"Error al obtener estado de Visual Flows")}async function S_(t){const a=await fetch("/api/settings/visual-flows",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({enabled:t})});return Ft(a,"Error al cambiar estado de Visual Flows")}const Vx="whatsapp_test_phone";function __({template:t,onClose:a}){const[s,o]=j.useState(""),[c,u]=j.useState(!0),[f,m]=j.useState([]),[p,g]=j.useState([]),[y,x]=j.useState([]),[b,S]=j.useState(!1),[_,C]=j.useState(null);j.useEffect(()=>{const k=localStorage.getItem(Vx);k&&o(k)},[]),j.useEffect(()=>{if(!t?.components)return;const k=t.components.find(M=>M.type==="BODY"),w=t.components.find(M=>M.type==="HEADER"),R=t.components.filter(M=>M.type==="BUTTONS");if(k?.text){const M=k.text.match(/\{\{(\d+)\}\}/g)||[];m(M.map(()=>""))}if(w?.text){const M=w.text.match(/\{\{(\d+)\}\}/g)||[];g(M.map(()=>""))}if(R.length>0){const M=[];R.forEach(q=>{q.buttons&&q.buttons.forEach($=>{$.type==="URL"&&$.url?.includes("{{")&&M.push("")})}),x(M)}},[t]);const N=async()=>{if(!s.trim()){C({ok:!1,error:"Ingresa un nmero de telfono"});return}S(!0),C(null);try{c&&localStorage.setItem(Vx,s);const k=await j_({templateName:t.name,languageCode:t.language,phone:s.trim(),parameters:f.filter(w=>w!==""),headerParams:p.filter(w=>w!==""),buttonParams:y.filter(w=>w!=="")});C(k)}catch(k){C({ok:!1,error:k.message})}finally{S(!1)}},E=()=>{if(!t?.components)return"";const k=t.components.find(R=>R.type==="BODY");if(!k?.text)return"";let w=k.text;return f.forEach((R,M)=>{w=w.replace(`{{${M+1}}}`,R||`[param ${M+1}]`)}),w},z={APPROVED:{bg:"#dcfce7",text:"#166534"},PENDING:{bg:"#fef3c7",text:"#92400e"},REJECTED:{bg:"#fee2e2",text:"#991b1b"}},T={MARKETING:{bg:"#dbeafe",text:"#1e40af"},UTILITY:{bg:"#f3e8ff",text:"#6b21a8"},AUTHENTICATION:{bg:"#fce7f3",text:"#9d174d"}};return i.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:i.jsxs("div",{style:{background:"white",borderRadius:"16px",padding:"24px",maxWidth:"500px",width:"90%",maxHeight:"90vh",overflow:"auto"},children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"16px"},children:[i.jsxs("div",{children:[i.jsx("h2",{style:{margin:"0 0 8px 0",fontSize:"20px"},children:"Probar Plantilla"}),i.jsxs("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:[i.jsx("span",{style:{padding:"2px 8px",borderRadius:"4px",fontSize:"12px",fontWeight:"500",background:z[t.status]?.bg||"#f3f4f6",color:z[t.status]?.text||"#374151"},children:t.status}),i.jsx("span",{style:{padding:"2px 8px",borderRadius:"4px",fontSize:"12px",fontWeight:"500",background:T[t.category]?.bg||"#f3f4f6",color:T[t.category]?.text||"#374151"},children:t.category}),i.jsx("span",{style:{padding:"2px 8px",borderRadius:"4px",fontSize:"12px",background:"#f3f4f6",color:"#374151"},children:t.language})]})]}),i.jsx("button",{onClick:a,style:{background:"none",border:"none",fontSize:"24px",cursor:"pointer",color:"#6b7280"},children:""})]}),i.jsxs("div",{style:{background:"#f9fafb",padding:"12px",borderRadius:"8px",marginBottom:"16px"},children:[i.jsx("div",{style:{fontSize:"12px",color:"#6b7280",marginBottom:"4px"},children:"Nombre de la plantilla"}),i.jsx("div",{style:{fontFamily:"monospace",fontWeight:"500"},children:t.name})]}),i.jsxs("div",{style:{background:"#dcf8c6",padding:"12px",borderRadius:"8px",marginBottom:"16px",whiteSpace:"pre-wrap"},children:[i.jsx("div",{style:{fontSize:"12px",color:"#075e54",marginBottom:"4px"},children:"Vista previa"}),i.jsx("div",{style:{color:"#000"},children:E()||"(Sin contenido)"})]}),f.length>0&&i.jsxs("div",{style:{marginBottom:"16px"},children:[i.jsx("div",{style:{fontSize:"14px",fontWeight:"500",marginBottom:"8px"},children:"Parmetros del mensaje"}),f.map((k,w)=>i.jsx("input",{type:"text",placeholder:`Parmetro {{${w+1}}}`,value:k,onChange:R=>{const M=[...f];M[w]=R.target.value,m(M)},style:{width:"100%",padding:"8px 12px",border:"1px solid #d1d5db",borderRadius:"6px",marginBottom:"8px",fontSize:"14px"}},`body-${w}`))]}),p.length>0&&i.jsxs("div",{style:{marginBottom:"16px"},children:[i.jsx("div",{style:{fontSize:"14px",fontWeight:"500",marginBottom:"8px"},children:"Parmetros del encabezado"}),p.map((k,w)=>i.jsx("input",{type:"text",placeholder:`Header {{${w+1}}}`,value:k,onChange:R=>{const M=[...p];M[w]=R.target.value,g(M)},style:{width:"100%",padding:"8px 12px",border:"1px solid #d1d5db",borderRadius:"6px",marginBottom:"8px",fontSize:"14px"}},`header-${w}`))]}),y.length>0&&i.jsxs("div",{style:{marginBottom:"16px"},children:[i.jsx("div",{style:{fontSize:"14px",fontWeight:"500",marginBottom:"8px"},children:"Parmetros de botn URL"}),y.map((k,w)=>i.jsx("input",{type:"text",placeholder:`Texto dinmico del botn ${w+1}`,value:k,onChange:R=>{const M=[...y];M[w]=R.target.value,x(M)},style:{width:"100%",padding:"8px 12px",border:"1px solid #d1d5db",borderRadius:"6px",marginBottom:"8px",fontSize:"14px"}},`btn-${w}`))]}),i.jsxs("div",{style:{marginBottom:"16px"},children:[i.jsx("div",{style:{fontSize:"14px",fontWeight:"500",marginBottom:"8px"},children:"Nmero de telfono destino"}),i.jsx("input",{type:"tel",placeholder:"56912345678",value:s,onChange:k=>o(k.target.value),style:{width:"100%",padding:"8px 12px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"14px"}}),i.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",marginTop:"8px",fontSize:"13px",color:"#6b7280",cursor:"pointer"},children:[i.jsx("input",{type:"checkbox",checked:c,onChange:k=>u(k.target.checked)}),"Recordar este nmero"]})]}),_&&i.jsx("div",{style:{padding:"12px",borderRadius:"8px",marginBottom:"16px",background:_.ok?"#dcfce7":"#fee2e2",color:_.ok?"#166534":"#991b1b"},children:_.ok?i.jsxs(i.Fragment,{children:[i.jsx("div",{style:{fontWeight:"500"},children:"Enviado correctamente"}),i.jsxs("div",{style:{fontSize:"13px",marginTop:"4px"},children:["Mensaje enviado a ",_.sentTo]})]}):i.jsxs(i.Fragment,{children:[i.jsx("div",{style:{fontWeight:"500"},children:"Error al enviar"}),i.jsx("div",{style:{fontSize:"13px",marginTop:"4px"},children:_.error})]})}),i.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end"},children:[i.jsx("button",{onClick:a,style:{padding:"10px 20px",border:"1px solid #d1d5db",borderRadius:"8px",background:"white",cursor:"pointer",fontSize:"14px"},children:"Cerrar"}),i.jsx("button",{onClick:N,disabled:b||t.status!=="APPROVED",style:{padding:"10px 20px",border:"none",borderRadius:"8px",background:t.status==="APPROVED"?"#25d366":"#9ca3af",color:"white",cursor:t.status==="APPROVED"?"pointer":"not-allowed",fontSize:"14px",fontWeight:"500",display:"flex",alignItems:"center",gap:"8px"},children:b?"Enviando...":"Enviar Prueba"})]}),t.status!=="APPROVED"&&i.jsx("div",{style:{marginTop:"12px",padding:"8px",background:"#fef3c7",borderRadius:"6px",fontSize:"13px",color:"#92400e",textAlign:"center"},children:"Solo se pueden probar plantillas con estado APPROVED"})]})})}function E_(){const t=$s(),[a,s]=j.useState("flows"),[o,c]=j.useState([]),[u,f]=j.useState([]),[m,p]=j.useState([]),[g,y]=j.useState(!1),[x,b]=j.useState({status:"",category:""}),[S,_]=j.useState(null),[C,N]=j.useState(!0),[E,z]=j.useState(null),[T,k]=j.useState(null),[w,R]=j.useState(!0),[M,q]=j.useState(!1);j.useEffect(()=>{Q(),$()},[]),j.useEffect(()=>{a==="whatsapp"&&Z()},[a,x]);const $=async()=>{try{const L=await N_();R(L.enabled)}catch(L){console.error("Error loading visual flows status:",L)}},G=async()=>{try{q(!0);const W=await S_(!w);R(W.enabled),re(W.enabled?"Modo automtico ACTIVADO":"Modo automtico DESACTIVADO",W.enabled?"success":"info")}catch(L){console.error("Error toggling visual flows:",L),re(`Error: ${L.message}`,"error")}finally{q(!1)}},Q=async()=>{try{N(!0),z(null);const[L,W]=await Promise.all([Fb(),v_()]);c(L.flows||[]),f(W.templates||[])}catch(L){console.error("Error loading flows:",L),z(L.message)}finally{N(!1)}},Z=async()=>{try{y(!0);const L={};x.status&&(L.status=x.status),x.category&&(L.category=x.category);const W=await w_(L);p(W.items||[])}catch(L){console.error("Error loading Meta templates:",L),re(`Error al cargar plantillas: ${L.message}`,"error")}finally{y(!1)}},re=(L,W="success")=>{k({message:L,type:W}),setTimeout(()=>k(null),4e3)},V=async(L,W)=>{try{const B=await Kb(L,null);re(`Flujo "${W}" creado correctamente`,"success"),await Q(),B.id&&t(`/flows/builder/${B.id}`)}catch(B){console.error("Error creating from template:",B),re(`Error al crear flujo: ${B.message}`,"error")}},I=async L=>{try{const W=!L.is_active;await Wb(L.id,W),re(`Flujo "${L.name}" ${W?"activado":"desactivado"}`,"success"),await Q()}catch(W){console.error("Error toggling flow:",W),re(`Error: ${W.message}`,"error")}},O=async L=>{try{await b_(L.id,`${L.name} (copia)`),re("Flujo duplicado correctamente","success"),await Q()}catch(W){console.error("Error duplicating flow:",W),re(`Error al duplicar: ${W.message}`,"error")}},D=async L=>{if(confirm(`Ests seguro de eliminar el flujo "${L.name}"?`))try{await y_(L.id),re("Flujo eliminado correctamente","success"),await Q()}catch(W){console.error("Error deleting flow:",W),re(`Error al eliminar: ${W.message}`,"error")}},P=L=>({sales:"bg-green-100 text-green-800",support:"bg-blue-100 text-blue-800",service:"bg-purple-100 text-purple-800",feedback:"bg-yellow-100 text-yellow-800",engagement:"bg-pink-100 text-pink-800"})[L]||"bg-gray-100 text-gray-800";return C?i.jsx("div",{className:"flex items-center justify-center h-screen",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-500 mx-auto mb-4"}),i.jsx("p",{className:"text-gray-600",children:"Cargando flujos..."})]})}):E?i.jsx("div",{className:"p-8",children:i.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[i.jsx("h3",{className:"text-red-800 font-semibold mb-2",children:"Error al cargar flujos"}),i.jsx("p",{className:"text-red-600",children:E}),i.jsx("button",{onClick:Q,className:"mt-4 px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700",children:"Reintentar"})]})}):i.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[i.jsxs("div",{className:"mb-6 flex justify-between items-start",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Gestin de Flujos"}),i.jsx("p",{className:"text-gray-600",children:"Administra tus flujos conversacionales y crea nuevos desde plantillas predefinidas"})]}),i.jsxs("div",{className:`flex items-center gap-3 px-4 py-3 rounded-lg border ${w?"bg-green-50 border-green-200":"bg-gray-50 border-gray-300"}`,children:[i.jsxs("div",{className:"text-right",children:[i.jsx("p",{className:`text-sm font-medium ${w?"text-green-800":"text-gray-600"}`,children:"Modo Automtico"}),i.jsx("p",{className:`text-xs ${w?"text-green-600":"text-gray-500"}`,children:w?"Bot respondiendo":"Bot pausado"})]}),i.jsx("button",{onClick:G,disabled:M,className:`relative inline-flex h-7 w-14 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 ${w?"bg-green-500 focus:ring-green-500":"bg-gray-300 focus:ring-gray-500"} ${M?"opacity-50 cursor-wait":"cursor-pointer"}`,children:i.jsx("span",{className:`inline-block h-5 w-5 transform rounded-full bg-white shadow-md transition-transform ${w?"translate-x-8":"translate-x-1"}`})})]})]}),T&&i.jsx("div",{className:`mb-4 p-4 rounded-lg ${T.type==="success"?"bg-green-50 text-green-800 border border-green-200":T.type==="error"?"bg-red-50 text-red-800 border border-red-200":"bg-blue-50 text-blue-800 border border-blue-200"}`,children:T.message}),i.jsx("div",{className:"mb-6 border-b border-gray-200",children:i.jsxs("div",{className:"flex space-x-8",children:[i.jsxs("button",{onClick:()=>s("flows"),className:`pb-4 px-1 border-b-2 font-medium transition-colors ${a==="flows"?"border-green-500 text-green-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:["Mis Flujos (",o.length,")"]}),i.jsxs("button",{onClick:()=>s("templates"),className:`pb-4 px-1 border-b-2 font-medium transition-colors ${a==="templates"?"border-green-500 text-green-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:["Plantillas (",u.length,")"]}),i.jsxs("button",{onClick:()=>s("whatsapp"),className:`pb-4 px-1 border-b-2 font-medium transition-colors flex items-center gap-2 ${a==="whatsapp"?"border-green-500 text-green-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[i.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"currentColor",children:i.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})}),"WhatsApp Templates"]})]})}),a==="flows"&&i.jsx("div",{children:o.length===0?i.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300",children:[i.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),i.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No tienes flujos creados"}),i.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Comienza creando un flujo desde una plantilla"}),i.jsx("div",{className:"mt-6",children:i.jsx("button",{onClick:()=>s("templates"),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:"Ver Plantillas"})})]}):i.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:i.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[i.jsx("thead",{className:"bg-gray-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nombre"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estado"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estadsticas"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ltima actualizacin"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),i.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:o.map(L=>i.jsxs("tr",{className:"hover:bg-gray-50",children:[i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsx("div",{className:"flex items-center",children:i.jsxs("div",{children:[i.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[L.name,L.is_default&&i.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800",children:"Por defecto"})]}),L.description&&i.jsx("div",{className:"text-sm text-gray-500",children:L.description})]})})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsx("button",{onClick:()=>I(L),className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium cursor-pointer transition-colors ${L.is_active?"bg-green-100 text-green-800 hover:bg-green-200":"bg-gray-100 text-gray-800 hover:bg-gray-200"}`,children:L.is_active?"Activo":"Inactivo"})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:i.jsxs("div",{className:"flex flex-col space-y-1",children:[i.jsxs("span",{children:["Ejecutado: ",L.times_triggered||0," veces"]}),i.jsxs("span",{children:["Completado: ",L.times_completed||0," veces"]})]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:L.updated_at?tu(new Date(L.updated_at),"dd MMM yyyy, HH:mm",{locale:as}):"-"}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:i.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[i.jsx("button",{onClick:()=>t(`/flows/builder/${L.id}`),className:"text-blue-600 hover:text-blue-900",title:"Editar",children:i.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),i.jsx("button",{onClick:()=>O(L),className:"text-gray-600 hover:text-gray-900",title:"Duplicar",children:i.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})})}),i.jsx("button",{onClick:()=>D(L),className:"text-red-600 hover:text-red-900",title:"Eliminar",children:i.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})})]},L.id))})]})})}),a==="templates"&&i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:u.map(L=>i.jsx("div",{className:"bg-white rounded-lg shadow-md hover:shadow-lg transition-shadow overflow-hidden border border-gray-200",children:i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex items-start justify-between mb-3",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:L.name}),i.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${P(L.category)}`,children:L.category})]}),i.jsx("p",{className:"text-sm text-gray-600 mb-4 line-clamp-2",children:L.description}),i.jsxs("div",{className:"flex items-center text-sm text-gray-500 mb-4",children:[i.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"})}),i.jsxs("span",{children:[L.nodes_count," nodos"]})]}),L.features&&L.features.length>0&&i.jsx("div",{className:"flex flex-wrap gap-1 mb-4",children:L.features.map(W=>i.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-purple-50 text-purple-700 border border-purple-200",children:W},W))}),i.jsx("button",{onClick:()=>V(L.id,L.name),className:"w-full px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors font-medium",children:"Crear desde esta plantilla"})]})},L.id))}),a==="whatsapp"&&i.jsxs("div",{children:[i.jsxs("div",{className:"mb-6 flex flex-wrap gap-4 items-center",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Estado"}),i.jsxs("select",{value:x.status,onChange:L=>b({...x,status:L.target.value}),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-green-500 focus:border-green-500",children:[i.jsx("option",{value:"",children:"Todos"}),i.jsx("option",{value:"APPROVED",children:"Aprobadas"}),i.jsx("option",{value:"PENDING",children:"Pendientes"}),i.jsx("option",{value:"REJECTED",children:"Rechazadas"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Categora"}),i.jsxs("select",{value:x.category,onChange:L=>b({...x,category:L.target.value}),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-green-500 focus:border-green-500",children:[i.jsx("option",{value:"",children:"Todas"}),i.jsx("option",{value:"MARKETING",children:"Marketing"}),i.jsx("option",{value:"UTILITY",children:"Utilidad"}),i.jsx("option",{value:"AUTHENTICATION",children:"Autenticacin"})]})]}),i.jsx("div",{className:"flex-1"}),i.jsxs("div",{className:"text-sm text-gray-500",children:[m.length," plantillas encontradas"]})]}),g?i.jsxs("div",{className:"flex items-center justify-center py-12",children:[i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-green-500"}),i.jsx("span",{className:"ml-3 text-gray-600",children:"Cargando plantillas de Meta..."})]}):m.length===0?i.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300",children:[i.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),i.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No se encontraron plantillas"}),i.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Ajusta los filtros o crea plantillas en Meta Business Suite"})]}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:m.map((L,W)=>{const H=L.components?.find(se=>se.type==="BODY")?.text||"",te={APPROVED:"bg-green-100 text-green-800",PENDING:"bg-yellow-100 text-yellow-800",REJECTED:"bg-red-100 text-red-800"},ne={MARKETING:"bg-blue-100 text-blue-800",UTILITY:"bg-purple-100 text-purple-800",AUTHENTICATION:"bg-pink-100 text-pink-800"};return i.jsx("div",{className:"bg-white rounded-lg shadow-md hover:shadow-lg transition-shadow overflow-hidden border border-gray-200",children:i.jsxs("div",{className:"p-5",children:[i.jsx("div",{className:"flex items-start justify-between mb-3",children:i.jsx("h3",{className:"text-base font-semibold text-gray-900 font-mono",children:L.name})}),i.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[i.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded text-xs font-medium ${te[L.status]||"bg-gray-100 text-gray-800"}`,children:L.status}),i.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded text-xs font-medium ${ne[L.category]||"bg-gray-100 text-gray-800"}`,children:L.category}),i.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-gray-100 text-gray-800",children:L.language})]}),i.jsx("div",{className:"bg-gray-50 rounded-lg p-3 mb-4 max-h-32 overflow-y-auto",children:i.jsx("p",{className:"text-sm text-gray-700 whitespace-pre-wrap",children:H.length>200?H.substring(0,200)+"...":H||"(Sin contenido)"})}),i.jsx("button",{onClick:()=>_(L),disabled:L.status!=="APPROVED",className:`w-full px-4 py-2 rounded-lg font-medium transition-colors ${L.status==="APPROVED"?"bg-green-600 text-white hover:bg-green-700":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:L.status==="APPROVED"?"Probar Plantilla":"No disponible"})]})},`${L.name}-${L.language}-${W}`)})})]}),S&&i.jsx(__,{template:S,onClose:()=>_(null)})]})}function ut(t){if(typeof t=="string"||typeof t=="number")return""+t;let a="";if(Array.isArray(t))for(let s=0,o;s<t.length;s++)(o=ut(t[s]))!==""&&(a+=(a&&" ")+o);else for(let s in t)t[s]&&(a+=(a&&" ")+s);return a}var C_={value:()=>{}};function su(){for(var t=0,a=arguments.length,s={},o;t<a;++t){if(!(o=arguments[t]+"")||o in s||/[\s.]/.test(o))throw new Error("illegal type: "+o);s[o]=[]}return new _c(s)}function _c(t){this._=t}function T_(t,a){return t.trim().split(/^|\s+/).map(function(s){var o="",c=s.indexOf(".");if(c>=0&&(o=s.slice(c+1),s=s.slice(0,c)),s&&!a.hasOwnProperty(s))throw new Error("unknown type: "+s);return{type:s,name:o}})}_c.prototype=su.prototype={constructor:_c,on:function(t,a){var s=this._,o=T_(t+"",s),c,u=-1,f=o.length;if(arguments.length<2){for(;++u<f;)if((c=(t=o[u]).type)&&(c=M_(s[c],t.name)))return c;return}if(a!=null&&typeof a!="function")throw new Error("invalid callback: "+a);for(;++u<f;)if(c=(t=o[u]).type)s[c]=Yx(s[c],t.name,a);else if(a==null)for(c in s)s[c]=Yx(s[c],t.name,null);return this},copy:function(){var t={},a=this._;for(var s in a)t[s]=a[s].slice();return new _c(t)},call:function(t,a){if((c=arguments.length-2)>0)for(var s=new Array(c),o=0,c,u;o<c;++o)s[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(u=this._[t],o=0,c=u.length;o<c;++o)u[o].value.apply(a,s)},apply:function(t,a,s){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var o=this._[t],c=0,u=o.length;c<u;++c)o[c].value.apply(a,s)}};function M_(t,a){for(var s=0,o=t.length,c;s<o;++s)if((c=t[s]).name===a)return c.value}function Yx(t,a,s){for(var o=0,c=t.length;o<c;++o)if(t[o].name===a){t[o]=C_,t=t.slice(0,o).concat(t.slice(o+1));break}return s!=null&&t.push({name:a,value:s}),t}var bh="http://www.w3.org/1999/xhtml";const Px={svg:"http://www.w3.org/2000/svg",xhtml:bh,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function ru(t){var a=t+="",s=a.indexOf(":");return s>=0&&(a=t.slice(0,s))!=="xmlns"&&(t=t.slice(s+1)),Px.hasOwnProperty(a)?{space:Px[a],local:t}:t}function A_(t){return function(){var a=this.ownerDocument,s=this.namespaceURI;return s===bh&&a.documentElement.namespaceURI===bh?a.createElement(t):a.createElementNS(s,t)}}function k_(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Jb(t){var a=ru(t);return(a.local?k_:A_)(a)}function z_(){}function nm(t){return t==null?z_:function(){return this.querySelector(t)}}function R_(t){typeof t!="function"&&(t=nm(t));for(var a=this._groups,s=a.length,o=new Array(s),c=0;c<s;++c)for(var u=a[c],f=u.length,m=o[c]=new Array(f),p,g,y=0;y<f;++y)(p=u[y])&&(g=t.call(p,p.__data__,y,u))&&("__data__"in p&&(g.__data__=p.__data__),m[y]=g);return new Qt(o,this._parents)}function D_(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function O_(){return[]}function e1(t){return t==null?O_:function(){return this.querySelectorAll(t)}}function B_(t){return function(){return D_(t.apply(this,arguments))}}function L_(t){typeof t=="function"?t=B_(t):t=e1(t);for(var a=this._groups,s=a.length,o=[],c=[],u=0;u<s;++u)for(var f=a[u],m=f.length,p,g=0;g<m;++g)(p=f[g])&&(o.push(t.call(p,p.__data__,g,f)),c.push(p));return new Qt(o,c)}function t1(t){return function(){return this.matches(t)}}function n1(t){return function(a){return a.matches(t)}}var H_=Array.prototype.find;function $_(t){return function(){return H_.call(this.children,t)}}function U_(){return this.firstElementChild}function q_(t){return this.select(t==null?U_:$_(typeof t=="function"?t:n1(t)))}var V_=Array.prototype.filter;function Y_(){return Array.from(this.children)}function P_(t){return function(){return V_.call(this.children,t)}}function X_(t){return this.selectAll(t==null?Y_:P_(typeof t=="function"?t:n1(t)))}function I_(t){typeof t!="function"&&(t=t1(t));for(var a=this._groups,s=a.length,o=new Array(s),c=0;c<s;++c)for(var u=a[c],f=u.length,m=o[c]=[],p,g=0;g<f;++g)(p=u[g])&&t.call(p,p.__data__,g,u)&&m.push(p);return new Qt(o,this._parents)}function a1(t){return new Array(t.length)}function G_(){return new Qt(this._enter||this._groups.map(a1),this._parents)}function Hc(t,a){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=a}Hc.prototype={constructor:Hc,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,a){return this._parent.insertBefore(t,a)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function Q_(t){return function(){return t}}function Z_(t,a,s,o,c,u){for(var f=0,m,p=a.length,g=u.length;f<g;++f)(m=a[f])?(m.__data__=u[f],o[f]=m):s[f]=new Hc(t,u[f]);for(;f<p;++f)(m=a[f])&&(c[f]=m)}function F_(t,a,s,o,c,u,f){var m,p,g=new Map,y=a.length,x=u.length,b=new Array(y),S;for(m=0;m<y;++m)(p=a[m])&&(b[m]=S=f.call(p,p.__data__,m,a)+"",g.has(S)?c[m]=p:g.set(S,p));for(m=0;m<x;++m)S=f.call(t,u[m],m,u)+"",(p=g.get(S))?(o[m]=p,p.__data__=u[m],g.delete(S)):s[m]=new Hc(t,u[m]);for(m=0;m<y;++m)(p=a[m])&&g.get(b[m])===p&&(c[m]=p)}function W_(t){return t.__data__}function K_(t,a){if(!arguments.length)return Array.from(this,W_);var s=a?F_:Z_,o=this._parents,c=this._groups;typeof t!="function"&&(t=Q_(t));for(var u=c.length,f=new Array(u),m=new Array(u),p=new Array(u),g=0;g<u;++g){var y=o[g],x=c[g],b=x.length,S=J_(t.call(y,y&&y.__data__,g,o)),_=S.length,C=m[g]=new Array(_),N=f[g]=new Array(_),E=p[g]=new Array(b);s(y,x,C,N,E,S,a);for(var z=0,T=0,k,w;z<_;++z)if(k=C[z]){for(z>=T&&(T=z+1);!(w=N[T])&&++T<_;);k._next=w||null}}return f=new Qt(f,o),f._enter=m,f._exit=p,f}function J_(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function eE(){return new Qt(this._exit||this._groups.map(a1),this._parents)}function tE(t,a,s){var o=this.enter(),c=this,u=this.exit();return typeof t=="function"?(o=t(o),o&&(o=o.selection())):o=o.append(t+""),a!=null&&(c=a(c),c&&(c=c.selection())),s==null?u.remove():s(u),o&&c?o.merge(c).order():c}function nE(t){for(var a=t.selection?t.selection():t,s=this._groups,o=a._groups,c=s.length,u=o.length,f=Math.min(c,u),m=new Array(c),p=0;p<f;++p)for(var g=s[p],y=o[p],x=g.length,b=m[p]=new Array(x),S,_=0;_<x;++_)(S=g[_]||y[_])&&(b[_]=S);for(;p<c;++p)m[p]=s[p];return new Qt(m,this._parents)}function aE(){for(var t=this._groups,a=-1,s=t.length;++a<s;)for(var o=t[a],c=o.length-1,u=o[c],f;--c>=0;)(f=o[c])&&(u&&f.compareDocumentPosition(u)^4&&u.parentNode.insertBefore(f,u),u=f);return this}function sE(t){t||(t=rE);function a(x,b){return x&&b?t(x.__data__,b.__data__):!x-!b}for(var s=this._groups,o=s.length,c=new Array(o),u=0;u<o;++u){for(var f=s[u],m=f.length,p=c[u]=new Array(m),g,y=0;y<m;++y)(g=f[y])&&(p[y]=g);p.sort(a)}return new Qt(c,this._parents).order()}function rE(t,a){return t<a?-1:t>a?1:t>=a?0:NaN}function iE(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function oE(){return Array.from(this)}function lE(){for(var t=this._groups,a=0,s=t.length;a<s;++a)for(var o=t[a],c=0,u=o.length;c<u;++c){var f=o[c];if(f)return f}return null}function cE(){let t=0;for(const a of this)++t;return t}function uE(){return!this.node()}function dE(t){for(var a=this._groups,s=0,o=a.length;s<o;++s)for(var c=a[s],u=0,f=c.length,m;u<f;++u)(m=c[u])&&t.call(m,m.__data__,u,c);return this}function fE(t){return function(){this.removeAttribute(t)}}function hE(t){return function(){this.removeAttributeNS(t.space,t.local)}}function mE(t,a){return function(){this.setAttribute(t,a)}}function pE(t,a){return function(){this.setAttributeNS(t.space,t.local,a)}}function gE(t,a){return function(){var s=a.apply(this,arguments);s==null?this.removeAttribute(t):this.setAttribute(t,s)}}function xE(t,a){return function(){var s=a.apply(this,arguments);s==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,s)}}function yE(t,a){var s=ru(t);if(arguments.length<2){var o=this.node();return s.local?o.getAttributeNS(s.space,s.local):o.getAttribute(s)}return this.each((a==null?s.local?hE:fE:typeof a=="function"?s.local?xE:gE:s.local?pE:mE)(s,a))}function s1(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function bE(t){return function(){this.style.removeProperty(t)}}function vE(t,a,s){return function(){this.style.setProperty(t,a,s)}}function wE(t,a,s){return function(){var o=a.apply(this,arguments);o==null?this.style.removeProperty(t):this.style.setProperty(t,o,s)}}function jE(t,a,s){return arguments.length>1?this.each((a==null?bE:typeof a=="function"?wE:vE)(t,a,s??"")):$r(this.node(),t)}function $r(t,a){return t.style.getPropertyValue(a)||s1(t).getComputedStyle(t,null).getPropertyValue(a)}function NE(t){return function(){delete this[t]}}function SE(t,a){return function(){this[t]=a}}function _E(t,a){return function(){var s=a.apply(this,arguments);s==null?delete this[t]:this[t]=s}}function EE(t,a){return arguments.length>1?this.each((a==null?NE:typeof a=="function"?_E:SE)(t,a)):this.node()[t]}function r1(t){return t.trim().split(/^|\s+/)}function am(t){return t.classList||new i1(t)}function i1(t){this._node=t,this._names=r1(t.getAttribute("class")||"")}i1.prototype={add:function(t){var a=this._names.indexOf(t);a<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var a=this._names.indexOf(t);a>=0&&(this._names.splice(a,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function o1(t,a){for(var s=am(t),o=-1,c=a.length;++o<c;)s.add(a[o])}function l1(t,a){for(var s=am(t),o=-1,c=a.length;++o<c;)s.remove(a[o])}function CE(t){return function(){o1(this,t)}}function TE(t){return function(){l1(this,t)}}function ME(t,a){return function(){(a.apply(this,arguments)?o1:l1)(this,t)}}function AE(t,a){var s=r1(t+"");if(arguments.length<2){for(var o=am(this.node()),c=-1,u=s.length;++c<u;)if(!o.contains(s[c]))return!1;return!0}return this.each((typeof a=="function"?ME:a?CE:TE)(s,a))}function kE(){this.textContent=""}function zE(t){return function(){this.textContent=t}}function RE(t){return function(){var a=t.apply(this,arguments);this.textContent=a??""}}function DE(t){return arguments.length?this.each(t==null?kE:(typeof t=="function"?RE:zE)(t)):this.node().textContent}function OE(){this.innerHTML=""}function BE(t){return function(){this.innerHTML=t}}function LE(t){return function(){var a=t.apply(this,arguments);this.innerHTML=a??""}}function HE(t){return arguments.length?this.each(t==null?OE:(typeof t=="function"?LE:BE)(t)):this.node().innerHTML}function $E(){this.nextSibling&&this.parentNode.appendChild(this)}function UE(){return this.each($E)}function qE(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function VE(){return this.each(qE)}function YE(t){var a=typeof t=="function"?t:Jb(t);return this.select(function(){return this.appendChild(a.apply(this,arguments))})}function PE(){return null}function XE(t,a){var s=typeof t=="function"?t:Jb(t),o=a==null?PE:typeof a=="function"?a:nm(a);return this.select(function(){return this.insertBefore(s.apply(this,arguments),o.apply(this,arguments)||null)})}function IE(){var t=this.parentNode;t&&t.removeChild(this)}function GE(){return this.each(IE)}function QE(){var t=this.cloneNode(!1),a=this.parentNode;return a?a.insertBefore(t,this.nextSibling):t}function ZE(){var t=this.cloneNode(!0),a=this.parentNode;return a?a.insertBefore(t,this.nextSibling):t}function FE(t){return this.select(t?ZE:QE)}function WE(t){return arguments.length?this.property("__data__",t):this.node().__data__}function KE(t){return function(a){t.call(this,a,this.__data__)}}function JE(t){return t.trim().split(/^|\s+/).map(function(a){var s="",o=a.indexOf(".");return o>=0&&(s=a.slice(o+1),a=a.slice(0,o)),{type:a,name:s}})}function e6(t){return function(){var a=this.__on;if(a){for(var s=0,o=-1,c=a.length,u;s<c;++s)u=a[s],(!t.type||u.type===t.type)&&u.name===t.name?this.removeEventListener(u.type,u.listener,u.options):a[++o]=u;++o?a.length=o:delete this.__on}}}function t6(t,a,s){return function(){var o=this.__on,c,u=KE(a);if(o){for(var f=0,m=o.length;f<m;++f)if((c=o[f]).type===t.type&&c.name===t.name){this.removeEventListener(c.type,c.listener,c.options),this.addEventListener(c.type,c.listener=u,c.options=s),c.value=a;return}}this.addEventListener(t.type,u,s),c={type:t.type,name:t.name,value:a,listener:u,options:s},o?o.push(c):this.__on=[c]}}function n6(t,a,s){var o=JE(t+""),c,u=o.length,f;if(arguments.length<2){var m=this.node().__on;if(m){for(var p=0,g=m.length,y;p<g;++p)for(c=0,y=m[p];c<u;++c)if((f=o[c]).type===y.type&&f.name===y.name)return y.value}return}for(m=a?t6:e6,c=0;c<u;++c)this.each(m(o[c],a,s));return this}function c1(t,a,s){var o=s1(t),c=o.CustomEvent;typeof c=="function"?c=new c(a,s):(c=o.document.createEvent("Event"),s?(c.initEvent(a,s.bubbles,s.cancelable),c.detail=s.detail):c.initEvent(a,!1,!1)),t.dispatchEvent(c)}function a6(t,a){return function(){return c1(this,t,a)}}function s6(t,a){return function(){return c1(this,t,a.apply(this,arguments))}}function r6(t,a){return this.each((typeof a=="function"?s6:a6)(t,a))}function*i6(){for(var t=this._groups,a=0,s=t.length;a<s;++a)for(var o=t[a],c=0,u=o.length,f;c<u;++c)(f=o[c])&&(yield f)}var u1=[null];function Qt(t,a){this._groups=t,this._parents=a}function _o(){return new Qt([[document.documentElement]],u1)}function o6(){return this}Qt.prototype=_o.prototype={constructor:Qt,select:R_,selectAll:L_,selectChild:q_,selectChildren:X_,filter:I_,data:K_,enter:G_,exit:eE,join:tE,merge:nE,selection:o6,order:aE,sort:sE,call:iE,nodes:oE,node:lE,size:cE,empty:uE,each:dE,attr:yE,style:jE,property:EE,classed:AE,text:DE,html:HE,raise:UE,lower:VE,append:YE,insert:XE,remove:GE,clone:FE,datum:WE,on:n6,dispatch:r6,[Symbol.iterator]:i6};function It(t){return typeof t=="string"?new Qt([[document.querySelector(t)]],[document.documentElement]):new Qt([[t]],u1)}function l6(t){let a;for(;a=t.sourceEvent;)t=a;return t}function yn(t,a){if(t=l6(t),a===void 0&&(a=t.currentTarget),a){var s=a.ownerSVGElement||a;if(s.createSVGPoint){var o=s.createSVGPoint();return o.x=t.clientX,o.y=t.clientY,o=o.matrixTransform(a.getScreenCTM().inverse()),[o.x,o.y]}if(a.getBoundingClientRect){var c=a.getBoundingClientRect();return[t.clientX-c.left-a.clientLeft,t.clientY-c.top-a.clientTop]}}return[t.pageX,t.pageY]}const c6={passive:!1},lo={capture:!0,passive:!1};function Xf(t){t.stopImmediatePropagation()}function Or(t){t.preventDefault(),t.stopImmediatePropagation()}function d1(t){var a=t.document.documentElement,s=It(t).on("dragstart.drag",Or,lo);"onselectstart"in a?s.on("selectstart.drag",Or,lo):(a.__noselect=a.style.MozUserSelect,a.style.MozUserSelect="none")}function f1(t,a){var s=t.document.documentElement,o=It(t).on("dragstart.drag",null);a&&(o.on("click.drag",Or,lo),setTimeout(function(){o.on("click.drag",null)},0)),"onselectstart"in s?o.on("selectstart.drag",null):(s.style.MozUserSelect=s.__noselect,delete s.__noselect)}const ic=t=>()=>t;function vh(t,{sourceEvent:a,subject:s,target:o,identifier:c,active:u,x:f,y:m,dx:p,dy:g,dispatch:y}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:a,enumerable:!0,configurable:!0},subject:{value:s,enumerable:!0,configurable:!0},target:{value:o,enumerable:!0,configurable:!0},identifier:{value:c,enumerable:!0,configurable:!0},active:{value:u,enumerable:!0,configurable:!0},x:{value:f,enumerable:!0,configurable:!0},y:{value:m,enumerable:!0,configurable:!0},dx:{value:p,enumerable:!0,configurable:!0},dy:{value:g,enumerable:!0,configurable:!0},_:{value:y}})}vh.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function u6(t){return!t.ctrlKey&&!t.button}function d6(){return this.parentNode}function f6(t,a){return a??{x:t.x,y:t.y}}function h6(){return navigator.maxTouchPoints||"ontouchstart"in this}function h1(){var t=u6,a=d6,s=f6,o=h6,c={},u=su("start","drag","end"),f=0,m,p,g,y,x=0;function b(k){k.on("mousedown.drag",S).filter(o).on("touchstart.drag",N).on("touchmove.drag",E,c6).on("touchend.drag touchcancel.drag",z).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function S(k,w){if(!(y||!t.call(this,k,w))){var R=T(this,a.call(this,k,w),k,w,"mouse");R&&(It(k.view).on("mousemove.drag",_,lo).on("mouseup.drag",C,lo),d1(k.view),Xf(k),g=!1,m=k.clientX,p=k.clientY,R("start",k))}}function _(k){if(Or(k),!g){var w=k.clientX-m,R=k.clientY-p;g=w*w+R*R>x}c.mouse("drag",k)}function C(k){It(k.view).on("mousemove.drag mouseup.drag",null),f1(k.view,g),Or(k),c.mouse("end",k)}function N(k,w){if(t.call(this,k,w)){var R=k.changedTouches,M=a.call(this,k,w),q=R.length,$,G;for($=0;$<q;++$)(G=T(this,M,k,w,R[$].identifier,R[$]))&&(Xf(k),G("start",k,R[$]))}}function E(k){var w=k.changedTouches,R=w.length,M,q;for(M=0;M<R;++M)(q=c[w[M].identifier])&&(Or(k),q("drag",k,w[M]))}function z(k){var w=k.changedTouches,R=w.length,M,q;for(y&&clearTimeout(y),y=setTimeout(function(){y=null},500),M=0;M<R;++M)(q=c[w[M].identifier])&&(Xf(k),q("end",k,w[M]))}function T(k,w,R,M,q,$){var G=u.copy(),Q=yn($||R,w),Z,re,V;if((V=s.call(k,new vh("beforestart",{sourceEvent:R,target:b,identifier:q,active:f,x:Q[0],y:Q[1],dx:0,dy:0,dispatch:G}),M))!=null)return Z=V.x-Q[0]||0,re=V.y-Q[1]||0,function I(O,D,P){var L=Q,W;switch(O){case"start":c[q]=I,W=f++;break;case"end":delete c[q],--f;case"drag":Q=yn(P||D,w),W=f;break}G.call(O,k,new vh(O,{sourceEvent:D,subject:V,target:b,identifier:q,active:W,x:Q[0]+Z,y:Q[1]+re,dx:Q[0]-L[0],dy:Q[1]-L[1],dispatch:G}),M)}}return b.filter=function(k){return arguments.length?(t=typeof k=="function"?k:ic(!!k),b):t},b.container=function(k){return arguments.length?(a=typeof k=="function"?k:ic(k),b):a},b.subject=function(k){return arguments.length?(s=typeof k=="function"?k:ic(k),b):s},b.touchable=function(k){return arguments.length?(o=typeof k=="function"?k:ic(!!k),b):o},b.on=function(){var k=u.on.apply(u,arguments);return k===u?b:k},b.clickDistance=function(k){return arguments.length?(x=(k=+k)*k,b):Math.sqrt(x)},b}function sm(t,a,s){t.prototype=a.prototype=s,s.constructor=t}function m1(t,a){var s=Object.create(t.prototype);for(var o in a)s[o]=a[o];return s}function Eo(){}var co=.7,$c=1/co,Br="\\s*([+-]?\\d+)\\s*",uo="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Bn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",m6=/^#([0-9a-f]{3,8})$/,p6=new RegExp(`^rgb\\(${Br},${Br},${Br}\\)$`),g6=new RegExp(`^rgb\\(${Bn},${Bn},${Bn}\\)$`),x6=new RegExp(`^rgba\\(${Br},${Br},${Br},${uo}\\)$`),y6=new RegExp(`^rgba\\(${Bn},${Bn},${Bn},${uo}\\)$`),b6=new RegExp(`^hsl\\(${uo},${Bn},${Bn}\\)$`),v6=new RegExp(`^hsla\\(${uo},${Bn},${Bn},${uo}\\)$`),Xx={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};sm(Eo,Os,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Ix,formatHex:Ix,formatHex8:w6,formatHsl:j6,formatRgb:Gx,toString:Gx});function Ix(){return this.rgb().formatHex()}function w6(){return this.rgb().formatHex8()}function j6(){return p1(this).formatHsl()}function Gx(){return this.rgb().formatRgb()}function Os(t){var a,s;return t=(t+"").trim().toLowerCase(),(a=m6.exec(t))?(s=a[1].length,a=parseInt(a[1],16),s===6?Qx(a):s===3?new Ht(a>>8&15|a>>4&240,a>>4&15|a&240,(a&15)<<4|a&15,1):s===8?oc(a>>24&255,a>>16&255,a>>8&255,(a&255)/255):s===4?oc(a>>12&15|a>>8&240,a>>8&15|a>>4&240,a>>4&15|a&240,((a&15)<<4|a&15)/255):null):(a=p6.exec(t))?new Ht(a[1],a[2],a[3],1):(a=g6.exec(t))?new Ht(a[1]*255/100,a[2]*255/100,a[3]*255/100,1):(a=x6.exec(t))?oc(a[1],a[2],a[3],a[4]):(a=y6.exec(t))?oc(a[1]*255/100,a[2]*255/100,a[3]*255/100,a[4]):(a=b6.exec(t))?Wx(a[1],a[2]/100,a[3]/100,1):(a=v6.exec(t))?Wx(a[1],a[2]/100,a[3]/100,a[4]):Xx.hasOwnProperty(t)?Qx(Xx[t]):t==="transparent"?new Ht(NaN,NaN,NaN,0):null}function Qx(t){return new Ht(t>>16&255,t>>8&255,t&255,1)}function oc(t,a,s,o){return o<=0&&(t=a=s=NaN),new Ht(t,a,s,o)}function N6(t){return t instanceof Eo||(t=Os(t)),t?(t=t.rgb(),new Ht(t.r,t.g,t.b,t.opacity)):new Ht}function wh(t,a,s,o){return arguments.length===1?N6(t):new Ht(t,a,s,o??1)}function Ht(t,a,s,o){this.r=+t,this.g=+a,this.b=+s,this.opacity=+o}sm(Ht,wh,m1(Eo,{brighter(t){return t=t==null?$c:Math.pow($c,t),new Ht(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?co:Math.pow(co,t),new Ht(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Ht(Rs(this.r),Rs(this.g),Rs(this.b),Uc(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Zx,formatHex:Zx,formatHex8:S6,formatRgb:Fx,toString:Fx}));function Zx(){return`#${ks(this.r)}${ks(this.g)}${ks(this.b)}`}function S6(){return`#${ks(this.r)}${ks(this.g)}${ks(this.b)}${ks((isNaN(this.opacity)?1:this.opacity)*255)}`}function Fx(){const t=Uc(this.opacity);return`${t===1?"rgb(":"rgba("}${Rs(this.r)}, ${Rs(this.g)}, ${Rs(this.b)}${t===1?")":`, ${t})`}`}function Uc(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Rs(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function ks(t){return t=Rs(t),(t<16?"0":"")+t.toString(16)}function Wx(t,a,s,o){return o<=0?t=a=s=NaN:s<=0||s>=1?t=a=NaN:a<=0&&(t=NaN),new vn(t,a,s,o)}function p1(t){if(t instanceof vn)return new vn(t.h,t.s,t.l,t.opacity);if(t instanceof Eo||(t=Os(t)),!t)return new vn;if(t instanceof vn)return t;t=t.rgb();var a=t.r/255,s=t.g/255,o=t.b/255,c=Math.min(a,s,o),u=Math.max(a,s,o),f=NaN,m=u-c,p=(u+c)/2;return m?(a===u?f=(s-o)/m+(s<o)*6:s===u?f=(o-a)/m+2:f=(a-s)/m+4,m/=p<.5?u+c:2-u-c,f*=60):m=p>0&&p<1?0:f,new vn(f,m,p,t.opacity)}function _6(t,a,s,o){return arguments.length===1?p1(t):new vn(t,a,s,o??1)}function vn(t,a,s,o){this.h=+t,this.s=+a,this.l=+s,this.opacity=+o}sm(vn,_6,m1(Eo,{brighter(t){return t=t==null?$c:Math.pow($c,t),new vn(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?co:Math.pow(co,t),new vn(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,a=isNaN(t)||isNaN(this.s)?0:this.s,s=this.l,o=s+(s<.5?s:1-s)*a,c=2*s-o;return new Ht(If(t>=240?t-240:t+120,c,o),If(t,c,o),If(t<120?t+240:t-120,c,o),this.opacity)},clamp(){return new vn(Kx(this.h),lc(this.s),lc(this.l),Uc(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Uc(this.opacity);return`${t===1?"hsl(":"hsla("}${Kx(this.h)}, ${lc(this.s)*100}%, ${lc(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Kx(t){return t=(t||0)%360,t<0?t+360:t}function lc(t){return Math.max(0,Math.min(1,t||0))}function If(t,a,s){return(t<60?a+(s-a)*t/60:t<180?s:t<240?a+(s-a)*(240-t)/60:a)*255}const rm=t=>()=>t;function E6(t,a){return function(s){return t+s*a}}function C6(t,a,s){return t=Math.pow(t,s),a=Math.pow(a,s)-t,s=1/s,function(o){return Math.pow(t+o*a,s)}}function T6(t){return(t=+t)==1?g1:function(a,s){return s-a?C6(a,s,t):rm(isNaN(a)?s:a)}}function g1(t,a){var s=a-t;return s?E6(t,s):rm(isNaN(t)?a:t)}const qc=(function t(a){var s=T6(a);function o(c,u){var f=s((c=wh(c)).r,(u=wh(u)).r),m=s(c.g,u.g),p=s(c.b,u.b),g=g1(c.opacity,u.opacity);return function(y){return c.r=f(y),c.g=m(y),c.b=p(y),c.opacity=g(y),c+""}}return o.gamma=t,o})(1);function M6(t,a){a||(a=[]);var s=t?Math.min(a.length,t.length):0,o=a.slice(),c;return function(u){for(c=0;c<s;++c)o[c]=t[c]*(1-u)+a[c]*u;return o}}function A6(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function k6(t,a){var s=a?a.length:0,o=t?Math.min(s,t.length):0,c=new Array(o),u=new Array(s),f;for(f=0;f<o;++f)c[f]=so(t[f],a[f]);for(;f<s;++f)u[f]=a[f];return function(m){for(f=0;f<o;++f)u[f]=c[f](m);return u}}function z6(t,a){var s=new Date;return t=+t,a=+a,function(o){return s.setTime(t*(1-o)+a*o),s}}function zn(t,a){return t=+t,a=+a,function(s){return t*(1-s)+a*s}}function R6(t,a){var s={},o={},c;(t===null||typeof t!="object")&&(t={}),(a===null||typeof a!="object")&&(a={});for(c in a)c in t?s[c]=so(t[c],a[c]):o[c]=a[c];return function(u){for(c in s)o[c]=s[c](u);return o}}var jh=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Gf=new RegExp(jh.source,"g");function D6(t){return function(){return t}}function O6(t){return function(a){return t(a)+""}}function x1(t,a){var s=jh.lastIndex=Gf.lastIndex=0,o,c,u,f=-1,m=[],p=[];for(t=t+"",a=a+"";(o=jh.exec(t))&&(c=Gf.exec(a));)(u=c.index)>s&&(u=a.slice(s,u),m[f]?m[f]+=u:m[++f]=u),(o=o[0])===(c=c[0])?m[f]?m[f]+=c:m[++f]=c:(m[++f]=null,p.push({i:f,x:zn(o,c)})),s=Gf.lastIndex;return s<a.length&&(u=a.slice(s),m[f]?m[f]+=u:m[++f]=u),m.length<2?p[0]?O6(p[0].x):D6(a):(a=p.length,function(g){for(var y=0,x;y<a;++y)m[(x=p[y]).i]=x.x(g);return m.join("")})}function so(t,a){var s=typeof a,o;return a==null||s==="boolean"?rm(a):(s==="number"?zn:s==="string"?(o=Os(a))?(a=o,qc):x1:a instanceof Os?qc:a instanceof Date?z6:A6(a)?M6:Array.isArray(a)?k6:typeof a.valueOf!="function"&&typeof a.toString!="function"||isNaN(a)?R6:zn)(t,a)}var Jx=180/Math.PI,Nh={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function y1(t,a,s,o,c,u){var f,m,p;return(f=Math.sqrt(t*t+a*a))&&(t/=f,a/=f),(p=t*s+a*o)&&(s-=t*p,o-=a*p),(m=Math.sqrt(s*s+o*o))&&(s/=m,o/=m,p/=m),t*o<a*s&&(t=-t,a=-a,p=-p,f=-f),{translateX:c,translateY:u,rotate:Math.atan2(a,t)*Jx,skewX:Math.atan(p)*Jx,scaleX:f,scaleY:m}}var cc;function B6(t){const a=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return a.isIdentity?Nh:y1(a.a,a.b,a.c,a.d,a.e,a.f)}function L6(t){return t==null||(cc||(cc=document.createElementNS("http://www.w3.org/2000/svg","g")),cc.setAttribute("transform",t),!(t=cc.transform.baseVal.consolidate()))?Nh:(t=t.matrix,y1(t.a,t.b,t.c,t.d,t.e,t.f))}function b1(t,a,s,o){function c(g){return g.length?g.pop()+" ":""}function u(g,y,x,b,S,_){if(g!==x||y!==b){var C=S.push("translate(",null,a,null,s);_.push({i:C-4,x:zn(g,x)},{i:C-2,x:zn(y,b)})}else(x||b)&&S.push("translate("+x+a+b+s)}function f(g,y,x,b){g!==y?(g-y>180?y+=360:y-g>180&&(g+=360),b.push({i:x.push(c(x)+"rotate(",null,o)-2,x:zn(g,y)})):y&&x.push(c(x)+"rotate("+y+o)}function m(g,y,x,b){g!==y?b.push({i:x.push(c(x)+"skewX(",null,o)-2,x:zn(g,y)}):y&&x.push(c(x)+"skewX("+y+o)}function p(g,y,x,b,S,_){if(g!==x||y!==b){var C=S.push(c(S)+"scale(",null,",",null,")");_.push({i:C-4,x:zn(g,x)},{i:C-2,x:zn(y,b)})}else(x!==1||b!==1)&&S.push(c(S)+"scale("+x+","+b+")")}return function(g,y){var x=[],b=[];return g=t(g),y=t(y),u(g.translateX,g.translateY,y.translateX,y.translateY,x,b),f(g.rotate,y.rotate,x,b),m(g.skewX,y.skewX,x,b),p(g.scaleX,g.scaleY,y.scaleX,y.scaleY,x,b),g=y=null,function(S){for(var _=-1,C=b.length,N;++_<C;)x[(N=b[_]).i]=N.x(S);return x.join("")}}}var H6=b1(B6,"px, ","px)","deg)"),$6=b1(L6,", ",")",")"),U6=1e-12;function ey(t){return((t=Math.exp(t))+1/t)/2}function q6(t){return((t=Math.exp(t))-1/t)/2}function V6(t){return((t=Math.exp(2*t))-1)/(t+1)}const Ec=(function t(a,s,o){function c(u,f){var m=u[0],p=u[1],g=u[2],y=f[0],x=f[1],b=f[2],S=y-m,_=x-p,C=S*S+_*_,N,E;if(C<U6)E=Math.log(b/g)/a,N=function(M){return[m+M*S,p+M*_,g*Math.exp(a*M*E)]};else{var z=Math.sqrt(C),T=(b*b-g*g+o*C)/(2*g*s*z),k=(b*b-g*g-o*C)/(2*b*s*z),w=Math.log(Math.sqrt(T*T+1)-T),R=Math.log(Math.sqrt(k*k+1)-k);E=(R-w)/a,N=function(M){var q=M*E,$=ey(w),G=g/(s*z)*($*V6(a*q+w)-q6(w));return[m+G*S,p+G*_,g*$/ey(a*q+w)]}}return N.duration=E*1e3*a/Math.SQRT2,N}return c.rho=function(u){var f=Math.max(.001,+u),m=f*f,p=m*m;return t(f,m,p)},c})(Math.SQRT2,2,4);var Ur=0,no=0,Wi=0,v1=1e3,Vc,ao,Yc=0,Bs=0,iu=0,fo=typeof performance=="object"&&performance.now?performance:Date,w1=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function im(){return Bs||(w1(Y6),Bs=fo.now()+iu)}function Y6(){Bs=0}function Pc(){this._call=this._time=this._next=null}Pc.prototype=j1.prototype={constructor:Pc,restart:function(t,a,s){if(typeof t!="function")throw new TypeError("callback is not a function");s=(s==null?im():+s)+(a==null?0:+a),!this._next&&ao!==this&&(ao?ao._next=this:Vc=this,ao=this),this._call=t,this._time=s,Sh()},stop:function(){this._call&&(this._call=null,this._time=1/0,Sh())}};function j1(t,a,s){var o=new Pc;return o.restart(t,a,s),o}function P6(){im(),++Ur;for(var t=Vc,a;t;)(a=Bs-t._time)>=0&&t._call.call(void 0,a),t=t._next;--Ur}function ty(){Bs=(Yc=fo.now())+iu,Ur=no=0;try{P6()}finally{Ur=0,I6(),Bs=0}}function X6(){var t=fo.now(),a=t-Yc;a>v1&&(iu-=a,Yc=t)}function I6(){for(var t,a=Vc,s,o=1/0;a;)a._call?(o>a._time&&(o=a._time),t=a,a=a._next):(s=a._next,a._next=null,a=t?t._next=s:Vc=s);ao=t,Sh(o)}function Sh(t){if(!Ur){no&&(no=clearTimeout(no));var a=t-Bs;a>24?(t<1/0&&(no=setTimeout(ty,t-fo.now()-iu)),Wi&&(Wi=clearInterval(Wi))):(Wi||(Yc=fo.now(),Wi=setInterval(X6,v1)),Ur=1,w1(ty))}}function ny(t,a,s){var o=new Pc;return a=a==null?0:+a,o.restart(c=>{o.stop(),t(c+a)},a,s),o}var G6=su("start","end","cancel","interrupt"),Q6=[],N1=0,ay=1,_h=2,Cc=3,sy=4,Eh=5,Tc=6;function ou(t,a,s,o,c,u){var f=t.__transition;if(!f)t.__transition={};else if(s in f)return;Z6(t,s,{name:a,index:o,group:c,on:G6,tween:Q6,time:u.time,delay:u.delay,duration:u.duration,ease:u.ease,timer:null,state:N1})}function om(t,a){var s=Nn(t,a);if(s.state>N1)throw new Error("too late; already scheduled");return s}function Un(t,a){var s=Nn(t,a);if(s.state>Cc)throw new Error("too late; already running");return s}function Nn(t,a){var s=t.__transition;if(!s||!(s=s[a]))throw new Error("transition not found");return s}function Z6(t,a,s){var o=t.__transition,c;o[a]=s,s.timer=j1(u,0,s.time);function u(g){s.state=ay,s.timer.restart(f,s.delay,s.time),s.delay<=g&&f(g-s.delay)}function f(g){var y,x,b,S;if(s.state!==ay)return p();for(y in o)if(S=o[y],S.name===s.name){if(S.state===Cc)return ny(f);S.state===sy?(S.state=Tc,S.timer.stop(),S.on.call("interrupt",t,t.__data__,S.index,S.group),delete o[y]):+y<a&&(S.state=Tc,S.timer.stop(),S.on.call("cancel",t,t.__data__,S.index,S.group),delete o[y])}if(ny(function(){s.state===Cc&&(s.state=sy,s.timer.restart(m,s.delay,s.time),m(g))}),s.state=_h,s.on.call("start",t,t.__data__,s.index,s.group),s.state===_h){for(s.state=Cc,c=new Array(b=s.tween.length),y=0,x=-1;y<b;++y)(S=s.tween[y].value.call(t,t.__data__,s.index,s.group))&&(c[++x]=S);c.length=x+1}}function m(g){for(var y=g<s.duration?s.ease.call(null,g/s.duration):(s.timer.restart(p),s.state=Eh,1),x=-1,b=c.length;++x<b;)c[x].call(t,y);s.state===Eh&&(s.on.call("end",t,t.__data__,s.index,s.group),p())}function p(){s.state=Tc,s.timer.stop(),delete o[a];for(var g in o)return;delete t.__transition}}function Mc(t,a){var s=t.__transition,o,c,u=!0,f;if(s){a=a==null?null:a+"";for(f in s){if((o=s[f]).name!==a){u=!1;continue}c=o.state>_h&&o.state<Eh,o.state=Tc,o.timer.stop(),o.on.call(c?"interrupt":"cancel",t,t.__data__,o.index,o.group),delete s[f]}u&&delete t.__transition}}function F6(t){return this.each(function(){Mc(this,t)})}function W6(t,a){var s,o;return function(){var c=Un(this,t),u=c.tween;if(u!==s){o=s=u;for(var f=0,m=o.length;f<m;++f)if(o[f].name===a){o=o.slice(),o.splice(f,1);break}}c.tween=o}}function K6(t,a,s){var o,c;if(typeof s!="function")throw new Error;return function(){var u=Un(this,t),f=u.tween;if(f!==o){c=(o=f).slice();for(var m={name:a,value:s},p=0,g=c.length;p<g;++p)if(c[p].name===a){c[p]=m;break}p===g&&c.push(m)}u.tween=c}}function J6(t,a){var s=this._id;if(t+="",arguments.length<2){for(var o=Nn(this.node(),s).tween,c=0,u=o.length,f;c<u;++c)if((f=o[c]).name===t)return f.value;return null}return this.each((a==null?W6:K6)(s,t,a))}function lm(t,a,s){var o=t._id;return t.each(function(){var c=Un(this,o);(c.value||(c.value={}))[a]=s.apply(this,arguments)}),function(c){return Nn(c,o).value[a]}}function S1(t,a){var s;return(typeof a=="number"?zn:a instanceof Os?qc:(s=Os(a))?(a=s,qc):x1)(t,a)}function eC(t){return function(){this.removeAttribute(t)}}function tC(t){return function(){this.removeAttributeNS(t.space,t.local)}}function nC(t,a,s){var o,c=s+"",u;return function(){var f=this.getAttribute(t);return f===c?null:f===o?u:u=a(o=f,s)}}function aC(t,a,s){var o,c=s+"",u;return function(){var f=this.getAttributeNS(t.space,t.local);return f===c?null:f===o?u:u=a(o=f,s)}}function sC(t,a,s){var o,c,u;return function(){var f,m=s(this),p;return m==null?void this.removeAttribute(t):(f=this.getAttribute(t),p=m+"",f===p?null:f===o&&p===c?u:(c=p,u=a(o=f,m)))}}function rC(t,a,s){var o,c,u;return function(){var f,m=s(this),p;return m==null?void this.removeAttributeNS(t.space,t.local):(f=this.getAttributeNS(t.space,t.local),p=m+"",f===p?null:f===o&&p===c?u:(c=p,u=a(o=f,m)))}}function iC(t,a){var s=ru(t),o=s==="transform"?$6:S1;return this.attrTween(t,typeof a=="function"?(s.local?rC:sC)(s,o,lm(this,"attr."+t,a)):a==null?(s.local?tC:eC)(s):(s.local?aC:nC)(s,o,a))}function oC(t,a){return function(s){this.setAttribute(t,a.call(this,s))}}function lC(t,a){return function(s){this.setAttributeNS(t.space,t.local,a.call(this,s))}}function cC(t,a){var s,o;function c(){var u=a.apply(this,arguments);return u!==o&&(s=(o=u)&&lC(t,u)),s}return c._value=a,c}function uC(t,a){var s,o;function c(){var u=a.apply(this,arguments);return u!==o&&(s=(o=u)&&oC(t,u)),s}return c._value=a,c}function dC(t,a){var s="attr."+t;if(arguments.length<2)return(s=this.tween(s))&&s._value;if(a==null)return this.tween(s,null);if(typeof a!="function")throw new Error;var o=ru(t);return this.tween(s,(o.local?cC:uC)(o,a))}function fC(t,a){return function(){om(this,t).delay=+a.apply(this,arguments)}}function hC(t,a){return a=+a,function(){om(this,t).delay=a}}function mC(t){var a=this._id;return arguments.length?this.each((typeof t=="function"?fC:hC)(a,t)):Nn(this.node(),a).delay}function pC(t,a){return function(){Un(this,t).duration=+a.apply(this,arguments)}}function gC(t,a){return a=+a,function(){Un(this,t).duration=a}}function xC(t){var a=this._id;return arguments.length?this.each((typeof t=="function"?pC:gC)(a,t)):Nn(this.node(),a).duration}function yC(t,a){if(typeof a!="function")throw new Error;return function(){Un(this,t).ease=a}}function bC(t){var a=this._id;return arguments.length?this.each(yC(a,t)):Nn(this.node(),a).ease}function vC(t,a){return function(){var s=a.apply(this,arguments);if(typeof s!="function")throw new Error;Un(this,t).ease=s}}function wC(t){if(typeof t!="function")throw new Error;return this.each(vC(this._id,t))}function jC(t){typeof t!="function"&&(t=t1(t));for(var a=this._groups,s=a.length,o=new Array(s),c=0;c<s;++c)for(var u=a[c],f=u.length,m=o[c]=[],p,g=0;g<f;++g)(p=u[g])&&t.call(p,p.__data__,g,u)&&m.push(p);return new ya(o,this._parents,this._name,this._id)}function NC(t){if(t._id!==this._id)throw new Error;for(var a=this._groups,s=t._groups,o=a.length,c=s.length,u=Math.min(o,c),f=new Array(o),m=0;m<u;++m)for(var p=a[m],g=s[m],y=p.length,x=f[m]=new Array(y),b,S=0;S<y;++S)(b=p[S]||g[S])&&(x[S]=b);for(;m<o;++m)f[m]=a[m];return new ya(f,this._parents,this._name,this._id)}function SC(t){return(t+"").trim().split(/^|\s+/).every(function(a){var s=a.indexOf(".");return s>=0&&(a=a.slice(0,s)),!a||a==="start"})}function _C(t,a,s){var o,c,u=SC(a)?om:Un;return function(){var f=u(this,t),m=f.on;m!==o&&(c=(o=m).copy()).on(a,s),f.on=c}}function EC(t,a){var s=this._id;return arguments.length<2?Nn(this.node(),s).on.on(t):this.each(_C(s,t,a))}function CC(t){return function(){var a=this.parentNode;for(var s in this.__transition)if(+s!==t)return;a&&a.removeChild(this)}}function TC(){return this.on("end.remove",CC(this._id))}function MC(t){var a=this._name,s=this._id;typeof t!="function"&&(t=nm(t));for(var o=this._groups,c=o.length,u=new Array(c),f=0;f<c;++f)for(var m=o[f],p=m.length,g=u[f]=new Array(p),y,x,b=0;b<p;++b)(y=m[b])&&(x=t.call(y,y.__data__,b,m))&&("__data__"in y&&(x.__data__=y.__data__),g[b]=x,ou(g[b],a,s,b,g,Nn(y,s)));return new ya(u,this._parents,a,s)}function AC(t){var a=this._name,s=this._id;typeof t!="function"&&(t=e1(t));for(var o=this._groups,c=o.length,u=[],f=[],m=0;m<c;++m)for(var p=o[m],g=p.length,y,x=0;x<g;++x)if(y=p[x]){for(var b=t.call(y,y.__data__,x,p),S,_=Nn(y,s),C=0,N=b.length;C<N;++C)(S=b[C])&&ou(S,a,s,C,b,_);u.push(b),f.push(y)}return new ya(u,f,a,s)}var kC=_o.prototype.constructor;function zC(){return new kC(this._groups,this._parents)}function RC(t,a){var s,o,c;return function(){var u=$r(this,t),f=(this.style.removeProperty(t),$r(this,t));return u===f?null:u===s&&f===o?c:c=a(s=u,o=f)}}function _1(t){return function(){this.style.removeProperty(t)}}function DC(t,a,s){var o,c=s+"",u;return function(){var f=$r(this,t);return f===c?null:f===o?u:u=a(o=f,s)}}function OC(t,a,s){var o,c,u;return function(){var f=$r(this,t),m=s(this),p=m+"";return m==null&&(p=m=(this.style.removeProperty(t),$r(this,t))),f===p?null:f===o&&p===c?u:(c=p,u=a(o=f,m))}}function BC(t,a){var s,o,c,u="style."+a,f="end."+u,m;return function(){var p=Un(this,t),g=p.on,y=p.value[u]==null?m||(m=_1(a)):void 0;(g!==s||c!==y)&&(o=(s=g).copy()).on(f,c=y),p.on=o}}function LC(t,a,s){var o=(t+="")=="transform"?H6:S1;return a==null?this.styleTween(t,RC(t,o)).on("end.style."+t,_1(t)):typeof a=="function"?this.styleTween(t,OC(t,o,lm(this,"style."+t,a))).each(BC(this._id,t)):this.styleTween(t,DC(t,o,a),s).on("end.style."+t,null)}function HC(t,a,s){return function(o){this.style.setProperty(t,a.call(this,o),s)}}function $C(t,a,s){var o,c;function u(){var f=a.apply(this,arguments);return f!==c&&(o=(c=f)&&HC(t,f,s)),o}return u._value=a,u}function UC(t,a,s){var o="style."+(t+="");if(arguments.length<2)return(o=this.tween(o))&&o._value;if(a==null)return this.tween(o,null);if(typeof a!="function")throw new Error;return this.tween(o,$C(t,a,s??""))}function qC(t){return function(){this.textContent=t}}function VC(t){return function(){var a=t(this);this.textContent=a??""}}function YC(t){return this.tween("text",typeof t=="function"?VC(lm(this,"text",t)):qC(t==null?"":t+""))}function PC(t){return function(a){this.textContent=t.call(this,a)}}function XC(t){var a,s;function o(){var c=t.apply(this,arguments);return c!==s&&(a=(s=c)&&PC(c)),a}return o._value=t,o}function IC(t){var a="text";if(arguments.length<1)return(a=this.tween(a))&&a._value;if(t==null)return this.tween(a,null);if(typeof t!="function")throw new Error;return this.tween(a,XC(t))}function GC(){for(var t=this._name,a=this._id,s=E1(),o=this._groups,c=o.length,u=0;u<c;++u)for(var f=o[u],m=f.length,p,g=0;g<m;++g)if(p=f[g]){var y=Nn(p,a);ou(p,t,s,g,f,{time:y.time+y.delay+y.duration,delay:0,duration:y.duration,ease:y.ease})}return new ya(o,this._parents,t,s)}function QC(){var t,a,s=this,o=s._id,c=s.size();return new Promise(function(u,f){var m={value:f},p={value:function(){--c===0&&u()}};s.each(function(){var g=Un(this,o),y=g.on;y!==t&&(a=(t=y).copy(),a._.cancel.push(m),a._.interrupt.push(m),a._.end.push(p)),g.on=a}),c===0&&u()})}var ZC=0;function ya(t,a,s,o){this._groups=t,this._parents=a,this._name=s,this._id=o}function E1(){return++ZC}var fa=_o.prototype;ya.prototype={constructor:ya,select:MC,selectAll:AC,selectChild:fa.selectChild,selectChildren:fa.selectChildren,filter:jC,merge:NC,selection:zC,transition:GC,call:fa.call,nodes:fa.nodes,node:fa.node,size:fa.size,empty:fa.empty,each:fa.each,on:EC,attr:iC,attrTween:dC,style:LC,styleTween:UC,text:YC,textTween:IC,remove:TC,tween:J6,delay:mC,duration:xC,ease:bC,easeVarying:wC,end:QC,[Symbol.iterator]:fa[Symbol.iterator]};function FC(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var WC={time:null,delay:0,duration:250,ease:FC};function KC(t,a){for(var s;!(s=t.__transition)||!(s=s[a]);)if(!(t=t.parentNode))throw new Error(`transition ${a} not found`);return s}function JC(t){var a,s;t instanceof ya?(a=t._id,t=t._name):(a=E1(),(s=WC).time=im(),t=t==null?null:t+"");for(var o=this._groups,c=o.length,u=0;u<c;++u)for(var f=o[u],m=f.length,p,g=0;g<m;++g)(p=f[g])&&ou(p,t,a,g,f,s||KC(p,a));return new ya(o,this._parents,t,a)}_o.prototype.interrupt=F6;_o.prototype.transition=JC;const uc=t=>()=>t;function e8(t,{sourceEvent:a,target:s,transform:o,dispatch:c}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:a,enumerable:!0,configurable:!0},target:{value:s,enumerable:!0,configurable:!0},transform:{value:o,enumerable:!0,configurable:!0},_:{value:c}})}function ma(t,a,s){this.k=t,this.x=a,this.y=s}ma.prototype={constructor:ma,scale:function(t){return t===1?this:new ma(this.k*t,this.x,this.y)},translate:function(t,a){return t===0&a===0?this:new ma(this.k,this.x+this.k*t,this.y+this.k*a)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var lu=new ma(1,0,0);C1.prototype=ma.prototype;function C1(t){for(;!t.__zoom;)if(!(t=t.parentNode))return lu;return t.__zoom}function Qf(t){t.stopImmediatePropagation()}function Ki(t){t.preventDefault(),t.stopImmediatePropagation()}function t8(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function n8(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function ry(){return this.__zoom||lu}function a8(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function s8(){return navigator.maxTouchPoints||"ontouchstart"in this}function r8(t,a,s){var o=t.invertX(a[0][0])-s[0][0],c=t.invertX(a[1][0])-s[1][0],u=t.invertY(a[0][1])-s[0][1],f=t.invertY(a[1][1])-s[1][1];return t.translate(c>o?(o+c)/2:Math.min(0,o)||Math.max(0,c),f>u?(u+f)/2:Math.min(0,u)||Math.max(0,f))}function T1(){var t=t8,a=n8,s=r8,o=a8,c=s8,u=[0,1/0],f=[[-1/0,-1/0],[1/0,1/0]],m=250,p=Ec,g=su("start","zoom","end"),y,x,b,S=500,_=150,C=0,N=10;function E(V){V.property("__zoom",ry).on("wheel.zoom",q,{passive:!1}).on("mousedown.zoom",$).on("dblclick.zoom",G).filter(c).on("touchstart.zoom",Q).on("touchmove.zoom",Z).on("touchend.zoom touchcancel.zoom",re).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}E.transform=function(V,I,O,D){var P=V.selection?V.selection():V;P.property("__zoom",ry),V!==P?w(V,I,O,D):P.interrupt().each(function(){R(this,arguments).event(D).start().zoom(null,typeof I=="function"?I.apply(this,arguments):I).end()})},E.scaleBy=function(V,I,O,D){E.scaleTo(V,function(){var P=this.__zoom.k,L=typeof I=="function"?I.apply(this,arguments):I;return P*L},O,D)},E.scaleTo=function(V,I,O,D){E.transform(V,function(){var P=a.apply(this,arguments),L=this.__zoom,W=O==null?k(P):typeof O=="function"?O.apply(this,arguments):O,B=L.invert(W),H=typeof I=="function"?I.apply(this,arguments):I;return s(T(z(L,H),W,B),P,f)},O,D)},E.translateBy=function(V,I,O,D){E.transform(V,function(){return s(this.__zoom.translate(typeof I=="function"?I.apply(this,arguments):I,typeof O=="function"?O.apply(this,arguments):O),a.apply(this,arguments),f)},null,D)},E.translateTo=function(V,I,O,D,P){E.transform(V,function(){var L=a.apply(this,arguments),W=this.__zoom,B=D==null?k(L):typeof D=="function"?D.apply(this,arguments):D;return s(lu.translate(B[0],B[1]).scale(W.k).translate(typeof I=="function"?-I.apply(this,arguments):-I,typeof O=="function"?-O.apply(this,arguments):-O),L,f)},D,P)};function z(V,I){return I=Math.max(u[0],Math.min(u[1],I)),I===V.k?V:new ma(I,V.x,V.y)}function T(V,I,O){var D=I[0]-O[0]*V.k,P=I[1]-O[1]*V.k;return D===V.x&&P===V.y?V:new ma(V.k,D,P)}function k(V){return[(+V[0][0]+ +V[1][0])/2,(+V[0][1]+ +V[1][1])/2]}function w(V,I,O,D){V.on("start.zoom",function(){R(this,arguments).event(D).start()}).on("interrupt.zoom end.zoom",function(){R(this,arguments).event(D).end()}).tween("zoom",function(){var P=this,L=arguments,W=R(P,L).event(D),B=a.apply(P,L),H=O==null?k(B):typeof O=="function"?O.apply(P,L):O,te=Math.max(B[1][0]-B[0][0],B[1][1]-B[0][1]),ne=P.__zoom,se=typeof I=="function"?I.apply(P,L):I,de=p(ne.invert(H).concat(te/ne.k),se.invert(H).concat(te/se.k));return function(ue){if(ue===1)ue=se;else{var U=de(ue),ce=te/U[2];ue=new ma(ce,H[0]-U[0]*ce,H[1]-U[1]*ce)}W.zoom(null,ue)}})}function R(V,I,O){return!O&&V.__zooming||new M(V,I)}function M(V,I){this.that=V,this.args=I,this.active=0,this.sourceEvent=null,this.extent=a.apply(V,I),this.taps=0}M.prototype={event:function(V){return V&&(this.sourceEvent=V),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(V,I){return this.mouse&&V!=="mouse"&&(this.mouse[1]=I.invert(this.mouse[0])),this.touch0&&V!=="touch"&&(this.touch0[1]=I.invert(this.touch0[0])),this.touch1&&V!=="touch"&&(this.touch1[1]=I.invert(this.touch1[0])),this.that.__zoom=I,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(V){var I=It(this.that).datum();g.call(V,this.that,new e8(V,{sourceEvent:this.sourceEvent,target:E,transform:this.that.__zoom,dispatch:g}),I)}};function q(V,...I){if(!t.apply(this,arguments))return;var O=R(this,I).event(V),D=this.__zoom,P=Math.max(u[0],Math.min(u[1],D.k*Math.pow(2,o.apply(this,arguments)))),L=yn(V);if(O.wheel)(O.mouse[0][0]!==L[0]||O.mouse[0][1]!==L[1])&&(O.mouse[1]=D.invert(O.mouse[0]=L)),clearTimeout(O.wheel);else{if(D.k===P)return;O.mouse=[L,D.invert(L)],Mc(this),O.start()}Ki(V),O.wheel=setTimeout(W,_),O.zoom("mouse",s(T(z(D,P),O.mouse[0],O.mouse[1]),O.extent,f));function W(){O.wheel=null,O.end()}}function $(V,...I){if(b||!t.apply(this,arguments))return;var O=V.currentTarget,D=R(this,I,!0).event(V),P=It(V.view).on("mousemove.zoom",H,!0).on("mouseup.zoom",te,!0),L=yn(V,O),W=V.clientX,B=V.clientY;d1(V.view),Qf(V),D.mouse=[L,this.__zoom.invert(L)],Mc(this),D.start();function H(ne){if(Ki(ne),!D.moved){var se=ne.clientX-W,de=ne.clientY-B;D.moved=se*se+de*de>C}D.event(ne).zoom("mouse",s(T(D.that.__zoom,D.mouse[0]=yn(ne,O),D.mouse[1]),D.extent,f))}function te(ne){P.on("mousemove.zoom mouseup.zoom",null),f1(ne.view,D.moved),Ki(ne),D.event(ne).end()}}function G(V,...I){if(t.apply(this,arguments)){var O=this.__zoom,D=yn(V.changedTouches?V.changedTouches[0]:V,this),P=O.invert(D),L=O.k*(V.shiftKey?.5:2),W=s(T(z(O,L),D,P),a.apply(this,I),f);Ki(V),m>0?It(this).transition().duration(m).call(w,W,D,V):It(this).call(E.transform,W,D,V)}}function Q(V,...I){if(t.apply(this,arguments)){var O=V.touches,D=O.length,P=R(this,I,V.changedTouches.length===D).event(V),L,W,B,H;for(Qf(V),W=0;W<D;++W)B=O[W],H=yn(B,this),H=[H,this.__zoom.invert(H),B.identifier],P.touch0?!P.touch1&&P.touch0[2]!==H[2]&&(P.touch1=H,P.taps=0):(P.touch0=H,L=!0,P.taps=1+!!y);y&&(y=clearTimeout(y)),L&&(P.taps<2&&(x=H[0],y=setTimeout(function(){y=null},S)),Mc(this),P.start())}}function Z(V,...I){if(this.__zooming){var O=R(this,I).event(V),D=V.changedTouches,P=D.length,L,W,B,H;for(Ki(V),L=0;L<P;++L)W=D[L],B=yn(W,this),O.touch0&&O.touch0[2]===W.identifier?O.touch0[0]=B:O.touch1&&O.touch1[2]===W.identifier&&(O.touch1[0]=B);if(W=O.that.__zoom,O.touch1){var te=O.touch0[0],ne=O.touch0[1],se=O.touch1[0],de=O.touch1[1],ue=(ue=se[0]-te[0])*ue+(ue=se[1]-te[1])*ue,U=(U=de[0]-ne[0])*U+(U=de[1]-ne[1])*U;W=z(W,Math.sqrt(ue/U)),B=[(te[0]+se[0])/2,(te[1]+se[1])/2],H=[(ne[0]+de[0])/2,(ne[1]+de[1])/2]}else if(O.touch0)B=O.touch0[0],H=O.touch0[1];else return;O.zoom("touch",s(T(W,B,H),O.extent,f))}}function re(V,...I){if(this.__zooming){var O=R(this,I).event(V),D=V.changedTouches,P=D.length,L,W;for(Qf(V),b&&clearTimeout(b),b=setTimeout(function(){b=null},S),L=0;L<P;++L)W=D[L],O.touch0&&O.touch0[2]===W.identifier?delete O.touch0:O.touch1&&O.touch1[2]===W.identifier&&delete O.touch1;if(O.touch1&&!O.touch0&&(O.touch0=O.touch1,delete O.touch1),O.touch0)O.touch0[1]=this.__zoom.invert(O.touch0[0]);else if(O.end(),O.taps===2&&(W=yn(W,this),Math.hypot(x[0]-W[0],x[1]-W[1])<N)){var B=It(this).on("dblclick.zoom");B&&B.apply(this,arguments)}}}return E.wheelDelta=function(V){return arguments.length?(o=typeof V=="function"?V:uc(+V),E):o},E.filter=function(V){return arguments.length?(t=typeof V=="function"?V:uc(!!V),E):t},E.touchable=function(V){return arguments.length?(c=typeof V=="function"?V:uc(!!V),E):c},E.extent=function(V){return arguments.length?(a=typeof V=="function"?V:uc([[+V[0][0],+V[0][1]],[+V[1][0],+V[1][1]]]),E):a},E.scaleExtent=function(V){return arguments.length?(u[0]=+V[0],u[1]=+V[1],E):[u[0],u[1]]},E.translateExtent=function(V){return arguments.length?(f[0][0]=+V[0][0],f[1][0]=+V[1][0],f[0][1]=+V[0][1],f[1][1]=+V[1][1],E):[[f[0][0],f[0][1]],[f[1][0],f[1][1]]]},E.constrain=function(V){return arguments.length?(s=V,E):s},E.duration=function(V){return arguments.length?(m=+V,E):m},E.interpolate=function(V){return arguments.length?(p=V,E):p},E.on=function(){var V=g.on.apply(g,arguments);return V===g?E:V},E.clickDistance=function(V){return arguments.length?(C=(V=+V)*V,E):Math.sqrt(C)},E.tapDistance=function(V){return arguments.length?(N=+V,E):N},E}const $n={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:t=>`Node type "${t}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:t=>`The old edge with id=${t} does not exist.`,error009:t=>`Marker type "${t}" doesn't exist.`,error008:(t,{id:a,sourceHandle:s,targetHandle:o})=>`Couldn't create edge for ${t} handle id: "${t==="source"?s:o}", edge id: ${a}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:t=>`Edge type "${t}" not found. Using fallback type "default".`,error012:t=>`Node with id "${t}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(t="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${t}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",error015:()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."},ho=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],M1=["Enter"," ","Escape"],A1={"node.a11yDescription.default":"Press enter or space to select a node. Press delete to remove it and escape to cancel.","node.a11yDescription.keyboardDisabled":"Press enter or space to select a node. You can then use the arrow keys to move the node around. Press delete to remove it and escape to cancel.","node.a11yDescription.ariaLiveMessage":({direction:t,x:a,y:s})=>`Moved selected node ${t}. New position, x: ${a}, y: ${s}`,"edge.a11yDescription.default":"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel.","controls.ariaLabel":"Control Panel","controls.zoomIn.ariaLabel":"Zoom In","controls.zoomOut.ariaLabel":"Zoom Out","controls.fitView.ariaLabel":"Fit View","controls.interactive.ariaLabel":"Toggle Interactivity","minimap.ariaLabel":"Mini Map","handle.ariaLabel":"Handle"};var qr;(function(t){t.Strict="strict",t.Loose="loose"})(qr||(qr={}));var Ds;(function(t){t.Free="free",t.Vertical="vertical",t.Horizontal="horizontal"})(Ds||(Ds={}));var mo;(function(t){t.Partial="partial",t.Full="full"})(mo||(mo={}));const k1={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null,pointer:null};var Ja;(function(t){t.Bezier="default",t.Straight="straight",t.Step="step",t.SmoothStep="smoothstep",t.SimpleBezier="simplebezier"})(Ja||(Ja={}));var Xc;(function(t){t.Arrow="arrow",t.ArrowClosed="arrowclosed"})(Xc||(Xc={}));var xe;(function(t){t.Left="left",t.Top="top",t.Right="right",t.Bottom="bottom"})(xe||(xe={}));const iy={[xe.Left]:xe.Right,[xe.Right]:xe.Left,[xe.Top]:xe.Bottom,[xe.Bottom]:xe.Top};function z1(t){return t===null?null:t?"valid":"invalid"}const R1=t=>"id"in t&&"source"in t&&"target"in t,i8=t=>"id"in t&&"position"in t&&!("source"in t)&&!("target"in t),cm=t=>"id"in t&&"internals"in t&&!("source"in t)&&!("target"in t),Co=(t,a=[0,0])=>{const{width:s,height:o}=wa(t),c=t.origin??a,u=s*c[0],f=o*c[1];return{x:t.position.x-u,y:t.position.y-f}},o8=(t,a={nodeOrigin:[0,0]})=>{if(t.length===0)return{x:0,y:0,width:0,height:0};const s=t.reduce((o,c)=>{const u=typeof c=="string";let f=!a.nodeLookup&&!u?c:void 0;a.nodeLookup&&(f=u?a.nodeLookup.get(c):cm(c)?c:a.nodeLookup.get(c.id));const m=f?Ic(f,a.nodeOrigin):{x:0,y:0,x2:0,y2:0};return cu(o,m)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return uu(s)},To=(t,a={})=>{let s={x:1/0,y:1/0,x2:-1/0,y2:-1/0},o=!1;return t.forEach(c=>{(a.filter===void 0||a.filter(c))&&(s=cu(s,Ic(c)),o=!0)}),o?uu(s):{x:0,y:0,width:0,height:0}},um=(t,a,[s,o,c]=[0,0,1],u=!1,f=!1)=>{const m={...Ao(a,[s,o,c]),width:a.width/c,height:a.height/c},p=[];for(const g of t.values()){const{measured:y,selectable:x=!0,hidden:b=!1}=g;if(f&&!x||b)continue;const S=y.width??g.width??g.initialWidth??null,_=y.height??g.height??g.initialHeight??null,C=po(m,Yr(g)),N=(S??0)*(_??0),E=u&&C>0;(!g.internals.handleBounds||E||C>=N||g.dragging)&&p.push(g)}return p},l8=(t,a)=>{const s=new Set;return t.forEach(o=>{s.add(o.id)}),a.filter(o=>s.has(o.source)||s.has(o.target))};function c8(t,a){const s=new Map,o=a?.nodes?new Set(a.nodes.map(c=>c.id)):null;return t.forEach(c=>{c.measured.width&&c.measured.height&&(a?.includeHiddenNodes||!c.hidden)&&(!o||o.has(c.id))&&s.set(c.id,c)}),s}async function u8({nodes:t,width:a,height:s,panZoom:o,minZoom:c,maxZoom:u},f){if(t.size===0)return Promise.resolve(!0);const m=c8(t,f),p=To(m),g=dm(p,a,s,f?.minZoom??c,f?.maxZoom??u,f?.padding??.1);return await o.setViewport(g,{duration:f?.duration,ease:f?.ease,interpolate:f?.interpolate}),Promise.resolve(!0)}function D1({nodeId:t,nextPosition:a,nodeLookup:s,nodeOrigin:o=[0,0],nodeExtent:c,onError:u}){const f=s.get(t),m=f.parentId?s.get(f.parentId):void 0,{x:p,y:g}=m?m.internals.positionAbsolute:{x:0,y:0},y=f.origin??o;let x=f.extent||c;if(f.extent==="parent"&&!f.expandParent)if(!m)u?.("005",$n.error005());else{const S=m.measured.width,_=m.measured.height;S&&_&&(x=[[p,g],[p+S,g+_]])}else m&&Pr(f.extent)&&(x=[[f.extent[0][0]+p,f.extent[0][1]+g],[f.extent[1][0]+p,f.extent[1][1]+g]]);const b=Pr(x)?Ls(a,x,f.measured):a;return(f.measured.width===void 0||f.measured.height===void 0)&&u?.("015",$n.error015()),{position:{x:b.x-p+(f.measured.width??0)*y[0],y:b.y-g+(f.measured.height??0)*y[1]},positionAbsolute:b}}async function d8({nodesToRemove:t=[],edgesToRemove:a=[],nodes:s,edges:o,onBeforeDelete:c}){const u=new Set(t.map(b=>b.id)),f=[];for(const b of s){if(b.deletable===!1)continue;const S=u.has(b.id),_=!S&&b.parentId&&f.find(C=>C.id===b.parentId);(S||_)&&f.push(b)}const m=new Set(a.map(b=>b.id)),p=o.filter(b=>b.deletable!==!1),y=l8(f,p);for(const b of p)m.has(b.id)&&!y.find(_=>_.id===b.id)&&y.push(b);if(!c)return{edges:y,nodes:f};const x=await c({nodes:f,edges:y});return typeof x=="boolean"?x?{edges:y,nodes:f}:{edges:[],nodes:[]}:x}const Vr=(t,a=0,s=1)=>Math.min(Math.max(t,a),s),Ls=(t={x:0,y:0},a,s)=>({x:Vr(t.x,a[0][0],a[1][0]-(s?.width??0)),y:Vr(t.y,a[0][1],a[1][1]-(s?.height??0))});function O1(t,a,s){const{width:o,height:c}=wa(s),{x:u,y:f}=s.internals.positionAbsolute;return Ls(t,[[u,f],[u+o,f+c]],a)}const oy=(t,a,s)=>t<a?Vr(Math.abs(t-a),1,a)/a:t>s?-Vr(Math.abs(t-s),1,a)/a:0,B1=(t,a,s=15,o=40)=>{const c=oy(t.x,o,a.width-o)*s,u=oy(t.y,o,a.height-o)*s;return[c,u]},cu=(t,a)=>({x:Math.min(t.x,a.x),y:Math.min(t.y,a.y),x2:Math.max(t.x2,a.x2),y2:Math.max(t.y2,a.y2)}),Ch=({x:t,y:a,width:s,height:o})=>({x:t,y:a,x2:t+s,y2:a+o}),uu=({x:t,y:a,x2:s,y2:o})=>({x:t,y:a,width:s-t,height:o-a}),Yr=(t,a=[0,0])=>{const{x:s,y:o}=cm(t)?t.internals.positionAbsolute:Co(t,a);return{x:s,y:o,width:t.measured?.width??t.width??t.initialWidth??0,height:t.measured?.height??t.height??t.initialHeight??0}},Ic=(t,a=[0,0])=>{const{x:s,y:o}=cm(t)?t.internals.positionAbsolute:Co(t,a);return{x:s,y:o,x2:s+(t.measured?.width??t.width??t.initialWidth??0),y2:o+(t.measured?.height??t.height??t.initialHeight??0)}},L1=(t,a)=>uu(cu(Ch(t),Ch(a))),po=(t,a)=>{const s=Math.max(0,Math.min(t.x+t.width,a.x+a.width)-Math.max(t.x,a.x)),o=Math.max(0,Math.min(t.y+t.height,a.y+a.height)-Math.max(t.y,a.y));return Math.ceil(s*o)},ly=t=>wn(t.width)&&wn(t.height)&&wn(t.x)&&wn(t.y),wn=t=>!isNaN(t)&&isFinite(t),f8=(t,a)=>{},Mo=(t,a=[1,1])=>({x:a[0]*Math.round(t.x/a[0]),y:a[1]*Math.round(t.y/a[1])}),Ao=({x:t,y:a},[s,o,c],u=!1,f=[1,1])=>{const m={x:(t-s)/c,y:(a-o)/c};return u?Mo(m,f):m},Gc=({x:t,y:a},[s,o,c])=>({x:t*c+s,y:a*c+o});function Cr(t,a){if(typeof t=="number")return Math.floor((a-a/(1+t))*.5);if(typeof t=="string"&&t.endsWith("px")){const s=parseFloat(t);if(!Number.isNaN(s))return Math.floor(s)}if(typeof t=="string"&&t.endsWith("%")){const s=parseFloat(t);if(!Number.isNaN(s))return Math.floor(a*s*.01)}return console.error(`[React Flow] The padding value "${t}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function h8(t,a,s){if(typeof t=="string"||typeof t=="number"){const o=Cr(t,s),c=Cr(t,a);return{top:o,right:c,bottom:o,left:c,x:c*2,y:o*2}}if(typeof t=="object"){const o=Cr(t.top??t.y??0,s),c=Cr(t.bottom??t.y??0,s),u=Cr(t.left??t.x??0,a),f=Cr(t.right??t.x??0,a);return{top:o,right:f,bottom:c,left:u,x:u+f,y:o+c}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function m8(t,a,s,o,c,u){const{x:f,y:m}=Gc(t,[a,s,o]),{x:p,y:g}=Gc({x:t.x+t.width,y:t.y+t.height},[a,s,o]),y=c-p,x=u-g;return{left:Math.floor(f),top:Math.floor(m),right:Math.floor(y),bottom:Math.floor(x)}}const dm=(t,a,s,o,c,u)=>{const f=h8(u,a,s),m=(a-f.x)/t.width,p=(s-f.y)/t.height,g=Math.min(m,p),y=Vr(g,o,c),x=t.x+t.width/2,b=t.y+t.height/2,S=a/2-x*y,_=s/2-b*y,C=m8(t,S,_,y,a,s),N={left:Math.min(C.left-f.left,0),top:Math.min(C.top-f.top,0),right:Math.min(C.right-f.right,0),bottom:Math.min(C.bottom-f.bottom,0)};return{x:S-N.left+N.right,y:_-N.top+N.bottom,zoom:y}},go=()=>typeof navigator<"u"&&navigator?.userAgent?.indexOf("Mac")>=0;function Pr(t){return t!=null&&t!=="parent"}function wa(t){return{width:t.measured?.width??t.width??t.initialWidth??0,height:t.measured?.height??t.height??t.initialHeight??0}}function H1(t){return(t.measured?.width??t.width??t.initialWidth)!==void 0&&(t.measured?.height??t.height??t.initialHeight)!==void 0}function $1(t,a={width:0,height:0},s,o,c){const u={...t},f=o.get(s);if(f){const m=f.origin||c;u.x+=f.internals.positionAbsolute.x-(a.width??0)*m[0],u.y+=f.internals.positionAbsolute.y-(a.height??0)*m[1]}return u}function cy(t,a){if(t.size!==a.size)return!1;for(const s of t)if(!a.has(s))return!1;return!0}function p8(){let t,a;return{promise:new Promise((o,c)=>{t=o,a=c}),resolve:t,reject:a}}function g8(t){return{...A1,...t||{}}}function ro(t,{snapGrid:a=[0,0],snapToGrid:s=!1,transform:o,containerBounds:c}){const{x:u,y:f}=jn(t),m=Ao({x:u-(c?.left??0),y:f-(c?.top??0)},o),{x:p,y:g}=s?Mo(m,a):m;return{xSnapped:p,ySnapped:g,...m}}const fm=t=>({width:t.offsetWidth,height:t.offsetHeight}),U1=t=>t?.getRootNode?.()||window?.document,x8=["INPUT","SELECT","TEXTAREA"];function q1(t){const a=t.composedPath?.()?.[0]||t.target;return a?.nodeType!==1?!1:x8.includes(a.nodeName)||a.hasAttribute("contenteditable")||!!a.closest(".nokey")}const V1=t=>"clientX"in t,jn=(t,a)=>{const s=V1(t),o=s?t.clientX:t.touches?.[0].clientX,c=s?t.clientY:t.touches?.[0].clientY;return{x:o-(a?.left??0),y:c-(a?.top??0)}},uy=(t,a,s,o,c)=>{const u=a.querySelectorAll(`.${t}`);return!u||!u.length?null:Array.from(u).map(f=>{const m=f.getBoundingClientRect();return{id:f.getAttribute("data-handleid"),type:t,nodeId:c,position:f.getAttribute("data-handlepos"),x:(m.left-s.left)/o,y:(m.top-s.top)/o,...fm(f)}})};function Y1({sourceX:t,sourceY:a,targetX:s,targetY:o,sourceControlX:c,sourceControlY:u,targetControlX:f,targetControlY:m}){const p=t*.125+c*.375+f*.375+s*.125,g=a*.125+u*.375+m*.375+o*.125,y=Math.abs(p-t),x=Math.abs(g-a);return[p,g,y,x]}function dc(t,a){return t>=0?.5*t:a*25*Math.sqrt(-t)}function dy({pos:t,x1:a,y1:s,x2:o,y2:c,c:u}){switch(t){case xe.Left:return[a-dc(a-o,u),s];case xe.Right:return[a+dc(o-a,u),s];case xe.Top:return[a,s-dc(s-c,u)];case xe.Bottom:return[a,s+dc(c-s,u)]}}function P1({sourceX:t,sourceY:a,sourcePosition:s=xe.Bottom,targetX:o,targetY:c,targetPosition:u=xe.Top,curvature:f=.25}){const[m,p]=dy({pos:s,x1:t,y1:a,x2:o,y2:c,c:f}),[g,y]=dy({pos:u,x1:o,y1:c,x2:t,y2:a,c:f}),[x,b,S,_]=Y1({sourceX:t,sourceY:a,targetX:o,targetY:c,sourceControlX:m,sourceControlY:p,targetControlX:g,targetControlY:y});return[`M${t},${a} C${m},${p} ${g},${y} ${o},${c}`,x,b,S,_]}function X1({sourceX:t,sourceY:a,targetX:s,targetY:o}){const c=Math.abs(s-t)/2,u=s<t?s+c:s-c,f=Math.abs(o-a)/2,m=o<a?o+f:o-f;return[u,m,c,f]}function y8({sourceNode:t,targetNode:a,selected:s=!1,zIndex:o=0,elevateOnSelect:c=!1,zIndexMode:u="basic"}){if(u==="manual")return o;const f=c&&s?o+1e3:o,m=Math.max(t.parentId||c&&t.selected?t.internals.z:0,a.parentId||c&&a.selected?a.internals.z:0);return f+m}function b8({sourceNode:t,targetNode:a,width:s,height:o,transform:c}){const u=cu(Ic(t),Ic(a));u.x===u.x2&&(u.x2+=1),u.y===u.y2&&(u.y2+=1);const f={x:-c[0]/c[2],y:-c[1]/c[2],width:s/c[2],height:o/c[2]};return po(f,uu(u))>0}const v8=({source:t,sourceHandle:a,target:s,targetHandle:o})=>`xy-edge__${t}${a||""}-${s}${o||""}`,w8=(t,a)=>a.some(s=>s.source===t.source&&s.target===t.target&&(s.sourceHandle===t.sourceHandle||!s.sourceHandle&&!t.sourceHandle)&&(s.targetHandle===t.targetHandle||!s.targetHandle&&!t.targetHandle)),I1=(t,a,s={})=>{if(!t.source||!t.target)return a;const o=s.getEdgeId||v8;let c;return R1(t)?c={...t}:c={...t,id:o(t)},w8(c,a)?a:(c.sourceHandle===null&&delete c.sourceHandle,c.targetHandle===null&&delete c.targetHandle,a.concat(c))};function G1({sourceX:t,sourceY:a,targetX:s,targetY:o}){const[c,u,f,m]=X1({sourceX:t,sourceY:a,targetX:s,targetY:o});return[`M ${t},${a}L ${s},${o}`,c,u,f,m]}const fy={[xe.Left]:{x:-1,y:0},[xe.Right]:{x:1,y:0},[xe.Top]:{x:0,y:-1},[xe.Bottom]:{x:0,y:1}},j8=({source:t,sourcePosition:a=xe.Bottom,target:s})=>a===xe.Left||a===xe.Right?t.x<s.x?{x:1,y:0}:{x:-1,y:0}:t.y<s.y?{x:0,y:1}:{x:0,y:-1},hy=(t,a)=>Math.sqrt(Math.pow(a.x-t.x,2)+Math.pow(a.y-t.y,2));function N8({source:t,sourcePosition:a=xe.Bottom,target:s,targetPosition:o=xe.Top,center:c,offset:u,stepPosition:f}){const m=fy[a],p=fy[o],g={x:t.x+m.x*u,y:t.y+m.y*u},y={x:s.x+p.x*u,y:s.y+p.y*u},x=j8({source:g,sourcePosition:a,target:y}),b=x.x!==0?"x":"y",S=x[b];let _=[],C,N;const E={x:0,y:0},z={x:0,y:0},[,,T,k]=X1({sourceX:t.x,sourceY:t.y,targetX:s.x,targetY:s.y});if(m[b]*p[b]===-1){b==="x"?(C=c.x??g.x+(y.x-g.x)*f,N=c.y??(g.y+y.y)/2):(C=c.x??(g.x+y.x)/2,N=c.y??g.y+(y.y-g.y)*f);const R=[{x:C,y:g.y},{x:C,y:y.y}],M=[{x:g.x,y:N},{x:y.x,y:N}];m[b]===S?_=b==="x"?R:M:_=b==="x"?M:R}else{const R=[{x:g.x,y:y.y}],M=[{x:y.x,y:g.y}];if(b==="x"?_=m.x===S?M:R:_=m.y===S?R:M,a===o){const Z=Math.abs(t[b]-s[b]);if(Z<=u){const re=Math.min(u-1,u-Z);m[b]===S?E[b]=(g[b]>t[b]?-1:1)*re:z[b]=(y[b]>s[b]?-1:1)*re}}if(a!==o){const Z=b==="x"?"y":"x",re=m[b]===p[Z],V=g[Z]>y[Z],I=g[Z]<y[Z];(m[b]===1&&(!re&&V||re&&I)||m[b]!==1&&(!re&&I||re&&V))&&(_=b==="x"?R:M)}const q={x:g.x+E.x,y:g.y+E.y},$={x:y.x+z.x,y:y.y+z.y},G=Math.max(Math.abs(q.x-_[0].x),Math.abs($.x-_[0].x)),Q=Math.max(Math.abs(q.y-_[0].y),Math.abs($.y-_[0].y));G>=Q?(C=(q.x+$.x)/2,N=_[0].y):(C=_[0].x,N=(q.y+$.y)/2)}return[[t,{x:g.x+E.x,y:g.y+E.y},..._,{x:y.x+z.x,y:y.y+z.y},s],C,N,T,k]}function S8(t,a,s,o){const c=Math.min(hy(t,a)/2,hy(a,s)/2,o),{x:u,y:f}=a;if(t.x===u&&u===s.x||t.y===f&&f===s.y)return`L${u} ${f}`;if(t.y===f){const g=t.x<s.x?-1:1,y=t.y<s.y?1:-1;return`L ${u+c*g},${f}Q ${u},${f} ${u},${f+c*y}`}const m=t.x<s.x?1:-1,p=t.y<s.y?-1:1;return`L ${u},${f+c*p}Q ${u},${f} ${u+c*m},${f}`}function Th({sourceX:t,sourceY:a,sourcePosition:s=xe.Bottom,targetX:o,targetY:c,targetPosition:u=xe.Top,borderRadius:f=5,centerX:m,centerY:p,offset:g=20,stepPosition:y=.5}){const[x,b,S,_,C]=N8({source:{x:t,y:a},sourcePosition:s,target:{x:o,y:c},targetPosition:u,center:{x:m,y:p},offset:g,stepPosition:y});return[x.reduce((E,z,T)=>{let k="";return T>0&&T<x.length-1?k=S8(x[T-1],z,x[T+1],f):k=`${T===0?"M":"L"}${z.x} ${z.y}`,E+=k,E},""),b,S,_,C]}function my(t){return t&&!!(t.internals.handleBounds||t.handles?.length)&&!!(t.measured.width||t.width||t.initialWidth)}function _8(t){const{sourceNode:a,targetNode:s}=t;if(!my(a)||!my(s))return null;const o=a.internals.handleBounds||py(a.handles),c=s.internals.handleBounds||py(s.handles),u=gy(o?.source??[],t.sourceHandle),f=gy(t.connectionMode===qr.Strict?c?.target??[]:(c?.target??[]).concat(c?.source??[]),t.targetHandle);if(!u||!f)return t.onError?.("008",$n.error008(u?"target":"source",{id:t.id,sourceHandle:t.sourceHandle,targetHandle:t.targetHandle})),null;const m=u?.position||xe.Bottom,p=f?.position||xe.Top,g=Hs(a,u,m),y=Hs(s,f,p);return{sourceX:g.x,sourceY:g.y,targetX:y.x,targetY:y.y,sourcePosition:m,targetPosition:p}}function py(t){if(!t)return null;const a=[],s=[];for(const o of t)o.width=o.width??1,o.height=o.height??1,o.type==="source"?a.push(o):o.type==="target"&&s.push(o);return{source:a,target:s}}function Hs(t,a,s=xe.Left,o=!1){const c=(a?.x??0)+t.internals.positionAbsolute.x,u=(a?.y??0)+t.internals.positionAbsolute.y,{width:f,height:m}=a??wa(t);if(o)return{x:c+f/2,y:u+m/2};switch(a?.position??s){case xe.Top:return{x:c+f/2,y:u};case xe.Right:return{x:c+f,y:u+m/2};case xe.Bottom:return{x:c+f/2,y:u+m};case xe.Left:return{x:c,y:u+m/2}}}function gy(t,a){return t&&(a?t.find(s=>s.id===a):t[0])||null}function Mh(t,a){return t?typeof t=="string"?t:`${a?`${a}__`:""}${Object.keys(t).sort().map(o=>`${o}=${t[o]}`).join("&")}`:""}function E8(t,{id:a,defaultColor:s,defaultMarkerStart:o,defaultMarkerEnd:c}){const u=new Set;return t.reduce((f,m)=>([m.markerStart||o,m.markerEnd||c].forEach(p=>{if(p&&typeof p=="object"){const g=Mh(p,a);u.has(g)||(f.push({id:g,color:p.color||s,...p}),u.add(g))}}),f),[]).sort((f,m)=>f.id.localeCompare(m.id))}const Q1=1e3,C8=10,hm={nodeOrigin:[0,0],nodeExtent:ho,elevateNodesOnSelect:!0,zIndexMode:"basic",defaults:{}},T8={...hm,checkEquality:!0};function mm(t,a){const s={...t};for(const o in a)a[o]!==void 0&&(s[o]=a[o]);return s}function M8(t,a,s){const o=mm(hm,s);for(const c of t.values())if(c.parentId)gm(c,t,a,o);else{const u=Co(c,o.nodeOrigin),f=Pr(c.extent)?c.extent:o.nodeExtent,m=Ls(u,f,wa(c));c.internals.positionAbsolute=m}}function A8(t,a){if(!t.handles)return t.measured?a?.internals.handleBounds:void 0;const s=[],o=[];for(const c of t.handles){const u={id:c.id,width:c.width??1,height:c.height??1,nodeId:t.id,x:c.x,y:c.y,position:c.position,type:c.type};c.type==="source"?s.push(u):c.type==="target"&&o.push(u)}return{source:s,target:o}}function pm(t){return t==="manual"}function Ah(t,a,s,o={}){const c=mm(T8,o),u={i:0},f=new Map(a),m=c?.elevateNodesOnSelect&&!pm(c.zIndexMode)?Q1:0;let p=t.length>0;a.clear(),s.clear();for(const g of t){let y=f.get(g.id);if(c.checkEquality&&g===y?.internals.userNode)a.set(g.id,y);else{const x=Co(g,c.nodeOrigin),b=Pr(g.extent)?g.extent:c.nodeExtent,S=Ls(x,b,wa(g));y={...c.defaults,...g,measured:{width:g.measured?.width,height:g.measured?.height},internals:{positionAbsolute:S,handleBounds:A8(g,y),z:Z1(g,m,c.zIndexMode),userNode:g}},a.set(g.id,y)}(y.measured===void 0||y.measured.width===void 0||y.measured.height===void 0)&&!y.hidden&&(p=!1),g.parentId&&gm(y,a,s,o,u)}return p}function k8(t,a){if(!t.parentId)return;const s=a.get(t.parentId);s?s.set(t.id,t):a.set(t.parentId,new Map([[t.id,t]]))}function gm(t,a,s,o,c){const{elevateNodesOnSelect:u,nodeOrigin:f,nodeExtent:m,zIndexMode:p}=mm(hm,o),g=t.parentId,y=a.get(g);if(!y){console.warn(`Parent node ${g} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}k8(t,s),c&&!y.parentId&&y.internals.rootParentIndex===void 0&&p==="auto"&&(y.internals.rootParentIndex=++c.i,y.internals.z=y.internals.z+c.i*C8),c&&y.internals.rootParentIndex!==void 0&&(c.i=y.internals.rootParentIndex);const x=u&&!pm(p)?Q1:0,{x:b,y:S,z:_}=z8(t,y,f,m,x,p),{positionAbsolute:C}=t.internals,N=b!==C.x||S!==C.y;(N||_!==t.internals.z)&&a.set(t.id,{...t,internals:{...t.internals,positionAbsolute:N?{x:b,y:S}:C,z:_}})}function Z1(t,a,s){const o=wn(t.zIndex)?t.zIndex:0;return pm(s)?o:o+(t.selected?a:0)}function z8(t,a,s,o,c,u){const{x:f,y:m}=a.internals.positionAbsolute,p=wa(t),g=Co(t,s),y=Pr(t.extent)?Ls(g,t.extent,p):g;let x=Ls({x:f+y.x,y:m+y.y},o,p);t.extent==="parent"&&(x=O1(x,p,a));const b=Z1(t,c,u),S=a.internals.z??0;return{x:x.x,y:x.y,z:S>=b?S+1:b}}function xm(t,a,s,o=[0,0]){const c=[],u=new Map;for(const f of t){const m=a.get(f.parentId);if(!m)continue;const p=u.get(f.parentId)?.expandedRect??Yr(m),g=L1(p,f.rect);u.set(f.parentId,{expandedRect:g,parent:m})}return u.size>0&&u.forEach(({expandedRect:f,parent:m},p)=>{const g=m.internals.positionAbsolute,y=wa(m),x=m.origin??o,b=f.x<g.x?Math.round(Math.abs(g.x-f.x)):0,S=f.y<g.y?Math.round(Math.abs(g.y-f.y)):0,_=Math.max(y.width,Math.round(f.width)),C=Math.max(y.height,Math.round(f.height)),N=(_-y.width)*x[0],E=(C-y.height)*x[1];(b>0||S>0||N||E)&&(c.push({id:p,type:"position",position:{x:m.position.x-b+N,y:m.position.y-S+E}}),s.get(p)?.forEach(z=>{t.some(T=>T.id===z.id)||c.push({id:z.id,type:"position",position:{x:z.position.x+b,y:z.position.y+S}})})),(y.width<f.width||y.height<f.height||b||S)&&c.push({id:p,type:"dimensions",setAttributes:!0,dimensions:{width:_+(b?x[0]*b-N:0),height:C+(S?x[1]*S-E:0)}})}),c}function R8(t,a,s,o,c,u,f){const m=o?.querySelector(".xyflow__viewport");let p=!1;if(!m)return{changes:[],updatedInternals:p};const g=[],y=window.getComputedStyle(m),{m22:x}=new window.DOMMatrixReadOnly(y.transform),b=[];for(const S of t.values()){const _=a.get(S.id);if(!_)continue;if(_.hidden){a.set(_.id,{..._,internals:{..._.internals,handleBounds:void 0}}),p=!0;continue}const C=fm(S.nodeElement),N=_.measured.width!==C.width||_.measured.height!==C.height;if(!!(C.width&&C.height&&(N||!_.internals.handleBounds||S.force))){const z=S.nodeElement.getBoundingClientRect(),T=Pr(_.extent)?_.extent:u;let{positionAbsolute:k}=_.internals;_.parentId&&_.extent==="parent"?k=O1(k,C,a.get(_.parentId)):T&&(k=Ls(k,T,C));const w={..._,measured:C,internals:{..._.internals,positionAbsolute:k,handleBounds:{source:uy("source",S.nodeElement,z,x,_.id),target:uy("target",S.nodeElement,z,x,_.id)}}};a.set(_.id,w),_.parentId&&gm(w,a,s,{nodeOrigin:c,zIndexMode:f}),p=!0,N&&(g.push({id:_.id,type:"dimensions",dimensions:C}),_.expandParent&&_.parentId&&b.push({id:_.id,parentId:_.parentId,rect:Yr(w,c)}))}}if(b.length>0){const S=xm(b,a,s,c);g.push(...S)}return{changes:g,updatedInternals:p}}async function D8({delta:t,panZoom:a,transform:s,translateExtent:o,width:c,height:u}){if(!a||!t.x&&!t.y)return Promise.resolve(!1);const f=await a.setViewportConstrained({x:s[0]+t.x,y:s[1]+t.y,zoom:s[2]},[[0,0],[c,u]],o),m=!!f&&(f.x!==s[0]||f.y!==s[1]||f.k!==s[2]);return Promise.resolve(m)}function xy(t,a,s,o,c,u){let f=c;const m=o.get(f)||new Map;o.set(f,m.set(s,a)),f=`${c}-${t}`;const p=o.get(f)||new Map;if(o.set(f,p.set(s,a)),u){f=`${c}-${t}-${u}`;const g=o.get(f)||new Map;o.set(f,g.set(s,a))}}function F1(t,a,s){t.clear(),a.clear();for(const o of s){const{source:c,target:u,sourceHandle:f=null,targetHandle:m=null}=o,p={edgeId:o.id,source:c,target:u,sourceHandle:f,targetHandle:m},g=`${c}-${f}--${u}-${m}`,y=`${u}-${m}--${c}-${f}`;xy("source",p,y,t,c,f),xy("target",p,g,t,u,m),a.set(o.id,o)}}function W1(t,a){if(!t.parentId)return!1;const s=a.get(t.parentId);return s?s.selected?!0:W1(s,a):!1}function yy(t,a,s){let o=t;do{if(o?.matches?.(a))return!0;if(o===s)return!1;o=o?.parentElement}while(o);return!1}function O8(t,a,s,o){const c=new Map;for(const[u,f]of t)if((f.selected||f.id===o)&&(!f.parentId||!W1(f,t))&&(f.draggable||a&&typeof f.draggable>"u")){const m=t.get(u);m&&c.set(u,{id:u,position:m.position||{x:0,y:0},distance:{x:s.x-m.internals.positionAbsolute.x,y:s.y-m.internals.positionAbsolute.y},extent:m.extent,parentId:m.parentId,origin:m.origin,expandParent:m.expandParent,internals:{positionAbsolute:m.internals.positionAbsolute||{x:0,y:0}},measured:{width:m.measured.width??0,height:m.measured.height??0}})}return c}function Zf({nodeId:t,dragItems:a,nodeLookup:s,dragging:o=!0}){const c=[];for(const[f,m]of a){const p=s.get(f)?.internals.userNode;p&&c.push({...p,position:m.position,dragging:o})}if(!t)return[c[0],c];const u=s.get(t)?.internals.userNode;return[u?{...u,position:a.get(t)?.position||u.position,dragging:o}:c[0],c]}function B8({dragItems:t,snapGrid:a,x:s,y:o}){const c=t.values().next().value;if(!c)return null;const u={x:s-c.distance.x,y:o-c.distance.y},f=Mo(u,a);return{x:f.x-u.x,y:f.y-u.y}}function L8({onNodeMouseDown:t,getStoreItems:a,onDragStart:s,onDrag:o,onDragStop:c}){let u={x:null,y:null},f=0,m=new Map,p=!1,g={x:0,y:0},y=null,x=!1,b=null,S=!1,_=!1,C=null;function N({noDragClassName:z,handleSelector:T,domNode:k,isSelectable:w,nodeId:R,nodeClickDistance:M=0}){b=It(k);function q({x:Z,y:re}){const{nodeLookup:V,nodeExtent:I,snapGrid:O,snapToGrid:D,nodeOrigin:P,onNodeDrag:L,onSelectionDrag:W,onError:B,updateNodePositions:H}=a();u={x:Z,y:re};let te=!1;const ne=m.size>1,se=ne&&I?Ch(To(m)):null,de=ne&&D?B8({dragItems:m,snapGrid:O,x:Z,y:re}):null;for(const[ue,U]of m){if(!V.has(ue))continue;let ce={x:Z-U.distance.x,y:re-U.distance.y};D&&(ce=de?{x:Math.round(ce.x+de.x),y:Math.round(ce.y+de.y)}:Mo(ce,O));let he=null;if(ne&&I&&!U.extent&&se){const{positionAbsolute:be}=U.internals,Se=be.x-se.x+I[0][0],Ae=be.x+U.measured.width-se.x2+I[1][0],Ee=be.y-se.y+I[0][1],$e=be.y+U.measured.height-se.y2+I[1][1];he=[[Se,Ee],[Ae,$e]]}const{position:ve,positionAbsolute:pe}=D1({nodeId:ue,nextPosition:ce,nodeLookup:V,nodeExtent:he||I,nodeOrigin:P,onError:B});te=te||U.position.x!==ve.x||U.position.y!==ve.y,U.position=ve,U.internals.positionAbsolute=pe}if(_=_||te,!!te&&(H(m,!0),C&&(o||L||!R&&W))){const[ue,U]=Zf({nodeId:R,dragItems:m,nodeLookup:V});o?.(C,m,ue,U),L?.(C,ue,U),R||W?.(C,U)}}async function $(){if(!y)return;const{transform:Z,panBy:re,autoPanSpeed:V,autoPanOnNodeDrag:I}=a();if(!I){p=!1,cancelAnimationFrame(f);return}const[O,D]=B1(g,y,V);(O!==0||D!==0)&&(u.x=(u.x??0)-O/Z[2],u.y=(u.y??0)-D/Z[2],await re({x:O,y:D})&&q(u)),f=requestAnimationFrame($)}function G(Z){const{nodeLookup:re,multiSelectionActive:V,nodesDraggable:I,transform:O,snapGrid:D,snapToGrid:P,selectNodesOnDrag:L,onNodeDragStart:W,onSelectionDragStart:B,unselectNodesAndEdges:H}=a();x=!0,(!L||!w)&&!V&&R&&(re.get(R)?.selected||H()),w&&L&&R&&t?.(R);const te=ro(Z.sourceEvent,{transform:O,snapGrid:D,snapToGrid:P,containerBounds:y});if(u=te,m=O8(re,I,te,R),m.size>0&&(s||W||!R&&B)){const[ne,se]=Zf({nodeId:R,dragItems:m,nodeLookup:re});s?.(Z.sourceEvent,m,ne,se),W?.(Z.sourceEvent,ne,se),R||B?.(Z.sourceEvent,se)}}const Q=h1().clickDistance(M).on("start",Z=>{const{domNode:re,nodeDragThreshold:V,transform:I,snapGrid:O,snapToGrid:D}=a();y=re?.getBoundingClientRect()||null,S=!1,_=!1,C=Z.sourceEvent,V===0&&G(Z),u=ro(Z.sourceEvent,{transform:I,snapGrid:O,snapToGrid:D,containerBounds:y}),g=jn(Z.sourceEvent,y)}).on("drag",Z=>{const{autoPanOnNodeDrag:re,transform:V,snapGrid:I,snapToGrid:O,nodeDragThreshold:D,nodeLookup:P}=a(),L=ro(Z.sourceEvent,{transform:V,snapGrid:I,snapToGrid:O,containerBounds:y});if(C=Z.sourceEvent,(Z.sourceEvent.type==="touchmove"&&Z.sourceEvent.touches.length>1||R&&!P.has(R))&&(S=!0),!S){if(!p&&re&&x&&(p=!0,$()),!x){const W=jn(Z.sourceEvent,y),B=W.x-g.x,H=W.y-g.y;Math.sqrt(B*B+H*H)>D&&G(Z)}(u.x!==L.xSnapped||u.y!==L.ySnapped)&&m&&x&&(g=jn(Z.sourceEvent,y),q(L))}}).on("end",Z=>{if(!(!x||S)&&(p=!1,x=!1,cancelAnimationFrame(f),m.size>0)){const{nodeLookup:re,updateNodePositions:V,onNodeDragStop:I,onSelectionDragStop:O}=a();if(_&&(V(m,!1),_=!1),c||I||!R&&O){const[D,P]=Zf({nodeId:R,dragItems:m,nodeLookup:re,dragging:!1});c?.(Z.sourceEvent,m,D,P),I?.(Z.sourceEvent,D,P),R||O?.(Z.sourceEvent,P)}}}).filter(Z=>{const re=Z.target;return!Z.button&&(!z||!yy(re,`.${z}`,k))&&(!T||yy(re,T,k))});b.call(Q)}function E(){b?.on(".drag",null)}return{update:N,destroy:E}}function H8(t,a,s){const o=[],c={x:t.x-s,y:t.y-s,width:s*2,height:s*2};for(const u of a.values())po(c,Yr(u))>0&&o.push(u);return o}const $8=250;function U8(t,a,s,o){let c=[],u=1/0;const f=H8(t,s,a+$8);for(const m of f){const p=[...m.internals.handleBounds?.source??[],...m.internals.handleBounds?.target??[]];for(const g of p){if(o.nodeId===g.nodeId&&o.type===g.type&&o.id===g.id)continue;const{x:y,y:x}=Hs(m,g,g.position,!0),b=Math.sqrt(Math.pow(y-t.x,2)+Math.pow(x-t.y,2));b>a||(b<u?(c=[{...g,x:y,y:x}],u=b):b===u&&c.push({...g,x:y,y:x}))}}if(!c.length)return null;if(c.length>1){const m=o.type==="source"?"target":"source";return c.find(p=>p.type===m)??c[0]}return c[0]}function K1(t,a,s,o,c,u=!1){const f=o.get(t);if(!f)return null;const m=c==="strict"?f.internals.handleBounds?.[a]:[...f.internals.handleBounds?.source??[],...f.internals.handleBounds?.target??[]],p=(s?m?.find(g=>g.id===s):m?.[0])??null;return p&&u?{...p,...Hs(f,p,p.position,!0)}:p}function J1(t,a){return t||(a?.classList.contains("target")?"target":a?.classList.contains("source")?"source":null)}function q8(t,a){let s=null;return a?s=!0:t&&!a&&(s=!1),s}const ev=()=>!0;function V8(t,{connectionMode:a,connectionRadius:s,handleId:o,nodeId:c,edgeUpdaterType:u,isTarget:f,domNode:m,nodeLookup:p,lib:g,autoPanOnConnect:y,flowId:x,panBy:b,cancelConnection:S,onConnectStart:_,onConnect:C,onConnectEnd:N,isValidConnection:E=ev,onReconnectEnd:z,updateConnection:T,getTransform:k,getFromHandle:w,autoPanSpeed:R,dragThreshold:M=1,handleDomNode:q}){const $=U1(t.target);let G=0,Q;const{x:Z,y:re}=jn(t),V=J1(u,q),I=m?.getBoundingClientRect();let O=!1;if(!I||!V)return;const D=K1(c,V,o,p,a);if(!D)return;let P=jn(t,I),L=!1,W=null,B=!1,H=null;function te(){if(!y||!I)return;const[ve,pe]=B1(P,I,R);b({x:ve,y:pe}),G=requestAnimationFrame(te)}const ne={...D,nodeId:c,type:V,position:D.position},se=p.get(c);let ue={inProgress:!0,isValid:null,from:Hs(se,ne,xe.Left,!0),fromHandle:ne,fromPosition:ne.position,fromNode:se,to:P,toHandle:null,toPosition:iy[ne.position],toNode:null,pointer:P};function U(){O=!0,T(ue),_?.(t,{nodeId:c,handleId:o,handleType:V})}M===0&&U();function ce(ve){if(!O){const{x:$e,y:Re}=jn(ve),gt=$e-Z,ht=Re-re;if(!(gt*gt+ht*ht>M*M))return;U()}if(!w()||!ne){he(ve);return}const pe=k();P=jn(ve,I),Q=U8(Ao(P,pe,!1,[1,1]),s,p,ne),L||(te(),L=!0);const be=tv(ve,{handle:Q,connectionMode:a,fromNodeId:c,fromHandleId:o,fromType:f?"target":"source",isValidConnection:E,doc:$,lib:g,flowId:x,nodeLookup:p});H=be.handleDomNode,W=be.connection,B=q8(!!Q,be.isValid);const Se=p.get(c),Ae=Se?Hs(Se,ne,xe.Left,!0):ue.from,Ee={...ue,from:Ae,isValid:B,to:be.toHandle&&B?Gc({x:be.toHandle.x,y:be.toHandle.y},pe):P,toHandle:be.toHandle,toPosition:B&&be.toHandle?be.toHandle.position:iy[ne.position],toNode:be.toHandle?p.get(be.toHandle.nodeId):null,pointer:P};T(Ee),ue=Ee}function he(ve){if(!("touches"in ve&&ve.touches.length>0)){if(O){(Q||H)&&W&&B&&C?.(W);const{inProgress:pe,...be}=ue,Se={...be,toPosition:ue.toHandle?ue.toPosition:null};N?.(ve,Se),u&&z?.(ve,Se)}S(),cancelAnimationFrame(G),L=!1,B=!1,W=null,H=null,$.removeEventListener("mousemove",ce),$.removeEventListener("mouseup",he),$.removeEventListener("touchmove",ce),$.removeEventListener("touchend",he)}}$.addEventListener("mousemove",ce),$.addEventListener("mouseup",he),$.addEventListener("touchmove",ce),$.addEventListener("touchend",he)}function tv(t,{handle:a,connectionMode:s,fromNodeId:o,fromHandleId:c,fromType:u,doc:f,lib:m,flowId:p,isValidConnection:g=ev,nodeLookup:y}){const x=u==="target",b=a?f.querySelector(`.${m}-flow__handle[data-id="${p}-${a?.nodeId}-${a?.id}-${a?.type}"]`):null,{x:S,y:_}=jn(t),C=f.elementFromPoint(S,_),N=C?.classList.contains(`${m}-flow__handle`)?C:b,E={handleDomNode:N,isValid:!1,connection:null,toHandle:null};if(N){const z=J1(void 0,N),T=N.getAttribute("data-nodeid"),k=N.getAttribute("data-handleid"),w=N.classList.contains("connectable"),R=N.classList.contains("connectableend");if(!T||!z)return E;const M={source:x?T:o,sourceHandle:x?k:c,target:x?o:T,targetHandle:x?c:k};E.connection=M;const $=w&&R&&(s===qr.Strict?x&&z==="source"||!x&&z==="target":T!==o||k!==c);E.isValid=$&&g(M),E.toHandle=K1(T,z,k,y,s,!0)}return E}const kh={onPointerDown:V8,isValid:tv};function Y8({domNode:t,panZoom:a,getTransform:s,getViewScale:o}){const c=It(t);function u({translateExtent:m,width:p,height:g,zoomStep:y=1,pannable:x=!0,zoomable:b=!0,inversePan:S=!1}){const _=T=>{if(T.sourceEvent.type!=="wheel"||!a)return;const k=s(),w=T.sourceEvent.ctrlKey&&go()?10:1,R=-T.sourceEvent.deltaY*(T.sourceEvent.deltaMode===1?.05:T.sourceEvent.deltaMode?1:.002)*y,M=k[2]*Math.pow(2,R*w);a.scaleTo(M)};let C=[0,0];const N=T=>{(T.sourceEvent.type==="mousedown"||T.sourceEvent.type==="touchstart")&&(C=[T.sourceEvent.clientX??T.sourceEvent.touches[0].clientX,T.sourceEvent.clientY??T.sourceEvent.touches[0].clientY])},E=T=>{const k=s();if(T.sourceEvent.type!=="mousemove"&&T.sourceEvent.type!=="touchmove"||!a)return;const w=[T.sourceEvent.clientX??T.sourceEvent.touches[0].clientX,T.sourceEvent.clientY??T.sourceEvent.touches[0].clientY],R=[w[0]-C[0],w[1]-C[1]];C=w;const M=o()*Math.max(k[2],Math.log(k[2]))*(S?-1:1),q={x:k[0]-R[0]*M,y:k[1]-R[1]*M},$=[[0,0],[p,g]];a.setViewportConstrained({x:q.x,y:q.y,zoom:k[2]},$,m)},z=T1().on("start",N).on("zoom",x?E:null).on("zoom.wheel",b?_:null);c.call(z,{})}function f(){c.on("zoom",null)}return{update:u,destroy:f,pointer:yn}}const du=t=>({x:t.x,y:t.y,zoom:t.k}),Ff=({x:t,y:a,zoom:s})=>lu.translate(t,a).scale(s),Ar=(t,a)=>t.target.closest(`.${a}`),nv=(t,a)=>a===2&&Array.isArray(t)&&t.includes(2),P8=t=>((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2,Wf=(t,a=0,s=P8,o=()=>{})=>{const c=typeof a=="number"&&a>0;return c||o(),c?t.transition().duration(a).ease(s).on("end",o):t},av=t=>{const a=t.ctrlKey&&go()?10:1;return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*a};function X8({zoomPanValues:t,noWheelClassName:a,d3Selection:s,d3Zoom:o,panOnScrollMode:c,panOnScrollSpeed:u,zoomOnPinch:f,onPanZoomStart:m,onPanZoom:p,onPanZoomEnd:g}){return y=>{if(Ar(y,a))return y.ctrlKey&&y.preventDefault(),!1;y.preventDefault(),y.stopImmediatePropagation();const x=s.property("__zoom").k||1;if(y.ctrlKey&&f){const N=yn(y),E=av(y),z=x*Math.pow(2,E);o.scaleTo(s,z,N,y);return}const b=y.deltaMode===1?20:1;let S=c===Ds.Vertical?0:y.deltaX*b,_=c===Ds.Horizontal?0:y.deltaY*b;!go()&&y.shiftKey&&c!==Ds.Vertical&&(S=y.deltaY*b,_=0),o.translateBy(s,-(S/x)*u,-(_/x)*u,{internal:!0});const C=du(s.property("__zoom"));clearTimeout(t.panScrollTimeout),t.isPanScrolling?(p?.(y,C),t.panScrollTimeout=setTimeout(()=>{g?.(y,C),t.isPanScrolling=!1},150)):(t.isPanScrolling=!0,m?.(y,C))}}function I8({noWheelClassName:t,preventScrolling:a,d3ZoomHandler:s}){return function(o,c){const u=o.type==="wheel",f=!a&&u&&!o.ctrlKey,m=Ar(o,t);if(o.ctrlKey&&u&&m&&o.preventDefault(),f||m)return null;o.preventDefault(),s.call(this,o,c)}}function G8({zoomPanValues:t,onDraggingChange:a,onPanZoomStart:s}){return o=>{if(o.sourceEvent?.internal)return;const c=du(o.transform);t.mouseButton=o.sourceEvent?.button||0,t.isZoomingOrPanning=!0,t.prevViewport=c,o.sourceEvent?.type==="mousedown"&&a(!0),s&&s?.(o.sourceEvent,c)}}function Q8({zoomPanValues:t,panOnDrag:a,onPaneContextMenu:s,onTransformChange:o,onPanZoom:c}){return u=>{t.usedRightMouseButton=!!(s&&nv(a,t.mouseButton??0)),u.sourceEvent?.sync||o([u.transform.x,u.transform.y,u.transform.k]),c&&!u.sourceEvent?.internal&&c?.(u.sourceEvent,du(u.transform))}}function Z8({zoomPanValues:t,panOnDrag:a,panOnScroll:s,onDraggingChange:o,onPanZoomEnd:c,onPaneContextMenu:u}){return f=>{if(!f.sourceEvent?.internal&&(t.isZoomingOrPanning=!1,u&&nv(a,t.mouseButton??0)&&!t.usedRightMouseButton&&f.sourceEvent&&u(f.sourceEvent),t.usedRightMouseButton=!1,o(!1),c)){const m=du(f.transform);t.prevViewport=m,clearTimeout(t.timerId),t.timerId=setTimeout(()=>{c?.(f.sourceEvent,m)},s?150:0)}}}function F8({zoomActivationKeyPressed:t,zoomOnScroll:a,zoomOnPinch:s,panOnDrag:o,panOnScroll:c,zoomOnDoubleClick:u,userSelectionActive:f,noWheelClassName:m,noPanClassName:p,lib:g,connectionInProgress:y}){return x=>{const b=t||a,S=s&&x.ctrlKey,_=x.type==="wheel";if(x.button===1&&x.type==="mousedown"&&(Ar(x,`${g}-flow__node`)||Ar(x,`${g}-flow__edge`)))return!0;if(!o&&!b&&!c&&!u&&!s||f||y&&!_||Ar(x,m)&&_||Ar(x,p)&&(!_||c&&_&&!t)||!s&&x.ctrlKey&&_)return!1;if(!s&&x.type==="touchstart"&&x.touches?.length>1)return x.preventDefault(),!1;if(!b&&!c&&!S&&_||!o&&(x.type==="mousedown"||x.type==="touchstart")||Array.isArray(o)&&!o.includes(x.button)&&x.type==="mousedown")return!1;const C=Array.isArray(o)&&o.includes(x.button)||!x.button||x.button<=1;return(!x.ctrlKey||_)&&C}}function W8({domNode:t,minZoom:a,maxZoom:s,translateExtent:o,viewport:c,onPanZoom:u,onPanZoomStart:f,onPanZoomEnd:m,onDraggingChange:p}){const g={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},y=t.getBoundingClientRect(),x=T1().scaleExtent([a,s]).translateExtent(o),b=It(t).call(x);z({x:c.x,y:c.y,zoom:Vr(c.zoom,a,s)},[[0,0],[y.width,y.height]],o);const S=b.on("wheel.zoom"),_=b.on("dblclick.zoom");x.wheelDelta(av);function C(Q,Z){return b?new Promise(re=>{x?.interpolate(Z?.interpolate==="linear"?so:Ec).transform(Wf(b,Z?.duration,Z?.ease,()=>re(!0)),Q)}):Promise.resolve(!1)}function N({noWheelClassName:Q,noPanClassName:Z,onPaneContextMenu:re,userSelectionActive:V,panOnScroll:I,panOnDrag:O,panOnScrollMode:D,panOnScrollSpeed:P,preventScrolling:L,zoomOnPinch:W,zoomOnScroll:B,zoomOnDoubleClick:H,zoomActivationKeyPressed:te,lib:ne,onTransformChange:se,connectionInProgress:de,paneClickDistance:ue,selectionOnDrag:U}){V&&!g.isZoomingOrPanning&&E();const ce=I&&!te&&!V;x.clickDistance(U?1/0:!wn(ue)||ue<0?0:ue);const he=ce?X8({zoomPanValues:g,noWheelClassName:Q,d3Selection:b,d3Zoom:x,panOnScrollMode:D,panOnScrollSpeed:P,zoomOnPinch:W,onPanZoomStart:f,onPanZoom:u,onPanZoomEnd:m}):I8({noWheelClassName:Q,preventScrolling:L,d3ZoomHandler:S});if(b.on("wheel.zoom",he,{passive:!1}),!V){const pe=G8({zoomPanValues:g,onDraggingChange:p,onPanZoomStart:f});x.on("start",pe);const be=Q8({zoomPanValues:g,panOnDrag:O,onPaneContextMenu:!!re,onPanZoom:u,onTransformChange:se});x.on("zoom",be);const Se=Z8({zoomPanValues:g,panOnDrag:O,panOnScroll:I,onPaneContextMenu:re,onPanZoomEnd:m,onDraggingChange:p});x.on("end",Se)}const ve=F8({zoomActivationKeyPressed:te,panOnDrag:O,zoomOnScroll:B,panOnScroll:I,zoomOnDoubleClick:H,zoomOnPinch:W,userSelectionActive:V,noPanClassName:Z,noWheelClassName:Q,lib:ne,connectionInProgress:de});x.filter(ve),H?b.on("dblclick.zoom",_):b.on("dblclick.zoom",null)}function E(){x.on("zoom",null)}async function z(Q,Z,re){const V=Ff(Q),I=x?.constrain()(V,Z,re);return I&&await C(I),new Promise(O=>O(I))}async function T(Q,Z){const re=Ff(Q);return await C(re,Z),new Promise(V=>V(re))}function k(Q){if(b){const Z=Ff(Q),re=b.property("__zoom");(re.k!==Q.zoom||re.x!==Q.x||re.y!==Q.y)&&x?.transform(b,Z,null,{sync:!0})}}function w(){const Q=b?C1(b.node()):{x:0,y:0,k:1};return{x:Q.x,y:Q.y,zoom:Q.k}}function R(Q,Z){return b?new Promise(re=>{x?.interpolate(Z?.interpolate==="linear"?so:Ec).scaleTo(Wf(b,Z?.duration,Z?.ease,()=>re(!0)),Q)}):Promise.resolve(!1)}function M(Q,Z){return b?new Promise(re=>{x?.interpolate(Z?.interpolate==="linear"?so:Ec).scaleBy(Wf(b,Z?.duration,Z?.ease,()=>re(!0)),Q)}):Promise.resolve(!1)}function q(Q){x?.scaleExtent(Q)}function $(Q){x?.translateExtent(Q)}function G(Q){const Z=!wn(Q)||Q<0?0:Q;x?.clickDistance(Z)}return{update:N,destroy:E,setViewport:T,setViewportConstrained:z,getViewport:w,scaleTo:R,scaleBy:M,setScaleExtent:q,setTranslateExtent:$,syncViewport:k,setClickDistance:G}}var Xr;(function(t){t.Line="line",t.Handle="handle"})(Xr||(Xr={}));function K8({width:t,prevWidth:a,height:s,prevHeight:o,affectsX:c,affectsY:u}){const f=t-a,m=s-o,p=[f>0?1:f<0?-1:0,m>0?1:m<0?-1:0];return f&&c&&(p[0]=p[0]*-1),m&&u&&(p[1]=p[1]*-1),p}function by(t){const a=t.includes("right")||t.includes("left"),s=t.includes("bottom")||t.includes("top"),o=t.includes("left"),c=t.includes("top");return{isHorizontal:a,isVertical:s,affectsX:o,affectsY:c}}function Wa(t,a){return Math.max(0,a-t)}function Ka(t,a){return Math.max(0,t-a)}function fc(t,a,s){return Math.max(0,a-t,t-s)}function vy(t,a){return t?!a:a}function J8(t,a,s,o,c,u,f,m){let{affectsX:p,affectsY:g}=a;const{isHorizontal:y,isVertical:x}=a,b=y&&x,{xSnapped:S,ySnapped:_}=s,{minWidth:C,maxWidth:N,minHeight:E,maxHeight:z}=o,{x:T,y:k,width:w,height:R,aspectRatio:M}=t;let q=Math.floor(y?S-t.pointerX:0),$=Math.floor(x?_-t.pointerY:0);const G=w+(p?-q:q),Q=R+(g?-$:$),Z=-u[0]*w,re=-u[1]*R;let V=fc(G,C,N),I=fc(Q,E,z);if(f){let P=0,L=0;p&&q<0?P=Wa(T+q+Z,f[0][0]):!p&&q>0&&(P=Ka(T+G+Z,f[1][0])),g&&$<0?L=Wa(k+$+re,f[0][1]):!g&&$>0&&(L=Ka(k+Q+re,f[1][1])),V=Math.max(V,P),I=Math.max(I,L)}if(m){let P=0,L=0;p&&q>0?P=Ka(T+q,m[0][0]):!p&&q<0&&(P=Wa(T+G,m[1][0])),g&&$>0?L=Ka(k+$,m[0][1]):!g&&$<0&&(L=Wa(k+Q,m[1][1])),V=Math.max(V,P),I=Math.max(I,L)}if(c){if(y){const P=fc(G/M,E,z)*M;if(V=Math.max(V,P),f){let L=0;!p&&!g||p&&!g&&b?L=Ka(k+re+G/M,f[1][1])*M:L=Wa(k+re+(p?q:-q)/M,f[0][1])*M,V=Math.max(V,L)}if(m){let L=0;!p&&!g||p&&!g&&b?L=Wa(k+G/M,m[1][1])*M:L=Ka(k+(p?q:-q)/M,m[0][1])*M,V=Math.max(V,L)}}if(x){const P=fc(Q*M,C,N)/M;if(I=Math.max(I,P),f){let L=0;!p&&!g||g&&!p&&b?L=Ka(T+Q*M+Z,f[1][0])/M:L=Wa(T+(g?$:-$)*M+Z,f[0][0])/M,I=Math.max(I,L)}if(m){let L=0;!p&&!g||g&&!p&&b?L=Wa(T+Q*M,m[1][0])/M:L=Ka(T+(g?$:-$)*M,m[0][0])/M,I=Math.max(I,L)}}}$=$+($<0?I:-I),q=q+(q<0?V:-V),c&&(b?G>Q*M?$=(vy(p,g)?-q:q)/M:q=(vy(p,g)?-$:$)*M:y?($=q/M,g=p):(q=$*M,p=g));const O=p?T+q:T,D=g?k+$:k;return{width:w+(p?-q:q),height:R+(g?-$:$),x:u[0]*q*(p?-1:1)+O,y:u[1]*$*(g?-1:1)+D}}const sv={width:0,height:0,x:0,y:0},eT={...sv,pointerX:0,pointerY:0,aspectRatio:1};function tT(t){return[[0,0],[t.measured.width,t.measured.height]]}function nT(t,a,s){const o=a.position.x+t.position.x,c=a.position.y+t.position.y,u=t.measured.width??0,f=t.measured.height??0,m=s[0]*u,p=s[1]*f;return[[o-m,c-p],[o+u-m,c+f-p]]}function aT({domNode:t,nodeId:a,getStoreItems:s,onChange:o,onEnd:c}){const u=It(t);let f={controlDirection:by("bottom-right"),boundaries:{minWidth:0,minHeight:0,maxWidth:Number.MAX_VALUE,maxHeight:Number.MAX_VALUE},resizeDirection:void 0,keepAspectRatio:!1};function m({controlPosition:g,boundaries:y,keepAspectRatio:x,resizeDirection:b,onResizeStart:S,onResize:_,onResizeEnd:C,shouldResize:N}){let E={...sv},z={...eT};f={boundaries:y,resizeDirection:b,keepAspectRatio:x,controlDirection:by(g)};let T,k=null,w=[],R,M,q,$=!1;const G=h1().on("start",Q=>{const{nodeLookup:Z,transform:re,snapGrid:V,snapToGrid:I,nodeOrigin:O,paneDomNode:D}=s();if(T=Z.get(a),!T)return;k=D?.getBoundingClientRect()??null;const{xSnapped:P,ySnapped:L}=ro(Q.sourceEvent,{transform:re,snapGrid:V,snapToGrid:I,containerBounds:k});E={width:T.measured.width??0,height:T.measured.height??0,x:T.position.x??0,y:T.position.y??0},z={...E,pointerX:P,pointerY:L,aspectRatio:E.width/E.height},R=void 0,T.parentId&&(T.extent==="parent"||T.expandParent)&&(R=Z.get(T.parentId),M=R&&T.extent==="parent"?tT(R):void 0),w=[],q=void 0;for(const[W,B]of Z)if(B.parentId===a&&(w.push({id:W,position:{...B.position},extent:B.extent}),B.extent==="parent"||B.expandParent)){const H=nT(B,T,B.origin??O);q?q=[[Math.min(H[0][0],q[0][0]),Math.min(H[0][1],q[0][1])],[Math.max(H[1][0],q[1][0]),Math.max(H[1][1],q[1][1])]]:q=H}S?.(Q,{...E})}).on("drag",Q=>{const{transform:Z,snapGrid:re,snapToGrid:V,nodeOrigin:I}=s(),O=ro(Q.sourceEvent,{transform:Z,snapGrid:re,snapToGrid:V,containerBounds:k}),D=[];if(!T)return;const{x:P,y:L,width:W,height:B}=E,H={},te=T.origin??I,{width:ne,height:se,x:de,y:ue}=J8(z,f.controlDirection,O,f.boundaries,f.keepAspectRatio,te,M,q),U=ne!==W,ce=se!==B,he=de!==P&&U,ve=ue!==L&&ce;if(!he&&!ve&&!U&&!ce)return;if((he||ve||te[0]===1||te[1]===1)&&(H.x=he?de:E.x,H.y=ve?ue:E.y,E.x=H.x,E.y=H.y,w.length>0)){const Ae=de-P,Ee=ue-L;for(const $e of w)$e.position={x:$e.position.x-Ae+te[0]*(ne-W),y:$e.position.y-Ee+te[1]*(se-B)},D.push($e)}if((U||ce)&&(H.width=U&&(!f.resizeDirection||f.resizeDirection==="horizontal")?ne:E.width,H.height=ce&&(!f.resizeDirection||f.resizeDirection==="vertical")?se:E.height,E.width=H.width,E.height=H.height),R&&T.expandParent){const Ae=te[0]*(H.width??0);H.x&&H.x<Ae&&(E.x=Ae,z.x=z.x-(H.x-Ae));const Ee=te[1]*(H.height??0);H.y&&H.y<Ee&&(E.y=Ee,z.y=z.y-(H.y-Ee))}const pe=K8({width:E.width,prevWidth:W,height:E.height,prevHeight:B,affectsX:f.controlDirection.affectsX,affectsY:f.controlDirection.affectsY}),be={...E,direction:pe};N?.(Q,be)!==!1&&($=!0,_?.(Q,be),o(H,D))}).on("end",Q=>{$&&(C?.(Q,{...E}),c?.({...E}),$=!1)});u.call(G)}function p(){u.on(".drag",null)}return{update:m,destroy:p}}var Kf={exports:{}},Jf={},eh={exports:{}},th={};var wy;function sT(){if(wy)return th;wy=1;var t=yo();function a(x,b){return x===b&&(x!==0||1/x===1/b)||x!==x&&b!==b}var s=typeof Object.is=="function"?Object.is:a,o=t.useState,c=t.useEffect,u=t.useLayoutEffect,f=t.useDebugValue;function m(x,b){var S=b(),_=o({inst:{value:S,getSnapshot:b}}),C=_[0].inst,N=_[1];return u(function(){C.value=S,C.getSnapshot=b,p(C)&&N({inst:C})},[x,S,b]),c(function(){return p(C)&&N({inst:C}),x(function(){p(C)&&N({inst:C})})},[x]),f(S),S}function p(x){var b=x.getSnapshot;x=x.value;try{var S=b();return!s(x,S)}catch{return!0}}function g(x,b){return b()}var y=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?g:m;return th.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:y,th}var jy;function rT(){return jy||(jy=1,eh.exports=sT()),eh.exports}var Ny;function iT(){if(Ny)return Jf;Ny=1;var t=yo(),a=rT();function s(g,y){return g===y&&(g!==0||1/g===1/y)||g!==g&&y!==y}var o=typeof Object.is=="function"?Object.is:s,c=a.useSyncExternalStore,u=t.useRef,f=t.useEffect,m=t.useMemo,p=t.useDebugValue;return Jf.useSyncExternalStoreWithSelector=function(g,y,x,b,S){var _=u(null);if(_.current===null){var C={hasValue:!1,value:null};_.current=C}else C=_.current;_=m(function(){function E(R){if(!z){if(z=!0,T=R,R=b(R),S!==void 0&&C.hasValue){var M=C.value;if(S(M,R))return k=M}return k=R}if(M=k,o(T,R))return M;var q=b(R);return S!==void 0&&S(M,q)?(T=R,M):(T=R,k=q)}var z=!1,T,k,w=x===void 0?null:x;return[function(){return E(y())},w===null?void 0:function(){return E(w())}]},[y,x,b,S]);var N=c(g,_[0],_[1]);return f(function(){C.hasValue=!0,C.value=N},[N]),p(N),N},Jf}var Sy;function oT(){return Sy||(Sy=1,Kf.exports=iT()),Kf.exports}var lT=oT();const cT=Rh(lT),uT={},_y=t=>{let a;const s=new Set,o=(y,x)=>{const b=typeof y=="function"?y(a):y;if(!Object.is(b,a)){const S=a;a=x??(typeof b!="object"||b===null)?b:Object.assign({},a,b),s.forEach(_=>_(a,S))}},c=()=>a,p={setState:o,getState:c,getInitialState:()=>g,subscribe:y=>(s.add(y),()=>s.delete(y)),destroy:()=>{(uT?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),s.clear()}},g=a=t(o,c,p);return p},dT=t=>t?_y(t):_y,{useDebugValue:fT}=Mr,{useSyncExternalStoreWithSelector:hT}=cT,mT=t=>t;function rv(t,a=mT,s){const o=hT(t.subscribe,t.getState,t.getServerState||t.getInitialState,a,s);return fT(o),o}const Ey=(t,a)=>{const s=dT(t),o=(c,u=a)=>rv(s,c,u);return Object.assign(o,s),o},pT=(t,a)=>t?Ey(t,a):Ey;function We(t,a){if(Object.is(t,a))return!0;if(typeof t!="object"||t===null||typeof a!="object"||a===null)return!1;if(t instanceof Map&&a instanceof Map){if(t.size!==a.size)return!1;for(const[o,c]of t)if(!Object.is(c,a.get(o)))return!1;return!0}if(t instanceof Set&&a instanceof Set){if(t.size!==a.size)return!1;for(const o of t)if(!a.has(o))return!1;return!0}const s=Object.keys(t);if(s.length!==Object.keys(a).length)return!1;for(const o of s)if(!Object.prototype.hasOwnProperty.call(a,o)||!Object.is(t[o],a[o]))return!1;return!0}const fu=j.createContext(null),gT=fu.Provider,iv=$n.error001();function Oe(t,a){const s=j.useContext(fu);if(s===null)throw new Error(iv);return rv(s,t,a)}function Ke(){const t=j.useContext(fu);if(t===null)throw new Error(iv);return j.useMemo(()=>({getState:t.getState,setState:t.setState,subscribe:t.subscribe}),[t])}const Cy={display:"none"},xT={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},ov="react-flow__node-desc",lv="react-flow__edge-desc",yT="react-flow__aria-live",bT=t=>t.ariaLiveMessage,vT=t=>t.ariaLabelConfig;function wT({rfId:t}){const a=Oe(bT);return i.jsx("div",{id:`${yT}-${t}`,"aria-live":"assertive","aria-atomic":"true",style:xT,children:a})}function jT({rfId:t,disableKeyboardA11y:a}){const s=Oe(vT);return i.jsxs(i.Fragment,{children:[i.jsx("div",{id:`${ov}-${t}`,style:Cy,children:a?s["node.a11yDescription.default"]:s["node.a11yDescription.keyboardDisabled"]}),i.jsx("div",{id:`${lv}-${t}`,style:Cy,children:s["edge.a11yDescription.default"]}),!a&&i.jsx(wT,{rfId:t})]})}const hu=j.forwardRef(({position:t="top-left",children:a,className:s,style:o,...c},u)=>{const f=`${t}`.split("-");return i.jsx("div",{className:ut(["react-flow__panel",s,...f]),style:o,ref:u,...c,children:a})});hu.displayName="Panel";function NT({proOptions:t,position:a="bottom-right"}){return t?.hideAttribution?null:i.jsx(hu,{position:a,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:i.jsx("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const ST=t=>{const a=[],s=[];for(const[,o]of t.nodeLookup)o.selected&&a.push(o.internals.userNode);for(const[,o]of t.edgeLookup)o.selected&&s.push(o);return{selectedNodes:a,selectedEdges:s}},hc=t=>t.id;function _T(t,a){return We(t.selectedNodes.map(hc),a.selectedNodes.map(hc))&&We(t.selectedEdges.map(hc),a.selectedEdges.map(hc))}function ET({onSelectionChange:t}){const a=Ke(),{selectedNodes:s,selectedEdges:o}=Oe(ST,_T);return j.useEffect(()=>{const c={nodes:s,edges:o};t?.(c),a.getState().onSelectionChangeHandlers.forEach(u=>u(c))},[s,o,t]),null}const CT=t=>!!t.onSelectionChangeHandlers;function TT({onSelectionChange:t}){const a=Oe(CT);return t||a?i.jsx(ET,{onSelectionChange:t}):null}const cv=[0,0],MT={x:0,y:0,zoom:1},AT=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","autoPanOnNodeFocus","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","connectionDragThreshold","onBeforeDelete","debug","autoPanSpeed","ariaLabelConfig","zIndexMode"],Ty=[...AT,"rfId"],kT=t=>({setNodes:t.setNodes,setEdges:t.setEdges,setMinZoom:t.setMinZoom,setMaxZoom:t.setMaxZoom,setTranslateExtent:t.setTranslateExtent,setNodeExtent:t.setNodeExtent,reset:t.reset,setDefaultNodesAndEdges:t.setDefaultNodesAndEdges}),My={translateExtent:ho,nodeOrigin:cv,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1"};function zT(t){const{setNodes:a,setEdges:s,setMinZoom:o,setMaxZoom:c,setTranslateExtent:u,setNodeExtent:f,reset:m,setDefaultNodesAndEdges:p}=Oe(kT,We),g=Ke();j.useEffect(()=>(p(t.defaultNodes,t.defaultEdges),()=>{y.current=My,m()}),[]);const y=j.useRef(My);return j.useEffect(()=>{for(const x of Ty){const b=t[x],S=y.current[x];b!==S&&(typeof t[x]>"u"||(x==="nodes"?a(b):x==="edges"?s(b):x==="minZoom"?o(b):x==="maxZoom"?c(b):x==="translateExtent"?u(b):x==="nodeExtent"?f(b):x==="ariaLabelConfig"?g.setState({ariaLabelConfig:g8(b)}):x==="fitView"?g.setState({fitViewQueued:b}):x==="fitViewOptions"?g.setState({fitViewOptions:b}):g.setState({[x]:b})))}y.current=t},Ty.map(x=>t[x])),null}function Ay(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function RT(t){const[a,s]=j.useState(t==="system"?null:t);return j.useEffect(()=>{if(t!=="system"){s(t);return}const o=Ay(),c=()=>s(o?.matches?"dark":"light");return c(),o?.addEventListener("change",c),()=>{o?.removeEventListener("change",c)}},[t]),a!==null?a:Ay()?.matches?"dark":"light"}const ky=typeof document<"u"?document:null;function xo(t=null,a={target:ky,actInsideInputWithModifier:!0}){const[s,o]=j.useState(!1),c=j.useRef(!1),u=j.useRef(new Set([])),[f,m]=j.useMemo(()=>{if(t!==null){const g=(Array.isArray(t)?t:[t]).filter(x=>typeof x=="string").map(x=>x.replace("+",`
`).replace(`

`,`
+`).split(`
`)),y=g.reduce((x,b)=>x.concat(...b),[]);return[g,y]}return[[],[]]},[t]);return j.useEffect(()=>{const p=a?.target??ky,g=a?.actInsideInputWithModifier??!0;if(t!==null){const y=S=>{if(c.current=S.ctrlKey||S.metaKey||S.shiftKey||S.altKey,(!c.current||c.current&&!g)&&q1(S))return!1;const C=Ry(S.code,m);if(u.current.add(S[C]),zy(f,u.current,!1)){const N=S.composedPath?.()?.[0]||S.target,E=N?.nodeName==="BUTTON"||N?.nodeName==="A";a.preventDefault!==!1&&(c.current||!E)&&S.preventDefault(),o(!0)}},x=S=>{const _=Ry(S.code,m);zy(f,u.current,!0)?(o(!1),u.current.clear()):u.current.delete(S[_]),S.key==="Meta"&&u.current.clear(),c.current=!1},b=()=>{u.current.clear(),o(!1)};return p?.addEventListener("keydown",y),p?.addEventListener("keyup",x),window.addEventListener("blur",b),window.addEventListener("contextmenu",b),()=>{p?.removeEventListener("keydown",y),p?.removeEventListener("keyup",x),window.removeEventListener("blur",b),window.removeEventListener("contextmenu",b)}}},[t,o]),s}function zy(t,a,s){return t.filter(o=>s||o.length===a.size).some(o=>o.every(c=>a.has(c)))}function Ry(t,a){return a.includes(t)?"code":"key"}const DT=()=>{const t=Ke();return j.useMemo(()=>({zoomIn:a=>{const{panZoom:s}=t.getState();return s?s.scaleBy(1.2,{duration:a?.duration}):Promise.resolve(!1)},zoomOut:a=>{const{panZoom:s}=t.getState();return s?s.scaleBy(1/1.2,{duration:a?.duration}):Promise.resolve(!1)},zoomTo:(a,s)=>{const{panZoom:o}=t.getState();return o?o.scaleTo(a,{duration:s?.duration}):Promise.resolve(!1)},getZoom:()=>t.getState().transform[2],setViewport:async(a,s)=>{const{transform:[o,c,u],panZoom:f}=t.getState();return f?(await f.setViewport({x:a.x??o,y:a.y??c,zoom:a.zoom??u},s),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[a,s,o]=t.getState().transform;return{x:a,y:s,zoom:o}},setCenter:async(a,s,o)=>t.getState().setCenter(a,s,o),fitBounds:async(a,s)=>{const{width:o,height:c,minZoom:u,maxZoom:f,panZoom:m}=t.getState(),p=dm(a,o,c,u,f,s?.padding??.1);return m?(await m.setViewport(p,{duration:s?.duration,ease:s?.ease,interpolate:s?.interpolate}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(a,s={})=>{const{transform:o,snapGrid:c,snapToGrid:u,domNode:f}=t.getState();if(!f)return a;const{x:m,y:p}=f.getBoundingClientRect(),g={x:a.x-m,y:a.y-p},y=s.snapGrid??c,x=s.snapToGrid??u;return Ao(g,o,x,y)},flowToScreenPosition:a=>{const{transform:s,domNode:o}=t.getState();if(!o)return a;const{x:c,y:u}=o.getBoundingClientRect(),f=Gc(a,s);return{x:f.x+c,y:f.y+u}}}),[])};function uv(t,a){const s=[],o=new Map,c=[];for(const u of t)if(u.type==="add"){c.push(u);continue}else if(u.type==="remove"||u.type==="replace")o.set(u.id,[u]);else{const f=o.get(u.id);f?f.push(u):o.set(u.id,[u])}for(const u of a){const f=o.get(u.id);if(!f){s.push(u);continue}if(f[0].type==="remove")continue;if(f[0].type==="replace"){s.push({...f[0].item});continue}const m={...u};for(const p of f)OT(p,m);s.push(m)}return c.length&&c.forEach(u=>{u.index!==void 0?s.splice(u.index,0,{...u.item}):s.push({...u.item})}),s}function OT(t,a){switch(t.type){case"select":{a.selected=t.selected;break}case"position":{typeof t.position<"u"&&(a.position=t.position),typeof t.dragging<"u"&&(a.dragging=t.dragging);break}case"dimensions":{typeof t.dimensions<"u"&&(a.measured={...t.dimensions},t.setAttributes&&((t.setAttributes===!0||t.setAttributes==="width")&&(a.width=t.dimensions.width),(t.setAttributes===!0||t.setAttributes==="height")&&(a.height=t.dimensions.height))),typeof t.resizing=="boolean"&&(a.resizing=t.resizing);break}}}function dv(t,a){return uv(t,a)}function fv(t,a){return uv(t,a)}function Ms(t,a){return{id:t,type:"select",selected:a}}function kr(t,a=new Set,s=!1){const o=[];for(const[c,u]of t){const f=a.has(c);!(u.selected===void 0&&!f)&&u.selected!==f&&(s&&(u.selected=f),o.push(Ms(u.id,f)))}return o}function Dy({items:t=[],lookup:a}){const s=[],o=new Map(t.map(c=>[c.id,c]));for(const[c,u]of t.entries()){const f=a.get(u.id),m=f?.internals?.userNode??f;m!==void 0&&m!==u&&s.push({id:u.id,item:u,type:"replace"}),m===void 0&&s.push({item:u,type:"add",index:c})}for(const[c]of a)o.get(c)===void 0&&s.push({id:c,type:"remove"});return s}function Oy(t){return{id:t.id,type:"remove"}}const By=t=>i8(t),BT=t=>R1(t);function hv(t){return j.forwardRef(t)}const LT=typeof window<"u"?j.useLayoutEffect:j.useEffect;function Ly(t){const[a,s]=j.useState(BigInt(0)),[o]=j.useState(()=>HT(()=>s(c=>c+BigInt(1))));return LT(()=>{const c=o.get();c.length&&(t(c),o.reset())},[a]),o}function HT(t){let a=[];return{get:()=>a,reset:()=>{a=[]},push:s=>{a.push(s),t()}}}const mv=j.createContext(null);function $T({children:t}){const a=Ke(),s=j.useCallback(m=>{const{nodes:p=[],setNodes:g,hasDefaultNodes:y,onNodesChange:x,nodeLookup:b,fitViewQueued:S,onNodesChangeMiddlewareMap:_}=a.getState();let C=p;for(const E of m)C=typeof E=="function"?E(C):E;let N=Dy({items:C,lookup:b});for(const E of _.values())N=E(N);y&&g(C),N.length>0?x?.(N):S&&window.requestAnimationFrame(()=>{const{fitViewQueued:E,nodes:z,setNodes:T}=a.getState();E&&T(z)})},[]),o=Ly(s),c=j.useCallback(m=>{const{edges:p=[],setEdges:g,hasDefaultEdges:y,onEdgesChange:x,edgeLookup:b}=a.getState();let S=p;for(const _ of m)S=typeof _=="function"?_(S):_;y?g(S):x&&x(Dy({items:S,lookup:b}))},[]),u=Ly(c),f=j.useMemo(()=>({nodeQueue:o,edgeQueue:u}),[]);return i.jsx(mv.Provider,{value:f,children:t})}function UT(){const t=j.useContext(mv);if(!t)throw new Error("useBatchContext must be used within a BatchProvider");return t}const qT=t=>!!t.panZoom;function ym(){const t=DT(),a=Ke(),s=UT(),o=Oe(qT),c=j.useMemo(()=>{const u=x=>a.getState().nodeLookup.get(x),f=x=>{s.nodeQueue.push(x)},m=x=>{s.edgeQueue.push(x)},p=x=>{const{nodeLookup:b,nodeOrigin:S}=a.getState(),_=By(x)?x:b.get(x.id),C=_.parentId?$1(_.position,_.measured,_.parentId,b,S):_.position,N={..._,position:C,width:_.measured?.width??_.width,height:_.measured?.height??_.height};return Yr(N)},g=(x,b,S={replace:!1})=>{f(_=>_.map(C=>{if(C.id===x){const N=typeof b=="function"?b(C):b;return S.replace&&By(N)?N:{...C,...N}}return C}))},y=(x,b,S={replace:!1})=>{m(_=>_.map(C=>{if(C.id===x){const N=typeof b=="function"?b(C):b;return S.replace&&BT(N)?N:{...C,...N}}return C}))};return{getNodes:()=>a.getState().nodes.map(x=>({...x})),getNode:x=>u(x)?.internals.userNode,getInternalNode:u,getEdges:()=>{const{edges:x=[]}=a.getState();return x.map(b=>({...b}))},getEdge:x=>a.getState().edgeLookup.get(x),setNodes:f,setEdges:m,addNodes:x=>{const b=Array.isArray(x)?x:[x];s.nodeQueue.push(S=>[...S,...b])},addEdges:x=>{const b=Array.isArray(x)?x:[x];s.edgeQueue.push(S=>[...S,...b])},toObject:()=>{const{nodes:x=[],edges:b=[],transform:S}=a.getState(),[_,C,N]=S;return{nodes:x.map(E=>({...E})),edges:b.map(E=>({...E})),viewport:{x:_,y:C,zoom:N}}},deleteElements:async({nodes:x=[],edges:b=[]})=>{const{nodes:S,edges:_,onNodesDelete:C,onEdgesDelete:N,triggerNodeChanges:E,triggerEdgeChanges:z,onDelete:T,onBeforeDelete:k}=a.getState(),{nodes:w,edges:R}=await d8({nodesToRemove:x,edgesToRemove:b,nodes:S,edges:_,onBeforeDelete:k}),M=R.length>0,q=w.length>0;if(M){const $=R.map(Oy);N?.(R),z($)}if(q){const $=w.map(Oy);C?.(w),E($)}return(q||M)&&T?.({nodes:w,edges:R}),{deletedNodes:w,deletedEdges:R}},getIntersectingNodes:(x,b=!0,S)=>{const _=ly(x),C=_?x:p(x),N=S!==void 0;return C?(S||a.getState().nodes).filter(E=>{const z=a.getState().nodeLookup.get(E.id);if(z&&!_&&(E.id===x.id||!z.internals.positionAbsolute))return!1;const T=Yr(N?E:z),k=po(T,C);return b&&k>0||k>=T.width*T.height||k>=C.width*C.height}):[]},isNodeIntersecting:(x,b,S=!0)=>{const C=ly(x)?x:p(x);if(!C)return!1;const N=po(C,b);return S&&N>0||N>=b.width*b.height||N>=C.width*C.height},updateNode:g,updateNodeData:(x,b,S={replace:!1})=>{g(x,_=>{const C=typeof b=="function"?b(_):b;return S.replace?{..._,data:C}:{..._,data:{..._.data,...C}}},S)},updateEdge:y,updateEdgeData:(x,b,S={replace:!1})=>{y(x,_=>{const C=typeof b=="function"?b(_):b;return S.replace?{..._,data:C}:{..._,data:{..._.data,...C}}},S)},getNodesBounds:x=>{const{nodeLookup:b,nodeOrigin:S}=a.getState();return o8(x,{nodeLookup:b,nodeOrigin:S})},getHandleConnections:({type:x,id:b,nodeId:S})=>Array.from(a.getState().connectionLookup.get(`${S}-${x}${b?`-${b}`:""}`)?.values()??[]),getNodeConnections:({type:x,handleId:b,nodeId:S})=>Array.from(a.getState().connectionLookup.get(`${S}${x?b?`-${x}-${b}`:`-${x}`:""}`)?.values()??[]),fitView:async x=>{const b=a.getState().fitViewResolver??p8();return a.setState({fitViewQueued:!0,fitViewOptions:x,fitViewResolver:b}),s.nodeQueue.push(S=>[...S]),b.promise}}},[]);return j.useMemo(()=>({...c,...t,viewportInitialized:o}),[o])}const Hy=t=>t.selected,VT=typeof window<"u"?window:void 0;function YT({deleteKeyCode:t,multiSelectionKeyCode:a}){const s=Ke(),{deleteElements:o}=ym(),c=xo(t,{actInsideInputWithModifier:!1}),u=xo(a,{target:VT});j.useEffect(()=>{if(c){const{edges:f,nodes:m}=s.getState();o({nodes:m.filter(Hy),edges:f.filter(Hy)}),s.setState({nodesSelectionActive:!1})}},[c]),j.useEffect(()=>{s.setState({multiSelectionActive:u})},[u])}function PT(t){const a=Ke();j.useEffect(()=>{const s=()=>{if(!t.current||!(t.current.checkVisibility?.()??!0))return!1;const o=fm(t.current);(o.height===0||o.width===0)&&a.getState().onError?.("004",$n.error004()),a.setState({width:o.width||500,height:o.height||500})};if(t.current){s(),window.addEventListener("resize",s);const o=new ResizeObserver(()=>s());return o.observe(t.current),()=>{window.removeEventListener("resize",s),o&&t.current&&o.unobserve(t.current)}}},[])}const mu={position:"absolute",width:"100%",height:"100%",top:0,left:0},XT=t=>({userSelectionActive:t.userSelectionActive,lib:t.lib,connectionInProgress:t.connection.inProgress});function IT({onPaneContextMenu:t,zoomOnScroll:a=!0,zoomOnPinch:s=!0,panOnScroll:o=!1,panOnScrollSpeed:c=.5,panOnScrollMode:u=Ds.Free,zoomOnDoubleClick:f=!0,panOnDrag:m=!0,defaultViewport:p,translateExtent:g,minZoom:y,maxZoom:x,zoomActivationKeyCode:b,preventScrolling:S=!0,children:_,noWheelClassName:C,noPanClassName:N,onViewportChange:E,isControlledViewport:z,paneClickDistance:T,selectionOnDrag:k}){const w=Ke(),R=j.useRef(null),{userSelectionActive:M,lib:q,connectionInProgress:$}=Oe(XT,We),G=xo(b),Q=j.useRef();PT(R);const Z=j.useCallback(re=>{E?.({x:re[0],y:re[1],zoom:re[2]}),z||w.setState({transform:re})},[E,z]);return j.useEffect(()=>{if(R.current){Q.current=W8({domNode:R.current,minZoom:y,maxZoom:x,translateExtent:g,viewport:p,onDraggingChange:O=>w.setState({paneDragging:O}),onPanZoomStart:(O,D)=>{const{onViewportChangeStart:P,onMoveStart:L}=w.getState();L?.(O,D),P?.(D)},onPanZoom:(O,D)=>{const{onViewportChange:P,onMove:L}=w.getState();L?.(O,D),P?.(D)},onPanZoomEnd:(O,D)=>{const{onViewportChangeEnd:P,onMoveEnd:L}=w.getState();L?.(O,D),P?.(D)}});const{x:re,y:V,zoom:I}=Q.current.getViewport();return w.setState({panZoom:Q.current,transform:[re,V,I],domNode:R.current.closest(".react-flow")}),()=>{Q.current?.destroy()}}},[]),j.useEffect(()=>{Q.current?.update({onPaneContextMenu:t,zoomOnScroll:a,zoomOnPinch:s,panOnScroll:o,panOnScrollSpeed:c,panOnScrollMode:u,zoomOnDoubleClick:f,panOnDrag:m,zoomActivationKeyPressed:G,preventScrolling:S,noPanClassName:N,userSelectionActive:M,noWheelClassName:C,lib:q,onTransformChange:Z,connectionInProgress:$,selectionOnDrag:k,paneClickDistance:T})},[t,a,s,o,c,u,f,m,G,S,N,M,C,q,Z,$,k,T]),i.jsx("div",{className:"react-flow__renderer",ref:R,style:mu,children:_})}const GT=t=>({userSelectionActive:t.userSelectionActive,userSelectionRect:t.userSelectionRect});function QT(){const{userSelectionActive:t,userSelectionRect:a}=Oe(GT,We);return t&&a?i.jsx("div",{className:"react-flow__selection react-flow__container",style:{width:a.width,height:a.height,transform:`translate(${a.x}px, ${a.y}px)`}}):null}const nh=(t,a)=>s=>{s.target===a.current&&t?.(s)},ZT=t=>({userSelectionActive:t.userSelectionActive,elementsSelectable:t.elementsSelectable,connectionInProgress:t.connection.inProgress,dragging:t.paneDragging});function FT({isSelecting:t,selectionKeyPressed:a,selectionMode:s=mo.Full,panOnDrag:o,paneClickDistance:c,selectionOnDrag:u,onSelectionStart:f,onSelectionEnd:m,onPaneClick:p,onPaneContextMenu:g,onPaneScroll:y,onPaneMouseEnter:x,onPaneMouseMove:b,onPaneMouseLeave:S,children:_}){const C=Ke(),{userSelectionActive:N,elementsSelectable:E,dragging:z,connectionInProgress:T}=Oe(ZT,We),k=E&&(t||N),w=j.useRef(null),R=j.useRef(),M=j.useRef(new Set),q=j.useRef(new Set),$=j.useRef(!1),G=P=>{if($.current||T){$.current=!1;return}p?.(P),C.getState().resetSelectedElements(),C.setState({nodesSelectionActive:!1})},Q=P=>{if(Array.isArray(o)&&o?.includes(2)){P.preventDefault();return}g?.(P)},Z=y?P=>y(P):void 0,re=P=>{$.current&&(P.stopPropagation(),$.current=!1)},V=P=>{const{domNode:L}=C.getState();if(R.current=L?.getBoundingClientRect(),!R.current)return;const W=P.target===w.current;if(!W&&!!P.target.closest(".nokey")||!t||!(u&&W||a)||P.button!==0||!P.isPrimary)return;P.target?.setPointerCapture?.(P.pointerId),$.current=!1;const{x:te,y:ne}=jn(P.nativeEvent,R.current);C.setState({userSelectionRect:{width:0,height:0,startX:te,startY:ne,x:te,y:ne}}),W||(P.stopPropagation(),P.preventDefault())},I=P=>{const{userSelectionRect:L,transform:W,nodeLookup:B,edgeLookup:H,connectionLookup:te,triggerNodeChanges:ne,triggerEdgeChanges:se,defaultEdgeOptions:de,resetSelectedElements:ue}=C.getState();if(!R.current||!L)return;const{x:U,y:ce}=jn(P.nativeEvent,R.current),{startX:he,startY:ve}=L;if(!$.current){const Ee=a?0:c;if(Math.hypot(U-he,ce-ve)<=Ee)return;ue(),f?.(P)}$.current=!0;const pe={startX:he,startY:ve,x:U<he?U:he,y:ce<ve?ce:ve,width:Math.abs(U-he),height:Math.abs(ce-ve)},be=M.current,Se=q.current;M.current=new Set(um(B,pe,W,s===mo.Partial,!0).map(Ee=>Ee.id)),q.current=new Set;const Ae=de?.selectable??!0;for(const Ee of M.current){const $e=te.get(Ee);if($e)for(const{edgeId:Re}of $e.values()){const gt=H.get(Re);gt&&(gt.selectable??Ae)&&q.current.add(Re)}}if(!cy(be,M.current)){const Ee=kr(B,M.current,!0);ne(Ee)}if(!cy(Se,q.current)){const Ee=kr(H,q.current);se(Ee)}C.setState({userSelectionRect:pe,userSelectionActive:!0,nodesSelectionActive:!1})},O=P=>{P.button===0&&(P.target?.releasePointerCapture?.(P.pointerId),!N&&P.target===w.current&&C.getState().userSelectionRect&&G?.(P),C.setState({userSelectionActive:!1,userSelectionRect:null}),$.current&&(m?.(P),C.setState({nodesSelectionActive:M.current.size>0})))},D=o===!0||Array.isArray(o)&&o.includes(0);return i.jsxs("div",{className:ut(["react-flow__pane",{draggable:D,dragging:z,selection:t}]),onClick:k?void 0:nh(G,w),onContextMenu:nh(Q,w),onWheel:nh(Z,w),onPointerEnter:k?void 0:x,onPointerMove:k?I:b,onPointerUp:k?O:void 0,onPointerDownCapture:k?V:void 0,onClickCapture:k?re:void 0,onPointerLeave:S,ref:w,style:mu,children:[_,i.jsx(QT,{})]})}function zh({id:t,store:a,unselect:s=!1,nodeRef:o}){const{addSelectedNodes:c,unselectNodesAndEdges:u,multiSelectionActive:f,nodeLookup:m,onError:p}=a.getState(),g=m.get(t);if(!g){p?.("012",$n.error012(t));return}a.setState({nodesSelectionActive:!1}),g.selected?(s||g.selected&&f)&&(u({nodes:[g],edges:[]}),requestAnimationFrame(()=>o?.current?.blur())):c([t])}function pv({nodeRef:t,disabled:a=!1,noDragClassName:s,handleSelector:o,nodeId:c,isSelectable:u,nodeClickDistance:f}){const m=Ke(),[p,g]=j.useState(!1),y=j.useRef();return j.useEffect(()=>{y.current=L8({getStoreItems:()=>m.getState(),onNodeMouseDown:x=>{zh({id:x,store:m,nodeRef:t})},onDragStart:()=>{g(!0)},onDragStop:()=>{g(!1)}})},[]),j.useEffect(()=>{if(a)y.current?.destroy();else if(t.current)return y.current?.update({noDragClassName:s,handleSelector:o,domNode:t.current,isSelectable:u,nodeId:c,nodeClickDistance:f}),()=>{y.current?.destroy()}},[s,o,a,u,t,c]),p}const WT=t=>a=>a.selected&&(a.draggable||t&&typeof a.draggable>"u");function gv(){const t=Ke();return j.useCallback(s=>{const{nodeExtent:o,snapToGrid:c,snapGrid:u,nodesDraggable:f,onError:m,updateNodePositions:p,nodeLookup:g,nodeOrigin:y}=t.getState(),x=new Map,b=WT(f),S=c?u[0]:5,_=c?u[1]:5,C=s.direction.x*S*s.factor,N=s.direction.y*_*s.factor;for(const[,E]of g){if(!b(E))continue;let z={x:E.internals.positionAbsolute.x+C,y:E.internals.positionAbsolute.y+N};c&&(z=Mo(z,u));const{position:T,positionAbsolute:k}=D1({nodeId:E.id,nextPosition:z,nodeLookup:g,nodeExtent:o,nodeOrigin:y,onError:m});E.position=T,E.internals.positionAbsolute=k,x.set(E.id,E)}p(x)},[])}const bm=j.createContext(null),KT=bm.Provider;bm.Consumer;const xv=()=>j.useContext(bm),JT=t=>({connectOnClick:t.connectOnClick,noPanClassName:t.noPanClassName,rfId:t.rfId}),eM=(t,a,s)=>o=>{const{connectionClickStartHandle:c,connectionMode:u,connection:f}=o,{fromHandle:m,toHandle:p,isValid:g}=f,y=p?.nodeId===t&&p?.id===a&&p?.type===s;return{connectingFrom:m?.nodeId===t&&m?.id===a&&m?.type===s,connectingTo:y,clickConnecting:c?.nodeId===t&&c?.id===a&&c?.type===s,isPossibleEndHandle:u===qr.Strict?m?.type!==s:t!==m?.nodeId||a!==m?.id,connectionInProcess:!!m,clickConnectionInProcess:!!c,valid:y&&g}};function tM({type:t="source",position:a=xe.Top,isValidConnection:s,isConnectable:o=!0,isConnectableStart:c=!0,isConnectableEnd:u=!0,id:f,onConnect:m,children:p,className:g,onMouseDown:y,onTouchStart:x,...b},S){const _=f||null,C=t==="target",N=Ke(),E=xv(),{connectOnClick:z,noPanClassName:T,rfId:k}=Oe(JT,We),{connectingFrom:w,connectingTo:R,clickConnecting:M,isPossibleEndHandle:q,connectionInProcess:$,clickConnectionInProcess:G,valid:Q}=Oe(eM(E,_,t),We);E||N.getState().onError?.("010",$n.error010());const Z=I=>{const{defaultEdgeOptions:O,onConnect:D,hasDefaultEdges:P}=N.getState(),L={...O,...I};if(P){const{edges:W,setEdges:B}=N.getState();B(I1(L,W))}D?.(L),m?.(L)},re=I=>{if(!E)return;const O=V1(I.nativeEvent);if(c&&(O&&I.button===0||!O)){const D=N.getState();kh.onPointerDown(I.nativeEvent,{handleDomNode:I.currentTarget,autoPanOnConnect:D.autoPanOnConnect,connectionMode:D.connectionMode,connectionRadius:D.connectionRadius,domNode:D.domNode,nodeLookup:D.nodeLookup,lib:D.lib,isTarget:C,handleId:_,nodeId:E,flowId:D.rfId,panBy:D.panBy,cancelConnection:D.cancelConnection,onConnectStart:D.onConnectStart,onConnectEnd:D.onConnectEnd,updateConnection:D.updateConnection,onConnect:Z,isValidConnection:s||D.isValidConnection,getTransform:()=>N.getState().transform,getFromHandle:()=>N.getState().connection.fromHandle,autoPanSpeed:D.autoPanSpeed,dragThreshold:D.connectionDragThreshold})}O?y?.(I):x?.(I)},V=I=>{const{onClickConnectStart:O,onClickConnectEnd:D,connectionClickStartHandle:P,connectionMode:L,isValidConnection:W,lib:B,rfId:H,nodeLookup:te,connection:ne}=N.getState();if(!E||!P&&!c)return;if(!P){O?.(I.nativeEvent,{nodeId:E,handleId:_,handleType:t}),N.setState({connectionClickStartHandle:{nodeId:E,type:t,id:_}});return}const se=U1(I.target),de=s||W,{connection:ue,isValid:U}=kh.isValid(I.nativeEvent,{handle:{nodeId:E,id:_,type:t},connectionMode:L,fromNodeId:P.nodeId,fromHandleId:P.id||null,fromType:P.type,isValidConnection:de,flowId:H,doc:se,lib:B,nodeLookup:te});U&&ue&&Z(ue);const ce=structuredClone(ne);delete ce.inProgress,ce.toPosition=ce.toHandle?ce.toHandle.position:null,D?.(I,ce),N.setState({connectionClickStartHandle:null})};return i.jsx("div",{"data-handleid":_,"data-nodeid":E,"data-handlepos":a,"data-id":`${k}-${E}-${_}-${t}`,className:ut(["react-flow__handle",`react-flow__handle-${a}`,"nodrag",T,g,{source:!C,target:C,connectable:o,connectablestart:c,connectableend:u,clickconnecting:M,connectingfrom:w,connectingto:R,valid:Q,connectionindicator:o&&(!$||q)&&($||G?u:c)}]),onMouseDown:re,onTouchStart:re,onClick:z?V:void 0,ref:S,...b,children:p})}const Ir=j.memo(hv(tM));function nM({data:t,isConnectable:a,sourcePosition:s=xe.Bottom}){return i.jsxs(i.Fragment,{children:[t?.label,i.jsx(Ir,{type:"source",position:s,isConnectable:a})]})}function aM({data:t,isConnectable:a,targetPosition:s=xe.Top,sourcePosition:o=xe.Bottom}){return i.jsxs(i.Fragment,{children:[i.jsx(Ir,{type:"target",position:s,isConnectable:a}),t?.label,i.jsx(Ir,{type:"source",position:o,isConnectable:a})]})}function sM(){return null}function rM({data:t,isConnectable:a,targetPosition:s=xe.Top}){return i.jsxs(i.Fragment,{children:[i.jsx(Ir,{type:"target",position:s,isConnectable:a}),t?.label]})}const Qc={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},$y={input:nM,default:aM,output:rM,group:sM};function iM(t){return t.internals.handleBounds===void 0?{width:t.width??t.initialWidth??t.style?.width,height:t.height??t.initialHeight??t.style?.height}:{width:t.width??t.style?.width,height:t.height??t.style?.height}}const oM=t=>{const{width:a,height:s,x:o,y:c}=To(t.nodeLookup,{filter:u=>!!u.selected});return{width:wn(a)?a:null,height:wn(s)?s:null,userSelectionActive:t.userSelectionActive,transformString:`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]}) translate(${o}px,${c}px)`}};function lM({onSelectionContextMenu:t,noPanClassName:a,disableKeyboardA11y:s}){const o=Ke(),{width:c,height:u,transformString:f,userSelectionActive:m}=Oe(oM,We),p=gv(),g=j.useRef(null);if(j.useEffect(()=>{s||g.current?.focus({preventScroll:!0})},[s]),pv({nodeRef:g}),m||!c||!u)return null;const y=t?b=>{const S=o.getState().nodes.filter(_=>_.selected);t(b,S)}:void 0,x=b=>{Object.prototype.hasOwnProperty.call(Qc,b.key)&&(b.preventDefault(),p({direction:Qc[b.key],factor:b.shiftKey?4:1}))};return i.jsx("div",{className:ut(["react-flow__nodesselection","react-flow__container",a]),style:{transform:f},children:i.jsx("div",{ref:g,className:"react-flow__nodesselection-rect",onContextMenu:y,tabIndex:s?void 0:-1,onKeyDown:s?void 0:x,style:{width:c,height:u}})})}const Uy=typeof window<"u"?window:void 0,cM=t=>({nodesSelectionActive:t.nodesSelectionActive,userSelectionActive:t.userSelectionActive});function yv({children:t,onPaneClick:a,onPaneMouseEnter:s,onPaneMouseMove:o,onPaneMouseLeave:c,onPaneContextMenu:u,onPaneScroll:f,paneClickDistance:m,deleteKeyCode:p,selectionKeyCode:g,selectionOnDrag:y,selectionMode:x,onSelectionStart:b,onSelectionEnd:S,multiSelectionKeyCode:_,panActivationKeyCode:C,zoomActivationKeyCode:N,elementsSelectable:E,zoomOnScroll:z,zoomOnPinch:T,panOnScroll:k,panOnScrollSpeed:w,panOnScrollMode:R,zoomOnDoubleClick:M,panOnDrag:q,defaultViewport:$,translateExtent:G,minZoom:Q,maxZoom:Z,preventScrolling:re,onSelectionContextMenu:V,noWheelClassName:I,noPanClassName:O,disableKeyboardA11y:D,onViewportChange:P,isControlledViewport:L}){const{nodesSelectionActive:W,userSelectionActive:B}=Oe(cM,We),H=xo(g,{target:Uy}),te=xo(C,{target:Uy}),ne=te||q,se=te||k,de=y&&ne!==!0,ue=H||B||de;return YT({deleteKeyCode:p,multiSelectionKeyCode:_}),i.jsx(IT,{onPaneContextMenu:u,elementsSelectable:E,zoomOnScroll:z,zoomOnPinch:T,panOnScroll:se,panOnScrollSpeed:w,panOnScrollMode:R,zoomOnDoubleClick:M,panOnDrag:!H&&ne,defaultViewport:$,translateExtent:G,minZoom:Q,maxZoom:Z,zoomActivationKeyCode:N,preventScrolling:re,noWheelClassName:I,noPanClassName:O,onViewportChange:P,isControlledViewport:L,paneClickDistance:m,selectionOnDrag:de,children:i.jsxs(FT,{onSelectionStart:b,onSelectionEnd:S,onPaneClick:a,onPaneMouseEnter:s,onPaneMouseMove:o,onPaneMouseLeave:c,onPaneContextMenu:u,onPaneScroll:f,panOnDrag:ne,isSelecting:!!ue,selectionMode:x,selectionKeyPressed:H,paneClickDistance:m,selectionOnDrag:de,children:[t,W&&i.jsx(lM,{onSelectionContextMenu:V,noPanClassName:O,disableKeyboardA11y:D})]})})}yv.displayName="FlowRenderer";const uM=j.memo(yv),dM=t=>a=>t?um(a.nodeLookup,{x:0,y:0,width:a.width,height:a.height},a.transform,!0).map(s=>s.id):Array.from(a.nodeLookup.keys());function fM(t){return Oe(j.useCallback(dM(t),[t]),We)}const hM=t=>t.updateNodeInternals;function mM(){const t=Oe(hM),[a]=j.useState(()=>typeof ResizeObserver>"u"?null:new ResizeObserver(s=>{const o=new Map;s.forEach(c=>{const u=c.target.getAttribute("data-id");o.set(u,{id:u,nodeElement:c.target,force:!0})}),t(o)}));return j.useEffect(()=>()=>{a?.disconnect()},[a]),a}function pM({node:t,nodeType:a,hasDimensions:s,resizeObserver:o}){const c=Ke(),u=j.useRef(null),f=j.useRef(null),m=j.useRef(t.sourcePosition),p=j.useRef(t.targetPosition),g=j.useRef(a),y=s&&!!t.internals.handleBounds;return j.useEffect(()=>{u.current&&!t.hidden&&(!y||f.current!==u.current)&&(f.current&&o?.unobserve(f.current),o?.observe(u.current),f.current=u.current)},[y,t.hidden]),j.useEffect(()=>()=>{f.current&&(o?.unobserve(f.current),f.current=null)},[]),j.useEffect(()=>{if(u.current){const x=g.current!==a,b=m.current!==t.sourcePosition,S=p.current!==t.targetPosition;(x||b||S)&&(g.current=a,m.current=t.sourcePosition,p.current=t.targetPosition,c.getState().updateNodeInternals(new Map([[t.id,{id:t.id,nodeElement:u.current,force:!0}]])))}},[t.id,a,t.sourcePosition,t.targetPosition]),u}function gM({id:t,onClick:a,onMouseEnter:s,onMouseMove:o,onMouseLeave:c,onContextMenu:u,onDoubleClick:f,nodesDraggable:m,elementsSelectable:p,nodesConnectable:g,nodesFocusable:y,resizeObserver:x,noDragClassName:b,noPanClassName:S,disableKeyboardA11y:_,rfId:C,nodeTypes:N,nodeClickDistance:E,onError:z}){const{node:T,internals:k,isParent:w}=Oe(U=>{const ce=U.nodeLookup.get(t),he=U.parentLookup.has(t);return{node:ce,internals:ce.internals,isParent:he}},We);let R=T.type||"default",M=N?.[R]||$y[R];M===void 0&&(z?.("003",$n.error003(R)),R="default",M=N?.default||$y.default);const q=!!(T.draggable||m&&typeof T.draggable>"u"),$=!!(T.selectable||p&&typeof T.selectable>"u"),G=!!(T.connectable||g&&typeof T.connectable>"u"),Q=!!(T.focusable||y&&typeof T.focusable>"u"),Z=Ke(),re=H1(T),V=pM({node:T,nodeType:R,hasDimensions:re,resizeObserver:x}),I=pv({nodeRef:V,disabled:T.hidden||!q,noDragClassName:b,handleSelector:T.dragHandle,nodeId:t,isSelectable:$,nodeClickDistance:E}),O=gv();if(T.hidden)return null;const D=wa(T),P=iM(T),L=$||q||a||s||o||c,W=s?U=>s(U,{...k.userNode}):void 0,B=o?U=>o(U,{...k.userNode}):void 0,H=c?U=>c(U,{...k.userNode}):void 0,te=u?U=>u(U,{...k.userNode}):void 0,ne=f?U=>f(U,{...k.userNode}):void 0,se=U=>{const{selectNodesOnDrag:ce,nodeDragThreshold:he}=Z.getState();$&&(!ce||!q||he>0)&&zh({id:t,store:Z,nodeRef:V}),a&&a(U,{...k.userNode})},de=U=>{if(!(q1(U.nativeEvent)||_)){if(M1.includes(U.key)&&$){const ce=U.key==="Escape";zh({id:t,store:Z,unselect:ce,nodeRef:V})}else if(q&&T.selected&&Object.prototype.hasOwnProperty.call(Qc,U.key)){U.preventDefault();const{ariaLabelConfig:ce}=Z.getState();Z.setState({ariaLiveMessage:ce["node.a11yDescription.ariaLiveMessage"]({direction:U.key.replace("Arrow","").toLowerCase(),x:~~k.positionAbsolute.x,y:~~k.positionAbsolute.y})}),O({direction:Qc[U.key],factor:U.shiftKey?4:1})}}},ue=()=>{if(_||!V.current?.matches(":focus-visible"))return;const{transform:U,width:ce,height:he,autoPanOnNodeFocus:ve,setCenter:pe}=Z.getState();if(!ve)return;um(new Map([[t,T]]),{x:0,y:0,width:ce,height:he},U,!0).length>0||pe(T.position.x+D.width/2,T.position.y+D.height/2,{zoom:U[2]})};return i.jsx("div",{className:ut(["react-flow__node",`react-flow__node-${R}`,{[S]:q},T.className,{selected:T.selected,selectable:$,parent:w,draggable:q,dragging:I}]),ref:V,style:{zIndex:k.z,transform:`translate(${k.positionAbsolute.x}px,${k.positionAbsolute.y}px)`,pointerEvents:L?"all":"none",visibility:re?"visible":"hidden",...T.style,...P},"data-id":t,"data-testid":`rf__node-${t}`,onMouseEnter:W,onMouseMove:B,onMouseLeave:H,onContextMenu:te,onClick:se,onDoubleClick:ne,onKeyDown:Q?de:void 0,tabIndex:Q?0:void 0,onFocus:Q?ue:void 0,role:T.ariaRole??(Q?"group":void 0),"aria-roledescription":"node","aria-describedby":_?void 0:`${ov}-${C}`,"aria-label":T.ariaLabel,...T.domAttributes,children:i.jsx(KT,{value:t,children:i.jsx(M,{id:t,data:T.data,type:R,positionAbsoluteX:k.positionAbsolute.x,positionAbsoluteY:k.positionAbsolute.y,selected:T.selected??!1,selectable:$,draggable:q,deletable:T.deletable??!0,isConnectable:G,sourcePosition:T.sourcePosition,targetPosition:T.targetPosition,dragging:I,dragHandle:T.dragHandle,zIndex:k.z,parentId:T.parentId,...D})})})}var xM=j.memo(gM);const yM=t=>({nodesDraggable:t.nodesDraggable,nodesConnectable:t.nodesConnectable,nodesFocusable:t.nodesFocusable,elementsSelectable:t.elementsSelectable,onError:t.onError});function bv(t){const{nodesDraggable:a,nodesConnectable:s,nodesFocusable:o,elementsSelectable:c,onError:u}=Oe(yM,We),f=fM(t.onlyRenderVisibleElements),m=mM();return i.jsx("div",{className:"react-flow__nodes",style:mu,children:f.map(p=>i.jsx(xM,{id:p,nodeTypes:t.nodeTypes,nodeExtent:t.nodeExtent,onClick:t.onNodeClick,onMouseEnter:t.onNodeMouseEnter,onMouseMove:t.onNodeMouseMove,onMouseLeave:t.onNodeMouseLeave,onContextMenu:t.onNodeContextMenu,onDoubleClick:t.onNodeDoubleClick,noDragClassName:t.noDragClassName,noPanClassName:t.noPanClassName,rfId:t.rfId,disableKeyboardA11y:t.disableKeyboardA11y,resizeObserver:m,nodesDraggable:a,nodesConnectable:s,nodesFocusable:o,elementsSelectable:c,nodeClickDistance:t.nodeClickDistance,onError:u},p))})}bv.displayName="NodeRenderer";const bM=j.memo(bv);function vM(t){return Oe(j.useCallback(s=>{if(!t)return s.edges.map(c=>c.id);const o=[];if(s.width&&s.height)for(const c of s.edges){const u=s.nodeLookup.get(c.source),f=s.nodeLookup.get(c.target);u&&f&&b8({sourceNode:u,targetNode:f,width:s.width,height:s.height,transform:s.transform})&&o.push(c.id)}return o},[t]),We)}const wM=({color:t="none",strokeWidth:a=1})=>{const s={strokeWidth:a,...t&&{stroke:t}};return i.jsx("polyline",{className:"arrow",style:s,strokeLinecap:"round",fill:"none",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4"})},jM=({color:t="none",strokeWidth:a=1})=>{const s={strokeWidth:a,...t&&{stroke:t,fill:t}};return i.jsx("polyline",{className:"arrowclosed",style:s,strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"})},qy={[Xc.Arrow]:wM,[Xc.ArrowClosed]:jM};function NM(t){const a=Ke();return j.useMemo(()=>Object.prototype.hasOwnProperty.call(qy,t)?qy[t]:(a.getState().onError?.("009",$n.error009(t)),null),[t])}const SM=({id:t,type:a,color:s,width:o=12.5,height:c=12.5,markerUnits:u="strokeWidth",strokeWidth:f,orient:m="auto-start-reverse"})=>{const p=NM(a);return p?i.jsx("marker",{className:"react-flow__arrowhead",id:t,markerWidth:`${o}`,markerHeight:`${c}`,viewBox:"-10 -10 20 20",markerUnits:u,orient:m,refX:"0",refY:"0",children:i.jsx(p,{color:s,strokeWidth:f})}):null},vv=({defaultColor:t,rfId:a})=>{const s=Oe(u=>u.edges),o=Oe(u=>u.defaultEdgeOptions),c=j.useMemo(()=>E8(s,{id:a,defaultColor:t,defaultMarkerStart:o?.markerStart,defaultMarkerEnd:o?.markerEnd}),[s,o,a,t]);return c.length?i.jsx("svg",{className:"react-flow__marker","aria-hidden":"true",children:i.jsx("defs",{children:c.map(u=>i.jsx(SM,{id:u.id,type:u.type,color:u.color,width:u.width,height:u.height,markerUnits:u.markerUnits,strokeWidth:u.strokeWidth,orient:u.orient},u.id))})}):null};vv.displayName="MarkerDefinitions";var _M=j.memo(vv);function wv({x:t,y:a,label:s,labelStyle:o,labelShowBg:c=!0,labelBgStyle:u,labelBgPadding:f=[2,4],labelBgBorderRadius:m=2,children:p,className:g,...y}){const[x,b]=j.useState({x:1,y:0,width:0,height:0}),S=ut(["react-flow__edge-textwrapper",g]),_=j.useRef(null);return j.useEffect(()=>{if(_.current){const C=_.current.getBBox();b({x:C.x,y:C.y,width:C.width,height:C.height})}},[s]),s?i.jsxs("g",{transform:`translate(${t-x.width/2} ${a-x.height/2})`,className:S,visibility:x.width?"visible":"hidden",...y,children:[c&&i.jsx("rect",{width:x.width+2*f[0],x:-f[0],y:-f[1],height:x.height+2*f[1],className:"react-flow__edge-textbg",style:u,rx:m,ry:m}),i.jsx("text",{className:"react-flow__edge-text",y:x.height/2,dy:"0.3em",ref:_,style:o,children:s}),p]}):null}wv.displayName="EdgeText";const EM=j.memo(wv);function pu({path:t,labelX:a,labelY:s,label:o,labelStyle:c,labelShowBg:u,labelBgStyle:f,labelBgPadding:m,labelBgBorderRadius:p,interactionWidth:g=20,...y}){return i.jsxs(i.Fragment,{children:[i.jsx("path",{...y,d:t,fill:"none",className:ut(["react-flow__edge-path",y.className])}),g?i.jsx("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:g,className:"react-flow__edge-interaction"}):null,o&&wn(a)&&wn(s)?i.jsx(EM,{x:a,y:s,label:o,labelStyle:c,labelShowBg:u,labelBgStyle:f,labelBgPadding:m,labelBgBorderRadius:p}):null]})}function Vy({pos:t,x1:a,y1:s,x2:o,y2:c}){return t===xe.Left||t===xe.Right?[.5*(a+o),s]:[a,.5*(s+c)]}function jv({sourceX:t,sourceY:a,sourcePosition:s=xe.Bottom,targetX:o,targetY:c,targetPosition:u=xe.Top}){const[f,m]=Vy({pos:s,x1:t,y1:a,x2:o,y2:c}),[p,g]=Vy({pos:u,x1:o,y1:c,x2:t,y2:a}),[y,x,b,S]=Y1({sourceX:t,sourceY:a,targetX:o,targetY:c,sourceControlX:f,sourceControlY:m,targetControlX:p,targetControlY:g});return[`M${t},${a} C${f},${m} ${p},${g} ${o},${c}`,y,x,b,S]}function Nv(t){return j.memo(({id:a,sourceX:s,sourceY:o,targetX:c,targetY:u,sourcePosition:f,targetPosition:m,label:p,labelStyle:g,labelShowBg:y,labelBgStyle:x,labelBgPadding:b,labelBgBorderRadius:S,style:_,markerEnd:C,markerStart:N,interactionWidth:E})=>{const[z,T,k]=jv({sourceX:s,sourceY:o,sourcePosition:f,targetX:c,targetY:u,targetPosition:m}),w=t.isInternal?void 0:a;return i.jsx(pu,{id:w,path:z,labelX:T,labelY:k,label:p,labelStyle:g,labelShowBg:y,labelBgStyle:x,labelBgPadding:b,labelBgBorderRadius:S,style:_,markerEnd:C,markerStart:N,interactionWidth:E})})}const CM=Nv({isInternal:!1}),Sv=Nv({isInternal:!0});CM.displayName="SimpleBezierEdge";Sv.displayName="SimpleBezierEdgeInternal";function _v(t){return j.memo(({id:a,sourceX:s,sourceY:o,targetX:c,targetY:u,label:f,labelStyle:m,labelShowBg:p,labelBgStyle:g,labelBgPadding:y,labelBgBorderRadius:x,style:b,sourcePosition:S=xe.Bottom,targetPosition:_=xe.Top,markerEnd:C,markerStart:N,pathOptions:E,interactionWidth:z})=>{const[T,k,w]=Th({sourceX:s,sourceY:o,sourcePosition:S,targetX:c,targetY:u,targetPosition:_,borderRadius:E?.borderRadius,offset:E?.offset,stepPosition:E?.stepPosition}),R=t.isInternal?void 0:a;return i.jsx(pu,{id:R,path:T,labelX:k,labelY:w,label:f,labelStyle:m,labelShowBg:p,labelBgStyle:g,labelBgPadding:y,labelBgBorderRadius:x,style:b,markerEnd:C,markerStart:N,interactionWidth:z})})}const Ev=_v({isInternal:!1}),Cv=_v({isInternal:!0});Ev.displayName="SmoothStepEdge";Cv.displayName="SmoothStepEdgeInternal";function Tv(t){return j.memo(({id:a,...s})=>{const o=t.isInternal?void 0:a;return i.jsx(Ev,{...s,id:o,pathOptions:j.useMemo(()=>({borderRadius:0,offset:s.pathOptions?.offset}),[s.pathOptions?.offset])})})}const TM=Tv({isInternal:!1}),Mv=Tv({isInternal:!0});TM.displayName="StepEdge";Mv.displayName="StepEdgeInternal";function Av(t){return j.memo(({id:a,sourceX:s,sourceY:o,targetX:c,targetY:u,label:f,labelStyle:m,labelShowBg:p,labelBgStyle:g,labelBgPadding:y,labelBgBorderRadius:x,style:b,markerEnd:S,markerStart:_,interactionWidth:C})=>{const[N,E,z]=G1({sourceX:s,sourceY:o,targetX:c,targetY:u}),T=t.isInternal?void 0:a;return i.jsx(pu,{id:T,path:N,labelX:E,labelY:z,label:f,labelStyle:m,labelShowBg:p,labelBgStyle:g,labelBgPadding:y,labelBgBorderRadius:x,style:b,markerEnd:S,markerStart:_,interactionWidth:C})})}const MM=Av({isInternal:!1}),kv=Av({isInternal:!0});MM.displayName="StraightEdge";kv.displayName="StraightEdgeInternal";function zv(t){return j.memo(({id:a,sourceX:s,sourceY:o,targetX:c,targetY:u,sourcePosition:f=xe.Bottom,targetPosition:m=xe.Top,label:p,labelStyle:g,labelShowBg:y,labelBgStyle:x,labelBgPadding:b,labelBgBorderRadius:S,style:_,markerEnd:C,markerStart:N,pathOptions:E,interactionWidth:z})=>{const[T,k,w]=P1({sourceX:s,sourceY:o,sourcePosition:f,targetX:c,targetY:u,targetPosition:m,curvature:E?.curvature}),R=t.isInternal?void 0:a;return i.jsx(pu,{id:R,path:T,labelX:k,labelY:w,label:p,labelStyle:g,labelShowBg:y,labelBgStyle:x,labelBgPadding:b,labelBgBorderRadius:S,style:_,markerEnd:C,markerStart:N,interactionWidth:z})})}const AM=zv({isInternal:!1}),Rv=zv({isInternal:!0});AM.displayName="BezierEdge";Rv.displayName="BezierEdgeInternal";const Yy={default:Rv,straight:kv,step:Mv,smoothstep:Cv,simplebezier:Sv},Py={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},kM=(t,a,s)=>s===xe.Left?t-a:s===xe.Right?t+a:t,zM=(t,a,s)=>s===xe.Top?t-a:s===xe.Bottom?t+a:t,Xy="react-flow__edgeupdater";function Iy({position:t,centerX:a,centerY:s,radius:o=10,onMouseDown:c,onMouseEnter:u,onMouseOut:f,type:m}){return i.jsx("circle",{onMouseDown:c,onMouseEnter:u,onMouseOut:f,className:ut([Xy,`${Xy}-${m}`]),cx:kM(a,o,t),cy:zM(s,o,t),r:o,stroke:"transparent",fill:"transparent"})}function RM({isReconnectable:t,reconnectRadius:a,edge:s,sourceX:o,sourceY:c,targetX:u,targetY:f,sourcePosition:m,targetPosition:p,onReconnect:g,onReconnectStart:y,onReconnectEnd:x,setReconnecting:b,setUpdateHover:S}){const _=Ke(),C=(k,w)=>{if(k.button!==0)return;const{autoPanOnConnect:R,domNode:M,isValidConnection:q,connectionMode:$,connectionRadius:G,lib:Q,onConnectStart:Z,onConnectEnd:re,cancelConnection:V,nodeLookup:I,rfId:O,panBy:D,updateConnection:P}=_.getState(),L=w.type==="target",W=(te,ne)=>{b(!1),x?.(te,s,w.type,ne)},B=te=>g?.(s,te),H=(te,ne)=>{b(!0),y?.(k,s,w.type),Z?.(te,ne)};kh.onPointerDown(k.nativeEvent,{autoPanOnConnect:R,connectionMode:$,connectionRadius:G,domNode:M,handleId:w.id,nodeId:w.nodeId,nodeLookup:I,isTarget:L,edgeUpdaterType:w.type,lib:Q,flowId:O,cancelConnection:V,panBy:D,isValidConnection:q,onConnect:B,onConnectStart:H,onConnectEnd:re,onReconnectEnd:W,updateConnection:P,getTransform:()=>_.getState().transform,getFromHandle:()=>_.getState().connection.fromHandle,dragThreshold:_.getState().connectionDragThreshold,handleDomNode:k.currentTarget})},N=k=>C(k,{nodeId:s.target,id:s.targetHandle??null,type:"target"}),E=k=>C(k,{nodeId:s.source,id:s.sourceHandle??null,type:"source"}),z=()=>S(!0),T=()=>S(!1);return i.jsxs(i.Fragment,{children:[(t===!0||t==="source")&&i.jsx(Iy,{position:m,centerX:o,centerY:c,radius:a,onMouseDown:N,onMouseEnter:z,onMouseOut:T,type:"source"}),(t===!0||t==="target")&&i.jsx(Iy,{position:p,centerX:u,centerY:f,radius:a,onMouseDown:E,onMouseEnter:z,onMouseOut:T,type:"target"})]})}function DM({id:t,edgesFocusable:a,edgesReconnectable:s,elementsSelectable:o,onClick:c,onDoubleClick:u,onContextMenu:f,onMouseEnter:m,onMouseMove:p,onMouseLeave:g,reconnectRadius:y,onReconnect:x,onReconnectStart:b,onReconnectEnd:S,rfId:_,edgeTypes:C,noPanClassName:N,onError:E,disableKeyboardA11y:z}){let T=Oe(pe=>pe.edgeLookup.get(t));const k=Oe(pe=>pe.defaultEdgeOptions);T=k?{...k,...T}:T;let w=T.type||"default",R=C?.[w]||Yy[w];R===void 0&&(E?.("011",$n.error011(w)),w="default",R=C?.default||Yy.default);const M=!!(T.focusable||a&&typeof T.focusable>"u"),q=typeof x<"u"&&(T.reconnectable||s&&typeof T.reconnectable>"u"),$=!!(T.selectable||o&&typeof T.selectable>"u"),G=j.useRef(null),[Q,Z]=j.useState(!1),[re,V]=j.useState(!1),I=Ke(),{zIndex:O,sourceX:D,sourceY:P,targetX:L,targetY:W,sourcePosition:B,targetPosition:H}=Oe(j.useCallback(pe=>{const be=pe.nodeLookup.get(T.source),Se=pe.nodeLookup.get(T.target);if(!be||!Se)return{zIndex:T.zIndex,...Py};const Ae=_8({id:t,sourceNode:be,targetNode:Se,sourceHandle:T.sourceHandle||null,targetHandle:T.targetHandle||null,connectionMode:pe.connectionMode,onError:E});return{zIndex:y8({selected:T.selected,zIndex:T.zIndex,sourceNode:be,targetNode:Se,elevateOnSelect:pe.elevateEdgesOnSelect,zIndexMode:pe.zIndexMode}),...Ae||Py}},[T.source,T.target,T.sourceHandle,T.targetHandle,T.selected,T.zIndex]),We),te=j.useMemo(()=>T.markerStart?`url('#${Mh(T.markerStart,_)}')`:void 0,[T.markerStart,_]),ne=j.useMemo(()=>T.markerEnd?`url('#${Mh(T.markerEnd,_)}')`:void 0,[T.markerEnd,_]);if(T.hidden||D===null||P===null||L===null||W===null)return null;const se=pe=>{const{addSelectedEdges:be,unselectNodesAndEdges:Se,multiSelectionActive:Ae}=I.getState();$&&(I.setState({nodesSelectionActive:!1}),T.selected&&Ae?(Se({nodes:[],edges:[T]}),G.current?.blur()):be([t])),c&&c(pe,T)},de=u?pe=>{u(pe,{...T})}:void 0,ue=f?pe=>{f(pe,{...T})}:void 0,U=m?pe=>{m(pe,{...T})}:void 0,ce=p?pe=>{p(pe,{...T})}:void 0,he=g?pe=>{g(pe,{...T})}:void 0,ve=pe=>{if(!z&&M1.includes(pe.key)&&$){const{unselectNodesAndEdges:be,addSelectedEdges:Se}=I.getState();pe.key==="Escape"?(G.current?.blur(),be({edges:[T]})):Se([t])}};return i.jsx("svg",{style:{zIndex:O},children:i.jsxs("g",{className:ut(["react-flow__edge",`react-flow__edge-${w}`,T.className,N,{selected:T.selected,animated:T.animated,inactive:!$&&!c,updating:Q,selectable:$}]),onClick:se,onDoubleClick:de,onContextMenu:ue,onMouseEnter:U,onMouseMove:ce,onMouseLeave:he,onKeyDown:M?ve:void 0,tabIndex:M?0:void 0,role:T.ariaRole??(M?"group":"img"),"aria-roledescription":"edge","data-id":t,"data-testid":`rf__edge-${t}`,"aria-label":T.ariaLabel===null?void 0:T.ariaLabel||`Edge from ${T.source} to ${T.target}`,"aria-describedby":M?`${lv}-${_}`:void 0,ref:G,...T.domAttributes,children:[!re&&i.jsx(R,{id:t,source:T.source,target:T.target,type:T.type,selected:T.selected,animated:T.animated,selectable:$,deletable:T.deletable??!0,label:T.label,labelStyle:T.labelStyle,labelShowBg:T.labelShowBg,labelBgStyle:T.labelBgStyle,labelBgPadding:T.labelBgPadding,labelBgBorderRadius:T.labelBgBorderRadius,sourceX:D,sourceY:P,targetX:L,targetY:W,sourcePosition:B,targetPosition:H,data:T.data,style:T.style,sourceHandleId:T.sourceHandle,targetHandleId:T.targetHandle,markerStart:te,markerEnd:ne,pathOptions:"pathOptions"in T?T.pathOptions:void 0,interactionWidth:T.interactionWidth}),q&&i.jsx(RM,{edge:T,isReconnectable:q,reconnectRadius:y,onReconnect:x,onReconnectStart:b,onReconnectEnd:S,sourceX:D,sourceY:P,targetX:L,targetY:W,sourcePosition:B,targetPosition:H,setUpdateHover:Z,setReconnecting:V})]})})}var OM=j.memo(DM);const BM=t=>({edgesFocusable:t.edgesFocusable,edgesReconnectable:t.edgesReconnectable,elementsSelectable:t.elementsSelectable,connectionMode:t.connectionMode,onError:t.onError});function Dv({defaultMarkerColor:t,onlyRenderVisibleElements:a,rfId:s,edgeTypes:o,noPanClassName:c,onReconnect:u,onEdgeContextMenu:f,onEdgeMouseEnter:m,onEdgeMouseMove:p,onEdgeMouseLeave:g,onEdgeClick:y,reconnectRadius:x,onEdgeDoubleClick:b,onReconnectStart:S,onReconnectEnd:_,disableKeyboardA11y:C}){const{edgesFocusable:N,edgesReconnectable:E,elementsSelectable:z,onError:T}=Oe(BM,We),k=vM(a);return i.jsxs("div",{className:"react-flow__edges",children:[i.jsx(_M,{defaultColor:t,rfId:s}),k.map(w=>i.jsx(OM,{id:w,edgesFocusable:N,edgesReconnectable:E,elementsSelectable:z,noPanClassName:c,onReconnect:u,onContextMenu:f,onMouseEnter:m,onMouseMove:p,onMouseLeave:g,onClick:y,reconnectRadius:x,onDoubleClick:b,onReconnectStart:S,onReconnectEnd:_,rfId:s,onError:T,edgeTypes:o,disableKeyboardA11y:C},w))]})}Dv.displayName="EdgeRenderer";const LM=j.memo(Dv),HM=t=>`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`;function $M({children:t}){const a=Oe(HM);return i.jsx("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:a},children:t})}function UM(t){const a=ym(),s=j.useRef(!1);j.useEffect(()=>{!s.current&&a.viewportInitialized&&t&&(setTimeout(()=>t(a),1),s.current=!0)},[t,a.viewportInitialized])}const qM=t=>t.panZoom?.syncViewport;function VM(t){const a=Oe(qM),s=Ke();return j.useEffect(()=>{t&&(a?.(t),s.setState({transform:[t.x,t.y,t.zoom]}))},[t,a]),null}function YM(t){return t.connection.inProgress?{...t.connection,to:Ao(t.connection.to,t.transform)}:{...t.connection}}function PM(t){return YM}function XM(t){const a=PM();return Oe(a,We)}const IM=t=>({nodesConnectable:t.nodesConnectable,isValid:t.connection.isValid,inProgress:t.connection.inProgress,width:t.width,height:t.height});function GM({containerStyle:t,style:a,type:s,component:o}){const{nodesConnectable:c,width:u,height:f,isValid:m,inProgress:p}=Oe(IM,We);return!(u&&c&&p)?null:i.jsx("svg",{style:t,width:u,height:f,className:"react-flow__connectionline react-flow__container",children:i.jsx("g",{className:ut(["react-flow__connection",z1(m)]),children:i.jsx(Ov,{style:a,type:s,CustomComponent:o,isValid:m})})})}const Ov=({style:t,type:a=Ja.Bezier,CustomComponent:s,isValid:o})=>{const{inProgress:c,from:u,fromNode:f,fromHandle:m,fromPosition:p,to:g,toNode:y,toHandle:x,toPosition:b,pointer:S}=XM();if(!c)return;if(s)return i.jsx(s,{connectionLineType:a,connectionLineStyle:t,fromNode:f,fromHandle:m,fromX:u.x,fromY:u.y,toX:g.x,toY:g.y,fromPosition:p,toPosition:b,connectionStatus:z1(o),toNode:y,toHandle:x,pointer:S});let _="";const C={sourceX:u.x,sourceY:u.y,sourcePosition:p,targetX:g.x,targetY:g.y,targetPosition:b};switch(a){case Ja.Bezier:[_]=P1(C);break;case Ja.SimpleBezier:[_]=jv(C);break;case Ja.Step:[_]=Th({...C,borderRadius:0});break;case Ja.SmoothStep:[_]=Th(C);break;default:[_]=G1(C)}return i.jsx("path",{d:_,fill:"none",className:"react-flow__connection-path",style:t})};Ov.displayName="ConnectionLine";const QM={};function Gy(t=QM){j.useRef(t),Ke(),j.useEffect(()=>{},[t])}function ZM(){Ke(),j.useRef(!1),j.useEffect(()=>{},[])}function Bv({nodeTypes:t,edgeTypes:a,onInit:s,onNodeClick:o,onEdgeClick:c,onNodeDoubleClick:u,onEdgeDoubleClick:f,onNodeMouseEnter:m,onNodeMouseMove:p,onNodeMouseLeave:g,onNodeContextMenu:y,onSelectionContextMenu:x,onSelectionStart:b,onSelectionEnd:S,connectionLineType:_,connectionLineStyle:C,connectionLineComponent:N,connectionLineContainerStyle:E,selectionKeyCode:z,selectionOnDrag:T,selectionMode:k,multiSelectionKeyCode:w,panActivationKeyCode:R,zoomActivationKeyCode:M,deleteKeyCode:q,onlyRenderVisibleElements:$,elementsSelectable:G,defaultViewport:Q,translateExtent:Z,minZoom:re,maxZoom:V,preventScrolling:I,defaultMarkerColor:O,zoomOnScroll:D,zoomOnPinch:P,panOnScroll:L,panOnScrollSpeed:W,panOnScrollMode:B,zoomOnDoubleClick:H,panOnDrag:te,onPaneClick:ne,onPaneMouseEnter:se,onPaneMouseMove:de,onPaneMouseLeave:ue,onPaneScroll:U,onPaneContextMenu:ce,paneClickDistance:he,nodeClickDistance:ve,onEdgeContextMenu:pe,onEdgeMouseEnter:be,onEdgeMouseMove:Se,onEdgeMouseLeave:Ae,reconnectRadius:Ee,onReconnect:$e,onReconnectStart:Re,onReconnectEnd:gt,noDragClassName:ht,noWheelClassName:un,noPanClassName:Sn,disableKeyboardA11y:_n,nodeExtent:at,rfId:Vn,viewport:dn,onViewportChange:Wt}){return Gy(t),Gy(a),ZM(),UM(s),VM(dn),i.jsx(uM,{onPaneClick:ne,onPaneMouseEnter:se,onPaneMouseMove:de,onPaneMouseLeave:ue,onPaneContextMenu:ce,onPaneScroll:U,paneClickDistance:he,deleteKeyCode:q,selectionKeyCode:z,selectionOnDrag:T,selectionMode:k,onSelectionStart:b,onSelectionEnd:S,multiSelectionKeyCode:w,panActivationKeyCode:R,zoomActivationKeyCode:M,elementsSelectable:G,zoomOnScroll:D,zoomOnPinch:P,zoomOnDoubleClick:H,panOnScroll:L,panOnScrollSpeed:W,panOnScrollMode:B,panOnDrag:te,defaultViewport:Q,translateExtent:Z,minZoom:re,maxZoom:V,onSelectionContextMenu:x,preventScrolling:I,noDragClassName:ht,noWheelClassName:un,noPanClassName:Sn,disableKeyboardA11y:_n,onViewportChange:Wt,isControlledViewport:!!dn,children:i.jsxs($M,{children:[i.jsx(LM,{edgeTypes:a,onEdgeClick:c,onEdgeDoubleClick:f,onReconnect:$e,onReconnectStart:Re,onReconnectEnd:gt,onlyRenderVisibleElements:$,onEdgeContextMenu:pe,onEdgeMouseEnter:be,onEdgeMouseMove:Se,onEdgeMouseLeave:Ae,reconnectRadius:Ee,defaultMarkerColor:O,noPanClassName:Sn,disableKeyboardA11y:_n,rfId:Vn}),i.jsx(GM,{style:C,type:_,component:N,containerStyle:E}),i.jsx("div",{className:"react-flow__edgelabel-renderer"}),i.jsx(bM,{nodeTypes:t,onNodeClick:o,onNodeDoubleClick:u,onNodeMouseEnter:m,onNodeMouseMove:p,onNodeMouseLeave:g,onNodeContextMenu:y,nodeClickDistance:ve,onlyRenderVisibleElements:$,noPanClassName:Sn,noDragClassName:ht,disableKeyboardA11y:_n,nodeExtent:at,rfId:Vn}),i.jsx("div",{className:"react-flow__viewport-portal"})]})})}Bv.displayName="GraphView";const FM=j.memo(Bv),Qy=({nodes:t,edges:a,defaultNodes:s,defaultEdges:o,width:c,height:u,fitView:f,fitViewOptions:m,minZoom:p=.5,maxZoom:g=2,nodeOrigin:y,nodeExtent:x,zIndexMode:b="basic"}={})=>{const S=new Map,_=new Map,C=new Map,N=new Map,E=o??a??[],z=s??t??[],T=y??[0,0],k=x??ho;F1(C,N,E);const w=Ah(z,S,_,{nodeOrigin:T,nodeExtent:k,zIndexMode:b});let R=[0,0,1];if(f&&c&&u){const M=To(S,{filter:Q=>!!((Q.width||Q.initialWidth)&&(Q.height||Q.initialHeight))}),{x:q,y:$,zoom:G}=dm(M,c,u,p,g,m?.padding??.1);R=[q,$,G]}return{rfId:"1",width:c??0,height:u??0,transform:R,nodes:z,nodesInitialized:w,nodeLookup:S,parentLookup:_,edges:E,edgeLookup:N,connectionLookup:C,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:s!==void 0,hasDefaultEdges:o!==void 0,panZoom:null,minZoom:p,maxZoom:g,translateExtent:ho,nodeExtent:k,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:qr.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:T,nodeDragThreshold:1,connectionDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!0,selectNodesOnDrag:!0,multiSelectionActive:!1,fitViewQueued:f??!1,fitViewOptions:m,fitViewResolver:null,connection:{...k1},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanOnNodeFocus:!0,autoPanSpeed:15,connectionRadius:20,onError:f8,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1,ariaLabelConfig:A1,zIndexMode:b,onNodesChangeMiddlewareMap:new Map,onEdgesChangeMiddlewareMap:new Map}},WM=({nodes:t,edges:a,defaultNodes:s,defaultEdges:o,width:c,height:u,fitView:f,fitViewOptions:m,minZoom:p,maxZoom:g,nodeOrigin:y,nodeExtent:x,zIndexMode:b})=>pT((S,_)=>{async function C(){const{nodeLookup:N,panZoom:E,fitViewOptions:z,fitViewResolver:T,width:k,height:w,minZoom:R,maxZoom:M}=_();E&&(await u8({nodes:N,width:k,height:w,panZoom:E,minZoom:R,maxZoom:M},z),T?.resolve(!0),S({fitViewResolver:null}))}return{...Qy({nodes:t,edges:a,width:c,height:u,fitView:f,fitViewOptions:m,minZoom:p,maxZoom:g,nodeOrigin:y,nodeExtent:x,defaultNodes:s,defaultEdges:o,zIndexMode:b}),setNodes:N=>{const{nodeLookup:E,parentLookup:z,nodeOrigin:T,elevateNodesOnSelect:k,fitViewQueued:w,zIndexMode:R}=_(),M=Ah(N,E,z,{nodeOrigin:T,nodeExtent:x,elevateNodesOnSelect:k,checkEquality:!0,zIndexMode:R});w&&M?(C(),S({nodes:N,nodesInitialized:M,fitViewQueued:!1,fitViewOptions:void 0})):S({nodes:N,nodesInitialized:M})},setEdges:N=>{const{connectionLookup:E,edgeLookup:z}=_();F1(E,z,N),S({edges:N})},setDefaultNodesAndEdges:(N,E)=>{if(N){const{setNodes:z}=_();z(N),S({hasDefaultNodes:!0})}if(E){const{setEdges:z}=_();z(E),S({hasDefaultEdges:!0})}},updateNodeInternals:N=>{const{triggerNodeChanges:E,nodeLookup:z,parentLookup:T,domNode:k,nodeOrigin:w,nodeExtent:R,debug:M,fitViewQueued:q,zIndexMode:$}=_(),{changes:G,updatedInternals:Q}=R8(N,z,T,k,w,R,$);Q&&(M8(z,T,{nodeOrigin:w,nodeExtent:R,zIndexMode:$}),q?(C(),S({fitViewQueued:!1,fitViewOptions:void 0})):S({}),G?.length>0&&(M&&console.log("React Flow: trigger node changes",G),E?.(G)))},updateNodePositions:(N,E=!1)=>{const z=[];let T=[];const{nodeLookup:k,triggerNodeChanges:w,connection:R,updateConnection:M,onNodesChangeMiddlewareMap:q}=_();for(const[$,G]of N){const Q=k.get($),Z=!!(Q?.expandParent&&Q?.parentId&&G?.position),re={id:$,type:"position",position:Z?{x:Math.max(0,G.position.x),y:Math.max(0,G.position.y)}:G.position,dragging:E};if(Q&&R.inProgress&&R.fromNode.id===Q.id){const V=Hs(Q,R.fromHandle,xe.Left,!0);M({...R,from:V})}Z&&Q.parentId&&z.push({id:$,parentId:Q.parentId,rect:{...G.internals.positionAbsolute,width:G.measured.width??0,height:G.measured.height??0}}),T.push(re)}if(z.length>0){const{parentLookup:$,nodeOrigin:G}=_(),Q=xm(z,k,$,G);T.push(...Q)}for(const $ of q.values())T=$(T);w(T)},triggerNodeChanges:N=>{const{onNodesChange:E,setNodes:z,nodes:T,hasDefaultNodes:k,debug:w}=_();if(N?.length){if(k){const R=dv(N,T);z(R)}w&&console.log("React Flow: trigger node changes",N),E?.(N)}},triggerEdgeChanges:N=>{const{onEdgesChange:E,setEdges:z,edges:T,hasDefaultEdges:k,debug:w}=_();if(N?.length){if(k){const R=fv(N,T);z(R)}w&&console.log("React Flow: trigger edge changes",N),E?.(N)}},addSelectedNodes:N=>{const{multiSelectionActive:E,edgeLookup:z,nodeLookup:T,triggerNodeChanges:k,triggerEdgeChanges:w}=_();if(E){const R=N.map(M=>Ms(M,!0));k(R);return}k(kr(T,new Set([...N]),!0)),w(kr(z))},addSelectedEdges:N=>{const{multiSelectionActive:E,edgeLookup:z,nodeLookup:T,triggerNodeChanges:k,triggerEdgeChanges:w}=_();if(E){const R=N.map(M=>Ms(M,!0));w(R);return}w(kr(z,new Set([...N]))),k(kr(T,new Set,!0))},unselectNodesAndEdges:({nodes:N,edges:E}={})=>{const{edges:z,nodes:T,nodeLookup:k,triggerNodeChanges:w,triggerEdgeChanges:R}=_(),M=N||T,q=E||z,$=M.map(Q=>{const Z=k.get(Q.id);return Z&&(Z.selected=!1),Ms(Q.id,!1)}),G=q.map(Q=>Ms(Q.id,!1));w($),R(G)},setMinZoom:N=>{const{panZoom:E,maxZoom:z}=_();E?.setScaleExtent([N,z]),S({minZoom:N})},setMaxZoom:N=>{const{panZoom:E,minZoom:z}=_();E?.setScaleExtent([z,N]),S({maxZoom:N})},setTranslateExtent:N=>{_().panZoom?.setTranslateExtent(N),S({translateExtent:N})},resetSelectedElements:()=>{const{edges:N,nodes:E,triggerNodeChanges:z,triggerEdgeChanges:T,elementsSelectable:k}=_();if(!k)return;const w=E.reduce((M,q)=>q.selected?[...M,Ms(q.id,!1)]:M,[]),R=N.reduce((M,q)=>q.selected?[...M,Ms(q.id,!1)]:M,[]);z(w),T(R)},setNodeExtent:N=>{const{nodes:E,nodeLookup:z,parentLookup:T,nodeOrigin:k,elevateNodesOnSelect:w,nodeExtent:R,zIndexMode:M}=_();N[0][0]===R[0][0]&&N[0][1]===R[0][1]&&N[1][0]===R[1][0]&&N[1][1]===R[1][1]||(Ah(E,z,T,{nodeOrigin:k,nodeExtent:N,elevateNodesOnSelect:w,checkEquality:!1,zIndexMode:M}),S({nodeExtent:N}))},panBy:N=>{const{transform:E,width:z,height:T,panZoom:k,translateExtent:w}=_();return D8({delta:N,panZoom:k,transform:E,translateExtent:w,width:z,height:T})},setCenter:async(N,E,z)=>{const{width:T,height:k,maxZoom:w,panZoom:R}=_();if(!R)return Promise.resolve(!1);const M=typeof z?.zoom<"u"?z.zoom:w;return await R.setViewport({x:T/2-N*M,y:k/2-E*M,zoom:M},{duration:z?.duration,ease:z?.ease,interpolate:z?.interpolate}),Promise.resolve(!0)},cancelConnection:()=>{S({connection:{...k1}})},updateConnection:N=>{S({connection:N})},reset:()=>S({...Qy()})}},Object.is);function KM({initialNodes:t,initialEdges:a,defaultNodes:s,defaultEdges:o,initialWidth:c,initialHeight:u,initialMinZoom:f,initialMaxZoom:m,initialFitViewOptions:p,fitView:g,nodeOrigin:y,nodeExtent:x,zIndexMode:b,children:S}){const[_]=j.useState(()=>WM({nodes:t,edges:a,defaultNodes:s,defaultEdges:o,width:c,height:u,fitView:g,minZoom:f,maxZoom:m,fitViewOptions:p,nodeOrigin:y,nodeExtent:x,zIndexMode:b}));return i.jsx(gT,{value:_,children:i.jsx($T,{children:S})})}function JM({children:t,nodes:a,edges:s,defaultNodes:o,defaultEdges:c,width:u,height:f,fitView:m,fitViewOptions:p,minZoom:g,maxZoom:y,nodeOrigin:x,nodeExtent:b,zIndexMode:S}){return j.useContext(fu)?i.jsx(i.Fragment,{children:t}):i.jsx(KM,{initialNodes:a,initialEdges:s,defaultNodes:o,defaultEdges:c,initialWidth:u,initialHeight:f,fitView:m,initialFitViewOptions:p,initialMinZoom:g,initialMaxZoom:y,nodeOrigin:x,nodeExtent:b,zIndexMode:S,children:t})}const eA={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};function tA({nodes:t,edges:a,defaultNodes:s,defaultEdges:o,className:c,nodeTypes:u,edgeTypes:f,onNodeClick:m,onEdgeClick:p,onInit:g,onMove:y,onMoveStart:x,onMoveEnd:b,onConnect:S,onConnectStart:_,onConnectEnd:C,onClickConnectStart:N,onClickConnectEnd:E,onNodeMouseEnter:z,onNodeMouseMove:T,onNodeMouseLeave:k,onNodeContextMenu:w,onNodeDoubleClick:R,onNodeDragStart:M,onNodeDrag:q,onNodeDragStop:$,onNodesDelete:G,onEdgesDelete:Q,onDelete:Z,onSelectionChange:re,onSelectionDragStart:V,onSelectionDrag:I,onSelectionDragStop:O,onSelectionContextMenu:D,onSelectionStart:P,onSelectionEnd:L,onBeforeDelete:W,connectionMode:B,connectionLineType:H=Ja.Bezier,connectionLineStyle:te,connectionLineComponent:ne,connectionLineContainerStyle:se,deleteKeyCode:de="Backspace",selectionKeyCode:ue="Shift",selectionOnDrag:U=!1,selectionMode:ce=mo.Full,panActivationKeyCode:he="Space",multiSelectionKeyCode:ve=go()?"Meta":"Control",zoomActivationKeyCode:pe=go()?"Meta":"Control",snapToGrid:be,snapGrid:Se,onlyRenderVisibleElements:Ae=!1,selectNodesOnDrag:Ee,nodesDraggable:$e,autoPanOnNodeFocus:Re,nodesConnectable:gt,nodesFocusable:ht,nodeOrigin:un=cv,edgesFocusable:Sn,edgesReconnectable:_n,elementsSelectable:at=!0,defaultViewport:Vn=MT,minZoom:dn=.5,maxZoom:Wt=2,translateExtent:Yn=ho,preventScrolling:fn=!0,nodeExtent:Pn,defaultMarkerColor:ss="#b1b1b7",zoomOnScroll:Jr=!0,zoomOnPinch:rs=!0,panOnScroll:Et=!1,panOnScrollSpeed:En=.5,panOnScrollMode:Ct=Ds.Free,zoomOnDoubleClick:yu=!0,panOnDrag:bu=!0,onPaneClick:vu,onPaneMouseEnter:Us,onPaneMouseMove:qs,onPaneMouseLeave:Vs,onPaneScroll:Xn,onPaneContextMenu:Ys,paneClickDistance:is=1,nodeClickDistance:wu=0,children:Ro,onReconnect:ei,onReconnectStart:os,onReconnectEnd:ju,onEdgeContextMenu:Do,onEdgeDoubleClick:Oo,onEdgeMouseEnter:Bo,onEdgeMouseMove:ti,onEdgeMouseLeave:ni,reconnectRadius:Lo=10,onNodesChange:Ho,onEdgesChange:Cn,noDragClassName:dt="nodrag",noWheelClassName:Nt="nowheel",noPanClassName:In="nopan",fitView:Ps,fitViewOptions:$o,connectOnClick:Nu,attributionPosition:Uo,proOptions:ls,defaultEdgeOptions:ai,elevateNodesOnSelect:ja=!0,elevateEdgesOnSelect:Na=!1,disableKeyboardA11y:Sa=!1,autoPanOnConnect:_a,autoPanOnNodeDrag:st,autoPanSpeed:qo,connectionRadius:Vo,isValidConnection:Gn,onError:Ea,style:Su,id:si,nodeDragThreshold:Yo,connectionDragThreshold:_u,viewport:Xs,onViewportChange:Is,width:hn,height:At,colorMode:Po="light",debug:Eu,onScroll:Gs,ariaLabelConfig:Xo,zIndexMode:cs="basic",...Cu},kt){const us=si||"1",Io=RT(Po),ri=j.useCallback(Qn=>{Qn.currentTarget.scrollTo({top:0,left:0,behavior:"instant"}),Gs?.(Qn)},[Gs]);return i.jsx("div",{"data-testid":"rf__wrapper",...Cu,onScroll:ri,style:{...Su,...eA},ref:kt,className:ut(["react-flow",c,Io]),id:si,role:"application",children:i.jsxs(JM,{nodes:t,edges:a,width:hn,height:At,fitView:Ps,fitViewOptions:$o,minZoom:dn,maxZoom:Wt,nodeOrigin:un,nodeExtent:Pn,zIndexMode:cs,children:[i.jsx(FM,{onInit:g,onNodeClick:m,onEdgeClick:p,onNodeMouseEnter:z,onNodeMouseMove:T,onNodeMouseLeave:k,onNodeContextMenu:w,onNodeDoubleClick:R,nodeTypes:u,edgeTypes:f,connectionLineType:H,connectionLineStyle:te,connectionLineComponent:ne,connectionLineContainerStyle:se,selectionKeyCode:ue,selectionOnDrag:U,selectionMode:ce,deleteKeyCode:de,multiSelectionKeyCode:ve,panActivationKeyCode:he,zoomActivationKeyCode:pe,onlyRenderVisibleElements:Ae,defaultViewport:Vn,translateExtent:Yn,minZoom:dn,maxZoom:Wt,preventScrolling:fn,zoomOnScroll:Jr,zoomOnPinch:rs,zoomOnDoubleClick:yu,panOnScroll:Et,panOnScrollSpeed:En,panOnScrollMode:Ct,panOnDrag:bu,onPaneClick:vu,onPaneMouseEnter:Us,onPaneMouseMove:qs,onPaneMouseLeave:Vs,onPaneScroll:Xn,onPaneContextMenu:Ys,paneClickDistance:is,nodeClickDistance:wu,onSelectionContextMenu:D,onSelectionStart:P,onSelectionEnd:L,onReconnect:ei,onReconnectStart:os,onReconnectEnd:ju,onEdgeContextMenu:Do,onEdgeDoubleClick:Oo,onEdgeMouseEnter:Bo,onEdgeMouseMove:ti,onEdgeMouseLeave:ni,reconnectRadius:Lo,defaultMarkerColor:ss,noDragClassName:dt,noWheelClassName:Nt,noPanClassName:In,rfId:us,disableKeyboardA11y:Sa,nodeExtent:Pn,viewport:Xs,onViewportChange:Is}),i.jsx(zT,{nodes:t,edges:a,defaultNodes:s,defaultEdges:o,onConnect:S,onConnectStart:_,onConnectEnd:C,onClickConnectStart:N,onClickConnectEnd:E,nodesDraggable:$e,autoPanOnNodeFocus:Re,nodesConnectable:gt,nodesFocusable:ht,edgesFocusable:Sn,edgesReconnectable:_n,elementsSelectable:at,elevateNodesOnSelect:ja,elevateEdgesOnSelect:Na,minZoom:dn,maxZoom:Wt,nodeExtent:Pn,onNodesChange:Ho,onEdgesChange:Cn,snapToGrid:be,snapGrid:Se,connectionMode:B,translateExtent:Yn,connectOnClick:Nu,defaultEdgeOptions:ai,fitView:Ps,fitViewOptions:$o,onNodesDelete:G,onEdgesDelete:Q,onDelete:Z,onNodeDragStart:M,onNodeDrag:q,onNodeDragStop:$,onSelectionDrag:I,onSelectionDragStart:V,onSelectionDragStop:O,onMove:y,onMoveStart:x,onMoveEnd:b,noPanClassName:In,nodeOrigin:un,rfId:us,autoPanOnConnect:_a,autoPanOnNodeDrag:st,autoPanSpeed:qo,onError:Ea,connectionRadius:Vo,isValidConnection:Gn,selectNodesOnDrag:Ee,nodeDragThreshold:Yo,connectionDragThreshold:_u,onBeforeDelete:W,debug:Eu,ariaLabelConfig:Xo,zIndexMode:cs}),i.jsx(TT,{onSelectionChange:re}),Ro,i.jsx(NT,{proOptions:ls,position:Uo}),i.jsx(jT,{rfId:us,disableKeyboardA11y:Sa})]})})}var nA=hv(tA);function aA({dimensions:t,lineWidth:a,variant:s,className:o}){return i.jsx("path",{strokeWidth:a,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`,className:ut(["react-flow__background-pattern",s,o])})}function sA({radius:t,className:a}){return i.jsx("circle",{cx:t,cy:t,r:t,className:ut(["react-flow__background-pattern","dots",a])})}var ns;(function(t){t.Lines="lines",t.Dots="dots",t.Cross="cross"})(ns||(ns={}));const rA={[ns.Dots]:1,[ns.Lines]:1,[ns.Cross]:6},iA=t=>({transform:t.transform,patternId:`pattern-${t.rfId}`});function Lv({id:t,variant:a=ns.Dots,gap:s=20,size:o,lineWidth:c=1,offset:u=0,color:f,bgColor:m,style:p,className:g,patternClassName:y}){const x=j.useRef(null),{transform:b,patternId:S}=Oe(iA,We),_=o||rA[a],C=a===ns.Dots,N=a===ns.Cross,E=Array.isArray(s)?s:[s,s],z=[E[0]*b[2]||1,E[1]*b[2]||1],T=_*b[2],k=Array.isArray(u)?u:[u,u],w=N?[T,T]:z,R=[k[0]*b[2]||1+w[0]/2,k[1]*b[2]||1+w[1]/2],M=`${S}${t||""}`;return i.jsxs("svg",{className:ut(["react-flow__background",g]),style:{...p,...mu,"--xy-background-color-props":m,"--xy-background-pattern-color-props":f},ref:x,"data-testid":"rf__background",children:[i.jsx("pattern",{id:M,x:b[0]%z[0],y:b[1]%z[1],width:z[0],height:z[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${R[0]},-${R[1]})`,children:C?i.jsx(sA,{radius:T/2,className:y}):i.jsx(aA,{dimensions:w,lineWidth:c,variant:a,className:y})}),i.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${M})`})]})}Lv.displayName="Background";const oA=j.memo(Lv);function lA(){return i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:i.jsx("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function cA(){return i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:i.jsx("path",{d:"M0 0h32v4.2H0z"})})}function uA(){return i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:i.jsx("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function dA(){return i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:i.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function fA(){return i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:i.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function mc({children:t,className:a,...s}){return i.jsx("button",{type:"button",className:ut(["react-flow__controls-button",a]),...s,children:t})}const hA=t=>({isInteractive:t.nodesDraggable||t.nodesConnectable||t.elementsSelectable,minZoomReached:t.transform[2]<=t.minZoom,maxZoomReached:t.transform[2]>=t.maxZoom,ariaLabelConfig:t.ariaLabelConfig});function Hv({style:t,showZoom:a=!0,showFitView:s=!0,showInteractive:o=!0,fitViewOptions:c,onZoomIn:u,onZoomOut:f,onFitView:m,onInteractiveChange:p,className:g,children:y,position:x="bottom-left",orientation:b="vertical","aria-label":S}){const _=Ke(),{isInteractive:C,minZoomReached:N,maxZoomReached:E,ariaLabelConfig:z}=Oe(hA,We),{zoomIn:T,zoomOut:k,fitView:w}=ym(),R=()=>{T(),u?.()},M=()=>{k(),f?.()},q=()=>{w(c),m?.()},$=()=>{_.setState({nodesDraggable:!C,nodesConnectable:!C,elementsSelectable:!C}),p?.(!C)},G=b==="horizontal"?"horizontal":"vertical";return i.jsxs(hu,{className:ut(["react-flow__controls",G,g]),position:x,style:t,"data-testid":"rf__controls","aria-label":S??z["controls.ariaLabel"],children:[a&&i.jsxs(i.Fragment,{children:[i.jsx(mc,{onClick:R,className:"react-flow__controls-zoomin",title:z["controls.zoomIn.ariaLabel"],"aria-label":z["controls.zoomIn.ariaLabel"],disabled:E,children:i.jsx(lA,{})}),i.jsx(mc,{onClick:M,className:"react-flow__controls-zoomout",title:z["controls.zoomOut.ariaLabel"],"aria-label":z["controls.zoomOut.ariaLabel"],disabled:N,children:i.jsx(cA,{})})]}),s&&i.jsx(mc,{className:"react-flow__controls-fitview",onClick:q,title:z["controls.fitView.ariaLabel"],"aria-label":z["controls.fitView.ariaLabel"],children:i.jsx(uA,{})}),o&&i.jsx(mc,{className:"react-flow__controls-interactive",onClick:$,title:z["controls.interactive.ariaLabel"],"aria-label":z["controls.interactive.ariaLabel"],children:C?i.jsx(fA,{}):i.jsx(dA,{})}),y]})}Hv.displayName="Controls";const mA=j.memo(Hv);function pA({id:t,x:a,y:s,width:o,height:c,style:u,color:f,strokeColor:m,strokeWidth:p,className:g,borderRadius:y,shapeRendering:x,selected:b,onClick:S}){const{background:_,backgroundColor:C}=u||{},N=f||_||C;return i.jsx("rect",{className:ut(["react-flow__minimap-node",{selected:b},g]),x:a,y:s,rx:y,ry:y,width:o,height:c,style:{fill:N,stroke:m,strokeWidth:p},shapeRendering:x,onClick:S?E=>S(E,t):void 0})}const gA=j.memo(pA),xA=t=>t.nodes.map(a=>a.id),ah=t=>t instanceof Function?t:()=>t;function yA({nodeStrokeColor:t,nodeColor:a,nodeClassName:s="",nodeBorderRadius:o=5,nodeStrokeWidth:c,nodeComponent:u=gA,onClick:f}){const m=Oe(xA,We),p=ah(a),g=ah(t),y=ah(s),x=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return i.jsx(i.Fragment,{children:m.map(b=>i.jsx(vA,{id:b,nodeColorFunc:p,nodeStrokeColorFunc:g,nodeClassNameFunc:y,nodeBorderRadius:o,nodeStrokeWidth:c,NodeComponent:u,onClick:f,shapeRendering:x},b))})}function bA({id:t,nodeColorFunc:a,nodeStrokeColorFunc:s,nodeClassNameFunc:o,nodeBorderRadius:c,nodeStrokeWidth:u,shapeRendering:f,NodeComponent:m,onClick:p}){const{node:g,x:y,y:x,width:b,height:S}=Oe(_=>{const{internals:C}=_.nodeLookup.get(t),N=C.userNode,{x:E,y:z}=C.positionAbsolute,{width:T,height:k}=wa(N);return{node:N,x:E,y:z,width:T,height:k}},We);return!g||g.hidden||!H1(g)?null:i.jsx(m,{x:y,y:x,width:b,height:S,style:g.style,selected:!!g.selected,className:o(g),color:a(g),borderRadius:c,strokeColor:s(g),strokeWidth:u,shapeRendering:f,onClick:p,id:g.id})}const vA=j.memo(bA);var wA=j.memo(yA);const jA=200,NA=150,SA=t=>!t.hidden,_A=t=>{const a={x:-t.transform[0]/t.transform[2],y:-t.transform[1]/t.transform[2],width:t.width/t.transform[2],height:t.height/t.transform[2]};return{viewBB:a,boundingRect:t.nodeLookup.size>0?L1(To(t.nodeLookup,{filter:SA}),a):a,rfId:t.rfId,panZoom:t.panZoom,translateExtent:t.translateExtent,flowWidth:t.width,flowHeight:t.height,ariaLabelConfig:t.ariaLabelConfig}},EA="react-flow__minimap-desc";function $v({style:t,className:a,nodeStrokeColor:s,nodeColor:o,nodeClassName:c="",nodeBorderRadius:u=5,nodeStrokeWidth:f,nodeComponent:m,bgColor:p,maskColor:g,maskStrokeColor:y,maskStrokeWidth:x,position:b="bottom-right",onClick:S,onNodeClick:_,pannable:C=!1,zoomable:N=!1,ariaLabel:E,inversePan:z,zoomStep:T=1,offsetScale:k=5}){const w=Ke(),R=j.useRef(null),{boundingRect:M,viewBB:q,rfId:$,panZoom:G,translateExtent:Q,flowWidth:Z,flowHeight:re,ariaLabelConfig:V}=Oe(_A,We),I=t?.width??jA,O=t?.height??NA,D=M.width/I,P=M.height/O,L=Math.max(D,P),W=L*I,B=L*O,H=k*L,te=M.x-(W-M.width)/2-H,ne=M.y-(B-M.height)/2-H,se=W+H*2,de=B+H*2,ue=`${EA}-${$}`,U=j.useRef(0),ce=j.useRef();U.current=L,j.useEffect(()=>{if(R.current&&G)return ce.current=Y8({domNode:R.current,panZoom:G,getTransform:()=>w.getState().transform,getViewScale:()=>U.current}),()=>{ce.current?.destroy()}},[G]),j.useEffect(()=>{ce.current?.update({translateExtent:Q,width:Z,height:re,inversePan:z,pannable:C,zoomStep:T,zoomable:N})},[C,N,z,T,Q,Z,re]);const he=S?be=>{const[Se,Ae]=ce.current?.pointer(be)||[0,0];S(be,{x:Se,y:Ae})}:void 0,ve=_?j.useCallback((be,Se)=>{const Ae=w.getState().nodeLookup.get(Se).internals.userNode;_(be,Ae)},[]):void 0,pe=E??V["minimap.ariaLabel"];return i.jsx(hu,{position:b,style:{...t,"--xy-minimap-background-color-props":typeof p=="string"?p:void 0,"--xy-minimap-mask-background-color-props":typeof g=="string"?g:void 0,"--xy-minimap-mask-stroke-color-props":typeof y=="string"?y:void 0,"--xy-minimap-mask-stroke-width-props":typeof x=="number"?x*L:void 0,"--xy-minimap-node-background-color-props":typeof o=="string"?o:void 0,"--xy-minimap-node-stroke-color-props":typeof s=="string"?s:void 0,"--xy-minimap-node-stroke-width-props":typeof f=="number"?f:void 0},className:ut(["react-flow__minimap",a]),"data-testid":"rf__minimap",children:i.jsxs("svg",{width:I,height:O,viewBox:`${te} ${ne} ${se} ${de}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":ue,ref:R,onClick:he,children:[pe&&i.jsx("title",{id:ue,children:pe}),i.jsx(wA,{onClick:ve,nodeColor:o,nodeStrokeColor:s,nodeBorderRadius:u,nodeClassName:c,nodeStrokeWidth:f,nodeComponent:m}),i.jsx("path",{className:"react-flow__minimap-mask",d:`M${te-H},${ne-H}h${se+H*2}v${de+H*2}h${-se-H*2}z
        M${q.x},${q.y}h${q.width}v${q.height}h${-q.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}$v.displayName="MiniMap";const CA=j.memo($v),TA=t=>a=>t?`${Math.max(1/a.transform[2],1)}`:void 0,MA={[Xr.Line]:"right",[Xr.Handle]:"bottom-right"};function AA({nodeId:t,position:a,variant:s=Xr.Handle,className:o,style:c=void 0,children:u,color:f,minWidth:m=10,minHeight:p=10,maxWidth:g=Number.MAX_VALUE,maxHeight:y=Number.MAX_VALUE,keepAspectRatio:x=!1,resizeDirection:b,autoScale:S=!0,shouldResize:_,onResizeStart:C,onResize:N,onResizeEnd:E}){const z=xv(),T=typeof t=="string"?t:z,k=Ke(),w=j.useRef(null),R=s===Xr.Handle,M=Oe(j.useCallback(TA(R&&S),[R,S]),We),q=j.useRef(null),$=a??MA[s];j.useEffect(()=>{if(!(!w.current||!T))return q.current||(q.current=aT({domNode:w.current,nodeId:T,getStoreItems:()=>{const{nodeLookup:Q,transform:Z,snapGrid:re,snapToGrid:V,nodeOrigin:I,domNode:O}=k.getState();return{nodeLookup:Q,transform:Z,snapGrid:re,snapToGrid:V,nodeOrigin:I,paneDomNode:O}},onChange:(Q,Z)=>{const{triggerNodeChanges:re,nodeLookup:V,parentLookup:I,nodeOrigin:O}=k.getState(),D=[],P={x:Q.x,y:Q.y},L=V.get(T);if(L&&L.expandParent&&L.parentId){const W=L.origin??O,B=Q.width??L.measured.width??0,H=Q.height??L.measured.height??0,te={id:L.id,parentId:L.parentId,rect:{width:B,height:H,...$1({x:Q.x??L.position.x,y:Q.y??L.position.y},{width:B,height:H},L.parentId,V,W)}},ne=xm([te],V,I,O);D.push(...ne),P.x=Q.x?Math.max(W[0]*B,Q.x):void 0,P.y=Q.y?Math.max(W[1]*H,Q.y):void 0}if(P.x!==void 0&&P.y!==void 0){const W={id:T,type:"position",position:{...P}};D.push(W)}if(Q.width!==void 0&&Q.height!==void 0){const B={id:T,type:"dimensions",resizing:!0,setAttributes:b?b==="horizontal"?"width":"height":!0,dimensions:{width:Q.width,height:Q.height}};D.push(B)}for(const W of Z){const B={...W,type:"position"};D.push(B)}re(D)},onEnd:({width:Q,height:Z})=>{const re={id:T,type:"dimensions",resizing:!1,dimensions:{width:Q,height:Z}};k.getState().triggerNodeChanges([re])}})),q.current.update({controlPosition:$,boundaries:{minWidth:m,minHeight:p,maxWidth:g,maxHeight:y},keepAspectRatio:x,resizeDirection:b,onResizeStart:C,onResize:N,onResizeEnd:E,shouldResize:_}),()=>{q.current?.destroy()}},[$,m,p,g,y,x,C,N,E,_]);const G=$.split("-");return i.jsx("div",{className:ut(["react-flow__resize-control","nodrag",...G,s,o]),ref:w,style:{...c,scale:M,...f&&{[R?"backgroundColor":"borderColor"]:f}},children:u})}j.memo(AA);const sh=[{id:"trigger-1",type:"trigger",position:{x:250,y:50},data:{label:"Inicio",config:{type:"classification",conditions:{intent:["sales"]}}}}],kA=[],Kr=vb((t,a)=>({flowId:null,flowName:"Nuevo Flujo",flowSlug:null,isActive:!1,isSaved:!0,nodes:sh,edges:kA,selectedNode:null,selectedEdge:null,isSidebarOpen:!0,isPropertiesOpen:!1,onNodesChange:s=>{t({nodes:dv(s,a().nodes),isSaved:!1})},onEdgesChange:s=>{t({edges:fv(s,a().edges),isSaved:!1})},onConnect:s=>{t({edges:I1({...s,type:"smoothstep",animated:!0,style:{stroke:"#25D366",strokeWidth:2}},a().edges),isSaved:!1})},addNode:(s,o)=>{const c=`${s}-${Date.now()}`,f={id:c,type:s,position:o,data:{trigger:{label:"Trigger",config:{type:"classification",conditions:{}}},message:{label:"Mensaje",content:"Escribe tu mensaje aqu..."},question:{label:"Pregunta",content:"Cul es tu opcin?",variable:"respuesta",options:[]},condition:{label:"Condicin",conditions:[]},action:{label:"Accin",action:"",payload:{}},transfer:{label:"Transferir",content:"Transfiriendo a un agente..."},end:{label:"Fin"}}[s]||{label:s}};return t({nodes:[...a().nodes,f],isSaved:!1}),c},updateNodeData:(s,o)=>{t({nodes:a().nodes.map(c=>c.id===s?{...c,data:{...c.data,...o}}:c),isSaved:!1})},deleteNode:s=>{t({nodes:a().nodes.filter(o=>o.id!==s),edges:a().edges.filter(o=>o.source!==s&&o.target!==s),selectedNode:null,isSaved:!1})},setSelectedNode:s=>t({selectedNode:s,isPropertiesOpen:!!s}),setSelectedEdge:s=>t({selectedEdge:s}),clearSelection:()=>t({selectedNode:null,selectedEdge:null}),toggleSidebar:()=>t({isSidebarOpen:!a().isSidebarOpen}),toggleProperties:()=>t({isPropertiesOpen:!a().isPropertiesOpen}),setFlowMeta:s=>t({flowId:s.id,flowName:s.name,flowSlug:s.slug,isActive:s.is_active}),loadFlow:s=>{const o={trigger:"Inicio",message:"Mensaje",question:"Pregunta",condition:"Condicin",action:"Accin",transfer:"Transferir",end:"Fin"},c=(s.nodes||[]).map(u=>{let f=o[u.type]||u.type;return u.content&&u.content.length>0&&(f=u.content.substring(0,25)+(u.content.length>25?"...":"")),u.action&&(f=`Accin: ${u.action}`),{id:u.id,type:u.type,position:u.position||{x:250,y:50},data:{label:f,content:u.content,variable:u.variable,options:u.options,conditions:u.conditions,action:u.action,payload:u.payload,config:u.config||(u.type==="trigger"?s.trigger_config:void 0)}}});t({flowId:s.id,flowName:s.name,flowSlug:s.slug,isActive:s.is_active,nodes:c.length>0?c:sh,edges:s.connections?.map(u=>({id:`${u.from}-${u.to}`,source:u.from,target:u.to,type:"smoothstep",animated:!0,label:u.label,style:{stroke:"#25D366",strokeWidth:2}}))||[],isSaved:!0})},resetFlow:()=>t({flowId:null,flowName:"Nuevo Flujo",flowSlug:null,isActive:!1,nodes:sh,edges:[],selectedNode:null,isSaved:!0}),markSaved:()=>t({isSaved:!0}),exportFlow:()=>{const s=a();return{name:s.flowName,trigger_config:s.nodes.find(o=>o.type==="trigger")?.data.config||{},nodes:s.nodes.map(o=>({id:o.id,type:o.type,content:o.data.content,variable:o.data.variable,options:o.data.options,conditions:o.data.conditions,action:o.data.action,payload:o.data.payload,position:o.position})),connections:s.edges.map(o=>({from:o.source,to:o.target,label:o.label}))}}}));function zA({onTestClick:t}){const{flowId:a,flowName:s,isActive:o,isSaved:c,exportFlow:u,markSaved:f,loadFlow:m,resetFlow:p,setFlowMeta:g}=Kr(),[y,x]=j.useState(!1),[b,S]=j.useState(!1),[_,C]=j.useState([]),[N,E]=j.useState(s),z=async()=>{x(!0);try{const M=u();if(M.name=N,a)await x_(a,M);else{const q=await g_(M);g({id:q.id,name:N,slug:q.slug,is_active:!1})}f(),alert("Flujo guardado correctamente")}catch(M){alert("Error al guardar: "+M.message)}finally{x(!1)}},T=async()=>{if(!a){alert("Primero guarda el flujo");return}try{await Wb(a,!o),g({id:a,name:N,is_active:!o}),alert(o?"Flujo desactivado":"Flujo activado")}catch(M){alert("Error: "+M.message)}},k=async()=>{try{const M=await Fb();C(M.flows||[]),S(!0)}catch(M){alert("Error cargando flujos: "+M.message)}},w=async M=>{try{const q=await yh(M.id);m(q.flow),E(q.flow.name),S(!1)}catch(q){alert("Error cargando flujo: "+q.message)}},R=()=>{!c&&!confirm("Tienes cambios sin guardar. Continuar?")||(p(),E("Nuevo Flujo"))};return i.jsxs("div",{style:{height:"56px",background:"white",borderBottom:"1px solid #e5e7eb",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0 16px"},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[i.jsx("span",{style:{fontSize:"24px"},children:""}),i.jsx("span",{style:{fontWeight:600,color:"#075E54"},children:"Flow Builder"})]}),i.jsx("div",{style:{borderLeft:"1px solid #e5e7eb",height:"24px"}}),i.jsx("input",{type:"text",value:N,onChange:M=>E(M.target.value),style:{border:"none",fontSize:"15px",fontWeight:500,background:"transparent",width:"200px"},placeholder:"Nombre del flujo"}),!c&&i.jsx("span",{style:{fontSize:"11px",background:"#fef3c7",color:"#92400e",padding:"2px 8px",borderRadius:"4px"},children:"Sin guardar"}),o&&i.jsx("span",{style:{fontSize:"11px",background:"#d1fae5",color:"#065f46",padding:"2px 8px",borderRadius:"4px"},children:"Activo"})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[i.jsx("button",{onClick:t,style:{padding:"8px 16px",background:"linear-gradient(135deg, #075E54 0%, #128C7E 100%)",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"13px",fontWeight:500},children:" Probar"}),i.jsx("div",{style:{borderLeft:"1px solid #e5e7eb",height:"24px",margin:"0 4px"}}),i.jsx("button",{onClick:R,style:{padding:"8px 16px",background:"white",border:"1px solid #d1d5db",borderRadius:"6px",cursor:"pointer",fontSize:"13px"},children:"+ Nuevo"}),i.jsx("button",{onClick:k,style:{padding:"8px 16px",background:"white",border:"1px solid #d1d5db",borderRadius:"6px",cursor:"pointer",fontSize:"13px"},children:" Abrir"}),i.jsx("button",{onClick:z,disabled:y,style:{padding:"8px 16px",background:"#25D366",color:"white",border:"none",borderRadius:"6px",cursor:y?"wait":"pointer",fontSize:"13px",fontWeight:500},children:y?"Guardando...":" Guardar"}),a&&i.jsx("button",{onClick:T,style:{padding:"8px 16px",background:o?"#fee2e2":"#d1fae5",color:o?"#dc2626":"#065f46",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"13px",fontWeight:500},children:o?" Desactivar":" Activar"})]}),b&&i.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:i.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"24px",width:"400px",maxHeight:"500px",overflow:"auto"},children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"16px"},children:[i.jsx("h3",{style:{margin:0},children:"Seleccionar flujo"}),i.jsx("button",{onClick:()=>S(!1),style:{background:"none",border:"none",cursor:"pointer",fontSize:"18px"},children:""})]}),_.length===0?i.jsx("p",{style:{color:"#6b7280",textAlign:"center"},children:"No hay flujos guardados"}):i.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:_.map(M=>i.jsxs("div",{onClick:()=>w(M),style:{padding:"12px",border:"1px solid #e5e7eb",borderRadius:"8px",cursor:"pointer",display:"flex",justifyContent:"space-between",alignItems:"center"},onMouseOver:q=>q.currentTarget.style.background="#f9fafb",onMouseOut:q=>q.currentTarget.style.background="white",children:[i.jsxs("div",{children:[i.jsx("div",{style:{fontWeight:500},children:M.name}),i.jsx("div",{style:{fontSize:"12px",color:"#6b7280"},children:M.slug})]}),M.is_active&&i.jsx("span",{style:{fontSize:"10px",background:"#d1fae5",color:"#065f46",padding:"2px 6px",borderRadius:"4px"},children:"Activo"})]},M.id))})]})})]})}const RA=[{type:"trigger",label:"Trigger",icon:"",color:"#667eea",description:"Inicio del flujo"},{type:"message",label:"Mensaje",icon:"",color:"#25D366",description:"Enviar mensaje"},{type:"question",label:"Pregunta",icon:"",color:"#34B7F1",description:"Preguntar y esperar"},{type:"condition",label:"Condicin",icon:"",color:"#f59e0b",description:"Bifurcacin"},{type:"action",label:"Accin",icon:"",color:"#6366f1",description:"Ejecutar accin"},{type:"ai_response",label:"Respuesta IA",icon:"",color:"#8b5cf6",description:"Generar con IA"},{type:"webhook",label:"Webhook",icon:"",color:"#f97316",description:"Llamar API externa"},{type:"delay",label:"Espera",icon:"",color:"#64748b",description:"Pausar X segundos"},{type:"transfer",label:"Transferir",icon:"",color:"#ec4899",description:"Pasar a humano"},{type:"end",label:"Fin",icon:"",color:"#ef4444",description:"Terminar flujo"}];function DA(){const{isSidebarOpen:t,toggleSidebar:a}=Kr(),s=(o,c)=>{o.dataTransfer.setData("application/reactflow",c),o.dataTransfer.effectAllowed="move"};return t?i.jsxs("div",{style:{width:"240px",background:"white",borderRight:"1px solid #e5e7eb",padding:"16px",display:"flex",flexDirection:"column",height:"100%"},children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[i.jsx("h3",{style:{margin:0,fontSize:"14px",fontWeight:600},children:"Nodos"}),i.jsx("button",{onClick:a,style:{background:"none",border:"none",cursor:"pointer",fontSize:"18px",color:"#6b7280"},children:""})]}),i.jsx("p",{style:{fontSize:"12px",color:"#6b7280",marginBottom:"16px"},children:"Arrastra los nodos al canvas para construir tu flujo"}),i.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:RA.map(o=>i.jsxs("div",{draggable:!0,onDragStart:c=>s(c,o.type),style:{padding:"10px 12px",borderRadius:"8px",cursor:"grab",display:"flex",alignItems:"center",gap:"10px",background:`${o.color}15`,border:`1px solid ${o.color}30`,transition:"all 0.2s"},onMouseOver:c=>{c.currentTarget.style.transform="translateX(4px)",c.currentTarget.style.boxShadow="0 2px 8px rgba(0,0,0,0.1)"},onMouseOut:c=>{c.currentTarget.style.transform="none",c.currentTarget.style.boxShadow="none"},children:[i.jsx("span",{style:{fontSize:"20px"},children:o.icon}),i.jsxs("div",{children:[i.jsx("div",{style:{fontWeight:500,fontSize:"13px"},children:o.label}),i.jsx("div",{style:{fontSize:"11px",color:"#6b7280"},children:o.description})]})]},o.type))})]}):i.jsxs("button",{onClick:a,style:{position:"absolute",left:10,top:10,zIndex:10,background:"white",border:"1px solid #e5e7eb",borderRadius:"8px",padding:"8px 12px",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("span",{children:""})," Nodos"]})}const Zy={trigger:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",border:"none"},message:{background:"white",border:"2px solid #25D366"},question:{background:"white",border:"2px solid #34B7F1"},condition:{background:"#fef3c7",border:"2px solid #f59e0b"},action:{background:"#e0e7ff",border:"2px solid #6366f1"},transfer:{background:"#fce7f3",border:"2px solid #ec4899"},end:{background:"#fee2e2",border:"2px solid #ef4444"}},OA={trigger:"",message:"",question:"",condition:"",action:"",transfer:"",end:""};function BA({id:t,data:a,type:s,selected:o}){const c=Zy[s]||Zy.message,u=OA[s]||"",f=s!=="end",m=s!=="trigger";return i.jsxs("div",{style:{...c,padding:"12px 16px",borderRadius:"8px",minWidth:"180px",maxWidth:"250px",boxShadow:o?"0 0 0 2px #3b82f6":"0 2px 8px rgba(0,0,0,0.1)",cursor:"pointer"},children:[m&&i.jsx(Ir,{type:"target",position:xe.Top,style:{background:"#6b7280",width:10,height:10}}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"4px"},children:[i.jsx("span",{style:{fontSize:"16px"},children:u}),i.jsx("strong",{style:{fontSize:"13px"},children:a.label||s})]}),a.content&&i.jsxs("div",{style:{fontSize:"11px",opacity:.8,marginTop:"4px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:[a.content.substring(0,40),a.content.length>40?"...":""]}),a.options&&a.options.length>0&&i.jsxs("div",{style:{fontSize:"10px",marginTop:"6px",opacity:.7},children:[a.options.length," opciones"]}),f&&i.jsx(Ir,{type:"source",position:xe.Bottom,style:{background:"#25D366",width:10,height:10}})]})}const Cs=j.memo(BA),LA={trigger:t=>i.jsx(Cs,{...t,type:"trigger"}),message:t=>i.jsx(Cs,{...t,type:"message"}),question:t=>i.jsx(Cs,{...t,type:"question"}),condition:t=>i.jsx(Cs,{...t,type:"condition"}),action:t=>i.jsx(Cs,{...t,type:"action"}),transfer:t=>i.jsx(Cs,{...t,type:"transfer"}),end:t=>i.jsx(Cs,{...t,type:"end"})};function HA(){const t=j.useRef(null),{nodes:a,edges:s,onNodesChange:o,onEdgesChange:c,onConnect:u,addNode:f,setSelectedNode:m}=Kr(),p=j.useCallback(b=>{b.preventDefault(),b.dataTransfer.dropEffect="move"},[]),g=j.useCallback(b=>{b.preventDefault();const S=b.dataTransfer.getData("application/reactflow");if(!S)return;const _=t.current.getBoundingClientRect(),C={x:b.clientX-_.left-90,y:b.clientY-_.top-25};f(S,C)},[f]),y=j.useCallback((b,S)=>{m(S)},[m]),x=j.useCallback(()=>{m(null)},[m]);return i.jsx("div",{ref:t,style:{flex:1,height:"100%"},children:i.jsxs(nA,{nodes:a,edges:s,onNodesChange:o,onEdgesChange:c,onConnect:u,onDrop:g,onDragOver:p,onNodeClick:y,onPaneClick:x,nodeTypes:LA,fitView:!0,snapToGrid:!0,snapGrid:[15,15],defaultEdgeOptions:{type:"smoothstep",animated:!0,style:{stroke:"#25D366",strokeWidth:2}},children:[i.jsx(oA,{color:"#e5e7eb",gap:20}),i.jsx(mA,{}),i.jsx(CA,{nodeColor:b=>({trigger:"#667eea",message:"#25D366",question:"#34B7F1",condition:"#f59e0b",action:"#6366f1",transfer:"#ec4899",end:"#ef4444"})[b.type]||"#6b7280",maskColor:"rgba(255, 255, 255, 0.8)"})]})})}const $A=[{value:"sales",label:"Ventas",color:"#10b981"},{value:"support",label:"Soporte",color:"#3b82f6"},{value:"complaint",label:"Quejas",color:"#ef4444"},{value:"info",label:"Informacin",color:"#8b5cf6"},{value:"greeting",label:"Saludo",color:"#f59e0b"}],UA=[{value:"low",label:"Baja"},{value:"medium",label:"Media"},{value:"high",label:"Alta"},{value:"critical",label:"Crtica"}];function qA(){const{selectedNode:t,updateNodeData:a,deleteNode:s,isPropertiesOpen:o,toggleProperties:c}=Kr(),[u,f]=j.useState({}),[m,p]=j.useState({type:"keyword",keywords:[],conditions:{}}),[g,y]=j.useState([]),x=Mt(w=>w.token);j.useEffect(()=>{t&&(f(t.data||{}),t.type==="trigger"&&t.data?.config&&p(t.data.config))},[t]),j.useEffect(()=>{t?.type==="transfer"&&g.length===0&&x&&fetch("/api/departments",{headers:{Authorization:`Bearer ${x}`}}).then(w=>w.json()).then(w=>y(w.departments||[])).catch(()=>{})},[t?.type,x]);const b=(w,R)=>{const M={...u,[w]:R};f(M),a(t.id,{[w]:R})},S=(w,R,M)=>{const q=[...u.options||[]];q[w]={...q[w],[R]:M},b("options",q)},_=()=>{const w=[...u.options||[],{label:"Nueva opcin",value:""}];b("options",w)},C=w=>{const R=u.options.filter((M,q)=>q!==w);b("options",R)},N=w=>{const R={type:w,keywords:[],conditions:{}};p(R),a(t.id,{config:R})},E=w=>{const R=w.split(",").map(q=>q.trim()).filter(q=>q),M={...m,keywords:R};p(M),a(t.id,{config:M})},z=w=>{const R=m.conditions?.intent||[];let M;R.includes(w)?M=R.filter($=>$!==w):M=[...R,w];const q={...m,conditions:{...m.conditions,intent:M}};p(q),a(t.id,{config:q})},T=w=>{const R={...m,conditions:{...m.conditions,urgency:w}};p(R),a(t.id,{config:R})},k=w=>{const R={...m,conditions:{...m.conditions,min_lead_score:parseInt(w)||0}};p(R),a(t.id,{config:R})};return!o||!t?null:i.jsxs("div",{style:{width:"300px",background:"white",borderLeft:"1px solid #e5e7eb",padding:"16px",height:"100%",overflow:"auto"},children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[i.jsx("h3",{style:{margin:0,fontSize:"14px",fontWeight:600},children:"Propiedades"}),i.jsx("button",{onClick:c,style:{background:"none",border:"none",cursor:"pointer",fontSize:"18px",color:"#6b7280"},children:""})]}),i.jsxs("div",{style:{fontSize:"12px",color:"#6b7280",marginBottom:"16px"},children:["Tipo: ",i.jsx("strong",{children:t.type})]}),i.jsxs("div",{style:{marginBottom:"16px"},children:[i.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:500,marginBottom:"4px"},children:"Etiqueta"}),i.jsx("input",{type:"text",value:u.label||"",onChange:w=>b("label",w.target.value),style:{width:"100%",padding:"8px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"13px"}})]}),t.type==="trigger"&&i.jsxs("div",{style:{marginBottom:"16px",padding:"12px",background:"#f8fafc",borderRadius:"8px",border:"1px solid #e2e8f0"},children:[i.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:600,marginBottom:"12px",color:"#475569"},children:"Configuracin del Trigger"}),i.jsxs("div",{style:{marginBottom:"12px"},children:[i.jsx("label",{style:{display:"block",fontSize:"11px",fontWeight:500,marginBottom:"6px",color:"#64748b"},children:"Tipo de activacin"}),i.jsx("div",{style:{display:"flex",gap:"6px"},children:[{value:"keyword",label:"Palabras clave"},{value:"classification",label:"Clasificacin"},{value:"always",label:"Siempre"}].map(w=>i.jsx("button",{onClick:()=>N(w.value),style:{flex:1,padding:"8px 4px",fontSize:"11px",border:m.type===w.value?"2px solid #25D366":"1px solid #d1d5db",borderRadius:"6px",background:m.type===w.value?"#dcfce7":"white",color:m.type===w.value?"#166534":"#6b7280",cursor:"pointer",fontWeight:m.type===w.value?600:400},children:w.label},w.value))})]}),m.type==="keyword"&&i.jsxs("div",{style:{marginBottom:"12px"},children:[i.jsx("label",{style:{display:"block",fontSize:"11px",fontWeight:500,marginBottom:"4px",color:"#64748b"},children:"Palabras clave (separadas por coma)"}),i.jsx("input",{type:"text",value:(m.keywords||[]).join(", "),onChange:w=>E(w.target.value),placeholder:"precio, costo, cotizar, cuanto",style:{width:"100%",padding:"8px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"12px"}}),i.jsx("p",{style:{fontSize:"10px",color:"#94a3b8",marginTop:"4px"},children:"El flujo se activa si el mensaje contiene alguna de estas palabras"})]}),m.type==="classification"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{marginBottom:"12px"},children:[i.jsx("label",{style:{display:"block",fontSize:"11px",fontWeight:500,marginBottom:"6px",color:"#64748b"},children:"Intenciones del mensaje"}),i.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"6px"},children:$A.map(w=>{const R=(m.conditions?.intent||[]).includes(w.value);return i.jsxs("button",{onClick:()=>z(w.value),style:{padding:"6px 10px",fontSize:"11px",border:R?`2px solid ${w.color}`:"1px solid #d1d5db",borderRadius:"16px",background:R?`${w.color}20`:"white",color:R?w.color:"#6b7280",cursor:"pointer",fontWeight:R?600:400},children:[R&&" ",w.label]},w.value)})})]}),i.jsxs("div",{style:{marginBottom:"12px"},children:[i.jsx("label",{style:{display:"block",fontSize:"11px",fontWeight:500,marginBottom:"4px",color:"#64748b"},children:"Urgencia mnima"}),i.jsxs("select",{value:m.conditions?.urgency||"",onChange:w=>T(w.target.value),style:{width:"100%",padding:"8px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"12px"},children:[i.jsx("option",{value:"",children:"Cualquiera"}),UA.map(w=>i.jsx("option",{value:w.value,children:w.label},w.value))]})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"11px",fontWeight:500,marginBottom:"4px",color:"#64748b"},children:"Lead score mnimo"}),i.jsx("input",{type:"number",min:"0",max:"100",value:m.conditions?.min_lead_score||0,onChange:w=>k(w.target.value),style:{width:"100%",padding:"8px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"12px"}}),i.jsx("p",{style:{fontSize:"10px",color:"#94a3b8",marginTop:"4px"},children:"Solo activa si el lead tiene este puntaje o ms (0-100)"})]})]}),m.type==="always"&&i.jsx("div",{style:{padding:"12px",background:"#fef3c7",borderRadius:"6px",border:"1px solid #fcd34d"},children:i.jsx("p",{style:{fontSize:"11px",color:"#92400e",margin:0},children:" Este flujo se activar para TODOS los mensajes entrantes que no coincidan con otros flujos. salo como flujo por defecto."})})]}),["message","question","transfer"].includes(t.type)&&i.jsxs("div",{style:{marginBottom:"16px"},children:[i.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:500,marginBottom:"4px"},children:"Contenido del mensaje"}),i.jsx("textarea",{value:u.content||"",onChange:w=>b("content",w.target.value),rows:4,style:{width:"100%",padding:"8px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"13px",resize:"vertical"},placeholder:"Escribe el mensaje..."}),i.jsxs("p",{style:{fontSize:"11px",color:"#6b7280",marginTop:"4px"},children:["Usa ","{{variable}}"," para insertar variables"]})]}),t.type==="transfer"&&i.jsxs("div",{style:{marginBottom:"16px"},children:[i.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:500,marginBottom:"4px"},children:"Departamento destino"}),i.jsxs("select",{value:u.targetDepartmentId||"",onChange:w=>b("targetDepartmentId",w.target.value?Number(w.target.value):null),style:{width:"100%",padding:"8px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"13px"},children:[i.jsx("option",{value:"",children:"Auto (detectar por intent)"}),g.filter(w=>w.active).map(w=>i.jsx("option",{value:w.id,children:w.display_name||w.name},w.id))]}),i.jsx("p",{style:{fontSize:"11px",color:"#6b7280",marginTop:"4px"},children:'Si seleccionas "Auto", se usar el intent detectado para asignar departamento'})]}),t.type==="question"&&i.jsxs("div",{style:{marginBottom:"16px"},children:[i.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:500,marginBottom:"4px"},children:"Guardar respuesta en variable"}),i.jsx("input",{type:"text",value:u.variable||"",onChange:w=>b("variable",w.target.value),style:{width:"100%",padding:"8px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"13px"},placeholder:"nombre_variable"})]}),t.type==="question"&&i.jsxs("div",{style:{marginBottom:"16px"},children:[i.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:500,marginBottom:"8px"},children:"Opciones de respuesta"}),(u.options||[]).map((w,R)=>i.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"8px"},children:[i.jsx("input",{type:"text",value:w.label,onChange:M=>S(R,"label",M.target.value),placeholder:"Texto",style:{flex:1,padding:"6px",border:"1px solid #d1d5db",borderRadius:"4px",fontSize:"12px"}}),i.jsx("input",{type:"text",value:w.value,onChange:M=>S(R,"value",M.target.value),placeholder:"Valor",style:{width:"80px",padding:"6px",border:"1px solid #d1d5db",borderRadius:"4px",fontSize:"12px"}}),i.jsx("button",{onClick:()=>C(R),style:{background:"#fee2e2",border:"none",borderRadius:"4px",padding:"0 8px",cursor:"pointer",color:"#ef4444"},children:""})]},R)),i.jsx("button",{onClick:_,style:{background:"#f3f4f6",border:"1px dashed #d1d5db",borderRadius:"6px",padding:"8px",width:"100%",cursor:"pointer",fontSize:"12px"},children:"+ Agregar opcin"})]}),t.type==="action"&&i.jsxs("div",{style:{marginBottom:"16px"},children:[i.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:500,marginBottom:"4px"},children:"Tipo de accin"}),i.jsxs("select",{value:u.action||"",onChange:w=>b("action",w.target.value),style:{width:"100%",padding:"8px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"13px"},children:[i.jsx("option",{value:"",children:"Selecciona..."}),i.jsx("option",{value:"notify_sales",children:"Notificar a ventas"}),i.jsx("option",{value:"create_ticket",children:"Crear ticket"}),i.jsx("option",{value:"save_lead",children:"Guardar lead"}),i.jsx("option",{value:"send_email",children:"Enviar email"}),i.jsx("option",{value:"webhook",children:"Llamar webhook"}),i.jsx("option",{value:"search_faq",children:"Buscar en FAQ"})]})]}),t.type==="ai_response"&&i.jsxs("div",{style:{marginBottom:"16px",padding:"12px",background:"#f5f3ff",borderRadius:"8px",border:"1px solid #c4b5fd"},children:[i.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:600,marginBottom:"12px",color:"#5b21b6"},children:" Configuracin de IA"}),i.jsxs("div",{style:{marginBottom:"12px"},children:[i.jsx("label",{style:{display:"block",fontSize:"11px",fontWeight:500,marginBottom:"4px",color:"#6b7280"},children:"Prompt del sistema"}),i.jsx("textarea",{value:u.system_prompt||"",onChange:w=>b("system_prompt",w.target.value),rows:3,style:{width:"100%",padding:"8px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"12px",resize:"vertical"},placeholder:"Eres un asistente de ventas amable y profesional..."})]}),i.jsxs("div",{style:{marginBottom:"12px"},children:[i.jsx("label",{style:{display:"block",fontSize:"11px",fontWeight:500,marginBottom:"4px",color:"#6b7280"},children:"Prompt del usuario"}),i.jsx("textarea",{value:u.user_prompt||"",onChange:w=>b("user_prompt",w.target.value),rows:2,style:{width:"100%",padding:"8px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"12px",resize:"vertical"},placeholder:"El cliente pregunta: {{initial_message}}"}),i.jsxs("p",{style:{fontSize:"10px",color:"#94a3b8",marginTop:"4px"},children:["Usa ","{{variable}}"," para insertar datos dinmicos"]})]}),i.jsxs("div",{style:{marginBottom:"12px"},children:[i.jsx("label",{style:{display:"block",fontSize:"11px",fontWeight:500,marginBottom:"4px",color:"#6b7280"},children:"Modelo"}),i.jsxs("select",{value:u.model||"gpt-4o-mini",onChange:w=>b("model",w.target.value),style:{width:"100%",padding:"8px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"12px"},children:[i.jsx("option",{value:"gpt-4o-mini",children:"GPT-4o Mini (rpido)"}),i.jsx("option",{value:"gpt-4o",children:"GPT-4o (preciso)"}),i.jsx("option",{value:"gpt-4-turbo",children:"GPT-4 Turbo"})]})]}),i.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"12px"},children:[i.jsxs("div",{style:{flex:1},children:[i.jsx("label",{style:{display:"block",fontSize:"11px",fontWeight:500,marginBottom:"4px",color:"#6b7280"},children:"Temperatura"}),i.jsx("input",{type:"number",min:"0",max:"1",step:"0.1",value:u.temperature||.7,onChange:w=>b("temperature",parseFloat(w.target.value)),style:{width:"100%",padding:"8px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"12px"}})]}),i.jsxs("div",{style:{flex:1},children:[i.jsx("label",{style:{display:"block",fontSize:"11px",fontWeight:500,marginBottom:"4px",color:"#6b7280"},children:"Max tokens"}),i.jsx("input",{type:"number",min:"50",max:"2000",step:"50",value:u.max_tokens||200,onChange:w=>b("max_tokens",parseInt(w.target.value)),style:{width:"100%",padding:"8px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"12px"}})]})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"11px",fontWeight:500,marginBottom:"4px",color:"#6b7280"},children:"Guardar respuesta en variable (opcional)"}),i.jsx("input",{type:"text",value:u.variable||"",onChange:w=>b("variable",w.target.value),style:{width:"100%",padding:"8px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"12px"},placeholder:"ai_response"})]})]}),t.type==="webhook"&&i.jsxs("div",{style:{marginBottom:"16px",padding:"12px",background:"#fff7ed",borderRadius:"8px",border:"1px solid #fed7aa"},children:[i.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:600,marginBottom:"12px",color:"#c2410c"},children:" Configuracin de Webhook"}),i.jsxs("div",{style:{marginBottom:"12px"},children:[i.jsx("label",{style:{display:"block",fontSize:"11px",fontWeight:500,marginBottom:"4px",color:"#6b7280"},children:"URL del endpoint"}),i.jsx("input",{type:"text",value:u.url||"",onChange:w=>b("url",w.target.value),style:{width:"100%",padding:"8px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"12px"},placeholder:"https://api.ejemplo.com/endpoint"})]}),i.jsxs("div",{style:{marginBottom:"12px"},children:[i.jsx("label",{style:{display:"block",fontSize:"11px",fontWeight:500,marginBottom:"4px",color:"#6b7280"},children:"Mtodo HTTP"}),i.jsxs("select",{value:u.method||"POST",onChange:w=>b("method",w.target.value),style:{width:"100%",padding:"8px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"12px"},children:[i.jsx("option",{value:"GET",children:"GET"}),i.jsx("option",{value:"POST",children:"POST"}),i.jsx("option",{value:"PUT",children:"PUT"}),i.jsx("option",{value:"PATCH",children:"PATCH"}),i.jsx("option",{value:"DELETE",children:"DELETE"})]})]}),i.jsxs("div",{style:{marginBottom:"12px"},children:[i.jsx("label",{style:{display:"block",fontSize:"11px",fontWeight:500,marginBottom:"4px",color:"#6b7280"},children:"Headers (JSON)"}),i.jsx("textarea",{value:u.headers||`{
  "Content-Type": "application/json"
}`,onChange:w=>b("headers",w.target.value),rows:3,style:{width:"100%",padding:"8px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"11px",fontFamily:"monospace",resize:"vertical"}})]}),i.jsxs("div",{style:{marginBottom:"12px"},children:[i.jsxs("label",{style:{display:"block",fontSize:"11px",fontWeight:500,marginBottom:"4px",color:"#6b7280"},children:["Body (JSON) - Usa ","{{variable}}"," para datos dinmicos"]}),i.jsx("textarea",{value:u.body||`{
  "phone": "{{phone}}",
  "message": "{{initial_message}}"
}`,onChange:w=>b("body",w.target.value),rows:4,style:{width:"100%",padding:"8px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"11px",fontFamily:"monospace",resize:"vertical"}})]}),i.jsxs("div",{style:{marginBottom:"12px"},children:[i.jsx("label",{style:{display:"block",fontSize:"11px",fontWeight:500,marginBottom:"4px",color:"#6b7280"},children:"Timeout (ms)"}),i.jsx("input",{type:"number",min:"1000",max:"30000",step:"1000",value:u.timeout||5e3,onChange:w=>b("timeout",parseInt(w.target.value)),style:{width:"100%",padding:"8px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"12px"}})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"11px",fontWeight:500,marginBottom:"4px",color:"#6b7280"},children:"Guardar respuesta en variable"}),i.jsx("input",{type:"text",value:u.variable||"",onChange:w=>b("variable",w.target.value),style:{width:"100%",padding:"8px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"12px"},placeholder:"api_response"})]})]}),t.type==="delay"&&i.jsxs("div",{style:{marginBottom:"16px",padding:"12px",background:"#f8fafc",borderRadius:"8px",border:"1px solid #cbd5e1"},children:[i.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:600,marginBottom:"12px",color:"#475569"},children:" Configuracin de Espera"}),i.jsxs("div",{style:{marginBottom:"12px"},children:[i.jsx("label",{style:{display:"block",fontSize:"11px",fontWeight:500,marginBottom:"4px",color:"#6b7280"},children:"Segundos de espera"}),i.jsx("input",{type:"number",min:"1",max:"60",step:"1",value:u.seconds||2,onChange:w=>b("seconds",parseInt(w.target.value)),style:{width:"100%",padding:"8px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"13px"}}),i.jsx("p",{style:{fontSize:"10px",color:"#94a3b8",marginTop:"4px"},children:"Entre 1 y 60 segundos. Recomendado: 2-5 seg para parecer ms humano."})]}),i.jsx("div",{children:i.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer"},children:[i.jsx("input",{type:"checkbox",checked:u.typing_indicator!==!1,onChange:w=>b("typing_indicator",w.target.checked),style:{width:"16px",height:"16px"}}),i.jsx("span",{style:{fontSize:"12px",color:"#374151"},children:'Mostrar "escribiendo..." mientras espera'})]})})]}),i.jsx("div",{style:{marginTop:"24px",paddingTop:"16px",borderTop:"1px solid #e5e7eb"},children:i.jsx("button",{onClick:()=>s(t.id),style:{width:"100%",padding:"10px",background:"#fee2e2",border:"1px solid #fecaca",borderRadius:"6px",color:"#dc2626",cursor:"pointer",fontWeight:500,fontSize:"13px"},children:" Eliminar nodo"})})]})}function VA({isOpen:t,onClose:a}){const{nodes:s,edges:o,flowName:c}=Kr(),[u,f]=j.useState([]),[m,p]=j.useState(""),[g,y]=j.useState(null),[x,b]=j.useState({}),[S,_]=j.useState(!1),[C,N]=j.useState(null),[E,z]=j.useState("local"),[T,k]=j.useState(!1),w=j.useRef(null);j.useEffect(()=>{w.current?.scrollIntoView({behavior:"smooth"})},[u]),j.useEffect(()=>{t&&R()},[t]);const R=()=>{f([{type:"system",text:`Simulando flujo: "${c}"`},{type:"system",text:"Escribe un mensaje para iniciar..."}]),b({}),y(null),_(!0),N(null)},M=D=>s.find(P=>P.id===D),q=(D,P=null)=>{const L=o.find(W=>!(W.source!==D||P&&W.label&&W.label!==P));return L?M(L.target):null},$=()=>s.find(D=>D.type==="trigger"),G=async D=>{if(!D){Z("system"," Flujo terminado (no hay siguiente nodo)"),_(!0);return}switch(N(D.id),y(D.id),await re(300),D.type){case"trigger":Z("system"," Trigger activado");const P=q(D.id);G(P);break;case"message":const L=Q(D.data.content||"Mensaje vaco");Z("bot",L),await re(500);const W=q(D.id);G(W);break;case"question":const B=Q(D.data.content||"?");Z("bot",B),D.data.options&&D.data.options.length>0&&Z("options",D.data.options),_(!0),y(D.id);break;case"condition":Z("system"," Evaluando condicin..."),await re(300);const H=D.data.conditions||[];let te=null;for(const Ee of H){if(Ee.else){te=Ee.goto;break}const $e=Ee.if?.match(/(\w+)\s*==\s*["']?(\w+)["']?/);if($e){const[,Re,gt]=$e;if(x[Re]===gt){te=Ee.goto,Z("system",` Condicin cumplida: ${Re} = ${gt}`);break}}}const ne=M(te)||q(D.id);G(ne);break;case"action":Z("system",` Ejecutando accin: ${D.data.action||"sin definir"}`),await re(500);const se=q(D.id);G(se);break;case"ai_response":Z("system"," Generando respuesta con IA..."),k(!0),await re(1500),k(!1);const de=D.data.system_prompt||"",ue=Q(D.data.user_prompt||""),U=`[Respuesta IA simulada]
${de.substring(0,50)}...
Para: "${ue.substring(0,50)}..."`;Z("bot",U),D.data.variable&&(b(Ee=>({...Ee,[D.data.variable]:"respuesta_ia_simulada"})),Z("system",` Variable "${D.data.variable}" = respuesta IA`)),await re(300);const ce=q(D.id);G(ce);break;case"webhook":Z("system",` Llamando webhook: ${D.data.url||"URL no definida"}`),Z("system",`   Mtodo: ${D.data.method||"POST"}`),k(!0),await re(1e3),k(!1);const he={success:!0,data:{status:"ok",simulated:!0}};Z("system",` Webhook respondi: ${JSON.stringify(he).substring(0,50)}...`),D.data.variable&&b(Ee=>({...Ee,[D.data.variable]:he}));const ve=q(D.id);G(ve);break;case"delay":const pe=D.data.seconds||2,be=D.data.typing_indicator!==!1;Z("system",` Esperando ${pe} segundos...`),be&&k(!0),await re(pe*1e3),be&&k(!1);const Se=q(D.id);G(Se);break;case"transfer":Z("bot",D.data.content||"Transfiriendo a un agente..."),Z("system"," Conversacin transferida a humano"),_(!0);break;case"end":Z("system"," Flujo completado"),_(!0);break;default:Z("system",`Nodo desconocido: ${D.type}`);const Ae=q(D.id);G(Ae)}},Q=D=>D&&D.replace(/\{\{(\w+)\}\}/g,(P,L)=>x[L]||P),Z=(D,P)=>{f(L=>[...L,{type:D,text:P,time:new Date}])},re=D=>new Promise(P=>setTimeout(P,D)),V=()=>{if(!m.trim())return;const D=m.trim();p(""),Z("user",D),_(!1);const P=M(g);if(P?.type==="question"&&P.data.variable){let L=D;if(P.data.options){const W=P.data.options.find(B=>B.label.toLowerCase()===D.toLowerCase()||B.value===D);W&&(L=W.value)}b(W=>({...W,[P.data.variable]:L})),Z("system",` Variable "${P.data.variable}" = "${L}"`),setTimeout(()=>{const W=q(g);G(W)},300)}else if(!g){const L=$();L?G(L):Z("system"," No hay nodo Trigger en el flujo")}},I=D=>{p(D.label),setTimeout(()=>V(),100)},O=D=>{D.key==="Enter"&&!D.shiftKey&&(D.preventDefault(),V())};return t?i.jsxs("div",{style:{position:"fixed",right:"20px",bottom:"20px",width:"380px",height:"550px",background:"white",borderRadius:"16px",boxShadow:"0 10px 40px rgba(0,0,0,0.2)",display:"flex",flexDirection:"column",zIndex:1e3,overflow:"hidden"},children:[i.jsxs("div",{style:{background:"linear-gradient(135deg, #075E54 0%, #128C7E 100%)",color:"white",padding:"12px 16px"},children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[i.jsxs("div",{children:[i.jsx("div",{style:{fontWeight:600,fontSize:"15px"},children:" Simulador de Chat"}),i.jsx("div",{style:{fontSize:"12px",opacity:.8},children:"Prueba tu flujo aqu"})]}),i.jsxs("div",{style:{display:"flex",gap:"8px"},children:[i.jsx("button",{onClick:R,style:{background:"rgba(255,255,255,0.2)",border:"none",color:"white",padding:"6px 12px",borderRadius:"6px",cursor:"pointer",fontSize:"12px"},children:""}),i.jsx("button",{onClick:a,style:{background:"none",border:"none",color:"white",fontSize:"20px",cursor:"pointer",padding:"0 4px"},children:""})]})]}),i.jsxs("div",{style:{display:"flex",gap:"8px",background:"rgba(0,0,0,0.2)",borderRadius:"8px",padding:"4px"},children:[i.jsx("button",{onClick:()=>z("local"),style:{flex:1,background:E==="local"?"white":"transparent",color:E==="local"?"#075E54":"white",border:"none",padding:"6px 12px",borderRadius:"6px",cursor:"pointer",fontSize:"11px",fontWeight:E==="local"?600:400},children:"Local"}),i.jsx("button",{onClick:()=>z("server"),style:{flex:1,background:E==="server"?"white":"transparent",color:E==="server"?"#075E54":"white",border:"none",padding:"6px 12px",borderRadius:"6px",cursor:"pointer",fontSize:"11px",fontWeight:E==="server"?600:400},children:"Servidor"})]})]}),Object.keys(x).length>0&&i.jsxs("div",{style:{background:"#f0fdf4",padding:"8px 16px",fontSize:"11px",borderBottom:"1px solid #e5e7eb"},children:[i.jsx("strong",{children:"Variables:"})," ",Object.entries(x).map(([D,P])=>i.jsxs("span",{style:{background:"#dcfce7",padding:"2px 6px",borderRadius:"4px",marginLeft:"4px"},children:[D,"=",typeof P=="object"?JSON.stringify(P).substring(0,30)+"...":String(P)]},D))]}),i.jsxs("div",{style:{flex:1,overflowY:"auto",padding:"16px",background:"#e5ddd5",backgroundImage:'url("data:image/svg+xml,%3Csvg width="60" height="60" viewBox="0 0 60 60" xmlns="http://www.w3.org/2000/svg"%3E%3Cg fill="none" fill-rule="evenodd"%3E%3Cg fill="%239C92AC" fill-opacity="0.05"%3E%3Cpath d="M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z"/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")'},children:[u.map((D,P)=>i.jsx(YA,{message:D,onOptionClick:I},P)),T&&i.jsx("div",{style:{display:"flex",justifyContent:"flex-start",marginBottom:"8px"},children:i.jsxs("div",{style:{background:"white",padding:"12px 16px",borderRadius:"12px 12px 12px 0",boxShadow:"0 1px 2px rgba(0,0,0,0.1)",display:"flex",gap:"4px"},children:[i.jsx("span",{className:"typing-dot",style:{width:"8px",height:"8px",background:"#90a3ae",borderRadius:"50%",animation:"typing 1.4s infinite ease-in-out",animationDelay:"0s"}}),i.jsx("span",{className:"typing-dot",style:{width:"8px",height:"8px",background:"#90a3ae",borderRadius:"50%",animation:"typing 1.4s infinite ease-in-out",animationDelay:"0.2s"}}),i.jsx("span",{className:"typing-dot",style:{width:"8px",height:"8px",background:"#90a3ae",borderRadius:"50%",animation:"typing 1.4s infinite ease-in-out",animationDelay:"0.4s"}})]})}),i.jsx("div",{ref:w})]}),i.jsxs("div",{style:{padding:"12px",background:"#f0f2f5",display:"flex",gap:"8px"},children:[i.jsx("input",{type:"text",value:m,onChange:D=>p(D.target.value),onKeyPress:O,placeholder:S?"Escribe un mensaje...":"Esperando respuesta...",disabled:!S,style:{flex:1,padding:"10px 16px",border:"none",borderRadius:"24px",fontSize:"14px",outline:"none"}}),i.jsx("button",{onClick:V,disabled:!S||!m.trim(),style:{background:"#25D366",color:"white",border:"none",borderRadius:"50%",width:"40px",height:"40px",cursor:S&&m.trim()?"pointer":"not-allowed",opacity:S&&m.trim()?1:.5,fontSize:"18px"},children:""})]})]}):null}function YA({message:t,onOptionClick:a}){const{type:s,text:o}=t,c=f=>typeof f=="object"&&f!==null?JSON.stringify(f,null,2):String(f);if(s==="system")return i.jsx("div",{style:{textAlign:"center",margin:"8px 0",fontSize:"11px",color:"#667781",background:"rgba(255,255,255,0.8)",padding:"4px 12px",borderRadius:"8px",display:"inline-block",width:"100%"},children:c(o)});if(s==="options")return i.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px",margin:"8px 0"},children:o.map((f,m)=>i.jsx("button",{onClick:()=>a(f),style:{background:"white",border:"1px solid #25D366",color:"#25D366",padding:"8px 16px",borderRadius:"16px",cursor:"pointer",fontSize:"13px",fontWeight:500},children:f.label},m))});const u=s==="user";return i.jsx("div",{style:{display:"flex",justifyContent:u?"flex-end":"flex-start",marginBottom:"8px"},children:i.jsx("div",{style:{maxWidth:"80%",padding:"8px 12px",borderRadius:u?"12px 12px 0 12px":"12px 12px 12px 0",background:u?"#dcf8c6":"white",boxShadow:"0 1px 2px rgba(0,0,0,0.1)",fontSize:"14px",lineHeight:"1.4",whiteSpace:"pre-wrap"},children:c(o)})})}const rh=[{title:"Bienvenido al Flow Builder!",description:"Crea flujos de conversacin para tu chatbot de WhatsApp de forma visual, sin escribir cdigo.",icon:"",image:null},{title:"Arrastra nodos al canvas",description:"En la barra izquierda encontrars los nodos disponibles. Arrstralos al canvas para construir tu flujo.",icon:"",tips:[" Mensaje: Enva un texto al usuario"," Pregunta: Espera una respuesta del usuario"," Condicin: Bifurca el flujo segn una variable"," Accin: Ejecuta una accin (notificar, guardar, etc.)"]},{title:"Conecta los nodos",description:"Arrastra desde el punto verde (salida) de un nodo hasta el punto gris (entrada) de otro para conectarlos.",icon:"",tips:["El flujo siempre empieza en el Trigger","Puedes tener mltiples caminos con Condiciones","Termina con un nodo Fin o Transferir"]},{title:"Configura cada nodo",description:"Haz clic en un nodo para ver sus propiedades a la derecha. Ah puedes editar el contenido, opciones y variables.",icon:"",tips:["Usa {{variable}} para insertar datos dinmicos","Las preguntas guardan la respuesta en una variable","Las condiciones evalan esas variables"]},{title:"Guarda y activa!",description:"Cuando termines, guarda tu flujo y actvalo para que empiece a responder mensajes automticamente.",icon:"",tips:["Puedes tener varios flujos, pero solo algunos activos",'Usa "Abrir" para cargar flujos guardados',"Las plantillas te dan flujos de ejemplo para empezar"]}];function PA({onComplete:t}){const[a,s]=j.useState(0),[o,c]=j.useState(!1),u=rh[a],f=a===rh.length-1,m=()=>{f?c(!0):s(a+1)},p=()=>{t(null)},g=y=>{t(y)};return o?i.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:i.jsxs("div",{style:{background:"white",borderRadius:"16px",padding:"32px",maxWidth:"600px",width:"90%"},children:[i.jsx("h2",{style:{margin:"0 0 8px 0",fontSize:"24px"},children:"Cmo quieres empezar?"}),i.jsx("p",{style:{color:"#6b7280",margin:"0 0 24px 0"},children:"Puedes empezar desde cero o usar una plantilla predefinida"}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:[i.jsx(pc,{icon:"",title:"Empezar vaco",description:"Canvas en blanco para crear tu propio flujo",onClick:()=>g(null)}),i.jsx(pc,{icon:"",title:"Embudo de Ventas",description:"Califica leads y gualos a la compra",onClick:()=>g("sales_funnel"),color:"#25D366"}),i.jsx(pc,{icon:"",title:"Embudo de Soporte",description:"Resuelve dudas con FAQ y escala a humanos",onClick:()=>g("support_funnel"),color:"#34B7F1"}),i.jsx(pc,{icon:"",title:"Captura de Leads",description:"Recolecta informacin de contacto",onClick:()=>g("lead_capture"),color:"#f59e0b"})]}),i.jsx("button",{onClick:()=>g(null),style:{marginTop:"16px",padding:"8px",background:"none",border:"none",color:"#6b7280",cursor:"pointer",fontSize:"13px",width:"100%"},children:"Saltar y empezar vaco "})]})}):i.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:i.jsxs("div",{style:{background:"white",borderRadius:"16px",padding:"32px",maxWidth:"500px",width:"90%",textAlign:"center"},children:[i.jsx("div",{style:{display:"flex",justifyContent:"center",gap:"8px",marginBottom:"24px"},children:rh.map((y,x)=>i.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:x===a?"#25D366":"#e5e7eb",transition:"background 0.2s"}},x))}),i.jsx("div",{style:{fontSize:"64px",marginBottom:"16px"},children:u.icon}),i.jsx("h2",{style:{margin:"0 0 12px 0",fontSize:"24px",color:"#111827"},children:u.title}),i.jsx("p",{style:{color:"#6b7280",margin:"0 0 20px 0",lineHeight:"1.6"},children:u.description}),u.tips&&i.jsx("div",{style:{background:"#f9fafb",borderRadius:"8px",padding:"16px",textAlign:"left",marginBottom:"24px"},children:u.tips.map((y,x)=>i.jsx("div",{style:{fontSize:"13px",color:"#4b5563",marginBottom:x<u.tips.length-1?"8px":0},children:y},x))}),i.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"center"},children:[i.jsx("button",{onClick:p,style:{padding:"12px 24px",background:"white",border:"1px solid #d1d5db",borderRadius:"8px",cursor:"pointer",fontSize:"14px",color:"#6b7280"},children:"Saltar"}),i.jsx("button",{onClick:m,style:{padding:"12px 24px",background:"#25D366",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"14px",fontWeight:500},children:f?"Empezar":"Siguiente"})]})]})})}function pc({icon:t,title:a,description:s,onClick:o,color:c}){return i.jsxs("div",{onClick:o,style:{padding:"16px",border:"2px solid #e5e7eb",borderRadius:"12px",cursor:"pointer",transition:"all 0.2s",textAlign:"left"},onMouseOver:u=>{u.currentTarget.style.borderColor=c||"#25D366",u.currentTarget.style.transform="translateY(-2px)"},onMouseOut:u=>{u.currentTarget.style.borderColor="#e5e7eb",u.currentTarget.style.transform="none"},children:[i.jsx("div",{style:{fontSize:"28px",marginBottom:"8px"},children:t}),i.jsx("div",{style:{fontWeight:600,fontSize:"14px",marginBottom:"4px"},children:a}),i.jsx("div",{style:{fontSize:"12px",color:"#6b7280"},children:s})]})}function XA(){const{id:t}=$j(),[a,s]=j.useState(!1),[o,c]=j.useState(!1),[u,f]=j.useState(null),[m,p]=j.useState(!1),{loadFlow:g}=Kr();j.useEffect(()=>{t?y(t):localStorage.getItem("flowbuilder_onboarding_seen")||c(!0)},[t]);const y=async S=>{p(!0);try{const _=await yh(S);if(_.flow)g(_.flow),x(`Flujo "${_.flow.name}" cargado correctamente`,"success");else throw new Error("No se pudo obtener los datos del flujo")}catch(_){console.error("Error loading flow:",_),x(`Error al cargar flujo: ${_.message}`,"error")}finally{p(!1)}},x=(S,_="info")=>{f({message:S,type:_}),setTimeout(()=>f(null),4e3)},b=async S=>{if(localStorage.setItem("flowbuilder_onboarding_seen","true"),c(!1),S){p(!0);try{console.log("Creating flow from template:",S);const _=await Kb(S,null);if(console.log("Template created, result:",_),_.id){const C=await yh(_.id);if(console.log("Flow data loaded:",C),C.flow)g(C.flow),x(`Flujo "${C.flow.name}" cargado correctamente`,"success");else throw new Error("No se pudo obtener los datos del flujo")}else throw new Error("No se recibi el ID del flujo creado")}catch(_){console.error("Error loading template:",_),x(`Error al cargar template: ${_.message}`,"error")}finally{p(!1)}}};return i.jsxs("div",{style:{display:"flex",flexDirection:"column",height:"100vh",overflow:"hidden"},children:[i.jsx(zA,{onTestClick:()=>s(!0)}),i.jsxs("div",{style:{display:"flex",flex:1,overflow:"hidden"},children:[i.jsx(DA,{}),i.jsx(HA,{}),i.jsx(qA,{})]}),i.jsxs("button",{onClick:()=>s(!0),style:{position:"fixed",right:"20px",bottom:"20px",background:"linear-gradient(135deg, #075E54 0%, #25D366 100%)",color:"white",border:"none",borderRadius:"50px",padding:"14px 24px",cursor:"pointer",boxShadow:"0 4px 15px rgba(37, 211, 102, 0.4)",fontSize:"14px",fontWeight:600,display:a?"none":"flex",alignItems:"center",gap:"8px",zIndex:100},children:[i.jsx("span",{style:{fontSize:"18px"},children:""}),"Probar flujo"]}),m&&i.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1001},children:i.jsxs("div",{style:{background:"white",padding:"24px 32px",borderRadius:"12px",display:"flex",alignItems:"center",gap:"12px"},children:[i.jsx("div",{style:{width:"24px",height:"24px",border:"3px solid #e5e7eb",borderTop:"3px solid #25D366",borderRadius:"50%",animation:"spin 1s linear infinite"}}),i.jsx("span",{children:"Cargando flujo..."})]})}),u&&i.jsxs("div",{style:{position:"fixed",top:"20px",right:"20px",padding:"12px 20px",borderRadius:"8px",background:u.type==="success"?"#10b981":u.type==="error"?"#ef4444":"#3b82f6",color:"white",fontWeight:500,boxShadow:"0 4px 12px rgba(0,0,0,0.15)",zIndex:1002,animation:"slideIn 0.3s ease"},children:[u.type==="success"&&" ",u.type==="error"&&" ",u.message]}),i.jsx(VA,{isOpen:a,onClose:()=>s(!1)}),o&&i.jsx(PA,{onComplete:b})]})}const vm="/api/flow-logs";async function wm(t,a){if(!t.ok){let s=a;try{const o=await t.json();o.error&&(s=o.error)}catch{}throw new Error(s)}return t.json()}async function IA(t={}){const a=new URLSearchParams(t).toString(),s=await fetch(`${vm}?${a}`);return wm(s,"Error al cargar logs")}async function GA(t){const a=await fetch(`${vm}/${t}`);return wm(a,"Log no encontrado")}async function QA(t=7){const a=await fetch(`${vm}/stats/summary?days=${t}`);return wm(a,"Error al cargar estadsticas")}const Ji={completed:{label:"Completado",color:"#10b981",icon:zc},failed:{label:"Fallido",color:"#ef4444",icon:Ih},transferred:{label:"Transferido",color:"#f59e0b",icon:qh},running:{label:"En progreso",color:"#3b82f6",icon:zs},timeout:{label:"Timeout",color:"#6b7280",icon:Rc}};function ZA(){const[t,a]=j.useState([]),[s,o]=j.useState(null),[c,u]=j.useState(!0),[f,m]=j.useState(null),[p,g]=j.useState(!1),[y,x]=j.useState({status:"",phone:"",flow_id:""});j.useEffect(()=>{b()},[]);const b=async()=>{u(!0);try{const[N,E]=await Promise.all([IA({limit:50,...y}),QA(7)]);a(N.logs||[]),o(E.stats)}catch(N){console.error("Error loading logs:",N)}finally{u(!1)}},S=async N=>{g(!0);try{const E=await GA(N.id);m(E.log)}catch(E){console.error("Error loading log detail:",E)}finally{g(!1)}},_=(N,E)=>{x(z=>({...z,[N]:E}))},C=()=>{b()};return c?i.jsx("div",{className:"p-8 flex items-center justify-center h-full",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-500"})}):i.jsxs("div",{className:"p-8",children:[i.jsxs("div",{className:"flex items-center justify-between mb-8",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Logs de Ejecucin"}),i.jsx("p",{className:"text-gray-500 mt-1",children:"Historial de ejecucin de flujos"})]}),i.jsxs("button",{onClick:b,className:"flex items-center gap-2 px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg text-gray-700 transition",children:[i.jsx(wo,{className:"w-4 h-4"}),"Actualizar"]})]}),s&&i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8",children:[i.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-100 shadow-sm",children:[i.jsx("p",{className:"text-sm text-gray-500",children:"Total ejecuciones"}),i.jsx("p",{className:"text-2xl font-bold text-gray-800",children:s.total_executions||0}),i.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"ltimos 7 das"})]}),i.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-100 shadow-sm",children:[i.jsx("p",{className:"text-sm text-gray-500",children:"Tasa de completado"}),i.jsxs("p",{className:"text-2xl font-bold text-green-600",children:[s.completion_rate||0,"%"]}),i.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:[s.completed||0," completados"]})]}),i.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-100 shadow-sm",children:[i.jsx("p",{className:"text-sm text-gray-500",children:"Fallidos"}),i.jsx("p",{className:"text-2xl font-bold text-red-500",children:s.failed||0}),i.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Requieren atencin"})]}),i.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-100 shadow-sm",children:[i.jsx("p",{className:"text-sm text-gray-500",children:"Tiempo promedio"}),i.jsx("p",{className:"text-2xl font-bold text-blue-600",children:s.avg_duration_ms?`${Math.round(s.avg_duration_ms)}ms`:"-"}),i.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Por ejecucin"})]})]}),i.jsx("div",{className:"bg-white rounded-xl p-4 border border-gray-100 shadow-sm mb-6",children:i.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Zh,{className:"w-4 h-4 text-gray-400"}),i.jsx("span",{className:"text-sm text-gray-600",children:"Filtrar:"})]}),i.jsxs("select",{value:y.status,onChange:N=>_("status",N.target.value),className:"px-3 py-2 border border-gray-200 rounded-lg text-sm focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none",children:[i.jsx("option",{value:"",children:"Todos los estados"}),i.jsx("option",{value:"completed",children:"Completados"}),i.jsx("option",{value:"failed",children:"Fallidos"}),i.jsx("option",{value:"transferred",children:"Transferidos"}),i.jsx("option",{value:"running",children:"En progreso"})]}),i.jsx("input",{type:"text",value:y.phone,onChange:N=>_("phone",N.target.value),placeholder:"Telfono...",className:"px-3 py-2 border border-gray-200 rounded-lg text-sm focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none w-40"}),i.jsx("button",{onClick:C,className:"px-4 py-2 bg-green-500 hover:bg-green-600 text-white rounded-lg text-sm transition",children:"Aplicar"})]})}),i.jsx("div",{className:"bg-white rounded-xl border border-gray-100 shadow-sm overflow-hidden",children:t.length===0?i.jsxs("div",{className:"p-12 text-center text-gray-400",children:[i.jsx(zs,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),i.jsx("p",{children:"No hay logs de ejecucin"}),i.jsx("p",{className:"text-sm mt-1",children:"Los logs aparecern cuando se ejecuten flujos"})]}):i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"bg-gray-50 text-left text-xs text-gray-500 uppercase tracking-wider",children:[i.jsx("th",{className:"px-4 py-3",children:"Fecha"}),i.jsx("th",{className:"px-4 py-3",children:"Flujo"}),i.jsx("th",{className:"px-4 py-3",children:"Telfono"}),i.jsx("th",{className:"px-4 py-3",children:"Estado"}),i.jsx("th",{className:"px-4 py-3",children:"Nodos"}),i.jsx("th",{className:"px-4 py-3",children:"Duracin"}),i.jsx("th",{className:"px-4 py-3"})]})}),i.jsx("tbody",{className:"divide-y divide-gray-100",children:t.map(N=>{const E=Ji[N.status]||Ji.running,z=E.icon;return i.jsxs("tr",{className:"hover:bg-gray-50 transition",children:[i.jsxs("td",{className:"px-4 py-3 text-sm",children:[i.jsx("div",{className:"text-gray-800",children:tu(new Date(N.started_at),"dd/MM HH:mm")}),i.jsx("div",{className:"text-xs text-gray-400",children:Fr(new Date(N.started_at),{addSuffix:!0,locale:as})})]}),i.jsxs("td",{className:"px-4 py-3",children:[i.jsx("div",{className:"font-medium text-gray-800",children:N.flow_name||"Sin nombre"}),i.jsx("div",{className:"text-xs text-gray-400",children:N.trigger_type})]}),i.jsx("td",{className:"px-4 py-3",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Wc,{className:"w-3 h-3 text-gray-400"}),i.jsx("span",{className:"text-sm text-gray-700",children:N.phone})]})}),i.jsx("td",{className:"px-4 py-3",children:i.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium",style:{background:`${E.color}20`,color:E.color},children:[i.jsx(z,{className:"w-3 h-3"}),E.label]})}),i.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:N.total_nodes_executed||0}),i.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:N.total_duration_ms?`${Math.round(N.total_duration_ms)}ms`:"-"}),i.jsx("td",{className:"px-4 py-3",children:i.jsx("button",{onClick:()=>S(N),className:"p-2 hover:bg-gray-100 rounded-lg transition",title:"Ver detalle",children:i.jsx(Xh,{className:"w-4 h-4 text-gray-400"})})})]},N.id)})})]})}),f&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:()=>m(null),children:i.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-2xl max-h-[80vh] overflow-auto m-4",onClick:N=>N.stopPropagation(),children:[i.jsxs("div",{className:"p-4 border-b border-gray-200 flex items-center justify-between sticky top-0 bg-white",children:[i.jsx("h3",{className:"font-semibold text-gray-800",children:"Detalle de Ejecucin"}),i.jsx("button",{onClick:()=>m(null),className:"p-2 hover:bg-gray-100 rounded-lg",children:i.jsx(es,{className:"w-4 h-4"})})]}),p?i.jsx("div",{className:"p-8 text-center",children:i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-green-500 mx-auto"})}):i.jsxs("div",{className:"p-4 space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-400 mb-1",children:"Flujo"}),i.jsx("p",{className:"font-medium",children:f.flow_name})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-400 mb-1",children:"Telfono"}),i.jsx("p",{className:"font-medium",children:f.phone})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-400 mb-1",children:"Mensaje trigger"}),i.jsx("p",{className:"text-sm bg-gray-100 p-2 rounded",children:f.trigger_message||"-"})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-400 mb-1",children:"Estado final"}),i.jsx("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium",style:{background:`${Ji[f.status]?.color}20`,color:Ji[f.status]?.color},children:Ji[f.status]?.label})]})]}),f.variables&&Object.keys(f.variables).length>0&&i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-400 mb-2",children:"Variables capturadas"}),i.jsx("div",{className:"bg-gray-50 rounded-lg p-3 space-y-1",children:Object.entries(f.variables).map(([N,E])=>i.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[i.jsxs("span",{className:"font-mono text-purple-600",children:[N,":"]}),i.jsx("span",{className:"text-gray-700",children:String(E)})]},N))})]}),f.steps&&f.steps.length>0&&i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-400 mb-2",children:"Nodos ejecutados"}),i.jsx("div",{className:"space-y-2",children:f.steps.map((N,E)=>i.jsxs("div",{className:"flex items-start gap-3 p-3 bg-gray-50 rounded-lg",children:[i.jsx("div",{className:"w-6 h-6 rounded-full bg-green-100 text-green-600 flex items-center justify-center text-xs font-medium",children:E+1}),i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"font-medium text-sm",children:N.node_id}),i.jsx("span",{className:"text-xs px-2 py-0.5 bg-gray-200 rounded text-gray-600",children:N.node_type}),i.jsxs("span",{className:"text-xs text-gray-400",children:[N.duration_ms,"ms"]})]}),N.output&&i.jsx("p",{className:"text-sm text-gray-600 mt-1 break-words",children:N.output})]})]},E))})]}),f.error_message&&i.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:[i.jsx("p",{className:"text-xs text-red-600 font-medium mb-1",children:"Error"}),i.jsx("p",{className:"text-sm text-red-700",children:f.error_message}),f.error_node_id&&i.jsxs("p",{className:"text-xs text-red-500 mt-1",children:["En nodo: ",f.error_node_id]})]})]})]})})]})}const gu="/api/leads";async function xu(t,a){if(!t.ok){let s=a;try{const o=await t.json();o.error&&(s=o.error)}catch{}throw new Error(s)}return t.json()}async function FA(t={}){const a=new URLSearchParams(t).toString(),s=await fetch(`${gu}?${a}`);return xu(s,"Error al cargar leads")}async function WA(){const t=await fetch(`${gu}/stats`);return xu(t,"Error al cargar estadsticas")}async function KA(t,a){const s=await fetch(`${gu}/${encodeURIComponent(t)}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});return xu(s,"Error al actualizar lead")}async function JA(t,a,s){const o=await fetch(`${gu}/${encodeURIComponent(t)}/adjust-score`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({adjustment:a,reason:s})});return xu(o,"Error al ajustar score")}const gc={new:{label:"Nuevo",color:"#6b7280",bg:"#f3f4f6"},engaged:{label:"Interesado",color:"#3b82f6",bg:"#dbeafe"},qualified:{label:"Calificado",color:"#10b981",bg:"#d1fae5"},customer:{label:"Cliente",color:"#8b5cf6",bg:"#ede9fe"},inactive:{label:"Inactivo",color:"#9ca3af",bg:"#f9fafb"}},Fy={hot:{color:"#ef4444",label:"Caliente",range:"80-100"},warm:{color:"#f59e0b",label:"Tibio",range:"50-79"},cold:{color:"#3b82f6",label:"Fro",range:"20-49"},new:{color:"#6b7280",label:"Nuevo",range:"0-19"}};function ek(t){return t>=80?"hot":t>=50?"warm":t>=20?"cold":"new"}function tk(){const t=$s(),[a,s]=j.useState([]),[o,c]=j.useState(null),[u,f]=j.useState(!0),[m,p]=j.useState(null),[g,y]=j.useState({status:"",min_score:"",search:"",sort_by:"current_score",sort_dir:"desc"});j.useEffect(()=>{x()},[]);const x=async()=>{f(!0);try{const[N,E]=await Promise.all([FA({limit:100,...g}),WA()]);s(N.leads||[]),c(E)}catch(N){console.error("Error loading leads:",N)}finally{f(!1)}},b=(N,E)=>{y(z=>({...z,[N]:E}))},S=()=>{x()},_=async(N,E)=>{try{await KA(N,{status:E}),x()}catch(z){console.error("Error updating lead:",z)}},C=async(N,E)=>{try{await JA(N,E,"Manual adjustment"),x()}catch(z){console.error("Error adjusting score:",z)}};return u?i.jsx("div",{className:"p-8 flex items-center justify-center h-full",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-500"})}):i.jsxs("div",{className:"p-8",children:[i.jsxs("div",{className:"flex items-center justify-between mb-8",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Gestin de Leads"}),i.jsx("p",{className:"text-gray-500 mt-1",children:"Administra y califica tus leads"})]}),i.jsxs("button",{onClick:x,className:"flex items-center gap-2 px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg text-gray-700 transition",children:[i.jsx(wo,{className:"w-4 h-4"}),"Actualizar"]})]}),o&&i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 mb-8",children:[i.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-100 shadow-sm",children:[i.jsx("p",{className:"text-sm text-gray-500",children:"Total Leads"}),i.jsx("p",{className:"text-2xl font-bold text-gray-800",children:o.stats?.total_leads||0})]}),i.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-100 shadow-sm",children:[i.jsx("p",{className:"text-sm text-gray-500",children:"Score Promedio"}),i.jsx("p",{className:"text-2xl font-bold text-blue-600",children:o.stats?.avg_score||0})]}),i.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-100 shadow-sm",children:[i.jsx("p",{className:"text-sm text-gray-500",children:"Nuevos"}),i.jsx("p",{className:"text-2xl font-bold text-gray-600",children:o.stats?.new_leads||0})]}),i.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-100 shadow-sm",children:[i.jsx("p",{className:"text-sm text-gray-500",children:"Calificados"}),i.jsx("p",{className:"text-2xl font-bold text-green-600",children:o.stats?.qualified_leads||0})]}),i.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-100 shadow-sm",children:[i.jsx("p",{className:"text-sm text-gray-500",children:"Clientes"}),i.jsx("p",{className:"text-2xl font-bold text-purple-600",children:o.stats?.customers||0})]})]}),o?.score_distribution&&i.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-100 shadow-sm mb-6",children:[i.jsx("p",{className:"text-sm font-medium text-gray-700 mb-3",children:"Distribucin de Scores"}),i.jsx("div",{className:"flex gap-4",children:Object.entries(Fy).map(([N,E])=>{const z=o.score_distribution.find(T=>T.category===N)?.count||0;return i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-3 h-3 rounded-full",style:{background:E.color}}),i.jsxs("span",{className:"text-sm text-gray-600",children:[E.label,": ",i.jsx("strong",{children:z})]})]},N)})})]}),i.jsx("div",{className:"bg-white rounded-xl p-4 border border-gray-100 shadow-sm mb-6",children:i.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Zh,{className:"w-4 h-4 text-gray-400"}),i.jsx("span",{className:"text-sm text-gray-600",children:"Filtrar:"})]}),i.jsxs("div",{className:"relative",children:[i.jsx(_b,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),i.jsx("input",{type:"text",value:g.search,onChange:N=>b("search",N.target.value),placeholder:"Buscar...",className:"pl-10 pr-4 py-2 border border-gray-200 rounded-lg text-sm focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none w-48"})]}),i.jsxs("select",{value:g.status,onChange:N=>b("status",N.target.value),className:"px-3 py-2 border border-gray-200 rounded-lg text-sm focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none",children:[i.jsx("option",{value:"",children:"Todos los estados"}),Object.entries(gc).map(([N,E])=>i.jsx("option",{value:N,children:E.label},N))]}),i.jsxs("select",{value:g.min_score,onChange:N=>b("min_score",N.target.value),className:"px-3 py-2 border border-gray-200 rounded-lg text-sm focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none",children:[i.jsx("option",{value:"",children:"Todos los scores"}),i.jsx("option",{value:"80",children:"Score 80+ (Caliente)"}),i.jsx("option",{value:"50",children:"Score 50+ (Tibio)"}),i.jsx("option",{value:"20",children:"Score 20+ (Fro)"})]}),i.jsxs("select",{value:`${g.sort_by}-${g.sort_dir}`,onChange:N=>{const[E,z]=N.target.value.split("-");b("sort_by",E),b("sort_dir",z)},className:"px-3 py-2 border border-gray-200 rounded-lg text-sm focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none",children:[i.jsx("option",{value:"current_score-desc",children:"Mayor score"}),i.jsx("option",{value:"current_score-asc",children:"Menor score"}),i.jsx("option",{value:"last_interaction-desc",children:"Ms reciente"}),i.jsx("option",{value:"total_messages-desc",children:"Ms mensajes"})]}),i.jsx("button",{onClick:S,className:"px-4 py-2 bg-green-500 hover:bg-green-600 text-white rounded-lg text-sm transition",children:"Aplicar"})]})}),i.jsx("div",{className:"bg-white rounded-xl border border-gray-100 shadow-sm overflow-hidden",children:a.length===0?i.jsxs("div",{className:"p-12 text-center text-gray-400",children:[i.jsx(Jc,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),i.jsx("p",{children:"No hay leads registrados"}),i.jsx("p",{className:"text-sm mt-1",children:"Los leads se crean automticamente cuando interactan"})]}):i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"bg-gray-50 text-left text-xs text-gray-500 uppercase tracking-wider",children:[i.jsx("th",{className:"px-4 py-3",children:"Lead"}),i.jsx("th",{className:"px-4 py-3",children:"Score"}),i.jsx("th",{className:"px-4 py-3",children:"Estado"}),i.jsx("th",{className:"px-4 py-3",children:"Mensajes"}),i.jsx("th",{className:"px-4 py-3",children:"ltima actividad"}),i.jsx("th",{className:"px-4 py-3",children:"Acciones"})]})}),i.jsx("tbody",{className:"divide-y divide-gray-100",children:a.map(N=>{const E=ek(N.current_score),z=Fy[E],T=gc[N.status]||gc.new;return i.jsxs("tr",{className:"hover:bg-gray-50 transition",children:[i.jsx("td",{className:"px-4 py-3",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center",children:i.jsx("span",{className:"text-green-600 font-medium",children:N.contact_name?.[0]?.toUpperCase()||N.phone.slice(-2)})}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium text-gray-800",children:N.contact_name||"Sin nombre"}),i.jsxs("div",{className:"text-xs text-gray-400 flex items-center gap-1",children:[i.jsx(Wc,{className:"w-3 h-3"}),N.phone]})]})]})}),i.jsx("td",{className:"px-4 py-3",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center font-bold text-sm",style:{background:`${z.color}20`,color:z.color},children:N.current_score}),i.jsxs("div",{className:"flex flex-col gap-0.5",children:[i.jsx("button",{onClick:()=>C(N.phone,5),className:"p-1 hover:bg-green-100 rounded text-green-600",title:"+5 puntos",children:i.jsx(Fh,{className:"w-3 h-3"})}),i.jsx("button",{onClick:()=>C(N.phone,-5),className:"p-1 hover:bg-red-100 rounded text-red-600",title:"-5 puntos",children:i.jsx(HS,{className:"w-3 h-3"})})]})]})}),i.jsx("td",{className:"px-4 py-3",children:i.jsx("select",{value:N.status,onChange:k=>_(N.phone,k.target.value),className:"px-2 py-1 rounded-full text-xs font-medium border-0 cursor-pointer",style:{background:T.bg,color:T.color},children:Object.entries(gc).map(([k,w])=>i.jsx("option",{value:k,children:w.label},k))})}),i.jsx("td",{className:"px-4 py-3",children:i.jsxs("div",{className:"flex items-center gap-1 text-sm text-gray-600",children:[i.jsx(Ln,{className:"w-4 h-4"}),N.total_messages||N.message_count||0]})}),i.jsx("td",{className:"px-4 py-3 text-sm text-gray-500",children:N.last_interaction?Fr(new Date(N.last_interaction),{addSuffix:!0,locale:as}):"-"}),i.jsx("td",{className:"px-4 py-3",children:i.jsx("button",{onClick:()=>t(`/conversations?phone=${encodeURIComponent(N.phone)}`),className:"p-2 hover:bg-gray-100 rounded-lg transition",title:"Ver conversacin",children:i.jsx(Xh,{className:"w-4 h-4 text-gray-400"})})})]},N.phone)})})]})})]})}const ko="/api/flow-analytics";async function zo(t,a){if(!t.ok){let s=a;try{const o=await t.json();o.error&&(s=o.error)}catch{}throw new Error(s)}return t.json()}async function nk(t=7){const a=await fetch(`${ko}/summary?days=${t}`);return zo(a,"Error al cargar resumen")}async function ak(t=14){const a=await fetch(`${ko}/timeline?days=${t}`);return zo(a,"Error al cargar timeline")}async function sk(t=7){const a=await fetch(`${ko}/by-flow?days=${t}`);return zo(a,"Error al cargar mtricas por flujo")}async function rk(t=7){const a=await fetch(`${ko}/by-hour?days=${t}`);return zo(a,"Error al cargar distribucin horaria")}async function ik(t=7){const a=await fetch(`${ko}/trigger-types?days=${t}`);return zo(a,"Error al cargar tipos de trigger")}function ok(){const[t,a]=j.useState(null),[s,o]=j.useState([]),[c,u]=j.useState([]),[f,m]=j.useState([]),[p,g]=j.useState([]),[y,x]=j.useState(!0),[b,S]=j.useState(7);j.useEffect(()=>{_()},[b]);const _=async()=>{x(!0);try{const[E,z,T,k,w]=await Promise.all([nk(b),ak(b),sk(b),rk(b),ik(b)]);a(E.summary),o(z.timeline||[]),u(T.flows||[]),m(k.hourly||[]),g(w.trigger_types||[])}catch(E){console.error("Error loading analytics:",E)}finally{x(!1)}};if(y)return i.jsx("div",{className:"p-8 flex items-center justify-center h-full",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-500"})});const C=Math.max(...s.map(E=>E.total),1),N=Math.max(...f.map(E=>E.executions),1);return i.jsxs("div",{className:"p-8",children:[i.jsxs("div",{className:"flex items-center justify-between mb-8",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Analytics de Flujos"}),i.jsx("p",{className:"text-gray-500 mt-1",children:"Mtricas y anlisis de rendimiento"})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("select",{value:b,onChange:E=>S(parseInt(E.target.value)),className:"px-3 py-2 border border-gray-200 rounded-lg text-sm focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none",children:[i.jsx("option",{value:7,children:"ltimos 7 das"}),i.jsx("option",{value:14,children:"ltimos 14 das"}),i.jsx("option",{value:30,children:"ltimos 30 das"})]}),i.jsxs("button",{onClick:_,className:"flex items-center gap-2 px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg text-gray-700 transition",children:[i.jsx(wo,{className:"w-4 h-4"}),"Actualizar"]})]})]}),t&&i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[i.jsx("div",{className:"bg-white rounded-xl p-5 border border-gray-100 shadow-sm",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-500",children:"Total Ejecuciones"}),i.jsx("p",{className:"text-3xl font-bold text-gray-800 mt-1",children:t.executions.total}),i.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:[t.executions.unique_users," usuarios nicos"]})]}),i.jsx("div",{className:"p-3 bg-blue-50 rounded-xl",children:i.jsx(zs,{className:"w-6 h-6 text-blue-600"})})]})}),i.jsx("div",{className:"bg-white rounded-xl p-5 border border-gray-100 shadow-sm",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-500",children:"Tasa de Completado"}),i.jsxs("p",{className:"text-3xl font-bold text-green-600 mt-1",children:[t.executions.completion_rate,"%"]}),i.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:[t.executions.completed," completados"]})]}),i.jsx("div",{className:"p-3 bg-green-50 rounded-xl",children:i.jsx(zc,{className:"w-6 h-6 text-green-600"})})]})}),i.jsx("div",{className:"bg-white rounded-xl p-5 border border-gray-100 shadow-sm",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-500",children:"Fallidos"}),i.jsx("p",{className:"text-3xl font-bold text-red-500 mt-1",children:t.executions.failed}),i.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:[t.executions.transferred," transferidos"]})]}),i.jsx("div",{className:"p-3 bg-red-50 rounded-xl",children:i.jsx(Ih,{className:"w-6 h-6 text-red-500"})})]})}),i.jsx("div",{className:"bg-white rounded-xl p-5 border border-gray-100 shadow-sm",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-500",children:"Tiempo Promedio"}),i.jsxs("p",{className:"text-3xl font-bold text-purple-600 mt-1",children:[t.executions.avg_duration_ms,"ms"]}),i.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:[t.executions.avg_nodes," nodos promedio"]})]}),i.jsx("div",{className:"p-3 bg-purple-50 rounded-xl",children:i.jsx(Rc,{className:"w-6 h-6 text-purple-600"})})]})})]}),i.jsxs("div",{className:"bg-white rounded-xl border border-gray-100 shadow-sm p-6 mb-6",children:[i.jsxs("h3",{className:"font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[i.jsx(Dc,{className:"w-5 h-5 text-gray-400"}),"Ejecuciones por da"]}),s.length===0?i.jsx("div",{className:"text-center text-gray-400 py-8",children:"No hay datos para mostrar"}):i.jsx("div",{className:"flex items-end gap-2 h-40",children:s.map((E,z)=>i.jsxs("div",{className:"flex-1 flex flex-col items-center",children:[i.jsxs("div",{className:"w-full flex flex-col gap-0.5",style:{height:"120px"},children:[i.jsx("div",{className:"w-full bg-green-500 rounded-t",style:{height:`${E.completed/C*100}%`},title:`Completados: ${E.completed}`}),i.jsx("div",{className:"w-full bg-red-400",style:{height:`${E.failed/C*100}%`},title:`Fallidos: ${E.failed}`}),i.jsx("div",{className:"w-full bg-yellow-400 rounded-b",style:{height:`${E.transferred/C*100}%`},title:`Transferidos: ${E.transferred}`})]}),i.jsx("div",{className:"text-xs text-gray-400 mt-2",children:tu(new Date(E.date),"dd/MM")})]},z))}),i.jsxs("div",{className:"flex items-center gap-4 mt-4 pt-4 border-t border-gray-100",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-3 h-3 rounded bg-green-500"}),i.jsx("span",{className:"text-xs text-gray-500",children:"Completados"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-3 h-3 rounded bg-red-400"}),i.jsx("span",{className:"text-xs text-gray-500",children:"Fallidos"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-3 h-3 rounded bg-yellow-400"}),i.jsx("span",{className:"text-xs text-gray-500",children:"Transferidos"})]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[i.jsxs("div",{className:"bg-white rounded-xl border border-gray-100 shadow-sm p-6",children:[i.jsxs("h3",{className:"font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[i.jsx(Nb,{className:"w-5 h-5 text-gray-400"}),"Rendimiento por Flujo"]}),c.length===0?i.jsx("div",{className:"text-center text-gray-400 py-8",children:"No hay flujos configurados"}):i.jsx("div",{className:"space-y-3",children:c.slice(0,5).map((E,z)=>i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-gray-100 flex items-center justify-center text-sm font-medium text-gray-600",children:z+1}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("p",{className:"font-medium text-gray-800 truncate",children:E.flow_name}),i.jsxs("span",{className:"text-sm text-gray-500",children:[E.recent_executions," ejecuciones"]})]}),i.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[i.jsx("div",{className:"flex-1 h-2 bg-gray-100 rounded-full overflow-hidden",children:i.jsx("div",{className:"h-full bg-green-500",style:{width:`${E.completion_rate}%`}})}),i.jsxs("span",{className:"text-xs text-gray-400",children:[E.completion_rate,"%"]})]})]})]},E.flow_id))}),i.jsx(As,{to:"/flows",className:"block text-center text-sm text-green-600 hover:text-green-700 mt-4 pt-4 border-t border-gray-100",children:"Ver todos los flujos"})]}),i.jsxs("div",{className:"bg-white rounded-xl border border-gray-100 shadow-sm p-6",children:[i.jsxs("h3",{className:"font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[i.jsx(Rc,{className:"w-5 h-5 text-gray-400"}),"Actividad por Hora"]}),i.jsx("div",{className:"flex items-end gap-1 h-32",children:f.map((E,z)=>i.jsx("div",{className:"flex-1 bg-blue-500 rounded-t transition-all hover:bg-blue-600",style:{height:`${E.executions/N*100}%`,minHeight:E.executions>0?"4px":"0"},title:`${E.hour}:00 - ${E.executions} ejecuciones`},z))}),i.jsxs("div",{className:"flex justify-between text-xs text-gray-400 mt-2",children:[i.jsx("span",{children:"00:00"}),i.jsx("span",{children:"06:00"}),i.jsx("span",{children:"12:00"}),i.jsx("span",{children:"18:00"}),i.jsx("span",{children:"23:00"})]})]})]}),i.jsxs("div",{className:"bg-white rounded-xl border border-gray-100 shadow-sm p-6",children:[i.jsxs("h3",{className:"font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[i.jsx(Ph,{className:"w-5 h-5 text-gray-400"}),"Distribucin por Tipo de Trigger"]}),p.length===0?i.jsx("div",{className:"text-center text-gray-400 py-8",children:"No hay datos de triggers"}):i.jsx("div",{className:"flex gap-6",children:p.map((E,z)=>{const T=["#10b981","#3b82f6","#f59e0b","#8b5cf6","#ec4899"],k=T[z%T.length],w=p.reduce((M,q)=>M+q.count,0),R=w>0?Math.round(E.count/w*100):0;return i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-2",style:{background:`${k}20`},children:i.jsxs("span",{className:"text-xl font-bold",style:{color:k},children:[R,"%"]})}),i.jsx("p",{className:"text-sm font-medium text-gray-800 capitalize",children:E.trigger_type}),i.jsxs("p",{className:"text-xs text-gray-400",children:[E.count," ejecuciones"]})]},E.trigger_type)})})]})]})}function lk(){const[t,a]=j.useState([]),[s,o]=j.useState(null),[c,u]=j.useState({running:0,connectedMonitors:0}),[f,m]=j.useState(!1);return j.useEffect(()=>{const p=new EventSource("/api/flow-monitor/stream");return p.onopen=()=>m(!0),p.onerror=()=>m(!1),p.onmessage=g=>{const y=JSON.parse(g.data);switch(y.type){case"connected":u({running:y.activeCount,connectedMonitors:0});break;case"active_execution":a(x=>x.find(S=>S.executionId===y.executionId)?x:[y,...x]);break;case"flow_started":a(x=>[y,...x]);break;case"node_started":case"node_completed":a(x=>x.map(b=>b.executionId===y.executionId?{...b,currentNodeId:y.nodeId,currentNodeType:y.nodeType,variables:y.variables,steps:y.type==="node_completed"?[...b.steps||[],{nodeId:y.nodeId,nodeType:y.nodeType,durationMs:y.durationMs,status:y.status,timestamp:y.timestamp}]:b.steps}:b));break;case"flow_completed":case"flow_error":case"flow_transferred":a(x=>x.map(b=>b.executionId===y.executionId?{...b,status:y.type.replace("flow_",""),completedAt:y.timestamp}:b));break}},()=>p.close()},[]),i.jsxs("div",{className:"h-screen flex flex-col bg-gray-50",children:[i.jsx("header",{className:"bg-white border-b px-6 py-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Monitor de Flujos"}),i.jsx("p",{className:"text-gray-500",children:"Tiempo real"})]}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:`w-2 h-2 rounded-full ${f?"bg-green-500":"bg-red-500"}`}),i.jsx("span",{className:"text-sm text-gray-600",children:f?"Conectado":"Desconectado"})]}),i.jsxs("div",{className:"text-sm text-gray-600",children:[t.filter(p=>!p.status).length," ejecuciones activas"]})]})]})}),i.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[i.jsxs("aside",{className:"w-80 bg-white border-r overflow-y-auto",children:[i.jsx("div",{className:"p-4 border-b",children:i.jsx("h2",{className:"font-semibold text-gray-700",children:"Ejecuciones"})}),i.jsx("div",{className:"divide-y",children:t.length===0?i.jsx("div",{className:"p-8 text-center text-gray-400",children:"Sin ejecuciones"}):t.map(p=>i.jsx("button",{onClick:()=>o(p),className:`w-full p-4 text-left hover:bg-gray-50 transition ${s?.executionId===p.executionId?"bg-green-50":""}`,children:i.jsxs("div",{className:"flex items-start justify-between gap-2",children:[i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsx(Wc,{className:"w-4 h-4 text-gray-400 flex-shrink-0"}),i.jsx("span",{className:"font-mono text-sm text-gray-700 truncate",children:p.phone})]}),i.jsx("p",{className:"text-xs text-gray-500 truncate mb-1",children:p.flowName||p.flowSlug}),p.currentNodeId&&i.jsxs("div",{className:"flex items-center gap-1 text-xs",children:[i.jsx(zs,{className:"w-3 h-3 text-green-500"}),i.jsx("span",{className:"text-gray-600",children:p.currentNodeId})]})]}),i.jsxs("div",{children:[p.status==="completed"&&i.jsx(zc,{className:"w-5 h-5 text-green-500"}),p.status==="error"&&i.jsx(Ih,{className:"w-5 h-5 text-red-500"}),p.status==="transferred"&&i.jsx(Rr,{className:"w-5 h-5 text-yellow-500"}),!p.status&&i.jsx(zs,{className:"w-5 h-5 text-green-500 animate-pulse"})]})]})},p.executionId))})]}),i.jsx("main",{className:"flex-1 flex",children:s?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"flex-1 p-6 overflow-auto",children:i.jsxs("div",{className:"bg-white rounded-lg border p-6",children:[i.jsx("h3",{className:"font-semibold text-gray-700 mb-4",children:"Ejecucin del Flujo"}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-sm text-gray-500",children:"Flujo:"}),i.jsx("p",{className:"font-medium",children:s.flowName})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-sm text-gray-500",children:"Telfono:"}),i.jsx("p",{className:"font-mono text-sm",children:s.phone})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-sm text-gray-500",children:"Nodo Actual:"}),i.jsx("p",{className:"font-mono text-sm",children:s.currentNodeId||"N/A"})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-sm text-gray-500",children:"Tipo de Nodo:"}),i.jsx("p",{className:"font-mono text-sm",children:s.currentNodeType||"N/A"})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-sm text-gray-500",children:"Estado:"}),i.jsxs("p",{className:"font-medium",children:[s.status==="completed"&&"Completado ",s.status==="error"&&"Error ",s.status==="transferred"&&"Transferido ",!s.status&&"En ejecucin..."]})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-sm text-gray-500",children:"Iniciado:"}),i.jsx("p",{className:"text-sm",children:s.timestamp?new Date(s.timestamp).toLocaleString("es-CL"):"N/A"})]}),s.completedAt&&i.jsxs("div",{children:[i.jsx("span",{className:"text-sm text-gray-500",children:"Completado:"}),i.jsx("p",{className:"text-sm",children:new Date(s.completedAt).toLocaleString("es-CL")})]})]})]})}),i.jsxs("aside",{className:"w-96 bg-white border-l overflow-y-auto",children:[i.jsx("div",{className:"p-4 border-b",children:i.jsx("h2",{className:"font-semibold text-gray-700",children:"Detalles"})}),i.jsxs("div",{className:"p-4 space-y-4",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-sm font-semibold text-gray-600 mb-2",children:"Variables"}),i.jsx("div",{className:"bg-gray-50 rounded p-3 font-mono text-xs",children:i.jsx("pre",{className:"whitespace-pre-wrap break-words",children:JSON.stringify(s.variables||{},null,2)})})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-sm font-semibold text-gray-600 mb-2",children:"Timeline"}),i.jsx("div",{className:"space-y-2",children:s.steps&&s.steps.length>0?s.steps.map((p,g)=>i.jsxs("div",{className:"flex items-start gap-2 text-xs",children:[i.jsx(zc,{className:"w-4 h-4 text-green-500 flex-shrink-0 mt-0.5"}),i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"font-medium text-gray-700",children:p.nodeId}),i.jsxs("p",{className:"text-gray-500",children:[p.nodeType,"  ",p.durationMs,"ms"]}),p.timestamp&&i.jsx("p",{className:"text-gray-400",children:new Date(p.timestamp).toLocaleTimeString("es-CL")})]})]},g)):i.jsx("p",{className:"text-gray-400 text-sm",children:"Sin eventos an"})})]})]})]})]}):i.jsx("div",{className:"flex-1 flex items-center justify-center text-gray-400",children:i.jsxs("div",{className:"text-center",children:[i.jsx(zs,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),i.jsx("p",{children:"Selecciona una ejecucin para ver detalles"})]})})})]})]})}const Tr=()=>{const t=Mt.getState().token;return{"Content-Type":"application/json",...t?{Authorization:`Bearer ${t}`}:{}}};function ck(){const[t,a]=j.useState([]),[s,o]=j.useState([]),[c,u]=j.useState(!0),[f,m]=j.useState(!1),[p,g]=j.useState(null),[y,x]=j.useState({}),[b,S]=j.useState({username:"",password:"",name:"",email:"",role:"agent",departmentId:"",avatarColor:"#6366f1"}),[_,C]=j.useState(""),[N,E]=j.useState(!1),z=async()=>{try{const[$,G]=await Promise.all([fetch("/api/agents",{headers:Tr()}),fetch("/api/departments",{headers:Tr()})]),Q=await $.json(),Z=await G.json();Q.ok&&a(Q.agents),Z.ok&&o(Z.departments)}catch($){console.error("Error loading data:",$)}finally{u(!1)}};j.useEffect(()=>{z()},[]);const T=()=>{g(null),S({username:"",password:"",name:"",email:"",role:"agent",departmentId:"",avatarColor:"#6366f1"}),C(""),m(!0)},k=$=>{g($),S({username:$.username,password:"",name:$.name,email:$.email||"",role:$.role,departmentId:$.department_id||"",avatarColor:$.avatar_color||"#6366f1"}),C(""),m(!0)},w=async $=>{$.preventDefault(),C(""),E(!0);try{const G={name:b.name,email:b.email||null,role:b.role,departmentId:b.departmentId?Number(b.departmentId):null,avatarColor:b.avatarColor};if(p){b.password&&(G.password=b.password);const Z=await(await fetch(`/api/agents/${p.id}`,{method:"PUT",headers:Tr(),body:JSON.stringify(G)})).json();if(!Z.ok)throw new Error(Z.error)}else{G.username=b.username,G.password=b.password;const Z=await(await fetch("/api/agents",{method:"POST",headers:Tr(),body:JSON.stringify(G)})).json();if(!Z.ok)throw new Error(Z.error)}m(!1),z()}catch(G){C(G.message)}finally{E(!1)}},R=async $=>{if(confirm(`Desactivar agente "${$.name}"?`))try{await fetch(`/api/agents/${$.id}`,{method:"DELETE",headers:Tr()}),z()}catch(G){alert("Error: "+G.message)}},M=async $=>{if(confirm(`Regenerar API key de "${$.name}"? La anterior dejara de funcionar.`))try{const Q=await(await fetch(`/api/agents/${$.id}/regenerate-api-key`,{method:"POST",headers:Tr()})).json();Q.ok&&(z(),alert(`Nueva API key: ${Q.apiKey}`))}catch(G){alert("Error: "+G.message)}},q=["#6366f1","#22c55e","#ef4444","#f59e0b","#3b82f6","#ec4899","#8b5cf6","#14b8a6","#f97316","#06b6d4"];return c?i.jsx("div",{className:"p-8 flex justify-center",children:i.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-green-500 border-t-transparent rounded-full"})}):i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Agentes"}),i.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Gestiona los agentes del sistema"})]}),i.jsxs("button",{onClick:T,className:"flex items-center gap-2 bg-green-600 hover:bg-green-700 text-white px-4 py-2.5 rounded-lg transition font-medium",children:[i.jsx(Hr,{className:"w-4 h-4"})," Nuevo Agente"]})]}),i.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"bg-gray-50 border-b border-gray-200",children:[i.jsx("th",{className:"text-left px-6 py-3 text-xs font-semibold text-gray-500 uppercase",children:"Agente"}),i.jsx("th",{className:"text-left px-6 py-3 text-xs font-semibold text-gray-500 uppercase",children:"Rol"}),i.jsx("th",{className:"text-left px-6 py-3 text-xs font-semibold text-gray-500 uppercase",children:"Departamento"}),i.jsx("th",{className:"text-left px-6 py-3 text-xs font-semibold text-gray-500 uppercase",children:"Estado"}),i.jsx("th",{className:"text-left px-6 py-3 text-xs font-semibold text-gray-500 uppercase",children:"API Key"}),i.jsx("th",{className:"text-left px-6 py-3 text-xs font-semibold text-gray-500 uppercase",children:"Ultimo Login"}),i.jsx("th",{className:"text-right px-6 py-3 text-xs font-semibold text-gray-500 uppercase",children:"Acciones"})]})}),i.jsxs("tbody",{className:"divide-y divide-gray-100",children:[t.map($=>i.jsxs("tr",{className:`hover:bg-gray-50 ${$.status==="inactive"?"opacity-50":""}`,children:[i.jsx("td",{className:"px-6 py-4",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-9 h-9 rounded-full flex items-center justify-center flex-shrink-0",style:{backgroundColor:$.avatar_color||"#6366f1"},children:i.jsx("span",{className:"text-white text-sm font-medium",children:$.name?.[0]?.toUpperCase()})}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-gray-900 text-sm",children:$.name}),i.jsxs("p",{className:"text-xs text-gray-400",children:["@",$.username]})]})]})}),i.jsx("td",{className:"px-6 py-4",children:i.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium ${$.role==="supervisor"?"bg-purple-50 text-purple-700":"bg-blue-50 text-blue-700"}`,children:[$.role==="supervisor"?i.jsx(e4,{className:"w-3 h-3"}):i.jsx(Rr,{className:"w-3 h-3"}),$.role==="supervisor"?"Supervisor":"Agente"]})}),i.jsx("td",{className:"px-6 py-4",children:$.department_name?i.jsx("span",{className:"text-sm px-2 py-1 rounded-full",style:{backgroundColor:`${$.department_color}20`,color:$.department_color},children:$.department_name}):i.jsx("span",{className:"text-xs text-gray-400",children:"Sin asignar"})}),i.jsx("td",{className:"px-6 py-4",children:i.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${$.status==="active"?"bg-green-50 text-green-700":"bg-gray-100 text-gray-500"}`,children:$.status==="active"?"Activo":"Inactivo"})}),i.jsx("td",{className:"px-6 py-4",children:i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx("code",{className:"text-xs text-gray-400 font-mono",children:y[$.id]?$.api_key:$.api_key?"":"-"}),$.api_key&&i.jsx("button",{onClick:()=>x(G=>({...G,[$.id]:!G[$.id]})),className:"p-1 text-gray-400 hover:text-gray-600",children:y[$.id]?i.jsx(gS,{className:"w-3 h-3"}):i.jsx(Gh,{className:"w-3 h-3"})})]})}),i.jsx("td",{className:"px-6 py-4",children:i.jsx("span",{className:"text-xs text-gray-400",children:$.last_login?new Date($.last_login).toLocaleString("es-CL"):"Nunca"})}),i.jsx("td",{className:"px-6 py-4 text-right",children:i.jsxs("div",{className:"flex items-center justify-end gap-1",children:[i.jsx("button",{onClick:()=>k($),className:"p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg",title:"Editar",children:i.jsx(Kc,{className:"w-4 h-4"})}),i.jsx("button",{onClick:()=>M($),className:"p-2 text-gray-400 hover:text-yellow-600 hover:bg-yellow-50 rounded-lg",title:"Regenerar API Key",children:i.jsx(CS,{className:"w-4 h-4"})}),$.status==="active"&&i.jsx("button",{onClick:()=>R($),className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg",title:"Desactivar",children:i.jsx(jo,{className:"w-4 h-4"})})]})})]},$.id)),!t.length&&i.jsx("tr",{children:i.jsx("td",{colSpan:"7",className:"text-center py-12 text-gray-400",children:"No hay agentes. Crea el primero."})})]})]})}),f&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md p-6",children:[i.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-4",children:p?"Editar Agente":"Nuevo Agente"}),_&&i.jsx("div",{className:"bg-red-50 text-red-600 px-4 py-2 rounded-lg text-sm mb-4",children:_}),i.jsxs("form",{onSubmit:w,className:"space-y-4",children:[!p&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Username"}),i.jsx("input",{type:"text",value:b.username,onChange:$=>S({...b,username:$.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",required:!0,minLength:3})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:p?"Nueva Contrasena (dejar vacio para no cambiar)":"Contrasena"}),i.jsx("input",{type:"password",value:b.password,onChange:$=>S({...b,password:$.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",required:!p,minLength:6})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre completo"}),i.jsx("input",{type:"text",value:b.name,onChange:$=>S({...b,name:$.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email (opcional)"}),i.jsx("input",{type:"email",value:b.email,onChange:$=>S({...b,email:$.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm"})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Rol"}),i.jsxs("select",{value:b.role,onChange:$=>S({...b,role:$.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",children:[i.jsx("option",{value:"agent",children:"Agente"}),i.jsx("option",{value:"supervisor",children:"Supervisor"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Departamento"}),i.jsxs("select",{value:b.departmentId,onChange:$=>S({...b,departmentId:$.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",children:[i.jsx("option",{value:"",children:"Sin asignar"}),s.filter($=>$.active).map($=>i.jsx("option",{value:$.id,children:$.display_name},$.id))]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Color avatar"}),i.jsx("div",{className:"flex gap-2",children:q.map($=>i.jsx("button",{type:"button",onClick:()=>S({...b,avatarColor:$}),className:`w-8 h-8 rounded-full transition ${b.avatarColor===$?"ring-2 ring-offset-2 ring-gray-400":""}`,style:{backgroundColor:$}},$))})]}),i.jsxs("div",{className:"flex gap-3 pt-2",children:[i.jsx("button",{type:"button",onClick:()=>m(!1),className:"flex-1 px-4 py-2.5 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition",children:"Cancelar"}),i.jsx("button",{type:"submit",disabled:N,className:"flex-1 px-4 py-2.5 bg-green-600 hover:bg-green-700 text-white rounded-lg transition disabled:opacity-50",children:N?"Guardando...":p?"Guardar":"Crear"})]})]})]})})]})}const xc=()=>{const t=Mt.getState().token;return{"Content-Type":"application/json",...t?{Authorization:`Bearer ${t}`}:{}}};function uk(){const[t,a]=j.useState([]),[s,o]=j.useState(!0),[c,u]=j.useState(!1),[f,m]=j.useState(null),[p,g]=j.useState({name:"",displayName:"",icon:"MessageSquare",color:"#6f42c1",autoAssignIntents:""}),[y,x]=j.useState(""),[b,S]=j.useState(!1),_=async()=>{try{const R=await(await fetch("/api/departments",{headers:xc()})).json();R.ok&&a(R.departments)}catch(w){console.error("Error loading departments:",w)}finally{o(!1)}};j.useEffect(()=>{_()},[]);const C=()=>{m(null),g({name:"",displayName:"",icon:"MessageSquare",color:"#6f42c1",autoAssignIntents:""}),x(""),u(!0)},N=w=>{m(w);const R=w.auto_assign_intents,M=Array.isArray(R)?R.join(", "):typeof R=="string"?JSON.parse(R||"[]").join(", "):"";g({name:w.name,displayName:w.display_name,icon:w.icon||"MessageSquare",color:w.color||"#6f42c1",autoAssignIntents:M}),x(""),u(!0)},E=async w=>{w.preventDefault(),x(""),S(!0);try{const R=p.autoAssignIntents.split(",").map(M=>M.trim().toLowerCase()).filter(Boolean);if(f){const q=await(await fetch(`/api/departments/${f.id}`,{method:"PUT",headers:xc(),body:JSON.stringify({displayName:p.displayName,icon:p.icon,color:p.color,autoAssignIntents:R})})).json();if(!q.ok)throw new Error(q.error)}else{const q=await(await fetch("/api/departments",{method:"POST",headers:xc(),body:JSON.stringify({name:p.name.toLowerCase().replace(/\s+/g,"_"),displayName:p.displayName,icon:p.icon,color:p.color,autoAssignIntents:R})})).json();if(!q.ok)throw new Error(q.error)}u(!1),_()}catch(R){x(R.message)}finally{S(!1)}},z=async w=>{if(confirm(`Desactivar departamento "${w.display_name}"?`))try{const M=await(await fetch(`/api/departments/${w.id}`,{method:"DELETE",headers:xc()})).json();if(!M.ok)throw new Error(M.error);_()}catch(R){alert("Error: "+R.message)}},T=["#28a745","#17a2b8","#ffc107","#6f42c1","#dc3545","#fd7e14","#20c997","#6610f2","#e83e8c","#007bff"],k=["MessageSquare","ShoppingCart","Wrench","Package","Phone","Mail","Star","Heart","Zap","Globe"];return s?i.jsx("div",{className:"p-8 flex justify-center",children:i.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-green-500 border-t-transparent rounded-full"})}):i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Departamentos"}),i.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Organiza los agentes por area"})]}),i.jsxs("button",{onClick:C,className:"flex items-center gap-2 bg-green-600 hover:bg-green-700 text-white px-4 py-2.5 rounded-lg transition font-medium",children:[i.jsx(Fh,{className:"w-4 h-4"})," Nuevo Departamento"]})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map(w=>{const R=Array.isArray(w.auto_assign_intents)?w.auto_assign_intents:JSON.parse(w.auto_assign_intents||"[]");return i.jsxs("div",{className:`bg-white rounded-xl border-2 p-5 ${w.active?"border-gray-200":"border-gray-100 opacity-50"}`,children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center",style:{backgroundColor:`${w.color}20`},children:i.jsx("span",{className:"text-lg",style:{color:w.color},children:w.icon==="ShoppingCart"?"":w.icon==="Wrench"?"":w.icon==="Package"?"":""})}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-gray-900",children:w.display_name}),i.jsxs("p",{className:"text-xs text-gray-400",children:["@",w.name]})]})]}),i.jsxs("div",{className:"flex gap-1",children:[i.jsx("button",{onClick:()=>N(w),className:"p-1.5 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg",children:i.jsx(Kc,{className:"w-4 h-4"})}),w.name!=="general"&&w.active&&i.jsx("button",{onClick:()=>z(w),className:"p-1.5 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg",children:i.jsx(jo,{className:"w-4 h-4"})})]})]}),i.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[i.jsxs("span",{className:"text-xs text-gray-500",children:[w.agent_count||0," agentes"]}),i.jsx("span",{className:"w-1 h-1 bg-gray-300 rounded-full"}),i.jsx("span",{className:`text-xs ${w.active?"text-green-600":"text-gray-400"}`,children:w.active?"Activo":"Inactivo"})]}),R.length>0&&i.jsxs("div",{children:[i.jsxs("p",{className:"text-xs text-gray-400 mb-1.5 flex items-center gap-1",children:[i.jsx(s4,{className:"w-3 h-3"})," Intents auto-asignados:"]}),i.jsx("div",{className:"flex flex-wrap gap-1",children:R.map((M,q)=>i.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full bg-gray-100 text-gray-600",children:M},q))})]})]},w.id)})}),c&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md p-6",children:[i.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-4",children:f?"Editar Departamento":"Nuevo Departamento"}),y&&i.jsx("div",{className:"bg-red-50 text-red-600 px-4 py-2 rounded-lg text-sm mb-4",children:y}),i.jsxs("form",{onSubmit:E,className:"space-y-4",children:[!f&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Identificador (slug)"}),i.jsx("input",{type:"text",value:p.name,onChange:w=>g({...p,name:w.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",required:!0,placeholder:"ej: ventas, soporte"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre visible"}),i.jsx("input",{type:"text",value:p.displayName,onChange:w=>g({...p,displayName:w.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",required:!0,placeholder:"ej: Ventas, Soporte Tecnico"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Color"}),i.jsx("div",{className:"flex gap-2",children:T.map(w=>i.jsx("button",{type:"button",onClick:()=>g({...p,color:w}),className:`w-8 h-8 rounded-full transition ${p.color===w?"ring-2 ring-offset-2 ring-gray-400":""}`,style:{backgroundColor:w}},w))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Icono"}),i.jsx("select",{value:p.icon,onChange:w=>g({...p,icon:w.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",children:k.map(w=>i.jsx("option",{value:w,children:w},w))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Intents para auto-asignacion"}),i.jsx("input",{type:"text",value:p.autoAssignIntents,onChange:w=>g({...p,autoAssignIntents:w.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",placeholder:"ventas, comprar, precio (separados por coma)"}),i.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Cuando el chatbot detecta estos intents, asigna automaticamente a este departamento."})]}),i.jsxs("div",{className:"flex gap-3 pt-2",children:[i.jsx("button",{type:"button",onClick:()=>u(!1),className:"flex-1 px-4 py-2.5 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition",children:"Cancelar"}),i.jsx("button",{type:"submit",disabled:b,className:"flex-1 px-4 py-2.5 bg-green-600 hover:bg-green-700 text-white rounded-lg transition disabled:opacity-50",children:b?"Guardando...":f?"Guardar":"Crear"})]})]})]})})]})}const qn="/api/learning",wt=()=>{const t=Mt.getState().token;return{"Content-Type":"application/json",...t?{Authorization:`Bearer ${t}`}:{}}};async function jt(t){const a=await t.json();if(!t.ok||!a.ok)throw new Error(a.error||"Error en la solicitud");return a}async function dk(){const t=await fetch(`${qn}/stats`,{headers:wt()});return jt(t)}async function fk(t={}){const a=Object.fromEntries(Object.entries(t).filter(([,c])=>c!==""&&c!=null)),s=new URLSearchParams(a).toString(),o=await fetch(`${qn}/pairs${s?"?"+s:""}`,{headers:wt()});return jt(o)}async function Wy(t,a){const s=await fetch(`${qn}/pairs/${t}`,{method:"PATCH",headers:wt(),body:JSON.stringify({status:a})});return jt(s)}async function hk(t){const a=await fetch(`${qn}/pairs/${t}`,{method:"DELETE",headers:wt()});return jt(a)}async function mk(t,a){const s=await fetch(`${qn}/reprocess`,{method:"POST",headers:wt(),body:JSON.stringify({from:t||void 0,to:a||void 0})});return jt(s)}async function pk(t=!0){const a=await fetch(`${qn}/prices?active=${t}`,{headers:wt()});return jt(a)}async function gk(t){const a=await fetch(`${qn}/prices`,{method:"POST",headers:wt(),body:JSON.stringify(t)});return jt(a)}async function xk(t,a){const s=await fetch(`${qn}/prices/${t}`,{method:"PUT",headers:wt(),body:JSON.stringify(a)});return jt(s)}async function yk(t){const a=await fetch(`${qn}/prices/${t}`,{method:"DELETE",headers:wt()});return jt(a)}async function Ky(t=!1){const a=await fetch(`${qn}/brain-report${t?"?force=true":""}`,{headers:wt()});return jt(a)}async function bk(){const t=await fetch("/api/chatbot/config",{headers:wt()});return jt(t)}async function vk(t){const a=await fetch("/api/chatbot/config",{method:"PUT",headers:wt(),body:JSON.stringify(t)});return jt(a)}async function wk(t=null){const a=t?`?phone=${encodeURIComponent(t)}`:"",s=await fetch(`/api/chatbot/current-prompt${a}`,{headers:wt()});return jt(s)}async function jk(t=50,a=0){const s=await fetch(`/api/chat/bot-conversations?limit=${t}&offset=${a}`,{headers:wt()});return jt(s)}async function Nk(t){const a=await fetch(`/api/chat/bot-conversations/${t}/messages`,{headers:wt()});return jt(a)}async function Sk(t,a,s){const o=await fetch(`/api/chat/bot-conversations/${t}/correct`,{method:"POST",headers:wt(),body:JSON.stringify({messageId:a,correctedAnswer:s})});return jt(o)}async function _k(t,a){const s=await fetch("/api/chat/simulate",{method:"POST",headers:wt(),body:JSON.stringify({phone:t,message:a})});return jt(s)}const Ek=[{id:"brain",label:"Cerebro IA",icon:zr},{id:"instructions",label:"Instrucciones",icon:Qh},{id:"bot-conversations",label:"Conversaciones IA",icon:Ln},{id:"dashboard",label:"Dashboard",icon:Ph},{id:"pairs",label:"Pares Q&A",icon:Vh},{id:"prices",label:"Precios",icon:jb}];function Ck({label:t,value:a}){const s=a>=80?"#10b981":a>=50?"#f59e0b":"#ef4444",o=2*Math.PI*36,c=o-a/100*o;return i.jsxs("div",{className:"bg-white rounded-xl border border-gray-100 shadow-sm p-4 flex flex-col items-center",children:[i.jsxs("svg",{width:"88",height:"88",className:"mb-2",children:[i.jsx("circle",{cx:"44",cy:"44",r:"36",fill:"none",stroke:"#f3f4f6",strokeWidth:"8"}),i.jsx("circle",{cx:"44",cy:"44",r:"36",fill:"none",stroke:s,strokeWidth:"8",strokeDasharray:o,strokeDashoffset:c,strokeLinecap:"round",transform:"rotate(-90 44 44)",className:"transition-all duration-700"}),i.jsxs("text",{x:"44",y:"48",textAnchor:"middle",fontSize:"18",fontWeight:"bold",fill:"#1f2937",children:[a,"%"]})]}),i.jsx("span",{className:"text-xs text-gray-500 text-center",children:t})]})}const Tk={confianza_general:"Confianza General",cobertura_temas:"Cobertura de Temas",calidad_respuestas:"Calidad Respuestas",actualizacion_precios:"Precios Actualizados"},Mk={puede_responder_precios:"Responder Precios",puede_comparar_productos:"Comparar Productos",puede_recomendar:"Recomendar",puede_dar_plazos:"Informar Plazos",puede_informar_despacho:"Informar Despacho"},ih={pending:{label:"Pendiente",cls:"bg-yellow-50 text-yellow-700"},approved:{label:"Aprobado",cls:"bg-green-50 text-green-700"},rejected:{label:"Rechazado",cls:"bg-red-50 text-red-700"}};function Ak(){const[t,a]=j.useState(null),[s,o]=j.useState(!0),[c,u]=j.useState(!1),[f,m]=j.useState(null),[p,g]=j.useState(!1),[y,x]=j.useState("");j.useEffect(()=>{b()},[]);const b=async()=>{o(!0),x("");try{const C=await Ky(!1);a(C.report),m(C.generated_at),g(C.cached)}catch(C){x(C.message)}finally{o(!1)}},S=async()=>{u(!0),x("");try{const C=await Ky(!0);a(C.report),m(C.generated_at),g(!1)}catch(C){x(C.message)}finally{u(!1)}};if(s)return i.jsx("div",{className:"flex items-center justify-center py-20",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-500"})});if(y&&!t)return i.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-6 text-center",children:[i.jsx(eo,{className:"w-8 h-8 text-red-400 mx-auto mb-2"}),i.jsx("p",{className:"text-red-700",children:y}),i.jsx("button",{onClick:b,className:"mt-3 text-sm text-red-600 underline",children:"Reintentar"})]});const _=t?.ai_analysis;return i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 rounded-2xl p-8 text-white",children:i.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"w-16 h-16 bg-white/20 rounded-2xl flex items-center justify-center",children:i.jsx(zr,{className:"w-8 h-8"})}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Cerebro IA"}),i.jsxs("p",{className:"text-indigo-200 text-sm mt-1",children:[f?`Ultimo analisis: ${Fr(new Date(f),{addSuffix:!0,locale:as})}`:"Sin analisis previo",p&&" (cacheado)"]})]})]}),i.jsxs("button",{onClick:S,disabled:c,className:"flex items-center gap-2 bg-white/20 hover:bg-white/30 px-4 py-2.5 rounded-lg transition disabled:opacity-50",children:[i.jsx(wo,{className:`w-4 h-4 ${c?"animate-spin":""}`}),c?"Generando...":"Regenerar Analisis"]})]})}),t?.ai_available===!1&&i.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-xl p-4 flex items-center gap-3",children:[i.jsx(eo,{className:"w-5 h-5 text-yellow-600 flex-shrink-0"}),i.jsx("p",{className:"text-yellow-800 text-sm",children:"OpenAI no configurado. Se muestran datos basicos sin analisis IA. Configure OPENAI_API_KEY para el reporte completo."})]}),t?.stats&&i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[i.jsx(ln,{title:"Pares Aprobados",value:t.stats.approved,icon:Vh,color:"green",subtitle:"Base de conocimiento"}),i.jsx(ln,{title:"Pendientes",value:t.stats.pending,icon:eo,color:"yellow",subtitle:"Por revisar"}),i.jsx(ln,{title:"Precios Activos",value:t.stats.active_prices,icon:jb,color:"blue",subtitle:"Productos con precio"}),i.jsx(ln,{title:"Calidad Promedio",value:`${t.stats.avg_quality||0}/100`,icon:Dc,color:"purple",subtitle:"Score Q&A"})]}),y&&i.jsx("div",{className:"bg-red-50 border border-red-200 rounded-xl p-3 text-red-700 text-sm",children:y}),_?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"bg-white rounded-xl border border-gray-100 shadow-sm p-6",children:i.jsxs("div",{className:"border-l-4 border-indigo-500 pl-4",children:[i.jsxs("h3",{className:"font-semibold text-gray-800 mb-2 flex items-center gap-2",children:[i.jsx(dh,{className:"w-5 h-5 text-indigo-500"})," Resumen General"]}),i.jsx("p",{className:"text-gray-600 leading-relaxed",children:_.resumen})]})}),_.metricas_confianza&&i.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:Object.entries(_.metricas_confianza).map(([C,N])=>i.jsx(Ck,{label:Tk[C]||C,value:Number(N)||0},C))}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"bg-white rounded-xl border border-gray-100 shadow-sm p-6",children:[i.jsxs("h3",{className:"font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[i.jsx(i4,{className:"w-5 h-5 text-green-500"})," Temas Dominados"]}),(_.temas_dominados||[]).length===0?i.jsx("p",{className:"text-gray-400 text-sm text-center py-4",children:"Sin temas detectados aun"}):i.jsx("div",{className:"space-y-3",children:_.temas_dominados.map((C,N)=>i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[i.jsx("span",{className:"text-gray-700 font-medium",children:C.tema}),i.jsxs("span",{className:"text-gray-500",children:[C.confianza,"% (",C.ejemplos," ej.)"]})]}),i.jsx("div",{className:"h-2 bg-gray-100 rounded-full overflow-hidden",children:i.jsx("div",{className:"h-full rounded-full transition-all duration-500",style:{width:`${C.confianza}%`,backgroundColor:C.confianza>=80?"#10b981":C.confianza>=50?"#f59e0b":"#ef4444"}})}),C.detalle&&i.jsx("p",{className:"text-xs text-gray-400 mt-1",children:C.detalle})]},N))})]}),i.jsxs("div",{className:"bg-white rounded-xl border border-gray-100 shadow-sm p-6",children:[i.jsxs("h3",{className:"font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[i.jsx(eo,{className:"w-5 h-5 text-yellow-500"})," Brechas de Conocimiento"]}),(_.brechas_conocimiento||[]).length===0?i.jsx("p",{className:"text-gray-400 text-sm text-center py-4",children:"Sin brechas detectadas"}):i.jsx("div",{className:"space-y-3",children:_.brechas_conocimiento.map((C,N)=>i.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full font-medium ${C.prioridad==="alta"?"bg-red-100 text-red-700":C.prioridad==="media"?"bg-yellow-100 text-yellow-700":"bg-blue-100 text-blue-700"}`,children:C.prioridad}),i.jsx("span",{className:"font-medium text-gray-800 text-sm",children:C.area})]}),i.jsx("p",{className:"text-gray-500 text-sm",children:C.descripcion})]},N))})]})]}),_.capacidades&&i.jsxs("div",{className:"bg-white rounded-xl border border-gray-100 shadow-sm p-6",children:[i.jsxs("h3",{className:"font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[i.jsx(x4,{className:"w-5 h-5 text-blue-500"})," Capacidades"]}),i.jsx("div",{className:"flex flex-wrap gap-3",children:Object.entries(_.capacidades).map(([C,N])=>i.jsxs("span",{className:`inline-flex items-center gap-1.5 px-3 py-1.5 rounded-full text-sm font-medium ${N?"bg-green-50 text-green-700":"bg-gray-100 text-gray-400"}`,children:[N?i.jsx(bn,{className:"w-4 h-4"}):i.jsx(es,{className:"w-4 h-4"}),Mk[C]||C]},C))})]}),_.razonamiento&&i.jsxs("div",{className:"bg-white rounded-xl border border-gray-100 shadow-sm p-6",children:[i.jsxs("h3",{className:"font-semibold text-gray-800 mb-3 flex items-center gap-2",children:[i.jsx(zr,{className:"w-5 h-5 text-purple-500"})," Razonamiento"]}),i.jsx("p",{className:"text-gray-600 leading-relaxed italic",children:_.razonamiento})]}),_.recomendaciones?.length>0&&i.jsxs("div",{className:"bg-white rounded-xl border border-gray-100 shadow-sm p-6",children:[i.jsxs("h3",{className:"font-semibold text-gray-800 mb-3 flex items-center gap-2",children:[i.jsx(Dc,{className:"w-5 h-5 text-indigo-500"})," Recomendaciones"]}),i.jsx("ul",{className:"space-y-2",children:_.recomendaciones.map((C,N)=>i.jsxs("li",{className:"flex items-start gap-2 text-sm text-gray-600",children:[i.jsx(dh,{className:"w-4 h-4 text-indigo-400 mt-0.5 flex-shrink-0"}),C]},N))})]}),i.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 text-xs text-gray-400 flex items-center justify-between",children:[i.jsxs("span",{children:["Datos base: ",t?.stats?.approved||0," pares aprobados, ",t?.stats?.active_prices||0," precios"]}),i.jsx("span",{children:t?.ai_available?"Analisis generado por IA":"Datos sin analisis IA"})]})]}):i.jsxs("div",{className:"bg-white rounded-xl border border-gray-100 shadow-sm p-12 text-center",children:[i.jsx(zr,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),i.jsx("p",{className:"text-gray-400",children:'Sin datos de analisis. Aprueba pares Q&A y presiona "Regenerar Analisis".'})]})]})}function kk({stats:t}){if(!t)return i.jsx("p",{className:"text-gray-400 text-center py-8",children:"Cargando estadisticas..."});const a=Object.entries(t.by_channel||{}),s=a.reduce((o,[,c])=>o+c,0)||1;return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[i.jsx(ln,{title:"Total Pares",value:t.total,icon:Vh,color:"blue",subtitle:"Q&A aprendidos"}),i.jsx(ln,{title:"Aprobados",value:t.approved,icon:bn,color:"green",subtitle:`${t.with_embedding} con embedding`}),i.jsx(ln,{title:"Pendientes",value:t.pending,icon:eo,color:"yellow",subtitle:"Por revisar"}),i.jsx(ln,{title:"Calidad Promedio",value:`${t.avg_quality||0}/100`,icon:Dc,color:"purple",subtitle:"Score de calidad"})]}),a.length>0&&i.jsxs("div",{className:"bg-white rounded-xl border border-gray-100 shadow-sm p-6",children:[i.jsx("h3",{className:"font-semibold text-gray-800 mb-4",children:"Distribucion por Canal"}),i.jsx("div",{className:"space-y-3",children:a.map(([o,c])=>i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[i.jsx("span",{className:"text-gray-700 font-medium capitalize",children:o}),i.jsxs("span",{className:"text-gray-500",children:[c," pares (",Math.round(c/s*100),"%)"]})]}),i.jsx("div",{className:"h-2 bg-gray-100 rounded-full overflow-hidden",children:i.jsx("div",{className:"h-full bg-indigo-500 rounded-full transition-all",style:{width:`${Math.round(c/s*100)}%`}})})]},o))})]})]})}function zk(){const[t,a]=j.useState([]),[s,o]=j.useState(1),[c,u]=j.useState(1),[f,m]=j.useState(0),[p,g]=j.useState(!0),[y,x]=j.useState({status:"",channel:"",minQuality:""}),[b,S]=j.useState(null),[_,C]=j.useState(!1),[N,E]=j.useState({from:"",to:""}),[z,T]=j.useState(!1);j.useEffect(()=>{k()},[s,y]);const k=async()=>{g(!0);try{const G=await fk({page:s,limit:20,...y});a(G.pairs),u(G.pages),m(G.total)}catch(G){console.error(G)}finally{g(!1)}},w=async G=>{try{await Wy(G,"approved"),k()}catch(Q){alert(Q.message)}},R=async G=>{try{await Wy(G,"rejected"),k()}catch(Q){alert(Q.message)}},M=async G=>{if(confirm("Eliminar este par permanentemente?"))try{await hk(G),k()}catch(Q){alert(Q.message)}},q=async()=>{T(!0);try{const G=await mk(N.from,N.to);alert(`Reprocesadas: ${G.processed} sesiones`),C(!1),k()}catch(G){alert(G.message)}finally{T(!1)}},$=(G,Q)=>{x(Z=>({...Z,[G]:Q})),o(1)};return i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[i.jsxs("select",{value:y.status,onChange:G=>$("status",G.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm",children:[i.jsx("option",{value:"",children:"Todos los estados"}),i.jsx("option",{value:"pending",children:"Pendientes"}),i.jsx("option",{value:"approved",children:"Aprobados"}),i.jsx("option",{value:"rejected",children:"Rechazados"})]}),i.jsxs("select",{value:y.channel,onChange:G=>$("channel",G.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm",children:[i.jsx("option",{value:"",children:"Todos los canales"}),i.jsx("option",{value:"whatsapp",children:"WhatsApp"}),i.jsx("option",{value:"instagram",children:"Instagram"})]}),i.jsx("input",{type:"number",placeholder:"Calidad min.",value:y.minQuality,onChange:G=>$("minQuality",G.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm w-28",min:"0",max:"100"}),i.jsxs("span",{className:"text-sm text-gray-400 ml-auto",children:[f," pares en total"]}),i.jsxs("button",{onClick:()=>C(!0),className:"flex items-center gap-1 text-sm text-indigo-600 hover:text-indigo-700 font-medium",children:[i.jsx(wo,{className:"w-4 h-4"})," Reprocesar"]})]}),i.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"bg-gray-50 border-b border-gray-200",children:[i.jsx("th",{className:"text-left px-4 py-3 text-xs font-semibold text-gray-500 uppercase",children:"Pregunta"}),i.jsx("th",{className:"text-left px-4 py-3 text-xs font-semibold text-gray-500 uppercase",children:"Respuesta"}),i.jsx("th",{className:"text-center px-4 py-3 text-xs font-semibold text-gray-500 uppercase",children:"Calidad"}),i.jsx("th",{className:"text-center px-4 py-3 text-xs font-semibold text-gray-500 uppercase",children:"Canal"}),i.jsx("th",{className:"text-center px-4 py-3 text-xs font-semibold text-gray-500 uppercase",children:"Estado"}),i.jsx("th",{className:"text-right px-4 py-3 text-xs font-semibold text-gray-500 uppercase",children:"Acciones"})]})}),i.jsx("tbody",{className:"divide-y divide-gray-100",children:p?i.jsx("tr",{children:i.jsx("td",{colSpan:"6",className:"text-center py-8 text-gray-400",children:"Cargando..."})}):t.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:"6",className:"text-center py-12 text-gray-400",children:"No hay pares que coincidan con los filtros"})}):t.map(G=>i.jsxs("tr",{className:"hover:bg-gray-50",children:[i.jsx("td",{className:"px-4 py-3 text-sm text-gray-700 max-w-[200px] truncate",children:G.question}),i.jsx("td",{className:"px-4 py-3 text-sm text-gray-500 max-w-[250px] truncate",children:G.answer}),i.jsx("td",{className:"px-4 py-3 text-center",children:i.jsx("span",{className:`text-sm font-medium ${G.quality_score>=80?"text-green-600":G.quality_score>=50?"text-yellow-600":"text-red-600"}`,children:G.quality_score})}),i.jsx("td",{className:"px-4 py-3 text-center",children:i.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full bg-gray-100 text-gray-600 capitalize",children:G.channel})}),i.jsx("td",{className:"px-4 py-3 text-center",children:i.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full font-medium ${ih[G.status]?.cls||""}`,children:ih[G.status]?.label||G.status})}),i.jsx("td",{className:"px-4 py-3 text-right",children:i.jsxs("div",{className:"flex items-center justify-end gap-1",children:[i.jsx("button",{onClick:()=>S(G),className:"p-1.5 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg",title:"Ver detalle",children:i.jsx(Gh,{className:"w-4 h-4"})}),G.status!=="approved"&&i.jsx("button",{onClick:()=>w(G.id),className:"p-1.5 text-gray-400 hover:text-green-600 hover:bg-green-50 rounded-lg",title:"Aprobar",children:i.jsx(bn,{className:"w-4 h-4"})}),G.status!=="rejected"&&i.jsx("button",{onClick:()=>R(G.id),className:"p-1.5 text-gray-400 hover:text-orange-600 hover:bg-orange-50 rounded-lg",title:"Rechazar",children:i.jsx(es,{className:"w-4 h-4"})}),i.jsx("button",{onClick:()=>M(G.id),className:"p-1.5 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg",title:"Eliminar",children:i.jsx(jo,{className:"w-4 h-4"})})]})})]},G.id))})]})}),c>1&&i.jsxs("div",{className:"flex items-center justify-center gap-4",children:[i.jsx("button",{onClick:()=>o(G=>Math.max(1,G-1)),disabled:s===1,className:"p-2 text-gray-500 hover:text-gray-700 disabled:opacity-30",children:i.jsx(iS,{className:"w-5 h-5"})}),i.jsxs("span",{className:"text-sm text-gray-600",children:["Pagina ",s," de ",c]}),i.jsx("button",{onClick:()=>o(G=>Math.min(c,G+1)),disabled:s===c,className:"p-2 text-gray-500 hover:text-gray-700 disabled:opacity-30",children:i.jsx(Xh,{className:"w-5 h-5"})})]}),b&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:()=>S(null),children:i.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-lg p-6",onClick:G=>G.stopPropagation(),children:[i.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-4",children:"Detalle del Par Q&A"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-semibold text-gray-500 uppercase mb-1",children:"Pregunta del cliente"}),i.jsx("p",{className:"text-gray-800 bg-gray-50 rounded-lg p-3 text-sm",children:b.question})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-semibold text-gray-500 uppercase mb-1",children:"Respuesta del agente"}),i.jsx("p",{className:"text-gray-800 bg-gray-50 rounded-lg p-3 text-sm whitespace-pre-wrap",children:b.answer})]}),i.jsxs("div",{className:"flex gap-4 text-sm text-gray-500",children:[i.jsxs("span",{children:["Calidad: ",i.jsx("strong",{className:"text-gray-700",children:b.quality_score})]}),i.jsxs("span",{children:["Canal: ",i.jsx("strong",{className:"text-gray-700 capitalize",children:b.channel})]}),i.jsxs("span",{children:["Estado: ",i.jsx("strong",{className:"text-gray-700",children:ih[b.status]?.label})]})]})]}),i.jsxs("div",{className:"flex gap-3 mt-6",children:[b.status!=="approved"&&i.jsx("button",{onClick:()=>{w(b.id),S(null)},className:"flex-1 px-4 py-2.5 bg-green-600 hover:bg-green-700 text-white rounded-lg transition text-sm font-medium",children:"Aprobar"}),b.status!=="rejected"&&i.jsx("button",{onClick:()=>{R(b.id),S(null)},className:"flex-1 px-4 py-2.5 bg-orange-500 hover:bg-orange-600 text-white rounded-lg transition text-sm font-medium",children:"Rechazar"}),i.jsx("button",{onClick:()=>S(null),className:"flex-1 px-4 py-2.5 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition text-sm",children:"Cerrar"})]})]})}),_&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:()=>C(!1),children:i.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-sm p-6",onClick:G=>G.stopPropagation(),children:[i.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-4",children:"Reprocesar Sesiones"}),i.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Extrae pares Q&A de conversaciones pasadas. Opcional: filtra por rango de fechas."}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Desde (opcional)"}),i.jsx("input",{type:"date",value:N.from,onChange:G=>E(Q=>({...Q,from:G.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Hasta (opcional)"}),i.jsx("input",{type:"date",value:N.to,onChange:G=>E(Q=>({...Q,to:G.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm"})]})]}),i.jsxs("div",{className:"flex gap-3 mt-6",children:[i.jsx("button",{onClick:()=>C(!1),className:"flex-1 px-4 py-2.5 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition text-sm",children:"Cancelar"}),i.jsx("button",{onClick:q,disabled:z,className:"flex-1 px-4 py-2.5 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg transition text-sm font-medium disabled:opacity-50",children:z?"Procesando...":"Reprocesar"})]})]})})]})}function Rk(){const[t,a]=j.useState([]),[s,o]=j.useState(!0),[c,u]=j.useState(!1),[f,m]=j.useState(!1),[p,g]=j.useState(null),[y,x]=j.useState({product_name:"",variant:"",price:"",currency:"CLP",notes:""}),[b,S]=j.useState(!1),[_,C]=j.useState("");j.useEffect(()=>{N()},[c]);const N=async()=>{o(!0);try{const w=await pk(!c);a(w.prices)}catch(w){console.error(w)}finally{o(!1)}},E=()=>{g(null),x({product_name:"",variant:"",price:"",currency:"CLP",notes:""}),C(""),m(!0)},z=w=>{g(w),x({product_name:w.product_name,variant:w.variant||"",price:w.price,currency:w.currency||"CLP",notes:w.notes||""}),C(""),m(!0)},T=async w=>{w.preventDefault(),C(""),S(!0);try{p?await xk(p.id,{product_name:y.product_name,variant:y.variant||null,price:Number(y.price),currency:y.currency,notes:y.notes||null}):await gk({product_name:y.product_name,variant:y.variant||null,price:Number(y.price),currency:y.currency,notes:y.notes||null}),m(!1),N()}catch(R){C(R.message)}finally{S(!1)}},k=async w=>{if(confirm("Desactivar este precio?"))try{await yk(w),N()}catch(R){alert(R.message)}};return i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-600",children:[i.jsx("input",{type:"checkbox",checked:c,onChange:w=>u(w.target.checked),className:"rounded border-gray-300"}),"Mostrar inactivos"]}),i.jsxs("button",{onClick:E,className:"flex items-center gap-2 bg-green-600 hover:bg-green-700 text-white px-4 py-2.5 rounded-lg transition font-medium text-sm",children:[i.jsx(Fh,{className:"w-4 h-4"})," Nuevo Precio"]})]}),i.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"bg-gray-50 border-b border-gray-200",children:[i.jsx("th",{className:"text-left px-4 py-3 text-xs font-semibold text-gray-500 uppercase",children:"Producto"}),i.jsx("th",{className:"text-left px-4 py-3 text-xs font-semibold text-gray-500 uppercase",children:"Variante"}),i.jsx("th",{className:"text-right px-4 py-3 text-xs font-semibold text-gray-500 uppercase",children:"Precio"}),i.jsx("th",{className:"text-center px-4 py-3 text-xs font-semibold text-gray-500 uppercase",children:"Estado"}),i.jsx("th",{className:"text-left px-4 py-3 text-xs font-semibold text-gray-500 uppercase",children:"Notas"}),i.jsx("th",{className:"text-right px-4 py-3 text-xs font-semibold text-gray-500 uppercase",children:"Acciones"})]})}),i.jsx("tbody",{className:"divide-y divide-gray-100",children:s?i.jsx("tr",{children:i.jsx("td",{colSpan:"6",className:"text-center py-8 text-gray-400",children:"Cargando..."})}):t.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:"6",className:"text-center py-12 text-gray-400",children:"No hay precios. Crea el primero."})}):t.map(w=>i.jsxs("tr",{className:`hover:bg-gray-50 ${w.is_active?"":"opacity-50"}`,children:[i.jsx("td",{className:"px-4 py-3 text-sm font-medium text-gray-800",children:w.product_name}),i.jsx("td",{className:"px-4 py-3 text-sm text-gray-500",children:w.variant||"-"}),i.jsxs("td",{className:"px-4 py-3 text-sm text-right font-mono font-medium text-gray-800",children:[w.currency," $",Number(w.price).toLocaleString("es-CL")]}),i.jsx("td",{className:"px-4 py-3 text-center",children:i.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full font-medium ${w.is_active?"bg-green-50 text-green-700":"bg-gray-100 text-gray-500"}`,children:w.is_active?"Activo":"Inactivo"})}),i.jsx("td",{className:"px-4 py-3 text-sm text-gray-500 max-w-[200px] truncate",children:w.notes||"-"}),i.jsx("td",{className:"px-4 py-3 text-right",children:i.jsxs("div",{className:"flex items-center justify-end gap-1",children:[i.jsx("button",{onClick:()=>z(w),className:"p-1.5 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg",title:"Editar",children:i.jsx(Kc,{className:"w-4 h-4"})}),w.is_active&&i.jsx("button",{onClick:()=>k(w.id),className:"p-1.5 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg",title:"Desactivar",children:i.jsx(jo,{className:"w-4 h-4"})})]})})]},w.id))})]})}),f&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:()=>m(!1),children:i.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md p-6",onClick:w=>w.stopPropagation(),children:[i.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-4",children:p?"Editar Precio":"Nuevo Precio"}),_&&i.jsx("div",{className:"bg-red-50 text-red-600 px-4 py-2 rounded-lg text-sm mb-4",children:_}),i.jsxs("form",{onSubmit:T,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Producto"}),i.jsx("input",{type:"text",value:y.product_name,onChange:w=>x({...y,product_name:w.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",required:!0,placeholder:"Ej: Colchon Spring"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Variante (opcional)"}),i.jsx("input",{type:"text",value:y.variant,onChange:w=>x({...y,variant:w.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",placeholder:"Ej: King, Queen, 2 Plazas"})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Precio"}),i.jsx("input",{type:"number",value:y.price,onChange:w=>x({...y,price:w.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",required:!0,min:"0",step:"1"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Moneda"}),i.jsxs("select",{value:y.currency,onChange:w=>x({...y,currency:w.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",children:[i.jsx("option",{value:"CLP",children:"CLP"}),i.jsx("option",{value:"USD",children:"USD"})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notas (opcional)"}),i.jsx("input",{type:"text",value:y.notes,onChange:w=>x({...y,notes:w.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",placeholder:"Ej: Precio promocional hasta Marzo"})]}),i.jsxs("div",{className:"flex gap-3 pt-2",children:[i.jsx("button",{type:"button",onClick:()=>m(!1),className:"flex-1 px-4 py-2.5 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition text-sm",children:"Cancelar"}),i.jsx("button",{type:"submit",disabled:b,className:"flex-1 px-4 py-2.5 bg-green-600 hover:bg-green-700 text-white rounded-lg transition text-sm font-medium disabled:opacity-50",children:b?"Guardando...":p?"Guardar":"Crear"})]})]})]})})]})}const Jy=`Eres un vendedor humano de Respaldos Chile que conversa por WhatsApp e Instagram.
Respaldos Chile vende respaldos de cama, cabeceras y accesorios de dormitorio.

Hablas como una persona real, cercana y profesional (chileno neutro).
Nada de lenguaje robotico, corporativo ni de catalogo.

Los mensajes deben ser cortos y naturales:
- Maximo 3-4 lineas
- Una sola idea por mensaje
- Cierra siempre con una pregunta que avance la conversacion

Si conoces el nombre del cliente ({{nombre}}), usalo naturalmente.

FLUJO DE CONVERSACION:
1. Si es primer mensaje o saludo: responde con un saludo corto y pregunta abierta tipo "en que te puedo ayudar?" o "cuentame, en que andas?". NO menciones productos, respaldos, cabeceras ni nada especifico. El cliente puede querer cualquier cosa: comprar, reclamar, preguntar por un pedido, cotizar, o algo que no tiene nada que ver con respaldos.
2. Espera a que el cliente diga que necesita antes de asumir NADA.
3. Si falta info (medida, estilo, color): pregunta antes de recomendar. Una pregunta por mensaje. NO preguntes cosas obvias ni redundantes (ej: si quiere un respaldo de cama, no preguntes "donde lo vas a poner" porque es obvio que es en su dormitorio).
4. Si ya tienes contexto: sugiere maximo 2 opciones, condicionadas a lo que dijo el cliente.
5. Si el cliente tiene dudas: responde con calma, no contradigas, confirma si no sabes.
6. Si quiere comprar o pagar: "Te conecto con alguien del equipo para cerrar eso"
7. Nunca saltes etapas: no cotices sin contexto, no recomiendes sin entender.

Reglas estrictas:
- NUNCA asumas el motivo de contacto del cliente. Pregunta primero.
- NUNCA inventes materiales, modelos, estilos ni tipos de producto. Si no tienes info concreta de lo que vendemos, di "Dejame confirmarlo con el equipo y te respondo al tiro"
- No usar listas ni formato de catalogo
- No entregar fichas tecnicas ni especificaciones duras
- No inventar precios, plazos, stock ni condiciones
- No asumir medidas, colores ni disponibilidad
- No usar frases tipo "Estimado/a cliente" o "Le informamos que..."

Nunca emitas juicios genericos de gusto como:
"queda bonito", "es lindo", "es precioso", "te va a encantar".

Las recomendaciones deben ser siempre condicionadas al contexto del cliente:
"Suele funcionar bien cuando..."
"En espacios como el tuyo..."
"Por lo que me comentas..."
"Para el uso que buscas..."

Si no tienes certeza, responde exactamente:
"Dejame confirmarlo con el equipo y te respondo al tiro"

Usa solo informacion confirmada. Puedes mejorar redaccion y trato, pero sin cambiar datos.`;function Dk(){const[t,a]=j.useState(null),[s,o]=j.useState(""),[c,u]=j.useState(""),[f,m]=j.useState(!1),[p,g]=j.useState(!0),[y,x]=j.useState(!1),[b,S]=j.useState(!1),[_,C]=j.useState(""),[N,E]=j.useState(!1),[z,T]=j.useState(null),[k,w]=j.useState(!1),[R,M]=j.useState(!1),[q,$]=j.useState([]),[G,Q]=j.useState(""),[Z,re]=j.useState(!1),[V,I]=j.useState(()=>`tester_admin_${Date.now()}`),O=j.useRef(null);j.useEffect(()=>{D()},[]);const D=async()=>{g(!0),C("");try{const H=await bk();a(H.config),o(H.config?.custom_instructions||""),u(H.config?.system_prompt||""),H.config?.system_prompt&&m(!0)}catch(H){C(H.message)}finally{g(!1)}},P=async()=>{x(!0),S(!1),C("");try{const H=await vk({...t,custom_instructions:s,system_prompt:c||null});H.config&&(a(H.config),o(H.config.custom_instructions||""),u(H.config.system_prompt||"")),S(!0),setTimeout(()=>S(!1),3e3)}catch(H){C("Error al guardar: "+H.message)}finally{x(!1)}},L=async()=>{w(!0),E(!0);try{const H=await wk();T(H)}catch(H){C(H.message)}finally{w(!1)}},W=async()=>{const H=G.trim();if(!(!H||Z)){Q(""),$(te=>[...te,{role:"user",text:H,time:new Date}]),re(!0);try{const ne=(await _k(V,H)).responses||[];ne.length>0?$(se=>[...se,...ne.map(de=>({role:"bot",text:de,time:new Date}))]):$(se=>[...se,{role:"bot",text:"(sin respuesta del bot)",time:new Date}])}catch(te){$(ne=>[...ne,{role:"system",text:"Error: "+te.message,time:new Date}])}finally{re(!1)}}},B=()=>{$([]),I(`tester_admin_${Date.now()}`)};return j.useEffect(()=>{O.current&&O.current.scrollIntoView({behavior:"smooth"})},[q]),p?i.jsx("div",{className:"flex items-center justify-center py-20",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-500"})}):i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 rounded-2xl p-8 text-white",children:i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"w-16 h-16 bg-white/20 rounded-2xl flex items-center justify-center",children:i.jsx(Qh,{className:"w-8 h-8"})}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Instrucciones para la IA"}),i.jsx("p",{className:"text-blue-200 text-sm mt-1",children:"Escribe reglas, conocimiento y procedimientos que la IA debe seguir"})]})]})}),_&&i.jsx("div",{className:"bg-red-50 border border-red-200 rounded-xl p-3 text-red-700 text-sm",children:_}),i.jsxs("div",{className:"bg-white rounded-xl border border-gray-100 shadow-sm p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Prompt del sistema (cerebro general)"}),f?i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("button",{onClick:()=>u(Jy),className:"text-xs text-gray-500 hover:text-orange-600 font-medium flex items-center gap-1",children:[i.jsx(QS,{className:"w-3.5 h-3.5"})," Restaurar default"]}),i.jsxs("button",{onClick:()=>{u(""),m(!1)},className:"text-xs text-gray-400 hover:text-red-500 font-medium flex items-center gap-1",children:[i.jsx(es,{className:"w-3.5 h-3.5"})," Quitar"]})]}):i.jsxs("button",{onClick:()=>{m(!0),c||u(Jy)},className:"text-xs text-indigo-600 hover:text-indigo-800 font-medium flex items-center gap-1",children:[i.jsx(Kc,{className:"w-3.5 h-3.5"})," Personalizar"]})]}),f?i.jsxs(i.Fragment,{children:[i.jsx("textarea",{value:c,onChange:H=>u(H.target.value),rows:12,className:"w-full px-4 py-3 border border-gray-300 rounded-xl text-sm focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 resize-y font-mono",placeholder:"Define la personalidad, tono y reglas base de la IA..."}),i.jsxs("p",{className:"mt-2 text-xs text-gray-400",children:["Este es el prompt base que define quien es la IA. Usa ",i.jsx("code",{className:"bg-gray-100 px-1 rounded",children:"{{nombre}}"})," para inyectar el nombre del cliente."]})]}):i.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 text-sm text-gray-500",children:[i.jsx("p",{children:'Usando el prompt por defecto. Haz click en "Personalizar" para editarlo.'}),i.jsxs("p",{className:"mt-1 text-xs text-gray-400",children:["Tip: Usa ",i.jsx("code",{className:"bg-gray-200 px-1 rounded",children:"{{nombre}}"})," para inyectar el nombre del cliente automaticamente."]})]})]}),i.jsxs("div",{className:"bg-white rounded-xl border border-gray-100 shadow-sm p-6",children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"Instrucciones adicionales"}),i.jsx("p",{className:"text-xs text-gray-400 mb-3",children:"Reglas especificas, conocimiento del negocio, procedimientos. Se agregan al prompt del sistema."}),i.jsx("textarea",{value:s,onChange:H=>o(H.target.value),rows:10,className:"w-full px-4 py-3 border border-gray-300 rounded-xl text-sm focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 resize-y font-mono",placeholder:`Ejemplos:
- Los modelos disponibles son: Venecia, Florencia, Roma, Milan
- Si preguntan por despacho: "Dentro de Santiago 3-5 dias habiles"
- Formas de pago: transferencia, tarjeta de credito, webpay
- Siempre ofrecer la opcion de hablar con un vendedor
- No dar informacion sobre competidores
- Horario de atencion: Lunes a Viernes 9:00 a 18:00`}),i.jsxs("div",{className:"flex items-center justify-between mt-4",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("button",{onClick:P,disabled:y,className:"flex items-center gap-2 bg-indigo-600 hover:bg-indigo-700 text-white px-5 py-2.5 rounded-lg transition font-medium text-sm disabled:opacity-50",children:[i.jsx(FS,{className:"w-4 h-4"}),y?"Guardando...":"Guardar Todo"]}),b&&i.jsxs("span",{className:"text-green-600 text-sm font-medium flex items-center gap-1",children:[i.jsx(bn,{className:"w-4 h-4"})," Guardado"]})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("button",{onClick:L,className:"flex items-center gap-2 text-sm text-gray-600 hover:text-indigo-600 font-medium transition",children:[i.jsx(Nx,{className:"w-4 h-4"})," Ver Prompt"]}),i.jsxs("button",{onClick:()=>M(!0),className:"flex items-center gap-2 bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg transition font-medium text-sm",children:[i.jsx(Sx,{className:"w-4 h-4"})," Probar IA"]})]})]})]}),i.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-5",children:[i.jsxs("h3",{className:"font-semibold text-blue-800 mb-3 flex items-center gap-2",children:[i.jsx(dh,{className:"w-5 h-5"})," Tips para mejores instrucciones"]}),i.jsxs("ul",{className:"space-y-2 text-sm text-blue-700",children:[i.jsxs("li",{className:"flex items-start gap-2",children:[i.jsx(bn,{className:"w-4 h-4 mt-0.5 flex-shrink-0"}),'Se especifico: "El despacho a Santiago demora 3-5 dias" es mejor que "informar plazos"']}),i.jsxs("li",{className:"flex items-start gap-2",children:[i.jsx(bn,{className:"w-4 h-4 mt-0.5 flex-shrink-0"}),"Incluye respuestas exactas para preguntas frecuentes"]}),i.jsxs("li",{className:"flex items-start gap-2",children:[i.jsx(bn,{className:"w-4 h-4 mt-0.5 flex-shrink-0"}),'Los precios se manejan en la tab "Precios"  no los pongas aqui']}),i.jsxs("li",{className:"flex items-start gap-2",children:[i.jsx(bn,{className:"w-4 h-4 mt-0.5 flex-shrink-0"}),'Define el tono: "Responde como vendedor amigable, tutea al cliente"']}),i.jsxs("li",{className:"flex items-start gap-2",children:[i.jsx(bn,{className:"w-4 h-4 mt-0.5 flex-shrink-0"}),'Indica que NO hacer: "Nunca ofrezcas descuentos sin autorizacion"']})]})]}),N&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:()=>E(!1),children:i.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-3xl max-h-[85vh] overflow-hidden flex flex-col",onClick:H=>H.stopPropagation(),children:[i.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex items-center justify-between",children:[i.jsxs("h2",{className:"text-lg font-bold text-gray-900 flex items-center gap-2",children:[i.jsx(Nx,{className:"w-5 h-5 text-indigo-500"})," Prompt Actual"]}),i.jsx("button",{onClick:()=>E(!1),className:"p-1.5 text-gray-400 hover:text-gray-600 rounded-lg",children:i.jsx(es,{className:"w-5 h-5"})})]}),i.jsx("div",{className:"overflow-y-auto p-6 space-y-4",children:k?i.jsx("div",{className:"flex items-center justify-center py-12",children:i.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-indigo-500"})}):z?i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex flex-wrap gap-3 text-sm",children:[i.jsxs("span",{className:"px-3 py-1 bg-indigo-50 text-indigo-700 rounded-full font-medium",children:["Modelo: ",z.model]}),i.jsxs("span",{className:"px-3 py-1 bg-green-50 text-green-700 rounded-full font-medium",children:["Conocimiento: ",z.knowledgeCount," pares"]}),i.jsxs("span",{className:"px-3 py-1 bg-blue-50 text-blue-700 rounded-full font-medium",children:["Precios: ",z.priceCount," activos"]}),i.jsxs("span",{className:"px-3 py-1 bg-purple-50 text-purple-700 rounded-full font-medium",children:["Fidelidad: ",z.fidelityLevel]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-semibold text-gray-500 uppercase mb-2",children:"System Prompt"}),i.jsx("pre",{className:"bg-gray-900 text-gray-100 rounded-xl p-4 text-sm overflow-x-auto whitespace-pre-wrap font-mono leading-relaxed",children:z.systemPrompt})]}),z.customInstructions&&i.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4",children:[i.jsx("span",{className:"text-xs font-semibold text-blue-600 uppercase",children:"Tus instrucciones (incluidas arriba)"}),i.jsx("p",{className:"text-sm text-blue-800 mt-1 whitespace-pre-wrap",children:z.customInstructions})]})]}):i.jsx("p",{className:"text-gray-400 text-center py-8",children:"Error cargando prompt"})})]})}),R&&i.jsxs("div",{className:"fixed inset-0 z-50 flex justify-end",onClick:()=>M(!1),children:[i.jsx("div",{className:"absolute inset-0 bg-black/30"}),i.jsxs("div",{className:"relative w-full max-w-md bg-white shadow-2xl flex flex-col h-full animate-in slide-in-from-right",onClick:H=>H.stopPropagation(),children:[i.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 px-5 py-4 flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3 text-white",children:[i.jsx(Sx,{className:"w-5 h-5"}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-bold text-sm",children:"Probador IA"}),i.jsx("p",{className:"text-[10px] text-purple-200",children:"Prueba tu prompt en tiempo real"})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{onClick:B,className:"text-[10px] bg-white/20 hover:bg-white/30 text-white px-2.5 py-1 rounded-full font-medium transition",children:"Nueva conv."}),i.jsx("button",{onClick:()=>M(!1),className:"p-1 text-white/70 hover:text-white rounded",children:i.jsx(es,{className:"w-5 h-5"})})]})]}),i.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-3 bg-gray-50",children:[q.length===0&&i.jsxs("div",{className:"text-center py-12",children:[i.jsx(Ln,{className:"w-10 h-10 text-gray-300 mx-auto mb-3"}),i.jsx("p",{className:"text-sm text-gray-400",children:"Escribe un mensaje para probar la IA"}),i.jsx("p",{className:"text-xs text-gray-300 mt-1",children:"Usa el mismo motor que WhatsApp real"})]}),q.map((H,te)=>i.jsx("div",{className:`flex ${H.role==="user"?"justify-end":H.role==="system"?"justify-center":"justify-start"}`,children:H.role==="system"?i.jsx("span",{className:"text-[10px] text-red-500 bg-red-50 px-3 py-1 rounded-full",children:H.text}):i.jsxs("div",{className:`max-w-[80%] rounded-2xl px-4 py-2.5 ${H.role==="user"?"bg-indigo-600 text-white":"bg-white text-gray-800 border border-gray-200 shadow-sm"}`,children:[H.role==="bot"&&i.jsx("span",{className:"text-[9px] font-semibold uppercase tracking-wider text-purple-500 block mb-1",children:"Bot IA"}),i.jsx("p",{className:"text-sm whitespace-pre-wrap",children:H.text}),i.jsx("span",{className:"text-[9px] opacity-50 block mt-1",children:H.time.toLocaleTimeString("es-CL",{hour:"2-digit",minute:"2-digit"})})]})},te)),Z&&i.jsx("div",{className:"flex justify-start",children:i.jsx("div",{className:"bg-white border border-gray-200 rounded-2xl px-4 py-3 shadow-sm",children:i.jsxs("div",{className:"flex gap-1.5",children:[i.jsx("div",{className:"w-2 h-2 bg-purple-400 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),i.jsx("div",{className:"w-2 h-2 bg-purple-400 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),i.jsx("div",{className:"w-2 h-2 bg-purple-400 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]})})}),i.jsx("div",{ref:O})]}),i.jsx("div",{className:"border-t border-gray-200 p-3 bg-white",children:i.jsxs("div",{className:"flex gap-2",children:[i.jsx("input",{type:"text",value:G,onChange:H=>Q(H.target.value),onKeyDown:H=>H.key==="Enter"&&!H.shiftKey&&W(),placeholder:"Escribe un mensaje...",className:"flex-1 px-4 py-2.5 border border-gray-300 rounded-xl text-sm focus:ring-2 focus:ring-purple-500 focus:border-purple-500",disabled:Z,autoFocus:!0}),i.jsx("button",{onClick:W,disabled:Z||!G.trim(),className:"bg-purple-600 hover:bg-purple-700 text-white p-2.5 rounded-xl transition disabled:opacity-50",children:i.jsx(Eb,{className:"w-4 h-4"})})]})})]})]})]})}function Ok(){const[t,a]=j.useState([]),[s,o]=j.useState(!0),[c,u]=j.useState(null),[f,m]=j.useState([]),[p,g]=j.useState(!1),[y,x]=j.useState(null),[b,S]=j.useState(""),[_,C]=j.useState(!1),[N,E]=j.useState(""),[z,T]=j.useState("");j.useEffect(()=>{k()},[]);const k=async()=>{o(!0),E("");try{const M=await jk();a(M.conversations||[])}catch(M){E(M.message)}finally{o(!1)}},w=async M=>{u(M),g(!0),x(null),E("");try{const q=await Nk(M);m(q.messages||[])}catch(q){E(q.message)}finally{g(!1)}},R=async M=>{if(b.trim()){C(!0),E(""),T("");try{const q=await Sk(c,M,b);T(`Correccion guardada: "${q.question?.slice(0,40)}..."  nueva respuesta aprobada`),x(null),S(""),setTimeout(()=>T(""),5e3),await w(c)}catch(q){E(q.message)}finally{C(!1)}}};return s?i.jsx("div",{className:"flex items-center justify-center py-20",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-500"})}):c?i.jsxs("div",{className:"space-y-4",children:[i.jsxs("button",{onClick:()=>{u(null),m([])},className:"flex items-center gap-2 text-sm text-gray-600 hover:text-indigo-600 font-medium transition",children:[i.jsx(ZN,{className:"w-4 h-4"})," Volver a conversaciones"]}),N&&i.jsx("div",{className:"bg-red-50 border border-red-200 rounded-xl p-3 text-red-700 text-sm",children:N}),z&&i.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-xl p-3 text-green-700 text-sm flex items-center gap-2",children:[i.jsx(bn,{className:"w-4 h-4"})," ",z]}),i.jsxs("div",{className:"bg-white rounded-xl border border-gray-100 shadow-sm p-4",children:[i.jsxs("h3",{className:"font-semibold text-gray-800 mb-4 text-sm",children:["Sesion #",c,"  ",f.length," mensajes"]}),p?i.jsx("div",{className:"flex items-center justify-center py-12",children:i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-500"})}):i.jsx("div",{className:"space-y-3 max-h-[60vh] overflow-y-auto",children:f.map(M=>i.jsx("div",{className:`flex ${M.direction==="in"?"justify-start":"justify-end"}`,children:i.jsxs("div",{className:`max-w-[75%] rounded-2xl px-4 py-2.5 ${M.direction==="in"?"bg-gray-100 text-gray-800":M.is_ai_generated?"bg-purple-100 text-purple-900 border border-purple-200":"bg-indigo-600 text-white"}`,children:[M.direction==="out"&&M.is_ai_generated&&i.jsx("span",{className:"text-[10px] font-semibold uppercase tracking-wider opacity-70 block mb-1",children:"Bot IA"}),i.jsx("p",{className:"text-sm whitespace-pre-wrap",children:M.text}),i.jsxs("div",{className:"flex items-center justify-between mt-1.5 gap-3",children:[i.jsx("span",{className:"text-[10px] opacity-60",children:new Date(M.created_at).toLocaleTimeString("es-CL",{hour:"2-digit",minute:"2-digit"})}),M.direction==="out"&&M.is_ai_generated&&M.status!=="corrected"&&i.jsxs("button",{onClick:()=>{x(M.id),S("")},className:"text-[10px] font-semibold text-purple-700 hover:text-purple-900 flex items-center gap-0.5",children:[i.jsx(US,{className:"w-3 h-3"})," Corregir"]}),M.status==="corrected"&&i.jsxs("span",{className:"text-[10px] font-semibold text-green-700 flex items-center gap-0.5",children:[i.jsx(bn,{className:"w-3 h-3"})," Corregido"]})]}),y===M.id&&i.jsxs("div",{className:"mt-3 pt-3 border-t border-purple-300",children:[i.jsx("label",{className:"block text-xs font-semibold text-purple-700 mb-1",children:"Respuesta correcta:"}),i.jsx("textarea",{value:b,onChange:q=>S(q.target.value),rows:3,className:"w-full px-3 py-2 border border-purple-300 rounded-lg text-sm text-gray-800 bg-white focus:ring-2 focus:ring-purple-500",placeholder:"Escribe la respuesta correcta que deberia dar el bot...",autoFocus:!0}),i.jsxs("div",{className:"flex gap-2 mt-2",children:[i.jsx("button",{onClick:()=>R(M.id),disabled:_||!b.trim(),className:"px-3 py-1.5 bg-purple-600 text-white rounded-lg text-xs font-medium disabled:opacity-50 hover:bg-purple-700",children:_?"Guardando...":"Guardar Correccion"}),i.jsx("button",{onClick:()=>x(null),className:"px-3 py-1.5 border border-purple-300 text-purple-700 rounded-lg text-xs hover:bg-purple-50",children:"Cancelar"})]})]})]})},M.id))})]})]}):i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 rounded-2xl p-8 text-white",children:i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"w-16 h-16 bg-white/20 rounded-2xl flex items-center justify-center",children:i.jsx(Ln,{className:"w-8 h-8"})}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Conversaciones del Bot"}),i.jsx("p",{className:"text-purple-200 text-sm mt-1",children:"Revisa y corrige las respuestas automaticas de la IA"})]})]})}),N&&i.jsx("div",{className:"bg-red-50 border border-red-200 rounded-xl p-3 text-red-700 text-sm",children:N}),t.length===0?i.jsxs("div",{className:"bg-white rounded-xl border border-gray-100 shadow-sm p-12 text-center",children:[i.jsx(Ln,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),i.jsx("p",{className:"text-gray-400",children:"Aun no hay conversaciones donde el bot haya respondido"}),i.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"Cuando la IA responda mensajes, apareceran aqui"})]}):i.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"bg-gray-50 border-b border-gray-200",children:[i.jsx("th",{className:"text-left px-4 py-3 text-xs font-semibold text-gray-500 uppercase",children:"Sesion"}),i.jsx("th",{className:"text-left px-4 py-3 text-xs font-semibold text-gray-500 uppercase",children:"Telefono"}),i.jsx("th",{className:"text-center px-4 py-3 text-xs font-semibold text-gray-500 uppercase",children:"Msgs IA"}),i.jsx("th",{className:"text-center px-4 py-3 text-xs font-semibold text-gray-500 uppercase",children:"Total"}),i.jsx("th",{className:"text-left px-4 py-3 text-xs font-semibold text-gray-500 uppercase",children:"Ultimo mensaje"}),i.jsx("th",{className:"text-left px-4 py-3 text-xs font-semibold text-gray-500 uppercase",children:"Fecha"}),i.jsx("th",{className:"text-right px-4 py-3 text-xs font-semibold text-gray-500 uppercase"})]})}),i.jsx("tbody",{className:"divide-y divide-gray-100",children:t.map(M=>i.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer",onClick:()=>w(M.sessionId),children:[i.jsxs("td",{className:"px-4 py-3 text-sm font-medium text-gray-800",children:["#",M.sessionId]}),i.jsx("td",{className:"px-4 py-3 text-sm text-gray-600 font-mono",children:M.phone}),i.jsx("td",{className:"px-4 py-3 text-center",children:i.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-medium bg-purple-50 text-purple-700",children:[i.jsx(zr,{className:"w-3 h-3"})," ",M.ai_message_count]})}),i.jsx("td",{className:"px-4 py-3 text-center text-sm text-gray-500",children:M.total_messages}),i.jsx("td",{className:"px-4 py-3 text-sm text-gray-500 max-w-[200px] truncate",children:M.last_message}),i.jsx("td",{className:"px-4 py-3 text-sm text-gray-400",children:M.last_message_at?Fr(new Date(M.last_message_at),{addSuffix:!0,locale:as}):"-"}),i.jsx("td",{className:"px-4 py-3 text-right",children:i.jsx(Gh,{className:"w-4 h-4 text-gray-400"})})]},M.sessionId))})]})})]})}function Bk(){const[t,a]=j.useState("brain"),[s,o]=j.useState(null);return j.useEffect(()=>{dk().then(c=>o(c.stats)).catch(c=>console.error("Error loading learning stats:",c))},[]),i.jsxs("div",{className:"p-8",children:[i.jsxs("div",{className:"mb-6",children:[i.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Cerebro IA - Aprendizaje"}),i.jsx("p",{className:"text-gray-500 mt-1",children:"Sistema de conocimiento adquirido por la IA"})]}),i.jsx("div",{className:"flex gap-1 mb-6 bg-gray-100 rounded-xl p-1 w-fit",children:Ek.map(c=>{const u=c.icon;return i.jsxs("button",{onClick:()=>a(c.id),className:`flex items-center gap-2 px-4 py-2.5 rounded-lg text-sm font-medium transition ${t===c.id?"bg-white text-indigo-600 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:[i.jsx(u,{className:"w-4 h-4"}),c.label]},c.id)})}),t==="brain"&&i.jsx(Ak,{}),t==="instructions"&&i.jsx(Dk,{}),t==="bot-conversations"&&i.jsx(Ok,{}),t==="dashboard"&&i.jsx(kk,{stats:s}),t==="pairs"&&i.jsx(zk,{}),t==="prices"&&i.jsx(Rk,{})]})}function Lk({children:t}){return Mt(s=>s.isAuthenticated)?t:i.jsx(kc,{to:"/login",replace:!0})}function ha({children:t}){return Mt(s=>s.agent)?.role!=="supervisor"?i.jsx(kc,{to:"/dashboard",replace:!0}):t}function Hk(){return i.jsxs(tN,{children:[i.jsx(_t,{path:"/login",element:i.jsx(v4,{})}),i.jsxs(_t,{path:"/",element:i.jsx(Lk,{children:i.jsx(y4,{})}),children:[i.jsx(_t,{index:!0,element:i.jsx(kc,{to:"/dashboard",replace:!0})}),i.jsx(_t,{path:"dashboard",element:i.jsx(h3,{})}),i.jsx(_t,{path:"conversations",element:i.jsx(p_,{})}),i.jsx(_t,{path:"agents",element:i.jsx(ha,{children:i.jsx(ck,{})})}),i.jsx(_t,{path:"departments",element:i.jsx(ha,{children:i.jsx(uk,{})})}),i.jsx(_t,{path:"flows",element:i.jsx(ha,{children:i.jsx(E_,{})})}),i.jsx(_t,{path:"flows/builder/:id?",element:i.jsx(ha,{children:i.jsx(XA,{})})}),i.jsx(_t,{path:"logs",element:i.jsx(ha,{children:i.jsx(ZA,{})})}),i.jsx(_t,{path:"leads",element:i.jsx(ha,{children:i.jsx(tk,{})})}),i.jsx(_t,{path:"analytics",element:i.jsx(ha,{children:i.jsx(ok,{})})}),i.jsx(_t,{path:"monitor",element:i.jsx(ha,{children:i.jsx(lk,{})})}),i.jsx(_t,{path:"learning",element:i.jsx(ha,{children:i.jsx(Bk,{})})})]}),i.jsx(_t,{path:"*",element:i.jsx(kc,{to:"/dashboard",replace:!0})})]})}ej.createRoot(document.getElementById("root")).render(i.jsx(Mr.StrictMode,{children:i.jsx(EN,{children:i.jsx(Hk,{})})}));
