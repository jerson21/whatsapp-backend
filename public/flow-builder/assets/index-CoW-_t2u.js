(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const u of l)if(u.type==="childList")for(const f of u.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&s(f)}).observe(document,{childList:!0,subtree:!0});function i(l){const u={};return l.integrity&&(u.integrity=l.integrity),l.referrerPolicy&&(u.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?u.credentials="include":l.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function s(l){if(l.ep)return;l.ep=!0;const u=i(l);fetch(l.href,u)}})();function ph(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var pf={exports:{}},Rs={};var D0;function ow(){if(D0)return Rs;D0=1;var t=Symbol.for("react.transitional.element"),a=Symbol.for("react.fragment");function i(s,l,u){var f=null;if(u!==void 0&&(f=""+u),l.key!==void 0&&(f=""+l.key),"key"in l){u={};for(var m in l)m!=="key"&&(u[m]=l[m])}else u=l;return l=u.ref,{$$typeof:t,type:s,key:f,ref:l!==void 0?l:null,props:u}}return Rs.Fragment=a,Rs.jsx=i,Rs.jsxs=i,Rs}var O0;function lw(){return O0||(O0=1,pf.exports=ow()),pf.exports}var c=lw(),gf={exports:{}},we={};var k0;function cw(){if(k0)return we;k0=1;var t=Symbol.for("react.transitional.element"),a=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),f=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),y=Symbol.for("react.activity"),v=Symbol.iterator;function N(R){return R===null||typeof R!="object"?null:(R=v&&R[v]||R["@@iterator"],typeof R=="function"?R:null)}var E={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A=Object.assign,w={};function j(R,U,J){this.props=R,this.context=U,this.refs=w,this.updater=J||E}j.prototype.isReactComponent={},j.prototype.setState=function(R,U){if(typeof R!="object"&&typeof R!="function"&&R!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,R,U,"setState")},j.prototype.forceUpdate=function(R){this.updater.enqueueForceUpdate(this,R,"forceUpdate")};function _(){}_.prototype=j.prototype;function S(R,U,J){this.props=R,this.context=U,this.refs=w,this.updater=J||E}var M=S.prototype=new _;M.constructor=S,A(M,j.prototype),M.isPureReactComponent=!0;var B=Array.isArray;function $(){}var k={H:null,A:null,T:null,S:null},X=Object.prototype.hasOwnProperty;function F(R,U,J){var ne=J.ref;return{$$typeof:t,type:R,key:U,ref:ne!==void 0?ne:null,props:J}}function se(R,U){return F(R.type,U,R.props)}function P(R){return typeof R=="object"&&R!==null&&R.$$typeof===t}function H(R){var U={"=":"=0",":":"=2"};return"$"+R.replace(/[=:]/g,function(J){return U[J]})}var te=/\/+/g;function L(R,U){return typeof R=="object"&&R!==null&&R.key!=null?H(""+R.key):U.toString(36)}function Z(R){switch(R.status){case"fulfilled":return R.value;case"rejected":throw R.reason;default:switch(typeof R.status=="string"?R.then($,$):(R.status="pending",R.then(function(U){R.status==="pending"&&(R.status="fulfilled",R.value=U)},function(U){R.status==="pending"&&(R.status="rejected",R.reason=U)})),R.status){case"fulfilled":return R.value;case"rejected":throw R.reason}}throw R}function z(R,U,J,ne,oe){var ue=typeof R;(ue==="undefined"||ue==="boolean")&&(R=null);var ce=!1;if(R===null)ce=!0;else switch(ue){case"bigint":case"string":case"number":ce=!0;break;case"object":switch(R.$$typeof){case t:case a:ce=!0;break;case x:return ce=R._init,z(ce(R._payload),U,J,ne,oe)}}if(ce)return oe=oe(R),ce=ne===""?"."+L(R,0):ne,B(oe)?(J="",ce!=null&&(J=ce.replace(te,"$&/")+"/"),z(oe,U,J,"",function(ve){return ve})):oe!=null&&(P(oe)&&(oe=se(oe,J+(oe.key==null||R&&R.key===oe.key?"":(""+oe.key).replace(te,"$&/")+"/")+ce)),U.push(oe)),1;ce=0;var le=ne===""?".":ne+":";if(B(R))for(var de=0;de<R.length;de++)ne=R[de],ue=le+L(ne,de),ce+=z(ne,U,J,ue,oe);else if(de=N(R),typeof de=="function")for(R=de.call(R),de=0;!(ne=R.next()).done;)ne=ne.value,ue=le+L(ne,de++),ce+=z(ne,U,J,ue,oe);else if(ue==="object"){if(typeof R.then=="function")return z(Z(R),U,J,ne,oe);throw U=String(R),Error("Objects are not valid as a React child (found: "+(U==="[object Object]"?"object with keys {"+Object.keys(R).join(", ")+"}":U)+"). If you meant to render a collection of children, use an array instead.")}return ce}function D(R,U,J){if(R==null)return R;var ne=[],oe=0;return z(R,ne,"","",function(ue){return U.call(J,ue,oe++)}),ne}function V(R){if(R._status===-1){var U=R._result;U=U(),U.then(function(J){(R._status===0||R._status===-1)&&(R._status=1,R._result=J)},function(J){(R._status===0||R._status===-1)&&(R._status=2,R._result=J)}),R._status===-1&&(R._status=0,R._result=U)}if(R._status===1)return R._result.default;throw R._result}var O=typeof reportError=="function"?reportError:function(R){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var U=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof R=="object"&&R!==null&&typeof R.message=="string"?String(R.message):String(R),error:R});if(!window.dispatchEvent(U))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",R);return}console.error(R)},Q={map:D,forEach:function(R,U,J){D(R,function(){U.apply(this,arguments)},J)},count:function(R){var U=0;return D(R,function(){U++}),U},toArray:function(R){return D(R,function(U){return U})||[]},only:function(R){if(!P(R))throw Error("React.Children.only expected to receive a single React element child.");return R}};return we.Activity=y,we.Children=Q,we.Component=j,we.Fragment=i,we.Profiler=l,we.PureComponent=S,we.StrictMode=s,we.Suspense=g,we.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=k,we.__COMPILER_RUNTIME={__proto__:null,c:function(R){return k.H.useMemoCache(R)}},we.cache=function(R){return function(){return R.apply(null,arguments)}},we.cacheSignal=function(){return null},we.cloneElement=function(R,U,J){if(R==null)throw Error("The argument must be a React element, but you passed "+R+".");var ne=A({},R.props),oe=R.key;if(U!=null)for(ue in U.key!==void 0&&(oe=""+U.key),U)!X.call(U,ue)||ue==="key"||ue==="__self"||ue==="__source"||ue==="ref"&&U.ref===void 0||(ne[ue]=U[ue]);var ue=arguments.length-2;if(ue===1)ne.children=J;else if(1<ue){for(var ce=Array(ue),le=0;le<ue;le++)ce[le]=arguments[le+2];ne.children=ce}return F(R.type,oe,ne)},we.createContext=function(R){return R={$$typeof:f,_currentValue:R,_currentValue2:R,_threadCount:0,Provider:null,Consumer:null},R.Provider=R,R.Consumer={$$typeof:u,_context:R},R},we.createElement=function(R,U,J){var ne,oe={},ue=null;if(U!=null)for(ne in U.key!==void 0&&(ue=""+U.key),U)X.call(U,ne)&&ne!=="key"&&ne!=="__self"&&ne!=="__source"&&(oe[ne]=U[ne]);var ce=arguments.length-2;if(ce===1)oe.children=J;else if(1<ce){for(var le=Array(ce),de=0;de<ce;de++)le[de]=arguments[de+2];oe.children=le}if(R&&R.defaultProps)for(ne in ce=R.defaultProps,ce)oe[ne]===void 0&&(oe[ne]=ce[ne]);return F(R,ue,oe)},we.createRef=function(){return{current:null}},we.forwardRef=function(R){return{$$typeof:m,render:R}},we.isValidElement=P,we.lazy=function(R){return{$$typeof:x,_payload:{_status:-1,_result:R},_init:V}},we.memo=function(R,U){return{$$typeof:p,type:R,compare:U===void 0?null:U}},we.startTransition=function(R){var U=k.T,J={};k.T=J;try{var ne=R(),oe=k.S;oe!==null&&oe(J,ne),typeof ne=="object"&&ne!==null&&typeof ne.then=="function"&&ne.then($,O)}catch(ue){O(ue)}finally{U!==null&&J.types!==null&&(U.types=J.types),k.T=U}},we.unstable_useCacheRefresh=function(){return k.H.useCacheRefresh()},we.use=function(R){return k.H.use(R)},we.useActionState=function(R,U,J){return k.H.useActionState(R,U,J)},we.useCallback=function(R,U){return k.H.useCallback(R,U)},we.useContext=function(R){return k.H.useContext(R)},we.useDebugValue=function(){},we.useDeferredValue=function(R,U){return k.H.useDeferredValue(R,U)},we.useEffect=function(R,U){return k.H.useEffect(R,U)},we.useEffectEvent=function(R){return k.H.useEffectEvent(R)},we.useId=function(){return k.H.useId()},we.useImperativeHandle=function(R,U,J){return k.H.useImperativeHandle(R,U,J)},we.useInsertionEffect=function(R,U){return k.H.useInsertionEffect(R,U)},we.useLayoutEffect=function(R,U){return k.H.useLayoutEffect(R,U)},we.useMemo=function(R,U){return k.H.useMemo(R,U)},we.useOptimistic=function(R,U){return k.H.useOptimistic(R,U)},we.useReducer=function(R,U,J){return k.H.useReducer(R,U,J)},we.useRef=function(R){return k.H.useRef(R)},we.useState=function(R){return k.H.useState(R)},we.useSyncExternalStore=function(R,U,J){return k.H.useSyncExternalStore(R,U,J)},we.useTransition=function(){return k.H.useTransition()},we.version="19.2.3",we}var B0;function eo(){return B0||(B0=1,gf.exports=cw()),gf.exports}var C=eo();const gr=ph(C);var yf={exports:{}},zs={},xf={exports:{}},vf={};var H0;function uw(){return H0||(H0=1,(function(t){function a(z,D){var V=z.length;z.push(D);e:for(;0<V;){var O=V-1>>>1,Q=z[O];if(0<l(Q,D))z[O]=D,z[V]=Q,V=O;else break e}}function i(z){return z.length===0?null:z[0]}function s(z){if(z.length===0)return null;var D=z[0],V=z.pop();if(V!==D){z[0]=V;e:for(var O=0,Q=z.length,R=Q>>>1;O<R;){var U=2*(O+1)-1,J=z[U],ne=U+1,oe=z[ne];if(0>l(J,V))ne<Q&&0>l(oe,J)?(z[O]=oe,z[ne]=V,O=ne):(z[O]=J,z[U]=V,O=U);else if(ne<Q&&0>l(oe,V))z[O]=oe,z[ne]=V,O=ne;else break e}}return D}function l(z,D){var V=z.sortIndex-D.sortIndex;return V!==0?V:z.id-D.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;t.unstable_now=function(){return u.now()}}else{var f=Date,m=f.now();t.unstable_now=function(){return f.now()-m}}var g=[],p=[],x=1,y=null,v=3,N=!1,E=!1,A=!1,w=!1,j=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;function M(z){for(var D=i(p);D!==null;){if(D.callback===null)s(p);else if(D.startTime<=z)s(p),D.sortIndex=D.expirationTime,a(g,D);else break;D=i(p)}}function B(z){if(A=!1,M(z),!E)if(i(g)!==null)E=!0,$||($=!0,H());else{var D=i(p);D!==null&&Z(B,D.startTime-z)}}var $=!1,k=-1,X=5,F=-1;function se(){return w?!0:!(t.unstable_now()-F<X)}function P(){if(w=!1,$){var z=t.unstable_now();F=z;var D=!0;try{e:{E=!1,A&&(A=!1,_(k),k=-1),N=!0;var V=v;try{t:{for(M(z),y=i(g);y!==null&&!(y.expirationTime>z&&se());){var O=y.callback;if(typeof O=="function"){y.callback=null,v=y.priorityLevel;var Q=O(y.expirationTime<=z);if(z=t.unstable_now(),typeof Q=="function"){y.callback=Q,M(z),D=!0;break t}y===i(g)&&s(g),M(z)}else s(g);y=i(g)}if(y!==null)D=!0;else{var R=i(p);R!==null&&Z(B,R.startTime-z),D=!1}}break e}finally{y=null,v=V,N=!1}D=void 0}}finally{D?H():$=!1}}}var H;if(typeof S=="function")H=function(){S(P)};else if(typeof MessageChannel<"u"){var te=new MessageChannel,L=te.port2;te.port1.onmessage=P,H=function(){L.postMessage(null)}}else H=function(){j(P,0)};function Z(z,D){k=j(function(){z(t.unstable_now())},D)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(z){z.callback=null},t.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):X=0<z?Math.floor(1e3/z):5},t.unstable_getCurrentPriorityLevel=function(){return v},t.unstable_next=function(z){switch(v){case 1:case 2:case 3:var D=3;break;default:D=v}var V=v;v=D;try{return z()}finally{v=V}},t.unstable_requestPaint=function(){w=!0},t.unstable_runWithPriority=function(z,D){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var V=v;v=z;try{return D()}finally{v=V}},t.unstable_scheduleCallback=function(z,D,V){var O=t.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?O+V:O):V=O,z){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=V+Q,z={id:x++,callback:D,priorityLevel:z,startTime:V,expirationTime:Q,sortIndex:-1},V>O?(z.sortIndex=V,a(p,z),i(g)===null&&z===i(p)&&(A?(_(k),k=-1):A=!0,Z(B,V-O))):(z.sortIndex=Q,a(g,z),E||N||(E=!0,$||($=!0,H()))),z},t.unstable_shouldYield=se,t.unstable_wrapCallback=function(z){var D=v;return function(){var V=v;v=D;try{return z.apply(this,arguments)}finally{v=V}}}})(vf)),vf}var L0;function dw(){return L0||(L0=1,xf.exports=uw()),xf.exports}var bf={exports:{}},bt={};var U0;function fw(){if(U0)return bt;U0=1;var t=eo();function a(g){var p="https://react.dev/errors/"+g;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var x=2;x<arguments.length;x++)p+="&args[]="+encodeURIComponent(arguments[x])}return"Minified React error #"+g+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var s={d:{f:i,r:function(){throw Error(a(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},l=Symbol.for("react.portal");function u(g,p,x){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:y==null?null:""+y,children:g,containerInfo:p,implementation:x}}var f=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(g,p){if(g==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return bt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,bt.createPortal=function(g,p){var x=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(a(299));return u(g,p,null,x)},bt.flushSync=function(g){var p=f.T,x=s.p;try{if(f.T=null,s.p=2,g)return g()}finally{f.T=p,s.p=x,s.d.f()}},bt.preconnect=function(g,p){typeof g=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,s.d.C(g,p))},bt.prefetchDNS=function(g){typeof g=="string"&&s.d.D(g)},bt.preinit=function(g,p){if(typeof g=="string"&&p&&typeof p.as=="string"){var x=p.as,y=m(x,p.crossOrigin),v=typeof p.integrity=="string"?p.integrity:void 0,N=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;x==="style"?s.d.S(g,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:y,integrity:v,fetchPriority:N}):x==="script"&&s.d.X(g,{crossOrigin:y,integrity:v,fetchPriority:N,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},bt.preinitModule=function(g,p){if(typeof g=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var x=m(p.as,p.crossOrigin);s.d.M(g,{crossOrigin:x,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&s.d.M(g)},bt.preload=function(g,p){if(typeof g=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var x=p.as,y=m(x,p.crossOrigin);s.d.L(g,x,{crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},bt.preloadModule=function(g,p){if(typeof g=="string")if(p){var x=m(p.as,p.crossOrigin);s.d.m(g,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:x,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else s.d.m(g)},bt.requestFormReset=function(g){s.d.r(g)},bt.unstable_batchedUpdates=function(g,p){return g(p)},bt.useFormState=function(g,p,x){return f.H.useFormState(g,p,x)},bt.useFormStatus=function(){return f.H.useHostTransitionStatus()},bt.version="19.2.3",bt}var $0;function xx(){if($0)return bf.exports;$0=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(a){console.error(a)}}return t(),bf.exports=fw(),bf.exports}var q0;function hw(){if(q0)return zs;q0=1;var t=dw(),a=eo(),i=xx();function s(e){var n="https://react.dev/errors/"+e;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)n+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function u(e){var n=e,r=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,(n.flags&4098)!==0&&(r=n.return),e=n.return;while(e)}return n.tag===3?r:null}function f(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function m(e){if(e.tag===31){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function g(e){if(u(e)!==e)throw Error(s(188))}function p(e){var n=e.alternate;if(!n){if(n=u(e),n===null)throw Error(s(188));return n!==e?null:e}for(var r=e,o=n;;){var d=r.return;if(d===null)break;var h=d.alternate;if(h===null){if(o=d.return,o!==null){r=o;continue}break}if(d.child===h.child){for(h=d.child;h;){if(h===r)return g(d),e;if(h===o)return g(d),n;h=h.sibling}throw Error(s(188))}if(r.return!==o.return)r=d,o=h;else{for(var b=!1,T=d.child;T;){if(T===r){b=!0,r=d,o=h;break}if(T===o){b=!0,o=d,r=h;break}T=T.sibling}if(!b){for(T=h.child;T;){if(T===r){b=!0,r=h,o=d;break}if(T===o){b=!0,o=h,r=d;break}T=T.sibling}if(!b)throw Error(s(189))}}if(r.alternate!==o)throw Error(s(190))}if(r.tag!==3)throw Error(s(188));return r.stateNode.current===r?e:n}function x(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e;for(e=e.child;e!==null;){if(n=x(e),n!==null)return n;e=e.sibling}return null}var y=Object.assign,v=Symbol.for("react.element"),N=Symbol.for("react.transitional.element"),E=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),j=Symbol.for("react.profiler"),_=Symbol.for("react.consumer"),S=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),B=Symbol.for("react.suspense"),$=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),X=Symbol.for("react.lazy"),F=Symbol.for("react.activity"),se=Symbol.for("react.memo_cache_sentinel"),P=Symbol.iterator;function H(e){return e===null||typeof e!="object"?null:(e=P&&e[P]||e["@@iterator"],typeof e=="function"?e:null)}var te=Symbol.for("react.client.reference");function L(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===te?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case A:return"Fragment";case j:return"Profiler";case w:return"StrictMode";case B:return"Suspense";case $:return"SuspenseList";case F:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case E:return"Portal";case S:return e.displayName||"Context";case _:return(e._context.displayName||"Context")+".Consumer";case M:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case k:return n=e.displayName||null,n!==null?n:L(e.type)||"Memo";case X:n=e._payload,e=e._init;try{return L(e(n))}catch{}}return null}var Z=Array.isArray,z=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,D=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,V={pending:!1,data:null,method:null,action:null},O=[],Q=-1;function R(e){return{current:e}}function U(e){0>Q||(e.current=O[Q],O[Q]=null,Q--)}function J(e,n){Q++,O[Q]=e.current,e.current=n}var ne=R(null),oe=R(null),ue=R(null),ce=R(null);function le(e,n){switch(J(ue,n),J(oe,e),J(ne,null),n.nodeType){case 9:case 11:e=(e=n.documentElement)&&(e=e.namespaceURI)?n0(e):0;break;default:if(e=n.tagName,n=n.namespaceURI)n=n0(n),e=a0(n,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}U(ne),J(ne,e)}function de(){U(ne),U(oe),U(ue)}function ve(e){e.memoizedState!==null&&J(ce,e);var n=ne.current,r=a0(n,e.type);n!==r&&(J(oe,e),J(ne,r))}function be(e){oe.current===e&&(U(ne),U(oe)),ce.current===e&&(U(ce),Cs._currentValue=V)}var he,ye;function Se(e){if(he===void 0)try{throw Error()}catch(r){var n=r.stack.trim().match(/\n( *(at )?)/);he=n&&n[1]||"",ye=-1<r.stack.indexOf(`
    at`)?" (<anonymous>)":-1<r.stack.indexOf("@")?"@unknown:0:0":""}return`
`+he+e+ye}var De=!1;function _e(e,n){if(!e||De)return"";De=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(n){var re=function(){throw Error()};if(Object.defineProperty(re.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(re,[])}catch(ee){var K=ee}Reflect.construct(e,[],re)}else{try{re.call()}catch(ee){K=ee}e.call(re.prototype)}}else{try{throw Error()}catch(ee){K=ee}(re=e())&&typeof re.catch=="function"&&re.catch(function(){})}}catch(ee){if(ee&&K&&typeof ee.stack=="string")return[ee.stack,K.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var d=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");d&&d.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var h=o.DetermineComponentFrameRoot(),b=h[0],T=h[1];if(b&&T){var q=b.split(`
`),W=T.split(`
`);for(d=o=0;o<q.length&&!q[o].includes("DetermineComponentFrameRoot");)o++;for(;d<W.length&&!W[d].includes("DetermineComponentFrameRoot");)d++;if(o===q.length||d===W.length)for(o=q.length-1,d=W.length-1;1<=o&&0<=d&&q[o]!==W[d];)d--;for(;1<=o&&0<=d;o--,d--)if(q[o]!==W[d]){if(o!==1||d!==1)do if(o--,d--,0>d||q[o]!==W[d]){var ae=`
`+q[o].replace(" at new "," at ");return e.displayName&&ae.includes("<anonymous>")&&(ae=ae.replace("<anonymous>",e.displayName)),ae}while(1<=o&&0<=d);break}}}finally{De=!1,Error.prepareStackTrace=r}return(r=e?e.displayName||e.name:"")?Se(r):""}function Je(e,n){switch(e.tag){case 26:case 27:case 5:return Se(e.type);case 16:return Se("Lazy");case 13:return e.child!==n&&n!==null?Se("Suspense Fallback"):Se("Suspense");case 19:return Se("SuspenseList");case 0:case 15:return _e(e.type,!1);case 11:return _e(e.type.render,!1);case 1:return _e(e.type,!0);case 31:return Se("Activity");default:return""}}function Et(e){try{var n="",r=null;do n+=Je(e,r),r=e,e=e.return;while(e);return n}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}var xt=Object.prototype.hasOwnProperty,an=t.unstable_scheduleCallback,Mn=t.unstable_cancelCallback,Va=t.unstable_shouldYield,Ya=t.unstable_requestPaint,ht=t.unstable_now,_i=t.unstable_getCurrentPriorityLevel,An=t.unstable_ImmediatePriority,oa=t.unstable_UserBlockingPriority,Xa=t.unstable_NormalPriority,Wc=t.unstable_LowPriority,Ci=t.unstable_IdlePriority,Kc=t.log,Jc=t.unstable_setDisableYieldValue,Ga=null,wt=null;function pn(e){if(typeof Kc=="function"&&Jc(e),wt&&typeof wt.setStrictMode=="function")try{wt.setStrictMode(Ga,e)}catch{}}var St=Math.clz32?Math.clz32:nu,eu=Math.log,tu=Math.LN2;function nu(e){return e>>>=0,e===0?32:31-(eu(e)/tu|0)|0}var Ti=256,Mi=262144,Ai=4194304;function Rn(e){var n=e&42;if(n!==0)return n;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Ri(e,n,r){var o=e.pendingLanes;if(o===0)return 0;var d=0,h=e.suspendedLanes,b=e.pingedLanes;e=e.warmLanes;var T=o&134217727;return T!==0?(o=T&~h,o!==0?d=Rn(o):(b&=T,b!==0?d=Rn(b):r||(r=T&~e,r!==0&&(d=Rn(r))))):(T=o&~h,T!==0?d=Rn(T):b!==0?d=Rn(b):r||(r=o&~e,r!==0&&(d=Rn(r)))),d===0?0:n!==0&&n!==d&&(n&h)===0&&(h=d&-d,r=n&-n,h>=r||h===32&&(r&4194048)!==0)?n:d}function Za(e,n){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&n)===0}function au(e,n){switch(e){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function mo(){var e=Ai;return Ai<<=1,(Ai&62914560)===0&&(Ai=4194304),e}function Lr(e){for(var n=[],r=0;31>r;r++)n.push(e);return n}function Qa(e,n){e.pendingLanes|=n,n!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function iu(e,n,r,o,d,h){var b=e.pendingLanes;e.pendingLanes=r,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=r,e.entangledLanes&=r,e.errorRecoveryDisabledLanes&=r,e.shellSuspendCounter=0;var T=e.entanglements,q=e.expirationTimes,W=e.hiddenUpdates;for(r=b&~r;0<r;){var ae=31-St(r),re=1<<ae;T[ae]=0,q[ae]=-1;var K=W[ae];if(K!==null)for(W[ae]=null,ae=0;ae<K.length;ae++){var ee=K[ae];ee!==null&&(ee.lane&=-536870913)}r&=~re}o!==0&&po(e,o,0),h!==0&&d===0&&e.tag!==0&&(e.suspendedLanes|=h&~(b&~n))}function po(e,n,r){e.pendingLanes|=n,e.suspendedLanes&=~n;var o=31-St(n);e.entangledLanes|=n,e.entanglements[o]=e.entanglements[o]|1073741824|r&261930}function go(e,n){var r=e.entangledLanes|=n;for(e=e.entanglements;r;){var o=31-St(r),d=1<<o;d&n|e[o]&n&&(e[o]|=n),r&=~d}}function yo(e,n){var r=n&-n;return r=(r&42)!==0?1:Ur(r),(r&(e.suspendedLanes|n))!==0?0:r}function Ur(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function $r(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function xo(){var e=D.p;return e!==0?e:(e=window.event,e===void 0?32:_0(e.type))}function vo(e,n){var r=D.p;try{return D.p=e,n()}finally{D.p=r}}var gn=Math.random().toString(36).slice(2),ct="__reactFiber$"+gn,vt="__reactProps$"+gn,zn="__reactContainer$"+gn,zi="__reactEvents$"+gn,bo="__reactListeners$"+gn,ru="__reactHandles$"+gn,wo="__reactResources$"+gn,Pa="__reactMarker$"+gn;function qr(e){delete e[ct],delete e[vt],delete e[zi],delete e[bo],delete e[ru]}function la(e){var n=e[ct];if(n)return n;for(var r=e.parentNode;r;){if(n=r[zn]||r[ct]){if(r=n.alternate,n.child!==null||r!==null&&r.child!==null)for(e=u0(e);e!==null;){if(r=e[ct])return r;e=u0(e)}return n}e=r,r=e.parentNode}return null}function ca(e){if(e=e[ct]||e[zn]){var n=e.tag;if(n===5||n===6||n===13||n===31||n===26||n===27||n===3)return e}return null}function ua(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e.stateNode;throw Error(s(33))}function da(e){var n=e[wo];return n||(n=e[wo]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function nt(e){e[Pa]=!0}var So=new Set,No={};function Dn(e,n){fa(e,n),fa(e+"Capture",n)}function fa(e,n){for(No[e]=n,e=0;e<n.length;e++)So.add(n[e])}var su=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Vr={},Eo={};function ou(e){return xt.call(Eo,e)?!0:xt.call(Vr,e)?!1:su.test(e)?Eo[e]=!0:(Vr[e]=!0,!1)}function Di(e,n,r){if(ou(n))if(r===null)e.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":e.removeAttribute(n);return;case"boolean":var o=n.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){e.removeAttribute(n);return}}e.setAttribute(n,""+r)}}function Oi(e,n,r){if(r===null)e.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttribute(n,""+r)}}function rn(e,n,r,o){if(o===null)e.removeAttribute(r);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(r);return}e.setAttributeNS(n,r,""+o)}}function jt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function jo(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function lu(e,n,r){var o=Object.getOwnPropertyDescriptor(e.constructor.prototype,n);if(!e.hasOwnProperty(n)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var d=o.get,h=o.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return d.call(this)},set:function(b){r=""+b,h.call(this,b)}}),Object.defineProperty(e,n,{enumerable:o.enumerable}),{getValue:function(){return r},setValue:function(b){r=""+b},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function ki(e){if(!e._valueTracker){var n=jo(e)?"checked":"value";e._valueTracker=lu(e,n,""+e[n])}}function _o(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var r=n.getValue(),o="";return e&&(o=jo(e)?e.checked?"true":"false":e.value),e=o,e!==r?(n.setValue(e),!0):!1}function Ia(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var cu=/[\n"\\]/g;function _t(e){return e.replace(cu,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function Fa(e,n,r,o,d,h,b,T){e.name="",b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?e.type=b:e.removeAttribute("type"),n!=null?b==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+jt(n)):e.value!==""+jt(n)&&(e.value=""+jt(n)):b!=="submit"&&b!=="reset"||e.removeAttribute("value"),n!=null?Yr(e,b,jt(n)):r!=null?Yr(e,b,jt(r)):o!=null&&e.removeAttribute("value"),d==null&&h!=null&&(e.defaultChecked=!!h),d!=null&&(e.checked=d&&typeof d!="function"&&typeof d!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?e.name=""+jt(T):e.removeAttribute("name")}function Co(e,n,r,o,d,h,b,T){if(h!=null&&typeof h!="function"&&typeof h!="symbol"&&typeof h!="boolean"&&(e.type=h),n!=null||r!=null){if(!(h!=="submit"&&h!=="reset"||n!=null)){ki(e);return}r=r!=null?""+jt(r):"",n=n!=null?""+jt(n):r,T||n===e.value||(e.value=n),e.defaultValue=n}o=o??d,o=typeof o!="function"&&typeof o!="symbol"&&!!o,e.checked=T?e.checked:!!o,e.defaultChecked=!!o,b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(e.name=b),ki(e)}function Yr(e,n,r){n==="number"&&Ia(e.ownerDocument)===e||e.defaultValue===""+r||(e.defaultValue=""+r)}function On(e,n,r,o){if(e=e.options,n){n={};for(var d=0;d<r.length;d++)n["$"+r[d]]=!0;for(r=0;r<e.length;r++)d=n.hasOwnProperty("$"+e[r].value),e[r].selected!==d&&(e[r].selected=d),d&&o&&(e[r].defaultSelected=!0)}else{for(r=""+jt(r),n=null,d=0;d<e.length;d++){if(e[d].value===r){e[d].selected=!0,o&&(e[d].defaultSelected=!0);return}n!==null||e[d].disabled||(n=e[d])}n!==null&&(n.selected=!0)}}function Wh(e,n,r){if(n!=null&&(n=""+jt(n),n!==e.value&&(e.value=n),r==null)){e.defaultValue!==n&&(e.defaultValue=n);return}e.defaultValue=r!=null?""+jt(r):""}function Kh(e,n,r,o){if(n==null){if(o!=null){if(r!=null)throw Error(s(92));if(Z(o)){if(1<o.length)throw Error(s(93));o=o[0]}r=o}r==null&&(r=""),n=r}r=jt(n),e.defaultValue=r,o=e.textContent,o===r&&o!==""&&o!==null&&(e.value=o),ki(e)}function Bi(e,n){if(n){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=n;return}}e.textContent=n}var nb=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Jh(e,n,r){var o=n.indexOf("--")===0;r==null||typeof r=="boolean"||r===""?o?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="":o?e.setProperty(n,r):typeof r!="number"||r===0||nb.has(n)?n==="float"?e.cssFloat=r:e[n]=(""+r).trim():e[n]=r+"px"}function em(e,n,r){if(n!=null&&typeof n!="object")throw Error(s(62));if(e=e.style,r!=null){for(var o in r)!r.hasOwnProperty(o)||n!=null&&n.hasOwnProperty(o)||(o.indexOf("--")===0?e.setProperty(o,""):o==="float"?e.cssFloat="":e[o]="");for(var d in n)o=n[d],n.hasOwnProperty(d)&&r[d]!==o&&Jh(e,d,o)}else for(var h in n)n.hasOwnProperty(h)&&Jh(e,h,n[h])}function uu(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ab=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ib=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function To(e){return ib.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function kn(){}var du=null;function fu(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Hi=null,Li=null;function tm(e){var n=ca(e);if(n&&(e=n.stateNode)){var r=e[vt]||null;e:switch(e=n.stateNode,n.type){case"input":if(Fa(e,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name),n=r.name,r.type==="radio"&&n!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll('input[name="'+_t(""+n)+'"][type="radio"]'),n=0;n<r.length;n++){var o=r[n];if(o!==e&&o.form===e.form){var d=o[vt]||null;if(!d)throw Error(s(90));Fa(o,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name)}}for(n=0;n<r.length;n++)o=r[n],o.form===e.form&&_o(o)}break e;case"textarea":Wh(e,r.value,r.defaultValue);break e;case"select":n=r.value,n!=null&&On(e,!!r.multiple,n,!1)}}}var hu=!1;function nm(e,n,r){if(hu)return e(n,r);hu=!0;try{var o=e(n);return o}finally{if(hu=!1,(Hi!==null||Li!==null)&&(pl(),Hi&&(n=Hi,e=Li,Li=Hi=null,tm(n),e)))for(n=0;n<e.length;n++)tm(e[n])}}function Xr(e,n){var r=e.stateNode;if(r===null)return null;var o=r[vt]||null;if(o===null)return null;r=o[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(e=e.type,o=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!o;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(s(231,n,typeof r));return r}var Bn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),mu=!1;if(Bn)try{var Gr={};Object.defineProperty(Gr,"passive",{get:function(){mu=!0}}),window.addEventListener("test",Gr,Gr),window.removeEventListener("test",Gr,Gr)}catch{mu=!1}var ha=null,pu=null,Mo=null;function am(){if(Mo)return Mo;var e,n=pu,r=n.length,o,d="value"in ha?ha.value:ha.textContent,h=d.length;for(e=0;e<r&&n[e]===d[e];e++);var b=r-e;for(o=1;o<=b&&n[r-o]===d[h-o];o++);return Mo=d.slice(e,1<o?1-o:void 0)}function Ao(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function Ro(){return!0}function im(){return!1}function Ct(e){function n(r,o,d,h,b){this._reactName=r,this._targetInst=d,this.type=o,this.nativeEvent=h,this.target=b,this.currentTarget=null;for(var T in e)e.hasOwnProperty(T)&&(r=e[T],this[T]=r?r(h):h[T]);return this.isDefaultPrevented=(h.defaultPrevented!=null?h.defaultPrevented:h.returnValue===!1)?Ro:im,this.isPropagationStopped=im,this}return y(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Ro)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Ro)},persist:function(){},isPersistent:Ro}),n}var Wa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},zo=Ct(Wa),Zr=y({},Wa,{view:0,detail:0}),rb=Ct(Zr),gu,yu,Qr,Do=y({},Zr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:vu,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Qr&&(Qr&&e.type==="mousemove"?(gu=e.screenX-Qr.screenX,yu=e.screenY-Qr.screenY):yu=gu=0,Qr=e),gu)},movementY:function(e){return"movementY"in e?e.movementY:yu}}),rm=Ct(Do),sb=y({},Do,{dataTransfer:0}),ob=Ct(sb),lb=y({},Zr,{relatedTarget:0}),xu=Ct(lb),cb=y({},Wa,{animationName:0,elapsedTime:0,pseudoElement:0}),ub=Ct(cb),db=y({},Wa,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),fb=Ct(db),hb=y({},Wa,{data:0}),sm=Ct(hb),mb={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},pb={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},gb={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function yb(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=gb[e])?!!n[e]:!1}function vu(){return yb}var xb=y({},Zr,{key:function(e){if(e.key){var n=mb[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=Ao(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?pb[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:vu,charCode:function(e){return e.type==="keypress"?Ao(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ao(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),vb=Ct(xb),bb=y({},Do,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),om=Ct(bb),wb=y({},Zr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:vu}),Sb=Ct(wb),Nb=y({},Wa,{propertyName:0,elapsedTime:0,pseudoElement:0}),Eb=Ct(Nb),jb=y({},Do,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),_b=Ct(jb),Cb=y({},Wa,{newState:0,oldState:0}),Tb=Ct(Cb),Mb=[9,13,27,32],bu=Bn&&"CompositionEvent"in window,Pr=null;Bn&&"documentMode"in document&&(Pr=document.documentMode);var Ab=Bn&&"TextEvent"in window&&!Pr,lm=Bn&&(!bu||Pr&&8<Pr&&11>=Pr),cm=" ",um=!1;function dm(e,n){switch(e){case"keyup":return Mb.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function fm(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ui=!1;function Rb(e,n){switch(e){case"compositionend":return fm(n);case"keypress":return n.which!==32?null:(um=!0,cm);case"textInput":return e=n.data,e===cm&&um?null:e;default:return null}}function zb(e,n){if(Ui)return e==="compositionend"||!bu&&dm(e,n)?(e=am(),Mo=pu=ha=null,Ui=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return lm&&n.locale!=="ko"?null:n.data;default:return null}}var Db={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function hm(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!Db[e.type]:n==="textarea"}function mm(e,n,r,o){Hi?Li?Li.push(o):Li=[o]:Hi=o,n=Sl(n,"onChange"),0<n.length&&(r=new zo("onChange","change",null,r,o),e.push({event:r,listeners:n}))}var Ir=null,Fr=null;function Ob(e){Fg(e,0)}function Oo(e){var n=ua(e);if(_o(n))return e}function pm(e,n){if(e==="change")return n}var gm=!1;if(Bn){var wu;if(Bn){var Su="oninput"in document;if(!Su){var ym=document.createElement("div");ym.setAttribute("oninput","return;"),Su=typeof ym.oninput=="function"}wu=Su}else wu=!1;gm=wu&&(!document.documentMode||9<document.documentMode)}function xm(){Ir&&(Ir.detachEvent("onpropertychange",vm),Fr=Ir=null)}function vm(e){if(e.propertyName==="value"&&Oo(Fr)){var n=[];mm(n,Fr,e,fu(e)),nm(Ob,n)}}function kb(e,n,r){e==="focusin"?(xm(),Ir=n,Fr=r,Ir.attachEvent("onpropertychange",vm)):e==="focusout"&&xm()}function Bb(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Oo(Fr)}function Hb(e,n){if(e==="click")return Oo(n)}function Lb(e,n){if(e==="input"||e==="change")return Oo(n)}function Ub(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var Ot=typeof Object.is=="function"?Object.is:Ub;function Wr(e,n){if(Ot(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var r=Object.keys(e),o=Object.keys(n);if(r.length!==o.length)return!1;for(o=0;o<r.length;o++){var d=r[o];if(!xt.call(n,d)||!Ot(e[d],n[d]))return!1}return!0}function bm(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function wm(e,n){var r=bm(e);e=0;for(var o;r;){if(r.nodeType===3){if(o=e+r.textContent.length,e<=n&&o>=n)return{node:r,offset:n-e};e=o}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=bm(r)}}function Sm(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?Sm(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function Nm(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var n=Ia(e.document);n instanceof e.HTMLIFrameElement;){try{var r=typeof n.contentWindow.location.href=="string"}catch{r=!1}if(r)e=n.contentWindow;else break;n=Ia(e.document)}return n}function Nu(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}var $b=Bn&&"documentMode"in document&&11>=document.documentMode,$i=null,Eu=null,Kr=null,ju=!1;function Em(e,n,r){var o=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;ju||$i==null||$i!==Ia(o)||(o=$i,"selectionStart"in o&&Nu(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),Kr&&Wr(Kr,o)||(Kr=o,o=Sl(Eu,"onSelect"),0<o.length&&(n=new zo("onSelect","select",null,n,r),e.push({event:n,listeners:o}),n.target=$i)))}function Ka(e,n){var r={};return r[e.toLowerCase()]=n.toLowerCase(),r["Webkit"+e]="webkit"+n,r["Moz"+e]="moz"+n,r}var qi={animationend:Ka("Animation","AnimationEnd"),animationiteration:Ka("Animation","AnimationIteration"),animationstart:Ka("Animation","AnimationStart"),transitionrun:Ka("Transition","TransitionRun"),transitionstart:Ka("Transition","TransitionStart"),transitioncancel:Ka("Transition","TransitionCancel"),transitionend:Ka("Transition","TransitionEnd")},_u={},jm={};Bn&&(jm=document.createElement("div").style,"AnimationEvent"in window||(delete qi.animationend.animation,delete qi.animationiteration.animation,delete qi.animationstart.animation),"TransitionEvent"in window||delete qi.transitionend.transition);function Ja(e){if(_u[e])return _u[e];if(!qi[e])return e;var n=qi[e],r;for(r in n)if(n.hasOwnProperty(r)&&r in jm)return _u[e]=n[r];return e}var _m=Ja("animationend"),Cm=Ja("animationiteration"),Tm=Ja("animationstart"),qb=Ja("transitionrun"),Vb=Ja("transitionstart"),Yb=Ja("transitioncancel"),Mm=Ja("transitionend"),Am=new Map,Cu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Cu.push("scrollEnd");function sn(e,n){Am.set(e,n),Dn(n,[e])}var ko=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Qt=[],Vi=0,Tu=0;function Bo(){for(var e=Vi,n=Tu=Vi=0;n<e;){var r=Qt[n];Qt[n++]=null;var o=Qt[n];Qt[n++]=null;var d=Qt[n];Qt[n++]=null;var h=Qt[n];if(Qt[n++]=null,o!==null&&d!==null){var b=o.pending;b===null?d.next=d:(d.next=b.next,b.next=d),o.pending=d}h!==0&&Rm(r,d,h)}}function Ho(e,n,r,o){Qt[Vi++]=e,Qt[Vi++]=n,Qt[Vi++]=r,Qt[Vi++]=o,Tu|=o,e.lanes|=o,e=e.alternate,e!==null&&(e.lanes|=o)}function Mu(e,n,r,o){return Ho(e,n,r,o),Lo(e)}function ei(e,n){return Ho(e,null,null,n),Lo(e)}function Rm(e,n,r){e.lanes|=r;var o=e.alternate;o!==null&&(o.lanes|=r);for(var d=!1,h=e.return;h!==null;)h.childLanes|=r,o=h.alternate,o!==null&&(o.childLanes|=r),h.tag===22&&(e=h.stateNode,e===null||e._visibility&1||(d=!0)),e=h,h=h.return;return e.tag===3?(h=e.stateNode,d&&n!==null&&(d=31-St(r),e=h.hiddenUpdates,o=e[d],o===null?e[d]=[n]:o.push(n),n.lane=r|536870912),h):null}function Lo(e){if(50<bs)throw bs=0,Ld=null,Error(s(185));for(var n=e.return;n!==null;)e=n,n=e.return;return e.tag===3?e.stateNode:null}var Yi={};function Xb(e,n,r,o){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function kt(e,n,r,o){return new Xb(e,n,r,o)}function Au(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Hn(e,n){var r=e.alternate;return r===null?(r=kt(e.tag,n,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=n,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&65011712,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,n=e.dependencies,r.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r.refCleanup=e.refCleanup,r}function zm(e,n){e.flags&=65011714;var r=e.alternate;return r===null?(e.childLanes=0,e.lanes=n,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=r.childLanes,e.lanes=r.lanes,e.child=r.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=r.memoizedProps,e.memoizedState=r.memoizedState,e.updateQueue=r.updateQueue,e.type=r.type,n=r.dependencies,e.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),e}function Uo(e,n,r,o,d,h){var b=0;if(o=e,typeof e=="function")Au(e)&&(b=1);else if(typeof e=="string")b=I2(e,r,ne.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case F:return e=kt(31,r,n,d),e.elementType=F,e.lanes=h,e;case A:return ti(r.children,d,h,n);case w:b=8,d|=24;break;case j:return e=kt(12,r,n,d|2),e.elementType=j,e.lanes=h,e;case B:return e=kt(13,r,n,d),e.elementType=B,e.lanes=h,e;case $:return e=kt(19,r,n,d),e.elementType=$,e.lanes=h,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case S:b=10;break e;case _:b=9;break e;case M:b=11;break e;case k:b=14;break e;case X:b=16,o=null;break e}b=29,r=Error(s(130,e===null?"null":typeof e,"")),o=null}return n=kt(b,r,n,d),n.elementType=e,n.type=o,n.lanes=h,n}function ti(e,n,r,o){return e=kt(7,e,o,n),e.lanes=r,e}function Ru(e,n,r){return e=kt(6,e,null,n),e.lanes=r,e}function Dm(e){var n=kt(18,null,null,0);return n.stateNode=e,n}function zu(e,n,r){return n=kt(4,e.children!==null?e.children:[],e.key,n),n.lanes=r,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}var Om=new WeakMap;function Pt(e,n){if(typeof e=="object"&&e!==null){var r=Om.get(e);return r!==void 0?r:(n={value:e,source:n,stack:Et(n)},Om.set(e,n),n)}return{value:e,source:n,stack:Et(n)}}var Xi=[],Gi=0,$o=null,Jr=0,It=[],Ft=0,ma=null,yn=1,xn="";function Ln(e,n){Xi[Gi++]=Jr,Xi[Gi++]=$o,$o=e,Jr=n}function km(e,n,r){It[Ft++]=yn,It[Ft++]=xn,It[Ft++]=ma,ma=e;var o=yn;e=xn;var d=32-St(o)-1;o&=~(1<<d),r+=1;var h=32-St(n)+d;if(30<h){var b=d-d%5;h=(o&(1<<b)-1).toString(32),o>>=b,d-=b,yn=1<<32-St(n)+d|r<<d|o,xn=h+e}else yn=1<<h|r<<d|o,xn=e}function Du(e){e.return!==null&&(Ln(e,1),km(e,1,0))}function Ou(e){for(;e===$o;)$o=Xi[--Gi],Xi[Gi]=null,Jr=Xi[--Gi],Xi[Gi]=null;for(;e===ma;)ma=It[--Ft],It[Ft]=null,xn=It[--Ft],It[Ft]=null,yn=It[--Ft],It[Ft]=null}function Bm(e,n){It[Ft++]=yn,It[Ft++]=xn,It[Ft++]=ma,yn=n.id,xn=n.overflow,ma=e}var mt=null,Ge=null,Re=!1,pa=null,Wt=!1,ku=Error(s(519));function ga(e){var n=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw es(Pt(n,e)),ku}function Hm(e){var n=e.stateNode,r=e.type,o=e.memoizedProps;switch(n[ct]=e,n[vt]=o,r){case"dialog":Te("cancel",n),Te("close",n);break;case"iframe":case"object":case"embed":Te("load",n);break;case"video":case"audio":for(r=0;r<Ss.length;r++)Te(Ss[r],n);break;case"source":Te("error",n);break;case"img":case"image":case"link":Te("error",n),Te("load",n);break;case"details":Te("toggle",n);break;case"input":Te("invalid",n),Co(n,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0);break;case"select":Te("invalid",n);break;case"textarea":Te("invalid",n),Kh(n,o.value,o.defaultValue,o.children)}r=o.children,typeof r!="string"&&typeof r!="number"&&typeof r!="bigint"||n.textContent===""+r||o.suppressHydrationWarning===!0||e0(n.textContent,r)?(o.popover!=null&&(Te("beforetoggle",n),Te("toggle",n)),o.onScroll!=null&&Te("scroll",n),o.onScrollEnd!=null&&Te("scrollend",n),o.onClick!=null&&(n.onclick=kn),n=!0):n=!1,n||ga(e,!0)}function Lm(e){for(mt=e.return;mt;)switch(mt.tag){case 5:case 31:case 13:Wt=!1;return;case 27:case 3:Wt=!0;return;default:mt=mt.return}}function Zi(e){if(e!==mt)return!1;if(!Re)return Lm(e),Re=!0,!1;var n=e.tag,r;if((r=n!==3&&n!==27)&&((r=n===5)&&(r=e.type,r=!(r!=="form"&&r!=="button")||Jd(e.type,e.memoizedProps)),r=!r),r&&Ge&&ga(e),Lm(e),n===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));Ge=c0(e)}else if(n===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));Ge=c0(e)}else n===27?(n=Ge,Aa(e.type)?(e=rf,rf=null,Ge=e):Ge=n):Ge=mt?Jt(e.stateNode.nextSibling):null;return!0}function ni(){Ge=mt=null,Re=!1}function Bu(){var e=pa;return e!==null&&(Rt===null?Rt=e:Rt.push.apply(Rt,e),pa=null),e}function es(e){pa===null?pa=[e]:pa.push(e)}var Hu=R(null),ai=null,Un=null;function ya(e,n,r){J(Hu,n._currentValue),n._currentValue=r}function $n(e){e._currentValue=Hu.current,U(Hu)}function Lu(e,n,r){for(;e!==null;){var o=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,o!==null&&(o.childLanes|=n)):o!==null&&(o.childLanes&n)!==n&&(o.childLanes|=n),e===r)break;e=e.return}}function Uu(e,n,r,o){var d=e.child;for(d!==null&&(d.return=e);d!==null;){var h=d.dependencies;if(h!==null){var b=d.child;h=h.firstContext;e:for(;h!==null;){var T=h;h=d;for(var q=0;q<n.length;q++)if(T.context===n[q]){h.lanes|=r,T=h.alternate,T!==null&&(T.lanes|=r),Lu(h.return,r,e),o||(b=null);break e}h=T.next}}else if(d.tag===18){if(b=d.return,b===null)throw Error(s(341));b.lanes|=r,h=b.alternate,h!==null&&(h.lanes|=r),Lu(b,r,e),b=null}else b=d.child;if(b!==null)b.return=d;else for(b=d;b!==null;){if(b===e){b=null;break}if(d=b.sibling,d!==null){d.return=b.return,b=d;break}b=b.return}d=b}}function Qi(e,n,r,o){e=null;for(var d=n,h=!1;d!==null;){if(!h){if((d.flags&524288)!==0)h=!0;else if((d.flags&262144)!==0)break}if(d.tag===10){var b=d.alternate;if(b===null)throw Error(s(387));if(b=b.memoizedProps,b!==null){var T=d.type;Ot(d.pendingProps.value,b.value)||(e!==null?e.push(T):e=[T])}}else if(d===ce.current){if(b=d.alternate,b===null)throw Error(s(387));b.memoizedState.memoizedState!==d.memoizedState.memoizedState&&(e!==null?e.push(Cs):e=[Cs])}d=d.return}e!==null&&Uu(n,e,r,o),n.flags|=262144}function qo(e){for(e=e.firstContext;e!==null;){if(!Ot(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function ii(e){ai=e,Un=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function pt(e){return Um(ai,e)}function Vo(e,n){return ai===null&&ii(e),Um(e,n)}function Um(e,n){var r=n._currentValue;if(n={context:n,memoizedValue:r,next:null},Un===null){if(e===null)throw Error(s(308));Un=n,e.dependencies={lanes:0,firstContext:n},e.flags|=524288}else Un=Un.next=n;return r}var Gb=typeof AbortController<"u"?AbortController:function(){var e=[],n=this.signal={aborted:!1,addEventListener:function(r,o){e.push(o)}};this.abort=function(){n.aborted=!0,e.forEach(function(r){return r()})}},Zb=t.unstable_scheduleCallback,Qb=t.unstable_NormalPriority,at={$$typeof:S,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function $u(){return{controller:new Gb,data:new Map,refCount:0}}function ts(e){e.refCount--,e.refCount===0&&Zb(Qb,function(){e.controller.abort()})}var ns=null,qu=0,Pi=0,Ii=null;function Pb(e,n){if(ns===null){var r=ns=[];qu=0,Pi=Xd(),Ii={status:"pending",value:void 0,then:function(o){r.push(o)}}}return qu++,n.then($m,$m),n}function $m(){if(--qu===0&&ns!==null){Ii!==null&&(Ii.status="fulfilled");var e=ns;ns=null,Pi=0,Ii=null;for(var n=0;n<e.length;n++)(0,e[n])()}}function Ib(e,n){var r=[],o={status:"pending",value:null,reason:null,then:function(d){r.push(d)}};return e.then(function(){o.status="fulfilled",o.value=n;for(var d=0;d<r.length;d++)(0,r[d])(n)},function(d){for(o.status="rejected",o.reason=d,d=0;d<r.length;d++)(0,r[d])(void 0)}),o}var qm=z.S;z.S=function(e,n){Eg=ht(),typeof n=="object"&&n!==null&&typeof n.then=="function"&&Pb(e,n),qm!==null&&qm(e,n)};var ri=R(null);function Vu(){var e=ri.current;return e!==null?e:Xe.pooledCache}function Yo(e,n){n===null?J(ri,ri.current):J(ri,n.pool)}function Vm(){var e=Vu();return e===null?null:{parent:at._currentValue,pool:e}}var Fi=Error(s(460)),Yu=Error(s(474)),Xo=Error(s(542)),Go={then:function(){}};function Ym(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Xm(e,n,r){switch(r=e[r],r===void 0?e.push(n):r!==n&&(n.then(kn,kn),n=r),n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,Zm(e),e;default:if(typeof n.status=="string")n.then(kn,kn);else{if(e=Xe,e!==null&&100<e.shellSuspendCounter)throw Error(s(482));e=n,e.status="pending",e.then(function(o){if(n.status==="pending"){var d=n;d.status="fulfilled",d.value=o}},function(o){if(n.status==="pending"){var d=n;d.status="rejected",d.reason=o}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,Zm(e),e}throw oi=n,Fi}}function si(e){try{var n=e._init;return n(e._payload)}catch(r){throw r!==null&&typeof r=="object"&&typeof r.then=="function"?(oi=r,Fi):r}}var oi=null;function Gm(){if(oi===null)throw Error(s(459));var e=oi;return oi=null,e}function Zm(e){if(e===Fi||e===Xo)throw Error(s(483))}var Wi=null,as=0;function Zo(e){var n=as;return as+=1,Wi===null&&(Wi=[]),Xm(Wi,e,n)}function is(e,n){n=n.props.ref,e.ref=n!==void 0?n:null}function Qo(e,n){throw n.$$typeof===v?Error(s(525)):(e=Object.prototype.toString.call(n),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)))}function Qm(e){function n(G,Y){if(e){var I=G.deletions;I===null?(G.deletions=[Y],G.flags|=16):I.push(Y)}}function r(G,Y){if(!e)return null;for(;Y!==null;)n(G,Y),Y=Y.sibling;return null}function o(G){for(var Y=new Map;G!==null;)G.key!==null?Y.set(G.key,G):Y.set(G.index,G),G=G.sibling;return Y}function d(G,Y){return G=Hn(G,Y),G.index=0,G.sibling=null,G}function h(G,Y,I){return G.index=I,e?(I=G.alternate,I!==null?(I=I.index,I<Y?(G.flags|=67108866,Y):I):(G.flags|=67108866,Y)):(G.flags|=1048576,Y)}function b(G){return e&&G.alternate===null&&(G.flags|=67108866),G}function T(G,Y,I,ie){return Y===null||Y.tag!==6?(Y=Ru(I,G.mode,ie),Y.return=G,Y):(Y=d(Y,I),Y.return=G,Y)}function q(G,Y,I,ie){var ge=I.type;return ge===A?ae(G,Y,I.props.children,ie,I.key):Y!==null&&(Y.elementType===ge||typeof ge=="object"&&ge!==null&&ge.$$typeof===X&&si(ge)===Y.type)?(Y=d(Y,I.props),is(Y,I),Y.return=G,Y):(Y=Uo(I.type,I.key,I.props,null,G.mode,ie),is(Y,I),Y.return=G,Y)}function W(G,Y,I,ie){return Y===null||Y.tag!==4||Y.stateNode.containerInfo!==I.containerInfo||Y.stateNode.implementation!==I.implementation?(Y=zu(I,G.mode,ie),Y.return=G,Y):(Y=d(Y,I.children||[]),Y.return=G,Y)}function ae(G,Y,I,ie,ge){return Y===null||Y.tag!==7?(Y=ti(I,G.mode,ie,ge),Y.return=G,Y):(Y=d(Y,I),Y.return=G,Y)}function re(G,Y,I){if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return Y=Ru(""+Y,G.mode,I),Y.return=G,Y;if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case N:return I=Uo(Y.type,Y.key,Y.props,null,G.mode,I),is(I,Y),I.return=G,I;case E:return Y=zu(Y,G.mode,I),Y.return=G,Y;case X:return Y=si(Y),re(G,Y,I)}if(Z(Y)||H(Y))return Y=ti(Y,G.mode,I,null),Y.return=G,Y;if(typeof Y.then=="function")return re(G,Zo(Y),I);if(Y.$$typeof===S)return re(G,Vo(G,Y),I);Qo(G,Y)}return null}function K(G,Y,I,ie){var ge=Y!==null?Y.key:null;if(typeof I=="string"&&I!==""||typeof I=="number"||typeof I=="bigint")return ge!==null?null:T(G,Y,""+I,ie);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case N:return I.key===ge?q(G,Y,I,ie):null;case E:return I.key===ge?W(G,Y,I,ie):null;case X:return I=si(I),K(G,Y,I,ie)}if(Z(I)||H(I))return ge!==null?null:ae(G,Y,I,ie,null);if(typeof I.then=="function")return K(G,Y,Zo(I),ie);if(I.$$typeof===S)return K(G,Y,Vo(G,I),ie);Qo(G,I)}return null}function ee(G,Y,I,ie,ge){if(typeof ie=="string"&&ie!==""||typeof ie=="number"||typeof ie=="bigint")return G=G.get(I)||null,T(Y,G,""+ie,ge);if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case N:return G=G.get(ie.key===null?I:ie.key)||null,q(Y,G,ie,ge);case E:return G=G.get(ie.key===null?I:ie.key)||null,W(Y,G,ie,ge);case X:return ie=si(ie),ee(G,Y,I,ie,ge)}if(Z(ie)||H(ie))return G=G.get(I)||null,ae(Y,G,ie,ge,null);if(typeof ie.then=="function")return ee(G,Y,I,Zo(ie),ge);if(ie.$$typeof===S)return ee(G,Y,I,Vo(Y,ie),ge);Qo(Y,ie)}return null}function fe(G,Y,I,ie){for(var ge=null,Oe=null,me=Y,Ee=Y=0,Ae=null;me!==null&&Ee<I.length;Ee++){me.index>Ee?(Ae=me,me=null):Ae=me.sibling;var ke=K(G,me,I[Ee],ie);if(ke===null){me===null&&(me=Ae);break}e&&me&&ke.alternate===null&&n(G,me),Y=h(ke,Y,Ee),Oe===null?ge=ke:Oe.sibling=ke,Oe=ke,me=Ae}if(Ee===I.length)return r(G,me),Re&&Ln(G,Ee),ge;if(me===null){for(;Ee<I.length;Ee++)me=re(G,I[Ee],ie),me!==null&&(Y=h(me,Y,Ee),Oe===null?ge=me:Oe.sibling=me,Oe=me);return Re&&Ln(G,Ee),ge}for(me=o(me);Ee<I.length;Ee++)Ae=ee(me,G,Ee,I[Ee],ie),Ae!==null&&(e&&Ae.alternate!==null&&me.delete(Ae.key===null?Ee:Ae.key),Y=h(Ae,Y,Ee),Oe===null?ge=Ae:Oe.sibling=Ae,Oe=Ae);return e&&me.forEach(function(ka){return n(G,ka)}),Re&&Ln(G,Ee),ge}function xe(G,Y,I,ie){if(I==null)throw Error(s(151));for(var ge=null,Oe=null,me=Y,Ee=Y=0,Ae=null,ke=I.next();me!==null&&!ke.done;Ee++,ke=I.next()){me.index>Ee?(Ae=me,me=null):Ae=me.sibling;var ka=K(G,me,ke.value,ie);if(ka===null){me===null&&(me=Ae);break}e&&me&&ka.alternate===null&&n(G,me),Y=h(ka,Y,Ee),Oe===null?ge=ka:Oe.sibling=ka,Oe=ka,me=Ae}if(ke.done)return r(G,me),Re&&Ln(G,Ee),ge;if(me===null){for(;!ke.done;Ee++,ke=I.next())ke=re(G,ke.value,ie),ke!==null&&(Y=h(ke,Y,Ee),Oe===null?ge=ke:Oe.sibling=ke,Oe=ke);return Re&&Ln(G,Ee),ge}for(me=o(me);!ke.done;Ee++,ke=I.next())ke=ee(me,G,Ee,ke.value,ie),ke!==null&&(e&&ke.alternate!==null&&me.delete(ke.key===null?Ee:ke.key),Y=h(ke,Y,Ee),Oe===null?ge=ke:Oe.sibling=ke,Oe=ke);return e&&me.forEach(function(sw){return n(G,sw)}),Re&&Ln(G,Ee),ge}function Ye(G,Y,I,ie){if(typeof I=="object"&&I!==null&&I.type===A&&I.key===null&&(I=I.props.children),typeof I=="object"&&I!==null){switch(I.$$typeof){case N:e:{for(var ge=I.key;Y!==null;){if(Y.key===ge){if(ge=I.type,ge===A){if(Y.tag===7){r(G,Y.sibling),ie=d(Y,I.props.children),ie.return=G,G=ie;break e}}else if(Y.elementType===ge||typeof ge=="object"&&ge!==null&&ge.$$typeof===X&&si(ge)===Y.type){r(G,Y.sibling),ie=d(Y,I.props),is(ie,I),ie.return=G,G=ie;break e}r(G,Y);break}else n(G,Y);Y=Y.sibling}I.type===A?(ie=ti(I.props.children,G.mode,ie,I.key),ie.return=G,G=ie):(ie=Uo(I.type,I.key,I.props,null,G.mode,ie),is(ie,I),ie.return=G,G=ie)}return b(G);case E:e:{for(ge=I.key;Y!==null;){if(Y.key===ge)if(Y.tag===4&&Y.stateNode.containerInfo===I.containerInfo&&Y.stateNode.implementation===I.implementation){r(G,Y.sibling),ie=d(Y,I.children||[]),ie.return=G,G=ie;break e}else{r(G,Y);break}else n(G,Y);Y=Y.sibling}ie=zu(I,G.mode,ie),ie.return=G,G=ie}return b(G);case X:return I=si(I),Ye(G,Y,I,ie)}if(Z(I))return fe(G,Y,I,ie);if(H(I)){if(ge=H(I),typeof ge!="function")throw Error(s(150));return I=ge.call(I),xe(G,Y,I,ie)}if(typeof I.then=="function")return Ye(G,Y,Zo(I),ie);if(I.$$typeof===S)return Ye(G,Y,Vo(G,I),ie);Qo(G,I)}return typeof I=="string"&&I!==""||typeof I=="number"||typeof I=="bigint"?(I=""+I,Y!==null&&Y.tag===6?(r(G,Y.sibling),ie=d(Y,I),ie.return=G,G=ie):(r(G,Y),ie=Ru(I,G.mode,ie),ie.return=G,G=ie),b(G)):r(G,Y)}return function(G,Y,I,ie){try{as=0;var ge=Ye(G,Y,I,ie);return Wi=null,ge}catch(me){if(me===Fi||me===Xo)throw me;var Oe=kt(29,me,null,G.mode);return Oe.lanes=ie,Oe.return=G,Oe}}}var li=Qm(!0),Pm=Qm(!1),xa=!1;function Xu(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Gu(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function va(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function ba(e,n,r){var o=e.updateQueue;if(o===null)return null;if(o=o.shared,(Be&2)!==0){var d=o.pending;return d===null?n.next=n:(n.next=d.next,d.next=n),o.pending=n,n=Lo(e),Rm(e,null,r),n}return Ho(e,o,n,r),Lo(e)}function rs(e,n,r){if(n=n.updateQueue,n!==null&&(n=n.shared,(r&4194048)!==0)){var o=n.lanes;o&=e.pendingLanes,r|=o,n.lanes=r,go(e,r)}}function Zu(e,n){var r=e.updateQueue,o=e.alternate;if(o!==null&&(o=o.updateQueue,r===o)){var d=null,h=null;if(r=r.firstBaseUpdate,r!==null){do{var b={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};h===null?d=h=b:h=h.next=b,r=r.next}while(r!==null);h===null?d=h=n:h=h.next=n}else d=h=n;r={baseState:o.baseState,firstBaseUpdate:d,lastBaseUpdate:h,shared:o.shared,callbacks:o.callbacks},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=n:e.next=n,r.lastBaseUpdate=n}var Qu=!1;function ss(){if(Qu){var e=Ii;if(e!==null)throw e}}function os(e,n,r,o){Qu=!1;var d=e.updateQueue;xa=!1;var h=d.firstBaseUpdate,b=d.lastBaseUpdate,T=d.shared.pending;if(T!==null){d.shared.pending=null;var q=T,W=q.next;q.next=null,b===null?h=W:b.next=W,b=q;var ae=e.alternate;ae!==null&&(ae=ae.updateQueue,T=ae.lastBaseUpdate,T!==b&&(T===null?ae.firstBaseUpdate=W:T.next=W,ae.lastBaseUpdate=q))}if(h!==null){var re=d.baseState;b=0,ae=W=q=null,T=h;do{var K=T.lane&-536870913,ee=K!==T.lane;if(ee?(Me&K)===K:(o&K)===K){K!==0&&K===Pi&&(Qu=!0),ae!==null&&(ae=ae.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});e:{var fe=e,xe=T;K=n;var Ye=r;switch(xe.tag){case 1:if(fe=xe.payload,typeof fe=="function"){re=fe.call(Ye,re,K);break e}re=fe;break e;case 3:fe.flags=fe.flags&-65537|128;case 0:if(fe=xe.payload,K=typeof fe=="function"?fe.call(Ye,re,K):fe,K==null)break e;re=y({},re,K);break e;case 2:xa=!0}}K=T.callback,K!==null&&(e.flags|=64,ee&&(e.flags|=8192),ee=d.callbacks,ee===null?d.callbacks=[K]:ee.push(K))}else ee={lane:K,tag:T.tag,payload:T.payload,callback:T.callback,next:null},ae===null?(W=ae=ee,q=re):ae=ae.next=ee,b|=K;if(T=T.next,T===null){if(T=d.shared.pending,T===null)break;ee=T,T=ee.next,ee.next=null,d.lastBaseUpdate=ee,d.shared.pending=null}}while(!0);ae===null&&(q=re),d.baseState=q,d.firstBaseUpdate=W,d.lastBaseUpdate=ae,h===null&&(d.shared.lanes=0),ja|=b,e.lanes=b,e.memoizedState=re}}function Im(e,n){if(typeof e!="function")throw Error(s(191,e));e.call(n)}function Fm(e,n){var r=e.callbacks;if(r!==null)for(e.callbacks=null,e=0;e<r.length;e++)Im(r[e],n)}var Ki=R(null),Po=R(0);function Wm(e,n){e=In,J(Po,e),J(Ki,n),In=e|n.baseLanes}function Pu(){J(Po,In),J(Ki,Ki.current)}function Iu(){In=Po.current,U(Ki),U(Po)}var Bt=R(null),Kt=null;function wa(e){var n=e.alternate;J(et,et.current&1),J(Bt,e),Kt===null&&(n===null||Ki.current!==null||n.memoizedState!==null)&&(Kt=e)}function Fu(e){J(et,et.current),J(Bt,e),Kt===null&&(Kt=e)}function Km(e){e.tag===22?(J(et,et.current),J(Bt,e),Kt===null&&(Kt=e)):Sa()}function Sa(){J(et,et.current),J(Bt,Bt.current)}function Ht(e){U(Bt),Kt===e&&(Kt=null),U(et)}var et=R(0);function Io(e){for(var n=e;n!==null;){if(n.tag===13){var r=n.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||nf(r)||af(r)))return n}else if(n.tag===19&&(n.memoizedProps.revealOrder==="forwards"||n.memoizedProps.revealOrder==="backwards"||n.memoizedProps.revealOrder==="unstable_legacy-backwards"||n.memoizedProps.revealOrder==="together")){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var qn=0,Ne=null,qe=null,it=null,Fo=!1,Ji=!1,ci=!1,Wo=0,ls=0,er=null,Fb=0;function We(){throw Error(s(321))}function Wu(e,n){if(n===null)return!1;for(var r=0;r<n.length&&r<e.length;r++)if(!Ot(e[r],n[r]))return!1;return!0}function Ku(e,n,r,o,d,h){return qn=h,Ne=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,z.H=e===null||e.memoizedState===null?kp:hd,ci=!1,h=r(o,d),ci=!1,Ji&&(h=ep(n,r,o,d)),Jm(e),h}function Jm(e){z.H=ds;var n=qe!==null&&qe.next!==null;if(qn=0,it=qe=Ne=null,Fo=!1,ls=0,er=null,n)throw Error(s(300));e===null||rt||(e=e.dependencies,e!==null&&qo(e)&&(rt=!0))}function ep(e,n,r,o){Ne=e;var d=0;do{if(Ji&&(er=null),ls=0,Ji=!1,25<=d)throw Error(s(301));if(d+=1,it=qe=null,e.updateQueue!=null){var h=e.updateQueue;h.lastEffect=null,h.events=null,h.stores=null,h.memoCache!=null&&(h.memoCache.index=0)}z.H=Bp,h=n(r,o)}while(Ji);return h}function Wb(){var e=z.H,n=e.useState()[0];return n=typeof n.then=="function"?cs(n):n,e=e.useState()[0],(qe!==null?qe.memoizedState:null)!==e&&(Ne.flags|=1024),n}function Ju(){var e=Wo!==0;return Wo=0,e}function ed(e,n,r){n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~r}function td(e){if(Fo){for(e=e.memoizedState;e!==null;){var n=e.queue;n!==null&&(n.pending=null),e=e.next}Fo=!1}qn=0,it=qe=Ne=null,Ji=!1,ls=Wo=0,er=null}function Nt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return it===null?Ne.memoizedState=it=e:it=it.next=e,it}function tt(){if(qe===null){var e=Ne.alternate;e=e!==null?e.memoizedState:null}else e=qe.next;var n=it===null?Ne.memoizedState:it.next;if(n!==null)it=n,qe=e;else{if(e===null)throw Ne.alternate===null?Error(s(467)):Error(s(310));qe=e,e={memoizedState:qe.memoizedState,baseState:qe.baseState,baseQueue:qe.baseQueue,queue:qe.queue,next:null},it===null?Ne.memoizedState=it=e:it=it.next=e}return it}function Ko(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function cs(e){var n=ls;return ls+=1,er===null&&(er=[]),e=Xm(er,e,n),n=Ne,(it===null?n.memoizedState:it.next)===null&&(n=n.alternate,z.H=n===null||n.memoizedState===null?kp:hd),e}function Jo(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return cs(e);if(e.$$typeof===S)return pt(e)}throw Error(s(438,String(e)))}function nd(e){var n=null,r=Ne.updateQueue;if(r!==null&&(n=r.memoCache),n==null){var o=Ne.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(n={data:o.data.map(function(d){return d.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),r===null&&(r=Ko(),Ne.updateQueue=r),r.memoCache=n,r=n.data[n.index],r===void 0)for(r=n.data[n.index]=Array(e),o=0;o<e;o++)r[o]=se;return n.index++,r}function Vn(e,n){return typeof n=="function"?n(e):n}function el(e){var n=tt();return ad(n,qe,e)}function ad(e,n,r){var o=e.queue;if(o===null)throw Error(s(311));o.lastRenderedReducer=r;var d=e.baseQueue,h=o.pending;if(h!==null){if(d!==null){var b=d.next;d.next=h.next,h.next=b}n.baseQueue=d=h,o.pending=null}if(h=e.baseState,d===null)e.memoizedState=h;else{n=d.next;var T=b=null,q=null,W=n,ae=!1;do{var re=W.lane&-536870913;if(re!==W.lane?(Me&re)===re:(qn&re)===re){var K=W.revertLane;if(K===0)q!==null&&(q=q.next={lane:0,revertLane:0,gesture:null,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null}),re===Pi&&(ae=!0);else if((qn&K)===K){W=W.next,K===Pi&&(ae=!0);continue}else re={lane:0,revertLane:W.revertLane,gesture:null,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null},q===null?(T=q=re,b=h):q=q.next=re,Ne.lanes|=K,ja|=K;re=W.action,ci&&r(h,re),h=W.hasEagerState?W.eagerState:r(h,re)}else K={lane:re,revertLane:W.revertLane,gesture:W.gesture,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null},q===null?(T=q=K,b=h):q=q.next=K,Ne.lanes|=re,ja|=re;W=W.next}while(W!==null&&W!==n);if(q===null?b=h:q.next=T,!Ot(h,e.memoizedState)&&(rt=!0,ae&&(r=Ii,r!==null)))throw r;e.memoizedState=h,e.baseState=b,e.baseQueue=q,o.lastRenderedState=h}return d===null&&(o.lanes=0),[e.memoizedState,o.dispatch]}function id(e){var n=tt(),r=n.queue;if(r===null)throw Error(s(311));r.lastRenderedReducer=e;var o=r.dispatch,d=r.pending,h=n.memoizedState;if(d!==null){r.pending=null;var b=d=d.next;do h=e(h,b.action),b=b.next;while(b!==d);Ot(h,n.memoizedState)||(rt=!0),n.memoizedState=h,n.baseQueue===null&&(n.baseState=h),r.lastRenderedState=h}return[h,o]}function tp(e,n,r){var o=Ne,d=tt(),h=Re;if(h){if(r===void 0)throw Error(s(407));r=r()}else r=n();var b=!Ot((qe||d).memoizedState,r);if(b&&(d.memoizedState=r,rt=!0),d=d.queue,od(ip.bind(null,o,d,e),[e]),d.getSnapshot!==n||b||it!==null&&it.memoizedState.tag&1){if(o.flags|=2048,tr(9,{destroy:void 0},ap.bind(null,o,d,r,n),null),Xe===null)throw Error(s(349));h||(qn&127)!==0||np(o,n,r)}return r}function np(e,n,r){e.flags|=16384,e={getSnapshot:n,value:r},n=Ne.updateQueue,n===null?(n=Ko(),Ne.updateQueue=n,n.stores=[e]):(r=n.stores,r===null?n.stores=[e]:r.push(e))}function ap(e,n,r,o){n.value=r,n.getSnapshot=o,rp(n)&&sp(e)}function ip(e,n,r){return r(function(){rp(n)&&sp(e)})}function rp(e){var n=e.getSnapshot;e=e.value;try{var r=n();return!Ot(e,r)}catch{return!0}}function sp(e){var n=ei(e,2);n!==null&&zt(n,e,2)}function rd(e){var n=Nt();if(typeof e=="function"){var r=e;if(e=r(),ci){pn(!0);try{r()}finally{pn(!1)}}}return n.memoizedState=n.baseState=e,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vn,lastRenderedState:e},n}function op(e,n,r,o){return e.baseState=r,ad(e,qe,typeof o=="function"?o:Vn)}function Kb(e,n,r,o,d){if(al(e))throw Error(s(485));if(e=n.action,e!==null){var h={payload:d,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(b){h.listeners.push(b)}};z.T!==null?r(!0):h.isTransition=!1,o(h),r=n.pending,r===null?(h.next=n.pending=h,lp(n,h)):(h.next=r.next,n.pending=r.next=h)}}function lp(e,n){var r=n.action,o=n.payload,d=e.state;if(n.isTransition){var h=z.T,b={};z.T=b;try{var T=r(d,o),q=z.S;q!==null&&q(b,T),cp(e,n,T)}catch(W){sd(e,n,W)}finally{h!==null&&b.types!==null&&(h.types=b.types),z.T=h}}else try{h=r(d,o),cp(e,n,h)}catch(W){sd(e,n,W)}}function cp(e,n,r){r!==null&&typeof r=="object"&&typeof r.then=="function"?r.then(function(o){up(e,n,o)},function(o){return sd(e,n,o)}):up(e,n,r)}function up(e,n,r){n.status="fulfilled",n.value=r,dp(n),e.state=r,n=e.pending,n!==null&&(r=n.next,r===n?e.pending=null:(r=r.next,n.next=r,lp(e,r)))}function sd(e,n,r){var o=e.pending;if(e.pending=null,o!==null){o=o.next;do n.status="rejected",n.reason=r,dp(n),n=n.next;while(n!==o)}e.action=null}function dp(e){e=e.listeners;for(var n=0;n<e.length;n++)(0,e[n])()}function fp(e,n){return n}function hp(e,n){if(Re){var r=Xe.formState;if(r!==null){e:{var o=Ne;if(Re){if(Ge){t:{for(var d=Ge,h=Wt;d.nodeType!==8;){if(!h){d=null;break t}if(d=Jt(d.nextSibling),d===null){d=null;break t}}h=d.data,d=h==="F!"||h==="F"?d:null}if(d){Ge=Jt(d.nextSibling),o=d.data==="F!";break e}}ga(o)}o=!1}o&&(n=r[0])}}return r=Nt(),r.memoizedState=r.baseState=n,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:fp,lastRenderedState:n},r.queue=o,r=zp.bind(null,Ne,o),o.dispatch=r,o=rd(!1),h=fd.bind(null,Ne,!1,o.queue),o=Nt(),d={state:n,dispatch:null,action:e,pending:null},o.queue=d,r=Kb.bind(null,Ne,d,h,r),d.dispatch=r,o.memoizedState=e,[n,r,!1]}function mp(e){var n=tt();return pp(n,qe,e)}function pp(e,n,r){if(n=ad(e,n,fp)[0],e=el(Vn)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var o=cs(n)}catch(b){throw b===Fi?Xo:b}else o=n;n=tt();var d=n.queue,h=d.dispatch;return r!==n.memoizedState&&(Ne.flags|=2048,tr(9,{destroy:void 0},Jb.bind(null,d,r),null)),[o,h,e]}function Jb(e,n){e.action=n}function gp(e){var n=tt(),r=qe;if(r!==null)return pp(n,r,e);tt(),n=n.memoizedState,r=tt();var o=r.queue.dispatch;return r.memoizedState=e,[n,o,!1]}function tr(e,n,r,o){return e={tag:e,create:r,deps:o,inst:n,next:null},n=Ne.updateQueue,n===null&&(n=Ko(),Ne.updateQueue=n),r=n.lastEffect,r===null?n.lastEffect=e.next=e:(o=r.next,r.next=e,e.next=o,n.lastEffect=e),e}function yp(){return tt().memoizedState}function tl(e,n,r,o){var d=Nt();Ne.flags|=e,d.memoizedState=tr(1|n,{destroy:void 0},r,o===void 0?null:o)}function nl(e,n,r,o){var d=tt();o=o===void 0?null:o;var h=d.memoizedState.inst;qe!==null&&o!==null&&Wu(o,qe.memoizedState.deps)?d.memoizedState=tr(n,h,r,o):(Ne.flags|=e,d.memoizedState=tr(1|n,h,r,o))}function xp(e,n){tl(8390656,8,e,n)}function od(e,n){nl(2048,8,e,n)}function e2(e){Ne.flags|=4;var n=Ne.updateQueue;if(n===null)n=Ko(),Ne.updateQueue=n,n.events=[e];else{var r=n.events;r===null?n.events=[e]:r.push(e)}}function vp(e){var n=tt().memoizedState;return e2({ref:n,nextImpl:e}),function(){if((Be&2)!==0)throw Error(s(440));return n.impl.apply(void 0,arguments)}}function bp(e,n){return nl(4,2,e,n)}function wp(e,n){return nl(4,4,e,n)}function Sp(e,n){if(typeof n=="function"){e=e();var r=n(e);return function(){typeof r=="function"?r():n(null)}}if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function Np(e,n,r){r=r!=null?r.concat([e]):null,nl(4,4,Sp.bind(null,n,e),r)}function ld(){}function Ep(e,n){var r=tt();n=n===void 0?null:n;var o=r.memoizedState;return n!==null&&Wu(n,o[1])?o[0]:(r.memoizedState=[e,n],e)}function jp(e,n){var r=tt();n=n===void 0?null:n;var o=r.memoizedState;if(n!==null&&Wu(n,o[1]))return o[0];if(o=e(),ci){pn(!0);try{e()}finally{pn(!1)}}return r.memoizedState=[o,n],o}function cd(e,n,r){return r===void 0||(qn&1073741824)!==0&&(Me&261930)===0?e.memoizedState=n:(e.memoizedState=r,e=_g(),Ne.lanes|=e,ja|=e,r)}function _p(e,n,r,o){return Ot(r,n)?r:Ki.current!==null?(e=cd(e,r,o),Ot(e,n)||(rt=!0),e):(qn&42)===0||(qn&1073741824)!==0&&(Me&261930)===0?(rt=!0,e.memoizedState=r):(e=_g(),Ne.lanes|=e,ja|=e,n)}function Cp(e,n,r,o,d){var h=D.p;D.p=h!==0&&8>h?h:8;var b=z.T,T={};z.T=T,fd(e,!1,n,r);try{var q=d(),W=z.S;if(W!==null&&W(T,q),q!==null&&typeof q=="object"&&typeof q.then=="function"){var ae=Ib(q,o);us(e,n,ae,$t(e))}else us(e,n,o,$t(e))}catch(re){us(e,n,{then:function(){},status:"rejected",reason:re},$t())}finally{D.p=h,b!==null&&T.types!==null&&(b.types=T.types),z.T=b}}function t2(){}function ud(e,n,r,o){if(e.tag!==5)throw Error(s(476));var d=Tp(e).queue;Cp(e,d,n,V,r===null?t2:function(){return Mp(e),r(o)})}function Tp(e){var n=e.memoizedState;if(n!==null)return n;n={memoizedState:V,baseState:V,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vn,lastRenderedState:V},next:null};var r={};return n.next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vn,lastRenderedState:r},next:null},e.memoizedState=n,e=e.alternate,e!==null&&(e.memoizedState=n),n}function Mp(e){var n=Tp(e);n.next===null&&(n=e.alternate.memoizedState),us(e,n.next.queue,{},$t())}function dd(){return pt(Cs)}function Ap(){return tt().memoizedState}function Rp(){return tt().memoizedState}function n2(e){for(var n=e.return;n!==null;){switch(n.tag){case 24:case 3:var r=$t();e=va(r);var o=ba(n,e,r);o!==null&&(zt(o,n,r),rs(o,n,r)),n={cache:$u()},e.payload=n;return}n=n.return}}function a2(e,n,r){var o=$t();r={lane:o,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},al(e)?Dp(n,r):(r=Mu(e,n,r,o),r!==null&&(zt(r,e,o),Op(r,n,o)))}function zp(e,n,r){var o=$t();us(e,n,r,o)}function us(e,n,r,o){var d={lane:o,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null};if(al(e))Dp(n,d);else{var h=e.alternate;if(e.lanes===0&&(h===null||h.lanes===0)&&(h=n.lastRenderedReducer,h!==null))try{var b=n.lastRenderedState,T=h(b,r);if(d.hasEagerState=!0,d.eagerState=T,Ot(T,b))return Ho(e,n,d,0),Xe===null&&Bo(),!1}catch{}if(r=Mu(e,n,d,o),r!==null)return zt(r,e,o),Op(r,n,o),!0}return!1}function fd(e,n,r,o){if(o={lane:2,revertLane:Xd(),gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},al(e)){if(n)throw Error(s(479))}else n=Mu(e,r,o,2),n!==null&&zt(n,e,2)}function al(e){var n=e.alternate;return e===Ne||n!==null&&n===Ne}function Dp(e,n){Ji=Fo=!0;var r=e.pending;r===null?n.next=n:(n.next=r.next,r.next=n),e.pending=n}function Op(e,n,r){if((r&4194048)!==0){var o=n.lanes;o&=e.pendingLanes,r|=o,n.lanes=r,go(e,r)}}var ds={readContext:pt,use:Jo,useCallback:We,useContext:We,useEffect:We,useImperativeHandle:We,useLayoutEffect:We,useInsertionEffect:We,useMemo:We,useReducer:We,useRef:We,useState:We,useDebugValue:We,useDeferredValue:We,useTransition:We,useSyncExternalStore:We,useId:We,useHostTransitionStatus:We,useFormState:We,useActionState:We,useOptimistic:We,useMemoCache:We,useCacheRefresh:We};ds.useEffectEvent=We;var kp={readContext:pt,use:Jo,useCallback:function(e,n){return Nt().memoizedState=[e,n===void 0?null:n],e},useContext:pt,useEffect:xp,useImperativeHandle:function(e,n,r){r=r!=null?r.concat([e]):null,tl(4194308,4,Sp.bind(null,n,e),r)},useLayoutEffect:function(e,n){return tl(4194308,4,e,n)},useInsertionEffect:function(e,n){tl(4,2,e,n)},useMemo:function(e,n){var r=Nt();n=n===void 0?null:n;var o=e();if(ci){pn(!0);try{e()}finally{pn(!1)}}return r.memoizedState=[o,n],o},useReducer:function(e,n,r){var o=Nt();if(r!==void 0){var d=r(n);if(ci){pn(!0);try{r(n)}finally{pn(!1)}}}else d=n;return o.memoizedState=o.baseState=d,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:d},o.queue=e,e=e.dispatch=a2.bind(null,Ne,e),[o.memoizedState,e]},useRef:function(e){var n=Nt();return e={current:e},n.memoizedState=e},useState:function(e){e=rd(e);var n=e.queue,r=zp.bind(null,Ne,n);return n.dispatch=r,[e.memoizedState,r]},useDebugValue:ld,useDeferredValue:function(e,n){var r=Nt();return cd(r,e,n)},useTransition:function(){var e=rd(!1);return e=Cp.bind(null,Ne,e.queue,!0,!1),Nt().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,n,r){var o=Ne,d=Nt();if(Re){if(r===void 0)throw Error(s(407));r=r()}else{if(r=n(),Xe===null)throw Error(s(349));(Me&127)!==0||np(o,n,r)}d.memoizedState=r;var h={value:r,getSnapshot:n};return d.queue=h,xp(ip.bind(null,o,h,e),[e]),o.flags|=2048,tr(9,{destroy:void 0},ap.bind(null,o,h,r,n),null),r},useId:function(){var e=Nt(),n=Xe.identifierPrefix;if(Re){var r=xn,o=yn;r=(o&~(1<<32-St(o)-1)).toString(32)+r,n="_"+n+"R_"+r,r=Wo++,0<r&&(n+="H"+r.toString(32)),n+="_"}else r=Fb++,n="_"+n+"r_"+r.toString(32)+"_";return e.memoizedState=n},useHostTransitionStatus:dd,useFormState:hp,useActionState:hp,useOptimistic:function(e){var n=Nt();n.memoizedState=n.baseState=e;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=r,n=fd.bind(null,Ne,!0,r),r.dispatch=n,[e,n]},useMemoCache:nd,useCacheRefresh:function(){return Nt().memoizedState=n2.bind(null,Ne)},useEffectEvent:function(e){var n=Nt(),r={impl:e};return n.memoizedState=r,function(){if((Be&2)!==0)throw Error(s(440));return r.impl.apply(void 0,arguments)}}},hd={readContext:pt,use:Jo,useCallback:Ep,useContext:pt,useEffect:od,useImperativeHandle:Np,useInsertionEffect:bp,useLayoutEffect:wp,useMemo:jp,useReducer:el,useRef:yp,useState:function(){return el(Vn)},useDebugValue:ld,useDeferredValue:function(e,n){var r=tt();return _p(r,qe.memoizedState,e,n)},useTransition:function(){var e=el(Vn)[0],n=tt().memoizedState;return[typeof e=="boolean"?e:cs(e),n]},useSyncExternalStore:tp,useId:Ap,useHostTransitionStatus:dd,useFormState:mp,useActionState:mp,useOptimistic:function(e,n){var r=tt();return op(r,qe,e,n)},useMemoCache:nd,useCacheRefresh:Rp};hd.useEffectEvent=vp;var Bp={readContext:pt,use:Jo,useCallback:Ep,useContext:pt,useEffect:od,useImperativeHandle:Np,useInsertionEffect:bp,useLayoutEffect:wp,useMemo:jp,useReducer:id,useRef:yp,useState:function(){return id(Vn)},useDebugValue:ld,useDeferredValue:function(e,n){var r=tt();return qe===null?cd(r,e,n):_p(r,qe.memoizedState,e,n)},useTransition:function(){var e=id(Vn)[0],n=tt().memoizedState;return[typeof e=="boolean"?e:cs(e),n]},useSyncExternalStore:tp,useId:Ap,useHostTransitionStatus:dd,useFormState:gp,useActionState:gp,useOptimistic:function(e,n){var r=tt();return qe!==null?op(r,qe,e,n):(r.baseState=e,[e,r.queue.dispatch])},useMemoCache:nd,useCacheRefresh:Rp};Bp.useEffectEvent=vp;function md(e,n,r,o){n=e.memoizedState,r=r(o,n),r=r==null?n:y({},n,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var pd={enqueueSetState:function(e,n,r){e=e._reactInternals;var o=$t(),d=va(o);d.payload=n,r!=null&&(d.callback=r),n=ba(e,d,o),n!==null&&(zt(n,e,o),rs(n,e,o))},enqueueReplaceState:function(e,n,r){e=e._reactInternals;var o=$t(),d=va(o);d.tag=1,d.payload=n,r!=null&&(d.callback=r),n=ba(e,d,o),n!==null&&(zt(n,e,o),rs(n,e,o))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var r=$t(),o=va(r);o.tag=2,n!=null&&(o.callback=n),n=ba(e,o,r),n!==null&&(zt(n,e,r),rs(n,e,r))}};function Hp(e,n,r,o,d,h,b){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(o,h,b):n.prototype&&n.prototype.isPureReactComponent?!Wr(r,o)||!Wr(d,h):!0}function Lp(e,n,r,o){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(r,o),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(r,o),n.state!==e&&pd.enqueueReplaceState(n,n.state,null)}function ui(e,n){var r=n;if("ref"in n){r={};for(var o in n)o!=="ref"&&(r[o]=n[o])}if(e=e.defaultProps){r===n&&(r=y({},r));for(var d in e)r[d]===void 0&&(r[d]=e[d])}return r}function Up(e){ko(e)}function $p(e){console.error(e)}function qp(e){ko(e)}function il(e,n){try{var r=e.onUncaughtError;r(n.value,{componentStack:n.stack})}catch(o){setTimeout(function(){throw o})}}function Vp(e,n,r){try{var o=e.onCaughtError;o(r.value,{componentStack:r.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(d){setTimeout(function(){throw d})}}function gd(e,n,r){return r=va(r),r.tag=3,r.payload={element:null},r.callback=function(){il(e,n)},r}function Yp(e){return e=va(e),e.tag=3,e}function Xp(e,n,r,o){var d=r.type.getDerivedStateFromError;if(typeof d=="function"){var h=o.value;e.payload=function(){return d(h)},e.callback=function(){Vp(n,r,o)}}var b=r.stateNode;b!==null&&typeof b.componentDidCatch=="function"&&(e.callback=function(){Vp(n,r,o),typeof d!="function"&&(_a===null?_a=new Set([this]):_a.add(this));var T=o.stack;this.componentDidCatch(o.value,{componentStack:T!==null?T:""})})}function i2(e,n,r,o,d){if(r.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(n=r.alternate,n!==null&&Qi(n,r,d,!0),r=Bt.current,r!==null){switch(r.tag){case 31:case 13:return Kt===null?gl():r.alternate===null&&Ke===0&&(Ke=3),r.flags&=-257,r.flags|=65536,r.lanes=d,o===Go?r.flags|=16384:(n=r.updateQueue,n===null?r.updateQueue=new Set([o]):n.add(o),qd(e,o,d)),!1;case 22:return r.flags|=65536,o===Go?r.flags|=16384:(n=r.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([o])},r.updateQueue=n):(r=n.retryQueue,r===null?n.retryQueue=new Set([o]):r.add(o)),qd(e,o,d)),!1}throw Error(s(435,r.tag))}return qd(e,o,d),gl(),!1}if(Re)return n=Bt.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=d,o!==ku&&(e=Error(s(422),{cause:o}),es(Pt(e,r)))):(o!==ku&&(n=Error(s(423),{cause:o}),es(Pt(n,r))),e=e.current.alternate,e.flags|=65536,d&=-d,e.lanes|=d,o=Pt(o,r),d=gd(e.stateNode,o,d),Zu(e,d),Ke!==4&&(Ke=2)),!1;var h=Error(s(520),{cause:o});if(h=Pt(h,r),vs===null?vs=[h]:vs.push(h),Ke!==4&&(Ke=2),n===null)return!0;o=Pt(o,r),r=n;do{switch(r.tag){case 3:return r.flags|=65536,e=d&-d,r.lanes|=e,e=gd(r.stateNode,o,e),Zu(r,e),!1;case 1:if(n=r.type,h=r.stateNode,(r.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||h!==null&&typeof h.componentDidCatch=="function"&&(_a===null||!_a.has(h))))return r.flags|=65536,d&=-d,r.lanes|=d,d=Yp(d),Xp(d,e,r,o),Zu(r,d),!1}r=r.return}while(r!==null);return!1}var yd=Error(s(461)),rt=!1;function gt(e,n,r,o){n.child=e===null?Pm(n,null,r,o):li(n,e.child,r,o)}function Gp(e,n,r,o,d){r=r.render;var h=n.ref;if("ref"in o){var b={};for(var T in o)T!=="ref"&&(b[T]=o[T])}else b=o;return ii(n),o=Ku(e,n,r,b,h,d),T=Ju(),e!==null&&!rt?(ed(e,n,d),Yn(e,n,d)):(Re&&T&&Du(n),n.flags|=1,gt(e,n,o,d),n.child)}function Zp(e,n,r,o,d){if(e===null){var h=r.type;return typeof h=="function"&&!Au(h)&&h.defaultProps===void 0&&r.compare===null?(n.tag=15,n.type=h,Qp(e,n,h,o,d)):(e=Uo(r.type,null,o,n,n.mode,d),e.ref=n.ref,e.return=n,n.child=e)}if(h=e.child,!jd(e,d)){var b=h.memoizedProps;if(r=r.compare,r=r!==null?r:Wr,r(b,o)&&e.ref===n.ref)return Yn(e,n,d)}return n.flags|=1,e=Hn(h,o),e.ref=n.ref,e.return=n,n.child=e}function Qp(e,n,r,o,d){if(e!==null){var h=e.memoizedProps;if(Wr(h,o)&&e.ref===n.ref)if(rt=!1,n.pendingProps=o=h,jd(e,d))(e.flags&131072)!==0&&(rt=!0);else return n.lanes=e.lanes,Yn(e,n,d)}return xd(e,n,r,o,d)}function Pp(e,n,r,o){var d=o.children,h=e!==null?e.memoizedState:null;if(e===null&&n.stateNode===null&&(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.mode==="hidden"){if((n.flags&128)!==0){if(h=h!==null?h.baseLanes|r:r,e!==null){for(o=n.child=e.child,d=0;o!==null;)d=d|o.lanes|o.childLanes,o=o.sibling;o=d&~h}else o=0,n.child=null;return Ip(e,n,h,r,o)}if((r&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},e!==null&&Yo(n,h!==null?h.cachePool:null),h!==null?Wm(n,h):Pu(),Km(n);else return o=n.lanes=536870912,Ip(e,n,h!==null?h.baseLanes|r:r,r,o)}else h!==null?(Yo(n,h.cachePool),Wm(n,h),Sa(),n.memoizedState=null):(e!==null&&Yo(n,null),Pu(),Sa());return gt(e,n,d,r),n.child}function fs(e,n){return e!==null&&e.tag===22||n.stateNode!==null||(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.sibling}function Ip(e,n,r,o,d){var h=Vu();return h=h===null?null:{parent:at._currentValue,pool:h},n.memoizedState={baseLanes:r,cachePool:h},e!==null&&Yo(n,null),Pu(),Km(n),e!==null&&Qi(e,n,o,!0),n.childLanes=d,null}function rl(e,n){return n=ol({mode:n.mode,children:n.children},e.mode),n.ref=e.ref,e.child=n,n.return=e,n}function Fp(e,n,r){return li(n,e.child,null,r),e=rl(n,n.pendingProps),e.flags|=2,Ht(n),n.memoizedState=null,e}function r2(e,n,r){var o=n.pendingProps,d=(n.flags&128)!==0;if(n.flags&=-129,e===null){if(Re){if(o.mode==="hidden")return e=rl(n,o),n.lanes=536870912,fs(null,e);if(Fu(n),(e=Ge)?(e=l0(e,Wt),e=e!==null&&e.data==="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:ma!==null?{id:yn,overflow:xn}:null,retryLane:536870912,hydrationErrors:null},r=Dm(e),r.return=n,n.child=r,mt=n,Ge=null)):e=null,e===null)throw ga(n);return n.lanes=536870912,null}return rl(n,o)}var h=e.memoizedState;if(h!==null){var b=h.dehydrated;if(Fu(n),d)if(n.flags&256)n.flags&=-257,n=Fp(e,n,r);else if(n.memoizedState!==null)n.child=e.child,n.flags|=128,n=null;else throw Error(s(558));else if(rt||Qi(e,n,r,!1),d=(r&e.childLanes)!==0,rt||d){if(o=Xe,o!==null&&(b=yo(o,r),b!==0&&b!==h.retryLane))throw h.retryLane=b,ei(e,b),zt(o,e,b),yd;gl(),n=Fp(e,n,r)}else e=h.treeContext,Ge=Jt(b.nextSibling),mt=n,Re=!0,pa=null,Wt=!1,e!==null&&Bm(n,e),n=rl(n,o),n.flags|=4096;return n}return e=Hn(e.child,{mode:o.mode,children:o.children}),e.ref=n.ref,n.child=e,e.return=n,e}function sl(e,n){var r=n.ref;if(r===null)e!==null&&e.ref!==null&&(n.flags|=4194816);else{if(typeof r!="function"&&typeof r!="object")throw Error(s(284));(e===null||e.ref!==r)&&(n.flags|=4194816)}}function xd(e,n,r,o,d){return ii(n),r=Ku(e,n,r,o,void 0,d),o=Ju(),e!==null&&!rt?(ed(e,n,d),Yn(e,n,d)):(Re&&o&&Du(n),n.flags|=1,gt(e,n,r,d),n.child)}function Wp(e,n,r,o,d,h){return ii(n),n.updateQueue=null,r=ep(n,o,r,d),Jm(e),o=Ju(),e!==null&&!rt?(ed(e,n,h),Yn(e,n,h)):(Re&&o&&Du(n),n.flags|=1,gt(e,n,r,h),n.child)}function Kp(e,n,r,o,d){if(ii(n),n.stateNode===null){var h=Yi,b=r.contextType;typeof b=="object"&&b!==null&&(h=pt(b)),h=new r(o,h),n.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,h.updater=pd,n.stateNode=h,h._reactInternals=n,h=n.stateNode,h.props=o,h.state=n.memoizedState,h.refs={},Xu(n),b=r.contextType,h.context=typeof b=="object"&&b!==null?pt(b):Yi,h.state=n.memoizedState,b=r.getDerivedStateFromProps,typeof b=="function"&&(md(n,r,b,o),h.state=n.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof h.getSnapshotBeforeUpdate=="function"||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(b=h.state,typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount(),b!==h.state&&pd.enqueueReplaceState(h,h.state,null),os(n,o,h,d),ss(),h.state=n.memoizedState),typeof h.componentDidMount=="function"&&(n.flags|=4194308),o=!0}else if(e===null){h=n.stateNode;var T=n.memoizedProps,q=ui(r,T);h.props=q;var W=h.context,ae=r.contextType;b=Yi,typeof ae=="object"&&ae!==null&&(b=pt(ae));var re=r.getDerivedStateFromProps;ae=typeof re=="function"||typeof h.getSnapshotBeforeUpdate=="function",T=n.pendingProps!==T,ae||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(T||W!==b)&&Lp(n,h,o,b),xa=!1;var K=n.memoizedState;h.state=K,os(n,o,h,d),ss(),W=n.memoizedState,T||K!==W||xa?(typeof re=="function"&&(md(n,r,re,o),W=n.memoizedState),(q=xa||Hp(n,r,q,o,K,W,b))?(ae||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount()),typeof h.componentDidMount=="function"&&(n.flags|=4194308)):(typeof h.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=o,n.memoizedState=W),h.props=o,h.state=W,h.context=b,o=q):(typeof h.componentDidMount=="function"&&(n.flags|=4194308),o=!1)}else{h=n.stateNode,Gu(e,n),b=n.memoizedProps,ae=ui(r,b),h.props=ae,re=n.pendingProps,K=h.context,W=r.contextType,q=Yi,typeof W=="object"&&W!==null&&(q=pt(W)),T=r.getDerivedStateFromProps,(W=typeof T=="function"||typeof h.getSnapshotBeforeUpdate=="function")||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(b!==re||K!==q)&&Lp(n,h,o,q),xa=!1,K=n.memoizedState,h.state=K,os(n,o,h,d),ss();var ee=n.memoizedState;b!==re||K!==ee||xa||e!==null&&e.dependencies!==null&&qo(e.dependencies)?(typeof T=="function"&&(md(n,r,T,o),ee=n.memoizedState),(ae=xa||Hp(n,r,ae,o,K,ee,q)||e!==null&&e.dependencies!==null&&qo(e.dependencies))?(W||typeof h.UNSAFE_componentWillUpdate!="function"&&typeof h.componentWillUpdate!="function"||(typeof h.componentWillUpdate=="function"&&h.componentWillUpdate(o,ee,q),typeof h.UNSAFE_componentWillUpdate=="function"&&h.UNSAFE_componentWillUpdate(o,ee,q)),typeof h.componentDidUpdate=="function"&&(n.flags|=4),typeof h.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof h.componentDidUpdate!="function"||b===e.memoizedProps&&K===e.memoizedState||(n.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||b===e.memoizedProps&&K===e.memoizedState||(n.flags|=1024),n.memoizedProps=o,n.memoizedState=ee),h.props=o,h.state=ee,h.context=q,o=ae):(typeof h.componentDidUpdate!="function"||b===e.memoizedProps&&K===e.memoizedState||(n.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||b===e.memoizedProps&&K===e.memoizedState||(n.flags|=1024),o=!1)}return h=o,sl(e,n),o=(n.flags&128)!==0,h||o?(h=n.stateNode,r=o&&typeof r.getDerivedStateFromError!="function"?null:h.render(),n.flags|=1,e!==null&&o?(n.child=li(n,e.child,null,d),n.child=li(n,null,r,d)):gt(e,n,r,d),n.memoizedState=h.state,e=n.child):e=Yn(e,n,d),e}function Jp(e,n,r,o){return ni(),n.flags|=256,gt(e,n,r,o),n.child}var vd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function bd(e){return{baseLanes:e,cachePool:Vm()}}function wd(e,n,r){return e=e!==null?e.childLanes&~r:0,n&&(e|=Ut),e}function eg(e,n,r){var o=n.pendingProps,d=!1,h=(n.flags&128)!==0,b;if((b=h)||(b=e!==null&&e.memoizedState===null?!1:(et.current&2)!==0),b&&(d=!0,n.flags&=-129),b=(n.flags&32)!==0,n.flags&=-33,e===null){if(Re){if(d?wa(n):Sa(),(e=Ge)?(e=l0(e,Wt),e=e!==null&&e.data!=="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:ma!==null?{id:yn,overflow:xn}:null,retryLane:536870912,hydrationErrors:null},r=Dm(e),r.return=n,n.child=r,mt=n,Ge=null)):e=null,e===null)throw ga(n);return af(e)?n.lanes=32:n.lanes=536870912,null}var T=o.children;return o=o.fallback,d?(Sa(),d=n.mode,T=ol({mode:"hidden",children:T},d),o=ti(o,d,r,null),T.return=n,o.return=n,T.sibling=o,n.child=T,o=n.child,o.memoizedState=bd(r),o.childLanes=wd(e,b,r),n.memoizedState=vd,fs(null,o)):(wa(n),Sd(n,T))}var q=e.memoizedState;if(q!==null&&(T=q.dehydrated,T!==null)){if(h)n.flags&256?(wa(n),n.flags&=-257,n=Nd(e,n,r)):n.memoizedState!==null?(Sa(),n.child=e.child,n.flags|=128,n=null):(Sa(),T=o.fallback,d=n.mode,o=ol({mode:"visible",children:o.children},d),T=ti(T,d,r,null),T.flags|=2,o.return=n,T.return=n,o.sibling=T,n.child=o,li(n,e.child,null,r),o=n.child,o.memoizedState=bd(r),o.childLanes=wd(e,b,r),n.memoizedState=vd,n=fs(null,o));else if(wa(n),af(T)){if(b=T.nextSibling&&T.nextSibling.dataset,b)var W=b.dgst;b=W,o=Error(s(419)),o.stack="",o.digest=b,es({value:o,source:null,stack:null}),n=Nd(e,n,r)}else if(rt||Qi(e,n,r,!1),b=(r&e.childLanes)!==0,rt||b){if(b=Xe,b!==null&&(o=yo(b,r),o!==0&&o!==q.retryLane))throw q.retryLane=o,ei(e,o),zt(b,e,o),yd;nf(T)||gl(),n=Nd(e,n,r)}else nf(T)?(n.flags|=192,n.child=e.child,n=null):(e=q.treeContext,Ge=Jt(T.nextSibling),mt=n,Re=!0,pa=null,Wt=!1,e!==null&&Bm(n,e),n=Sd(n,o.children),n.flags|=4096);return n}return d?(Sa(),T=o.fallback,d=n.mode,q=e.child,W=q.sibling,o=Hn(q,{mode:"hidden",children:o.children}),o.subtreeFlags=q.subtreeFlags&65011712,W!==null?T=Hn(W,T):(T=ti(T,d,r,null),T.flags|=2),T.return=n,o.return=n,o.sibling=T,n.child=o,fs(null,o),o=n.child,T=e.child.memoizedState,T===null?T=bd(r):(d=T.cachePool,d!==null?(q=at._currentValue,d=d.parent!==q?{parent:q,pool:q}:d):d=Vm(),T={baseLanes:T.baseLanes|r,cachePool:d}),o.memoizedState=T,o.childLanes=wd(e,b,r),n.memoizedState=vd,fs(e.child,o)):(wa(n),r=e.child,e=r.sibling,r=Hn(r,{mode:"visible",children:o.children}),r.return=n,r.sibling=null,e!==null&&(b=n.deletions,b===null?(n.deletions=[e],n.flags|=16):b.push(e)),n.child=r,n.memoizedState=null,r)}function Sd(e,n){return n=ol({mode:"visible",children:n},e.mode),n.return=e,e.child=n}function ol(e,n){return e=kt(22,e,null,n),e.lanes=0,e}function Nd(e,n,r){return li(n,e.child,null,r),e=Sd(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function tg(e,n,r){e.lanes|=n;var o=e.alternate;o!==null&&(o.lanes|=n),Lu(e.return,n,r)}function Ed(e,n,r,o,d,h){var b=e.memoizedState;b===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:o,tail:r,tailMode:d,treeForkCount:h}:(b.isBackwards=n,b.rendering=null,b.renderingStartTime=0,b.last=o,b.tail=r,b.tailMode=d,b.treeForkCount=h)}function ng(e,n,r){var o=n.pendingProps,d=o.revealOrder,h=o.tail;o=o.children;var b=et.current,T=(b&2)!==0;if(T?(b=b&1|2,n.flags|=128):b&=1,J(et,b),gt(e,n,o,r),o=Re?Jr:0,!T&&e!==null&&(e.flags&128)!==0)e:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&tg(e,r,n);else if(e.tag===19)tg(e,r,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break e;for(;e.sibling===null;){if(e.return===null||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(d){case"forwards":for(r=n.child,d=null;r!==null;)e=r.alternate,e!==null&&Io(e)===null&&(d=r),r=r.sibling;r=d,r===null?(d=n.child,n.child=null):(d=r.sibling,r.sibling=null),Ed(n,!1,d,r,h,o);break;case"backwards":case"unstable_legacy-backwards":for(r=null,d=n.child,n.child=null;d!==null;){if(e=d.alternate,e!==null&&Io(e)===null){n.child=d;break}e=d.sibling,d.sibling=r,r=d,d=e}Ed(n,!0,r,null,h,o);break;case"together":Ed(n,!1,null,null,void 0,o);break;default:n.memoizedState=null}return n.child}function Yn(e,n,r){if(e!==null&&(n.dependencies=e.dependencies),ja|=n.lanes,(r&n.childLanes)===0)if(e!==null){if(Qi(e,n,r,!1),(r&n.childLanes)===0)return null}else return null;if(e!==null&&n.child!==e.child)throw Error(s(153));if(n.child!==null){for(e=n.child,r=Hn(e,e.pendingProps),n.child=r,r.return=n;e.sibling!==null;)e=e.sibling,r=r.sibling=Hn(e,e.pendingProps),r.return=n;r.sibling=null}return n.child}function jd(e,n){return(e.lanes&n)!==0?!0:(e=e.dependencies,!!(e!==null&&qo(e)))}function s2(e,n,r){switch(n.tag){case 3:le(n,n.stateNode.containerInfo),ya(n,at,e.memoizedState.cache),ni();break;case 27:case 5:ve(n);break;case 4:le(n,n.stateNode.containerInfo);break;case 10:ya(n,n.type,n.memoizedProps.value);break;case 31:if(n.memoizedState!==null)return n.flags|=128,Fu(n),null;break;case 13:var o=n.memoizedState;if(o!==null)return o.dehydrated!==null?(wa(n),n.flags|=128,null):(r&n.child.childLanes)!==0?eg(e,n,r):(wa(n),e=Yn(e,n,r),e!==null?e.sibling:null);wa(n);break;case 19:var d=(e.flags&128)!==0;if(o=(r&n.childLanes)!==0,o||(Qi(e,n,r,!1),o=(r&n.childLanes)!==0),d){if(o)return ng(e,n,r);n.flags|=128}if(d=n.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),J(et,et.current),o)break;return null;case 22:return n.lanes=0,Pp(e,n,r,n.pendingProps);case 24:ya(n,at,e.memoizedState.cache)}return Yn(e,n,r)}function ag(e,n,r){if(e!==null)if(e.memoizedProps!==n.pendingProps)rt=!0;else{if(!jd(e,r)&&(n.flags&128)===0)return rt=!1,s2(e,n,r);rt=(e.flags&131072)!==0}else rt=!1,Re&&(n.flags&1048576)!==0&&km(n,Jr,n.index);switch(n.lanes=0,n.tag){case 16:e:{var o=n.pendingProps;if(e=si(n.elementType),n.type=e,typeof e=="function")Au(e)?(o=ui(e,o),n.tag=1,n=Kp(null,n,e,o,r)):(n.tag=0,n=xd(null,n,e,o,r));else{if(e!=null){var d=e.$$typeof;if(d===M){n.tag=11,n=Gp(null,n,e,o,r);break e}else if(d===k){n.tag=14,n=Zp(null,n,e,o,r);break e}}throw n=L(e)||e,Error(s(306,n,""))}}return n;case 0:return xd(e,n,n.type,n.pendingProps,r);case 1:return o=n.type,d=ui(o,n.pendingProps),Kp(e,n,o,d,r);case 3:e:{if(le(n,n.stateNode.containerInfo),e===null)throw Error(s(387));o=n.pendingProps;var h=n.memoizedState;d=h.element,Gu(e,n),os(n,o,null,r);var b=n.memoizedState;if(o=b.cache,ya(n,at,o),o!==h.cache&&Uu(n,[at],r,!0),ss(),o=b.element,h.isDehydrated)if(h={element:o,isDehydrated:!1,cache:b.cache},n.updateQueue.baseState=h,n.memoizedState=h,n.flags&256){n=Jp(e,n,o,r);break e}else if(o!==d){d=Pt(Error(s(424)),n),es(d),n=Jp(e,n,o,r);break e}else for(e=n.stateNode.containerInfo,e.nodeType===9?e=e.body:e=e.nodeName==="HTML"?e.ownerDocument.body:e,Ge=Jt(e.firstChild),mt=n,Re=!0,pa=null,Wt=!0,r=Pm(n,null,o,r),n.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(ni(),o===d){n=Yn(e,n,r);break e}gt(e,n,o,r)}n=n.child}return n;case 26:return sl(e,n),e===null?(r=m0(n.type,null,n.pendingProps,null))?n.memoizedState=r:Re||(r=n.type,e=n.pendingProps,o=Nl(ue.current).createElement(r),o[ct]=n,o[vt]=e,yt(o,r,e),nt(o),n.stateNode=o):n.memoizedState=m0(n.type,e.memoizedProps,n.pendingProps,e.memoizedState),null;case 27:return ve(n),e===null&&Re&&(o=n.stateNode=d0(n.type,n.pendingProps,ue.current),mt=n,Wt=!0,d=Ge,Aa(n.type)?(rf=d,Ge=Jt(o.firstChild)):Ge=d),gt(e,n,n.pendingProps.children,r),sl(e,n),e===null&&(n.flags|=4194304),n.child;case 5:return e===null&&Re&&((d=o=Ge)&&(o=B2(o,n.type,n.pendingProps,Wt),o!==null?(n.stateNode=o,mt=n,Ge=Jt(o.firstChild),Wt=!1,d=!0):d=!1),d||ga(n)),ve(n),d=n.type,h=n.pendingProps,b=e!==null?e.memoizedProps:null,o=h.children,Jd(d,h)?o=null:b!==null&&Jd(d,b)&&(n.flags|=32),n.memoizedState!==null&&(d=Ku(e,n,Wb,null,null,r),Cs._currentValue=d),sl(e,n),gt(e,n,o,r),n.child;case 6:return e===null&&Re&&((e=r=Ge)&&(r=H2(r,n.pendingProps,Wt),r!==null?(n.stateNode=r,mt=n,Ge=null,e=!0):e=!1),e||ga(n)),null;case 13:return eg(e,n,r);case 4:return le(n,n.stateNode.containerInfo),o=n.pendingProps,e===null?n.child=li(n,null,o,r):gt(e,n,o,r),n.child;case 11:return Gp(e,n,n.type,n.pendingProps,r);case 7:return gt(e,n,n.pendingProps,r),n.child;case 8:return gt(e,n,n.pendingProps.children,r),n.child;case 12:return gt(e,n,n.pendingProps.children,r),n.child;case 10:return o=n.pendingProps,ya(n,n.type,o.value),gt(e,n,o.children,r),n.child;case 9:return d=n.type._context,o=n.pendingProps.children,ii(n),d=pt(d),o=o(d),n.flags|=1,gt(e,n,o,r),n.child;case 14:return Zp(e,n,n.type,n.pendingProps,r);case 15:return Qp(e,n,n.type,n.pendingProps,r);case 19:return ng(e,n,r);case 31:return r2(e,n,r);case 22:return Pp(e,n,r,n.pendingProps);case 24:return ii(n),o=pt(at),e===null?(d=Vu(),d===null&&(d=Xe,h=$u(),d.pooledCache=h,h.refCount++,h!==null&&(d.pooledCacheLanes|=r),d=h),n.memoizedState={parent:o,cache:d},Xu(n),ya(n,at,d)):((e.lanes&r)!==0&&(Gu(e,n),os(n,null,null,r),ss()),d=e.memoizedState,h=n.memoizedState,d.parent!==o?(d={parent:o,cache:o},n.memoizedState=d,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=d),ya(n,at,o)):(o=h.cache,ya(n,at,o),o!==d.cache&&Uu(n,[at],r,!0))),gt(e,n,n.pendingProps.children,r),n.child;case 29:throw n.pendingProps}throw Error(s(156,n.tag))}function Xn(e){e.flags|=4}function _d(e,n,r,o,d){if((n=(e.mode&32)!==0)&&(n=!1),n){if(e.flags|=16777216,(d&335544128)===d)if(e.stateNode.complete)e.flags|=8192;else if(Ag())e.flags|=8192;else throw oi=Go,Yu}else e.flags&=-16777217}function ig(e,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!v0(n))if(Ag())e.flags|=8192;else throw oi=Go,Yu}function ll(e,n){n!==null&&(e.flags|=4),e.flags&16384&&(n=e.tag!==22?mo():536870912,e.lanes|=n,rr|=n)}function hs(e,n){if(!Re)switch(e.tailMode){case"hidden":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var o=null;r!==null;)r.alternate!==null&&(o=r),r=r.sibling;o===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:o.sibling=null}}function Ze(e){var n=e.alternate!==null&&e.alternate.child===e.child,r=0,o=0;if(n)for(var d=e.child;d!==null;)r|=d.lanes|d.childLanes,o|=d.subtreeFlags&65011712,o|=d.flags&65011712,d.return=e,d=d.sibling;else for(d=e.child;d!==null;)r|=d.lanes|d.childLanes,o|=d.subtreeFlags,o|=d.flags,d.return=e,d=d.sibling;return e.subtreeFlags|=o,e.childLanes=r,n}function o2(e,n,r){var o=n.pendingProps;switch(Ou(n),n.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ze(n),null;case 1:return Ze(n),null;case 3:return r=n.stateNode,o=null,e!==null&&(o=e.memoizedState.cache),n.memoizedState.cache!==o&&(n.flags|=2048),$n(at),de(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Zi(n)?Xn(n):e===null||e.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,Bu())),Ze(n),null;case 26:var d=n.type,h=n.memoizedState;return e===null?(Xn(n),h!==null?(Ze(n),ig(n,h)):(Ze(n),_d(n,d,null,o,r))):h?h!==e.memoizedState?(Xn(n),Ze(n),ig(n,h)):(Ze(n),n.flags&=-16777217):(e=e.memoizedProps,e!==o&&Xn(n),Ze(n),_d(n,d,e,o,r)),null;case 27:if(be(n),r=ue.current,d=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==o&&Xn(n);else{if(!o){if(n.stateNode===null)throw Error(s(166));return Ze(n),null}e=ne.current,Zi(n)?Hm(n):(e=d0(d,o,r),n.stateNode=e,Xn(n))}return Ze(n),null;case 5:if(be(n),d=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==o&&Xn(n);else{if(!o){if(n.stateNode===null)throw Error(s(166));return Ze(n),null}if(h=ne.current,Zi(n))Hm(n);else{var b=Nl(ue.current);switch(h){case 1:h=b.createElementNS("http://www.w3.org/2000/svg",d);break;case 2:h=b.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;default:switch(d){case"svg":h=b.createElementNS("http://www.w3.org/2000/svg",d);break;case"math":h=b.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;case"script":h=b.createElement("div"),h.innerHTML="<script><\/script>",h=h.removeChild(h.firstChild);break;case"select":h=typeof o.is=="string"?b.createElement("select",{is:o.is}):b.createElement("select"),o.multiple?h.multiple=!0:o.size&&(h.size=o.size);break;default:h=typeof o.is=="string"?b.createElement(d,{is:o.is}):b.createElement(d)}}h[ct]=n,h[vt]=o;e:for(b=n.child;b!==null;){if(b.tag===5||b.tag===6)h.appendChild(b.stateNode);else if(b.tag!==4&&b.tag!==27&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===n)break e;for(;b.sibling===null;){if(b.return===null||b.return===n)break e;b=b.return}b.sibling.return=b.return,b=b.sibling}n.stateNode=h;e:switch(yt(h,d,o),d){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}o&&Xn(n)}}return Ze(n),_d(n,n.type,e===null?null:e.memoizedProps,n.pendingProps,r),null;case 6:if(e&&n.stateNode!=null)e.memoizedProps!==o&&Xn(n);else{if(typeof o!="string"&&n.stateNode===null)throw Error(s(166));if(e=ue.current,Zi(n)){if(e=n.stateNode,r=n.memoizedProps,o=null,d=mt,d!==null)switch(d.tag){case 27:case 5:o=d.memoizedProps}e[ct]=n,e=!!(e.nodeValue===r||o!==null&&o.suppressHydrationWarning===!0||e0(e.nodeValue,r)),e||ga(n,!0)}else e=Nl(e).createTextNode(o),e[ct]=n,n.stateNode=e}return Ze(n),null;case 31:if(r=n.memoizedState,e===null||e.memoizedState!==null){if(o=Zi(n),r!==null){if(e===null){if(!o)throw Error(s(318));if(e=n.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(557));e[ct]=n}else ni(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;Ze(n),e=!1}else r=Bu(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=r),e=!0;if(!e)return n.flags&256?(Ht(n),n):(Ht(n),null);if((n.flags&128)!==0)throw Error(s(558))}return Ze(n),null;case 13:if(o=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(d=Zi(n),o!==null&&o.dehydrated!==null){if(e===null){if(!d)throw Error(s(318));if(d=n.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(s(317));d[ct]=n}else ni(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;Ze(n),d=!1}else d=Bu(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=d),d=!0;if(!d)return n.flags&256?(Ht(n),n):(Ht(n),null)}return Ht(n),(n.flags&128)!==0?(n.lanes=r,n):(r=o!==null,e=e!==null&&e.memoizedState!==null,r&&(o=n.child,d=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(d=o.alternate.memoizedState.cachePool.pool),h=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(h=o.memoizedState.cachePool.pool),h!==d&&(o.flags|=2048)),r!==e&&r&&(n.child.flags|=8192),ll(n,n.updateQueue),Ze(n),null);case 4:return de(),e===null&&Pd(n.stateNode.containerInfo),Ze(n),null;case 10:return $n(n.type),Ze(n),null;case 19:if(U(et),o=n.memoizedState,o===null)return Ze(n),null;if(d=(n.flags&128)!==0,h=o.rendering,h===null)if(d)hs(o,!1);else{if(Ke!==0||e!==null&&(e.flags&128)!==0)for(e=n.child;e!==null;){if(h=Io(e),h!==null){for(n.flags|=128,hs(o,!1),e=h.updateQueue,n.updateQueue=e,ll(n,e),n.subtreeFlags=0,e=r,r=n.child;r!==null;)zm(r,e),r=r.sibling;return J(et,et.current&1|2),Re&&Ln(n,o.treeForkCount),n.child}e=e.sibling}o.tail!==null&&ht()>hl&&(n.flags|=128,d=!0,hs(o,!1),n.lanes=4194304)}else{if(!d)if(e=Io(h),e!==null){if(n.flags|=128,d=!0,e=e.updateQueue,n.updateQueue=e,ll(n,e),hs(o,!0),o.tail===null&&o.tailMode==="hidden"&&!h.alternate&&!Re)return Ze(n),null}else 2*ht()-o.renderingStartTime>hl&&r!==536870912&&(n.flags|=128,d=!0,hs(o,!1),n.lanes=4194304);o.isBackwards?(h.sibling=n.child,n.child=h):(e=o.last,e!==null?e.sibling=h:n.child=h,o.last=h)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=ht(),e.sibling=null,r=et.current,J(et,d?r&1|2:r&1),Re&&Ln(n,o.treeForkCount),e):(Ze(n),null);case 22:case 23:return Ht(n),Iu(),o=n.memoizedState!==null,e!==null?e.memoizedState!==null!==o&&(n.flags|=8192):o&&(n.flags|=8192),o?(r&536870912)!==0&&(n.flags&128)===0&&(Ze(n),n.subtreeFlags&6&&(n.flags|=8192)):Ze(n),r=n.updateQueue,r!==null&&ll(n,r.retryQueue),r=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(r=e.memoizedState.cachePool.pool),o=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),o!==r&&(n.flags|=2048),e!==null&&U(ri),null;case 24:return r=null,e!==null&&(r=e.memoizedState.cache),n.memoizedState.cache!==r&&(n.flags|=2048),$n(at),Ze(n),null;case 25:return null;case 30:return null}throw Error(s(156,n.tag))}function l2(e,n){switch(Ou(n),n.tag){case 1:return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return $n(at),de(),e=n.flags,(e&65536)!==0&&(e&128)===0?(n.flags=e&-65537|128,n):null;case 26:case 27:case 5:return be(n),null;case 31:if(n.memoizedState!==null){if(Ht(n),n.alternate===null)throw Error(s(340));ni()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 13:if(Ht(n),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(s(340));ni()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return U(et),null;case 4:return de(),null;case 10:return $n(n.type),null;case 22:case 23:return Ht(n),Iu(),e!==null&&U(ri),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 24:return $n(at),null;case 25:return null;default:return null}}function rg(e,n){switch(Ou(n),n.tag){case 3:$n(at),de();break;case 26:case 27:case 5:be(n);break;case 4:de();break;case 31:n.memoizedState!==null&&Ht(n);break;case 13:Ht(n);break;case 19:U(et);break;case 10:$n(n.type);break;case 22:case 23:Ht(n),Iu(),e!==null&&U(ri);break;case 24:$n(at)}}function ms(e,n){try{var r=n.updateQueue,o=r!==null?r.lastEffect:null;if(o!==null){var d=o.next;r=d;do{if((r.tag&e)===e){o=void 0;var h=r.create,b=r.inst;o=h(),b.destroy=o}r=r.next}while(r!==d)}}catch(T){Ue(n,n.return,T)}}function Na(e,n,r){try{var o=n.updateQueue,d=o!==null?o.lastEffect:null;if(d!==null){var h=d.next;o=h;do{if((o.tag&e)===e){var b=o.inst,T=b.destroy;if(T!==void 0){b.destroy=void 0,d=n;var q=r,W=T;try{W()}catch(ae){Ue(d,q,ae)}}}o=o.next}while(o!==h)}}catch(ae){Ue(n,n.return,ae)}}function sg(e){var n=e.updateQueue;if(n!==null){var r=e.stateNode;try{Fm(n,r)}catch(o){Ue(e,e.return,o)}}}function og(e,n,r){r.props=ui(e.type,e.memoizedProps),r.state=e.memoizedState;try{r.componentWillUnmount()}catch(o){Ue(e,n,o)}}function ps(e,n){try{var r=e.ref;if(r!==null){switch(e.tag){case 26:case 27:case 5:var o=e.stateNode;break;case 30:o=e.stateNode;break;default:o=e.stateNode}typeof r=="function"?e.refCleanup=r(o):r.current=o}}catch(d){Ue(e,n,d)}}function vn(e,n){var r=e.ref,o=e.refCleanup;if(r!==null)if(typeof o=="function")try{o()}catch(d){Ue(e,n,d)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof r=="function")try{r(null)}catch(d){Ue(e,n,d)}else r.current=null}function lg(e){var n=e.type,r=e.memoizedProps,o=e.stateNode;try{e:switch(n){case"button":case"input":case"select":case"textarea":r.autoFocus&&o.focus();break e;case"img":r.src?o.src=r.src:r.srcSet&&(o.srcset=r.srcSet)}}catch(d){Ue(e,e.return,d)}}function Cd(e,n,r){try{var o=e.stateNode;A2(o,e.type,r,n),o[vt]=n}catch(d){Ue(e,e.return,d)}}function cg(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Aa(e.type)||e.tag===4}function Td(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||cg(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Aa(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Md(e,n,r){var o=e.tag;if(o===5||o===6)e=e.stateNode,n?(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r).insertBefore(e,n):(n=r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,n.appendChild(e),r=r._reactRootContainer,r!=null||n.onclick!==null||(n.onclick=kn));else if(o!==4&&(o===27&&Aa(e.type)&&(r=e.stateNode,n=null),e=e.child,e!==null))for(Md(e,n,r),e=e.sibling;e!==null;)Md(e,n,r),e=e.sibling}function cl(e,n,r){var o=e.tag;if(o===5||o===6)e=e.stateNode,n?r.insertBefore(e,n):r.appendChild(e);else if(o!==4&&(o===27&&Aa(e.type)&&(r=e.stateNode),e=e.child,e!==null))for(cl(e,n,r),e=e.sibling;e!==null;)cl(e,n,r),e=e.sibling}function ug(e){var n=e.stateNode,r=e.memoizedProps;try{for(var o=e.type,d=n.attributes;d.length;)n.removeAttributeNode(d[0]);yt(n,o,r),n[ct]=e,n[vt]=r}catch(h){Ue(e,e.return,h)}}var Gn=!1,st=!1,Ad=!1,dg=typeof WeakSet=="function"?WeakSet:Set,dt=null;function c2(e,n){if(e=e.containerInfo,Wd=Al,e=Nm(e),Nu(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var o=r.getSelection&&r.getSelection();if(o&&o.rangeCount!==0){r=o.anchorNode;var d=o.anchorOffset,h=o.focusNode;o=o.focusOffset;try{r.nodeType,h.nodeType}catch{r=null;break e}var b=0,T=-1,q=-1,W=0,ae=0,re=e,K=null;t:for(;;){for(var ee;re!==r||d!==0&&re.nodeType!==3||(T=b+d),re!==h||o!==0&&re.nodeType!==3||(q=b+o),re.nodeType===3&&(b+=re.nodeValue.length),(ee=re.firstChild)!==null;)K=re,re=ee;for(;;){if(re===e)break t;if(K===r&&++W===d&&(T=b),K===h&&++ae===o&&(q=b),(ee=re.nextSibling)!==null)break;re=K,K=re.parentNode}re=ee}r=T===-1||q===-1?null:{start:T,end:q}}else r=null}r=r||{start:0,end:0}}else r=null;for(Kd={focusedElem:e,selectionRange:r},Al=!1,dt=n;dt!==null;)if(n=dt,e=n.child,(n.subtreeFlags&1028)!==0&&e!==null)e.return=n,dt=e;else for(;dt!==null;){switch(n=dt,h=n.alternate,e=n.flags,n.tag){case 0:if((e&4)!==0&&(e=n.updateQueue,e=e!==null?e.events:null,e!==null))for(r=0;r<e.length;r++)d=e[r],d.ref.impl=d.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&h!==null){e=void 0,r=n,d=h.memoizedProps,h=h.memoizedState,o=r.stateNode;try{var fe=ui(r.type,d);e=o.getSnapshotBeforeUpdate(fe,h),o.__reactInternalSnapshotBeforeUpdate=e}catch(xe){Ue(r,r.return,xe)}}break;case 3:if((e&1024)!==0){if(e=n.stateNode.containerInfo,r=e.nodeType,r===9)tf(e);else if(r===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":tf(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(s(163))}if(e=n.sibling,e!==null){e.return=n.return,dt=e;break}dt=n.return}}function fg(e,n,r){var o=r.flags;switch(r.tag){case 0:case 11:case 15:Qn(e,r),o&4&&ms(5,r);break;case 1:if(Qn(e,r),o&4)if(e=r.stateNode,n===null)try{e.componentDidMount()}catch(b){Ue(r,r.return,b)}else{var d=ui(r.type,n.memoizedProps);n=n.memoizedState;try{e.componentDidUpdate(d,n,e.__reactInternalSnapshotBeforeUpdate)}catch(b){Ue(r,r.return,b)}}o&64&&sg(r),o&512&&ps(r,r.return);break;case 3:if(Qn(e,r),o&64&&(e=r.updateQueue,e!==null)){if(n=null,r.child!==null)switch(r.child.tag){case 27:case 5:n=r.child.stateNode;break;case 1:n=r.child.stateNode}try{Fm(e,n)}catch(b){Ue(r,r.return,b)}}break;case 27:n===null&&o&4&&ug(r);case 26:case 5:Qn(e,r),n===null&&o&4&&lg(r),o&512&&ps(r,r.return);break;case 12:Qn(e,r);break;case 31:Qn(e,r),o&4&&pg(e,r);break;case 13:Qn(e,r),o&4&&gg(e,r),o&64&&(e=r.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(r=x2.bind(null,r),L2(e,r))));break;case 22:if(o=r.memoizedState!==null||Gn,!o){n=n!==null&&n.memoizedState!==null||st,d=Gn;var h=st;Gn=o,(st=n)&&!h?Pn(e,r,(r.subtreeFlags&8772)!==0):Qn(e,r),Gn=d,st=h}break;case 30:break;default:Qn(e,r)}}function hg(e){var n=e.alternate;n!==null&&(e.alternate=null,hg(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&qr(n)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Qe=null,Tt=!1;function Zn(e,n,r){for(r=r.child;r!==null;)mg(e,n,r),r=r.sibling}function mg(e,n,r){if(wt&&typeof wt.onCommitFiberUnmount=="function")try{wt.onCommitFiberUnmount(Ga,r)}catch{}switch(r.tag){case 26:st||vn(r,n),Zn(e,n,r),r.memoizedState?r.memoizedState.count--:r.stateNode&&(r=r.stateNode,r.parentNode.removeChild(r));break;case 27:st||vn(r,n);var o=Qe,d=Tt;Aa(r.type)&&(Qe=r.stateNode,Tt=!1),Zn(e,n,r),Es(r.stateNode),Qe=o,Tt=d;break;case 5:st||vn(r,n);case 6:if(o=Qe,d=Tt,Qe=null,Zn(e,n,r),Qe=o,Tt=d,Qe!==null)if(Tt)try{(Qe.nodeType===9?Qe.body:Qe.nodeName==="HTML"?Qe.ownerDocument.body:Qe).removeChild(r.stateNode)}catch(h){Ue(r,n,h)}else try{Qe.removeChild(r.stateNode)}catch(h){Ue(r,n,h)}break;case 18:Qe!==null&&(Tt?(e=Qe,s0(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,r.stateNode),hr(e)):s0(Qe,r.stateNode));break;case 4:o=Qe,d=Tt,Qe=r.stateNode.containerInfo,Tt=!0,Zn(e,n,r),Qe=o,Tt=d;break;case 0:case 11:case 14:case 15:Na(2,r,n),st||Na(4,r,n),Zn(e,n,r);break;case 1:st||(vn(r,n),o=r.stateNode,typeof o.componentWillUnmount=="function"&&og(r,n,o)),Zn(e,n,r);break;case 21:Zn(e,n,r);break;case 22:st=(o=st)||r.memoizedState!==null,Zn(e,n,r),st=o;break;default:Zn(e,n,r)}}function pg(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{hr(e)}catch(r){Ue(n,n.return,r)}}}function gg(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{hr(e)}catch(r){Ue(n,n.return,r)}}function u2(e){switch(e.tag){case 31:case 13:case 19:var n=e.stateNode;return n===null&&(n=e.stateNode=new dg),n;case 22:return e=e.stateNode,n=e._retryCache,n===null&&(n=e._retryCache=new dg),n;default:throw Error(s(435,e.tag))}}function ul(e,n){var r=u2(e);n.forEach(function(o){if(!r.has(o)){r.add(o);var d=v2.bind(null,e,o);o.then(d,d)}})}function Mt(e,n){var r=n.deletions;if(r!==null)for(var o=0;o<r.length;o++){var d=r[o],h=e,b=n,T=b;e:for(;T!==null;){switch(T.tag){case 27:if(Aa(T.type)){Qe=T.stateNode,Tt=!1;break e}break;case 5:Qe=T.stateNode,Tt=!1;break e;case 3:case 4:Qe=T.stateNode.containerInfo,Tt=!0;break e}T=T.return}if(Qe===null)throw Error(s(160));mg(h,b,d),Qe=null,Tt=!1,h=d.alternate,h!==null&&(h.return=null),d.return=null}if(n.subtreeFlags&13886)for(n=n.child;n!==null;)yg(n,e),n=n.sibling}var on=null;function yg(e,n){var r=e.alternate,o=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Mt(n,e),At(e),o&4&&(Na(3,e,e.return),ms(3,e),Na(5,e,e.return));break;case 1:Mt(n,e),At(e),o&512&&(st||r===null||vn(r,r.return)),o&64&&Gn&&(e=e.updateQueue,e!==null&&(o=e.callbacks,o!==null&&(r=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=r===null?o:r.concat(o))));break;case 26:var d=on;if(Mt(n,e),At(e),o&512&&(st||r===null||vn(r,r.return)),o&4){var h=r!==null?r.memoizedState:null;if(o=e.memoizedState,r===null)if(o===null)if(e.stateNode===null){e:{o=e.type,r=e.memoizedProps,d=d.ownerDocument||d;t:switch(o){case"title":h=d.getElementsByTagName("title")[0],(!h||h[Pa]||h[ct]||h.namespaceURI==="http://www.w3.org/2000/svg"||h.hasAttribute("itemprop"))&&(h=d.createElement(o),d.head.insertBefore(h,d.querySelector("head > title"))),yt(h,o,r),h[ct]=e,nt(h),o=h;break e;case"link":var b=y0("link","href",d).get(o+(r.href||""));if(b){for(var T=0;T<b.length;T++)if(h=b[T],h.getAttribute("href")===(r.href==null||r.href===""?null:r.href)&&h.getAttribute("rel")===(r.rel==null?null:r.rel)&&h.getAttribute("title")===(r.title==null?null:r.title)&&h.getAttribute("crossorigin")===(r.crossOrigin==null?null:r.crossOrigin)){b.splice(T,1);break t}}h=d.createElement(o),yt(h,o,r),d.head.appendChild(h);break;case"meta":if(b=y0("meta","content",d).get(o+(r.content||""))){for(T=0;T<b.length;T++)if(h=b[T],h.getAttribute("content")===(r.content==null?null:""+r.content)&&h.getAttribute("name")===(r.name==null?null:r.name)&&h.getAttribute("property")===(r.property==null?null:r.property)&&h.getAttribute("http-equiv")===(r.httpEquiv==null?null:r.httpEquiv)&&h.getAttribute("charset")===(r.charSet==null?null:r.charSet)){b.splice(T,1);break t}}h=d.createElement(o),yt(h,o,r),d.head.appendChild(h);break;default:throw Error(s(468,o))}h[ct]=e,nt(h),o=h}e.stateNode=o}else x0(d,e.type,e.stateNode);else e.stateNode=g0(d,o,e.memoizedProps);else h!==o?(h===null?r.stateNode!==null&&(r=r.stateNode,r.parentNode.removeChild(r)):h.count--,o===null?x0(d,e.type,e.stateNode):g0(d,o,e.memoizedProps)):o===null&&e.stateNode!==null&&Cd(e,e.memoizedProps,r.memoizedProps)}break;case 27:Mt(n,e),At(e),o&512&&(st||r===null||vn(r,r.return)),r!==null&&o&4&&Cd(e,e.memoizedProps,r.memoizedProps);break;case 5:if(Mt(n,e),At(e),o&512&&(st||r===null||vn(r,r.return)),e.flags&32){d=e.stateNode;try{Bi(d,"")}catch(fe){Ue(e,e.return,fe)}}o&4&&e.stateNode!=null&&(d=e.memoizedProps,Cd(e,d,r!==null?r.memoizedProps:d)),o&1024&&(Ad=!0);break;case 6:if(Mt(n,e),At(e),o&4){if(e.stateNode===null)throw Error(s(162));o=e.memoizedProps,r=e.stateNode;try{r.nodeValue=o}catch(fe){Ue(e,e.return,fe)}}break;case 3:if(_l=null,d=on,on=El(n.containerInfo),Mt(n,e),on=d,At(e),o&4&&r!==null&&r.memoizedState.isDehydrated)try{hr(n.containerInfo)}catch(fe){Ue(e,e.return,fe)}Ad&&(Ad=!1,xg(e));break;case 4:o=on,on=El(e.stateNode.containerInfo),Mt(n,e),At(e),on=o;break;case 12:Mt(n,e),At(e);break;case 31:Mt(n,e),At(e),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,ul(e,o)));break;case 13:Mt(n,e),At(e),e.child.flags&8192&&e.memoizedState!==null!=(r!==null&&r.memoizedState!==null)&&(fl=ht()),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,ul(e,o)));break;case 22:d=e.memoizedState!==null;var q=r!==null&&r.memoizedState!==null,W=Gn,ae=st;if(Gn=W||d,st=ae||q,Mt(n,e),st=ae,Gn=W,At(e),o&8192)e:for(n=e.stateNode,n._visibility=d?n._visibility&-2:n._visibility|1,d&&(r===null||q||Gn||st||di(e)),r=null,n=e;;){if(n.tag===5||n.tag===26){if(r===null){q=r=n;try{if(h=q.stateNode,d)b=h.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none";else{T=q.stateNode;var re=q.memoizedProps.style,K=re!=null&&re.hasOwnProperty("display")?re.display:null;T.style.display=K==null||typeof K=="boolean"?"":(""+K).trim()}}catch(fe){Ue(q,q.return,fe)}}}else if(n.tag===6){if(r===null){q=n;try{q.stateNode.nodeValue=d?"":q.memoizedProps}catch(fe){Ue(q,q.return,fe)}}}else if(n.tag===18){if(r===null){q=n;try{var ee=q.stateNode;d?o0(ee,!0):o0(q.stateNode,!1)}catch(fe){Ue(q,q.return,fe)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===e)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;r===n&&(r=null),n=n.return}r===n&&(r=null),n.sibling.return=n.return,n=n.sibling}o&4&&(o=e.updateQueue,o!==null&&(r=o.retryQueue,r!==null&&(o.retryQueue=null,ul(e,r))));break;case 19:Mt(n,e),At(e),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,ul(e,o)));break;case 30:break;case 21:break;default:Mt(n,e),At(e)}}function At(e){var n=e.flags;if(n&2){try{for(var r,o=e.return;o!==null;){if(cg(o)){r=o;break}o=o.return}if(r==null)throw Error(s(160));switch(r.tag){case 27:var d=r.stateNode,h=Td(e);cl(e,h,d);break;case 5:var b=r.stateNode;r.flags&32&&(Bi(b,""),r.flags&=-33);var T=Td(e);cl(e,T,b);break;case 3:case 4:var q=r.stateNode.containerInfo,W=Td(e);Md(e,W,q);break;default:throw Error(s(161))}}catch(ae){Ue(e,e.return,ae)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function xg(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var n=e;xg(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),e=e.sibling}}function Qn(e,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)fg(e,n.alternate,n),n=n.sibling}function di(e){for(e=e.child;e!==null;){var n=e;switch(n.tag){case 0:case 11:case 14:case 15:Na(4,n,n.return),di(n);break;case 1:vn(n,n.return);var r=n.stateNode;typeof r.componentWillUnmount=="function"&&og(n,n.return,r),di(n);break;case 27:Es(n.stateNode);case 26:case 5:vn(n,n.return),di(n);break;case 22:n.memoizedState===null&&di(n);break;case 30:di(n);break;default:di(n)}e=e.sibling}}function Pn(e,n,r){for(r=r&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var o=n.alternate,d=e,h=n,b=h.flags;switch(h.tag){case 0:case 11:case 15:Pn(d,h,r),ms(4,h);break;case 1:if(Pn(d,h,r),o=h,d=o.stateNode,typeof d.componentDidMount=="function")try{d.componentDidMount()}catch(W){Ue(o,o.return,W)}if(o=h,d=o.updateQueue,d!==null){var T=o.stateNode;try{var q=d.shared.hiddenCallbacks;if(q!==null)for(d.shared.hiddenCallbacks=null,d=0;d<q.length;d++)Im(q[d],T)}catch(W){Ue(o,o.return,W)}}r&&b&64&&sg(h),ps(h,h.return);break;case 27:ug(h);case 26:case 5:Pn(d,h,r),r&&o===null&&b&4&&lg(h),ps(h,h.return);break;case 12:Pn(d,h,r);break;case 31:Pn(d,h,r),r&&b&4&&pg(d,h);break;case 13:Pn(d,h,r),r&&b&4&&gg(d,h);break;case 22:h.memoizedState===null&&Pn(d,h,r),ps(h,h.return);break;case 30:break;default:Pn(d,h,r)}n=n.sibling}}function Rd(e,n){var r=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(r=e.memoizedState.cachePool.pool),e=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(e=n.memoizedState.cachePool.pool),e!==r&&(e!=null&&e.refCount++,r!=null&&ts(r))}function zd(e,n){e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&ts(e))}function ln(e,n,r,o){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)vg(e,n,r,o),n=n.sibling}function vg(e,n,r,o){var d=n.flags;switch(n.tag){case 0:case 11:case 15:ln(e,n,r,o),d&2048&&ms(9,n);break;case 1:ln(e,n,r,o);break;case 3:ln(e,n,r,o),d&2048&&(e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&ts(e)));break;case 12:if(d&2048){ln(e,n,r,o),e=n.stateNode;try{var h=n.memoizedProps,b=h.id,T=h.onPostCommit;typeof T=="function"&&T(b,n.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(q){Ue(n,n.return,q)}}else ln(e,n,r,o);break;case 31:ln(e,n,r,o);break;case 13:ln(e,n,r,o);break;case 23:break;case 22:h=n.stateNode,b=n.alternate,n.memoizedState!==null?h._visibility&2?ln(e,n,r,o):gs(e,n):h._visibility&2?ln(e,n,r,o):(h._visibility|=2,nr(e,n,r,o,(n.subtreeFlags&10256)!==0||!1)),d&2048&&Rd(b,n);break;case 24:ln(e,n,r,o),d&2048&&zd(n.alternate,n);break;default:ln(e,n,r,o)}}function nr(e,n,r,o,d){for(d=d&&((n.subtreeFlags&10256)!==0||!1),n=n.child;n!==null;){var h=e,b=n,T=r,q=o,W=b.flags;switch(b.tag){case 0:case 11:case 15:nr(h,b,T,q,d),ms(8,b);break;case 23:break;case 22:var ae=b.stateNode;b.memoizedState!==null?ae._visibility&2?nr(h,b,T,q,d):gs(h,b):(ae._visibility|=2,nr(h,b,T,q,d)),d&&W&2048&&Rd(b.alternate,b);break;case 24:nr(h,b,T,q,d),d&&W&2048&&zd(b.alternate,b);break;default:nr(h,b,T,q,d)}n=n.sibling}}function gs(e,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var r=e,o=n,d=o.flags;switch(o.tag){case 22:gs(r,o),d&2048&&Rd(o.alternate,o);break;case 24:gs(r,o),d&2048&&zd(o.alternate,o);break;default:gs(r,o)}n=n.sibling}}var ys=8192;function ar(e,n,r){if(e.subtreeFlags&ys)for(e=e.child;e!==null;)bg(e,n,r),e=e.sibling}function bg(e,n,r){switch(e.tag){case 26:ar(e,n,r),e.flags&ys&&e.memoizedState!==null&&F2(r,on,e.memoizedState,e.memoizedProps);break;case 5:ar(e,n,r);break;case 3:case 4:var o=on;on=El(e.stateNode.containerInfo),ar(e,n,r),on=o;break;case 22:e.memoizedState===null&&(o=e.alternate,o!==null&&o.memoizedState!==null?(o=ys,ys=16777216,ar(e,n,r),ys=o):ar(e,n,r));break;default:ar(e,n,r)}}function wg(e){var n=e.alternate;if(n!==null&&(e=n.child,e!==null)){n.child=null;do n=e.sibling,e.sibling=null,e=n;while(e!==null)}}function xs(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var r=0;r<n.length;r++){var o=n[r];dt=o,Ng(o,e)}wg(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Sg(e),e=e.sibling}function Sg(e){switch(e.tag){case 0:case 11:case 15:xs(e),e.flags&2048&&Na(9,e,e.return);break;case 3:xs(e);break;case 12:xs(e);break;case 22:var n=e.stateNode;e.memoizedState!==null&&n._visibility&2&&(e.return===null||e.return.tag!==13)?(n._visibility&=-3,dl(e)):xs(e);break;default:xs(e)}}function dl(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var r=0;r<n.length;r++){var o=n[r];dt=o,Ng(o,e)}wg(e)}for(e=e.child;e!==null;){switch(n=e,n.tag){case 0:case 11:case 15:Na(8,n,n.return),dl(n);break;case 22:r=n.stateNode,r._visibility&2&&(r._visibility&=-3,dl(n));break;default:dl(n)}e=e.sibling}}function Ng(e,n){for(;dt!==null;){var r=dt;switch(r.tag){case 0:case 11:case 15:Na(8,r,n);break;case 23:case 22:if(r.memoizedState!==null&&r.memoizedState.cachePool!==null){var o=r.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:ts(r.memoizedState.cache)}if(o=r.child,o!==null)o.return=r,dt=o;else e:for(r=e;dt!==null;){o=dt;var d=o.sibling,h=o.return;if(hg(o),o===r){dt=null;break e}if(d!==null){d.return=h,dt=d;break e}dt=h}}}var d2={getCacheForType:function(e){var n=pt(at),r=n.data.get(e);return r===void 0&&(r=e(),n.data.set(e,r)),r},cacheSignal:function(){return pt(at).controller.signal}},f2=typeof WeakMap=="function"?WeakMap:Map,Be=0,Xe=null,Ce=null,Me=0,Le=0,Lt=null,Ea=!1,ir=!1,Dd=!1,In=0,Ke=0,ja=0,fi=0,Od=0,Ut=0,rr=0,vs=null,Rt=null,kd=!1,fl=0,Eg=0,hl=1/0,ml=null,_a=null,ut=0,Ca=null,sr=null,Fn=0,Bd=0,Hd=null,jg=null,bs=0,Ld=null;function $t(){return(Be&2)!==0&&Me!==0?Me&-Me:z.T!==null?Xd():xo()}function _g(){if(Ut===0)if((Me&536870912)===0||Re){var e=Mi;Mi<<=1,(Mi&3932160)===0&&(Mi=262144),Ut=e}else Ut=536870912;return e=Bt.current,e!==null&&(e.flags|=32),Ut}function zt(e,n,r){(e===Xe&&(Le===2||Le===9)||e.cancelPendingCommit!==null)&&(or(e,0),Ta(e,Me,Ut,!1)),Qa(e,r),((Be&2)===0||e!==Xe)&&(e===Xe&&((Be&2)===0&&(fi|=r),Ke===4&&Ta(e,Me,Ut,!1)),bn(e))}function Cg(e,n,r){if((Be&6)!==0)throw Error(s(327));var o=!r&&(n&127)===0&&(n&e.expiredLanes)===0||Za(e,n),d=o?p2(e,n):$d(e,n,!0),h=o;do{if(d===0){ir&&!o&&Ta(e,n,0,!1);break}else{if(r=e.current.alternate,h&&!h2(r)){d=$d(e,n,!1),h=!1;continue}if(d===2){if(h=n,e.errorRecoveryDisabledLanes&h)var b=0;else b=e.pendingLanes&-536870913,b=b!==0?b:b&536870912?536870912:0;if(b!==0){n=b;e:{var T=e;d=vs;var q=T.current.memoizedState.isDehydrated;if(q&&(or(T,b).flags|=256),b=$d(T,b,!1),b!==2){if(Dd&&!q){T.errorRecoveryDisabledLanes|=h,fi|=h,d=4;break e}h=Rt,Rt=d,h!==null&&(Rt===null?Rt=h:Rt.push.apply(Rt,h))}d=b}if(h=!1,d!==2)continue}}if(d===1){or(e,0),Ta(e,n,0,!0);break}e:{switch(o=e,h=d,h){case 0:case 1:throw Error(s(345));case 4:if((n&4194048)!==n)break;case 6:Ta(o,n,Ut,!Ea);break e;case 2:Rt=null;break;case 3:case 5:break;default:throw Error(s(329))}if((n&62914560)===n&&(d=fl+300-ht(),10<d)){if(Ta(o,n,Ut,!Ea),Ri(o,0,!0)!==0)break e;Fn=n,o.timeoutHandle=i0(Tg.bind(null,o,r,Rt,ml,kd,n,Ut,fi,rr,Ea,h,"Throttled",-0,0),d);break e}Tg(o,r,Rt,ml,kd,n,Ut,fi,rr,Ea,h,null,-0,0)}}break}while(!0);bn(e)}function Tg(e,n,r,o,d,h,b,T,q,W,ae,re,K,ee){if(e.timeoutHandle=-1,re=n.subtreeFlags,re&8192||(re&16785408)===16785408){re={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:kn},bg(n,h,re);var fe=(h&62914560)===h?fl-ht():(h&4194048)===h?Eg-ht():0;if(fe=W2(re,fe),fe!==null){Fn=h,e.cancelPendingCommit=fe(Bg.bind(null,e,n,h,r,o,d,b,T,q,ae,re,null,K,ee)),Ta(e,h,b,!W);return}}Bg(e,n,h,r,o,d,b,T,q)}function h2(e){for(var n=e;;){var r=n.tag;if((r===0||r===11||r===15)&&n.flags&16384&&(r=n.updateQueue,r!==null&&(r=r.stores,r!==null)))for(var o=0;o<r.length;o++){var d=r[o],h=d.getSnapshot;d=d.value;try{if(!Ot(h(),d))return!1}catch{return!1}}if(r=n.child,n.subtreeFlags&16384&&r!==null)r.return=n,n=r;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function Ta(e,n,r,o){n&=~Od,n&=~fi,e.suspendedLanes|=n,e.pingedLanes&=~n,o&&(e.warmLanes|=n),o=e.expirationTimes;for(var d=n;0<d;){var h=31-St(d),b=1<<h;o[h]=-1,d&=~b}r!==0&&po(e,r,n)}function pl(){return(Be&6)===0?(ws(0),!1):!0}function Ud(){if(Ce!==null){if(Le===0)var e=Ce.return;else e=Ce,Un=ai=null,td(e),Wi=null,as=0,e=Ce;for(;e!==null;)rg(e.alternate,e),e=e.return;Ce=null}}function or(e,n){var r=e.timeoutHandle;r!==-1&&(e.timeoutHandle=-1,D2(r)),r=e.cancelPendingCommit,r!==null&&(e.cancelPendingCommit=null,r()),Fn=0,Ud(),Xe=e,Ce=r=Hn(e.current,null),Me=n,Le=0,Lt=null,Ea=!1,ir=Za(e,n),Dd=!1,rr=Ut=Od=fi=ja=Ke=0,Rt=vs=null,kd=!1,(n&8)!==0&&(n|=n&32);var o=e.entangledLanes;if(o!==0)for(e=e.entanglements,o&=n;0<o;){var d=31-St(o),h=1<<d;n|=e[d],o&=~h}return In=n,Bo(),r}function Mg(e,n){Ne=null,z.H=ds,n===Fi||n===Xo?(n=Gm(),Le=3):n===Yu?(n=Gm(),Le=4):Le=n===yd?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,Lt=n,Ce===null&&(Ke=1,il(e,Pt(n,e.current)))}function Ag(){var e=Bt.current;return e===null?!0:(Me&4194048)===Me?Kt===null:(Me&62914560)===Me||(Me&536870912)!==0?e===Kt:!1}function Rg(){var e=z.H;return z.H=ds,e===null?ds:e}function zg(){var e=z.A;return z.A=d2,e}function gl(){Ke=4,Ea||(Me&4194048)!==Me&&Bt.current!==null||(ir=!0),(ja&134217727)===0&&(fi&134217727)===0||Xe===null||Ta(Xe,Me,Ut,!1)}function $d(e,n,r){var o=Be;Be|=2;var d=Rg(),h=zg();(Xe!==e||Me!==n)&&(ml=null,or(e,n)),n=!1;var b=Ke;e:do try{if(Le!==0&&Ce!==null){var T=Ce,q=Lt;switch(Le){case 8:Ud(),b=6;break e;case 3:case 2:case 9:case 6:Bt.current===null&&(n=!0);var W=Le;if(Le=0,Lt=null,lr(e,T,q,W),r&&ir){b=0;break e}break;default:W=Le,Le=0,Lt=null,lr(e,T,q,W)}}m2(),b=Ke;break}catch(ae){Mg(e,ae)}while(!0);return n&&e.shellSuspendCounter++,Un=ai=null,Be=o,z.H=d,z.A=h,Ce===null&&(Xe=null,Me=0,Bo()),b}function m2(){for(;Ce!==null;)Dg(Ce)}function p2(e,n){var r=Be;Be|=2;var o=Rg(),d=zg();Xe!==e||Me!==n?(ml=null,hl=ht()+500,or(e,n)):ir=Za(e,n);e:do try{if(Le!==0&&Ce!==null){n=Ce;var h=Lt;t:switch(Le){case 1:Le=0,Lt=null,lr(e,n,h,1);break;case 2:case 9:if(Ym(h)){Le=0,Lt=null,Og(n);break}n=function(){Le!==2&&Le!==9||Xe!==e||(Le=7),bn(e)},h.then(n,n);break e;case 3:Le=7;break e;case 4:Le=5;break e;case 7:Ym(h)?(Le=0,Lt=null,Og(n)):(Le=0,Lt=null,lr(e,n,h,7));break;case 5:var b=null;switch(Ce.tag){case 26:b=Ce.memoizedState;case 5:case 27:var T=Ce;if(b?v0(b):T.stateNode.complete){Le=0,Lt=null;var q=T.sibling;if(q!==null)Ce=q;else{var W=T.return;W!==null?(Ce=W,yl(W)):Ce=null}break t}}Le=0,Lt=null,lr(e,n,h,5);break;case 6:Le=0,Lt=null,lr(e,n,h,6);break;case 8:Ud(),Ke=6;break e;default:throw Error(s(462))}}g2();break}catch(ae){Mg(e,ae)}while(!0);return Un=ai=null,z.H=o,z.A=d,Be=r,Ce!==null?0:(Xe=null,Me=0,Bo(),Ke)}function g2(){for(;Ce!==null&&!Va();)Dg(Ce)}function Dg(e){var n=ag(e.alternate,e,In);e.memoizedProps=e.pendingProps,n===null?yl(e):Ce=n}function Og(e){var n=e,r=n.alternate;switch(n.tag){case 15:case 0:n=Wp(r,n,n.pendingProps,n.type,void 0,Me);break;case 11:n=Wp(r,n,n.pendingProps,n.type.render,n.ref,Me);break;case 5:td(n);default:rg(r,n),n=Ce=zm(n,In),n=ag(r,n,In)}e.memoizedProps=e.pendingProps,n===null?yl(e):Ce=n}function lr(e,n,r,o){Un=ai=null,td(n),Wi=null,as=0;var d=n.return;try{if(i2(e,d,n,r,Me)){Ke=1,il(e,Pt(r,e.current)),Ce=null;return}}catch(h){if(d!==null)throw Ce=d,h;Ke=1,il(e,Pt(r,e.current)),Ce=null;return}n.flags&32768?(Re||o===1?e=!0:ir||(Me&536870912)!==0?e=!1:(Ea=e=!0,(o===2||o===9||o===3||o===6)&&(o=Bt.current,o!==null&&o.tag===13&&(o.flags|=16384))),kg(n,e)):yl(n)}function yl(e){var n=e;do{if((n.flags&32768)!==0){kg(n,Ea);return}e=n.return;var r=o2(n.alternate,n,In);if(r!==null){Ce=r;return}if(n=n.sibling,n!==null){Ce=n;return}Ce=n=e}while(n!==null);Ke===0&&(Ke=5)}function kg(e,n){do{var r=l2(e.alternate,e);if(r!==null){r.flags&=32767,Ce=r;return}if(r=e.return,r!==null&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!n&&(e=e.sibling,e!==null)){Ce=e;return}Ce=e=r}while(e!==null);Ke=6,Ce=null}function Bg(e,n,r,o,d,h,b,T,q){e.cancelPendingCommit=null;do xl();while(ut!==0);if((Be&6)!==0)throw Error(s(327));if(n!==null){if(n===e.current)throw Error(s(177));if(h=n.lanes|n.childLanes,h|=Tu,iu(e,r,h,b,T,q),e===Xe&&(Ce=Xe=null,Me=0),sr=n,Ca=e,Fn=r,Bd=h,Hd=d,jg=o,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,b2(Xa,function(){return qg(),null})):(e.callbackNode=null,e.callbackPriority=0),o=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||o){o=z.T,z.T=null,d=D.p,D.p=2,b=Be,Be|=4;try{c2(e,n,r)}finally{Be=b,D.p=d,z.T=o}}ut=1,Hg(),Lg(),Ug()}}function Hg(){if(ut===1){ut=0;var e=Ca,n=sr,r=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||r){r=z.T,z.T=null;var o=D.p;D.p=2;var d=Be;Be|=4;try{yg(n,e);var h=Kd,b=Nm(e.containerInfo),T=h.focusedElem,q=h.selectionRange;if(b!==T&&T&&T.ownerDocument&&Sm(T.ownerDocument.documentElement,T)){if(q!==null&&Nu(T)){var W=q.start,ae=q.end;if(ae===void 0&&(ae=W),"selectionStart"in T)T.selectionStart=W,T.selectionEnd=Math.min(ae,T.value.length);else{var re=T.ownerDocument||document,K=re&&re.defaultView||window;if(K.getSelection){var ee=K.getSelection(),fe=T.textContent.length,xe=Math.min(q.start,fe),Ye=q.end===void 0?xe:Math.min(q.end,fe);!ee.extend&&xe>Ye&&(b=Ye,Ye=xe,xe=b);var G=wm(T,xe),Y=wm(T,Ye);if(G&&Y&&(ee.rangeCount!==1||ee.anchorNode!==G.node||ee.anchorOffset!==G.offset||ee.focusNode!==Y.node||ee.focusOffset!==Y.offset)){var I=re.createRange();I.setStart(G.node,G.offset),ee.removeAllRanges(),xe>Ye?(ee.addRange(I),ee.extend(Y.node,Y.offset)):(I.setEnd(Y.node,Y.offset),ee.addRange(I))}}}}for(re=[],ee=T;ee=ee.parentNode;)ee.nodeType===1&&re.push({element:ee,left:ee.scrollLeft,top:ee.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<re.length;T++){var ie=re[T];ie.element.scrollLeft=ie.left,ie.element.scrollTop=ie.top}}Al=!!Wd,Kd=Wd=null}finally{Be=d,D.p=o,z.T=r}}e.current=n,ut=2}}function Lg(){if(ut===2){ut=0;var e=Ca,n=sr,r=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||r){r=z.T,z.T=null;var o=D.p;D.p=2;var d=Be;Be|=4;try{fg(e,n.alternate,n)}finally{Be=d,D.p=o,z.T=r}}ut=3}}function Ug(){if(ut===4||ut===3){ut=0,Ya();var e=Ca,n=sr,r=Fn,o=jg;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?ut=5:(ut=0,sr=Ca=null,$g(e,e.pendingLanes));var d=e.pendingLanes;if(d===0&&(_a=null),$r(r),n=n.stateNode,wt&&typeof wt.onCommitFiberRoot=="function")try{wt.onCommitFiberRoot(Ga,n,void 0,(n.current.flags&128)===128)}catch{}if(o!==null){n=z.T,d=D.p,D.p=2,z.T=null;try{for(var h=e.onRecoverableError,b=0;b<o.length;b++){var T=o[b];h(T.value,{componentStack:T.stack})}}finally{z.T=n,D.p=d}}(Fn&3)!==0&&xl(),bn(e),d=e.pendingLanes,(r&261930)!==0&&(d&42)!==0?e===Ld?bs++:(bs=0,Ld=e):bs=0,ws(0)}}function $g(e,n){(e.pooledCacheLanes&=n)===0&&(n=e.pooledCache,n!=null&&(e.pooledCache=null,ts(n)))}function xl(){return Hg(),Lg(),Ug(),qg()}function qg(){if(ut!==5)return!1;var e=Ca,n=Bd;Bd=0;var r=$r(Fn),o=z.T,d=D.p;try{D.p=32>r?32:r,z.T=null,r=Hd,Hd=null;var h=Ca,b=Fn;if(ut=0,sr=Ca=null,Fn=0,(Be&6)!==0)throw Error(s(331));var T=Be;if(Be|=4,Sg(h.current),vg(h,h.current,b,r),Be=T,ws(0,!1),wt&&typeof wt.onPostCommitFiberRoot=="function")try{wt.onPostCommitFiberRoot(Ga,h)}catch{}return!0}finally{D.p=d,z.T=o,$g(e,n)}}function Vg(e,n,r){n=Pt(r,n),n=gd(e.stateNode,n,2),e=ba(e,n,2),e!==null&&(Qa(e,2),bn(e))}function Ue(e,n,r){if(e.tag===3)Vg(e,e,r);else for(;n!==null;){if(n.tag===3){Vg(n,e,r);break}else if(n.tag===1){var o=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(_a===null||!_a.has(o))){e=Pt(r,e),r=Yp(2),o=ba(n,r,2),o!==null&&(Xp(r,o,n,e),Qa(o,2),bn(o));break}}n=n.return}}function qd(e,n,r){var o=e.pingCache;if(o===null){o=e.pingCache=new f2;var d=new Set;o.set(n,d)}else d=o.get(n),d===void 0&&(d=new Set,o.set(n,d));d.has(r)||(Dd=!0,d.add(r),e=y2.bind(null,e,n,r),n.then(e,e))}function y2(e,n,r){var o=e.pingCache;o!==null&&o.delete(n),e.pingedLanes|=e.suspendedLanes&r,e.warmLanes&=~r,Xe===e&&(Me&r)===r&&(Ke===4||Ke===3&&(Me&62914560)===Me&&300>ht()-fl?(Be&2)===0&&or(e,0):Od|=r,rr===Me&&(rr=0)),bn(e)}function Yg(e,n){n===0&&(n=mo()),e=ei(e,n),e!==null&&(Qa(e,n),bn(e))}function x2(e){var n=e.memoizedState,r=0;n!==null&&(r=n.retryLane),Yg(e,r)}function v2(e,n){var r=0;switch(e.tag){case 31:case 13:var o=e.stateNode,d=e.memoizedState;d!==null&&(r=d.retryLane);break;case 19:o=e.stateNode;break;case 22:o=e.stateNode._retryCache;break;default:throw Error(s(314))}o!==null&&o.delete(n),Yg(e,r)}function b2(e,n){return an(e,n)}var vl=null,cr=null,Vd=!1,bl=!1,Yd=!1,Ma=0;function bn(e){e!==cr&&e.next===null&&(cr===null?vl=cr=e:cr=cr.next=e),bl=!0,Vd||(Vd=!0,S2())}function ws(e,n){if(!Yd&&bl){Yd=!0;do for(var r=!1,o=vl;o!==null;){if(e!==0){var d=o.pendingLanes;if(d===0)var h=0;else{var b=o.suspendedLanes,T=o.pingedLanes;h=(1<<31-St(42|e)+1)-1,h&=d&~(b&~T),h=h&201326741?h&201326741|1:h?h|2:0}h!==0&&(r=!0,Qg(o,h))}else h=Me,h=Ri(o,o===Xe?h:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(h&3)===0||Za(o,h)||(r=!0,Qg(o,h));o=o.next}while(r);Yd=!1}}function w2(){Xg()}function Xg(){bl=Vd=!1;var e=0;Ma!==0&&z2()&&(e=Ma);for(var n=ht(),r=null,o=vl;o!==null;){var d=o.next,h=Gg(o,n);h===0?(o.next=null,r===null?vl=d:r.next=d,d===null&&(cr=r)):(r=o,(e!==0||(h&3)!==0)&&(bl=!0)),o=d}ut!==0&&ut!==5||ws(e),Ma!==0&&(Ma=0)}function Gg(e,n){for(var r=e.suspendedLanes,o=e.pingedLanes,d=e.expirationTimes,h=e.pendingLanes&-62914561;0<h;){var b=31-St(h),T=1<<b,q=d[b];q===-1?((T&r)===0||(T&o)!==0)&&(d[b]=au(T,n)):q<=n&&(e.expiredLanes|=T),h&=~T}if(n=Xe,r=Me,r=Ri(e,e===n?r:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o=e.callbackNode,r===0||e===n&&(Le===2||Le===9)||e.cancelPendingCommit!==null)return o!==null&&o!==null&&Mn(o),e.callbackNode=null,e.callbackPriority=0;if((r&3)===0||Za(e,r)){if(n=r&-r,n===e.callbackPriority)return n;switch(o!==null&&Mn(o),$r(r)){case 2:case 8:r=oa;break;case 32:r=Xa;break;case 268435456:r=Ci;break;default:r=Xa}return o=Zg.bind(null,e),r=an(r,o),e.callbackPriority=n,e.callbackNode=r,n}return o!==null&&o!==null&&Mn(o),e.callbackPriority=2,e.callbackNode=null,2}function Zg(e,n){if(ut!==0&&ut!==5)return e.callbackNode=null,e.callbackPriority=0,null;var r=e.callbackNode;if(xl()&&e.callbackNode!==r)return null;var o=Me;return o=Ri(e,e===Xe?o:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o===0?null:(Cg(e,o,n),Gg(e,ht()),e.callbackNode!=null&&e.callbackNode===r?Zg.bind(null,e):null)}function Qg(e,n){if(xl())return null;Cg(e,n,!0)}function S2(){O2(function(){(Be&6)!==0?an(An,w2):Xg()})}function Xd(){if(Ma===0){var e=Pi;e===0&&(e=Ti,Ti<<=1,(Ti&261888)===0&&(Ti=256)),Ma=e}return Ma}function Pg(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:To(""+e)}function Ig(e,n){var r=n.ownerDocument.createElement("input");return r.name=n.name,r.value=n.value,e.id&&r.setAttribute("form",e.id),n.parentNode.insertBefore(r,n),e=new FormData(e),r.parentNode.removeChild(r),e}function N2(e,n,r,o,d){if(n==="submit"&&r&&r.stateNode===d){var h=Pg((d[vt]||null).action),b=o.submitter;b&&(n=(n=b[vt]||null)?Pg(n.formAction):b.getAttribute("formAction"),n!==null&&(h=n,b=null));var T=new zo("action","action",null,o,d);e.push({event:T,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(Ma!==0){var q=b?Ig(d,b):new FormData(d);ud(r,{pending:!0,data:q,method:d.method,action:h},null,q)}}else typeof h=="function"&&(T.preventDefault(),q=b?Ig(d,b):new FormData(d),ud(r,{pending:!0,data:q,method:d.method,action:h},h,q))},currentTarget:d}]})}}for(var Gd=0;Gd<Cu.length;Gd++){var Zd=Cu[Gd],E2=Zd.toLowerCase(),j2=Zd[0].toUpperCase()+Zd.slice(1);sn(E2,"on"+j2)}sn(_m,"onAnimationEnd"),sn(Cm,"onAnimationIteration"),sn(Tm,"onAnimationStart"),sn("dblclick","onDoubleClick"),sn("focusin","onFocus"),sn("focusout","onBlur"),sn(qb,"onTransitionRun"),sn(Vb,"onTransitionStart"),sn(Yb,"onTransitionCancel"),sn(Mm,"onTransitionEnd"),fa("onMouseEnter",["mouseout","mouseover"]),fa("onMouseLeave",["mouseout","mouseover"]),fa("onPointerEnter",["pointerout","pointerover"]),fa("onPointerLeave",["pointerout","pointerover"]),Dn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Dn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Dn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Dn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Dn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Dn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ss="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),_2=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ss));function Fg(e,n){n=(n&4)!==0;for(var r=0;r<e.length;r++){var o=e[r],d=o.event;o=o.listeners;e:{var h=void 0;if(n)for(var b=o.length-1;0<=b;b--){var T=o[b],q=T.instance,W=T.currentTarget;if(T=T.listener,q!==h&&d.isPropagationStopped())break e;h=T,d.currentTarget=W;try{h(d)}catch(ae){ko(ae)}d.currentTarget=null,h=q}else for(b=0;b<o.length;b++){if(T=o[b],q=T.instance,W=T.currentTarget,T=T.listener,q!==h&&d.isPropagationStopped())break e;h=T,d.currentTarget=W;try{h(d)}catch(ae){ko(ae)}d.currentTarget=null,h=q}}}}function Te(e,n){var r=n[zi];r===void 0&&(r=n[zi]=new Set);var o=e+"__bubble";r.has(o)||(Wg(n,e,2,!1),r.add(o))}function Qd(e,n,r){var o=0;n&&(o|=4),Wg(r,e,o,n)}var wl="_reactListening"+Math.random().toString(36).slice(2);function Pd(e){if(!e[wl]){e[wl]=!0,So.forEach(function(r){r!=="selectionchange"&&(_2.has(r)||Qd(r,!1,e),Qd(r,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[wl]||(n[wl]=!0,Qd("selectionchange",!1,n))}}function Wg(e,n,r,o){switch(_0(n)){case 2:var d=ew;break;case 8:d=tw;break;default:d=uf}r=d.bind(null,n,r,e),d=void 0,!mu||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(d=!0),o?d!==void 0?e.addEventListener(n,r,{capture:!0,passive:d}):e.addEventListener(n,r,!0):d!==void 0?e.addEventListener(n,r,{passive:d}):e.addEventListener(n,r,!1)}function Id(e,n,r,o,d){var h=o;if((n&1)===0&&(n&2)===0&&o!==null)e:for(;;){if(o===null)return;var b=o.tag;if(b===3||b===4){var T=o.stateNode.containerInfo;if(T===d)break;if(b===4)for(b=o.return;b!==null;){var q=b.tag;if((q===3||q===4)&&b.stateNode.containerInfo===d)return;b=b.return}for(;T!==null;){if(b=la(T),b===null)return;if(q=b.tag,q===5||q===6||q===26||q===27){o=h=b;continue e}T=T.parentNode}}o=o.return}nm(function(){var W=h,ae=fu(r),re=[];e:{var K=Am.get(e);if(K!==void 0){var ee=zo,fe=e;switch(e){case"keypress":if(Ao(r)===0)break e;case"keydown":case"keyup":ee=vb;break;case"focusin":fe="focus",ee=xu;break;case"focusout":fe="blur",ee=xu;break;case"beforeblur":case"afterblur":ee=xu;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ee=rm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ee=ob;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ee=Sb;break;case _m:case Cm:case Tm:ee=ub;break;case Mm:ee=Eb;break;case"scroll":case"scrollend":ee=rb;break;case"wheel":ee=_b;break;case"copy":case"cut":case"paste":ee=fb;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ee=om;break;case"toggle":case"beforetoggle":ee=Tb}var xe=(n&4)!==0,Ye=!xe&&(e==="scroll"||e==="scrollend"),G=xe?K!==null?K+"Capture":null:K;xe=[];for(var Y=W,I;Y!==null;){var ie=Y;if(I=ie.stateNode,ie=ie.tag,ie!==5&&ie!==26&&ie!==27||I===null||G===null||(ie=Xr(Y,G),ie!=null&&xe.push(Ns(Y,ie,I))),Ye)break;Y=Y.return}0<xe.length&&(K=new ee(K,fe,null,r,ae),re.push({event:K,listeners:xe}))}}if((n&7)===0){e:{if(K=e==="mouseover"||e==="pointerover",ee=e==="mouseout"||e==="pointerout",K&&r!==du&&(fe=r.relatedTarget||r.fromElement)&&(la(fe)||fe[zn]))break e;if((ee||K)&&(K=ae.window===ae?ae:(K=ae.ownerDocument)?K.defaultView||K.parentWindow:window,ee?(fe=r.relatedTarget||r.toElement,ee=W,fe=fe?la(fe):null,fe!==null&&(Ye=u(fe),xe=fe.tag,fe!==Ye||xe!==5&&xe!==27&&xe!==6)&&(fe=null)):(ee=null,fe=W),ee!==fe)){if(xe=rm,ie="onMouseLeave",G="onMouseEnter",Y="mouse",(e==="pointerout"||e==="pointerover")&&(xe=om,ie="onPointerLeave",G="onPointerEnter",Y="pointer"),Ye=ee==null?K:ua(ee),I=fe==null?K:ua(fe),K=new xe(ie,Y+"leave",ee,r,ae),K.target=Ye,K.relatedTarget=I,ie=null,la(ae)===W&&(xe=new xe(G,Y+"enter",fe,r,ae),xe.target=I,xe.relatedTarget=Ye,ie=xe),Ye=ie,ee&&fe)t:{for(xe=C2,G=ee,Y=fe,I=0,ie=G;ie;ie=xe(ie))I++;ie=0;for(var ge=Y;ge;ge=xe(ge))ie++;for(;0<I-ie;)G=xe(G),I--;for(;0<ie-I;)Y=xe(Y),ie--;for(;I--;){if(G===Y||Y!==null&&G===Y.alternate){xe=G;break t}G=xe(G),Y=xe(Y)}xe=null}else xe=null;ee!==null&&Kg(re,K,ee,xe,!1),fe!==null&&Ye!==null&&Kg(re,Ye,fe,xe,!0)}}e:{if(K=W?ua(W):window,ee=K.nodeName&&K.nodeName.toLowerCase(),ee==="select"||ee==="input"&&K.type==="file")var Oe=pm;else if(hm(K))if(gm)Oe=Lb;else{Oe=Bb;var me=kb}else ee=K.nodeName,!ee||ee.toLowerCase()!=="input"||K.type!=="checkbox"&&K.type!=="radio"?W&&uu(W.elementType)&&(Oe=pm):Oe=Hb;if(Oe&&(Oe=Oe(e,W))){mm(re,Oe,r,ae);break e}me&&me(e,K,W),e==="focusout"&&W&&K.type==="number"&&W.memoizedProps.value!=null&&Yr(K,"number",K.value)}switch(me=W?ua(W):window,e){case"focusin":(hm(me)||me.contentEditable==="true")&&($i=me,Eu=W,Kr=null);break;case"focusout":Kr=Eu=$i=null;break;case"mousedown":ju=!0;break;case"contextmenu":case"mouseup":case"dragend":ju=!1,Em(re,r,ae);break;case"selectionchange":if($b)break;case"keydown":case"keyup":Em(re,r,ae)}var Ee;if(bu)e:{switch(e){case"compositionstart":var Ae="onCompositionStart";break e;case"compositionend":Ae="onCompositionEnd";break e;case"compositionupdate":Ae="onCompositionUpdate";break e}Ae=void 0}else Ui?dm(e,r)&&(Ae="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(Ae="onCompositionStart");Ae&&(lm&&r.locale!=="ko"&&(Ui||Ae!=="onCompositionStart"?Ae==="onCompositionEnd"&&Ui&&(Ee=am()):(ha=ae,pu="value"in ha?ha.value:ha.textContent,Ui=!0)),me=Sl(W,Ae),0<me.length&&(Ae=new sm(Ae,e,null,r,ae),re.push({event:Ae,listeners:me}),Ee?Ae.data=Ee:(Ee=fm(r),Ee!==null&&(Ae.data=Ee)))),(Ee=Ab?Rb(e,r):zb(e,r))&&(Ae=Sl(W,"onBeforeInput"),0<Ae.length&&(me=new sm("onBeforeInput","beforeinput",null,r,ae),re.push({event:me,listeners:Ae}),me.data=Ee)),N2(re,e,W,r,ae)}Fg(re,n)})}function Ns(e,n,r){return{instance:e,listener:n,currentTarget:r}}function Sl(e,n){for(var r=n+"Capture",o=[];e!==null;){var d=e,h=d.stateNode;if(d=d.tag,d!==5&&d!==26&&d!==27||h===null||(d=Xr(e,r),d!=null&&o.unshift(Ns(e,d,h)),d=Xr(e,n),d!=null&&o.push(Ns(e,d,h))),e.tag===3)return o;e=e.return}return[]}function C2(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Kg(e,n,r,o,d){for(var h=n._reactName,b=[];r!==null&&r!==o;){var T=r,q=T.alternate,W=T.stateNode;if(T=T.tag,q!==null&&q===o)break;T!==5&&T!==26&&T!==27||W===null||(q=W,d?(W=Xr(r,h),W!=null&&b.unshift(Ns(r,W,q))):d||(W=Xr(r,h),W!=null&&b.push(Ns(r,W,q)))),r=r.return}b.length!==0&&e.push({event:n,listeners:b})}var T2=/\r\n?/g,M2=/\u0000|\uFFFD/g;function Jg(e){return(typeof e=="string"?e:""+e).replace(T2,`
`).replace(M2,"")}function e0(e,n){return n=Jg(n),Jg(e)===n}function Ve(e,n,r,o,d,h){switch(r){case"children":typeof o=="string"?n==="body"||n==="textarea"&&o===""||Bi(e,o):(typeof o=="number"||typeof o=="bigint")&&n!=="body"&&Bi(e,""+o);break;case"className":Oi(e,"class",o);break;case"tabIndex":Oi(e,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":Oi(e,r,o);break;case"style":em(e,o,h);break;case"data":if(n!=="object"){Oi(e,"data",o);break}case"src":case"href":if(o===""&&(n!=="a"||r!=="href")){e.removeAttribute(r);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(r);break}o=To(""+o),e.setAttribute(r,o);break;case"action":case"formAction":if(typeof o=="function"){e.setAttribute(r,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof h=="function"&&(r==="formAction"?(n!=="input"&&Ve(e,n,"name",d.name,d,null),Ve(e,n,"formEncType",d.formEncType,d,null),Ve(e,n,"formMethod",d.formMethod,d,null),Ve(e,n,"formTarget",d.formTarget,d,null)):(Ve(e,n,"encType",d.encType,d,null),Ve(e,n,"method",d.method,d,null),Ve(e,n,"target",d.target,d,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(r);break}o=To(""+o),e.setAttribute(r,o);break;case"onClick":o!=null&&(e.onclick=kn);break;case"onScroll":o!=null&&Te("scroll",e);break;case"onScrollEnd":o!=null&&Te("scrollend",e);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(s(61));if(r=o.__html,r!=null){if(d.children!=null)throw Error(s(60));e.innerHTML=r}}break;case"multiple":e.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":e.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){e.removeAttribute("xlink:href");break}r=To(""+o),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(r,""+o):e.removeAttribute(r);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(r,""):e.removeAttribute(r);break;case"capture":case"download":o===!0?e.setAttribute(r,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(r,o):e.removeAttribute(r);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?e.setAttribute(r,o):e.removeAttribute(r);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?e.removeAttribute(r):e.setAttribute(r,o);break;case"popover":Te("beforetoggle",e),Te("toggle",e),Di(e,"popover",o);break;case"xlinkActuate":rn(e,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":rn(e,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":rn(e,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":rn(e,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":rn(e,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":rn(e,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":rn(e,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":rn(e,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":rn(e,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":Di(e,"is",o);break;case"innerText":case"textContent":break;default:(!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(r=ab.get(r)||r,Di(e,r,o))}}function Fd(e,n,r,o,d,h){switch(r){case"style":em(e,o,h);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(s(61));if(r=o.__html,r!=null){if(d.children!=null)throw Error(s(60));e.innerHTML=r}}break;case"children":typeof o=="string"?Bi(e,o):(typeof o=="number"||typeof o=="bigint")&&Bi(e,""+o);break;case"onScroll":o!=null&&Te("scroll",e);break;case"onScrollEnd":o!=null&&Te("scrollend",e);break;case"onClick":o!=null&&(e.onclick=kn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!No.hasOwnProperty(r))e:{if(r[0]==="o"&&r[1]==="n"&&(d=r.endsWith("Capture"),n=r.slice(2,d?r.length-7:void 0),h=e[vt]||null,h=h!=null?h[r]:null,typeof h=="function"&&e.removeEventListener(n,h,d),typeof o=="function")){typeof h!="function"&&h!==null&&(r in e?e[r]=null:e.hasAttribute(r)&&e.removeAttribute(r)),e.addEventListener(n,o,d);break e}r in e?e[r]=o:o===!0?e.setAttribute(r,""):Di(e,r,o)}}}function yt(e,n,r){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Te("error",e),Te("load",e);var o=!1,d=!1,h;for(h in r)if(r.hasOwnProperty(h)){var b=r[h];if(b!=null)switch(h){case"src":o=!0;break;case"srcSet":d=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,n));default:Ve(e,n,h,b,r,null)}}d&&Ve(e,n,"srcSet",r.srcSet,r,null),o&&Ve(e,n,"src",r.src,r,null);return;case"input":Te("invalid",e);var T=h=b=d=null,q=null,W=null;for(o in r)if(r.hasOwnProperty(o)){var ae=r[o];if(ae!=null)switch(o){case"name":d=ae;break;case"type":b=ae;break;case"checked":q=ae;break;case"defaultChecked":W=ae;break;case"value":h=ae;break;case"defaultValue":T=ae;break;case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(s(137,n));break;default:Ve(e,n,o,ae,r,null)}}Co(e,h,T,q,W,b,d,!1);return;case"select":Te("invalid",e),o=b=h=null;for(d in r)if(r.hasOwnProperty(d)&&(T=r[d],T!=null))switch(d){case"value":h=T;break;case"defaultValue":b=T;break;case"multiple":o=T;default:Ve(e,n,d,T,r,null)}n=h,r=b,e.multiple=!!o,n!=null?On(e,!!o,n,!1):r!=null&&On(e,!!o,r,!0);return;case"textarea":Te("invalid",e),h=d=o=null;for(b in r)if(r.hasOwnProperty(b)&&(T=r[b],T!=null))switch(b){case"value":o=T;break;case"defaultValue":d=T;break;case"children":h=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(s(91));break;default:Ve(e,n,b,T,r,null)}Kh(e,o,d,h);return;case"option":for(q in r)r.hasOwnProperty(q)&&(o=r[q],o!=null)&&(q==="selected"?e.selected=o&&typeof o!="function"&&typeof o!="symbol":Ve(e,n,q,o,r,null));return;case"dialog":Te("beforetoggle",e),Te("toggle",e),Te("cancel",e),Te("close",e);break;case"iframe":case"object":Te("load",e);break;case"video":case"audio":for(o=0;o<Ss.length;o++)Te(Ss[o],e);break;case"image":Te("error",e),Te("load",e);break;case"details":Te("toggle",e);break;case"embed":case"source":case"link":Te("error",e),Te("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(W in r)if(r.hasOwnProperty(W)&&(o=r[W],o!=null))switch(W){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,n));default:Ve(e,n,W,o,r,null)}return;default:if(uu(n)){for(ae in r)r.hasOwnProperty(ae)&&(o=r[ae],o!==void 0&&Fd(e,n,ae,o,r,void 0));return}}for(T in r)r.hasOwnProperty(T)&&(o=r[T],o!=null&&Ve(e,n,T,o,r,null))}function A2(e,n,r,o){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var d=null,h=null,b=null,T=null,q=null,W=null,ae=null;for(ee in r){var re=r[ee];if(r.hasOwnProperty(ee)&&re!=null)switch(ee){case"checked":break;case"value":break;case"defaultValue":q=re;default:o.hasOwnProperty(ee)||Ve(e,n,ee,null,o,re)}}for(var K in o){var ee=o[K];if(re=r[K],o.hasOwnProperty(K)&&(ee!=null||re!=null))switch(K){case"type":h=ee;break;case"name":d=ee;break;case"checked":W=ee;break;case"defaultChecked":ae=ee;break;case"value":b=ee;break;case"defaultValue":T=ee;break;case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(s(137,n));break;default:ee!==re&&Ve(e,n,K,ee,o,re)}}Fa(e,b,T,q,W,ae,h,d);return;case"select":ee=b=T=K=null;for(h in r)if(q=r[h],r.hasOwnProperty(h)&&q!=null)switch(h){case"value":break;case"multiple":ee=q;default:o.hasOwnProperty(h)||Ve(e,n,h,null,o,q)}for(d in o)if(h=o[d],q=r[d],o.hasOwnProperty(d)&&(h!=null||q!=null))switch(d){case"value":K=h;break;case"defaultValue":T=h;break;case"multiple":b=h;default:h!==q&&Ve(e,n,d,h,o,q)}n=T,r=b,o=ee,K!=null?On(e,!!r,K,!1):!!o!=!!r&&(n!=null?On(e,!!r,n,!0):On(e,!!r,r?[]:"",!1));return;case"textarea":ee=K=null;for(T in r)if(d=r[T],r.hasOwnProperty(T)&&d!=null&&!o.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:Ve(e,n,T,null,o,d)}for(b in o)if(d=o[b],h=r[b],o.hasOwnProperty(b)&&(d!=null||h!=null))switch(b){case"value":K=d;break;case"defaultValue":ee=d;break;case"children":break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(s(91));break;default:d!==h&&Ve(e,n,b,d,o,h)}Wh(e,K,ee);return;case"option":for(var fe in r)K=r[fe],r.hasOwnProperty(fe)&&K!=null&&!o.hasOwnProperty(fe)&&(fe==="selected"?e.selected=!1:Ve(e,n,fe,null,o,K));for(q in o)K=o[q],ee=r[q],o.hasOwnProperty(q)&&K!==ee&&(K!=null||ee!=null)&&(q==="selected"?e.selected=K&&typeof K!="function"&&typeof K!="symbol":Ve(e,n,q,K,o,ee));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var xe in r)K=r[xe],r.hasOwnProperty(xe)&&K!=null&&!o.hasOwnProperty(xe)&&Ve(e,n,xe,null,o,K);for(W in o)if(K=o[W],ee=r[W],o.hasOwnProperty(W)&&K!==ee&&(K!=null||ee!=null))switch(W){case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(s(137,n));break;default:Ve(e,n,W,K,o,ee)}return;default:if(uu(n)){for(var Ye in r)K=r[Ye],r.hasOwnProperty(Ye)&&K!==void 0&&!o.hasOwnProperty(Ye)&&Fd(e,n,Ye,void 0,o,K);for(ae in o)K=o[ae],ee=r[ae],!o.hasOwnProperty(ae)||K===ee||K===void 0&&ee===void 0||Fd(e,n,ae,K,o,ee);return}}for(var G in r)K=r[G],r.hasOwnProperty(G)&&K!=null&&!o.hasOwnProperty(G)&&Ve(e,n,G,null,o,K);for(re in o)K=o[re],ee=r[re],!o.hasOwnProperty(re)||K===ee||K==null&&ee==null||Ve(e,n,re,K,o,ee)}function t0(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function R2(){if(typeof performance.getEntriesByType=="function"){for(var e=0,n=0,r=performance.getEntriesByType("resource"),o=0;o<r.length;o++){var d=r[o],h=d.transferSize,b=d.initiatorType,T=d.duration;if(h&&T&&t0(b)){for(b=0,T=d.responseEnd,o+=1;o<r.length;o++){var q=r[o],W=q.startTime;if(W>T)break;var ae=q.transferSize,re=q.initiatorType;ae&&t0(re)&&(q=q.responseEnd,b+=ae*(q<T?1:(T-W)/(q-W)))}if(--o,n+=8*(h+b)/(d.duration/1e3),e++,10<e)break}}if(0<e)return n/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Wd=null,Kd=null;function Nl(e){return e.nodeType===9?e:e.ownerDocument}function n0(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function a0(e,n){if(e===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&n==="foreignObject"?0:e}function Jd(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var ef=null;function z2(){var e=window.event;return e&&e.type==="popstate"?e===ef?!1:(ef=e,!0):(ef=null,!1)}var i0=typeof setTimeout=="function"?setTimeout:void 0,D2=typeof clearTimeout=="function"?clearTimeout:void 0,r0=typeof Promise=="function"?Promise:void 0,O2=typeof queueMicrotask=="function"?queueMicrotask:typeof r0<"u"?function(e){return r0.resolve(null).then(e).catch(k2)}:i0;function k2(e){setTimeout(function(){throw e})}function Aa(e){return e==="head"}function s0(e,n){var r=n,o=0;do{var d=r.nextSibling;if(e.removeChild(r),d&&d.nodeType===8)if(r=d.data,r==="/$"||r==="/&"){if(o===0){e.removeChild(d),hr(n);return}o--}else if(r==="$"||r==="$?"||r==="$~"||r==="$!"||r==="&")o++;else if(r==="html")Es(e.ownerDocument.documentElement);else if(r==="head"){r=e.ownerDocument.head,Es(r);for(var h=r.firstChild;h;){var b=h.nextSibling,T=h.nodeName;h[Pa]||T==="SCRIPT"||T==="STYLE"||T==="LINK"&&h.rel.toLowerCase()==="stylesheet"||r.removeChild(h),h=b}}else r==="body"&&Es(e.ownerDocument.body);r=d}while(r);hr(n)}function o0(e,n){var r=e;e=0;do{var o=r.nextSibling;if(r.nodeType===1?n?(r._stashedDisplay=r.style.display,r.style.display="none"):(r.style.display=r._stashedDisplay||"",r.getAttribute("style")===""&&r.removeAttribute("style")):r.nodeType===3&&(n?(r._stashedText=r.nodeValue,r.nodeValue=""):r.nodeValue=r._stashedText||""),o&&o.nodeType===8)if(r=o.data,r==="/$"){if(e===0)break;e--}else r!=="$"&&r!=="$?"&&r!=="$~"&&r!=="$!"||e++;r=o}while(r)}function tf(e){var n=e.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var r=n;switch(n=n.nextSibling,r.nodeName){case"HTML":case"HEAD":case"BODY":tf(r),qr(r);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(r.rel.toLowerCase()==="stylesheet")continue}e.removeChild(r)}}function B2(e,n,r,o){for(;e.nodeType===1;){var d=r;if(e.nodeName.toLowerCase()!==n.toLowerCase()){if(!o&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(o){if(!e[Pa])switch(n){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(h=e.getAttribute("rel"),h==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(h!==d.rel||e.getAttribute("href")!==(d.href==null||d.href===""?null:d.href)||e.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin)||e.getAttribute("title")!==(d.title==null?null:d.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(h=e.getAttribute("src"),(h!==(d.src==null?null:d.src)||e.getAttribute("type")!==(d.type==null?null:d.type)||e.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin))&&h&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(n==="input"&&e.type==="hidden"){var h=d.name==null?null:""+d.name;if(d.type==="hidden"&&e.getAttribute("name")===h)return e}else return e;if(e=Jt(e.nextSibling),e===null)break}return null}function H2(e,n,r){if(n==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!r||(e=Jt(e.nextSibling),e===null))return null;return e}function l0(e,n){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=Jt(e.nextSibling),e===null))return null;return e}function nf(e){return e.data==="$?"||e.data==="$~"}function af(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function L2(e,n){var r=e.ownerDocument;if(e.data==="$~")e._reactRetry=n;else if(e.data!=="$?"||r.readyState!=="loading")n();else{var o=function(){n(),r.removeEventListener("DOMContentLoaded",o)};r.addEventListener("DOMContentLoaded",o),e._reactRetry=o}}function Jt(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"||n==="F!"||n==="F")break;if(n==="/$"||n==="/&")return null}}return e}var rf=null;function c0(e){e=e.nextSibling;for(var n=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"||r==="/&"){if(n===0)return Jt(e.nextSibling);n--}else r!=="$"&&r!=="$!"&&r!=="$?"&&r!=="$~"&&r!=="&"||n++}e=e.nextSibling}return null}function u0(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"){if(n===0)return e;n--}else r!=="/$"&&r!=="/&"||n++}e=e.previousSibling}return null}function d0(e,n,r){switch(n=Nl(r),e){case"html":if(e=n.documentElement,!e)throw Error(s(452));return e;case"head":if(e=n.head,!e)throw Error(s(453));return e;case"body":if(e=n.body,!e)throw Error(s(454));return e;default:throw Error(s(451))}}function Es(e){for(var n=e.attributes;n.length;)e.removeAttributeNode(n[0]);qr(e)}var en=new Map,f0=new Set;function El(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Wn=D.d;D.d={f:U2,r:$2,D:q2,C:V2,L:Y2,m:X2,X:Z2,S:G2,M:Q2};function U2(){var e=Wn.f(),n=pl();return e||n}function $2(e){var n=ca(e);n!==null&&n.tag===5&&n.type==="form"?Mp(n):Wn.r(e)}var ur=typeof document>"u"?null:document;function h0(e,n,r){var o=ur;if(o&&typeof n=="string"&&n){var d=_t(n);d='link[rel="'+e+'"][href="'+d+'"]',typeof r=="string"&&(d+='[crossorigin="'+r+'"]'),f0.has(d)||(f0.add(d),e={rel:e,crossOrigin:r,href:n},o.querySelector(d)===null&&(n=o.createElement("link"),yt(n,"link",e),nt(n),o.head.appendChild(n)))}}function q2(e){Wn.D(e),h0("dns-prefetch",e,null)}function V2(e,n){Wn.C(e,n),h0("preconnect",e,n)}function Y2(e,n,r){Wn.L(e,n,r);var o=ur;if(o&&e&&n){var d='link[rel="preload"][as="'+_t(n)+'"]';n==="image"&&r&&r.imageSrcSet?(d+='[imagesrcset="'+_t(r.imageSrcSet)+'"]',typeof r.imageSizes=="string"&&(d+='[imagesizes="'+_t(r.imageSizes)+'"]')):d+='[href="'+_t(e)+'"]';var h=d;switch(n){case"style":h=dr(e);break;case"script":h=fr(e)}en.has(h)||(e=y({rel:"preload",href:n==="image"&&r&&r.imageSrcSet?void 0:e,as:n},r),en.set(h,e),o.querySelector(d)!==null||n==="style"&&o.querySelector(js(h))||n==="script"&&o.querySelector(_s(h))||(n=o.createElement("link"),yt(n,"link",e),nt(n),o.head.appendChild(n)))}}function X2(e,n){Wn.m(e,n);var r=ur;if(r&&e){var o=n&&typeof n.as=="string"?n.as:"script",d='link[rel="modulepreload"][as="'+_t(o)+'"][href="'+_t(e)+'"]',h=d;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":h=fr(e)}if(!en.has(h)&&(e=y({rel:"modulepreload",href:e},n),en.set(h,e),r.querySelector(d)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(r.querySelector(_s(h)))return}o=r.createElement("link"),yt(o,"link",e),nt(o),r.head.appendChild(o)}}}function G2(e,n,r){Wn.S(e,n,r);var o=ur;if(o&&e){var d=da(o).hoistableStyles,h=dr(e);n=n||"default";var b=d.get(h);if(!b){var T={loading:0,preload:null};if(b=o.querySelector(js(h)))T.loading=5;else{e=y({rel:"stylesheet",href:e,"data-precedence":n},r),(r=en.get(h))&&sf(e,r);var q=b=o.createElement("link");nt(q),yt(q,"link",e),q._p=new Promise(function(W,ae){q.onload=W,q.onerror=ae}),q.addEventListener("load",function(){T.loading|=1}),q.addEventListener("error",function(){T.loading|=2}),T.loading|=4,jl(b,n,o)}b={type:"stylesheet",instance:b,count:1,state:T},d.set(h,b)}}}function Z2(e,n){Wn.X(e,n);var r=ur;if(r&&e){var o=da(r).hoistableScripts,d=fr(e),h=o.get(d);h||(h=r.querySelector(_s(d)),h||(e=y({src:e,async:!0},n),(n=en.get(d))&&of(e,n),h=r.createElement("script"),nt(h),yt(h,"link",e),r.head.appendChild(h)),h={type:"script",instance:h,count:1,state:null},o.set(d,h))}}function Q2(e,n){Wn.M(e,n);var r=ur;if(r&&e){var o=da(r).hoistableScripts,d=fr(e),h=o.get(d);h||(h=r.querySelector(_s(d)),h||(e=y({src:e,async:!0,type:"module"},n),(n=en.get(d))&&of(e,n),h=r.createElement("script"),nt(h),yt(h,"link",e),r.head.appendChild(h)),h={type:"script",instance:h,count:1,state:null},o.set(d,h))}}function m0(e,n,r,o){var d=(d=ue.current)?El(d):null;if(!d)throw Error(s(446));switch(e){case"meta":case"title":return null;case"style":return typeof r.precedence=="string"&&typeof r.href=="string"?(n=dr(r.href),r=da(d).hoistableStyles,o=r.get(n),o||(o={type:"style",instance:null,count:0,state:null},r.set(n,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(r.rel==="stylesheet"&&typeof r.href=="string"&&typeof r.precedence=="string"){e=dr(r.href);var h=da(d).hoistableStyles,b=h.get(e);if(b||(d=d.ownerDocument||d,b={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},h.set(e,b),(h=d.querySelector(js(e)))&&!h._p&&(b.instance=h,b.state.loading=5),en.has(e)||(r={rel:"preload",as:"style",href:r.href,crossOrigin:r.crossOrigin,integrity:r.integrity,media:r.media,hrefLang:r.hrefLang,referrerPolicy:r.referrerPolicy},en.set(e,r),h||P2(d,e,r,b.state))),n&&o===null)throw Error(s(528,""));return b}if(n&&o!==null)throw Error(s(529,""));return null;case"script":return n=r.async,r=r.src,typeof r=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=fr(r),r=da(d).hoistableScripts,o=r.get(n),o||(o={type:"script",instance:null,count:0,state:null},r.set(n,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,e))}}function dr(e){return'href="'+_t(e)+'"'}function js(e){return'link[rel="stylesheet"]['+e+"]"}function p0(e){return y({},e,{"data-precedence":e.precedence,precedence:null})}function P2(e,n,r,o){e.querySelector('link[rel="preload"][as="style"]['+n+"]")?o.loading=1:(n=e.createElement("link"),o.preload=n,n.addEventListener("load",function(){return o.loading|=1}),n.addEventListener("error",function(){return o.loading|=2}),yt(n,"link",r),nt(n),e.head.appendChild(n))}function fr(e){return'[src="'+_t(e)+'"]'}function _s(e){return"script[async]"+e}function g0(e,n,r){if(n.count++,n.instance===null)switch(n.type){case"style":var o=e.querySelector('style[data-href~="'+_t(r.href)+'"]');if(o)return n.instance=o,nt(o),o;var d=y({},r,{"data-href":r.href,"data-precedence":r.precedence,href:null,precedence:null});return o=(e.ownerDocument||e).createElement("style"),nt(o),yt(o,"style",d),jl(o,r.precedence,e),n.instance=o;case"stylesheet":d=dr(r.href);var h=e.querySelector(js(d));if(h)return n.state.loading|=4,n.instance=h,nt(h),h;o=p0(r),(d=en.get(d))&&sf(o,d),h=(e.ownerDocument||e).createElement("link"),nt(h);var b=h;return b._p=new Promise(function(T,q){b.onload=T,b.onerror=q}),yt(h,"link",o),n.state.loading|=4,jl(h,r.precedence,e),n.instance=h;case"script":return h=fr(r.src),(d=e.querySelector(_s(h)))?(n.instance=d,nt(d),d):(o=r,(d=en.get(h))&&(o=y({},r),of(o,d)),e=e.ownerDocument||e,d=e.createElement("script"),nt(d),yt(d,"link",o),e.head.appendChild(d),n.instance=d);case"void":return null;default:throw Error(s(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(o=n.instance,n.state.loading|=4,jl(o,r.precedence,e));return n.instance}function jl(e,n,r){for(var o=r.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),d=o.length?o[o.length-1]:null,h=d,b=0;b<o.length;b++){var T=o[b];if(T.dataset.precedence===n)h=T;else if(h!==d)break}h?h.parentNode.insertBefore(e,h.nextSibling):(n=r.nodeType===9?r.head:r,n.insertBefore(e,n.firstChild))}function sf(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.title==null&&(e.title=n.title)}function of(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.integrity==null&&(e.integrity=n.integrity)}var _l=null;function y0(e,n,r){if(_l===null){var o=new Map,d=_l=new Map;d.set(r,o)}else d=_l,o=d.get(r),o||(o=new Map,d.set(r,o));if(o.has(e))return o;for(o.set(e,null),r=r.getElementsByTagName(e),d=0;d<r.length;d++){var h=r[d];if(!(h[Pa]||h[ct]||e==="link"&&h.getAttribute("rel")==="stylesheet")&&h.namespaceURI!=="http://www.w3.org/2000/svg"){var b=h.getAttribute(n)||"";b=e+b;var T=o.get(b);T?T.push(h):o.set(b,[h])}}return o}function x0(e,n,r){e=e.ownerDocument||e,e.head.insertBefore(r,n==="title"?e.querySelector("head > title"):null)}function I2(e,n,r){if(r===1||n.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;return n.rel==="stylesheet"?(e=n.disabled,typeof n.precedence=="string"&&e==null):!0;case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function v0(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function F2(e,n,r,o){if(r.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var d=dr(o.href),h=n.querySelector(js(d));if(h){n=h._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(e.count++,e=Cl.bind(e),n.then(e,e)),r.state.loading|=4,r.instance=h,nt(h);return}h=n.ownerDocument||n,o=p0(o),(d=en.get(d))&&sf(o,d),h=h.createElement("link"),nt(h);var b=h;b._p=new Promise(function(T,q){b.onload=T,b.onerror=q}),yt(h,"link",o),r.instance=h}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(r,n),(n=r.state.preload)&&(r.state.loading&3)===0&&(e.count++,r=Cl.bind(e),n.addEventListener("load",r),n.addEventListener("error",r))}}var lf=0;function W2(e,n){return e.stylesheets&&e.count===0&&Ml(e,e.stylesheets),0<e.count||0<e.imgCount?function(r){var o=setTimeout(function(){if(e.stylesheets&&Ml(e,e.stylesheets),e.unsuspend){var h=e.unsuspend;e.unsuspend=null,h()}},6e4+n);0<e.imgBytes&&lf===0&&(lf=62500*R2());var d=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Ml(e,e.stylesheets),e.unsuspend)){var h=e.unsuspend;e.unsuspend=null,h()}},(e.imgBytes>lf?50:800)+n);return e.unsuspend=r,function(){e.unsuspend=null,clearTimeout(o),clearTimeout(d)}}:null}function Cl(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Ml(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Tl=null;function Ml(e,n){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Tl=new Map,n.forEach(K2,e),Tl=null,Cl.call(e))}function K2(e,n){if(!(n.state.loading&4)){var r=Tl.get(e);if(r)var o=r.get(null);else{r=new Map,Tl.set(e,r);for(var d=e.querySelectorAll("link[data-precedence],style[data-precedence]"),h=0;h<d.length;h++){var b=d[h];(b.nodeName==="LINK"||b.getAttribute("media")!=="not all")&&(r.set(b.dataset.precedence,b),o=b)}o&&r.set(null,o)}d=n.instance,b=d.getAttribute("data-precedence"),h=r.get(b)||o,h===o&&r.set(null,d),r.set(b,d),this.count++,o=Cl.bind(this),d.addEventListener("load",o),d.addEventListener("error",o),h?h.parentNode.insertBefore(d,h.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(d,e.firstChild)),n.state.loading|=4}}var Cs={$$typeof:S,Provider:null,Consumer:null,_currentValue:V,_currentValue2:V,_threadCount:0};function J2(e,n,r,o,d,h,b,T,q){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Lr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Lr(0),this.hiddenUpdates=Lr(null),this.identifierPrefix=o,this.onUncaughtError=d,this.onCaughtError=h,this.onRecoverableError=b,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=q,this.incompleteTransitions=new Map}function b0(e,n,r,o,d,h,b,T,q,W,ae,re){return e=new J2(e,n,r,b,q,W,ae,re,T),n=1,h===!0&&(n|=24),h=kt(3,null,null,n),e.current=h,h.stateNode=e,n=$u(),n.refCount++,e.pooledCache=n,n.refCount++,h.memoizedState={element:o,isDehydrated:r,cache:n},Xu(h),e}function w0(e){return e?(e=Yi,e):Yi}function S0(e,n,r,o,d,h){d=w0(d),o.context===null?o.context=d:o.pendingContext=d,o=va(n),o.payload={element:r},h=h===void 0?null:h,h!==null&&(o.callback=h),r=ba(e,o,n),r!==null&&(zt(r,e,n),rs(r,e,n))}function N0(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<n?r:n}}function cf(e,n){N0(e,n),(e=e.alternate)&&N0(e,n)}function E0(e){if(e.tag===13||e.tag===31){var n=ei(e,67108864);n!==null&&zt(n,e,67108864),cf(e,67108864)}}function j0(e){if(e.tag===13||e.tag===31){var n=$t();n=Ur(n);var r=ei(e,n);r!==null&&zt(r,e,n),cf(e,n)}}var Al=!0;function ew(e,n,r,o){var d=z.T;z.T=null;var h=D.p;try{D.p=2,uf(e,n,r,o)}finally{D.p=h,z.T=d}}function tw(e,n,r,o){var d=z.T;z.T=null;var h=D.p;try{D.p=8,uf(e,n,r,o)}finally{D.p=h,z.T=d}}function uf(e,n,r,o){if(Al){var d=df(o);if(d===null)Id(e,n,o,Rl,r),C0(e,o);else if(aw(d,e,n,r,o))o.stopPropagation();else if(C0(e,o),n&4&&-1<nw.indexOf(e)){for(;d!==null;){var h=ca(d);if(h!==null)switch(h.tag){case 3:if(h=h.stateNode,h.current.memoizedState.isDehydrated){var b=Rn(h.pendingLanes);if(b!==0){var T=h;for(T.pendingLanes|=2,T.entangledLanes|=2;b;){var q=1<<31-St(b);T.entanglements[1]|=q,b&=~q}bn(h),(Be&6)===0&&(hl=ht()+500,ws(0))}}break;case 31:case 13:T=ei(h,2),T!==null&&zt(T,h,2),pl(),cf(h,2)}if(h=df(o),h===null&&Id(e,n,o,Rl,r),h===d)break;d=h}d!==null&&o.stopPropagation()}else Id(e,n,o,null,r)}}function df(e){return e=fu(e),ff(e)}var Rl=null;function ff(e){if(Rl=null,e=la(e),e!==null){var n=u(e);if(n===null)e=null;else{var r=n.tag;if(r===13){if(e=f(n),e!==null)return e;e=null}else if(r===31){if(e=m(n),e!==null)return e;e=null}else if(r===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null)}}return Rl=e,null}function _0(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(_i()){case An:return 2;case oa:return 8;case Xa:case Wc:return 32;case Ci:return 268435456;default:return 32}default:return 32}}var hf=!1,Ra=null,za=null,Da=null,Ts=new Map,Ms=new Map,Oa=[],nw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function C0(e,n){switch(e){case"focusin":case"focusout":Ra=null;break;case"dragenter":case"dragleave":za=null;break;case"mouseover":case"mouseout":Da=null;break;case"pointerover":case"pointerout":Ts.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ms.delete(n.pointerId)}}function As(e,n,r,o,d,h){return e===null||e.nativeEvent!==h?(e={blockedOn:n,domEventName:r,eventSystemFlags:o,nativeEvent:h,targetContainers:[d]},n!==null&&(n=ca(n),n!==null&&E0(n)),e):(e.eventSystemFlags|=o,n=e.targetContainers,d!==null&&n.indexOf(d)===-1&&n.push(d),e)}function aw(e,n,r,o,d){switch(n){case"focusin":return Ra=As(Ra,e,n,r,o,d),!0;case"dragenter":return za=As(za,e,n,r,o,d),!0;case"mouseover":return Da=As(Da,e,n,r,o,d),!0;case"pointerover":var h=d.pointerId;return Ts.set(h,As(Ts.get(h)||null,e,n,r,o,d)),!0;case"gotpointercapture":return h=d.pointerId,Ms.set(h,As(Ms.get(h)||null,e,n,r,o,d)),!0}return!1}function T0(e){var n=la(e.target);if(n!==null){var r=u(n);if(r!==null){if(n=r.tag,n===13){if(n=f(r),n!==null){e.blockedOn=n,vo(e.priority,function(){j0(r)});return}}else if(n===31){if(n=m(r),n!==null){e.blockedOn=n,vo(e.priority,function(){j0(r)});return}}else if(n===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function zl(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var r=df(e.nativeEvent);if(r===null){r=e.nativeEvent;var o=new r.constructor(r.type,r);du=o,r.target.dispatchEvent(o),du=null}else return n=ca(r),n!==null&&E0(n),e.blockedOn=r,!1;n.shift()}return!0}function M0(e,n,r){zl(e)&&r.delete(n)}function iw(){hf=!1,Ra!==null&&zl(Ra)&&(Ra=null),za!==null&&zl(za)&&(za=null),Da!==null&&zl(Da)&&(Da=null),Ts.forEach(M0),Ms.forEach(M0)}function Dl(e,n){e.blockedOn===n&&(e.blockedOn=null,hf||(hf=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,iw)))}var Ol=null;function A0(e){Ol!==e&&(Ol=e,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Ol===e&&(Ol=null);for(var n=0;n<e.length;n+=3){var r=e[n],o=e[n+1],d=e[n+2];if(typeof o!="function"){if(ff(o||r)===null)continue;break}var h=ca(r);h!==null&&(e.splice(n,3),n-=3,ud(h,{pending:!0,data:d,method:r.method,action:o},o,d))}}))}function hr(e){function n(q){return Dl(q,e)}Ra!==null&&Dl(Ra,e),za!==null&&Dl(za,e),Da!==null&&Dl(Da,e),Ts.forEach(n),Ms.forEach(n);for(var r=0;r<Oa.length;r++){var o=Oa[r];o.blockedOn===e&&(o.blockedOn=null)}for(;0<Oa.length&&(r=Oa[0],r.blockedOn===null);)T0(r),r.blockedOn===null&&Oa.shift();if(r=(e.ownerDocument||e).$$reactFormReplay,r!=null)for(o=0;o<r.length;o+=3){var d=r[o],h=r[o+1],b=d[vt]||null;if(typeof h=="function")b||A0(r);else if(b){var T=null;if(h&&h.hasAttribute("formAction")){if(d=h,b=h[vt]||null)T=b.formAction;else if(ff(d)!==null)continue}else T=b.action;typeof T=="function"?r[o+1]=T:(r.splice(o,3),o-=3),A0(r)}}}function R0(){function e(h){h.canIntercept&&h.info==="react-transition"&&h.intercept({handler:function(){return new Promise(function(b){return d=b})},focusReset:"manual",scroll:"manual"})}function n(){d!==null&&(d(),d=null),o||setTimeout(r,20)}function r(){if(!o&&!navigation.transition){var h=navigation.currentEntry;h&&h.url!=null&&navigation.navigate(h.url,{state:h.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var o=!1,d=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",n),navigation.addEventListener("navigateerror",n),setTimeout(r,100),function(){o=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",n),navigation.removeEventListener("navigateerror",n),d!==null&&(d(),d=null)}}}function mf(e){this._internalRoot=e}kl.prototype.render=mf.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(s(409));var r=n.current,o=$t();S0(r,o,e,n,null,null)},kl.prototype.unmount=mf.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;S0(e.current,2,null,e,null,null),pl(),n[zn]=null}};function kl(e){this._internalRoot=e}kl.prototype.unstable_scheduleHydration=function(e){if(e){var n=xo();e={blockedOn:null,target:e,priority:n};for(var r=0;r<Oa.length&&n!==0&&n<Oa[r].priority;r++);Oa.splice(r,0,e),r===0&&T0(e)}};var z0=a.version;if(z0!=="19.2.3")throw Error(s(527,z0,"19.2.3"));D.findDOMNode=function(e){var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=p(n),e=e!==null?x(e):null,e=e===null?null:e.stateNode,e};var rw={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:z,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Bl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Bl.isDisabled&&Bl.supportsFiber)try{Ga=Bl.inject(rw),wt=Bl}catch{}}return zs.createRoot=function(e,n){if(!l(e))throw Error(s(299));var r=!1,o="",d=Up,h=$p,b=qp;return n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onUncaughtError!==void 0&&(d=n.onUncaughtError),n.onCaughtError!==void 0&&(h=n.onCaughtError),n.onRecoverableError!==void 0&&(b=n.onRecoverableError)),n=b0(e,1,!1,null,null,r,o,null,d,h,b,R0),e[zn]=n.current,Pd(e),new mf(n)},zs.hydrateRoot=function(e,n,r){if(!l(e))throw Error(s(299));var o=!1,d="",h=Up,b=$p,T=qp,q=null;return r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(d=r.identifierPrefix),r.onUncaughtError!==void 0&&(h=r.onUncaughtError),r.onCaughtError!==void 0&&(b=r.onCaughtError),r.onRecoverableError!==void 0&&(T=r.onRecoverableError),r.formState!==void 0&&(q=r.formState)),n=b0(e,1,!0,n,r??null,o,d,q,h,b,T,R0),n.context=w0(null),r=n.current,o=$t(),o=Ur(o),d=va(o),d.callback=null,ba(r,d,o),r=o,n.current.lanes=r,Qa(n,r),bn(n),e[zn]=n.current,Pd(e),new kl(n)},zs.version="19.2.3",zs}var V0;function mw(){if(V0)return yf.exports;V0=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(a){console.error(a)}}return t(),yf.exports=hw(),yf.exports}var pw=mw();const gw=ph(pw);var Y0="popstate";function yw(t={}){function a(s,l){let{pathname:u,search:f,hash:m}=s.location;return Vf("",{pathname:u,search:f,hash:m},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function i(s,l){return typeof l=="string"?l:Ys(l)}return vw(a,i,null,t)}function Pe(t,a){if(t===!1||t===null||typeof t>"u")throw new Error(a)}function Yt(t,a){if(!t){typeof console<"u"&&console.warn(a);try{throw new Error(a)}catch{}}}function xw(){return Math.random().toString(36).substring(2,10)}function X0(t,a){return{usr:t.state,key:t.key,idx:a}}function Vf(t,a,i=null,s){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof a=="string"?zr(a):a,state:i,key:a&&a.key||s||xw()}}function Ys({pathname:t="/",search:a="",hash:i=""}){return a&&a!=="?"&&(t+=a.charAt(0)==="?"?a:"?"+a),i&&i!=="#"&&(t+=i.charAt(0)==="#"?i:"#"+i),t}function zr(t){let a={};if(t){let i=t.indexOf("#");i>=0&&(a.hash=t.substring(i),t=t.substring(0,i));let s=t.indexOf("?");s>=0&&(a.search=t.substring(s),t=t.substring(0,s)),t&&(a.pathname=t)}return a}function vw(t,a,i,s={}){let{window:l=document.defaultView,v5Compat:u=!1}=s,f=l.history,m="POP",g=null,p=x();p==null&&(p=0,f.replaceState({...f.state,idx:p},""));function x(){return(f.state||{idx:null}).idx}function y(){m="POP";let w=x(),j=w==null?null:w-p;p=w,g&&g({action:m,location:A.location,delta:j})}function v(w,j){m="PUSH";let _=Vf(A.location,w,j);p=x()+1;let S=X0(_,p),M=A.createHref(_);try{f.pushState(S,"",M)}catch(B){if(B instanceof DOMException&&B.name==="DataCloneError")throw B;l.location.assign(M)}u&&g&&g({action:m,location:A.location,delta:1})}function N(w,j){m="REPLACE";let _=Vf(A.location,w,j);p=x();let S=X0(_,p),M=A.createHref(_);f.replaceState(S,"",M),u&&g&&g({action:m,location:A.location,delta:0})}function E(w){return bw(w)}let A={get action(){return m},get location(){return t(l,f)},listen(w){if(g)throw new Error("A history only accepts one active listener");return l.addEventListener(Y0,y),g=w,()=>{l.removeEventListener(Y0,y),g=null}},createHref(w){return a(l,w)},createURL:E,encodeLocation(w){let j=E(w);return{pathname:j.pathname,search:j.search,hash:j.hash}},push:v,replace:N,go(w){return f.go(w)}};return A}function bw(t,a=!1){let i="http://localhost";typeof window<"u"&&(i=window.location.origin!=="null"?window.location.origin:window.location.href),Pe(i,"No window.location.(origin|href) available to create URL");let s=typeof t=="string"?t:Ys(t);return s=s.replace(/ $/,"%20"),!a&&s.startsWith("//")&&(s=i+s),new URL(s,i)}function vx(t,a,i="/"){return ww(t,a,i,!1)}function ww(t,a,i,s){let l=typeof a=="string"?zr(a):a,u=ta(l.pathname||"/",i);if(u==null)return null;let f=bx(t);Sw(f);let m=null;for(let g=0;m==null&&g<f.length;++g){let p=Dw(u);m=Rw(f[g],p,s)}return m}function bx(t,a=[],i=[],s="",l=!1){let u=(f,m,g=l,p)=>{let x={relativePath:p===void 0?f.path||"":p,caseSensitive:f.caseSensitive===!0,childrenIndex:m,route:f};if(x.relativePath.startsWith("/")){if(!x.relativePath.startsWith(s)&&g)return;Pe(x.relativePath.startsWith(s),`Absolute route path "${x.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),x.relativePath=x.relativePath.slice(s.length)}let y=ea([s,x.relativePath]),v=i.concat(x);f.children&&f.children.length>0&&(Pe(f.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${y}".`),bx(f.children,a,v,y,g)),!(f.path==null&&!f.index)&&a.push({path:y,score:Mw(y,f.index),routesMeta:v})};return t.forEach((f,m)=>{if(f.path===""||!f.path?.includes("?"))u(f,m);else for(let g of wx(f.path))u(f,m,!0,g)}),a}function wx(t){let a=t.split("/");if(a.length===0)return[];let[i,...s]=a,l=i.endsWith("?"),u=i.replace(/\?$/,"");if(s.length===0)return l?[u,""]:[u];let f=wx(s.join("/")),m=[];return m.push(...f.map(g=>g===""?u:[u,g].join("/"))),l&&m.push(...f),m.map(g=>t.startsWith("/")&&g===""?"/":g)}function Sw(t){t.sort((a,i)=>a.score!==i.score?i.score-a.score:Aw(a.routesMeta.map(s=>s.childrenIndex),i.routesMeta.map(s=>s.childrenIndex)))}var Nw=/^:[\w-]+$/,Ew=3,jw=2,_w=1,Cw=10,Tw=-2,G0=t=>t==="*";function Mw(t,a){let i=t.split("/"),s=i.length;return i.some(G0)&&(s+=Tw),a&&(s+=jw),i.filter(l=>!G0(l)).reduce((l,u)=>l+(Nw.test(u)?Ew:u===""?_w:Cw),s)}function Aw(t,a){return t.length===a.length&&t.slice(0,-1).every((s,l)=>s===a[l])?t[t.length-1]-a[a.length-1]:0}function Rw(t,a,i=!1){let{routesMeta:s}=t,l={},u="/",f=[];for(let m=0;m<s.length;++m){let g=s[m],p=m===s.length-1,x=u==="/"?a:a.slice(u.length)||"/",y=dc({path:g.relativePath,caseSensitive:g.caseSensitive,end:p},x),v=g.route;if(!y&&p&&i&&!s[s.length-1].route.index&&(y=dc({path:g.relativePath,caseSensitive:g.caseSensitive,end:!1},x)),!y)return null;Object.assign(l,y.params),f.push({params:l,pathname:ea([u,y.pathname]),pathnameBase:Hw(ea([u,y.pathnameBase])),route:v}),y.pathnameBase!=="/"&&(u=ea([u,y.pathnameBase]))}return f}function dc(t,a){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[i,s]=zw(t.path,t.caseSensitive,t.end),l=a.match(i);if(!l)return null;let u=l[0],f=u.replace(/(.)\/+$/,"$1"),m=l.slice(1);return{params:s.reduce((p,{paramName:x,isOptional:y},v)=>{if(x==="*"){let E=m[v]||"";f=u.slice(0,u.length-E.length).replace(/(.)\/+$/,"$1")}const N=m[v];return y&&!N?p[x]=void 0:p[x]=(N||"").replace(/%2F/g,"/"),p},{}),pathname:u,pathnameBase:f,pattern:t}}function zw(t,a=!1,i=!0){Yt(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let s=[],l="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(f,m,g)=>(s.push({paramName:m,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(s.push({paramName:"*"}),l+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):i?l+="\\/*$":t!==""&&t!=="/"&&(l+="(?:(?=\\/|$))"),[new RegExp(l,a?void 0:"i"),s]}function Dw(t){try{return t.split("/").map(a=>decodeURIComponent(a).replace(/\//g,"%2F")).join("/")}catch(a){return Yt(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${a}).`),t}}function ta(t,a){if(a==="/")return t;if(!t.toLowerCase().startsWith(a.toLowerCase()))return null;let i=a.endsWith("/")?a.length-1:a.length,s=t.charAt(i);return s&&s!=="/"?null:t.slice(i)||"/"}var Sx=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ow=t=>Sx.test(t);function kw(t,a="/"){let{pathname:i,search:s="",hash:l=""}=typeof t=="string"?zr(t):t,u;if(i)if(Ow(i))u=i;else{if(i.includes("//")){let f=i;i=i.replace(/\/\/+/g,"/"),Yt(!1,`Pathnames cannot have embedded double slashes - normalizing ${f} -> ${i}`)}i.startsWith("/")?u=Z0(i.substring(1),"/"):u=Z0(i,a)}else u=a;return{pathname:u,search:Lw(s),hash:Uw(l)}}function Z0(t,a){let i=a.replace(/\/+$/,"").split("/");return t.split("/").forEach(l=>{l===".."?i.length>1&&i.pop():l!=="."&&i.push(l)}),i.length>1?i.join("/"):"/"}function wf(t,a,i,s){return`Cannot include a '${t}' character in a manually specified \`to.${a}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${i}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Bw(t){return t.filter((a,i)=>i===0||a.route.path&&a.route.path.length>0)}function gh(t){let a=Bw(t);return a.map((i,s)=>s===a.length-1?i.pathname:i.pathnameBase)}function yh(t,a,i,s=!1){let l;typeof t=="string"?l=zr(t):(l={...t},Pe(!l.pathname||!l.pathname.includes("?"),wf("?","pathname","search",l)),Pe(!l.pathname||!l.pathname.includes("#"),wf("#","pathname","hash",l)),Pe(!l.search||!l.search.includes("#"),wf("#","search","hash",l)));let u=t===""||l.pathname==="",f=u?"/":l.pathname,m;if(f==null)m=i;else{let y=a.length-1;if(!s&&f.startsWith("..")){let v=f.split("/");for(;v[0]==="..";)v.shift(),y-=1;l.pathname=v.join("/")}m=y>=0?a[y]:"/"}let g=kw(l,m),p=f&&f!=="/"&&f.endsWith("/"),x=(u||f===".")&&i.endsWith("/");return!g.pathname.endsWith("/")&&(p||x)&&(g.pathname+="/"),g}var ea=t=>t.join("/").replace(/\/\/+/g,"/"),Hw=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Lw=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Uw=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t,$w=class{constructor(t,a,i,s=!1){this.status=t,this.statusText=a||"",this.internal=s,i instanceof Error?(this.data=i.toString(),this.error=i):this.data=i}};function qw(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}function Vw(t){return t.map(a=>a.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var Nx=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Ex(t,a){let i=t;if(typeof i!="string"||!Sx.test(i))return{absoluteURL:void 0,isExternal:!1,to:i};let s=i,l=!1;if(Nx)try{let u=new URL(window.location.href),f=i.startsWith("//")?new URL(u.protocol+i):new URL(i),m=ta(f.pathname,a);f.origin===u.origin&&m!=null?i=m+f.search+f.hash:l=!0}catch{Yt(!1,`<Link to="${i}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:s,isExternal:l,to:i}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var jx=["POST","PUT","PATCH","DELETE"];new Set(jx);var Yw=["GET",...jx];new Set(Yw);var Dr=C.createContext(null);Dr.displayName="DataRouter";var Tc=C.createContext(null);Tc.displayName="DataRouterState";var Xw=C.createContext(!1),_x=C.createContext({isTransitioning:!1});_x.displayName="ViewTransition";var Gw=C.createContext(new Map);Gw.displayName="Fetchers";var Zw=C.createContext(null);Zw.displayName="Await";var Gt=C.createContext(null);Gt.displayName="Navigation";var to=C.createContext(null);to.displayName="Location";var nn=C.createContext({outlet:null,matches:[],isDataRoute:!1});nn.displayName="Route";var xh=C.createContext(null);xh.displayName="RouteError";var Cx="REACT_ROUTER_ERROR",Qw="REDIRECT",Pw="ROUTE_ERROR_RESPONSE";function Iw(t){if(t.startsWith(`${Cx}:${Qw}:{`))try{let a=JSON.parse(t.slice(28));if(typeof a=="object"&&a&&typeof a.status=="number"&&typeof a.statusText=="string"&&typeof a.location=="string"&&typeof a.reloadDocument=="boolean"&&typeof a.replace=="boolean")return a}catch{}}function Fw(t){if(t.startsWith(`${Cx}:${Pw}:{`))try{let a=JSON.parse(t.slice(40));if(typeof a=="object"&&a&&typeof a.status=="number"&&typeof a.statusText=="string")return new $w(a.status,a.statusText,a.data)}catch{}}function Ww(t,{relative:a}={}){Pe(Or(),"useHref() may be used only in the context of a <Router> component.");let{basename:i,navigator:s}=C.useContext(Gt),{hash:l,pathname:u,search:f}=no(t,{relative:a}),m=u;return i!=="/"&&(m=u==="/"?i:ea([i,u])),s.createHref({pathname:m,search:f,hash:l})}function Or(){return C.useContext(to)!=null}function ia(){return Pe(Or(),"useLocation() may be used only in the context of a <Router> component."),C.useContext(to).location}var Tx="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Mx(t){C.useContext(Gt).static||C.useLayoutEffect(t)}function ji(){let{isDataRoute:t}=C.useContext(nn);return t?hS():Kw()}function Kw(){Pe(Or(),"useNavigate() may be used only in the context of a <Router> component.");let t=C.useContext(Dr),{basename:a,navigator:i}=C.useContext(Gt),{matches:s}=C.useContext(nn),{pathname:l}=ia(),u=JSON.stringify(gh(s)),f=C.useRef(!1);return Mx(()=>{f.current=!0}),C.useCallback((g,p={})=>{if(Yt(f.current,Tx),!f.current)return;if(typeof g=="number"){i.go(g);return}let x=yh(g,JSON.parse(u),l,p.relative==="path");t==null&&a!=="/"&&(x.pathname=x.pathname==="/"?a:ea([a,x.pathname])),(p.replace?i.replace:i.push)(x,p.state,p)},[a,i,u,l,t])}var Jw=C.createContext(null);function eS(t){let a=C.useContext(nn).outlet;return C.useMemo(()=>a&&C.createElement(Jw.Provider,{value:t},a),[a,t])}function tS(){let{matches:t}=C.useContext(nn),a=t[t.length-1];return a?a.params:{}}function no(t,{relative:a}={}){let{matches:i}=C.useContext(nn),{pathname:s}=ia(),l=JSON.stringify(gh(i));return C.useMemo(()=>yh(t,JSON.parse(l),s,a==="path"),[t,l,s,a])}function nS(t,a){return Ax(t,a)}function Ax(t,a,i,s,l){Pe(Or(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:u}=C.useContext(Gt),{matches:f}=C.useContext(nn),m=f[f.length-1],g=m?m.params:{},p=m?m.pathname:"/",x=m?m.pathnameBase:"/",y=m&&m.route;{let _=y&&y.path||"";zx(p,!y||_.endsWith("*")||_.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${_}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${_}"> to <Route path="${_==="/"?"*":`${_}/*`}">.`)}let v=ia(),N;if(a){let _=typeof a=="string"?zr(a):a;Pe(x==="/"||_.pathname?.startsWith(x),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${x}" but pathname "${_.pathname}" was given in the \`location\` prop.`),N=_}else N=v;let E=N.pathname||"/",A=E;if(x!=="/"){let _=x.replace(/^\//,"").split("/");A="/"+E.replace(/^\//,"").split("/").slice(_.length).join("/")}let w=vx(t,{pathname:A});Yt(y||w!=null,`No routes matched location "${N.pathname}${N.search}${N.hash}" `),Yt(w==null||w[w.length-1].route.element!==void 0||w[w.length-1].route.Component!==void 0||w[w.length-1].route.lazy!==void 0,`Matched leaf route at location "${N.pathname}${N.search}${N.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let j=oS(w&&w.map(_=>Object.assign({},_,{params:Object.assign({},g,_.params),pathname:ea([x,u.encodeLocation?u.encodeLocation(_.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?x:ea([x,u.encodeLocation?u.encodeLocation(_.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:_.pathnameBase])})),f,i,s,l);return a&&j?C.createElement(to.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...N},navigationType:"POP"}},j):j}function aS(){let t=fS(),a=qw(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),i=t instanceof Error?t.stack:null,s="rgba(200,200,200, 0.5)",l={padding:"0.5rem",backgroundColor:s},u={padding:"2px 4px",backgroundColor:s},f=null;return console.error("Error handled by React Router default ErrorBoundary:",t),f=C.createElement(C.Fragment,null,C.createElement("p",null," Hey developer "),C.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",C.createElement("code",{style:u},"ErrorBoundary")," or"," ",C.createElement("code",{style:u},"errorElement")," prop on your route.")),C.createElement(C.Fragment,null,C.createElement("h2",null,"Unexpected Application Error!"),C.createElement("h3",{style:{fontStyle:"italic"}},a),i?C.createElement("pre",{style:l},i):null,f)}var iS=C.createElement(aS,null),Rx=class extends C.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,a){return a.location!==t.location||a.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:a.error,location:a.location,revalidation:t.revalidation||a.revalidation}}componentDidCatch(t,a){this.props.onError?this.props.onError(t,a):console.error("React Router caught the following error during render",t)}render(){let t=this.state.error;if(this.context&&typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){const i=Fw(t.digest);i&&(t=i)}let a=t!==void 0?C.createElement(nn.Provider,{value:this.props.routeContext},C.createElement(xh.Provider,{value:t,children:this.props.component})):this.props.children;return this.context?C.createElement(rS,{error:t},a):a}};Rx.contextType=Xw;var Sf=new WeakMap;function rS({children:t,error:a}){let{basename:i}=C.useContext(Gt);if(typeof a=="object"&&a&&"digest"in a&&typeof a.digest=="string"){let s=Iw(a.digest);if(s){let l=Sf.get(a);if(l)throw l;let u=Ex(s.location,i);if(Nx&&!Sf.get(a))if(u.isExternal||s.reloadDocument)window.location.href=u.absoluteURL||u.to;else{const f=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(u.to,{replace:s.replace}));throw Sf.set(a,f),f}return C.createElement("meta",{httpEquiv:"refresh",content:`0;url=${u.absoluteURL||u.to}`})}}return t}function sS({routeContext:t,match:a,children:i}){let s=C.useContext(Dr);return s&&s.static&&s.staticContext&&(a.route.errorElement||a.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=a.route.id),C.createElement(nn.Provider,{value:t},i)}function oS(t,a=[],i=null,s=null,l=null){if(t==null){if(!i)return null;if(i.errors)t=i.matches;else if(a.length===0&&!i.initialized&&i.matches.length>0)t=i.matches;else return null}let u=t,f=i?.errors;if(f!=null){let x=u.findIndex(y=>y.route.id&&f?.[y.route.id]!==void 0);Pe(x>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(f).join(",")}`),u=u.slice(0,Math.min(u.length,x+1))}let m=!1,g=-1;if(i)for(let x=0;x<u.length;x++){let y=u[x];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(g=x),y.route.id){let{loaderData:v,errors:N}=i,E=y.route.loader&&!v.hasOwnProperty(y.route.id)&&(!N||N[y.route.id]===void 0);if(y.route.lazy||E){m=!0,g>=0?u=u.slice(0,g+1):u=[u[0]];break}}}let p=i&&s?(x,y)=>{s(x,{location:i.location,params:i.matches?.[0]?.params??{},unstable_pattern:Vw(i.matches),errorInfo:y})}:void 0;return u.reduceRight((x,y,v)=>{let N,E=!1,A=null,w=null;i&&(N=f&&y.route.id?f[y.route.id]:void 0,A=y.route.errorElement||iS,m&&(g<0&&v===0?(zx("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),E=!0,w=null):g===v&&(E=!0,w=y.route.hydrateFallbackElement||null)));let j=a.concat(u.slice(0,v+1)),_=()=>{let S;return N?S=A:E?S=w:y.route.Component?S=C.createElement(y.route.Component,null):y.route.element?S=y.route.element:S=x,C.createElement(sS,{match:y,routeContext:{outlet:x,matches:j,isDataRoute:i!=null},children:S})};return i&&(y.route.ErrorBoundary||y.route.errorElement||v===0)?C.createElement(Rx,{location:i.location,revalidation:i.revalidation,component:A,error:N,children:_(),routeContext:{outlet:null,matches:j,isDataRoute:!0},onError:p}):_()},null)}function vh(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function lS(t){let a=C.useContext(Dr);return Pe(a,vh(t)),a}function cS(t){let a=C.useContext(Tc);return Pe(a,vh(t)),a}function uS(t){let a=C.useContext(nn);return Pe(a,vh(t)),a}function bh(t){let a=uS(t),i=a.matches[a.matches.length-1];return Pe(i.route.id,`${t} can only be used on routes that contain a unique "id"`),i.route.id}function dS(){return bh("useRouteId")}function fS(){let t=C.useContext(xh),a=cS("useRouteError"),i=bh("useRouteError");return t!==void 0?t:a.errors?.[i]}function hS(){let{router:t}=lS("useNavigate"),a=bh("useNavigate"),i=C.useRef(!1);return Mx(()=>{i.current=!0}),C.useCallback(async(l,u={})=>{Yt(i.current,Tx),i.current&&(typeof l=="number"?await t.navigate(l):await t.navigate(l,{fromRouteId:a,...u}))},[t,a])}var Q0={};function zx(t,a,i){!a&&!Q0[t]&&(Q0[t]=!0,Yt(!1,i))}C.memo(mS);function mS({routes:t,future:a,state:i,onError:s}){return Ax(t,void 0,i,s,a)}function Yf({to:t,replace:a,state:i,relative:s}){Pe(Or(),"<Navigate> may be used only in the context of a <Router> component.");let{static:l}=C.useContext(Gt);Yt(!l,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:u}=C.useContext(nn),{pathname:f}=ia(),m=ji(),g=yh(t,gh(u),f,s==="path"),p=JSON.stringify(g);return C.useEffect(()=>{m(JSON.parse(p),{replace:a,state:i,relative:s})},[m,p,s,a,i]),null}function pS(t){return eS(t.context)}function qt(t){Pe(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function gS({basename:t="/",children:a=null,location:i,navigationType:s="POP",navigator:l,static:u=!1,unstable_useTransitions:f}){Pe(!Or(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let m=t.replace(/^\/*/,"/"),g=C.useMemo(()=>({basename:m,navigator:l,static:u,unstable_useTransitions:f,future:{}}),[m,l,u,f]);typeof i=="string"&&(i=zr(i));let{pathname:p="/",search:x="",hash:y="",state:v=null,key:N="default"}=i,E=C.useMemo(()=>{let A=ta(p,m);return A==null?null:{location:{pathname:A,search:x,hash:y,state:v,key:N},navigationType:s}},[m,p,x,y,v,N,s]);return Yt(E!=null,`<Router basename="${m}"> is not able to match the URL "${p}${x}${y}" because it does not start with the basename, so the <Router> won't render anything.`),E==null?null:C.createElement(Gt.Provider,{value:g},C.createElement(to.Provider,{children:a,value:E}))}function yS({children:t,location:a}){return nS(Xf(t),a)}function Xf(t,a=[]){let i=[];return C.Children.forEach(t,(s,l)=>{if(!C.isValidElement(s))return;let u=[...a,l];if(s.type===C.Fragment){i.push.apply(i,Xf(s.props.children,u));return}Pe(s.type===qt,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Pe(!s.props.index||!s.props.children,"An index route cannot have child routes.");let f={id:s.props.id||u.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,middleware:s.props.middleware,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(f.children=Xf(s.props.children,u)),i.push(f)}),i}var Jl="get",ec="application/x-www-form-urlencoded";function Mc(t){return typeof HTMLElement<"u"&&t instanceof HTMLElement}function xS(t){return Mc(t)&&t.tagName.toLowerCase()==="button"}function vS(t){return Mc(t)&&t.tagName.toLowerCase()==="form"}function bS(t){return Mc(t)&&t.tagName.toLowerCase()==="input"}function wS(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function SS(t,a){return t.button===0&&(!a||a==="_self")&&!wS(t)}function Gf(t=""){return new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((a,i)=>{let s=t[i];return a.concat(Array.isArray(s)?s.map(l=>[i,l]):[[i,s]])},[]))}function NS(t,a){let i=Gf(t);return a&&a.forEach((s,l)=>{i.has(l)||a.getAll(l).forEach(u=>{i.append(l,u)})}),i}var Hl=null;function ES(){if(Hl===null)try{new FormData(document.createElement("form"),0),Hl=!1}catch{Hl=!0}return Hl}var jS=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Nf(t){return t!=null&&!jS.has(t)?(Yt(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${ec}"`),null):t}function _S(t,a){let i,s,l,u,f;if(vS(t)){let m=t.getAttribute("action");s=m?ta(m,a):null,i=t.getAttribute("method")||Jl,l=Nf(t.getAttribute("enctype"))||ec,u=new FormData(t)}else if(xS(t)||bS(t)&&(t.type==="submit"||t.type==="image")){let m=t.form;if(m==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let g=t.getAttribute("formaction")||m.getAttribute("action");if(s=g?ta(g,a):null,i=t.getAttribute("formmethod")||m.getAttribute("method")||Jl,l=Nf(t.getAttribute("formenctype"))||Nf(m.getAttribute("enctype"))||ec,u=new FormData(m,t),!ES()){let{name:p,type:x,value:y}=t;if(x==="image"){let v=p?`${p}.`:"";u.append(`${v}x`,"0"),u.append(`${v}y`,"0")}else p&&u.append(p,y)}}else{if(Mc(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');i=Jl,s=null,l=ec,f=t}return u&&l==="text/plain"&&(f=u,u=void 0),{action:s,method:i.toLowerCase(),encType:l,formData:u,body:f}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function wh(t,a){if(t===!1||t===null||typeof t>"u")throw new Error(a)}function CS(t,a,i,s){let l=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return i?l.pathname.endsWith("/")?l.pathname=`${l.pathname}_.${s}`:l.pathname=`${l.pathname}.${s}`:l.pathname==="/"?l.pathname=`_root.${s}`:a&&ta(l.pathname,a)==="/"?l.pathname=`${a.replace(/\/$/,"")}/_root.${s}`:l.pathname=`${l.pathname.replace(/\/$/,"")}.${s}`,l}async function TS(t,a){if(t.id in a)return a[t.id];try{let i=await import(t.module);return a[t.id]=i,i}catch(i){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(i),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function MS(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function AS(t,a,i){let s=await Promise.all(t.map(async l=>{let u=a.routes[l.route.id];if(u){let f=await TS(u,i);return f.links?f.links():[]}return[]}));return OS(s.flat(1).filter(MS).filter(l=>l.rel==="stylesheet"||l.rel==="preload").map(l=>l.rel==="stylesheet"?{...l,rel:"prefetch",as:"style"}:{...l,rel:"prefetch"}))}function P0(t,a,i,s,l,u){let f=(g,p)=>i[p]?g.route.id!==i[p].route.id:!0,m=(g,p)=>i[p].pathname!==g.pathname||i[p].route.path?.endsWith("*")&&i[p].params["*"]!==g.params["*"];return u==="assets"?a.filter((g,p)=>f(g,p)||m(g,p)):u==="data"?a.filter((g,p)=>{let x=s.routes[g.route.id];if(!x||!x.hasLoader)return!1;if(f(g,p)||m(g,p))return!0;if(g.route.shouldRevalidate){let y=g.route.shouldRevalidate({currentUrl:new URL(l.pathname+l.search+l.hash,window.origin),currentParams:i[0]?.params||{},nextUrl:new URL(t,window.origin),nextParams:g.params,defaultShouldRevalidate:!0});if(typeof y=="boolean")return y}return!0}):[]}function RS(t,a,{includeHydrateFallback:i}={}){return zS(t.map(s=>{let l=a.routes[s.route.id];if(!l)return[];let u=[l.module];return l.clientActionModule&&(u=u.concat(l.clientActionModule)),l.clientLoaderModule&&(u=u.concat(l.clientLoaderModule)),i&&l.hydrateFallbackModule&&(u=u.concat(l.hydrateFallbackModule)),l.imports&&(u=u.concat(l.imports)),u}).flat(1))}function zS(t){return[...new Set(t)]}function DS(t){let a={},i=Object.keys(t).sort();for(let s of i)a[s]=t[s];return a}function OS(t,a){let i=new Set;return new Set(a),t.reduce((s,l)=>{let u=JSON.stringify(DS(l));return i.has(u)||(i.add(u),s.push({key:u,link:l})),s},[])}function Dx(){let t=C.useContext(Dr);return wh(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function kS(){let t=C.useContext(Tc);return wh(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var Sh=C.createContext(void 0);Sh.displayName="FrameworkContext";function Ox(){let t=C.useContext(Sh);return wh(t,"You must render this element inside a <HydratedRouter> element"),t}function BS(t,a){let i=C.useContext(Sh),[s,l]=C.useState(!1),[u,f]=C.useState(!1),{onFocus:m,onBlur:g,onMouseEnter:p,onMouseLeave:x,onTouchStart:y}=a,v=C.useRef(null);C.useEffect(()=>{if(t==="render"&&f(!0),t==="viewport"){let A=j=>{j.forEach(_=>{f(_.isIntersecting)})},w=new IntersectionObserver(A,{threshold:.5});return v.current&&w.observe(v.current),()=>{w.disconnect()}}},[t]),C.useEffect(()=>{if(s){let A=setTimeout(()=>{f(!0)},100);return()=>{clearTimeout(A)}}},[s]);let N=()=>{l(!0)},E=()=>{l(!1),f(!1)};return i?t!=="intent"?[u,v,{}]:[u,v,{onFocus:Ds(m,N),onBlur:Ds(g,E),onMouseEnter:Ds(p,N),onMouseLeave:Ds(x,E),onTouchStart:Ds(y,N)}]:[!1,v,{}]}function Ds(t,a){return i=>{t&&t(i),i.defaultPrevented||a(i)}}function HS({page:t,...a}){let{router:i}=Dx(),s=C.useMemo(()=>vx(i.routes,t,i.basename),[i.routes,t,i.basename]);return s?C.createElement(US,{page:t,matches:s,...a}):null}function LS(t){let{manifest:a,routeModules:i}=Ox(),[s,l]=C.useState([]);return C.useEffect(()=>{let u=!1;return AS(t,a,i).then(f=>{u||l(f)}),()=>{u=!0}},[t,a,i]),s}function US({page:t,matches:a,...i}){let s=ia(),{future:l,manifest:u,routeModules:f}=Ox(),{basename:m}=Dx(),{loaderData:g,matches:p}=kS(),x=C.useMemo(()=>P0(t,a,p,u,s,"data"),[t,a,p,u,s]),y=C.useMemo(()=>P0(t,a,p,u,s,"assets"),[t,a,p,u,s]),v=C.useMemo(()=>{if(t===s.pathname+s.search+s.hash)return[];let A=new Set,w=!1;if(a.forEach(_=>{let S=u.routes[_.route.id];!S||!S.hasLoader||(!x.some(M=>M.route.id===_.route.id)&&_.route.id in g&&f[_.route.id]?.shouldRevalidate||S.hasClientLoader?w=!0:A.add(_.route.id))}),A.size===0)return[];let j=CS(t,m,l.unstable_trailingSlashAwareDataRequests,"data");return w&&A.size>0&&j.searchParams.set("_routes",a.filter(_=>A.has(_.route.id)).map(_=>_.route.id).join(",")),[j.pathname+j.search]},[m,l.unstable_trailingSlashAwareDataRequests,g,s,u,x,a,t,f]),N=C.useMemo(()=>RS(y,u),[y,u]),E=LS(y);return C.createElement(C.Fragment,null,v.map(A=>C.createElement("link",{key:A,rel:"prefetch",as:"fetch",href:A,...i})),N.map(A=>C.createElement("link",{key:A,rel:"modulepreload",href:A,...i})),E.map(({key:A,link:w})=>C.createElement("link",{key:A,nonce:i.nonce,...w})))}function $S(...t){return a=>{t.forEach(i=>{typeof i=="function"?i(a):i!=null&&(i.current=a)})}}var qS=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{qS&&(window.__reactRouterVersion="7.12.0")}catch{}function VS({basename:t,children:a,unstable_useTransitions:i,window:s}){let l=C.useRef();l.current==null&&(l.current=yw({window:s,v5Compat:!0}));let u=l.current,[f,m]=C.useState({action:u.action,location:u.location}),g=C.useCallback(p=>{i===!1?m(p):C.startTransition(()=>m(p))},[i]);return C.useLayoutEffect(()=>u.listen(g),[u,g]),C.createElement(gS,{basename:t,children:a,location:f.location,navigationType:f.action,navigator:u,unstable_useTransitions:i})}var kx=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,gi=C.forwardRef(function({onClick:a,discover:i="render",prefetch:s="none",relative:l,reloadDocument:u,replace:f,state:m,target:g,to:p,preventScrollReset:x,viewTransition:y,unstable_defaultShouldRevalidate:v,...N},E){let{basename:A,unstable_useTransitions:w}=C.useContext(Gt),j=typeof p=="string"&&kx.test(p),_=Ex(p,A);p=_.to;let S=Ww(p,{relative:l}),[M,B,$]=BS(s,N),k=GS(p,{replace:f,state:m,target:g,preventScrollReset:x,relative:l,viewTransition:y,unstable_defaultShouldRevalidate:v,unstable_useTransitions:w});function X(se){a&&a(se),se.defaultPrevented||k(se)}let F=C.createElement("a",{...N,...$,href:_.absoluteURL||S,onClick:_.isExternal||u?a:X,ref:$S(E,B),target:g,"data-discover":!j&&i==="render"?"true":void 0});return M&&!j?C.createElement(C.Fragment,null,F,C.createElement(HS,{page:S})):F});gi.displayName="Link";var Bx=C.forwardRef(function({"aria-current":a="page",caseSensitive:i=!1,className:s="",end:l=!1,style:u,to:f,viewTransition:m,children:g,...p},x){let y=no(f,{relative:p.relative}),v=ia(),N=C.useContext(Tc),{navigator:E,basename:A}=C.useContext(Gt),w=N!=null&&WS(y)&&m===!0,j=E.encodeLocation?E.encodeLocation(y).pathname:y.pathname,_=v.pathname,S=N&&N.navigation&&N.navigation.location?N.navigation.location.pathname:null;i||(_=_.toLowerCase(),S=S?S.toLowerCase():null,j=j.toLowerCase()),S&&A&&(S=ta(S,A)||S);const M=j!=="/"&&j.endsWith("/")?j.length-1:j.length;let B=_===j||!l&&_.startsWith(j)&&_.charAt(M)==="/",$=S!=null&&(S===j||!l&&S.startsWith(j)&&S.charAt(j.length)==="/"),k={isActive:B,isPending:$,isTransitioning:w},X=B?a:void 0,F;typeof s=="function"?F=s(k):F=[s,B?"active":null,$?"pending":null,w?"transitioning":null].filter(Boolean).join(" ");let se=typeof u=="function"?u(k):u;return C.createElement(gi,{...p,"aria-current":X,className:F,ref:x,style:se,to:f,viewTransition:m},typeof g=="function"?g(k):g)});Bx.displayName="NavLink";var YS=C.forwardRef(({discover:t="render",fetcherKey:a,navigate:i,reloadDocument:s,replace:l,state:u,method:f=Jl,action:m,onSubmit:g,relative:p,preventScrollReset:x,viewTransition:y,unstable_defaultShouldRevalidate:v,...N},E)=>{let{unstable_useTransitions:A}=C.useContext(Gt),w=IS(),j=FS(m,{relative:p}),_=f.toLowerCase()==="get"?"get":"post",S=typeof m=="string"&&kx.test(m),M=B=>{if(g&&g(B),B.defaultPrevented)return;B.preventDefault();let $=B.nativeEvent.submitter,k=$?.getAttribute("formmethod")||f,X=()=>w($||B.currentTarget,{fetcherKey:a,method:k,navigate:i,replace:l,state:u,relative:p,preventScrollReset:x,viewTransition:y,unstable_defaultShouldRevalidate:v});A&&i!==!1?C.startTransition(()=>X()):X()};return C.createElement("form",{ref:E,method:_,action:j,onSubmit:s?g:M,...N,"data-discover":!S&&t==="render"?"true":void 0})});YS.displayName="Form";function XS(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Hx(t){let a=C.useContext(Dr);return Pe(a,XS(t)),a}function GS(t,{target:a,replace:i,state:s,preventScrollReset:l,relative:u,viewTransition:f,unstable_defaultShouldRevalidate:m,unstable_useTransitions:g}={}){let p=ji(),x=ia(),y=no(t,{relative:u});return C.useCallback(v=>{if(SS(v,a)){v.preventDefault();let N=i!==void 0?i:Ys(x)===Ys(y),E=()=>p(t,{replace:N,state:s,preventScrollReset:l,relative:u,viewTransition:f,unstable_defaultShouldRevalidate:m});g?C.startTransition(()=>E()):E()}},[x,p,y,i,s,a,t,l,u,f,m,g])}function ZS(t){Yt(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let a=C.useRef(Gf(t)),i=C.useRef(!1),s=ia(),l=C.useMemo(()=>NS(s.search,i.current?null:a.current),[s.search]),u=ji(),f=C.useCallback((m,g)=>{const p=Gf(typeof m=="function"?m(new URLSearchParams(l)):m);i.current=!0,u("?"+p,g)},[u,l]);return[l,f]}var QS=0,PS=()=>`__${String(++QS)}__`;function IS(){let{router:t}=Hx("useSubmit"),{basename:a}=C.useContext(Gt),i=dS(),s=t.fetch,l=t.navigate;return C.useCallback(async(u,f={})=>{let{action:m,method:g,encType:p,formData:x,body:y}=_S(u,a);if(f.navigate===!1){let v=f.fetcherKey||PS();await s(v,i,f.action||m,{unstable_defaultShouldRevalidate:f.unstable_defaultShouldRevalidate,preventScrollReset:f.preventScrollReset,formData:x,body:y,formMethod:f.method||g,formEncType:f.encType||p,flushSync:f.flushSync})}else await l(f.action||m,{unstable_defaultShouldRevalidate:f.unstable_defaultShouldRevalidate,preventScrollReset:f.preventScrollReset,formData:x,body:y,formMethod:f.method||g,formEncType:f.encType||p,replace:f.replace,state:f.state,fromRouteId:i,flushSync:f.flushSync,viewTransition:f.viewTransition})},[s,l,a,i])}function FS(t,{relative:a}={}){let{basename:i}=C.useContext(Gt),s=C.useContext(nn);Pe(s,"useFormAction must be used inside a RouteContext");let[l]=s.matches.slice(-1),u={...no(t||".",{relative:a})},f=ia();if(t==null){u.search=f.search;let m=new URLSearchParams(u.search),g=m.getAll("index");if(g.some(x=>x==="")){m.delete("index"),g.filter(y=>y).forEach(y=>m.append("index",y));let x=m.toString();u.search=x?`?${x}`:""}}return(!t||t===".")&&l.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),i!=="/"&&(u.pathname=u.pathname==="/"?i:ea([i,u.pathname])),Ys(u)}function WS(t,{relative:a}={}){let i=C.useContext(_x);Pe(i!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=Hx("useViewTransitionState"),l=no(t,{relative:a});if(!i.isTransitioning)return!1;let u=ta(i.currentLocation.pathname,s)||i.currentLocation.pathname,f=ta(i.nextLocation.pathname,s)||i.nextLocation.pathname;return dc(l.pathname,f)!=null||dc(l.pathname,u)!=null}xx();const I0=t=>{let a;const i=new Set,s=(p,x)=>{const y=typeof p=="function"?p(a):p;if(!Object.is(y,a)){const v=a;a=x??(typeof y!="object"||y===null)?y:Object.assign({},a,y),i.forEach(N=>N(a,v))}},l=()=>a,m={setState:s,getState:l,getInitialState:()=>g,subscribe:p=>(i.add(p),()=>i.delete(p))},g=a=t(s,l,m);return m},KS=(t=>t?I0(t):I0),JS=t=>t;function eN(t,a=JS){const i=gr.useSyncExternalStore(t.subscribe,gr.useCallback(()=>a(t.getState()),[t,a]),gr.useCallback(()=>a(t.getInitialState()),[t,a]));return gr.useDebugValue(i),i}const F0=t=>{const a=KS(t),i=s=>eN(a,s);return Object.assign(i,a),i},Lx=(t=>t?F0(t):F0);function tN(t,a){let i;try{i=t()}catch{return}return{getItem:l=>{var u;const f=g=>g===null?null:JSON.parse(g,void 0),m=(u=i.getItem(l))!=null?u:null;return m instanceof Promise?m.then(f):f(m)},setItem:(l,u)=>i.setItem(l,JSON.stringify(u,void 0)),removeItem:l=>i.removeItem(l)}}const Zf=t=>a=>{try{const i=t(a);return i instanceof Promise?i:{then(s){return Zf(s)(i)},catch(s){return this}}}catch(i){return{then(s){return this},catch(s){return Zf(s)(i)}}}},nN=(t,a)=>(i,s,l)=>{let u={storage:tN(()=>localStorage),partialize:w=>w,version:0,merge:(w,j)=>({...j,...w}),...a},f=!1,m=0;const g=new Set,p=new Set;let x=u.storage;if(!x)return t((...w)=>{console.warn(`[zustand persist middleware] Unable to update item '${u.name}', the given storage is currently unavailable.`),i(...w)},s,l);const y=()=>{const w=u.partialize({...s()});return x.setItem(u.name,{state:w,version:u.version})},v=l.setState;l.setState=(w,j)=>(v(w,j),y());const N=t((...w)=>(i(...w),y()),s,l);l.getInitialState=()=>N;let E;const A=()=>{var w,j;if(!x)return;const _=++m;f=!1,g.forEach(M=>{var B;return M((B=s())!=null?B:N)});const S=((j=u.onRehydrateStorage)==null?void 0:j.call(u,(w=s())!=null?w:N))||void 0;return Zf(x.getItem.bind(x))(u.name).then(M=>{if(M)if(typeof M.version=="number"&&M.version!==u.version){if(u.migrate){const B=u.migrate(M.state,M.version);return B instanceof Promise?B.then($=>[!0,$]):[!0,B]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,M.state];return[!1,void 0]}).then(M=>{var B;if(_!==m)return;const[$,k]=M;if(E=u.merge(k,(B=s())!=null?B:N),i(E,!0),$)return y()}).then(()=>{_===m&&(S?.(E,void 0),E=s(),f=!0,p.forEach(M=>M(E)))}).catch(M=>{_===m&&S?.(void 0,M)})};return l.persist={setOptions:w=>{u={...u,...w},w.storage&&(x=w.storage)},clearStorage:()=>{x?.removeItem(u.name)},getOptions:()=>u,rehydrate:()=>A(),hasHydrated:()=>f,onHydrate:w=>(g.add(w),()=>{g.delete(w)}),onFinishHydration:w=>(p.add(w),()=>{p.delete(w)})},u.skipHydration||A(),E||N},aN=nN,kr=Lx(aN(t=>({user:null,token:null,isAuthenticated:!1,login:(a,i)=>{t({user:a,token:i,isAuthenticated:!0})},logout:()=>{t({user:null,token:null,isAuthenticated:!1})},getAuthHeader:()=>{const a=kr.getState();return a.token?{Authorization:`Basic ${a.token}`}:{}}}),{name:"auth-storage"}));const iN=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),rN=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(a,i,s)=>s?s.toUpperCase():i.toLowerCase()),W0=t=>{const a=rN(t);return a.charAt(0).toUpperCase()+a.slice(1)},Ux=(...t)=>t.filter((a,i,s)=>!!a&&a.trim()!==""&&s.indexOf(a)===i).join(" ").trim(),sN=t=>{for(const a in t)if(a.startsWith("aria-")||a==="role"||a==="title")return!0};var oN={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const lN=C.forwardRef(({color:t="currentColor",size:a=24,strokeWidth:i=2,absoluteStrokeWidth:s,className:l="",children:u,iconNode:f,...m},g)=>C.createElement("svg",{ref:g,...oN,width:a,height:a,stroke:t,strokeWidth:s?Number(i)*24/Number(a):i,className:Ux("lucide",l),...!u&&!sN(m)&&{"aria-hidden":"true"},...m},[...f.map(([p,x])=>C.createElement(p,x)),...Array.isArray(u)?u:[u]]));const He=(t,a)=>{const i=C.forwardRef(({className:s,...l},u)=>C.createElement(lN,{ref:u,iconNode:a,className:Ux(`lucide-${iN(W0(t))}`,`lucide-${t}`,s),...l}));return i.displayName=W0(t),i};const cN=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],xi=He("activity",cN);const uN=[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]],dN=He("arrow-right-left",uN);const fN=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],hN=He("arrow-right",fN);const mN=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],Nh=He("bot",mN);const pN=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],$x=He("chart-column",pN);const gN=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],qx=He("chevron-right",gN);const yN=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],fc=He("circle-check-big",yN);const xN=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Eh=He("circle-x",xN);const vN=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],hc=He("clock",vN);const bN=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],wN=He("download",bN);const SN=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],NN=He("file-text",SN);const EN=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],Vx=He("funnel",EN);const jN=[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]],Yx=He("git-branch",jN);const _N=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],CN=He("heart",_N);const TN=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],MN=He("image",TN);const AN=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],RN=He("layout-dashboard",AN);const zN=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],DN=He("log-out",zN);const ON=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],kN=He("map-pin",ON);const BN=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],Sr=He("message-square",BN);const HN=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]],LN=He("mic",HN);const UN=[["path",{d:"M5 12h14",key:"1ays0h"}]],$N=He("minus",UN);const qN=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],Ac=He("phone",qN);const VN=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],YN=He("plus",VN);const XN=[["path",{d:"M16.247 7.761a6 6 0 0 1 0 8.478",key:"1fwjs5"}],["path",{d:"M19.075 4.933a10 10 0 0 1 0 14.134",key:"ehdyv1"}],["path",{d:"M4.925 19.067a10 10 0 0 1 0-14.134",key:"1q22gi"}],["path",{d:"M7.753 16.239a6 6 0 0 1 0-8.478",key:"r2q7qm"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],GN=He("radio",XN);const ZN=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],jh=He("refresh-cw",ZN);const QN=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Xx=He("search",QN);const PN=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],IN=He("send",PN);const FN=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],WN=He("trending-up",FN);const KN=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Qf=He("user",KN);const JN=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Rc=He("users",JN);const eE=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],tE=He("x",eE),nE=[{to:"/dashboard",icon:RN,label:"Dashboard"},{to:"/conversations",icon:Sr,label:"Conversaciones"},{to:"/flows",icon:Yx,label:"Flujos"},{to:"/logs",icon:xi,label:"Logs"},{to:"/leads",icon:Rc,label:"Leads"},{to:"/analytics",icon:$x,label:"Analytics"},{to:"/monitor",icon:GN,label:"Monitor"}];function aE(){const t=ji(),{user:a,logout:i}=kr(),s=()=>{i(),t("/login")};return c.jsxs("div",{className:"min-h-screen bg-gray-50 flex",children:[c.jsxs("aside",{className:"w-64 bg-white border-r border-gray-200 flex flex-col",children:[c.jsxs("div",{className:"h-16 flex items-center gap-3 px-6 border-b border-gray-200",children:[c.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-green-500 to-green-700 rounded-xl flex items-center justify-center",children:c.jsx(Nh,{className:"w-6 h-6 text-white"})}),c.jsxs("div",{children:[c.jsx("h1",{className:"font-bold text-gray-800",children:"WhatsApp Bot"}),c.jsx("p",{className:"text-xs text-gray-400",children:"Platform"})]})]}),c.jsx("nav",{className:"flex-1 p-4 space-y-1",children:nE.map(({to:l,icon:u,label:f})=>c.jsxs(Bx,{to:l,className:({isActive:m})=>`flex items-center gap-3 px-4 py-3 rounded-lg transition ${m?"bg-green-50 text-green-600 font-medium":"text-gray-600 hover:bg-gray-100"}`,children:[c.jsx(u,{className:"w-5 h-5"}),c.jsx("span",{children:f})]},l))}),c.jsx("div",{className:"p-4 border-t border-gray-200",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded-full flex items-center justify-center",children:c.jsx("span",{className:"text-gray-600 font-medium",children:a?.username?.[0]?.toUpperCase()||"A"})}),c.jsxs("div",{children:[c.jsx("p",{className:"font-medium text-gray-800",children:a?.username||"Admin"}),c.jsx("p",{className:"text-xs text-gray-400",children:"Administrador"})]})]}),c.jsx("button",{onClick:s,className:"p-2 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded-lg transition",title:"Cerrar sesin",children:c.jsx(DN,{className:"w-5 h-5"})})]})})]}),c.jsx("main",{className:"flex-1 overflow-auto",children:c.jsx(pS,{})})]})}async function iE(t,a){const i=btoa(`${t}:${a}`);if(!(await fetch("/api/chatbot/stats",{headers:{Authorization:`Basic ${i}`}})).ok)throw new Error("Credenciales invlidas");return{user:{username:t},token:i}}function rE(){const[t,a]=C.useState(""),[i,s]=C.useState(""),[l,u]=C.useState(""),[f,m]=C.useState(!1),g=ji(),p=kr(y=>y.login),x=async y=>{y.preventDefault(),u(""),m(!0);try{const{user:v,token:N}=await iE(t,i);p(v,N),g("/dashboard")}catch(v){u(v.message||"Error al iniciar sesin")}finally{m(!1)}};return c.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-50 to-green-100 flex items-center justify-center p-5",children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-md p-10",children:[c.jsxs("div",{className:"text-center mb-8",children:[c.jsx("div",{className:"w-18 h-18 bg-gradient-to-br from-green-500 to-green-700 rounded-2xl flex items-center justify-center mx-auto mb-5 p-4",children:c.jsx("svg",{className:"w-11 h-11 text-white",fill:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})})}),c.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"WhatsApp Bot Platform"}),c.jsx("p",{className:"text-gray-500 text-sm",children:"Ingresa tus credenciales para continuar"})]}),c.jsxs("form",{onSubmit:x,children:[l&&c.jsx("div",{className:"bg-red-50 text-red-600 px-4 py-3 rounded-xl text-sm mb-5 border border-red-200",children:l}),c.jsxs("div",{className:"mb-5",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Usuario"}),c.jsx("input",{type:"text",value:t,onChange:y=>a(y.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl text-base outline-none transition-colors focus:border-green-500",placeholder:"admin",required:!0})]}),c.jsxs("div",{className:"mb-6",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Contrasea"}),c.jsx("input",{type:"password",value:i,onChange:y=>s(y.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl text-base outline-none transition-colors focus:border-green-500",placeholder:"",required:!0})]}),c.jsx("button",{type:"submit",disabled:f,className:"w-full bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white font-semibold py-3.5 px-5 rounded-xl text-base transition-all shadow-lg shadow-green-500/30 disabled:opacity-60 disabled:cursor-not-allowed",children:f?"Ingresando...":"Ingresar"})]}),c.jsx("p",{className:"text-center text-gray-400 text-xs mt-8",children:"Respaldos Chile  2025"})]})})}const ao=()=>{const t=kr.getState().token;return{"Content-Type":"application/json",...t?{Authorization:`Basic ${t}`}:{}}};async function Gx(){const t=await fetch("/api/chat/conversations",{headers:ao()});if(!t.ok)throw new Error("Error loading conversations");return t.json()}async function sE(t){const a=await fetch(`/api/chat/conversations/${encodeURIComponent(t)}`,{headers:ao()});if(!a.ok)throw new Error("Error loading conversation");return a.json()}async function oE(t,a){const i=await fetch("/api/chat/send",{method:"POST",headers:ao(),body:JSON.stringify({to:t,message:a})});if(!i.ok)throw new Error("Error sending message");return i.json()}async function lE(t){const a=await fetch("/api/chat/mark-read",{method:"POST",headers:ao(),body:JSON.stringify({phone:t})});if(!a.ok)throw new Error("Error marking as read");return a.json()}async function cE(){const t=await fetch("/api/chatbot/stats",{headers:ao()});if(!t.ok)throw new Error("Error loading stats");return t.json()}function Ll({title:t,value:a,icon:i,color:s="green",subtitle:l}){const u={green:"bg-green-50 text-green-600",blue:"bg-blue-50 text-blue-600",yellow:"bg-yellow-50 text-yellow-600",purple:"bg-purple-50 text-purple-600",red:"bg-red-50 text-red-600"};return c.jsx("div",{className:"bg-white rounded-xl p-6 border border-gray-100 shadow-sm",children:c.jsxs("div",{className:"flex items-start justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-sm text-gray-500 font-medium",children:t}),c.jsx("p",{className:"text-3xl font-bold text-gray-800 mt-2",children:a}),l&&c.jsx("p",{className:"text-xs text-gray-400 mt-1",children:l})]}),i&&c.jsx("div",{className:`p-3 rounded-xl ${u[s]}`,children:c.jsx(i,{className:"w-6 h-6"})})]})})}const Zx=6048e5,uE=864e5,Ul=43200,K0=1440,J0=Symbol.for("constructDateFrom");function na(t,a){return typeof t=="function"?t(a):t&&typeof t=="object"&&J0 in t?t[J0](a):t instanceof Date?new t.constructor(a):new Date(a)}function ft(t,a){return na(a||t,t)}let dE={};function io(){return dE}function Xs(t,a){const i=io(),s=a?.weekStartsOn??a?.locale?.options?.weekStartsOn??i.weekStartsOn??i.locale?.options?.weekStartsOn??0,l=ft(t,a?.in),u=l.getDay(),f=(u<s?7:0)+u-s;return l.setDate(l.getDate()-f),l.setHours(0,0,0,0),l}function mc(t,a){return Xs(t,{...a,weekStartsOn:1})}function Qx(t,a){const i=ft(t,a?.in),s=i.getFullYear(),l=na(i,0);l.setFullYear(s+1,0,4),l.setHours(0,0,0,0);const u=mc(l),f=na(i,0);f.setFullYear(s,0,4),f.setHours(0,0,0,0);const m=mc(f);return i.getTime()>=u.getTime()?s+1:i.getTime()>=m.getTime()?s:s-1}function pc(t){const a=ft(t),i=new Date(Date.UTC(a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes(),a.getSeconds(),a.getMilliseconds()));return i.setUTCFullYear(a.getFullYear()),+t-+i}function zc(t,...a){const i=na.bind(null,t||a.find(s=>typeof s=="object"));return a.map(i)}function ey(t,a){const i=ft(t,a?.in);return i.setHours(0,0,0,0),i}function fE(t,a,i){const[s,l]=zc(i?.in,t,a),u=ey(s),f=ey(l),m=+u-pc(u),g=+f-pc(f);return Math.round((m-g)/uE)}function hE(t,a){const i=Qx(t,a),s=na(t,0);return s.setFullYear(i,0,4),s.setHours(0,0,0,0),mc(s)}function tc(t,a){const i=+ft(t)-+ft(a);return i<0?-1:i>0?1:i}function mE(t){return na(t,Date.now())}function pE(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function gE(t){return!(!pE(t)&&typeof t!="number"||isNaN(+ft(t)))}function yE(t,a,i){const[s,l]=zc(i?.in,t,a),u=s.getFullYear()-l.getFullYear(),f=s.getMonth()-l.getMonth();return u*12+f}function xE(t){return a=>{const s=(t?Math[t]:Math.trunc)(a);return s===0?0:s}}function vE(t,a){return+ft(t)-+ft(a)}function bE(t,a){const i=ft(t,a?.in);return i.setHours(23,59,59,999),i}function wE(t,a){const i=ft(t,a?.in),s=i.getMonth();return i.setFullYear(i.getFullYear(),s+1,0),i.setHours(23,59,59,999),i}function SE(t,a){const i=ft(t,a?.in);return+bE(i,a)==+wE(i,a)}function NE(t,a,i){const[s,l,u]=zc(i?.in,t,t,a),f=tc(l,u),m=Math.abs(yE(l,u));if(m<1)return 0;l.getMonth()===1&&l.getDate()>27&&l.setDate(30),l.setMonth(l.getMonth()-f*m);let g=tc(l,u)===-f;SE(s)&&m===1&&tc(s,u)===1&&(g=!1);const p=f*(m-+g);return p===0?0:p}function EE(t,a,i){const s=vE(t,a)/1e3;return xE(i?.roundingMethod)(s)}function jE(t,a){const i=ft(t,a?.in);return i.setFullYear(i.getFullYear(),0,1),i.setHours(0,0,0,0),i}const _E={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},CE=(t,a,i)=>{let s;const l=_E[t];return typeof l=="string"?s=l:a===1?s=l.one:s=l.other.replace("{{count}}",a.toString()),i?.addSuffix?i.comparison&&i.comparison>0?"in "+s:s+" ago":s};function vr(t){return(a={})=>{const i=a.width?String(a.width):t.defaultWidth;return t.formats[i]||t.formats[t.defaultWidth]}}const TE={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},ME={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},AE={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},RE={date:vr({formats:TE,defaultWidth:"full"}),time:vr({formats:ME,defaultWidth:"full"}),dateTime:vr({formats:AE,defaultWidth:"full"})},zE={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},DE=(t,a,i,s)=>zE[t];function Sn(t){return(a,i)=>{const s=i?.context?String(i.context):"standalone";let l;if(s==="formatting"&&t.formattingValues){const f=t.defaultFormattingWidth||t.defaultWidth,m=i?.width?String(i.width):f;l=t.formattingValues[m]||t.formattingValues[f]}else{const f=t.defaultWidth,m=i?.width?String(i.width):t.defaultWidth;l=t.values[m]||t.values[f]}const u=t.argumentCallback?t.argumentCallback(a):a;return l[u]}}const OE={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},kE={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},BE={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},HE={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},LE={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},UE={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},$E=(t,a)=>{const i=Number(t),s=i%100;if(s>20||s<10)switch(s%10){case 1:return i+"st";case 2:return i+"nd";case 3:return i+"rd"}return i+"th"},qE={ordinalNumber:$E,era:Sn({values:OE,defaultWidth:"wide"}),quarter:Sn({values:kE,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Sn({values:BE,defaultWidth:"wide"}),day:Sn({values:HE,defaultWidth:"wide"}),dayPeriod:Sn({values:LE,defaultWidth:"wide",formattingValues:UE,defaultFormattingWidth:"wide"})};function Nn(t){return(a,i={})=>{const s=i.width,l=s&&t.matchPatterns[s]||t.matchPatterns[t.defaultMatchWidth],u=a.match(l);if(!u)return null;const f=u[0],m=s&&t.parsePatterns[s]||t.parsePatterns[t.defaultParseWidth],g=Array.isArray(m)?YE(m,y=>y.test(f)):VE(m,y=>y.test(f));let p;p=t.valueCallback?t.valueCallback(g):g,p=i.valueCallback?i.valueCallback(p):p;const x=a.slice(f.length);return{value:p,rest:x}}}function VE(t,a){for(const i in t)if(Object.prototype.hasOwnProperty.call(t,i)&&a(t[i]))return i}function YE(t,a){for(let i=0;i<t.length;i++)if(a(t[i]))return i}function Px(t){return(a,i={})=>{const s=a.match(t.matchPattern);if(!s)return null;const l=s[0],u=a.match(t.parsePattern);if(!u)return null;let f=t.valueCallback?t.valueCallback(u[0]):u[0];f=i.valueCallback?i.valueCallback(f):f;const m=a.slice(l.length);return{value:f,rest:m}}}const XE=/^(\d+)(th|st|nd|rd)?/i,GE=/\d+/i,ZE={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},QE={any:[/^b/i,/^(a|c)/i]},PE={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},IE={any:[/1/i,/2/i,/3/i,/4/i]},FE={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},WE={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},KE={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},JE={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},ej={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},tj={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},nj={ordinalNumber:Px({matchPattern:XE,parsePattern:GE,valueCallback:t=>parseInt(t,10)}),era:Nn({matchPatterns:ZE,defaultMatchWidth:"wide",parsePatterns:QE,defaultParseWidth:"any"}),quarter:Nn({matchPatterns:PE,defaultMatchWidth:"wide",parsePatterns:IE,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Nn({matchPatterns:FE,defaultMatchWidth:"wide",parsePatterns:WE,defaultParseWidth:"any"}),day:Nn({matchPatterns:KE,defaultMatchWidth:"wide",parsePatterns:JE,defaultParseWidth:"any"}),dayPeriod:Nn({matchPatterns:ej,defaultMatchWidth:"any",parsePatterns:tj,defaultParseWidth:"any"})},Ix={code:"en-US",formatDistance:CE,formatLong:RE,formatRelative:DE,localize:qE,match:nj,options:{weekStartsOn:0,firstWeekContainsDate:1}};function aj(t,a){const i=ft(t,a?.in);return fE(i,jE(i))+1}function ij(t,a){const i=ft(t,a?.in),s=+mc(i)-+hE(i);return Math.round(s/Zx)+1}function Fx(t,a){const i=ft(t,a?.in),s=i.getFullYear(),l=io(),u=a?.firstWeekContainsDate??a?.locale?.options?.firstWeekContainsDate??l.firstWeekContainsDate??l.locale?.options?.firstWeekContainsDate??1,f=na(a?.in||t,0);f.setFullYear(s+1,0,u),f.setHours(0,0,0,0);const m=Xs(f,a),g=na(a?.in||t,0);g.setFullYear(s,0,u),g.setHours(0,0,0,0);const p=Xs(g,a);return+i>=+m?s+1:+i>=+p?s:s-1}function rj(t,a){const i=io(),s=a?.firstWeekContainsDate??a?.locale?.options?.firstWeekContainsDate??i.firstWeekContainsDate??i.locale?.options?.firstWeekContainsDate??1,l=Fx(t,a),u=na(a?.in||t,0);return u.setFullYear(l,0,s),u.setHours(0,0,0,0),Xs(u,a)}function sj(t,a){const i=ft(t,a?.in),s=+Xs(i,a)-+rj(i,a);return Math.round(s/Zx)+1}function $e(t,a){const i=t<0?"-":"",s=Math.abs(t).toString().padStart(a,"0");return i+s}const Ba={y(t,a){const i=t.getFullYear(),s=i>0?i:1-i;return $e(a==="yy"?s%100:s,a.length)},M(t,a){const i=t.getMonth();return a==="M"?String(i+1):$e(i+1,2)},d(t,a){return $e(t.getDate(),a.length)},a(t,a){const i=t.getHours()/12>=1?"pm":"am";switch(a){case"a":case"aa":return i.toUpperCase();case"aaa":return i;case"aaaaa":return i[0];default:return i==="am"?"a.m.":"p.m."}},h(t,a){return $e(t.getHours()%12||12,a.length)},H(t,a){return $e(t.getHours(),a.length)},m(t,a){return $e(t.getMinutes(),a.length)},s(t,a){return $e(t.getSeconds(),a.length)},S(t,a){const i=a.length,s=t.getMilliseconds(),l=Math.trunc(s*Math.pow(10,i-3));return $e(l,a.length)}},mr={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},ty={G:function(t,a,i){const s=t.getFullYear()>0?1:0;switch(a){case"G":case"GG":case"GGG":return i.era(s,{width:"abbreviated"});case"GGGGG":return i.era(s,{width:"narrow"});default:return i.era(s,{width:"wide"})}},y:function(t,a,i){if(a==="yo"){const s=t.getFullYear(),l=s>0?s:1-s;return i.ordinalNumber(l,{unit:"year"})}return Ba.y(t,a)},Y:function(t,a,i,s){const l=Fx(t,s),u=l>0?l:1-l;if(a==="YY"){const f=u%100;return $e(f,2)}return a==="Yo"?i.ordinalNumber(u,{unit:"year"}):$e(u,a.length)},R:function(t,a){const i=Qx(t);return $e(i,a.length)},u:function(t,a){const i=t.getFullYear();return $e(i,a.length)},Q:function(t,a,i){const s=Math.ceil((t.getMonth()+1)/3);switch(a){case"Q":return String(s);case"QQ":return $e(s,2);case"Qo":return i.ordinalNumber(s,{unit:"quarter"});case"QQQ":return i.quarter(s,{width:"abbreviated",context:"formatting"});case"QQQQQ":return i.quarter(s,{width:"narrow",context:"formatting"});default:return i.quarter(s,{width:"wide",context:"formatting"})}},q:function(t,a,i){const s=Math.ceil((t.getMonth()+1)/3);switch(a){case"q":return String(s);case"qq":return $e(s,2);case"qo":return i.ordinalNumber(s,{unit:"quarter"});case"qqq":return i.quarter(s,{width:"abbreviated",context:"standalone"});case"qqqqq":return i.quarter(s,{width:"narrow",context:"standalone"});default:return i.quarter(s,{width:"wide",context:"standalone"})}},M:function(t,a,i){const s=t.getMonth();switch(a){case"M":case"MM":return Ba.M(t,a);case"Mo":return i.ordinalNumber(s+1,{unit:"month"});case"MMM":return i.month(s,{width:"abbreviated",context:"formatting"});case"MMMMM":return i.month(s,{width:"narrow",context:"formatting"});default:return i.month(s,{width:"wide",context:"formatting"})}},L:function(t,a,i){const s=t.getMonth();switch(a){case"L":return String(s+1);case"LL":return $e(s+1,2);case"Lo":return i.ordinalNumber(s+1,{unit:"month"});case"LLL":return i.month(s,{width:"abbreviated",context:"standalone"});case"LLLLL":return i.month(s,{width:"narrow",context:"standalone"});default:return i.month(s,{width:"wide",context:"standalone"})}},w:function(t,a,i,s){const l=sj(t,s);return a==="wo"?i.ordinalNumber(l,{unit:"week"}):$e(l,a.length)},I:function(t,a,i){const s=ij(t);return a==="Io"?i.ordinalNumber(s,{unit:"week"}):$e(s,a.length)},d:function(t,a,i){return a==="do"?i.ordinalNumber(t.getDate(),{unit:"date"}):Ba.d(t,a)},D:function(t,a,i){const s=aj(t);return a==="Do"?i.ordinalNumber(s,{unit:"dayOfYear"}):$e(s,a.length)},E:function(t,a,i){const s=t.getDay();switch(a){case"E":case"EE":case"EEE":return i.day(s,{width:"abbreviated",context:"formatting"});case"EEEEE":return i.day(s,{width:"narrow",context:"formatting"});case"EEEEEE":return i.day(s,{width:"short",context:"formatting"});default:return i.day(s,{width:"wide",context:"formatting"})}},e:function(t,a,i,s){const l=t.getDay(),u=(l-s.weekStartsOn+8)%7||7;switch(a){case"e":return String(u);case"ee":return $e(u,2);case"eo":return i.ordinalNumber(u,{unit:"day"});case"eee":return i.day(l,{width:"abbreviated",context:"formatting"});case"eeeee":return i.day(l,{width:"narrow",context:"formatting"});case"eeeeee":return i.day(l,{width:"short",context:"formatting"});default:return i.day(l,{width:"wide",context:"formatting"})}},c:function(t,a,i,s){const l=t.getDay(),u=(l-s.weekStartsOn+8)%7||7;switch(a){case"c":return String(u);case"cc":return $e(u,a.length);case"co":return i.ordinalNumber(u,{unit:"day"});case"ccc":return i.day(l,{width:"abbreviated",context:"standalone"});case"ccccc":return i.day(l,{width:"narrow",context:"standalone"});case"cccccc":return i.day(l,{width:"short",context:"standalone"});default:return i.day(l,{width:"wide",context:"standalone"})}},i:function(t,a,i){const s=t.getDay(),l=s===0?7:s;switch(a){case"i":return String(l);case"ii":return $e(l,a.length);case"io":return i.ordinalNumber(l,{unit:"day"});case"iii":return i.day(s,{width:"abbreviated",context:"formatting"});case"iiiii":return i.day(s,{width:"narrow",context:"formatting"});case"iiiiii":return i.day(s,{width:"short",context:"formatting"});default:return i.day(s,{width:"wide",context:"formatting"})}},a:function(t,a,i){const l=t.getHours()/12>=1?"pm":"am";switch(a){case"a":case"aa":return i.dayPeriod(l,{width:"abbreviated",context:"formatting"});case"aaa":return i.dayPeriod(l,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return i.dayPeriod(l,{width:"narrow",context:"formatting"});default:return i.dayPeriod(l,{width:"wide",context:"formatting"})}},b:function(t,a,i){const s=t.getHours();let l;switch(s===12?l=mr.noon:s===0?l=mr.midnight:l=s/12>=1?"pm":"am",a){case"b":case"bb":return i.dayPeriod(l,{width:"abbreviated",context:"formatting"});case"bbb":return i.dayPeriod(l,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return i.dayPeriod(l,{width:"narrow",context:"formatting"});default:return i.dayPeriod(l,{width:"wide",context:"formatting"})}},B:function(t,a,i){const s=t.getHours();let l;switch(s>=17?l=mr.evening:s>=12?l=mr.afternoon:s>=4?l=mr.morning:l=mr.night,a){case"B":case"BB":case"BBB":return i.dayPeriod(l,{width:"abbreviated",context:"formatting"});case"BBBBB":return i.dayPeriod(l,{width:"narrow",context:"formatting"});default:return i.dayPeriod(l,{width:"wide",context:"formatting"})}},h:function(t,a,i){if(a==="ho"){let s=t.getHours()%12;return s===0&&(s=12),i.ordinalNumber(s,{unit:"hour"})}return Ba.h(t,a)},H:function(t,a,i){return a==="Ho"?i.ordinalNumber(t.getHours(),{unit:"hour"}):Ba.H(t,a)},K:function(t,a,i){const s=t.getHours()%12;return a==="Ko"?i.ordinalNumber(s,{unit:"hour"}):$e(s,a.length)},k:function(t,a,i){let s=t.getHours();return s===0&&(s=24),a==="ko"?i.ordinalNumber(s,{unit:"hour"}):$e(s,a.length)},m:function(t,a,i){return a==="mo"?i.ordinalNumber(t.getMinutes(),{unit:"minute"}):Ba.m(t,a)},s:function(t,a,i){return a==="so"?i.ordinalNumber(t.getSeconds(),{unit:"second"}):Ba.s(t,a)},S:function(t,a){return Ba.S(t,a)},X:function(t,a,i){const s=t.getTimezoneOffset();if(s===0)return"Z";switch(a){case"X":return ay(s);case"XXXX":case"XX":return mi(s);default:return mi(s,":")}},x:function(t,a,i){const s=t.getTimezoneOffset();switch(a){case"x":return ay(s);case"xxxx":case"xx":return mi(s);default:return mi(s,":")}},O:function(t,a,i){const s=t.getTimezoneOffset();switch(a){case"O":case"OO":case"OOO":return"GMT"+ny(s,":");default:return"GMT"+mi(s,":")}},z:function(t,a,i){const s=t.getTimezoneOffset();switch(a){case"z":case"zz":case"zzz":return"GMT"+ny(s,":");default:return"GMT"+mi(s,":")}},t:function(t,a,i){const s=Math.trunc(+t/1e3);return $e(s,a.length)},T:function(t,a,i){return $e(+t,a.length)}};function ny(t,a=""){const i=t>0?"-":"+",s=Math.abs(t),l=Math.trunc(s/60),u=s%60;return u===0?i+String(l):i+String(l)+a+$e(u,2)}function ay(t,a){return t%60===0?(t>0?"-":"+")+$e(Math.abs(t)/60,2):mi(t,a)}function mi(t,a=""){const i=t>0?"-":"+",s=Math.abs(t),l=$e(Math.trunc(s/60),2),u=$e(s%60,2);return i+l+a+u}const iy=(t,a)=>{switch(t){case"P":return a.date({width:"short"});case"PP":return a.date({width:"medium"});case"PPP":return a.date({width:"long"});default:return a.date({width:"full"})}},Wx=(t,a)=>{switch(t){case"p":return a.time({width:"short"});case"pp":return a.time({width:"medium"});case"ppp":return a.time({width:"long"});default:return a.time({width:"full"})}},oj=(t,a)=>{const i=t.match(/(P+)(p+)?/)||[],s=i[1],l=i[2];if(!l)return iy(t,a);let u;switch(s){case"P":u=a.dateTime({width:"short"});break;case"PP":u=a.dateTime({width:"medium"});break;case"PPP":u=a.dateTime({width:"long"});break;default:u=a.dateTime({width:"full"});break}return u.replace("{{date}}",iy(s,a)).replace("{{time}}",Wx(l,a))},lj={p:Wx,P:oj},cj=/^D+$/,uj=/^Y+$/,dj=["D","DD","YY","YYYY"];function fj(t){return cj.test(t)}function hj(t){return uj.test(t)}function mj(t,a,i){const s=pj(t,a,i);if(console.warn(s),dj.includes(t))throw new RangeError(s)}function pj(t,a,i){const s=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${a}\`) for formatting ${s} to the input \`${i}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const gj=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,yj=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,xj=/^'([^]*?)'?$/,vj=/''/g,bj=/[a-zA-Z]/;function Dc(t,a,i){const s=io(),l=i?.locale??s.locale??Ix,u=i?.firstWeekContainsDate??i?.locale?.options?.firstWeekContainsDate??s.firstWeekContainsDate??s.locale?.options?.firstWeekContainsDate??1,f=i?.weekStartsOn??i?.locale?.options?.weekStartsOn??s.weekStartsOn??s.locale?.options?.weekStartsOn??0,m=ft(t,i?.in);if(!gE(m))throw new RangeError("Invalid time value");let g=a.match(yj).map(x=>{const y=x[0];if(y==="p"||y==="P"){const v=lj[y];return v(x,l.formatLong)}return x}).join("").match(gj).map(x=>{if(x==="''")return{isToken:!1,value:"'"};const y=x[0];if(y==="'")return{isToken:!1,value:wj(x)};if(ty[y])return{isToken:!0,value:x};if(y.match(bj))throw new RangeError("Format string contains an unescaped latin alphabet character `"+y+"`");return{isToken:!1,value:x}});l.localize.preprocessor&&(g=l.localize.preprocessor(m,g));const p={firstWeekContainsDate:u,weekStartsOn:f,locale:l};return g.map(x=>{if(!x.isToken)return x.value;const y=x.value;(!i?.useAdditionalWeekYearTokens&&hj(y)||!i?.useAdditionalDayOfYearTokens&&fj(y))&&mj(y,a,String(t));const v=ty[y[0]];return v(m,y,l.localize,p)}).join("")}function wj(t){const a=t.match(xj);return a?a[1].replace(vj,"'"):t}function Sj(t,a,i){const s=io(),l=i?.locale??s.locale??Ix,u=2520,f=tc(t,a);if(isNaN(f))throw new RangeError("Invalid time value");const m=Object.assign({},i,{addSuffix:i?.addSuffix,comparison:f}),[g,p]=zc(i?.in,...f>0?[a,t]:[t,a]),x=EE(p,g),y=(pc(p)-pc(g))/1e3,v=Math.round((x-y)/60);let N;if(v<2)return i?.includeSeconds?x<5?l.formatDistance("lessThanXSeconds",5,m):x<10?l.formatDistance("lessThanXSeconds",10,m):x<20?l.formatDistance("lessThanXSeconds",20,m):x<40?l.formatDistance("halfAMinute",0,m):x<60?l.formatDistance("lessThanXMinutes",1,m):l.formatDistance("xMinutes",1,m):v===0?l.formatDistance("lessThanXMinutes",1,m):l.formatDistance("xMinutes",v,m);if(v<45)return l.formatDistance("xMinutes",v,m);if(v<90)return l.formatDistance("aboutXHours",1,m);if(v<K0){const E=Math.round(v/60);return l.formatDistance("aboutXHours",E,m)}else{if(v<u)return l.formatDistance("xDays",1,m);if(v<Ul){const E=Math.round(v/K0);return l.formatDistance("xDays",E,m)}else if(v<Ul*2)return N=Math.round(v/Ul),l.formatDistance("aboutXMonths",N,m)}if(N=NE(p,g),N<12){const E=Math.round(v/Ul);return l.formatDistance("xMonths",E,m)}else{const E=N%12,A=Math.trunc(N/12);return E<3?l.formatDistance("aboutXYears",A,m):E<9?l.formatDistance("overXYears",A,m):l.formatDistance("almostXYears",A+1,m)}}function Oc(t,a){return Sj(t,mE(t),a)}const Nj={lessThanXSeconds:{one:"menos de un segundo",other:"menos de {{count}} segundos"},xSeconds:{one:"1 segundo",other:"{{count}} segundos"},halfAMinute:"medio minuto",lessThanXMinutes:{one:"menos de un minuto",other:"menos de {{count}} minutos"},xMinutes:{one:"1 minuto",other:"{{count}} minutos"},aboutXHours:{one:"alrededor de 1 hora",other:"alrededor de {{count}} horas"},xHours:{one:"1 hora",other:"{{count}} horas"},xDays:{one:"1 da",other:"{{count}} das"},aboutXWeeks:{one:"alrededor de 1 semana",other:"alrededor de {{count}} semanas"},xWeeks:{one:"1 semana",other:"{{count}} semanas"},aboutXMonths:{one:"alrededor de 1 mes",other:"alrededor de {{count}} meses"},xMonths:{one:"1 mes",other:"{{count}} meses"},aboutXYears:{one:"alrededor de 1 ao",other:"alrededor de {{count}} aos"},xYears:{one:"1 ao",other:"{{count}} aos"},overXYears:{one:"ms de 1 ao",other:"ms de {{count}} aos"},almostXYears:{one:"casi 1 ao",other:"casi {{count}} aos"}},Ej=(t,a,i)=>{let s;const l=Nj[t];return typeof l=="string"?s=l:a===1?s=l.one:s=l.other.replace("{{count}}",a.toString()),i?.addSuffix?i.comparison&&i.comparison>0?"en "+s:"hace "+s:s},jj={full:"EEEE, d 'de' MMMM 'de' y",long:"d 'de' MMMM 'de' y",medium:"d MMM y",short:"dd/MM/y"},_j={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},Cj={full:"{{date}} 'a las' {{time}}",long:"{{date}} 'a las' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Tj={date:vr({formats:jj,defaultWidth:"full"}),time:vr({formats:_j,defaultWidth:"full"}),dateTime:vr({formats:Cj,defaultWidth:"full"})},Mj={lastWeek:"'el' eeee 'pasado a la' p",yesterday:"'ayer a la' p",today:"'hoy a la' p",tomorrow:"'maana a la' p",nextWeek:"eeee 'a la' p",other:"P"},Aj={lastWeek:"'el' eeee 'pasado a las' p",yesterday:"'ayer a las' p",today:"'hoy a las' p",tomorrow:"'maana a las' p",nextWeek:"eeee 'a las' p",other:"P"},Rj=(t,a,i,s)=>a.getHours()!==1?Aj[t]:Mj[t],zj={narrow:["AC","DC"],abbreviated:["AC","DC"],wide:["antes de cristo","despus de cristo"]},Dj={narrow:["1","2","3","4"],abbreviated:["T1","T2","T3","T4"],wide:["1 trimestre","2 trimestre","3 trimestre","4 trimestre"]},Oj={narrow:["e","f","m","a","m","j","j","a","s","o","n","d"],abbreviated:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"],wide:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"]},kj={narrow:["d","l","m","m","j","v","s"],short:["do","lu","ma","mi","ju","vi","s"],abbreviated:["dom","lun","mar","mi","jue","vie","sb"],wide:["domingo","lunes","martes","mircoles","jueves","viernes","sbado"]},Bj={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"maana",afternoon:"tarde",evening:"tarde",night:"noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"maana",afternoon:"tarde",evening:"tarde",night:"noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"maana",afternoon:"tarde",evening:"tarde",night:"noche"}},Hj={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"de la maana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"de la maana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"de la maana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"}},Lj=(t,a)=>Number(t)+"",Uj={ordinalNumber:Lj,era:Sn({values:zj,defaultWidth:"wide"}),quarter:Sn({values:Dj,defaultWidth:"wide",argumentCallback:t=>Number(t)-1}),month:Sn({values:Oj,defaultWidth:"wide"}),day:Sn({values:kj,defaultWidth:"wide"}),dayPeriod:Sn({values:Bj,defaultWidth:"wide",formattingValues:Hj,defaultFormattingWidth:"wide"})},$j=/^(\d+)()?/i,qj=/\d+/i,Vj={narrow:/^(ac|dc|a|d)/i,abbreviated:/^(a\.?\s?c\.?|a\.?\s?e\.?\s?c\.?|d\.?\s?c\.?|e\.?\s?c\.?)/i,wide:/^(antes de cristo|antes de la era com[u]n|despu[e]s de cristo|era com[u]n)/i},Yj={any:[/^ac/i,/^dc/i],wide:[/^(antes de cristo|antes de la era com[u]n)/i,/^(despu[e]s de cristo|era com[u]n)/i]},Xj={narrow:/^[1234]/i,abbreviated:/^T[1234]/i,wide:/^[1234]()? trimestre/i},Gj={any:[/1/i,/2/i,/3/i,/4/i]},Zj={narrow:/^[efmajsond]/i,abbreviated:/^(ene|feb|mar|abr|may|jun|jul|ago|sep|oct|nov|dic)/i,wide:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i},Qj={narrow:[/^e/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^en/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i]},Pj={narrow:/^[dlmjvs]/i,short:/^(do|lu|ma|mi|ju|vi|s[a])/i,abbreviated:/^(dom|lun|mar|mi[e]|jue|vie|s[a]b)/i,wide:/^(domingo|lunes|martes|mi[e]rcoles|jueves|viernes|s[a]bado)/i},Ij={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^do/i,/^lu/i,/^ma/i,/^mi/i,/^ju/i,/^vi/i,/^sa/i]},Fj={narrow:/^(a|p|mn|md|(de la|a las) (maana|tarde|noche))/i,any:/^([ap]\.?\s?m\.?|medianoche|mediodia|(de la|a las) (maana|tarde|noche))/i},Wj={any:{am:/^a/i,pm:/^p/i,midnight:/^mn/i,noon:/^md/i,morning:/maana/i,afternoon:/tarde/i,evening:/tarde/i,night:/noche/i}},Kj={ordinalNumber:Px({matchPattern:$j,parsePattern:qj,valueCallback:function(t){return parseInt(t,10)}}),era:Nn({matchPatterns:Vj,defaultMatchWidth:"wide",parsePatterns:Yj,defaultParseWidth:"any"}),quarter:Nn({matchPatterns:Xj,defaultMatchWidth:"wide",parsePatterns:Gj,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Nn({matchPatterns:Zj,defaultMatchWidth:"wide",parsePatterns:Qj,defaultParseWidth:"any"}),day:Nn({matchPatterns:Pj,defaultMatchWidth:"wide",parsePatterns:Ij,defaultParseWidth:"any"}),dayPeriod:Nn({matchPatterns:Fj,defaultMatchWidth:"any",parsePatterns:Wj,defaultParseWidth:"any"})},Nr={code:"es",formatDistance:Ej,formatLong:Tj,formatRelative:Rj,localize:Uj,match:Kj,options:{weekStartsOn:1,firstWeekContainsDate:1}};function Jj(){const[t,a]=C.useState(null),[i,s]=C.useState([]),[l,u]=C.useState(!0);C.useEffect(()=>{f()},[]);const f=async()=>{try{const[g,p]=await Promise.all([cE(),Gx()]);a(g),s(p.conversations||[])}catch(g){console.error("Error loading dashboard:",g)}finally{u(!1)}};if(l)return c.jsx("div",{className:"p-8 flex items-center justify-center h-full",children:c.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-500"})});const m=i.slice(0,5);return c.jsxs("div",{className:"p-8",children:[c.jsxs("div",{className:"mb-8",children:[c.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Dashboard"}),c.jsx("p",{className:"text-gray-500 mt-1",children:"Resumen de tu chatbot de WhatsApp"})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[c.jsx(Ll,{title:"Conversaciones",value:i.length,icon:Sr,color:"green",subtitle:"Total activas"}),c.jsx(Ll,{title:"Usuarios nicos",value:t?.unique_users||0,icon:Rc,color:"blue",subtitle:"ltimos 30 das"}),c.jsx(Ll,{title:"Interacciones",value:t?.interactions||0,icon:Nh,color:"purple",subtitle:"Procesadas por el bot"}),c.jsx(Ll,{title:"Confianza",value:`${Math.round((t?.avg_confidence||0)*100)}%`,icon:hc,color:"yellow",subtitle:"Promedio clasificacin"})]}),c.jsxs("div",{className:"bg-white rounded-xl border border-gray-100 shadow-sm",children:[c.jsxs("div",{className:"p-6 border-b border-gray-100 flex items-center justify-between",children:[c.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"Conversaciones Recientes"}),c.jsxs(gi,{to:"/conversations",className:"text-green-600 hover:text-green-700 text-sm font-medium flex items-center gap-1",children:["Ver todas ",c.jsx(hN,{className:"w-4 h-4"})]})]}),m.length===0?c.jsxs("div",{className:"p-12 text-center text-gray-400",children:[c.jsx(Sr,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),c.jsx("p",{children:"No hay conversaciones todava"})]}):c.jsx("div",{className:"divide-y divide-gray-100",children:m.map(g=>c.jsxs(gi,{to:`/conversations?phone=${encodeURIComponent(g.phone)}`,className:"flex items-center gap-4 p-4 hover:bg-gray-50 transition",children:[c.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center flex-shrink-0",children:c.jsx("span",{className:"text-green-600 font-medium",children:g.contact_name?.[0]?.toUpperCase()||g.phone.slice(-2)})}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("p",{className:"font-medium text-gray-800 truncate",children:g.contact_name||g.phone}),c.jsx("span",{className:"text-xs text-gray-400",children:g.last_message_time?Oc(new Date(g.last_message_time),{addSuffix:!0,locale:Nr}):""})]}),c.jsx("p",{className:"text-sm text-gray-500 truncate mt-1",children:g.last_message||"Sin mensajes"})]}),g.unread_count>0&&c.jsx("span",{className:"bg-green-500 text-white text-xs font-medium px-2 py-1 rounded-full",children:g.unread_count})]},g.phone))})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-8",children:[c.jsxs(gi,{to:"/flows",className:"bg-gradient-to-r from-green-500 to-green-600 rounded-xl p-6 text-white hover:from-green-600 hover:to-green-700 transition",children:[c.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Editor de Flujos"}),c.jsx("p",{className:"text-green-100 text-sm",children:"Crea y edita flujos conversacionales de forma visual"})]}),c.jsxs(gi,{to:"/conversations",className:"bg-gradient-to-r from-blue-500 to-blue-600 rounded-xl p-6 text-white hover:from-blue-600 hover:to-blue-700 transition",children:[c.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Ver Conversaciones"}),c.jsx("p",{className:"text-blue-100 text-sm",children:"Responde a tus clientes en tiempo real"})]})]})]})}const _n=Object.create(null);_n.open="0";_n.close="1";_n.ping="2";_n.pong="3";_n.message="4";_n.upgrade="5";_n.noop="6";const nc=Object.create(null);Object.keys(_n).forEach(t=>{nc[_n[t]]=t});const Pf={type:"error",data:"parser error"},Kx=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",Jx=typeof ArrayBuffer=="function",ev=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,_h=({type:t,data:a},i,s)=>Kx&&a instanceof Blob?i?s(a):ry(a,s):Jx&&(a instanceof ArrayBuffer||ev(a))?i?s(a):ry(new Blob([a]),s):s(_n[t]+(a||"")),ry=(t,a)=>{const i=new FileReader;return i.onload=function(){const s=i.result.split(",")[1];a("b"+(s||""))},i.readAsDataURL(t)};function sy(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}let Ef;function e_(t,a){if(Kx&&t.data instanceof Blob)return t.data.arrayBuffer().then(sy).then(a);if(Jx&&(t.data instanceof ArrayBuffer||ev(t.data)))return a(sy(t.data));_h(t,!1,i=>{Ef||(Ef=new TextEncoder),a(Ef.encode(i))})}const oy="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ls=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let t=0;t<oy.length;t++)Ls[oy.charCodeAt(t)]=t;const t_=t=>{let a=t.length*.75,i=t.length,s,l=0,u,f,m,g;t[t.length-1]==="="&&(a--,t[t.length-2]==="="&&a--);const p=new ArrayBuffer(a),x=new Uint8Array(p);for(s=0;s<i;s+=4)u=Ls[t.charCodeAt(s)],f=Ls[t.charCodeAt(s+1)],m=Ls[t.charCodeAt(s+2)],g=Ls[t.charCodeAt(s+3)],x[l++]=u<<2|f>>4,x[l++]=(f&15)<<4|m>>2,x[l++]=(m&3)<<6|g&63;return p},n_=typeof ArrayBuffer=="function",Ch=(t,a)=>{if(typeof t!="string")return{type:"message",data:tv(t,a)};const i=t.charAt(0);return i==="b"?{type:"message",data:a_(t.substring(1),a)}:nc[i]?t.length>1?{type:nc[i],data:t.substring(1)}:{type:nc[i]}:Pf},a_=(t,a)=>{if(n_){const i=t_(t);return tv(i,a)}else return{base64:!0,data:t}},tv=(t,a)=>a==="blob"?t instanceof Blob?t:new Blob([t]):t instanceof ArrayBuffer?t:t.buffer,nv="",i_=(t,a)=>{const i=t.length,s=new Array(i);let l=0;t.forEach((u,f)=>{_h(u,!1,m=>{s[f]=m,++l===i&&a(s.join(nv))})})},r_=(t,a)=>{const i=t.split(nv),s=[];for(let l=0;l<i.length;l++){const u=Ch(i[l],a);if(s.push(u),u.type==="error")break}return s};function s_(){return new TransformStream({transform(t,a){e_(t,i=>{const s=i.length;let l;if(s<126)l=new Uint8Array(1),new DataView(l.buffer).setUint8(0,s);else if(s<65536){l=new Uint8Array(3);const u=new DataView(l.buffer);u.setUint8(0,126),u.setUint16(1,s)}else{l=new Uint8Array(9);const u=new DataView(l.buffer);u.setUint8(0,127),u.setBigUint64(1,BigInt(s))}t.data&&typeof t.data!="string"&&(l[0]|=128),a.enqueue(l),a.enqueue(i)})}})}let jf;function $l(t){return t.reduce((a,i)=>a+i.length,0)}function ql(t,a){if(t[0].length===a)return t.shift();const i=new Uint8Array(a);let s=0;for(let l=0;l<a;l++)i[l]=t[0][s++],s===t[0].length&&(t.shift(),s=0);return t.length&&s<t[0].length&&(t[0]=t[0].slice(s)),i}function o_(t,a){jf||(jf=new TextDecoder);const i=[];let s=0,l=-1,u=!1;return new TransformStream({transform(f,m){for(i.push(f);;){if(s===0){if($l(i)<1)break;const g=ql(i,1);u=(g[0]&128)===128,l=g[0]&127,l<126?s=3:l===126?s=1:s=2}else if(s===1){if($l(i)<2)break;const g=ql(i,2);l=new DataView(g.buffer,g.byteOffset,g.length).getUint16(0),s=3}else if(s===2){if($l(i)<8)break;const g=ql(i,8),p=new DataView(g.buffer,g.byteOffset,g.length),x=p.getUint32(0);if(x>Math.pow(2,21)-1){m.enqueue(Pf);break}l=x*Math.pow(2,32)+p.getUint32(4),s=3}else{if($l(i)<l)break;const g=ql(i,l);m.enqueue(Ch(u?g:jf.decode(g),a)),s=0}if(l===0||l>t){m.enqueue(Pf);break}}}})}const av=4;function ot(t){if(t)return l_(t)}function l_(t){for(var a in ot.prototype)t[a]=ot.prototype[a];return t}ot.prototype.on=ot.prototype.addEventListener=function(t,a){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(a),this};ot.prototype.once=function(t,a){function i(){this.off(t,i),a.apply(this,arguments)}return i.fn=a,this.on(t,i),this};ot.prototype.off=ot.prototype.removeListener=ot.prototype.removeAllListeners=ot.prototype.removeEventListener=function(t,a){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var i=this._callbacks["$"+t];if(!i)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var s,l=0;l<i.length;l++)if(s=i[l],s===a||s.fn===a){i.splice(l,1);break}return i.length===0&&delete this._callbacks["$"+t],this};ot.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var a=new Array(arguments.length-1),i=this._callbacks["$"+t],s=1;s<arguments.length;s++)a[s-1]=arguments[s];if(i){i=i.slice(0);for(var s=0,l=i.length;s<l;++s)i[s].apply(this,a)}return this};ot.prototype.emitReserved=ot.prototype.emit;ot.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]};ot.prototype.hasListeners=function(t){return!!this.listeners(t).length};const kc=typeof Promise=="function"&&typeof Promise.resolve=="function"?a=>Promise.resolve().then(a):(a,i)=>i(a,0),tn=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),c_="arraybuffer";function iv(t,...a){return a.reduce((i,s)=>(t.hasOwnProperty(s)&&(i[s]=t[s]),i),{})}const u_=tn.setTimeout,d_=tn.clearTimeout;function Bc(t,a){a.useNativeTimers?(t.setTimeoutFn=u_.bind(tn),t.clearTimeoutFn=d_.bind(tn)):(t.setTimeoutFn=tn.setTimeout.bind(tn),t.clearTimeoutFn=tn.clearTimeout.bind(tn))}const f_=1.33;function h_(t){return typeof t=="string"?m_(t):Math.ceil((t.byteLength||t.size)*f_)}function m_(t){let a=0,i=0;for(let s=0,l=t.length;s<l;s++)a=t.charCodeAt(s),a<128?i+=1:a<2048?i+=2:a<55296||a>=57344?i+=3:(s++,i+=4);return i}function rv(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function p_(t){let a="";for(let i in t)t.hasOwnProperty(i)&&(a.length&&(a+="&"),a+=encodeURIComponent(i)+"="+encodeURIComponent(t[i]));return a}function g_(t){let a={},i=t.split("&");for(let s=0,l=i.length;s<l;s++){let u=i[s].split("=");a[decodeURIComponent(u[0])]=decodeURIComponent(u[1])}return a}class y_ extends Error{constructor(a,i,s){super(a),this.description=i,this.context=s,this.type="TransportError"}}class Th extends ot{constructor(a){super(),this.writable=!1,Bc(this,a),this.opts=a,this.query=a.query,this.socket=a.socket,this.supportsBinary=!a.forceBase64}onError(a,i,s){return super.emitReserved("error",new y_(a,i,s)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(a){this.readyState==="open"&&this.write(a)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(a){const i=Ch(a,this.socket.binaryType);this.onPacket(i)}onPacket(a){super.emitReserved("packet",a)}onClose(a){this.readyState="closed",super.emitReserved("close",a)}pause(a){}createUri(a,i={}){return a+"://"+this._hostname()+this._port()+this.opts.path+this._query(i)}_hostname(){const a=this.opts.hostname;return a.indexOf(":")===-1?a:"["+a+"]"}_port(){return this.opts.port&&(this.opts.secure&&Number(this.opts.port)!==443||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(a){const i=p_(a);return i.length?"?"+i:""}}class x_ extends Th{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(a){this.readyState="pausing";const i=()=>{this.readyState="paused",a()};if(this._polling||!this.writable){let s=0;this._polling&&(s++,this.once("pollComplete",function(){--s||i()})),this.writable||(s++,this.once("drain",function(){--s||i()}))}else i()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(a){const i=s=>{if(this.readyState==="opening"&&s.type==="open"&&this.onOpen(),s.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(s)};r_(a,this.socket.binaryType).forEach(i),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const a=()=>{this.write([{type:"close"}])};this.readyState==="open"?a():this.once("open",a)}write(a){this.writable=!1,i_(a,i=>{this.doWrite(i,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const a=this.opts.secure?"https":"http",i=this.query||{};return this.opts.timestampRequests!==!1&&(i[this.opts.timestampParam]=rv()),!this.supportsBinary&&!i.sid&&(i.b64=1),this.createUri(a,i)}}let sv=!1;try{sv=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const v_=sv;function b_(){}class w_ extends x_{constructor(a){if(super(a),typeof location<"u"){const i=location.protocol==="https:";let s=location.port;s||(s=i?"443":"80"),this.xd=typeof location<"u"&&a.hostname!==location.hostname||s!==a.port}}doWrite(a,i){const s=this.request({method:"POST",data:a});s.on("success",i),s.on("error",(l,u)=>{this.onError("xhr post error",l,u)})}doPoll(){const a=this.request();a.on("data",this.onData.bind(this)),a.on("error",(i,s)=>{this.onError("xhr poll error",i,s)}),this.pollXhr=a}}class En extends ot{constructor(a,i,s){super(),this.createRequest=a,Bc(this,s),this._opts=s,this._method=s.method||"GET",this._uri=i,this._data=s.data!==void 0?s.data:null,this._create()}_create(){var a;const i=iv(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");i.xdomain=!!this._opts.xd;const s=this._xhr=this.createRequest(i);try{s.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){s.setDisableHeaderCheck&&s.setDisableHeaderCheck(!0);for(let l in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(l)&&s.setRequestHeader(l,this._opts.extraHeaders[l])}}catch{}if(this._method==="POST")try{s.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{s.setRequestHeader("Accept","*/*")}catch{}(a=this._opts.cookieJar)===null||a===void 0||a.addCookies(s),"withCredentials"in s&&(s.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(s.timeout=this._opts.requestTimeout),s.onreadystatechange=()=>{var l;s.readyState===3&&((l=this._opts.cookieJar)===null||l===void 0||l.parseCookies(s.getResponseHeader("set-cookie"))),s.readyState===4&&(s.status===200||s.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof s.status=="number"?s.status:0)},0))},s.send(this._data)}catch(l){this.setTimeoutFn(()=>{this._onError(l)},0);return}typeof document<"u"&&(this._index=En.requestsCount++,En.requests[this._index]=this)}_onError(a){this.emitReserved("error",a,this._xhr),this._cleanup(!0)}_cleanup(a){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=b_,a)try{this._xhr.abort()}catch{}typeof document<"u"&&delete En.requests[this._index],this._xhr=null}}_onLoad(){const a=this._xhr.responseText;a!==null&&(this.emitReserved("data",a),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}En.requestsCount=0;En.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",ly);else if(typeof addEventListener=="function"){const t="onpagehide"in tn?"pagehide":"unload";addEventListener(t,ly,!1)}}function ly(){for(let t in En.requests)En.requests.hasOwnProperty(t)&&En.requests[t].abort()}const S_=(function(){const t=ov({xdomain:!1});return t&&t.responseType!==null})();class N_ extends w_{constructor(a){super(a);const i=a&&a.forceBase64;this.supportsBinary=S_&&!i}request(a={}){return Object.assign(a,{xd:this.xd},this.opts),new En(ov,this.uri(),a)}}function ov(t){const a=t.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!a||v_))return new XMLHttpRequest}catch{}if(!a)try{return new tn[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const lv=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class E_ extends Th{get name(){return"websocket"}doOpen(){const a=this.uri(),i=this.opts.protocols,s=lv?{}:iv(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(s.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(a,i,s)}catch(l){return this.emitReserved("error",l)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=a=>this.onClose({description:"websocket connection closed",context:a}),this.ws.onmessage=a=>this.onData(a.data),this.ws.onerror=a=>this.onError("websocket error",a)}write(a){this.writable=!1;for(let i=0;i<a.length;i++){const s=a[i],l=i===a.length-1;_h(s,this.supportsBinary,u=>{try{this.doWrite(s,u)}catch{}l&&kc(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const a=this.opts.secure?"wss":"ws",i=this.query||{};return this.opts.timestampRequests&&(i[this.opts.timestampParam]=rv()),this.supportsBinary||(i.b64=1),this.createUri(a,i)}}const _f=tn.WebSocket||tn.MozWebSocket;class j_ extends E_{createSocket(a,i,s){return lv?new _f(a,i,s):i?new _f(a,i):new _f(a)}doWrite(a,i){this.ws.send(i)}}class __ extends Th{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(a){return this.emitReserved("error",a)}this._transport.closed.then(()=>{this.onClose()}).catch(a=>{this.onError("webtransport error",a)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(a=>{const i=o_(Number.MAX_SAFE_INTEGER,this.socket.binaryType),s=a.readable.pipeThrough(i).getReader(),l=s_();l.readable.pipeTo(a.writable),this._writer=l.writable.getWriter();const u=()=>{s.read().then(({done:m,value:g})=>{m||(this.onPacket(g),u())}).catch(m=>{})};u();const f={type:"open"};this.query.sid&&(f.data=`{"sid":"${this.query.sid}"}`),this._writer.write(f).then(()=>this.onOpen())})})}write(a){this.writable=!1;for(let i=0;i<a.length;i++){const s=a[i],l=i===a.length-1;this._writer.write(s).then(()=>{l&&kc(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var a;(a=this._transport)===null||a===void 0||a.close()}}const C_={websocket:j_,webtransport:__,polling:N_},T_=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,M_=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function If(t){if(t.length>8e3)throw"URI too long";const a=t,i=t.indexOf("["),s=t.indexOf("]");i!=-1&&s!=-1&&(t=t.substring(0,i)+t.substring(i,s).replace(/:/g,";")+t.substring(s,t.length));let l=T_.exec(t||""),u={},f=14;for(;f--;)u[M_[f]]=l[f]||"";return i!=-1&&s!=-1&&(u.source=a,u.host=u.host.substring(1,u.host.length-1).replace(/;/g,":"),u.authority=u.authority.replace("[","").replace("]","").replace(/;/g,":"),u.ipv6uri=!0),u.pathNames=A_(u,u.path),u.queryKey=R_(u,u.query),u}function A_(t,a){const i=/\/{2,9}/g,s=a.replace(i,"/").split("/");return(a.slice(0,1)=="/"||a.length===0)&&s.splice(0,1),a.slice(-1)=="/"&&s.splice(s.length-1,1),s}function R_(t,a){const i={};return a.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(s,l,u){l&&(i[l]=u)}),i}const Ff=typeof addEventListener=="function"&&typeof removeEventListener=="function",ac=[];Ff&&addEventListener("offline",()=>{ac.forEach(t=>t())},!1);class $a extends ot{constructor(a,i){if(super(),this.binaryType=c_,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,a&&typeof a=="object"&&(i=a,a=null),a){const s=If(a);i.hostname=s.host,i.secure=s.protocol==="https"||s.protocol==="wss",i.port=s.port,s.query&&(i.query=s.query)}else i.host&&(i.hostname=If(i.host).host);Bc(this,i),this.secure=i.secure!=null?i.secure:typeof location<"u"&&location.protocol==="https:",i.hostname&&!i.port&&(i.port=this.secure?"443":"80"),this.hostname=i.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=i.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},i.transports.forEach(s=>{const l=s.prototype.name;this.transports.push(l),this._transportsByName[l]=s}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},i),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=g_(this.opts.query)),Ff&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},ac.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(a){const i=Object.assign({},this.opts.query);i.EIO=av,i.transport=a,this.id&&(i.sid=this.id);const s=Object.assign({},this.opts,{query:i,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[a]);return new this._transportsByName[a](s)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const a=this.opts.rememberUpgrade&&$a.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const i=this.createTransport(a);i.open(),this.setTransport(i)}setTransport(a){this.transport&&this.transport.removeAllListeners(),this.transport=a,a.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",i=>this._onClose("transport close",i))}onOpen(){this.readyState="open",$a.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(a){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",a),this.emitReserved("heartbeat"),a.type){case"open":this.onHandshake(JSON.parse(a.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const i=new Error("server error");i.code=a.data,this._onError(i);break;case"message":this.emitReserved("data",a.data),this.emitReserved("message",a.data);break}}onHandshake(a){this.emitReserved("handshake",a),this.id=a.sid,this.transport.query.sid=a.sid,this._pingInterval=a.pingInterval,this._pingTimeout=a.pingTimeout,this._maxPayload=a.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const a=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+a,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},a),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const a=this._getWritablePackets();this.transport.send(a),this._prevBufferLen=a.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let i=1;for(let s=0;s<this.writeBuffer.length;s++){const l=this.writeBuffer[s].data;if(l&&(i+=h_(l)),s>0&&i>this._maxPayload)return this.writeBuffer.slice(0,s);i+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const a=Date.now()>this._pingTimeoutTime;return a&&(this._pingTimeoutTime=0,kc(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),a}write(a,i,s){return this._sendPacket("message",a,i,s),this}send(a,i,s){return this._sendPacket("message",a,i,s),this}_sendPacket(a,i,s,l){if(typeof i=="function"&&(l=i,i=void 0),typeof s=="function"&&(l=s,s=null),this.readyState==="closing"||this.readyState==="closed")return;s=s||{},s.compress=s.compress!==!1;const u={type:a,data:i,options:s};this.emitReserved("packetCreate",u),this.writeBuffer.push(u),l&&this.once("flush",l),this.flush()}close(){const a=()=>{this._onClose("forced close"),this.transport.close()},i=()=>{this.off("upgrade",i),this.off("upgradeError",i),a()},s=()=>{this.once("upgrade",i),this.once("upgradeError",i)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?s():a()}):this.upgrading?s():a()),this}_onError(a){if($a.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",a),this._onClose("transport error",a)}_onClose(a,i){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),Ff&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const s=ac.indexOf(this._offlineEventListener);s!==-1&&ac.splice(s,1)}this.readyState="closed",this.id=null,this.emitReserved("close",a,i),this.writeBuffer=[],this._prevBufferLen=0}}}$a.protocol=av;class z_ extends $a{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let a=0;a<this._upgrades.length;a++)this._probe(this._upgrades[a])}_probe(a){let i=this.createTransport(a),s=!1;$a.priorWebsocketSuccess=!1;const l=()=>{s||(i.send([{type:"ping",data:"probe"}]),i.once("packet",y=>{if(!s)if(y.type==="pong"&&y.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",i),!i)return;$a.priorWebsocketSuccess=i.name==="websocket",this.transport.pause(()=>{s||this.readyState!=="closed"&&(x(),this.setTransport(i),i.send([{type:"upgrade"}]),this.emitReserved("upgrade",i),i=null,this.upgrading=!1,this.flush())})}else{const v=new Error("probe error");v.transport=i.name,this.emitReserved("upgradeError",v)}}))};function u(){s||(s=!0,x(),i.close(),i=null)}const f=y=>{const v=new Error("probe error: "+y);v.transport=i.name,u(),this.emitReserved("upgradeError",v)};function m(){f("transport closed")}function g(){f("socket closed")}function p(y){i&&y.name!==i.name&&u()}const x=()=>{i.removeListener("open",l),i.removeListener("error",f),i.removeListener("close",m),this.off("close",g),this.off("upgrading",p)};i.once("open",l),i.once("error",f),i.once("close",m),this.once("close",g),this.once("upgrading",p),this._upgrades.indexOf("webtransport")!==-1&&a!=="webtransport"?this.setTimeoutFn(()=>{s||i.open()},200):i.open()}onHandshake(a){this._upgrades=this._filterUpgrades(a.upgrades),super.onHandshake(a)}_filterUpgrades(a){const i=[];for(let s=0;s<a.length;s++)~this.transports.indexOf(a[s])&&i.push(a[s]);return i}}let D_=class extends z_{constructor(a,i={}){const s=typeof a=="object"?a:i;(!s.transports||s.transports&&typeof s.transports[0]=="string")&&(s.transports=(s.transports||["polling","websocket","webtransport"]).map(l=>C_[l]).filter(l=>!!l)),super(a,s)}};function O_(t,a="",i){let s=t;i=i||typeof location<"u"&&location,t==null&&(t=i.protocol+"//"+i.host),typeof t=="string"&&(t.charAt(0)==="/"&&(t.charAt(1)==="/"?t=i.protocol+t:t=i.host+t),/^(https?|wss?):\/\//.test(t)||(typeof i<"u"?t=i.protocol+"//"+t:t="https://"+t),s=If(t)),s.port||(/^(http|ws)$/.test(s.protocol)?s.port="80":/^(http|ws)s$/.test(s.protocol)&&(s.port="443")),s.path=s.path||"/";const u=s.host.indexOf(":")!==-1?"["+s.host+"]":s.host;return s.id=s.protocol+"://"+u+":"+s.port+a,s.href=s.protocol+"://"+u+(i&&i.port===s.port?"":":"+s.port),s}const k_=typeof ArrayBuffer=="function",B_=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,cv=Object.prototype.toString,H_=typeof Blob=="function"||typeof Blob<"u"&&cv.call(Blob)==="[object BlobConstructor]",L_=typeof File=="function"||typeof File<"u"&&cv.call(File)==="[object FileConstructor]";function Mh(t){return k_&&(t instanceof ArrayBuffer||B_(t))||H_&&t instanceof Blob||L_&&t instanceof File}function ic(t,a){if(!t||typeof t!="object")return!1;if(Array.isArray(t)){for(let i=0,s=t.length;i<s;i++)if(ic(t[i]))return!0;return!1}if(Mh(t))return!0;if(t.toJSON&&typeof t.toJSON=="function"&&arguments.length===1)return ic(t.toJSON(),!0);for(const i in t)if(Object.prototype.hasOwnProperty.call(t,i)&&ic(t[i]))return!0;return!1}function U_(t){const a=[],i=t.data,s=t;return s.data=Wf(i,a),s.attachments=a.length,{packet:s,buffers:a}}function Wf(t,a){if(!t)return t;if(Mh(t)){const i={_placeholder:!0,num:a.length};return a.push(t),i}else if(Array.isArray(t)){const i=new Array(t.length);for(let s=0;s<t.length;s++)i[s]=Wf(t[s],a);return i}else if(typeof t=="object"&&!(t instanceof Date)){const i={};for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(i[s]=Wf(t[s],a));return i}return t}function $_(t,a){return t.data=Kf(t.data,a),delete t.attachments,t}function Kf(t,a){if(!t)return t;if(t&&t._placeholder===!0){if(typeof t.num=="number"&&t.num>=0&&t.num<a.length)return a[t.num];throw new Error("illegal attachments")}else if(Array.isArray(t))for(let i=0;i<t.length;i++)t[i]=Kf(t[i],a);else if(typeof t=="object")for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(t[i]=Kf(t[i],a));return t}const uv=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],q_=5;var je;(function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"})(je||(je={}));class V_{constructor(a){this.replacer=a}encode(a){return(a.type===je.EVENT||a.type===je.ACK)&&ic(a)?this.encodeAsBinary({type:a.type===je.EVENT?je.BINARY_EVENT:je.BINARY_ACK,nsp:a.nsp,data:a.data,id:a.id}):[this.encodeAsString(a)]}encodeAsString(a){let i=""+a.type;return(a.type===je.BINARY_EVENT||a.type===je.BINARY_ACK)&&(i+=a.attachments+"-"),a.nsp&&a.nsp!=="/"&&(i+=a.nsp+","),a.id!=null&&(i+=a.id),a.data!=null&&(i+=JSON.stringify(a.data,this.replacer)),i}encodeAsBinary(a){const i=U_(a),s=this.encodeAsString(i.packet),l=i.buffers;return l.unshift(s),l}}class Ah extends ot{constructor(a){super(),this.reviver=a}add(a){let i;if(typeof a=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");i=this.decodeString(a);const s=i.type===je.BINARY_EVENT;s||i.type===je.BINARY_ACK?(i.type=s?je.EVENT:je.ACK,this.reconstructor=new Y_(i),i.attachments===0&&super.emitReserved("decoded",i)):super.emitReserved("decoded",i)}else if(Mh(a)||a.base64)if(this.reconstructor)i=this.reconstructor.takeBinaryData(a),i&&(this.reconstructor=null,super.emitReserved("decoded",i));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+a)}decodeString(a){let i=0;const s={type:Number(a.charAt(0))};if(je[s.type]===void 0)throw new Error("unknown packet type "+s.type);if(s.type===je.BINARY_EVENT||s.type===je.BINARY_ACK){const u=i+1;for(;a.charAt(++i)!=="-"&&i!=a.length;);const f=a.substring(u,i);if(f!=Number(f)||a.charAt(i)!=="-")throw new Error("Illegal attachments");s.attachments=Number(f)}if(a.charAt(i+1)==="/"){const u=i+1;for(;++i&&!(a.charAt(i)===","||i===a.length););s.nsp=a.substring(u,i)}else s.nsp="/";const l=a.charAt(i+1);if(l!==""&&Number(l)==l){const u=i+1;for(;++i;){const f=a.charAt(i);if(f==null||Number(f)!=f){--i;break}if(i===a.length)break}s.id=Number(a.substring(u,i+1))}if(a.charAt(++i)){const u=this.tryParse(a.substr(i));if(Ah.isPayloadValid(s.type,u))s.data=u;else throw new Error("invalid payload")}return s}tryParse(a){try{return JSON.parse(a,this.reviver)}catch{return!1}}static isPayloadValid(a,i){switch(a){case je.CONNECT:return gc(i);case je.DISCONNECT:return i===void 0;case je.CONNECT_ERROR:return typeof i=="string"||gc(i);case je.EVENT:case je.BINARY_EVENT:return Array.isArray(i)&&(typeof i[0]=="number"||typeof i[0]=="string"&&uv.indexOf(i[0])===-1);case je.ACK:case je.BINARY_ACK:return Array.isArray(i)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class Y_{constructor(a){this.packet=a,this.buffers=[],this.reconPack=a}takeBinaryData(a){if(this.buffers.push(a),this.buffers.length===this.reconPack.attachments){const i=$_(this.reconPack,this.buffers);return this.finishedReconstruction(),i}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}function X_(t){return typeof t=="string"}const G_=Number.isInteger||function(t){return typeof t=="number"&&isFinite(t)&&Math.floor(t)===t};function Z_(t){return t===void 0||G_(t)}function gc(t){return Object.prototype.toString.call(t)==="[object Object]"}function Q_(t,a){switch(t){case je.CONNECT:return a===void 0||gc(a);case je.DISCONNECT:return a===void 0;case je.EVENT:return Array.isArray(a)&&(typeof a[0]=="number"||typeof a[0]=="string"&&uv.indexOf(a[0])===-1);case je.ACK:return Array.isArray(a);case je.CONNECT_ERROR:return typeof a=="string"||gc(a);default:return!1}}function P_(t){return X_(t.nsp)&&Z_(t.id)&&Q_(t.type,t.data)}const I_=Object.freeze(Object.defineProperty({__proto__:null,Decoder:Ah,Encoder:V_,get PacketType(){return je},isPacketValid:P_,protocol:q_},Symbol.toStringTag,{value:"Module"}));function cn(t,a,i){return t.on(a,i),function(){t.off(a,i)}}const F_=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class dv extends ot{constructor(a,i,s){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=a,this.nsp=i,s&&s.auth&&(this.auth=s.auth),this._opts=Object.assign({},s),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const a=this.io;this.subs=[cn(a,"open",this.onopen.bind(this)),cn(a,"packet",this.onpacket.bind(this)),cn(a,"error",this.onerror.bind(this)),cn(a,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...a){return a.unshift("message"),this.emit.apply(this,a),this}emit(a,...i){var s,l,u;if(F_.hasOwnProperty(a))throw new Error('"'+a.toString()+'" is a reserved event name');if(i.unshift(a),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(i),this;const f={type:je.EVENT,data:i};if(f.options={},f.options.compress=this.flags.compress!==!1,typeof i[i.length-1]=="function"){const x=this.ids++,y=i.pop();this._registerAckCallback(x,y),f.id=x}const m=(l=(s=this.io.engine)===null||s===void 0?void 0:s.transport)===null||l===void 0?void 0:l.writable,g=this.connected&&!(!((u=this.io.engine)===null||u===void 0)&&u._hasPingExpired());return this.flags.volatile&&!m||(g?(this.notifyOutgoingListeners(f),this.packet(f)):this.sendBuffer.push(f)),this.flags={},this}_registerAckCallback(a,i){var s;const l=(s=this.flags.timeout)!==null&&s!==void 0?s:this._opts.ackTimeout;if(l===void 0){this.acks[a]=i;return}const u=this.io.setTimeoutFn(()=>{delete this.acks[a];for(let m=0;m<this.sendBuffer.length;m++)this.sendBuffer[m].id===a&&this.sendBuffer.splice(m,1);i.call(this,new Error("operation has timed out"))},l),f=(...m)=>{this.io.clearTimeoutFn(u),i.apply(this,m)};f.withError=!0,this.acks[a]=f}emitWithAck(a,...i){return new Promise((s,l)=>{const u=(f,m)=>f?l(f):s(m);u.withError=!0,i.push(u),this.emit(a,...i)})}_addToQueue(a){let i;typeof a[a.length-1]=="function"&&(i=a.pop());const s={id:this._queueSeq++,tryCount:0,pending:!1,args:a,flags:Object.assign({fromQueue:!0},this.flags)};a.push((l,...u)=>(this._queue[0],l!==null?s.tryCount>this._opts.retries&&(this._queue.shift(),i&&i(l)):(this._queue.shift(),i&&i(null,...u)),s.pending=!1,this._drainQueue())),this._queue.push(s),this._drainQueue()}_drainQueue(a=!1){if(!this.connected||this._queue.length===0)return;const i=this._queue[0];i.pending&&!a||(i.pending=!0,i.tryCount++,this.flags=i.flags,this.emit.apply(this,i.args))}packet(a){a.nsp=this.nsp,this.io._packet(a)}onopen(){typeof this.auth=="function"?this.auth(a=>{this._sendConnectPacket(a)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(a){this.packet({type:je.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},a):a})}onerror(a){this.connected||this.emitReserved("connect_error",a)}onclose(a,i){this.connected=!1,delete this.id,this.emitReserved("disconnect",a,i),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(a=>{if(!this.sendBuffer.some(s=>String(s.id)===a)){const s=this.acks[a];delete this.acks[a],s.withError&&s.call(this,new Error("socket has been disconnected"))}})}onpacket(a){if(a.nsp===this.nsp)switch(a.type){case je.CONNECT:a.data&&a.data.sid?this.onconnect(a.data.sid,a.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case je.EVENT:case je.BINARY_EVENT:this.onevent(a);break;case je.ACK:case je.BINARY_ACK:this.onack(a);break;case je.DISCONNECT:this.ondisconnect();break;case je.CONNECT_ERROR:this.destroy();const s=new Error(a.data.message);s.data=a.data.data,this.emitReserved("connect_error",s);break}}onevent(a){const i=a.data||[];a.id!=null&&i.push(this.ack(a.id)),this.connected?this.emitEvent(i):this.receiveBuffer.push(Object.freeze(i))}emitEvent(a){if(this._anyListeners&&this._anyListeners.length){const i=this._anyListeners.slice();for(const s of i)s.apply(this,a)}super.emit.apply(this,a),this._pid&&a.length&&typeof a[a.length-1]=="string"&&(this._lastOffset=a[a.length-1])}ack(a){const i=this;let s=!1;return function(...l){s||(s=!0,i.packet({type:je.ACK,id:a,data:l}))}}onack(a){const i=this.acks[a.id];typeof i=="function"&&(delete this.acks[a.id],i.withError&&a.data.unshift(null),i.apply(this,a.data))}onconnect(a,i){this.id=a,this.recovered=i&&this._pid===i,this._pid=i,this.connected=!0,this.emitBuffered(),this._drainQueue(!0),this.emitReserved("connect")}emitBuffered(){this.receiveBuffer.forEach(a=>this.emitEvent(a)),this.receiveBuffer=[],this.sendBuffer.forEach(a=>{this.notifyOutgoingListeners(a),this.packet(a)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(a=>a()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:je.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(a){return this.flags.compress=a,this}get volatile(){return this.flags.volatile=!0,this}timeout(a){return this.flags.timeout=a,this}onAny(a){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(a),this}prependAny(a){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(a),this}offAny(a){if(!this._anyListeners)return this;if(a){const i=this._anyListeners;for(let s=0;s<i.length;s++)if(a===i[s])return i.splice(s,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(a){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(a),this}prependAnyOutgoing(a){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(a),this}offAnyOutgoing(a){if(!this._anyOutgoingListeners)return this;if(a){const i=this._anyOutgoingListeners;for(let s=0;s<i.length;s++)if(a===i[s])return i.splice(s,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(a){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const i=this._anyOutgoingListeners.slice();for(const s of i)s.apply(this,a.data)}}}function Br(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}Br.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var a=Math.random(),i=Math.floor(a*this.jitter*t);t=(Math.floor(a*10)&1)==0?t-i:t+i}return Math.min(t,this.max)|0};Br.prototype.reset=function(){this.attempts=0};Br.prototype.setMin=function(t){this.ms=t};Br.prototype.setMax=function(t){this.max=t};Br.prototype.setJitter=function(t){this.jitter=t};class Jf extends ot{constructor(a,i){var s;super(),this.nsps={},this.subs=[],a&&typeof a=="object"&&(i=a,a=void 0),i=i||{},i.path=i.path||"/socket.io",this.opts=i,Bc(this,i),this.reconnection(i.reconnection!==!1),this.reconnectionAttempts(i.reconnectionAttempts||1/0),this.reconnectionDelay(i.reconnectionDelay||1e3),this.reconnectionDelayMax(i.reconnectionDelayMax||5e3),this.randomizationFactor((s=i.randomizationFactor)!==null&&s!==void 0?s:.5),this.backoff=new Br({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(i.timeout==null?2e4:i.timeout),this._readyState="closed",this.uri=a;const l=i.parser||I_;this.encoder=new l.Encoder,this.decoder=new l.Decoder,this._autoConnect=i.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(a){return arguments.length?(this._reconnection=!!a,a||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(a){return a===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=a,this)}reconnectionDelay(a){var i;return a===void 0?this._reconnectionDelay:(this._reconnectionDelay=a,(i=this.backoff)===null||i===void 0||i.setMin(a),this)}randomizationFactor(a){var i;return a===void 0?this._randomizationFactor:(this._randomizationFactor=a,(i=this.backoff)===null||i===void 0||i.setJitter(a),this)}reconnectionDelayMax(a){var i;return a===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=a,(i=this.backoff)===null||i===void 0||i.setMax(a),this)}timeout(a){return arguments.length?(this._timeout=a,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(a){if(~this._readyState.indexOf("open"))return this;this.engine=new D_(this.uri,this.opts);const i=this.engine,s=this;this._readyState="opening",this.skipReconnect=!1;const l=cn(i,"open",function(){s.onopen(),a&&a()}),u=m=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",m),a?a(m):this.maybeReconnectOnOpen()},f=cn(i,"error",u);if(this._timeout!==!1){const m=this._timeout,g=this.setTimeoutFn(()=>{l(),u(new Error("timeout")),i.close()},m);this.opts.autoUnref&&g.unref(),this.subs.push(()=>{this.clearTimeoutFn(g)})}return this.subs.push(l),this.subs.push(f),this}connect(a){return this.open(a)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const a=this.engine;this.subs.push(cn(a,"ping",this.onping.bind(this)),cn(a,"data",this.ondata.bind(this)),cn(a,"error",this.onerror.bind(this)),cn(a,"close",this.onclose.bind(this)),cn(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(a){try{this.decoder.add(a)}catch(i){this.onclose("parse error",i)}}ondecoded(a){kc(()=>{this.emitReserved("packet",a)},this.setTimeoutFn)}onerror(a){this.emitReserved("error",a)}socket(a,i){let s=this.nsps[a];return s?this._autoConnect&&!s.active&&s.connect():(s=new dv(this,a,i),this.nsps[a]=s),s}_destroy(a){const i=Object.keys(this.nsps);for(const s of i)if(this.nsps[s].active)return;this._close()}_packet(a){const i=this.encoder.encode(a);for(let s=0;s<i.length;s++)this.engine.write(i[s],a.options)}cleanup(){this.subs.forEach(a=>a()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(a,i){var s;this.cleanup(),(s=this.engine)===null||s===void 0||s.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",a,i),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const a=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const i=this.backoff.duration();this._reconnecting=!0;const s=this.setTimeoutFn(()=>{a.skipReconnect||(this.emitReserved("reconnect_attempt",a.backoff.attempts),!a.skipReconnect&&a.open(l=>{l?(a._reconnecting=!1,a.reconnect(),this.emitReserved("reconnect_error",l)):a.onreconnect()}))},i);this.opts.autoUnref&&s.unref(),this.subs.push(()=>{this.clearTimeoutFn(s)})}}onreconnect(){const a=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",a)}}const Os={};function rc(t,a){typeof t=="object"&&(a=t,t=void 0),a=a||{};const i=O_(t,a.path||"/socket.io"),s=i.source,l=i.id,u=i.path,f=Os[l]&&u in Os[l].nsps,m=a.forceNew||a["force new connection"]||a.multiplex===!1||f;let g;return m?g=new Jf(s,a):(Os[l]||(Os[l]=new Jf(s,a)),g=Os[l]),i.query&&!a.query&&(a.query=i.queryKey),g.socket(i.path,a)}Object.assign(rc,{Manager:Jf,Socket:dv,io:rc,connect:rc});function W_(t){const[a,i]=C.useState(!1),s=C.useRef(null),l=kr(u=>u.token);return C.useEffect(()=>{if(!l)return;const u=rc(t,{path:"/socket.io/",auth:{dashboardToken:l},transports:["websocket","polling"],reconnection:!0,reconnectionAttempts:1/0,reconnectionDelay:2e3,reconnectionDelayMax:1e4,timeout:2e4});return u.on("connect",()=>{console.log(`Dashboard socket conectado a ${t}`),i(!0)}),u.on("disconnect",f=>{console.log(`Dashboard socket desconectado: ${f}`),i(!1)}),u.on("connect_error",f=>{console.error("Error de conexin Socket.IO:",f.message)}),s.current=u,()=>{u.disconnect(),s.current=null,i(!1)}},[t,l]),{socket:s.current,connected:a}}function K_(){const[t,a]=ZS(),[i,s]=C.useState([]),[l,u]=C.useState(t.get("phone")||null),[f,m]=C.useState([]),[g,p]=C.useState(""),[x,y]=C.useState(!0),[v,N]=C.useState(!1),[E,A]=C.useState(""),w=C.useRef(null);i.find(H=>H.phone===l);const j=C.useRef(l);j.current=l;const{socket:_,connected:S}=W_("/chat");C.useEffect(()=>{M();const H=setInterval(()=>{M()},3e4);return()=>{clearInterval(H)}},[]),C.useEffect(()=>{l&&(B(l),a({phone:l}))},[l]),C.useEffect(()=>{if(_)return _.on("new_message",H=>{console.log("Nuevo mensaje via WebSocket:",H),H.phone&&H.phone===j.current&&m(te=>te.find(Z=>Z.waMsgId===H.msgId||Z.id===H.dbId)?te:[...te,{id:H.dbId||Date.now(),direction:H.direction==="in"?"incoming":"outgoing",body:H.text,content:H.text,created_at:new Date(H.timestamp).toISOString(),status:H.status,waMsgId:H.msgId,is_bot:H.isAI||!1,mediaType:H.media?.type||null,mediaId:H.media?.id||H.mediaId||null,mediaMime:H.media?.mime||null,mediaCaption:H.media?.caption||null,mediaExtra:H.media?.extra||null,media:H.media}]),M()}),_.on("escalation",H=>{console.log("Escalamiento detectado:",H),M()}),_.on("message_status_update",H=>{console.log("Status actualizado:",H),m(te=>te.map(L=>L.waMsgId===H.msgId?{...L,status:H.status}:L))}),()=>{_.off("new_message"),_.off("escalation"),_.off("message_status_update")}},[_]),C.useEffect(()=>{w.current?.scrollIntoView({behavior:"smooth"})},[f]);const M=async()=>{try{const H=await Gx();s(H.conversations||[])}catch(H){console.error("Error loading conversations:",H)}finally{y(!1)}},B=async H=>{try{const te=await sE(H);m(te.messages||[]),await lE(H)}catch(te){console.error("Error loading messages:",te)}},$=H=>{p(H.target.value)},k=async()=>{if(!(!g.trim()||!l||v)){N(!0);try{await oE(l,g),p("")}catch(H){console.error("Error sending message:",H),alert("Error al enviar mensaje")}finally{N(!1)}}},X=H=>{H.key==="Enter"&&!H.shiftKey&&(H.preventDefault(),k())},F=i.filter(H=>(H.contact_name?.toLowerCase()||"").includes(E.toLowerCase())||H.phone.includes(E)),se=i.find(H=>H.phone===l),P=H=>{const{mediaType:te,mediaId:L,mediaExtra:Z,mediaMime:z,media:D}=H,V=te||D?.type,O=L||D?.id,Q=z||D?.mime,R=Z||D?.extra;if(!V)return null;const U=H.direction==="outgoing",J="/api/chat/media";switch(V){case"image":return c.jsxs("div",{className:"mt-2 rounded-lg overflow-hidden max-w-xs",children:[c.jsx("img",{src:`${J}/${O}`,alt:"Imagen",className:"w-full h-auto cursor-pointer hover:opacity-90",onClick:()=>window.open(`${J}/${O}`,"_blank"),onError:he=>{he.target.style.display="none",he.target.nextSibling.style.display="flex"}}),c.jsxs("div",{className:"hidden items-center gap-2 p-3 bg-gray-100 rounded-lg",children:[c.jsx(MN,{className:"w-5 h-5 text-gray-500"}),c.jsx("span",{className:"text-sm text-gray-600",children:"Imagen no disponible"})]})]});case"video":return c.jsx("div",{className:"mt-2 rounded-lg overflow-hidden max-w-xs",children:c.jsx("video",{src:`${J}/${O}`,controls:!0,className:"w-full h-auto rounded-lg",preload:"metadata",children:"Tu navegador no soporta video"})});case"audio":return c.jsxs("div",{className:`mt-2 flex items-center gap-2 p-2 rounded-lg ${U?"bg-green-600":"bg-gray-100"}`,children:[c.jsx(LN,{className:`w-5 h-5 ${U?"text-white":"text-green-600"}`}),c.jsx("audio",{src:`${J}/${O}`,controls:!0,className:"h-8 flex-1",preload:"metadata"})]});case"document":const ne=R?.filename||"Documento";return c.jsxs("a",{href:`${J}/${O}`,target:"_blank",rel:"noopener noreferrer",className:`mt-2 flex items-center gap-3 p-3 rounded-lg ${U?"bg-green-600 hover:bg-green-700":"bg-gray-100 hover:bg-gray-200"} transition`,children:[c.jsx(NN,{className:`w-8 h-8 ${U?"text-white":"text-blue-600"}`}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("p",{className:`text-sm font-medium truncate ${U?"text-white":"text-gray-800"}`,children:ne}),c.jsx("p",{className:`text-xs ${U?"text-green-100":"text-gray-500"}`,children:Q||"Documento"})]}),c.jsx(wN,{className:`w-5 h-5 ${U?"text-white":"text-gray-500"}`})]});case"sticker":return c.jsx("div",{className:"mt-2",children:c.jsx("img",{src:`${J}/${O}`,alt:"Sticker",className:"w-32 h-32 object-contain",onError:he=>{he.target.src='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="128" height="128" viewBox="0 0 24 24" fill="none" stroke="gray" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="M8 14s1.5 2 4 2 4-2 4-2"/><line x1="9" y1="9" x2="9.01" y2="9"/><line x1="15" y1="9" x2="15.01" y2="9"/></svg>'}})});case"location":const oe=R?.latitude,ue=R?.longitude,ce=R?.name,le=R?.address,de=`https://www.google.com/maps?q=${oe},${ue}`;return c.jsx("a",{href:de,target:"_blank",rel:"noopener noreferrer",className:`mt-2 block p-3 rounded-lg ${U?"bg-green-600 hover:bg-green-700":"bg-gray-100 hover:bg-gray-200"} transition`,children:c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx("div",{className:`p-2 rounded-full ${U?"bg-green-500":"bg-red-100"}`,children:c.jsx(kN,{className:`w-5 h-5 ${U?"text-white":"text-red-600"}`})}),c.jsxs("div",{className:"flex-1 min-w-0",children:[ce&&c.jsx("p",{className:`font-medium ${U?"text-white":"text-gray-800"}`,children:ce}),le&&c.jsx("p",{className:`text-sm ${U?"text-green-100":"text-gray-600"}`,children:le}),c.jsxs("p",{className:`text-xs mt-1 ${U?"text-green-200":"text-gray-500"}`,children:[oe?.toFixed(6),", ",ue?.toFixed(6)]})]})]})});case"contacts":const ve=R?.contacts||[];return c.jsxs("div",{className:`mt-2 p-3 rounded-lg ${U?"bg-green-600":"bg-gray-100"}`,children:[c.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[c.jsx(Rc,{className:`w-5 h-5 ${U?"text-white":"text-blue-600"}`}),c.jsx("span",{className:`font-medium ${U?"text-white":"text-gray-800"}`,children:ve.length===1?"Contacto compartido":`${ve.length} contactos`})]}),ve.map((he,ye)=>c.jsxs("div",{className:`p-2 rounded ${U?"bg-green-500":"bg-white"} ${ye>0?"mt-2":""}`,children:[c.jsx("p",{className:`font-medium ${U?"text-white":"text-gray-800"}`,children:he.name}),he.phones?.map((Se,De)=>c.jsxs("p",{className:`text-sm ${U?"text-green-100":"text-gray-600"}`,children:[Se.phone," ",Se.type&&`(${Se.type})`]},De))]},ye))]});case"reaction":const be=R?.emoji||H.body;return c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx(CN,{className:`w-4 h-4 ${U?"text-white":"text-pink-500"}`}),c.jsx("span",{className:"text-2xl",children:be})]});default:return null}};return x?c.jsx("div",{className:"h-full flex items-center justify-center",children:c.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-500"})}):c.jsxs("div",{className:"h-screen flex",children:[c.jsxs("div",{className:"w-96 bg-white border-r border-gray-200 flex flex-col",children:[c.jsxs("div",{className:"p-4 border-b border-gray-200",children:[c.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"Conversaciones"}),c.jsxs("div",{className:"relative",children:[c.jsx(Xx,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),c.jsx("input",{type:"text",value:E,onChange:H=>A(H.target.value),placeholder:"Buscar conversacin...",className:"w-full pl-10 pr-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none"})]})]}),c.jsx("div",{className:"flex-1 overflow-y-auto",children:F.length===0?c.jsxs("div",{className:"p-8 text-center text-gray-400",children:[c.jsx(Sr,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),c.jsx("p",{children:"No hay conversaciones"})]}):F.map(H=>c.jsxs("button",{onClick:()=>u(H.phone),className:`w-full flex items-center gap-3 p-4 border-b border-gray-100 hover:bg-gray-50 transition text-left ${l===H.phone?"bg-green-50":""}`,children:[c.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center flex-shrink-0",children:c.jsx("span",{className:"text-green-600 font-medium",children:H.contact_name?.[0]?.toUpperCase()||H.phone.slice(-2)})}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("p",{className:"font-medium text-gray-800 truncate",children:H.contact_name||H.phone}),H.unread_count>0&&c.jsx("span",{className:"bg-green-500 text-white text-xs font-medium px-2 py-0.5 rounded-full",children:H.unread_count})]}),c.jsx("p",{className:"text-sm text-gray-500 truncate",children:H.last_message||"Sin mensajes"}),c.jsx("p",{className:"text-xs text-gray-400 mt-1",children:H.last_message_time?Oc(new Date(H.last_message_time),{addSuffix:!0,locale:Nr}):""})]})]},H.phone))})]}),c.jsx("div",{className:"flex-1 flex flex-col bg-gray-50",children:l?c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"bg-white border-b border-gray-200 p-4 flex items-center justify-between gap-4",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center",children:c.jsx(Qf,{className:"w-5 h-5 text-green-600"})}),c.jsxs("div",{children:[c.jsx("p",{className:"font-medium text-gray-800",children:se?.contact_name||l}),c.jsxs("p",{className:"text-sm text-gray-500 flex items-center gap-1",children:[c.jsx(Ac,{className:"w-3 h-3"}),l]})]})]}),c.jsx("div",{className:"text-sm",children:S?c.jsxs("span",{className:"text-green-600 flex items-center gap-1",children:[c.jsx("span",{className:"w-2 h-2 bg-green-600 rounded-full"}),"Tiempo real"]}):c.jsxs("span",{className:"text-yellow-600 flex items-center gap-1",children:[c.jsx("span",{className:"w-2 h-2 bg-yellow-600 rounded-full"}),"Reconectando..."]})})]}),c.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[f.map((H,te)=>c.jsx("div",{className:`flex ${H.direction==="outgoing"?"justify-end":"justify-start"}`,children:c.jsxs("div",{className:`max-w-md px-4 py-2 rounded-2xl ${H.direction==="outgoing"?"bg-green-500 text-white rounded-br-md":"bg-white text-gray-800 rounded-bl-md shadow-sm"}`,children:[H.direction==="incoming"&&c.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-400 mb-1",children:[c.jsx(Qf,{className:"w-3 h-3"}),"Cliente"]}),H.direction==="outgoing"&&H.is_bot&&c.jsxs("div",{className:"flex items-center gap-1 text-xs text-green-100 mb-1",children:[c.jsx(Nh,{className:"w-3 h-3"}),"Bot"]}),P(H),(H.body||H.content)&&(!H.mediaType||H.mediaType==="reaction")&&c.jsx("p",{className:"whitespace-pre-wrap",children:H.body||H.content}),H.mediaType&&H.mediaType!=="reaction"&&(H.mediaCaption||H.body)&&c.jsx("p",{className:"whitespace-pre-wrap mt-2 text-sm",children:H.mediaCaption||H.body}),c.jsxs("div",{className:`flex items-center gap-1 text-xs mt-1 ${H.direction==="outgoing"?"text-white opacity-90":"text-gray-400"}`,children:[c.jsx("span",{children:H.created_at?Dc(new Date(H.created_at),"HH:mm",{locale:Nr}):""}),H.direction==="outgoing"&&c.jsxs("span",{className:"ml-1",children:[H.status==="sent"&&"",H.status==="delivered"&&"",H.status==="read"&&c.jsx("span",{className:"text-blue-200",children:""})]})]})]})},te)),c.jsx("div",{ref:w})]}),c.jsx("div",{className:"bg-white border-t border-gray-200 p-4",children:c.jsxs("div",{className:"flex gap-3",children:[c.jsx("input",{type:"text",value:g,onChange:$,onKeyPress:X,placeholder:"Escribe un mensaje...",className:"flex-1 px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none"}),c.jsxs("button",{onClick:k,disabled:!g.trim()||v,className:"bg-green-500 hover:bg-green-600 text-white px-6 py-3 rounded-xl transition disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[c.jsx(IN,{className:"w-5 h-5"}),v?"Enviando...":"Enviar"]})]})})]}):c.jsx("div",{className:"flex-1 flex items-center justify-center text-gray-400",children:c.jsxs("div",{className:"text-center",children:[c.jsx(Sr,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),c.jsx("p",{className:"text-lg",children:"Selecciona una conversacin"})]})})})]})}const ra="/api/visual-flows-live";async function Zt(t,a){if(!t.ok){let i=a;try{const s=await t.json();s.error&&(i=s.error)}catch{}throw new Error(i)}return t.json()}async function fv(){const t=await fetch(ra);return Zt(t,"Error al cargar flujos")}async function eh(t){const a=await fetch(`${ra}/${t}`);return Zt(a,"Flujo no encontrado")}async function J_(t){const a=await fetch(ra,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});return Zt(a,"Error al crear flujo")}async function e4(t,a){const i=await fetch(`${ra}/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});return Zt(i,"Error al actualizar flujo")}async function t4(t){const a=await fetch(`${ra}/${t}`,{method:"DELETE"});return Zt(a,"Error al eliminar flujo")}async function hv(t,a=!0){const i=await fetch(`${ra}/${t}/activate`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({active:a})});return Zt(i,"Error al activar flujo")}async function n4(t,a){const i=await fetch(`${ra}/${t}/duplicate`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({new_name:a})});return Zt(i,"Error al duplicar flujo")}async function a4(){const t=await fetch(`${ra}/templates/list`);return Zt(t,"Error al cargar plantillas")}async function mv(t,a){const i=await fetch(`${ra}/templates/${t}/create`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:a})});return Zt(i,"Error al crear desde plantilla")}async function i4(t={}){const a=new URLSearchParams;t.status&&a.append("status",t.status),t.category&&a.append("category",t.category),t.lang&&a.append("lang",t.lang),a.append("with","components"),a.append("limit","200");const i=await fetch(`/api/chat/templates?${a}`);return Zt(i,"Error al cargar plantillas de Meta")}async function r4({templateName:t,languageCode:a,phone:i,parameters:s=[],headerParams:l=[],buttonParams:u=[]}){const f=await fetch("/api/templates/test",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({templateName:t,languageCode:a,phone:i,parameters:s,headerParams:l,buttonParams:u})});return Zt(f,"Error al enviar plantilla de prueba")}async function s4(){const t=await fetch("/api/settings/visual-flows");return Zt(t,"Error al obtener estado de Visual Flows")}async function o4(t){const a=await fetch("/api/settings/visual-flows",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({enabled:t})});return Zt(a,"Error al cambiar estado de Visual Flows")}const cy="whatsapp_test_phone";function l4({template:t,onClose:a}){const[i,s]=C.useState(""),[l,u]=C.useState(!0),[f,m]=C.useState([]),[g,p]=C.useState([]),[x,y]=C.useState([]),[v,N]=C.useState(!1),[E,A]=C.useState(null);C.useEffect(()=>{const M=localStorage.getItem(cy);M&&s(M)},[]),C.useEffect(()=>{if(!t?.components)return;const M=t.components.find(k=>k.type==="BODY"),B=t.components.find(k=>k.type==="HEADER"),$=t.components.filter(k=>k.type==="BUTTONS");if(M?.text){const k=M.text.match(/\{\{(\d+)\}\}/g)||[];m(k.map(()=>""))}if(B?.text){const k=B.text.match(/\{\{(\d+)\}\}/g)||[];p(k.map(()=>""))}if($.length>0){const k=[];$.forEach(X=>{X.buttons&&X.buttons.forEach(F=>{F.type==="URL"&&F.url?.includes("{{")&&k.push("")})}),y(k)}},[t]);const w=async()=>{if(!i.trim()){A({ok:!1,error:"Ingresa un nmero de telfono"});return}N(!0),A(null);try{l&&localStorage.setItem(cy,i);const M=await r4({templateName:t.name,languageCode:t.language,phone:i.trim(),parameters:f.filter(B=>B!==""),headerParams:g.filter(B=>B!==""),buttonParams:x.filter(B=>B!=="")});A(M)}catch(M){A({ok:!1,error:M.message})}finally{N(!1)}},j=()=>{if(!t?.components)return"";const M=t.components.find($=>$.type==="BODY");if(!M?.text)return"";let B=M.text;return f.forEach(($,k)=>{B=B.replace(`{{${k+1}}}`,$||`[param ${k+1}]`)}),B},_={APPROVED:{bg:"#dcfce7",text:"#166534"},PENDING:{bg:"#fef3c7",text:"#92400e"},REJECTED:{bg:"#fee2e2",text:"#991b1b"}},S={MARKETING:{bg:"#dbeafe",text:"#1e40af"},UTILITY:{bg:"#f3e8ff",text:"#6b21a8"},AUTHENTICATION:{bg:"#fce7f3",text:"#9d174d"}};return c.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:c.jsxs("div",{style:{background:"white",borderRadius:"16px",padding:"24px",maxWidth:"500px",width:"90%",maxHeight:"90vh",overflow:"auto"},children:[c.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"16px"},children:[c.jsxs("div",{children:[c.jsx("h2",{style:{margin:"0 0 8px 0",fontSize:"20px"},children:"Probar Plantilla"}),c.jsxs("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:[c.jsx("span",{style:{padding:"2px 8px",borderRadius:"4px",fontSize:"12px",fontWeight:"500",background:_[t.status]?.bg||"#f3f4f6",color:_[t.status]?.text||"#374151"},children:t.status}),c.jsx("span",{style:{padding:"2px 8px",borderRadius:"4px",fontSize:"12px",fontWeight:"500",background:S[t.category]?.bg||"#f3f4f6",color:S[t.category]?.text||"#374151"},children:t.category}),c.jsx("span",{style:{padding:"2px 8px",borderRadius:"4px",fontSize:"12px",background:"#f3f4f6",color:"#374151"},children:t.language})]})]}),c.jsx("button",{onClick:a,style:{background:"none",border:"none",fontSize:"24px",cursor:"pointer",color:"#6b7280"},children:""})]}),c.jsxs("div",{style:{background:"#f9fafb",padding:"12px",borderRadius:"8px",marginBottom:"16px"},children:[c.jsx("div",{style:{fontSize:"12px",color:"#6b7280",marginBottom:"4px"},children:"Nombre de la plantilla"}),c.jsx("div",{style:{fontFamily:"monospace",fontWeight:"500"},children:t.name})]}),c.jsxs("div",{style:{background:"#dcf8c6",padding:"12px",borderRadius:"8px",marginBottom:"16px",whiteSpace:"pre-wrap"},children:[c.jsx("div",{style:{fontSize:"12px",color:"#075e54",marginBottom:"4px"},children:"Vista previa"}),c.jsx("div",{style:{color:"#000"},children:j()||"(Sin contenido)"})]}),f.length>0&&c.jsxs("div",{style:{marginBottom:"16px"},children:[c.jsx("div",{style:{fontSize:"14px",fontWeight:"500",marginBottom:"8px"},children:"Parmetros del mensaje"}),f.map((M,B)=>c.jsx("input",{type:"text",placeholder:`Parmetro {{${B+1}}}`,value:M,onChange:$=>{const k=[...f];k[B]=$.target.value,m(k)},style:{width:"100%",padding:"8px 12px",border:"1px solid #d1d5db",borderRadius:"6px",marginBottom:"8px",fontSize:"14px"}},`body-${B}`))]}),g.length>0&&c.jsxs("div",{style:{marginBottom:"16px"},children:[c.jsx("div",{style:{fontSize:"14px",fontWeight:"500",marginBottom:"8px"},children:"Parmetros del encabezado"}),g.map((M,B)=>c.jsx("input",{type:"text",placeholder:`Header {{${B+1}}}`,value:M,onChange:$=>{const k=[...g];k[B]=$.target.value,p(k)},style:{width:"100%",padding:"8px 12px",border:"1px solid #d1d5db",borderRadius:"6px",marginBottom:"8px",fontSize:"14px"}},`header-${B}`))]}),x.length>0&&c.jsxs("div",{style:{marginBottom:"16px"},children:[c.jsx("div",{style:{fontSize:"14px",fontWeight:"500",marginBottom:"8px"},children:"Parmetros de botn URL"}),x.map((M,B)=>c.jsx("input",{type:"text",placeholder:`Texto dinmico del botn ${B+1}`,value:M,onChange:$=>{const k=[...x];k[B]=$.target.value,y(k)},style:{width:"100%",padding:"8px 12px",border:"1px solid #d1d5db",borderRadius:"6px",marginBottom:"8px",fontSize:"14px"}},`btn-${B}`))]}),c.jsxs("div",{style:{marginBottom:"16px"},children:[c.jsx("div",{style:{fontSize:"14px",fontWeight:"500",marginBottom:"8px"},children:"Nmero de telfono destino"}),c.jsx("input",{type:"tel",placeholder:"56912345678",value:i,onChange:M=>s(M.target.value),style:{width:"100%",padding:"8px 12px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"14px"}}),c.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",marginTop:"8px",fontSize:"13px",color:"#6b7280",cursor:"pointer"},children:[c.jsx("input",{type:"checkbox",checked:l,onChange:M=>u(M.target.checked)}),"Recordar este nmero"]})]}),E&&c.jsx("div",{style:{padding:"12px",borderRadius:"8px",marginBottom:"16px",background:E.ok?"#dcfce7":"#fee2e2",color:E.ok?"#166534":"#991b1b"},children:E.ok?c.jsxs(c.Fragment,{children:[c.jsx("div",{style:{fontWeight:"500"},children:"Enviado correctamente"}),c.jsxs("div",{style:{fontSize:"13px",marginTop:"4px"},children:["Mensaje enviado a ",E.sentTo]})]}):c.jsxs(c.Fragment,{children:[c.jsx("div",{style:{fontWeight:"500"},children:"Error al enviar"}),c.jsx("div",{style:{fontSize:"13px",marginTop:"4px"},children:E.error})]})}),c.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end"},children:[c.jsx("button",{onClick:a,style:{padding:"10px 20px",border:"1px solid #d1d5db",borderRadius:"8px",background:"white",cursor:"pointer",fontSize:"14px"},children:"Cerrar"}),c.jsx("button",{onClick:w,disabled:v||t.status!=="APPROVED",style:{padding:"10px 20px",border:"none",borderRadius:"8px",background:t.status==="APPROVED"?"#25d366":"#9ca3af",color:"white",cursor:t.status==="APPROVED"?"pointer":"not-allowed",fontSize:"14px",fontWeight:"500",display:"flex",alignItems:"center",gap:"8px"},children:v?"Enviando...":"Enviar Prueba"})]}),t.status!=="APPROVED"&&c.jsx("div",{style:{marginTop:"12px",padding:"8px",background:"#fef3c7",borderRadius:"6px",fontSize:"13px",color:"#92400e",textAlign:"center"},children:"Solo se pueden probar plantillas con estado APPROVED"})]})})}function c4(){const t=ji(),[a,i]=C.useState("flows"),[s,l]=C.useState([]),[u,f]=C.useState([]),[m,g]=C.useState([]),[p,x]=C.useState(!1),[y,v]=C.useState({status:"",category:""}),[N,E]=C.useState(null),[A,w]=C.useState(!0),[j,_]=C.useState(null),[S,M]=C.useState(null),[B,$]=C.useState(!0),[k,X]=C.useState(!1);C.useEffect(()=>{P(),F()},[]),C.useEffect(()=>{a==="whatsapp"&&H()},[a,y]);const F=async()=>{try{const O=await s4();$(O.enabled)}catch(O){console.error("Error loading visual flows status:",O)}},se=async()=>{try{X(!0);const Q=await o4(!B);$(Q.enabled),te(Q.enabled?"Modo automtico ACTIVADO":"Modo automtico DESACTIVADO",Q.enabled?"success":"info")}catch(O){console.error("Error toggling visual flows:",O),te(`Error: ${O.message}`,"error")}finally{X(!1)}},P=async()=>{try{w(!0),_(null);const[O,Q]=await Promise.all([fv(),a4()]);l(O.flows||[]),f(Q.templates||[])}catch(O){console.error("Error loading flows:",O),_(O.message)}finally{w(!1)}},H=async()=>{try{x(!0);const O={};y.status&&(O.status=y.status),y.category&&(O.category=y.category);const Q=await i4(O);g(Q.items||[])}catch(O){console.error("Error loading Meta templates:",O),te(`Error al cargar plantillas: ${O.message}`,"error")}finally{x(!1)}},te=(O,Q="success")=>{M({message:O,type:Q}),setTimeout(()=>M(null),4e3)},L=async(O,Q)=>{try{const R=await mv(O,null);te(`Flujo "${Q}" creado correctamente`,"success"),await P(),R.id&&t(`/flows/builder/${R.id}`)}catch(R){console.error("Error creating from template:",R),te(`Error al crear flujo: ${R.message}`,"error")}},Z=async O=>{try{const Q=!O.is_active;await hv(O.id,Q),te(`Flujo "${O.name}" ${Q?"activado":"desactivado"}`,"success"),await P()}catch(Q){console.error("Error toggling flow:",Q),te(`Error: ${Q.message}`,"error")}},z=async O=>{try{await n4(O.id,`${O.name} (copia)`),te("Flujo duplicado correctamente","success"),await P()}catch(Q){console.error("Error duplicating flow:",Q),te(`Error al duplicar: ${Q.message}`,"error")}},D=async O=>{if(confirm(`Ests seguro de eliminar el flujo "${O.name}"?`))try{await t4(O.id),te("Flujo eliminado correctamente","success"),await P()}catch(Q){console.error("Error deleting flow:",Q),te(`Error al eliminar: ${Q.message}`,"error")}},V=O=>({sales:"bg-green-100 text-green-800",support:"bg-blue-100 text-blue-800",service:"bg-purple-100 text-purple-800",feedback:"bg-yellow-100 text-yellow-800",engagement:"bg-pink-100 text-pink-800"})[O]||"bg-gray-100 text-gray-800";return A?c.jsx("div",{className:"flex items-center justify-center h-screen",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-500 mx-auto mb-4"}),c.jsx("p",{className:"text-gray-600",children:"Cargando flujos..."})]})}):j?c.jsx("div",{className:"p-8",children:c.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[c.jsx("h3",{className:"text-red-800 font-semibold mb-2",children:"Error al cargar flujos"}),c.jsx("p",{className:"text-red-600",children:j}),c.jsx("button",{onClick:P,className:"mt-4 px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700",children:"Reintentar"})]})}):c.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[c.jsxs("div",{className:"mb-6 flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Gestin de Flujos"}),c.jsx("p",{className:"text-gray-600",children:"Administra tus flujos conversacionales y crea nuevos desde plantillas predefinidas"})]}),c.jsxs("div",{className:`flex items-center gap-3 px-4 py-3 rounded-lg border ${B?"bg-green-50 border-green-200":"bg-gray-50 border-gray-300"}`,children:[c.jsxs("div",{className:"text-right",children:[c.jsx("p",{className:`text-sm font-medium ${B?"text-green-800":"text-gray-600"}`,children:"Modo Automtico"}),c.jsx("p",{className:`text-xs ${B?"text-green-600":"text-gray-500"}`,children:B?"Bot respondiendo":"Bot pausado"})]}),c.jsx("button",{onClick:se,disabled:k,className:`relative inline-flex h-7 w-14 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 ${B?"bg-green-500 focus:ring-green-500":"bg-gray-300 focus:ring-gray-500"} ${k?"opacity-50 cursor-wait":"cursor-pointer"}`,children:c.jsx("span",{className:`inline-block h-5 w-5 transform rounded-full bg-white shadow-md transition-transform ${B?"translate-x-8":"translate-x-1"}`})})]})]}),S&&c.jsx("div",{className:`mb-4 p-4 rounded-lg ${S.type==="success"?"bg-green-50 text-green-800 border border-green-200":S.type==="error"?"bg-red-50 text-red-800 border border-red-200":"bg-blue-50 text-blue-800 border border-blue-200"}`,children:S.message}),c.jsx("div",{className:"mb-6 border-b border-gray-200",children:c.jsxs("div",{className:"flex space-x-8",children:[c.jsxs("button",{onClick:()=>i("flows"),className:`pb-4 px-1 border-b-2 font-medium transition-colors ${a==="flows"?"border-green-500 text-green-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:["Mis Flujos (",s.length,")"]}),c.jsxs("button",{onClick:()=>i("templates"),className:`pb-4 px-1 border-b-2 font-medium transition-colors ${a==="templates"?"border-green-500 text-green-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:["Plantillas (",u.length,")"]}),c.jsxs("button",{onClick:()=>i("whatsapp"),className:`pb-4 px-1 border-b-2 font-medium transition-colors flex items-center gap-2 ${a==="whatsapp"?"border-green-500 text-green-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[c.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})}),"WhatsApp Templates"]})]})}),a==="flows"&&c.jsx("div",{children:s.length===0?c.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300",children:[c.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),c.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No tienes flujos creados"}),c.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Comienza creando un flujo desde una plantilla"}),c.jsx("div",{className:"mt-6",children:c.jsx("button",{onClick:()=>i("templates"),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:"Ver Plantillas"})})]}):c.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:c.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[c.jsx("thead",{className:"bg-gray-50",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nombre"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estado"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estadsticas"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ltima actualizacin"}),c.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),c.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.map(O=>c.jsxs("tr",{className:"hover:bg-gray-50",children:[c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:c.jsx("div",{className:"flex items-center",children:c.jsxs("div",{children:[c.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[O.name,O.is_default&&c.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800",children:"Por defecto"})]}),O.description&&c.jsx("div",{className:"text-sm text-gray-500",children:O.description})]})})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:c.jsx("button",{onClick:()=>Z(O),className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium cursor-pointer transition-colors ${O.is_active?"bg-green-100 text-green-800 hover:bg-green-200":"bg-gray-100 text-gray-800 hover:bg-gray-200"}`,children:O.is_active?"Activo":"Inactivo"})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:c.jsxs("div",{className:"flex flex-col space-y-1",children:[c.jsxs("span",{children:["Ejecutado: ",O.times_triggered||0," veces"]}),c.jsxs("span",{children:["Completado: ",O.times_completed||0," veces"]})]})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:O.updated_at?Dc(new Date(O.updated_at),"dd MMM yyyy, HH:mm",{locale:Nr}):"-"}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:c.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[c.jsx("button",{onClick:()=>t(`/flows/builder/${O.id}`),className:"text-blue-600 hover:text-blue-900",title:"Editar",children:c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),c.jsx("button",{onClick:()=>z(O),className:"text-gray-600 hover:text-gray-900",title:"Duplicar",children:c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})})}),c.jsx("button",{onClick:()=>D(O),className:"text-red-600 hover:text-red-900",title:"Eliminar",children:c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})})]},O.id))})]})})}),a==="templates"&&c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:u.map(O=>c.jsx("div",{className:"bg-white rounded-lg shadow-md hover:shadow-lg transition-shadow overflow-hidden border border-gray-200",children:c.jsxs("div",{className:"p-6",children:[c.jsxs("div",{className:"flex items-start justify-between mb-3",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:O.name}),c.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${V(O.category)}`,children:O.category})]}),c.jsx("p",{className:"text-sm text-gray-600 mb-4 line-clamp-2",children:O.description}),c.jsxs("div",{className:"flex items-center text-sm text-gray-500 mb-4",children:[c.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"})}),c.jsxs("span",{children:[O.nodes_count," nodos"]})]}),O.features&&O.features.length>0&&c.jsx("div",{className:"flex flex-wrap gap-1 mb-4",children:O.features.map(Q=>c.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-purple-50 text-purple-700 border border-purple-200",children:Q},Q))}),c.jsx("button",{onClick:()=>L(O.id,O.name),className:"w-full px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors font-medium",children:"Crear desde esta plantilla"})]})},O.id))}),a==="whatsapp"&&c.jsxs("div",{children:[c.jsxs("div",{className:"mb-6 flex flex-wrap gap-4 items-center",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Estado"}),c.jsxs("select",{value:y.status,onChange:O=>v({...y,status:O.target.value}),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-green-500 focus:border-green-500",children:[c.jsx("option",{value:"",children:"Todos"}),c.jsx("option",{value:"APPROVED",children:"Aprobadas"}),c.jsx("option",{value:"PENDING",children:"Pendientes"}),c.jsx("option",{value:"REJECTED",children:"Rechazadas"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Categora"}),c.jsxs("select",{value:y.category,onChange:O=>v({...y,category:O.target.value}),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-green-500 focus:border-green-500",children:[c.jsx("option",{value:"",children:"Todas"}),c.jsx("option",{value:"MARKETING",children:"Marketing"}),c.jsx("option",{value:"UTILITY",children:"Utilidad"}),c.jsx("option",{value:"AUTHENTICATION",children:"Autenticacin"})]})]}),c.jsx("div",{className:"flex-1"}),c.jsxs("div",{className:"text-sm text-gray-500",children:[m.length," plantillas encontradas"]})]}),p?c.jsxs("div",{className:"flex items-center justify-center py-12",children:[c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-green-500"}),c.jsx("span",{className:"ml-3 text-gray-600",children:"Cargando plantillas de Meta..."})]}):m.length===0?c.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300",children:[c.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),c.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No se encontraron plantillas"}),c.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Ajusta los filtros o crea plantillas en Meta Business Suite"})]}):c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:m.map((O,Q)=>{const U=O.components?.find(oe=>oe.type==="BODY")?.text||"",J={APPROVED:"bg-green-100 text-green-800",PENDING:"bg-yellow-100 text-yellow-800",REJECTED:"bg-red-100 text-red-800"},ne={MARKETING:"bg-blue-100 text-blue-800",UTILITY:"bg-purple-100 text-purple-800",AUTHENTICATION:"bg-pink-100 text-pink-800"};return c.jsx("div",{className:"bg-white rounded-lg shadow-md hover:shadow-lg transition-shadow overflow-hidden border border-gray-200",children:c.jsxs("div",{className:"p-5",children:[c.jsx("div",{className:"flex items-start justify-between mb-3",children:c.jsx("h3",{className:"text-base font-semibold text-gray-900 font-mono",children:O.name})}),c.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[c.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded text-xs font-medium ${J[O.status]||"bg-gray-100 text-gray-800"}`,children:O.status}),c.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded text-xs font-medium ${ne[O.category]||"bg-gray-100 text-gray-800"}`,children:O.category}),c.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-gray-100 text-gray-800",children:O.language})]}),c.jsx("div",{className:"bg-gray-50 rounded-lg p-3 mb-4 max-h-32 overflow-y-auto",children:c.jsx("p",{className:"text-sm text-gray-700 whitespace-pre-wrap",children:U.length>200?U.substring(0,200)+"...":U||"(Sin contenido)"})}),c.jsx("button",{onClick:()=>E(O),disabled:O.status!=="APPROVED",className:`w-full px-4 py-2 rounded-lg font-medium transition-colors ${O.status==="APPROVED"?"bg-green-600 text-white hover:bg-green-700":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:O.status==="APPROVED"?"Probar Plantilla":"No disponible"})]})},`${O.name}-${O.language}-${Q}`)})})]}),N&&c.jsx(l4,{template:N,onClose:()=>E(null)})]})}function lt(t){if(typeof t=="string"||typeof t=="number")return""+t;let a="";if(Array.isArray(t))for(let i=0,s;i<t.length;i++)(s=lt(t[i]))!==""&&(a+=(a&&" ")+s);else for(let i in t)t[i]&&(a+=(a&&" ")+i);return a}var u4={value:()=>{}};function Hc(){for(var t=0,a=arguments.length,i={},s;t<a;++t){if(!(s=arguments[t]+"")||s in i||/[\s.]/.test(s))throw new Error("illegal type: "+s);i[s]=[]}return new sc(i)}function sc(t){this._=t}function d4(t,a){return t.trim().split(/^|\s+/).map(function(i){var s="",l=i.indexOf(".");if(l>=0&&(s=i.slice(l+1),i=i.slice(0,l)),i&&!a.hasOwnProperty(i))throw new Error("unknown type: "+i);return{type:i,name:s}})}sc.prototype=Hc.prototype={constructor:sc,on:function(t,a){var i=this._,s=d4(t+"",i),l,u=-1,f=s.length;if(arguments.length<2){for(;++u<f;)if((l=(t=s[u]).type)&&(l=f4(i[l],t.name)))return l;return}if(a!=null&&typeof a!="function")throw new Error("invalid callback: "+a);for(;++u<f;)if(l=(t=s[u]).type)i[l]=uy(i[l],t.name,a);else if(a==null)for(l in i)i[l]=uy(i[l],t.name,null);return this},copy:function(){var t={},a=this._;for(var i in a)t[i]=a[i].slice();return new sc(t)},call:function(t,a){if((l=arguments.length-2)>0)for(var i=new Array(l),s=0,l,u;s<l;++s)i[s]=arguments[s+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(u=this._[t],s=0,l=u.length;s<l;++s)u[s].value.apply(a,i)},apply:function(t,a,i){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var s=this._[t],l=0,u=s.length;l<u;++l)s[l].value.apply(a,i)}};function f4(t,a){for(var i=0,s=t.length,l;i<s;++i)if((l=t[i]).name===a)return l.value}function uy(t,a,i){for(var s=0,l=t.length;s<l;++s)if(t[s].name===a){t[s]=u4,t=t.slice(0,s).concat(t.slice(s+1));break}return i!=null&&t.push({name:a,value:i}),t}var th="http://www.w3.org/1999/xhtml";const dy={svg:"http://www.w3.org/2000/svg",xhtml:th,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Lc(t){var a=t+="",i=a.indexOf(":");return i>=0&&(a=t.slice(0,i))!=="xmlns"&&(t=t.slice(i+1)),dy.hasOwnProperty(a)?{space:dy[a],local:t}:t}function h4(t){return function(){var a=this.ownerDocument,i=this.namespaceURI;return i===th&&a.documentElement.namespaceURI===th?a.createElement(t):a.createElementNS(i,t)}}function m4(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function pv(t){var a=Lc(t);return(a.local?m4:h4)(a)}function p4(){}function Rh(t){return t==null?p4:function(){return this.querySelector(t)}}function g4(t){typeof t!="function"&&(t=Rh(t));for(var a=this._groups,i=a.length,s=new Array(i),l=0;l<i;++l)for(var u=a[l],f=u.length,m=s[l]=new Array(f),g,p,x=0;x<f;++x)(g=u[x])&&(p=t.call(g,g.__data__,x,u))&&("__data__"in g&&(p.__data__=g.__data__),m[x]=p);return new Xt(s,this._parents)}function y4(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function x4(){return[]}function gv(t){return t==null?x4:function(){return this.querySelectorAll(t)}}function v4(t){return function(){return y4(t.apply(this,arguments))}}function b4(t){typeof t=="function"?t=v4(t):t=gv(t);for(var a=this._groups,i=a.length,s=[],l=[],u=0;u<i;++u)for(var f=a[u],m=f.length,g,p=0;p<m;++p)(g=f[p])&&(s.push(t.call(g,g.__data__,p,f)),l.push(g));return new Xt(s,l)}function yv(t){return function(){return this.matches(t)}}function xv(t){return function(a){return a.matches(t)}}var w4=Array.prototype.find;function S4(t){return function(){return w4.call(this.children,t)}}function N4(){return this.firstElementChild}function E4(t){return this.select(t==null?N4:S4(typeof t=="function"?t:xv(t)))}var j4=Array.prototype.filter;function _4(){return Array.from(this.children)}function C4(t){return function(){return j4.call(this.children,t)}}function T4(t){return this.selectAll(t==null?_4:C4(typeof t=="function"?t:xv(t)))}function M4(t){typeof t!="function"&&(t=yv(t));for(var a=this._groups,i=a.length,s=new Array(i),l=0;l<i;++l)for(var u=a[l],f=u.length,m=s[l]=[],g,p=0;p<f;++p)(g=u[p])&&t.call(g,g.__data__,p,u)&&m.push(g);return new Xt(s,this._parents)}function vv(t){return new Array(t.length)}function A4(){return new Xt(this._enter||this._groups.map(vv),this._parents)}function yc(t,a){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=a}yc.prototype={constructor:yc,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,a){return this._parent.insertBefore(t,a)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function R4(t){return function(){return t}}function z4(t,a,i,s,l,u){for(var f=0,m,g=a.length,p=u.length;f<p;++f)(m=a[f])?(m.__data__=u[f],s[f]=m):i[f]=new yc(t,u[f]);for(;f<g;++f)(m=a[f])&&(l[f]=m)}function D4(t,a,i,s,l,u,f){var m,g,p=new Map,x=a.length,y=u.length,v=new Array(x),N;for(m=0;m<x;++m)(g=a[m])&&(v[m]=N=f.call(g,g.__data__,m,a)+"",p.has(N)?l[m]=g:p.set(N,g));for(m=0;m<y;++m)N=f.call(t,u[m],m,u)+"",(g=p.get(N))?(s[m]=g,g.__data__=u[m],p.delete(N)):i[m]=new yc(t,u[m]);for(m=0;m<x;++m)(g=a[m])&&p.get(v[m])===g&&(l[m]=g)}function O4(t){return t.__data__}function k4(t,a){if(!arguments.length)return Array.from(this,O4);var i=a?D4:z4,s=this._parents,l=this._groups;typeof t!="function"&&(t=R4(t));for(var u=l.length,f=new Array(u),m=new Array(u),g=new Array(u),p=0;p<u;++p){var x=s[p],y=l[p],v=y.length,N=B4(t.call(x,x&&x.__data__,p,s)),E=N.length,A=m[p]=new Array(E),w=f[p]=new Array(E),j=g[p]=new Array(v);i(x,y,A,w,j,N,a);for(var _=0,S=0,M,B;_<E;++_)if(M=A[_]){for(_>=S&&(S=_+1);!(B=w[S])&&++S<E;);M._next=B||null}}return f=new Xt(f,s),f._enter=m,f._exit=g,f}function B4(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function H4(){return new Xt(this._exit||this._groups.map(vv),this._parents)}function L4(t,a,i){var s=this.enter(),l=this,u=this.exit();return typeof t=="function"?(s=t(s),s&&(s=s.selection())):s=s.append(t+""),a!=null&&(l=a(l),l&&(l=l.selection())),i==null?u.remove():i(u),s&&l?s.merge(l).order():l}function U4(t){for(var a=t.selection?t.selection():t,i=this._groups,s=a._groups,l=i.length,u=s.length,f=Math.min(l,u),m=new Array(l),g=0;g<f;++g)for(var p=i[g],x=s[g],y=p.length,v=m[g]=new Array(y),N,E=0;E<y;++E)(N=p[E]||x[E])&&(v[E]=N);for(;g<l;++g)m[g]=i[g];return new Xt(m,this._parents)}function $4(){for(var t=this._groups,a=-1,i=t.length;++a<i;)for(var s=t[a],l=s.length-1,u=s[l],f;--l>=0;)(f=s[l])&&(u&&f.compareDocumentPosition(u)^4&&u.parentNode.insertBefore(f,u),u=f);return this}function q4(t){t||(t=V4);function a(y,v){return y&&v?t(y.__data__,v.__data__):!y-!v}for(var i=this._groups,s=i.length,l=new Array(s),u=0;u<s;++u){for(var f=i[u],m=f.length,g=l[u]=new Array(m),p,x=0;x<m;++x)(p=f[x])&&(g[x]=p);g.sort(a)}return new Xt(l,this._parents).order()}function V4(t,a){return t<a?-1:t>a?1:t>=a?0:NaN}function Y4(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function X4(){return Array.from(this)}function G4(){for(var t=this._groups,a=0,i=t.length;a<i;++a)for(var s=t[a],l=0,u=s.length;l<u;++l){var f=s[l];if(f)return f}return null}function Z4(){let t=0;for(const a of this)++t;return t}function Q4(){return!this.node()}function P4(t){for(var a=this._groups,i=0,s=a.length;i<s;++i)for(var l=a[i],u=0,f=l.length,m;u<f;++u)(m=l[u])&&t.call(m,m.__data__,u,l);return this}function I4(t){return function(){this.removeAttribute(t)}}function F4(t){return function(){this.removeAttributeNS(t.space,t.local)}}function W4(t,a){return function(){this.setAttribute(t,a)}}function K4(t,a){return function(){this.setAttributeNS(t.space,t.local,a)}}function J4(t,a){return function(){var i=a.apply(this,arguments);i==null?this.removeAttribute(t):this.setAttribute(t,i)}}function e3(t,a){return function(){var i=a.apply(this,arguments);i==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,i)}}function t3(t,a){var i=Lc(t);if(arguments.length<2){var s=this.node();return i.local?s.getAttributeNS(i.space,i.local):s.getAttribute(i)}return this.each((a==null?i.local?F4:I4:typeof a=="function"?i.local?e3:J4:i.local?K4:W4)(i,a))}function bv(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function n3(t){return function(){this.style.removeProperty(t)}}function a3(t,a,i){return function(){this.style.setProperty(t,a,i)}}function i3(t,a,i){return function(){var s=a.apply(this,arguments);s==null?this.style.removeProperty(t):this.style.setProperty(t,s,i)}}function r3(t,a,i){return arguments.length>1?this.each((a==null?n3:typeof a=="function"?i3:a3)(t,a,i??"")):Er(this.node(),t)}function Er(t,a){return t.style.getPropertyValue(a)||bv(t).getComputedStyle(t,null).getPropertyValue(a)}function s3(t){return function(){delete this[t]}}function o3(t,a){return function(){this[t]=a}}function l3(t,a){return function(){var i=a.apply(this,arguments);i==null?delete this[t]:this[t]=i}}function c3(t,a){return arguments.length>1?this.each((a==null?s3:typeof a=="function"?l3:o3)(t,a)):this.node()[t]}function wv(t){return t.trim().split(/^|\s+/)}function zh(t){return t.classList||new Sv(t)}function Sv(t){this._node=t,this._names=wv(t.getAttribute("class")||"")}Sv.prototype={add:function(t){var a=this._names.indexOf(t);a<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var a=this._names.indexOf(t);a>=0&&(this._names.splice(a,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function Nv(t,a){for(var i=zh(t),s=-1,l=a.length;++s<l;)i.add(a[s])}function Ev(t,a){for(var i=zh(t),s=-1,l=a.length;++s<l;)i.remove(a[s])}function u3(t){return function(){Nv(this,t)}}function d3(t){return function(){Ev(this,t)}}function f3(t,a){return function(){(a.apply(this,arguments)?Nv:Ev)(this,t)}}function h3(t,a){var i=wv(t+"");if(arguments.length<2){for(var s=zh(this.node()),l=-1,u=i.length;++l<u;)if(!s.contains(i[l]))return!1;return!0}return this.each((typeof a=="function"?f3:a?u3:d3)(i,a))}function m3(){this.textContent=""}function p3(t){return function(){this.textContent=t}}function g3(t){return function(){var a=t.apply(this,arguments);this.textContent=a??""}}function y3(t){return arguments.length?this.each(t==null?m3:(typeof t=="function"?g3:p3)(t)):this.node().textContent}function x3(){this.innerHTML=""}function v3(t){return function(){this.innerHTML=t}}function b3(t){return function(){var a=t.apply(this,arguments);this.innerHTML=a??""}}function w3(t){return arguments.length?this.each(t==null?x3:(typeof t=="function"?b3:v3)(t)):this.node().innerHTML}function S3(){this.nextSibling&&this.parentNode.appendChild(this)}function N3(){return this.each(S3)}function E3(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function j3(){return this.each(E3)}function _3(t){var a=typeof t=="function"?t:pv(t);return this.select(function(){return this.appendChild(a.apply(this,arguments))})}function C3(){return null}function T3(t,a){var i=typeof t=="function"?t:pv(t),s=a==null?C3:typeof a=="function"?a:Rh(a);return this.select(function(){return this.insertBefore(i.apply(this,arguments),s.apply(this,arguments)||null)})}function M3(){var t=this.parentNode;t&&t.removeChild(this)}function A3(){return this.each(M3)}function R3(){var t=this.cloneNode(!1),a=this.parentNode;return a?a.insertBefore(t,this.nextSibling):t}function z3(){var t=this.cloneNode(!0),a=this.parentNode;return a?a.insertBefore(t,this.nextSibling):t}function D3(t){return this.select(t?z3:R3)}function O3(t){return arguments.length?this.property("__data__",t):this.node().__data__}function k3(t){return function(a){t.call(this,a,this.__data__)}}function B3(t){return t.trim().split(/^|\s+/).map(function(a){var i="",s=a.indexOf(".");return s>=0&&(i=a.slice(s+1),a=a.slice(0,s)),{type:a,name:i}})}function H3(t){return function(){var a=this.__on;if(a){for(var i=0,s=-1,l=a.length,u;i<l;++i)u=a[i],(!t.type||u.type===t.type)&&u.name===t.name?this.removeEventListener(u.type,u.listener,u.options):a[++s]=u;++s?a.length=s:delete this.__on}}}function L3(t,a,i){return function(){var s=this.__on,l,u=k3(a);if(s){for(var f=0,m=s.length;f<m;++f)if((l=s[f]).type===t.type&&l.name===t.name){this.removeEventListener(l.type,l.listener,l.options),this.addEventListener(l.type,l.listener=u,l.options=i),l.value=a;return}}this.addEventListener(t.type,u,i),l={type:t.type,name:t.name,value:a,listener:u,options:i},s?s.push(l):this.__on=[l]}}function U3(t,a,i){var s=B3(t+""),l,u=s.length,f;if(arguments.length<2){var m=this.node().__on;if(m){for(var g=0,p=m.length,x;g<p;++g)for(l=0,x=m[g];l<u;++l)if((f=s[l]).type===x.type&&f.name===x.name)return x.value}return}for(m=a?L3:H3,l=0;l<u;++l)this.each(m(s[l],a,i));return this}function jv(t,a,i){var s=bv(t),l=s.CustomEvent;typeof l=="function"?l=new l(a,i):(l=s.document.createEvent("Event"),i?(l.initEvent(a,i.bubbles,i.cancelable),l.detail=i.detail):l.initEvent(a,!1,!1)),t.dispatchEvent(l)}function $3(t,a){return function(){return jv(this,t,a)}}function q3(t,a){return function(){return jv(this,t,a.apply(this,arguments))}}function V3(t,a){return this.each((typeof a=="function"?q3:$3)(t,a))}function*Y3(){for(var t=this._groups,a=0,i=t.length;a<i;++a)for(var s=t[a],l=0,u=s.length,f;l<u;++l)(f=s[l])&&(yield f)}var _v=[null];function Xt(t,a){this._groups=t,this._parents=a}function ro(){return new Xt([[document.documentElement]],_v)}function X3(){return this}Xt.prototype=ro.prototype={constructor:Xt,select:g4,selectAll:b4,selectChild:E4,selectChildren:T4,filter:M4,data:k4,enter:A4,exit:H4,join:L4,merge:U4,selection:X3,order:$4,sort:q4,call:Y4,nodes:X4,node:G4,size:Z4,empty:Q4,each:P4,attr:t3,style:r3,property:c3,classed:h3,text:y3,html:w3,raise:N3,lower:j3,append:_3,insert:T3,remove:A3,clone:D3,datum:O3,on:U3,dispatch:V3,[Symbol.iterator]:Y3};function Vt(t){return typeof t=="string"?new Xt([[document.querySelector(t)]],[document.documentElement]):new Xt([[t]],_v)}function G3(t){let a;for(;a=t.sourceEvent;)t=a;return t}function un(t,a){if(t=G3(t),a===void 0&&(a=t.currentTarget),a){var i=a.ownerSVGElement||a;if(i.createSVGPoint){var s=i.createSVGPoint();return s.x=t.clientX,s.y=t.clientY,s=s.matrixTransform(a.getScreenCTM().inverse()),[s.x,s.y]}if(a.getBoundingClientRect){var l=a.getBoundingClientRect();return[t.clientX-l.left-a.clientLeft,t.clientY-l.top-a.clientTop]}}return[t.pageX,t.pageY]}const Z3={passive:!1},Gs={capture:!0,passive:!1};function Cf(t){t.stopImmediatePropagation()}function br(t){t.preventDefault(),t.stopImmediatePropagation()}function Cv(t){var a=t.document.documentElement,i=Vt(t).on("dragstart.drag",br,Gs);"onselectstart"in a?i.on("selectstart.drag",br,Gs):(a.__noselect=a.style.MozUserSelect,a.style.MozUserSelect="none")}function Tv(t,a){var i=t.document.documentElement,s=Vt(t).on("dragstart.drag",null);a&&(s.on("click.drag",br,Gs),setTimeout(function(){s.on("click.drag",null)},0)),"onselectstart"in i?s.on("selectstart.drag",null):(i.style.MozUserSelect=i.__noselect,delete i.__noselect)}const Vl=t=>()=>t;function nh(t,{sourceEvent:a,subject:i,target:s,identifier:l,active:u,x:f,y:m,dx:g,dy:p,dispatch:x}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:a,enumerable:!0,configurable:!0},subject:{value:i,enumerable:!0,configurable:!0},target:{value:s,enumerable:!0,configurable:!0},identifier:{value:l,enumerable:!0,configurable:!0},active:{value:u,enumerable:!0,configurable:!0},x:{value:f,enumerable:!0,configurable:!0},y:{value:m,enumerable:!0,configurable:!0},dx:{value:g,enumerable:!0,configurable:!0},dy:{value:p,enumerable:!0,configurable:!0},_:{value:x}})}nh.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function Q3(t){return!t.ctrlKey&&!t.button}function P3(){return this.parentNode}function I3(t,a){return a??{x:t.x,y:t.y}}function F3(){return navigator.maxTouchPoints||"ontouchstart"in this}function Mv(){var t=Q3,a=P3,i=I3,s=F3,l={},u=Hc("start","drag","end"),f=0,m,g,p,x,y=0;function v(M){M.on("mousedown.drag",N).filter(s).on("touchstart.drag",w).on("touchmove.drag",j,Z3).on("touchend.drag touchcancel.drag",_).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function N(M,B){if(!(x||!t.call(this,M,B))){var $=S(this,a.call(this,M,B),M,B,"mouse");$&&(Vt(M.view).on("mousemove.drag",E,Gs).on("mouseup.drag",A,Gs),Cv(M.view),Cf(M),p=!1,m=M.clientX,g=M.clientY,$("start",M))}}function E(M){if(br(M),!p){var B=M.clientX-m,$=M.clientY-g;p=B*B+$*$>y}l.mouse("drag",M)}function A(M){Vt(M.view).on("mousemove.drag mouseup.drag",null),Tv(M.view,p),br(M),l.mouse("end",M)}function w(M,B){if(t.call(this,M,B)){var $=M.changedTouches,k=a.call(this,M,B),X=$.length,F,se;for(F=0;F<X;++F)(se=S(this,k,M,B,$[F].identifier,$[F]))&&(Cf(M),se("start",M,$[F]))}}function j(M){var B=M.changedTouches,$=B.length,k,X;for(k=0;k<$;++k)(X=l[B[k].identifier])&&(br(M),X("drag",M,B[k]))}function _(M){var B=M.changedTouches,$=B.length,k,X;for(x&&clearTimeout(x),x=setTimeout(function(){x=null},500),k=0;k<$;++k)(X=l[B[k].identifier])&&(Cf(M),X("end",M,B[k]))}function S(M,B,$,k,X,F){var se=u.copy(),P=un(F||$,B),H,te,L;if((L=i.call(M,new nh("beforestart",{sourceEvent:$,target:v,identifier:X,active:f,x:P[0],y:P[1],dx:0,dy:0,dispatch:se}),k))!=null)return H=L.x-P[0]||0,te=L.y-P[1]||0,function Z(z,D,V){var O=P,Q;switch(z){case"start":l[X]=Z,Q=f++;break;case"end":delete l[X],--f;case"drag":P=un(V||D,B),Q=f;break}se.call(z,M,new nh(z,{sourceEvent:D,subject:L,target:v,identifier:X,active:Q,x:P[0]+H,y:P[1]+te,dx:P[0]-O[0],dy:P[1]-O[1],dispatch:se}),k)}}return v.filter=function(M){return arguments.length?(t=typeof M=="function"?M:Vl(!!M),v):t},v.container=function(M){return arguments.length?(a=typeof M=="function"?M:Vl(M),v):a},v.subject=function(M){return arguments.length?(i=typeof M=="function"?M:Vl(M),v):i},v.touchable=function(M){return arguments.length?(s=typeof M=="function"?M:Vl(!!M),v):s},v.on=function(){var M=u.on.apply(u,arguments);return M===u?v:M},v.clickDistance=function(M){return arguments.length?(y=(M=+M)*M,v):Math.sqrt(y)},v}function Dh(t,a,i){t.prototype=a.prototype=i,i.constructor=t}function Av(t,a){var i=Object.create(t.prototype);for(var s in a)i[s]=a[s];return i}function so(){}var Zs=.7,xc=1/Zs,wr="\\s*([+-]?\\d+)\\s*",Qs="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",jn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",W3=/^#([0-9a-f]{3,8})$/,K3=new RegExp(`^rgb\\(${wr},${wr},${wr}\\)$`),J3=new RegExp(`^rgb\\(${jn},${jn},${jn}\\)$`),e5=new RegExp(`^rgba\\(${wr},${wr},${wr},${Qs}\\)$`),t5=new RegExp(`^rgba\\(${jn},${jn},${jn},${Qs}\\)$`),n5=new RegExp(`^hsl\\(${Qs},${jn},${jn}\\)$`),a5=new RegExp(`^hsla\\(${Qs},${jn},${jn},${Qs}\\)$`),fy={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Dh(so,wi,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:hy,formatHex:hy,formatHex8:i5,formatHsl:r5,formatRgb:my,toString:my});function hy(){return this.rgb().formatHex()}function i5(){return this.rgb().formatHex8()}function r5(){return Rv(this).formatHsl()}function my(){return this.rgb().formatRgb()}function wi(t){var a,i;return t=(t+"").trim().toLowerCase(),(a=W3.exec(t))?(i=a[1].length,a=parseInt(a[1],16),i===6?py(a):i===3?new Dt(a>>8&15|a>>4&240,a>>4&15|a&240,(a&15)<<4|a&15,1):i===8?Yl(a>>24&255,a>>16&255,a>>8&255,(a&255)/255):i===4?Yl(a>>12&15|a>>8&240,a>>8&15|a>>4&240,a>>4&15|a&240,((a&15)<<4|a&15)/255):null):(a=K3.exec(t))?new Dt(a[1],a[2],a[3],1):(a=J3.exec(t))?new Dt(a[1]*255/100,a[2]*255/100,a[3]*255/100,1):(a=e5.exec(t))?Yl(a[1],a[2],a[3],a[4]):(a=t5.exec(t))?Yl(a[1]*255/100,a[2]*255/100,a[3]*255/100,a[4]):(a=n5.exec(t))?xy(a[1],a[2]/100,a[3]/100,1):(a=a5.exec(t))?xy(a[1],a[2]/100,a[3]/100,a[4]):fy.hasOwnProperty(t)?py(fy[t]):t==="transparent"?new Dt(NaN,NaN,NaN,0):null}function py(t){return new Dt(t>>16&255,t>>8&255,t&255,1)}function Yl(t,a,i,s){return s<=0&&(t=a=i=NaN),new Dt(t,a,i,s)}function s5(t){return t instanceof so||(t=wi(t)),t?(t=t.rgb(),new Dt(t.r,t.g,t.b,t.opacity)):new Dt}function ah(t,a,i,s){return arguments.length===1?s5(t):new Dt(t,a,i,s??1)}function Dt(t,a,i,s){this.r=+t,this.g=+a,this.b=+i,this.opacity=+s}Dh(Dt,ah,Av(so,{brighter(t){return t=t==null?xc:Math.pow(xc,t),new Dt(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Zs:Math.pow(Zs,t),new Dt(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Dt(vi(this.r),vi(this.g),vi(this.b),vc(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:gy,formatHex:gy,formatHex8:o5,formatRgb:yy,toString:yy}));function gy(){return`#${yi(this.r)}${yi(this.g)}${yi(this.b)}`}function o5(){return`#${yi(this.r)}${yi(this.g)}${yi(this.b)}${yi((isNaN(this.opacity)?1:this.opacity)*255)}`}function yy(){const t=vc(this.opacity);return`${t===1?"rgb(":"rgba("}${vi(this.r)}, ${vi(this.g)}, ${vi(this.b)}${t===1?")":`, ${t})`}`}function vc(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function vi(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function yi(t){return t=vi(t),(t<16?"0":"")+t.toString(16)}function xy(t,a,i,s){return s<=0?t=a=i=NaN:i<=0||i>=1?t=a=NaN:a<=0&&(t=NaN),new dn(t,a,i,s)}function Rv(t){if(t instanceof dn)return new dn(t.h,t.s,t.l,t.opacity);if(t instanceof so||(t=wi(t)),!t)return new dn;if(t instanceof dn)return t;t=t.rgb();var a=t.r/255,i=t.g/255,s=t.b/255,l=Math.min(a,i,s),u=Math.max(a,i,s),f=NaN,m=u-l,g=(u+l)/2;return m?(a===u?f=(i-s)/m+(i<s)*6:i===u?f=(s-a)/m+2:f=(a-i)/m+4,m/=g<.5?u+l:2-u-l,f*=60):m=g>0&&g<1?0:f,new dn(f,m,g,t.opacity)}function l5(t,a,i,s){return arguments.length===1?Rv(t):new dn(t,a,i,s??1)}function dn(t,a,i,s){this.h=+t,this.s=+a,this.l=+i,this.opacity=+s}Dh(dn,l5,Av(so,{brighter(t){return t=t==null?xc:Math.pow(xc,t),new dn(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Zs:Math.pow(Zs,t),new dn(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,a=isNaN(t)||isNaN(this.s)?0:this.s,i=this.l,s=i+(i<.5?i:1-i)*a,l=2*i-s;return new Dt(Tf(t>=240?t-240:t+120,l,s),Tf(t,l,s),Tf(t<120?t+240:t-120,l,s),this.opacity)},clamp(){return new dn(vy(this.h),Xl(this.s),Xl(this.l),vc(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=vc(this.opacity);return`${t===1?"hsl(":"hsla("}${vy(this.h)}, ${Xl(this.s)*100}%, ${Xl(this.l)*100}%${t===1?")":`, ${t})`}`}}));function vy(t){return t=(t||0)%360,t<0?t+360:t}function Xl(t){return Math.max(0,Math.min(1,t||0))}function Tf(t,a,i){return(t<60?a+(i-a)*t/60:t<180?i:t<240?a+(i-a)*(240-t)/60:a)*255}const Oh=t=>()=>t;function c5(t,a){return function(i){return t+i*a}}function u5(t,a,i){return t=Math.pow(t,i),a=Math.pow(a,i)-t,i=1/i,function(s){return Math.pow(t+s*a,i)}}function d5(t){return(t=+t)==1?zv:function(a,i){return i-a?u5(a,i,t):Oh(isNaN(a)?i:a)}}function zv(t,a){var i=a-t;return i?c5(t,i):Oh(isNaN(t)?a:t)}const bc=(function t(a){var i=d5(a);function s(l,u){var f=i((l=ah(l)).r,(u=ah(u)).r),m=i(l.g,u.g),g=i(l.b,u.b),p=zv(l.opacity,u.opacity);return function(x){return l.r=f(x),l.g=m(x),l.b=g(x),l.opacity=p(x),l+""}}return s.gamma=t,s})(1);function f5(t,a){a||(a=[]);var i=t?Math.min(a.length,t.length):0,s=a.slice(),l;return function(u){for(l=0;l<i;++l)s[l]=t[l]*(1-u)+a[l]*u;return s}}function h5(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function m5(t,a){var i=a?a.length:0,s=t?Math.min(i,t.length):0,l=new Array(s),u=new Array(i),f;for(f=0;f<s;++f)l[f]=qs(t[f],a[f]);for(;f<i;++f)u[f]=a[f];return function(m){for(f=0;f<s;++f)u[f]=l[f](m);return u}}function p5(t,a){var i=new Date;return t=+t,a=+a,function(s){return i.setTime(t*(1-s)+a*s),i}}function wn(t,a){return t=+t,a=+a,function(i){return t*(1-i)+a*i}}function g5(t,a){var i={},s={},l;(t===null||typeof t!="object")&&(t={}),(a===null||typeof a!="object")&&(a={});for(l in a)l in t?i[l]=qs(t[l],a[l]):s[l]=a[l];return function(u){for(l in i)s[l]=i[l](u);return s}}var ih=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Mf=new RegExp(ih.source,"g");function y5(t){return function(){return t}}function x5(t){return function(a){return t(a)+""}}function Dv(t,a){var i=ih.lastIndex=Mf.lastIndex=0,s,l,u,f=-1,m=[],g=[];for(t=t+"",a=a+"";(s=ih.exec(t))&&(l=Mf.exec(a));)(u=l.index)>i&&(u=a.slice(i,u),m[f]?m[f]+=u:m[++f]=u),(s=s[0])===(l=l[0])?m[f]?m[f]+=l:m[++f]=l:(m[++f]=null,g.push({i:f,x:wn(s,l)})),i=Mf.lastIndex;return i<a.length&&(u=a.slice(i),m[f]?m[f]+=u:m[++f]=u),m.length<2?g[0]?x5(g[0].x):y5(a):(a=g.length,function(p){for(var x=0,y;x<a;++x)m[(y=g[x]).i]=y.x(p);return m.join("")})}function qs(t,a){var i=typeof a,s;return a==null||i==="boolean"?Oh(a):(i==="number"?wn:i==="string"?(s=wi(a))?(a=s,bc):Dv:a instanceof wi?bc:a instanceof Date?p5:h5(a)?f5:Array.isArray(a)?m5:typeof a.valueOf!="function"&&typeof a.toString!="function"||isNaN(a)?g5:wn)(t,a)}var by=180/Math.PI,rh={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Ov(t,a,i,s,l,u){var f,m,g;return(f=Math.sqrt(t*t+a*a))&&(t/=f,a/=f),(g=t*i+a*s)&&(i-=t*g,s-=a*g),(m=Math.sqrt(i*i+s*s))&&(i/=m,s/=m,g/=m),t*s<a*i&&(t=-t,a=-a,g=-g,f=-f),{translateX:l,translateY:u,rotate:Math.atan2(a,t)*by,skewX:Math.atan(g)*by,scaleX:f,scaleY:m}}var Gl;function v5(t){const a=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return a.isIdentity?rh:Ov(a.a,a.b,a.c,a.d,a.e,a.f)}function b5(t){return t==null||(Gl||(Gl=document.createElementNS("http://www.w3.org/2000/svg","g")),Gl.setAttribute("transform",t),!(t=Gl.transform.baseVal.consolidate()))?rh:(t=t.matrix,Ov(t.a,t.b,t.c,t.d,t.e,t.f))}function kv(t,a,i,s){function l(p){return p.length?p.pop()+" ":""}function u(p,x,y,v,N,E){if(p!==y||x!==v){var A=N.push("translate(",null,a,null,i);E.push({i:A-4,x:wn(p,y)},{i:A-2,x:wn(x,v)})}else(y||v)&&N.push("translate("+y+a+v+i)}function f(p,x,y,v){p!==x?(p-x>180?x+=360:x-p>180&&(p+=360),v.push({i:y.push(l(y)+"rotate(",null,s)-2,x:wn(p,x)})):x&&y.push(l(y)+"rotate("+x+s)}function m(p,x,y,v){p!==x?v.push({i:y.push(l(y)+"skewX(",null,s)-2,x:wn(p,x)}):x&&y.push(l(y)+"skewX("+x+s)}function g(p,x,y,v,N,E){if(p!==y||x!==v){var A=N.push(l(N)+"scale(",null,",",null,")");E.push({i:A-4,x:wn(p,y)},{i:A-2,x:wn(x,v)})}else(y!==1||v!==1)&&N.push(l(N)+"scale("+y+","+v+")")}return function(p,x){var y=[],v=[];return p=t(p),x=t(x),u(p.translateX,p.translateY,x.translateX,x.translateY,y,v),f(p.rotate,x.rotate,y,v),m(p.skewX,x.skewX,y,v),g(p.scaleX,p.scaleY,x.scaleX,x.scaleY,y,v),p=x=null,function(N){for(var E=-1,A=v.length,w;++E<A;)y[(w=v[E]).i]=w.x(N);return y.join("")}}}var w5=kv(v5,"px, ","px)","deg)"),S5=kv(b5,", ",")",")"),N5=1e-12;function wy(t){return((t=Math.exp(t))+1/t)/2}function E5(t){return((t=Math.exp(t))-1/t)/2}function j5(t){return((t=Math.exp(2*t))-1)/(t+1)}const oc=(function t(a,i,s){function l(u,f){var m=u[0],g=u[1],p=u[2],x=f[0],y=f[1],v=f[2],N=x-m,E=y-g,A=N*N+E*E,w,j;if(A<N5)j=Math.log(v/p)/a,w=function(k){return[m+k*N,g+k*E,p*Math.exp(a*k*j)]};else{var _=Math.sqrt(A),S=(v*v-p*p+s*A)/(2*p*i*_),M=(v*v-p*p-s*A)/(2*v*i*_),B=Math.log(Math.sqrt(S*S+1)-S),$=Math.log(Math.sqrt(M*M+1)-M);j=($-B)/a,w=function(k){var X=k*j,F=wy(B),se=p/(i*_)*(F*j5(a*X+B)-E5(B));return[m+se*N,g+se*E,p*F/wy(a*X+B)]}}return w.duration=j*1e3*a/Math.SQRT2,w}return l.rho=function(u){var f=Math.max(.001,+u),m=f*f,g=m*m;return t(f,m,g)},l})(Math.SQRT2,2,4);var jr=0,Us=0,ks=0,Bv=1e3,wc,$s,Sc=0,Si=0,Uc=0,Ps=typeof performance=="object"&&performance.now?performance:Date,Hv=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function kh(){return Si||(Hv(_5),Si=Ps.now()+Uc)}function _5(){Si=0}function Nc(){this._call=this._time=this._next=null}Nc.prototype=Lv.prototype={constructor:Nc,restart:function(t,a,i){if(typeof t!="function")throw new TypeError("callback is not a function");i=(i==null?kh():+i)+(a==null?0:+a),!this._next&&$s!==this&&($s?$s._next=this:wc=this,$s=this),this._call=t,this._time=i,sh()},stop:function(){this._call&&(this._call=null,this._time=1/0,sh())}};function Lv(t,a,i){var s=new Nc;return s.restart(t,a,i),s}function C5(){kh(),++jr;for(var t=wc,a;t;)(a=Si-t._time)>=0&&t._call.call(void 0,a),t=t._next;--jr}function Sy(){Si=(Sc=Ps.now())+Uc,jr=Us=0;try{C5()}finally{jr=0,M5(),Si=0}}function T5(){var t=Ps.now(),a=t-Sc;a>Bv&&(Uc-=a,Sc=t)}function M5(){for(var t,a=wc,i,s=1/0;a;)a._call?(s>a._time&&(s=a._time),t=a,a=a._next):(i=a._next,a._next=null,a=t?t._next=i:wc=i);$s=t,sh(s)}function sh(t){if(!jr){Us&&(Us=clearTimeout(Us));var a=t-Si;a>24?(t<1/0&&(Us=setTimeout(Sy,t-Ps.now()-Uc)),ks&&(ks=clearInterval(ks))):(ks||(Sc=Ps.now(),ks=setInterval(T5,Bv)),jr=1,Hv(Sy))}}function Ny(t,a,i){var s=new Nc;return a=a==null?0:+a,s.restart(l=>{s.stop(),t(l+a)},a,i),s}var A5=Hc("start","end","cancel","interrupt"),R5=[],Uv=0,Ey=1,oh=2,lc=3,jy=4,lh=5,cc=6;function $c(t,a,i,s,l,u){var f=t.__transition;if(!f)t.__transition={};else if(i in f)return;z5(t,i,{name:a,index:s,group:l,on:A5,tween:R5,time:u.time,delay:u.delay,duration:u.duration,ease:u.ease,timer:null,state:Uv})}function Bh(t,a){var i=mn(t,a);if(i.state>Uv)throw new Error("too late; already scheduled");return i}function Tn(t,a){var i=mn(t,a);if(i.state>lc)throw new Error("too late; already running");return i}function mn(t,a){var i=t.__transition;if(!i||!(i=i[a]))throw new Error("transition not found");return i}function z5(t,a,i){var s=t.__transition,l;s[a]=i,i.timer=Lv(u,0,i.time);function u(p){i.state=Ey,i.timer.restart(f,i.delay,i.time),i.delay<=p&&f(p-i.delay)}function f(p){var x,y,v,N;if(i.state!==Ey)return g();for(x in s)if(N=s[x],N.name===i.name){if(N.state===lc)return Ny(f);N.state===jy?(N.state=cc,N.timer.stop(),N.on.call("interrupt",t,t.__data__,N.index,N.group),delete s[x]):+x<a&&(N.state=cc,N.timer.stop(),N.on.call("cancel",t,t.__data__,N.index,N.group),delete s[x])}if(Ny(function(){i.state===lc&&(i.state=jy,i.timer.restart(m,i.delay,i.time),m(p))}),i.state=oh,i.on.call("start",t,t.__data__,i.index,i.group),i.state===oh){for(i.state=lc,l=new Array(v=i.tween.length),x=0,y=-1;x<v;++x)(N=i.tween[x].value.call(t,t.__data__,i.index,i.group))&&(l[++y]=N);l.length=y+1}}function m(p){for(var x=p<i.duration?i.ease.call(null,p/i.duration):(i.timer.restart(g),i.state=lh,1),y=-1,v=l.length;++y<v;)l[y].call(t,x);i.state===lh&&(i.on.call("end",t,t.__data__,i.index,i.group),g())}function g(){i.state=cc,i.timer.stop(),delete s[a];for(var p in s)return;delete t.__transition}}function uc(t,a){var i=t.__transition,s,l,u=!0,f;if(i){a=a==null?null:a+"";for(f in i){if((s=i[f]).name!==a){u=!1;continue}l=s.state>oh&&s.state<lh,s.state=cc,s.timer.stop(),s.on.call(l?"interrupt":"cancel",t,t.__data__,s.index,s.group),delete i[f]}u&&delete t.__transition}}function D5(t){return this.each(function(){uc(this,t)})}function O5(t,a){var i,s;return function(){var l=Tn(this,t),u=l.tween;if(u!==i){s=i=u;for(var f=0,m=s.length;f<m;++f)if(s[f].name===a){s=s.slice(),s.splice(f,1);break}}l.tween=s}}function k5(t,a,i){var s,l;if(typeof i!="function")throw new Error;return function(){var u=Tn(this,t),f=u.tween;if(f!==s){l=(s=f).slice();for(var m={name:a,value:i},g=0,p=l.length;g<p;++g)if(l[g].name===a){l[g]=m;break}g===p&&l.push(m)}u.tween=l}}function B5(t,a){var i=this._id;if(t+="",arguments.length<2){for(var s=mn(this.node(),i).tween,l=0,u=s.length,f;l<u;++l)if((f=s[l]).name===t)return f.value;return null}return this.each((a==null?O5:k5)(i,t,a))}function Hh(t,a,i){var s=t._id;return t.each(function(){var l=Tn(this,s);(l.value||(l.value={}))[a]=i.apply(this,arguments)}),function(l){return mn(l,s).value[a]}}function $v(t,a){var i;return(typeof a=="number"?wn:a instanceof wi?bc:(i=wi(a))?(a=i,bc):Dv)(t,a)}function H5(t){return function(){this.removeAttribute(t)}}function L5(t){return function(){this.removeAttributeNS(t.space,t.local)}}function U5(t,a,i){var s,l=i+"",u;return function(){var f=this.getAttribute(t);return f===l?null:f===s?u:u=a(s=f,i)}}function $5(t,a,i){var s,l=i+"",u;return function(){var f=this.getAttributeNS(t.space,t.local);return f===l?null:f===s?u:u=a(s=f,i)}}function q5(t,a,i){var s,l,u;return function(){var f,m=i(this),g;return m==null?void this.removeAttribute(t):(f=this.getAttribute(t),g=m+"",f===g?null:f===s&&g===l?u:(l=g,u=a(s=f,m)))}}function V5(t,a,i){var s,l,u;return function(){var f,m=i(this),g;return m==null?void this.removeAttributeNS(t.space,t.local):(f=this.getAttributeNS(t.space,t.local),g=m+"",f===g?null:f===s&&g===l?u:(l=g,u=a(s=f,m)))}}function Y5(t,a){var i=Lc(t),s=i==="transform"?S5:$v;return this.attrTween(t,typeof a=="function"?(i.local?V5:q5)(i,s,Hh(this,"attr."+t,a)):a==null?(i.local?L5:H5)(i):(i.local?$5:U5)(i,s,a))}function X5(t,a){return function(i){this.setAttribute(t,a.call(this,i))}}function G5(t,a){return function(i){this.setAttributeNS(t.space,t.local,a.call(this,i))}}function Z5(t,a){var i,s;function l(){var u=a.apply(this,arguments);return u!==s&&(i=(s=u)&&G5(t,u)),i}return l._value=a,l}function Q5(t,a){var i,s;function l(){var u=a.apply(this,arguments);return u!==s&&(i=(s=u)&&X5(t,u)),i}return l._value=a,l}function P5(t,a){var i="attr."+t;if(arguments.length<2)return(i=this.tween(i))&&i._value;if(a==null)return this.tween(i,null);if(typeof a!="function")throw new Error;var s=Lc(t);return this.tween(i,(s.local?Z5:Q5)(s,a))}function I5(t,a){return function(){Bh(this,t).delay=+a.apply(this,arguments)}}function F5(t,a){return a=+a,function(){Bh(this,t).delay=a}}function W5(t){var a=this._id;return arguments.length?this.each((typeof t=="function"?I5:F5)(a,t)):mn(this.node(),a).delay}function K5(t,a){return function(){Tn(this,t).duration=+a.apply(this,arguments)}}function J5(t,a){return a=+a,function(){Tn(this,t).duration=a}}function eC(t){var a=this._id;return arguments.length?this.each((typeof t=="function"?K5:J5)(a,t)):mn(this.node(),a).duration}function tC(t,a){if(typeof a!="function")throw new Error;return function(){Tn(this,t).ease=a}}function nC(t){var a=this._id;return arguments.length?this.each(tC(a,t)):mn(this.node(),a).ease}function aC(t,a){return function(){var i=a.apply(this,arguments);if(typeof i!="function")throw new Error;Tn(this,t).ease=i}}function iC(t){if(typeof t!="function")throw new Error;return this.each(aC(this._id,t))}function rC(t){typeof t!="function"&&(t=yv(t));for(var a=this._groups,i=a.length,s=new Array(i),l=0;l<i;++l)for(var u=a[l],f=u.length,m=s[l]=[],g,p=0;p<f;++p)(g=u[p])&&t.call(g,g.__data__,p,u)&&m.push(g);return new aa(s,this._parents,this._name,this._id)}function sC(t){if(t._id!==this._id)throw new Error;for(var a=this._groups,i=t._groups,s=a.length,l=i.length,u=Math.min(s,l),f=new Array(s),m=0;m<u;++m)for(var g=a[m],p=i[m],x=g.length,y=f[m]=new Array(x),v,N=0;N<x;++N)(v=g[N]||p[N])&&(y[N]=v);for(;m<s;++m)f[m]=a[m];return new aa(f,this._parents,this._name,this._id)}function oC(t){return(t+"").trim().split(/^|\s+/).every(function(a){var i=a.indexOf(".");return i>=0&&(a=a.slice(0,i)),!a||a==="start"})}function lC(t,a,i){var s,l,u=oC(a)?Bh:Tn;return function(){var f=u(this,t),m=f.on;m!==s&&(l=(s=m).copy()).on(a,i),f.on=l}}function cC(t,a){var i=this._id;return arguments.length<2?mn(this.node(),i).on.on(t):this.each(lC(i,t,a))}function uC(t){return function(){var a=this.parentNode;for(var i in this.__transition)if(+i!==t)return;a&&a.removeChild(this)}}function dC(){return this.on("end.remove",uC(this._id))}function fC(t){var a=this._name,i=this._id;typeof t!="function"&&(t=Rh(t));for(var s=this._groups,l=s.length,u=new Array(l),f=0;f<l;++f)for(var m=s[f],g=m.length,p=u[f]=new Array(g),x,y,v=0;v<g;++v)(x=m[v])&&(y=t.call(x,x.__data__,v,m))&&("__data__"in x&&(y.__data__=x.__data__),p[v]=y,$c(p[v],a,i,v,p,mn(x,i)));return new aa(u,this._parents,a,i)}function hC(t){var a=this._name,i=this._id;typeof t!="function"&&(t=gv(t));for(var s=this._groups,l=s.length,u=[],f=[],m=0;m<l;++m)for(var g=s[m],p=g.length,x,y=0;y<p;++y)if(x=g[y]){for(var v=t.call(x,x.__data__,y,g),N,E=mn(x,i),A=0,w=v.length;A<w;++A)(N=v[A])&&$c(N,a,i,A,v,E);u.push(v),f.push(x)}return new aa(u,f,a,i)}var mC=ro.prototype.constructor;function pC(){return new mC(this._groups,this._parents)}function gC(t,a){var i,s,l;return function(){var u=Er(this,t),f=(this.style.removeProperty(t),Er(this,t));return u===f?null:u===i&&f===s?l:l=a(i=u,s=f)}}function qv(t){return function(){this.style.removeProperty(t)}}function yC(t,a,i){var s,l=i+"",u;return function(){var f=Er(this,t);return f===l?null:f===s?u:u=a(s=f,i)}}function xC(t,a,i){var s,l,u;return function(){var f=Er(this,t),m=i(this),g=m+"";return m==null&&(g=m=(this.style.removeProperty(t),Er(this,t))),f===g?null:f===s&&g===l?u:(l=g,u=a(s=f,m))}}function vC(t,a){var i,s,l,u="style."+a,f="end."+u,m;return function(){var g=Tn(this,t),p=g.on,x=g.value[u]==null?m||(m=qv(a)):void 0;(p!==i||l!==x)&&(s=(i=p).copy()).on(f,l=x),g.on=s}}function bC(t,a,i){var s=(t+="")=="transform"?w5:$v;return a==null?this.styleTween(t,gC(t,s)).on("end.style."+t,qv(t)):typeof a=="function"?this.styleTween(t,xC(t,s,Hh(this,"style."+t,a))).each(vC(this._id,t)):this.styleTween(t,yC(t,s,a),i).on("end.style."+t,null)}function wC(t,a,i){return function(s){this.style.setProperty(t,a.call(this,s),i)}}function SC(t,a,i){var s,l;function u(){var f=a.apply(this,arguments);return f!==l&&(s=(l=f)&&wC(t,f,i)),s}return u._value=a,u}function NC(t,a,i){var s="style."+(t+="");if(arguments.length<2)return(s=this.tween(s))&&s._value;if(a==null)return this.tween(s,null);if(typeof a!="function")throw new Error;return this.tween(s,SC(t,a,i??""))}function EC(t){return function(){this.textContent=t}}function jC(t){return function(){var a=t(this);this.textContent=a??""}}function _C(t){return this.tween("text",typeof t=="function"?jC(Hh(this,"text",t)):EC(t==null?"":t+""))}function CC(t){return function(a){this.textContent=t.call(this,a)}}function TC(t){var a,i;function s(){var l=t.apply(this,arguments);return l!==i&&(a=(i=l)&&CC(l)),a}return s._value=t,s}function MC(t){var a="text";if(arguments.length<1)return(a=this.tween(a))&&a._value;if(t==null)return this.tween(a,null);if(typeof t!="function")throw new Error;return this.tween(a,TC(t))}function AC(){for(var t=this._name,a=this._id,i=Vv(),s=this._groups,l=s.length,u=0;u<l;++u)for(var f=s[u],m=f.length,g,p=0;p<m;++p)if(g=f[p]){var x=mn(g,a);$c(g,t,i,p,f,{time:x.time+x.delay+x.duration,delay:0,duration:x.duration,ease:x.ease})}return new aa(s,this._parents,t,i)}function RC(){var t,a,i=this,s=i._id,l=i.size();return new Promise(function(u,f){var m={value:f},g={value:function(){--l===0&&u()}};i.each(function(){var p=Tn(this,s),x=p.on;x!==t&&(a=(t=x).copy(),a._.cancel.push(m),a._.interrupt.push(m),a._.end.push(g)),p.on=a}),l===0&&u()})}var zC=0;function aa(t,a,i,s){this._groups=t,this._parents=a,this._name=i,this._id=s}function Vv(){return++zC}var Kn=ro.prototype;aa.prototype={constructor:aa,select:fC,selectAll:hC,selectChild:Kn.selectChild,selectChildren:Kn.selectChildren,filter:rC,merge:sC,selection:pC,transition:AC,call:Kn.call,nodes:Kn.nodes,node:Kn.node,size:Kn.size,empty:Kn.empty,each:Kn.each,on:cC,attr:Y5,attrTween:P5,style:bC,styleTween:NC,text:_C,textTween:MC,remove:dC,tween:B5,delay:W5,duration:eC,ease:nC,easeVarying:iC,end:RC,[Symbol.iterator]:Kn[Symbol.iterator]};function DC(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var OC={time:null,delay:0,duration:250,ease:DC};function kC(t,a){for(var i;!(i=t.__transition)||!(i=i[a]);)if(!(t=t.parentNode))throw new Error(`transition ${a} not found`);return i}function BC(t){var a,i;t instanceof aa?(a=t._id,t=t._name):(a=Vv(),(i=OC).time=kh(),t=t==null?null:t+"");for(var s=this._groups,l=s.length,u=0;u<l;++u)for(var f=s[u],m=f.length,g,p=0;p<m;++p)(g=f[p])&&$c(g,t,a,p,f,i||kC(g,a));return new aa(s,this._parents,t,a)}ro.prototype.interrupt=D5;ro.prototype.transition=BC;const Zl=t=>()=>t;function HC(t,{sourceEvent:a,target:i,transform:s,dispatch:l}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:a,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},transform:{value:s,enumerable:!0,configurable:!0},_:{value:l}})}function Jn(t,a,i){this.k=t,this.x=a,this.y=i}Jn.prototype={constructor:Jn,scale:function(t){return t===1?this:new Jn(this.k*t,this.x,this.y)},translate:function(t,a){return t===0&a===0?this:new Jn(this.k,this.x+this.k*t,this.y+this.k*a)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var qc=new Jn(1,0,0);Yv.prototype=Jn.prototype;function Yv(t){for(;!t.__zoom;)if(!(t=t.parentNode))return qc;return t.__zoom}function Af(t){t.stopImmediatePropagation()}function Bs(t){t.preventDefault(),t.stopImmediatePropagation()}function LC(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function UC(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function _y(){return this.__zoom||qc}function $C(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function qC(){return navigator.maxTouchPoints||"ontouchstart"in this}function VC(t,a,i){var s=t.invertX(a[0][0])-i[0][0],l=t.invertX(a[1][0])-i[1][0],u=t.invertY(a[0][1])-i[0][1],f=t.invertY(a[1][1])-i[1][1];return t.translate(l>s?(s+l)/2:Math.min(0,s)||Math.max(0,l),f>u?(u+f)/2:Math.min(0,u)||Math.max(0,f))}function Xv(){var t=LC,a=UC,i=VC,s=$C,l=qC,u=[0,1/0],f=[[-1/0,-1/0],[1/0,1/0]],m=250,g=oc,p=Hc("start","zoom","end"),x,y,v,N=500,E=150,A=0,w=10;function j(L){L.property("__zoom",_y).on("wheel.zoom",X,{passive:!1}).on("mousedown.zoom",F).on("dblclick.zoom",se).filter(l).on("touchstart.zoom",P).on("touchmove.zoom",H).on("touchend.zoom touchcancel.zoom",te).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}j.transform=function(L,Z,z,D){var V=L.selection?L.selection():L;V.property("__zoom",_y),L!==V?B(L,Z,z,D):V.interrupt().each(function(){$(this,arguments).event(D).start().zoom(null,typeof Z=="function"?Z.apply(this,arguments):Z).end()})},j.scaleBy=function(L,Z,z,D){j.scaleTo(L,function(){var V=this.__zoom.k,O=typeof Z=="function"?Z.apply(this,arguments):Z;return V*O},z,D)},j.scaleTo=function(L,Z,z,D){j.transform(L,function(){var V=a.apply(this,arguments),O=this.__zoom,Q=z==null?M(V):typeof z=="function"?z.apply(this,arguments):z,R=O.invert(Q),U=typeof Z=="function"?Z.apply(this,arguments):Z;return i(S(_(O,U),Q,R),V,f)},z,D)},j.translateBy=function(L,Z,z,D){j.transform(L,function(){return i(this.__zoom.translate(typeof Z=="function"?Z.apply(this,arguments):Z,typeof z=="function"?z.apply(this,arguments):z),a.apply(this,arguments),f)},null,D)},j.translateTo=function(L,Z,z,D,V){j.transform(L,function(){var O=a.apply(this,arguments),Q=this.__zoom,R=D==null?M(O):typeof D=="function"?D.apply(this,arguments):D;return i(qc.translate(R[0],R[1]).scale(Q.k).translate(typeof Z=="function"?-Z.apply(this,arguments):-Z,typeof z=="function"?-z.apply(this,arguments):-z),O,f)},D,V)};function _(L,Z){return Z=Math.max(u[0],Math.min(u[1],Z)),Z===L.k?L:new Jn(Z,L.x,L.y)}function S(L,Z,z){var D=Z[0]-z[0]*L.k,V=Z[1]-z[1]*L.k;return D===L.x&&V===L.y?L:new Jn(L.k,D,V)}function M(L){return[(+L[0][0]+ +L[1][0])/2,(+L[0][1]+ +L[1][1])/2]}function B(L,Z,z,D){L.on("start.zoom",function(){$(this,arguments).event(D).start()}).on("interrupt.zoom end.zoom",function(){$(this,arguments).event(D).end()}).tween("zoom",function(){var V=this,O=arguments,Q=$(V,O).event(D),R=a.apply(V,O),U=z==null?M(R):typeof z=="function"?z.apply(V,O):z,J=Math.max(R[1][0]-R[0][0],R[1][1]-R[0][1]),ne=V.__zoom,oe=typeof Z=="function"?Z.apply(V,O):Z,ue=g(ne.invert(U).concat(J/ne.k),oe.invert(U).concat(J/oe.k));return function(ce){if(ce===1)ce=oe;else{var le=ue(ce),de=J/le[2];ce=new Jn(de,U[0]-le[0]*de,U[1]-le[1]*de)}Q.zoom(null,ce)}})}function $(L,Z,z){return!z&&L.__zooming||new k(L,Z)}function k(L,Z){this.that=L,this.args=Z,this.active=0,this.sourceEvent=null,this.extent=a.apply(L,Z),this.taps=0}k.prototype={event:function(L){return L&&(this.sourceEvent=L),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(L,Z){return this.mouse&&L!=="mouse"&&(this.mouse[1]=Z.invert(this.mouse[0])),this.touch0&&L!=="touch"&&(this.touch0[1]=Z.invert(this.touch0[0])),this.touch1&&L!=="touch"&&(this.touch1[1]=Z.invert(this.touch1[0])),this.that.__zoom=Z,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(L){var Z=Vt(this.that).datum();p.call(L,this.that,new HC(L,{sourceEvent:this.sourceEvent,target:j,transform:this.that.__zoom,dispatch:p}),Z)}};function X(L,...Z){if(!t.apply(this,arguments))return;var z=$(this,Z).event(L),D=this.__zoom,V=Math.max(u[0],Math.min(u[1],D.k*Math.pow(2,s.apply(this,arguments)))),O=un(L);if(z.wheel)(z.mouse[0][0]!==O[0]||z.mouse[0][1]!==O[1])&&(z.mouse[1]=D.invert(z.mouse[0]=O)),clearTimeout(z.wheel);else{if(D.k===V)return;z.mouse=[O,D.invert(O)],uc(this),z.start()}Bs(L),z.wheel=setTimeout(Q,E),z.zoom("mouse",i(S(_(D,V),z.mouse[0],z.mouse[1]),z.extent,f));function Q(){z.wheel=null,z.end()}}function F(L,...Z){if(v||!t.apply(this,arguments))return;var z=L.currentTarget,D=$(this,Z,!0).event(L),V=Vt(L.view).on("mousemove.zoom",U,!0).on("mouseup.zoom",J,!0),O=un(L,z),Q=L.clientX,R=L.clientY;Cv(L.view),Af(L),D.mouse=[O,this.__zoom.invert(O)],uc(this),D.start();function U(ne){if(Bs(ne),!D.moved){var oe=ne.clientX-Q,ue=ne.clientY-R;D.moved=oe*oe+ue*ue>A}D.event(ne).zoom("mouse",i(S(D.that.__zoom,D.mouse[0]=un(ne,z),D.mouse[1]),D.extent,f))}function J(ne){V.on("mousemove.zoom mouseup.zoom",null),Tv(ne.view,D.moved),Bs(ne),D.event(ne).end()}}function se(L,...Z){if(t.apply(this,arguments)){var z=this.__zoom,D=un(L.changedTouches?L.changedTouches[0]:L,this),V=z.invert(D),O=z.k*(L.shiftKey?.5:2),Q=i(S(_(z,O),D,V),a.apply(this,Z),f);Bs(L),m>0?Vt(this).transition().duration(m).call(B,Q,D,L):Vt(this).call(j.transform,Q,D,L)}}function P(L,...Z){if(t.apply(this,arguments)){var z=L.touches,D=z.length,V=$(this,Z,L.changedTouches.length===D).event(L),O,Q,R,U;for(Af(L),Q=0;Q<D;++Q)R=z[Q],U=un(R,this),U=[U,this.__zoom.invert(U),R.identifier],V.touch0?!V.touch1&&V.touch0[2]!==U[2]&&(V.touch1=U,V.taps=0):(V.touch0=U,O=!0,V.taps=1+!!x);x&&(x=clearTimeout(x)),O&&(V.taps<2&&(y=U[0],x=setTimeout(function(){x=null},N)),uc(this),V.start())}}function H(L,...Z){if(this.__zooming){var z=$(this,Z).event(L),D=L.changedTouches,V=D.length,O,Q,R,U;for(Bs(L),O=0;O<V;++O)Q=D[O],R=un(Q,this),z.touch0&&z.touch0[2]===Q.identifier?z.touch0[0]=R:z.touch1&&z.touch1[2]===Q.identifier&&(z.touch1[0]=R);if(Q=z.that.__zoom,z.touch1){var J=z.touch0[0],ne=z.touch0[1],oe=z.touch1[0],ue=z.touch1[1],ce=(ce=oe[0]-J[0])*ce+(ce=oe[1]-J[1])*ce,le=(le=ue[0]-ne[0])*le+(le=ue[1]-ne[1])*le;Q=_(Q,Math.sqrt(ce/le)),R=[(J[0]+oe[0])/2,(J[1]+oe[1])/2],U=[(ne[0]+ue[0])/2,(ne[1]+ue[1])/2]}else if(z.touch0)R=z.touch0[0],U=z.touch0[1];else return;z.zoom("touch",i(S(Q,R,U),z.extent,f))}}function te(L,...Z){if(this.__zooming){var z=$(this,Z).event(L),D=L.changedTouches,V=D.length,O,Q;for(Af(L),v&&clearTimeout(v),v=setTimeout(function(){v=null},N),O=0;O<V;++O)Q=D[O],z.touch0&&z.touch0[2]===Q.identifier?delete z.touch0:z.touch1&&z.touch1[2]===Q.identifier&&delete z.touch1;if(z.touch1&&!z.touch0&&(z.touch0=z.touch1,delete z.touch1),z.touch0)z.touch0[1]=this.__zoom.invert(z.touch0[0]);else if(z.end(),z.taps===2&&(Q=un(Q,this),Math.hypot(y[0]-Q[0],y[1]-Q[1])<w)){var R=Vt(this).on("dblclick.zoom");R&&R.apply(this,arguments)}}}return j.wheelDelta=function(L){return arguments.length?(s=typeof L=="function"?L:Zl(+L),j):s},j.filter=function(L){return arguments.length?(t=typeof L=="function"?L:Zl(!!L),j):t},j.touchable=function(L){return arguments.length?(l=typeof L=="function"?L:Zl(!!L),j):l},j.extent=function(L){return arguments.length?(a=typeof L=="function"?L:Zl([[+L[0][0],+L[0][1]],[+L[1][0],+L[1][1]]]),j):a},j.scaleExtent=function(L){return arguments.length?(u[0]=+L[0],u[1]=+L[1],j):[u[0],u[1]]},j.translateExtent=function(L){return arguments.length?(f[0][0]=+L[0][0],f[1][0]=+L[1][0],f[0][1]=+L[0][1],f[1][1]=+L[1][1],j):[[f[0][0],f[0][1]],[f[1][0],f[1][1]]]},j.constrain=function(L){return arguments.length?(i=L,j):i},j.duration=function(L){return arguments.length?(m=+L,j):m},j.interpolate=function(L){return arguments.length?(g=L,j):g},j.on=function(){var L=p.on.apply(p,arguments);return L===p?j:L},j.clickDistance=function(L){return arguments.length?(A=(L=+L)*L,j):Math.sqrt(A)},j.tapDistance=function(L){return arguments.length?(w=+L,j):w},j}const Cn={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:t=>`Node type "${t}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:t=>`The old edge with id=${t} does not exist.`,error009:t=>`Marker type "${t}" doesn't exist.`,error008:(t,{id:a,sourceHandle:i,targetHandle:s})=>`Couldn't create edge for ${t} handle id: "${t==="source"?i:s}", edge id: ${a}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:t=>`Edge type "${t}" not found. Using fallback type "default".`,error012:t=>`Node with id "${t}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(t="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${t}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",error015:()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."},Is=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Gv=["Enter"," ","Escape"],Zv={"node.a11yDescription.default":"Press enter or space to select a node. Press delete to remove it and escape to cancel.","node.a11yDescription.keyboardDisabled":"Press enter or space to select a node. You can then use the arrow keys to move the node around. Press delete to remove it and escape to cancel.","node.a11yDescription.ariaLiveMessage":({direction:t,x:a,y:i})=>`Moved selected node ${t}. New position, x: ${a}, y: ${i}`,"edge.a11yDescription.default":"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel.","controls.ariaLabel":"Control Panel","controls.zoomIn.ariaLabel":"Zoom In","controls.zoomOut.ariaLabel":"Zoom Out","controls.fitView.ariaLabel":"Fit View","controls.interactive.ariaLabel":"Toggle Interactivity","minimap.ariaLabel":"Mini Map","handle.ariaLabel":"Handle"};var _r;(function(t){t.Strict="strict",t.Loose="loose"})(_r||(_r={}));var bi;(function(t){t.Free="free",t.Vertical="vertical",t.Horizontal="horizontal"})(bi||(bi={}));var Fs;(function(t){t.Partial="partial",t.Full="full"})(Fs||(Fs={}));const Qv={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null,pointer:null};var Ua;(function(t){t.Bezier="default",t.Straight="straight",t.Step="step",t.SmoothStep="smoothstep",t.SimpleBezier="simplebezier"})(Ua||(Ua={}));var Ec;(function(t){t.Arrow="arrow",t.ArrowClosed="arrowclosed"})(Ec||(Ec={}));var pe;(function(t){t.Left="left",t.Top="top",t.Right="right",t.Bottom="bottom"})(pe||(pe={}));const Cy={[pe.Left]:pe.Right,[pe.Right]:pe.Left,[pe.Top]:pe.Bottom,[pe.Bottom]:pe.Top};function Pv(t){return t===null?null:t?"valid":"invalid"}const Iv=t=>"id"in t&&"source"in t&&"target"in t,YC=t=>"id"in t&&"position"in t&&!("source"in t)&&!("target"in t),Lh=t=>"id"in t&&"internals"in t&&!("source"in t)&&!("target"in t),oo=(t,a=[0,0])=>{const{width:i,height:s}=sa(t),l=t.origin??a,u=i*l[0],f=s*l[1];return{x:t.position.x-u,y:t.position.y-f}},XC=(t,a={nodeOrigin:[0,0]})=>{if(t.length===0)return{x:0,y:0,width:0,height:0};const i=t.reduce((s,l)=>{const u=typeof l=="string";let f=!a.nodeLookup&&!u?l:void 0;a.nodeLookup&&(f=u?a.nodeLookup.get(l):Lh(l)?l:a.nodeLookup.get(l.id));const m=f?jc(f,a.nodeOrigin):{x:0,y:0,x2:0,y2:0};return Vc(s,m)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return Yc(i)},lo=(t,a={})=>{let i={x:1/0,y:1/0,x2:-1/0,y2:-1/0},s=!1;return t.forEach(l=>{(a.filter===void 0||a.filter(l))&&(i=Vc(i,jc(l)),s=!0)}),s?Yc(i):{x:0,y:0,width:0,height:0}},Uh=(t,a,[i,s,l]=[0,0,1],u=!1,f=!1)=>{const m={...uo(a,[i,s,l]),width:a.width/l,height:a.height/l},g=[];for(const p of t.values()){const{measured:x,selectable:y=!0,hidden:v=!1}=p;if(f&&!y||v)continue;const N=x.width??p.width??p.initialWidth??null,E=x.height??p.height??p.initialHeight??null,A=Ws(m,Tr(p)),w=(N??0)*(E??0),j=u&&A>0;(!p.internals.handleBounds||j||A>=w||p.dragging)&&g.push(p)}return g},GC=(t,a)=>{const i=new Set;return t.forEach(s=>{i.add(s.id)}),a.filter(s=>i.has(s.source)||i.has(s.target))};function ZC(t,a){const i=new Map,s=a?.nodes?new Set(a.nodes.map(l=>l.id)):null;return t.forEach(l=>{l.measured.width&&l.measured.height&&(a?.includeHiddenNodes||!l.hidden)&&(!s||s.has(l.id))&&i.set(l.id,l)}),i}async function QC({nodes:t,width:a,height:i,panZoom:s,minZoom:l,maxZoom:u},f){if(t.size===0)return Promise.resolve(!0);const m=ZC(t,f),g=lo(m),p=$h(g,a,i,f?.minZoom??l,f?.maxZoom??u,f?.padding??.1);return await s.setViewport(p,{duration:f?.duration,ease:f?.ease,interpolate:f?.interpolate}),Promise.resolve(!0)}function Fv({nodeId:t,nextPosition:a,nodeLookup:i,nodeOrigin:s=[0,0],nodeExtent:l,onError:u}){const f=i.get(t),m=f.parentId?i.get(f.parentId):void 0,{x:g,y:p}=m?m.internals.positionAbsolute:{x:0,y:0},x=f.origin??s;let y=f.extent||l;if(f.extent==="parent"&&!f.expandParent)if(!m)u?.("005",Cn.error005());else{const N=m.measured.width,E=m.measured.height;N&&E&&(y=[[g,p],[g+N,p+E]])}else m&&Mr(f.extent)&&(y=[[f.extent[0][0]+g,f.extent[0][1]+p],[f.extent[1][0]+g,f.extent[1][1]+p]]);const v=Mr(y)?Ni(a,y,f.measured):a;return(f.measured.width===void 0||f.measured.height===void 0)&&u?.("015",Cn.error015()),{position:{x:v.x-g+(f.measured.width??0)*x[0],y:v.y-p+(f.measured.height??0)*x[1]},positionAbsolute:v}}async function PC({nodesToRemove:t=[],edgesToRemove:a=[],nodes:i,edges:s,onBeforeDelete:l}){const u=new Set(t.map(v=>v.id)),f=[];for(const v of i){if(v.deletable===!1)continue;const N=u.has(v.id),E=!N&&v.parentId&&f.find(A=>A.id===v.parentId);(N||E)&&f.push(v)}const m=new Set(a.map(v=>v.id)),g=s.filter(v=>v.deletable!==!1),x=GC(f,g);for(const v of g)m.has(v.id)&&!x.find(E=>E.id===v.id)&&x.push(v);if(!l)return{edges:x,nodes:f};const y=await l({nodes:f,edges:x});return typeof y=="boolean"?y?{edges:x,nodes:f}:{edges:[],nodes:[]}:y}const Cr=(t,a=0,i=1)=>Math.min(Math.max(t,a),i),Ni=(t={x:0,y:0},a,i)=>({x:Cr(t.x,a[0][0],a[1][0]-(i?.width??0)),y:Cr(t.y,a[0][1],a[1][1]-(i?.height??0))});function Wv(t,a,i){const{width:s,height:l}=sa(i),{x:u,y:f}=i.internals.positionAbsolute;return Ni(t,[[u,f],[u+s,f+l]],a)}const Ty=(t,a,i)=>t<a?Cr(Math.abs(t-a),1,a)/a:t>i?-Cr(Math.abs(t-i),1,a)/a:0,Kv=(t,a,i=15,s=40)=>{const l=Ty(t.x,s,a.width-s)*i,u=Ty(t.y,s,a.height-s)*i;return[l,u]},Vc=(t,a)=>({x:Math.min(t.x,a.x),y:Math.min(t.y,a.y),x2:Math.max(t.x2,a.x2),y2:Math.max(t.y2,a.y2)}),ch=({x:t,y:a,width:i,height:s})=>({x:t,y:a,x2:t+i,y2:a+s}),Yc=({x:t,y:a,x2:i,y2:s})=>({x:t,y:a,width:i-t,height:s-a}),Tr=(t,a=[0,0])=>{const{x:i,y:s}=Lh(t)?t.internals.positionAbsolute:oo(t,a);return{x:i,y:s,width:t.measured?.width??t.width??t.initialWidth??0,height:t.measured?.height??t.height??t.initialHeight??0}},jc=(t,a=[0,0])=>{const{x:i,y:s}=Lh(t)?t.internals.positionAbsolute:oo(t,a);return{x:i,y:s,x2:i+(t.measured?.width??t.width??t.initialWidth??0),y2:s+(t.measured?.height??t.height??t.initialHeight??0)}},Jv=(t,a)=>Yc(Vc(ch(t),ch(a))),Ws=(t,a)=>{const i=Math.max(0,Math.min(t.x+t.width,a.x+a.width)-Math.max(t.x,a.x)),s=Math.max(0,Math.min(t.y+t.height,a.y+a.height)-Math.max(t.y,a.y));return Math.ceil(i*s)},My=t=>fn(t.width)&&fn(t.height)&&fn(t.x)&&fn(t.y),fn=t=>!isNaN(t)&&isFinite(t),IC=(t,a)=>{},co=(t,a=[1,1])=>({x:a[0]*Math.round(t.x/a[0]),y:a[1]*Math.round(t.y/a[1])}),uo=({x:t,y:a},[i,s,l],u=!1,f=[1,1])=>{const m={x:(t-i)/l,y:(a-s)/l};return u?co(m,f):m},_c=({x:t,y:a},[i,s,l])=>({x:t*l+i,y:a*l+s});function pr(t,a){if(typeof t=="number")return Math.floor((a-a/(1+t))*.5);if(typeof t=="string"&&t.endsWith("px")){const i=parseFloat(t);if(!Number.isNaN(i))return Math.floor(i)}if(typeof t=="string"&&t.endsWith("%")){const i=parseFloat(t);if(!Number.isNaN(i))return Math.floor(a*i*.01)}return console.error(`[React Flow] The padding value "${t}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function FC(t,a,i){if(typeof t=="string"||typeof t=="number"){const s=pr(t,i),l=pr(t,a);return{top:s,right:l,bottom:s,left:l,x:l*2,y:s*2}}if(typeof t=="object"){const s=pr(t.top??t.y??0,i),l=pr(t.bottom??t.y??0,i),u=pr(t.left??t.x??0,a),f=pr(t.right??t.x??0,a);return{top:s,right:f,bottom:l,left:u,x:u+f,y:s+l}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function WC(t,a,i,s,l,u){const{x:f,y:m}=_c(t,[a,i,s]),{x:g,y:p}=_c({x:t.x+t.width,y:t.y+t.height},[a,i,s]),x=l-g,y=u-p;return{left:Math.floor(f),top:Math.floor(m),right:Math.floor(x),bottom:Math.floor(y)}}const $h=(t,a,i,s,l,u)=>{const f=FC(u,a,i),m=(a-f.x)/t.width,g=(i-f.y)/t.height,p=Math.min(m,g),x=Cr(p,s,l),y=t.x+t.width/2,v=t.y+t.height/2,N=a/2-y*x,E=i/2-v*x,A=WC(t,N,E,x,a,i),w={left:Math.min(A.left-f.left,0),top:Math.min(A.top-f.top,0),right:Math.min(A.right-f.right,0),bottom:Math.min(A.bottom-f.bottom,0)};return{x:N-w.left+w.right,y:E-w.top+w.bottom,zoom:x}},Ks=()=>typeof navigator<"u"&&navigator?.userAgent?.indexOf("Mac")>=0;function Mr(t){return t!=null&&t!=="parent"}function sa(t){return{width:t.measured?.width??t.width??t.initialWidth??0,height:t.measured?.height??t.height??t.initialHeight??0}}function e1(t){return(t.measured?.width??t.width??t.initialWidth)!==void 0&&(t.measured?.height??t.height??t.initialHeight)!==void 0}function t1(t,a={width:0,height:0},i,s,l){const u={...t},f=s.get(i);if(f){const m=f.origin||l;u.x+=f.internals.positionAbsolute.x-(a.width??0)*m[0],u.y+=f.internals.positionAbsolute.y-(a.height??0)*m[1]}return u}function Ay(t,a){if(t.size!==a.size)return!1;for(const i of t)if(!a.has(i))return!1;return!0}function KC(){let t,a;return{promise:new Promise((s,l)=>{t=s,a=l}),resolve:t,reject:a}}function JC(t){return{...Zv,...t||{}}}function Vs(t,{snapGrid:a=[0,0],snapToGrid:i=!1,transform:s,containerBounds:l}){const{x:u,y:f}=hn(t),m=uo({x:u-(l?.left??0),y:f-(l?.top??0)},s),{x:g,y:p}=i?co(m,a):m;return{xSnapped:g,ySnapped:p,...m}}const qh=t=>({width:t.offsetWidth,height:t.offsetHeight}),n1=t=>t?.getRootNode?.()||window?.document,e6=["INPUT","SELECT","TEXTAREA"];function a1(t){const a=t.composedPath?.()?.[0]||t.target;return a?.nodeType!==1?!1:e6.includes(a.nodeName)||a.hasAttribute("contenteditable")||!!a.closest(".nokey")}const i1=t=>"clientX"in t,hn=(t,a)=>{const i=i1(t),s=i?t.clientX:t.touches?.[0].clientX,l=i?t.clientY:t.touches?.[0].clientY;return{x:s-(a?.left??0),y:l-(a?.top??0)}},Ry=(t,a,i,s,l)=>{const u=a.querySelectorAll(`.${t}`);return!u||!u.length?null:Array.from(u).map(f=>{const m=f.getBoundingClientRect();return{id:f.getAttribute("data-handleid"),type:t,nodeId:l,position:f.getAttribute("data-handlepos"),x:(m.left-i.left)/s,y:(m.top-i.top)/s,...qh(f)}})};function r1({sourceX:t,sourceY:a,targetX:i,targetY:s,sourceControlX:l,sourceControlY:u,targetControlX:f,targetControlY:m}){const g=t*.125+l*.375+f*.375+i*.125,p=a*.125+u*.375+m*.375+s*.125,x=Math.abs(g-t),y=Math.abs(p-a);return[g,p,x,y]}function Ql(t,a){return t>=0?.5*t:a*25*Math.sqrt(-t)}function zy({pos:t,x1:a,y1:i,x2:s,y2:l,c:u}){switch(t){case pe.Left:return[a-Ql(a-s,u),i];case pe.Right:return[a+Ql(s-a,u),i];case pe.Top:return[a,i-Ql(i-l,u)];case pe.Bottom:return[a,i+Ql(l-i,u)]}}function s1({sourceX:t,sourceY:a,sourcePosition:i=pe.Bottom,targetX:s,targetY:l,targetPosition:u=pe.Top,curvature:f=.25}){const[m,g]=zy({pos:i,x1:t,y1:a,x2:s,y2:l,c:f}),[p,x]=zy({pos:u,x1:s,y1:l,x2:t,y2:a,c:f}),[y,v,N,E]=r1({sourceX:t,sourceY:a,targetX:s,targetY:l,sourceControlX:m,sourceControlY:g,targetControlX:p,targetControlY:x});return[`M${t},${a} C${m},${g} ${p},${x} ${s},${l}`,y,v,N,E]}function o1({sourceX:t,sourceY:a,targetX:i,targetY:s}){const l=Math.abs(i-t)/2,u=i<t?i+l:i-l,f=Math.abs(s-a)/2,m=s<a?s+f:s-f;return[u,m,l,f]}function t6({sourceNode:t,targetNode:a,selected:i=!1,zIndex:s=0,elevateOnSelect:l=!1,zIndexMode:u="basic"}){if(u==="manual")return s;const f=l&&i?s+1e3:s,m=Math.max(t.parentId||l&&t.selected?t.internals.z:0,a.parentId||l&&a.selected?a.internals.z:0);return f+m}function n6({sourceNode:t,targetNode:a,width:i,height:s,transform:l}){const u=Vc(jc(t),jc(a));u.x===u.x2&&(u.x2+=1),u.y===u.y2&&(u.y2+=1);const f={x:-l[0]/l[2],y:-l[1]/l[2],width:i/l[2],height:s/l[2]};return Ws(f,Yc(u))>0}const a6=({source:t,sourceHandle:a,target:i,targetHandle:s})=>`xy-edge__${t}${a||""}-${i}${s||""}`,i6=(t,a)=>a.some(i=>i.source===t.source&&i.target===t.target&&(i.sourceHandle===t.sourceHandle||!i.sourceHandle&&!t.sourceHandle)&&(i.targetHandle===t.targetHandle||!i.targetHandle&&!t.targetHandle)),l1=(t,a,i={})=>{if(!t.source||!t.target)return a;const s=i.getEdgeId||a6;let l;return Iv(t)?l={...t}:l={...t,id:s(t)},i6(l,a)?a:(l.sourceHandle===null&&delete l.sourceHandle,l.targetHandle===null&&delete l.targetHandle,a.concat(l))};function c1({sourceX:t,sourceY:a,targetX:i,targetY:s}){const[l,u,f,m]=o1({sourceX:t,sourceY:a,targetX:i,targetY:s});return[`M ${t},${a}L ${i},${s}`,l,u,f,m]}const Dy={[pe.Left]:{x:-1,y:0},[pe.Right]:{x:1,y:0},[pe.Top]:{x:0,y:-1},[pe.Bottom]:{x:0,y:1}},r6=({source:t,sourcePosition:a=pe.Bottom,target:i})=>a===pe.Left||a===pe.Right?t.x<i.x?{x:1,y:0}:{x:-1,y:0}:t.y<i.y?{x:0,y:1}:{x:0,y:-1},Oy=(t,a)=>Math.sqrt(Math.pow(a.x-t.x,2)+Math.pow(a.y-t.y,2));function s6({source:t,sourcePosition:a=pe.Bottom,target:i,targetPosition:s=pe.Top,center:l,offset:u,stepPosition:f}){const m=Dy[a],g=Dy[s],p={x:t.x+m.x*u,y:t.y+m.y*u},x={x:i.x+g.x*u,y:i.y+g.y*u},y=r6({source:p,sourcePosition:a,target:x}),v=y.x!==0?"x":"y",N=y[v];let E=[],A,w;const j={x:0,y:0},_={x:0,y:0},[,,S,M]=o1({sourceX:t.x,sourceY:t.y,targetX:i.x,targetY:i.y});if(m[v]*g[v]===-1){v==="x"?(A=l.x??p.x+(x.x-p.x)*f,w=l.y??(p.y+x.y)/2):(A=l.x??(p.x+x.x)/2,w=l.y??p.y+(x.y-p.y)*f);const $=[{x:A,y:p.y},{x:A,y:x.y}],k=[{x:p.x,y:w},{x:x.x,y:w}];m[v]===N?E=v==="x"?$:k:E=v==="x"?k:$}else{const $=[{x:p.x,y:x.y}],k=[{x:x.x,y:p.y}];if(v==="x"?E=m.x===N?k:$:E=m.y===N?$:k,a===s){const H=Math.abs(t[v]-i[v]);if(H<=u){const te=Math.min(u-1,u-H);m[v]===N?j[v]=(p[v]>t[v]?-1:1)*te:_[v]=(x[v]>i[v]?-1:1)*te}}if(a!==s){const H=v==="x"?"y":"x",te=m[v]===g[H],L=p[H]>x[H],Z=p[H]<x[H];(m[v]===1&&(!te&&L||te&&Z)||m[v]!==1&&(!te&&Z||te&&L))&&(E=v==="x"?$:k)}const X={x:p.x+j.x,y:p.y+j.y},F={x:x.x+_.x,y:x.y+_.y},se=Math.max(Math.abs(X.x-E[0].x),Math.abs(F.x-E[0].x)),P=Math.max(Math.abs(X.y-E[0].y),Math.abs(F.y-E[0].y));se>=P?(A=(X.x+F.x)/2,w=E[0].y):(A=E[0].x,w=(X.y+F.y)/2)}return[[t,{x:p.x+j.x,y:p.y+j.y},...E,{x:x.x+_.x,y:x.y+_.y},i],A,w,S,M]}function o6(t,a,i,s){const l=Math.min(Oy(t,a)/2,Oy(a,i)/2,s),{x:u,y:f}=a;if(t.x===u&&u===i.x||t.y===f&&f===i.y)return`L${u} ${f}`;if(t.y===f){const p=t.x<i.x?-1:1,x=t.y<i.y?1:-1;return`L ${u+l*p},${f}Q ${u},${f} ${u},${f+l*x}`}const m=t.x<i.x?1:-1,g=t.y<i.y?-1:1;return`L ${u},${f+l*g}Q ${u},${f} ${u+l*m},${f}`}function uh({sourceX:t,sourceY:a,sourcePosition:i=pe.Bottom,targetX:s,targetY:l,targetPosition:u=pe.Top,borderRadius:f=5,centerX:m,centerY:g,offset:p=20,stepPosition:x=.5}){const[y,v,N,E,A]=s6({source:{x:t,y:a},sourcePosition:i,target:{x:s,y:l},targetPosition:u,center:{x:m,y:g},offset:p,stepPosition:x});return[y.reduce((j,_,S)=>{let M="";return S>0&&S<y.length-1?M=o6(y[S-1],_,y[S+1],f):M=`${S===0?"M":"L"}${_.x} ${_.y}`,j+=M,j},""),v,N,E,A]}function ky(t){return t&&!!(t.internals.handleBounds||t.handles?.length)&&!!(t.measured.width||t.width||t.initialWidth)}function l6(t){const{sourceNode:a,targetNode:i}=t;if(!ky(a)||!ky(i))return null;const s=a.internals.handleBounds||By(a.handles),l=i.internals.handleBounds||By(i.handles),u=Hy(s?.source??[],t.sourceHandle),f=Hy(t.connectionMode===_r.Strict?l?.target??[]:(l?.target??[]).concat(l?.source??[]),t.targetHandle);if(!u||!f)return t.onError?.("008",Cn.error008(u?"target":"source",{id:t.id,sourceHandle:t.sourceHandle,targetHandle:t.targetHandle})),null;const m=u?.position||pe.Bottom,g=f?.position||pe.Top,p=Ei(a,u,m),x=Ei(i,f,g);return{sourceX:p.x,sourceY:p.y,targetX:x.x,targetY:x.y,sourcePosition:m,targetPosition:g}}function By(t){if(!t)return null;const a=[],i=[];for(const s of t)s.width=s.width??1,s.height=s.height??1,s.type==="source"?a.push(s):s.type==="target"&&i.push(s);return{source:a,target:i}}function Ei(t,a,i=pe.Left,s=!1){const l=(a?.x??0)+t.internals.positionAbsolute.x,u=(a?.y??0)+t.internals.positionAbsolute.y,{width:f,height:m}=a??sa(t);if(s)return{x:l+f/2,y:u+m/2};switch(a?.position??i){case pe.Top:return{x:l+f/2,y:u};case pe.Right:return{x:l+f,y:u+m/2};case pe.Bottom:return{x:l+f/2,y:u+m};case pe.Left:return{x:l,y:u+m/2}}}function Hy(t,a){return t&&(a?t.find(i=>i.id===a):t[0])||null}function dh(t,a){return t?typeof t=="string"?t:`${a?`${a}__`:""}${Object.keys(t).sort().map(s=>`${s}=${t[s]}`).join("&")}`:""}function c6(t,{id:a,defaultColor:i,defaultMarkerStart:s,defaultMarkerEnd:l}){const u=new Set;return t.reduce((f,m)=>([m.markerStart||s,m.markerEnd||l].forEach(g=>{if(g&&typeof g=="object"){const p=dh(g,a);u.has(p)||(f.push({id:p,color:g.color||i,...g}),u.add(p))}}),f),[]).sort((f,m)=>f.id.localeCompare(m.id))}const u1=1e3,u6=10,Vh={nodeOrigin:[0,0],nodeExtent:Is,elevateNodesOnSelect:!0,zIndexMode:"basic",defaults:{}},d6={...Vh,checkEquality:!0};function Yh(t,a){const i={...t};for(const s in a)a[s]!==void 0&&(i[s]=a[s]);return i}function f6(t,a,i){const s=Yh(Vh,i);for(const l of t.values())if(l.parentId)Gh(l,t,a,s);else{const u=oo(l,s.nodeOrigin),f=Mr(l.extent)?l.extent:s.nodeExtent,m=Ni(u,f,sa(l));l.internals.positionAbsolute=m}}function h6(t,a){if(!t.handles)return t.measured?a?.internals.handleBounds:void 0;const i=[],s=[];for(const l of t.handles){const u={id:l.id,width:l.width??1,height:l.height??1,nodeId:t.id,x:l.x,y:l.y,position:l.position,type:l.type};l.type==="source"?i.push(u):l.type==="target"&&s.push(u)}return{source:i,target:s}}function Xh(t){return t==="manual"}function fh(t,a,i,s={}){const l=Yh(d6,s),u={i:0},f=new Map(a),m=l?.elevateNodesOnSelect&&!Xh(l.zIndexMode)?u1:0;let g=t.length>0;a.clear(),i.clear();for(const p of t){let x=f.get(p.id);if(l.checkEquality&&p===x?.internals.userNode)a.set(p.id,x);else{const y=oo(p,l.nodeOrigin),v=Mr(p.extent)?p.extent:l.nodeExtent,N=Ni(y,v,sa(p));x={...l.defaults,...p,measured:{width:p.measured?.width,height:p.measured?.height},internals:{positionAbsolute:N,handleBounds:h6(p,x),z:d1(p,m,l.zIndexMode),userNode:p}},a.set(p.id,x)}(x.measured===void 0||x.measured.width===void 0||x.measured.height===void 0)&&!x.hidden&&(g=!1),p.parentId&&Gh(x,a,i,s,u)}return g}function m6(t,a){if(!t.parentId)return;const i=a.get(t.parentId);i?i.set(t.id,t):a.set(t.parentId,new Map([[t.id,t]]))}function Gh(t,a,i,s,l){const{elevateNodesOnSelect:u,nodeOrigin:f,nodeExtent:m,zIndexMode:g}=Yh(Vh,s),p=t.parentId,x=a.get(p);if(!x){console.warn(`Parent node ${p} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}m6(t,i),l&&!x.parentId&&x.internals.rootParentIndex===void 0&&g==="auto"&&(x.internals.rootParentIndex=++l.i,x.internals.z=x.internals.z+l.i*u6),l&&x.internals.rootParentIndex!==void 0&&(l.i=x.internals.rootParentIndex);const y=u&&!Xh(g)?u1:0,{x:v,y:N,z:E}=p6(t,x,f,m,y,g),{positionAbsolute:A}=t.internals,w=v!==A.x||N!==A.y;(w||E!==t.internals.z)&&a.set(t.id,{...t,internals:{...t.internals,positionAbsolute:w?{x:v,y:N}:A,z:E}})}function d1(t,a,i){const s=fn(t.zIndex)?t.zIndex:0;return Xh(i)?s:s+(t.selected?a:0)}function p6(t,a,i,s,l,u){const{x:f,y:m}=a.internals.positionAbsolute,g=sa(t),p=oo(t,i),x=Mr(t.extent)?Ni(p,t.extent,g):p;let y=Ni({x:f+x.x,y:m+x.y},s,g);t.extent==="parent"&&(y=Wv(y,g,a));const v=d1(t,l,u),N=a.internals.z??0;return{x:y.x,y:y.y,z:N>=v?N+1:v}}function Zh(t,a,i,s=[0,0]){const l=[],u=new Map;for(const f of t){const m=a.get(f.parentId);if(!m)continue;const g=u.get(f.parentId)?.expandedRect??Tr(m),p=Jv(g,f.rect);u.set(f.parentId,{expandedRect:p,parent:m})}return u.size>0&&u.forEach(({expandedRect:f,parent:m},g)=>{const p=m.internals.positionAbsolute,x=sa(m),y=m.origin??s,v=f.x<p.x?Math.round(Math.abs(p.x-f.x)):0,N=f.y<p.y?Math.round(Math.abs(p.y-f.y)):0,E=Math.max(x.width,Math.round(f.width)),A=Math.max(x.height,Math.round(f.height)),w=(E-x.width)*y[0],j=(A-x.height)*y[1];(v>0||N>0||w||j)&&(l.push({id:g,type:"position",position:{x:m.position.x-v+w,y:m.position.y-N+j}}),i.get(g)?.forEach(_=>{t.some(S=>S.id===_.id)||l.push({id:_.id,type:"position",position:{x:_.position.x+v,y:_.position.y+N}})})),(x.width<f.width||x.height<f.height||v||N)&&l.push({id:g,type:"dimensions",setAttributes:!0,dimensions:{width:E+(v?y[0]*v-w:0),height:A+(N?y[1]*N-j:0)}})}),l}function g6(t,a,i,s,l,u,f){const m=s?.querySelector(".xyflow__viewport");let g=!1;if(!m)return{changes:[],updatedInternals:g};const p=[],x=window.getComputedStyle(m),{m22:y}=new window.DOMMatrixReadOnly(x.transform),v=[];for(const N of t.values()){const E=a.get(N.id);if(!E)continue;if(E.hidden){a.set(E.id,{...E,internals:{...E.internals,handleBounds:void 0}}),g=!0;continue}const A=qh(N.nodeElement),w=E.measured.width!==A.width||E.measured.height!==A.height;if(!!(A.width&&A.height&&(w||!E.internals.handleBounds||N.force))){const _=N.nodeElement.getBoundingClientRect(),S=Mr(E.extent)?E.extent:u;let{positionAbsolute:M}=E.internals;E.parentId&&E.extent==="parent"?M=Wv(M,A,a.get(E.parentId)):S&&(M=Ni(M,S,A));const B={...E,measured:A,internals:{...E.internals,positionAbsolute:M,handleBounds:{source:Ry("source",N.nodeElement,_,y,E.id),target:Ry("target",N.nodeElement,_,y,E.id)}}};a.set(E.id,B),E.parentId&&Gh(B,a,i,{nodeOrigin:l,zIndexMode:f}),g=!0,w&&(p.push({id:E.id,type:"dimensions",dimensions:A}),E.expandParent&&E.parentId&&v.push({id:E.id,parentId:E.parentId,rect:Tr(B,l)}))}}if(v.length>0){const N=Zh(v,a,i,l);p.push(...N)}return{changes:p,updatedInternals:g}}async function y6({delta:t,panZoom:a,transform:i,translateExtent:s,width:l,height:u}){if(!a||!t.x&&!t.y)return Promise.resolve(!1);const f=await a.setViewportConstrained({x:i[0]+t.x,y:i[1]+t.y,zoom:i[2]},[[0,0],[l,u]],s),m=!!f&&(f.x!==i[0]||f.y!==i[1]||f.k!==i[2]);return Promise.resolve(m)}function Ly(t,a,i,s,l,u){let f=l;const m=s.get(f)||new Map;s.set(f,m.set(i,a)),f=`${l}-${t}`;const g=s.get(f)||new Map;if(s.set(f,g.set(i,a)),u){f=`${l}-${t}-${u}`;const p=s.get(f)||new Map;s.set(f,p.set(i,a))}}function f1(t,a,i){t.clear(),a.clear();for(const s of i){const{source:l,target:u,sourceHandle:f=null,targetHandle:m=null}=s,g={edgeId:s.id,source:l,target:u,sourceHandle:f,targetHandle:m},p=`${l}-${f}--${u}-${m}`,x=`${u}-${m}--${l}-${f}`;Ly("source",g,x,t,l,f),Ly("target",g,p,t,u,m),a.set(s.id,s)}}function h1(t,a){if(!t.parentId)return!1;const i=a.get(t.parentId);return i?i.selected?!0:h1(i,a):!1}function Uy(t,a,i){let s=t;do{if(s?.matches?.(a))return!0;if(s===i)return!1;s=s?.parentElement}while(s);return!1}function x6(t,a,i,s){const l=new Map;for(const[u,f]of t)if((f.selected||f.id===s)&&(!f.parentId||!h1(f,t))&&(f.draggable||a&&typeof f.draggable>"u")){const m=t.get(u);m&&l.set(u,{id:u,position:m.position||{x:0,y:0},distance:{x:i.x-m.internals.positionAbsolute.x,y:i.y-m.internals.positionAbsolute.y},extent:m.extent,parentId:m.parentId,origin:m.origin,expandParent:m.expandParent,internals:{positionAbsolute:m.internals.positionAbsolute||{x:0,y:0}},measured:{width:m.measured.width??0,height:m.measured.height??0}})}return l}function Rf({nodeId:t,dragItems:a,nodeLookup:i,dragging:s=!0}){const l=[];for(const[f,m]of a){const g=i.get(f)?.internals.userNode;g&&l.push({...g,position:m.position,dragging:s})}if(!t)return[l[0],l];const u=i.get(t)?.internals.userNode;return[u?{...u,position:a.get(t)?.position||u.position,dragging:s}:l[0],l]}function v6({dragItems:t,snapGrid:a,x:i,y:s}){const l=t.values().next().value;if(!l)return null;const u={x:i-l.distance.x,y:s-l.distance.y},f=co(u,a);return{x:f.x-u.x,y:f.y-u.y}}function b6({onNodeMouseDown:t,getStoreItems:a,onDragStart:i,onDrag:s,onDragStop:l}){let u={x:null,y:null},f=0,m=new Map,g=!1,p={x:0,y:0},x=null,y=!1,v=null,N=!1,E=!1,A=null;function w({noDragClassName:_,handleSelector:S,domNode:M,isSelectable:B,nodeId:$,nodeClickDistance:k=0}){v=Vt(M);function X({x:H,y:te}){const{nodeLookup:L,nodeExtent:Z,snapGrid:z,snapToGrid:D,nodeOrigin:V,onNodeDrag:O,onSelectionDrag:Q,onError:R,updateNodePositions:U}=a();u={x:H,y:te};let J=!1;const ne=m.size>1,oe=ne&&Z?ch(lo(m)):null,ue=ne&&D?v6({dragItems:m,snapGrid:z,x:H,y:te}):null;for(const[ce,le]of m){if(!L.has(ce))continue;let de={x:H-le.distance.x,y:te-le.distance.y};D&&(de=ue?{x:Math.round(de.x+ue.x),y:Math.round(de.y+ue.y)}:co(de,z));let ve=null;if(ne&&Z&&!le.extent&&oe){const{positionAbsolute:ye}=le.internals,Se=ye.x-oe.x+Z[0][0],De=ye.x+le.measured.width-oe.x2+Z[1][0],_e=ye.y-oe.y+Z[0][1],Je=ye.y+le.measured.height-oe.y2+Z[1][1];ve=[[Se,_e],[De,Je]]}const{position:be,positionAbsolute:he}=Fv({nodeId:ce,nextPosition:de,nodeLookup:L,nodeExtent:ve||Z,nodeOrigin:V,onError:R});J=J||le.position.x!==be.x||le.position.y!==be.y,le.position=be,le.internals.positionAbsolute=he}if(E=E||J,!!J&&(U(m,!0),A&&(s||O||!$&&Q))){const[ce,le]=Rf({nodeId:$,dragItems:m,nodeLookup:L});s?.(A,m,ce,le),O?.(A,ce,le),$||Q?.(A,le)}}async function F(){if(!x)return;const{transform:H,panBy:te,autoPanSpeed:L,autoPanOnNodeDrag:Z}=a();if(!Z){g=!1,cancelAnimationFrame(f);return}const[z,D]=Kv(p,x,L);(z!==0||D!==0)&&(u.x=(u.x??0)-z/H[2],u.y=(u.y??0)-D/H[2],await te({x:z,y:D})&&X(u)),f=requestAnimationFrame(F)}function se(H){const{nodeLookup:te,multiSelectionActive:L,nodesDraggable:Z,transform:z,snapGrid:D,snapToGrid:V,selectNodesOnDrag:O,onNodeDragStart:Q,onSelectionDragStart:R,unselectNodesAndEdges:U}=a();y=!0,(!O||!B)&&!L&&$&&(te.get($)?.selected||U()),B&&O&&$&&t?.($);const J=Vs(H.sourceEvent,{transform:z,snapGrid:D,snapToGrid:V,containerBounds:x});if(u=J,m=x6(te,Z,J,$),m.size>0&&(i||Q||!$&&R)){const[ne,oe]=Rf({nodeId:$,dragItems:m,nodeLookup:te});i?.(H.sourceEvent,m,ne,oe),Q?.(H.sourceEvent,ne,oe),$||R?.(H.sourceEvent,oe)}}const P=Mv().clickDistance(k).on("start",H=>{const{domNode:te,nodeDragThreshold:L,transform:Z,snapGrid:z,snapToGrid:D}=a();x=te?.getBoundingClientRect()||null,N=!1,E=!1,A=H.sourceEvent,L===0&&se(H),u=Vs(H.sourceEvent,{transform:Z,snapGrid:z,snapToGrid:D,containerBounds:x}),p=hn(H.sourceEvent,x)}).on("drag",H=>{const{autoPanOnNodeDrag:te,transform:L,snapGrid:Z,snapToGrid:z,nodeDragThreshold:D,nodeLookup:V}=a(),O=Vs(H.sourceEvent,{transform:L,snapGrid:Z,snapToGrid:z,containerBounds:x});if(A=H.sourceEvent,(H.sourceEvent.type==="touchmove"&&H.sourceEvent.touches.length>1||$&&!V.has($))&&(N=!0),!N){if(!g&&te&&y&&(g=!0,F()),!y){const Q=hn(H.sourceEvent,x),R=Q.x-p.x,U=Q.y-p.y;Math.sqrt(R*R+U*U)>D&&se(H)}(u.x!==O.xSnapped||u.y!==O.ySnapped)&&m&&y&&(p=hn(H.sourceEvent,x),X(O))}}).on("end",H=>{if(!(!y||N)&&(g=!1,y=!1,cancelAnimationFrame(f),m.size>0)){const{nodeLookup:te,updateNodePositions:L,onNodeDragStop:Z,onSelectionDragStop:z}=a();if(E&&(L(m,!1),E=!1),l||Z||!$&&z){const[D,V]=Rf({nodeId:$,dragItems:m,nodeLookup:te,dragging:!1});l?.(H.sourceEvent,m,D,V),Z?.(H.sourceEvent,D,V),$||z?.(H.sourceEvent,V)}}}).filter(H=>{const te=H.target;return!H.button&&(!_||!Uy(te,`.${_}`,M))&&(!S||Uy(te,S,M))});v.call(P)}function j(){v?.on(".drag",null)}return{update:w,destroy:j}}function w6(t,a,i){const s=[],l={x:t.x-i,y:t.y-i,width:i*2,height:i*2};for(const u of a.values())Ws(l,Tr(u))>0&&s.push(u);return s}const S6=250;function N6(t,a,i,s){let l=[],u=1/0;const f=w6(t,i,a+S6);for(const m of f){const g=[...m.internals.handleBounds?.source??[],...m.internals.handleBounds?.target??[]];for(const p of g){if(s.nodeId===p.nodeId&&s.type===p.type&&s.id===p.id)continue;const{x,y}=Ei(m,p,p.position,!0),v=Math.sqrt(Math.pow(x-t.x,2)+Math.pow(y-t.y,2));v>a||(v<u?(l=[{...p,x,y}],u=v):v===u&&l.push({...p,x,y}))}}if(!l.length)return null;if(l.length>1){const m=s.type==="source"?"target":"source";return l.find(g=>g.type===m)??l[0]}return l[0]}function m1(t,a,i,s,l,u=!1){const f=s.get(t);if(!f)return null;const m=l==="strict"?f.internals.handleBounds?.[a]:[...f.internals.handleBounds?.source??[],...f.internals.handleBounds?.target??[]],g=(i?m?.find(p=>p.id===i):m?.[0])??null;return g&&u?{...g,...Ei(f,g,g.position,!0)}:g}function p1(t,a){return t||(a?.classList.contains("target")?"target":a?.classList.contains("source")?"source":null)}function E6(t,a){let i=null;return a?i=!0:t&&!a&&(i=!1),i}const g1=()=>!0;function j6(t,{connectionMode:a,connectionRadius:i,handleId:s,nodeId:l,edgeUpdaterType:u,isTarget:f,domNode:m,nodeLookup:g,lib:p,autoPanOnConnect:x,flowId:y,panBy:v,cancelConnection:N,onConnectStart:E,onConnect:A,onConnectEnd:w,isValidConnection:j=g1,onReconnectEnd:_,updateConnection:S,getTransform:M,getFromHandle:B,autoPanSpeed:$,dragThreshold:k=1,handleDomNode:X}){const F=n1(t.target);let se=0,P;const{x:H,y:te}=hn(t),L=p1(u,X),Z=m?.getBoundingClientRect();let z=!1;if(!Z||!L)return;const D=m1(l,L,s,g,a);if(!D)return;let V=hn(t,Z),O=!1,Q=null,R=!1,U=null;function J(){if(!x||!Z)return;const[be,he]=Kv(V,Z,$);v({x:be,y:he}),se=requestAnimationFrame(J)}const ne={...D,nodeId:l,type:L,position:D.position},oe=g.get(l);let ce={inProgress:!0,isValid:null,from:Ei(oe,ne,pe.Left,!0),fromHandle:ne,fromPosition:ne.position,fromNode:oe,to:V,toHandle:null,toPosition:Cy[ne.position],toNode:null,pointer:V};function le(){z=!0,S(ce),E?.(t,{nodeId:l,handleId:s,handleType:L})}k===0&&le();function de(be){if(!z){const{x:Je,y:Et}=hn(be),xt=Je-H,an=Et-te;if(!(xt*xt+an*an>k*k))return;le()}if(!B()||!ne){ve(be);return}const he=M();V=hn(be,Z),P=N6(uo(V,he,!1,[1,1]),i,g,ne),O||(J(),O=!0);const ye=y1(be,{handle:P,connectionMode:a,fromNodeId:l,fromHandleId:s,fromType:f?"target":"source",isValidConnection:j,doc:F,lib:p,flowId:y,nodeLookup:g});U=ye.handleDomNode,Q=ye.connection,R=E6(!!P,ye.isValid);const Se=g.get(l),De=Se?Ei(Se,ne,pe.Left,!0):ce.from,_e={...ce,from:De,isValid:R,to:ye.toHandle&&R?_c({x:ye.toHandle.x,y:ye.toHandle.y},he):V,toHandle:ye.toHandle,toPosition:R&&ye.toHandle?ye.toHandle.position:Cy[ne.position],toNode:ye.toHandle?g.get(ye.toHandle.nodeId):null,pointer:V};S(_e),ce=_e}function ve(be){if(!("touches"in be&&be.touches.length>0)){if(z){(P||U)&&Q&&R&&A?.(Q);const{inProgress:he,...ye}=ce,Se={...ye,toPosition:ce.toHandle?ce.toPosition:null};w?.(be,Se),u&&_?.(be,Se)}N(),cancelAnimationFrame(se),O=!1,R=!1,Q=null,U=null,F.removeEventListener("mousemove",de),F.removeEventListener("mouseup",ve),F.removeEventListener("touchmove",de),F.removeEventListener("touchend",ve)}}F.addEventListener("mousemove",de),F.addEventListener("mouseup",ve),F.addEventListener("touchmove",de),F.addEventListener("touchend",ve)}function y1(t,{handle:a,connectionMode:i,fromNodeId:s,fromHandleId:l,fromType:u,doc:f,lib:m,flowId:g,isValidConnection:p=g1,nodeLookup:x}){const y=u==="target",v=a?f.querySelector(`.${m}-flow__handle[data-id="${g}-${a?.nodeId}-${a?.id}-${a?.type}"]`):null,{x:N,y:E}=hn(t),A=f.elementFromPoint(N,E),w=A?.classList.contains(`${m}-flow__handle`)?A:v,j={handleDomNode:w,isValid:!1,connection:null,toHandle:null};if(w){const _=p1(void 0,w),S=w.getAttribute("data-nodeid"),M=w.getAttribute("data-handleid"),B=w.classList.contains("connectable"),$=w.classList.contains("connectableend");if(!S||!_)return j;const k={source:y?S:s,sourceHandle:y?M:l,target:y?s:S,targetHandle:y?l:M};j.connection=k;const F=B&&$&&(i===_r.Strict?y&&_==="source"||!y&&_==="target":S!==s||M!==l);j.isValid=F&&p(k),j.toHandle=m1(S,_,M,x,i,!0)}return j}const hh={onPointerDown:j6,isValid:y1};function _6({domNode:t,panZoom:a,getTransform:i,getViewScale:s}){const l=Vt(t);function u({translateExtent:m,width:g,height:p,zoomStep:x=1,pannable:y=!0,zoomable:v=!0,inversePan:N=!1}){const E=S=>{if(S.sourceEvent.type!=="wheel"||!a)return;const M=i(),B=S.sourceEvent.ctrlKey&&Ks()?10:1,$=-S.sourceEvent.deltaY*(S.sourceEvent.deltaMode===1?.05:S.sourceEvent.deltaMode?1:.002)*x,k=M[2]*Math.pow(2,$*B);a.scaleTo(k)};let A=[0,0];const w=S=>{(S.sourceEvent.type==="mousedown"||S.sourceEvent.type==="touchstart")&&(A=[S.sourceEvent.clientX??S.sourceEvent.touches[0].clientX,S.sourceEvent.clientY??S.sourceEvent.touches[0].clientY])},j=S=>{const M=i();if(S.sourceEvent.type!=="mousemove"&&S.sourceEvent.type!=="touchmove"||!a)return;const B=[S.sourceEvent.clientX??S.sourceEvent.touches[0].clientX,S.sourceEvent.clientY??S.sourceEvent.touches[0].clientY],$=[B[0]-A[0],B[1]-A[1]];A=B;const k=s()*Math.max(M[2],Math.log(M[2]))*(N?-1:1),X={x:M[0]-$[0]*k,y:M[1]-$[1]*k},F=[[0,0],[g,p]];a.setViewportConstrained({x:X.x,y:X.y,zoom:M[2]},F,m)},_=Xv().on("start",w).on("zoom",y?j:null).on("zoom.wheel",v?E:null);l.call(_,{})}function f(){l.on("zoom",null)}return{update:u,destroy:f,pointer:un}}const Xc=t=>({x:t.x,y:t.y,zoom:t.k}),zf=({x:t,y:a,zoom:i})=>qc.translate(t,a).scale(i),yr=(t,a)=>t.target.closest(`.${a}`),x1=(t,a)=>a===2&&Array.isArray(t)&&t.includes(2),C6=t=>((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2,Df=(t,a=0,i=C6,s=()=>{})=>{const l=typeof a=="number"&&a>0;return l||s(),l?t.transition().duration(a).ease(i).on("end",s):t},v1=t=>{const a=t.ctrlKey&&Ks()?10:1;return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*a};function T6({zoomPanValues:t,noWheelClassName:a,d3Selection:i,d3Zoom:s,panOnScrollMode:l,panOnScrollSpeed:u,zoomOnPinch:f,onPanZoomStart:m,onPanZoom:g,onPanZoomEnd:p}){return x=>{if(yr(x,a))return x.ctrlKey&&x.preventDefault(),!1;x.preventDefault(),x.stopImmediatePropagation();const y=i.property("__zoom").k||1;if(x.ctrlKey&&f){const w=un(x),j=v1(x),_=y*Math.pow(2,j);s.scaleTo(i,_,w,x);return}const v=x.deltaMode===1?20:1;let N=l===bi.Vertical?0:x.deltaX*v,E=l===bi.Horizontal?0:x.deltaY*v;!Ks()&&x.shiftKey&&l!==bi.Vertical&&(N=x.deltaY*v,E=0),s.translateBy(i,-(N/y)*u,-(E/y)*u,{internal:!0});const A=Xc(i.property("__zoom"));clearTimeout(t.panScrollTimeout),t.isPanScrolling?(g?.(x,A),t.panScrollTimeout=setTimeout(()=>{p?.(x,A),t.isPanScrolling=!1},150)):(t.isPanScrolling=!0,m?.(x,A))}}function M6({noWheelClassName:t,preventScrolling:a,d3ZoomHandler:i}){return function(s,l){const u=s.type==="wheel",f=!a&&u&&!s.ctrlKey,m=yr(s,t);if(s.ctrlKey&&u&&m&&s.preventDefault(),f||m)return null;s.preventDefault(),i.call(this,s,l)}}function A6({zoomPanValues:t,onDraggingChange:a,onPanZoomStart:i}){return s=>{if(s.sourceEvent?.internal)return;const l=Xc(s.transform);t.mouseButton=s.sourceEvent?.button||0,t.isZoomingOrPanning=!0,t.prevViewport=l,s.sourceEvent?.type==="mousedown"&&a(!0),i&&i?.(s.sourceEvent,l)}}function R6({zoomPanValues:t,panOnDrag:a,onPaneContextMenu:i,onTransformChange:s,onPanZoom:l}){return u=>{t.usedRightMouseButton=!!(i&&x1(a,t.mouseButton??0)),u.sourceEvent?.sync||s([u.transform.x,u.transform.y,u.transform.k]),l&&!u.sourceEvent?.internal&&l?.(u.sourceEvent,Xc(u.transform))}}function z6({zoomPanValues:t,panOnDrag:a,panOnScroll:i,onDraggingChange:s,onPanZoomEnd:l,onPaneContextMenu:u}){return f=>{if(!f.sourceEvent?.internal&&(t.isZoomingOrPanning=!1,u&&x1(a,t.mouseButton??0)&&!t.usedRightMouseButton&&f.sourceEvent&&u(f.sourceEvent),t.usedRightMouseButton=!1,s(!1),l)){const m=Xc(f.transform);t.prevViewport=m,clearTimeout(t.timerId),t.timerId=setTimeout(()=>{l?.(f.sourceEvent,m)},i?150:0)}}}function D6({zoomActivationKeyPressed:t,zoomOnScroll:a,zoomOnPinch:i,panOnDrag:s,panOnScroll:l,zoomOnDoubleClick:u,userSelectionActive:f,noWheelClassName:m,noPanClassName:g,lib:p,connectionInProgress:x}){return y=>{const v=t||a,N=i&&y.ctrlKey,E=y.type==="wheel";if(y.button===1&&y.type==="mousedown"&&(yr(y,`${p}-flow__node`)||yr(y,`${p}-flow__edge`)))return!0;if(!s&&!v&&!l&&!u&&!i||f||x&&!E||yr(y,m)&&E||yr(y,g)&&(!E||l&&E&&!t)||!i&&y.ctrlKey&&E)return!1;if(!i&&y.type==="touchstart"&&y.touches?.length>1)return y.preventDefault(),!1;if(!v&&!l&&!N&&E||!s&&(y.type==="mousedown"||y.type==="touchstart")||Array.isArray(s)&&!s.includes(y.button)&&y.type==="mousedown")return!1;const A=Array.isArray(s)&&s.includes(y.button)||!y.button||y.button<=1;return(!y.ctrlKey||E)&&A}}function O6({domNode:t,minZoom:a,maxZoom:i,translateExtent:s,viewport:l,onPanZoom:u,onPanZoomStart:f,onPanZoomEnd:m,onDraggingChange:g}){const p={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},x=t.getBoundingClientRect(),y=Xv().scaleExtent([a,i]).translateExtent(s),v=Vt(t).call(y);_({x:l.x,y:l.y,zoom:Cr(l.zoom,a,i)},[[0,0],[x.width,x.height]],s);const N=v.on("wheel.zoom"),E=v.on("dblclick.zoom");y.wheelDelta(v1);function A(P,H){return v?new Promise(te=>{y?.interpolate(H?.interpolate==="linear"?qs:oc).transform(Df(v,H?.duration,H?.ease,()=>te(!0)),P)}):Promise.resolve(!1)}function w({noWheelClassName:P,noPanClassName:H,onPaneContextMenu:te,userSelectionActive:L,panOnScroll:Z,panOnDrag:z,panOnScrollMode:D,panOnScrollSpeed:V,preventScrolling:O,zoomOnPinch:Q,zoomOnScroll:R,zoomOnDoubleClick:U,zoomActivationKeyPressed:J,lib:ne,onTransformChange:oe,connectionInProgress:ue,paneClickDistance:ce,selectionOnDrag:le}){L&&!p.isZoomingOrPanning&&j();const de=Z&&!J&&!L;y.clickDistance(le?1/0:!fn(ce)||ce<0?0:ce);const ve=de?T6({zoomPanValues:p,noWheelClassName:P,d3Selection:v,d3Zoom:y,panOnScrollMode:D,panOnScrollSpeed:V,zoomOnPinch:Q,onPanZoomStart:f,onPanZoom:u,onPanZoomEnd:m}):M6({noWheelClassName:P,preventScrolling:O,d3ZoomHandler:N});if(v.on("wheel.zoom",ve,{passive:!1}),!L){const he=A6({zoomPanValues:p,onDraggingChange:g,onPanZoomStart:f});y.on("start",he);const ye=R6({zoomPanValues:p,panOnDrag:z,onPaneContextMenu:!!te,onPanZoom:u,onTransformChange:oe});y.on("zoom",ye);const Se=z6({zoomPanValues:p,panOnDrag:z,panOnScroll:Z,onPaneContextMenu:te,onPanZoomEnd:m,onDraggingChange:g});y.on("end",Se)}const be=D6({zoomActivationKeyPressed:J,panOnDrag:z,zoomOnScroll:R,panOnScroll:Z,zoomOnDoubleClick:U,zoomOnPinch:Q,userSelectionActive:L,noPanClassName:H,noWheelClassName:P,lib:ne,connectionInProgress:ue});y.filter(be),U?v.on("dblclick.zoom",E):v.on("dblclick.zoom",null)}function j(){y.on("zoom",null)}async function _(P,H,te){const L=zf(P),Z=y?.constrain()(L,H,te);return Z&&await A(Z),new Promise(z=>z(Z))}async function S(P,H){const te=zf(P);return await A(te,H),new Promise(L=>L(te))}function M(P){if(v){const H=zf(P),te=v.property("__zoom");(te.k!==P.zoom||te.x!==P.x||te.y!==P.y)&&y?.transform(v,H,null,{sync:!0})}}function B(){const P=v?Yv(v.node()):{x:0,y:0,k:1};return{x:P.x,y:P.y,zoom:P.k}}function $(P,H){return v?new Promise(te=>{y?.interpolate(H?.interpolate==="linear"?qs:oc).scaleTo(Df(v,H?.duration,H?.ease,()=>te(!0)),P)}):Promise.resolve(!1)}function k(P,H){return v?new Promise(te=>{y?.interpolate(H?.interpolate==="linear"?qs:oc).scaleBy(Df(v,H?.duration,H?.ease,()=>te(!0)),P)}):Promise.resolve(!1)}function X(P){y?.scaleExtent(P)}function F(P){y?.translateExtent(P)}function se(P){const H=!fn(P)||P<0?0:P;y?.clickDistance(H)}return{update:w,destroy:j,setViewport:S,setViewportConstrained:_,getViewport:B,scaleTo:$,scaleBy:k,setScaleExtent:X,setTranslateExtent:F,syncViewport:M,setClickDistance:se}}var Ar;(function(t){t.Line="line",t.Handle="handle"})(Ar||(Ar={}));function k6({width:t,prevWidth:a,height:i,prevHeight:s,affectsX:l,affectsY:u}){const f=t-a,m=i-s,g=[f>0?1:f<0?-1:0,m>0?1:m<0?-1:0];return f&&l&&(g[0]=g[0]*-1),m&&u&&(g[1]=g[1]*-1),g}function $y(t){const a=t.includes("right")||t.includes("left"),i=t.includes("bottom")||t.includes("top"),s=t.includes("left"),l=t.includes("top");return{isHorizontal:a,isVertical:i,affectsX:s,affectsY:l}}function Ha(t,a){return Math.max(0,a-t)}function La(t,a){return Math.max(0,t-a)}function Pl(t,a,i){return Math.max(0,a-t,t-i)}function qy(t,a){return t?!a:a}function B6(t,a,i,s,l,u,f,m){let{affectsX:g,affectsY:p}=a;const{isHorizontal:x,isVertical:y}=a,v=x&&y,{xSnapped:N,ySnapped:E}=i,{minWidth:A,maxWidth:w,minHeight:j,maxHeight:_}=s,{x:S,y:M,width:B,height:$,aspectRatio:k}=t;let X=Math.floor(x?N-t.pointerX:0),F=Math.floor(y?E-t.pointerY:0);const se=B+(g?-X:X),P=$+(p?-F:F),H=-u[0]*B,te=-u[1]*$;let L=Pl(se,A,w),Z=Pl(P,j,_);if(f){let V=0,O=0;g&&X<0?V=Ha(S+X+H,f[0][0]):!g&&X>0&&(V=La(S+se+H,f[1][0])),p&&F<0?O=Ha(M+F+te,f[0][1]):!p&&F>0&&(O=La(M+P+te,f[1][1])),L=Math.max(L,V),Z=Math.max(Z,O)}if(m){let V=0,O=0;g&&X>0?V=La(S+X,m[0][0]):!g&&X<0&&(V=Ha(S+se,m[1][0])),p&&F>0?O=La(M+F,m[0][1]):!p&&F<0&&(O=Ha(M+P,m[1][1])),L=Math.max(L,V),Z=Math.max(Z,O)}if(l){if(x){const V=Pl(se/k,j,_)*k;if(L=Math.max(L,V),f){let O=0;!g&&!p||g&&!p&&v?O=La(M+te+se/k,f[1][1])*k:O=Ha(M+te+(g?X:-X)/k,f[0][1])*k,L=Math.max(L,O)}if(m){let O=0;!g&&!p||g&&!p&&v?O=Ha(M+se/k,m[1][1])*k:O=La(M+(g?X:-X)/k,m[0][1])*k,L=Math.max(L,O)}}if(y){const V=Pl(P*k,A,w)/k;if(Z=Math.max(Z,V),f){let O=0;!g&&!p||p&&!g&&v?O=La(S+P*k+H,f[1][0])/k:O=Ha(S+(p?F:-F)*k+H,f[0][0])/k,Z=Math.max(Z,O)}if(m){let O=0;!g&&!p||p&&!g&&v?O=Ha(S+P*k,m[1][0])/k:O=La(S+(p?F:-F)*k,m[0][0])/k,Z=Math.max(Z,O)}}}F=F+(F<0?Z:-Z),X=X+(X<0?L:-L),l&&(v?se>P*k?F=(qy(g,p)?-X:X)/k:X=(qy(g,p)?-F:F)*k:x?(F=X/k,p=g):(X=F*k,g=p));const z=g?S+X:S,D=p?M+F:M;return{width:B+(g?-X:X),height:$+(p?-F:F),x:u[0]*X*(g?-1:1)+z,y:u[1]*F*(p?-1:1)+D}}const b1={width:0,height:0,x:0,y:0},H6={...b1,pointerX:0,pointerY:0,aspectRatio:1};function L6(t){return[[0,0],[t.measured.width,t.measured.height]]}function U6(t,a,i){const s=a.position.x+t.position.x,l=a.position.y+t.position.y,u=t.measured.width??0,f=t.measured.height??0,m=i[0]*u,g=i[1]*f;return[[s-m,l-g],[s+u-m,l+f-g]]}function $6({domNode:t,nodeId:a,getStoreItems:i,onChange:s,onEnd:l}){const u=Vt(t);let f={controlDirection:$y("bottom-right"),boundaries:{minWidth:0,minHeight:0,maxWidth:Number.MAX_VALUE,maxHeight:Number.MAX_VALUE},resizeDirection:void 0,keepAspectRatio:!1};function m({controlPosition:p,boundaries:x,keepAspectRatio:y,resizeDirection:v,onResizeStart:N,onResize:E,onResizeEnd:A,shouldResize:w}){let j={...b1},_={...H6};f={boundaries:x,resizeDirection:v,keepAspectRatio:y,controlDirection:$y(p)};let S,M=null,B=[],$,k,X,F=!1;const se=Mv().on("start",P=>{const{nodeLookup:H,transform:te,snapGrid:L,snapToGrid:Z,nodeOrigin:z,paneDomNode:D}=i();if(S=H.get(a),!S)return;M=D?.getBoundingClientRect()??null;const{xSnapped:V,ySnapped:O}=Vs(P.sourceEvent,{transform:te,snapGrid:L,snapToGrid:Z,containerBounds:M});j={width:S.measured.width??0,height:S.measured.height??0,x:S.position.x??0,y:S.position.y??0},_={...j,pointerX:V,pointerY:O,aspectRatio:j.width/j.height},$=void 0,S.parentId&&(S.extent==="parent"||S.expandParent)&&($=H.get(S.parentId),k=$&&S.extent==="parent"?L6($):void 0),B=[],X=void 0;for(const[Q,R]of H)if(R.parentId===a&&(B.push({id:Q,position:{...R.position},extent:R.extent}),R.extent==="parent"||R.expandParent)){const U=U6(R,S,R.origin??z);X?X=[[Math.min(U[0][0],X[0][0]),Math.min(U[0][1],X[0][1])],[Math.max(U[1][0],X[1][0]),Math.max(U[1][1],X[1][1])]]:X=U}N?.(P,{...j})}).on("drag",P=>{const{transform:H,snapGrid:te,snapToGrid:L,nodeOrigin:Z}=i(),z=Vs(P.sourceEvent,{transform:H,snapGrid:te,snapToGrid:L,containerBounds:M}),D=[];if(!S)return;const{x:V,y:O,width:Q,height:R}=j,U={},J=S.origin??Z,{width:ne,height:oe,x:ue,y:ce}=B6(_,f.controlDirection,z,f.boundaries,f.keepAspectRatio,J,k,X),le=ne!==Q,de=oe!==R,ve=ue!==V&&le,be=ce!==O&&de;if(!ve&&!be&&!le&&!de)return;if((ve||be||J[0]===1||J[1]===1)&&(U.x=ve?ue:j.x,U.y=be?ce:j.y,j.x=U.x,j.y=U.y,B.length>0)){const De=ue-V,_e=ce-O;for(const Je of B)Je.position={x:Je.position.x-De+J[0]*(ne-Q),y:Je.position.y-_e+J[1]*(oe-R)},D.push(Je)}if((le||de)&&(U.width=le&&(!f.resizeDirection||f.resizeDirection==="horizontal")?ne:j.width,U.height=de&&(!f.resizeDirection||f.resizeDirection==="vertical")?oe:j.height,j.width=U.width,j.height=U.height),$&&S.expandParent){const De=J[0]*(U.width??0);U.x&&U.x<De&&(j.x=De,_.x=_.x-(U.x-De));const _e=J[1]*(U.height??0);U.y&&U.y<_e&&(j.y=_e,_.y=_.y-(U.y-_e))}const he=k6({width:j.width,prevWidth:Q,height:j.height,prevHeight:R,affectsX:f.controlDirection.affectsX,affectsY:f.controlDirection.affectsY}),ye={...j,direction:he};w?.(P,ye)!==!1&&(F=!0,E?.(P,ye),s(U,D))}).on("end",P=>{F&&(A?.(P,{...j}),l?.({...j}),F=!1)});u.call(se)}function g(){u.on(".drag",null)}return{update:m,destroy:g}}var Of={exports:{}},kf={},Bf={exports:{}},Hf={};var Vy;function q6(){if(Vy)return Hf;Vy=1;var t=eo();function a(y,v){return y===v&&(y!==0||1/y===1/v)||y!==y&&v!==v}var i=typeof Object.is=="function"?Object.is:a,s=t.useState,l=t.useEffect,u=t.useLayoutEffect,f=t.useDebugValue;function m(y,v){var N=v(),E=s({inst:{value:N,getSnapshot:v}}),A=E[0].inst,w=E[1];return u(function(){A.value=N,A.getSnapshot=v,g(A)&&w({inst:A})},[y,N,v]),l(function(){return g(A)&&w({inst:A}),y(function(){g(A)&&w({inst:A})})},[y]),f(N),N}function g(y){var v=y.getSnapshot;y=y.value;try{var N=v();return!i(y,N)}catch{return!0}}function p(y,v){return v()}var x=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?p:m;return Hf.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:x,Hf}var Yy;function V6(){return Yy||(Yy=1,Bf.exports=q6()),Bf.exports}var Xy;function Y6(){if(Xy)return kf;Xy=1;var t=eo(),a=V6();function i(p,x){return p===x&&(p!==0||1/p===1/x)||p!==p&&x!==x}var s=typeof Object.is=="function"?Object.is:i,l=a.useSyncExternalStore,u=t.useRef,f=t.useEffect,m=t.useMemo,g=t.useDebugValue;return kf.useSyncExternalStoreWithSelector=function(p,x,y,v,N){var E=u(null);if(E.current===null){var A={hasValue:!1,value:null};E.current=A}else A=E.current;E=m(function(){function j($){if(!_){if(_=!0,S=$,$=v($),N!==void 0&&A.hasValue){var k=A.value;if(N(k,$))return M=k}return M=$}if(k=M,s(S,$))return k;var X=v($);return N!==void 0&&N(k,X)?(S=$,k):(S=$,M=X)}var _=!1,S,M,B=y===void 0?null:y;return[function(){return j(x())},B===null?void 0:function(){return j(B())}]},[x,y,v,N]);var w=l(p,E[0],E[1]);return f(function(){A.hasValue=!0,A.value=w},[w]),g(w),w},kf}var Gy;function X6(){return Gy||(Gy=1,Of.exports=Y6()),Of.exports}var G6=X6();const Z6=ph(G6),Q6={},Zy=t=>{let a;const i=new Set,s=(x,y)=>{const v=typeof x=="function"?x(a):x;if(!Object.is(v,a)){const N=a;a=y??(typeof v!="object"||v===null)?v:Object.assign({},a,v),i.forEach(E=>E(a,N))}},l=()=>a,g={setState:s,getState:l,getInitialState:()=>p,subscribe:x=>(i.add(x),()=>i.delete(x)),destroy:()=>{(Q6?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),i.clear()}},p=a=t(s,l,g);return g},P6=t=>t?Zy(t):Zy,{useDebugValue:I6}=gr,{useSyncExternalStoreWithSelector:F6}=Z6,W6=t=>t;function w1(t,a=W6,i){const s=F6(t.subscribe,t.getState,t.getServerState||t.getInitialState,a,i);return I6(s),s}const Qy=(t,a)=>{const i=P6(t),s=(l,u=a)=>w1(i,l,u);return Object.assign(s,i),s},K6=(t,a)=>t?Qy(t,a):Qy;function Ie(t,a){if(Object.is(t,a))return!0;if(typeof t!="object"||t===null||typeof a!="object"||a===null)return!1;if(t instanceof Map&&a instanceof Map){if(t.size!==a.size)return!1;for(const[s,l]of t)if(!Object.is(l,a.get(s)))return!1;return!0}if(t instanceof Set&&a instanceof Set){if(t.size!==a.size)return!1;for(const s of t)if(!a.has(s))return!1;return!0}const i=Object.keys(t);if(i.length!==Object.keys(a).length)return!1;for(const s of i)if(!Object.prototype.hasOwnProperty.call(a,s)||!Object.is(t[s],a[s]))return!1;return!0}const Gc=C.createContext(null),J6=Gc.Provider,S1=Cn.error001();function ze(t,a){const i=C.useContext(Gc);if(i===null)throw new Error(S1);return w1(i,t,a)}function Fe(){const t=C.useContext(Gc);if(t===null)throw new Error(S1);return C.useMemo(()=>({getState:t.getState,setState:t.setState,subscribe:t.subscribe}),[t])}const Py={display:"none"},eT={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},N1="react-flow__node-desc",E1="react-flow__edge-desc",tT="react-flow__aria-live",nT=t=>t.ariaLiveMessage,aT=t=>t.ariaLabelConfig;function iT({rfId:t}){const a=ze(nT);return c.jsx("div",{id:`${tT}-${t}`,"aria-live":"assertive","aria-atomic":"true",style:eT,children:a})}function rT({rfId:t,disableKeyboardA11y:a}){const i=ze(aT);return c.jsxs(c.Fragment,{children:[c.jsx("div",{id:`${N1}-${t}`,style:Py,children:a?i["node.a11yDescription.default"]:i["node.a11yDescription.keyboardDisabled"]}),c.jsx("div",{id:`${E1}-${t}`,style:Py,children:i["edge.a11yDescription.default"]}),!a&&c.jsx(iT,{rfId:t})]})}const Zc=C.forwardRef(({position:t="top-left",children:a,className:i,style:s,...l},u)=>{const f=`${t}`.split("-");return c.jsx("div",{className:lt(["react-flow__panel",i,...f]),style:s,ref:u,...l,children:a})});Zc.displayName="Panel";function sT({proOptions:t,position:a="bottom-right"}){return t?.hideAttribution?null:c.jsx(Zc,{position:a,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:c.jsx("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const oT=t=>{const a=[],i=[];for(const[,s]of t.nodeLookup)s.selected&&a.push(s.internals.userNode);for(const[,s]of t.edgeLookup)s.selected&&i.push(s);return{selectedNodes:a,selectedEdges:i}},Il=t=>t.id;function lT(t,a){return Ie(t.selectedNodes.map(Il),a.selectedNodes.map(Il))&&Ie(t.selectedEdges.map(Il),a.selectedEdges.map(Il))}function cT({onSelectionChange:t}){const a=Fe(),{selectedNodes:i,selectedEdges:s}=ze(oT,lT);return C.useEffect(()=>{const l={nodes:i,edges:s};t?.(l),a.getState().onSelectionChangeHandlers.forEach(u=>u(l))},[i,s,t]),null}const uT=t=>!!t.onSelectionChangeHandlers;function dT({onSelectionChange:t}){const a=ze(uT);return t||a?c.jsx(cT,{onSelectionChange:t}):null}const j1=[0,0],fT={x:0,y:0,zoom:1},hT=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","autoPanOnNodeFocus","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","connectionDragThreshold","onBeforeDelete","debug","autoPanSpeed","ariaLabelConfig","zIndexMode"],Iy=[...hT,"rfId"],mT=t=>({setNodes:t.setNodes,setEdges:t.setEdges,setMinZoom:t.setMinZoom,setMaxZoom:t.setMaxZoom,setTranslateExtent:t.setTranslateExtent,setNodeExtent:t.setNodeExtent,reset:t.reset,setDefaultNodesAndEdges:t.setDefaultNodesAndEdges}),Fy={translateExtent:Is,nodeOrigin:j1,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1"};function pT(t){const{setNodes:a,setEdges:i,setMinZoom:s,setMaxZoom:l,setTranslateExtent:u,setNodeExtent:f,reset:m,setDefaultNodesAndEdges:g}=ze(mT,Ie),p=Fe();C.useEffect(()=>(g(t.defaultNodes,t.defaultEdges),()=>{x.current=Fy,m()}),[]);const x=C.useRef(Fy);return C.useEffect(()=>{for(const y of Iy){const v=t[y],N=x.current[y];v!==N&&(typeof t[y]>"u"||(y==="nodes"?a(v):y==="edges"?i(v):y==="minZoom"?s(v):y==="maxZoom"?l(v):y==="translateExtent"?u(v):y==="nodeExtent"?f(v):y==="ariaLabelConfig"?p.setState({ariaLabelConfig:JC(v)}):y==="fitView"?p.setState({fitViewQueued:v}):y==="fitViewOptions"?p.setState({fitViewOptions:v}):p.setState({[y]:v})))}x.current=t},Iy.map(y=>t[y])),null}function Wy(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function gT(t){const[a,i]=C.useState(t==="system"?null:t);return C.useEffect(()=>{if(t!=="system"){i(t);return}const s=Wy(),l=()=>i(s?.matches?"dark":"light");return l(),s?.addEventListener("change",l),()=>{s?.removeEventListener("change",l)}},[t]),a!==null?a:Wy()?.matches?"dark":"light"}const Ky=typeof document<"u"?document:null;function Js(t=null,a={target:Ky,actInsideInputWithModifier:!0}){const[i,s]=C.useState(!1),l=C.useRef(!1),u=C.useRef(new Set([])),[f,m]=C.useMemo(()=>{if(t!==null){const p=(Array.isArray(t)?t:[t]).filter(y=>typeof y=="string").map(y=>y.replace("+",`
`).replace(`

`,`
+`).split(`
`)),x=p.reduce((y,v)=>y.concat(...v),[]);return[p,x]}return[[],[]]},[t]);return C.useEffect(()=>{const g=a?.target??Ky,p=a?.actInsideInputWithModifier??!0;if(t!==null){const x=N=>{if(l.current=N.ctrlKey||N.metaKey||N.shiftKey||N.altKey,(!l.current||l.current&&!p)&&a1(N))return!1;const A=ex(N.code,m);if(u.current.add(N[A]),Jy(f,u.current,!1)){const w=N.composedPath?.()?.[0]||N.target,j=w?.nodeName==="BUTTON"||w?.nodeName==="A";a.preventDefault!==!1&&(l.current||!j)&&N.preventDefault(),s(!0)}},y=N=>{const E=ex(N.code,m);Jy(f,u.current,!0)?(s(!1),u.current.clear()):u.current.delete(N[E]),N.key==="Meta"&&u.current.clear(),l.current=!1},v=()=>{u.current.clear(),s(!1)};return g?.addEventListener("keydown",x),g?.addEventListener("keyup",y),window.addEventListener("blur",v),window.addEventListener("contextmenu",v),()=>{g?.removeEventListener("keydown",x),g?.removeEventListener("keyup",y),window.removeEventListener("blur",v),window.removeEventListener("contextmenu",v)}}},[t,s]),i}function Jy(t,a,i){return t.filter(s=>i||s.length===a.size).some(s=>s.every(l=>a.has(l)))}function ex(t,a){return a.includes(t)?"code":"key"}const yT=()=>{const t=Fe();return C.useMemo(()=>({zoomIn:a=>{const{panZoom:i}=t.getState();return i?i.scaleBy(1.2,{duration:a?.duration}):Promise.resolve(!1)},zoomOut:a=>{const{panZoom:i}=t.getState();return i?i.scaleBy(1/1.2,{duration:a?.duration}):Promise.resolve(!1)},zoomTo:(a,i)=>{const{panZoom:s}=t.getState();return s?s.scaleTo(a,{duration:i?.duration}):Promise.resolve(!1)},getZoom:()=>t.getState().transform[2],setViewport:async(a,i)=>{const{transform:[s,l,u],panZoom:f}=t.getState();return f?(await f.setViewport({x:a.x??s,y:a.y??l,zoom:a.zoom??u},i),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[a,i,s]=t.getState().transform;return{x:a,y:i,zoom:s}},setCenter:async(a,i,s)=>t.getState().setCenter(a,i,s),fitBounds:async(a,i)=>{const{width:s,height:l,minZoom:u,maxZoom:f,panZoom:m}=t.getState(),g=$h(a,s,l,u,f,i?.padding??.1);return m?(await m.setViewport(g,{duration:i?.duration,ease:i?.ease,interpolate:i?.interpolate}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(a,i={})=>{const{transform:s,snapGrid:l,snapToGrid:u,domNode:f}=t.getState();if(!f)return a;const{x:m,y:g}=f.getBoundingClientRect(),p={x:a.x-m,y:a.y-g},x=i.snapGrid??l,y=i.snapToGrid??u;return uo(p,s,y,x)},flowToScreenPosition:a=>{const{transform:i,domNode:s}=t.getState();if(!s)return a;const{x:l,y:u}=s.getBoundingClientRect(),f=_c(a,i);return{x:f.x+l,y:f.y+u}}}),[])};function _1(t,a){const i=[],s=new Map,l=[];for(const u of t)if(u.type==="add"){l.push(u);continue}else if(u.type==="remove"||u.type==="replace")s.set(u.id,[u]);else{const f=s.get(u.id);f?f.push(u):s.set(u.id,[u])}for(const u of a){const f=s.get(u.id);if(!f){i.push(u);continue}if(f[0].type==="remove")continue;if(f[0].type==="replace"){i.push({...f[0].item});continue}const m={...u};for(const g of f)xT(g,m);i.push(m)}return l.length&&l.forEach(u=>{u.index!==void 0?i.splice(u.index,0,{...u.item}):i.push({...u.item})}),i}function xT(t,a){switch(t.type){case"select":{a.selected=t.selected;break}case"position":{typeof t.position<"u"&&(a.position=t.position),typeof t.dragging<"u"&&(a.dragging=t.dragging);break}case"dimensions":{typeof t.dimensions<"u"&&(a.measured={...t.dimensions},t.setAttributes&&((t.setAttributes===!0||t.setAttributes==="width")&&(a.width=t.dimensions.width),(t.setAttributes===!0||t.setAttributes==="height")&&(a.height=t.dimensions.height))),typeof t.resizing=="boolean"&&(a.resizing=t.resizing);break}}}function C1(t,a){return _1(t,a)}function T1(t,a){return _1(t,a)}function pi(t,a){return{id:t,type:"select",selected:a}}function xr(t,a=new Set,i=!1){const s=[];for(const[l,u]of t){const f=a.has(l);!(u.selected===void 0&&!f)&&u.selected!==f&&(i&&(u.selected=f),s.push(pi(u.id,f)))}return s}function tx({items:t=[],lookup:a}){const i=[],s=new Map(t.map(l=>[l.id,l]));for(const[l,u]of t.entries()){const f=a.get(u.id),m=f?.internals?.userNode??f;m!==void 0&&m!==u&&i.push({id:u.id,item:u,type:"replace"}),m===void 0&&i.push({item:u,type:"add",index:l})}for(const[l]of a)s.get(l)===void 0&&i.push({id:l,type:"remove"});return i}function nx(t){return{id:t.id,type:"remove"}}const ax=t=>YC(t),vT=t=>Iv(t);function M1(t){return C.forwardRef(t)}const bT=typeof window<"u"?C.useLayoutEffect:C.useEffect;function ix(t){const[a,i]=C.useState(BigInt(0)),[s]=C.useState(()=>wT(()=>i(l=>l+BigInt(1))));return bT(()=>{const l=s.get();l.length&&(t(l),s.reset())},[a]),s}function wT(t){let a=[];return{get:()=>a,reset:()=>{a=[]},push:i=>{a.push(i),t()}}}const A1=C.createContext(null);function ST({children:t}){const a=Fe(),i=C.useCallback(m=>{const{nodes:g=[],setNodes:p,hasDefaultNodes:x,onNodesChange:y,nodeLookup:v,fitViewQueued:N,onNodesChangeMiddlewareMap:E}=a.getState();let A=g;for(const j of m)A=typeof j=="function"?j(A):j;let w=tx({items:A,lookup:v});for(const j of E.values())w=j(w);x&&p(A),w.length>0?y?.(w):N&&window.requestAnimationFrame(()=>{const{fitViewQueued:j,nodes:_,setNodes:S}=a.getState();j&&S(_)})},[]),s=ix(i),l=C.useCallback(m=>{const{edges:g=[],setEdges:p,hasDefaultEdges:x,onEdgesChange:y,edgeLookup:v}=a.getState();let N=g;for(const E of m)N=typeof E=="function"?E(N):E;x?p(N):y&&y(tx({items:N,lookup:v}))},[]),u=ix(l),f=C.useMemo(()=>({nodeQueue:s,edgeQueue:u}),[]);return c.jsx(A1.Provider,{value:f,children:t})}function NT(){const t=C.useContext(A1);if(!t)throw new Error("useBatchContext must be used within a BatchProvider");return t}const ET=t=>!!t.panZoom;function Qh(){const t=yT(),a=Fe(),i=NT(),s=ze(ET),l=C.useMemo(()=>{const u=y=>a.getState().nodeLookup.get(y),f=y=>{i.nodeQueue.push(y)},m=y=>{i.edgeQueue.push(y)},g=y=>{const{nodeLookup:v,nodeOrigin:N}=a.getState(),E=ax(y)?y:v.get(y.id),A=E.parentId?t1(E.position,E.measured,E.parentId,v,N):E.position,w={...E,position:A,width:E.measured?.width??E.width,height:E.measured?.height??E.height};return Tr(w)},p=(y,v,N={replace:!1})=>{f(E=>E.map(A=>{if(A.id===y){const w=typeof v=="function"?v(A):v;return N.replace&&ax(w)?w:{...A,...w}}return A}))},x=(y,v,N={replace:!1})=>{m(E=>E.map(A=>{if(A.id===y){const w=typeof v=="function"?v(A):v;return N.replace&&vT(w)?w:{...A,...w}}return A}))};return{getNodes:()=>a.getState().nodes.map(y=>({...y})),getNode:y=>u(y)?.internals.userNode,getInternalNode:u,getEdges:()=>{const{edges:y=[]}=a.getState();return y.map(v=>({...v}))},getEdge:y=>a.getState().edgeLookup.get(y),setNodes:f,setEdges:m,addNodes:y=>{const v=Array.isArray(y)?y:[y];i.nodeQueue.push(N=>[...N,...v])},addEdges:y=>{const v=Array.isArray(y)?y:[y];i.edgeQueue.push(N=>[...N,...v])},toObject:()=>{const{nodes:y=[],edges:v=[],transform:N}=a.getState(),[E,A,w]=N;return{nodes:y.map(j=>({...j})),edges:v.map(j=>({...j})),viewport:{x:E,y:A,zoom:w}}},deleteElements:async({nodes:y=[],edges:v=[]})=>{const{nodes:N,edges:E,onNodesDelete:A,onEdgesDelete:w,triggerNodeChanges:j,triggerEdgeChanges:_,onDelete:S,onBeforeDelete:M}=a.getState(),{nodes:B,edges:$}=await PC({nodesToRemove:y,edgesToRemove:v,nodes:N,edges:E,onBeforeDelete:M}),k=$.length>0,X=B.length>0;if(k){const F=$.map(nx);w?.($),_(F)}if(X){const F=B.map(nx);A?.(B),j(F)}return(X||k)&&S?.({nodes:B,edges:$}),{deletedNodes:B,deletedEdges:$}},getIntersectingNodes:(y,v=!0,N)=>{const E=My(y),A=E?y:g(y),w=N!==void 0;return A?(N||a.getState().nodes).filter(j=>{const _=a.getState().nodeLookup.get(j.id);if(_&&!E&&(j.id===y.id||!_.internals.positionAbsolute))return!1;const S=Tr(w?j:_),M=Ws(S,A);return v&&M>0||M>=S.width*S.height||M>=A.width*A.height}):[]},isNodeIntersecting:(y,v,N=!0)=>{const A=My(y)?y:g(y);if(!A)return!1;const w=Ws(A,v);return N&&w>0||w>=v.width*v.height||w>=A.width*A.height},updateNode:p,updateNodeData:(y,v,N={replace:!1})=>{p(y,E=>{const A=typeof v=="function"?v(E):v;return N.replace?{...E,data:A}:{...E,data:{...E.data,...A}}},N)},updateEdge:x,updateEdgeData:(y,v,N={replace:!1})=>{x(y,E=>{const A=typeof v=="function"?v(E):v;return N.replace?{...E,data:A}:{...E,data:{...E.data,...A}}},N)},getNodesBounds:y=>{const{nodeLookup:v,nodeOrigin:N}=a.getState();return XC(y,{nodeLookup:v,nodeOrigin:N})},getHandleConnections:({type:y,id:v,nodeId:N})=>Array.from(a.getState().connectionLookup.get(`${N}-${y}${v?`-${v}`:""}`)?.values()??[]),getNodeConnections:({type:y,handleId:v,nodeId:N})=>Array.from(a.getState().connectionLookup.get(`${N}${y?v?`-${y}-${v}`:`-${y}`:""}`)?.values()??[]),fitView:async y=>{const v=a.getState().fitViewResolver??KC();return a.setState({fitViewQueued:!0,fitViewOptions:y,fitViewResolver:v}),i.nodeQueue.push(N=>[...N]),v.promise}}},[]);return C.useMemo(()=>({...l,...t,viewportInitialized:s}),[s])}const rx=t=>t.selected,jT=typeof window<"u"?window:void 0;function _T({deleteKeyCode:t,multiSelectionKeyCode:a}){const i=Fe(),{deleteElements:s}=Qh(),l=Js(t,{actInsideInputWithModifier:!1}),u=Js(a,{target:jT});C.useEffect(()=>{if(l){const{edges:f,nodes:m}=i.getState();s({nodes:m.filter(rx),edges:f.filter(rx)}),i.setState({nodesSelectionActive:!1})}},[l]),C.useEffect(()=>{i.setState({multiSelectionActive:u})},[u])}function CT(t){const a=Fe();C.useEffect(()=>{const i=()=>{if(!t.current||!(t.current.checkVisibility?.()??!0))return!1;const s=qh(t.current);(s.height===0||s.width===0)&&a.getState().onError?.("004",Cn.error004()),a.setState({width:s.width||500,height:s.height||500})};if(t.current){i(),window.addEventListener("resize",i);const s=new ResizeObserver(()=>i());return s.observe(t.current),()=>{window.removeEventListener("resize",i),s&&t.current&&s.unobserve(t.current)}}},[])}const Qc={position:"absolute",width:"100%",height:"100%",top:0,left:0},TT=t=>({userSelectionActive:t.userSelectionActive,lib:t.lib,connectionInProgress:t.connection.inProgress});function MT({onPaneContextMenu:t,zoomOnScroll:a=!0,zoomOnPinch:i=!0,panOnScroll:s=!1,panOnScrollSpeed:l=.5,panOnScrollMode:u=bi.Free,zoomOnDoubleClick:f=!0,panOnDrag:m=!0,defaultViewport:g,translateExtent:p,minZoom:x,maxZoom:y,zoomActivationKeyCode:v,preventScrolling:N=!0,children:E,noWheelClassName:A,noPanClassName:w,onViewportChange:j,isControlledViewport:_,paneClickDistance:S,selectionOnDrag:M}){const B=Fe(),$=C.useRef(null),{userSelectionActive:k,lib:X,connectionInProgress:F}=ze(TT,Ie),se=Js(v),P=C.useRef();CT($);const H=C.useCallback(te=>{j?.({x:te[0],y:te[1],zoom:te[2]}),_||B.setState({transform:te})},[j,_]);return C.useEffect(()=>{if($.current){P.current=O6({domNode:$.current,minZoom:x,maxZoom:y,translateExtent:p,viewport:g,onDraggingChange:z=>B.setState({paneDragging:z}),onPanZoomStart:(z,D)=>{const{onViewportChangeStart:V,onMoveStart:O}=B.getState();O?.(z,D),V?.(D)},onPanZoom:(z,D)=>{const{onViewportChange:V,onMove:O}=B.getState();O?.(z,D),V?.(D)},onPanZoomEnd:(z,D)=>{const{onViewportChangeEnd:V,onMoveEnd:O}=B.getState();O?.(z,D),V?.(D)}});const{x:te,y:L,zoom:Z}=P.current.getViewport();return B.setState({panZoom:P.current,transform:[te,L,Z],domNode:$.current.closest(".react-flow")}),()=>{P.current?.destroy()}}},[]),C.useEffect(()=>{P.current?.update({onPaneContextMenu:t,zoomOnScroll:a,zoomOnPinch:i,panOnScroll:s,panOnScrollSpeed:l,panOnScrollMode:u,zoomOnDoubleClick:f,panOnDrag:m,zoomActivationKeyPressed:se,preventScrolling:N,noPanClassName:w,userSelectionActive:k,noWheelClassName:A,lib:X,onTransformChange:H,connectionInProgress:F,selectionOnDrag:M,paneClickDistance:S})},[t,a,i,s,l,u,f,m,se,N,w,k,A,X,H,F,M,S]),c.jsx("div",{className:"react-flow__renderer",ref:$,style:Qc,children:E})}const AT=t=>({userSelectionActive:t.userSelectionActive,userSelectionRect:t.userSelectionRect});function RT(){const{userSelectionActive:t,userSelectionRect:a}=ze(AT,Ie);return t&&a?c.jsx("div",{className:"react-flow__selection react-flow__container",style:{width:a.width,height:a.height,transform:`translate(${a.x}px, ${a.y}px)`}}):null}const Lf=(t,a)=>i=>{i.target===a.current&&t?.(i)},zT=t=>({userSelectionActive:t.userSelectionActive,elementsSelectable:t.elementsSelectable,connectionInProgress:t.connection.inProgress,dragging:t.paneDragging});function DT({isSelecting:t,selectionKeyPressed:a,selectionMode:i=Fs.Full,panOnDrag:s,paneClickDistance:l,selectionOnDrag:u,onSelectionStart:f,onSelectionEnd:m,onPaneClick:g,onPaneContextMenu:p,onPaneScroll:x,onPaneMouseEnter:y,onPaneMouseMove:v,onPaneMouseLeave:N,children:E}){const A=Fe(),{userSelectionActive:w,elementsSelectable:j,dragging:_,connectionInProgress:S}=ze(zT,Ie),M=j&&(t||w),B=C.useRef(null),$=C.useRef(),k=C.useRef(new Set),X=C.useRef(new Set),F=C.useRef(!1),se=V=>{if(F.current||S){F.current=!1;return}g?.(V),A.getState().resetSelectedElements(),A.setState({nodesSelectionActive:!1})},P=V=>{if(Array.isArray(s)&&s?.includes(2)){V.preventDefault();return}p?.(V)},H=x?V=>x(V):void 0,te=V=>{F.current&&(V.stopPropagation(),F.current=!1)},L=V=>{const{domNode:O}=A.getState();if($.current=O?.getBoundingClientRect(),!$.current)return;const Q=V.target===B.current;if(!Q&&!!V.target.closest(".nokey")||!t||!(u&&Q||a)||V.button!==0||!V.isPrimary)return;V.target?.setPointerCapture?.(V.pointerId),F.current=!1;const{x:J,y:ne}=hn(V.nativeEvent,$.current);A.setState({userSelectionRect:{width:0,height:0,startX:J,startY:ne,x:J,y:ne}}),Q||(V.stopPropagation(),V.preventDefault())},Z=V=>{const{userSelectionRect:O,transform:Q,nodeLookup:R,edgeLookup:U,connectionLookup:J,triggerNodeChanges:ne,triggerEdgeChanges:oe,defaultEdgeOptions:ue,resetSelectedElements:ce}=A.getState();if(!$.current||!O)return;const{x:le,y:de}=hn(V.nativeEvent,$.current),{startX:ve,startY:be}=O;if(!F.current){const _e=a?0:l;if(Math.hypot(le-ve,de-be)<=_e)return;ce(),f?.(V)}F.current=!0;const he={startX:ve,startY:be,x:le<ve?le:ve,y:de<be?de:be,width:Math.abs(le-ve),height:Math.abs(de-be)},ye=k.current,Se=X.current;k.current=new Set(Uh(R,he,Q,i===Fs.Partial,!0).map(_e=>_e.id)),X.current=new Set;const De=ue?.selectable??!0;for(const _e of k.current){const Je=J.get(_e);if(Je)for(const{edgeId:Et}of Je.values()){const xt=U.get(Et);xt&&(xt.selectable??De)&&X.current.add(Et)}}if(!Ay(ye,k.current)){const _e=xr(R,k.current,!0);ne(_e)}if(!Ay(Se,X.current)){const _e=xr(U,X.current);oe(_e)}A.setState({userSelectionRect:he,userSelectionActive:!0,nodesSelectionActive:!1})},z=V=>{V.button===0&&(V.target?.releasePointerCapture?.(V.pointerId),!w&&V.target===B.current&&A.getState().userSelectionRect&&se?.(V),A.setState({userSelectionActive:!1,userSelectionRect:null}),F.current&&(m?.(V),A.setState({nodesSelectionActive:k.current.size>0})))},D=s===!0||Array.isArray(s)&&s.includes(0);return c.jsxs("div",{className:lt(["react-flow__pane",{draggable:D,dragging:_,selection:t}]),onClick:M?void 0:Lf(se,B),onContextMenu:Lf(P,B),onWheel:Lf(H,B),onPointerEnter:M?void 0:y,onPointerMove:M?Z:v,onPointerUp:M?z:void 0,onPointerDownCapture:M?L:void 0,onClickCapture:M?te:void 0,onPointerLeave:N,ref:B,style:Qc,children:[E,c.jsx(RT,{})]})}function mh({id:t,store:a,unselect:i=!1,nodeRef:s}){const{addSelectedNodes:l,unselectNodesAndEdges:u,multiSelectionActive:f,nodeLookup:m,onError:g}=a.getState(),p=m.get(t);if(!p){g?.("012",Cn.error012(t));return}a.setState({nodesSelectionActive:!1}),p.selected?(i||p.selected&&f)&&(u({nodes:[p],edges:[]}),requestAnimationFrame(()=>s?.current?.blur())):l([t])}function R1({nodeRef:t,disabled:a=!1,noDragClassName:i,handleSelector:s,nodeId:l,isSelectable:u,nodeClickDistance:f}){const m=Fe(),[g,p]=C.useState(!1),x=C.useRef();return C.useEffect(()=>{x.current=b6({getStoreItems:()=>m.getState(),onNodeMouseDown:y=>{mh({id:y,store:m,nodeRef:t})},onDragStart:()=>{p(!0)},onDragStop:()=>{p(!1)}})},[]),C.useEffect(()=>{if(a)x.current?.destroy();else if(t.current)return x.current?.update({noDragClassName:i,handleSelector:s,domNode:t.current,isSelectable:u,nodeId:l,nodeClickDistance:f}),()=>{x.current?.destroy()}},[i,s,a,u,t,l]),g}const OT=t=>a=>a.selected&&(a.draggable||t&&typeof a.draggable>"u");function z1(){const t=Fe();return C.useCallback(i=>{const{nodeExtent:s,snapToGrid:l,snapGrid:u,nodesDraggable:f,onError:m,updateNodePositions:g,nodeLookup:p,nodeOrigin:x}=t.getState(),y=new Map,v=OT(f),N=l?u[0]:5,E=l?u[1]:5,A=i.direction.x*N*i.factor,w=i.direction.y*E*i.factor;for(const[,j]of p){if(!v(j))continue;let _={x:j.internals.positionAbsolute.x+A,y:j.internals.positionAbsolute.y+w};l&&(_=co(_,u));const{position:S,positionAbsolute:M}=Fv({nodeId:j.id,nextPosition:_,nodeLookup:p,nodeExtent:s,nodeOrigin:x,onError:m});j.position=S,j.internals.positionAbsolute=M,y.set(j.id,j)}g(y)},[])}const Ph=C.createContext(null),kT=Ph.Provider;Ph.Consumer;const D1=()=>C.useContext(Ph),BT=t=>({connectOnClick:t.connectOnClick,noPanClassName:t.noPanClassName,rfId:t.rfId}),HT=(t,a,i)=>s=>{const{connectionClickStartHandle:l,connectionMode:u,connection:f}=s,{fromHandle:m,toHandle:g,isValid:p}=f,x=g?.nodeId===t&&g?.id===a&&g?.type===i;return{connectingFrom:m?.nodeId===t&&m?.id===a&&m?.type===i,connectingTo:x,clickConnecting:l?.nodeId===t&&l?.id===a&&l?.type===i,isPossibleEndHandle:u===_r.Strict?m?.type!==i:t!==m?.nodeId||a!==m?.id,connectionInProcess:!!m,clickConnectionInProcess:!!l,valid:x&&p}};function LT({type:t="source",position:a=pe.Top,isValidConnection:i,isConnectable:s=!0,isConnectableStart:l=!0,isConnectableEnd:u=!0,id:f,onConnect:m,children:g,className:p,onMouseDown:x,onTouchStart:y,...v},N){const E=f||null,A=t==="target",w=Fe(),j=D1(),{connectOnClick:_,noPanClassName:S,rfId:M}=ze(BT,Ie),{connectingFrom:B,connectingTo:$,clickConnecting:k,isPossibleEndHandle:X,connectionInProcess:F,clickConnectionInProcess:se,valid:P}=ze(HT(j,E,t),Ie);j||w.getState().onError?.("010",Cn.error010());const H=Z=>{const{defaultEdgeOptions:z,onConnect:D,hasDefaultEdges:V}=w.getState(),O={...z,...Z};if(V){const{edges:Q,setEdges:R}=w.getState();R(l1(O,Q))}D?.(O),m?.(O)},te=Z=>{if(!j)return;const z=i1(Z.nativeEvent);if(l&&(z&&Z.button===0||!z)){const D=w.getState();hh.onPointerDown(Z.nativeEvent,{handleDomNode:Z.currentTarget,autoPanOnConnect:D.autoPanOnConnect,connectionMode:D.connectionMode,connectionRadius:D.connectionRadius,domNode:D.domNode,nodeLookup:D.nodeLookup,lib:D.lib,isTarget:A,handleId:E,nodeId:j,flowId:D.rfId,panBy:D.panBy,cancelConnection:D.cancelConnection,onConnectStart:D.onConnectStart,onConnectEnd:D.onConnectEnd,updateConnection:D.updateConnection,onConnect:H,isValidConnection:i||D.isValidConnection,getTransform:()=>w.getState().transform,getFromHandle:()=>w.getState().connection.fromHandle,autoPanSpeed:D.autoPanSpeed,dragThreshold:D.connectionDragThreshold})}z?x?.(Z):y?.(Z)},L=Z=>{const{onClickConnectStart:z,onClickConnectEnd:D,connectionClickStartHandle:V,connectionMode:O,isValidConnection:Q,lib:R,rfId:U,nodeLookup:J,connection:ne}=w.getState();if(!j||!V&&!l)return;if(!V){z?.(Z.nativeEvent,{nodeId:j,handleId:E,handleType:t}),w.setState({connectionClickStartHandle:{nodeId:j,type:t,id:E}});return}const oe=n1(Z.target),ue=i||Q,{connection:ce,isValid:le}=hh.isValid(Z.nativeEvent,{handle:{nodeId:j,id:E,type:t},connectionMode:O,fromNodeId:V.nodeId,fromHandleId:V.id||null,fromType:V.type,isValidConnection:ue,flowId:U,doc:oe,lib:R,nodeLookup:J});le&&ce&&H(ce);const de=structuredClone(ne);delete de.inProgress,de.toPosition=de.toHandle?de.toHandle.position:null,D?.(Z,de),w.setState({connectionClickStartHandle:null})};return c.jsx("div",{"data-handleid":E,"data-nodeid":j,"data-handlepos":a,"data-id":`${M}-${j}-${E}-${t}`,className:lt(["react-flow__handle",`react-flow__handle-${a}`,"nodrag",S,p,{source:!A,target:A,connectable:s,connectablestart:l,connectableend:u,clickconnecting:k,connectingfrom:B,connectingto:$,valid:P,connectionindicator:s&&(!F||X)&&(F||se?u:l)}]),onMouseDown:te,onTouchStart:te,onClick:_?L:void 0,ref:N,...v,children:g})}const Rr=C.memo(M1(LT));function UT({data:t,isConnectable:a,sourcePosition:i=pe.Bottom}){return c.jsxs(c.Fragment,{children:[t?.label,c.jsx(Rr,{type:"source",position:i,isConnectable:a})]})}function $T({data:t,isConnectable:a,targetPosition:i=pe.Top,sourcePosition:s=pe.Bottom}){return c.jsxs(c.Fragment,{children:[c.jsx(Rr,{type:"target",position:i,isConnectable:a}),t?.label,c.jsx(Rr,{type:"source",position:s,isConnectable:a})]})}function qT(){return null}function VT({data:t,isConnectable:a,targetPosition:i=pe.Top}){return c.jsxs(c.Fragment,{children:[c.jsx(Rr,{type:"target",position:i,isConnectable:a}),t?.label]})}const Cc={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},sx={input:UT,default:$T,output:VT,group:qT};function YT(t){return t.internals.handleBounds===void 0?{width:t.width??t.initialWidth??t.style?.width,height:t.height??t.initialHeight??t.style?.height}:{width:t.width??t.style?.width,height:t.height??t.style?.height}}const XT=t=>{const{width:a,height:i,x:s,y:l}=lo(t.nodeLookup,{filter:u=>!!u.selected});return{width:fn(a)?a:null,height:fn(i)?i:null,userSelectionActive:t.userSelectionActive,transformString:`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]}) translate(${s}px,${l}px)`}};function GT({onSelectionContextMenu:t,noPanClassName:a,disableKeyboardA11y:i}){const s=Fe(),{width:l,height:u,transformString:f,userSelectionActive:m}=ze(XT,Ie),g=z1(),p=C.useRef(null);if(C.useEffect(()=>{i||p.current?.focus({preventScroll:!0})},[i]),R1({nodeRef:p}),m||!l||!u)return null;const x=t?v=>{const N=s.getState().nodes.filter(E=>E.selected);t(v,N)}:void 0,y=v=>{Object.prototype.hasOwnProperty.call(Cc,v.key)&&(v.preventDefault(),g({direction:Cc[v.key],factor:v.shiftKey?4:1}))};return c.jsx("div",{className:lt(["react-flow__nodesselection","react-flow__container",a]),style:{transform:f},children:c.jsx("div",{ref:p,className:"react-flow__nodesselection-rect",onContextMenu:x,tabIndex:i?void 0:-1,onKeyDown:i?void 0:y,style:{width:l,height:u}})})}const ox=typeof window<"u"?window:void 0,ZT=t=>({nodesSelectionActive:t.nodesSelectionActive,userSelectionActive:t.userSelectionActive});function O1({children:t,onPaneClick:a,onPaneMouseEnter:i,onPaneMouseMove:s,onPaneMouseLeave:l,onPaneContextMenu:u,onPaneScroll:f,paneClickDistance:m,deleteKeyCode:g,selectionKeyCode:p,selectionOnDrag:x,selectionMode:y,onSelectionStart:v,onSelectionEnd:N,multiSelectionKeyCode:E,panActivationKeyCode:A,zoomActivationKeyCode:w,elementsSelectable:j,zoomOnScroll:_,zoomOnPinch:S,panOnScroll:M,panOnScrollSpeed:B,panOnScrollMode:$,zoomOnDoubleClick:k,panOnDrag:X,defaultViewport:F,translateExtent:se,minZoom:P,maxZoom:H,preventScrolling:te,onSelectionContextMenu:L,noWheelClassName:Z,noPanClassName:z,disableKeyboardA11y:D,onViewportChange:V,isControlledViewport:O}){const{nodesSelectionActive:Q,userSelectionActive:R}=ze(ZT,Ie),U=Js(p,{target:ox}),J=Js(A,{target:ox}),ne=J||X,oe=J||M,ue=x&&ne!==!0,ce=U||R||ue;return _T({deleteKeyCode:g,multiSelectionKeyCode:E}),c.jsx(MT,{onPaneContextMenu:u,elementsSelectable:j,zoomOnScroll:_,zoomOnPinch:S,panOnScroll:oe,panOnScrollSpeed:B,panOnScrollMode:$,zoomOnDoubleClick:k,panOnDrag:!U&&ne,defaultViewport:F,translateExtent:se,minZoom:P,maxZoom:H,zoomActivationKeyCode:w,preventScrolling:te,noWheelClassName:Z,noPanClassName:z,onViewportChange:V,isControlledViewport:O,paneClickDistance:m,selectionOnDrag:ue,children:c.jsxs(DT,{onSelectionStart:v,onSelectionEnd:N,onPaneClick:a,onPaneMouseEnter:i,onPaneMouseMove:s,onPaneMouseLeave:l,onPaneContextMenu:u,onPaneScroll:f,panOnDrag:ne,isSelecting:!!ce,selectionMode:y,selectionKeyPressed:U,paneClickDistance:m,selectionOnDrag:ue,children:[t,Q&&c.jsx(GT,{onSelectionContextMenu:L,noPanClassName:z,disableKeyboardA11y:D})]})})}O1.displayName="FlowRenderer";const QT=C.memo(O1),PT=t=>a=>t?Uh(a.nodeLookup,{x:0,y:0,width:a.width,height:a.height},a.transform,!0).map(i=>i.id):Array.from(a.nodeLookup.keys());function IT(t){return ze(C.useCallback(PT(t),[t]),Ie)}const FT=t=>t.updateNodeInternals;function WT(){const t=ze(FT),[a]=C.useState(()=>typeof ResizeObserver>"u"?null:new ResizeObserver(i=>{const s=new Map;i.forEach(l=>{const u=l.target.getAttribute("data-id");s.set(u,{id:u,nodeElement:l.target,force:!0})}),t(s)}));return C.useEffect(()=>()=>{a?.disconnect()},[a]),a}function KT({node:t,nodeType:a,hasDimensions:i,resizeObserver:s}){const l=Fe(),u=C.useRef(null),f=C.useRef(null),m=C.useRef(t.sourcePosition),g=C.useRef(t.targetPosition),p=C.useRef(a),x=i&&!!t.internals.handleBounds;return C.useEffect(()=>{u.current&&!t.hidden&&(!x||f.current!==u.current)&&(f.current&&s?.unobserve(f.current),s?.observe(u.current),f.current=u.current)},[x,t.hidden]),C.useEffect(()=>()=>{f.current&&(s?.unobserve(f.current),f.current=null)},[]),C.useEffect(()=>{if(u.current){const y=p.current!==a,v=m.current!==t.sourcePosition,N=g.current!==t.targetPosition;(y||v||N)&&(p.current=a,m.current=t.sourcePosition,g.current=t.targetPosition,l.getState().updateNodeInternals(new Map([[t.id,{id:t.id,nodeElement:u.current,force:!0}]])))}},[t.id,a,t.sourcePosition,t.targetPosition]),u}function JT({id:t,onClick:a,onMouseEnter:i,onMouseMove:s,onMouseLeave:l,onContextMenu:u,onDoubleClick:f,nodesDraggable:m,elementsSelectable:g,nodesConnectable:p,nodesFocusable:x,resizeObserver:y,noDragClassName:v,noPanClassName:N,disableKeyboardA11y:E,rfId:A,nodeTypes:w,nodeClickDistance:j,onError:_}){const{node:S,internals:M,isParent:B}=ze(le=>{const de=le.nodeLookup.get(t),ve=le.parentLookup.has(t);return{node:de,internals:de.internals,isParent:ve}},Ie);let $=S.type||"default",k=w?.[$]||sx[$];k===void 0&&(_?.("003",Cn.error003($)),$="default",k=w?.default||sx.default);const X=!!(S.draggable||m&&typeof S.draggable>"u"),F=!!(S.selectable||g&&typeof S.selectable>"u"),se=!!(S.connectable||p&&typeof S.connectable>"u"),P=!!(S.focusable||x&&typeof S.focusable>"u"),H=Fe(),te=e1(S),L=KT({node:S,nodeType:$,hasDimensions:te,resizeObserver:y}),Z=R1({nodeRef:L,disabled:S.hidden||!X,noDragClassName:v,handleSelector:S.dragHandle,nodeId:t,isSelectable:F,nodeClickDistance:j}),z=z1();if(S.hidden)return null;const D=sa(S),V=YT(S),O=F||X||a||i||s||l,Q=i?le=>i(le,{...M.userNode}):void 0,R=s?le=>s(le,{...M.userNode}):void 0,U=l?le=>l(le,{...M.userNode}):void 0,J=u?le=>u(le,{...M.userNode}):void 0,ne=f?le=>f(le,{...M.userNode}):void 0,oe=le=>{const{selectNodesOnDrag:de,nodeDragThreshold:ve}=H.getState();F&&(!de||!X||ve>0)&&mh({id:t,store:H,nodeRef:L}),a&&a(le,{...M.userNode})},ue=le=>{if(!(a1(le.nativeEvent)||E)){if(Gv.includes(le.key)&&F){const de=le.key==="Escape";mh({id:t,store:H,unselect:de,nodeRef:L})}else if(X&&S.selected&&Object.prototype.hasOwnProperty.call(Cc,le.key)){le.preventDefault();const{ariaLabelConfig:de}=H.getState();H.setState({ariaLiveMessage:de["node.a11yDescription.ariaLiveMessage"]({direction:le.key.replace("Arrow","").toLowerCase(),x:~~M.positionAbsolute.x,y:~~M.positionAbsolute.y})}),z({direction:Cc[le.key],factor:le.shiftKey?4:1})}}},ce=()=>{if(E||!L.current?.matches(":focus-visible"))return;const{transform:le,width:de,height:ve,autoPanOnNodeFocus:be,setCenter:he}=H.getState();if(!be)return;Uh(new Map([[t,S]]),{x:0,y:0,width:de,height:ve},le,!0).length>0||he(S.position.x+D.width/2,S.position.y+D.height/2,{zoom:le[2]})};return c.jsx("div",{className:lt(["react-flow__node",`react-flow__node-${$}`,{[N]:X},S.className,{selected:S.selected,selectable:F,parent:B,draggable:X,dragging:Z}]),ref:L,style:{zIndex:M.z,transform:`translate(${M.positionAbsolute.x}px,${M.positionAbsolute.y}px)`,pointerEvents:O?"all":"none",visibility:te?"visible":"hidden",...S.style,...V},"data-id":t,"data-testid":`rf__node-${t}`,onMouseEnter:Q,onMouseMove:R,onMouseLeave:U,onContextMenu:J,onClick:oe,onDoubleClick:ne,onKeyDown:P?ue:void 0,tabIndex:P?0:void 0,onFocus:P?ce:void 0,role:S.ariaRole??(P?"group":void 0),"aria-roledescription":"node","aria-describedby":E?void 0:`${N1}-${A}`,"aria-label":S.ariaLabel,...S.domAttributes,children:c.jsx(kT,{value:t,children:c.jsx(k,{id:t,data:S.data,type:$,positionAbsoluteX:M.positionAbsolute.x,positionAbsoluteY:M.positionAbsolute.y,selected:S.selected??!1,selectable:F,draggable:X,deletable:S.deletable??!0,isConnectable:se,sourcePosition:S.sourcePosition,targetPosition:S.targetPosition,dragging:Z,dragHandle:S.dragHandle,zIndex:M.z,parentId:S.parentId,...D})})})}var e8=C.memo(JT);const t8=t=>({nodesDraggable:t.nodesDraggable,nodesConnectable:t.nodesConnectable,nodesFocusable:t.nodesFocusable,elementsSelectable:t.elementsSelectable,onError:t.onError});function k1(t){const{nodesDraggable:a,nodesConnectable:i,nodesFocusable:s,elementsSelectable:l,onError:u}=ze(t8,Ie),f=IT(t.onlyRenderVisibleElements),m=WT();return c.jsx("div",{className:"react-flow__nodes",style:Qc,children:f.map(g=>c.jsx(e8,{id:g,nodeTypes:t.nodeTypes,nodeExtent:t.nodeExtent,onClick:t.onNodeClick,onMouseEnter:t.onNodeMouseEnter,onMouseMove:t.onNodeMouseMove,onMouseLeave:t.onNodeMouseLeave,onContextMenu:t.onNodeContextMenu,onDoubleClick:t.onNodeDoubleClick,noDragClassName:t.noDragClassName,noPanClassName:t.noPanClassName,rfId:t.rfId,disableKeyboardA11y:t.disableKeyboardA11y,resizeObserver:m,nodesDraggable:a,nodesConnectable:i,nodesFocusable:s,elementsSelectable:l,nodeClickDistance:t.nodeClickDistance,onError:u},g))})}k1.displayName="NodeRenderer";const n8=C.memo(k1);function a8(t){return ze(C.useCallback(i=>{if(!t)return i.edges.map(l=>l.id);const s=[];if(i.width&&i.height)for(const l of i.edges){const u=i.nodeLookup.get(l.source),f=i.nodeLookup.get(l.target);u&&f&&n6({sourceNode:u,targetNode:f,width:i.width,height:i.height,transform:i.transform})&&s.push(l.id)}return s},[t]),Ie)}const i8=({color:t="none",strokeWidth:a=1})=>{const i={strokeWidth:a,...t&&{stroke:t}};return c.jsx("polyline",{className:"arrow",style:i,strokeLinecap:"round",fill:"none",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4"})},r8=({color:t="none",strokeWidth:a=1})=>{const i={strokeWidth:a,...t&&{stroke:t,fill:t}};return c.jsx("polyline",{className:"arrowclosed",style:i,strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"})},lx={[Ec.Arrow]:i8,[Ec.ArrowClosed]:r8};function s8(t){const a=Fe();return C.useMemo(()=>Object.prototype.hasOwnProperty.call(lx,t)?lx[t]:(a.getState().onError?.("009",Cn.error009(t)),null),[t])}const o8=({id:t,type:a,color:i,width:s=12.5,height:l=12.5,markerUnits:u="strokeWidth",strokeWidth:f,orient:m="auto-start-reverse"})=>{const g=s8(a);return g?c.jsx("marker",{className:"react-flow__arrowhead",id:t,markerWidth:`${s}`,markerHeight:`${l}`,viewBox:"-10 -10 20 20",markerUnits:u,orient:m,refX:"0",refY:"0",children:c.jsx(g,{color:i,strokeWidth:f})}):null},B1=({defaultColor:t,rfId:a})=>{const i=ze(u=>u.edges),s=ze(u=>u.defaultEdgeOptions),l=C.useMemo(()=>c6(i,{id:a,defaultColor:t,defaultMarkerStart:s?.markerStart,defaultMarkerEnd:s?.markerEnd}),[i,s,a,t]);return l.length?c.jsx("svg",{className:"react-flow__marker","aria-hidden":"true",children:c.jsx("defs",{children:l.map(u=>c.jsx(o8,{id:u.id,type:u.type,color:u.color,width:u.width,height:u.height,markerUnits:u.markerUnits,strokeWidth:u.strokeWidth,orient:u.orient},u.id))})}):null};B1.displayName="MarkerDefinitions";var l8=C.memo(B1);function H1({x:t,y:a,label:i,labelStyle:s,labelShowBg:l=!0,labelBgStyle:u,labelBgPadding:f=[2,4],labelBgBorderRadius:m=2,children:g,className:p,...x}){const[y,v]=C.useState({x:1,y:0,width:0,height:0}),N=lt(["react-flow__edge-textwrapper",p]),E=C.useRef(null);return C.useEffect(()=>{if(E.current){const A=E.current.getBBox();v({x:A.x,y:A.y,width:A.width,height:A.height})}},[i]),i?c.jsxs("g",{transform:`translate(${t-y.width/2} ${a-y.height/2})`,className:N,visibility:y.width?"visible":"hidden",...x,children:[l&&c.jsx("rect",{width:y.width+2*f[0],x:-f[0],y:-f[1],height:y.height+2*f[1],className:"react-flow__edge-textbg",style:u,rx:m,ry:m}),c.jsx("text",{className:"react-flow__edge-text",y:y.height/2,dy:"0.3em",ref:E,style:s,children:i}),g]}):null}H1.displayName="EdgeText";const c8=C.memo(H1);function Pc({path:t,labelX:a,labelY:i,label:s,labelStyle:l,labelShowBg:u,labelBgStyle:f,labelBgPadding:m,labelBgBorderRadius:g,interactionWidth:p=20,...x}){return c.jsxs(c.Fragment,{children:[c.jsx("path",{...x,d:t,fill:"none",className:lt(["react-flow__edge-path",x.className])}),p?c.jsx("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:p,className:"react-flow__edge-interaction"}):null,s&&fn(a)&&fn(i)?c.jsx(c8,{x:a,y:i,label:s,labelStyle:l,labelShowBg:u,labelBgStyle:f,labelBgPadding:m,labelBgBorderRadius:g}):null]})}function cx({pos:t,x1:a,y1:i,x2:s,y2:l}){return t===pe.Left||t===pe.Right?[.5*(a+s),i]:[a,.5*(i+l)]}function L1({sourceX:t,sourceY:a,sourcePosition:i=pe.Bottom,targetX:s,targetY:l,targetPosition:u=pe.Top}){const[f,m]=cx({pos:i,x1:t,y1:a,x2:s,y2:l}),[g,p]=cx({pos:u,x1:s,y1:l,x2:t,y2:a}),[x,y,v,N]=r1({sourceX:t,sourceY:a,targetX:s,targetY:l,sourceControlX:f,sourceControlY:m,targetControlX:g,targetControlY:p});return[`M${t},${a} C${f},${m} ${g},${p} ${s},${l}`,x,y,v,N]}function U1(t){return C.memo(({id:a,sourceX:i,sourceY:s,targetX:l,targetY:u,sourcePosition:f,targetPosition:m,label:g,labelStyle:p,labelShowBg:x,labelBgStyle:y,labelBgPadding:v,labelBgBorderRadius:N,style:E,markerEnd:A,markerStart:w,interactionWidth:j})=>{const[_,S,M]=L1({sourceX:i,sourceY:s,sourcePosition:f,targetX:l,targetY:u,targetPosition:m}),B=t.isInternal?void 0:a;return c.jsx(Pc,{id:B,path:_,labelX:S,labelY:M,label:g,labelStyle:p,labelShowBg:x,labelBgStyle:y,labelBgPadding:v,labelBgBorderRadius:N,style:E,markerEnd:A,markerStart:w,interactionWidth:j})})}const u8=U1({isInternal:!1}),$1=U1({isInternal:!0});u8.displayName="SimpleBezierEdge";$1.displayName="SimpleBezierEdgeInternal";function q1(t){return C.memo(({id:a,sourceX:i,sourceY:s,targetX:l,targetY:u,label:f,labelStyle:m,labelShowBg:g,labelBgStyle:p,labelBgPadding:x,labelBgBorderRadius:y,style:v,sourcePosition:N=pe.Bottom,targetPosition:E=pe.Top,markerEnd:A,markerStart:w,pathOptions:j,interactionWidth:_})=>{const[S,M,B]=uh({sourceX:i,sourceY:s,sourcePosition:N,targetX:l,targetY:u,targetPosition:E,borderRadius:j?.borderRadius,offset:j?.offset,stepPosition:j?.stepPosition}),$=t.isInternal?void 0:a;return c.jsx(Pc,{id:$,path:S,labelX:M,labelY:B,label:f,labelStyle:m,labelShowBg:g,labelBgStyle:p,labelBgPadding:x,labelBgBorderRadius:y,style:v,markerEnd:A,markerStart:w,interactionWidth:_})})}const V1=q1({isInternal:!1}),Y1=q1({isInternal:!0});V1.displayName="SmoothStepEdge";Y1.displayName="SmoothStepEdgeInternal";function X1(t){return C.memo(({id:a,...i})=>{const s=t.isInternal?void 0:a;return c.jsx(V1,{...i,id:s,pathOptions:C.useMemo(()=>({borderRadius:0,offset:i.pathOptions?.offset}),[i.pathOptions?.offset])})})}const d8=X1({isInternal:!1}),G1=X1({isInternal:!0});d8.displayName="StepEdge";G1.displayName="StepEdgeInternal";function Z1(t){return C.memo(({id:a,sourceX:i,sourceY:s,targetX:l,targetY:u,label:f,labelStyle:m,labelShowBg:g,labelBgStyle:p,labelBgPadding:x,labelBgBorderRadius:y,style:v,markerEnd:N,markerStart:E,interactionWidth:A})=>{const[w,j,_]=c1({sourceX:i,sourceY:s,targetX:l,targetY:u}),S=t.isInternal?void 0:a;return c.jsx(Pc,{id:S,path:w,labelX:j,labelY:_,label:f,labelStyle:m,labelShowBg:g,labelBgStyle:p,labelBgPadding:x,labelBgBorderRadius:y,style:v,markerEnd:N,markerStart:E,interactionWidth:A})})}const f8=Z1({isInternal:!1}),Q1=Z1({isInternal:!0});f8.displayName="StraightEdge";Q1.displayName="StraightEdgeInternal";function P1(t){return C.memo(({id:a,sourceX:i,sourceY:s,targetX:l,targetY:u,sourcePosition:f=pe.Bottom,targetPosition:m=pe.Top,label:g,labelStyle:p,labelShowBg:x,labelBgStyle:y,labelBgPadding:v,labelBgBorderRadius:N,style:E,markerEnd:A,markerStart:w,pathOptions:j,interactionWidth:_})=>{const[S,M,B]=s1({sourceX:i,sourceY:s,sourcePosition:f,targetX:l,targetY:u,targetPosition:m,curvature:j?.curvature}),$=t.isInternal?void 0:a;return c.jsx(Pc,{id:$,path:S,labelX:M,labelY:B,label:g,labelStyle:p,labelShowBg:x,labelBgStyle:y,labelBgPadding:v,labelBgBorderRadius:N,style:E,markerEnd:A,markerStart:w,interactionWidth:_})})}const h8=P1({isInternal:!1}),I1=P1({isInternal:!0});h8.displayName="BezierEdge";I1.displayName="BezierEdgeInternal";const ux={default:I1,straight:Q1,step:G1,smoothstep:Y1,simplebezier:$1},dx={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},m8=(t,a,i)=>i===pe.Left?t-a:i===pe.Right?t+a:t,p8=(t,a,i)=>i===pe.Top?t-a:i===pe.Bottom?t+a:t,fx="react-flow__edgeupdater";function hx({position:t,centerX:a,centerY:i,radius:s=10,onMouseDown:l,onMouseEnter:u,onMouseOut:f,type:m}){return c.jsx("circle",{onMouseDown:l,onMouseEnter:u,onMouseOut:f,className:lt([fx,`${fx}-${m}`]),cx:m8(a,s,t),cy:p8(i,s,t),r:s,stroke:"transparent",fill:"transparent"})}function g8({isReconnectable:t,reconnectRadius:a,edge:i,sourceX:s,sourceY:l,targetX:u,targetY:f,sourcePosition:m,targetPosition:g,onReconnect:p,onReconnectStart:x,onReconnectEnd:y,setReconnecting:v,setUpdateHover:N}){const E=Fe(),A=(M,B)=>{if(M.button!==0)return;const{autoPanOnConnect:$,domNode:k,isValidConnection:X,connectionMode:F,connectionRadius:se,lib:P,onConnectStart:H,onConnectEnd:te,cancelConnection:L,nodeLookup:Z,rfId:z,panBy:D,updateConnection:V}=E.getState(),O=B.type==="target",Q=(J,ne)=>{v(!1),y?.(J,i,B.type,ne)},R=J=>p?.(i,J),U=(J,ne)=>{v(!0),x?.(M,i,B.type),H?.(J,ne)};hh.onPointerDown(M.nativeEvent,{autoPanOnConnect:$,connectionMode:F,connectionRadius:se,domNode:k,handleId:B.id,nodeId:B.nodeId,nodeLookup:Z,isTarget:O,edgeUpdaterType:B.type,lib:P,flowId:z,cancelConnection:L,panBy:D,isValidConnection:X,onConnect:R,onConnectStart:U,onConnectEnd:te,onReconnectEnd:Q,updateConnection:V,getTransform:()=>E.getState().transform,getFromHandle:()=>E.getState().connection.fromHandle,dragThreshold:E.getState().connectionDragThreshold,handleDomNode:M.currentTarget})},w=M=>A(M,{nodeId:i.target,id:i.targetHandle??null,type:"target"}),j=M=>A(M,{nodeId:i.source,id:i.sourceHandle??null,type:"source"}),_=()=>N(!0),S=()=>N(!1);return c.jsxs(c.Fragment,{children:[(t===!0||t==="source")&&c.jsx(hx,{position:m,centerX:s,centerY:l,radius:a,onMouseDown:w,onMouseEnter:_,onMouseOut:S,type:"source"}),(t===!0||t==="target")&&c.jsx(hx,{position:g,centerX:u,centerY:f,radius:a,onMouseDown:j,onMouseEnter:_,onMouseOut:S,type:"target"})]})}function y8({id:t,edgesFocusable:a,edgesReconnectable:i,elementsSelectable:s,onClick:l,onDoubleClick:u,onContextMenu:f,onMouseEnter:m,onMouseMove:g,onMouseLeave:p,reconnectRadius:x,onReconnect:y,onReconnectStart:v,onReconnectEnd:N,rfId:E,edgeTypes:A,noPanClassName:w,onError:j,disableKeyboardA11y:_}){let S=ze(he=>he.edgeLookup.get(t));const M=ze(he=>he.defaultEdgeOptions);S=M?{...M,...S}:S;let B=S.type||"default",$=A?.[B]||ux[B];$===void 0&&(j?.("011",Cn.error011(B)),B="default",$=A?.default||ux.default);const k=!!(S.focusable||a&&typeof S.focusable>"u"),X=typeof y<"u"&&(S.reconnectable||i&&typeof S.reconnectable>"u"),F=!!(S.selectable||s&&typeof S.selectable>"u"),se=C.useRef(null),[P,H]=C.useState(!1),[te,L]=C.useState(!1),Z=Fe(),{zIndex:z,sourceX:D,sourceY:V,targetX:O,targetY:Q,sourcePosition:R,targetPosition:U}=ze(C.useCallback(he=>{const ye=he.nodeLookup.get(S.source),Se=he.nodeLookup.get(S.target);if(!ye||!Se)return{zIndex:S.zIndex,...dx};const De=l6({id:t,sourceNode:ye,targetNode:Se,sourceHandle:S.sourceHandle||null,targetHandle:S.targetHandle||null,connectionMode:he.connectionMode,onError:j});return{zIndex:t6({selected:S.selected,zIndex:S.zIndex,sourceNode:ye,targetNode:Se,elevateOnSelect:he.elevateEdgesOnSelect,zIndexMode:he.zIndexMode}),...De||dx}},[S.source,S.target,S.sourceHandle,S.targetHandle,S.selected,S.zIndex]),Ie),J=C.useMemo(()=>S.markerStart?`url('#${dh(S.markerStart,E)}')`:void 0,[S.markerStart,E]),ne=C.useMemo(()=>S.markerEnd?`url('#${dh(S.markerEnd,E)}')`:void 0,[S.markerEnd,E]);if(S.hidden||D===null||V===null||O===null||Q===null)return null;const oe=he=>{const{addSelectedEdges:ye,unselectNodesAndEdges:Se,multiSelectionActive:De}=Z.getState();F&&(Z.setState({nodesSelectionActive:!1}),S.selected&&De?(Se({nodes:[],edges:[S]}),se.current?.blur()):ye([t])),l&&l(he,S)},ue=u?he=>{u(he,{...S})}:void 0,ce=f?he=>{f(he,{...S})}:void 0,le=m?he=>{m(he,{...S})}:void 0,de=g?he=>{g(he,{...S})}:void 0,ve=p?he=>{p(he,{...S})}:void 0,be=he=>{if(!_&&Gv.includes(he.key)&&F){const{unselectNodesAndEdges:ye,addSelectedEdges:Se}=Z.getState();he.key==="Escape"?(se.current?.blur(),ye({edges:[S]})):Se([t])}};return c.jsx("svg",{style:{zIndex:z},children:c.jsxs("g",{className:lt(["react-flow__edge",`react-flow__edge-${B}`,S.className,w,{selected:S.selected,animated:S.animated,inactive:!F&&!l,updating:P,selectable:F}]),onClick:oe,onDoubleClick:ue,onContextMenu:ce,onMouseEnter:le,onMouseMove:de,onMouseLeave:ve,onKeyDown:k?be:void 0,tabIndex:k?0:void 0,role:S.ariaRole??(k?"group":"img"),"aria-roledescription":"edge","data-id":t,"data-testid":`rf__edge-${t}`,"aria-label":S.ariaLabel===null?void 0:S.ariaLabel||`Edge from ${S.source} to ${S.target}`,"aria-describedby":k?`${E1}-${E}`:void 0,ref:se,...S.domAttributes,children:[!te&&c.jsx($,{id:t,source:S.source,target:S.target,type:S.type,selected:S.selected,animated:S.animated,selectable:F,deletable:S.deletable??!0,label:S.label,labelStyle:S.labelStyle,labelShowBg:S.labelShowBg,labelBgStyle:S.labelBgStyle,labelBgPadding:S.labelBgPadding,labelBgBorderRadius:S.labelBgBorderRadius,sourceX:D,sourceY:V,targetX:O,targetY:Q,sourcePosition:R,targetPosition:U,data:S.data,style:S.style,sourceHandleId:S.sourceHandle,targetHandleId:S.targetHandle,markerStart:J,markerEnd:ne,pathOptions:"pathOptions"in S?S.pathOptions:void 0,interactionWidth:S.interactionWidth}),X&&c.jsx(g8,{edge:S,isReconnectable:X,reconnectRadius:x,onReconnect:y,onReconnectStart:v,onReconnectEnd:N,sourceX:D,sourceY:V,targetX:O,targetY:Q,sourcePosition:R,targetPosition:U,setUpdateHover:H,setReconnecting:L})]})})}var x8=C.memo(y8);const v8=t=>({edgesFocusable:t.edgesFocusable,edgesReconnectable:t.edgesReconnectable,elementsSelectable:t.elementsSelectable,connectionMode:t.connectionMode,onError:t.onError});function F1({defaultMarkerColor:t,onlyRenderVisibleElements:a,rfId:i,edgeTypes:s,noPanClassName:l,onReconnect:u,onEdgeContextMenu:f,onEdgeMouseEnter:m,onEdgeMouseMove:g,onEdgeMouseLeave:p,onEdgeClick:x,reconnectRadius:y,onEdgeDoubleClick:v,onReconnectStart:N,onReconnectEnd:E,disableKeyboardA11y:A}){const{edgesFocusable:w,edgesReconnectable:j,elementsSelectable:_,onError:S}=ze(v8,Ie),M=a8(a);return c.jsxs("div",{className:"react-flow__edges",children:[c.jsx(l8,{defaultColor:t,rfId:i}),M.map(B=>c.jsx(x8,{id:B,edgesFocusable:w,edgesReconnectable:j,elementsSelectable:_,noPanClassName:l,onReconnect:u,onContextMenu:f,onMouseEnter:m,onMouseMove:g,onMouseLeave:p,onClick:x,reconnectRadius:y,onDoubleClick:v,onReconnectStart:N,onReconnectEnd:E,rfId:i,onError:S,edgeTypes:s,disableKeyboardA11y:A},B))]})}F1.displayName="EdgeRenderer";const b8=C.memo(F1),w8=t=>`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`;function S8({children:t}){const a=ze(w8);return c.jsx("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:a},children:t})}function N8(t){const a=Qh(),i=C.useRef(!1);C.useEffect(()=>{!i.current&&a.viewportInitialized&&t&&(setTimeout(()=>t(a),1),i.current=!0)},[t,a.viewportInitialized])}const E8=t=>t.panZoom?.syncViewport;function j8(t){const a=ze(E8),i=Fe();return C.useEffect(()=>{t&&(a?.(t),i.setState({transform:[t.x,t.y,t.zoom]}))},[t,a]),null}function _8(t){return t.connection.inProgress?{...t.connection,to:uo(t.connection.to,t.transform)}:{...t.connection}}function C8(t){return _8}function T8(t){const a=C8();return ze(a,Ie)}const M8=t=>({nodesConnectable:t.nodesConnectable,isValid:t.connection.isValid,inProgress:t.connection.inProgress,width:t.width,height:t.height});function A8({containerStyle:t,style:a,type:i,component:s}){const{nodesConnectable:l,width:u,height:f,isValid:m,inProgress:g}=ze(M8,Ie);return!(u&&l&&g)?null:c.jsx("svg",{style:t,width:u,height:f,className:"react-flow__connectionline react-flow__container",children:c.jsx("g",{className:lt(["react-flow__connection",Pv(m)]),children:c.jsx(W1,{style:a,type:i,CustomComponent:s,isValid:m})})})}const W1=({style:t,type:a=Ua.Bezier,CustomComponent:i,isValid:s})=>{const{inProgress:l,from:u,fromNode:f,fromHandle:m,fromPosition:g,to:p,toNode:x,toHandle:y,toPosition:v,pointer:N}=T8();if(!l)return;if(i)return c.jsx(i,{connectionLineType:a,connectionLineStyle:t,fromNode:f,fromHandle:m,fromX:u.x,fromY:u.y,toX:p.x,toY:p.y,fromPosition:g,toPosition:v,connectionStatus:Pv(s),toNode:x,toHandle:y,pointer:N});let E="";const A={sourceX:u.x,sourceY:u.y,sourcePosition:g,targetX:p.x,targetY:p.y,targetPosition:v};switch(a){case Ua.Bezier:[E]=s1(A);break;case Ua.SimpleBezier:[E]=L1(A);break;case Ua.Step:[E]=uh({...A,borderRadius:0});break;case Ua.SmoothStep:[E]=uh(A);break;default:[E]=c1(A)}return c.jsx("path",{d:E,fill:"none",className:"react-flow__connection-path",style:t})};W1.displayName="ConnectionLine";const R8={};function mx(t=R8){C.useRef(t),Fe(),C.useEffect(()=>{},[t])}function z8(){Fe(),C.useRef(!1),C.useEffect(()=>{},[])}function K1({nodeTypes:t,edgeTypes:a,onInit:i,onNodeClick:s,onEdgeClick:l,onNodeDoubleClick:u,onEdgeDoubleClick:f,onNodeMouseEnter:m,onNodeMouseMove:g,onNodeMouseLeave:p,onNodeContextMenu:x,onSelectionContextMenu:y,onSelectionStart:v,onSelectionEnd:N,connectionLineType:E,connectionLineStyle:A,connectionLineComponent:w,connectionLineContainerStyle:j,selectionKeyCode:_,selectionOnDrag:S,selectionMode:M,multiSelectionKeyCode:B,panActivationKeyCode:$,zoomActivationKeyCode:k,deleteKeyCode:X,onlyRenderVisibleElements:F,elementsSelectable:se,defaultViewport:P,translateExtent:H,minZoom:te,maxZoom:L,preventScrolling:Z,defaultMarkerColor:z,zoomOnScroll:D,zoomOnPinch:V,panOnScroll:O,panOnScrollSpeed:Q,panOnScrollMode:R,zoomOnDoubleClick:U,panOnDrag:J,onPaneClick:ne,onPaneMouseEnter:oe,onPaneMouseMove:ue,onPaneMouseLeave:ce,onPaneScroll:le,onPaneContextMenu:de,paneClickDistance:ve,nodeClickDistance:be,onEdgeContextMenu:he,onEdgeMouseEnter:ye,onEdgeMouseMove:Se,onEdgeMouseLeave:De,reconnectRadius:_e,onReconnect:Je,onReconnectStart:Et,onReconnectEnd:xt,noDragClassName:an,noWheelClassName:Mn,noPanClassName:Va,disableKeyboardA11y:Ya,nodeExtent:ht,rfId:_i,viewport:An,onViewportChange:oa}){return mx(t),mx(a),z8(),N8(i),j8(An),c.jsx(QT,{onPaneClick:ne,onPaneMouseEnter:oe,onPaneMouseMove:ue,onPaneMouseLeave:ce,onPaneContextMenu:de,onPaneScroll:le,paneClickDistance:ve,deleteKeyCode:X,selectionKeyCode:_,selectionOnDrag:S,selectionMode:M,onSelectionStart:v,onSelectionEnd:N,multiSelectionKeyCode:B,panActivationKeyCode:$,zoomActivationKeyCode:k,elementsSelectable:se,zoomOnScroll:D,zoomOnPinch:V,zoomOnDoubleClick:U,panOnScroll:O,panOnScrollSpeed:Q,panOnScrollMode:R,panOnDrag:J,defaultViewport:P,translateExtent:H,minZoom:te,maxZoom:L,onSelectionContextMenu:y,preventScrolling:Z,noDragClassName:an,noWheelClassName:Mn,noPanClassName:Va,disableKeyboardA11y:Ya,onViewportChange:oa,isControlledViewport:!!An,children:c.jsxs(S8,{children:[c.jsx(b8,{edgeTypes:a,onEdgeClick:l,onEdgeDoubleClick:f,onReconnect:Je,onReconnectStart:Et,onReconnectEnd:xt,onlyRenderVisibleElements:F,onEdgeContextMenu:he,onEdgeMouseEnter:ye,onEdgeMouseMove:Se,onEdgeMouseLeave:De,reconnectRadius:_e,defaultMarkerColor:z,noPanClassName:Va,disableKeyboardA11y:Ya,rfId:_i}),c.jsx(A8,{style:A,type:E,component:w,containerStyle:j}),c.jsx("div",{className:"react-flow__edgelabel-renderer"}),c.jsx(n8,{nodeTypes:t,onNodeClick:s,onNodeDoubleClick:u,onNodeMouseEnter:m,onNodeMouseMove:g,onNodeMouseLeave:p,onNodeContextMenu:x,nodeClickDistance:be,onlyRenderVisibleElements:F,noPanClassName:Va,noDragClassName:an,disableKeyboardA11y:Ya,nodeExtent:ht,rfId:_i}),c.jsx("div",{className:"react-flow__viewport-portal"})]})})}K1.displayName="GraphView";const D8=C.memo(K1),px=({nodes:t,edges:a,defaultNodes:i,defaultEdges:s,width:l,height:u,fitView:f,fitViewOptions:m,minZoom:g=.5,maxZoom:p=2,nodeOrigin:x,nodeExtent:y,zIndexMode:v="basic"}={})=>{const N=new Map,E=new Map,A=new Map,w=new Map,j=s??a??[],_=i??t??[],S=x??[0,0],M=y??Is;f1(A,w,j);const B=fh(_,N,E,{nodeOrigin:S,nodeExtent:M,zIndexMode:v});let $=[0,0,1];if(f&&l&&u){const k=lo(N,{filter:P=>!!((P.width||P.initialWidth)&&(P.height||P.initialHeight))}),{x:X,y:F,zoom:se}=$h(k,l,u,g,p,m?.padding??.1);$=[X,F,se]}return{rfId:"1",width:l??0,height:u??0,transform:$,nodes:_,nodesInitialized:B,nodeLookup:N,parentLookup:E,edges:j,edgeLookup:w,connectionLookup:A,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:i!==void 0,hasDefaultEdges:s!==void 0,panZoom:null,minZoom:g,maxZoom:p,translateExtent:Is,nodeExtent:M,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:_r.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:S,nodeDragThreshold:1,connectionDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!0,selectNodesOnDrag:!0,multiSelectionActive:!1,fitViewQueued:f??!1,fitViewOptions:m,fitViewResolver:null,connection:{...Qv},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanOnNodeFocus:!0,autoPanSpeed:15,connectionRadius:20,onError:IC,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1,ariaLabelConfig:Zv,zIndexMode:v,onNodesChangeMiddlewareMap:new Map,onEdgesChangeMiddlewareMap:new Map}},O8=({nodes:t,edges:a,defaultNodes:i,defaultEdges:s,width:l,height:u,fitView:f,fitViewOptions:m,minZoom:g,maxZoom:p,nodeOrigin:x,nodeExtent:y,zIndexMode:v})=>K6((N,E)=>{async function A(){const{nodeLookup:w,panZoom:j,fitViewOptions:_,fitViewResolver:S,width:M,height:B,minZoom:$,maxZoom:k}=E();j&&(await QC({nodes:w,width:M,height:B,panZoom:j,minZoom:$,maxZoom:k},_),S?.resolve(!0),N({fitViewResolver:null}))}return{...px({nodes:t,edges:a,width:l,height:u,fitView:f,fitViewOptions:m,minZoom:g,maxZoom:p,nodeOrigin:x,nodeExtent:y,defaultNodes:i,defaultEdges:s,zIndexMode:v}),setNodes:w=>{const{nodeLookup:j,parentLookup:_,nodeOrigin:S,elevateNodesOnSelect:M,fitViewQueued:B,zIndexMode:$}=E(),k=fh(w,j,_,{nodeOrigin:S,nodeExtent:y,elevateNodesOnSelect:M,checkEquality:!0,zIndexMode:$});B&&k?(A(),N({nodes:w,nodesInitialized:k,fitViewQueued:!1,fitViewOptions:void 0})):N({nodes:w,nodesInitialized:k})},setEdges:w=>{const{connectionLookup:j,edgeLookup:_}=E();f1(j,_,w),N({edges:w})},setDefaultNodesAndEdges:(w,j)=>{if(w){const{setNodes:_}=E();_(w),N({hasDefaultNodes:!0})}if(j){const{setEdges:_}=E();_(j),N({hasDefaultEdges:!0})}},updateNodeInternals:w=>{const{triggerNodeChanges:j,nodeLookup:_,parentLookup:S,domNode:M,nodeOrigin:B,nodeExtent:$,debug:k,fitViewQueued:X,zIndexMode:F}=E(),{changes:se,updatedInternals:P}=g6(w,_,S,M,B,$,F);P&&(f6(_,S,{nodeOrigin:B,nodeExtent:$,zIndexMode:F}),X?(A(),N({fitViewQueued:!1,fitViewOptions:void 0})):N({}),se?.length>0&&(k&&console.log("React Flow: trigger node changes",se),j?.(se)))},updateNodePositions:(w,j=!1)=>{const _=[];let S=[];const{nodeLookup:M,triggerNodeChanges:B,connection:$,updateConnection:k,onNodesChangeMiddlewareMap:X}=E();for(const[F,se]of w){const P=M.get(F),H=!!(P?.expandParent&&P?.parentId&&se?.position),te={id:F,type:"position",position:H?{x:Math.max(0,se.position.x),y:Math.max(0,se.position.y)}:se.position,dragging:j};if(P&&$.inProgress&&$.fromNode.id===P.id){const L=Ei(P,$.fromHandle,pe.Left,!0);k({...$,from:L})}H&&P.parentId&&_.push({id:F,parentId:P.parentId,rect:{...se.internals.positionAbsolute,width:se.measured.width??0,height:se.measured.height??0}}),S.push(te)}if(_.length>0){const{parentLookup:F,nodeOrigin:se}=E(),P=Zh(_,M,F,se);S.push(...P)}for(const F of X.values())S=F(S);B(S)},triggerNodeChanges:w=>{const{onNodesChange:j,setNodes:_,nodes:S,hasDefaultNodes:M,debug:B}=E();if(w?.length){if(M){const $=C1(w,S);_($)}B&&console.log("React Flow: trigger node changes",w),j?.(w)}},triggerEdgeChanges:w=>{const{onEdgesChange:j,setEdges:_,edges:S,hasDefaultEdges:M,debug:B}=E();if(w?.length){if(M){const $=T1(w,S);_($)}B&&console.log("React Flow: trigger edge changes",w),j?.(w)}},addSelectedNodes:w=>{const{multiSelectionActive:j,edgeLookup:_,nodeLookup:S,triggerNodeChanges:M,triggerEdgeChanges:B}=E();if(j){const $=w.map(k=>pi(k,!0));M($);return}M(xr(S,new Set([...w]),!0)),B(xr(_))},addSelectedEdges:w=>{const{multiSelectionActive:j,edgeLookup:_,nodeLookup:S,triggerNodeChanges:M,triggerEdgeChanges:B}=E();if(j){const $=w.map(k=>pi(k,!0));B($);return}B(xr(_,new Set([...w]))),M(xr(S,new Set,!0))},unselectNodesAndEdges:({nodes:w,edges:j}={})=>{const{edges:_,nodes:S,nodeLookup:M,triggerNodeChanges:B,triggerEdgeChanges:$}=E(),k=w||S,X=j||_,F=k.map(P=>{const H=M.get(P.id);return H&&(H.selected=!1),pi(P.id,!1)}),se=X.map(P=>pi(P.id,!1));B(F),$(se)},setMinZoom:w=>{const{panZoom:j,maxZoom:_}=E();j?.setScaleExtent([w,_]),N({minZoom:w})},setMaxZoom:w=>{const{panZoom:j,minZoom:_}=E();j?.setScaleExtent([_,w]),N({maxZoom:w})},setTranslateExtent:w=>{E().panZoom?.setTranslateExtent(w),N({translateExtent:w})},resetSelectedElements:()=>{const{edges:w,nodes:j,triggerNodeChanges:_,triggerEdgeChanges:S,elementsSelectable:M}=E();if(!M)return;const B=j.reduce((k,X)=>X.selected?[...k,pi(X.id,!1)]:k,[]),$=w.reduce((k,X)=>X.selected?[...k,pi(X.id,!1)]:k,[]);_(B),S($)},setNodeExtent:w=>{const{nodes:j,nodeLookup:_,parentLookup:S,nodeOrigin:M,elevateNodesOnSelect:B,nodeExtent:$,zIndexMode:k}=E();w[0][0]===$[0][0]&&w[0][1]===$[0][1]&&w[1][0]===$[1][0]&&w[1][1]===$[1][1]||(fh(j,_,S,{nodeOrigin:M,nodeExtent:w,elevateNodesOnSelect:B,checkEquality:!1,zIndexMode:k}),N({nodeExtent:w}))},panBy:w=>{const{transform:j,width:_,height:S,panZoom:M,translateExtent:B}=E();return y6({delta:w,panZoom:M,transform:j,translateExtent:B,width:_,height:S})},setCenter:async(w,j,_)=>{const{width:S,height:M,maxZoom:B,panZoom:$}=E();if(!$)return Promise.resolve(!1);const k=typeof _?.zoom<"u"?_.zoom:B;return await $.setViewport({x:S/2-w*k,y:M/2-j*k,zoom:k},{duration:_?.duration,ease:_?.ease,interpolate:_?.interpolate}),Promise.resolve(!0)},cancelConnection:()=>{N({connection:{...Qv}})},updateConnection:w=>{N({connection:w})},reset:()=>N({...px()})}},Object.is);function k8({initialNodes:t,initialEdges:a,defaultNodes:i,defaultEdges:s,initialWidth:l,initialHeight:u,initialMinZoom:f,initialMaxZoom:m,initialFitViewOptions:g,fitView:p,nodeOrigin:x,nodeExtent:y,zIndexMode:v,children:N}){const[E]=C.useState(()=>O8({nodes:t,edges:a,defaultNodes:i,defaultEdges:s,width:l,height:u,fitView:p,minZoom:f,maxZoom:m,fitViewOptions:g,nodeOrigin:x,nodeExtent:y,zIndexMode:v}));return c.jsx(J6,{value:E,children:c.jsx(ST,{children:N})})}function B8({children:t,nodes:a,edges:i,defaultNodes:s,defaultEdges:l,width:u,height:f,fitView:m,fitViewOptions:g,minZoom:p,maxZoom:x,nodeOrigin:y,nodeExtent:v,zIndexMode:N}){return C.useContext(Gc)?c.jsx(c.Fragment,{children:t}):c.jsx(k8,{initialNodes:a,initialEdges:i,defaultNodes:s,defaultEdges:l,initialWidth:u,initialHeight:f,fitView:m,initialFitViewOptions:g,initialMinZoom:p,initialMaxZoom:x,nodeOrigin:y,nodeExtent:v,zIndexMode:N,children:t})}const H8={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};function L8({nodes:t,edges:a,defaultNodes:i,defaultEdges:s,className:l,nodeTypes:u,edgeTypes:f,onNodeClick:m,onEdgeClick:g,onInit:p,onMove:x,onMoveStart:y,onMoveEnd:v,onConnect:N,onConnectStart:E,onConnectEnd:A,onClickConnectStart:w,onClickConnectEnd:j,onNodeMouseEnter:_,onNodeMouseMove:S,onNodeMouseLeave:M,onNodeContextMenu:B,onNodeDoubleClick:$,onNodeDragStart:k,onNodeDrag:X,onNodeDragStop:F,onNodesDelete:se,onEdgesDelete:P,onDelete:H,onSelectionChange:te,onSelectionDragStart:L,onSelectionDrag:Z,onSelectionDragStop:z,onSelectionContextMenu:D,onSelectionStart:V,onSelectionEnd:O,onBeforeDelete:Q,connectionMode:R,connectionLineType:U=Ua.Bezier,connectionLineStyle:J,connectionLineComponent:ne,connectionLineContainerStyle:oe,deleteKeyCode:ue="Backspace",selectionKeyCode:ce="Shift",selectionOnDrag:le=!1,selectionMode:de=Fs.Full,panActivationKeyCode:ve="Space",multiSelectionKeyCode:be=Ks()?"Meta":"Control",zoomActivationKeyCode:he=Ks()?"Meta":"Control",snapToGrid:ye,snapGrid:Se,onlyRenderVisibleElements:De=!1,selectNodesOnDrag:_e,nodesDraggable:Je,autoPanOnNodeFocus:Et,nodesConnectable:xt,nodesFocusable:an,nodeOrigin:Mn=j1,edgesFocusable:Va,edgesReconnectable:Ya,elementsSelectable:ht=!0,defaultViewport:_i=fT,minZoom:An=.5,maxZoom:oa=2,translateExtent:Xa=Is,preventScrolling:Wc=!0,nodeExtent:Ci,defaultMarkerColor:Kc="#b1b1b7",zoomOnScroll:Jc=!0,zoomOnPinch:Ga=!0,panOnScroll:wt=!1,panOnScrollSpeed:pn=.5,panOnScrollMode:St=bi.Free,zoomOnDoubleClick:eu=!0,panOnDrag:tu=!0,onPaneClick:nu,onPaneMouseEnter:Ti,onPaneMouseMove:Mi,onPaneMouseLeave:Ai,onPaneScroll:Rn,onPaneContextMenu:Ri,paneClickDistance:Za=1,nodeClickDistance:au=0,children:mo,onReconnect:Lr,onReconnectStart:Qa,onReconnectEnd:iu,onEdgeContextMenu:po,onEdgeDoubleClick:go,onEdgeMouseEnter:yo,onEdgeMouseMove:Ur,onEdgeMouseLeave:$r,reconnectRadius:xo=10,onNodesChange:vo,onEdgesChange:gn,noDragClassName:ct="nodrag",noWheelClassName:vt="nowheel",noPanClassName:zn="nopan",fitView:zi,fitViewOptions:bo,connectOnClick:ru,attributionPosition:wo,proOptions:Pa,defaultEdgeOptions:qr,elevateNodesOnSelect:la=!0,elevateEdgesOnSelect:ca=!1,disableKeyboardA11y:ua=!1,autoPanOnConnect:da,autoPanOnNodeDrag:nt,autoPanSpeed:So,connectionRadius:No,isValidConnection:Dn,onError:fa,style:su,id:Vr,nodeDragThreshold:Eo,connectionDragThreshold:ou,viewport:Di,onViewportChange:Oi,width:rn,height:jt,colorMode:jo="light",debug:lu,onScroll:ki,ariaLabelConfig:_o,zIndexMode:Ia="basic",...cu},_t){const Fa=Vr||"1",Co=gT(jo),Yr=C.useCallback(On=>{On.currentTarget.scrollTo({top:0,left:0,behavior:"instant"}),ki?.(On)},[ki]);return c.jsx("div",{"data-testid":"rf__wrapper",...cu,onScroll:Yr,style:{...su,...H8},ref:_t,className:lt(["react-flow",l,Co]),id:Vr,role:"application",children:c.jsxs(B8,{nodes:t,edges:a,width:rn,height:jt,fitView:zi,fitViewOptions:bo,minZoom:An,maxZoom:oa,nodeOrigin:Mn,nodeExtent:Ci,zIndexMode:Ia,children:[c.jsx(D8,{onInit:p,onNodeClick:m,onEdgeClick:g,onNodeMouseEnter:_,onNodeMouseMove:S,onNodeMouseLeave:M,onNodeContextMenu:B,onNodeDoubleClick:$,nodeTypes:u,edgeTypes:f,connectionLineType:U,connectionLineStyle:J,connectionLineComponent:ne,connectionLineContainerStyle:oe,selectionKeyCode:ce,selectionOnDrag:le,selectionMode:de,deleteKeyCode:ue,multiSelectionKeyCode:be,panActivationKeyCode:ve,zoomActivationKeyCode:he,onlyRenderVisibleElements:De,defaultViewport:_i,translateExtent:Xa,minZoom:An,maxZoom:oa,preventScrolling:Wc,zoomOnScroll:Jc,zoomOnPinch:Ga,zoomOnDoubleClick:eu,panOnScroll:wt,panOnScrollSpeed:pn,panOnScrollMode:St,panOnDrag:tu,onPaneClick:nu,onPaneMouseEnter:Ti,onPaneMouseMove:Mi,onPaneMouseLeave:Ai,onPaneScroll:Rn,onPaneContextMenu:Ri,paneClickDistance:Za,nodeClickDistance:au,onSelectionContextMenu:D,onSelectionStart:V,onSelectionEnd:O,onReconnect:Lr,onReconnectStart:Qa,onReconnectEnd:iu,onEdgeContextMenu:po,onEdgeDoubleClick:go,onEdgeMouseEnter:yo,onEdgeMouseMove:Ur,onEdgeMouseLeave:$r,reconnectRadius:xo,defaultMarkerColor:Kc,noDragClassName:ct,noWheelClassName:vt,noPanClassName:zn,rfId:Fa,disableKeyboardA11y:ua,nodeExtent:Ci,viewport:Di,onViewportChange:Oi}),c.jsx(pT,{nodes:t,edges:a,defaultNodes:i,defaultEdges:s,onConnect:N,onConnectStart:E,onConnectEnd:A,onClickConnectStart:w,onClickConnectEnd:j,nodesDraggable:Je,autoPanOnNodeFocus:Et,nodesConnectable:xt,nodesFocusable:an,edgesFocusable:Va,edgesReconnectable:Ya,elementsSelectable:ht,elevateNodesOnSelect:la,elevateEdgesOnSelect:ca,minZoom:An,maxZoom:oa,nodeExtent:Ci,onNodesChange:vo,onEdgesChange:gn,snapToGrid:ye,snapGrid:Se,connectionMode:R,translateExtent:Xa,connectOnClick:ru,defaultEdgeOptions:qr,fitView:zi,fitViewOptions:bo,onNodesDelete:se,onEdgesDelete:P,onDelete:H,onNodeDragStart:k,onNodeDrag:X,onNodeDragStop:F,onSelectionDrag:Z,onSelectionDragStart:L,onSelectionDragStop:z,onMove:x,onMoveStart:y,onMoveEnd:v,noPanClassName:zn,nodeOrigin:Mn,rfId:Fa,autoPanOnConnect:da,autoPanOnNodeDrag:nt,autoPanSpeed:So,onError:fa,connectionRadius:No,isValidConnection:Dn,selectNodesOnDrag:_e,nodeDragThreshold:Eo,connectionDragThreshold:ou,onBeforeDelete:Q,debug:lu,ariaLabelConfig:_o,zIndexMode:Ia}),c.jsx(dT,{onSelectionChange:te}),mo,c.jsx(sT,{proOptions:Pa,position:wo}),c.jsx(rT,{rfId:Fa,disableKeyboardA11y:ua})]})})}var U8=M1(L8);function $8({dimensions:t,lineWidth:a,variant:i,className:s}){return c.jsx("path",{strokeWidth:a,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`,className:lt(["react-flow__background-pattern",i,s])})}function q8({radius:t,className:a}){return c.jsx("circle",{cx:t,cy:t,r:t,className:lt(["react-flow__background-pattern","dots",a])})}var qa;(function(t){t.Lines="lines",t.Dots="dots",t.Cross="cross"})(qa||(qa={}));const V8={[qa.Dots]:1,[qa.Lines]:1,[qa.Cross]:6},Y8=t=>({transform:t.transform,patternId:`pattern-${t.rfId}`});function J1({id:t,variant:a=qa.Dots,gap:i=20,size:s,lineWidth:l=1,offset:u=0,color:f,bgColor:m,style:g,className:p,patternClassName:x}){const y=C.useRef(null),{transform:v,patternId:N}=ze(Y8,Ie),E=s||V8[a],A=a===qa.Dots,w=a===qa.Cross,j=Array.isArray(i)?i:[i,i],_=[j[0]*v[2]||1,j[1]*v[2]||1],S=E*v[2],M=Array.isArray(u)?u:[u,u],B=w?[S,S]:_,$=[M[0]*v[2]||1+B[0]/2,M[1]*v[2]||1+B[1]/2],k=`${N}${t||""}`;return c.jsxs("svg",{className:lt(["react-flow__background",p]),style:{...g,...Qc,"--xy-background-color-props":m,"--xy-background-pattern-color-props":f},ref:y,"data-testid":"rf__background",children:[c.jsx("pattern",{id:k,x:v[0]%_[0],y:v[1]%_[1],width:_[0],height:_[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${$[0]},-${$[1]})`,children:A?c.jsx(q8,{radius:S/2,className:x}):c.jsx($8,{dimensions:B,lineWidth:l,variant:a,className:x})}),c.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${k})`})]})}J1.displayName="Background";const X8=C.memo(J1);function G8(){return c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:c.jsx("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function Z8(){return c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:c.jsx("path",{d:"M0 0h32v4.2H0z"})})}function Q8(){return c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:c.jsx("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function P8(){return c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:c.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function I8(){return c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:c.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function Fl({children:t,className:a,...i}){return c.jsx("button",{type:"button",className:lt(["react-flow__controls-button",a]),...i,children:t})}const F8=t=>({isInteractive:t.nodesDraggable||t.nodesConnectable||t.elementsSelectable,minZoomReached:t.transform[2]<=t.minZoom,maxZoomReached:t.transform[2]>=t.maxZoom,ariaLabelConfig:t.ariaLabelConfig});function eb({style:t,showZoom:a=!0,showFitView:i=!0,showInteractive:s=!0,fitViewOptions:l,onZoomIn:u,onZoomOut:f,onFitView:m,onInteractiveChange:g,className:p,children:x,position:y="bottom-left",orientation:v="vertical","aria-label":N}){const E=Fe(),{isInteractive:A,minZoomReached:w,maxZoomReached:j,ariaLabelConfig:_}=ze(F8,Ie),{zoomIn:S,zoomOut:M,fitView:B}=Qh(),$=()=>{S(),u?.()},k=()=>{M(),f?.()},X=()=>{B(l),m?.()},F=()=>{E.setState({nodesDraggable:!A,nodesConnectable:!A,elementsSelectable:!A}),g?.(!A)},se=v==="horizontal"?"horizontal":"vertical";return c.jsxs(Zc,{className:lt(["react-flow__controls",se,p]),position:y,style:t,"data-testid":"rf__controls","aria-label":N??_["controls.ariaLabel"],children:[a&&c.jsxs(c.Fragment,{children:[c.jsx(Fl,{onClick:$,className:"react-flow__controls-zoomin",title:_["controls.zoomIn.ariaLabel"],"aria-label":_["controls.zoomIn.ariaLabel"],disabled:j,children:c.jsx(G8,{})}),c.jsx(Fl,{onClick:k,className:"react-flow__controls-zoomout",title:_["controls.zoomOut.ariaLabel"],"aria-label":_["controls.zoomOut.ariaLabel"],disabled:w,children:c.jsx(Z8,{})})]}),i&&c.jsx(Fl,{className:"react-flow__controls-fitview",onClick:X,title:_["controls.fitView.ariaLabel"],"aria-label":_["controls.fitView.ariaLabel"],children:c.jsx(Q8,{})}),s&&c.jsx(Fl,{className:"react-flow__controls-interactive",onClick:F,title:_["controls.interactive.ariaLabel"],"aria-label":_["controls.interactive.ariaLabel"],children:A?c.jsx(I8,{}):c.jsx(P8,{})}),x]})}eb.displayName="Controls";const W8=C.memo(eb);function K8({id:t,x:a,y:i,width:s,height:l,style:u,color:f,strokeColor:m,strokeWidth:g,className:p,borderRadius:x,shapeRendering:y,selected:v,onClick:N}){const{background:E,backgroundColor:A}=u||{},w=f||E||A;return c.jsx("rect",{className:lt(["react-flow__minimap-node",{selected:v},p]),x:a,y:i,rx:x,ry:x,width:s,height:l,style:{fill:w,stroke:m,strokeWidth:g},shapeRendering:y,onClick:N?j=>N(j,t):void 0})}const J8=C.memo(K8),eM=t=>t.nodes.map(a=>a.id),Uf=t=>t instanceof Function?t:()=>t;function tM({nodeStrokeColor:t,nodeColor:a,nodeClassName:i="",nodeBorderRadius:s=5,nodeStrokeWidth:l,nodeComponent:u=J8,onClick:f}){const m=ze(eM,Ie),g=Uf(a),p=Uf(t),x=Uf(i),y=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return c.jsx(c.Fragment,{children:m.map(v=>c.jsx(aM,{id:v,nodeColorFunc:g,nodeStrokeColorFunc:p,nodeClassNameFunc:x,nodeBorderRadius:s,nodeStrokeWidth:l,NodeComponent:u,onClick:f,shapeRendering:y},v))})}function nM({id:t,nodeColorFunc:a,nodeStrokeColorFunc:i,nodeClassNameFunc:s,nodeBorderRadius:l,nodeStrokeWidth:u,shapeRendering:f,NodeComponent:m,onClick:g}){const{node:p,x,y,width:v,height:N}=ze(E=>{const{internals:A}=E.nodeLookup.get(t),w=A.userNode,{x:j,y:_}=A.positionAbsolute,{width:S,height:M}=sa(w);return{node:w,x:j,y:_,width:S,height:M}},Ie);return!p||p.hidden||!e1(p)?null:c.jsx(m,{x,y,width:v,height:N,style:p.style,selected:!!p.selected,className:s(p),color:a(p),borderRadius:l,strokeColor:i(p),strokeWidth:u,shapeRendering:f,onClick:g,id:p.id})}const aM=C.memo(nM);var iM=C.memo(tM);const rM=200,sM=150,oM=t=>!t.hidden,lM=t=>{const a={x:-t.transform[0]/t.transform[2],y:-t.transform[1]/t.transform[2],width:t.width/t.transform[2],height:t.height/t.transform[2]};return{viewBB:a,boundingRect:t.nodeLookup.size>0?Jv(lo(t.nodeLookup,{filter:oM}),a):a,rfId:t.rfId,panZoom:t.panZoom,translateExtent:t.translateExtent,flowWidth:t.width,flowHeight:t.height,ariaLabelConfig:t.ariaLabelConfig}},cM="react-flow__minimap-desc";function tb({style:t,className:a,nodeStrokeColor:i,nodeColor:s,nodeClassName:l="",nodeBorderRadius:u=5,nodeStrokeWidth:f,nodeComponent:m,bgColor:g,maskColor:p,maskStrokeColor:x,maskStrokeWidth:y,position:v="bottom-right",onClick:N,onNodeClick:E,pannable:A=!1,zoomable:w=!1,ariaLabel:j,inversePan:_,zoomStep:S=1,offsetScale:M=5}){const B=Fe(),$=C.useRef(null),{boundingRect:k,viewBB:X,rfId:F,panZoom:se,translateExtent:P,flowWidth:H,flowHeight:te,ariaLabelConfig:L}=ze(lM,Ie),Z=t?.width??rM,z=t?.height??sM,D=k.width/Z,V=k.height/z,O=Math.max(D,V),Q=O*Z,R=O*z,U=M*O,J=k.x-(Q-k.width)/2-U,ne=k.y-(R-k.height)/2-U,oe=Q+U*2,ue=R+U*2,ce=`${cM}-${F}`,le=C.useRef(0),de=C.useRef();le.current=O,C.useEffect(()=>{if($.current&&se)return de.current=_6({domNode:$.current,panZoom:se,getTransform:()=>B.getState().transform,getViewScale:()=>le.current}),()=>{de.current?.destroy()}},[se]),C.useEffect(()=>{de.current?.update({translateExtent:P,width:H,height:te,inversePan:_,pannable:A,zoomStep:S,zoomable:w})},[A,w,_,S,P,H,te]);const ve=N?ye=>{const[Se,De]=de.current?.pointer(ye)||[0,0];N(ye,{x:Se,y:De})}:void 0,be=E?C.useCallback((ye,Se)=>{const De=B.getState().nodeLookup.get(Se).internals.userNode;E(ye,De)},[]):void 0,he=j??L["minimap.ariaLabel"];return c.jsx(Zc,{position:v,style:{...t,"--xy-minimap-background-color-props":typeof g=="string"?g:void 0,"--xy-minimap-mask-background-color-props":typeof p=="string"?p:void 0,"--xy-minimap-mask-stroke-color-props":typeof x=="string"?x:void 0,"--xy-minimap-mask-stroke-width-props":typeof y=="number"?y*O:void 0,"--xy-minimap-node-background-color-props":typeof s=="string"?s:void 0,"--xy-minimap-node-stroke-color-props":typeof i=="string"?i:void 0,"--xy-minimap-node-stroke-width-props":typeof f=="number"?f:void 0},className:lt(["react-flow__minimap",a]),"data-testid":"rf__minimap",children:c.jsxs("svg",{width:Z,height:z,viewBox:`${J} ${ne} ${oe} ${ue}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":ce,ref:$,onClick:ve,children:[he&&c.jsx("title",{id:ce,children:he}),c.jsx(iM,{onClick:be,nodeColor:s,nodeStrokeColor:i,nodeBorderRadius:u,nodeClassName:l,nodeStrokeWidth:f,nodeComponent:m}),c.jsx("path",{className:"react-flow__minimap-mask",d:`M${J-U},${ne-U}h${oe+U*2}v${ue+U*2}h${-oe-U*2}z
        M${X.x},${X.y}h${X.width}v${X.height}h${-X.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}tb.displayName="MiniMap";const uM=C.memo(tb),dM=t=>a=>t?`${Math.max(1/a.transform[2],1)}`:void 0,fM={[Ar.Line]:"right",[Ar.Handle]:"bottom-right"};function hM({nodeId:t,position:a,variant:i=Ar.Handle,className:s,style:l=void 0,children:u,color:f,minWidth:m=10,minHeight:g=10,maxWidth:p=Number.MAX_VALUE,maxHeight:x=Number.MAX_VALUE,keepAspectRatio:y=!1,resizeDirection:v,autoScale:N=!0,shouldResize:E,onResizeStart:A,onResize:w,onResizeEnd:j}){const _=D1(),S=typeof t=="string"?t:_,M=Fe(),B=C.useRef(null),$=i===Ar.Handle,k=ze(C.useCallback(dM($&&N),[$,N]),Ie),X=C.useRef(null),F=a??fM[i];C.useEffect(()=>{if(!(!B.current||!S))return X.current||(X.current=$6({domNode:B.current,nodeId:S,getStoreItems:()=>{const{nodeLookup:P,transform:H,snapGrid:te,snapToGrid:L,nodeOrigin:Z,domNode:z}=M.getState();return{nodeLookup:P,transform:H,snapGrid:te,snapToGrid:L,nodeOrigin:Z,paneDomNode:z}},onChange:(P,H)=>{const{triggerNodeChanges:te,nodeLookup:L,parentLookup:Z,nodeOrigin:z}=M.getState(),D=[],V={x:P.x,y:P.y},O=L.get(S);if(O&&O.expandParent&&O.parentId){const Q=O.origin??z,R=P.width??O.measured.width??0,U=P.height??O.measured.height??0,J={id:O.id,parentId:O.parentId,rect:{width:R,height:U,...t1({x:P.x??O.position.x,y:P.y??O.position.y},{width:R,height:U},O.parentId,L,Q)}},ne=Zh([J],L,Z,z);D.push(...ne),V.x=P.x?Math.max(Q[0]*R,P.x):void 0,V.y=P.y?Math.max(Q[1]*U,P.y):void 0}if(V.x!==void 0&&V.y!==void 0){const Q={id:S,type:"position",position:{...V}};D.push(Q)}if(P.width!==void 0&&P.height!==void 0){const R={id:S,type:"dimensions",resizing:!0,setAttributes:v?v==="horizontal"?"width":"height":!0,dimensions:{width:P.width,height:P.height}};D.push(R)}for(const Q of H){const R={...Q,type:"position"};D.push(R)}te(D)},onEnd:({width:P,height:H})=>{const te={id:S,type:"dimensions",resizing:!1,dimensions:{width:P,height:H}};M.getState().triggerNodeChanges([te])}})),X.current.update({controlPosition:F,boundaries:{minWidth:m,minHeight:g,maxWidth:p,maxHeight:x},keepAspectRatio:y,resizeDirection:v,onResizeStart:A,onResize:w,onResizeEnd:j,shouldResize:E}),()=>{X.current?.destroy()}},[F,m,g,p,x,y,A,w,j,E]);const se=F.split("-");return c.jsx("div",{className:lt(["react-flow__resize-control","nodrag",...se,i,s]),ref:B,style:{...l,scale:k,...f&&{[$?"backgroundColor":"borderColor"]:f}},children:u})}C.memo(hM);const $f=[{id:"trigger-1",type:"trigger",position:{x:250,y:50},data:{label:"Inicio",config:{type:"classification",conditions:{intent:["sales"]}}}}],mM=[],Hr=Lx((t,a)=>({flowId:null,flowName:"Nuevo Flujo",flowSlug:null,isActive:!1,isSaved:!0,nodes:$f,edges:mM,selectedNode:null,selectedEdge:null,isSidebarOpen:!0,isPropertiesOpen:!1,onNodesChange:i=>{t({nodes:C1(i,a().nodes),isSaved:!1})},onEdgesChange:i=>{t({edges:T1(i,a().edges),isSaved:!1})},onConnect:i=>{t({edges:l1({...i,type:"smoothstep",animated:!0,style:{stroke:"#25D366",strokeWidth:2}},a().edges),isSaved:!1})},addNode:(i,s)=>{const l=`${i}-${Date.now()}`,f={id:l,type:i,position:s,data:{trigger:{label:"Trigger",config:{type:"classification",conditions:{}}},message:{label:"Mensaje",content:"Escribe tu mensaje aqu..."},question:{label:"Pregunta",content:"Cul es tu opcin?",variable:"respuesta",options:[]},condition:{label:"Condicin",conditions:[]},action:{label:"Accin",action:"",payload:{}},transfer:{label:"Transferir",content:"Transfiriendo a un agente..."},end:{label:"Fin"}}[i]||{label:i}};return t({nodes:[...a().nodes,f],isSaved:!1}),l},updateNodeData:(i,s)=>{t({nodes:a().nodes.map(l=>l.id===i?{...l,data:{...l.data,...s}}:l),isSaved:!1})},deleteNode:i=>{t({nodes:a().nodes.filter(s=>s.id!==i),edges:a().edges.filter(s=>s.source!==i&&s.target!==i),selectedNode:null,isSaved:!1})},setSelectedNode:i=>t({selectedNode:i,isPropertiesOpen:!!i}),setSelectedEdge:i=>t({selectedEdge:i}),clearSelection:()=>t({selectedNode:null,selectedEdge:null}),toggleSidebar:()=>t({isSidebarOpen:!a().isSidebarOpen}),toggleProperties:()=>t({isPropertiesOpen:!a().isPropertiesOpen}),setFlowMeta:i=>t({flowId:i.id,flowName:i.name,flowSlug:i.slug,isActive:i.is_active}),loadFlow:i=>{const s={trigger:"Inicio",message:"Mensaje",question:"Pregunta",condition:"Condicin",action:"Accin",transfer:"Transferir",end:"Fin"},l=(i.nodes||[]).map(u=>{let f=s[u.type]||u.type;return u.content&&u.content.length>0&&(f=u.content.substring(0,25)+(u.content.length>25?"...":"")),u.action&&(f=`Accin: ${u.action}`),{id:u.id,type:u.type,position:u.position||{x:250,y:50},data:{label:f,content:u.content,variable:u.variable,options:u.options,conditions:u.conditions,action:u.action,payload:u.payload,config:u.config||(u.type==="trigger"?i.trigger_config:void 0)}}});t({flowId:i.id,flowName:i.name,flowSlug:i.slug,isActive:i.is_active,nodes:l.length>0?l:$f,edges:i.connections?.map(u=>({id:`${u.from}-${u.to}`,source:u.from,target:u.to,type:"smoothstep",animated:!0,label:u.label,style:{stroke:"#25D366",strokeWidth:2}}))||[],isSaved:!0})},resetFlow:()=>t({flowId:null,flowName:"Nuevo Flujo",flowSlug:null,isActive:!1,nodes:$f,edges:[],selectedNode:null,isSaved:!0}),markSaved:()=>t({isSaved:!0}),exportFlow:()=>{const i=a();return{name:i.flowName,trigger_config:i.nodes.find(s=>s.type==="trigger")?.data.config||{},nodes:i.nodes.map(s=>({id:s.id,type:s.type,content:s.data.content,variable:s.data.variable,options:s.data.options,conditions:s.data.conditions,action:s.data.action,payload:s.data.payload,position:s.position})),connections:i.edges.map(s=>({from:s.source,to:s.target,label:s.label}))}}}));function pM({onTestClick:t}){const{flowId:a,flowName:i,isActive:s,isSaved:l,exportFlow:u,markSaved:f,loadFlow:m,resetFlow:g,setFlowMeta:p}=Hr(),[x,y]=C.useState(!1),[v,N]=C.useState(!1),[E,A]=C.useState([]),[w,j]=C.useState(i),_=async()=>{y(!0);try{const k=u();if(k.name=w,a)await e4(a,k);else{const X=await J_(k);p({id:X.id,name:w,slug:X.slug,is_active:!1})}f(),alert("Flujo guardado correctamente")}catch(k){alert("Error al guardar: "+k.message)}finally{y(!1)}},S=async()=>{if(!a){alert("Primero guarda el flujo");return}try{await hv(a,!s),p({id:a,name:w,is_active:!s}),alert(s?"Flujo desactivado":"Flujo activado")}catch(k){alert("Error: "+k.message)}},M=async()=>{try{const k=await fv();A(k.flows||[]),N(!0)}catch(k){alert("Error cargando flujos: "+k.message)}},B=async k=>{try{const X=await eh(k.id);m(X.flow),j(X.flow.name),N(!1)}catch(X){alert("Error cargando flujo: "+X.message)}},$=()=>{!l&&!confirm("Tienes cambios sin guardar. Continuar?")||(g(),j("Nuevo Flujo"))};return c.jsxs("div",{style:{height:"56px",background:"white",borderBottom:"1px solid #e5e7eb",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0 16px"},children:[c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[c.jsx("span",{style:{fontSize:"24px"},children:""}),c.jsx("span",{style:{fontWeight:600,color:"#075E54"},children:"Flow Builder"})]}),c.jsx("div",{style:{borderLeft:"1px solid #e5e7eb",height:"24px"}}),c.jsx("input",{type:"text",value:w,onChange:k=>j(k.target.value),style:{border:"none",fontSize:"15px",fontWeight:500,background:"transparent",width:"200px"},placeholder:"Nombre del flujo"}),!l&&c.jsx("span",{style:{fontSize:"11px",background:"#fef3c7",color:"#92400e",padding:"2px 8px",borderRadius:"4px"},children:"Sin guardar"}),s&&c.jsx("span",{style:{fontSize:"11px",background:"#d1fae5",color:"#065f46",padding:"2px 8px",borderRadius:"4px"},children:"Activo"})]}),c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[c.jsx("button",{onClick:t,style:{padding:"8px 16px",background:"linear-gradient(135deg, #075E54 0%, #128C7E 100%)",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"13px",fontWeight:500},children:" Probar"}),c.jsx("div",{style:{borderLeft:"1px solid #e5e7eb",height:"24px",margin:"0 4px"}}),c.jsx("button",{onClick:$,style:{padding:"8px 16px",background:"white",border:"1px solid #d1d5db",borderRadius:"6px",cursor:"pointer",fontSize:"13px"},children:"+ Nuevo"}),c.jsx("button",{onClick:M,style:{padding:"8px 16px",background:"white",border:"1px solid #d1d5db",borderRadius:"6px",cursor:"pointer",fontSize:"13px"},children:" Abrir"}),c.jsx("button",{onClick:_,disabled:x,style:{padding:"8px 16px",background:"#25D366",color:"white",border:"none",borderRadius:"6px",cursor:x?"wait":"pointer",fontSize:"13px",fontWeight:500},children:x?"Guardando...":" Guardar"}),a&&c.jsx("button",{onClick:S,style:{padding:"8px 16px",background:s?"#fee2e2":"#d1fae5",color:s?"#dc2626":"#065f46",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"13px",fontWeight:500},children:s?" Desactivar":" Activar"})]}),v&&c.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:c.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"24px",width:"400px",maxHeight:"500px",overflow:"auto"},children:[c.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"16px"},children:[c.jsx("h3",{style:{margin:0},children:"Seleccionar flujo"}),c.jsx("button",{onClick:()=>N(!1),style:{background:"none",border:"none",cursor:"pointer",fontSize:"18px"},children:""})]}),E.length===0?c.jsx("p",{style:{color:"#6b7280",textAlign:"center"},children:"No hay flujos guardados"}):c.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:E.map(k=>c.jsxs("div",{onClick:()=>B(k),style:{padding:"12px",border:"1px solid #e5e7eb",borderRadius:"8px",cursor:"pointer",display:"flex",justifyContent:"space-between",alignItems:"center"},onMouseOver:X=>X.currentTarget.style.background="#f9fafb",onMouseOut:X=>X.currentTarget.style.background="white",children:[c.jsxs("div",{children:[c.jsx("div",{style:{fontWeight:500},children:k.name}),c.jsx("div",{style:{fontSize:"12px",color:"#6b7280"},children:k.slug})]}),k.is_active&&c.jsx("span",{style:{fontSize:"10px",background:"#d1fae5",color:"#065f46",padding:"2px 6px",borderRadius:"4px"},children:"Activo"})]},k.id))})]})})]})}const gM=[{type:"trigger",label:"Trigger",icon:"",color:"#667eea",description:"Inicio del flujo"},{type:"message",label:"Mensaje",icon:"",color:"#25D366",description:"Enviar mensaje"},{type:"question",label:"Pregunta",icon:"",color:"#34B7F1",description:"Preguntar y esperar"},{type:"condition",label:"Condicin",icon:"",color:"#f59e0b",description:"Bifurcacin"},{type:"action",label:"Accin",icon:"",color:"#6366f1",description:"Ejecutar accin"},{type:"ai_response",label:"Respuesta IA",icon:"",color:"#8b5cf6",description:"Generar con IA"},{type:"webhook",label:"Webhook",icon:"",color:"#f97316",description:"Llamar API externa"},{type:"delay",label:"Espera",icon:"",color:"#64748b",description:"Pausar X segundos"},{type:"transfer",label:"Transferir",icon:"",color:"#ec4899",description:"Pasar a humano"},{type:"end",label:"Fin",icon:"",color:"#ef4444",description:"Terminar flujo"}];function yM(){const{isSidebarOpen:t,toggleSidebar:a}=Hr(),i=(s,l)=>{s.dataTransfer.setData("application/reactflow",l),s.dataTransfer.effectAllowed="move"};return t?c.jsxs("div",{style:{width:"240px",background:"white",borderRight:"1px solid #e5e7eb",padding:"16px",display:"flex",flexDirection:"column",height:"100%"},children:[c.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[c.jsx("h3",{style:{margin:0,fontSize:"14px",fontWeight:600},children:"Nodos"}),c.jsx("button",{onClick:a,style:{background:"none",border:"none",cursor:"pointer",fontSize:"18px",color:"#6b7280"},children:""})]}),c.jsx("p",{style:{fontSize:"12px",color:"#6b7280",marginBottom:"16px"},children:"Arrastra los nodos al canvas para construir tu flujo"}),c.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:gM.map(s=>c.jsxs("div",{draggable:!0,onDragStart:l=>i(l,s.type),style:{padding:"10px 12px",borderRadius:"8px",cursor:"grab",display:"flex",alignItems:"center",gap:"10px",background:`${s.color}15`,border:`1px solid ${s.color}30`,transition:"all 0.2s"},onMouseOver:l=>{l.currentTarget.style.transform="translateX(4px)",l.currentTarget.style.boxShadow="0 2px 8px rgba(0,0,0,0.1)"},onMouseOut:l=>{l.currentTarget.style.transform="none",l.currentTarget.style.boxShadow="none"},children:[c.jsx("span",{style:{fontSize:"20px"},children:s.icon}),c.jsxs("div",{children:[c.jsx("div",{style:{fontWeight:500,fontSize:"13px"},children:s.label}),c.jsx("div",{style:{fontSize:"11px",color:"#6b7280"},children:s.description})]})]},s.type))})]}):c.jsxs("button",{onClick:a,style:{position:"absolute",left:10,top:10,zIndex:10,background:"white",border:"1px solid #e5e7eb",borderRadius:"8px",padding:"8px 12px",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px"},children:[c.jsx("span",{children:""})," Nodos"]})}const gx={trigger:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",border:"none"},message:{background:"white",border:"2px solid #25D366"},question:{background:"white",border:"2px solid #34B7F1"},condition:{background:"#fef3c7",border:"2px solid #f59e0b"},action:{background:"#e0e7ff",border:"2px solid #6366f1"},transfer:{background:"#fce7f3",border:"2px solid #ec4899"},end:{background:"#fee2e2",border:"2px solid #ef4444"}},xM={trigger:"",message:"",question:"",condition:"",action:"",transfer:"",end:""};function vM({id:t,data:a,type:i,selected:s}){const l=gx[i]||gx.message,u=xM[i]||"",f=i!=="end",m=i!=="trigger";return c.jsxs("div",{style:{...l,padding:"12px 16px",borderRadius:"8px",minWidth:"180px",maxWidth:"250px",boxShadow:s?"0 0 0 2px #3b82f6":"0 2px 8px rgba(0,0,0,0.1)",cursor:"pointer"},children:[m&&c.jsx(Rr,{type:"target",position:pe.Top,style:{background:"#6b7280",width:10,height:10}}),c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"4px"},children:[c.jsx("span",{style:{fontSize:"16px"},children:u}),c.jsx("strong",{style:{fontSize:"13px"},children:a.label||i})]}),a.content&&c.jsxs("div",{style:{fontSize:"11px",opacity:.8,marginTop:"4px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:[a.content.substring(0,40),a.content.length>40?"...":""]}),a.options&&a.options.length>0&&c.jsxs("div",{style:{fontSize:"10px",marginTop:"6px",opacity:.7},children:[a.options.length," opciones"]}),f&&c.jsx(Rr,{type:"source",position:pe.Bottom,style:{background:"#25D366",width:10,height:10}})]})}const hi=C.memo(vM),bM={trigger:t=>c.jsx(hi,{...t,type:"trigger"}),message:t=>c.jsx(hi,{...t,type:"message"}),question:t=>c.jsx(hi,{...t,type:"question"}),condition:t=>c.jsx(hi,{...t,type:"condition"}),action:t=>c.jsx(hi,{...t,type:"action"}),transfer:t=>c.jsx(hi,{...t,type:"transfer"}),end:t=>c.jsx(hi,{...t,type:"end"})};function wM(){const t=C.useRef(null),{nodes:a,edges:i,onNodesChange:s,onEdgesChange:l,onConnect:u,addNode:f,setSelectedNode:m}=Hr(),g=C.useCallback(v=>{v.preventDefault(),v.dataTransfer.dropEffect="move"},[]),p=C.useCallback(v=>{v.preventDefault();const N=v.dataTransfer.getData("application/reactflow");if(!N)return;const E=t.current.getBoundingClientRect(),A={x:v.clientX-E.left-90,y:v.clientY-E.top-25};f(N,A)},[f]),x=C.useCallback((v,N)=>{m(N)},[m]),y=C.useCallback(()=>{m(null)},[m]);return c.jsx("div",{ref:t,style:{flex:1,height:"100%"},children:c.jsxs(U8,{nodes:a,edges:i,onNodesChange:s,onEdgesChange:l,onConnect:u,onDrop:p,onDragOver:g,onNodeClick:x,onPaneClick:y,nodeTypes:bM,fitView:!0,snapToGrid:!0,snapGrid:[15,15],defaultEdgeOptions:{type:"smoothstep",animated:!0,style:{stroke:"#25D366",strokeWidth:2}},children:[c.jsx(X8,{color:"#e5e7eb",gap:20}),c.jsx(W8,{}),c.jsx(uM,{nodeColor:v=>({trigger:"#667eea",message:"#25D366",question:"#34B7F1",condition:"#f59e0b",action:"#6366f1",transfer:"#ec4899",end:"#ef4444"})[v.type]||"#6b7280",maskColor:"rgba(255, 255, 255, 0.8)"})]})})}const SM=[{value:"sales",label:"Ventas",color:"#10b981"},{value:"support",label:"Soporte",color:"#3b82f6"},{value:"complaint",label:"Quejas",color:"#ef4444"},{value:"info",label:"Informacin",color:"#8b5cf6"},{value:"greeting",label:"Saludo",color:"#f59e0b"}],NM=[{value:"low",label:"Baja"},{value:"medium",label:"Media"},{value:"high",label:"Alta"},{value:"critical",label:"Crtica"}];function EM(){const{selectedNode:t,updateNodeData:a,deleteNode:i,isPropertiesOpen:s,toggleProperties:l}=Hr(),[u,f]=C.useState({}),[m,g]=C.useState({type:"keyword",keywords:[],conditions:{}});C.useEffect(()=>{t&&(f(t.data||{}),t.type==="trigger"&&t.data?.config&&g(t.data.config))},[t]);const p=(_,S)=>{const M={...u,[_]:S};f(M),a(t.id,{[_]:S})},x=(_,S,M)=>{const B=[...u.options||[]];B[_]={...B[_],[S]:M},p("options",B)},y=()=>{const _=[...u.options||[],{label:"Nueva opcin",value:""}];p("options",_)},v=_=>{const S=u.options.filter((M,B)=>B!==_);p("options",S)},N=_=>{const S={type:_,keywords:[],conditions:{}};g(S),a(t.id,{config:S})},E=_=>{const S=_.split(",").map(B=>B.trim()).filter(B=>B),M={...m,keywords:S};g(M),a(t.id,{config:M})},A=_=>{const S=m.conditions?.intent||[];let M;S.includes(_)?M=S.filter($=>$!==_):M=[...S,_];const B={...m,conditions:{...m.conditions,intent:M}};g(B),a(t.id,{config:B})},w=_=>{const S={...m,conditions:{...m.conditions,urgency:_}};g(S),a(t.id,{config:S})},j=_=>{const S={...m,conditions:{...m.conditions,min_lead_score:parseInt(_)||0}};g(S),a(t.id,{config:S})};return!s||!t?null:c.jsxs("div",{style:{width:"300px",background:"white",borderLeft:"1px solid #e5e7eb",padding:"16px",height:"100%",overflow:"auto"},children:[c.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[c.jsx("h3",{style:{margin:0,fontSize:"14px",fontWeight:600},children:"Propiedades"}),c.jsx("button",{onClick:l,style:{background:"none",border:"none",cursor:"pointer",fontSize:"18px",color:"#6b7280"},children:""})]}),c.jsxs("div",{style:{fontSize:"12px",color:"#6b7280",marginBottom:"16px"},children:["Tipo: ",c.jsx("strong",{children:t.type})]}),c.jsxs("div",{style:{marginBottom:"16px"},children:[c.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:500,marginBottom:"4px"},children:"Etiqueta"}),c.jsx("input",{type:"text",value:u.label||"",onChange:_=>p("label",_.target.value),style:{width:"100%",padding:"8px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"13px"}})]}),t.type==="trigger"&&c.jsxs("div",{style:{marginBottom:"16px",padding:"12px",background:"#f8fafc",borderRadius:"8px",border:"1px solid #e2e8f0"},children:[c.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:600,marginBottom:"12px",color:"#475569"},children:"Configuracin del Trigger"}),c.jsxs("div",{style:{marginBottom:"12px"},children:[c.jsx("label",{style:{display:"block",fontSize:"11px",fontWeight:500,marginBottom:"6px",color:"#64748b"},children:"Tipo de activacin"}),c.jsx("div",{style:{display:"flex",gap:"6px"},children:[{value:"keyword",label:"Palabras clave"},{value:"classification",label:"Clasificacin"},{value:"always",label:"Siempre"}].map(_=>c.jsx("button",{onClick:()=>N(_.value),style:{flex:1,padding:"8px 4px",fontSize:"11px",border:m.type===_.value?"2px solid #25D366":"1px solid #d1d5db",borderRadius:"6px",background:m.type===_.value?"#dcfce7":"white",color:m.type===_.value?"#166534":"#6b7280",cursor:"pointer",fontWeight:m.type===_.value?600:400},children:_.label},_.value))})]}),m.type==="keyword"&&c.jsxs("div",{style:{marginBottom:"12px"},children:[c.jsx("label",{style:{display:"block",fontSize:"11px",fontWeight:500,marginBottom:"4px",color:"#64748b"},children:"Palabras clave (separadas por coma)"}),c.jsx("input",{type:"text",value:(m.keywords||[]).join(", "),onChange:_=>E(_.target.value),placeholder:"precio, costo, cotizar, cuanto",style:{width:"100%",padding:"8px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"12px"}}),c.jsx("p",{style:{fontSize:"10px",color:"#94a3b8",marginTop:"4px"},children:"El flujo se activa si el mensaje contiene alguna de estas palabras"})]}),m.type==="classification"&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{style:{marginBottom:"12px"},children:[c.jsx("label",{style:{display:"block",fontSize:"11px",fontWeight:500,marginBottom:"6px",color:"#64748b"},children:"Intenciones del mensaje"}),c.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"6px"},children:SM.map(_=>{const S=(m.conditions?.intent||[]).includes(_.value);return c.jsxs("button",{onClick:()=>A(_.value),style:{padding:"6px 10px",fontSize:"11px",border:S?`2px solid ${_.color}`:"1px solid #d1d5db",borderRadius:"16px",background:S?`${_.color}20`:"white",color:S?_.color:"#6b7280",cursor:"pointer",fontWeight:S?600:400},children:[S&&" ",_.label]},_.value)})})]}),c.jsxs("div",{style:{marginBottom:"12px"},children:[c.jsx("label",{style:{display:"block",fontSize:"11px",fontWeight:500,marginBottom:"4px",color:"#64748b"},children:"Urgencia mnima"}),c.jsxs("select",{value:m.conditions?.urgency||"",onChange:_=>w(_.target.value),style:{width:"100%",padding:"8px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"12px"},children:[c.jsx("option",{value:"",children:"Cualquiera"}),NM.map(_=>c.jsx("option",{value:_.value,children:_.label},_.value))]})]}),c.jsxs("div",{children:[c.jsx("label",{style:{display:"block",fontSize:"11px",fontWeight:500,marginBottom:"4px",color:"#64748b"},children:"Lead score mnimo"}),c.jsx("input",{type:"number",min:"0",max:"100",value:m.conditions?.min_lead_score||0,onChange:_=>j(_.target.value),style:{width:"100%",padding:"8px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"12px"}}),c.jsx("p",{style:{fontSize:"10px",color:"#94a3b8",marginTop:"4px"},children:"Solo activa si el lead tiene este puntaje o ms (0-100)"})]})]}),m.type==="always"&&c.jsx("div",{style:{padding:"12px",background:"#fef3c7",borderRadius:"6px",border:"1px solid #fcd34d"},children:c.jsx("p",{style:{fontSize:"11px",color:"#92400e",margin:0},children:" Este flujo se activar para TODOS los mensajes entrantes que no coincidan con otros flujos. salo como flujo por defecto."})})]}),["message","question","transfer"].includes(t.type)&&c.jsxs("div",{style:{marginBottom:"16px"},children:[c.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:500,marginBottom:"4px"},children:"Contenido del mensaje"}),c.jsx("textarea",{value:u.content||"",onChange:_=>p("content",_.target.value),rows:4,style:{width:"100%",padding:"8px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"13px",resize:"vertical"},placeholder:"Escribe el mensaje..."}),c.jsxs("p",{style:{fontSize:"11px",color:"#6b7280",marginTop:"4px"},children:["Usa ","{{variable}}"," para insertar variables"]})]}),t.type==="question"&&c.jsxs("div",{style:{marginBottom:"16px"},children:[c.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:500,marginBottom:"4px"},children:"Guardar respuesta en variable"}),c.jsx("input",{type:"text",value:u.variable||"",onChange:_=>p("variable",_.target.value),style:{width:"100%",padding:"8px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"13px"},placeholder:"nombre_variable"})]}),t.type==="question"&&c.jsxs("div",{style:{marginBottom:"16px"},children:[c.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:500,marginBottom:"8px"},children:"Opciones de respuesta"}),(u.options||[]).map((_,S)=>c.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"8px"},children:[c.jsx("input",{type:"text",value:_.label,onChange:M=>x(S,"label",M.target.value),placeholder:"Texto",style:{flex:1,padding:"6px",border:"1px solid #d1d5db",borderRadius:"4px",fontSize:"12px"}}),c.jsx("input",{type:"text",value:_.value,onChange:M=>x(S,"value",M.target.value),placeholder:"Valor",style:{width:"80px",padding:"6px",border:"1px solid #d1d5db",borderRadius:"4px",fontSize:"12px"}}),c.jsx("button",{onClick:()=>v(S),style:{background:"#fee2e2",border:"none",borderRadius:"4px",padding:"0 8px",cursor:"pointer",color:"#ef4444"},children:""})]},S)),c.jsx("button",{onClick:y,style:{background:"#f3f4f6",border:"1px dashed #d1d5db",borderRadius:"6px",padding:"8px",width:"100%",cursor:"pointer",fontSize:"12px"},children:"+ Agregar opcin"})]}),t.type==="action"&&c.jsxs("div",{style:{marginBottom:"16px"},children:[c.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:500,marginBottom:"4px"},children:"Tipo de accin"}),c.jsxs("select",{value:u.action||"",onChange:_=>p("action",_.target.value),style:{width:"100%",padding:"8px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"13px"},children:[c.jsx("option",{value:"",children:"Selecciona..."}),c.jsx("option",{value:"notify_sales",children:"Notificar a ventas"}),c.jsx("option",{value:"create_ticket",children:"Crear ticket"}),c.jsx("option",{value:"save_lead",children:"Guardar lead"}),c.jsx("option",{value:"send_email",children:"Enviar email"}),c.jsx("option",{value:"webhook",children:"Llamar webhook"}),c.jsx("option",{value:"search_faq",children:"Buscar en FAQ"})]})]}),t.type==="ai_response"&&c.jsxs("div",{style:{marginBottom:"16px",padding:"12px",background:"#f5f3ff",borderRadius:"8px",border:"1px solid #c4b5fd"},children:[c.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:600,marginBottom:"12px",color:"#5b21b6"},children:" Configuracin de IA"}),c.jsxs("div",{style:{marginBottom:"12px"},children:[c.jsx("label",{style:{display:"block",fontSize:"11px",fontWeight:500,marginBottom:"4px",color:"#6b7280"},children:"Prompt del sistema"}),c.jsx("textarea",{value:u.system_prompt||"",onChange:_=>p("system_prompt",_.target.value),rows:3,style:{width:"100%",padding:"8px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"12px",resize:"vertical"},placeholder:"Eres un asistente de ventas amable y profesional..."})]}),c.jsxs("div",{style:{marginBottom:"12px"},children:[c.jsx("label",{style:{display:"block",fontSize:"11px",fontWeight:500,marginBottom:"4px",color:"#6b7280"},children:"Prompt del usuario"}),c.jsx("textarea",{value:u.user_prompt||"",onChange:_=>p("user_prompt",_.target.value),rows:2,style:{width:"100%",padding:"8px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"12px",resize:"vertical"},placeholder:"El cliente pregunta: {{initial_message}}"}),c.jsxs("p",{style:{fontSize:"10px",color:"#94a3b8",marginTop:"4px"},children:["Usa ","{{variable}}"," para insertar datos dinmicos"]})]}),c.jsxs("div",{style:{marginBottom:"12px"},children:[c.jsx("label",{style:{display:"block",fontSize:"11px",fontWeight:500,marginBottom:"4px",color:"#6b7280"},children:"Modelo"}),c.jsxs("select",{value:u.model||"gpt-4o-mini",onChange:_=>p("model",_.target.value),style:{width:"100%",padding:"8px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"12px"},children:[c.jsx("option",{value:"gpt-4o-mini",children:"GPT-4o Mini (rpido)"}),c.jsx("option",{value:"gpt-4o",children:"GPT-4o (preciso)"}),c.jsx("option",{value:"gpt-4-turbo",children:"GPT-4 Turbo"})]})]}),c.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"12px"},children:[c.jsxs("div",{style:{flex:1},children:[c.jsx("label",{style:{display:"block",fontSize:"11px",fontWeight:500,marginBottom:"4px",color:"#6b7280"},children:"Temperatura"}),c.jsx("input",{type:"number",min:"0",max:"1",step:"0.1",value:u.temperature||.7,onChange:_=>p("temperature",parseFloat(_.target.value)),style:{width:"100%",padding:"8px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"12px"}})]}),c.jsxs("div",{style:{flex:1},children:[c.jsx("label",{style:{display:"block",fontSize:"11px",fontWeight:500,marginBottom:"4px",color:"#6b7280"},children:"Max tokens"}),c.jsx("input",{type:"number",min:"50",max:"2000",step:"50",value:u.max_tokens||200,onChange:_=>p("max_tokens",parseInt(_.target.value)),style:{width:"100%",padding:"8px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"12px"}})]})]}),c.jsxs("div",{children:[c.jsx("label",{style:{display:"block",fontSize:"11px",fontWeight:500,marginBottom:"4px",color:"#6b7280"},children:"Guardar respuesta en variable (opcional)"}),c.jsx("input",{type:"text",value:u.variable||"",onChange:_=>p("variable",_.target.value),style:{width:"100%",padding:"8px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"12px"},placeholder:"ai_response"})]})]}),t.type==="webhook"&&c.jsxs("div",{style:{marginBottom:"16px",padding:"12px",background:"#fff7ed",borderRadius:"8px",border:"1px solid #fed7aa"},children:[c.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:600,marginBottom:"12px",color:"#c2410c"},children:" Configuracin de Webhook"}),c.jsxs("div",{style:{marginBottom:"12px"},children:[c.jsx("label",{style:{display:"block",fontSize:"11px",fontWeight:500,marginBottom:"4px",color:"#6b7280"},children:"URL del endpoint"}),c.jsx("input",{type:"text",value:u.url||"",onChange:_=>p("url",_.target.value),style:{width:"100%",padding:"8px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"12px"},placeholder:"https://api.ejemplo.com/endpoint"})]}),c.jsxs("div",{style:{marginBottom:"12px"},children:[c.jsx("label",{style:{display:"block",fontSize:"11px",fontWeight:500,marginBottom:"4px",color:"#6b7280"},children:"Mtodo HTTP"}),c.jsxs("select",{value:u.method||"POST",onChange:_=>p("method",_.target.value),style:{width:"100%",padding:"8px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"12px"},children:[c.jsx("option",{value:"GET",children:"GET"}),c.jsx("option",{value:"POST",children:"POST"}),c.jsx("option",{value:"PUT",children:"PUT"}),c.jsx("option",{value:"PATCH",children:"PATCH"}),c.jsx("option",{value:"DELETE",children:"DELETE"})]})]}),c.jsxs("div",{style:{marginBottom:"12px"},children:[c.jsx("label",{style:{display:"block",fontSize:"11px",fontWeight:500,marginBottom:"4px",color:"#6b7280"},children:"Headers (JSON)"}),c.jsx("textarea",{value:u.headers||`{
  "Content-Type": "application/json"
}`,onChange:_=>p("headers",_.target.value),rows:3,style:{width:"100%",padding:"8px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"11px",fontFamily:"monospace",resize:"vertical"}})]}),c.jsxs("div",{style:{marginBottom:"12px"},children:[c.jsxs("label",{style:{display:"block",fontSize:"11px",fontWeight:500,marginBottom:"4px",color:"#6b7280"},children:["Body (JSON) - Usa ","{{variable}}"," para datos dinmicos"]}),c.jsx("textarea",{value:u.body||`{
  "phone": "{{phone}}",
  "message": "{{initial_message}}"
}`,onChange:_=>p("body",_.target.value),rows:4,style:{width:"100%",padding:"8px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"11px",fontFamily:"monospace",resize:"vertical"}})]}),c.jsxs("div",{style:{marginBottom:"12px"},children:[c.jsx("label",{style:{display:"block",fontSize:"11px",fontWeight:500,marginBottom:"4px",color:"#6b7280"},children:"Timeout (ms)"}),c.jsx("input",{type:"number",min:"1000",max:"30000",step:"1000",value:u.timeout||5e3,onChange:_=>p("timeout",parseInt(_.target.value)),style:{width:"100%",padding:"8px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"12px"}})]}),c.jsxs("div",{children:[c.jsx("label",{style:{display:"block",fontSize:"11px",fontWeight:500,marginBottom:"4px",color:"#6b7280"},children:"Guardar respuesta en variable"}),c.jsx("input",{type:"text",value:u.variable||"",onChange:_=>p("variable",_.target.value),style:{width:"100%",padding:"8px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"12px"},placeholder:"api_response"})]})]}),t.type==="delay"&&c.jsxs("div",{style:{marginBottom:"16px",padding:"12px",background:"#f8fafc",borderRadius:"8px",border:"1px solid #cbd5e1"},children:[c.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:600,marginBottom:"12px",color:"#475569"},children:" Configuracin de Espera"}),c.jsxs("div",{style:{marginBottom:"12px"},children:[c.jsx("label",{style:{display:"block",fontSize:"11px",fontWeight:500,marginBottom:"4px",color:"#6b7280"},children:"Segundos de espera"}),c.jsx("input",{type:"number",min:"1",max:"60",step:"1",value:u.seconds||2,onChange:_=>p("seconds",parseInt(_.target.value)),style:{width:"100%",padding:"8px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"13px"}}),c.jsx("p",{style:{fontSize:"10px",color:"#94a3b8",marginTop:"4px"},children:"Entre 1 y 60 segundos. Recomendado: 2-5 seg para parecer ms humano."})]}),c.jsx("div",{children:c.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer"},children:[c.jsx("input",{type:"checkbox",checked:u.typing_indicator!==!1,onChange:_=>p("typing_indicator",_.target.checked),style:{width:"16px",height:"16px"}}),c.jsx("span",{style:{fontSize:"12px",color:"#374151"},children:'Mostrar "escribiendo..." mientras espera'})]})})]}),c.jsx("div",{style:{marginTop:"24px",paddingTop:"16px",borderTop:"1px solid #e5e7eb"},children:c.jsx("button",{onClick:()=>i(t.id),style:{width:"100%",padding:"10px",background:"#fee2e2",border:"1px solid #fecaca",borderRadius:"6px",color:"#dc2626",cursor:"pointer",fontWeight:500,fontSize:"13px"},children:" Eliminar nodo"})})]})}function jM({isOpen:t,onClose:a}){const{nodes:i,edges:s,flowName:l}=Hr(),[u,f]=C.useState([]),[m,g]=C.useState(""),[p,x]=C.useState(null),[y,v]=C.useState({}),[N,E]=C.useState(!1),[A,w]=C.useState(null),[j,_]=C.useState("local"),[S,M]=C.useState(!1),B=C.useRef(null);C.useEffect(()=>{B.current?.scrollIntoView({behavior:"smooth"})},[u]),C.useEffect(()=>{t&&$()},[t]);const $=()=>{f([{type:"system",text:`Simulando flujo: "${l}"`},{type:"system",text:"Escribe un mensaje para iniciar..."}]),v({}),x(null),E(!0),w(null)},k=D=>i.find(V=>V.id===D),X=(D,V=null)=>{const O=s.find(Q=>!(Q.source!==D||V&&Q.label&&Q.label!==V));return O?k(O.target):null},F=()=>i.find(D=>D.type==="trigger"),se=async D=>{if(!D){H("system"," Flujo terminado (no hay siguiente nodo)"),E(!0);return}switch(w(D.id),x(D.id),await te(300),D.type){case"trigger":H("system"," Trigger activado");const V=X(D.id);se(V);break;case"message":const O=P(D.data.content||"Mensaje vaco");H("bot",O),await te(500);const Q=X(D.id);se(Q);break;case"question":const R=P(D.data.content||"?");H("bot",R),D.data.options&&D.data.options.length>0&&H("options",D.data.options),E(!0),x(D.id);break;case"condition":H("system"," Evaluando condicin..."),await te(300);const U=D.data.conditions||[];let J=null;for(const _e of U){if(_e.else){J=_e.goto;break}const Je=_e.if?.match(/(\w+)\s*==\s*["']?(\w+)["']?/);if(Je){const[,Et,xt]=Je;if(y[Et]===xt){J=_e.goto,H("system",` Condicin cumplida: ${Et} = ${xt}`);break}}}const ne=k(J)||X(D.id);se(ne);break;case"action":H("system",` Ejecutando accin: ${D.data.action||"sin definir"}`),await te(500);const oe=X(D.id);se(oe);break;case"ai_response":H("system"," Generando respuesta con IA..."),M(!0),await te(1500),M(!1);const ue=D.data.system_prompt||"",ce=P(D.data.user_prompt||""),le=`[Respuesta IA simulada]
${ue.substring(0,50)}...
Para: "${ce.substring(0,50)}..."`;H("bot",le),D.data.variable&&(v(_e=>({..._e,[D.data.variable]:"respuesta_ia_simulada"})),H("system",` Variable "${D.data.variable}" = respuesta IA`)),await te(300);const de=X(D.id);se(de);break;case"webhook":H("system",` Llamando webhook: ${D.data.url||"URL no definida"}`),H("system",`   Mtodo: ${D.data.method||"POST"}`),M(!0),await te(1e3),M(!1);const ve={success:!0,data:{status:"ok",simulated:!0}};H("system",` Webhook respondi: ${JSON.stringify(ve).substring(0,50)}...`),D.data.variable&&v(_e=>({..._e,[D.data.variable]:ve}));const be=X(D.id);se(be);break;case"delay":const he=D.data.seconds||2,ye=D.data.typing_indicator!==!1;H("system",` Esperando ${he} segundos...`),ye&&M(!0),await te(he*1e3),ye&&M(!1);const Se=X(D.id);se(Se);break;case"transfer":H("bot",D.data.content||"Transfiriendo a un agente..."),H("system"," Conversacin transferida a humano"),E(!0);break;case"end":H("system"," Flujo completado"),E(!0);break;default:H("system",`Nodo desconocido: ${D.type}`);const De=X(D.id);se(De)}},P=D=>D&&D.replace(/\{\{(\w+)\}\}/g,(V,O)=>y[O]||V),H=(D,V)=>{f(O=>[...O,{type:D,text:V,time:new Date}])},te=D=>new Promise(V=>setTimeout(V,D)),L=()=>{if(!m.trim())return;const D=m.trim();g(""),H("user",D),E(!1);const V=k(p);if(V?.type==="question"&&V.data.variable){let O=D;if(V.data.options){const Q=V.data.options.find(R=>R.label.toLowerCase()===D.toLowerCase()||R.value===D);Q&&(O=Q.value)}v(Q=>({...Q,[V.data.variable]:O})),H("system",` Variable "${V.data.variable}" = "${O}"`),setTimeout(()=>{const Q=X(p);se(Q)},300)}else if(!p){const O=F();O?se(O):H("system"," No hay nodo Trigger en el flujo")}},Z=D=>{g(D.label),setTimeout(()=>L(),100)},z=D=>{D.key==="Enter"&&!D.shiftKey&&(D.preventDefault(),L())};return t?c.jsxs("div",{style:{position:"fixed",right:"20px",bottom:"20px",width:"380px",height:"550px",background:"white",borderRadius:"16px",boxShadow:"0 10px 40px rgba(0,0,0,0.2)",display:"flex",flexDirection:"column",zIndex:1e3,overflow:"hidden"},children:[c.jsxs("div",{style:{background:"linear-gradient(135deg, #075E54 0%, #128C7E 100%)",color:"white",padding:"12px 16px"},children:[c.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[c.jsxs("div",{children:[c.jsx("div",{style:{fontWeight:600,fontSize:"15px"},children:" Simulador de Chat"}),c.jsx("div",{style:{fontSize:"12px",opacity:.8},children:"Prueba tu flujo aqu"})]}),c.jsxs("div",{style:{display:"flex",gap:"8px"},children:[c.jsx("button",{onClick:$,style:{background:"rgba(255,255,255,0.2)",border:"none",color:"white",padding:"6px 12px",borderRadius:"6px",cursor:"pointer",fontSize:"12px"},children:""}),c.jsx("button",{onClick:a,style:{background:"none",border:"none",color:"white",fontSize:"20px",cursor:"pointer",padding:"0 4px"},children:""})]})]}),c.jsxs("div",{style:{display:"flex",gap:"8px",background:"rgba(0,0,0,0.2)",borderRadius:"8px",padding:"4px"},children:[c.jsx("button",{onClick:()=>_("local"),style:{flex:1,background:j==="local"?"white":"transparent",color:j==="local"?"#075E54":"white",border:"none",padding:"6px 12px",borderRadius:"6px",cursor:"pointer",fontSize:"11px",fontWeight:j==="local"?600:400},children:"Local"}),c.jsx("button",{onClick:()=>_("server"),style:{flex:1,background:j==="server"?"white":"transparent",color:j==="server"?"#075E54":"white",border:"none",padding:"6px 12px",borderRadius:"6px",cursor:"pointer",fontSize:"11px",fontWeight:j==="server"?600:400},children:"Servidor"})]})]}),Object.keys(y).length>0&&c.jsxs("div",{style:{background:"#f0fdf4",padding:"8px 16px",fontSize:"11px",borderBottom:"1px solid #e5e7eb"},children:[c.jsx("strong",{children:"Variables:"})," ",Object.entries(y).map(([D,V])=>c.jsxs("span",{style:{background:"#dcfce7",padding:"2px 6px",borderRadius:"4px",marginLeft:"4px"},children:[D,"=",typeof V=="object"?JSON.stringify(V).substring(0,30)+"...":String(V)]},D))]}),c.jsxs("div",{style:{flex:1,overflowY:"auto",padding:"16px",background:"#e5ddd5",backgroundImage:'url("data:image/svg+xml,%3Csvg width="60" height="60" viewBox="0 0 60 60" xmlns="http://www.w3.org/2000/svg"%3E%3Cg fill="none" fill-rule="evenodd"%3E%3Cg fill="%239C92AC" fill-opacity="0.05"%3E%3Cpath d="M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z"/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")'},children:[u.map((D,V)=>c.jsx(_M,{message:D,onOptionClick:Z},V)),S&&c.jsx("div",{style:{display:"flex",justifyContent:"flex-start",marginBottom:"8px"},children:c.jsxs("div",{style:{background:"white",padding:"12px 16px",borderRadius:"12px 12px 12px 0",boxShadow:"0 1px 2px rgba(0,0,0,0.1)",display:"flex",gap:"4px"},children:[c.jsx("span",{className:"typing-dot",style:{width:"8px",height:"8px",background:"#90a3ae",borderRadius:"50%",animation:"typing 1.4s infinite ease-in-out",animationDelay:"0s"}}),c.jsx("span",{className:"typing-dot",style:{width:"8px",height:"8px",background:"#90a3ae",borderRadius:"50%",animation:"typing 1.4s infinite ease-in-out",animationDelay:"0.2s"}}),c.jsx("span",{className:"typing-dot",style:{width:"8px",height:"8px",background:"#90a3ae",borderRadius:"50%",animation:"typing 1.4s infinite ease-in-out",animationDelay:"0.4s"}})]})}),c.jsx("div",{ref:B})]}),c.jsxs("div",{style:{padding:"12px",background:"#f0f2f5",display:"flex",gap:"8px"},children:[c.jsx("input",{type:"text",value:m,onChange:D=>g(D.target.value),onKeyPress:z,placeholder:N?"Escribe un mensaje...":"Esperando respuesta...",disabled:!N,style:{flex:1,padding:"10px 16px",border:"none",borderRadius:"24px",fontSize:"14px",outline:"none"}}),c.jsx("button",{onClick:L,disabled:!N||!m.trim(),style:{background:"#25D366",color:"white",border:"none",borderRadius:"50%",width:"40px",height:"40px",cursor:N&&m.trim()?"pointer":"not-allowed",opacity:N&&m.trim()?1:.5,fontSize:"18px"},children:""})]})]}):null}function _M({message:t,onOptionClick:a}){const{type:i,text:s}=t,l=f=>typeof f=="object"&&f!==null?JSON.stringify(f,null,2):String(f);if(i==="system")return c.jsx("div",{style:{textAlign:"center",margin:"8px 0",fontSize:"11px",color:"#667781",background:"rgba(255,255,255,0.8)",padding:"4px 12px",borderRadius:"8px",display:"inline-block",width:"100%"},children:l(s)});if(i==="options")return c.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px",margin:"8px 0"},children:s.map((f,m)=>c.jsx("button",{onClick:()=>a(f),style:{background:"white",border:"1px solid #25D366",color:"#25D366",padding:"8px 16px",borderRadius:"16px",cursor:"pointer",fontSize:"13px",fontWeight:500},children:f.label},m))});const u=i==="user";return c.jsx("div",{style:{display:"flex",justifyContent:u?"flex-end":"flex-start",marginBottom:"8px"},children:c.jsx("div",{style:{maxWidth:"80%",padding:"8px 12px",borderRadius:u?"12px 12px 0 12px":"12px 12px 12px 0",background:u?"#dcf8c6":"white",boxShadow:"0 1px 2px rgba(0,0,0,0.1)",fontSize:"14px",lineHeight:"1.4",whiteSpace:"pre-wrap"},children:l(s)})})}const qf=[{title:"Bienvenido al Flow Builder!",description:"Crea flujos de conversacin para tu chatbot de WhatsApp de forma visual, sin escribir cdigo.",icon:"",image:null},{title:"Arrastra nodos al canvas",description:"En la barra izquierda encontrars los nodos disponibles. Arrstralos al canvas para construir tu flujo.",icon:"",tips:[" Mensaje: Enva un texto al usuario"," Pregunta: Espera una respuesta del usuario"," Condicin: Bifurca el flujo segn una variable"," Accin: Ejecuta una accin (notificar, guardar, etc.)"]},{title:"Conecta los nodos",description:"Arrastra desde el punto verde (salida) de un nodo hasta el punto gris (entrada) de otro para conectarlos.",icon:"",tips:["El flujo siempre empieza en el Trigger","Puedes tener mltiples caminos con Condiciones","Termina con un nodo Fin o Transferir"]},{title:"Configura cada nodo",description:"Haz clic en un nodo para ver sus propiedades a la derecha. Ah puedes editar el contenido, opciones y variables.",icon:"",tips:["Usa {{variable}} para insertar datos dinmicos","Las preguntas guardan la respuesta en una variable","Las condiciones evalan esas variables"]},{title:"Guarda y activa!",description:"Cuando termines, guarda tu flujo y actvalo para que empiece a responder mensajes automticamente.",icon:"",tips:["Puedes tener varios flujos, pero solo algunos activos",'Usa "Abrir" para cargar flujos guardados',"Las plantillas te dan flujos de ejemplo para empezar"]}];function CM({onComplete:t}){const[a,i]=C.useState(0),[s,l]=C.useState(!1),u=qf[a],f=a===qf.length-1,m=()=>{f?l(!0):i(a+1)},g=()=>{t(null)},p=x=>{t(x)};return s?c.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:c.jsxs("div",{style:{background:"white",borderRadius:"16px",padding:"32px",maxWidth:"600px",width:"90%"},children:[c.jsx("h2",{style:{margin:"0 0 8px 0",fontSize:"24px"},children:"Cmo quieres empezar?"}),c.jsx("p",{style:{color:"#6b7280",margin:"0 0 24px 0"},children:"Puedes empezar desde cero o usar una plantilla predefinida"}),c.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:[c.jsx(Wl,{icon:"",title:"Empezar vaco",description:"Canvas en blanco para crear tu propio flujo",onClick:()=>p(null)}),c.jsx(Wl,{icon:"",title:"Embudo de Ventas",description:"Califica leads y gualos a la compra",onClick:()=>p("sales_funnel"),color:"#25D366"}),c.jsx(Wl,{icon:"",title:"Embudo de Soporte",description:"Resuelve dudas con FAQ y escala a humanos",onClick:()=>p("support_funnel"),color:"#34B7F1"}),c.jsx(Wl,{icon:"",title:"Captura de Leads",description:"Recolecta informacin de contacto",onClick:()=>p("lead_capture"),color:"#f59e0b"})]}),c.jsx("button",{onClick:()=>p(null),style:{marginTop:"16px",padding:"8px",background:"none",border:"none",color:"#6b7280",cursor:"pointer",fontSize:"13px",width:"100%"},children:"Saltar y empezar vaco "})]})}):c.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:c.jsxs("div",{style:{background:"white",borderRadius:"16px",padding:"32px",maxWidth:"500px",width:"90%",textAlign:"center"},children:[c.jsx("div",{style:{display:"flex",justifyContent:"center",gap:"8px",marginBottom:"24px"},children:qf.map((x,y)=>c.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:y===a?"#25D366":"#e5e7eb",transition:"background 0.2s"}},y))}),c.jsx("div",{style:{fontSize:"64px",marginBottom:"16px"},children:u.icon}),c.jsx("h2",{style:{margin:"0 0 12px 0",fontSize:"24px",color:"#111827"},children:u.title}),c.jsx("p",{style:{color:"#6b7280",margin:"0 0 20px 0",lineHeight:"1.6"},children:u.description}),u.tips&&c.jsx("div",{style:{background:"#f9fafb",borderRadius:"8px",padding:"16px",textAlign:"left",marginBottom:"24px"},children:u.tips.map((x,y)=>c.jsx("div",{style:{fontSize:"13px",color:"#4b5563",marginBottom:y<u.tips.length-1?"8px":0},children:x},y))}),c.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"center"},children:[c.jsx("button",{onClick:g,style:{padding:"12px 24px",background:"white",border:"1px solid #d1d5db",borderRadius:"8px",cursor:"pointer",fontSize:"14px",color:"#6b7280"},children:"Saltar"}),c.jsx("button",{onClick:m,style:{padding:"12px 24px",background:"#25D366",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"14px",fontWeight:500},children:f?"Empezar":"Siguiente"})]})]})})}function Wl({icon:t,title:a,description:i,onClick:s,color:l}){return c.jsxs("div",{onClick:s,style:{padding:"16px",border:"2px solid #e5e7eb",borderRadius:"12px",cursor:"pointer",transition:"all 0.2s",textAlign:"left"},onMouseOver:u=>{u.currentTarget.style.borderColor=l||"#25D366",u.currentTarget.style.transform="translateY(-2px)"},onMouseOut:u=>{u.currentTarget.style.borderColor="#e5e7eb",u.currentTarget.style.transform="none"},children:[c.jsx("div",{style:{fontSize:"28px",marginBottom:"8px"},children:t}),c.jsx("div",{style:{fontWeight:600,fontSize:"14px",marginBottom:"4px"},children:a}),c.jsx("div",{style:{fontSize:"12px",color:"#6b7280"},children:i})]})}function TM(){const{id:t}=tS(),[a,i]=C.useState(!1),[s,l]=C.useState(!1),[u,f]=C.useState(null),[m,g]=C.useState(!1),{loadFlow:p}=Hr();C.useEffect(()=>{t?x(t):localStorage.getItem("flowbuilder_onboarding_seen")||l(!0)},[t]);const x=async N=>{g(!0);try{const E=await eh(N);if(E.flow)p(E.flow),y(`Flujo "${E.flow.name}" cargado correctamente`,"success");else throw new Error("No se pudo obtener los datos del flujo")}catch(E){console.error("Error loading flow:",E),y(`Error al cargar flujo: ${E.message}`,"error")}finally{g(!1)}},y=(N,E="info")=>{f({message:N,type:E}),setTimeout(()=>f(null),4e3)},v=async N=>{if(localStorage.setItem("flowbuilder_onboarding_seen","true"),l(!1),N){g(!0);try{console.log("Creating flow from template:",N);const E=await mv(N,null);if(console.log("Template created, result:",E),E.id){const A=await eh(E.id);if(console.log("Flow data loaded:",A),A.flow)p(A.flow),y(`Flujo "${A.flow.name}" cargado correctamente`,"success");else throw new Error("No se pudo obtener los datos del flujo")}else throw new Error("No se recibi el ID del flujo creado")}catch(E){console.error("Error loading template:",E),y(`Error al cargar template: ${E.message}`,"error")}finally{g(!1)}}};return c.jsxs("div",{style:{display:"flex",flexDirection:"column",height:"100vh",overflow:"hidden"},children:[c.jsx(pM,{onTestClick:()=>i(!0)}),c.jsxs("div",{style:{display:"flex",flex:1,overflow:"hidden"},children:[c.jsx(yM,{}),c.jsx(wM,{}),c.jsx(EM,{})]}),c.jsxs("button",{onClick:()=>i(!0),style:{position:"fixed",right:"20px",bottom:"20px",background:"linear-gradient(135deg, #075E54 0%, #25D366 100%)",color:"white",border:"none",borderRadius:"50px",padding:"14px 24px",cursor:"pointer",boxShadow:"0 4px 15px rgba(37, 211, 102, 0.4)",fontSize:"14px",fontWeight:600,display:a?"none":"flex",alignItems:"center",gap:"8px",zIndex:100},children:[c.jsx("span",{style:{fontSize:"18px"},children:""}),"Probar flujo"]}),m&&c.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1001},children:c.jsxs("div",{style:{background:"white",padding:"24px 32px",borderRadius:"12px",display:"flex",alignItems:"center",gap:"12px"},children:[c.jsx("div",{style:{width:"24px",height:"24px",border:"3px solid #e5e7eb",borderTop:"3px solid #25D366",borderRadius:"50%",animation:"spin 1s linear infinite"}}),c.jsx("span",{children:"Cargando flujo..."})]})}),u&&c.jsxs("div",{style:{position:"fixed",top:"20px",right:"20px",padding:"12px 20px",borderRadius:"8px",background:u.type==="success"?"#10b981":u.type==="error"?"#ef4444":"#3b82f6",color:"white",fontWeight:500,boxShadow:"0 4px 12px rgba(0,0,0,0.15)",zIndex:1002,animation:"slideIn 0.3s ease"},children:[u.type==="success"&&" ",u.type==="error"&&" ",u.message]}),c.jsx(jM,{isOpen:a,onClose:()=>i(!1)}),s&&c.jsx(CM,{onComplete:v})]})}const Ih="/api/flow-logs";async function Fh(t,a){if(!t.ok){let i=a;try{const s=await t.json();s.error&&(i=s.error)}catch{}throw new Error(i)}return t.json()}async function MM(t={}){const a=new URLSearchParams(t).toString(),i=await fetch(`${Ih}?${a}`);return Fh(i,"Error al cargar logs")}async function AM(t){const a=await fetch(`${Ih}/${t}`);return Fh(a,"Log no encontrado")}async function RM(t=7){const a=await fetch(`${Ih}/stats/summary?days=${t}`);return Fh(a,"Error al cargar estadsticas")}const Hs={completed:{label:"Completado",color:"#10b981",icon:fc},failed:{label:"Fallido",color:"#ef4444",icon:Eh},transferred:{label:"Transferido",color:"#f59e0b",icon:dN},running:{label:"En progreso",color:"#3b82f6",icon:xi},timeout:{label:"Timeout",color:"#6b7280",icon:hc}};function zM(){const[t,a]=C.useState([]),[i,s]=C.useState(null),[l,u]=C.useState(!0),[f,m]=C.useState(null),[g,p]=C.useState(!1),[x,y]=C.useState({status:"",phone:"",flow_id:""});C.useEffect(()=>{v()},[]);const v=async()=>{u(!0);try{const[w,j]=await Promise.all([MM({limit:50,...x}),RM(7)]);a(w.logs||[]),s(j.stats)}catch(w){console.error("Error loading logs:",w)}finally{u(!1)}},N=async w=>{p(!0);try{const j=await AM(w.id);m(j.log)}catch(j){console.error("Error loading log detail:",j)}finally{p(!1)}},E=(w,j)=>{y(_=>({..._,[w]:j}))},A=()=>{v()};return l?c.jsx("div",{className:"p-8 flex items-center justify-center h-full",children:c.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-500"})}):c.jsxs("div",{className:"p-8",children:[c.jsxs("div",{className:"flex items-center justify-between mb-8",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Logs de Ejecucin"}),c.jsx("p",{className:"text-gray-500 mt-1",children:"Historial de ejecucin de flujos"})]}),c.jsxs("button",{onClick:v,className:"flex items-center gap-2 px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg text-gray-700 transition",children:[c.jsx(jh,{className:"w-4 h-4"}),"Actualizar"]})]}),i&&c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8",children:[c.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-100 shadow-sm",children:[c.jsx("p",{className:"text-sm text-gray-500",children:"Total ejecuciones"}),c.jsx("p",{className:"text-2xl font-bold text-gray-800",children:i.total_executions||0}),c.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"ltimos 7 das"})]}),c.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-100 shadow-sm",children:[c.jsx("p",{className:"text-sm text-gray-500",children:"Tasa de completado"}),c.jsxs("p",{className:"text-2xl font-bold text-green-600",children:[i.completion_rate||0,"%"]}),c.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:[i.completed||0," completados"]})]}),c.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-100 shadow-sm",children:[c.jsx("p",{className:"text-sm text-gray-500",children:"Fallidos"}),c.jsx("p",{className:"text-2xl font-bold text-red-500",children:i.failed||0}),c.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Requieren atencin"})]}),c.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-100 shadow-sm",children:[c.jsx("p",{className:"text-sm text-gray-500",children:"Tiempo promedio"}),c.jsx("p",{className:"text-2xl font-bold text-blue-600",children:i.avg_duration_ms?`${Math.round(i.avg_duration_ms)}ms`:"-"}),c.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Por ejecucin"})]})]}),c.jsx("div",{className:"bg-white rounded-xl p-4 border border-gray-100 shadow-sm mb-6",children:c.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Vx,{className:"w-4 h-4 text-gray-400"}),c.jsx("span",{className:"text-sm text-gray-600",children:"Filtrar:"})]}),c.jsxs("select",{value:x.status,onChange:w=>E("status",w.target.value),className:"px-3 py-2 border border-gray-200 rounded-lg text-sm focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none",children:[c.jsx("option",{value:"",children:"Todos los estados"}),c.jsx("option",{value:"completed",children:"Completados"}),c.jsx("option",{value:"failed",children:"Fallidos"}),c.jsx("option",{value:"transferred",children:"Transferidos"}),c.jsx("option",{value:"running",children:"En progreso"})]}),c.jsx("input",{type:"text",value:x.phone,onChange:w=>E("phone",w.target.value),placeholder:"Telfono...",className:"px-3 py-2 border border-gray-200 rounded-lg text-sm focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none w-40"}),c.jsx("button",{onClick:A,className:"px-4 py-2 bg-green-500 hover:bg-green-600 text-white rounded-lg text-sm transition",children:"Aplicar"})]})}),c.jsx("div",{className:"bg-white rounded-xl border border-gray-100 shadow-sm overflow-hidden",children:t.length===0?c.jsxs("div",{className:"p-12 text-center text-gray-400",children:[c.jsx(xi,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),c.jsx("p",{children:"No hay logs de ejecucin"}),c.jsx("p",{className:"text-sm mt-1",children:"Los logs aparecern cuando se ejecuten flujos"})]}):c.jsxs("table",{className:"w-full",children:[c.jsx("thead",{children:c.jsxs("tr",{className:"bg-gray-50 text-left text-xs text-gray-500 uppercase tracking-wider",children:[c.jsx("th",{className:"px-4 py-3",children:"Fecha"}),c.jsx("th",{className:"px-4 py-3",children:"Flujo"}),c.jsx("th",{className:"px-4 py-3",children:"Telfono"}),c.jsx("th",{className:"px-4 py-3",children:"Estado"}),c.jsx("th",{className:"px-4 py-3",children:"Nodos"}),c.jsx("th",{className:"px-4 py-3",children:"Duracin"}),c.jsx("th",{className:"px-4 py-3"})]})}),c.jsx("tbody",{className:"divide-y divide-gray-100",children:t.map(w=>{const j=Hs[w.status]||Hs.running,_=j.icon;return c.jsxs("tr",{className:"hover:bg-gray-50 transition",children:[c.jsxs("td",{className:"px-4 py-3 text-sm",children:[c.jsx("div",{className:"text-gray-800",children:Dc(new Date(w.started_at),"dd/MM HH:mm")}),c.jsx("div",{className:"text-xs text-gray-400",children:Oc(new Date(w.started_at),{addSuffix:!0,locale:Nr})})]}),c.jsxs("td",{className:"px-4 py-3",children:[c.jsx("div",{className:"font-medium text-gray-800",children:w.flow_name||"Sin nombre"}),c.jsx("div",{className:"text-xs text-gray-400",children:w.trigger_type})]}),c.jsx("td",{className:"px-4 py-3",children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Ac,{className:"w-3 h-3 text-gray-400"}),c.jsx("span",{className:"text-sm text-gray-700",children:w.phone})]})}),c.jsx("td",{className:"px-4 py-3",children:c.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium",style:{background:`${j.color}20`,color:j.color},children:[c.jsx(_,{className:"w-3 h-3"}),j.label]})}),c.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:w.total_nodes_executed||0}),c.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:w.total_duration_ms?`${Math.round(w.total_duration_ms)}ms`:"-"}),c.jsx("td",{className:"px-4 py-3",children:c.jsx("button",{onClick:()=>N(w),className:"p-2 hover:bg-gray-100 rounded-lg transition",title:"Ver detalle",children:c.jsx(qx,{className:"w-4 h-4 text-gray-400"})})})]},w.id)})})]})}),f&&c.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:()=>m(null),children:c.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-2xl max-h-[80vh] overflow-auto m-4",onClick:w=>w.stopPropagation(),children:[c.jsxs("div",{className:"p-4 border-b border-gray-200 flex items-center justify-between sticky top-0 bg-white",children:[c.jsx("h3",{className:"font-semibold text-gray-800",children:"Detalle de Ejecucin"}),c.jsx("button",{onClick:()=>m(null),className:"p-2 hover:bg-gray-100 rounded-lg",children:c.jsx(tE,{className:"w-4 h-4"})})]}),g?c.jsx("div",{className:"p-8 text-center",children:c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-green-500 mx-auto"})}):c.jsxs("div",{className:"p-4 space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-xs text-gray-400 mb-1",children:"Flujo"}),c.jsx("p",{className:"font-medium",children:f.flow_name})]}),c.jsxs("div",{children:[c.jsx("p",{className:"text-xs text-gray-400 mb-1",children:"Telfono"}),c.jsx("p",{className:"font-medium",children:f.phone})]}),c.jsxs("div",{children:[c.jsx("p",{className:"text-xs text-gray-400 mb-1",children:"Mensaje trigger"}),c.jsx("p",{className:"text-sm bg-gray-100 p-2 rounded",children:f.trigger_message||"-"})]}),c.jsxs("div",{children:[c.jsx("p",{className:"text-xs text-gray-400 mb-1",children:"Estado final"}),c.jsx("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium",style:{background:`${Hs[f.status]?.color}20`,color:Hs[f.status]?.color},children:Hs[f.status]?.label})]})]}),f.variables&&Object.keys(f.variables).length>0&&c.jsxs("div",{children:[c.jsx("p",{className:"text-xs text-gray-400 mb-2",children:"Variables capturadas"}),c.jsx("div",{className:"bg-gray-50 rounded-lg p-3 space-y-1",children:Object.entries(f.variables).map(([w,j])=>c.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[c.jsxs("span",{className:"font-mono text-purple-600",children:[w,":"]}),c.jsx("span",{className:"text-gray-700",children:String(j)})]},w))})]}),f.steps&&f.steps.length>0&&c.jsxs("div",{children:[c.jsx("p",{className:"text-xs text-gray-400 mb-2",children:"Nodos ejecutados"}),c.jsx("div",{className:"space-y-2",children:f.steps.map((w,j)=>c.jsxs("div",{className:"flex items-start gap-3 p-3 bg-gray-50 rounded-lg",children:[c.jsx("div",{className:"w-6 h-6 rounded-full bg-green-100 text-green-600 flex items-center justify-center text-xs font-medium",children:j+1}),c.jsxs("div",{className:"flex-1",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"font-medium text-sm",children:w.node_id}),c.jsx("span",{className:"text-xs px-2 py-0.5 bg-gray-200 rounded text-gray-600",children:w.node_type}),c.jsxs("span",{className:"text-xs text-gray-400",children:[w.duration_ms,"ms"]})]}),w.output&&c.jsx("p",{className:"text-sm text-gray-600 mt-1 break-words",children:w.output})]})]},j))})]}),f.error_message&&c.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:[c.jsx("p",{className:"text-xs text-red-600 font-medium mb-1",children:"Error"}),c.jsx("p",{className:"text-sm text-red-700",children:f.error_message}),f.error_node_id&&c.jsxs("p",{className:"text-xs text-red-500 mt-1",children:["En nodo: ",f.error_node_id]})]})]})]})})]})}const Ic="/api/leads";async function Fc(t,a){if(!t.ok){let i=a;try{const s=await t.json();s.error&&(i=s.error)}catch{}throw new Error(i)}return t.json()}async function DM(t={}){const a=new URLSearchParams(t).toString(),i=await fetch(`${Ic}?${a}`);return Fc(i,"Error al cargar leads")}async function OM(){const t=await fetch(`${Ic}/stats`);return Fc(t,"Error al cargar estadsticas")}async function kM(t,a){const i=await fetch(`${Ic}/${encodeURIComponent(t)}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});return Fc(i,"Error al actualizar lead")}async function BM(t,a,i){const s=await fetch(`${Ic}/${encodeURIComponent(t)}/adjust-score`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({adjustment:a,reason:i})});return Fc(s,"Error al ajustar score")}const Kl={new:{label:"Nuevo",color:"#6b7280",bg:"#f3f4f6"},engaged:{label:"Interesado",color:"#3b82f6",bg:"#dbeafe"},qualified:{label:"Calificado",color:"#10b981",bg:"#d1fae5"},customer:{label:"Cliente",color:"#8b5cf6",bg:"#ede9fe"},inactive:{label:"Inactivo",color:"#9ca3af",bg:"#f9fafb"}},yx={hot:{color:"#ef4444",label:"Caliente",range:"80-100"},warm:{color:"#f59e0b",label:"Tibio",range:"50-79"},cold:{color:"#3b82f6",label:"Fro",range:"20-49"},new:{color:"#6b7280",label:"Nuevo",range:"0-19"}};function HM(t){return t>=80?"hot":t>=50?"warm":t>=20?"cold":"new"}function LM(){const t=ji(),[a,i]=C.useState([]),[s,l]=C.useState(null),[u,f]=C.useState(!0),[m,g]=C.useState(null),[p,x]=C.useState({status:"",min_score:"",search:"",sort_by:"current_score",sort_dir:"desc"});C.useEffect(()=>{y()},[]);const y=async()=>{f(!0);try{const[w,j]=await Promise.all([DM({limit:100,...p}),OM()]);i(w.leads||[]),l(j)}catch(w){console.error("Error loading leads:",w)}finally{f(!1)}},v=(w,j)=>{x(_=>({..._,[w]:j}))},N=()=>{y()},E=async(w,j)=>{try{await kM(w,{status:j}),y()}catch(_){console.error("Error updating lead:",_)}},A=async(w,j)=>{try{await BM(w,j,"Manual adjustment"),y()}catch(_){console.error("Error adjusting score:",_)}};return u?c.jsx("div",{className:"p-8 flex items-center justify-center h-full",children:c.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-500"})}):c.jsxs("div",{className:"p-8",children:[c.jsxs("div",{className:"flex items-center justify-between mb-8",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Gestin de Leads"}),c.jsx("p",{className:"text-gray-500 mt-1",children:"Administra y califica tus leads"})]}),c.jsxs("button",{onClick:y,className:"flex items-center gap-2 px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg text-gray-700 transition",children:[c.jsx(jh,{className:"w-4 h-4"}),"Actualizar"]})]}),s&&c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 mb-8",children:[c.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-100 shadow-sm",children:[c.jsx("p",{className:"text-sm text-gray-500",children:"Total Leads"}),c.jsx("p",{className:"text-2xl font-bold text-gray-800",children:s.stats?.total_leads||0})]}),c.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-100 shadow-sm",children:[c.jsx("p",{className:"text-sm text-gray-500",children:"Score Promedio"}),c.jsx("p",{className:"text-2xl font-bold text-blue-600",children:s.stats?.avg_score||0})]}),c.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-100 shadow-sm",children:[c.jsx("p",{className:"text-sm text-gray-500",children:"Nuevos"}),c.jsx("p",{className:"text-2xl font-bold text-gray-600",children:s.stats?.new_leads||0})]}),c.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-100 shadow-sm",children:[c.jsx("p",{className:"text-sm text-gray-500",children:"Calificados"}),c.jsx("p",{className:"text-2xl font-bold text-green-600",children:s.stats?.qualified_leads||0})]}),c.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-100 shadow-sm",children:[c.jsx("p",{className:"text-sm text-gray-500",children:"Clientes"}),c.jsx("p",{className:"text-2xl font-bold text-purple-600",children:s.stats?.customers||0})]})]}),s?.score_distribution&&c.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-100 shadow-sm mb-6",children:[c.jsx("p",{className:"text-sm font-medium text-gray-700 mb-3",children:"Distribucin de Scores"}),c.jsx("div",{className:"flex gap-4",children:Object.entries(yx).map(([w,j])=>{const _=s.score_distribution.find(S=>S.category===w)?.count||0;return c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"w-3 h-3 rounded-full",style:{background:j.color}}),c.jsxs("span",{className:"text-sm text-gray-600",children:[j.label,": ",c.jsx("strong",{children:_})]})]},w)})})]}),c.jsx("div",{className:"bg-white rounded-xl p-4 border border-gray-100 shadow-sm mb-6",children:c.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Vx,{className:"w-4 h-4 text-gray-400"}),c.jsx("span",{className:"text-sm text-gray-600",children:"Filtrar:"})]}),c.jsxs("div",{className:"relative",children:[c.jsx(Xx,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),c.jsx("input",{type:"text",value:p.search,onChange:w=>v("search",w.target.value),placeholder:"Buscar...",className:"pl-10 pr-4 py-2 border border-gray-200 rounded-lg text-sm focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none w-48"})]}),c.jsxs("select",{value:p.status,onChange:w=>v("status",w.target.value),className:"px-3 py-2 border border-gray-200 rounded-lg text-sm focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none",children:[c.jsx("option",{value:"",children:"Todos los estados"}),Object.entries(Kl).map(([w,j])=>c.jsx("option",{value:w,children:j.label},w))]}),c.jsxs("select",{value:p.min_score,onChange:w=>v("min_score",w.target.value),className:"px-3 py-2 border border-gray-200 rounded-lg text-sm focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none",children:[c.jsx("option",{value:"",children:"Todos los scores"}),c.jsx("option",{value:"80",children:"Score 80+ (Caliente)"}),c.jsx("option",{value:"50",children:"Score 50+ (Tibio)"}),c.jsx("option",{value:"20",children:"Score 20+ (Fro)"})]}),c.jsxs("select",{value:`${p.sort_by}-${p.sort_dir}`,onChange:w=>{const[j,_]=w.target.value.split("-");v("sort_by",j),v("sort_dir",_)},className:"px-3 py-2 border border-gray-200 rounded-lg text-sm focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none",children:[c.jsx("option",{value:"current_score-desc",children:"Mayor score"}),c.jsx("option",{value:"current_score-asc",children:"Menor score"}),c.jsx("option",{value:"last_interaction-desc",children:"Ms reciente"}),c.jsx("option",{value:"total_messages-desc",children:"Ms mensajes"})]}),c.jsx("button",{onClick:N,className:"px-4 py-2 bg-green-500 hover:bg-green-600 text-white rounded-lg text-sm transition",children:"Aplicar"})]})}),c.jsx("div",{className:"bg-white rounded-xl border border-gray-100 shadow-sm overflow-hidden",children:a.length===0?c.jsxs("div",{className:"p-12 text-center text-gray-400",children:[c.jsx(Rc,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),c.jsx("p",{children:"No hay leads registrados"}),c.jsx("p",{className:"text-sm mt-1",children:"Los leads se crean automticamente cuando interactan"})]}):c.jsxs("table",{className:"w-full",children:[c.jsx("thead",{children:c.jsxs("tr",{className:"bg-gray-50 text-left text-xs text-gray-500 uppercase tracking-wider",children:[c.jsx("th",{className:"px-4 py-3",children:"Lead"}),c.jsx("th",{className:"px-4 py-3",children:"Score"}),c.jsx("th",{className:"px-4 py-3",children:"Estado"}),c.jsx("th",{className:"px-4 py-3",children:"Mensajes"}),c.jsx("th",{className:"px-4 py-3",children:"ltima actividad"}),c.jsx("th",{className:"px-4 py-3",children:"Acciones"})]})}),c.jsx("tbody",{className:"divide-y divide-gray-100",children:a.map(w=>{const j=HM(w.current_score),_=yx[j],S=Kl[w.status]||Kl.new;return c.jsxs("tr",{className:"hover:bg-gray-50 transition",children:[c.jsx("td",{className:"px-4 py-3",children:c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center",children:c.jsx("span",{className:"text-green-600 font-medium",children:w.contact_name?.[0]?.toUpperCase()||w.phone.slice(-2)})}),c.jsxs("div",{children:[c.jsx("div",{className:"font-medium text-gray-800",children:w.contact_name||"Sin nombre"}),c.jsxs("div",{className:"text-xs text-gray-400 flex items-center gap-1",children:[c.jsx(Ac,{className:"w-3 h-3"}),w.phone]})]})]})}),c.jsx("td",{className:"px-4 py-3",children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center font-bold text-sm",style:{background:`${_.color}20`,color:_.color},children:w.current_score}),c.jsxs("div",{className:"flex flex-col gap-0.5",children:[c.jsx("button",{onClick:()=>A(w.phone,5),className:"p-1 hover:bg-green-100 rounded text-green-600",title:"+5 puntos",children:c.jsx(YN,{className:"w-3 h-3"})}),c.jsx("button",{onClick:()=>A(w.phone,-5),className:"p-1 hover:bg-red-100 rounded text-red-600",title:"-5 puntos",children:c.jsx($N,{className:"w-3 h-3"})})]})]})}),c.jsx("td",{className:"px-4 py-3",children:c.jsx("select",{value:w.status,onChange:M=>E(w.phone,M.target.value),className:"px-2 py-1 rounded-full text-xs font-medium border-0 cursor-pointer",style:{background:S.bg,color:S.color},children:Object.entries(Kl).map(([M,B])=>c.jsx("option",{value:M,children:B.label},M))})}),c.jsx("td",{className:"px-4 py-3",children:c.jsxs("div",{className:"flex items-center gap-1 text-sm text-gray-600",children:[c.jsx(Sr,{className:"w-4 h-4"}),w.total_messages||w.message_count||0]})}),c.jsx("td",{className:"px-4 py-3 text-sm text-gray-500",children:w.last_interaction?Oc(new Date(w.last_interaction),{addSuffix:!0,locale:Nr}):"-"}),c.jsx("td",{className:"px-4 py-3",children:c.jsx("button",{onClick:()=>t(`/conversations?phone=${encodeURIComponent(w.phone)}`),className:"p-2 hover:bg-gray-100 rounded-lg transition",title:"Ver conversacin",children:c.jsx(qx,{className:"w-4 h-4 text-gray-400"})})})]},w.phone)})})]})})]})}const fo="/api/flow-analytics";async function ho(t,a){if(!t.ok){let i=a;try{const s=await t.json();s.error&&(i=s.error)}catch{}throw new Error(i)}return t.json()}async function UM(t=7){const a=await fetch(`${fo}/summary?days=${t}`);return ho(a,"Error al cargar resumen")}async function $M(t=14){const a=await fetch(`${fo}/timeline?days=${t}`);return ho(a,"Error al cargar timeline")}async function qM(t=7){const a=await fetch(`${fo}/by-flow?days=${t}`);return ho(a,"Error al cargar mtricas por flujo")}async function VM(t=7){const a=await fetch(`${fo}/by-hour?days=${t}`);return ho(a,"Error al cargar distribucin horaria")}async function YM(t=7){const a=await fetch(`${fo}/trigger-types?days=${t}`);return ho(a,"Error al cargar tipos de trigger")}function XM(){const[t,a]=C.useState(null),[i,s]=C.useState([]),[l,u]=C.useState([]),[f,m]=C.useState([]),[g,p]=C.useState([]),[x,y]=C.useState(!0),[v,N]=C.useState(7);C.useEffect(()=>{E()},[v]);const E=async()=>{y(!0);try{const[j,_,S,M,B]=await Promise.all([UM(v),$M(v),qM(v),VM(v),YM(v)]);a(j.summary),s(_.timeline||[]),u(S.flows||[]),m(M.hourly||[]),p(B.trigger_types||[])}catch(j){console.error("Error loading analytics:",j)}finally{y(!1)}};if(x)return c.jsx("div",{className:"p-8 flex items-center justify-center h-full",children:c.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-500"})});const A=Math.max(...i.map(j=>j.total),1),w=Math.max(...f.map(j=>j.executions),1);return c.jsxs("div",{className:"p-8",children:[c.jsxs("div",{className:"flex items-center justify-between mb-8",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Analytics de Flujos"}),c.jsx("p",{className:"text-gray-500 mt-1",children:"Mtricas y anlisis de rendimiento"})]}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsxs("select",{value:v,onChange:j=>N(parseInt(j.target.value)),className:"px-3 py-2 border border-gray-200 rounded-lg text-sm focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none",children:[c.jsx("option",{value:7,children:"ltimos 7 das"}),c.jsx("option",{value:14,children:"ltimos 14 das"}),c.jsx("option",{value:30,children:"ltimos 30 das"})]}),c.jsxs("button",{onClick:E,className:"flex items-center gap-2 px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg text-gray-700 transition",children:[c.jsx(jh,{className:"w-4 h-4"}),"Actualizar"]})]})]}),t&&c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[c.jsx("div",{className:"bg-white rounded-xl p-5 border border-gray-100 shadow-sm",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-sm text-gray-500",children:"Total Ejecuciones"}),c.jsx("p",{className:"text-3xl font-bold text-gray-800 mt-1",children:t.executions.total}),c.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:[t.executions.unique_users," usuarios nicos"]})]}),c.jsx("div",{className:"p-3 bg-blue-50 rounded-xl",children:c.jsx(xi,{className:"w-6 h-6 text-blue-600"})})]})}),c.jsx("div",{className:"bg-white rounded-xl p-5 border border-gray-100 shadow-sm",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-sm text-gray-500",children:"Tasa de Completado"}),c.jsxs("p",{className:"text-3xl font-bold text-green-600 mt-1",children:[t.executions.completion_rate,"%"]}),c.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:[t.executions.completed," completados"]})]}),c.jsx("div",{className:"p-3 bg-green-50 rounded-xl",children:c.jsx(fc,{className:"w-6 h-6 text-green-600"})})]})}),c.jsx("div",{className:"bg-white rounded-xl p-5 border border-gray-100 shadow-sm",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-sm text-gray-500",children:"Fallidos"}),c.jsx("p",{className:"text-3xl font-bold text-red-500 mt-1",children:t.executions.failed}),c.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:[t.executions.transferred," transferidos"]})]}),c.jsx("div",{className:"p-3 bg-red-50 rounded-xl",children:c.jsx(Eh,{className:"w-6 h-6 text-red-500"})})]})}),c.jsx("div",{className:"bg-white rounded-xl p-5 border border-gray-100 shadow-sm",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-sm text-gray-500",children:"Tiempo Promedio"}),c.jsxs("p",{className:"text-3xl font-bold text-purple-600 mt-1",children:[t.executions.avg_duration_ms,"ms"]}),c.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:[t.executions.avg_nodes," nodos promedio"]})]}),c.jsx("div",{className:"p-3 bg-purple-50 rounded-xl",children:c.jsx(hc,{className:"w-6 h-6 text-purple-600"})})]})})]}),c.jsxs("div",{className:"bg-white rounded-xl border border-gray-100 shadow-sm p-6 mb-6",children:[c.jsxs("h3",{className:"font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[c.jsx(WN,{className:"w-5 h-5 text-gray-400"}),"Ejecuciones por da"]}),i.length===0?c.jsx("div",{className:"text-center text-gray-400 py-8",children:"No hay datos para mostrar"}):c.jsx("div",{className:"flex items-end gap-2 h-40",children:i.map((j,_)=>c.jsxs("div",{className:"flex-1 flex flex-col items-center",children:[c.jsxs("div",{className:"w-full flex flex-col gap-0.5",style:{height:"120px"},children:[c.jsx("div",{className:"w-full bg-green-500 rounded-t",style:{height:`${j.completed/A*100}%`},title:`Completados: ${j.completed}`}),c.jsx("div",{className:"w-full bg-red-400",style:{height:`${j.failed/A*100}%`},title:`Fallidos: ${j.failed}`}),c.jsx("div",{className:"w-full bg-yellow-400 rounded-b",style:{height:`${j.transferred/A*100}%`},title:`Transferidos: ${j.transferred}`})]}),c.jsx("div",{className:"text-xs text-gray-400 mt-2",children:Dc(new Date(j.date),"dd/MM")})]},_))}),c.jsxs("div",{className:"flex items-center gap-4 mt-4 pt-4 border-t border-gray-100",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"w-3 h-3 rounded bg-green-500"}),c.jsx("span",{className:"text-xs text-gray-500",children:"Completados"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"w-3 h-3 rounded bg-red-400"}),c.jsx("span",{className:"text-xs text-gray-500",children:"Fallidos"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"w-3 h-3 rounded bg-yellow-400"}),c.jsx("span",{className:"text-xs text-gray-500",children:"Transferidos"})]})]})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[c.jsxs("div",{className:"bg-white rounded-xl border border-gray-100 shadow-sm p-6",children:[c.jsxs("h3",{className:"font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[c.jsx(Yx,{className:"w-5 h-5 text-gray-400"}),"Rendimiento por Flujo"]}),l.length===0?c.jsx("div",{className:"text-center text-gray-400 py-8",children:"No hay flujos configurados"}):c.jsx("div",{className:"space-y-3",children:l.slice(0,5).map((j,_)=>c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"w-8 h-8 rounded-lg bg-gray-100 flex items-center justify-center text-sm font-medium text-gray-600",children:_+1}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("p",{className:"font-medium text-gray-800 truncate",children:j.flow_name}),c.jsxs("span",{className:"text-sm text-gray-500",children:[j.recent_executions," ejecuciones"]})]}),c.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[c.jsx("div",{className:"flex-1 h-2 bg-gray-100 rounded-full overflow-hidden",children:c.jsx("div",{className:"h-full bg-green-500",style:{width:`${j.completion_rate}%`}})}),c.jsxs("span",{className:"text-xs text-gray-400",children:[j.completion_rate,"%"]})]})]})]},j.flow_id))}),c.jsx(gi,{to:"/flows",className:"block text-center text-sm text-green-600 hover:text-green-700 mt-4 pt-4 border-t border-gray-100",children:"Ver todos los flujos"})]}),c.jsxs("div",{className:"bg-white rounded-xl border border-gray-100 shadow-sm p-6",children:[c.jsxs("h3",{className:"font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[c.jsx(hc,{className:"w-5 h-5 text-gray-400"}),"Actividad por Hora"]}),c.jsx("div",{className:"flex items-end gap-1 h-32",children:f.map((j,_)=>c.jsx("div",{className:"flex-1 bg-blue-500 rounded-t transition-all hover:bg-blue-600",style:{height:`${j.executions/w*100}%`,minHeight:j.executions>0?"4px":"0"},title:`${j.hour}:00 - ${j.executions} ejecuciones`},_))}),c.jsxs("div",{className:"flex justify-between text-xs text-gray-400 mt-2",children:[c.jsx("span",{children:"00:00"}),c.jsx("span",{children:"06:00"}),c.jsx("span",{children:"12:00"}),c.jsx("span",{children:"18:00"}),c.jsx("span",{children:"23:00"})]})]})]}),c.jsxs("div",{className:"bg-white rounded-xl border border-gray-100 shadow-sm p-6",children:[c.jsxs("h3",{className:"font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[c.jsx($x,{className:"w-5 h-5 text-gray-400"}),"Distribucin por Tipo de Trigger"]}),g.length===0?c.jsx("div",{className:"text-center text-gray-400 py-8",children:"No hay datos de triggers"}):c.jsx("div",{className:"flex gap-6",children:g.map((j,_)=>{const S=["#10b981","#3b82f6","#f59e0b","#8b5cf6","#ec4899"],M=S[_%S.length],B=g.reduce((k,X)=>k+X.count,0),$=B>0?Math.round(j.count/B*100):0;return c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-2",style:{background:`${M}20`},children:c.jsxs("span",{className:"text-xl font-bold",style:{color:M},children:[$,"%"]})}),c.jsx("p",{className:"text-sm font-medium text-gray-800 capitalize",children:j.trigger_type}),c.jsxs("p",{className:"text-xs text-gray-400",children:[j.count," ejecuciones"]})]},j.trigger_type)})})]})]})}function GM(){const[t,a]=C.useState([]),[i,s]=C.useState(null),[l,u]=C.useState({running:0,connectedMonitors:0}),[f,m]=C.useState(!1);return C.useEffect(()=>{const g=new EventSource("/api/flow-monitor/stream");return g.onopen=()=>m(!0),g.onerror=()=>m(!1),g.onmessage=p=>{const x=JSON.parse(p.data);switch(x.type){case"connected":u({running:x.activeCount,connectedMonitors:0});break;case"active_execution":a(y=>y.find(N=>N.executionId===x.executionId)?y:[x,...y]);break;case"flow_started":a(y=>[x,...y]);break;case"node_started":case"node_completed":a(y=>y.map(v=>v.executionId===x.executionId?{...v,currentNodeId:x.nodeId,currentNodeType:x.nodeType,variables:x.variables,steps:x.type==="node_completed"?[...v.steps||[],{nodeId:x.nodeId,nodeType:x.nodeType,durationMs:x.durationMs,status:x.status,timestamp:x.timestamp}]:v.steps}:v));break;case"flow_completed":case"flow_error":case"flow_transferred":a(y=>y.map(v=>v.executionId===x.executionId?{...v,status:x.type.replace("flow_",""),completedAt:x.timestamp}:v));break}},()=>g.close()},[]),c.jsxs("div",{className:"h-screen flex flex-col bg-gray-50",children:[c.jsx("header",{className:"bg-white border-b px-6 py-4",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Monitor de Flujos"}),c.jsx("p",{className:"text-gray-500",children:"Tiempo real"})]}),c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:`w-2 h-2 rounded-full ${f?"bg-green-500":"bg-red-500"}`}),c.jsx("span",{className:"text-sm text-gray-600",children:f?"Conectado":"Desconectado"})]}),c.jsxs("div",{className:"text-sm text-gray-600",children:[t.filter(g=>!g.status).length," ejecuciones activas"]})]})]})}),c.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[c.jsxs("aside",{className:"w-80 bg-white border-r overflow-y-auto",children:[c.jsx("div",{className:"p-4 border-b",children:c.jsx("h2",{className:"font-semibold text-gray-700",children:"Ejecuciones"})}),c.jsx("div",{className:"divide-y",children:t.length===0?c.jsx("div",{className:"p-8 text-center text-gray-400",children:"Sin ejecuciones"}):t.map(g=>c.jsx("button",{onClick:()=>s(g),className:`w-full p-4 text-left hover:bg-gray-50 transition ${i?.executionId===g.executionId?"bg-green-50":""}`,children:c.jsxs("div",{className:"flex items-start justify-between gap-2",children:[c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[c.jsx(Ac,{className:"w-4 h-4 text-gray-400 flex-shrink-0"}),c.jsx("span",{className:"font-mono text-sm text-gray-700 truncate",children:g.phone})]}),c.jsx("p",{className:"text-xs text-gray-500 truncate mb-1",children:g.flowName||g.flowSlug}),g.currentNodeId&&c.jsxs("div",{className:"flex items-center gap-1 text-xs",children:[c.jsx(xi,{className:"w-3 h-3 text-green-500"}),c.jsx("span",{className:"text-gray-600",children:g.currentNodeId})]})]}),c.jsxs("div",{children:[g.status==="completed"&&c.jsx(fc,{className:"w-5 h-5 text-green-500"}),g.status==="error"&&c.jsx(Eh,{className:"w-5 h-5 text-red-500"}),g.status==="transferred"&&c.jsx(Qf,{className:"w-5 h-5 text-yellow-500"}),!g.status&&c.jsx(xi,{className:"w-5 h-5 text-green-500 animate-pulse"})]})]})},g.executionId))})]}),c.jsx("main",{className:"flex-1 flex",children:i?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"flex-1 p-6 overflow-auto",children:c.jsxs("div",{className:"bg-white rounded-lg border p-6",children:[c.jsx("h3",{className:"font-semibold text-gray-700 mb-4",children:"Ejecucin del Flujo"}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{children:[c.jsx("span",{className:"text-sm text-gray-500",children:"Flujo:"}),c.jsx("p",{className:"font-medium",children:i.flowName})]}),c.jsxs("div",{children:[c.jsx("span",{className:"text-sm text-gray-500",children:"Telfono:"}),c.jsx("p",{className:"font-mono text-sm",children:i.phone})]}),c.jsxs("div",{children:[c.jsx("span",{className:"text-sm text-gray-500",children:"Nodo Actual:"}),c.jsx("p",{className:"font-mono text-sm",children:i.currentNodeId||"N/A"})]}),c.jsxs("div",{children:[c.jsx("span",{className:"text-sm text-gray-500",children:"Tipo de Nodo:"}),c.jsx("p",{className:"font-mono text-sm",children:i.currentNodeType||"N/A"})]}),c.jsxs("div",{children:[c.jsx("span",{className:"text-sm text-gray-500",children:"Estado:"}),c.jsxs("p",{className:"font-medium",children:[i.status==="completed"&&"Completado ",i.status==="error"&&"Error ",i.status==="transferred"&&"Transferido ",!i.status&&"En ejecucin..."]})]}),c.jsxs("div",{children:[c.jsx("span",{className:"text-sm text-gray-500",children:"Iniciado:"}),c.jsx("p",{className:"text-sm",children:i.timestamp?new Date(i.timestamp).toLocaleString("es-CL"):"N/A"})]}),i.completedAt&&c.jsxs("div",{children:[c.jsx("span",{className:"text-sm text-gray-500",children:"Completado:"}),c.jsx("p",{className:"text-sm",children:new Date(i.completedAt).toLocaleString("es-CL")})]})]})]})}),c.jsxs("aside",{className:"w-96 bg-white border-l overflow-y-auto",children:[c.jsx("div",{className:"p-4 border-b",children:c.jsx("h2",{className:"font-semibold text-gray-700",children:"Detalles"})}),c.jsxs("div",{className:"p-4 space-y-4",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-sm font-semibold text-gray-600 mb-2",children:"Variables"}),c.jsx("div",{className:"bg-gray-50 rounded p-3 font-mono text-xs",children:c.jsx("pre",{className:"whitespace-pre-wrap break-words",children:JSON.stringify(i.variables||{},null,2)})})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-sm font-semibold text-gray-600 mb-2",children:"Timeline"}),c.jsx("div",{className:"space-y-2",children:i.steps&&i.steps.length>0?i.steps.map((g,p)=>c.jsxs("div",{className:"flex items-start gap-2 text-xs",children:[c.jsx(fc,{className:"w-4 h-4 text-green-500 flex-shrink-0 mt-0.5"}),c.jsxs("div",{className:"flex-1",children:[c.jsx("p",{className:"font-medium text-gray-700",children:g.nodeId}),c.jsxs("p",{className:"text-gray-500",children:[g.nodeType,"  ",g.durationMs,"ms"]}),g.timestamp&&c.jsx("p",{className:"text-gray-400",children:new Date(g.timestamp).toLocaleTimeString("es-CL")})]})]},p)):c.jsx("p",{className:"text-gray-400 text-sm",children:"Sin eventos an"})})]})]})]})]}):c.jsx("div",{className:"flex-1 flex items-center justify-center text-gray-400",children:c.jsxs("div",{className:"text-center",children:[c.jsx(xi,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),c.jsx("p",{children:"Selecciona una ejecucin para ver detalles"})]})})})]})]})}function ZM({children:t}){return kr(i=>i.isAuthenticated)?t:c.jsx(Yf,{to:"/login",replace:!0})}function QM(){return c.jsxs(yS,{children:[c.jsx(qt,{path:"/login",element:c.jsx(rE,{})}),c.jsxs(qt,{path:"/",element:c.jsx(ZM,{children:c.jsx(aE,{})}),children:[c.jsx(qt,{index:!0,element:c.jsx(Yf,{to:"/dashboard",replace:!0})}),c.jsx(qt,{path:"dashboard",element:c.jsx(Jj,{})}),c.jsx(qt,{path:"conversations",element:c.jsx(K_,{})}),c.jsx(qt,{path:"flows",element:c.jsx(c4,{})}),c.jsx(qt,{path:"flows/builder/:id?",element:c.jsx(TM,{})}),c.jsx(qt,{path:"logs",element:c.jsx(zM,{})}),c.jsx(qt,{path:"leads",element:c.jsx(LM,{})}),c.jsx(qt,{path:"analytics",element:c.jsx(XM,{})}),c.jsx(qt,{path:"monitor",element:c.jsx(GM,{})})]}),c.jsx(qt,{path:"*",element:c.jsx(Yf,{to:"/dashboard",replace:!0})})]})}gw.createRoot(document.getElementById("root")).render(c.jsx(gr.StrictMode,{children:c.jsx(VS,{children:c.jsx(QM,{})})}));
