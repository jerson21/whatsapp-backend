(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))r(l);new MutationObserver(l=>{for(const u of l)if(u.type==="childList")for(const d of u.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&r(d)}).observe(document,{childList:!0,subtree:!0});function a(l){const u={};return l.integrity&&(u.integrity=l.integrity),l.referrerPolicy&&(u.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?u.credentials="include":l.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function r(l){if(l.ep)return;l.ep=!0;const u=a(l);fetch(l.href,u)}})();function dp(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var oh={exports:{}},fi={};var zx;function JN(){if(zx)return fi;zx=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function a(r,l,u){var d=null;if(u!==void 0&&(d=""+u),l.key!==void 0&&(d=""+l.key),"key"in l){u={};for(var h in l)h!=="key"&&(u[h]=l[h])}else u=l;return l=u.ref,{$$typeof:e,type:r,key:d,ref:l!==void 0?l:null,props:u}}return fi.Fragment=t,fi.jsx=a,fi.jsxs=a,fi}var Lx;function ej(){return Lx||(Lx=1,oh.exports=JN()),oh.exports}var o=ej(),ih={exports:{}},_e={};var Bx;function tj(){if(Bx)return _e;Bx=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),d=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),x=Symbol.for("react.activity"),b=Symbol.iterator;function v(D){return D===null||typeof D!="object"?null:(D=b&&D[b]||D["@@iterator"],typeof D=="function"?D:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_=Object.assign,E={};function T(D,V,Z){this.props=D,this.context=V,this.refs=E,this.updater=Z||w}T.prototype.isReactComponent={},T.prototype.setState=function(D,V){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,V,"setState")},T.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function A(){}A.prototype=T.prototype;function C(D,V,Z){this.props=D,this.context=V,this.refs=E,this.updater=Z||w}var k=C.prototype=new A;k.constructor=C,_(k,T.prototype),k.isPureReactComponent=!0;var L=Array.isArray;function j(){}var R={H:null,A:null,T:null,S:null},$=Object.prototype.hasOwnProperty;function H(D,V,Z){var ae=Z.ref;return{$$typeof:e,type:D,key:V,ref:ae!==void 0?ae:null,props:Z}}function F(D,V){return H(D.type,V,D.props)}function P(D){return typeof D=="object"&&D!==null&&D.$$typeof===e}function K(D){var V={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(Z){return V[Z]})}var W=/\/+/g;function B(D,V){return typeof D=="object"&&D!==null&&D.key!=null?K(""+D.key):V.toString(36)}function G(D){switch(D.status){case"fulfilled":return D.value;case"rejected":throw D.reason;default:switch(typeof D.status=="string"?D.then(j,j):(D.status="pending",D.then(function(V){D.status==="pending"&&(D.status="fulfilled",D.value=V)},function(V){D.status==="pending"&&(D.status="rejected",D.reason=V)})),D.status){case"fulfilled":return D.value;case"rejected":throw D.reason}}throw D}function O(D,V,Z,ae,ne){var de=typeof D;(de==="undefined"||de==="boolean")&&(D=null);var fe=!1;if(D===null)fe=!0;else switch(de){case"bigint":case"string":case"number":fe=!0;break;case"object":switch(D.$$typeof){case e:case t:fe=!0;break;case y:return fe=D._init,O(fe(D._payload),V,Z,ae,ne)}}if(fe)return ne=ne(D),fe=ae===""?"."+B(D,0):ae,L(ne)?(Z="",fe!=null&&(Z=fe.replace(W,"$&/")+"/"),O(ne,V,Z,"",function(Se){return Se})):ne!=null&&(P(ne)&&(ne=F(ne,Z+(ne.key==null||D&&D.key===ne.key?"":(""+ne.key).replace(W,"$&/")+"/")+fe)),V.push(ne)),1;fe=0;var ue=ae===""?".":ae+":";if(L(D))for(var pe=0;pe<D.length;pe++)ae=D[pe],de=ue+B(ae,pe),fe+=O(ae,V,Z,de,ne);else if(pe=v(D),typeof pe=="function")for(D=pe.call(D),pe=0;!(ae=D.next()).done;)ae=ae.value,de=ue+B(ae,pe++),fe+=O(ae,V,Z,de,ne);else if(de==="object"){if(typeof D.then=="function")return O(G(D),V,Z,ae,ne);throw V=String(D),Error("Objects are not valid as a React child (found: "+(V==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":V)+"). If you meant to render a collection of children, use an array instead.")}return fe}function U(D,V,Z){if(D==null)return D;var ae=[],ne=0;return O(D,ae,"","",function(de){return V.call(Z,de,ne++)}),ae}function z(D){if(D._status===-1){var V=D._result;V=V(),V.then(function(Z){(D._status===0||D._status===-1)&&(D._status=1,D._result=Z)},function(Z){(D._status===0||D._status===-1)&&(D._status=2,D._result=Z)}),D._status===-1&&(D._status=0,D._result=V)}if(D._status===1)return D._result.default;throw D._result}var I=typeof reportError=="function"?reportError:function(D){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var V=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof D=="object"&&D!==null&&typeof D.message=="string"?String(D.message):String(D),error:D});if(!window.dispatchEvent(V))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",D);return}console.error(D)},q={map:U,forEach:function(D,V,Z){U(D,function(){V.apply(this,arguments)},Z)},count:function(D){var V=0;return U(D,function(){V++}),V},toArray:function(D){return U(D,function(V){return V})||[]},only:function(D){if(!P(D))throw Error("React.Children.only expected to receive a single React element child.");return D}};return _e.Activity=x,_e.Children=q,_e.Component=T,_e.Fragment=a,_e.Profiler=l,_e.PureComponent=C,_e.StrictMode=r,_e.Suspense=m,_e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=R,_e.__COMPILER_RUNTIME={__proto__:null,c:function(D){return R.H.useMemoCache(D)}},_e.cache=function(D){return function(){return D.apply(null,arguments)}},_e.cacheSignal=function(){return null},_e.cloneElement=function(D,V,Z){if(D==null)throw Error("The argument must be a React element, but you passed "+D+".");var ae=_({},D.props),ne=D.key;if(V!=null)for(de in V.key!==void 0&&(ne=""+V.key),V)!$.call(V,de)||de==="key"||de==="__self"||de==="__source"||de==="ref"&&V.ref===void 0||(ae[de]=V[de]);var de=arguments.length-2;if(de===1)ae.children=Z;else if(1<de){for(var fe=Array(de),ue=0;ue<de;ue++)fe[ue]=arguments[ue+2];ae.children=fe}return H(D.type,ne,ae)},_e.createContext=function(D){return D={$$typeof:d,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null},D.Provider=D,D.Consumer={$$typeof:u,_context:D},D},_e.createElement=function(D,V,Z){var ae,ne={},de=null;if(V!=null)for(ae in V.key!==void 0&&(de=""+V.key),V)$.call(V,ae)&&ae!=="key"&&ae!=="__self"&&ae!=="__source"&&(ne[ae]=V[ae]);var fe=arguments.length-2;if(fe===1)ne.children=Z;else if(1<fe){for(var ue=Array(fe),pe=0;pe<fe;pe++)ue[pe]=arguments[pe+2];ne.children=ue}if(D&&D.defaultProps)for(ae in fe=D.defaultProps,fe)ne[ae]===void 0&&(ne[ae]=fe[ae]);return H(D,de,ne)},_e.createRef=function(){return{current:null}},_e.forwardRef=function(D){return{$$typeof:h,render:D}},_e.isValidElement=P,_e.lazy=function(D){return{$$typeof:y,_payload:{_status:-1,_result:D},_init:z}},_e.memo=function(D,V){return{$$typeof:p,type:D,compare:V===void 0?null:V}},_e.startTransition=function(D){var V=R.T,Z={};R.T=Z;try{var ae=D(),ne=R.S;ne!==null&&ne(Z,ae),typeof ae=="object"&&ae!==null&&typeof ae.then=="function"&&ae.then(j,I)}catch(de){I(de)}finally{V!==null&&Z.types!==null&&(V.types=Z.types),R.T=V}},_e.unstable_useCacheRefresh=function(){return R.H.useCacheRefresh()},_e.use=function(D){return R.H.use(D)},_e.useActionState=function(D,V,Z){return R.H.useActionState(D,V,Z)},_e.useCallback=function(D,V){return R.H.useCallback(D,V)},_e.useContext=function(D){return R.H.useContext(D)},_e.useDebugValue=function(){},_e.useDeferredValue=function(D,V){return R.H.useDeferredValue(D,V)},_e.useEffect=function(D,V){return R.H.useEffect(D,V)},_e.useEffectEvent=function(D){return R.H.useEffectEvent(D)},_e.useId=function(){return R.H.useId()},_e.useImperativeHandle=function(D,V,Z){return R.H.useImperativeHandle(D,V,Z)},_e.useInsertionEffect=function(D,V){return R.H.useInsertionEffect(D,V)},_e.useLayoutEffect=function(D,V){return R.H.useLayoutEffect(D,V)},_e.useMemo=function(D,V){return R.H.useMemo(D,V)},_e.useOptimistic=function(D,V){return R.H.useOptimistic(D,V)},_e.useReducer=function(D,V,Z){return R.H.useReducer(D,V,Z)},_e.useRef=function(D){return R.H.useRef(D)},_e.useState=function(D){return R.H.useState(D)},_e.useSyncExternalStore=function(D,V,Z){return R.H.useSyncExternalStore(D,V,Z)},_e.useTransition=function(){return R.H.useTransition()},_e.version="19.2.3",_e}var Px;function Hi(){return Px||(Px=1,ih.exports=tj()),ih.exports}var S=Hi();const Ir=dp(S);var lh={exports:{}},hi={},ch={exports:{}},uh={};var Hx;function nj(){return Hx||(Hx=1,(function(e){function t(O,U){var z=O.length;O.push(U);e:for(;0<z;){var I=z-1>>>1,q=O[I];if(0<l(q,U))O[I]=U,O[z]=q,z=I;else break e}}function a(O){return O.length===0?null:O[0]}function r(O){if(O.length===0)return null;var U=O[0],z=O.pop();if(z!==U){O[0]=z;e:for(var I=0,q=O.length,D=q>>>1;I<D;){var V=2*(I+1)-1,Z=O[V],ae=V+1,ne=O[ae];if(0>l(Z,z))ae<q&&0>l(ne,Z)?(O[I]=ne,O[ae]=z,I=ae):(O[I]=Z,O[V]=z,I=V);else if(ae<q&&0>l(ne,z))O[I]=ne,O[ae]=z,I=ae;else break e}}return U}function l(O,U){var z=O.sortIndex-U.sortIndex;return z!==0?z:O.id-U.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;e.unstable_now=function(){return u.now()}}else{var d=Date,h=d.now();e.unstable_now=function(){return d.now()-h}}var m=[],p=[],y=1,x=null,b=3,v=!1,w=!1,_=!1,E=!1,T=typeof setTimeout=="function"?setTimeout:null,A=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;function k(O){for(var U=a(p);U!==null;){if(U.callback===null)r(p);else if(U.startTime<=O)r(p),U.sortIndex=U.expirationTime,t(m,U);else break;U=a(p)}}function L(O){if(_=!1,k(O),!w)if(a(m)!==null)w=!0,j||(j=!0,K());else{var U=a(p);U!==null&&G(L,U.startTime-O)}}var j=!1,R=-1,$=5,H=-1;function F(){return E?!0:!(e.unstable_now()-H<$)}function P(){if(E=!1,j){var O=e.unstable_now();H=O;var U=!0;try{e:{w=!1,_&&(_=!1,A(R),R=-1),v=!0;var z=b;try{t:{for(k(O),x=a(m);x!==null&&!(x.expirationTime>O&&F());){var I=x.callback;if(typeof I=="function"){x.callback=null,b=x.priorityLevel;var q=I(x.expirationTime<=O);if(O=e.unstable_now(),typeof q=="function"){x.callback=q,k(O),U=!0;break t}x===a(m)&&r(m),k(O)}else r(m);x=a(m)}if(x!==null)U=!0;else{var D=a(p);D!==null&&G(L,D.startTime-O),U=!1}}break e}finally{x=null,b=z,v=!1}U=void 0}}finally{U?K():j=!1}}}var K;if(typeof C=="function")K=function(){C(P)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,B=W.port2;W.port1.onmessage=P,K=function(){B.postMessage(null)}}else K=function(){T(P,0)};function G(O,U){R=T(function(){O(e.unstable_now())},U)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(O){O.callback=null},e.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):$=0<O?Math.floor(1e3/O):5},e.unstable_getCurrentPriorityLevel=function(){return b},e.unstable_next=function(O){switch(b){case 1:case 2:case 3:var U=3;break;default:U=b}var z=b;b=U;try{return O()}finally{b=z}},e.unstable_requestPaint=function(){E=!0},e.unstable_runWithPriority=function(O,U){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var z=b;b=O;try{return U()}finally{b=z}},e.unstable_scheduleCallback=function(O,U,z){var I=e.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?I+z:I):z=I,O){case 1:var q=-1;break;case 2:q=250;break;case 5:q=1073741823;break;case 4:q=1e4;break;default:q=5e3}return q=z+q,O={id:y++,callback:U,priorityLevel:O,startTime:z,expirationTime:q,sortIndex:-1},z>I?(O.sortIndex=z,t(p,O),a(m)===null&&O===a(p)&&(_?(A(R),R=-1):_=!0,G(L,z-I))):(O.sortIndex=q,t(m,O),w||v||(w=!0,j||(j=!0,K()))),O},e.unstable_shouldYield=F,e.unstable_wrapCallback=function(O){var U=b;return function(){var z=b;b=U;try{return O.apply(this,arguments)}finally{b=z}}}})(uh)),uh}var Ux;function sj(){return Ux||(Ux=1,ch.exports=nj()),ch.exports}var dh={exports:{}},kt={};var qx;function aj(){if(qx)return kt;qx=1;var e=Hi();function t(m){var p="https://react.dev/errors/"+m;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)p+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+m+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(){}var r={d:{f:a,r:function(){throw Error(t(522))},D:a,C:a,L:a,m:a,X:a,S:a,M:a},p:0,findDOMNode:null},l=Symbol.for("react.portal");function u(m,p,y){var x=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:x==null?null:""+x,children:m,containerInfo:p,implementation:y}}var d=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(m,p){if(m==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return kt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,kt.createPortal=function(m,p){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(t(299));return u(m,p,null,y)},kt.flushSync=function(m){var p=d.T,y=r.p;try{if(d.T=null,r.p=2,m)return m()}finally{d.T=p,r.p=y,r.d.f()}},kt.preconnect=function(m,p){typeof m=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,r.d.C(m,p))},kt.prefetchDNS=function(m){typeof m=="string"&&r.d.D(m)},kt.preinit=function(m,p){if(typeof m=="string"&&p&&typeof p.as=="string"){var y=p.as,x=h(y,p.crossOrigin),b=typeof p.integrity=="string"?p.integrity:void 0,v=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;y==="style"?r.d.S(m,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:x,integrity:b,fetchPriority:v}):y==="script"&&r.d.X(m,{crossOrigin:x,integrity:b,fetchPriority:v,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},kt.preinitModule=function(m,p){if(typeof m=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var y=h(p.as,p.crossOrigin);r.d.M(m,{crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&r.d.M(m)},kt.preload=function(m,p){if(typeof m=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var y=p.as,x=h(y,p.crossOrigin);r.d.L(m,y,{crossOrigin:x,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},kt.preloadModule=function(m,p){if(typeof m=="string")if(p){var y=h(p.as,p.crossOrigin);r.d.m(m,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else r.d.m(m)},kt.requestFormReset=function(m){r.d.r(m)},kt.unstable_batchedUpdates=function(m,p){return m(p)},kt.useFormState=function(m,p,y){return d.H.useFormState(m,p,y)},kt.useFormStatus=function(){return d.H.useHostTransitionStatus()},kt.version="19.2.3",kt}var Ix;function Wb(){if(Ix)return dh.exports;Ix=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),dh.exports=aj(),dh.exports}var Vx;function rj(){if(Vx)return hi;Vx=1;var e=sj(),t=Hi(),a=Wb();function r(n){var s="https://react.dev/errors/"+n;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var i=2;i<arguments.length;i++)s+="&args[]="+encodeURIComponent(arguments[i])}return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function u(n){var s=n,i=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(i=s.return),n=s.return;while(n)}return s.tag===3?i:null}function d(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function h(n){if(n.tag===31){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function m(n){if(u(n)!==n)throw Error(r(188))}function p(n){var s=n.alternate;if(!s){if(s=u(n),s===null)throw Error(r(188));return s!==n?null:n}for(var i=n,c=s;;){var f=i.return;if(f===null)break;var g=f.alternate;if(g===null){if(c=f.return,c!==null){i=c;continue}break}if(f.child===g.child){for(g=f.child;g;){if(g===i)return m(f),n;if(g===c)return m(f),s;g=g.sibling}throw Error(r(188))}if(i.return!==c.return)i=f,c=g;else{for(var N=!1,M=f.child;M;){if(M===i){N=!0,i=f,c=g;break}if(M===c){N=!0,c=f,i=g;break}M=M.sibling}if(!N){for(M=g.child;M;){if(M===i){N=!0,i=g,c=f;break}if(M===c){N=!0,c=g,i=f;break}M=M.sibling}if(!N)throw Error(r(189))}}if(i.alternate!==c)throw Error(r(190))}if(i.tag!==3)throw Error(r(188));return i.stateNode.current===i?n:s}function y(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n;for(n=n.child;n!==null;){if(s=y(n),s!==null)return s;n=n.sibling}return null}var x=Object.assign,b=Symbol.for("react.element"),v=Symbol.for("react.transitional.element"),w=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),A=Symbol.for("react.consumer"),C=Symbol.for("react.context"),k=Symbol.for("react.forward_ref"),L=Symbol.for("react.suspense"),j=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),$=Symbol.for("react.lazy"),H=Symbol.for("react.activity"),F=Symbol.for("react.memo_cache_sentinel"),P=Symbol.iterator;function K(n){return n===null||typeof n!="object"?null:(n=P&&n[P]||n["@@iterator"],typeof n=="function"?n:null)}var W=Symbol.for("react.client.reference");function B(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===W?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case _:return"Fragment";case T:return"Profiler";case E:return"StrictMode";case L:return"Suspense";case j:return"SuspenseList";case H:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case w:return"Portal";case C:return n.displayName||"Context";case A:return(n._context.displayName||"Context")+".Consumer";case k:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case R:return s=n.displayName||null,s!==null?s:B(n.type)||"Memo";case $:s=n._payload,n=n._init;try{return B(n(s))}catch{}}return null}var G=Array.isArray,O=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,U=a.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,z={pending:!1,data:null,method:null,action:null},I=[],q=-1;function D(n){return{current:n}}function V(n){0>q||(n.current=I[q],I[q]=null,q--)}function Z(n,s){q++,I[q]=n.current,n.current=s}var ae=D(null),ne=D(null),de=D(null),fe=D(null);function ue(n,s){switch(Z(de,s),Z(ne,n),Z(ae,null),s.nodeType){case 9:case 11:n=(n=s.documentElement)&&(n=n.namespaceURI)?rx(n):0;break;default:if(n=s.tagName,s=s.namespaceURI)s=rx(s),n=ox(s,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}V(ae),Z(ae,n)}function pe(){V(ae),V(ne),V(de)}function Se(n){n.memoizedState!==null&&Z(fe,n);var s=ae.current,i=ox(s,n.type);s!==i&&(Z(ne,n),Z(ae,i))}function he(n){ne.current===n&&(V(ae),V(ne)),fe.current===n&&(V(fe),li._currentValue=z)}var ye,we;function se(n){if(ye===void 0)try{throw Error()}catch(i){var s=i.stack.trim().match(/\n( *(at )?)/);ye=s&&s[1]||"",we=-1<i.stack.indexOf(`
    at`)?" (<anonymous>)":-1<i.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ye+n+we}var ce=!1;function je(n,s){if(!n||ce)return"";ce=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(s){var le=function(){throw Error()};if(Object.defineProperty(le.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(le,[])}catch(re){var te=re}Reflect.construct(n,[],le)}else{try{le.call()}catch(re){te=re}n.call(le.prototype)}}else{try{throw Error()}catch(re){te=re}(le=n())&&typeof le.catch=="function"&&le.catch(function(){})}}catch(re){if(re&&te&&typeof re.stack=="string")return[re.stack,te.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=c.DetermineComponentFrameRoot(),N=g[0],M=g[1];if(N&&M){var Y=N.split(`
`),ee=M.split(`
`);for(f=c=0;c<Y.length&&!Y[c].includes("DetermineComponentFrameRoot");)c++;for(;f<ee.length&&!ee[f].includes("DetermineComponentFrameRoot");)f++;if(c===Y.length||f===ee.length)for(c=Y.length-1,f=ee.length-1;1<=c&&0<=f&&Y[c]!==ee[f];)f--;for(;1<=c&&0<=f;c--,f--)if(Y[c]!==ee[f]){if(c!==1||f!==1)do if(c--,f--,0>f||Y[c]!==ee[f]){var oe=`
`+Y[c].replace(" at new "," at ");return n.displayName&&oe.includes("<anonymous>")&&(oe=oe.replace("<anonymous>",n.displayName)),oe}while(1<=c&&0<=f);break}}}finally{ce=!1,Error.prepareStackTrace=i}return(i=n?n.displayName||n.name:"")?se(i):""}function Ce(n,s){switch(n.tag){case 26:case 27:case 5:return se(n.type);case 16:return se("Lazy");case 13:return n.child!==s&&s!==null?se("Suspense Fallback"):se("Suspense");case 19:return se("SuspenseList");case 0:case 15:return je(n.type,!1);case 11:return je(n.type.render,!1);case 1:return je(n.type,!0);case 31:return se("Activity");default:return""}}function wt(n){try{var s="",i=null;do s+=Ce(n,i),i=n,n=n.return;while(n);return s}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var We=Object.prototype.hasOwnProperty,Nt=e.unstable_scheduleCallback,Ot=e.unstable_cancelCallback,Gn=e.unstable_shouldYield,$t=e.unstable_requestPaint,Me=e.unstable_now,fa=e.unstable_getCurrentPriorityLevel,Tt=e.unstable_ImmediatePriority,kn=e.unstable_UserBlockingPriority,Mn=e.unstable_NormalPriority,Ka=e.unstable_LowPriority,Kn=e.unstable_IdlePriority,Qa=e.log,xo=e.unstable_setDisableYieldValue,bn=null,jt=null;function xt(n){if(typeof Qa=="function"&&xo(n),jt&&typeof jt.setStrictMode=="function")try{jt.setStrictMode(bn,n)}catch{}}var yt=Math.clz32?Math.clz32:Xu,ha=Math.log,yo=Math.LN2;function Xu(n){return n>>>=0,n===0?32:31-(ha(n)/yo|0)|0}var Wa=256,Za=262144,Ja=4194304;function Qn(n){var s=n&42;if(s!==0)return s;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function er(n,s,i){var c=n.pendingLanes;if(c===0)return 0;var f=0,g=n.suspendedLanes,N=n.pingedLanes;n=n.warmLanes;var M=c&134217727;return M!==0?(c=M&~g,c!==0?f=Qn(c):(N&=M,N!==0?f=Qn(N):i||(i=M&~n,i!==0&&(f=Qn(i))))):(M=c&~g,M!==0?f=Qn(M):N!==0?f=Qn(N):i||(i=c&~n,i!==0&&(f=Qn(i)))),f===0?0:s!==0&&s!==f&&(s&g)===0&&(g=f&-f,i=s&-s,g>=i||g===32&&(i&4194048)!==0)?s:f}function pa(n,s){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&s)===0}function Gu(n,s){switch(n){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function tl(){var n=Ja;return Ja<<=1,(Ja&62914560)===0&&(Ja=4194304),n}function bo(n){for(var s=[],i=0;31>i;i++)s.push(n);return s}function ma(n,s){n.pendingLanes|=s,s!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function Ku(n,s,i,c,f,g){var N=n.pendingLanes;n.pendingLanes=i,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=i,n.entangledLanes&=i,n.errorRecoveryDisabledLanes&=i,n.shellSuspendCounter=0;var M=n.entanglements,Y=n.expirationTimes,ee=n.hiddenUpdates;for(i=N&~i;0<i;){var oe=31-yt(i),le=1<<oe;M[oe]=0,Y[oe]=-1;var te=ee[oe];if(te!==null)for(ee[oe]=null,oe=0;oe<te.length;oe++){var re=te[oe];re!==null&&(re.lane&=-536870913)}i&=~le}c!==0&&nl(n,c,0),g!==0&&f===0&&n.tag!==0&&(n.suspendedLanes|=g&~(N&~s))}function nl(n,s,i){n.pendingLanes|=s,n.suspendedLanes&=~s;var c=31-yt(s);n.entangledLanes|=s,n.entanglements[c]=n.entanglements[c]|1073741824|i&261930}function sl(n,s){var i=n.entangledLanes|=s;for(n=n.entanglements;i;){var c=31-yt(i),f=1<<c;f&s|n[c]&s&&(n[c]|=s),i&=~f}}function al(n,s){var i=s&-s;return i=(i&42)!==0?1:vo(i),(i&(n.suspendedLanes|s))!==0?0:i}function vo(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function wo(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function rl(){var n=U.p;return n!==0?n:(n=window.event,n===void 0?32:Ax(n.type))}function ol(n,s){var i=U.p;try{return U.p=n,s()}finally{U.p=i}}var Dn=Math.random().toString(36).slice(2),mt="__reactFiber$"+Dn,At="__reactProps$"+Dn,Wn="__reactContainer$"+Dn,tr="__reactEvents$"+Dn,il="__reactListeners$"+Dn,Qu="__reactHandles$"+Dn,ll="__reactResources$"+Dn,ga="__reactMarker$"+Dn;function No(n){delete n[mt],delete n[At],delete n[tr],delete n[il],delete n[Qu]}function _s(n){var s=n[mt];if(s)return s;for(var i=n.parentNode;i;){if(s=i[Wn]||i[mt]){if(i=s.alternate,s.child!==null||i!==null&&i.child!==null)for(n=hx(n);n!==null;){if(i=n[mt])return i;n=hx(n)}return s}n=i,i=n.parentNode}return null}function Ts(n){if(n=n[mt]||n[Wn]){var s=n.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return n}return null}function As(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n.stateNode;throw Error(r(33))}function ks(n){var s=n[ll];return s||(s=n[ll]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function lt(n){n[ga]=!0}var cl=new Set,ul={};function Zn(n,s){Ms(n,s),Ms(n+"Capture",s)}function Ms(n,s){for(ul[n]=s,n=0;n<s.length;n++)cl.add(s[n])}var Wu=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),jo={},dl={};function Zu(n){return We.call(dl,n)?!0:We.call(jo,n)?!1:Wu.test(n)?dl[n]=!0:(jo[n]=!0,!1)}function nr(n,s,i){if(Zu(s))if(i===null)n.removeAttribute(s);else{switch(typeof i){case"undefined":case"function":case"symbol":n.removeAttribute(s);return;case"boolean":var c=s.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){n.removeAttribute(s);return}}n.setAttribute(s,""+i)}}function sr(n,s,i){if(i===null)n.removeAttribute(s);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(s);return}n.setAttribute(s,""+i)}}function vn(n,s,i,c){if(c===null)n.removeAttribute(i);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(i);return}n.setAttributeNS(s,i,""+c)}}function Bt(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function fl(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Ju(n,s,i){var c=Object.getOwnPropertyDescriptor(n.constructor.prototype,s);if(!n.hasOwnProperty(s)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var f=c.get,g=c.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return f.call(this)},set:function(N){i=""+N,g.call(this,N)}}),Object.defineProperty(n,s,{enumerable:c.enumerable}),{getValue:function(){return i},setValue:function(N){i=""+N},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function ar(n){if(!n._valueTracker){var s=fl(n)?"checked":"value";n._valueTracker=Ju(n,s,""+n[s])}}function hl(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var i=s.getValue(),c="";return n&&(c=fl(n)?n.checked?"true":"false":n.value),n=c,n!==i?(s.setValue(n),!0):!1}function xa(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var ed=/[\n"\\]/g;function Pt(n){return n.replace(ed,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function ya(n,s,i,c,f,g,N,M){n.name="",N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"?n.type=N:n.removeAttribute("type"),s!=null?N==="number"?(s===0&&n.value===""||n.value!=s)&&(n.value=""+Bt(s)):n.value!==""+Bt(s)&&(n.value=""+Bt(s)):N!=="submit"&&N!=="reset"||n.removeAttribute("value"),s!=null?So(n,N,Bt(s)):i!=null?So(n,N,Bt(i)):c!=null&&n.removeAttribute("value"),f==null&&g!=null&&(n.defaultChecked=!!g),f!=null&&(n.checked=f&&typeof f!="function"&&typeof f!="symbol"),M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"?n.name=""+Bt(M):n.removeAttribute("name")}function pl(n,s,i,c,f,g,N,M){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(n.type=g),s!=null||i!=null){if(!(g!=="submit"&&g!=="reset"||s!=null)){ar(n);return}i=i!=null?""+Bt(i):"",s=s!=null?""+Bt(s):i,M||s===n.value||(n.value=s),n.defaultValue=s}c=c??f,c=typeof c!="function"&&typeof c!="symbol"&&!!c,n.checked=M?n.checked:!!c,n.defaultChecked=!!c,N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"&&(n.name=N),ar(n)}function So(n,s,i){s==="number"&&xa(n.ownerDocument)===n||n.defaultValue===""+i||(n.defaultValue=""+i)}function Jn(n,s,i,c){if(n=n.options,s){s={};for(var f=0;f<i.length;f++)s["$"+i[f]]=!0;for(i=0;i<n.length;i++)f=s.hasOwnProperty("$"+n[i].value),n[i].selected!==f&&(n[i].selected=f),f&&c&&(n[i].defaultSelected=!0)}else{for(i=""+Bt(i),s=null,f=0;f<n.length;f++){if(n[f].value===i){n[f].selected=!0,c&&(n[f].defaultSelected=!0);return}s!==null||n[f].disabled||(s=n[f])}s!==null&&(s.selected=!0)}}function em(n,s,i){if(s!=null&&(s=""+Bt(s),s!==n.value&&(n.value=s),i==null)){n.defaultValue!==s&&(n.defaultValue=s);return}n.defaultValue=i!=null?""+Bt(i):""}function tm(n,s,i,c){if(s==null){if(c!=null){if(i!=null)throw Error(r(92));if(G(c)){if(1<c.length)throw Error(r(93));c=c[0]}i=c}i==null&&(i=""),s=i}i=Bt(s),n.defaultValue=i,c=n.textContent,c===i&&c!==""&&c!==null&&(n.value=c),ar(n)}function rr(n,s){if(s){var i=n.firstChild;if(i&&i===n.lastChild&&i.nodeType===3){i.nodeValue=s;return}}n.textContent=s}var Gw=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function nm(n,s,i){var c=s.indexOf("--")===0;i==null||typeof i=="boolean"||i===""?c?n.setProperty(s,""):s==="float"?n.cssFloat="":n[s]="":c?n.setProperty(s,i):typeof i!="number"||i===0||Gw.has(s)?s==="float"?n.cssFloat=i:n[s]=(""+i).trim():n[s]=i+"px"}function sm(n,s,i){if(s!=null&&typeof s!="object")throw Error(r(62));if(n=n.style,i!=null){for(var c in i)!i.hasOwnProperty(c)||s!=null&&s.hasOwnProperty(c)||(c.indexOf("--")===0?n.setProperty(c,""):c==="float"?n.cssFloat="":n[c]="");for(var f in s)c=s[f],s.hasOwnProperty(f)&&i[f]!==c&&nm(n,f,c)}else for(var g in s)s.hasOwnProperty(g)&&nm(n,g,s[g])}function td(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Kw=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Qw=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ml(n){return Qw.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function es(){}var nd=null;function sd(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var or=null,ir=null;function am(n){var s=Ts(n);if(s&&(n=s.stateNode)){var i=n[At]||null;e:switch(n=s.stateNode,s.type){case"input":if(ya(n,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name),s=i.name,i.type==="radio"&&s!=null){for(i=n;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll('input[name="'+Pt(""+s)+'"][type="radio"]'),s=0;s<i.length;s++){var c=i[s];if(c!==n&&c.form===n.form){var f=c[At]||null;if(!f)throw Error(r(90));ya(c,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(s=0;s<i.length;s++)c=i[s],c.form===n.form&&hl(c)}break e;case"textarea":em(n,i.value,i.defaultValue);break e;case"select":s=i.value,s!=null&&Jn(n,!!i.multiple,s,!1)}}}var ad=!1;function rm(n,s,i){if(ad)return n(s,i);ad=!0;try{var c=n(s);return c}finally{if(ad=!1,(or!==null||ir!==null)&&(nc(),or&&(s=or,n=ir,ir=or=null,am(s),n)))for(s=0;s<n.length;s++)am(n[s])}}function Co(n,s){var i=n.stateNode;if(i===null)return null;var c=i[At]||null;if(c===null)return null;i=c[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(i&&typeof i!="function")throw Error(r(231,s,typeof i));return i}var ts=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),rd=!1;if(ts)try{var Eo={};Object.defineProperty(Eo,"passive",{get:function(){rd=!0}}),window.addEventListener("test",Eo,Eo),window.removeEventListener("test",Eo,Eo)}catch{rd=!1}var Ds=null,od=null,gl=null;function om(){if(gl)return gl;var n,s=od,i=s.length,c,f="value"in Ds?Ds.value:Ds.textContent,g=f.length;for(n=0;n<i&&s[n]===f[n];n++);var N=i-n;for(c=1;c<=N&&s[i-c]===f[g-c];c++);return gl=f.slice(n,1<c?1-c:void 0)}function xl(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function yl(){return!0}function im(){return!1}function Ht(n){function s(i,c,f,g,N){this._reactName=i,this._targetInst=f,this.type=c,this.nativeEvent=g,this.target=N,this.currentTarget=null;for(var M in n)n.hasOwnProperty(M)&&(i=n[M],this[M]=i?i(g):g[M]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?yl:im,this.isPropagationStopped=im,this}return x(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=yl)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=yl)},persist:function(){},isPersistent:yl}),s}var ba={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},bl=Ht(ba),_o=x({},ba,{view:0,detail:0}),Ww=Ht(_o),id,ld,To,vl=x({},_o,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ud,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==To&&(To&&n.type==="mousemove"?(id=n.screenX-To.screenX,ld=n.screenY-To.screenY):ld=id=0,To=n),id)},movementY:function(n){return"movementY"in n?n.movementY:ld}}),lm=Ht(vl),Zw=x({},vl,{dataTransfer:0}),Jw=Ht(Zw),e2=x({},_o,{relatedTarget:0}),cd=Ht(e2),t2=x({},ba,{animationName:0,elapsedTime:0,pseudoElement:0}),n2=Ht(t2),s2=x({},ba,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),a2=Ht(s2),r2=x({},ba,{data:0}),cm=Ht(r2),o2={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},i2={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},l2={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function c2(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=l2[n])?!!s[n]:!1}function ud(){return c2}var u2=x({},_o,{key:function(n){if(n.key){var s=o2[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=xl(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?i2[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ud,charCode:function(n){return n.type==="keypress"?xl(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?xl(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),d2=Ht(u2),f2=x({},vl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),um=Ht(f2),h2=x({},_o,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ud}),p2=Ht(h2),m2=x({},ba,{propertyName:0,elapsedTime:0,pseudoElement:0}),g2=Ht(m2),x2=x({},vl,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),y2=Ht(x2),b2=x({},ba,{newState:0,oldState:0}),v2=Ht(b2),w2=[9,13,27,32],dd=ts&&"CompositionEvent"in window,Ao=null;ts&&"documentMode"in document&&(Ao=document.documentMode);var N2=ts&&"TextEvent"in window&&!Ao,dm=ts&&(!dd||Ao&&8<Ao&&11>=Ao),fm=" ",hm=!1;function pm(n,s){switch(n){case"keyup":return w2.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function mm(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var lr=!1;function j2(n,s){switch(n){case"compositionend":return mm(s);case"keypress":return s.which!==32?null:(hm=!0,fm);case"textInput":return n=s.data,n===fm&&hm?null:n;default:return null}}function S2(n,s){if(lr)return n==="compositionend"||!dd&&pm(n,s)?(n=om(),gl=od=Ds=null,lr=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return dm&&s.locale!=="ko"?null:s.data;default:return null}}var C2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function gm(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!C2[n.type]:s==="textarea"}function xm(n,s,i,c){or?ir?ir.push(c):ir=[c]:or=c,s=cc(s,"onChange"),0<s.length&&(i=new bl("onChange","change",null,i,c),n.push({event:i,listeners:s}))}var ko=null,Mo=null;function E2(n){J0(n,0)}function wl(n){var s=As(n);if(hl(s))return n}function ym(n,s){if(n==="change")return s}var bm=!1;if(ts){var fd;if(ts){var hd="oninput"in document;if(!hd){var vm=document.createElement("div");vm.setAttribute("oninput","return;"),hd=typeof vm.oninput=="function"}fd=hd}else fd=!1;bm=fd&&(!document.documentMode||9<document.documentMode)}function wm(){ko&&(ko.detachEvent("onpropertychange",Nm),Mo=ko=null)}function Nm(n){if(n.propertyName==="value"&&wl(Mo)){var s=[];xm(s,Mo,n,sd(n)),rm(E2,s)}}function _2(n,s,i){n==="focusin"?(wm(),ko=s,Mo=i,ko.attachEvent("onpropertychange",Nm)):n==="focusout"&&wm()}function T2(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return wl(Mo)}function A2(n,s){if(n==="click")return wl(s)}function k2(n,s){if(n==="input"||n==="change")return wl(s)}function M2(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var Kt=typeof Object.is=="function"?Object.is:M2;function Do(n,s){if(Kt(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var i=Object.keys(n),c=Object.keys(s);if(i.length!==c.length)return!1;for(c=0;c<i.length;c++){var f=i[c];if(!We.call(s,f)||!Kt(n[f],s[f]))return!1}return!0}function jm(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Sm(n,s){var i=jm(n);n=0;for(var c;i;){if(i.nodeType===3){if(c=n+i.textContent.length,n<=s&&c>=s)return{node:i,offset:s-n};n=c}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=jm(i)}}function Cm(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?Cm(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function Em(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var s=xa(n.document);s instanceof n.HTMLIFrameElement;){try{var i=typeof s.contentWindow.location.href=="string"}catch{i=!1}if(i)n=s.contentWindow;else break;s=xa(n.document)}return s}function pd(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}var D2=ts&&"documentMode"in document&&11>=document.documentMode,cr=null,md=null,Ro=null,gd=!1;function _m(n,s,i){var c=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;gd||cr==null||cr!==xa(c)||(c=cr,"selectionStart"in c&&pd(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Ro&&Do(Ro,c)||(Ro=c,c=cc(md,"onSelect"),0<c.length&&(s=new bl("onSelect","select",null,s,i),n.push({event:s,listeners:c}),s.target=cr)))}function va(n,s){var i={};return i[n.toLowerCase()]=s.toLowerCase(),i["Webkit"+n]="webkit"+s,i["Moz"+n]="moz"+s,i}var ur={animationend:va("Animation","AnimationEnd"),animationiteration:va("Animation","AnimationIteration"),animationstart:va("Animation","AnimationStart"),transitionrun:va("Transition","TransitionRun"),transitionstart:va("Transition","TransitionStart"),transitioncancel:va("Transition","TransitionCancel"),transitionend:va("Transition","TransitionEnd")},xd={},Tm={};ts&&(Tm=document.createElement("div").style,"AnimationEvent"in window||(delete ur.animationend.animation,delete ur.animationiteration.animation,delete ur.animationstart.animation),"TransitionEvent"in window||delete ur.transitionend.transition);function wa(n){if(xd[n])return xd[n];if(!ur[n])return n;var s=ur[n],i;for(i in s)if(s.hasOwnProperty(i)&&i in Tm)return xd[n]=s[i];return n}var Am=wa("animationend"),km=wa("animationiteration"),Mm=wa("animationstart"),R2=wa("transitionrun"),O2=wa("transitionstart"),$2=wa("transitioncancel"),Dm=wa("transitionend"),Rm=new Map,yd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");yd.push("scrollEnd");function wn(n,s){Rm.set(n,s),Zn(s,[n])}var Nl=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},ln=[],dr=0,bd=0;function jl(){for(var n=dr,s=bd=dr=0;s<n;){var i=ln[s];ln[s++]=null;var c=ln[s];ln[s++]=null;var f=ln[s];ln[s++]=null;var g=ln[s];if(ln[s++]=null,c!==null&&f!==null){var N=c.pending;N===null?f.next=f:(f.next=N.next,N.next=f),c.pending=f}g!==0&&Om(i,f,g)}}function Sl(n,s,i,c){ln[dr++]=n,ln[dr++]=s,ln[dr++]=i,ln[dr++]=c,bd|=c,n.lanes|=c,n=n.alternate,n!==null&&(n.lanes|=c)}function vd(n,s,i,c){return Sl(n,s,i,c),Cl(n)}function Na(n,s){return Sl(n,null,null,s),Cl(n)}function Om(n,s,i){n.lanes|=i;var c=n.alternate;c!==null&&(c.lanes|=i);for(var f=!1,g=n.return;g!==null;)g.childLanes|=i,c=g.alternate,c!==null&&(c.childLanes|=i),g.tag===22&&(n=g.stateNode,n===null||n._visibility&1||(f=!0)),n=g,g=g.return;return n.tag===3?(g=n.stateNode,f&&s!==null&&(f=31-yt(i),n=g.hiddenUpdates,c=n[f],c===null?n[f]=[s]:c.push(s),s.lane=i|536870912),g):null}function Cl(n){if(50<ti)throw ti=0,kf=null,Error(r(185));for(var s=n.return;s!==null;)n=s,s=n.return;return n.tag===3?n.stateNode:null}var fr={};function z2(n,s,i,c){this.tag=n,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Qt(n,s,i,c){return new z2(n,s,i,c)}function wd(n){return n=n.prototype,!(!n||!n.isReactComponent)}function ns(n,s){var i=n.alternate;return i===null?(i=Qt(n.tag,s,n.key,n.mode),i.elementType=n.elementType,i.type=n.type,i.stateNode=n.stateNode,i.alternate=n,n.alternate=i):(i.pendingProps=s,i.type=n.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=n.flags&65011712,i.childLanes=n.childLanes,i.lanes=n.lanes,i.child=n.child,i.memoizedProps=n.memoizedProps,i.memoizedState=n.memoizedState,i.updateQueue=n.updateQueue,s=n.dependencies,i.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},i.sibling=n.sibling,i.index=n.index,i.ref=n.ref,i.refCleanup=n.refCleanup,i}function $m(n,s){n.flags&=65011714;var i=n.alternate;return i===null?(n.childLanes=0,n.lanes=s,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=i.childLanes,n.lanes=i.lanes,n.child=i.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=i.memoizedProps,n.memoizedState=i.memoizedState,n.updateQueue=i.updateQueue,n.type=i.type,s=i.dependencies,n.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),n}function El(n,s,i,c,f,g){var N=0;if(c=n,typeof n=="function")wd(n)&&(N=1);else if(typeof n=="string")N=UN(n,i,ae.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case H:return n=Qt(31,i,s,f),n.elementType=H,n.lanes=g,n;case _:return ja(i.children,f,g,s);case E:N=8,f|=24;break;case T:return n=Qt(12,i,s,f|2),n.elementType=T,n.lanes=g,n;case L:return n=Qt(13,i,s,f),n.elementType=L,n.lanes=g,n;case j:return n=Qt(19,i,s,f),n.elementType=j,n.lanes=g,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case C:N=10;break e;case A:N=9;break e;case k:N=11;break e;case R:N=14;break e;case $:N=16,c=null;break e}N=29,i=Error(r(130,n===null?"null":typeof n,"")),c=null}return s=Qt(N,i,s,f),s.elementType=n,s.type=c,s.lanes=g,s}function ja(n,s,i,c){return n=Qt(7,n,c,s),n.lanes=i,n}function Nd(n,s,i){return n=Qt(6,n,null,s),n.lanes=i,n}function zm(n){var s=Qt(18,null,null,0);return s.stateNode=n,s}function jd(n,s,i){return s=Qt(4,n.children!==null?n.children:[],n.key,s),s.lanes=i,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}var Lm=new WeakMap;function cn(n,s){if(typeof n=="object"&&n!==null){var i=Lm.get(n);return i!==void 0?i:(s={value:n,source:s,stack:wt(s)},Lm.set(n,s),s)}return{value:n,source:s,stack:wt(s)}}var hr=[],pr=0,_l=null,Oo=0,un=[],dn=0,Rs=null,Rn=1,On="";function ss(n,s){hr[pr++]=Oo,hr[pr++]=_l,_l=n,Oo=s}function Bm(n,s,i){un[dn++]=Rn,un[dn++]=On,un[dn++]=Rs,Rs=n;var c=Rn;n=On;var f=32-yt(c)-1;c&=~(1<<f),i+=1;var g=32-yt(s)+f;if(30<g){var N=f-f%5;g=(c&(1<<N)-1).toString(32),c>>=N,f-=N,Rn=1<<32-yt(s)+f|i<<f|c,On=g+n}else Rn=1<<g|i<<f|c,On=n}function Sd(n){n.return!==null&&(ss(n,1),Bm(n,1,0))}function Cd(n){for(;n===_l;)_l=hr[--pr],hr[pr]=null,Oo=hr[--pr],hr[pr]=null;for(;n===Rs;)Rs=un[--dn],un[dn]=null,On=un[--dn],un[dn]=null,Rn=un[--dn],un[dn]=null}function Pm(n,s){un[dn++]=Rn,un[dn++]=On,un[dn++]=Rs,Rn=s.id,On=s.overflow,Rs=n}var St=null,Ke=null,Le=!1,Os=null,fn=!1,Ed=Error(r(519));function $s(n){var s=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw $o(cn(s,n)),Ed}function Hm(n){var s=n.stateNode,i=n.type,c=n.memoizedProps;switch(s[mt]=n,s[At]=c,i){case"dialog":Re("cancel",s),Re("close",s);break;case"iframe":case"object":case"embed":Re("load",s);break;case"video":case"audio":for(i=0;i<si.length;i++)Re(si[i],s);break;case"source":Re("error",s);break;case"img":case"image":case"link":Re("error",s),Re("load",s);break;case"details":Re("toggle",s);break;case"input":Re("invalid",s),pl(s,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":Re("invalid",s);break;case"textarea":Re("invalid",s),tm(s,c.value,c.defaultValue,c.children)}i=c.children,typeof i!="string"&&typeof i!="number"&&typeof i!="bigint"||s.textContent===""+i||c.suppressHydrationWarning===!0||sx(s.textContent,i)?(c.popover!=null&&(Re("beforetoggle",s),Re("toggle",s)),c.onScroll!=null&&Re("scroll",s),c.onScrollEnd!=null&&Re("scrollend",s),c.onClick!=null&&(s.onclick=es),s=!0):s=!1,s||$s(n,!0)}function Um(n){for(St=n.return;St;)switch(St.tag){case 5:case 31:case 13:fn=!1;return;case 27:case 3:fn=!0;return;default:St=St.return}}function mr(n){if(n!==St)return!1;if(!Le)return Um(n),Le=!0,!1;var s=n.tag,i;if((i=s!==3&&s!==27)&&((i=s===5)&&(i=n.type,i=!(i!=="form"&&i!=="button")||Ff(n.type,n.memoizedProps)),i=!i),i&&Ke&&$s(n),Um(n),s===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));Ke=fx(n)}else if(s===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));Ke=fx(n)}else s===27?(s=Ke,Ks(n.type)?(n=Qf,Qf=null,Ke=n):Ke=s):Ke=St?pn(n.stateNode.nextSibling):null;return!0}function Sa(){Ke=St=null,Le=!1}function _d(){var n=Os;return n!==null&&(Vt===null?Vt=n:Vt.push.apply(Vt,n),Os=null),n}function $o(n){Os===null?Os=[n]:Os.push(n)}var Td=D(null),Ca=null,as=null;function zs(n,s,i){Z(Td,s._currentValue),s._currentValue=i}function rs(n){n._currentValue=Td.current,V(Td)}function Ad(n,s,i){for(;n!==null;){var c=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,c!==null&&(c.childLanes|=s)):c!==null&&(c.childLanes&s)!==s&&(c.childLanes|=s),n===i)break;n=n.return}}function kd(n,s,i,c){var f=n.child;for(f!==null&&(f.return=n);f!==null;){var g=f.dependencies;if(g!==null){var N=f.child;g=g.firstContext;e:for(;g!==null;){var M=g;g=f;for(var Y=0;Y<s.length;Y++)if(M.context===s[Y]){g.lanes|=i,M=g.alternate,M!==null&&(M.lanes|=i),Ad(g.return,i,n),c||(N=null);break e}g=M.next}}else if(f.tag===18){if(N=f.return,N===null)throw Error(r(341));N.lanes|=i,g=N.alternate,g!==null&&(g.lanes|=i),Ad(N,i,n),N=null}else N=f.child;if(N!==null)N.return=f;else for(N=f;N!==null;){if(N===n){N=null;break}if(f=N.sibling,f!==null){f.return=N.return,N=f;break}N=N.return}f=N}}function gr(n,s,i,c){n=null;for(var f=s,g=!1;f!==null;){if(!g){if((f.flags&524288)!==0)g=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var N=f.alternate;if(N===null)throw Error(r(387));if(N=N.memoizedProps,N!==null){var M=f.type;Kt(f.pendingProps.value,N.value)||(n!==null?n.push(M):n=[M])}}else if(f===fe.current){if(N=f.alternate,N===null)throw Error(r(387));N.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(n!==null?n.push(li):n=[li])}f=f.return}n!==null&&kd(s,n,i,c),s.flags|=262144}function Tl(n){for(n=n.firstContext;n!==null;){if(!Kt(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function Ea(n){Ca=n,as=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function Ct(n){return qm(Ca,n)}function Al(n,s){return Ca===null&&Ea(n),qm(n,s)}function qm(n,s){var i=s._currentValue;if(s={context:s,memoizedValue:i,next:null},as===null){if(n===null)throw Error(r(308));as=s,n.dependencies={lanes:0,firstContext:s},n.flags|=524288}else as=as.next=s;return i}var L2=typeof AbortController<"u"?AbortController:function(){var n=[],s=this.signal={aborted:!1,addEventListener:function(i,c){n.push(c)}};this.abort=function(){s.aborted=!0,n.forEach(function(i){return i()})}},B2=e.unstable_scheduleCallback,P2=e.unstable_NormalPriority,ct={$$typeof:C,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Md(){return{controller:new L2,data:new Map,refCount:0}}function zo(n){n.refCount--,n.refCount===0&&B2(P2,function(){n.controller.abort()})}var Lo=null,Dd=0,xr=0,yr=null;function H2(n,s){if(Lo===null){var i=Lo=[];Dd=0,xr=zf(),yr={status:"pending",value:void 0,then:function(c){i.push(c)}}}return Dd++,s.then(Im,Im),s}function Im(){if(--Dd===0&&Lo!==null){yr!==null&&(yr.status="fulfilled");var n=Lo;Lo=null,xr=0,yr=null;for(var s=0;s<n.length;s++)(0,n[s])()}}function U2(n,s){var i=[],c={status:"pending",value:null,reason:null,then:function(f){i.push(f)}};return n.then(function(){c.status="fulfilled",c.value=s;for(var f=0;f<i.length;f++)(0,i[f])(s)},function(f){for(c.status="rejected",c.reason=f,f=0;f<i.length;f++)(0,i[f])(void 0)}),c}var Vm=O.S;O.S=function(n,s){_0=Me(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&H2(n,s),Vm!==null&&Vm(n,s)};var _a=D(null);function Rd(){var n=_a.current;return n!==null?n:Ge.pooledCache}function kl(n,s){s===null?Z(_a,_a.current):Z(_a,s.pool)}function Fm(){var n=Rd();return n===null?null:{parent:ct._currentValue,pool:n}}var br=Error(r(460)),Od=Error(r(474)),Ml=Error(r(542)),Dl={then:function(){}};function Ym(n){return n=n.status,n==="fulfilled"||n==="rejected"}function Xm(n,s,i){switch(i=n[i],i===void 0?n.push(s):i!==s&&(s.then(es,es),s=i),s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,Km(n),n;default:if(typeof s.status=="string")s.then(es,es);else{if(n=Ge,n!==null&&100<n.shellSuspendCounter)throw Error(r(482));n=s,n.status="pending",n.then(function(c){if(s.status==="pending"){var f=s;f.status="fulfilled",f.value=c}},function(c){if(s.status==="pending"){var f=s;f.status="rejected",f.reason=c}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,Km(n),n}throw Aa=s,br}}function Ta(n){try{var s=n._init;return s(n._payload)}catch(i){throw i!==null&&typeof i=="object"&&typeof i.then=="function"?(Aa=i,br):i}}var Aa=null;function Gm(){if(Aa===null)throw Error(r(459));var n=Aa;return Aa=null,n}function Km(n){if(n===br||n===Ml)throw Error(r(483))}var vr=null,Bo=0;function Rl(n){var s=Bo;return Bo+=1,vr===null&&(vr=[]),Xm(vr,n,s)}function Po(n,s){s=s.props.ref,n.ref=s!==void 0?s:null}function Ol(n,s){throw s.$$typeof===b?Error(r(525)):(n=Object.prototype.toString.call(s),Error(r(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n)))}function Qm(n){function s(Q,X){if(n){var J=Q.deletions;J===null?(Q.deletions=[X],Q.flags|=16):J.push(X)}}function i(Q,X){if(!n)return null;for(;X!==null;)s(Q,X),X=X.sibling;return null}function c(Q){for(var X=new Map;Q!==null;)Q.key!==null?X.set(Q.key,Q):X.set(Q.index,Q),Q=Q.sibling;return X}function f(Q,X){return Q=ns(Q,X),Q.index=0,Q.sibling=null,Q}function g(Q,X,J){return Q.index=J,n?(J=Q.alternate,J!==null?(J=J.index,J<X?(Q.flags|=67108866,X):J):(Q.flags|=67108866,X)):(Q.flags|=1048576,X)}function N(Q){return n&&Q.alternate===null&&(Q.flags|=67108866),Q}function M(Q,X,J,ie){return X===null||X.tag!==6?(X=Nd(J,Q.mode,ie),X.return=Q,X):(X=f(X,J),X.return=Q,X)}function Y(Q,X,J,ie){var ve=J.type;return ve===_?oe(Q,X,J.props.children,ie,J.key):X!==null&&(X.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===$&&Ta(ve)===X.type)?(X=f(X,J.props),Po(X,J),X.return=Q,X):(X=El(J.type,J.key,J.props,null,Q.mode,ie),Po(X,J),X.return=Q,X)}function ee(Q,X,J,ie){return X===null||X.tag!==4||X.stateNode.containerInfo!==J.containerInfo||X.stateNode.implementation!==J.implementation?(X=jd(J,Q.mode,ie),X.return=Q,X):(X=f(X,J.children||[]),X.return=Q,X)}function oe(Q,X,J,ie,ve){return X===null||X.tag!==7?(X=ja(J,Q.mode,ie,ve),X.return=Q,X):(X=f(X,J),X.return=Q,X)}function le(Q,X,J){if(typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint")return X=Nd(""+X,Q.mode,J),X.return=Q,X;if(typeof X=="object"&&X!==null){switch(X.$$typeof){case v:return J=El(X.type,X.key,X.props,null,Q.mode,J),Po(J,X),J.return=Q,J;case w:return X=jd(X,Q.mode,J),X.return=Q,X;case $:return X=Ta(X),le(Q,X,J)}if(G(X)||K(X))return X=ja(X,Q.mode,J,null),X.return=Q,X;if(typeof X.then=="function")return le(Q,Rl(X),J);if(X.$$typeof===C)return le(Q,Al(Q,X),J);Ol(Q,X)}return null}function te(Q,X,J,ie){var ve=X!==null?X.key:null;if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return ve!==null?null:M(Q,X,""+J,ie);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case v:return J.key===ve?Y(Q,X,J,ie):null;case w:return J.key===ve?ee(Q,X,J,ie):null;case $:return J=Ta(J),te(Q,X,J,ie)}if(G(J)||K(J))return ve!==null?null:oe(Q,X,J,ie,null);if(typeof J.then=="function")return te(Q,X,Rl(J),ie);if(J.$$typeof===C)return te(Q,X,Al(Q,J),ie);Ol(Q,J)}return null}function re(Q,X,J,ie,ve){if(typeof ie=="string"&&ie!==""||typeof ie=="number"||typeof ie=="bigint")return Q=Q.get(J)||null,M(X,Q,""+ie,ve);if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case v:return Q=Q.get(ie.key===null?J:ie.key)||null,Y(X,Q,ie,ve);case w:return Q=Q.get(ie.key===null?J:ie.key)||null,ee(X,Q,ie,ve);case $:return ie=Ta(ie),re(Q,X,J,ie,ve)}if(G(ie)||K(ie))return Q=Q.get(J)||null,oe(X,Q,ie,ve,null);if(typeof ie.then=="function")return re(Q,X,J,Rl(ie),ve);if(ie.$$typeof===C)return re(Q,X,J,Al(X,ie),ve);Ol(X,ie)}return null}function me(Q,X,J,ie){for(var ve=null,Pe=null,ge=X,Ae=X=0,$e=null;ge!==null&&Ae<J.length;Ae++){ge.index>Ae?($e=ge,ge=null):$e=ge.sibling;var He=te(Q,ge,J[Ae],ie);if(He===null){ge===null&&(ge=$e);break}n&&ge&&He.alternate===null&&s(Q,ge),X=g(He,X,Ae),Pe===null?ve=He:Pe.sibling=He,Pe=He,ge=$e}if(Ae===J.length)return i(Q,ge),Le&&ss(Q,Ae),ve;if(ge===null){for(;Ae<J.length;Ae++)ge=le(Q,J[Ae],ie),ge!==null&&(X=g(ge,X,Ae),Pe===null?ve=ge:Pe.sibling=ge,Pe=ge);return Le&&ss(Q,Ae),ve}for(ge=c(ge);Ae<J.length;Ae++)$e=re(ge,Q,Ae,J[Ae],ie),$e!==null&&(n&&$e.alternate!==null&&ge.delete($e.key===null?Ae:$e.key),X=g($e,X,Ae),Pe===null?ve=$e:Pe.sibling=$e,Pe=$e);return n&&ge.forEach(function(ea){return s(Q,ea)}),Le&&ss(Q,Ae),ve}function Ne(Q,X,J,ie){if(J==null)throw Error(r(151));for(var ve=null,Pe=null,ge=X,Ae=X=0,$e=null,He=J.next();ge!==null&&!He.done;Ae++,He=J.next()){ge.index>Ae?($e=ge,ge=null):$e=ge.sibling;var ea=te(Q,ge,He.value,ie);if(ea===null){ge===null&&(ge=$e);break}n&&ge&&ea.alternate===null&&s(Q,ge),X=g(ea,X,Ae),Pe===null?ve=ea:Pe.sibling=ea,Pe=ea,ge=$e}if(He.done)return i(Q,ge),Le&&ss(Q,Ae),ve;if(ge===null){for(;!He.done;Ae++,He=J.next())He=le(Q,He.value,ie),He!==null&&(X=g(He,X,Ae),Pe===null?ve=He:Pe.sibling=He,Pe=He);return Le&&ss(Q,Ae),ve}for(ge=c(ge);!He.done;Ae++,He=J.next())He=re(ge,Q,Ae,He.value,ie),He!==null&&(n&&He.alternate!==null&&ge.delete(He.key===null?Ae:He.key),X=g(He,X,Ae),Pe===null?ve=He:Pe.sibling=He,Pe=He);return n&&ge.forEach(function(ZN){return s(Q,ZN)}),Le&&ss(Q,Ae),ve}function Xe(Q,X,J,ie){if(typeof J=="object"&&J!==null&&J.type===_&&J.key===null&&(J=J.props.children),typeof J=="object"&&J!==null){switch(J.$$typeof){case v:e:{for(var ve=J.key;X!==null;){if(X.key===ve){if(ve=J.type,ve===_){if(X.tag===7){i(Q,X.sibling),ie=f(X,J.props.children),ie.return=Q,Q=ie;break e}}else if(X.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===$&&Ta(ve)===X.type){i(Q,X.sibling),ie=f(X,J.props),Po(ie,J),ie.return=Q,Q=ie;break e}i(Q,X);break}else s(Q,X);X=X.sibling}J.type===_?(ie=ja(J.props.children,Q.mode,ie,J.key),ie.return=Q,Q=ie):(ie=El(J.type,J.key,J.props,null,Q.mode,ie),Po(ie,J),ie.return=Q,Q=ie)}return N(Q);case w:e:{for(ve=J.key;X!==null;){if(X.key===ve)if(X.tag===4&&X.stateNode.containerInfo===J.containerInfo&&X.stateNode.implementation===J.implementation){i(Q,X.sibling),ie=f(X,J.children||[]),ie.return=Q,Q=ie;break e}else{i(Q,X);break}else s(Q,X);X=X.sibling}ie=jd(J,Q.mode,ie),ie.return=Q,Q=ie}return N(Q);case $:return J=Ta(J),Xe(Q,X,J,ie)}if(G(J))return me(Q,X,J,ie);if(K(J)){if(ve=K(J),typeof ve!="function")throw Error(r(150));return J=ve.call(J),Ne(Q,X,J,ie)}if(typeof J.then=="function")return Xe(Q,X,Rl(J),ie);if(J.$$typeof===C)return Xe(Q,X,Al(Q,J),ie);Ol(Q,J)}return typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint"?(J=""+J,X!==null&&X.tag===6?(i(Q,X.sibling),ie=f(X,J),ie.return=Q,Q=ie):(i(Q,X),ie=Nd(J,Q.mode,ie),ie.return=Q,Q=ie),N(Q)):i(Q,X)}return function(Q,X,J,ie){try{Bo=0;var ve=Xe(Q,X,J,ie);return vr=null,ve}catch(ge){if(ge===br||ge===Ml)throw ge;var Pe=Qt(29,ge,null,Q.mode);return Pe.lanes=ie,Pe.return=Q,Pe}}}var ka=Qm(!0),Wm=Qm(!1),Ls=!1;function $d(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function zd(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Bs(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Ps(n,s,i){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,(Ue&2)!==0){var f=c.pending;return f===null?s.next=s:(s.next=f.next,f.next=s),c.pending=s,s=Cl(n),Om(n,null,i),s}return Sl(n,c,s,i),Cl(n)}function Ho(n,s,i){if(s=s.updateQueue,s!==null&&(s=s.shared,(i&4194048)!==0)){var c=s.lanes;c&=n.pendingLanes,i|=c,s.lanes=i,sl(n,i)}}function Ld(n,s){var i=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,i===c)){var f=null,g=null;if(i=i.firstBaseUpdate,i!==null){do{var N={lane:i.lane,tag:i.tag,payload:i.payload,callback:null,next:null};g===null?f=g=N:g=g.next=N,i=i.next}while(i!==null);g===null?f=g=s:g=g.next=s}else f=g=s;i={baseState:c.baseState,firstBaseUpdate:f,lastBaseUpdate:g,shared:c.shared,callbacks:c.callbacks},n.updateQueue=i;return}n=i.lastBaseUpdate,n===null?i.firstBaseUpdate=s:n.next=s,i.lastBaseUpdate=s}var Bd=!1;function Uo(){if(Bd){var n=yr;if(n!==null)throw n}}function qo(n,s,i,c){Bd=!1;var f=n.updateQueue;Ls=!1;var g=f.firstBaseUpdate,N=f.lastBaseUpdate,M=f.shared.pending;if(M!==null){f.shared.pending=null;var Y=M,ee=Y.next;Y.next=null,N===null?g=ee:N.next=ee,N=Y;var oe=n.alternate;oe!==null&&(oe=oe.updateQueue,M=oe.lastBaseUpdate,M!==N&&(M===null?oe.firstBaseUpdate=ee:M.next=ee,oe.lastBaseUpdate=Y))}if(g!==null){var le=f.baseState;N=0,oe=ee=Y=null,M=g;do{var te=M.lane&-536870913,re=te!==M.lane;if(re?(Oe&te)===te:(c&te)===te){te!==0&&te===xr&&(Bd=!0),oe!==null&&(oe=oe.next={lane:0,tag:M.tag,payload:M.payload,callback:null,next:null});e:{var me=n,Ne=M;te=s;var Xe=i;switch(Ne.tag){case 1:if(me=Ne.payload,typeof me=="function"){le=me.call(Xe,le,te);break e}le=me;break e;case 3:me.flags=me.flags&-65537|128;case 0:if(me=Ne.payload,te=typeof me=="function"?me.call(Xe,le,te):me,te==null)break e;le=x({},le,te);break e;case 2:Ls=!0}}te=M.callback,te!==null&&(n.flags|=64,re&&(n.flags|=8192),re=f.callbacks,re===null?f.callbacks=[te]:re.push(te))}else re={lane:te,tag:M.tag,payload:M.payload,callback:M.callback,next:null},oe===null?(ee=oe=re,Y=le):oe=oe.next=re,N|=te;if(M=M.next,M===null){if(M=f.shared.pending,M===null)break;re=M,M=re.next,re.next=null,f.lastBaseUpdate=re,f.shared.pending=null}}while(!0);oe===null&&(Y=le),f.baseState=Y,f.firstBaseUpdate=ee,f.lastBaseUpdate=oe,g===null&&(f.shared.lanes=0),Vs|=N,n.lanes=N,n.memoizedState=le}}function Zm(n,s){if(typeof n!="function")throw Error(r(191,n));n.call(s)}function Jm(n,s){var i=n.callbacks;if(i!==null)for(n.callbacks=null,n=0;n<i.length;n++)Zm(i[n],s)}var wr=D(null),$l=D(0);function eg(n,s){n=ps,Z($l,n),Z(wr,s),ps=n|s.baseLanes}function Pd(){Z($l,ps),Z(wr,wr.current)}function Hd(){ps=$l.current,V(wr),V($l)}var Wt=D(null),hn=null;function Hs(n){var s=n.alternate;Z(at,at.current&1),Z(Wt,n),hn===null&&(s===null||wr.current!==null||s.memoizedState!==null)&&(hn=n)}function Ud(n){Z(at,at.current),Z(Wt,n),hn===null&&(hn=n)}function tg(n){n.tag===22?(Z(at,at.current),Z(Wt,n),hn===null&&(hn=n)):Us()}function Us(){Z(at,at.current),Z(Wt,Wt.current)}function Zt(n){V(Wt),hn===n&&(hn=null),V(at)}var at=D(0);function zl(n){for(var s=n;s!==null;){if(s.tag===13){var i=s.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||Gf(i)||Kf(i)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var os=0,Te=null,Fe=null,ut=null,Ll=!1,Nr=!1,Ma=!1,Bl=0,Io=0,jr=null,q2=0;function nt(){throw Error(r(321))}function qd(n,s){if(s===null)return!1;for(var i=0;i<s.length&&i<n.length;i++)if(!Kt(n[i],s[i]))return!1;return!0}function Id(n,s,i,c,f,g){return os=g,Te=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,O.H=n===null||n.memoizedState===null?Bg:af,Ma=!1,g=i(c,f),Ma=!1,Nr&&(g=sg(s,i,c,f)),ng(n),g}function ng(n){O.H=Yo;var s=Fe!==null&&Fe.next!==null;if(os=0,ut=Fe=Te=null,Ll=!1,Io=0,jr=null,s)throw Error(r(300));n===null||dt||(n=n.dependencies,n!==null&&Tl(n)&&(dt=!0))}function sg(n,s,i,c){Te=n;var f=0;do{if(Nr&&(jr=null),Io=0,Nr=!1,25<=f)throw Error(r(301));if(f+=1,ut=Fe=null,n.updateQueue!=null){var g=n.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}O.H=Pg,g=s(i,c)}while(Nr);return g}function I2(){var n=O.H,s=n.useState()[0];return s=typeof s.then=="function"?Vo(s):s,n=n.useState()[0],(Fe!==null?Fe.memoizedState:null)!==n&&(Te.flags|=1024),s}function Vd(){var n=Bl!==0;return Bl=0,n}function Fd(n,s,i){s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~i}function Yd(n){if(Ll){for(n=n.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}Ll=!1}os=0,ut=Fe=Te=null,Nr=!1,Io=Bl=0,jr=null}function zt(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ut===null?Te.memoizedState=ut=n:ut=ut.next=n,ut}function rt(){if(Fe===null){var n=Te.alternate;n=n!==null?n.memoizedState:null}else n=Fe.next;var s=ut===null?Te.memoizedState:ut.next;if(s!==null)ut=s,Fe=n;else{if(n===null)throw Te.alternate===null?Error(r(467)):Error(r(310));Fe=n,n={memoizedState:Fe.memoizedState,baseState:Fe.baseState,baseQueue:Fe.baseQueue,queue:Fe.queue,next:null},ut===null?Te.memoizedState=ut=n:ut=ut.next=n}return ut}function Pl(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Vo(n){var s=Io;return Io+=1,jr===null&&(jr=[]),n=Xm(jr,n,s),s=Te,(ut===null?s.memoizedState:ut.next)===null&&(s=s.alternate,O.H=s===null||s.memoizedState===null?Bg:af),n}function Hl(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Vo(n);if(n.$$typeof===C)return Ct(n)}throw Error(r(438,String(n)))}function Xd(n){var s=null,i=Te.updateQueue;if(i!==null&&(s=i.memoCache),s==null){var c=Te.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(s={data:c.data.map(function(f){return f.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),i===null&&(i=Pl(),Te.updateQueue=i),i.memoCache=s,i=s.data[s.index],i===void 0)for(i=s.data[s.index]=Array(n),c=0;c<n;c++)i[c]=F;return s.index++,i}function is(n,s){return typeof s=="function"?s(n):s}function Ul(n){var s=rt();return Gd(s,Fe,n)}function Gd(n,s,i){var c=n.queue;if(c===null)throw Error(r(311));c.lastRenderedReducer=i;var f=n.baseQueue,g=c.pending;if(g!==null){if(f!==null){var N=f.next;f.next=g.next,g.next=N}s.baseQueue=f=g,c.pending=null}if(g=n.baseState,f===null)n.memoizedState=g;else{s=f.next;var M=N=null,Y=null,ee=s,oe=!1;do{var le=ee.lane&-536870913;if(le!==ee.lane?(Oe&le)===le:(os&le)===le){var te=ee.revertLane;if(te===0)Y!==null&&(Y=Y.next={lane:0,revertLane:0,gesture:null,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null}),le===xr&&(oe=!0);else if((os&te)===te){ee=ee.next,te===xr&&(oe=!0);continue}else le={lane:0,revertLane:ee.revertLane,gesture:null,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null},Y===null?(M=Y=le,N=g):Y=Y.next=le,Te.lanes|=te,Vs|=te;le=ee.action,Ma&&i(g,le),g=ee.hasEagerState?ee.eagerState:i(g,le)}else te={lane:le,revertLane:ee.revertLane,gesture:ee.gesture,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null},Y===null?(M=Y=te,N=g):Y=Y.next=te,Te.lanes|=le,Vs|=le;ee=ee.next}while(ee!==null&&ee!==s);if(Y===null?N=g:Y.next=M,!Kt(g,n.memoizedState)&&(dt=!0,oe&&(i=yr,i!==null)))throw i;n.memoizedState=g,n.baseState=N,n.baseQueue=Y,c.lastRenderedState=g}return f===null&&(c.lanes=0),[n.memoizedState,c.dispatch]}function Kd(n){var s=rt(),i=s.queue;if(i===null)throw Error(r(311));i.lastRenderedReducer=n;var c=i.dispatch,f=i.pending,g=s.memoizedState;if(f!==null){i.pending=null;var N=f=f.next;do g=n(g,N.action),N=N.next;while(N!==f);Kt(g,s.memoizedState)||(dt=!0),s.memoizedState=g,s.baseQueue===null&&(s.baseState=g),i.lastRenderedState=g}return[g,c]}function ag(n,s,i){var c=Te,f=rt(),g=Le;if(g){if(i===void 0)throw Error(r(407));i=i()}else i=s();var N=!Kt((Fe||f).memoizedState,i);if(N&&(f.memoizedState=i,dt=!0),f=f.queue,Zd(ig.bind(null,c,f,n),[n]),f.getSnapshot!==s||N||ut!==null&&ut.memoizedState.tag&1){if(c.flags|=2048,Sr(9,{destroy:void 0},og.bind(null,c,f,i,s),null),Ge===null)throw Error(r(349));g||(os&127)!==0||rg(c,s,i)}return i}function rg(n,s,i){n.flags|=16384,n={getSnapshot:s,value:i},s=Te.updateQueue,s===null?(s=Pl(),Te.updateQueue=s,s.stores=[n]):(i=s.stores,i===null?s.stores=[n]:i.push(n))}function og(n,s,i,c){s.value=i,s.getSnapshot=c,lg(s)&&cg(n)}function ig(n,s,i){return i(function(){lg(s)&&cg(n)})}function lg(n){var s=n.getSnapshot;n=n.value;try{var i=s();return!Kt(n,i)}catch{return!0}}function cg(n){var s=Na(n,2);s!==null&&Ft(s,n,2)}function Qd(n){var s=zt();if(typeof n=="function"){var i=n;if(n=i(),Ma){xt(!0);try{i()}finally{xt(!1)}}}return s.memoizedState=s.baseState=n,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:is,lastRenderedState:n},s}function ug(n,s,i,c){return n.baseState=i,Gd(n,Fe,typeof c=="function"?c:is)}function V2(n,s,i,c,f){if(Vl(n))throw Error(r(485));if(n=s.action,n!==null){var g={payload:f,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(N){g.listeners.push(N)}};O.T!==null?i(!0):g.isTransition=!1,c(g),i=s.pending,i===null?(g.next=s.pending=g,dg(s,g)):(g.next=i.next,s.pending=i.next=g)}}function dg(n,s){var i=s.action,c=s.payload,f=n.state;if(s.isTransition){var g=O.T,N={};O.T=N;try{var M=i(f,c),Y=O.S;Y!==null&&Y(N,M),fg(n,s,M)}catch(ee){Wd(n,s,ee)}finally{g!==null&&N.types!==null&&(g.types=N.types),O.T=g}}else try{g=i(f,c),fg(n,s,g)}catch(ee){Wd(n,s,ee)}}function fg(n,s,i){i!==null&&typeof i=="object"&&typeof i.then=="function"?i.then(function(c){hg(n,s,c)},function(c){return Wd(n,s,c)}):hg(n,s,i)}function hg(n,s,i){s.status="fulfilled",s.value=i,pg(s),n.state=i,s=n.pending,s!==null&&(i=s.next,i===s?n.pending=null:(i=i.next,s.next=i,dg(n,i)))}function Wd(n,s,i){var c=n.pending;if(n.pending=null,c!==null){c=c.next;do s.status="rejected",s.reason=i,pg(s),s=s.next;while(s!==c)}n.action=null}function pg(n){n=n.listeners;for(var s=0;s<n.length;s++)(0,n[s])()}function mg(n,s){return s}function gg(n,s){if(Le){var i=Ge.formState;if(i!==null){e:{var c=Te;if(Le){if(Ke){t:{for(var f=Ke,g=fn;f.nodeType!==8;){if(!g){f=null;break t}if(f=pn(f.nextSibling),f===null){f=null;break t}}g=f.data,f=g==="F!"||g==="F"?f:null}if(f){Ke=pn(f.nextSibling),c=f.data==="F!";break e}}$s(c)}c=!1}c&&(s=i[0])}}return i=zt(),i.memoizedState=i.baseState=s,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:mg,lastRenderedState:s},i.queue=c,i=$g.bind(null,Te,c),c.dispatch=i,c=Qd(!1),g=sf.bind(null,Te,!1,c.queue),c=zt(),f={state:s,dispatch:null,action:n,pending:null},c.queue=f,i=V2.bind(null,Te,f,g,i),f.dispatch=i,c.memoizedState=n,[s,i,!1]}function xg(n){var s=rt();return yg(s,Fe,n)}function yg(n,s,i){if(s=Gd(n,s,mg)[0],n=Ul(is)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var c=Vo(s)}catch(N){throw N===br?Ml:N}else c=s;s=rt();var f=s.queue,g=f.dispatch;return i!==s.memoizedState&&(Te.flags|=2048,Sr(9,{destroy:void 0},F2.bind(null,f,i),null)),[c,g,n]}function F2(n,s){n.action=s}function bg(n){var s=rt(),i=Fe;if(i!==null)return yg(s,i,n);rt(),s=s.memoizedState,i=rt();var c=i.queue.dispatch;return i.memoizedState=n,[s,c,!1]}function Sr(n,s,i,c){return n={tag:n,create:i,deps:c,inst:s,next:null},s=Te.updateQueue,s===null&&(s=Pl(),Te.updateQueue=s),i=s.lastEffect,i===null?s.lastEffect=n.next=n:(c=i.next,i.next=n,n.next=c,s.lastEffect=n),n}function vg(){return rt().memoizedState}function ql(n,s,i,c){var f=zt();Te.flags|=n,f.memoizedState=Sr(1|s,{destroy:void 0},i,c===void 0?null:c)}function Il(n,s,i,c){var f=rt();c=c===void 0?null:c;var g=f.memoizedState.inst;Fe!==null&&c!==null&&qd(c,Fe.memoizedState.deps)?f.memoizedState=Sr(s,g,i,c):(Te.flags|=n,f.memoizedState=Sr(1|s,g,i,c))}function wg(n,s){ql(8390656,8,n,s)}function Zd(n,s){Il(2048,8,n,s)}function Y2(n){Te.flags|=4;var s=Te.updateQueue;if(s===null)s=Pl(),Te.updateQueue=s,s.events=[n];else{var i=s.events;i===null?s.events=[n]:i.push(n)}}function Ng(n){var s=rt().memoizedState;return Y2({ref:s,nextImpl:n}),function(){if((Ue&2)!==0)throw Error(r(440));return s.impl.apply(void 0,arguments)}}function jg(n,s){return Il(4,2,n,s)}function Sg(n,s){return Il(4,4,n,s)}function Cg(n,s){if(typeof s=="function"){n=n();var i=s(n);return function(){typeof i=="function"?i():s(null)}}if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function Eg(n,s,i){i=i!=null?i.concat([n]):null,Il(4,4,Cg.bind(null,s,n),i)}function Jd(){}function _g(n,s){var i=rt();s=s===void 0?null:s;var c=i.memoizedState;return s!==null&&qd(s,c[1])?c[0]:(i.memoizedState=[n,s],n)}function Tg(n,s){var i=rt();s=s===void 0?null:s;var c=i.memoizedState;if(s!==null&&qd(s,c[1]))return c[0];if(c=n(),Ma){xt(!0);try{n()}finally{xt(!1)}}return i.memoizedState=[c,s],c}function ef(n,s,i){return i===void 0||(os&1073741824)!==0&&(Oe&261930)===0?n.memoizedState=s:(n.memoizedState=i,n=A0(),Te.lanes|=n,Vs|=n,i)}function Ag(n,s,i,c){return Kt(i,s)?i:wr.current!==null?(n=ef(n,i,c),Kt(n,s)||(dt=!0),n):(os&42)===0||(os&1073741824)!==0&&(Oe&261930)===0?(dt=!0,n.memoizedState=i):(n=A0(),Te.lanes|=n,Vs|=n,s)}function kg(n,s,i,c,f){var g=U.p;U.p=g!==0&&8>g?g:8;var N=O.T,M={};O.T=M,sf(n,!1,s,i);try{var Y=f(),ee=O.S;if(ee!==null&&ee(M,Y),Y!==null&&typeof Y=="object"&&typeof Y.then=="function"){var oe=U2(Y,c);Fo(n,s,oe,tn(n))}else Fo(n,s,c,tn(n))}catch(le){Fo(n,s,{then:function(){},status:"rejected",reason:le},tn())}finally{U.p=g,N!==null&&M.types!==null&&(N.types=M.types),O.T=N}}function X2(){}function tf(n,s,i,c){if(n.tag!==5)throw Error(r(476));var f=Mg(n).queue;kg(n,f,s,z,i===null?X2:function(){return Dg(n),i(c)})}function Mg(n){var s=n.memoizedState;if(s!==null)return s;s={memoizedState:z,baseState:z,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:is,lastRenderedState:z},next:null};var i={};return s.next={memoizedState:i,baseState:i,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:is,lastRenderedState:i},next:null},n.memoizedState=s,n=n.alternate,n!==null&&(n.memoizedState=s),s}function Dg(n){var s=Mg(n);s.next===null&&(s=n.alternate.memoizedState),Fo(n,s.next.queue,{},tn())}function nf(){return Ct(li)}function Rg(){return rt().memoizedState}function Og(){return rt().memoizedState}function G2(n){for(var s=n.return;s!==null;){switch(s.tag){case 24:case 3:var i=tn();n=Bs(i);var c=Ps(s,n,i);c!==null&&(Ft(c,s,i),Ho(c,s,i)),s={cache:Md()},n.payload=s;return}s=s.return}}function K2(n,s,i){var c=tn();i={lane:c,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null},Vl(n)?zg(s,i):(i=vd(n,s,i,c),i!==null&&(Ft(i,n,c),Lg(i,s,c)))}function $g(n,s,i){var c=tn();Fo(n,s,i,c)}function Fo(n,s,i,c){var f={lane:c,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null};if(Vl(n))zg(s,f);else{var g=n.alternate;if(n.lanes===0&&(g===null||g.lanes===0)&&(g=s.lastRenderedReducer,g!==null))try{var N=s.lastRenderedState,M=g(N,i);if(f.hasEagerState=!0,f.eagerState=M,Kt(M,N))return Sl(n,s,f,0),Ge===null&&jl(),!1}catch{}if(i=vd(n,s,f,c),i!==null)return Ft(i,n,c),Lg(i,s,c),!0}return!1}function sf(n,s,i,c){if(c={lane:2,revertLane:zf(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},Vl(n)){if(s)throw Error(r(479))}else s=vd(n,i,c,2),s!==null&&Ft(s,n,2)}function Vl(n){var s=n.alternate;return n===Te||s!==null&&s===Te}function zg(n,s){Nr=Ll=!0;var i=n.pending;i===null?s.next=s:(s.next=i.next,i.next=s),n.pending=s}function Lg(n,s,i){if((i&4194048)!==0){var c=s.lanes;c&=n.pendingLanes,i|=c,s.lanes=i,sl(n,i)}}var Yo={readContext:Ct,use:Hl,useCallback:nt,useContext:nt,useEffect:nt,useImperativeHandle:nt,useLayoutEffect:nt,useInsertionEffect:nt,useMemo:nt,useReducer:nt,useRef:nt,useState:nt,useDebugValue:nt,useDeferredValue:nt,useTransition:nt,useSyncExternalStore:nt,useId:nt,useHostTransitionStatus:nt,useFormState:nt,useActionState:nt,useOptimistic:nt,useMemoCache:nt,useCacheRefresh:nt};Yo.useEffectEvent=nt;var Bg={readContext:Ct,use:Hl,useCallback:function(n,s){return zt().memoizedState=[n,s===void 0?null:s],n},useContext:Ct,useEffect:wg,useImperativeHandle:function(n,s,i){i=i!=null?i.concat([n]):null,ql(4194308,4,Cg.bind(null,s,n),i)},useLayoutEffect:function(n,s){return ql(4194308,4,n,s)},useInsertionEffect:function(n,s){ql(4,2,n,s)},useMemo:function(n,s){var i=zt();s=s===void 0?null:s;var c=n();if(Ma){xt(!0);try{n()}finally{xt(!1)}}return i.memoizedState=[c,s],c},useReducer:function(n,s,i){var c=zt();if(i!==void 0){var f=i(s);if(Ma){xt(!0);try{i(s)}finally{xt(!1)}}}else f=s;return c.memoizedState=c.baseState=f,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:f},c.queue=n,n=n.dispatch=K2.bind(null,Te,n),[c.memoizedState,n]},useRef:function(n){var s=zt();return n={current:n},s.memoizedState=n},useState:function(n){n=Qd(n);var s=n.queue,i=$g.bind(null,Te,s);return s.dispatch=i,[n.memoizedState,i]},useDebugValue:Jd,useDeferredValue:function(n,s){var i=zt();return ef(i,n,s)},useTransition:function(){var n=Qd(!1);return n=kg.bind(null,Te,n.queue,!0,!1),zt().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,s,i){var c=Te,f=zt();if(Le){if(i===void 0)throw Error(r(407));i=i()}else{if(i=s(),Ge===null)throw Error(r(349));(Oe&127)!==0||rg(c,s,i)}f.memoizedState=i;var g={value:i,getSnapshot:s};return f.queue=g,wg(ig.bind(null,c,g,n),[n]),c.flags|=2048,Sr(9,{destroy:void 0},og.bind(null,c,g,i,s),null),i},useId:function(){var n=zt(),s=Ge.identifierPrefix;if(Le){var i=On,c=Rn;i=(c&~(1<<32-yt(c)-1)).toString(32)+i,s="_"+s+"R_"+i,i=Bl++,0<i&&(s+="H"+i.toString(32)),s+="_"}else i=q2++,s="_"+s+"r_"+i.toString(32)+"_";return n.memoizedState=s},useHostTransitionStatus:nf,useFormState:gg,useActionState:gg,useOptimistic:function(n){var s=zt();s.memoizedState=s.baseState=n;var i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=i,s=sf.bind(null,Te,!0,i),i.dispatch=s,[n,s]},useMemoCache:Xd,useCacheRefresh:function(){return zt().memoizedState=G2.bind(null,Te)},useEffectEvent:function(n){var s=zt(),i={impl:n};return s.memoizedState=i,function(){if((Ue&2)!==0)throw Error(r(440));return i.impl.apply(void 0,arguments)}}},af={readContext:Ct,use:Hl,useCallback:_g,useContext:Ct,useEffect:Zd,useImperativeHandle:Eg,useInsertionEffect:jg,useLayoutEffect:Sg,useMemo:Tg,useReducer:Ul,useRef:vg,useState:function(){return Ul(is)},useDebugValue:Jd,useDeferredValue:function(n,s){var i=rt();return Ag(i,Fe.memoizedState,n,s)},useTransition:function(){var n=Ul(is)[0],s=rt().memoizedState;return[typeof n=="boolean"?n:Vo(n),s]},useSyncExternalStore:ag,useId:Rg,useHostTransitionStatus:nf,useFormState:xg,useActionState:xg,useOptimistic:function(n,s){var i=rt();return ug(i,Fe,n,s)},useMemoCache:Xd,useCacheRefresh:Og};af.useEffectEvent=Ng;var Pg={readContext:Ct,use:Hl,useCallback:_g,useContext:Ct,useEffect:Zd,useImperativeHandle:Eg,useInsertionEffect:jg,useLayoutEffect:Sg,useMemo:Tg,useReducer:Kd,useRef:vg,useState:function(){return Kd(is)},useDebugValue:Jd,useDeferredValue:function(n,s){var i=rt();return Fe===null?ef(i,n,s):Ag(i,Fe.memoizedState,n,s)},useTransition:function(){var n=Kd(is)[0],s=rt().memoizedState;return[typeof n=="boolean"?n:Vo(n),s]},useSyncExternalStore:ag,useId:Rg,useHostTransitionStatus:nf,useFormState:bg,useActionState:bg,useOptimistic:function(n,s){var i=rt();return Fe!==null?ug(i,Fe,n,s):(i.baseState=n,[n,i.queue.dispatch])},useMemoCache:Xd,useCacheRefresh:Og};Pg.useEffectEvent=Ng;function rf(n,s,i,c){s=n.memoizedState,i=i(c,s),i=i==null?s:x({},s,i),n.memoizedState=i,n.lanes===0&&(n.updateQueue.baseState=i)}var of={enqueueSetState:function(n,s,i){n=n._reactInternals;var c=tn(),f=Bs(c);f.payload=s,i!=null&&(f.callback=i),s=Ps(n,f,c),s!==null&&(Ft(s,n,c),Ho(s,n,c))},enqueueReplaceState:function(n,s,i){n=n._reactInternals;var c=tn(),f=Bs(c);f.tag=1,f.payload=s,i!=null&&(f.callback=i),s=Ps(n,f,c),s!==null&&(Ft(s,n,c),Ho(s,n,c))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var i=tn(),c=Bs(i);c.tag=2,s!=null&&(c.callback=s),s=Ps(n,c,i),s!==null&&(Ft(s,n,i),Ho(s,n,i))}};function Hg(n,s,i,c,f,g,N){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,g,N):s.prototype&&s.prototype.isPureReactComponent?!Do(i,c)||!Do(f,g):!0}function Ug(n,s,i,c){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(i,c),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(i,c),s.state!==n&&of.enqueueReplaceState(s,s.state,null)}function Da(n,s){var i=s;if("ref"in s){i={};for(var c in s)c!=="ref"&&(i[c]=s[c])}if(n=n.defaultProps){i===s&&(i=x({},i));for(var f in n)i[f]===void 0&&(i[f]=n[f])}return i}function qg(n){Nl(n)}function Ig(n){console.error(n)}function Vg(n){Nl(n)}function Fl(n,s){try{var i=n.onUncaughtError;i(s.value,{componentStack:s.stack})}catch(c){setTimeout(function(){throw c})}}function Fg(n,s,i){try{var c=n.onCaughtError;c(i.value,{componentStack:i.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function lf(n,s,i){return i=Bs(i),i.tag=3,i.payload={element:null},i.callback=function(){Fl(n,s)},i}function Yg(n){return n=Bs(n),n.tag=3,n}function Xg(n,s,i,c){var f=i.type.getDerivedStateFromError;if(typeof f=="function"){var g=c.value;n.payload=function(){return f(g)},n.callback=function(){Fg(s,i,c)}}var N=i.stateNode;N!==null&&typeof N.componentDidCatch=="function"&&(n.callback=function(){Fg(s,i,c),typeof f!="function"&&(Fs===null?Fs=new Set([this]):Fs.add(this));var M=c.stack;this.componentDidCatch(c.value,{componentStack:M!==null?M:""})})}function Q2(n,s,i,c,f){if(i.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(s=i.alternate,s!==null&&gr(s,i,f,!0),i=Wt.current,i!==null){switch(i.tag){case 31:case 13:return hn===null?sc():i.alternate===null&&st===0&&(st=3),i.flags&=-257,i.flags|=65536,i.lanes=f,c===Dl?i.flags|=16384:(s=i.updateQueue,s===null?i.updateQueue=new Set([c]):s.add(c),Rf(n,c,f)),!1;case 22:return i.flags|=65536,c===Dl?i.flags|=16384:(s=i.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([c])},i.updateQueue=s):(i=s.retryQueue,i===null?s.retryQueue=new Set([c]):i.add(c)),Rf(n,c,f)),!1}throw Error(r(435,i.tag))}return Rf(n,c,f),sc(),!1}if(Le)return s=Wt.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=f,c!==Ed&&(n=Error(r(422),{cause:c}),$o(cn(n,i)))):(c!==Ed&&(s=Error(r(423),{cause:c}),$o(cn(s,i))),n=n.current.alternate,n.flags|=65536,f&=-f,n.lanes|=f,c=cn(c,i),f=lf(n.stateNode,c,f),Ld(n,f),st!==4&&(st=2)),!1;var g=Error(r(520),{cause:c});if(g=cn(g,i),ei===null?ei=[g]:ei.push(g),st!==4&&(st=2),s===null)return!0;c=cn(c,i),i=s;do{switch(i.tag){case 3:return i.flags|=65536,n=f&-f,i.lanes|=n,n=lf(i.stateNode,c,n),Ld(i,n),!1;case 1:if(s=i.type,g=i.stateNode,(i.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(Fs===null||!Fs.has(g))))return i.flags|=65536,f&=-f,i.lanes|=f,f=Yg(f),Xg(f,n,i,c),Ld(i,f),!1}i=i.return}while(i!==null);return!1}var cf=Error(r(461)),dt=!1;function Et(n,s,i,c){s.child=n===null?Wm(s,null,i,c):ka(s,n.child,i,c)}function Gg(n,s,i,c,f){i=i.render;var g=s.ref;if("ref"in c){var N={};for(var M in c)M!=="ref"&&(N[M]=c[M])}else N=c;return Ea(s),c=Id(n,s,i,N,g,f),M=Vd(),n!==null&&!dt?(Fd(n,s,f),ls(n,s,f)):(Le&&M&&Sd(s),s.flags|=1,Et(n,s,c,f),s.child)}function Kg(n,s,i,c,f){if(n===null){var g=i.type;return typeof g=="function"&&!wd(g)&&g.defaultProps===void 0&&i.compare===null?(s.tag=15,s.type=g,Qg(n,s,g,c,f)):(n=El(i.type,null,c,s,s.mode,f),n.ref=s.ref,n.return=s,s.child=n)}if(g=n.child,!xf(n,f)){var N=g.memoizedProps;if(i=i.compare,i=i!==null?i:Do,i(N,c)&&n.ref===s.ref)return ls(n,s,f)}return s.flags|=1,n=ns(g,c),n.ref=s.ref,n.return=s,s.child=n}function Qg(n,s,i,c,f){if(n!==null){var g=n.memoizedProps;if(Do(g,c)&&n.ref===s.ref)if(dt=!1,s.pendingProps=c=g,xf(n,f))(n.flags&131072)!==0&&(dt=!0);else return s.lanes=n.lanes,ls(n,s,f)}return uf(n,s,i,c,f)}function Wg(n,s,i,c){var f=c.children,g=n!==null?n.memoizedState:null;if(n===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((s.flags&128)!==0){if(g=g!==null?g.baseLanes|i:i,n!==null){for(c=s.child=n.child,f=0;c!==null;)f=f|c.lanes|c.childLanes,c=c.sibling;c=f&~g}else c=0,s.child=null;return Zg(n,s,g,i,c)}if((i&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},n!==null&&kl(s,g!==null?g.cachePool:null),g!==null?eg(s,g):Pd(),tg(s);else return c=s.lanes=536870912,Zg(n,s,g!==null?g.baseLanes|i:i,i,c)}else g!==null?(kl(s,g.cachePool),eg(s,g),Us(),s.memoizedState=null):(n!==null&&kl(s,null),Pd(),Us());return Et(n,s,f,i),s.child}function Xo(n,s){return n!==null&&n.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function Zg(n,s,i,c,f){var g=Rd();return g=g===null?null:{parent:ct._currentValue,pool:g},s.memoizedState={baseLanes:i,cachePool:g},n!==null&&kl(s,null),Pd(),tg(s),n!==null&&gr(n,s,c,!0),s.childLanes=f,null}function Yl(n,s){return s=Gl({mode:s.mode,children:s.children},n.mode),s.ref=n.ref,n.child=s,s.return=n,s}function Jg(n,s,i){return ka(s,n.child,null,i),n=Yl(s,s.pendingProps),n.flags|=2,Zt(s),s.memoizedState=null,n}function W2(n,s,i){var c=s.pendingProps,f=(s.flags&128)!==0;if(s.flags&=-129,n===null){if(Le){if(c.mode==="hidden")return n=Yl(s,c),s.lanes=536870912,Xo(null,n);if(Ud(s),(n=Ke)?(n=dx(n,fn),n=n!==null&&n.data==="&"?n:null,n!==null&&(s.memoizedState={dehydrated:n,treeContext:Rs!==null?{id:Rn,overflow:On}:null,retryLane:536870912,hydrationErrors:null},i=zm(n),i.return=s,s.child=i,St=s,Ke=null)):n=null,n===null)throw $s(s);return s.lanes=536870912,null}return Yl(s,c)}var g=n.memoizedState;if(g!==null){var N=g.dehydrated;if(Ud(s),f)if(s.flags&256)s.flags&=-257,s=Jg(n,s,i);else if(s.memoizedState!==null)s.child=n.child,s.flags|=128,s=null;else throw Error(r(558));else if(dt||gr(n,s,i,!1),f=(i&n.childLanes)!==0,dt||f){if(c=Ge,c!==null&&(N=al(c,i),N!==0&&N!==g.retryLane))throw g.retryLane=N,Na(n,N),Ft(c,n,N),cf;sc(),s=Jg(n,s,i)}else n=g.treeContext,Ke=pn(N.nextSibling),St=s,Le=!0,Os=null,fn=!1,n!==null&&Pm(s,n),s=Yl(s,c),s.flags|=4096;return s}return n=ns(n.child,{mode:c.mode,children:c.children}),n.ref=s.ref,s.child=n,n.return=s,n}function Xl(n,s){var i=s.ref;if(i===null)n!==null&&n.ref!==null&&(s.flags|=4194816);else{if(typeof i!="function"&&typeof i!="object")throw Error(r(284));(n===null||n.ref!==i)&&(s.flags|=4194816)}}function uf(n,s,i,c,f){return Ea(s),i=Id(n,s,i,c,void 0,f),c=Vd(),n!==null&&!dt?(Fd(n,s,f),ls(n,s,f)):(Le&&c&&Sd(s),s.flags|=1,Et(n,s,i,f),s.child)}function e0(n,s,i,c,f,g){return Ea(s),s.updateQueue=null,i=sg(s,c,i,f),ng(n),c=Vd(),n!==null&&!dt?(Fd(n,s,g),ls(n,s,g)):(Le&&c&&Sd(s),s.flags|=1,Et(n,s,i,g),s.child)}function t0(n,s,i,c,f){if(Ea(s),s.stateNode===null){var g=fr,N=i.contextType;typeof N=="object"&&N!==null&&(g=Ct(N)),g=new i(c,g),s.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=of,s.stateNode=g,g._reactInternals=s,g=s.stateNode,g.props=c,g.state=s.memoizedState,g.refs={},$d(s),N=i.contextType,g.context=typeof N=="object"&&N!==null?Ct(N):fr,g.state=s.memoizedState,N=i.getDerivedStateFromProps,typeof N=="function"&&(rf(s,i,N,c),g.state=s.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(N=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),N!==g.state&&of.enqueueReplaceState(g,g.state,null),qo(s,c,g,f),Uo(),g.state=s.memoizedState),typeof g.componentDidMount=="function"&&(s.flags|=4194308),c=!0}else if(n===null){g=s.stateNode;var M=s.memoizedProps,Y=Da(i,M);g.props=Y;var ee=g.context,oe=i.contextType;N=fr,typeof oe=="object"&&oe!==null&&(N=Ct(oe));var le=i.getDerivedStateFromProps;oe=typeof le=="function"||typeof g.getSnapshotBeforeUpdate=="function",M=s.pendingProps!==M,oe||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(M||ee!==N)&&Ug(s,g,c,N),Ls=!1;var te=s.memoizedState;g.state=te,qo(s,c,g,f),Uo(),ee=s.memoizedState,M||te!==ee||Ls?(typeof le=="function"&&(rf(s,i,le,c),ee=s.memoizedState),(Y=Ls||Hg(s,i,Y,c,te,ee,N))?(oe||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(s.flags|=4194308)):(typeof g.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=c,s.memoizedState=ee),g.props=c,g.state=ee,g.context=N,c=Y):(typeof g.componentDidMount=="function"&&(s.flags|=4194308),c=!1)}else{g=s.stateNode,zd(n,s),N=s.memoizedProps,oe=Da(i,N),g.props=oe,le=s.pendingProps,te=g.context,ee=i.contextType,Y=fr,typeof ee=="object"&&ee!==null&&(Y=Ct(ee)),M=i.getDerivedStateFromProps,(ee=typeof M=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(N!==le||te!==Y)&&Ug(s,g,c,Y),Ls=!1,te=s.memoizedState,g.state=te,qo(s,c,g,f),Uo();var re=s.memoizedState;N!==le||te!==re||Ls||n!==null&&n.dependencies!==null&&Tl(n.dependencies)?(typeof M=="function"&&(rf(s,i,M,c),re=s.memoizedState),(oe=Ls||Hg(s,i,oe,c,te,re,Y)||n!==null&&n.dependencies!==null&&Tl(n.dependencies))?(ee||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(c,re,Y),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(c,re,Y)),typeof g.componentDidUpdate=="function"&&(s.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof g.componentDidUpdate!="function"||N===n.memoizedProps&&te===n.memoizedState||(s.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||N===n.memoizedProps&&te===n.memoizedState||(s.flags|=1024),s.memoizedProps=c,s.memoizedState=re),g.props=c,g.state=re,g.context=Y,c=oe):(typeof g.componentDidUpdate!="function"||N===n.memoizedProps&&te===n.memoizedState||(s.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||N===n.memoizedProps&&te===n.memoizedState||(s.flags|=1024),c=!1)}return g=c,Xl(n,s),c=(s.flags&128)!==0,g||c?(g=s.stateNode,i=c&&typeof i.getDerivedStateFromError!="function"?null:g.render(),s.flags|=1,n!==null&&c?(s.child=ka(s,n.child,null,f),s.child=ka(s,null,i,f)):Et(n,s,i,f),s.memoizedState=g.state,n=s.child):n=ls(n,s,f),n}function n0(n,s,i,c){return Sa(),s.flags|=256,Et(n,s,i,c),s.child}var df={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ff(n){return{baseLanes:n,cachePool:Fm()}}function hf(n,s,i){return n=n!==null?n.childLanes&~i:0,s&&(n|=en),n}function s0(n,s,i){var c=s.pendingProps,f=!1,g=(s.flags&128)!==0,N;if((N=g)||(N=n!==null&&n.memoizedState===null?!1:(at.current&2)!==0),N&&(f=!0,s.flags&=-129),N=(s.flags&32)!==0,s.flags&=-33,n===null){if(Le){if(f?Hs(s):Us(),(n=Ke)?(n=dx(n,fn),n=n!==null&&n.data!=="&"?n:null,n!==null&&(s.memoizedState={dehydrated:n,treeContext:Rs!==null?{id:Rn,overflow:On}:null,retryLane:536870912,hydrationErrors:null},i=zm(n),i.return=s,s.child=i,St=s,Ke=null)):n=null,n===null)throw $s(s);return Kf(n)?s.lanes=32:s.lanes=536870912,null}var M=c.children;return c=c.fallback,f?(Us(),f=s.mode,M=Gl({mode:"hidden",children:M},f),c=ja(c,f,i,null),M.return=s,c.return=s,M.sibling=c,s.child=M,c=s.child,c.memoizedState=ff(i),c.childLanes=hf(n,N,i),s.memoizedState=df,Xo(null,c)):(Hs(s),pf(s,M))}var Y=n.memoizedState;if(Y!==null&&(M=Y.dehydrated,M!==null)){if(g)s.flags&256?(Hs(s),s.flags&=-257,s=mf(n,s,i)):s.memoizedState!==null?(Us(),s.child=n.child,s.flags|=128,s=null):(Us(),M=c.fallback,f=s.mode,c=Gl({mode:"visible",children:c.children},f),M=ja(M,f,i,null),M.flags|=2,c.return=s,M.return=s,c.sibling=M,s.child=c,ka(s,n.child,null,i),c=s.child,c.memoizedState=ff(i),c.childLanes=hf(n,N,i),s.memoizedState=df,s=Xo(null,c));else if(Hs(s),Kf(M)){if(N=M.nextSibling&&M.nextSibling.dataset,N)var ee=N.dgst;N=ee,c=Error(r(419)),c.stack="",c.digest=N,$o({value:c,source:null,stack:null}),s=mf(n,s,i)}else if(dt||gr(n,s,i,!1),N=(i&n.childLanes)!==0,dt||N){if(N=Ge,N!==null&&(c=al(N,i),c!==0&&c!==Y.retryLane))throw Y.retryLane=c,Na(n,c),Ft(N,n,c),cf;Gf(M)||sc(),s=mf(n,s,i)}else Gf(M)?(s.flags|=192,s.child=n.child,s=null):(n=Y.treeContext,Ke=pn(M.nextSibling),St=s,Le=!0,Os=null,fn=!1,n!==null&&Pm(s,n),s=pf(s,c.children),s.flags|=4096);return s}return f?(Us(),M=c.fallback,f=s.mode,Y=n.child,ee=Y.sibling,c=ns(Y,{mode:"hidden",children:c.children}),c.subtreeFlags=Y.subtreeFlags&65011712,ee!==null?M=ns(ee,M):(M=ja(M,f,i,null),M.flags|=2),M.return=s,c.return=s,c.sibling=M,s.child=c,Xo(null,c),c=s.child,M=n.child.memoizedState,M===null?M=ff(i):(f=M.cachePool,f!==null?(Y=ct._currentValue,f=f.parent!==Y?{parent:Y,pool:Y}:f):f=Fm(),M={baseLanes:M.baseLanes|i,cachePool:f}),c.memoizedState=M,c.childLanes=hf(n,N,i),s.memoizedState=df,Xo(n.child,c)):(Hs(s),i=n.child,n=i.sibling,i=ns(i,{mode:"visible",children:c.children}),i.return=s,i.sibling=null,n!==null&&(N=s.deletions,N===null?(s.deletions=[n],s.flags|=16):N.push(n)),s.child=i,s.memoizedState=null,i)}function pf(n,s){return s=Gl({mode:"visible",children:s},n.mode),s.return=n,n.child=s}function Gl(n,s){return n=Qt(22,n,null,s),n.lanes=0,n}function mf(n,s,i){return ka(s,n.child,null,i),n=pf(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function a0(n,s,i){n.lanes|=s;var c=n.alternate;c!==null&&(c.lanes|=s),Ad(n.return,s,i)}function gf(n,s,i,c,f,g){var N=n.memoizedState;N===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:c,tail:i,tailMode:f,treeForkCount:g}:(N.isBackwards=s,N.rendering=null,N.renderingStartTime=0,N.last=c,N.tail=i,N.tailMode=f,N.treeForkCount=g)}function r0(n,s,i){var c=s.pendingProps,f=c.revealOrder,g=c.tail;c=c.children;var N=at.current,M=(N&2)!==0;if(M?(N=N&1|2,s.flags|=128):N&=1,Z(at,N),Et(n,s,c,i),c=Le?Oo:0,!M&&n!==null&&(n.flags&128)!==0)e:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&a0(n,i,s);else if(n.tag===19)a0(n,i,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(f){case"forwards":for(i=s.child,f=null;i!==null;)n=i.alternate,n!==null&&zl(n)===null&&(f=i),i=i.sibling;i=f,i===null?(f=s.child,s.child=null):(f=i.sibling,i.sibling=null),gf(s,!1,f,i,g,c);break;case"backwards":case"unstable_legacy-backwards":for(i=null,f=s.child,s.child=null;f!==null;){if(n=f.alternate,n!==null&&zl(n)===null){s.child=f;break}n=f.sibling,f.sibling=i,i=f,f=n}gf(s,!0,i,null,g,c);break;case"together":gf(s,!1,null,null,void 0,c);break;default:s.memoizedState=null}return s.child}function ls(n,s,i){if(n!==null&&(s.dependencies=n.dependencies),Vs|=s.lanes,(i&s.childLanes)===0)if(n!==null){if(gr(n,s,i,!1),(i&s.childLanes)===0)return null}else return null;if(n!==null&&s.child!==n.child)throw Error(r(153));if(s.child!==null){for(n=s.child,i=ns(n,n.pendingProps),s.child=i,i.return=s;n.sibling!==null;)n=n.sibling,i=i.sibling=ns(n,n.pendingProps),i.return=s;i.sibling=null}return s.child}function xf(n,s){return(n.lanes&s)!==0?!0:(n=n.dependencies,!!(n!==null&&Tl(n)))}function Z2(n,s,i){switch(s.tag){case 3:ue(s,s.stateNode.containerInfo),zs(s,ct,n.memoizedState.cache),Sa();break;case 27:case 5:Se(s);break;case 4:ue(s,s.stateNode.containerInfo);break;case 10:zs(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,Ud(s),null;break;case 13:var c=s.memoizedState;if(c!==null)return c.dehydrated!==null?(Hs(s),s.flags|=128,null):(i&s.child.childLanes)!==0?s0(n,s,i):(Hs(s),n=ls(n,s,i),n!==null?n.sibling:null);Hs(s);break;case 19:var f=(n.flags&128)!==0;if(c=(i&s.childLanes)!==0,c||(gr(n,s,i,!1),c=(i&s.childLanes)!==0),f){if(c)return r0(n,s,i);s.flags|=128}if(f=s.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),Z(at,at.current),c)break;return null;case 22:return s.lanes=0,Wg(n,s,i,s.pendingProps);case 24:zs(s,ct,n.memoizedState.cache)}return ls(n,s,i)}function o0(n,s,i){if(n!==null)if(n.memoizedProps!==s.pendingProps)dt=!0;else{if(!xf(n,i)&&(s.flags&128)===0)return dt=!1,Z2(n,s,i);dt=(n.flags&131072)!==0}else dt=!1,Le&&(s.flags&1048576)!==0&&Bm(s,Oo,s.index);switch(s.lanes=0,s.tag){case 16:e:{var c=s.pendingProps;if(n=Ta(s.elementType),s.type=n,typeof n=="function")wd(n)?(c=Da(n,c),s.tag=1,s=t0(null,s,n,c,i)):(s.tag=0,s=uf(null,s,n,c,i));else{if(n!=null){var f=n.$$typeof;if(f===k){s.tag=11,s=Gg(null,s,n,c,i);break e}else if(f===R){s.tag=14,s=Kg(null,s,n,c,i);break e}}throw s=B(n)||n,Error(r(306,s,""))}}return s;case 0:return uf(n,s,s.type,s.pendingProps,i);case 1:return c=s.type,f=Da(c,s.pendingProps),t0(n,s,c,f,i);case 3:e:{if(ue(s,s.stateNode.containerInfo),n===null)throw Error(r(387));c=s.pendingProps;var g=s.memoizedState;f=g.element,zd(n,s),qo(s,c,null,i);var N=s.memoizedState;if(c=N.cache,zs(s,ct,c),c!==g.cache&&kd(s,[ct],i,!0),Uo(),c=N.element,g.isDehydrated)if(g={element:c,isDehydrated:!1,cache:N.cache},s.updateQueue.baseState=g,s.memoizedState=g,s.flags&256){s=n0(n,s,c,i);break e}else if(c!==f){f=cn(Error(r(424)),s),$o(f),s=n0(n,s,c,i);break e}else for(n=s.stateNode.containerInfo,n.nodeType===9?n=n.body:n=n.nodeName==="HTML"?n.ownerDocument.body:n,Ke=pn(n.firstChild),St=s,Le=!0,Os=null,fn=!0,i=Wm(s,null,c,i),s.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling;else{if(Sa(),c===f){s=ls(n,s,i);break e}Et(n,s,c,i)}s=s.child}return s;case 26:return Xl(n,s),n===null?(i=xx(s.type,null,s.pendingProps,null))?s.memoizedState=i:Le||(i=s.type,n=s.pendingProps,c=uc(de.current).createElement(i),c[mt]=s,c[At]=n,_t(c,i,n),lt(c),s.stateNode=c):s.memoizedState=xx(s.type,n.memoizedProps,s.pendingProps,n.memoizedState),null;case 27:return Se(s),n===null&&Le&&(c=s.stateNode=px(s.type,s.pendingProps,de.current),St=s,fn=!0,f=Ke,Ks(s.type)?(Qf=f,Ke=pn(c.firstChild)):Ke=f),Et(n,s,s.pendingProps.children,i),Xl(n,s),n===null&&(s.flags|=4194304),s.child;case 5:return n===null&&Le&&((f=c=Ke)&&(c=TN(c,s.type,s.pendingProps,fn),c!==null?(s.stateNode=c,St=s,Ke=pn(c.firstChild),fn=!1,f=!0):f=!1),f||$s(s)),Se(s),f=s.type,g=s.pendingProps,N=n!==null?n.memoizedProps:null,c=g.children,Ff(f,g)?c=null:N!==null&&Ff(f,N)&&(s.flags|=32),s.memoizedState!==null&&(f=Id(n,s,I2,null,null,i),li._currentValue=f),Xl(n,s),Et(n,s,c,i),s.child;case 6:return n===null&&Le&&((n=i=Ke)&&(i=AN(i,s.pendingProps,fn),i!==null?(s.stateNode=i,St=s,Ke=null,n=!0):n=!1),n||$s(s)),null;case 13:return s0(n,s,i);case 4:return ue(s,s.stateNode.containerInfo),c=s.pendingProps,n===null?s.child=ka(s,null,c,i):Et(n,s,c,i),s.child;case 11:return Gg(n,s,s.type,s.pendingProps,i);case 7:return Et(n,s,s.pendingProps,i),s.child;case 8:return Et(n,s,s.pendingProps.children,i),s.child;case 12:return Et(n,s,s.pendingProps.children,i),s.child;case 10:return c=s.pendingProps,zs(s,s.type,c.value),Et(n,s,c.children,i),s.child;case 9:return f=s.type._context,c=s.pendingProps.children,Ea(s),f=Ct(f),c=c(f),s.flags|=1,Et(n,s,c,i),s.child;case 14:return Kg(n,s,s.type,s.pendingProps,i);case 15:return Qg(n,s,s.type,s.pendingProps,i);case 19:return r0(n,s,i);case 31:return W2(n,s,i);case 22:return Wg(n,s,i,s.pendingProps);case 24:return Ea(s),c=Ct(ct),n===null?(f=Rd(),f===null&&(f=Ge,g=Md(),f.pooledCache=g,g.refCount++,g!==null&&(f.pooledCacheLanes|=i),f=g),s.memoizedState={parent:c,cache:f},$d(s),zs(s,ct,f)):((n.lanes&i)!==0&&(zd(n,s),qo(s,null,null,i),Uo()),f=n.memoizedState,g=s.memoizedState,f.parent!==c?(f={parent:c,cache:c},s.memoizedState=f,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=f),zs(s,ct,c)):(c=g.cache,zs(s,ct,c),c!==f.cache&&kd(s,[ct],i,!0))),Et(n,s,s.pendingProps.children,i),s.child;case 29:throw s.pendingProps}throw Error(r(156,s.tag))}function cs(n){n.flags|=4}function yf(n,s,i,c,f){if((s=(n.mode&32)!==0)&&(s=!1),s){if(n.flags|=16777216,(f&335544128)===f)if(n.stateNode.complete)n.flags|=8192;else if(R0())n.flags|=8192;else throw Aa=Dl,Od}else n.flags&=-16777217}function i0(n,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!Nx(s))if(R0())n.flags|=8192;else throw Aa=Dl,Od}function Kl(n,s){s!==null&&(n.flags|=4),n.flags&16384&&(s=n.tag!==22?tl():536870912,n.lanes|=s,Tr|=s)}function Go(n,s){if(!Le)switch(n.tailMode){case"hidden":s=n.tail;for(var i=null;s!==null;)s.alternate!==null&&(i=s),s=s.sibling;i===null?n.tail=null:i.sibling=null;break;case"collapsed":i=n.tail;for(var c=null;i!==null;)i.alternate!==null&&(c=i),i=i.sibling;c===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function Qe(n){var s=n.alternate!==null&&n.alternate.child===n.child,i=0,c=0;if(s)for(var f=n.child;f!==null;)i|=f.lanes|f.childLanes,c|=f.subtreeFlags&65011712,c|=f.flags&65011712,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)i|=f.lanes|f.childLanes,c|=f.subtreeFlags,c|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=c,n.childLanes=i,s}function J2(n,s,i){var c=s.pendingProps;switch(Cd(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Qe(s),null;case 1:return Qe(s),null;case 3:return i=s.stateNode,c=null,n!==null&&(c=n.memoizedState.cache),s.memoizedState.cache!==c&&(s.flags|=2048),rs(ct),pe(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(n===null||n.child===null)&&(mr(s)?cs(s):n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,_d())),Qe(s),null;case 26:var f=s.type,g=s.memoizedState;return n===null?(cs(s),g!==null?(Qe(s),i0(s,g)):(Qe(s),yf(s,f,null,c,i))):g?g!==n.memoizedState?(cs(s),Qe(s),i0(s,g)):(Qe(s),s.flags&=-16777217):(n=n.memoizedProps,n!==c&&cs(s),Qe(s),yf(s,f,n,c,i)),null;case 27:if(he(s),i=de.current,f=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==c&&cs(s);else{if(!c){if(s.stateNode===null)throw Error(r(166));return Qe(s),null}n=ae.current,mr(s)?Hm(s):(n=px(f,c,i),s.stateNode=n,cs(s))}return Qe(s),null;case 5:if(he(s),f=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==c&&cs(s);else{if(!c){if(s.stateNode===null)throw Error(r(166));return Qe(s),null}if(g=ae.current,mr(s))Hm(s);else{var N=uc(de.current);switch(g){case 1:g=N.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:g=N.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":g=N.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":g=N.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":g=N.createElement("div"),g.innerHTML="<script><\/script>",g=g.removeChild(g.firstChild);break;case"select":g=typeof c.is=="string"?N.createElement("select",{is:c.is}):N.createElement("select"),c.multiple?g.multiple=!0:c.size&&(g.size=c.size);break;default:g=typeof c.is=="string"?N.createElement(f,{is:c.is}):N.createElement(f)}}g[mt]=s,g[At]=c;e:for(N=s.child;N!==null;){if(N.tag===5||N.tag===6)g.appendChild(N.stateNode);else if(N.tag!==4&&N.tag!==27&&N.child!==null){N.child.return=N,N=N.child;continue}if(N===s)break e;for(;N.sibling===null;){if(N.return===null||N.return===s)break e;N=N.return}N.sibling.return=N.return,N=N.sibling}s.stateNode=g;e:switch(_t(g,f,c),f){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&cs(s)}}return Qe(s),yf(s,s.type,n===null?null:n.memoizedProps,s.pendingProps,i),null;case 6:if(n&&s.stateNode!=null)n.memoizedProps!==c&&cs(s);else{if(typeof c!="string"&&s.stateNode===null)throw Error(r(166));if(n=de.current,mr(s)){if(n=s.stateNode,i=s.memoizedProps,c=null,f=St,f!==null)switch(f.tag){case 27:case 5:c=f.memoizedProps}n[mt]=s,n=!!(n.nodeValue===i||c!==null&&c.suppressHydrationWarning===!0||sx(n.nodeValue,i)),n||$s(s,!0)}else n=uc(n).createTextNode(c),n[mt]=s,s.stateNode=n}return Qe(s),null;case 31:if(i=s.memoizedState,n===null||n.memoizedState!==null){if(c=mr(s),i!==null){if(n===null){if(!c)throw Error(r(318));if(n=s.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(557));n[mt]=s}else Sa(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Qe(s),n=!1}else i=_d(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=i),n=!0;if(!n)return s.flags&256?(Zt(s),s):(Zt(s),null);if((s.flags&128)!==0)throw Error(r(558))}return Qe(s),null;case 13:if(c=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(f=mr(s),c!==null&&c.dehydrated!==null){if(n===null){if(!f)throw Error(r(318));if(f=s.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(r(317));f[mt]=s}else Sa(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Qe(s),f=!1}else f=_d(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=f),f=!0;if(!f)return s.flags&256?(Zt(s),s):(Zt(s),null)}return Zt(s),(s.flags&128)!==0?(s.lanes=i,s):(i=c!==null,n=n!==null&&n.memoizedState!==null,i&&(c=s.child,f=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(f=c.alternate.memoizedState.cachePool.pool),g=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(g=c.memoizedState.cachePool.pool),g!==f&&(c.flags|=2048)),i!==n&&i&&(s.child.flags|=8192),Kl(s,s.updateQueue),Qe(s),null);case 4:return pe(),n===null&&Hf(s.stateNode.containerInfo),Qe(s),null;case 10:return rs(s.type),Qe(s),null;case 19:if(V(at),c=s.memoizedState,c===null)return Qe(s),null;if(f=(s.flags&128)!==0,g=c.rendering,g===null)if(f)Go(c,!1);else{if(st!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(g=zl(n),g!==null){for(s.flags|=128,Go(c,!1),n=g.updateQueue,s.updateQueue=n,Kl(s,n),s.subtreeFlags=0,n=i,i=s.child;i!==null;)$m(i,n),i=i.sibling;return Z(at,at.current&1|2),Le&&ss(s,c.treeForkCount),s.child}n=n.sibling}c.tail!==null&&Me()>ec&&(s.flags|=128,f=!0,Go(c,!1),s.lanes=4194304)}else{if(!f)if(n=zl(g),n!==null){if(s.flags|=128,f=!0,n=n.updateQueue,s.updateQueue=n,Kl(s,n),Go(c,!0),c.tail===null&&c.tailMode==="hidden"&&!g.alternate&&!Le)return Qe(s),null}else 2*Me()-c.renderingStartTime>ec&&i!==536870912&&(s.flags|=128,f=!0,Go(c,!1),s.lanes=4194304);c.isBackwards?(g.sibling=s.child,s.child=g):(n=c.last,n!==null?n.sibling=g:s.child=g,c.last=g)}return c.tail!==null?(n=c.tail,c.rendering=n,c.tail=n.sibling,c.renderingStartTime=Me(),n.sibling=null,i=at.current,Z(at,f?i&1|2:i&1),Le&&ss(s,c.treeForkCount),n):(Qe(s),null);case 22:case 23:return Zt(s),Hd(),c=s.memoizedState!==null,n!==null?n.memoizedState!==null!==c&&(s.flags|=8192):c&&(s.flags|=8192),c?(i&536870912)!==0&&(s.flags&128)===0&&(Qe(s),s.subtreeFlags&6&&(s.flags|=8192)):Qe(s),i=s.updateQueue,i!==null&&Kl(s,i.retryQueue),i=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(i=n.memoizedState.cachePool.pool),c=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(c=s.memoizedState.cachePool.pool),c!==i&&(s.flags|=2048),n!==null&&V(_a),null;case 24:return i=null,n!==null&&(i=n.memoizedState.cache),s.memoizedState.cache!==i&&(s.flags|=2048),rs(ct),Qe(s),null;case 25:return null;case 30:return null}throw Error(r(156,s.tag))}function eN(n,s){switch(Cd(s),s.tag){case 1:return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return rs(ct),pe(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 26:case 27:case 5:return he(s),null;case 31:if(s.memoizedState!==null){if(Zt(s),s.alternate===null)throw Error(r(340));Sa()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 13:if(Zt(s),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(r(340));Sa()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return V(at),null;case 4:return pe(),null;case 10:return rs(s.type),null;case 22:case 23:return Zt(s),Hd(),n!==null&&V(_a),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 24:return rs(ct),null;case 25:return null;default:return null}}function l0(n,s){switch(Cd(s),s.tag){case 3:rs(ct),pe();break;case 26:case 27:case 5:he(s);break;case 4:pe();break;case 31:s.memoizedState!==null&&Zt(s);break;case 13:Zt(s);break;case 19:V(at);break;case 10:rs(s.type);break;case 22:case 23:Zt(s),Hd(),n!==null&&V(_a);break;case 24:rs(ct)}}function Ko(n,s){try{var i=s.updateQueue,c=i!==null?i.lastEffect:null;if(c!==null){var f=c.next;i=f;do{if((i.tag&n)===n){c=void 0;var g=i.create,N=i.inst;c=g(),N.destroy=c}i=i.next}while(i!==f)}}catch(M){Ie(s,s.return,M)}}function qs(n,s,i){try{var c=s.updateQueue,f=c!==null?c.lastEffect:null;if(f!==null){var g=f.next;c=g;do{if((c.tag&n)===n){var N=c.inst,M=N.destroy;if(M!==void 0){N.destroy=void 0,f=s;var Y=i,ee=M;try{ee()}catch(oe){Ie(f,Y,oe)}}}c=c.next}while(c!==g)}}catch(oe){Ie(s,s.return,oe)}}function c0(n){var s=n.updateQueue;if(s!==null){var i=n.stateNode;try{Jm(s,i)}catch(c){Ie(n,n.return,c)}}}function u0(n,s,i){i.props=Da(n.type,n.memoizedProps),i.state=n.memoizedState;try{i.componentWillUnmount()}catch(c){Ie(n,s,c)}}function Qo(n,s){try{var i=n.ref;if(i!==null){switch(n.tag){case 26:case 27:case 5:var c=n.stateNode;break;case 30:c=n.stateNode;break;default:c=n.stateNode}typeof i=="function"?n.refCleanup=i(c):i.current=c}}catch(f){Ie(n,s,f)}}function $n(n,s){var i=n.ref,c=n.refCleanup;if(i!==null)if(typeof c=="function")try{c()}catch(f){Ie(n,s,f)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof i=="function")try{i(null)}catch(f){Ie(n,s,f)}else i.current=null}function d0(n){var s=n.type,i=n.memoizedProps,c=n.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":i.autoFocus&&c.focus();break e;case"img":i.src?c.src=i.src:i.srcSet&&(c.srcset=i.srcSet)}}catch(f){Ie(n,n.return,f)}}function bf(n,s,i){try{var c=n.stateNode;NN(c,n.type,i,s),c[At]=s}catch(f){Ie(n,n.return,f)}}function f0(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&Ks(n.type)||n.tag===4}function vf(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||f0(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&Ks(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function wf(n,s,i){var c=n.tag;if(c===5||c===6)n=n.stateNode,s?(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i).insertBefore(n,s):(s=i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,s.appendChild(n),i=i._reactRootContainer,i!=null||s.onclick!==null||(s.onclick=es));else if(c!==4&&(c===27&&Ks(n.type)&&(i=n.stateNode,s=null),n=n.child,n!==null))for(wf(n,s,i),n=n.sibling;n!==null;)wf(n,s,i),n=n.sibling}function Ql(n,s,i){var c=n.tag;if(c===5||c===6)n=n.stateNode,s?i.insertBefore(n,s):i.appendChild(n);else if(c!==4&&(c===27&&Ks(n.type)&&(i=n.stateNode),n=n.child,n!==null))for(Ql(n,s,i),n=n.sibling;n!==null;)Ql(n,s,i),n=n.sibling}function h0(n){var s=n.stateNode,i=n.memoizedProps;try{for(var c=n.type,f=s.attributes;f.length;)s.removeAttributeNode(f[0]);_t(s,c,i),s[mt]=n,s[At]=i}catch(g){Ie(n,n.return,g)}}var us=!1,ft=!1,Nf=!1,p0=typeof WeakSet=="function"?WeakSet:Set,bt=null;function tN(n,s){if(n=n.containerInfo,If=xc,n=Em(n),pd(n)){if("selectionStart"in n)var i={start:n.selectionStart,end:n.selectionEnd};else e:{i=(i=n.ownerDocument)&&i.defaultView||window;var c=i.getSelection&&i.getSelection();if(c&&c.rangeCount!==0){i=c.anchorNode;var f=c.anchorOffset,g=c.focusNode;c=c.focusOffset;try{i.nodeType,g.nodeType}catch{i=null;break e}var N=0,M=-1,Y=-1,ee=0,oe=0,le=n,te=null;t:for(;;){for(var re;le!==i||f!==0&&le.nodeType!==3||(M=N+f),le!==g||c!==0&&le.nodeType!==3||(Y=N+c),le.nodeType===3&&(N+=le.nodeValue.length),(re=le.firstChild)!==null;)te=le,le=re;for(;;){if(le===n)break t;if(te===i&&++ee===f&&(M=N),te===g&&++oe===c&&(Y=N),(re=le.nextSibling)!==null)break;le=te,te=le.parentNode}le=re}i=M===-1||Y===-1?null:{start:M,end:Y}}else i=null}i=i||{start:0,end:0}}else i=null;for(Vf={focusedElem:n,selectionRange:i},xc=!1,bt=s;bt!==null;)if(s=bt,n=s.child,(s.subtreeFlags&1028)!==0&&n!==null)n.return=s,bt=n;else for(;bt!==null;){switch(s=bt,g=s.alternate,n=s.flags,s.tag){case 0:if((n&4)!==0&&(n=s.updateQueue,n=n!==null?n.events:null,n!==null))for(i=0;i<n.length;i++)f=n[i],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&g!==null){n=void 0,i=s,f=g.memoizedProps,g=g.memoizedState,c=i.stateNode;try{var me=Da(i.type,f);n=c.getSnapshotBeforeUpdate(me,g),c.__reactInternalSnapshotBeforeUpdate=n}catch(Ne){Ie(i,i.return,Ne)}}break;case 3:if((n&1024)!==0){if(n=s.stateNode.containerInfo,i=n.nodeType,i===9)Xf(n);else if(i===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":Xf(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(r(163))}if(n=s.sibling,n!==null){n.return=s.return,bt=n;break}bt=s.return}}function m0(n,s,i){var c=i.flags;switch(i.tag){case 0:case 11:case 15:fs(n,i),c&4&&Ko(5,i);break;case 1:if(fs(n,i),c&4)if(n=i.stateNode,s===null)try{n.componentDidMount()}catch(N){Ie(i,i.return,N)}else{var f=Da(i.type,s.memoizedProps);s=s.memoizedState;try{n.componentDidUpdate(f,s,n.__reactInternalSnapshotBeforeUpdate)}catch(N){Ie(i,i.return,N)}}c&64&&c0(i),c&512&&Qo(i,i.return);break;case 3:if(fs(n,i),c&64&&(n=i.updateQueue,n!==null)){if(s=null,i.child!==null)switch(i.child.tag){case 27:case 5:s=i.child.stateNode;break;case 1:s=i.child.stateNode}try{Jm(n,s)}catch(N){Ie(i,i.return,N)}}break;case 27:s===null&&c&4&&h0(i);case 26:case 5:fs(n,i),s===null&&c&4&&d0(i),c&512&&Qo(i,i.return);break;case 12:fs(n,i);break;case 31:fs(n,i),c&4&&y0(n,i);break;case 13:fs(n,i),c&4&&b0(n,i),c&64&&(n=i.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(i=uN.bind(null,i),kN(n,i))));break;case 22:if(c=i.memoizedState!==null||us,!c){s=s!==null&&s.memoizedState!==null||ft,f=us;var g=ft;us=c,(ft=s)&&!g?hs(n,i,(i.subtreeFlags&8772)!==0):fs(n,i),us=f,ft=g}break;case 30:break;default:fs(n,i)}}function g0(n){var s=n.alternate;s!==null&&(n.alternate=null,g0(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&No(s)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var Ze=null,Ut=!1;function ds(n,s,i){for(i=i.child;i!==null;)x0(n,s,i),i=i.sibling}function x0(n,s,i){if(jt&&typeof jt.onCommitFiberUnmount=="function")try{jt.onCommitFiberUnmount(bn,i)}catch{}switch(i.tag){case 26:ft||$n(i,s),ds(n,s,i),i.memoizedState?i.memoizedState.count--:i.stateNode&&(i=i.stateNode,i.parentNode.removeChild(i));break;case 27:ft||$n(i,s);var c=Ze,f=Ut;Ks(i.type)&&(Ze=i.stateNode,Ut=!1),ds(n,s,i),ri(i.stateNode),Ze=c,Ut=f;break;case 5:ft||$n(i,s);case 6:if(c=Ze,f=Ut,Ze=null,ds(n,s,i),Ze=c,Ut=f,Ze!==null)if(Ut)try{(Ze.nodeType===9?Ze.body:Ze.nodeName==="HTML"?Ze.ownerDocument.body:Ze).removeChild(i.stateNode)}catch(g){Ie(i,s,g)}else try{Ze.removeChild(i.stateNode)}catch(g){Ie(i,s,g)}break;case 18:Ze!==null&&(Ut?(n=Ze,cx(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,i.stateNode),zr(n)):cx(Ze,i.stateNode));break;case 4:c=Ze,f=Ut,Ze=i.stateNode.containerInfo,Ut=!0,ds(n,s,i),Ze=c,Ut=f;break;case 0:case 11:case 14:case 15:qs(2,i,s),ft||qs(4,i,s),ds(n,s,i);break;case 1:ft||($n(i,s),c=i.stateNode,typeof c.componentWillUnmount=="function"&&u0(i,s,c)),ds(n,s,i);break;case 21:ds(n,s,i);break;case 22:ft=(c=ft)||i.memoizedState!==null,ds(n,s,i),ft=c;break;default:ds(n,s,i)}}function y0(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{zr(n)}catch(i){Ie(s,s.return,i)}}}function b0(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{zr(n)}catch(i){Ie(s,s.return,i)}}function nN(n){switch(n.tag){case 31:case 13:case 19:var s=n.stateNode;return s===null&&(s=n.stateNode=new p0),s;case 22:return n=n.stateNode,s=n._retryCache,s===null&&(s=n._retryCache=new p0),s;default:throw Error(r(435,n.tag))}}function Wl(n,s){var i=nN(n);s.forEach(function(c){if(!i.has(c)){i.add(c);var f=dN.bind(null,n,c);c.then(f,f)}})}function qt(n,s){var i=s.deletions;if(i!==null)for(var c=0;c<i.length;c++){var f=i[c],g=n,N=s,M=N;e:for(;M!==null;){switch(M.tag){case 27:if(Ks(M.type)){Ze=M.stateNode,Ut=!1;break e}break;case 5:Ze=M.stateNode,Ut=!1;break e;case 3:case 4:Ze=M.stateNode.containerInfo,Ut=!0;break e}M=M.return}if(Ze===null)throw Error(r(160));x0(g,N,f),Ze=null,Ut=!1,g=f.alternate,g!==null&&(g.return=null),f.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)v0(s,n),s=s.sibling}var Nn=null;function v0(n,s){var i=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:qt(s,n),It(n),c&4&&(qs(3,n,n.return),Ko(3,n),qs(5,n,n.return));break;case 1:qt(s,n),It(n),c&512&&(ft||i===null||$n(i,i.return)),c&64&&us&&(n=n.updateQueue,n!==null&&(c=n.callbacks,c!==null&&(i=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=i===null?c:i.concat(c))));break;case 26:var f=Nn;if(qt(s,n),It(n),c&512&&(ft||i===null||$n(i,i.return)),c&4){var g=i!==null?i.memoizedState:null;if(c=n.memoizedState,i===null)if(c===null)if(n.stateNode===null){e:{c=n.type,i=n.memoizedProps,f=f.ownerDocument||f;t:switch(c){case"title":g=f.getElementsByTagName("title")[0],(!g||g[ga]||g[mt]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=f.createElement(c),f.head.insertBefore(g,f.querySelector("head > title"))),_t(g,c,i),g[mt]=n,lt(g),c=g;break e;case"link":var N=vx("link","href",f).get(c+(i.href||""));if(N){for(var M=0;M<N.length;M++)if(g=N[M],g.getAttribute("href")===(i.href==null||i.href===""?null:i.href)&&g.getAttribute("rel")===(i.rel==null?null:i.rel)&&g.getAttribute("title")===(i.title==null?null:i.title)&&g.getAttribute("crossorigin")===(i.crossOrigin==null?null:i.crossOrigin)){N.splice(M,1);break t}}g=f.createElement(c),_t(g,c,i),f.head.appendChild(g);break;case"meta":if(N=vx("meta","content",f).get(c+(i.content||""))){for(M=0;M<N.length;M++)if(g=N[M],g.getAttribute("content")===(i.content==null?null:""+i.content)&&g.getAttribute("name")===(i.name==null?null:i.name)&&g.getAttribute("property")===(i.property==null?null:i.property)&&g.getAttribute("http-equiv")===(i.httpEquiv==null?null:i.httpEquiv)&&g.getAttribute("charset")===(i.charSet==null?null:i.charSet)){N.splice(M,1);break t}}g=f.createElement(c),_t(g,c,i),f.head.appendChild(g);break;default:throw Error(r(468,c))}g[mt]=n,lt(g),c=g}n.stateNode=c}else wx(f,n.type,n.stateNode);else n.stateNode=bx(f,c,n.memoizedProps);else g!==c?(g===null?i.stateNode!==null&&(i=i.stateNode,i.parentNode.removeChild(i)):g.count--,c===null?wx(f,n.type,n.stateNode):bx(f,c,n.memoizedProps)):c===null&&n.stateNode!==null&&bf(n,n.memoizedProps,i.memoizedProps)}break;case 27:qt(s,n),It(n),c&512&&(ft||i===null||$n(i,i.return)),i!==null&&c&4&&bf(n,n.memoizedProps,i.memoizedProps);break;case 5:if(qt(s,n),It(n),c&512&&(ft||i===null||$n(i,i.return)),n.flags&32){f=n.stateNode;try{rr(f,"")}catch(me){Ie(n,n.return,me)}}c&4&&n.stateNode!=null&&(f=n.memoizedProps,bf(n,f,i!==null?i.memoizedProps:f)),c&1024&&(Nf=!0);break;case 6:if(qt(s,n),It(n),c&4){if(n.stateNode===null)throw Error(r(162));c=n.memoizedProps,i=n.stateNode;try{i.nodeValue=c}catch(me){Ie(n,n.return,me)}}break;case 3:if(hc=null,f=Nn,Nn=dc(s.containerInfo),qt(s,n),Nn=f,It(n),c&4&&i!==null&&i.memoizedState.isDehydrated)try{zr(s.containerInfo)}catch(me){Ie(n,n.return,me)}Nf&&(Nf=!1,w0(n));break;case 4:c=Nn,Nn=dc(n.stateNode.containerInfo),qt(s,n),It(n),Nn=c;break;case 12:qt(s,n),It(n);break;case 31:qt(s,n),It(n),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,Wl(n,c)));break;case 13:qt(s,n),It(n),n.child.flags&8192&&n.memoizedState!==null!=(i!==null&&i.memoizedState!==null)&&(Jl=Me()),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,Wl(n,c)));break;case 22:f=n.memoizedState!==null;var Y=i!==null&&i.memoizedState!==null,ee=us,oe=ft;if(us=ee||f,ft=oe||Y,qt(s,n),ft=oe,us=ee,It(n),c&8192)e:for(s=n.stateNode,s._visibility=f?s._visibility&-2:s._visibility|1,f&&(i===null||Y||us||ft||Ra(n)),i=null,s=n;;){if(s.tag===5||s.tag===26){if(i===null){Y=i=s;try{if(g=Y.stateNode,f)N=g.style,typeof N.setProperty=="function"?N.setProperty("display","none","important"):N.display="none";else{M=Y.stateNode;var le=Y.memoizedProps.style,te=le!=null&&le.hasOwnProperty("display")?le.display:null;M.style.display=te==null||typeof te=="boolean"?"":(""+te).trim()}}catch(me){Ie(Y,Y.return,me)}}}else if(s.tag===6){if(i===null){Y=s;try{Y.stateNode.nodeValue=f?"":Y.memoizedProps}catch(me){Ie(Y,Y.return,me)}}}else if(s.tag===18){if(i===null){Y=s;try{var re=Y.stateNode;f?ux(re,!0):ux(Y.stateNode,!1)}catch(me){Ie(Y,Y.return,me)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===n)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break e;for(;s.sibling===null;){if(s.return===null||s.return===n)break e;i===s&&(i=null),s=s.return}i===s&&(i=null),s.sibling.return=s.return,s=s.sibling}c&4&&(c=n.updateQueue,c!==null&&(i=c.retryQueue,i!==null&&(c.retryQueue=null,Wl(n,i))));break;case 19:qt(s,n),It(n),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,Wl(n,c)));break;case 30:break;case 21:break;default:qt(s,n),It(n)}}function It(n){var s=n.flags;if(s&2){try{for(var i,c=n.return;c!==null;){if(f0(c)){i=c;break}c=c.return}if(i==null)throw Error(r(160));switch(i.tag){case 27:var f=i.stateNode,g=vf(n);Ql(n,g,f);break;case 5:var N=i.stateNode;i.flags&32&&(rr(N,""),i.flags&=-33);var M=vf(n);Ql(n,M,N);break;case 3:case 4:var Y=i.stateNode.containerInfo,ee=vf(n);wf(n,ee,Y);break;default:throw Error(r(161))}}catch(oe){Ie(n,n.return,oe)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function w0(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var s=n;w0(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),n=n.sibling}}function fs(n,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)m0(n,s.alternate,s),s=s.sibling}function Ra(n){for(n=n.child;n!==null;){var s=n;switch(s.tag){case 0:case 11:case 14:case 15:qs(4,s,s.return),Ra(s);break;case 1:$n(s,s.return);var i=s.stateNode;typeof i.componentWillUnmount=="function"&&u0(s,s.return,i),Ra(s);break;case 27:ri(s.stateNode);case 26:case 5:$n(s,s.return),Ra(s);break;case 22:s.memoizedState===null&&Ra(s);break;case 30:Ra(s);break;default:Ra(s)}n=n.sibling}}function hs(n,s,i){for(i=i&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var c=s.alternate,f=n,g=s,N=g.flags;switch(g.tag){case 0:case 11:case 15:hs(f,g,i),Ko(4,g);break;case 1:if(hs(f,g,i),c=g,f=c.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(ee){Ie(c,c.return,ee)}if(c=g,f=c.updateQueue,f!==null){var M=c.stateNode;try{var Y=f.shared.hiddenCallbacks;if(Y!==null)for(f.shared.hiddenCallbacks=null,f=0;f<Y.length;f++)Zm(Y[f],M)}catch(ee){Ie(c,c.return,ee)}}i&&N&64&&c0(g),Qo(g,g.return);break;case 27:h0(g);case 26:case 5:hs(f,g,i),i&&c===null&&N&4&&d0(g),Qo(g,g.return);break;case 12:hs(f,g,i);break;case 31:hs(f,g,i),i&&N&4&&y0(f,g);break;case 13:hs(f,g,i),i&&N&4&&b0(f,g);break;case 22:g.memoizedState===null&&hs(f,g,i),Qo(g,g.return);break;case 30:break;default:hs(f,g,i)}s=s.sibling}}function jf(n,s){var i=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(i=n.memoizedState.cachePool.pool),n=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(n=s.memoizedState.cachePool.pool),n!==i&&(n!=null&&n.refCount++,i!=null&&zo(i))}function Sf(n,s){n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&zo(n))}function jn(n,s,i,c){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)N0(n,s,i,c),s=s.sibling}function N0(n,s,i,c){var f=s.flags;switch(s.tag){case 0:case 11:case 15:jn(n,s,i,c),f&2048&&Ko(9,s);break;case 1:jn(n,s,i,c);break;case 3:jn(n,s,i,c),f&2048&&(n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&zo(n)));break;case 12:if(f&2048){jn(n,s,i,c),n=s.stateNode;try{var g=s.memoizedProps,N=g.id,M=g.onPostCommit;typeof M=="function"&&M(N,s.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(Y){Ie(s,s.return,Y)}}else jn(n,s,i,c);break;case 31:jn(n,s,i,c);break;case 13:jn(n,s,i,c);break;case 23:break;case 22:g=s.stateNode,N=s.alternate,s.memoizedState!==null?g._visibility&2?jn(n,s,i,c):Wo(n,s):g._visibility&2?jn(n,s,i,c):(g._visibility|=2,Cr(n,s,i,c,(s.subtreeFlags&10256)!==0||!1)),f&2048&&jf(N,s);break;case 24:jn(n,s,i,c),f&2048&&Sf(s.alternate,s);break;default:jn(n,s,i,c)}}function Cr(n,s,i,c,f){for(f=f&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var g=n,N=s,M=i,Y=c,ee=N.flags;switch(N.tag){case 0:case 11:case 15:Cr(g,N,M,Y,f),Ko(8,N);break;case 23:break;case 22:var oe=N.stateNode;N.memoizedState!==null?oe._visibility&2?Cr(g,N,M,Y,f):Wo(g,N):(oe._visibility|=2,Cr(g,N,M,Y,f)),f&&ee&2048&&jf(N.alternate,N);break;case 24:Cr(g,N,M,Y,f),f&&ee&2048&&Sf(N.alternate,N);break;default:Cr(g,N,M,Y,f)}s=s.sibling}}function Wo(n,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var i=n,c=s,f=c.flags;switch(c.tag){case 22:Wo(i,c),f&2048&&jf(c.alternate,c);break;case 24:Wo(i,c),f&2048&&Sf(c.alternate,c);break;default:Wo(i,c)}s=s.sibling}}var Zo=8192;function Er(n,s,i){if(n.subtreeFlags&Zo)for(n=n.child;n!==null;)j0(n,s,i),n=n.sibling}function j0(n,s,i){switch(n.tag){case 26:Er(n,s,i),n.flags&Zo&&n.memoizedState!==null&&qN(i,Nn,n.memoizedState,n.memoizedProps);break;case 5:Er(n,s,i);break;case 3:case 4:var c=Nn;Nn=dc(n.stateNode.containerInfo),Er(n,s,i),Nn=c;break;case 22:n.memoizedState===null&&(c=n.alternate,c!==null&&c.memoizedState!==null?(c=Zo,Zo=16777216,Er(n,s,i),Zo=c):Er(n,s,i));break;default:Er(n,s,i)}}function S0(n){var s=n.alternate;if(s!==null&&(n=s.child,n!==null)){s.child=null;do s=n.sibling,n.sibling=null,n=s;while(n!==null)}}function Jo(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var i=0;i<s.length;i++){var c=s[i];bt=c,E0(c,n)}S0(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)C0(n),n=n.sibling}function C0(n){switch(n.tag){case 0:case 11:case 15:Jo(n),n.flags&2048&&qs(9,n,n.return);break;case 3:Jo(n);break;case 12:Jo(n);break;case 22:var s=n.stateNode;n.memoizedState!==null&&s._visibility&2&&(n.return===null||n.return.tag!==13)?(s._visibility&=-3,Zl(n)):Jo(n);break;default:Jo(n)}}function Zl(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var i=0;i<s.length;i++){var c=s[i];bt=c,E0(c,n)}S0(n)}for(n=n.child;n!==null;){switch(s=n,s.tag){case 0:case 11:case 15:qs(8,s,s.return),Zl(s);break;case 22:i=s.stateNode,i._visibility&2&&(i._visibility&=-3,Zl(s));break;default:Zl(s)}n=n.sibling}}function E0(n,s){for(;bt!==null;){var i=bt;switch(i.tag){case 0:case 11:case 15:qs(8,i,s);break;case 23:case 22:if(i.memoizedState!==null&&i.memoizedState.cachePool!==null){var c=i.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:zo(i.memoizedState.cache)}if(c=i.child,c!==null)c.return=i,bt=c;else e:for(i=n;bt!==null;){c=bt;var f=c.sibling,g=c.return;if(g0(c),c===i){bt=null;break e}if(f!==null){f.return=g,bt=f;break e}bt=g}}}var sN={getCacheForType:function(n){var s=Ct(ct),i=s.data.get(n);return i===void 0&&(i=n(),s.data.set(n,i)),i},cacheSignal:function(){return Ct(ct).controller.signal}},aN=typeof WeakMap=="function"?WeakMap:Map,Ue=0,Ge=null,De=null,Oe=0,qe=0,Jt=null,Is=!1,_r=!1,Cf=!1,ps=0,st=0,Vs=0,Oa=0,Ef=0,en=0,Tr=0,ei=null,Vt=null,_f=!1,Jl=0,_0=0,ec=1/0,tc=null,Fs=null,gt=0,Ys=null,Ar=null,ms=0,Tf=0,Af=null,T0=null,ti=0,kf=null;function tn(){return(Ue&2)!==0&&Oe!==0?Oe&-Oe:O.T!==null?zf():rl()}function A0(){if(en===0)if((Oe&536870912)===0||Le){var n=Za;Za<<=1,(Za&3932160)===0&&(Za=262144),en=n}else en=536870912;return n=Wt.current,n!==null&&(n.flags|=32),en}function Ft(n,s,i){(n===Ge&&(qe===2||qe===9)||n.cancelPendingCommit!==null)&&(kr(n,0),Xs(n,Oe,en,!1)),ma(n,i),((Ue&2)===0||n!==Ge)&&(n===Ge&&((Ue&2)===0&&(Oa|=i),st===4&&Xs(n,Oe,en,!1)),zn(n))}function k0(n,s,i){if((Ue&6)!==0)throw Error(r(327));var c=!i&&(s&127)===0&&(s&n.expiredLanes)===0||pa(n,s),f=c?iN(n,s):Df(n,s,!0),g=c;do{if(f===0){_r&&!c&&Xs(n,s,0,!1);break}else{if(i=n.current.alternate,g&&!rN(i)){f=Df(n,s,!1),g=!1;continue}if(f===2){if(g=s,n.errorRecoveryDisabledLanes&g)var N=0;else N=n.pendingLanes&-536870913,N=N!==0?N:N&536870912?536870912:0;if(N!==0){s=N;e:{var M=n;f=ei;var Y=M.current.memoizedState.isDehydrated;if(Y&&(kr(M,N).flags|=256),N=Df(M,N,!1),N!==2){if(Cf&&!Y){M.errorRecoveryDisabledLanes|=g,Oa|=g,f=4;break e}g=Vt,Vt=f,g!==null&&(Vt===null?Vt=g:Vt.push.apply(Vt,g))}f=N}if(g=!1,f!==2)continue}}if(f===1){kr(n,0),Xs(n,s,0,!0);break}e:{switch(c=n,g=f,g){case 0:case 1:throw Error(r(345));case 4:if((s&4194048)!==s)break;case 6:Xs(c,s,en,!Is);break e;case 2:Vt=null;break;case 3:case 5:break;default:throw Error(r(329))}if((s&62914560)===s&&(f=Jl+300-Me(),10<f)){if(Xs(c,s,en,!Is),er(c,0,!0)!==0)break e;ms=s,c.timeoutHandle=ix(M0.bind(null,c,i,Vt,tc,_f,s,en,Oa,Tr,Is,g,"Throttled",-0,0),f);break e}M0(c,i,Vt,tc,_f,s,en,Oa,Tr,Is,g,null,-0,0)}}break}while(!0);zn(n)}function M0(n,s,i,c,f,g,N,M,Y,ee,oe,le,te,re){if(n.timeoutHandle=-1,le=s.subtreeFlags,le&8192||(le&16785408)===16785408){le={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:es},j0(s,g,le);var me=(g&62914560)===g?Jl-Me():(g&4194048)===g?_0-Me():0;if(me=IN(le,me),me!==null){ms=g,n.cancelPendingCommit=me(P0.bind(null,n,s,g,i,c,f,N,M,Y,oe,le,null,te,re)),Xs(n,g,N,!ee);return}}P0(n,s,g,i,c,f,N,M,Y)}function rN(n){for(var s=n;;){var i=s.tag;if((i===0||i===11||i===15)&&s.flags&16384&&(i=s.updateQueue,i!==null&&(i=i.stores,i!==null)))for(var c=0;c<i.length;c++){var f=i[c],g=f.getSnapshot;f=f.value;try{if(!Kt(g(),f))return!1}catch{return!1}}if(i=s.child,s.subtreeFlags&16384&&i!==null)i.return=s,s=i;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Xs(n,s,i,c){s&=~Ef,s&=~Oa,n.suspendedLanes|=s,n.pingedLanes&=~s,c&&(n.warmLanes|=s),c=n.expirationTimes;for(var f=s;0<f;){var g=31-yt(f),N=1<<g;c[g]=-1,f&=~N}i!==0&&nl(n,i,s)}function nc(){return(Ue&6)===0?(ni(0),!1):!0}function Mf(){if(De!==null){if(qe===0)var n=De.return;else n=De,as=Ca=null,Yd(n),vr=null,Bo=0,n=De;for(;n!==null;)l0(n.alternate,n),n=n.return;De=null}}function kr(n,s){var i=n.timeoutHandle;i!==-1&&(n.timeoutHandle=-1,CN(i)),i=n.cancelPendingCommit,i!==null&&(n.cancelPendingCommit=null,i()),ms=0,Mf(),Ge=n,De=i=ns(n.current,null),Oe=s,qe=0,Jt=null,Is=!1,_r=pa(n,s),Cf=!1,Tr=en=Ef=Oa=Vs=st=0,Vt=ei=null,_f=!1,(s&8)!==0&&(s|=s&32);var c=n.entangledLanes;if(c!==0)for(n=n.entanglements,c&=s;0<c;){var f=31-yt(c),g=1<<f;s|=n[f],c&=~g}return ps=s,jl(),i}function D0(n,s){Te=null,O.H=Yo,s===br||s===Ml?(s=Gm(),qe=3):s===Od?(s=Gm(),qe=4):qe=s===cf?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Jt=s,De===null&&(st=1,Fl(n,cn(s,n.current)))}function R0(){var n=Wt.current;return n===null?!0:(Oe&4194048)===Oe?hn===null:(Oe&62914560)===Oe||(Oe&536870912)!==0?n===hn:!1}function O0(){var n=O.H;return O.H=Yo,n===null?Yo:n}function $0(){var n=O.A;return O.A=sN,n}function sc(){st=4,Is||(Oe&4194048)!==Oe&&Wt.current!==null||(_r=!0),(Vs&134217727)===0&&(Oa&134217727)===0||Ge===null||Xs(Ge,Oe,en,!1)}function Df(n,s,i){var c=Ue;Ue|=2;var f=O0(),g=$0();(Ge!==n||Oe!==s)&&(tc=null,kr(n,s)),s=!1;var N=st;e:do try{if(qe!==0&&De!==null){var M=De,Y=Jt;switch(qe){case 8:Mf(),N=6;break e;case 3:case 2:case 9:case 6:Wt.current===null&&(s=!0);var ee=qe;if(qe=0,Jt=null,Mr(n,M,Y,ee),i&&_r){N=0;break e}break;default:ee=qe,qe=0,Jt=null,Mr(n,M,Y,ee)}}oN(),N=st;break}catch(oe){D0(n,oe)}while(!0);return s&&n.shellSuspendCounter++,as=Ca=null,Ue=c,O.H=f,O.A=g,De===null&&(Ge=null,Oe=0,jl()),N}function oN(){for(;De!==null;)z0(De)}function iN(n,s){var i=Ue;Ue|=2;var c=O0(),f=$0();Ge!==n||Oe!==s?(tc=null,ec=Me()+500,kr(n,s)):_r=pa(n,s);e:do try{if(qe!==0&&De!==null){s=De;var g=Jt;t:switch(qe){case 1:qe=0,Jt=null,Mr(n,s,g,1);break;case 2:case 9:if(Ym(g)){qe=0,Jt=null,L0(s);break}s=function(){qe!==2&&qe!==9||Ge!==n||(qe=7),zn(n)},g.then(s,s);break e;case 3:qe=7;break e;case 4:qe=5;break e;case 7:Ym(g)?(qe=0,Jt=null,L0(s)):(qe=0,Jt=null,Mr(n,s,g,7));break;case 5:var N=null;switch(De.tag){case 26:N=De.memoizedState;case 5:case 27:var M=De;if(N?Nx(N):M.stateNode.complete){qe=0,Jt=null;var Y=M.sibling;if(Y!==null)De=Y;else{var ee=M.return;ee!==null?(De=ee,ac(ee)):De=null}break t}}qe=0,Jt=null,Mr(n,s,g,5);break;case 6:qe=0,Jt=null,Mr(n,s,g,6);break;case 8:Mf(),st=6;break e;default:throw Error(r(462))}}lN();break}catch(oe){D0(n,oe)}while(!0);return as=Ca=null,O.H=c,O.A=f,Ue=i,De!==null?0:(Ge=null,Oe=0,jl(),st)}function lN(){for(;De!==null&&!Gn();)z0(De)}function z0(n){var s=o0(n.alternate,n,ps);n.memoizedProps=n.pendingProps,s===null?ac(n):De=s}function L0(n){var s=n,i=s.alternate;switch(s.tag){case 15:case 0:s=e0(i,s,s.pendingProps,s.type,void 0,Oe);break;case 11:s=e0(i,s,s.pendingProps,s.type.render,s.ref,Oe);break;case 5:Yd(s);default:l0(i,s),s=De=$m(s,ps),s=o0(i,s,ps)}n.memoizedProps=n.pendingProps,s===null?ac(n):De=s}function Mr(n,s,i,c){as=Ca=null,Yd(s),vr=null,Bo=0;var f=s.return;try{if(Q2(n,f,s,i,Oe)){st=1,Fl(n,cn(i,n.current)),De=null;return}}catch(g){if(f!==null)throw De=f,g;st=1,Fl(n,cn(i,n.current)),De=null;return}s.flags&32768?(Le||c===1?n=!0:_r||(Oe&536870912)!==0?n=!1:(Is=n=!0,(c===2||c===9||c===3||c===6)&&(c=Wt.current,c!==null&&c.tag===13&&(c.flags|=16384))),B0(s,n)):ac(s)}function ac(n){var s=n;do{if((s.flags&32768)!==0){B0(s,Is);return}n=s.return;var i=J2(s.alternate,s,ps);if(i!==null){De=i;return}if(s=s.sibling,s!==null){De=s;return}De=s=n}while(s!==null);st===0&&(st=5)}function B0(n,s){do{var i=eN(n.alternate,n);if(i!==null){i.flags&=32767,De=i;return}if(i=n.return,i!==null&&(i.flags|=32768,i.subtreeFlags=0,i.deletions=null),!s&&(n=n.sibling,n!==null)){De=n;return}De=n=i}while(n!==null);st=6,De=null}function P0(n,s,i,c,f,g,N,M,Y){n.cancelPendingCommit=null;do rc();while(gt!==0);if((Ue&6)!==0)throw Error(r(327));if(s!==null){if(s===n.current)throw Error(r(177));if(g=s.lanes|s.childLanes,g|=bd,Ku(n,i,g,N,M,Y),n===Ge&&(De=Ge=null,Oe=0),Ar=s,Ys=n,ms=i,Tf=g,Af=f,T0=c,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,fN(Mn,function(){return V0(),null})):(n.callbackNode=null,n.callbackPriority=0),c=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||c){c=O.T,O.T=null,f=U.p,U.p=2,N=Ue,Ue|=4;try{tN(n,s,i)}finally{Ue=N,U.p=f,O.T=c}}gt=1,H0(),U0(),q0()}}function H0(){if(gt===1){gt=0;var n=Ys,s=Ar,i=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||i){i=O.T,O.T=null;var c=U.p;U.p=2;var f=Ue;Ue|=4;try{v0(s,n);var g=Vf,N=Em(n.containerInfo),M=g.focusedElem,Y=g.selectionRange;if(N!==M&&M&&M.ownerDocument&&Cm(M.ownerDocument.documentElement,M)){if(Y!==null&&pd(M)){var ee=Y.start,oe=Y.end;if(oe===void 0&&(oe=ee),"selectionStart"in M)M.selectionStart=ee,M.selectionEnd=Math.min(oe,M.value.length);else{var le=M.ownerDocument||document,te=le&&le.defaultView||window;if(te.getSelection){var re=te.getSelection(),me=M.textContent.length,Ne=Math.min(Y.start,me),Xe=Y.end===void 0?Ne:Math.min(Y.end,me);!re.extend&&Ne>Xe&&(N=Xe,Xe=Ne,Ne=N);var Q=Sm(M,Ne),X=Sm(M,Xe);if(Q&&X&&(re.rangeCount!==1||re.anchorNode!==Q.node||re.anchorOffset!==Q.offset||re.focusNode!==X.node||re.focusOffset!==X.offset)){var J=le.createRange();J.setStart(Q.node,Q.offset),re.removeAllRanges(),Ne>Xe?(re.addRange(J),re.extend(X.node,X.offset)):(J.setEnd(X.node,X.offset),re.addRange(J))}}}}for(le=[],re=M;re=re.parentNode;)re.nodeType===1&&le.push({element:re,left:re.scrollLeft,top:re.scrollTop});for(typeof M.focus=="function"&&M.focus(),M=0;M<le.length;M++){var ie=le[M];ie.element.scrollLeft=ie.left,ie.element.scrollTop=ie.top}}xc=!!If,Vf=If=null}finally{Ue=f,U.p=c,O.T=i}}n.current=s,gt=2}}function U0(){if(gt===2){gt=0;var n=Ys,s=Ar,i=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||i){i=O.T,O.T=null;var c=U.p;U.p=2;var f=Ue;Ue|=4;try{m0(n,s.alternate,s)}finally{Ue=f,U.p=c,O.T=i}}gt=3}}function q0(){if(gt===4||gt===3){gt=0,$t();var n=Ys,s=Ar,i=ms,c=T0;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?gt=5:(gt=0,Ar=Ys=null,I0(n,n.pendingLanes));var f=n.pendingLanes;if(f===0&&(Fs=null),wo(i),s=s.stateNode,jt&&typeof jt.onCommitFiberRoot=="function")try{jt.onCommitFiberRoot(bn,s,void 0,(s.current.flags&128)===128)}catch{}if(c!==null){s=O.T,f=U.p,U.p=2,O.T=null;try{for(var g=n.onRecoverableError,N=0;N<c.length;N++){var M=c[N];g(M.value,{componentStack:M.stack})}}finally{O.T=s,U.p=f}}(ms&3)!==0&&rc(),zn(n),f=n.pendingLanes,(i&261930)!==0&&(f&42)!==0?n===kf?ti++:(ti=0,kf=n):ti=0,ni(0)}}function I0(n,s){(n.pooledCacheLanes&=s)===0&&(s=n.pooledCache,s!=null&&(n.pooledCache=null,zo(s)))}function rc(){return H0(),U0(),q0(),V0()}function V0(){if(gt!==5)return!1;var n=Ys,s=Tf;Tf=0;var i=wo(ms),c=O.T,f=U.p;try{U.p=32>i?32:i,O.T=null,i=Af,Af=null;var g=Ys,N=ms;if(gt=0,Ar=Ys=null,ms=0,(Ue&6)!==0)throw Error(r(331));var M=Ue;if(Ue|=4,C0(g.current),N0(g,g.current,N,i),Ue=M,ni(0,!1),jt&&typeof jt.onPostCommitFiberRoot=="function")try{jt.onPostCommitFiberRoot(bn,g)}catch{}return!0}finally{U.p=f,O.T=c,I0(n,s)}}function F0(n,s,i){s=cn(i,s),s=lf(n.stateNode,s,2),n=Ps(n,s,2),n!==null&&(ma(n,2),zn(n))}function Ie(n,s,i){if(n.tag===3)F0(n,n,i);else for(;s!==null;){if(s.tag===3){F0(s,n,i);break}else if(s.tag===1){var c=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Fs===null||!Fs.has(c))){n=cn(i,n),i=Yg(2),c=Ps(s,i,2),c!==null&&(Xg(i,c,s,n),ma(c,2),zn(c));break}}s=s.return}}function Rf(n,s,i){var c=n.pingCache;if(c===null){c=n.pingCache=new aN;var f=new Set;c.set(s,f)}else f=c.get(s),f===void 0&&(f=new Set,c.set(s,f));f.has(i)||(Cf=!0,f.add(i),n=cN.bind(null,n,s,i),s.then(n,n))}function cN(n,s,i){var c=n.pingCache;c!==null&&c.delete(s),n.pingedLanes|=n.suspendedLanes&i,n.warmLanes&=~i,Ge===n&&(Oe&i)===i&&(st===4||st===3&&(Oe&62914560)===Oe&&300>Me()-Jl?(Ue&2)===0&&kr(n,0):Ef|=i,Tr===Oe&&(Tr=0)),zn(n)}function Y0(n,s){s===0&&(s=tl()),n=Na(n,s),n!==null&&(ma(n,s),zn(n))}function uN(n){var s=n.memoizedState,i=0;s!==null&&(i=s.retryLane),Y0(n,i)}function dN(n,s){var i=0;switch(n.tag){case 31:case 13:var c=n.stateNode,f=n.memoizedState;f!==null&&(i=f.retryLane);break;case 19:c=n.stateNode;break;case 22:c=n.stateNode._retryCache;break;default:throw Error(r(314))}c!==null&&c.delete(s),Y0(n,i)}function fN(n,s){return Nt(n,s)}var oc=null,Dr=null,Of=!1,ic=!1,$f=!1,Gs=0;function zn(n){n!==Dr&&n.next===null&&(Dr===null?oc=Dr=n:Dr=Dr.next=n),ic=!0,Of||(Of=!0,pN())}function ni(n,s){if(!$f&&ic){$f=!0;do for(var i=!1,c=oc;c!==null;){if(n!==0){var f=c.pendingLanes;if(f===0)var g=0;else{var N=c.suspendedLanes,M=c.pingedLanes;g=(1<<31-yt(42|n)+1)-1,g&=f&~(N&~M),g=g&201326741?g&201326741|1:g?g|2:0}g!==0&&(i=!0,Q0(c,g))}else g=Oe,g=er(c,c===Ge?g:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(g&3)===0||pa(c,g)||(i=!0,Q0(c,g));c=c.next}while(i);$f=!1}}function hN(){X0()}function X0(){ic=Of=!1;var n=0;Gs!==0&&SN()&&(n=Gs);for(var s=Me(),i=null,c=oc;c!==null;){var f=c.next,g=G0(c,s);g===0?(c.next=null,i===null?oc=f:i.next=f,f===null&&(Dr=i)):(i=c,(n!==0||(g&3)!==0)&&(ic=!0)),c=f}gt!==0&&gt!==5||ni(n),Gs!==0&&(Gs=0)}function G0(n,s){for(var i=n.suspendedLanes,c=n.pingedLanes,f=n.expirationTimes,g=n.pendingLanes&-62914561;0<g;){var N=31-yt(g),M=1<<N,Y=f[N];Y===-1?((M&i)===0||(M&c)!==0)&&(f[N]=Gu(M,s)):Y<=s&&(n.expiredLanes|=M),g&=~M}if(s=Ge,i=Oe,i=er(n,n===s?i:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),c=n.callbackNode,i===0||n===s&&(qe===2||qe===9)||n.cancelPendingCommit!==null)return c!==null&&c!==null&&Ot(c),n.callbackNode=null,n.callbackPriority=0;if((i&3)===0||pa(n,i)){if(s=i&-i,s===n.callbackPriority)return s;switch(c!==null&&Ot(c),wo(i)){case 2:case 8:i=kn;break;case 32:i=Mn;break;case 268435456:i=Kn;break;default:i=Mn}return c=K0.bind(null,n),i=Nt(i,c),n.callbackPriority=s,n.callbackNode=i,s}return c!==null&&c!==null&&Ot(c),n.callbackPriority=2,n.callbackNode=null,2}function K0(n,s){if(gt!==0&&gt!==5)return n.callbackNode=null,n.callbackPriority=0,null;var i=n.callbackNode;if(rc()&&n.callbackNode!==i)return null;var c=Oe;return c=er(n,n===Ge?c:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),c===0?null:(k0(n,c,s),G0(n,Me()),n.callbackNode!=null&&n.callbackNode===i?K0.bind(null,n):null)}function Q0(n,s){if(rc())return null;k0(n,s,!0)}function pN(){EN(function(){(Ue&6)!==0?Nt(Tt,hN):X0()})}function zf(){if(Gs===0){var n=xr;n===0&&(n=Wa,Wa<<=1,(Wa&261888)===0&&(Wa=256)),Gs=n}return Gs}function W0(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:ml(""+n)}function Z0(n,s){var i=s.ownerDocument.createElement("input");return i.name=s.name,i.value=s.value,n.id&&i.setAttribute("form",n.id),s.parentNode.insertBefore(i,s),n=new FormData(n),i.parentNode.removeChild(i),n}function mN(n,s,i,c,f){if(s==="submit"&&i&&i.stateNode===f){var g=W0((f[At]||null).action),N=c.submitter;N&&(s=(s=N[At]||null)?W0(s.formAction):N.getAttribute("formAction"),s!==null&&(g=s,N=null));var M=new bl("action","action",null,c,f);n.push({event:M,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(Gs!==0){var Y=N?Z0(f,N):new FormData(f);tf(i,{pending:!0,data:Y,method:f.method,action:g},null,Y)}}else typeof g=="function"&&(M.preventDefault(),Y=N?Z0(f,N):new FormData(f),tf(i,{pending:!0,data:Y,method:f.method,action:g},g,Y))},currentTarget:f}]})}}for(var Lf=0;Lf<yd.length;Lf++){var Bf=yd[Lf],gN=Bf.toLowerCase(),xN=Bf[0].toUpperCase()+Bf.slice(1);wn(gN,"on"+xN)}wn(Am,"onAnimationEnd"),wn(km,"onAnimationIteration"),wn(Mm,"onAnimationStart"),wn("dblclick","onDoubleClick"),wn("focusin","onFocus"),wn("focusout","onBlur"),wn(R2,"onTransitionRun"),wn(O2,"onTransitionStart"),wn($2,"onTransitionCancel"),wn(Dm,"onTransitionEnd"),Ms("onMouseEnter",["mouseout","mouseover"]),Ms("onMouseLeave",["mouseout","mouseover"]),Ms("onPointerEnter",["pointerout","pointerover"]),Ms("onPointerLeave",["pointerout","pointerover"]),Zn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Zn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Zn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Zn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Zn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Zn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var si="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),yN=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(si));function J0(n,s){s=(s&4)!==0;for(var i=0;i<n.length;i++){var c=n[i],f=c.event;c=c.listeners;e:{var g=void 0;if(s)for(var N=c.length-1;0<=N;N--){var M=c[N],Y=M.instance,ee=M.currentTarget;if(M=M.listener,Y!==g&&f.isPropagationStopped())break e;g=M,f.currentTarget=ee;try{g(f)}catch(oe){Nl(oe)}f.currentTarget=null,g=Y}else for(N=0;N<c.length;N++){if(M=c[N],Y=M.instance,ee=M.currentTarget,M=M.listener,Y!==g&&f.isPropagationStopped())break e;g=M,f.currentTarget=ee;try{g(f)}catch(oe){Nl(oe)}f.currentTarget=null,g=Y}}}}function Re(n,s){var i=s[tr];i===void 0&&(i=s[tr]=new Set);var c=n+"__bubble";i.has(c)||(ex(s,n,2,!1),i.add(c))}function Pf(n,s,i){var c=0;s&&(c|=4),ex(i,n,c,s)}var lc="_reactListening"+Math.random().toString(36).slice(2);function Hf(n){if(!n[lc]){n[lc]=!0,cl.forEach(function(i){i!=="selectionchange"&&(yN.has(i)||Pf(i,!1,n),Pf(i,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[lc]||(s[lc]=!0,Pf("selectionchange",!1,s))}}function ex(n,s,i,c){switch(Ax(s)){case 2:var f=YN;break;case 8:f=XN;break;default:f=th}i=f.bind(null,s,i,n),f=void 0,!rd||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(f=!0),c?f!==void 0?n.addEventListener(s,i,{capture:!0,passive:f}):n.addEventListener(s,i,!0):f!==void 0?n.addEventListener(s,i,{passive:f}):n.addEventListener(s,i,!1)}function Uf(n,s,i,c,f){var g=c;if((s&1)===0&&(s&2)===0&&c!==null)e:for(;;){if(c===null)return;var N=c.tag;if(N===3||N===4){var M=c.stateNode.containerInfo;if(M===f)break;if(N===4)for(N=c.return;N!==null;){var Y=N.tag;if((Y===3||Y===4)&&N.stateNode.containerInfo===f)return;N=N.return}for(;M!==null;){if(N=_s(M),N===null)return;if(Y=N.tag,Y===5||Y===6||Y===26||Y===27){c=g=N;continue e}M=M.parentNode}}c=c.return}rm(function(){var ee=g,oe=sd(i),le=[];e:{var te=Rm.get(n);if(te!==void 0){var re=bl,me=n;switch(n){case"keypress":if(xl(i)===0)break e;case"keydown":case"keyup":re=d2;break;case"focusin":me="focus",re=cd;break;case"focusout":me="blur",re=cd;break;case"beforeblur":case"afterblur":re=cd;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":re=lm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":re=Jw;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":re=p2;break;case Am:case km:case Mm:re=n2;break;case Dm:re=g2;break;case"scroll":case"scrollend":re=Ww;break;case"wheel":re=y2;break;case"copy":case"cut":case"paste":re=a2;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":re=um;break;case"toggle":case"beforetoggle":re=v2}var Ne=(s&4)!==0,Xe=!Ne&&(n==="scroll"||n==="scrollend"),Q=Ne?te!==null?te+"Capture":null:te;Ne=[];for(var X=ee,J;X!==null;){var ie=X;if(J=ie.stateNode,ie=ie.tag,ie!==5&&ie!==26&&ie!==27||J===null||Q===null||(ie=Co(X,Q),ie!=null&&Ne.push(ai(X,ie,J))),Xe)break;X=X.return}0<Ne.length&&(te=new re(te,me,null,i,oe),le.push({event:te,listeners:Ne}))}}if((s&7)===0){e:{if(te=n==="mouseover"||n==="pointerover",re=n==="mouseout"||n==="pointerout",te&&i!==nd&&(me=i.relatedTarget||i.fromElement)&&(_s(me)||me[Wn]))break e;if((re||te)&&(te=oe.window===oe?oe:(te=oe.ownerDocument)?te.defaultView||te.parentWindow:window,re?(me=i.relatedTarget||i.toElement,re=ee,me=me?_s(me):null,me!==null&&(Xe=u(me),Ne=me.tag,me!==Xe||Ne!==5&&Ne!==27&&Ne!==6)&&(me=null)):(re=null,me=ee),re!==me)){if(Ne=lm,ie="onMouseLeave",Q="onMouseEnter",X="mouse",(n==="pointerout"||n==="pointerover")&&(Ne=um,ie="onPointerLeave",Q="onPointerEnter",X="pointer"),Xe=re==null?te:As(re),J=me==null?te:As(me),te=new Ne(ie,X+"leave",re,i,oe),te.target=Xe,te.relatedTarget=J,ie=null,_s(oe)===ee&&(Ne=new Ne(Q,X+"enter",me,i,oe),Ne.target=J,Ne.relatedTarget=Xe,ie=Ne),Xe=ie,re&&me)t:{for(Ne=bN,Q=re,X=me,J=0,ie=Q;ie;ie=Ne(ie))J++;ie=0;for(var ve=X;ve;ve=Ne(ve))ie++;for(;0<J-ie;)Q=Ne(Q),J--;for(;0<ie-J;)X=Ne(X),ie--;for(;J--;){if(Q===X||X!==null&&Q===X.alternate){Ne=Q;break t}Q=Ne(Q),X=Ne(X)}Ne=null}else Ne=null;re!==null&&tx(le,te,re,Ne,!1),me!==null&&Xe!==null&&tx(le,Xe,me,Ne,!0)}}e:{if(te=ee?As(ee):window,re=te.nodeName&&te.nodeName.toLowerCase(),re==="select"||re==="input"&&te.type==="file")var Pe=ym;else if(gm(te))if(bm)Pe=k2;else{Pe=T2;var ge=_2}else re=te.nodeName,!re||re.toLowerCase()!=="input"||te.type!=="checkbox"&&te.type!=="radio"?ee&&td(ee.elementType)&&(Pe=ym):Pe=A2;if(Pe&&(Pe=Pe(n,ee))){xm(le,Pe,i,oe);break e}ge&&ge(n,te,ee),n==="focusout"&&ee&&te.type==="number"&&ee.memoizedProps.value!=null&&So(te,"number",te.value)}switch(ge=ee?As(ee):window,n){case"focusin":(gm(ge)||ge.contentEditable==="true")&&(cr=ge,md=ee,Ro=null);break;case"focusout":Ro=md=cr=null;break;case"mousedown":gd=!0;break;case"contextmenu":case"mouseup":case"dragend":gd=!1,_m(le,i,oe);break;case"selectionchange":if(D2)break;case"keydown":case"keyup":_m(le,i,oe)}var Ae;if(dd)e:{switch(n){case"compositionstart":var $e="onCompositionStart";break e;case"compositionend":$e="onCompositionEnd";break e;case"compositionupdate":$e="onCompositionUpdate";break e}$e=void 0}else lr?pm(n,i)&&($e="onCompositionEnd"):n==="keydown"&&i.keyCode===229&&($e="onCompositionStart");$e&&(dm&&i.locale!=="ko"&&(lr||$e!=="onCompositionStart"?$e==="onCompositionEnd"&&lr&&(Ae=om()):(Ds=oe,od="value"in Ds?Ds.value:Ds.textContent,lr=!0)),ge=cc(ee,$e),0<ge.length&&($e=new cm($e,n,null,i,oe),le.push({event:$e,listeners:ge}),Ae?$e.data=Ae:(Ae=mm(i),Ae!==null&&($e.data=Ae)))),(Ae=N2?j2(n,i):S2(n,i))&&($e=cc(ee,"onBeforeInput"),0<$e.length&&(ge=new cm("onBeforeInput","beforeinput",null,i,oe),le.push({event:ge,listeners:$e}),ge.data=Ae)),mN(le,n,ee,i,oe)}J0(le,s)})}function ai(n,s,i){return{instance:n,listener:s,currentTarget:i}}function cc(n,s){for(var i=s+"Capture",c=[];n!==null;){var f=n,g=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||g===null||(f=Co(n,i),f!=null&&c.unshift(ai(n,f,g)),f=Co(n,s),f!=null&&c.push(ai(n,f,g))),n.tag===3)return c;n=n.return}return[]}function bN(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function tx(n,s,i,c,f){for(var g=s._reactName,N=[];i!==null&&i!==c;){var M=i,Y=M.alternate,ee=M.stateNode;if(M=M.tag,Y!==null&&Y===c)break;M!==5&&M!==26&&M!==27||ee===null||(Y=ee,f?(ee=Co(i,g),ee!=null&&N.unshift(ai(i,ee,Y))):f||(ee=Co(i,g),ee!=null&&N.push(ai(i,ee,Y)))),i=i.return}N.length!==0&&n.push({event:s,listeners:N})}var vN=/\r\n?/g,wN=/\u0000|\uFFFD/g;function nx(n){return(typeof n=="string"?n:""+n).replace(vN,`
`).replace(wN,"")}function sx(n,s){return s=nx(s),nx(n)===s}function Ye(n,s,i,c,f,g){switch(i){case"children":typeof c=="string"?s==="body"||s==="textarea"&&c===""||rr(n,c):(typeof c=="number"||typeof c=="bigint")&&s!=="body"&&rr(n,""+c);break;case"className":sr(n,"class",c);break;case"tabIndex":sr(n,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":sr(n,i,c);break;case"style":sm(n,c,g);break;case"data":if(s!=="object"){sr(n,"data",c);break}case"src":case"href":if(c===""&&(s!=="a"||i!=="href")){n.removeAttribute(i);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){n.removeAttribute(i);break}c=ml(""+c),n.setAttribute(i,c);break;case"action":case"formAction":if(typeof c=="function"){n.setAttribute(i,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(i==="formAction"?(s!=="input"&&Ye(n,s,"name",f.name,f,null),Ye(n,s,"formEncType",f.formEncType,f,null),Ye(n,s,"formMethod",f.formMethod,f,null),Ye(n,s,"formTarget",f.formTarget,f,null)):(Ye(n,s,"encType",f.encType,f,null),Ye(n,s,"method",f.method,f,null),Ye(n,s,"target",f.target,f,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){n.removeAttribute(i);break}c=ml(""+c),n.setAttribute(i,c);break;case"onClick":c!=null&&(n.onclick=es);break;case"onScroll":c!=null&&Re("scroll",n);break;case"onScrollEnd":c!=null&&Re("scrollend",n);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(r(61));if(i=c.__html,i!=null){if(f.children!=null)throw Error(r(60));n.innerHTML=i}}break;case"multiple":n.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":n.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){n.removeAttribute("xlink:href");break}i=ml(""+c),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",i);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(i,""+c):n.removeAttribute(i);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(i,""):n.removeAttribute(i);break;case"capture":case"download":c===!0?n.setAttribute(i,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(i,c):n.removeAttribute(i);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?n.setAttribute(i,c):n.removeAttribute(i);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?n.removeAttribute(i):n.setAttribute(i,c);break;case"popover":Re("beforetoggle",n),Re("toggle",n),nr(n,"popover",c);break;case"xlinkActuate":vn(n,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":vn(n,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":vn(n,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":vn(n,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":vn(n,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":vn(n,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":vn(n,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":vn(n,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":vn(n,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":nr(n,"is",c);break;case"innerText":case"textContent":break;default:(!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(i=Kw.get(i)||i,nr(n,i,c))}}function qf(n,s,i,c,f,g){switch(i){case"style":sm(n,c,g);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(r(61));if(i=c.__html,i!=null){if(f.children!=null)throw Error(r(60));n.innerHTML=i}}break;case"children":typeof c=="string"?rr(n,c):(typeof c=="number"||typeof c=="bigint")&&rr(n,""+c);break;case"onScroll":c!=null&&Re("scroll",n);break;case"onScrollEnd":c!=null&&Re("scrollend",n);break;case"onClick":c!=null&&(n.onclick=es);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ul.hasOwnProperty(i))e:{if(i[0]==="o"&&i[1]==="n"&&(f=i.endsWith("Capture"),s=i.slice(2,f?i.length-7:void 0),g=n[At]||null,g=g!=null?g[i]:null,typeof g=="function"&&n.removeEventListener(s,g,f),typeof c=="function")){typeof g!="function"&&g!==null&&(i in n?n[i]=null:n.hasAttribute(i)&&n.removeAttribute(i)),n.addEventListener(s,c,f);break e}i in n?n[i]=c:c===!0?n.setAttribute(i,""):nr(n,i,c)}}}function _t(n,s,i){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Re("error",n),Re("load",n);var c=!1,f=!1,g;for(g in i)if(i.hasOwnProperty(g)){var N=i[g];if(N!=null)switch(g){case"src":c=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:Ye(n,s,g,N,i,null)}}f&&Ye(n,s,"srcSet",i.srcSet,i,null),c&&Ye(n,s,"src",i.src,i,null);return;case"input":Re("invalid",n);var M=g=N=f=null,Y=null,ee=null;for(c in i)if(i.hasOwnProperty(c)){var oe=i[c];if(oe!=null)switch(c){case"name":f=oe;break;case"type":N=oe;break;case"checked":Y=oe;break;case"defaultChecked":ee=oe;break;case"value":g=oe;break;case"defaultValue":M=oe;break;case"children":case"dangerouslySetInnerHTML":if(oe!=null)throw Error(r(137,s));break;default:Ye(n,s,c,oe,i,null)}}pl(n,g,M,Y,ee,N,f,!1);return;case"select":Re("invalid",n),c=N=g=null;for(f in i)if(i.hasOwnProperty(f)&&(M=i[f],M!=null))switch(f){case"value":g=M;break;case"defaultValue":N=M;break;case"multiple":c=M;default:Ye(n,s,f,M,i,null)}s=g,i=N,n.multiple=!!c,s!=null?Jn(n,!!c,s,!1):i!=null&&Jn(n,!!c,i,!0);return;case"textarea":Re("invalid",n),g=f=c=null;for(N in i)if(i.hasOwnProperty(N)&&(M=i[N],M!=null))switch(N){case"value":c=M;break;case"defaultValue":f=M;break;case"children":g=M;break;case"dangerouslySetInnerHTML":if(M!=null)throw Error(r(91));break;default:Ye(n,s,N,M,i,null)}tm(n,c,f,g);return;case"option":for(Y in i)i.hasOwnProperty(Y)&&(c=i[Y],c!=null)&&(Y==="selected"?n.selected=c&&typeof c!="function"&&typeof c!="symbol":Ye(n,s,Y,c,i,null));return;case"dialog":Re("beforetoggle",n),Re("toggle",n),Re("cancel",n),Re("close",n);break;case"iframe":case"object":Re("load",n);break;case"video":case"audio":for(c=0;c<si.length;c++)Re(si[c],n);break;case"image":Re("error",n),Re("load",n);break;case"details":Re("toggle",n);break;case"embed":case"source":case"link":Re("error",n),Re("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ee in i)if(i.hasOwnProperty(ee)&&(c=i[ee],c!=null))switch(ee){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:Ye(n,s,ee,c,i,null)}return;default:if(td(s)){for(oe in i)i.hasOwnProperty(oe)&&(c=i[oe],c!==void 0&&qf(n,s,oe,c,i,void 0));return}}for(M in i)i.hasOwnProperty(M)&&(c=i[M],c!=null&&Ye(n,s,M,c,i,null))}function NN(n,s,i,c){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,g=null,N=null,M=null,Y=null,ee=null,oe=null;for(re in i){var le=i[re];if(i.hasOwnProperty(re)&&le!=null)switch(re){case"checked":break;case"value":break;case"defaultValue":Y=le;default:c.hasOwnProperty(re)||Ye(n,s,re,null,c,le)}}for(var te in c){var re=c[te];if(le=i[te],c.hasOwnProperty(te)&&(re!=null||le!=null))switch(te){case"type":g=re;break;case"name":f=re;break;case"checked":ee=re;break;case"defaultChecked":oe=re;break;case"value":N=re;break;case"defaultValue":M=re;break;case"children":case"dangerouslySetInnerHTML":if(re!=null)throw Error(r(137,s));break;default:re!==le&&Ye(n,s,te,re,c,le)}}ya(n,N,M,Y,ee,oe,g,f);return;case"select":re=N=M=te=null;for(g in i)if(Y=i[g],i.hasOwnProperty(g)&&Y!=null)switch(g){case"value":break;case"multiple":re=Y;default:c.hasOwnProperty(g)||Ye(n,s,g,null,c,Y)}for(f in c)if(g=c[f],Y=i[f],c.hasOwnProperty(f)&&(g!=null||Y!=null))switch(f){case"value":te=g;break;case"defaultValue":M=g;break;case"multiple":N=g;default:g!==Y&&Ye(n,s,f,g,c,Y)}s=M,i=N,c=re,te!=null?Jn(n,!!i,te,!1):!!c!=!!i&&(s!=null?Jn(n,!!i,s,!0):Jn(n,!!i,i?[]:"",!1));return;case"textarea":re=te=null;for(M in i)if(f=i[M],i.hasOwnProperty(M)&&f!=null&&!c.hasOwnProperty(M))switch(M){case"value":break;case"children":break;default:Ye(n,s,M,null,c,f)}for(N in c)if(f=c[N],g=i[N],c.hasOwnProperty(N)&&(f!=null||g!=null))switch(N){case"value":te=f;break;case"defaultValue":re=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(r(91));break;default:f!==g&&Ye(n,s,N,f,c,g)}em(n,te,re);return;case"option":for(var me in i)te=i[me],i.hasOwnProperty(me)&&te!=null&&!c.hasOwnProperty(me)&&(me==="selected"?n.selected=!1:Ye(n,s,me,null,c,te));for(Y in c)te=c[Y],re=i[Y],c.hasOwnProperty(Y)&&te!==re&&(te!=null||re!=null)&&(Y==="selected"?n.selected=te&&typeof te!="function"&&typeof te!="symbol":Ye(n,s,Y,te,c,re));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ne in i)te=i[Ne],i.hasOwnProperty(Ne)&&te!=null&&!c.hasOwnProperty(Ne)&&Ye(n,s,Ne,null,c,te);for(ee in c)if(te=c[ee],re=i[ee],c.hasOwnProperty(ee)&&te!==re&&(te!=null||re!=null))switch(ee){case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(r(137,s));break;default:Ye(n,s,ee,te,c,re)}return;default:if(td(s)){for(var Xe in i)te=i[Xe],i.hasOwnProperty(Xe)&&te!==void 0&&!c.hasOwnProperty(Xe)&&qf(n,s,Xe,void 0,c,te);for(oe in c)te=c[oe],re=i[oe],!c.hasOwnProperty(oe)||te===re||te===void 0&&re===void 0||qf(n,s,oe,te,c,re);return}}for(var Q in i)te=i[Q],i.hasOwnProperty(Q)&&te!=null&&!c.hasOwnProperty(Q)&&Ye(n,s,Q,null,c,te);for(le in c)te=c[le],re=i[le],!c.hasOwnProperty(le)||te===re||te==null&&re==null||Ye(n,s,le,te,c,re)}function ax(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function jN(){if(typeof performance.getEntriesByType=="function"){for(var n=0,s=0,i=performance.getEntriesByType("resource"),c=0;c<i.length;c++){var f=i[c],g=f.transferSize,N=f.initiatorType,M=f.duration;if(g&&M&&ax(N)){for(N=0,M=f.responseEnd,c+=1;c<i.length;c++){var Y=i[c],ee=Y.startTime;if(ee>M)break;var oe=Y.transferSize,le=Y.initiatorType;oe&&ax(le)&&(Y=Y.responseEnd,N+=oe*(Y<M?1:(M-ee)/(Y-ee)))}if(--c,s+=8*(g+N)/(f.duration/1e3),n++,10<n)break}}if(0<n)return s/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var If=null,Vf=null;function uc(n){return n.nodeType===9?n:n.ownerDocument}function rx(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ox(n,s){if(n===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&s==="foreignObject"?0:n}function Ff(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Yf=null;function SN(){var n=window.event;return n&&n.type==="popstate"?n===Yf?!1:(Yf=n,!0):(Yf=null,!1)}var ix=typeof setTimeout=="function"?setTimeout:void 0,CN=typeof clearTimeout=="function"?clearTimeout:void 0,lx=typeof Promise=="function"?Promise:void 0,EN=typeof queueMicrotask=="function"?queueMicrotask:typeof lx<"u"?function(n){return lx.resolve(null).then(n).catch(_N)}:ix;function _N(n){setTimeout(function(){throw n})}function Ks(n){return n==="head"}function cx(n,s){var i=s,c=0;do{var f=i.nextSibling;if(n.removeChild(i),f&&f.nodeType===8)if(i=f.data,i==="/$"||i==="/&"){if(c===0){n.removeChild(f),zr(s);return}c--}else if(i==="$"||i==="$?"||i==="$~"||i==="$!"||i==="&")c++;else if(i==="html")ri(n.ownerDocument.documentElement);else if(i==="head"){i=n.ownerDocument.head,ri(i);for(var g=i.firstChild;g;){var N=g.nextSibling,M=g.nodeName;g[ga]||M==="SCRIPT"||M==="STYLE"||M==="LINK"&&g.rel.toLowerCase()==="stylesheet"||i.removeChild(g),g=N}}else i==="body"&&ri(n.ownerDocument.body);i=f}while(i);zr(s)}function ux(n,s){var i=n;n=0;do{var c=i.nextSibling;if(i.nodeType===1?s?(i._stashedDisplay=i.style.display,i.style.display="none"):(i.style.display=i._stashedDisplay||"",i.getAttribute("style")===""&&i.removeAttribute("style")):i.nodeType===3&&(s?(i._stashedText=i.nodeValue,i.nodeValue=""):i.nodeValue=i._stashedText||""),c&&c.nodeType===8)if(i=c.data,i==="/$"){if(n===0)break;n--}else i!=="$"&&i!=="$?"&&i!=="$~"&&i!=="$!"||n++;i=c}while(i)}function Xf(n){var s=n.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var i=s;switch(s=s.nextSibling,i.nodeName){case"HTML":case"HEAD":case"BODY":Xf(i),No(i);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(i.rel.toLowerCase()==="stylesheet")continue}n.removeChild(i)}}function TN(n,s,i,c){for(;n.nodeType===1;){var f=i;if(n.nodeName.toLowerCase()!==s.toLowerCase()){if(!c&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(c){if(!n[ga])switch(s){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(g=n.getAttribute("rel"),g==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(g!==f.rel||n.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||n.getAttribute("title")!==(f.title==null?null:f.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(g=n.getAttribute("src"),(g!==(f.src==null?null:f.src)||n.getAttribute("type")!==(f.type==null?null:f.type)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&g&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(s==="input"&&n.type==="hidden"){var g=f.name==null?null:""+f.name;if(f.type==="hidden"&&n.getAttribute("name")===g)return n}else return n;if(n=pn(n.nextSibling),n===null)break}return null}function AN(n,s,i){if(s==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!i||(n=pn(n.nextSibling),n===null))return null;return n}function dx(n,s){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!s||(n=pn(n.nextSibling),n===null))return null;return n}function Gf(n){return n.data==="$?"||n.data==="$~"}function Kf(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function kN(n,s){var i=n.ownerDocument;if(n.data==="$~")n._reactRetry=s;else if(n.data!=="$?"||i.readyState!=="loading")s();else{var c=function(){s(),i.removeEventListener("DOMContentLoaded",c)};i.addEventListener("DOMContentLoaded",c),n._reactRetry=c}}function pn(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return n}var Qf=null;function fx(n){n=n.nextSibling;for(var s=0;n;){if(n.nodeType===8){var i=n.data;if(i==="/$"||i==="/&"){if(s===0)return pn(n.nextSibling);s--}else i!=="$"&&i!=="$!"&&i!=="$?"&&i!=="$~"&&i!=="&"||s++}n=n.nextSibling}return null}function hx(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var i=n.data;if(i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"){if(s===0)return n;s--}else i!=="/$"&&i!=="/&"||s++}n=n.previousSibling}return null}function px(n,s,i){switch(s=uc(i),n){case"html":if(n=s.documentElement,!n)throw Error(r(452));return n;case"head":if(n=s.head,!n)throw Error(r(453));return n;case"body":if(n=s.body,!n)throw Error(r(454));return n;default:throw Error(r(451))}}function ri(n){for(var s=n.attributes;s.length;)n.removeAttributeNode(s[0]);No(n)}var mn=new Map,mx=new Set;function dc(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var gs=U.d;U.d={f:MN,r:DN,D:RN,C:ON,L:$N,m:zN,X:BN,S:LN,M:PN};function MN(){var n=gs.f(),s=nc();return n||s}function DN(n){var s=Ts(n);s!==null&&s.tag===5&&s.type==="form"?Dg(s):gs.r(n)}var Rr=typeof document>"u"?null:document;function gx(n,s,i){var c=Rr;if(c&&typeof s=="string"&&s){var f=Pt(s);f='link[rel="'+n+'"][href="'+f+'"]',typeof i=="string"&&(f+='[crossorigin="'+i+'"]'),mx.has(f)||(mx.add(f),n={rel:n,crossOrigin:i,href:s},c.querySelector(f)===null&&(s=c.createElement("link"),_t(s,"link",n),lt(s),c.head.appendChild(s)))}}function RN(n){gs.D(n),gx("dns-prefetch",n,null)}function ON(n,s){gs.C(n,s),gx("preconnect",n,s)}function $N(n,s,i){gs.L(n,s,i);var c=Rr;if(c&&n&&s){var f='link[rel="preload"][as="'+Pt(s)+'"]';s==="image"&&i&&i.imageSrcSet?(f+='[imagesrcset="'+Pt(i.imageSrcSet)+'"]',typeof i.imageSizes=="string"&&(f+='[imagesizes="'+Pt(i.imageSizes)+'"]')):f+='[href="'+Pt(n)+'"]';var g=f;switch(s){case"style":g=Or(n);break;case"script":g=$r(n)}mn.has(g)||(n=x({rel:"preload",href:s==="image"&&i&&i.imageSrcSet?void 0:n,as:s},i),mn.set(g,n),c.querySelector(f)!==null||s==="style"&&c.querySelector(oi(g))||s==="script"&&c.querySelector(ii(g))||(s=c.createElement("link"),_t(s,"link",n),lt(s),c.head.appendChild(s)))}}function zN(n,s){gs.m(n,s);var i=Rr;if(i&&n){var c=s&&typeof s.as=="string"?s.as:"script",f='link[rel="modulepreload"][as="'+Pt(c)+'"][href="'+Pt(n)+'"]',g=f;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=$r(n)}if(!mn.has(g)&&(n=x({rel:"modulepreload",href:n},s),mn.set(g,n),i.querySelector(f)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(i.querySelector(ii(g)))return}c=i.createElement("link"),_t(c,"link",n),lt(c),i.head.appendChild(c)}}}function LN(n,s,i){gs.S(n,s,i);var c=Rr;if(c&&n){var f=ks(c).hoistableStyles,g=Or(n);s=s||"default";var N=f.get(g);if(!N){var M={loading:0,preload:null};if(N=c.querySelector(oi(g)))M.loading=5;else{n=x({rel:"stylesheet",href:n,"data-precedence":s},i),(i=mn.get(g))&&Wf(n,i);var Y=N=c.createElement("link");lt(Y),_t(Y,"link",n),Y._p=new Promise(function(ee,oe){Y.onload=ee,Y.onerror=oe}),Y.addEventListener("load",function(){M.loading|=1}),Y.addEventListener("error",function(){M.loading|=2}),M.loading|=4,fc(N,s,c)}N={type:"stylesheet",instance:N,count:1,state:M},f.set(g,N)}}}function BN(n,s){gs.X(n,s);var i=Rr;if(i&&n){var c=ks(i).hoistableScripts,f=$r(n),g=c.get(f);g||(g=i.querySelector(ii(f)),g||(n=x({src:n,async:!0},s),(s=mn.get(f))&&Zf(n,s),g=i.createElement("script"),lt(g),_t(g,"link",n),i.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},c.set(f,g))}}function PN(n,s){gs.M(n,s);var i=Rr;if(i&&n){var c=ks(i).hoistableScripts,f=$r(n),g=c.get(f);g||(g=i.querySelector(ii(f)),g||(n=x({src:n,async:!0,type:"module"},s),(s=mn.get(f))&&Zf(n,s),g=i.createElement("script"),lt(g),_t(g,"link",n),i.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},c.set(f,g))}}function xx(n,s,i,c){var f=(f=de.current)?dc(f):null;if(!f)throw Error(r(446));switch(n){case"meta":case"title":return null;case"style":return typeof i.precedence=="string"&&typeof i.href=="string"?(s=Or(i.href),i=ks(f).hoistableStyles,c=i.get(s),c||(c={type:"style",instance:null,count:0,state:null},i.set(s,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(i.rel==="stylesheet"&&typeof i.href=="string"&&typeof i.precedence=="string"){n=Or(i.href);var g=ks(f).hoistableStyles,N=g.get(n);if(N||(f=f.ownerDocument||f,N={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(n,N),(g=f.querySelector(oi(n)))&&!g._p&&(N.instance=g,N.state.loading=5),mn.has(n)||(i={rel:"preload",as:"style",href:i.href,crossOrigin:i.crossOrigin,integrity:i.integrity,media:i.media,hrefLang:i.hrefLang,referrerPolicy:i.referrerPolicy},mn.set(n,i),g||HN(f,n,i,N.state))),s&&c===null)throw Error(r(528,""));return N}if(s&&c!==null)throw Error(r(529,""));return null;case"script":return s=i.async,i=i.src,typeof i=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=$r(i),i=ks(f).hoistableScripts,c=i.get(s),c||(c={type:"script",instance:null,count:0,state:null},i.set(s,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,n))}}function Or(n){return'href="'+Pt(n)+'"'}function oi(n){return'link[rel="stylesheet"]['+n+"]"}function yx(n){return x({},n,{"data-precedence":n.precedence,precedence:null})}function HN(n,s,i,c){n.querySelector('link[rel="preload"][as="style"]['+s+"]")?c.loading=1:(s=n.createElement("link"),c.preload=s,s.addEventListener("load",function(){return c.loading|=1}),s.addEventListener("error",function(){return c.loading|=2}),_t(s,"link",i),lt(s),n.head.appendChild(s))}function $r(n){return'[src="'+Pt(n)+'"]'}function ii(n){return"script[async]"+n}function bx(n,s,i){if(s.count++,s.instance===null)switch(s.type){case"style":var c=n.querySelector('style[data-href~="'+Pt(i.href)+'"]');if(c)return s.instance=c,lt(c),c;var f=x({},i,{"data-href":i.href,"data-precedence":i.precedence,href:null,precedence:null});return c=(n.ownerDocument||n).createElement("style"),lt(c),_t(c,"style",f),fc(c,i.precedence,n),s.instance=c;case"stylesheet":f=Or(i.href);var g=n.querySelector(oi(f));if(g)return s.state.loading|=4,s.instance=g,lt(g),g;c=yx(i),(f=mn.get(f))&&Wf(c,f),g=(n.ownerDocument||n).createElement("link"),lt(g);var N=g;return N._p=new Promise(function(M,Y){N.onload=M,N.onerror=Y}),_t(g,"link",c),s.state.loading|=4,fc(g,i.precedence,n),s.instance=g;case"script":return g=$r(i.src),(f=n.querySelector(ii(g)))?(s.instance=f,lt(f),f):(c=i,(f=mn.get(g))&&(c=x({},i),Zf(c,f)),n=n.ownerDocument||n,f=n.createElement("script"),lt(f),_t(f,"link",c),n.head.appendChild(f),s.instance=f);case"void":return null;default:throw Error(r(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(c=s.instance,s.state.loading|=4,fc(c,i.precedence,n));return s.instance}function fc(n,s,i){for(var c=i.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=c.length?c[c.length-1]:null,g=f,N=0;N<c.length;N++){var M=c[N];if(M.dataset.precedence===s)g=M;else if(g!==f)break}g?g.parentNode.insertBefore(n,g.nextSibling):(s=i.nodeType===9?i.head:i,s.insertBefore(n,s.firstChild))}function Wf(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.title==null&&(n.title=s.title)}function Zf(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.integrity==null&&(n.integrity=s.integrity)}var hc=null;function vx(n,s,i){if(hc===null){var c=new Map,f=hc=new Map;f.set(i,c)}else f=hc,c=f.get(i),c||(c=new Map,f.set(i,c));if(c.has(n))return c;for(c.set(n,null),i=i.getElementsByTagName(n),f=0;f<i.length;f++){var g=i[f];if(!(g[ga]||g[mt]||n==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var N=g.getAttribute(s)||"";N=n+N;var M=c.get(N);M?M.push(g):c.set(N,[g])}}return c}function wx(n,s,i){n=n.ownerDocument||n,n.head.insertBefore(i,s==="title"?n.querySelector("head > title"):null)}function UN(n,s,i){if(i===1||s.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;return s.rel==="stylesheet"?(n=s.disabled,typeof s.precedence=="string"&&n==null):!0;case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function Nx(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function qN(n,s,i,c){if(i.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var f=Or(c.href),g=s.querySelector(oi(f));if(g){s=g._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(n.count++,n=pc.bind(n),s.then(n,n)),i.state.loading|=4,i.instance=g,lt(g);return}g=s.ownerDocument||s,c=yx(c),(f=mn.get(f))&&Wf(c,f),g=g.createElement("link"),lt(g);var N=g;N._p=new Promise(function(M,Y){N.onload=M,N.onerror=Y}),_t(g,"link",c),i.instance=g}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(i,s),(s=i.state.preload)&&(i.state.loading&3)===0&&(n.count++,i=pc.bind(n),s.addEventListener("load",i),s.addEventListener("error",i))}}var Jf=0;function IN(n,s){return n.stylesheets&&n.count===0&&gc(n,n.stylesheets),0<n.count||0<n.imgCount?function(i){var c=setTimeout(function(){if(n.stylesheets&&gc(n,n.stylesheets),n.unsuspend){var g=n.unsuspend;n.unsuspend=null,g()}},6e4+s);0<n.imgBytes&&Jf===0&&(Jf=62500*jN());var f=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&gc(n,n.stylesheets),n.unsuspend)){var g=n.unsuspend;n.unsuspend=null,g()}},(n.imgBytes>Jf?50:800)+s);return n.unsuspend=i,function(){n.unsuspend=null,clearTimeout(c),clearTimeout(f)}}:null}function pc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)gc(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var mc=null;function gc(n,s){n.stylesheets=null,n.unsuspend!==null&&(n.count++,mc=new Map,s.forEach(VN,n),mc=null,pc.call(n))}function VN(n,s){if(!(s.state.loading&4)){var i=mc.get(n);if(i)var c=i.get(null);else{i=new Map,mc.set(n,i);for(var f=n.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<f.length;g++){var N=f[g];(N.nodeName==="LINK"||N.getAttribute("media")!=="not all")&&(i.set(N.dataset.precedence,N),c=N)}c&&i.set(null,c)}f=s.instance,N=f.getAttribute("data-precedence"),g=i.get(N)||c,g===c&&i.set(null,f),i.set(N,f),this.count++,c=pc.bind(this),f.addEventListener("load",c),f.addEventListener("error",c),g?g.parentNode.insertBefore(f,g.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(f,n.firstChild)),s.state.loading|=4}}var li={$$typeof:C,Provider:null,Consumer:null,_currentValue:z,_currentValue2:z,_threadCount:0};function FN(n,s,i,c,f,g,N,M,Y){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=bo(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=bo(0),this.hiddenUpdates=bo(null),this.identifierPrefix=c,this.onUncaughtError=f,this.onCaughtError=g,this.onRecoverableError=N,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Y,this.incompleteTransitions=new Map}function jx(n,s,i,c,f,g,N,M,Y,ee,oe,le){return n=new FN(n,s,i,N,Y,ee,oe,le,M),s=1,g===!0&&(s|=24),g=Qt(3,null,null,s),n.current=g,g.stateNode=n,s=Md(),s.refCount++,n.pooledCache=s,s.refCount++,g.memoizedState={element:c,isDehydrated:i,cache:s},$d(g),n}function Sx(n){return n?(n=fr,n):fr}function Cx(n,s,i,c,f,g){f=Sx(f),c.context===null?c.context=f:c.pendingContext=f,c=Bs(s),c.payload={element:i},g=g===void 0?null:g,g!==null&&(c.callback=g),i=Ps(n,c,s),i!==null&&(Ft(i,n,s),Ho(i,n,s))}function Ex(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var i=n.retryLane;n.retryLane=i!==0&&i<s?i:s}}function eh(n,s){Ex(n,s),(n=n.alternate)&&Ex(n,s)}function _x(n){if(n.tag===13||n.tag===31){var s=Na(n,67108864);s!==null&&Ft(s,n,67108864),eh(n,67108864)}}function Tx(n){if(n.tag===13||n.tag===31){var s=tn();s=vo(s);var i=Na(n,s);i!==null&&Ft(i,n,s),eh(n,s)}}var xc=!0;function YN(n,s,i,c){var f=O.T;O.T=null;var g=U.p;try{U.p=2,th(n,s,i,c)}finally{U.p=g,O.T=f}}function XN(n,s,i,c){var f=O.T;O.T=null;var g=U.p;try{U.p=8,th(n,s,i,c)}finally{U.p=g,O.T=f}}function th(n,s,i,c){if(xc){var f=nh(c);if(f===null)Uf(n,s,c,yc,i),kx(n,c);else if(KN(f,n,s,i,c))c.stopPropagation();else if(kx(n,c),s&4&&-1<GN.indexOf(n)){for(;f!==null;){var g=Ts(f);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var N=Qn(g.pendingLanes);if(N!==0){var M=g;for(M.pendingLanes|=2,M.entangledLanes|=2;N;){var Y=1<<31-yt(N);M.entanglements[1]|=Y,N&=~Y}zn(g),(Ue&6)===0&&(ec=Me()+500,ni(0))}}break;case 31:case 13:M=Na(g,2),M!==null&&Ft(M,g,2),nc(),eh(g,2)}if(g=nh(c),g===null&&Uf(n,s,c,yc,i),g===f)break;f=g}f!==null&&c.stopPropagation()}else Uf(n,s,c,null,i)}}function nh(n){return n=sd(n),sh(n)}var yc=null;function sh(n){if(yc=null,n=_s(n),n!==null){var s=u(n);if(s===null)n=null;else{var i=s.tag;if(i===13){if(n=d(s),n!==null)return n;n=null}else if(i===31){if(n=h(s),n!==null)return n;n=null}else if(i===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null)}}return yc=n,null}function Ax(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(fa()){case Tt:return 2;case kn:return 8;case Mn:case Ka:return 32;case Kn:return 268435456;default:return 32}default:return 32}}var ah=!1,Qs=null,Ws=null,Zs=null,ci=new Map,ui=new Map,Js=[],GN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function kx(n,s){switch(n){case"focusin":case"focusout":Qs=null;break;case"dragenter":case"dragleave":Ws=null;break;case"mouseover":case"mouseout":Zs=null;break;case"pointerover":case"pointerout":ci.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":ui.delete(s.pointerId)}}function di(n,s,i,c,f,g){return n===null||n.nativeEvent!==g?(n={blockedOn:s,domEventName:i,eventSystemFlags:c,nativeEvent:g,targetContainers:[f]},s!==null&&(s=Ts(s),s!==null&&_x(s)),n):(n.eventSystemFlags|=c,s=n.targetContainers,f!==null&&s.indexOf(f)===-1&&s.push(f),n)}function KN(n,s,i,c,f){switch(s){case"focusin":return Qs=di(Qs,n,s,i,c,f),!0;case"dragenter":return Ws=di(Ws,n,s,i,c,f),!0;case"mouseover":return Zs=di(Zs,n,s,i,c,f),!0;case"pointerover":var g=f.pointerId;return ci.set(g,di(ci.get(g)||null,n,s,i,c,f)),!0;case"gotpointercapture":return g=f.pointerId,ui.set(g,di(ui.get(g)||null,n,s,i,c,f)),!0}return!1}function Mx(n){var s=_s(n.target);if(s!==null){var i=u(s);if(i!==null){if(s=i.tag,s===13){if(s=d(i),s!==null){n.blockedOn=s,ol(n.priority,function(){Tx(i)});return}}else if(s===31){if(s=h(i),s!==null){n.blockedOn=s,ol(n.priority,function(){Tx(i)});return}}else if(s===3&&i.stateNode.current.memoizedState.isDehydrated){n.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}n.blockedOn=null}function bc(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var i=nh(n.nativeEvent);if(i===null){i=n.nativeEvent;var c=new i.constructor(i.type,i);nd=c,i.target.dispatchEvent(c),nd=null}else return s=Ts(i),s!==null&&_x(s),n.blockedOn=i,!1;s.shift()}return!0}function Dx(n,s,i){bc(n)&&i.delete(s)}function QN(){ah=!1,Qs!==null&&bc(Qs)&&(Qs=null),Ws!==null&&bc(Ws)&&(Ws=null),Zs!==null&&bc(Zs)&&(Zs=null),ci.forEach(Dx),ui.forEach(Dx)}function vc(n,s){n.blockedOn===s&&(n.blockedOn=null,ah||(ah=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,QN)))}var wc=null;function Rx(n){wc!==n&&(wc=n,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){wc===n&&(wc=null);for(var s=0;s<n.length;s+=3){var i=n[s],c=n[s+1],f=n[s+2];if(typeof c!="function"){if(sh(c||i)===null)continue;break}var g=Ts(i);g!==null&&(n.splice(s,3),s-=3,tf(g,{pending:!0,data:f,method:i.method,action:c},c,f))}}))}function zr(n){function s(Y){return vc(Y,n)}Qs!==null&&vc(Qs,n),Ws!==null&&vc(Ws,n),Zs!==null&&vc(Zs,n),ci.forEach(s),ui.forEach(s);for(var i=0;i<Js.length;i++){var c=Js[i];c.blockedOn===n&&(c.blockedOn=null)}for(;0<Js.length&&(i=Js[0],i.blockedOn===null);)Mx(i),i.blockedOn===null&&Js.shift();if(i=(n.ownerDocument||n).$$reactFormReplay,i!=null)for(c=0;c<i.length;c+=3){var f=i[c],g=i[c+1],N=f[At]||null;if(typeof g=="function")N||Rx(i);else if(N){var M=null;if(g&&g.hasAttribute("formAction")){if(f=g,N=g[At]||null)M=N.formAction;else if(sh(f)!==null)continue}else M=N.action;typeof M=="function"?i[c+1]=M:(i.splice(c,3),c-=3),Rx(i)}}}function Ox(){function n(g){g.canIntercept&&g.info==="react-transition"&&g.intercept({handler:function(){return new Promise(function(N){return f=N})},focusReset:"manual",scroll:"manual"})}function s(){f!==null&&(f(),f=null),c||setTimeout(i,20)}function i(){if(!c&&!navigation.transition){var g=navigation.currentEntry;g&&g.url!=null&&navigation.navigate(g.url,{state:g.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,f=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(i,100),function(){c=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),f!==null&&(f(),f=null)}}}function rh(n){this._internalRoot=n}Nc.prototype.render=rh.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(r(409));var i=s.current,c=tn();Cx(i,c,n,s,null,null)},Nc.prototype.unmount=rh.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;Cx(n.current,2,null,n,null,null),nc(),s[Wn]=null}};function Nc(n){this._internalRoot=n}Nc.prototype.unstable_scheduleHydration=function(n){if(n){var s=rl();n={blockedOn:null,target:n,priority:s};for(var i=0;i<Js.length&&s!==0&&s<Js[i].priority;i++);Js.splice(i,0,n),i===0&&Mx(n)}};var $x=t.version;if($x!=="19.2.3")throw Error(r(527,$x,"19.2.3"));U.findDOMNode=function(n){var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(r(188)):(n=Object.keys(n).join(","),Error(r(268,n)));return n=p(s),n=n!==null?y(n):null,n=n===null?null:n.stateNode,n};var WN={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:O,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var jc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!jc.isDisabled&&jc.supportsFiber)try{bn=jc.inject(WN),jt=jc}catch{}}return hi.createRoot=function(n,s){if(!l(n))throw Error(r(299));var i=!1,c="",f=qg,g=Ig,N=Vg;return s!=null&&(s.unstable_strictMode===!0&&(i=!0),s.identifierPrefix!==void 0&&(c=s.identifierPrefix),s.onUncaughtError!==void 0&&(f=s.onUncaughtError),s.onCaughtError!==void 0&&(g=s.onCaughtError),s.onRecoverableError!==void 0&&(N=s.onRecoverableError)),s=jx(n,1,!1,null,null,i,c,null,f,g,N,Ox),n[Wn]=s.current,Hf(n),new rh(s)},hi.hydrateRoot=function(n,s,i){if(!l(n))throw Error(r(299));var c=!1,f="",g=qg,N=Ig,M=Vg,Y=null;return i!=null&&(i.unstable_strictMode===!0&&(c=!0),i.identifierPrefix!==void 0&&(f=i.identifierPrefix),i.onUncaughtError!==void 0&&(g=i.onUncaughtError),i.onCaughtError!==void 0&&(N=i.onCaughtError),i.onRecoverableError!==void 0&&(M=i.onRecoverableError),i.formState!==void 0&&(Y=i.formState)),s=jx(n,1,!0,s,i??null,c,f,Y,g,N,M,Ox),s.context=Sx(null),i=s.current,c=tn(),c=vo(c),f=Bs(c),f.callback=null,Ps(i,f,c),i=c,s.current.lanes=i,ma(s,i),zn(s),n[Wn]=s.current,Hf(n),new Nc(s)},hi.version="19.2.3",hi}var Fx;function oj(){if(Fx)return lh.exports;Fx=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),lh.exports=rj(),lh.exports}var ij=oj();const lj=dp(ij);var Yx="popstate";function cj(e={}){function t(r,l){let{pathname:u,search:d,hash:h}=r.location;return zh("",{pathname:u,search:d,hash:h},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function a(r,l){return typeof l=="string"?l:Ti(l)}return dj(t,a,null,e)}function Je(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function sn(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function uj(){return Math.random().toString(36).substring(2,10)}function Xx(e,t){return{usr:e.state,key:e.key,idx:t}}function zh(e,t,a=null,r){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?lo(t):t,state:a,key:t&&t.key||r||uj()}}function Ti({pathname:e="/",search:t="",hash:a=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),a&&a!=="#"&&(e+=a.charAt(0)==="#"?a:"#"+a),e}function lo(e){let t={};if(e){let a=e.indexOf("#");a>=0&&(t.hash=e.substring(a),e=e.substring(0,a));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function dj(e,t,a,r={}){let{window:l=document.defaultView,v5Compat:u=!1}=r,d=l.history,h="POP",m=null,p=y();p==null&&(p=0,d.replaceState({...d.state,idx:p},""));function y(){return(d.state||{idx:null}).idx}function x(){h="POP";let E=y(),T=E==null?null:E-p;p=E,m&&m({action:h,location:_.location,delta:T})}function b(E,T){h="PUSH";let A=zh(_.location,E,T);p=y()+1;let C=Xx(A,p),k=_.createHref(A);try{d.pushState(C,"",k)}catch(L){if(L instanceof DOMException&&L.name==="DataCloneError")throw L;l.location.assign(k)}u&&m&&m({action:h,location:_.location,delta:1})}function v(E,T){h="REPLACE";let A=zh(_.location,E,T);p=y();let C=Xx(A,p),k=_.createHref(A);d.replaceState(C,"",k),u&&m&&m({action:h,location:_.location,delta:0})}function w(E){return fj(E)}let _={get action(){return h},get location(){return e(l,d)},listen(E){if(m)throw new Error("A history only accepts one active listener");return l.addEventListener(Yx,x),m=E,()=>{l.removeEventListener(Yx,x),m=null}},createHref(E){return t(l,E)},createURL:w,encodeLocation(E){let T=w(E);return{pathname:T.pathname,search:T.search,hash:T.hash}},push:b,replace:v,go(E){return d.go(E)}};return _}function fj(e,t=!1){let a="http://localhost";typeof window<"u"&&(a=window.location.origin!=="null"?window.location.origin:window.location.href),Je(a,"No window.location.(origin|href) available to create URL");let r=typeof e=="string"?e:Ti(e);return r=r.replace(/ $/,"%20"),!t&&r.startsWith("//")&&(r=a+r),new URL(r,a)}function Zb(e,t,a="/"){return hj(e,t,a,!1)}function hj(e,t,a,r){let l=typeof t=="string"?lo(t):t,u=ws(l.pathname||"/",a);if(u==null)return null;let d=Jb(e);pj(d);let h=null;for(let m=0;h==null&&m<d.length;++m){let p=Cj(u);h=jj(d[m],p,r)}return h}function Jb(e,t=[],a=[],r="",l=!1){let u=(d,h,m=l,p)=>{let y={relativePath:p===void 0?d.path||"":p,caseSensitive:d.caseSensitive===!0,childrenIndex:h,route:d};if(y.relativePath.startsWith("/")){if(!y.relativePath.startsWith(r)&&m)return;Je(y.relativePath.startsWith(r),`Absolute route path "${y.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),y.relativePath=y.relativePath.slice(r.length)}let x=vs([r,y.relativePath]),b=a.concat(y);d.children&&d.children.length>0&&(Je(d.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${x}".`),Jb(d.children,t,b,x,m)),!(d.path==null&&!d.index)&&t.push({path:x,score:wj(x,d.index),routesMeta:b})};return e.forEach((d,h)=>{if(d.path===""||!d.path?.includes("?"))u(d,h);else for(let m of ev(d.path))u(d,h,!0,m)}),t}function ev(e){let t=e.split("/");if(t.length===0)return[];let[a,...r]=t,l=a.endsWith("?"),u=a.replace(/\?$/,"");if(r.length===0)return l?[u,""]:[u];let d=ev(r.join("/")),h=[];return h.push(...d.map(m=>m===""?u:[u,m].join("/"))),l&&h.push(...d),h.map(m=>e.startsWith("/")&&m===""?"/":m)}function pj(e){e.sort((t,a)=>t.score!==a.score?a.score-t.score:Nj(t.routesMeta.map(r=>r.childrenIndex),a.routesMeta.map(r=>r.childrenIndex)))}var mj=/^:[\w-]+$/,gj=3,xj=2,yj=1,bj=10,vj=-2,Gx=e=>e==="*";function wj(e,t){let a=e.split("/"),r=a.length;return a.some(Gx)&&(r+=vj),t&&(r+=xj),a.filter(l=>!Gx(l)).reduce((l,u)=>l+(mj.test(u)?gj:u===""?yj:bj),r)}function Nj(e,t){return e.length===t.length&&e.slice(0,-1).every((r,l)=>r===t[l])?e[e.length-1]-t[t.length-1]:0}function jj(e,t,a=!1){let{routesMeta:r}=e,l={},u="/",d=[];for(let h=0;h<r.length;++h){let m=r[h],p=h===r.length-1,y=u==="/"?t:t.slice(u.length)||"/",x=Jc({path:m.relativePath,caseSensitive:m.caseSensitive,end:p},y),b=m.route;if(!x&&p&&a&&!r[r.length-1].route.index&&(x=Jc({path:m.relativePath,caseSensitive:m.caseSensitive,end:!1},y)),!x)return null;Object.assign(l,x.params),d.push({params:l,pathname:vs([u,x.pathname]),pathnameBase:Aj(vs([u,x.pathnameBase])),route:b}),x.pathnameBase!=="/"&&(u=vs([u,x.pathnameBase]))}return d}function Jc(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[a,r]=Sj(e.path,e.caseSensitive,e.end),l=t.match(a);if(!l)return null;let u=l[0],d=u.replace(/(.)\/+$/,"$1"),h=l.slice(1);return{params:r.reduce((p,{paramName:y,isOptional:x},b)=>{if(y==="*"){let w=h[b]||"";d=u.slice(0,u.length-w.length).replace(/(.)\/+$/,"$1")}const v=h[b];return x&&!v?p[y]=void 0:p[y]=(v||"").replace(/%2F/g,"/"),p},{}),pathname:u,pathnameBase:d,pattern:e}}function Sj(e,t=!1,a=!0){sn(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let r=[],l="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,h,m)=>(r.push({paramName:h,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(r.push({paramName:"*"}),l+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):a?l+="\\/*$":e!==""&&e!=="/"&&(l+="(?:(?=\\/|$))"),[new RegExp(l,t?void 0:"i"),r]}function Cj(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return sn(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function ws(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let a=t.endsWith("/")?t.length-1:t.length,r=e.charAt(a);return r&&r!=="/"?null:e.slice(a)||"/"}var tv=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ej=e=>tv.test(e);function _j(e,t="/"){let{pathname:a,search:r="",hash:l=""}=typeof e=="string"?lo(e):e,u;if(a)if(Ej(a))u=a;else{if(a.includes("//")){let d=a;a=a.replace(/\/\/+/g,"/"),sn(!1,`Pathnames cannot have embedded double slashes - normalizing ${d} -> ${a}`)}a.startsWith("/")?u=Kx(a.substring(1),"/"):u=Kx(a,t)}else u=t;return{pathname:u,search:kj(r),hash:Mj(l)}}function Kx(e,t){let a=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(l=>{l===".."?a.length>1&&a.pop():l!=="."&&a.push(l)}),a.length>1?a.join("/"):"/"}function fh(e,t,a,r){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${a}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Tj(e){return e.filter((t,a)=>a===0||t.route.path&&t.route.path.length>0)}function fp(e){let t=Tj(e);return t.map((a,r)=>r===t.length-1?a.pathname:a.pathnameBase)}function hp(e,t,a,r=!1){let l;typeof e=="string"?l=lo(e):(l={...e},Je(!l.pathname||!l.pathname.includes("?"),fh("?","pathname","search",l)),Je(!l.pathname||!l.pathname.includes("#"),fh("#","pathname","hash",l)),Je(!l.search||!l.search.includes("#"),fh("#","search","hash",l)));let u=e===""||l.pathname==="",d=u?"/":l.pathname,h;if(d==null)h=a;else{let x=t.length-1;if(!r&&d.startsWith("..")){let b=d.split("/");for(;b[0]==="..";)b.shift(),x-=1;l.pathname=b.join("/")}h=x>=0?t[x]:"/"}let m=_j(l,h),p=d&&d!=="/"&&d.endsWith("/"),y=(u||d===".")&&a.endsWith("/");return!m.pathname.endsWith("/")&&(p||y)&&(m.pathname+="/"),m}var vs=e=>e.join("/").replace(/\/\/+/g,"/"),Aj=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),kj=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Mj=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e,Dj=class{constructor(e,t,a,r=!1){this.status=e,this.statusText=t||"",this.internal=r,a instanceof Error?(this.data=a.toString(),this.error=a):this.data=a}};function Rj(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}function Oj(e){return e.map(t=>t.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var nv=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function sv(e,t){let a=e;if(typeof a!="string"||!tv.test(a))return{absoluteURL:void 0,isExternal:!1,to:a};let r=a,l=!1;if(nv)try{let u=new URL(window.location.href),d=a.startsWith("//")?new URL(u.protocol+a):new URL(a),h=ws(d.pathname,t);d.origin===u.origin&&h!=null?a=h+d.search+d.hash:l=!0}catch{sn(!1,`<Link to="${a}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:r,isExternal:l,to:a}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var av=["POST","PUT","PATCH","DELETE"];new Set(av);var $j=["GET",...av];new Set($j);var co=S.createContext(null);co.displayName="DataRouter";var wu=S.createContext(null);wu.displayName="DataRouterState";var zj=S.createContext(!1),rv=S.createContext({isTransitioning:!1});rv.displayName="ViewTransition";var Lj=S.createContext(new Map);Lj.displayName="Fetchers";var Bj=S.createContext(null);Bj.displayName="Await";var rn=S.createContext(null);rn.displayName="Navigation";var Ui=S.createContext(null);Ui.displayName="Location";var yn=S.createContext({outlet:null,matches:[],isDataRoute:!1});yn.displayName="Route";var pp=S.createContext(null);pp.displayName="RouteError";var ov="REACT_ROUTER_ERROR",Pj="REDIRECT",Hj="ROUTE_ERROR_RESPONSE";function Uj(e){if(e.startsWith(`${ov}:${Pj}:{`))try{let t=JSON.parse(e.slice(28));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.location=="string"&&typeof t.reloadDocument=="boolean"&&typeof t.replace=="boolean")return t}catch{}}function qj(e){if(e.startsWith(`${ov}:${Hj}:{`))try{let t=JSON.parse(e.slice(40));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string")return new Dj(t.status,t.statusText,t.data)}catch{}}function Ij(e,{relative:t}={}){Je(uo(),"useHref() may be used only in the context of a <Router> component.");let{basename:a,navigator:r}=S.useContext(rn),{hash:l,pathname:u,search:d}=qi(e,{relative:t}),h=u;return a!=="/"&&(h=u==="/"?a:vs([a,u])),r.createHref({pathname:h,search:d,hash:l})}function uo(){return S.useContext(Ui)!=null}function Ss(){return Je(uo(),"useLocation() may be used only in the context of a <Router> component."),S.useContext(Ui).location}var iv="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function lv(e){S.useContext(rn).static||S.useLayoutEffect(e)}function Ga(){let{isDataRoute:e}=S.useContext(yn);return e?rS():Vj()}function Vj(){Je(uo(),"useNavigate() may be used only in the context of a <Router> component.");let e=S.useContext(co),{basename:t,navigator:a}=S.useContext(rn),{matches:r}=S.useContext(yn),{pathname:l}=Ss(),u=JSON.stringify(fp(r)),d=S.useRef(!1);return lv(()=>{d.current=!0}),S.useCallback((m,p={})=>{if(sn(d.current,iv),!d.current)return;if(typeof m=="number"){a.go(m);return}let y=hp(m,JSON.parse(u),l,p.relative==="path");e==null&&t!=="/"&&(y.pathname=y.pathname==="/"?t:vs([t,y.pathname])),(p.replace?a.replace:a.push)(y,p.state,p)},[t,a,u,l,e])}var Fj=S.createContext(null);function Yj(e){let t=S.useContext(yn).outlet;return S.useMemo(()=>t&&S.createElement(Fj.Provider,{value:e},t),[t,e])}function Xj(){let{matches:e}=S.useContext(yn),t=e[e.length-1];return t?t.params:{}}function qi(e,{relative:t}={}){let{matches:a}=S.useContext(yn),{pathname:r}=Ss(),l=JSON.stringify(fp(a));return S.useMemo(()=>hp(e,JSON.parse(l),r,t==="path"),[e,l,r,t])}function Gj(e,t){return cv(e,t)}function cv(e,t,a,r,l){Je(uo(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:u}=S.useContext(rn),{matches:d}=S.useContext(yn),h=d[d.length-1],m=h?h.params:{},p=h?h.pathname:"/",y=h?h.pathnameBase:"/",x=h&&h.route;{let A=x&&x.path||"";dv(p,!x||A.endsWith("*")||A.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${A}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${A}"> to <Route path="${A==="/"?"*":`${A}/*`}">.`)}let b=Ss(),v;if(t){let A=typeof t=="string"?lo(t):t;Je(y==="/"||A.pathname?.startsWith(y),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${y}" but pathname "${A.pathname}" was given in the \`location\` prop.`),v=A}else v=b;let w=v.pathname||"/",_=w;if(y!=="/"){let A=y.replace(/^\//,"").split("/");_="/"+w.replace(/^\//,"").split("/").slice(A.length).join("/")}let E=Zb(e,{pathname:_});sn(x||E!=null,`No routes matched location "${v.pathname}${v.search}${v.hash}" `),sn(E==null||E[E.length-1].route.element!==void 0||E[E.length-1].route.Component!==void 0||E[E.length-1].route.lazy!==void 0,`Matched leaf route at location "${v.pathname}${v.search}${v.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let T=Jj(E&&E.map(A=>Object.assign({},A,{params:Object.assign({},m,A.params),pathname:vs([y,u.encodeLocation?u.encodeLocation(A.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:A.pathname]),pathnameBase:A.pathnameBase==="/"?y:vs([y,u.encodeLocation?u.encodeLocation(A.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:A.pathnameBase])})),d,a,r,l);return t&&T?S.createElement(Ui.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...v},navigationType:"POP"}},T):T}function Kj(){let e=aS(),t=Rj(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),a=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",l={padding:"0.5rem",backgroundColor:r},u={padding:"2px 4px",backgroundColor:r},d=null;return console.error("Error handled by React Router default ErrorBoundary:",e),d=S.createElement(S.Fragment,null,S.createElement("p",null," Hey developer "),S.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",S.createElement("code",{style:u},"ErrorBoundary")," or"," ",S.createElement("code",{style:u},"errorElement")," prop on your route.")),S.createElement(S.Fragment,null,S.createElement("h2",null,"Unexpected Application Error!"),S.createElement("h3",{style:{fontStyle:"italic"}},t),a?S.createElement("pre",{style:l},a):null,d)}var Qj=S.createElement(Kj,null),uv=class extends S.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.onError?this.props.onError(e,t):console.error("React Router caught the following error during render",e)}render(){let e=this.state.error;if(this.context&&typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){const a=qj(e.digest);a&&(e=a)}let t=e!==void 0?S.createElement(yn.Provider,{value:this.props.routeContext},S.createElement(pp.Provider,{value:e,children:this.props.component})):this.props.children;return this.context?S.createElement(Wj,{error:e},t):t}};uv.contextType=zj;var hh=new WeakMap;function Wj({children:e,error:t}){let{basename:a}=S.useContext(rn);if(typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){let r=Uj(t.digest);if(r){let l=hh.get(t);if(l)throw l;let u=sv(r.location,a);if(nv&&!hh.get(t))if(u.isExternal||r.reloadDocument)window.location.href=u.absoluteURL||u.to;else{const d=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(u.to,{replace:r.replace}));throw hh.set(t,d),d}return S.createElement("meta",{httpEquiv:"refresh",content:`0;url=${u.absoluteURL||u.to}`})}}return e}function Zj({routeContext:e,match:t,children:a}){let r=S.useContext(co);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),S.createElement(yn.Provider,{value:e},a)}function Jj(e,t=[],a=null,r=null,l=null){if(e==null){if(!a)return null;if(a.errors)e=a.matches;else if(t.length===0&&!a.initialized&&a.matches.length>0)e=a.matches;else return null}let u=e,d=a?.errors;if(d!=null){let y=u.findIndex(x=>x.route.id&&d?.[x.route.id]!==void 0);Je(y>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(d).join(",")}`),u=u.slice(0,Math.min(u.length,y+1))}let h=!1,m=-1;if(a)for(let y=0;y<u.length;y++){let x=u[y];if((x.route.HydrateFallback||x.route.hydrateFallbackElement)&&(m=y),x.route.id){let{loaderData:b,errors:v}=a,w=x.route.loader&&!b.hasOwnProperty(x.route.id)&&(!v||v[x.route.id]===void 0);if(x.route.lazy||w){h=!0,m>=0?u=u.slice(0,m+1):u=[u[0]];break}}}let p=a&&r?(y,x)=>{r(y,{location:a.location,params:a.matches?.[0]?.params??{},unstable_pattern:Oj(a.matches),errorInfo:x})}:void 0;return u.reduceRight((y,x,b)=>{let v,w=!1,_=null,E=null;a&&(v=d&&x.route.id?d[x.route.id]:void 0,_=x.route.errorElement||Qj,h&&(m<0&&b===0?(dv("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),w=!0,E=null):m===b&&(w=!0,E=x.route.hydrateFallbackElement||null)));let T=t.concat(u.slice(0,b+1)),A=()=>{let C;return v?C=_:w?C=E:x.route.Component?C=S.createElement(x.route.Component,null):x.route.element?C=x.route.element:C=y,S.createElement(Zj,{match:x,routeContext:{outlet:y,matches:T,isDataRoute:a!=null},children:C})};return a&&(x.route.ErrorBoundary||x.route.errorElement||b===0)?S.createElement(uv,{location:a.location,revalidation:a.revalidation,component:_,error:v,children:A(),routeContext:{outlet:null,matches:T,isDataRoute:!0},onError:p}):A()},null)}function mp(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function eS(e){let t=S.useContext(co);return Je(t,mp(e)),t}function tS(e){let t=S.useContext(wu);return Je(t,mp(e)),t}function nS(e){let t=S.useContext(yn);return Je(t,mp(e)),t}function gp(e){let t=nS(e),a=t.matches[t.matches.length-1];return Je(a.route.id,`${e} can only be used on routes that contain a unique "id"`),a.route.id}function sS(){return gp("useRouteId")}function aS(){let e=S.useContext(pp),t=tS("useRouteError"),a=gp("useRouteError");return e!==void 0?e:t.errors?.[a]}function rS(){let{router:e}=eS("useNavigate"),t=gp("useNavigate"),a=S.useRef(!1);return lv(()=>{a.current=!0}),S.useCallback(async(l,u={})=>{sn(a.current,iv),a.current&&(typeof l=="number"?await e.navigate(l):await e.navigate(l,{fromRouteId:t,...u}))},[e,t])}var Qx={};function dv(e,t,a){!t&&!Qx[e]&&(Qx[e]=!0,sn(!1,a))}S.memo(oS);function oS({routes:e,future:t,state:a,onError:r}){return cv(e,void 0,a,r,t)}function eu({to:e,replace:t,state:a,relative:r}){Je(uo(),"<Navigate> may be used only in the context of a <Router> component.");let{static:l}=S.useContext(rn);sn(!l,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:u}=S.useContext(yn),{pathname:d}=Ss(),h=Ga(),m=hp(e,fp(u),d,r==="path"),p=JSON.stringify(m);return S.useEffect(()=>{h(JSON.parse(p),{replace:t,state:a,relative:r})},[h,p,r,t,a]),null}function iS(e){return Yj(e.context)}function Mt(e){Je(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function lS({basename:e="/",children:t=null,location:a,navigationType:r="POP",navigator:l,static:u=!1,unstable_useTransitions:d}){Je(!uo(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let h=e.replace(/^\/*/,"/"),m=S.useMemo(()=>({basename:h,navigator:l,static:u,unstable_useTransitions:d,future:{}}),[h,l,u,d]);typeof a=="string"&&(a=lo(a));let{pathname:p="/",search:y="",hash:x="",state:b=null,key:v="default"}=a,w=S.useMemo(()=>{let _=ws(p,h);return _==null?null:{location:{pathname:_,search:y,hash:x,state:b,key:v},navigationType:r}},[h,p,y,x,b,v,r]);return sn(w!=null,`<Router basename="${h}"> is not able to match the URL "${p}${y}${x}" because it does not start with the basename, so the <Router> won't render anything.`),w==null?null:S.createElement(rn.Provider,{value:m},S.createElement(Ui.Provider,{children:t,value:w}))}function cS({children:e,location:t}){return Gj(Lh(e),t)}function Lh(e,t=[]){let a=[];return S.Children.forEach(e,(r,l)=>{if(!S.isValidElement(r))return;let u=[...t,l];if(r.type===S.Fragment){a.push.apply(a,Lh(r.props.children,u));return}Je(r.type===Mt,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Je(!r.props.index||!r.props.children,"An index route cannot have child routes.");let d={id:r.props.id||u.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(d.children=Lh(r.props.children,u)),a.push(d)}),a}var Uc="get",qc="application/x-www-form-urlencoded";function Nu(e){return typeof HTMLElement<"u"&&e instanceof HTMLElement}function uS(e){return Nu(e)&&e.tagName.toLowerCase()==="button"}function dS(e){return Nu(e)&&e.tagName.toLowerCase()==="form"}function fS(e){return Nu(e)&&e.tagName.toLowerCase()==="input"}function hS(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function pS(e,t){return e.button===0&&(!t||t==="_self")&&!hS(e)}function Bh(e=""){return new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,a)=>{let r=e[a];return t.concat(Array.isArray(r)?r.map(l=>[a,l]):[[a,r]])},[]))}function mS(e,t){let a=Bh(e);return t&&t.forEach((r,l)=>{a.has(l)||t.getAll(l).forEach(u=>{a.append(l,u)})}),a}var Sc=null;function gS(){if(Sc===null)try{new FormData(document.createElement("form"),0),Sc=!1}catch{Sc=!0}return Sc}var xS=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function ph(e){return e!=null&&!xS.has(e)?(sn(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${qc}"`),null):e}function yS(e,t){let a,r,l,u,d;if(dS(e)){let h=e.getAttribute("action");r=h?ws(h,t):null,a=e.getAttribute("method")||Uc,l=ph(e.getAttribute("enctype"))||qc,u=new FormData(e)}else if(uS(e)||fS(e)&&(e.type==="submit"||e.type==="image")){let h=e.form;if(h==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let m=e.getAttribute("formaction")||h.getAttribute("action");if(r=m?ws(m,t):null,a=e.getAttribute("formmethod")||h.getAttribute("method")||Uc,l=ph(e.getAttribute("formenctype"))||ph(h.getAttribute("enctype"))||qc,u=new FormData(h,e),!gS()){let{name:p,type:y,value:x}=e;if(y==="image"){let b=p?`${p}.`:"";u.append(`${b}x`,"0"),u.append(`${b}y`,"0")}else p&&u.append(p,x)}}else{if(Nu(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');a=Uc,r=null,l=qc,d=e}return u&&l==="text/plain"&&(d=u,u=void 0),{action:r,method:a.toLowerCase(),encType:l,formData:u,body:d}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function xp(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function bS(e,t,a,r){let l=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return a?l.pathname.endsWith("/")?l.pathname=`${l.pathname}_.${r}`:l.pathname=`${l.pathname}.${r}`:l.pathname==="/"?l.pathname=`_root.${r}`:t&&ws(l.pathname,t)==="/"?l.pathname=`${t.replace(/\/$/,"")}/_root.${r}`:l.pathname=`${l.pathname.replace(/\/$/,"")}.${r}`,l}async function vS(e,t){if(e.id in t)return t[e.id];try{let a=await import(e.module);return t[e.id]=a,a}catch(a){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(a),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function wS(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function NS(e,t,a){let r=await Promise.all(e.map(async l=>{let u=t.routes[l.route.id];if(u){let d=await vS(u,a);return d.links?d.links():[]}return[]}));return ES(r.flat(1).filter(wS).filter(l=>l.rel==="stylesheet"||l.rel==="preload").map(l=>l.rel==="stylesheet"?{...l,rel:"prefetch",as:"style"}:{...l,rel:"prefetch"}))}function Wx(e,t,a,r,l,u){let d=(m,p)=>a[p]?m.route.id!==a[p].route.id:!0,h=(m,p)=>a[p].pathname!==m.pathname||a[p].route.path?.endsWith("*")&&a[p].params["*"]!==m.params["*"];return u==="assets"?t.filter((m,p)=>d(m,p)||h(m,p)):u==="data"?t.filter((m,p)=>{let y=r.routes[m.route.id];if(!y||!y.hasLoader)return!1;if(d(m,p)||h(m,p))return!0;if(m.route.shouldRevalidate){let x=m.route.shouldRevalidate({currentUrl:new URL(l.pathname+l.search+l.hash,window.origin),currentParams:a[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:m.params,defaultShouldRevalidate:!0});if(typeof x=="boolean")return x}return!0}):[]}function jS(e,t,{includeHydrateFallback:a}={}){return SS(e.map(r=>{let l=t.routes[r.route.id];if(!l)return[];let u=[l.module];return l.clientActionModule&&(u=u.concat(l.clientActionModule)),l.clientLoaderModule&&(u=u.concat(l.clientLoaderModule)),a&&l.hydrateFallbackModule&&(u=u.concat(l.hydrateFallbackModule)),l.imports&&(u=u.concat(l.imports)),u}).flat(1))}function SS(e){return[...new Set(e)]}function CS(e){let t={},a=Object.keys(e).sort();for(let r of a)t[r]=e[r];return t}function ES(e,t){let a=new Set;return new Set(t),e.reduce((r,l)=>{let u=JSON.stringify(CS(l));return a.has(u)||(a.add(u),r.push({key:u,link:l})),r},[])}function fv(){let e=S.useContext(co);return xp(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function _S(){let e=S.useContext(wu);return xp(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var yp=S.createContext(void 0);yp.displayName="FrameworkContext";function hv(){let e=S.useContext(yp);return xp(e,"You must render this element inside a <HydratedRouter> element"),e}function TS(e,t){let a=S.useContext(yp),[r,l]=S.useState(!1),[u,d]=S.useState(!1),{onFocus:h,onBlur:m,onMouseEnter:p,onMouseLeave:y,onTouchStart:x}=t,b=S.useRef(null);S.useEffect(()=>{if(e==="render"&&d(!0),e==="viewport"){let _=T=>{T.forEach(A=>{d(A.isIntersecting)})},E=new IntersectionObserver(_,{threshold:.5});return b.current&&E.observe(b.current),()=>{E.disconnect()}}},[e]),S.useEffect(()=>{if(r){let _=setTimeout(()=>{d(!0)},100);return()=>{clearTimeout(_)}}},[r]);let v=()=>{l(!0)},w=()=>{l(!1),d(!1)};return a?e!=="intent"?[u,b,{}]:[u,b,{onFocus:pi(h,v),onBlur:pi(m,w),onMouseEnter:pi(p,v),onMouseLeave:pi(y,w),onTouchStart:pi(x,v)}]:[!1,b,{}]}function pi(e,t){return a=>{e&&e(a),a.defaultPrevented||t(a)}}function AS({page:e,...t}){let{router:a}=fv(),r=S.useMemo(()=>Zb(a.routes,e,a.basename),[a.routes,e,a.basename]);return r?S.createElement(MS,{page:e,matches:r,...t}):null}function kS(e){let{manifest:t,routeModules:a}=hv(),[r,l]=S.useState([]);return S.useEffect(()=>{let u=!1;return NS(e,t,a).then(d=>{u||l(d)}),()=>{u=!0}},[e,t,a]),r}function MS({page:e,matches:t,...a}){let r=Ss(),{future:l,manifest:u,routeModules:d}=hv(),{basename:h}=fv(),{loaderData:m,matches:p}=_S(),y=S.useMemo(()=>Wx(e,t,p,u,r,"data"),[e,t,p,u,r]),x=S.useMemo(()=>Wx(e,t,p,u,r,"assets"),[e,t,p,u,r]),b=S.useMemo(()=>{if(e===r.pathname+r.search+r.hash)return[];let _=new Set,E=!1;if(t.forEach(A=>{let C=u.routes[A.route.id];!C||!C.hasLoader||(!y.some(k=>k.route.id===A.route.id)&&A.route.id in m&&d[A.route.id]?.shouldRevalidate||C.hasClientLoader?E=!0:_.add(A.route.id))}),_.size===0)return[];let T=bS(e,h,l.unstable_trailingSlashAwareDataRequests,"data");return E&&_.size>0&&T.searchParams.set("_routes",t.filter(A=>_.has(A.route.id)).map(A=>A.route.id).join(",")),[T.pathname+T.search]},[h,l.unstable_trailingSlashAwareDataRequests,m,r,u,y,t,e,d]),v=S.useMemo(()=>jS(x,u),[x,u]),w=kS(x);return S.createElement(S.Fragment,null,b.map(_=>S.createElement("link",{key:_,rel:"prefetch",as:"fetch",href:_,...a})),v.map(_=>S.createElement("link",{key:_,rel:"modulepreload",href:_,...a})),w.map(({key:_,link:E})=>S.createElement("link",{key:_,nonce:a.nonce,...E})))}function DS(...e){return t=>{e.forEach(a=>{typeof a=="function"?a(t):a!=null&&(a.current=t)})}}var RS=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{RS&&(window.__reactRouterVersion="7.12.0")}catch{}function OS({basename:e,children:t,unstable_useTransitions:a,window:r}){let l=S.useRef();l.current==null&&(l.current=cj({window:r,v5Compat:!0}));let u=l.current,[d,h]=S.useState({action:u.action,location:u.location}),m=S.useCallback(p=>{a===!1?h(p):S.startTransition(()=>h(p))},[a]);return S.useLayoutEffect(()=>u.listen(m),[u,m]),S.createElement(lS,{basename:e,children:t,location:d.location,navigationType:d.action,navigator:u,unstable_useTransitions:a})}var pv=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ba=S.forwardRef(function({onClick:t,discover:a="render",prefetch:r="none",relative:l,reloadDocument:u,replace:d,state:h,target:m,to:p,preventScrollReset:y,viewTransition:x,unstable_defaultShouldRevalidate:b,...v},w){let{basename:_,unstable_useTransitions:E}=S.useContext(rn),T=typeof p=="string"&&pv.test(p),A=sv(p,_);p=A.to;let C=Ij(p,{relative:l}),[k,L,j]=TS(r,v),R=LS(p,{replace:d,state:h,target:m,preventScrollReset:y,relative:l,viewTransition:x,unstable_defaultShouldRevalidate:b,unstable_useTransitions:E});function $(F){t&&t(F),F.defaultPrevented||R(F)}let H=S.createElement("a",{...v,...j,href:A.absoluteURL||C,onClick:A.isExternal||u?t:$,ref:DS(w,L),target:m,"data-discover":!T&&a==="render"?"true":void 0});return k&&!T?S.createElement(S.Fragment,null,H,S.createElement(AS,{page:C})):H});Ba.displayName="Link";var mv=S.forwardRef(function({"aria-current":t="page",caseSensitive:a=!1,className:r="",end:l=!1,style:u,to:d,viewTransition:h,children:m,...p},y){let x=qi(d,{relative:p.relative}),b=Ss(),v=S.useContext(wu),{navigator:w,basename:_}=S.useContext(rn),E=v!=null&&IS(x)&&h===!0,T=w.encodeLocation?w.encodeLocation(x).pathname:x.pathname,A=b.pathname,C=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;a||(A=A.toLowerCase(),C=C?C.toLowerCase():null,T=T.toLowerCase()),C&&_&&(C=ws(C,_)||C);const k=T!=="/"&&T.endsWith("/")?T.length-1:T.length;let L=A===T||!l&&A.startsWith(T)&&A.charAt(k)==="/",j=C!=null&&(C===T||!l&&C.startsWith(T)&&C.charAt(T.length)==="/"),R={isActive:L,isPending:j,isTransitioning:E},$=L?t:void 0,H;typeof r=="function"?H=r(R):H=[r,L?"active":null,j?"pending":null,E?"transitioning":null].filter(Boolean).join(" ");let F=typeof u=="function"?u(R):u;return S.createElement(Ba,{...p,"aria-current":$,className:H,ref:y,style:F,to:d,viewTransition:h},typeof m=="function"?m(R):m)});mv.displayName="NavLink";var $S=S.forwardRef(({discover:e="render",fetcherKey:t,navigate:a,reloadDocument:r,replace:l,state:u,method:d=Uc,action:h,onSubmit:m,relative:p,preventScrollReset:y,viewTransition:x,unstable_defaultShouldRevalidate:b,...v},w)=>{let{unstable_useTransitions:_}=S.useContext(rn),E=US(),T=qS(h,{relative:p}),A=d.toLowerCase()==="get"?"get":"post",C=typeof h=="string"&&pv.test(h),k=L=>{if(m&&m(L),L.defaultPrevented)return;L.preventDefault();let j=L.nativeEvent.submitter,R=j?.getAttribute("formmethod")||d,$=()=>E(j||L.currentTarget,{fetcherKey:t,method:R,navigate:a,replace:l,state:u,relative:p,preventScrollReset:y,viewTransition:x,unstable_defaultShouldRevalidate:b});_&&a!==!1?S.startTransition(()=>$()):$()};return S.createElement("form",{ref:w,method:A,action:T,onSubmit:r?m:k,...v,"data-discover":!C&&e==="render"?"true":void 0})});$S.displayName="Form";function zS(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function gv(e){let t=S.useContext(co);return Je(t,zS(e)),t}function LS(e,{target:t,replace:a,state:r,preventScrollReset:l,relative:u,viewTransition:d,unstable_defaultShouldRevalidate:h,unstable_useTransitions:m}={}){let p=Ga(),y=Ss(),x=qi(e,{relative:u});return S.useCallback(b=>{if(pS(b,t)){b.preventDefault();let v=a!==void 0?a:Ti(y)===Ti(x),w=()=>p(e,{replace:v,state:r,preventScrollReset:l,relative:u,viewTransition:d,unstable_defaultShouldRevalidate:h});m?S.startTransition(()=>w()):w()}},[y,p,x,a,r,t,e,l,u,d,h,m])}function BS(e){sn(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let t=S.useRef(Bh(e)),a=S.useRef(!1),r=Ss(),l=S.useMemo(()=>mS(r.search,a.current?null:t.current),[r.search]),u=Ga(),d=S.useCallback((h,m)=>{const p=Bh(typeof h=="function"?h(new URLSearchParams(l)):h);a.current=!0,u("?"+p,m)},[u,l]);return[l,d]}var PS=0,HS=()=>`__${String(++PS)}__`;function US(){let{router:e}=gv("useSubmit"),{basename:t}=S.useContext(rn),a=sS(),r=e.fetch,l=e.navigate;return S.useCallback(async(u,d={})=>{let{action:h,method:m,encType:p,formData:y,body:x}=yS(u,t);if(d.navigate===!1){let b=d.fetcherKey||HS();await r(b,a,d.action||h,{unstable_defaultShouldRevalidate:d.unstable_defaultShouldRevalidate,preventScrollReset:d.preventScrollReset,formData:y,body:x,formMethod:d.method||m,formEncType:d.encType||p,flushSync:d.flushSync})}else await l(d.action||h,{unstable_defaultShouldRevalidate:d.unstable_defaultShouldRevalidate,preventScrollReset:d.preventScrollReset,formData:y,body:x,formMethod:d.method||m,formEncType:d.encType||p,replace:d.replace,state:d.state,fromRouteId:a,flushSync:d.flushSync,viewTransition:d.viewTransition})},[r,l,t,a])}function qS(e,{relative:t}={}){let{basename:a}=S.useContext(rn),r=S.useContext(yn);Je(r,"useFormAction must be used inside a RouteContext");let[l]=r.matches.slice(-1),u={...qi(e||".",{relative:t})},d=Ss();if(e==null){u.search=d.search;let h=new URLSearchParams(u.search),m=h.getAll("index");if(m.some(y=>y==="")){h.delete("index"),m.filter(x=>x).forEach(x=>h.append("index",x));let y=h.toString();u.search=y?`?${y}`:""}}return(!e||e===".")&&l.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),a!=="/"&&(u.pathname=u.pathname==="/"?a:vs([a,u.pathname])),Ti(u)}function IS(e,{relative:t}={}){let a=S.useContext(rv);Je(a!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=gv("useViewTransitionState"),l=qi(e,{relative:t});if(!a.isTransitioning)return!1;let u=ws(a.currentLocation.pathname,r)||a.currentLocation.pathname,d=ws(a.nextLocation.pathname,r)||a.nextLocation.pathname;return Jc(l.pathname,d)!=null||Jc(l.pathname,u)!=null}Wb();const Zx=e=>{let t;const a=new Set,r=(p,y)=>{const x=typeof p=="function"?p(t):p;if(!Object.is(x,t)){const b=t;t=y??(typeof x!="object"||x===null)?x:Object.assign({},t,x),a.forEach(v=>v(t,b))}},l=()=>t,h={setState:r,getState:l,getInitialState:()=>m,subscribe:p=>(a.add(p),()=>a.delete(p))},m=t=e(r,l,h);return h},VS=(e=>e?Zx(e):Zx),FS=e=>e;function YS(e,t=FS){const a=Ir.useSyncExternalStore(e.subscribe,Ir.useCallback(()=>t(e.getState()),[e,t]),Ir.useCallback(()=>t(e.getInitialState()),[e,t]));return Ir.useDebugValue(a),a}const Jx=e=>{const t=VS(e),a=r=>YS(t,r);return Object.assign(a,t),a},xv=(e=>e?Jx(e):Jx);function XS(e,t){let a;try{a=e()}catch{return}return{getItem:l=>{var u;const d=m=>m===null?null:JSON.parse(m,void 0),h=(u=a.getItem(l))!=null?u:null;return h instanceof Promise?h.then(d):d(h)},setItem:(l,u)=>a.setItem(l,JSON.stringify(u,void 0)),removeItem:l=>a.removeItem(l)}}const Ph=e=>t=>{try{const a=e(t);return a instanceof Promise?a:{then(r){return Ph(r)(a)},catch(r){return this}}}catch(a){return{then(r){return this},catch(r){return Ph(r)(a)}}}},GS=(e,t)=>(a,r,l)=>{let u={storage:XS(()=>localStorage),partialize:E=>E,version:0,merge:(E,T)=>({...T,...E}),...t},d=!1,h=0;const m=new Set,p=new Set;let y=u.storage;if(!y)return e((...E)=>{console.warn(`[zustand persist middleware] Unable to update item '${u.name}', the given storage is currently unavailable.`),a(...E)},r,l);const x=()=>{const E=u.partialize({...r()});return y.setItem(u.name,{state:E,version:u.version})},b=l.setState;l.setState=(E,T)=>(b(E,T),x());const v=e((...E)=>(a(...E),x()),r,l);l.getInitialState=()=>v;let w;const _=()=>{var E,T;if(!y)return;const A=++h;d=!1,m.forEach(k=>{var L;return k((L=r())!=null?L:v)});const C=((T=u.onRehydrateStorage)==null?void 0:T.call(u,(E=r())!=null?E:v))||void 0;return Ph(y.getItem.bind(y))(u.name).then(k=>{if(k)if(typeof k.version=="number"&&k.version!==u.version){if(u.migrate){const L=u.migrate(k.state,k.version);return L instanceof Promise?L.then(j=>[!0,j]):[!0,L]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,k.state];return[!1,void 0]}).then(k=>{var L;if(A!==h)return;const[j,R]=k;if(w=u.merge(R,(L=r())!=null?L:v),a(w,!0),j)return x()}).then(()=>{A===h&&(C?.(w,void 0),w=r(),d=!0,p.forEach(k=>k(w)))}).catch(k=>{A===h&&C?.(void 0,k)})};return l.persist={setOptions:E=>{u={...u,...E},E.storage&&(y=E.storage)},clearStorage:()=>{y?.removeItem(u.name)},getOptions:()=>u,rehydrate:()=>_(),hasHydrated:()=>d,onHydrate:E=>(m.add(E),()=>{m.delete(E)}),onFinishHydration:E=>(p.add(E),()=>{p.delete(E)})},u.skipHydration||_(),w||v},KS=GS,Lt=xv(KS(e=>({user:null,agent:null,token:null,basicToken:null,isAuthenticated:!1,login:(t,a,r)=>{e({user:t,agent:t,token:a,basicToken:r,isAuthenticated:!0})},logout:()=>{e({user:null,agent:null,token:null,basicToken:null,isAuthenticated:!1})}}),{name:"auth-storage"})),Ee=e=>typeof e=="string",mi=()=>{let e,t;const a=new Promise((r,l)=>{e=r,t=l});return a.resolve=e,a.reject=t,a},ey=e=>e==null?"":""+e,QS=(e,t,a)=>{e.forEach(r=>{t[r]&&(a[r]=t[r])})},WS=/###/g,ty=e=>e&&e.indexOf("###")>-1?e.replace(WS,"."):e,ny=e=>!e||Ee(e),Si=(e,t,a)=>{const r=Ee(t)?t.split("."):t;let l=0;for(;l<r.length-1;){if(ny(e))return{};const u=ty(r[l]);!e[u]&&a&&(e[u]=new a),Object.prototype.hasOwnProperty.call(e,u)?e=e[u]:e={},++l}return ny(e)?{}:{obj:e,k:ty(r[l])}},sy=(e,t,a)=>{const{obj:r,k:l}=Si(e,t,Object);if(r!==void 0||t.length===1){r[l]=a;return}let u=t[t.length-1],d=t.slice(0,t.length-1),h=Si(e,d,Object);for(;h.obj===void 0&&d.length;)u=`${d[d.length-1]}.${u}`,d=d.slice(0,d.length-1),h=Si(e,d,Object),h?.obj&&typeof h.obj[`${h.k}.${u}`]<"u"&&(h.obj=void 0);h.obj[`${h.k}.${u}`]=a},ZS=(e,t,a,r)=>{const{obj:l,k:u}=Si(e,t,Object);l[u]=l[u]||[],l[u].push(a)},tu=(e,t)=>{const{obj:a,k:r}=Si(e,t);if(a&&Object.prototype.hasOwnProperty.call(a,r))return a[r]},JS=(e,t,a)=>{const r=tu(e,a);return r!==void 0?r:tu(t,a)},yv=(e,t,a)=>{for(const r in t)r!=="__proto__"&&r!=="constructor"&&(r in e?Ee(e[r])||e[r]instanceof String||Ee(t[r])||t[r]instanceof String?a&&(e[r]=t[r]):yv(e[r],t[r],a):e[r]=t[r]);return e},Lr=e=>e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var e5={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const t5=e=>Ee(e)?e.replace(/[&<>"'\/]/g,t=>e5[t]):e;class n5{constructor(t){this.capacity=t,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(t){const a=this.regExpMap.get(t);if(a!==void 0)return a;const r=new RegExp(t);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(t,r),this.regExpQueue.push(t),r}}const s5=[" ",",","?","!",";"],a5=new n5(20),r5=(e,t,a)=>{t=t||"",a=a||"";const r=s5.filter(d=>t.indexOf(d)<0&&a.indexOf(d)<0);if(r.length===0)return!0;const l=a5.getRegExp(`(${r.map(d=>d==="?"?"\\?":d).join("|")})`);let u=!l.test(e);if(!u){const d=e.indexOf(a);d>0&&!l.test(e.substring(0,d))&&(u=!0)}return u},Hh=(e,t,a=".")=>{if(!e)return;if(e[t])return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0;const r=t.split(a);let l=e;for(let u=0;u<r.length;){if(!l||typeof l!="object")return;let d,h="";for(let m=u;m<r.length;++m)if(m!==u&&(h+=a),h+=r[m],d=l[h],d!==void 0){if(["string","number","boolean"].indexOf(typeof d)>-1&&m<r.length-1)continue;u+=m-u+1;break}l=d}return l},Ai=e=>e?.replace("_","-"),o5={type:"logger",log(e){this.output("log",e)},warn(e){this.output("warn",e)},error(e){this.output("error",e)},output(e,t){console?.[e]?.apply?.(console,t)}};class nu{constructor(t,a={}){this.init(t,a)}init(t,a={}){this.prefix=a.prefix||"i18next:",this.logger=t||o5,this.options=a,this.debug=a.debug}log(...t){return this.forward(t,"log","",!0)}warn(...t){return this.forward(t,"warn","",!0)}error(...t){return this.forward(t,"error","")}deprecate(...t){return this.forward(t,"warn","WARNING DEPRECATED: ",!0)}forward(t,a,r,l){return l&&!this.debug?null:(Ee(t[0])&&(t[0]=`${r}${this.prefix} ${t[0]}`),this.logger[a](t))}create(t){return new nu(this.logger,{prefix:`${this.prefix}:${t}:`,...this.options})}clone(t){return t=t||this.options,t.prefix=t.prefix||this.prefix,new nu(this.logger,t)}}var Hn=new nu;class ju{constructor(){this.observers={}}on(t,a){return t.split(" ").forEach(r=>{this.observers[r]||(this.observers[r]=new Map);const l=this.observers[r].get(a)||0;this.observers[r].set(a,l+1)}),this}off(t,a){if(this.observers[t]){if(!a){delete this.observers[t];return}this.observers[t].delete(a)}}emit(t,...a){this.observers[t]&&Array.from(this.observers[t].entries()).forEach(([l,u])=>{for(let d=0;d<u;d++)l(...a)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([l,u])=>{for(let d=0;d<u;d++)l.apply(l,[t,...a])})}}class ay extends ju{constructor(t,a={ns:["translation"],defaultNS:"translation"}){super(),this.data=t||{},this.options=a,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(t){this.options.ns.indexOf(t)<0&&this.options.ns.push(t)}removeNamespaces(t){const a=this.options.ns.indexOf(t);a>-1&&this.options.ns.splice(a,1)}getResource(t,a,r,l={}){const u=l.keySeparator!==void 0?l.keySeparator:this.options.keySeparator,d=l.ignoreJSONStructure!==void 0?l.ignoreJSONStructure:this.options.ignoreJSONStructure;let h;t.indexOf(".")>-1?h=t.split("."):(h=[t,a],r&&(Array.isArray(r)?h.push(...r):Ee(r)&&u?h.push(...r.split(u)):h.push(r)));const m=tu(this.data,h);return!m&&!a&&!r&&t.indexOf(".")>-1&&(t=h[0],a=h[1],r=h.slice(2).join(".")),m||!d||!Ee(r)?m:Hh(this.data?.[t]?.[a],r,u)}addResource(t,a,r,l,u={silent:!1}){const d=u.keySeparator!==void 0?u.keySeparator:this.options.keySeparator;let h=[t,a];r&&(h=h.concat(d?r.split(d):r)),t.indexOf(".")>-1&&(h=t.split("."),l=a,a=h[1]),this.addNamespaces(a),sy(this.data,h,l),u.silent||this.emit("added",t,a,r,l)}addResources(t,a,r,l={silent:!1}){for(const u in r)(Ee(r[u])||Array.isArray(r[u]))&&this.addResource(t,a,u,r[u],{silent:!0});l.silent||this.emit("added",t,a,r)}addResourceBundle(t,a,r,l,u,d={silent:!1,skipCopy:!1}){let h=[t,a];t.indexOf(".")>-1&&(h=t.split("."),l=r,r=a,a=h[1]),this.addNamespaces(a);let m=tu(this.data,h)||{};d.skipCopy||(r=JSON.parse(JSON.stringify(r))),l?yv(m,r,u):m={...m,...r},sy(this.data,h,m),d.silent||this.emit("added",t,a,r)}removeResourceBundle(t,a){this.hasResourceBundle(t,a)&&delete this.data[t][a],this.removeNamespaces(a),this.emit("removed",t,a)}hasResourceBundle(t,a){return this.getResource(t,a)!==void 0}getResourceBundle(t,a){return a||(a=this.options.defaultNS),this.getResource(t,a)}getDataByLanguage(t){return this.data[t]}hasLanguageSomeTranslations(t){const a=this.getDataByLanguage(t);return!!(a&&Object.keys(a)||[]).find(l=>a[l]&&Object.keys(a[l]).length>0)}toJSON(){return this.data}}var bv={processors:{},addPostProcessor(e){this.processors[e.name]=e},handle(e,t,a,r,l){return e.forEach(u=>{t=this.processors[u]?.process(t,a,r,l)??t}),t}};const vv=Symbol("i18next/PATH_KEY");function i5(){const e=[],t=Object.create(null);let a;return t.get=(r,l)=>(a?.revoke?.(),l===vv?e:(e.push(l),a=Proxy.revocable(r,t),a.proxy)),Proxy.revocable(Object.create(null),t).proxy}function Uh(e,t){const{[vv]:a}=e(i5());return a.join(t?.keySeparator??".")}const ry={},mh=e=>!Ee(e)&&typeof e!="boolean"&&typeof e!="number";class su extends ju{constructor(t,a={}){super(),QS(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],t,this),this.options=a,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=Hn.create("translator")}changeLanguage(t){t&&(this.language=t)}exists(t,a={interpolation:{}}){const r={...a};if(t==null)return!1;const l=this.resolve(t,r);if(l?.res===void 0)return!1;const u=mh(l.res);return!(r.returnObjects===!1&&u)}extractFromKey(t,a){let r=a.nsSeparator!==void 0?a.nsSeparator:this.options.nsSeparator;r===void 0&&(r=":");const l=a.keySeparator!==void 0?a.keySeparator:this.options.keySeparator;let u=a.ns||this.options.defaultNS||[];const d=r&&t.indexOf(r)>-1,h=!this.options.userDefinedKeySeparator&&!a.keySeparator&&!this.options.userDefinedNsSeparator&&!a.nsSeparator&&!r5(t,r,l);if(d&&!h){const m=t.match(this.interpolator.nestingRegexp);if(m&&m.length>0)return{key:t,namespaces:Ee(u)?[u]:u};const p=t.split(r);(r!==l||r===l&&this.options.ns.indexOf(p[0])>-1)&&(u=p.shift()),t=p.join(l)}return{key:t,namespaces:Ee(u)?[u]:u}}translate(t,a,r){let l=typeof a=="object"?{...a}:a;if(typeof l!="object"&&this.options.overloadTranslationOptionHandler&&(l=this.options.overloadTranslationOptionHandler(arguments)),typeof l=="object"&&(l={...l}),l||(l={}),t==null)return"";typeof t=="function"&&(t=Uh(t,{...this.options,...l})),Array.isArray(t)||(t=[String(t)]);const u=l.returnDetails!==void 0?l.returnDetails:this.options.returnDetails,d=l.keySeparator!==void 0?l.keySeparator:this.options.keySeparator,{key:h,namespaces:m}=this.extractFromKey(t[t.length-1],l),p=m[m.length-1];let y=l.nsSeparator!==void 0?l.nsSeparator:this.options.nsSeparator;y===void 0&&(y=":");const x=l.lng||this.language,b=l.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(x?.toLowerCase()==="cimode")return b?u?{res:`${p}${y}${h}`,usedKey:h,exactUsedKey:h,usedLng:x,usedNS:p,usedParams:this.getUsedParamsDetails(l)}:`${p}${y}${h}`:u?{res:h,usedKey:h,exactUsedKey:h,usedLng:x,usedNS:p,usedParams:this.getUsedParamsDetails(l)}:h;const v=this.resolve(t,l);let w=v?.res;const _=v?.usedKey||h,E=v?.exactUsedKey||h,T=["[object Number]","[object Function]","[object RegExp]"],A=l.joinArrays!==void 0?l.joinArrays:this.options.joinArrays,C=!this.i18nFormat||this.i18nFormat.handleAsObject,k=l.count!==void 0&&!Ee(l.count),L=su.hasDefaultValue(l),j=k?this.pluralResolver.getSuffix(x,l.count,l):"",R=l.ordinal&&k?this.pluralResolver.getSuffix(x,l.count,{ordinal:!1}):"",$=k&&!l.ordinal&&l.count===0,H=$&&l[`defaultValue${this.options.pluralSeparator}zero`]||l[`defaultValue${j}`]||l[`defaultValue${R}`]||l.defaultValue;let F=w;C&&!w&&L&&(F=H);const P=mh(F),K=Object.prototype.toString.apply(F);if(C&&F&&P&&T.indexOf(K)<0&&!(Ee(A)&&Array.isArray(F))){if(!l.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const W=this.options.returnedObjectHandler?this.options.returnedObjectHandler(_,F,{...l,ns:m}):`key '${h} (${this.language})' returned an object instead of string.`;return u?(v.res=W,v.usedParams=this.getUsedParamsDetails(l),v):W}if(d){const W=Array.isArray(F),B=W?[]:{},G=W?E:_;for(const O in F)if(Object.prototype.hasOwnProperty.call(F,O)){const U=`${G}${d}${O}`;L&&!w?B[O]=this.translate(U,{...l,defaultValue:mh(H)?H[O]:void 0,joinArrays:!1,ns:m}):B[O]=this.translate(U,{...l,joinArrays:!1,ns:m}),B[O]===U&&(B[O]=F[O])}w=B}}else if(C&&Ee(A)&&Array.isArray(w))w=w.join(A),w&&(w=this.extendTranslation(w,t,l,r));else{let W=!1,B=!1;!this.isValidLookup(w)&&L&&(W=!0,w=H),this.isValidLookup(w)||(B=!0,w=h);const O=(l.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&B?void 0:w,U=L&&H!==w&&this.options.updateMissing;if(B||W||U){if(this.logger.log(U?"updateKey":"missingKey",x,p,h,U?H:w),d){const D=this.resolve(h,{...l,keySeparator:!1});D&&D.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let z=[];const I=this.languageUtils.getFallbackCodes(this.options.fallbackLng,l.lng||this.language);if(this.options.saveMissingTo==="fallback"&&I&&I[0])for(let D=0;D<I.length;D++)z.push(I[D]);else this.options.saveMissingTo==="all"?z=this.languageUtils.toResolveHierarchy(l.lng||this.language):z.push(l.lng||this.language);const q=(D,V,Z)=>{const ae=L&&Z!==w?Z:O;this.options.missingKeyHandler?this.options.missingKeyHandler(D,p,V,ae,U,l):this.backendConnector?.saveMissing&&this.backendConnector.saveMissing(D,p,V,ae,U,l),this.emit("missingKey",D,p,V,w)};this.options.saveMissing&&(this.options.saveMissingPlurals&&k?z.forEach(D=>{const V=this.pluralResolver.getSuffixes(D,l);$&&l[`defaultValue${this.options.pluralSeparator}zero`]&&V.indexOf(`${this.options.pluralSeparator}zero`)<0&&V.push(`${this.options.pluralSeparator}zero`),V.forEach(Z=>{q([D],h+Z,l[`defaultValue${Z}`]||H)})}):q(z,h,H))}w=this.extendTranslation(w,t,l,v,r),B&&w===h&&this.options.appendNamespaceToMissingKey&&(w=`${p}${y}${h}`),(B||W)&&this.options.parseMissingKeyHandler&&(w=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${p}${y}${h}`:h,W?w:void 0,l))}return u?(v.res=w,v.usedParams=this.getUsedParamsDetails(l),v):w}extendTranslation(t,a,r,l,u){if(this.i18nFormat?.parse)t=this.i18nFormat.parse(t,{...this.options.interpolation.defaultVariables,...r},r.lng||this.language||l.usedLng,l.usedNS,l.usedKey,{resolved:l});else if(!r.skipInterpolation){r.interpolation&&this.interpolator.init({...r,interpolation:{...this.options.interpolation,...r.interpolation}});const m=Ee(t)&&(r?.interpolation?.skipOnVariables!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let p;if(m){const x=t.match(this.interpolator.nestingRegexp);p=x&&x.length}let y=r.replace&&!Ee(r.replace)?r.replace:r;if(this.options.interpolation.defaultVariables&&(y={...this.options.interpolation.defaultVariables,...y}),t=this.interpolator.interpolate(t,y,r.lng||this.language||l.usedLng,r),m){const x=t.match(this.interpolator.nestingRegexp),b=x&&x.length;p<b&&(r.nest=!1)}!r.lng&&l&&l.res&&(r.lng=this.language||l.usedLng),r.nest!==!1&&(t=this.interpolator.nest(t,(...x)=>u?.[0]===x[0]&&!r.context?(this.logger.warn(`It seems you are nesting recursively key: ${x[0]} in key: ${a[0]}`),null):this.translate(...x,a),r)),r.interpolation&&this.interpolator.reset()}const d=r.postProcess||this.options.postProcess,h=Ee(d)?[d]:d;return t!=null&&h?.length&&r.applyPostProcessor!==!1&&(t=bv.handle(h,t,a,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...l,usedParams:this.getUsedParamsDetails(r)},...r}:r,this)),t}resolve(t,a={}){let r,l,u,d,h;return Ee(t)&&(t=[t]),t.forEach(m=>{if(this.isValidLookup(r))return;const p=this.extractFromKey(m,a),y=p.key;l=y;let x=p.namespaces;this.options.fallbackNS&&(x=x.concat(this.options.fallbackNS));const b=a.count!==void 0&&!Ee(a.count),v=b&&!a.ordinal&&a.count===0,w=a.context!==void 0&&(Ee(a.context)||typeof a.context=="number")&&a.context!=="",_=a.lngs?a.lngs:this.languageUtils.toResolveHierarchy(a.lng||this.language,a.fallbackLng);x.forEach(E=>{this.isValidLookup(r)||(h=E,!ry[`${_[0]}-${E}`]&&this.utils?.hasLoadedNamespace&&!this.utils?.hasLoadedNamespace(h)&&(ry[`${_[0]}-${E}`]=!0,this.logger.warn(`key "${l}" for languages "${_.join(", ")}" won't get resolved as namespace "${h}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),_.forEach(T=>{if(this.isValidLookup(r))return;d=T;const A=[y];if(this.i18nFormat?.addLookupKeys)this.i18nFormat.addLookupKeys(A,y,T,E,a);else{let k;b&&(k=this.pluralResolver.getSuffix(T,a.count,a));const L=`${this.options.pluralSeparator}zero`,j=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(b&&(a.ordinal&&k.indexOf(j)===0&&A.push(y+k.replace(j,this.options.pluralSeparator)),A.push(y+k),v&&A.push(y+L)),w){const R=`${y}${this.options.contextSeparator||"_"}${a.context}`;A.push(R),b&&(a.ordinal&&k.indexOf(j)===0&&A.push(R+k.replace(j,this.options.pluralSeparator)),A.push(R+k),v&&A.push(R+L))}}let C;for(;C=A.pop();)this.isValidLookup(r)||(u=C,r=this.getResource(T,E,C,a))}))})}),{res:r,usedKey:l,exactUsedKey:u,usedLng:d,usedNS:h}}isValidLookup(t){return t!==void 0&&!(!this.options.returnNull&&t===null)&&!(!this.options.returnEmptyString&&t==="")}getResource(t,a,r,l={}){return this.i18nFormat?.getResource?this.i18nFormat.getResource(t,a,r,l):this.resourceStore.getResource(t,a,r,l)}getUsedParamsDetails(t={}){const a=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],r=t.replace&&!Ee(t.replace);let l=r?t.replace:t;if(r&&typeof t.count<"u"&&(l.count=t.count),this.options.interpolation.defaultVariables&&(l={...this.options.interpolation.defaultVariables,...l}),!r){l={...l};for(const u of a)delete l[u]}return l}static hasDefaultValue(t){const a="defaultValue";for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&a===r.substring(0,a.length)&&t[r]!==void 0)return!0;return!1}}class oy{constructor(t){this.options=t,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Hn.create("languageUtils")}getScriptPartFromCode(t){if(t=Ai(t),!t||t.indexOf("-")<0)return null;const a=t.split("-");return a.length===2||(a.pop(),a[a.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(a.join("-"))}getLanguagePartFromCode(t){if(t=Ai(t),!t||t.indexOf("-")<0)return t;const a=t.split("-");return this.formatLanguageCode(a[0])}formatLanguageCode(t){if(Ee(t)&&t.indexOf("-")>-1){let a;try{a=Intl.getCanonicalLocales(t)[0]}catch{}return a&&this.options.lowerCaseLng&&(a=a.toLowerCase()),a||(this.options.lowerCaseLng?t.toLowerCase():t)}return this.options.cleanCode||this.options.lowerCaseLng?t.toLowerCase():t}isSupportedCode(t){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(t=this.getLanguagePartFromCode(t)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(t)>-1}getBestMatchFromCodes(t){if(!t)return null;let a;return t.forEach(r=>{if(a)return;const l=this.formatLanguageCode(r);(!this.options.supportedLngs||this.isSupportedCode(l))&&(a=l)}),!a&&this.options.supportedLngs&&t.forEach(r=>{if(a)return;const l=this.getScriptPartFromCode(r);if(this.isSupportedCode(l))return a=l;const u=this.getLanguagePartFromCode(r);if(this.isSupportedCode(u))return a=u;a=this.options.supportedLngs.find(d=>{if(d===u)return d;if(!(d.indexOf("-")<0&&u.indexOf("-")<0)&&(d.indexOf("-")>0&&u.indexOf("-")<0&&d.substring(0,d.indexOf("-"))===u||d.indexOf(u)===0&&u.length>1))return d})}),a||(a=this.getFallbackCodes(this.options.fallbackLng)[0]),a}getFallbackCodes(t,a){if(!t)return[];if(typeof t=="function"&&(t=t(a)),Ee(t)&&(t=[t]),Array.isArray(t))return t;if(!a)return t.default||[];let r=t[a];return r||(r=t[this.getScriptPartFromCode(a)]),r||(r=t[this.formatLanguageCode(a)]),r||(r=t[this.getLanguagePartFromCode(a)]),r||(r=t.default),r||[]}toResolveHierarchy(t,a){const r=this.getFallbackCodes((a===!1?[]:a)||this.options.fallbackLng||[],t),l=[],u=d=>{d&&(this.isSupportedCode(d)?l.push(d):this.logger.warn(`rejecting language code not found in supportedLngs: ${d}`))};return Ee(t)&&(t.indexOf("-")>-1||t.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&u(this.formatLanguageCode(t)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&u(this.getScriptPartFromCode(t)),this.options.load!=="currentOnly"&&u(this.getLanguagePartFromCode(t))):Ee(t)&&u(this.formatLanguageCode(t)),r.forEach(d=>{l.indexOf(d)<0&&u(this.formatLanguageCode(d))}),l}}const iy={zero:0,one:1,two:2,few:3,many:4,other:5},ly={select:e=>e===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class l5{constructor(t,a={}){this.languageUtils=t,this.options=a,this.logger=Hn.create("pluralResolver"),this.pluralRulesCache={}}clearCache(){this.pluralRulesCache={}}getRule(t,a={}){const r=Ai(t==="dev"?"en":t),l=a.ordinal?"ordinal":"cardinal",u=JSON.stringify({cleanedCode:r,type:l});if(u in this.pluralRulesCache)return this.pluralRulesCache[u];let d;try{d=new Intl.PluralRules(r,{type:l})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),ly;if(!t.match(/-|_/))return ly;const m=this.languageUtils.getLanguagePartFromCode(t);d=this.getRule(m,a)}return this.pluralRulesCache[u]=d,d}needsPlural(t,a={}){let r=this.getRule(t,a);return r||(r=this.getRule("dev",a)),r?.resolvedOptions().pluralCategories.length>1}getPluralFormsOfKey(t,a,r={}){return this.getSuffixes(t,r).map(l=>`${a}${l}`)}getSuffixes(t,a={}){let r=this.getRule(t,a);return r||(r=this.getRule("dev",a)),r?r.resolvedOptions().pluralCategories.sort((l,u)=>iy[l]-iy[u]).map(l=>`${this.options.prepend}${a.ordinal?`ordinal${this.options.prepend}`:""}${l}`):[]}getSuffix(t,a,r={}){const l=this.getRule(t,r);return l?`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${l.select(a)}`:(this.logger.warn(`no plural rule found for: ${t}`),this.getSuffix("dev",a,r))}}const cy=(e,t,a,r=".",l=!0)=>{let u=JS(e,t,a);return!u&&l&&Ee(a)&&(u=Hh(e,a,r),u===void 0&&(u=Hh(t,a,r))),u},gh=e=>e.replace(/\$/g,"$$$$");class uy{constructor(t={}){this.logger=Hn.create("interpolator"),this.options=t,this.format=t?.interpolation?.format||(a=>a),this.init(t)}init(t={}){t.interpolation||(t.interpolation={escapeValue:!0});const{escape:a,escapeValue:r,useRawValueToEscape:l,prefix:u,prefixEscaped:d,suffix:h,suffixEscaped:m,formatSeparator:p,unescapeSuffix:y,unescapePrefix:x,nestingPrefix:b,nestingPrefixEscaped:v,nestingSuffix:w,nestingSuffixEscaped:_,nestingOptionsSeparator:E,maxReplaces:T,alwaysFormat:A}=t.interpolation;this.escape=a!==void 0?a:t5,this.escapeValue=r!==void 0?r:!0,this.useRawValueToEscape=l!==void 0?l:!1,this.prefix=u?Lr(u):d||"{{",this.suffix=h?Lr(h):m||"}}",this.formatSeparator=p||",",this.unescapePrefix=y?"":x||"-",this.unescapeSuffix=this.unescapePrefix?"":y||"",this.nestingPrefix=b?Lr(b):v||Lr("$t("),this.nestingSuffix=w?Lr(w):_||Lr(")"),this.nestingOptionsSeparator=E||",",this.maxReplaces=T||1e3,this.alwaysFormat=A!==void 0?A:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const t=(a,r)=>a?.source===r?(a.lastIndex=0,a):new RegExp(r,"g");this.regexp=t(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=t(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=t(this.nestingRegexp,`${this.nestingPrefix}((?:[^()"']+|"[^"]*"|'[^']*'|\\((?:[^()]|"[^"]*"|'[^']*')*\\))*?)${this.nestingSuffix}`)}interpolate(t,a,r,l){let u,d,h;const m=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},p=v=>{if(v.indexOf(this.formatSeparator)<0){const T=cy(a,m,v,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(T,void 0,r,{...l,...a,interpolationkey:v}):T}const w=v.split(this.formatSeparator),_=w.shift().trim(),E=w.join(this.formatSeparator).trim();return this.format(cy(a,m,_,this.options.keySeparator,this.options.ignoreJSONStructure),E,r,{...l,...a,interpolationkey:_})};this.resetRegExp();const y=l?.missingInterpolationHandler||this.options.missingInterpolationHandler,x=l?.interpolation?.skipOnVariables!==void 0?l.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:v=>gh(v)},{regex:this.regexp,safeValue:v=>this.escapeValue?gh(this.escape(v)):gh(v)}].forEach(v=>{for(h=0;u=v.regex.exec(t);){const w=u[1].trim();if(d=p(w),d===void 0)if(typeof y=="function"){const E=y(t,u,l);d=Ee(E)?E:""}else if(l&&Object.prototype.hasOwnProperty.call(l,w))d="";else if(x){d=u[0];continue}else this.logger.warn(`missed to pass in variable ${w} for interpolating ${t}`),d="";else!Ee(d)&&!this.useRawValueToEscape&&(d=ey(d));const _=v.safeValue(d);if(t=t.replace(u[0],_),x?(v.regex.lastIndex+=d.length,v.regex.lastIndex-=u[0].length):v.regex.lastIndex=0,h++,h>=this.maxReplaces)break}}),t}nest(t,a,r={}){let l,u,d;const h=(m,p)=>{const y=this.nestingOptionsSeparator;if(m.indexOf(y)<0)return m;const x=m.split(new RegExp(`${y}[ ]*{`));let b=`{${x[1]}`;m=x[0],b=this.interpolate(b,d);const v=b.match(/'/g),w=b.match(/"/g);((v?.length??0)%2===0&&!w||w.length%2!==0)&&(b=b.replace(/'/g,'"'));try{d=JSON.parse(b),p&&(d={...p,...d})}catch(_){return this.logger.warn(`failed parsing options string in nesting for key ${m}`,_),`${m}${y}${b}`}return d.defaultValue&&d.defaultValue.indexOf(this.prefix)>-1&&delete d.defaultValue,m};for(;l=this.nestingRegexp.exec(t);){let m=[];d={...r},d=d.replace&&!Ee(d.replace)?d.replace:d,d.applyPostProcessor=!1,delete d.defaultValue;const p=/{.*}/.test(l[1])?l[1].lastIndexOf("}")+1:l[1].indexOf(this.formatSeparator);if(p!==-1&&(m=l[1].slice(p).split(this.formatSeparator).map(y=>y.trim()).filter(Boolean),l[1]=l[1].slice(0,p)),u=a(h.call(this,l[1].trim(),d),d),u&&l[0]===t&&!Ee(u))return u;Ee(u)||(u=ey(u)),u||(this.logger.warn(`missed to resolve ${l[1]} for nesting ${t}`),u=""),m.length&&(u=m.reduce((y,x)=>this.format(y,x,r.lng,{...r,interpolationkey:l[1].trim()}),u.trim())),t=t.replace(l[0],u),this.regexp.lastIndex=0}return t}}const c5=e=>{let t=e.toLowerCase().trim();const a={};if(e.indexOf("(")>-1){const r=e.split("(");t=r[0].toLowerCase().trim();const l=r[1].substring(0,r[1].length-1);t==="currency"&&l.indexOf(":")<0?a.currency||(a.currency=l.trim()):t==="relativetime"&&l.indexOf(":")<0?a.range||(a.range=l.trim()):l.split(";").forEach(d=>{if(d){const[h,...m]=d.split(":"),p=m.join(":").trim().replace(/^'+|'+$/g,""),y=h.trim();a[y]||(a[y]=p),p==="false"&&(a[y]=!1),p==="true"&&(a[y]=!0),isNaN(p)||(a[y]=parseInt(p,10))}})}return{formatName:t,formatOptions:a}},dy=e=>{const t={};return(a,r,l)=>{let u=l;l&&l.interpolationkey&&l.formatParams&&l.formatParams[l.interpolationkey]&&l[l.interpolationkey]&&(u={...u,[l.interpolationkey]:void 0});const d=r+JSON.stringify(u);let h=t[d];return h||(h=e(Ai(r),l),t[d]=h),h(a)}},u5=e=>(t,a,r)=>e(Ai(a),r)(t);class d5{constructor(t={}){this.logger=Hn.create("formatter"),this.options=t,this.init(t)}init(t,a={interpolation:{}}){this.formatSeparator=a.interpolation.formatSeparator||",";const r=a.cacheInBuiltFormats?dy:u5;this.formats={number:r((l,u)=>{const d=new Intl.NumberFormat(l,{...u});return h=>d.format(h)}),currency:r((l,u)=>{const d=new Intl.NumberFormat(l,{...u,style:"currency"});return h=>d.format(h)}),datetime:r((l,u)=>{const d=new Intl.DateTimeFormat(l,{...u});return h=>d.format(h)}),relativetime:r((l,u)=>{const d=new Intl.RelativeTimeFormat(l,{...u});return h=>d.format(h,u.range||"day")}),list:r((l,u)=>{const d=new Intl.ListFormat(l,{...u});return h=>d.format(h)})}}add(t,a){this.formats[t.toLowerCase().trim()]=a}addCached(t,a){this.formats[t.toLowerCase().trim()]=dy(a)}format(t,a,r,l={}){const u=a.split(this.formatSeparator);if(u.length>1&&u[0].indexOf("(")>1&&u[0].indexOf(")")<0&&u.find(h=>h.indexOf(")")>-1)){const h=u.findIndex(m=>m.indexOf(")")>-1);u[0]=[u[0],...u.splice(1,h)].join(this.formatSeparator)}return u.reduce((h,m)=>{const{formatName:p,formatOptions:y}=c5(m);if(this.formats[p]){let x=h;try{const b=l?.formatParams?.[l.interpolationkey]||{},v=b.locale||b.lng||l.locale||l.lng||r;x=this.formats[p](h,v,{...y,...l,...b})}catch(b){this.logger.warn(b)}return x}else this.logger.warn(`there was no format function for ${p}`);return h},t)}}const f5=(e,t)=>{e.pending[t]!==void 0&&(delete e.pending[t],e.pendingCount--)};class h5 extends ju{constructor(t,a,r,l={}){super(),this.backend=t,this.store=a,this.services=r,this.languageUtils=r.languageUtils,this.options=l,this.logger=Hn.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=l.maxParallelReads||10,this.readingCalls=0,this.maxRetries=l.maxRetries>=0?l.maxRetries:5,this.retryTimeout=l.retryTimeout>=1?l.retryTimeout:350,this.state={},this.queue=[],this.backend?.init?.(r,l.backend,l)}queueLoad(t,a,r,l){const u={},d={},h={},m={};return t.forEach(p=>{let y=!0;a.forEach(x=>{const b=`${p}|${x}`;!r.reload&&this.store.hasResourceBundle(p,x)?this.state[b]=2:this.state[b]<0||(this.state[b]===1?d[b]===void 0&&(d[b]=!0):(this.state[b]=1,y=!1,d[b]===void 0&&(d[b]=!0),u[b]===void 0&&(u[b]=!0),m[x]===void 0&&(m[x]=!0)))}),y||(h[p]=!0)}),(Object.keys(u).length||Object.keys(d).length)&&this.queue.push({pending:d,pendingCount:Object.keys(d).length,loaded:{},errors:[],callback:l}),{toLoad:Object.keys(u),pending:Object.keys(d),toLoadLanguages:Object.keys(h),toLoadNamespaces:Object.keys(m)}}loaded(t,a,r){const l=t.split("|"),u=l[0],d=l[1];a&&this.emit("failedLoading",u,d,a),!a&&r&&this.store.addResourceBundle(u,d,r,void 0,void 0,{skipCopy:!0}),this.state[t]=a?-1:2,a&&r&&(this.state[t]=0);const h={};this.queue.forEach(m=>{ZS(m.loaded,[u],d),f5(m,t),a&&m.errors.push(a),m.pendingCount===0&&!m.done&&(Object.keys(m.loaded).forEach(p=>{h[p]||(h[p]={});const y=m.loaded[p];y.length&&y.forEach(x=>{h[p][x]===void 0&&(h[p][x]=!0)})}),m.done=!0,m.errors.length?m.callback(m.errors):m.callback())}),this.emit("loaded",h),this.queue=this.queue.filter(m=>!m.done)}read(t,a,r,l=0,u=this.retryTimeout,d){if(!t.length)return d(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:t,ns:a,fcName:r,tried:l,wait:u,callback:d});return}this.readingCalls++;const h=(p,y)=>{if(this.readingCalls--,this.waitingReads.length>0){const x=this.waitingReads.shift();this.read(x.lng,x.ns,x.fcName,x.tried,x.wait,x.callback)}if(p&&y&&l<this.maxRetries){setTimeout(()=>{this.read.call(this,t,a,r,l+1,u*2,d)},u);return}d(p,y)},m=this.backend[r].bind(this.backend);if(m.length===2){try{const p=m(t,a);p&&typeof p.then=="function"?p.then(y=>h(null,y)).catch(h):h(null,p)}catch(p){h(p)}return}return m(t,a,h)}prepareLoading(t,a,r={},l){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),l&&l();Ee(t)&&(t=this.languageUtils.toResolveHierarchy(t)),Ee(a)&&(a=[a]);const u=this.queueLoad(t,a,r,l);if(!u.toLoad.length)return u.pending.length||l(),null;u.toLoad.forEach(d=>{this.loadOne(d)})}load(t,a,r){this.prepareLoading(t,a,{},r)}reload(t,a,r){this.prepareLoading(t,a,{reload:!0},r)}loadOne(t,a=""){const r=t.split("|"),l=r[0],u=r[1];this.read(l,u,"read",void 0,void 0,(d,h)=>{d&&this.logger.warn(`${a}loading namespace ${u} for language ${l} failed`,d),!d&&h&&this.logger.log(`${a}loaded namespace ${u} for language ${l}`,h),this.loaded(t,d,h)})}saveMissing(t,a,r,l,u,d={},h=()=>{}){if(this.services?.utils?.hasLoadedNamespace&&!this.services?.utils?.hasLoadedNamespace(a)){this.logger.warn(`did not save key "${r}" as the namespace "${a}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(r==null||r==="")){if(this.backend?.create){const m={...d,isUpdate:u},p=this.backend.create.bind(this.backend);if(p.length<6)try{let y;p.length===5?y=p(t,a,r,l,m):y=p(t,a,r,l),y&&typeof y.then=="function"?y.then(x=>h(null,x)).catch(h):h(null,y)}catch(y){h(y)}else p(t,a,r,l,h,m)}!t||!t[0]||this.store.addResource(t[0],a,r,l)}}}const xh=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:e=>{let t={};if(typeof e[1]=="object"&&(t=e[1]),Ee(e[1])&&(t.defaultValue=e[1]),Ee(e[2])&&(t.tDescription=e[2]),typeof e[2]=="object"||typeof e[3]=="object"){const a=e[3]||e[2];Object.keys(a).forEach(r=>{t[r]=a[r]})}return t},interpolation:{escapeValue:!0,format:e=>e,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),fy=e=>(Ee(e.ns)&&(e.ns=[e.ns]),Ee(e.fallbackLng)&&(e.fallbackLng=[e.fallbackLng]),Ee(e.fallbackNS)&&(e.fallbackNS=[e.fallbackNS]),e.supportedLngs?.indexOf?.("cimode")<0&&(e.supportedLngs=e.supportedLngs.concat(["cimode"])),typeof e.initImmediate=="boolean"&&(e.initAsync=e.initImmediate),e),Cc=()=>{},p5=e=>{Object.getOwnPropertyNames(Object.getPrototypeOf(e)).forEach(a=>{typeof e[a]=="function"&&(e[a]=e[a].bind(e))})};class Ci extends ju{constructor(t={},a){if(super(),this.options=fy(t),this.services={},this.logger=Hn,this.modules={external:[]},p5(this),a&&!this.isInitialized&&!t.isClone){if(!this.options.initAsync)return this.init(t,a),this;setTimeout(()=>{this.init(t,a)},0)}}init(t={},a){this.isInitializing=!0,typeof t=="function"&&(a=t,t={}),t.defaultNS==null&&t.ns&&(Ee(t.ns)?t.defaultNS=t.ns:t.ns.indexOf("translation")<0&&(t.defaultNS=t.ns[0]));const r=xh();this.options={...r,...this.options,...fy(t)},this.options.interpolation={...r.interpolation,...this.options.interpolation},t.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=t.keySeparator),t.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=t.nsSeparator),typeof this.options.overloadTranslationOptionHandler!="function"&&(this.options.overloadTranslationOptionHandler=r.overloadTranslationOptionHandler),this.options.debug===!0&&typeof console<"u"&&console.warn("i18next is maintained with support from locize.com  consider powering your project with managed localization (AI, CDN, integrations): https://locize.com");const l=p=>p?typeof p=="function"?new p:p:null;if(!this.options.isClone){this.modules.logger?Hn.init(l(this.modules.logger),this.options):Hn.init(null,this.options);let p;this.modules.formatter?p=this.modules.formatter:p=d5;const y=new oy(this.options);this.store=new ay(this.options.resources,this.options);const x=this.services;x.logger=Hn,x.resourceStore=this.store,x.languageUtils=y,x.pluralResolver=new l5(y,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),this.options.interpolation.format&&this.options.interpolation.format!==r.interpolation.format&&this.logger.deprecate("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),p&&(!this.options.interpolation.format||this.options.interpolation.format===r.interpolation.format)&&(x.formatter=l(p),x.formatter.init&&x.formatter.init(x,this.options),this.options.interpolation.format=x.formatter.format.bind(x.formatter)),x.interpolator=new uy(this.options),x.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},x.backendConnector=new h5(l(this.modules.backend),x.resourceStore,x,this.options),x.backendConnector.on("*",(v,...w)=>{this.emit(v,...w)}),this.modules.languageDetector&&(x.languageDetector=l(this.modules.languageDetector),x.languageDetector.init&&x.languageDetector.init(x,this.options.detection,this.options)),this.modules.i18nFormat&&(x.i18nFormat=l(this.modules.i18nFormat),x.i18nFormat.init&&x.i18nFormat.init(this)),this.translator=new su(this.services,this.options),this.translator.on("*",(v,...w)=>{this.emit(v,...w)}),this.modules.external.forEach(v=>{v.init&&v.init(this)})}if(this.format=this.options.interpolation.format,a||(a=Cc),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const p=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);p.length>0&&p[0]!=="dev"&&(this.options.lng=p[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(p=>{this[p]=(...y)=>this.store[p](...y)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(p=>{this[p]=(...y)=>(this.store[p](...y),this)});const h=mi(),m=()=>{const p=(y,x)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),h.resolve(x),a(y,x)};if(this.languages&&!this.isInitialized)return p(null,this.t.bind(this));this.changeLanguage(this.options.lng,p)};return this.options.resources||!this.options.initAsync?m():setTimeout(m,0),h}loadResources(t,a=Cc){let r=a;const l=Ee(t)?t:this.language;if(typeof t=="function"&&(r=t),!this.options.resources||this.options.partialBundledLanguages){if(l?.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return r();const u=[],d=h=>{if(!h||h==="cimode")return;this.services.languageUtils.toResolveHierarchy(h).forEach(p=>{p!=="cimode"&&u.indexOf(p)<0&&u.push(p)})};l?d(l):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(m=>d(m)),this.options.preload?.forEach?.(h=>d(h)),this.services.backendConnector.load(u,this.options.ns,h=>{!h&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),r(h)})}else r(null)}reloadResources(t,a,r){const l=mi();return typeof t=="function"&&(r=t,t=void 0),typeof a=="function"&&(r=a,a=void 0),t||(t=this.languages),a||(a=this.options.ns),r||(r=Cc),this.services.backendConnector.reload(t,a,u=>{l.resolve(),r(u)}),l}use(t){if(!t)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!t.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return t.type==="backend"&&(this.modules.backend=t),(t.type==="logger"||t.log&&t.warn&&t.error)&&(this.modules.logger=t),t.type==="languageDetector"&&(this.modules.languageDetector=t),t.type==="i18nFormat"&&(this.modules.i18nFormat=t),t.type==="postProcessor"&&bv.addPostProcessor(t),t.type==="formatter"&&(this.modules.formatter=t),t.type==="3rdParty"&&this.modules.external.push(t),this}setResolvedLanguage(t){if(!(!t||!this.languages)&&!(["cimode","dev"].indexOf(t)>-1)){for(let a=0;a<this.languages.length;a++){const r=this.languages[a];if(!(["cimode","dev"].indexOf(r)>-1)&&this.store.hasLanguageSomeTranslations(r)){this.resolvedLanguage=r;break}}!this.resolvedLanguage&&this.languages.indexOf(t)<0&&this.store.hasLanguageSomeTranslations(t)&&(this.resolvedLanguage=t,this.languages.unshift(t))}}changeLanguage(t,a){this.isLanguageChangingTo=t;const r=mi();this.emit("languageChanging",t);const l=h=>{this.language=h,this.languages=this.services.languageUtils.toResolveHierarchy(h),this.resolvedLanguage=void 0,this.setResolvedLanguage(h)},u=(h,m)=>{m?this.isLanguageChangingTo===t&&(l(m),this.translator.changeLanguage(m),this.isLanguageChangingTo=void 0,this.emit("languageChanged",m),this.logger.log("languageChanged",m)):this.isLanguageChangingTo=void 0,r.resolve((...p)=>this.t(...p)),a&&a(h,(...p)=>this.t(...p))},d=h=>{!t&&!h&&this.services.languageDetector&&(h=[]);const m=Ee(h)?h:h&&h[0],p=this.store.hasLanguageSomeTranslations(m)?m:this.services.languageUtils.getBestMatchFromCodes(Ee(h)?[h]:h);p&&(this.language||l(p),this.translator.language||this.translator.changeLanguage(p),this.services.languageDetector?.cacheUserLanguage?.(p)),this.loadResources(p,y=>{u(y,p)})};return!t&&this.services.languageDetector&&!this.services.languageDetector.async?d(this.services.languageDetector.detect()):!t&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(d):this.services.languageDetector.detect(d):d(t),r}getFixedT(t,a,r){const l=(u,d,...h)=>{let m;typeof d!="object"?m=this.options.overloadTranslationOptionHandler([u,d].concat(h)):m={...d},m.lng=m.lng||l.lng,m.lngs=m.lngs||l.lngs,m.ns=m.ns||l.ns,m.keyPrefix!==""&&(m.keyPrefix=m.keyPrefix||r||l.keyPrefix);const p=this.options.keySeparator||".";let y;return m.keyPrefix&&Array.isArray(u)?y=u.map(x=>(typeof x=="function"&&(x=Uh(x,{...this.options,...d})),`${m.keyPrefix}${p}${x}`)):(typeof u=="function"&&(u=Uh(u,{...this.options,...d})),y=m.keyPrefix?`${m.keyPrefix}${p}${u}`:u),this.t(y,m)};return Ee(t)?l.lng=t:l.lngs=t,l.ns=a,l.keyPrefix=r,l}t(...t){return this.translator?.translate(...t)}exists(...t){return this.translator?.exists(...t)}setDefaultNamespace(t){this.options.defaultNS=t}hasLoadedNamespace(t,a={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const r=a.lng||this.resolvedLanguage||this.languages[0],l=this.options?this.options.fallbackLng:!1,u=this.languages[this.languages.length-1];if(r.toLowerCase()==="cimode")return!0;const d=(h,m)=>{const p=this.services.backendConnector.state[`${h}|${m}`];return p===-1||p===0||p===2};if(a.precheck){const h=a.precheck(this,d);if(h!==void 0)return h}return!!(this.hasResourceBundle(r,t)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||d(r,t)&&(!l||d(u,t)))}loadNamespaces(t,a){const r=mi();return this.options.ns?(Ee(t)&&(t=[t]),t.forEach(l=>{this.options.ns.indexOf(l)<0&&this.options.ns.push(l)}),this.loadResources(l=>{r.resolve(),a&&a(l)}),r):(a&&a(),Promise.resolve())}loadLanguages(t,a){const r=mi();Ee(t)&&(t=[t]);const l=this.options.preload||[],u=t.filter(d=>l.indexOf(d)<0&&this.services.languageUtils.isSupportedCode(d));return u.length?(this.options.preload=l.concat(u),this.loadResources(d=>{r.resolve(),a&&a(d)}),r):(a&&a(),Promise.resolve())}dir(t){if(t||(t=this.resolvedLanguage||(this.languages?.length>0?this.languages[0]:this.language)),!t)return"rtl";try{const l=new Intl.Locale(t);if(l&&l.getTextInfo){const u=l.getTextInfo();if(u&&u.direction)return u.direction}}catch{}const a=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],r=this.services?.languageUtils||new oy(xh());return t.toLowerCase().indexOf("-latn")>1?"ltr":a.indexOf(r.getLanguagePartFromCode(t))>-1||t.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(t={},a){const r=new Ci(t,a);return r.createInstance=Ci.createInstance,r}cloneInstance(t={},a=Cc){const r=t.forkResourceStore;r&&delete t.forkResourceStore;const l={...this.options,...t,isClone:!0},u=new Ci(l);if((t.debug!==void 0||t.prefix!==void 0)&&(u.logger=u.logger.clone(t)),["store","services","language"].forEach(h=>{u[h]=this[h]}),u.services={...this.services},u.services.utils={hasLoadedNamespace:u.hasLoadedNamespace.bind(u)},r){const h=Object.keys(this.store.data).reduce((m,p)=>(m[p]={...this.store.data[p]},m[p]=Object.keys(m[p]).reduce((y,x)=>(y[x]={...m[p][x]},y),m[p]),m),{});u.store=new ay(h,l),u.services.resourceStore=u.store}if(t.interpolation){const m={...xh().interpolation,...this.options.interpolation,...t.interpolation},p={...l,interpolation:m};u.services.interpolator=new uy(p)}return u.translator=new su(u.services,l),u.translator.on("*",(h,...m)=>{u.emit(h,...m)}),u.init(l,a),u.translator.options=l,u.translator.backendConnector.services.utils={hasLoadedNamespace:u.hasLoadedNamespace.bind(u)},u}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const Rt=Ci.createInstance();Rt.createInstance;Rt.dir;Rt.init;Rt.loadResources;Rt.reloadResources;Rt.use;Rt.changeLanguage;Rt.getFixedT;Rt.t;Rt.exists;Rt.setDefaultNamespace;Rt.hasLoadedNamespace;Rt.loadNamespaces;Rt.loadLanguages;const m5=(e,t,a,r)=>{const l=[a,{code:t,...r||{}}];if(e?.services?.logger?.forward)return e.services.logger.forward(l,"warn","react-i18next::",!0);Ia(l[0])&&(l[0]=`react-i18next:: ${l[0]}`),e?.services?.logger?.warn?e.services.logger.warn(...l):console?.warn&&console.warn(...l)},hy={},wv=(e,t,a,r)=>{Ia(a)&&hy[a]||(Ia(a)&&(hy[a]=new Date),m5(e,t,a,r))},Nv=(e,t)=>()=>{if(e.isInitialized)t();else{const a=()=>{setTimeout(()=>{e.off("initialized",a)},0),t()};e.on("initialized",a)}},qh=(e,t,a)=>{e.loadNamespaces(t,Nv(e,a))},py=(e,t,a,r)=>{if(Ia(a)&&(a=[a]),e.options.preload&&e.options.preload.indexOf(t)>-1)return qh(e,a,r);a.forEach(l=>{e.options.ns.indexOf(l)<0&&e.options.ns.push(l)}),e.loadLanguages(t,Nv(e,r))},g5=(e,t,a={})=>!t.languages||!t.languages.length?(wv(t,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:t.languages}),!0):t.hasLoadedNamespace(e,{lng:a.lng,precheck:(r,l)=>{if(a.bindI18n&&a.bindI18n.indexOf("languageChanging")>-1&&r.services.backendConnector.backend&&r.isLanguageChangingTo&&!l(r.isLanguageChangingTo,e))return!1}}),Ia=e=>typeof e=="string",x5=e=>typeof e=="object"&&e!==null,y5=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,b5={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},v5=e=>b5[e],w5=e=>e.replace(y5,v5);let Ih={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:w5,transDefaultProps:void 0};const N5=(e={})=>{Ih={...Ih,...e}},j5=()=>Ih;let jv;const S5=e=>{jv=e},C5=()=>jv,E5={type:"3rdParty",init(e){N5(e.options.react),S5(e)}},_5=S.createContext();class T5{constructor(){this.usedNamespaces={}}addUsedNamespaces(t){t.forEach(a=>{this.usedNamespaces[a]||(this.usedNamespaces[a]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}var yh={exports:{}},bh={};var my;function A5(){if(my)return bh;my=1;var e=Hi();function t(x,b){return x===b&&(x!==0||1/x===1/b)||x!==x&&b!==b}var a=typeof Object.is=="function"?Object.is:t,r=e.useState,l=e.useEffect,u=e.useLayoutEffect,d=e.useDebugValue;function h(x,b){var v=b(),w=r({inst:{value:v,getSnapshot:b}}),_=w[0].inst,E=w[1];return u(function(){_.value=v,_.getSnapshot=b,m(_)&&E({inst:_})},[x,v,b]),l(function(){return m(_)&&E({inst:_}),x(function(){m(_)&&E({inst:_})})},[x]),d(v),v}function m(x){var b=x.getSnapshot;x=x.value;try{var v=b();return!a(x,v)}catch{return!0}}function p(x,b){return b()}var y=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?p:h;return bh.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:y,bh}var gy;function Sv(){return gy||(gy=1,yh.exports=A5()),yh.exports}var k5=Sv();const M5=(e,t)=>Ia(t)?t:x5(t)&&Ia(t.defaultValue)?t.defaultValue:Array.isArray(e)?e[e.length-1]:e,D5={t:M5,ready:!1},R5=()=>()=>{},ze=(e,t={})=>{const{i18n:a}=t,{i18n:r,defaultNS:l}=S.useContext(_5)||{},u=a||r||C5();u&&!u.reportNamespaces&&(u.reportNamespaces=new T5),u||wv(u,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const d=S.useMemo(()=>({...j5(),...u?.options?.react,...t}),[u,t]),{useSuspense:h,keyPrefix:m}=d,p=e||l||u?.options?.defaultNS,y=Ia(p)?[p]:p||["translation"],x=S.useMemo(()=>y,y);u?.reportNamespaces?.addUsedNamespaces?.(x);const b=S.useRef(0),v=S.useCallback(H=>{if(!u)return R5;const{bindI18n:F,bindI18nStore:P}=d,K=()=>{b.current+=1,H()};return F&&u.on(F,K),P&&u.store.on(P,K),()=>{F&&F.split(" ").forEach(W=>u.off(W,K)),P&&P.split(" ").forEach(W=>u.store.off(W,K))}},[u,d]),w=S.useRef(),_=S.useCallback(()=>{if(!u)return D5;const H=!!(u.isInitialized||u.initializedStoreOnce)&&x.every(G=>g5(G,u,d)),F=t.lng||u.language,P=b.current,K=w.current;if(K&&K.ready===H&&K.lng===F&&K.keyPrefix===m&&K.revision===P)return K;const B={t:u.getFixedT(F,d.nsMode==="fallback"?x:x[0],m),ready:H,lng:F,keyPrefix:m,revision:P};return w.current=B,B},[u,x,m,d,t.lng]),[E,T]=S.useState(0),{t:A,ready:C}=k5.useSyncExternalStore(v,_,_);S.useEffect(()=>{if(u&&!C&&!h){const H=()=>T(F=>F+1);t.lng?py(u,t.lng,x,H):qh(u,x,H)}},[u,t.lng,x,C,h,E]);const k=u||{},L=S.useRef(null),j=S.useRef(),R=H=>{const F=Object.getOwnPropertyDescriptors(H);F.__original&&delete F.__original;const P=Object.create(Object.getPrototypeOf(H),F);if(!Object.prototype.hasOwnProperty.call(P,"__original"))try{Object.defineProperty(P,"__original",{value:H,writable:!1,enumerable:!1,configurable:!1})}catch{}return P},$=S.useMemo(()=>{const H=k,F=H?.language;let P=H;H&&(L.current&&L.current.__original===H?j.current!==F?(P=R(H),L.current=P,j.current=F):P=L.current:(P=R(H),L.current=P,j.current=F));const K=[A,P,C];return K.t=A,K.i18n=P,K.ready=C,K},[A,k,C,k.resolvedLanguage,k.language,k.languages]);if(u&&h&&!C)throw new Promise(H=>{const F=()=>H();t.lng?py(u,t.lng,x,F):qh(u,x,F)});return $};const O5=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),$5=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,a,r)=>r?r.toUpperCase():a.toLowerCase()),xy=e=>{const t=$5(e);return t.charAt(0).toUpperCase()+t.slice(1)},Cv=(...e)=>e.filter((t,a,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===a).join(" ").trim(),z5=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};var L5={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const B5=S.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:a=2,absoluteStrokeWidth:r,className:l="",children:u,iconNode:d,...h},m)=>S.createElement("svg",{ref:m,...L5,width:t,height:t,stroke:e,strokeWidth:r?Number(a)*24/Number(t):a,className:Cv("lucide",l),...!u&&!z5(h)&&{"aria-hidden":"true"},...h},[...d.map(([p,y])=>S.createElement(p,y)),...Array.isArray(u)?u:[u]]));const xe=(e,t)=>{const a=S.forwardRef(({className:r,...l},u)=>S.createElement(B5,{ref:u,iconNode:t,className:Cv(`lucide-${O5(xy(e))}`,`lucide-${e}`,r),...l}));return a.displayName=xy(e),a};const P5=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],ra=xe("activity",P5);const H5=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],U5=xe("arrow-left",H5);const q5=[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]],bp=xe("arrow-right-left",q5);const I5=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],V5=xe("arrow-right",I5);const F5=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],la=xe("book-open",F5);const Y5=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],vp=xe("bot",Y5);const X5=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],Un=xe("brain",X5);const G5=[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]],Yr=xe("building-2",G5);const K5=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],wp=xe("chart-column",K5);const Q5=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Dt=xe("check",Q5);const W5=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Z5=xe("chevron-down",W5);const J5=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],e4=xe("chevron-left",J5);const t4=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Ii=xe("chevron-right",t4);const n4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],s4=xe("circle-alert",n4);const a4=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],au=xe("circle-check-big",a4);const r4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Np=xe("circle-x",r4);const o4=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Qr=xe("clock",o4);const i4=[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]],ru=xe("code",i4);const l4=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],Wr=xe("dollar-sign",l4);const c4=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],u4=xe("download",c4);const d4=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],f4=xe("eye-off",d4);const h4=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],jp=xe("eye",h4);const p4=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],fo=xe("file-text",p4);const m4=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],Sp=xe("funnel",m4);const g4=[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]],Cp=xe("git-branch",g4);const x4=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],y4=xe("heart",x4);const b4=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],v4=xe("image",b4);const w4=[["polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12",key:"o97t9d"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}]],yy=xe("inbox",w4);const N4=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],j4=xe("key",N4);const S4=[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]],Ev=xe("languages",S4);const C4=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],E4=xe("layout-dashboard",C4);const _4=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],T4=xe("loader-circle",_4);const A4=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],k4=xe("log-out",A4);const M4=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],D4=xe("map-pin",M4);const R4=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],Xt=xe("message-square",R4);const O4=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]],$4=xe("mic",O4);const z4=[["path",{d:"M5 12h14",key:"1ays0h"}]],_v=xe("minus",z4);const L4=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Tv=xe("pen-line",L4);const B4=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],Su=xe("phone",B4);const P4=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],Av=xe("play",P4);const H4=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Cu=xe("plus",H4);const U4=[["path",{d:"M16.247 7.761a6 6 0 0 1 0 8.478",key:"1fwjs5"}],["path",{d:"M19.075 4.933a10 10 0 0 1 0 14.134",key:"ehdyv1"}],["path",{d:"M4.925 19.067a10 10 0 0 1 0-14.134",key:"1q22gi"}],["path",{d:"M7.753 16.239a6 6 0 0 1 0-8.478",key:"r2q7qm"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],q4=xe("radio",U4);const I4=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],da=xe("refresh-cw",I4);const V4=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],kv=xe("rotate-ccw",V4);const F4=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Y4=xe("save",F4);const X4=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Ep=xe("search",X4);const G4=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],_p=xe("send",G4);const K4=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],ca=xe("shield",K4);const Q4=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],Zr=xe("sparkles",Q4);const W4=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Eu=xe("square-pen",W4);const Z4=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],J4=xe("tag",Z4);const eC=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],_u=xe("target",eC);const tC=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],ho=xe("trash-2",tC);const nC=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],ou=xe("trending-up",nC);const sC=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],vi=xe("triangle-alert",sC);const aC=[["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m14.305 16.53.923-.382",key:"1itpsq"}],["path",{d:"m15.228 13.852-.923-.383",key:"eplpkm"}],["path",{d:"m16.852 12.228-.383-.923",key:"13v3q0"}],["path",{d:"m16.852 17.772-.383.924",key:"1i8mnm"}],["path",{d:"m19.148 12.228.383-.923",key:"1q8j1v"}],["path",{d:"m19.53 18.696-.382-.924",key:"vk1qj3"}],["path",{d:"m20.772 13.852.924-.383",key:"n880s0"}],["path",{d:"m20.772 16.148.924.383",key:"1g6xey"}],["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],rC=xe("user-cog",aC);const oC=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],Jr=xe("user-plus",oC);const iC=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Pa=xe("user",iC);const lC=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Tu=xe("users",lC);const cC=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Vn=xe("x",cC);const uC=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Vi=xe("zap",uC);function dC(){const e=Ga(),{agent:t,logout:a}=Lt(),{t:r,i18n:l}=ze("common"),u=t?.role==="supervisor",d=[{to:"/dashboard",icon:E4,label:r("nav.dashboard")},{to:"/conversations",icon:Xt,label:r("nav.conversations")},...u?[{to:"/agents",icon:rC,label:r("nav.agents")},{to:"/departments",icon:Yr,label:r("nav.departments")},{to:"/flows",icon:Cp,label:r("nav.flows")},{to:"/logs",icon:ra,label:r("nav.logs")},{to:"/leads",icon:Tu,label:r("nav.leads")},{to:"/analytics",icon:wp,label:r("nav.analytics")},{to:"/monitor",icon:q4,label:r("nav.monitor")},{to:"/learning",icon:Un,label:r("nav.learning")}]:[]],h=()=>{a(),e("/login")},m=()=>{const y=l.language?.startsWith("es")?"en":"es";l.changeLanguage(y)},p=r(u?"roles.supervisor":"roles.agent");return o.jsxs("div",{className:"min-h-screen bg-gray-50 flex",children:[o.jsxs("aside",{className:"w-64 bg-white border-r border-gray-200 flex flex-col",children:[o.jsxs("div",{className:"h-16 flex items-center gap-3 px-6 border-b border-gray-200",children:[o.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-indigo-500 to-blue-600 rounded-xl flex items-center justify-center",children:o.jsx(vp,{className:"w-6 h-6 text-white"})}),o.jsxs("div",{children:[o.jsx("h1",{className:"font-bold text-gray-800",children:r("platformName")}),o.jsx("p",{className:"text-xs text-gray-400",children:r("companyName")})]})]}),o.jsx("nav",{className:"flex-1 p-4 space-y-1",children:d.map(({to:y,icon:x,label:b})=>o.jsxs(mv,{to:y,className:({isActive:v})=>`flex items-center gap-3 px-4 py-3 rounded-lg transition ${v?"bg-indigo-50 text-indigo-600 font-medium":"text-gray-600 hover:bg-gray-100"}`,children:[o.jsx(x,{className:"w-5 h-5"}),o.jsx("span",{children:b})]},y))}),o.jsx("div",{className:"px-4 mb-2",children:o.jsxs("button",{onClick:m,className:"flex items-center gap-2 w-full px-4 py-2 text-sm text-gray-600 hover:bg-gray-100 rounded-lg transition",children:[o.jsx(Ev,{className:"w-5 h-5"}),o.jsx("span",{children:l.language?.startsWith("es")?"English":"Espaol"})]})}),o.jsx("div",{className:"p-4 border-t border-gray-200",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center",style:{backgroundColor:t?.avatarColor||"#6366f1"},children:o.jsx("span",{className:"text-white font-medium text-sm",children:t?.name?.[0]?.toUpperCase()||t?.username?.[0]?.toUpperCase()||"A"})}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium text-gray-800 text-sm",children:t?.name||t?.username||"Admin"}),o.jsx("p",{className:"text-xs text-gray-400",children:p})]})]}),o.jsx("button",{onClick:h,className:"p-2 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded-lg transition",title:r("logout"),children:o.jsx(k4,{className:"w-5 h-5"})})]})})]}),o.jsx("main",{className:"flex-1 overflow-auto",children:o.jsx(iS,{})})]})}async function fC(e,t){const a=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:t})});if(!a.ok){const l=await a.json().catch(()=>({}));throw new Error(l.error||"Credenciales invlidas")}const r=await a.json();return{agent:r.agent,token:r.token,basicToken:r.basicToken}}function hC(){const[e,t]=S.useState(""),[a,r]=S.useState(""),[l,u]=S.useState(""),[d,h]=S.useState(!1),m=Ga(),p=Lt(w=>w.login),{t:y,i18n:x}=ze("login"),b=async w=>{w.preventDefault(),u(""),h(!0);try{const{agent:_,token:E,basicToken:T}=await fC(e,a);p(_,E,T),m("/dashboard")}catch(_){u(_.message||y("error"))}finally{h(!1)}},v=()=>{const w=x.language?.startsWith("es")?"en":"es";x.changeLanguage(w)};return o.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 flex items-center justify-center p-5 relative",children:[o.jsxs("button",{onClick:v,className:"absolute top-4 right-4 flex items-center gap-1.5 px-3 py-1.5 text-sm text-gray-500 hover:text-gray-700 hover:bg-white/80 rounded-lg transition",children:[o.jsx(Ev,{className:"w-4 h-4"}),o.jsx("span",{children:x.language?.startsWith("es")?"EN":"ES"})]}),o.jsxs("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-md p-10",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsx("div",{className:"w-18 h-18 bg-gradient-to-br from-indigo-500 to-blue-600 rounded-2xl flex items-center justify-center mx-auto mb-5 p-4",children:o.jsx("svg",{className:"w-11 h-11 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})})}),o.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Chat Platform"}),o.jsx("p",{className:"text-gray-500 text-sm",children:y("subtitle")})]}),o.jsxs("form",{onSubmit:b,children:[l&&o.jsx("div",{className:"bg-red-50 text-red-600 px-4 py-3 rounded-xl text-sm mb-5 border border-red-200",children:l}),o.jsxs("div",{className:"mb-5",children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:y("username")}),o.jsx("input",{type:"text",value:e,onChange:w=>t(w.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl text-base outline-none transition-colors focus:border-indigo-500",placeholder:y("usernamePlaceholder"),required:!0})]}),o.jsxs("div",{className:"mb-6",children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:y("password")}),o.jsx("input",{type:"password",value:a,onChange:w=>r(w.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl text-base outline-none transition-colors focus:border-indigo-500",placeholder:"",required:!0})]}),o.jsx("button",{type:"submit",disabled:d,className:"w-full bg-gradient-to-r from-indigo-500 to-blue-600 hover:from-indigo-600 hover:to-blue-700 text-white font-semibold py-3.5 px-5 rounded-xl text-base transition-all shadow-lg shadow-indigo-500/30 disabled:opacity-60 disabled:cursor-not-allowed",children:y(d?"submitting":"submit")})]}),o.jsx("p",{className:"text-center text-gray-400 text-xs mt-8",children:y("footer")})]})]})}const Fi=()=>{const e=Lt.getState().token;return{"Content-Type":"application/json",...e?{Authorization:`Bearer ${e}`}:{}}};async function Mv(e,t){const a=new URLSearchParams;e&&a.set("filter",e);const r=a.toString(),l=await fetch(`/api/chat/conversations${r?"?"+r:""}`,{headers:Fi()});if(!l.ok)throw new Error("Error loading conversations");return l.json()}async function pC(e){const t=await fetch(`/api/chat/conversations/${encodeURIComponent(e)}`,{headers:Fi()});if(!t.ok)throw new Error("Error loading conversation");return t.json()}async function mC(e,t){const a=await fetch("/api/chat/send",{method:"POST",headers:Fi(),body:JSON.stringify({to:e,message:t})});if(!a.ok)throw new Error("Error sending message");return a.json()}async function by(e){const t=await fetch("/api/chat/mark-read",{method:"POST",headers:Fi(),body:JSON.stringify({phone:e})});if(!t.ok)throw new Error("Error marking as read");return t.json()}async function gC(){const e=await fetch("/api/chatbot/stats",{headers:Fi()});if(!e.ok)throw new Error("Error loading stats");return e.json()}function xn({title:e,value:t,icon:a,color:r="green",subtitle:l}){const u={green:"bg-green-50 text-green-600",blue:"bg-blue-50 text-blue-600",yellow:"bg-yellow-50 text-yellow-600",purple:"bg-purple-50 text-purple-600",red:"bg-red-50 text-red-600"};return o.jsx("div",{className:"bg-white rounded-xl p-6 border border-gray-100 shadow-sm",children:o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-500 font-medium",children:e}),o.jsx("p",{className:"text-3xl font-bold text-gray-800 mt-2",children:t}),l&&o.jsx("p",{className:"text-xs text-gray-400 mt-1",children:l})]}),a&&o.jsx("div",{className:`p-3 rounded-xl ${u[r]}`,children:o.jsx(a,{className:"w-6 h-6"})})]})})}function Xr(e){return(t={})=>{const a=t.width?String(t.width):e.defaultWidth;return e.formats[a]||e.formats[e.defaultWidth]}}function Bn(e){return(t,a)=>{const r=a?.context?String(a.context):"standalone";let l;if(r==="formatting"&&e.formattingValues){const d=e.defaultFormattingWidth||e.defaultWidth,h=a?.width?String(a.width):d;l=e.formattingValues[h]||e.formattingValues[d]}else{const d=e.defaultWidth,h=a?.width?String(a.width):e.defaultWidth;l=e.values[h]||e.values[d]}const u=e.argumentCallback?e.argumentCallback(t):t;return l[u]}}function Pn(e){return(t,a={})=>{const r=a.width,l=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],u=t.match(l);if(!u)return null;const d=u[0],h=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],m=Array.isArray(h)?yC(h,x=>x.test(d)):xC(h,x=>x.test(d));let p;p=e.valueCallback?e.valueCallback(m):m,p=a.valueCallback?a.valueCallback(p):p;const y=t.slice(d.length);return{value:p,rest:y}}}function xC(e,t){for(const a in e)if(Object.prototype.hasOwnProperty.call(e,a)&&t(e[a]))return a}function yC(e,t){for(let a=0;a<e.length;a++)if(t(e[a]))return a}function Dv(e){return(t,a={})=>{const r=t.match(e.matchPattern);if(!r)return null;const l=r[0],u=t.match(e.parsePattern);if(!u)return null;let d=e.valueCallback?e.valueCallback(u[0]):u[0];d=a.valueCallback?a.valueCallback(d):d;const h=t.slice(l.length);return{value:d,rest:h}}}const Rv=6048e5,bC=864e5,Ec=43200,vy=1440,wy=Symbol.for("constructDateFrom");function Ns(e,t){return typeof e=="function"?e(t):e&&typeof e=="object"&&wy in e?e[wy](t):e instanceof Date?new e.constructor(t):new Date(t)}function Au(e,...t){const a=Ns.bind(null,e||t.find(r=>typeof r=="object"));return t.map(a)}let vC={};function Yi(){return vC}function vt(e,t){return Ns(t||e,e)}function ki(e,t){const a=Yi(),r=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??a.weekStartsOn??a.locale?.options?.weekStartsOn??0,l=vt(e,t?.in),u=l.getDay(),d=(u<r?7:0)+u-r;return l.setDate(l.getDate()-d),l.setHours(0,0,0,0),l}const wC={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},NC=(e,t,a)=>{let r;const l=wC[e];return typeof l=="string"?r=l:t===1?r=l.one:r=l.other.replace("{{count}}",t.toString()),a?.addSuffix?a.comparison&&a.comparison>0?"in "+r:r+" ago":r},jC={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},SC=(e,t,a,r)=>jC[e],CC={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},EC={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},_C={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},TC={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},AC={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},kC={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},MC=(e,t)=>{const a=Number(e),r=a%100;if(r>20||r<10)switch(r%10){case 1:return a+"st";case 2:return a+"nd";case 3:return a+"rd"}return a+"th"},DC={ordinalNumber:MC,era:Bn({values:CC,defaultWidth:"wide"}),quarter:Bn({values:EC,defaultWidth:"wide",argumentCallback:e=>e-1}),month:Bn({values:_C,defaultWidth:"wide"}),day:Bn({values:TC,defaultWidth:"wide"}),dayPeriod:Bn({values:AC,defaultWidth:"wide",formattingValues:kC,defaultFormattingWidth:"wide"})},RC=/^(\d+)(th|st|nd|rd)?/i,OC=/\d+/i,$C={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},zC={any:[/^b/i,/^(a|c)/i]},LC={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},BC={any:[/1/i,/2/i,/3/i,/4/i]},PC={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},HC={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},UC={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},qC={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},IC={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},VC={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},FC={ordinalNumber:Dv({matchPattern:RC,parsePattern:OC,valueCallback:e=>parseInt(e,10)}),era:Pn({matchPatterns:$C,defaultMatchWidth:"wide",parsePatterns:zC,defaultParseWidth:"any"}),quarter:Pn({matchPatterns:LC,defaultMatchWidth:"wide",parsePatterns:BC,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Pn({matchPatterns:PC,defaultMatchWidth:"wide",parsePatterns:HC,defaultParseWidth:"any"}),day:Pn({matchPatterns:UC,defaultMatchWidth:"wide",parsePatterns:qC,defaultParseWidth:"any"}),dayPeriod:Pn({matchPatterns:IC,defaultMatchWidth:"any",parsePatterns:VC,defaultParseWidth:"any"})},YC={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},XC={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},GC={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},KC={date:Xr({formats:YC,defaultWidth:"full"}),time:Xr({formats:XC,defaultWidth:"full"}),dateTime:Xr({formats:GC,defaultWidth:"full"})},Tp={code:"en-US",formatDistance:NC,formatLong:KC,formatRelative:SC,localize:DC,match:FC,options:{weekStartsOn:0,firstWeekContainsDate:1}},QC={lessThanXSeconds:{one:"menos de un segundo",other:"menos de {{count}} segundos"},xSeconds:{one:"1 segundo",other:"{{count}} segundos"},halfAMinute:"medio minuto",lessThanXMinutes:{one:"menos de un minuto",other:"menos de {{count}} minutos"},xMinutes:{one:"1 minuto",other:"{{count}} minutos"},aboutXHours:{one:"alrededor de 1 hora",other:"alrededor de {{count}} horas"},xHours:{one:"1 hora",other:"{{count}} horas"},xDays:{one:"1 da",other:"{{count}} das"},aboutXWeeks:{one:"alrededor de 1 semana",other:"alrededor de {{count}} semanas"},xWeeks:{one:"1 semana",other:"{{count}} semanas"},aboutXMonths:{one:"alrededor de 1 mes",other:"alrededor de {{count}} meses"},xMonths:{one:"1 mes",other:"{{count}} meses"},aboutXYears:{one:"alrededor de 1 ao",other:"alrededor de {{count}} aos"},xYears:{one:"1 ao",other:"{{count}} aos"},overXYears:{one:"ms de 1 ao",other:"ms de {{count}} aos"},almostXYears:{one:"casi 1 ao",other:"casi {{count}} aos"}},WC=(e,t,a)=>{let r;const l=QC[e];return typeof l=="string"?r=l:t===1?r=l.one:r=l.other.replace("{{count}}",t.toString()),a?.addSuffix?a.comparison&&a.comparison>0?"en "+r:"hace "+r:r},ZC={full:"EEEE, d 'de' MMMM 'de' y",long:"d 'de' MMMM 'de' y",medium:"d MMM y",short:"dd/MM/y"},JC={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},eE={full:"{{date}} 'a las' {{time}}",long:"{{date}} 'a las' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},tE={date:Xr({formats:ZC,defaultWidth:"full"}),time:Xr({formats:JC,defaultWidth:"full"}),dateTime:Xr({formats:eE,defaultWidth:"full"})},nE={lastWeek:"'el' eeee 'pasado a la' p",yesterday:"'ayer a la' p",today:"'hoy a la' p",tomorrow:"'maana a la' p",nextWeek:"eeee 'a la' p",other:"P"},sE={lastWeek:"'el' eeee 'pasado a las' p",yesterday:"'ayer a las' p",today:"'hoy a las' p",tomorrow:"'maana a las' p",nextWeek:"eeee 'a las' p",other:"P"},aE=(e,t,a,r)=>t.getHours()!==1?sE[e]:nE[e],rE={narrow:["AC","DC"],abbreviated:["AC","DC"],wide:["antes de cristo","despus de cristo"]},oE={narrow:["1","2","3","4"],abbreviated:["T1","T2","T3","T4"],wide:["1 trimestre","2 trimestre","3 trimestre","4 trimestre"]},iE={narrow:["e","f","m","a","m","j","j","a","s","o","n","d"],abbreviated:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"],wide:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"]},lE={narrow:["d","l","m","m","j","v","s"],short:["do","lu","ma","mi","ju","vi","s"],abbreviated:["dom","lun","mar","mi","jue","vie","sb"],wide:["domingo","lunes","martes","mircoles","jueves","viernes","sbado"]},cE={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"maana",afternoon:"tarde",evening:"tarde",night:"noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"maana",afternoon:"tarde",evening:"tarde",night:"noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"maana",afternoon:"tarde",evening:"tarde",night:"noche"}},uE={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"de la maana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"de la maana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"de la maana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"}},dE=(e,t)=>Number(e)+"",fE={ordinalNumber:dE,era:Bn({values:rE,defaultWidth:"wide"}),quarter:Bn({values:oE,defaultWidth:"wide",argumentCallback:e=>Number(e)-1}),month:Bn({values:iE,defaultWidth:"wide"}),day:Bn({values:lE,defaultWidth:"wide"}),dayPeriod:Bn({values:cE,defaultWidth:"wide",formattingValues:uE,defaultFormattingWidth:"wide"})},hE=/^(\d+)()?/i,pE=/\d+/i,mE={narrow:/^(ac|dc|a|d)/i,abbreviated:/^(a\.?\s?c\.?|a\.?\s?e\.?\s?c\.?|d\.?\s?c\.?|e\.?\s?c\.?)/i,wide:/^(antes de cristo|antes de la era com[u]n|despu[e]s de cristo|era com[u]n)/i},gE={any:[/^ac/i,/^dc/i],wide:[/^(antes de cristo|antes de la era com[u]n)/i,/^(despu[e]s de cristo|era com[u]n)/i]},xE={narrow:/^[1234]/i,abbreviated:/^T[1234]/i,wide:/^[1234]()? trimestre/i},yE={any:[/1/i,/2/i,/3/i,/4/i]},bE={narrow:/^[efmajsond]/i,abbreviated:/^(ene|feb|mar|abr|may|jun|jul|ago|sep|oct|nov|dic)/i,wide:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i},vE={narrow:[/^e/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^en/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i]},wE={narrow:/^[dlmjvs]/i,short:/^(do|lu|ma|mi|ju|vi|s[a])/i,abbreviated:/^(dom|lun|mar|mi[e]|jue|vie|s[a]b)/i,wide:/^(domingo|lunes|martes|mi[e]rcoles|jueves|viernes|s[a]bado)/i},NE={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^do/i,/^lu/i,/^ma/i,/^mi/i,/^ju/i,/^vi/i,/^sa/i]},jE={narrow:/^(a|p|mn|md|(de la|a las) (maana|tarde|noche))/i,any:/^([ap]\.?\s?m\.?|medianoche|mediodia|(de la|a las) (maana|tarde|noche))/i},SE={any:{am:/^a/i,pm:/^p/i,midnight:/^mn/i,noon:/^md/i,morning:/maana/i,afternoon:/tarde/i,evening:/tarde/i,night:/noche/i}},CE={ordinalNumber:Dv({matchPattern:hE,parsePattern:pE,valueCallback:function(e){return parseInt(e,10)}}),era:Pn({matchPatterns:mE,defaultMatchWidth:"wide",parsePatterns:gE,defaultParseWidth:"any"}),quarter:Pn({matchPatterns:xE,defaultMatchWidth:"wide",parsePatterns:yE,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Pn({matchPatterns:bE,defaultMatchWidth:"wide",parsePatterns:vE,defaultParseWidth:"any"}),day:Pn({matchPatterns:wE,defaultMatchWidth:"wide",parsePatterns:NE,defaultParseWidth:"any"}),dayPeriod:Pn({matchPatterns:jE,defaultMatchWidth:"any",parsePatterns:SE,defaultParseWidth:"any"})},Ov={code:"es",formatDistance:WC,formatLong:tE,formatRelative:aE,localize:fE,match:CE,options:{weekStartsOn:1,firstWeekContainsDate:1}},{slice:EE,forEach:_E}=[];function TE(e){return _E.call(EE.call(arguments,1),t=>{if(t)for(const a in t)e[a]===void 0&&(e[a]=t[a])}),e}function AE(e){return typeof e!="string"?!1:[/<\s*script.*?>/i,/<\s*\/\s*script\s*>/i,/<\s*img.*?on\w+\s*=/i,/<\s*\w+\s*on\w+\s*=.*?>/i,/javascript\s*:/i,/vbscript\s*:/i,/expression\s*\(/i,/eval\s*\(/i,/alert\s*\(/i,/document\.cookie/i,/document\.write\s*\(/i,/window\.location/i,/innerHTML/i].some(a=>a.test(e))}const Ny=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,kE=function(e,t){const r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{path:"/"},l=encodeURIComponent(t);let u=`${e}=${l}`;if(r.maxAge>0){const d=r.maxAge-0;if(Number.isNaN(d))throw new Error("maxAge should be a Number");u+=`; Max-Age=${Math.floor(d)}`}if(r.domain){if(!Ny.test(r.domain))throw new TypeError("option domain is invalid");u+=`; Domain=${r.domain}`}if(r.path){if(!Ny.test(r.path))throw new TypeError("option path is invalid");u+=`; Path=${r.path}`}if(r.expires){if(typeof r.expires.toUTCString!="function")throw new TypeError("option expires is invalid");u+=`; Expires=${r.expires.toUTCString()}`}if(r.httpOnly&&(u+="; HttpOnly"),r.secure&&(u+="; Secure"),r.sameSite)switch(typeof r.sameSite=="string"?r.sameSite.toLowerCase():r.sameSite){case!0:u+="; SameSite=Strict";break;case"lax":u+="; SameSite=Lax";break;case"strict":u+="; SameSite=Strict";break;case"none":u+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return r.partitioned&&(u+="; Partitioned"),u},jy={create(e,t,a,r){let l=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};a&&(l.expires=new Date,l.expires.setTime(l.expires.getTime()+a*60*1e3)),r&&(l.domain=r),document.cookie=kE(e,t,l)},read(e){const t=`${e}=`,a=document.cookie.split(";");for(let r=0;r<a.length;r++){let l=a[r];for(;l.charAt(0)===" ";)l=l.substring(1,l.length);if(l.indexOf(t)===0)return l.substring(t.length,l.length)}return null},remove(e,t){this.create(e,"",-1,t)}};var ME={name:"cookie",lookup(e){let{lookupCookie:t}=e;if(t&&typeof document<"u")return jy.read(t)||void 0},cacheUserLanguage(e,t){let{lookupCookie:a,cookieMinutes:r,cookieDomain:l,cookieOptions:u}=t;a&&typeof document<"u"&&jy.create(a,e,r,l,u)}},DE={name:"querystring",lookup(e){let{lookupQuerystring:t}=e,a;if(typeof window<"u"){let{search:r}=window.location;!window.location.search&&window.location.hash?.indexOf("?")>-1&&(r=window.location.hash.substring(window.location.hash.indexOf("?")));const u=r.substring(1).split("&");for(let d=0;d<u.length;d++){const h=u[d].indexOf("=");h>0&&u[d].substring(0,h)===t&&(a=u[d].substring(h+1))}}return a}},RE={name:"hash",lookup(e){let{lookupHash:t,lookupFromHashIndex:a}=e,r;if(typeof window<"u"){const{hash:l}=window.location;if(l&&l.length>2){const u=l.substring(1);if(t){const d=u.split("&");for(let h=0;h<d.length;h++){const m=d[h].indexOf("=");m>0&&d[h].substring(0,m)===t&&(r=d[h].substring(m+1))}}if(r)return r;if(!r&&a>-1){const d=l.match(/\/([a-zA-Z-]*)/g);return Array.isArray(d)?d[typeof a=="number"?a:0]?.replace("/",""):void 0}}}return r}};let Br=null;const Sy=()=>{if(Br!==null)return Br;try{if(Br=typeof window<"u"&&window.localStorage!==null,!Br)return!1;const e="i18next.translate.boo";window.localStorage.setItem(e,"foo"),window.localStorage.removeItem(e)}catch{Br=!1}return Br};var OE={name:"localStorage",lookup(e){let{lookupLocalStorage:t}=e;if(t&&Sy())return window.localStorage.getItem(t)||void 0},cacheUserLanguage(e,t){let{lookupLocalStorage:a}=t;a&&Sy()&&window.localStorage.setItem(a,e)}};let Pr=null;const Cy=()=>{if(Pr!==null)return Pr;try{if(Pr=typeof window<"u"&&window.sessionStorage!==null,!Pr)return!1;const e="i18next.translate.boo";window.sessionStorage.setItem(e,"foo"),window.sessionStorage.removeItem(e)}catch{Pr=!1}return Pr};var $E={name:"sessionStorage",lookup(e){let{lookupSessionStorage:t}=e;if(t&&Cy())return window.sessionStorage.getItem(t)||void 0},cacheUserLanguage(e,t){let{lookupSessionStorage:a}=t;a&&Cy()&&window.sessionStorage.setItem(a,e)}},zE={name:"navigator",lookup(e){const t=[];if(typeof navigator<"u"){const{languages:a,userLanguage:r,language:l}=navigator;if(a)for(let u=0;u<a.length;u++)t.push(a[u]);r&&t.push(r),l&&t.push(l)}return t.length>0?t:void 0}},LE={name:"htmlTag",lookup(e){let{htmlTag:t}=e,a;const r=t||(typeof document<"u"?document.documentElement:null);return r&&typeof r.getAttribute=="function"&&(a=r.getAttribute("lang")),a}},BE={name:"path",lookup(e){let{lookupFromPathIndex:t}=e;if(typeof window>"u")return;const a=window.location.pathname.match(/\/([a-zA-Z-]*)/g);return Array.isArray(a)?a[typeof t=="number"?t:0]?.replace("/",""):void 0}},PE={name:"subdomain",lookup(e){let{lookupFromSubdomainIndex:t}=e;const a=typeof t=="number"?t+1:1,r=typeof window<"u"&&window.location?.hostname?.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i);if(r)return r[a]}};let $v=!1;try{document.cookie,$v=!0}catch{}const zv=["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"];$v||zv.splice(1,1);const HE=()=>({order:zv,lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:e=>e});class Lv{constructor(t){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.type="languageDetector",this.detectors={},this.init(t,a)}init(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{languageUtils:{}},a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=t,this.options=TE(a,this.options||{},HE()),typeof this.options.convertDetectedLanguage=="string"&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=l=>l.replace("-","_")),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=r,this.addDetector(ME),this.addDetector(DE),this.addDetector(OE),this.addDetector($E),this.addDetector(zE),this.addDetector(LE),this.addDetector(BE),this.addDetector(PE),this.addDetector(RE)}addDetector(t){return this.detectors[t.name]=t,this}detect(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.order,a=[];return t.forEach(r=>{if(this.detectors[r]){let l=this.detectors[r].lookup(this.options);l&&typeof l=="string"&&(l=[l]),l&&(a=a.concat(l))}}),a=a.filter(r=>r!=null&&!AE(r)).map(r=>this.options.convertDetectedLanguage(r)),this.services&&this.services.languageUtils&&this.services.languageUtils.getBestMatchFromCodes?a:a.length>0?a[0]:null}cacheUserLanguage(t){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.caches;a&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(t)>-1||a.forEach(r=>{this.detectors[r]&&this.detectors[r].cacheUserLanguage(t,this.options)}))}}Lv.type="languageDetector";const UE={dashboard:"Dashboard",conversations:"Conversaciones",agents:"Agentes",departments:"Departamentos",flows:"Flujos",logs:"Logs",leads:"Leads",analytics:"Analytics",monitor:"Monitor",learning:"Cerebro IA"},qE={supervisor:"Supervisor",agent:"Agente"},IE={cancel:"Cancelar",save:"Guardar",delete:"Eliminar",edit:"Editar",close:"Cerrar",retry:"Reintentar",confirm:"Confirmar",apply:"Aplicar",refresh:"Actualizar",create:"Crear",back:"Volver"},VE={active:"Activo",inactive:"Inactivo",loading:"Cargando..."},FE="Cerrar sesin",YE="Chat Platform",XE="Respaldos Chile",GE="Idioma",KE="Sin departamento",QE={nav:UE,roles:qE,actions:IE,status:VE,logout:FE,platformName:YE,companyName:XE,language:GE,noDepartment:KE},WE="Ingresa tus credenciales para continuar",ZE="Usuario",JE="admin",e3="Contrasea",t3="Ingresando...",n3="Ingresar",s3="Error al iniciar sesin",a3="Respaldos Chile  2025",r3={subtitle:WE,username:ZE,usernamePlaceholder:JE,password:e3,submitting:t3,submit:n3,error:s3,footer:a3},o3="Conversaciones",i3={myChats:"Mis Chats",department:"Departamento",unassigned:"Sin Asignar",all:"Todos"},l3={all:"Todos",whatsapp:"WhatsApp",instagram:"Instagram"},c3="Buscar conversacin...",u3="No hay conversaciones",d3="Selecciona una conversacin",f3="Sin mensajes",h3="Escribe un mensaje...",p3="Enviar",m3="Enviando...",g3="Error al enviar mensaje",x3="Tomar",y3="Tomar este chat",b3="Asignar",v3="Asignar chat",w3="Transferir",N3="Transferir chat",j3="Eliminar conversacin",S3="Tiempo real",C3="Reconectando...",E3="Cliente",_3="Bot",T3="Imagen",A3="Imagen no disponible",k3="Tu navegador no soporta video",M3="Documento",D3="Contacto compartido",R3="{{count}} contactos",O3="Sin asignar",$3="Eliminar conversacin con {{name}}? Se borrarn todos los mensajes.",z3="Error al eliminar",L3="Error al eliminar conversacin",B3={title:"Asignar Conversacin",department:"Departamento",agent:"Agente",noDepartment:"Sin asignar departamento",noAgent:"Sin asignar agente",assigning:"Asignando...",errorAssigning:"Error al asignar"},P3={title:"Transferir Conversacin",targetDepartment:"Departamento destino",keepCurrent:"Mantener departamento actual",targetAgent:"Agente destino",noAgent:"Sin asignar agente",reason:"Razn (opcional)",reasonPlaceholder:"Ej: Cliente necesita soporte tcnico",transferring:"Transfiriendo...",errorTransferring:"Error al transferir"},H3={title:o3,filters:i3,channels:l3,search:c3,noConversations:u3,selectConversation:d3,noMessages:f3,messagePlaceholder:h3,send:p3,sending:m3,sendError:g3,take:x3,takeTitle:y3,assign:b3,assignTitle:v3,transfer:w3,transferTitle:N3,delete:"Eliminar",deleteTitle:j3,realtime:S3,reconnecting:C3,client:E3,bot:_3,image:T3,imageUnavailable:A3,videoUnsupported:k3,document:M3,sharedContact:D3,sharedContacts:R3,unassignedBadge:O3,deleteConfirm:$3,deleteError:z3,deleteConversationError:L3,assignModal:B3,transferModal:P3},U3="Dashboard",q3="Resumen de tu chatbot de WhatsApp",I3={conversations:"Conversaciones",totalActive:"Total activas",uniqueUsers:"Usuarios nicos",last30Days:"ltimos 30 das",interactions:"Interacciones",processedByBot:"Procesadas por el bot",confidence:"Confianza",avgClassification:"Promedio clasificacin"},V3="Conversaciones Recientes",F3="Ver todas",Y3="No hay conversaciones todava",X3="Sin mensajes",G3="Editor de Flujos",K3="Crea y edita flujos conversacionales de forma visual",Q3="Ver Conversaciones",W3="Responde a tus clientes en tiempo real",Z3={title:U3,subtitle:q3,stats:I3,recentConversations:V3,viewAll:F3,noConversationsYet:Y3,noMessages:X3,flowEditor:G3,flowEditorDesc:K3,viewConversations:Q3,viewConversationsDesc:W3},J3="Gestin de Flujos",e_="Administra tus flujos conversacionales y crea nuevos desde plantillas predefinidas",t_="Modo Automtico",n_="Bot respondiendo",s_="Bot pausado",a_="Modo automtico ACTIVADO",r_="Modo automtico DESACTIVADO",o_="Cargando flujos...",i_="Error al cargar flujos",l_="Mis Flujos",c_="Plantillas",u_="WhatsApp Templates",d_="No tienes flujos creados",f_="Comienza creando un flujo desde una plantilla",h_="Ver Plantillas",p_="Nombre",m_="Estado",g_="Estadsticas",x_="ltima actualizacin",y_="Acciones",b_="Ejecutado: {{count}} veces",v_="Completado: {{count}} veces",w_="Crear desde esta plantilla",N_="Error al crear flujo",j_="Flujo {{name}} desactivado",S_="Flujo {{name}} activado",C_="Flujo duplicado correctamente",E_="Error al duplicar",__="Ests seguro de eliminar el flujo {{name}}?",T_="Flujo eliminado correctamente",A_="Error al eliminar",k_="Error al cargar plantillas",M_="Meta Business Suite",D_="No se encontraron plantillas",R_="Aprobadas",O_="Pendientes",$_="Rechazadas",z_="Todas",L_="Marketing",B_="Utilidad",P_="Autenticacin",H_="{{count}} plantillas encontradas",U_="Cargando plantillas de Meta...",q_="Probar Plantilla",I_="No disponible",V_="Activo",F_="Inactivo",Y_='Flujo "{{name}}" creado correctamente',X_="copia",G_="{{count}} nodos",K_="(Sin contenido)",Q_="Ajusta los filtros o crea plantillas en Meta Business Suite",W_="Duplicar",Z_="Categora",J_={title:J3,subtitle:e_,autoMode:t_,botResponding:n_,botPaused:s_,autoModeOn:a_,autoModeOff:r_,loadingFlows:o_,errorLoading:i_,myFlows:l_,templates:c_,waTemplates:u_,noFlows:d_,startFromTemplate:f_,viewTemplates:h_,name:p_,state:m_,statistics:g_,lastUpdated:x_,actions:y_,default:"Por defecto",executed:b_,completed:v_,createFromTemplate:w_,errorCreating:N_,flowDeactivated:j_,flowActivated:S_,duplicated:C_,errorDuplicating:E_,deleteConfirm:__,deleted:T_,errorDeleting:A_,errorLoadingTemplates:k_,metaBusinessSuite:M_,noTemplates:D_,approved:R_,pending:O_,rejected:$_,allTemplates:z_,marketing:L_,utility:B_,authentication:P_,templatesFound:H_,loadingMeta:U_,testTemplate:q_,notAvailable:I_,active:V_,inactive:F_,flowCreated:Y_,copy:X_,nodes:G_,noContent:K_,adjustFilters:Q_,duplicate:W_,category:Z_},e6="Flow Builder",t6='Flujo "{{name}}" cargado correctamente',n6="No se pudo obtener los datos del flujo",s6="Error al cargar flujo",a6="Error al cargar template",r6="No se recibi el ID del flujo creado",o6="Probar flujo",i6="Cargando flujo...",l6={flowName:"Nombre del flujo",unsaved:"Sin guardar",active:"Activo",test:"Probar",new:"+ Nuevo",open:"Abrir",save:"Guardar",saving:"Guardando...",deactivate:"Desactivar",activate:"Activar",selectFlow:"Seleccionar flujo",noFlowsSaved:"No hay flujos guardados",unsavedConfirm:"Tienes cambios sin guardar. Continuar?",saveFirst:"Primero guarda el flujo",errorLoadingFlows:"Error cargando flujos",errorSaving:"Error al guardar",flowSaved:"Flujo guardado correctamente",flowDeactivated:"Flujo desactivado",flowActivated:"Flujo activado",error:"Error:"},c6={title:"Nodos",hint:"Arrastra los nodos al canvas para construir tu flujo",trigger:"Trigger",triggerDesc:"Inicio del flujo",message:"Mensaje",messageDesc:"Enviar mensaje",question:"Pregunta",questionDesc:"Preguntar y esperar",condition:"Condicin",conditionDesc:"Bifurcacin",action:"Accin",actionDesc:"Ejecutar accin",aiResponse:"Respuesta IA",aiResponseDesc:"Generar con IA",webhook:"Webhook",webhookDesc:"Llamar API externa",delay:"Espera",delayDesc:"Pausar X segundos",transfer:"Transferir",transferDesc:"Pasar a humano",end:"Fin",endDesc:"Terminar flujo"},u6={title:"Propiedades",label:"Etiqueta",triggerConfig:"Configuracin del Trigger",triggerType:"Tipo de activacin",keywords:"Palabras clave",classification:"Clasificacin",always:"Siempre",keywordsLabel:"Palabras clave (separadas por coma)",keywordsPlaceholder:"precio, costo, cotizar, cuanto",keywordsHelp:"El flujo se activa si el mensaje contiene alguna de estas palabras",intents:"Intenciones del mensaje",minUrgency:"Urgencia mnima",minLeadScore:"Lead score mnimo",leadScoreHelp:"Solo activa si el lead tiene este puntaje o ms (0-100)",alwaysWarning:"Este flujo se activar para TODOS los mensajes entrantes que no coincidan con otros flujos. salo como flujo por defecto.",anyUrgency:"Cualquiera",messageContent:"Contenido del mensaje",messagePlaceholder:"Escribe el mensaje...",variableHelp:"Usa {{variable}} para insertar variables",targetDepartment:"Departamento destino",autoDepartment:"Auto (detectar por intent)",departmentHelp:'Si seleccionas "Auto", se usar el intent detectado para asignar departamento',saveVariable:"Guardar respuesta en variable",responseOptions:"Opciones de respuesta",optionText:"Texto",optionValue:"Valor",addOption:"+ Agregar opcin",actionType:"Tipo de accin",selectAction:"Selecciona...",notifySales:"Notificar a ventas",createTicket:"Crear ticket",saveLead:"Guardar lead",sendEmail:"Enviar email",callWebhook:"Llamar webhook",searchFaq:"Buscar en FAQ",aiConfig:"Configuracin de IA",systemPrompt:"Prompt del sistema",systemPromptPlaceholder:"Eres un asistente de ventas amable y profesional...",userPrompt:"Prompt del usuario",userPromptPlaceholder:"El cliente pregunta: {{initial_message}}",dynamicVariableHelp:"Usa {{variable}} para insertar datos dinmicos",model:"Modelo",modelMini:"GPT-4o Mini (rpido)",modelGpt4o:"GPT-4o (preciso)",modelGpt4Turbo:"GPT-4 Turbo",temperature:"Temperatura",maxTokens:"Max tokens",saveResponseVariable:"Guardar respuesta en variable (opcional)",webhookConfig:"Configuracin de Webhook",endpointUrl:"URL del endpoint",endpointPlaceholder:"https://api.ejemplo.com/endpoint",httpMethod:"Mtodo HTTP",headers:"Headers (JSON)",body:"Body (JSON) - Usa {{variable}} para datos dinmicos",timeout:"Timeout (ms)",webhookSaveVariable:"Guardar respuesta en variable",delayConfig:"Configuracin de Espera",delaySeconds:"Segundos de espera",delayHelp:"Entre 1 y 60 segundos. Recomendado: 2-5 seg para parecer ms humano.",showTyping:'Mostrar "escribiendo..." mientras espera',deleteNode:"Eliminar nodo",intentsOptions:{sales:"Ventas",support:"Soporte",complaints:"Quejas",info:"Informacin",greeting:"Saludo"},urgencyOptions:{low:"Baja",medium:"Media",high:"Alta",critical:"Crtica"},newOption:"Nueva opcin"},d6={welcome:"Bienvenido al Flow Builder!",welcomeDesc:"Crea flujos de conversacin para tu chatbot de WhatsApp de forma visual, sin escribir cdigo.",dragNodes:"Arrastra nodos al canvas",dragNodesDesc:"En la barra izquierda encontrars los nodos disponibles. Arrstralos al canvas para construir tu flujo.",tipMessage:"Mensaje: Enva un texto al usuario",tipQuestion:"Pregunta: Espera una respuesta del usuario",tipCondition:"Condicin: Bifurca el flujo segn una variable",tipAction:"Accin: Ejecuta una accin (notificar, guardar, etc.)",connectNodes:"Conecta los nodos",connectNodesDesc:"Arrastra desde el punto verde (salida) de un nodo hasta el punto gris (entrada) de otro para conectarlos.",tipFlowStartsTrigger:"El flujo siempre empieza en el Trigger",tipMultiplePaths:"Puedes tener mltiples caminos con Condiciones",tipEndWithNode:"Termina con un nodo Fin o Transferir",configureNodes:"Configura cada nodo",configureNodesDesc:"Haz clic en un nodo para ver sus propiedades a la derecha. Ah puedes editar el contenido, opciones y variables.",tipUseVariables:"Usa {{variable}} para insertar datos dinmicos",tipQuestionsSave:"Las preguntas guardan la respuesta en una variable",tipConditionsEvaluate:"Las condiciones evalan esas variables",saveAndActivate:"Guarda y activa!",saveAndActivateDesc:"Cuando termines, guarda tu flujo y actvalo para que empiece a responder mensajes automticamente.",tipMultipleFlows:"Puedes tener varios flujos, pero solo algunos activos",tipUseOpen:'Usa "Abrir" para cargar flujos guardados',tipTemplates:"Las plantillas te dan flujos de ejemplo para empezar",howToStart:"Cmo quieres empezar?",templateSubtitle:"Puedes empezar desde cero o usar una plantilla predefinida",emptyTemplate:"Empezar vaco",emptyTemplateDesc:"Canvas en blanco para crear tu propio flujo",salesFunnel:"Embudo de Ventas",salesFunnelDesc:"Califica leads y gualos a la compra",supportFunnel:"Embudo de Soporte",supportFunnelDesc:"Resuelve dudas con FAQ y escala a humanos",leadCapture:"Captura de Leads",leadCaptureDesc:"Recolecta informacin de contacto",skipAndStart:"Saltar y empezar vaco ",skip:"Saltar",next:"Siguiente",start:"Empezar"},f6={title:"Simulador de Chat",subtitle:"Prueba tu flujo aqu",placeholder:"Escribe un mensaje...",send:"Enviar",reset:"Reiniciar",noFlow:"No hay flujo para simular",thinking:"Pensando...",flowFinished:"Flujo finalizado",transferring:"Transfiriendo a un agente...",simulatingFlow:'Simulando flujo: "{{name}}"',writeToStart:"Escribe un mensaje para iniciar...",flowEndedNoNext:"Flujo terminado (no hay siguiente nodo)",triggerActivated:"Trigger activado",emptyMessage:"Mensaje vaco",evaluatingCondition:"Evaluando condicin...",conditionMet:"Condicin cumplida: {{variable}} = {{value}}",executingAction:"Ejecutando accin: {{action}}",undefined:"sin definir",generatingAI:"Generando respuesta con IA...",simulatedAIResponse:"Respuesta IA simulada",forPrompt:"Para",variableSaved:'Variable "{{variable}}" = {{value}}',aiResponseValue:"respuesta IA",callingWebhook:"Llamando webhook: {{url}}",urlNotDefined:"URL no definida",method:"Mtodo",webhookResponded:"Webhook respondi: {{response}}",waitingSeconds:"Esperando {{seconds}} segundos...",transferredToHuman:"Conversacin transferida a humano",flowCompleted:"Flujo completado",unknownNode:"Nodo desconocido",noTriggerNode:"No hay nodo Trigger en el flujo",variables:"Variables",server:"Servidor",waitingResponse:"Esperando respuesta...",variableSet:'Variable "{{variable}}" = "{{value}}"'},h6={newFlow:"Nuevo Flujo",start:"Inicio",message:"Mensaje",question:"Pregunta",condition:"Condicin",action:"Accin",transfer:"Transferir",end:"Fin",writeMessage:"Escribe tu mensaje aqu...",whatOption:"Cul es tu opcin?",transferMessage:"Transfiriendo a un agente...",actionLabel:"Accin: {{type}}"},p6={title:e6,flowLoaded:t6,errorLoadingFlow:n6,errorLoadingFlowAlert:s6,errorLoadingTemplate:a6,errorNoFlowId:r6,testFlow:o6,loadingFlow:i6,toolbar:l6,sidebar:c6,properties:u6,onboarding:d6,simulator:f6,store:h6},m6="Gestin de Leads",g6="Administra y califica tus leads",x6="Total Leads",y6="Score Promedio",b6="Nuevos",v6="Calificados",w6="Clientes",N6="Distribucin de Scores",j6="Caliente",S6="Tibio",C6="Fro",E6="Filtrar:",_6="Buscar...",T6="Todos los estados",A6="Nuevo",k6="Interesado",M6="Calificado",D6="Cliente",R6="Inactivo",O6="Todos los scores",$6="Score 80+ (Caliente)",z6="Score 50+ (Tibio)",L6="Score 20+ (Fro)",B6="Mayor score",P6="Menor score",H6="Ms reciente",U6="Ms mensajes",q6="Lead",I6="Score",V6="Estado",F6="Mensajes",Y6="ltima actividad",X6="Acciones",G6="Sin nombre",K6="+5 puntos",Q6="-5 puntos",W6="No hay leads registrados",Z6="Los leads se crean automticamente cuando interactan",J6="Ver conversacin",eT={title:m6,subtitle:g6,totalLeads:x6,avgScore:y6,newLeads:b6,qualified:v6,clients:w6,scoreDistribution:N6,hot:j6,warm:S6,cold:C6,new:"Nuevo",filter:E6,searchPlaceholder:_6,allStatuses:T6,statusNew:A6,statusEngaged:k6,statusQualified:M6,statusClient:D6,statusInactive:R6,allScores:O6,scoreHot:$6,scoreWarm:z6,scoreCold:L6,sortHighest:B6,sortLowest:P6,sortRecent:H6,sortMostMessages:U6,lead:q6,score:I6,status:V6,messages:F6,lastActivity:Y6,actions:X6,noName:G6,addPoints:K6,subPoints:Q6,noLeads:W6,leadsHint:Z6,viewConversation:J6},tT="Analytics de Flujos",nT="Mtricas y anlisis de rendimiento",sT="ltimos {{count}} das",aT="Actualizar",rT="Total Ejecuciones",oT="{{count}} usuarios nicos",iT="Tasa de Completado",lT="{{count}} completados",cT="Fallidos",uT="{{count}} transferidos",dT="Tiempo Promedio",fT="{{count}} nodos promedio",hT="Ejecuciones por da",pT="No hay datos para mostrar",mT="Completados",gT="Transferidos",xT="Rendimiento por Flujo",yT="No hay flujos configurados",bT="ejecuciones",vT="Ver todos los flujos",wT="Actividad por Hora",NT="Distribucin por Tipo de Trigger",jT="No hay datos de triggers",ST="Completados: {{count}}",CT="Fallidos: {{count}}",ET="Transferidos: {{count}}",_T="{{hour}}:00 - {{count}} ejecuciones",TT={title:tT,subtitle:nT,lastDays:sT,refresh:aT,totalExecutions:rT,uniqueUsers:oT,completionRate:iT,completedCount:lT,failed:cT,transferredCount:uT,avgTime:dT,avgNodes:fT,executionsPerDay:hT,noDataToShow:pT,completed:mT,transferred:gT,performanceByFlow:xT,noFlowsConfigured:yT,executions:bT,viewAllFlows:vT,activityByHour:wT,triggerDistribution:NT,noTriggerData:jT,tooltipCompleted:ST,tooltipFailed:CT,tooltipTransferred:ET,tooltipHourExecutions:_T},AT="Monitor de Flujos",kT="Tiempo real",MT="Conectado",DT="Desconectado",RT="{{count}} ejecuciones activas",OT="Ejecuciones",$T="Sin ejecuciones",zT="Ejecucin del Flujo",LT="Flujo:",BT="Telfono:",PT="Nodo Actual:",HT="Tipo de Nodo:",UT="Estado:",qT="Completado ",IT="Error ",VT="Transferido ",FT="En ejecucin...",YT="Iniciado:",XT="Completado:",GT="Detalles",KT="Variables",QT="Timeline",WT="Sin eventos an",ZT="Selecciona una ejecucin para ver detalles",JT={title:AT,subtitle:kT,connected:MT,disconnected:DT,activeExecutions:RT,executions:OT,noExecutions:$T,flowExecution:zT,flow:LT,phone:BT,currentNode:PT,nodeType:HT,status:UT,statusCompleted:qT,statusError:IT,statusTransferred:VT,statusRunning:FT,started:YT,completedAt:XT,details:GT,variables:KT,timeline:QT,noEventsYet:WT,selectExecution:ZT},eA="Logs de Ejecucin",tA="Historial de ejecucin de flujos",nA="Completado",sA="Fallido",aA="Transferido",rA="En progreso",oA="Timeout",iA="Actualizar",lA="Total ejecuciones",cA="ltimos 7 das",uA="Tasa de completado",dA="{{count}} completados",fA="Fallidos",hA="Requieren atencin",pA="Tiempo promedio",mA="Por ejecucin",gA="Filtrar:",xA="Todos los estados",yA="Completados",bA="Fallidos",vA="Transferidos",wA="En progreso",NA="Telfono...",jA="Aplicar",SA="No hay logs de ejecucin",CA="Los logs aparecern cuando se ejecuten flujos",EA="Fecha",_A="Flujo",TA="Telfono",AA="Estado",kA="Nodos",MA="Duracin",DA="Sin nombre",RA="Ver detalle",OA="Detalle de Ejecucin",$A="Flujo",zA="Telfono",LA="Mensaje trigger",BA="Estado final",PA="Variables capturadas",HA="Nodos ejecutados",UA="En nodo: {{nodeId}}",qA={title:eA,subtitle:tA,statusCompleted:nA,statusFailed:sA,statusTransferred:aA,statusInProgress:rA,statusTimeout:oA,refresh:iA,totalExecutions:lA,last7Days:cA,completionRate:uA,completedCount:dA,failed:fA,needAttention:hA,avgTime:pA,perExecution:mA,filter:gA,allStatuses:xA,completed:yA,failedPlural:bA,transferredPlural:vA,inProgress:wA,phonePlaceholder:NA,apply:jA,noLogs:SA,logsWillAppear:CA,thDate:EA,thFlow:_A,thPhone:TA,thStatus:AA,thNodes:kA,thDuration:MA,noName:DA,viewDetail:RA,executionDetail:OA,detailFlow:$A,detailPhone:zA,triggerMessage:LA,finalStatus:BA,capturedVariables:PA,executedNodes:HA,errorInNode:UA},IA="Agentes",VA="Gestiona los agentes del sistema",FA="Nuevo Agente",YA="Editar Agente",XA="Nombre",GA="Usuario",KA="Contrasea",QA="Email",WA="Rol",ZA="Departamento",JA="Estado",e8="Acciones",t8="Activo",n8="Inactivo",s8="Supervisor",a8="Agente",r8="No hay agentes registrados",o8="Ests seguro de eliminar al agente {{name}}?",i8="Agente creado correctamente",l8="Agente actualizado correctamente",c8="Agente eliminado correctamente",u8="Error al crear agente",d8="Error al actualizar agente",f8="Error al eliminar agente",h8="Error al cargar agentes",p8="Dejar vaco para mantener",m8="Sin departamento",g8="ltimo acceso",x8="Nunca",y8="Regenerar API Key",b8='Regenerar API key de "{{name}}"? La anterior dejar de funcionar.',v8="Desactivar",w8="Color avatar",N8="Guardando...",j8={title:IA,subtitle:VA,addAgent:FA,editAgent:YA,name:XA,username:GA,password:KA,email:QA,role:WA,department:ZA,status:JA,actions:e8,active:t8,inactive:n8,supervisor:s8,agent:a8,noAgents:r8,deleteConfirm:o8,created:i8,updated:l8,deleted:c8,errorCreating:u8,errorUpdating:d8,errorDeleting:f8,errorLoading:h8,passwordPlaceholder:p8,noDepartment:m8,lastLogin:g8,never:x8,regenerateKey:y8,regenerateKeyConfirm:b8,deactivate:v8,avatarColor:w8,saving:N8},S8="Departamentos",C8="Organiza los agentes por rea",E8="Nuevo Departamento",_8="Editar Departamento",T8="Nombre",A8="Nombre visible",k8="Icono",M8="Color",D8="Intenciones auto-asignadas",R8="Estado",O8="Acciones",$8="Activo",z8="Inactivo",L8="No hay departamentos registrados",B8="Ests seguro de eliminar el departamento {{name}}?",P8="Departamento creado correctamente",H8="Departamento actualizado correctamente",U8="Departamento eliminado correctamente",q8="Error al crear departamento",I8="Error al actualizar departamento",V8="Error al eliminar departamento",F8="Error al cargar departamentos",Y8="agentes",X8="Sin agentes",G8="Identificador (slug)",K8="Cuando el chatbot detecta estos intents, asigna automticamente a este departamento.",Q8="Guardando...",W8={title:S8,subtitle:C8,addDepartment:E8,editDepartment:_8,name:T8,displayName:A8,icon:k8,color:M8,autoAssignIntents:D8,status:R8,actions:O8,active:$8,inactive:z8,noDepartments:L8,deleteConfirm:B8,created:P8,updated:H8,deleted:U8,errorCreating:q8,errorUpdating:I8,errorDeleting:V8,errorLoading:F8,agents:Y8,noAgents:X8,slug:G8,autoAssignHint:K8,saving:Q8},Z8={brain:"Cerebro IA",instructions:"Instrucciones",conversations:"Conversaciones IA",dashboard:"Dashboard",qaPairs:"Pares Q&A",pricing:"Precios"},J8={generalConfidence:"Confianza General",topicCoverage:"Cobertura de Temas",responseQuality:"Calidad Respuestas",updatedPricing:"Precios Actualizados"},ek={answerPricing:"Responder Precios",compareProducts:"Comparar Productos",recommend:"Recomendar",informDeadlines:"Informar Plazos",informShipping:"Informar Despacho"},tk={pending:"Pendiente",approved:"Aprobado",rejected:"Rechazado"},nk="Cerebro IA - Aprendizaje",sk="Sistema de conocimiento adquirido por la IA",ak={lastAnalysis:"Ultimo anlisis",noAnalysis:"Sin anlisis previo",cached:"cacheado",generating:"Generando...",regenerate:"Regenerar Anlisis",openaiNotConfigured:"OpenAI no configurado. Se muestran datos bsicos sin anlisis IA. Configure OPENAI_API_KEY para el reporte completo.",approvedPairs:"Pares Aprobados",pendingPairs:"Pendientes",activePrices:"Precios Activos",avgQuality:"Calidad Promedio",knowledgeBase:"Base de conocimiento",toReview:"Por revisar",productsWithPrice:"Productos con precio",qaScore:"Score Q&A",noData:'Sin datos de anlisis. Aprueba pares Q&A y presiona "Regenerar Anlisis".',generalSummary:"Resumen General",masteredTopics:"Temas Dominados",noTopics:"Sin temas detectados an",knowledgeGaps:"Brechas de Conocimiento",noGaps:"Sin brechas detectadas",capabilities:"Capacidades",reasoning:"Razonamiento",recommendations:"Recomendaciones",baseData:"Datos base: {{pairs}} pares aprobados, {{prices}} precios",aiGenerated:"Anlisis generado por IA",noAiAnalysis:"Datos sin anlisis IA"},rk={loadingStats:"Cargando estadsticas...",totalPairs:"Total Pares",qaLearned:"Q&A aprendidos",approved:"Aprobados",withEmbedding:"{{count}} con embedding",pending:"Pendientes",qualityScore:"Score de calidad",channelDistribution:"Distribucin por Canal"},ok={allStatuses:"Todos los estados",allChannels:"Todos los canales",minQuality:"Calidad mn.",totalPairs:"{{count}} pares en total",reprocess:"Reprocesar",question:"Pregunta",answer:"Respuesta",quality:"Calidad",channel:"Canal",status:"Estado",actions:"Acciones",noResults:"No hay pares que coincidan con los filtros",viewDetail:"Ver detalle",approve:"Aprobar",reject:"Rechazar",page:"Pgina {{current}} de {{total}}",detailTitle:"Detalle del Par Q&A",customerQuestion:"Pregunta del cliente",agentAnswer:"Respuesta del agente",deleteConfirm:"Eliminar este par permanentemente?",reprocessed:"Reprocesadas: {{count}} sesiones",reprocessTitle:"Reprocesar Sesiones",reprocessDesc:"Extrae pares Q&A de conversaciones pasadas. Opcional: filtra por rango de fechas.",from:"Desde (opcional)",to:"Hasta (opcional)",processing:"Procesando..."},ik={showInactive:"Mostrar inactivos",newPrice:"Nuevo Precio",editPrice:"Editar Precio",product:"Producto",variant:"Variante",price:"Precio",status:"Estado",notes:"Notas",actions:"Acciones",noPrices:"No hay precios. Crea el primero.",active:"Activo",inactive:"Inactivo",deactivate:"Desactivar",deactivateConfirm:"Desactivar este precio?",currency:"Moneda",saving:"Guardando..."},lk={title:"Instrucciones para la IA",subtitle:"Escribe reglas, conocimiento y procedimientos que la IA debe seguir",systemPromptLabel:"Prompt del sistema (cerebro general)",customize:"Personalizar",restoreDefault:"Restaurar default",remove:"Quitar",usingDefault:'Usando el prompt por defecto. Haz click en "Personalizar" para editarlo.',additionalInstructions:"Instrucciones adicionales",additionalDesc:"Reglas especficas, conocimiento del negocio, procedimientos. Se agregan al prompt del sistema.",saving:"Guardando...",saveAll:"Guardar Todo",saved:"Guardado",viewPrompt:"Ver Prompt",testAI:"Probar IA",currentPrompt:"Prompt Actual",errorLoadingPrompt:"Error cargando prompt",tipsTitle:"Tips para mejores instrucciones"},ck={title:"Reglas de Comportamiento",subtitle:"Reglas que la IA debe seguir siempre. Se inyectan con prioridad alta en cada respuesta.",count:"{{count}}/{{max}} reglas",loading:"Cargando reglas...",noRules:"Sin reglas todava",noRulesHint:'Agrega reglas aqu o desde el Probador IA con "Corregir"',deleteRule:"Eliminar regla",add:"Agregar",catGeneral:"General",catTone:"Tono",catKnowledge:"Conocimiento",catSales:"Ventas",catFormat:"Formato",catSafety:"Seguridad"},uk={title:"Conversaciones del Bot",subtitle:"Revisa y corrige las respuestas automticas de la IA",noConversations:"An no hay conversaciones donde el bot haya respondido",noConversationsHint:"Cuando la IA responda mensajes, aparecern aqu",session:"Sesin",phone:"Telfono",aiMsgs:"Msgs IA",lastMessage:"ltimo mensaje",date:"Fecha",messages:"mensajes",backToList:"Volver a conversaciones",correct:"Corregir",corrected:"Corregido",correctAnswer:"Respuesta correcta",correctPlaceholder:"Escribe la respuesta correcta que debera dar el bot...",saving:"Guardando...",saveCorrection:"Guardar Correccin"},dk={title:"Probador IA",subtitle:"Prueba tu prompt en tiempo real",chatTitle:"Chat de Prueba",placeholder:"Escribe un mensaje de prueba...",inputPlaceholder:"Escribe un mensaje...",send:"Enviar",clear:"Limpiar",newConversation:"Nueva conv.",rayosX:"Rayos X",pipeline:"Pipeline",knowledge:"Conocimiento",history:"Historial",prompt:"Prompt",correction:"Correccin",correctionTitle:"Corregir Respuesta",correctedAnswer:"Respuesta corregida",correctedPlaceholder:"Escribe la respuesta correcta...",saveCorrection:"Guardar Correccin",saving:"Guardando...",savingShort:"Guardando...",save:"Guardar",confidence:"Confianza",source:"Fuente",sources:"Fuentes",noSources:"Sin fuentes",responseTime:"Tiempo de respuesta",model:"Modelo",tokens:"Tokens",step:"Paso",input:"Entrada",output:"Salida",duration:"Duracin",systemPrompt:"Prompt del sistema",userPrompt:"Prompt del usuario",noHistory:"Sin historial",knowledgeBase:"Base de conocimiento",totalEntries:"Total de entradas",categories:"Categoras",lastUpdated:"ltima actualizacin",emptyChat:"Escribe un mensaje para probar la IA",emptyChatSub:"Usa el mismo motor que WhatsApp real",noResponse:"(sin respuesta del bot)",errorSavingCorrection:"Error al guardar correccion: ",botLabel:"BOT IA",correctedBadge:"Corregido",ruleAdded:"Regla agregada",retest:"Re-probar",correct:"Corregir",factualCorrection:"Respuesta incorrecta",behavioralCorrection:"Regla de comportamiento",factualPlaceholder:"Cual es la respuesta correcta?",factualHint:"Esto creara un nuevo par Q&A aprobado",behavioralPlaceholder:"Ej: Nunca ofrezcas descuentos sin autorizacion",behavioralHint:"Esta regla se agregara a las instrucciones permanentes",cancel:"Cancelar",unknownModel:"desconocido",prices:"Precios",rules:"Reglas",instructions:"Instrucciones",fidelity:"Fidelidad",sendMessageToSeePipeline:"Envia un mensaje para ver el pipeline",debugActivatesPerMessage:"El debug se activa con cada mensaje",noConversationHistory:"Sin historial de conversacion",firstMessageOfSession:"Este es el primer mensaje de la sesion",turnsLoadedAsContext:"{{count}} turnos cargados como contexto",sessionCorrections:"Correcciones de esta sesion",correctedResponse:"Respuesta corregida",retrieverAvailable:"Disponible",retrieverUnavailable:"No disponible",retrieverLabel:"Retriever: {{status}}",searchDuration:"Busqueda: {{ms}}ms",combinedResults:"{{count}} resultados combinados",vectorSearch:"Busqueda vectorial ({{count}})",learned:"Aprendido",similarity:"{{pct}}% similitud",bm25Search:"Busqueda BM25 / FAQ ({{count}})",pricesFound:"Precios encontrados ({{count}})",detectedProduct:"Producto detectado:",variant:"Variante:",thProduct:"Producto",thVariant:"Variante",thPrice:"Precio",priceQueryNoResults:"Se detecto consulta de precio pero no se encontraron resultados",priceQueryNoResultsFor:'Se detecto consulta de precio pero no se encontraron resultados para "{{product}}"',noKnowledgeInjected:"No se inyecto conocimiento en esta respuesta",noKnowledgeHint:"El bot puede haber respondido solo con el prompt base",messageReceived:"Mensaje recibido",sessionMode:"Modo sesion",globalKeywords:"Keywords globales",matched:'Match: "{{keyword}}"  {{action}}',noMatch:"Sin match",activeSession:"Sesion activa",flowAtNode:"Flujo #{{flowId}} en nodo {{nodeId}}",noActiveFlow:"Sin flujo activo",classification:"Clasificacion",notExecuted:"No ejecutada",flowMatch:"Match flujos",notEvaluated:"No evaluado",defaultUsed:"Default usado",noMatchToAI:"Sin match  AI",contact:"Contacto",noName:"Sin nombre",knowledgeLabel:"Conocimiento",pairs:"pares",pricesLabel:"Precios",notPriceQuery:"No es consulta de precio",notQueried:"No consultado",pricesFoundSummary:"{{count}} precios encontrados",historyLabel:"Historial",turns:"{{count}} turnos",promptBuilt:"Prompt construido",plusKnowledge:"+conocimiento",plusRules:"+reglas",openaiWaiting:"Esperando...",delivery:"Entrega",msgsSent:"{{count}} msg(s) enviados",aiFallback:"AI Fallback",pipelineTotal:"Total: {{ms}}ms",result:"Resultado",responseSent:"Respuesta enviada",noResponse2:"Sin respuesta",evaluating:"Evaluando...",searching:"Buscando...",verifying:"Verificando...",analyzing:"Analizando...",processing:"Procesando...",eachStepShownHere:"Cada paso del cerebro se mostrara aqui",responses:"{{count}} respuesta(s)",noPromptData:"Sin datos de prompt",customPrompt:"Prompt personalizado",qaPairsCount:"+{{count}} pares Q&A",plusPrices:"+precios",rulesCount:"+{{count}} reglas",plusAdminInstructions:"+instrucciones admin",fidelityLevel:"Fidelidad: {{level}}",fullSystemPrompt:"System Prompt Completo",behavioralRules:"Reglas de Comportamiento",adminInstructions:"Instrucciones del Admin",openaiResponse:"Respuesta de OpenAI",noPromptDataAvailable:"No hay datos de prompt disponibles en este trace",enableRayosXHint:"Asegurate de enviar un mensaje con Rayos X activado"},fk={tabs:Z8,metrics:J8,capabilities:ek,status:tk,pageTitle:nk,pageSubtitle:sk,brain:ak,dashboard:rk,pairs:ok,prices:ik,instructions:lk,rules:ck,conversations:uk,probador:dk},hk={dashboard:"Dashboard",conversations:"Conversations",agents:"Agents",departments:"Departments",flows:"Flows",logs:"Logs",leads:"Leads",analytics:"Analytics",monitor:"Monitor",learning:"AI Brain"},pk={supervisor:"Supervisor",agent:"Agent"},mk={cancel:"Cancel",save:"Save",delete:"Delete",edit:"Edit",close:"Close",retry:"Retry",confirm:"Confirm",apply:"Apply",refresh:"Refresh",create:"Create",back:"Back"},gk={active:"Active",inactive:"Inactive",loading:"Loading..."},xk="Log out",yk="Chat Platform",bk="Respaldos Chile",vk="Language",wk="No department",Nk={nav:hk,roles:pk,actions:mk,status:gk,logout:xk,platformName:yk,companyName:bk,language:vk,noDepartment:wk},jk="Enter your credentials to continue",Sk="Username",Ck="admin",Ek="Password",_k="Signing in...",Tk="Sign in",Ak="Login failed",kk="Respaldos Chile  2025",Mk={subtitle:jk,username:Sk,usernamePlaceholder:Ck,password:Ek,submitting:_k,submit:Tk,error:Ak,footer:kk},Dk="Conversations",Rk={myChats:"My Chats",department:"Department",unassigned:"Unassigned",all:"All"},Ok={all:"All",whatsapp:"WhatsApp",instagram:"Instagram"},$k="Search conversation...",zk="No conversations",Lk="Select a conversation",Bk="No messages",Pk="Type a message...",Hk="Send",Uk="Sending...",qk="Error sending message",Ik="Take",Vk="Take this chat",Fk="Assign",Yk="Assign chat",Xk="Transfer",Gk="Transfer chat",Kk="Delete conversation",Qk="Real time",Wk="Reconnecting...",Zk="Client",Jk="Bot",eM="Image",tM="Image unavailable",nM="Your browser does not support video",sM="Document",aM="Shared contact",rM="{{count}} contacts",oM="Unassigned",iM="Delete conversation with {{name}}? All messages will be deleted.",lM="Error deleting",cM="Error deleting conversation",uM={title:"Assign Conversation",department:"Department",agent:"Agent",noDepartment:"No department assigned",noAgent:"No agent assigned",assigning:"Assigning...",errorAssigning:"Error assigning"},dM={title:"Transfer Conversation",targetDepartment:"Target department",keepCurrent:"Keep current department",targetAgent:"Target agent",noAgent:"No agent assigned",reason:"Reason (optional)",reasonPlaceholder:"E.g.: Customer needs technical support",transferring:"Transferring...",errorTransferring:"Error transferring"},fM={title:Dk,filters:Rk,channels:Ok,search:$k,noConversations:zk,selectConversation:Lk,noMessages:Bk,messagePlaceholder:Pk,send:Hk,sending:Uk,sendError:qk,take:Ik,takeTitle:Vk,assign:Fk,assignTitle:Yk,transfer:Xk,transferTitle:Gk,delete:"Delete",deleteTitle:Kk,realtime:Qk,reconnecting:Wk,client:Zk,bot:Jk,image:eM,imageUnavailable:tM,videoUnsupported:nM,document:sM,sharedContact:aM,sharedContacts:rM,unassignedBadge:oM,deleteConfirm:iM,deleteError:lM,deleteConversationError:cM,assignModal:uM,transferModal:dM},hM="Dashboard",pM="Your WhatsApp chatbot overview",mM={conversations:"Conversations",totalActive:"Total active",uniqueUsers:"Unique users",last30Days:"Last 30 days",interactions:"Interactions",processedByBot:"Processed by bot",confidence:"Confidence",avgClassification:"Avg. classification"},gM="Recent Conversations",xM="View all",yM="No conversations yet",bM="No messages",vM="Flow Editor",wM="Create and edit conversational flows visually",NM="View Conversations",jM="Reply to your customers in real time",SM={title:hM,subtitle:pM,stats:mM,recentConversations:gM,viewAll:xM,noConversationsYet:yM,noMessages:bM,flowEditor:vM,flowEditorDesc:wM,viewConversations:NM,viewConversationsDesc:jM},CM="Flow Management",EM="Manage your conversational flows and create new ones from predefined templates",_M="Auto Mode",TM="Bot responding",AM="Bot paused",kM="Auto mode ENABLED",MM="Auto mode DISABLED",DM="Loading flows...",RM="Error loading flows",OM="My Flows",$M="Templates",zM="WhatsApp Templates",LM="No flows created",BM="Start by creating a flow from a template",PM="View Templates",HM="Name",UM="Status",qM="Statistics",IM="Last updated",VM="Actions",FM="Executed: {{count}} times",YM="Completed: {{count}} times",XM="Create from this template",GM="Error creating flow",KM="Flow {{name}} deactivated",QM="Flow {{name}} activated",WM="Flow duplicated successfully",ZM="Error duplicating",JM="Are you sure you want to delete flow {{name}}?",eD="Flow deleted successfully",tD="Error deleting",nD="Error loading templates",sD="Meta Business Suite",aD="No templates found",rD="Approved",oD="Pending",iD="Rejected",lD="All",cD="Marketing",uD="Utility",dD="Authentication",fD="{{count}} templates found",hD="Loading Meta templates...",pD="Test Template",mD="Not available",gD="Active",xD="Inactive",yD='Flow "{{name}}" created successfully',bD="copy",vD="{{count}} nodes",wD="(No content)",ND="Adjust filters or create templates in Meta Business Suite",jD="Duplicate",SD="Category",CD={title:CM,subtitle:EM,autoMode:_M,botResponding:TM,botPaused:AM,autoModeOn:kM,autoModeOff:MM,loadingFlows:DM,errorLoading:RM,myFlows:OM,templates:$M,waTemplates:zM,noFlows:LM,startFromTemplate:BM,viewTemplates:PM,name:HM,state:UM,statistics:qM,lastUpdated:IM,actions:VM,default:"Default",executed:FM,completed:YM,createFromTemplate:XM,errorCreating:GM,flowDeactivated:KM,flowActivated:QM,duplicated:WM,errorDuplicating:ZM,deleteConfirm:JM,deleted:eD,errorDeleting:tD,errorLoadingTemplates:nD,metaBusinessSuite:sD,noTemplates:aD,approved:rD,pending:oD,rejected:iD,allTemplates:lD,marketing:cD,utility:uD,authentication:dD,templatesFound:fD,loadingMeta:hD,testTemplate:pD,notAvailable:mD,active:gD,inactive:xD,flowCreated:yD,copy:bD,nodes:vD,noContent:wD,adjustFilters:ND,duplicate:jD,category:SD},ED="Flow Builder",_D='Flow "{{name}}" loaded successfully',TD="Could not get flow data",AD="Error loading flow",kD="Error loading template",MD="Did not receive the created flow ID",DD="Test flow",RD="Loading flow...",OD={flowName:"Flow name",unsaved:"Unsaved",active:"Active",test:"Test",new:"+ New",open:"Open",save:"Save",saving:"Saving...",deactivate:"Deactivate",activate:"Activate",selectFlow:"Select flow",noFlowsSaved:"No saved flows",unsavedConfirm:"You have unsaved changes. Continue?",saveFirst:"Save the flow first",errorLoadingFlows:"Error loading flows",errorSaving:"Error saving",flowSaved:"Flow saved successfully",flowDeactivated:"Flow deactivated",flowActivated:"Flow activated",error:"Error:"},$D={title:"Nodes",hint:"Drag nodes to the canvas to build your flow",trigger:"Trigger",triggerDesc:"Flow start",message:"Message",messageDesc:"Send message",question:"Question",questionDesc:"Ask and wait",condition:"Condition",conditionDesc:"Branch",action:"Action",actionDesc:"Execute action",aiResponse:"AI Response",aiResponseDesc:"Generate with AI",webhook:"Webhook",webhookDesc:"Call external API",delay:"Delay",delayDesc:"Pause X seconds",transfer:"Transfer",transferDesc:"Transfer to human",end:"End",endDesc:"End flow"},zD={title:"Properties",label:"Label",triggerConfig:"Trigger Configuration",triggerType:"Activation type",keywords:"Keywords",classification:"Classification",always:"Always",keywordsLabel:"Keywords (comma-separated)",keywordsPlaceholder:"price, cost, quote, how much",keywordsHelp:"The flow activates if the message contains any of these words",intents:"Message intents",minUrgency:"Minimum urgency",minLeadScore:"Minimum lead score",leadScoreHelp:"Only activates if the lead has this score or higher (0-100)",alwaysWarning:"This flow will activate for ALL incoming messages that don't match other flows. Use it as a default flow.",anyUrgency:"Any",messageContent:"Message content",messagePlaceholder:"Write the message...",variableHelp:"Use {{variable}} to insert variables",targetDepartment:"Target department",autoDepartment:"Auto (detect by intent)",departmentHelp:'If you select "Auto", the detected intent will be used to assign department',saveVariable:"Save response in variable",responseOptions:"Response options",optionText:"Text",optionValue:"Value",addOption:"+ Add option",actionType:"Action type",selectAction:"Select...",notifySales:"Notify sales",createTicket:"Create ticket",saveLead:"Save lead",sendEmail:"Send email",callWebhook:"Call webhook",searchFaq:"Search FAQ",aiConfig:"AI Configuration",systemPrompt:"System prompt",systemPromptPlaceholder:"You are a friendly and professional sales assistant...",userPrompt:"User prompt",userPromptPlaceholder:"The customer asks: {{initial_message}}",dynamicVariableHelp:"Use {{variable}} to insert dynamic data",model:"Model",modelMini:"GPT-4o Mini (fast)",modelGpt4o:"GPT-4o (accurate)",modelGpt4Turbo:"GPT-4 Turbo",temperature:"Temperature",maxTokens:"Max tokens",saveResponseVariable:"Save response in variable (optional)",webhookConfig:"Webhook Configuration",endpointUrl:"Endpoint URL",endpointPlaceholder:"https://api.example.com/endpoint",httpMethod:"HTTP Method",headers:"Headers (JSON)",body:"Body (JSON) - Use {{variable}} for dynamic data",timeout:"Timeout (ms)",webhookSaveVariable:"Save response in variable",delayConfig:"Delay Configuration",delaySeconds:"Delay seconds",delayHelp:"Between 1 and 60 seconds. Recommended: 2-5 sec to seem more human.",showTyping:'Show "typing..." while waiting',deleteNode:"Delete node",intentsOptions:{sales:"Sales",support:"Support",complaints:"Complaints",info:"Information",greeting:"Greeting"},urgencyOptions:{low:"Low",medium:"Medium",high:"High",critical:"Critical"},newOption:"New option"},LD={welcome:"Welcome to Flow Builder!",welcomeDesc:"Create conversation flows for your WhatsApp chatbot visually, without writing code.",dragNodes:"Drag nodes to the canvas",dragNodesDesc:"On the left sidebar you'll find the available nodes. Drag them to the canvas to build your flow.",tipMessage:"Message: Send a text to the user",tipQuestion:"Question: Wait for a user response",tipCondition:"Condition: Branch the flow based on a variable",tipAction:"Action: Execute an action (notify, save, etc.)",connectNodes:"Connect the nodes",connectNodesDesc:"Drag from the green point (output) of a node to the gray point (input) of another to connect them.",tipFlowStartsTrigger:"The flow always starts at the Trigger",tipMultiplePaths:"You can have multiple paths with Conditions",tipEndWithNode:"End with an End or Transfer node",configureNodes:"Configure each node",configureNodesDesc:"Click on a node to see its properties on the right. There you can edit the content, options and variables.",tipUseVariables:"Use {{variable}} to insert dynamic data",tipQuestionsSave:"Questions save the response in a variable",tipConditionsEvaluate:"Conditions evaluate those variables",saveAndActivate:"Save and activate!",saveAndActivateDesc:"When you're done, save your flow and activate it so it starts responding to messages automatically.",tipMultipleFlows:"You can have multiple flows, but only some active",tipUseOpen:'Use "Open" to load saved flows',tipTemplates:"Templates give you example flows to get started",howToStart:"How do you want to start?",templateSubtitle:"You can start from scratch or use a predefined template",emptyTemplate:"Start empty",emptyTemplateDesc:"Blank canvas to create your own flow",salesFunnel:"Sales Funnel",salesFunnelDesc:"Qualify leads and guide them to purchase",supportFunnel:"Support Funnel",supportFunnelDesc:"Resolve questions with FAQ and escalate to humans",leadCapture:"Lead Capture",leadCaptureDesc:"Collect contact information",skipAndStart:"Skip and start empty ",skip:"Skip",next:"Next",start:"Start"},BD={title:"Chat Simulator",subtitle:"Test your flow here",placeholder:"Type a message...",send:"Send",reset:"Reset",noFlow:"No flow to simulate",thinking:"Thinking...",flowFinished:"Flow finished",transferring:"Transferring to an agent...",simulatingFlow:'Simulating flow: "{{name}}"',writeToStart:"Type a message to start...",flowEndedNoNext:"Flow ended (no next node)",triggerActivated:"Trigger activated",emptyMessage:"Empty message",evaluatingCondition:"Evaluating condition...",conditionMet:"Condition met: {{variable}} = {{value}}",executingAction:"Executing action: {{action}}",undefined:"undefined",generatingAI:"Generating AI response...",simulatedAIResponse:"Simulated AI Response",forPrompt:"For",variableSaved:'Variable "{{variable}}" = {{value}}',aiResponseValue:"AI response",callingWebhook:"Calling webhook: {{url}}",urlNotDefined:"URL not defined",method:"Method",webhookResponded:"Webhook responded: {{response}}",waitingSeconds:"Waiting {{seconds}} seconds...",transferredToHuman:"Conversation transferred to human",flowCompleted:"Flow completed",unknownNode:"Unknown node",noTriggerNode:"No Trigger node in the flow",variables:"Variables",server:"Server",waitingResponse:"Waiting for response...",variableSet:'Variable "{{variable}}" = "{{value}}"'},PD={newFlow:"New Flow",start:"Start",message:"Message",question:"Question",condition:"Condition",action:"Action",transfer:"Transfer",end:"End",writeMessage:"Write your message here...",whatOption:"What is your option?",transferMessage:"Transferring to an agent...",actionLabel:"Action: {{type}}"},HD={title:ED,flowLoaded:_D,errorLoadingFlow:TD,errorLoadingFlowAlert:AD,errorLoadingTemplate:kD,errorNoFlowId:MD,testFlow:DD,loadingFlow:RD,toolbar:OD,sidebar:$D,properties:zD,onboarding:LD,simulator:BD,store:PD},UD="Lead Management",qD="Manage and qualify your leads",ID="Total Leads",VD="Avg Score",FD="New",YD="Qualified",XD="Clients",GD="Score Distribution",KD="Hot",QD="Warm",WD="Cold",ZD="Filter:",JD="Search...",eR="All statuses",tR="New",nR="Engaged",sR="Qualified",aR="Client",rR="Inactive",oR="All scores",iR="Score 80+ (Hot)",lR="Score 50+ (Warm)",cR="Score 20+ (Cold)",uR="Highest score",dR="Lowest score",fR="Most recent",hR="Most messages",pR="Lead",mR="Score",gR="Status",xR="Messages",yR="Last activity",bR="Actions",vR="No name",wR="+5 points",NR="-5 points",jR="No leads registered",SR="Leads are created automatically when they interact",CR="View conversation",ER={title:UD,subtitle:qD,totalLeads:ID,avgScore:VD,newLeads:FD,qualified:YD,clients:XD,scoreDistribution:GD,hot:KD,warm:QD,cold:WD,new:"New",filter:ZD,searchPlaceholder:JD,allStatuses:eR,statusNew:tR,statusEngaged:nR,statusQualified:sR,statusClient:aR,statusInactive:rR,allScores:oR,scoreHot:iR,scoreWarm:lR,scoreCold:cR,sortHighest:uR,sortLowest:dR,sortRecent:fR,sortMostMessages:hR,lead:pR,score:mR,status:gR,messages:xR,lastActivity:yR,actions:bR,noName:vR,addPoints:wR,subPoints:NR,noLeads:jR,leadsHint:SR,viewConversation:CR},_R="Flow Analytics",TR="Metrics and performance analysis",AR="Last {{count}} days",kR="Refresh",MR="Total Executions",DR="{{count}} unique users",RR="Completion Rate",OR="{{count}} completed",$R="Failed",zR="{{count}} transferred",LR="Average Time",BR="{{count}} avg nodes",PR="Executions per day",HR="No data to show",UR="Completed",qR="Transferred",IR="Performance by Flow",VR="No flows configured",FR="executions",YR="View all flows",XR="Activity by Hour",GR="Distribution by Trigger Type",KR="No trigger data",QR="Completed: {{count}}",WR="Failed: {{count}}",ZR="Transferred: {{count}}",JR="{{hour}}:00 - {{count}} executions",eO={title:_R,subtitle:TR,lastDays:AR,refresh:kR,totalExecutions:MR,uniqueUsers:DR,completionRate:RR,completedCount:OR,failed:$R,transferredCount:zR,avgTime:LR,avgNodes:BR,executionsPerDay:PR,noDataToShow:HR,completed:UR,transferred:qR,performanceByFlow:IR,noFlowsConfigured:VR,executions:FR,viewAllFlows:YR,activityByHour:XR,triggerDistribution:GR,noTriggerData:KR,tooltipCompleted:QR,tooltipFailed:WR,tooltipTransferred:ZR,tooltipHourExecutions:JR},tO="Flow Monitor",nO="Real time",sO="Connected",aO="Disconnected",rO="{{count}} active executions",oO="Executions",iO="No executions",lO="Flow Execution",cO="Flow:",uO="Phone:",dO="Current Node:",fO="Node Type:",hO="Status:",pO="Completed ",mO="Error ",gO="Transferred ",xO="Running...",yO="Started:",bO="Completed:",vO="Details",wO="Variables",NO="Timeline",jO="No events yet",SO="Select an execution to view details",CO={title:tO,subtitle:nO,connected:sO,disconnected:aO,activeExecutions:rO,executions:oO,noExecutions:iO,flowExecution:lO,flow:cO,phone:uO,currentNode:dO,nodeType:fO,status:hO,statusCompleted:pO,statusError:mO,statusTransferred:gO,statusRunning:xO,started:yO,completedAt:bO,details:vO,variables:wO,timeline:NO,noEventsYet:jO,selectExecution:SO},EO="Execution Logs",_O="Flow execution history",TO="Completed",AO="Failed",kO="Transferred",MO="In progress",DO="Timeout",RO="Refresh",OO="Total executions",$O="Last 7 days",zO="Completion rate",LO="{{count}} completed",BO="Failed",PO="Need attention",HO="Average time",UO="Per execution",qO="Filter:",IO="All statuses",VO="Completed",FO="Failed",YO="Transferred",XO="In progress",GO="Phone...",KO="Apply",QO="No execution logs",WO="Logs will appear when flows are executed",ZO="Date",JO="Flow",e$="Phone",t$="Status",n$="Nodes",s$="Duration",a$="No name",r$="View detail",o$="Execution Detail",i$="Flow",l$="Phone",c$="Trigger message",u$="Final status",d$="Captured variables",f$="Executed nodes",h$="At node: {{nodeId}}",p$={title:EO,subtitle:_O,statusCompleted:TO,statusFailed:AO,statusTransferred:kO,statusInProgress:MO,statusTimeout:DO,refresh:RO,totalExecutions:OO,last7Days:$O,completionRate:zO,completedCount:LO,failed:BO,needAttention:PO,avgTime:HO,perExecution:UO,filter:qO,allStatuses:IO,completed:VO,failedPlural:FO,transferredPlural:YO,inProgress:XO,phonePlaceholder:GO,apply:KO,noLogs:QO,logsWillAppear:WO,thDate:ZO,thFlow:JO,thPhone:e$,thStatus:t$,thNodes:n$,thDuration:s$,noName:a$,viewDetail:r$,executionDetail:o$,detailFlow:i$,detailPhone:l$,triggerMessage:c$,finalStatus:u$,capturedVariables:d$,executedNodes:f$,errorInNode:h$},m$="Agents",g$="Manage system agents",x$="New Agent",y$="Edit Agent",b$="Name",v$="Username",w$="Password",N$="Email",j$="Role",S$="Department",C$="Status",E$="Actions",_$="Active",T$="Inactive",A$="Supervisor",k$="Agent",M$="No agents registered",D$="Are you sure you want to delete agent {{name}}?",R$="Agent created successfully",O$="Agent updated successfully",$$="Agent deleted successfully",z$="Error creating agent",L$="Error updating agent",B$="Error deleting agent",P$="Error loading agents",H$="Leave empty to keep current",U$="No department",q$="Last login",I$="Never",V$="Regenerate API Key",F$='Regenerate API key for "{{name}}"? The previous one will stop working.',Y$="Deactivate",X$="Avatar color",G$="Saving...",K$={title:m$,subtitle:g$,addAgent:x$,editAgent:y$,name:b$,username:v$,password:w$,email:N$,role:j$,department:S$,status:C$,actions:E$,active:_$,inactive:T$,supervisor:A$,agent:k$,noAgents:M$,deleteConfirm:D$,created:R$,updated:O$,deleted:$$,errorCreating:z$,errorUpdating:L$,errorDeleting:B$,errorLoading:P$,passwordPlaceholder:H$,noDepartment:U$,lastLogin:q$,never:I$,regenerateKey:V$,regenerateKeyConfirm:F$,deactivate:Y$,avatarColor:X$,saving:G$},Q$="Departments",W$="Organize agents by area",Z$="New Department",J$="Edit Department",e7="Name",t7="Display name",n7="Icon",s7="Color",a7="Auto-assign intents",r7="Status",o7="Actions",i7="Active",l7="Inactive",c7="No departments registered",u7="Are you sure you want to delete department {{name}}?",d7="Department created successfully",f7="Department updated successfully",h7="Department deleted successfully",p7="Error creating department",m7="Error updating department",g7="Error deleting department",x7="Error loading departments",y7="agents",b7="No agents",v7="Identifier (slug)",w7="When the chatbot detects these intents, it automatically assigns to this department.",N7="Saving...",j7={title:Q$,subtitle:W$,addDepartment:Z$,editDepartment:J$,name:e7,displayName:t7,icon:n7,color:s7,autoAssignIntents:a7,status:r7,actions:o7,active:i7,inactive:l7,noDepartments:c7,deleteConfirm:u7,created:d7,updated:f7,deleted:h7,errorCreating:p7,errorUpdating:m7,errorDeleting:g7,errorLoading:x7,agents:y7,noAgents:b7,slug:v7,autoAssignHint:w7,saving:N7},S7={brain:"AI Brain",instructions:"Instructions",conversations:"AI Conversations",dashboard:"Dashboard",qaPairs:"Q&A Pairs",pricing:"Pricing"},C7={generalConfidence:"General Confidence",topicCoverage:"Topic Coverage",responseQuality:"Response Quality",updatedPricing:"Updated Pricing"},E7={answerPricing:"Answer Pricing",compareProducts:"Compare Products",recommend:"Recommend",informDeadlines:"Inform Deadlines",informShipping:"Inform Shipping"},_7={pending:"Pending",approved:"Approved",rejected:"Rejected"},T7="AI Brain - Learning",A7="Knowledge system acquired by the AI",k7={lastAnalysis:"Last analysis",noAnalysis:"No previous analysis",cached:"cached",generating:"Generating...",regenerate:"Regenerate Analysis",openaiNotConfigured:"OpenAI not configured. Basic data shown without AI analysis. Configure OPENAI_API_KEY for the full report.",approvedPairs:"Approved Pairs",pendingPairs:"Pending",activePrices:"Active Prices",avgQuality:"Average Quality",knowledgeBase:"Knowledge base",toReview:"To review",productsWithPrice:"Products with price",qaScore:"Q&A Score",noData:'No analysis data. Approve Q&A pairs and press "Regenerate Analysis".',generalSummary:"General Summary",masteredTopics:"Mastered Topics",noTopics:"No topics detected yet",knowledgeGaps:"Knowledge Gaps",noGaps:"No gaps detected",capabilities:"Capabilities",reasoning:"Reasoning",recommendations:"Recommendations",baseData:"Base data: {{pairs}} approved pairs, {{prices}} prices",aiGenerated:"Analysis generated by AI",noAiAnalysis:"Data without AI analysis"},M7={loadingStats:"Loading statistics...",totalPairs:"Total Pairs",qaLearned:"Q&A learned",approved:"Approved",withEmbedding:"{{count}} with embedding",pending:"Pending",qualityScore:"Quality score",channelDistribution:"Distribution by Channel"},D7={allStatuses:"All statuses",allChannels:"All channels",minQuality:"Min quality",totalPairs:"{{count}} pairs total",reprocess:"Reprocess",question:"Question",answer:"Answer",quality:"Quality",channel:"Channel",status:"Status",actions:"Actions",noResults:"No pairs match the filters",viewDetail:"View detail",approve:"Approve",reject:"Reject",page:"Page {{current}} of {{total}}",detailTitle:"Q&A Pair Detail",customerQuestion:"Customer question",agentAnswer:"Agent answer",deleteConfirm:"Delete this pair permanently?",reprocessed:"Reprocessed: {{count}} sessions",reprocessTitle:"Reprocess Sessions",reprocessDesc:"Extract Q&A pairs from past conversations. Optional: filter by date range.",from:"From (optional)",to:"To (optional)",processing:"Processing..."},R7={showInactive:"Show inactive",newPrice:"New Price",editPrice:"Edit Price",product:"Product",variant:"Variant",price:"Price",status:"Status",notes:"Notes",actions:"Actions",noPrices:"No prices. Create the first one.",active:"Active",inactive:"Inactive",deactivate:"Deactivate",deactivateConfirm:"Deactivate this price?",currency:"Currency",saving:"Saving..."},O7={title:"AI Instructions",subtitle:"Write rules, knowledge and procedures the AI should follow",systemPromptLabel:"System prompt (general brain)",customize:"Customize",restoreDefault:"Restore default",remove:"Remove",usingDefault:'Using default prompt. Click "Customize" to edit it.',additionalInstructions:"Additional instructions",additionalDesc:"Specific rules, business knowledge, procedures. Added to the system prompt.",saving:"Saving...",saveAll:"Save All",saved:"Saved",viewPrompt:"View Prompt",testAI:"Test AI",currentPrompt:"Current Prompt",errorLoadingPrompt:"Error loading prompt",tipsTitle:"Tips for better instructions"},$7={title:"Behavioral Rules",subtitle:"Rules the AI must always follow. Injected with high priority in every response.",count:"{{count}}/{{max}} rules",loading:"Loading rules...",noRules:"No rules yet",noRulesHint:'Add rules here or from the AI Tester with "Correct"',deleteRule:"Delete rule",add:"Add",catGeneral:"General",catTone:"Tone",catKnowledge:"Knowledge",catSales:"Sales",catFormat:"Format",catSafety:"Safety"},z7={title:"Bot Conversations",subtitle:"Review and correct the AI's automatic responses",noConversations:"No conversations where the bot has responded yet",noConversationsHint:"When the AI responds to messages, they will appear here",session:"Session",phone:"Phone",aiMsgs:"AI Msgs",lastMessage:"Last message",date:"Date",messages:"messages",backToList:"Back to conversations",correct:"Correct",corrected:"Corrected",correctAnswer:"Correct answer",correctPlaceholder:"Write the correct answer the bot should give...",saving:"Saving...",saveCorrection:"Save Correction"},L7={title:"AI Tester",subtitle:"Test your prompt in real time",chatTitle:"Test Chat",placeholder:"Type a test message...",inputPlaceholder:"Type a message...",send:"Send",clear:"Clear",newConversation:"New conv.",rayosX:"X-Ray",pipeline:"Pipeline",knowledge:"Knowledge",history:"History",prompt:"Prompt",correction:"Correction",correctionTitle:"Correct Response",correctedAnswer:"Corrected answer",correctedPlaceholder:"Type the correct answer...",saveCorrection:"Save Correction",saving:"Saving...",savingShort:"Saving...",save:"Save",confidence:"Confidence",source:"Source",sources:"Sources",noSources:"No sources",responseTime:"Response time",model:"Model",tokens:"Tokens",step:"Step",input:"Input",output:"Output",duration:"Duration",systemPrompt:"System prompt",userPrompt:"User prompt",noHistory:"No history",knowledgeBase:"Knowledge base",totalEntries:"Total entries",categories:"Categories",lastUpdated:"Last updated",emptyChat:"Type a message to test the AI",emptyChatSub:"Uses the same engine as real WhatsApp",noResponse:"(no bot response)",errorSavingCorrection:"Error saving correction: ",botLabel:"AI BOT",correctedBadge:"Corrected",ruleAdded:"Rule added",retest:"Re-test",correct:"Correct",factualCorrection:"Incorrect answer",behavioralCorrection:"Behavioral rule",factualPlaceholder:"What is the correct answer?",factualHint:"This will create a new approved Q&A pair",behavioralPlaceholder:"E.g.: Never offer discounts without authorization",behavioralHint:"This rule will be added to permanent instructions",cancel:"Cancel",unknownModel:"unknown",prices:"Prices",rules:"Rules",instructions:"Instructions",fidelity:"Fidelity",sendMessageToSeePipeline:"Send a message to see the pipeline",debugActivatesPerMessage:"Debug activates with each message",noConversationHistory:"No conversation history",firstMessageOfSession:"This is the first message of the session",turnsLoadedAsContext:"{{count}} turns loaded as context",sessionCorrections:"Session corrections",correctedResponse:"Corrected response",retrieverAvailable:"Available",retrieverUnavailable:"Unavailable",retrieverLabel:"Retriever: {{status}}",searchDuration:"Search: {{ms}}ms",combinedResults:"{{count}} combined results",vectorSearch:"Vector search ({{count}})",learned:"Learned",similarity:"{{pct}}% similarity",bm25Search:"BM25 / FAQ search ({{count}})",pricesFound:"Prices found ({{count}})",detectedProduct:"Detected product:",variant:"Variant:",thProduct:"Product",thVariant:"Variant",thPrice:"Price",priceQueryNoResults:"Price query detected but no results found",priceQueryNoResultsFor:'Price query detected but no results found for "{{product}}"',noKnowledgeInjected:"No knowledge was injected in this response",noKnowledgeHint:"The bot may have responded with only the base prompt",messageReceived:"Message received",sessionMode:"Session mode",globalKeywords:"Global keywords",matched:'Match: "{{keyword}}"  {{action}}',noMatch:"No match",activeSession:"Active session",flowAtNode:"Flow #{{flowId}} at node {{nodeId}}",noActiveFlow:"No active flow",classification:"Classification",notExecuted:"Not executed",flowMatch:"Flow match",notEvaluated:"Not evaluated",defaultUsed:"Default used",noMatchToAI:"No match  AI",contact:"Contact",noName:"No name",knowledgeLabel:"Knowledge",pairs:"pairs",pricesLabel:"Prices",notPriceQuery:"Not a price query",notQueried:"Not queried",pricesFoundSummary:"{{count}} prices found",historyLabel:"History",turns:"{{count}} turns",promptBuilt:"Prompt built",plusKnowledge:"+knowledge",plusRules:"+rules",openaiWaiting:"Waiting...",delivery:"Delivery",msgsSent:"{{count}} msg(s) sent",aiFallback:"AI Fallback",pipelineTotal:"Total: {{ms}}ms",result:"Result",responseSent:"Response sent",noResponse2:"No response",evaluating:"Evaluating...",searching:"Searching...",verifying:"Verifying...",analyzing:"Analyzing...",processing:"Processing...",eachStepShownHere:"Each brain step will be shown here",responses:"{{count}} response(s)",noPromptData:"No prompt data",customPrompt:"Custom prompt",qaPairsCount:"+{{count}} Q&A pairs",plusPrices:"+prices",rulesCount:"+{{count}} rules",plusAdminInstructions:"+admin instructions",fidelityLevel:"Fidelity: {{level}}",fullSystemPrompt:"Full System Prompt",behavioralRules:"Behavioral Rules",adminInstructions:"Admin Instructions",openaiResponse:"OpenAI Response",noPromptDataAvailable:"No prompt data available in this trace",enableRayosXHint:"Make sure to send a message with X-Ray enabled"},B7={tabs:S7,metrics:C7,capabilities:E7,status:_7,pageTitle:T7,pageSubtitle:A7,brain:k7,dashboard:M7,pairs:D7,prices:R7,instructions:O7,rules:$7,conversations:z7,probador:L7};Rt.use(Lv).use(E5).init({resources:{es:{common:QE,login:r3,conversations:H3,dashboard:Z3,flows:J_,flowBuilder:p6,leads:eT,analytics:TT,monitor:JT,logs:qA,agents:j8,departments:W8,learning:fk},en:{common:Nk,login:Mk,conversations:fM,dashboard:SM,flows:CD,flowBuilder:HD,leads:ER,analytics:eO,monitor:CO,logs:p$,agents:K$,departments:j7,learning:B7}},fallbackLng:"es",defaultNS:"common",ns:["common","login","conversations","dashboard","flows","flowBuilder","leads","analytics","monitor","logs","agents","departments","learning"],detection:{order:["localStorage","navigator"],lookupLocalStorage:"i18nextLng",caches:["localStorage"]},interpolation:{escapeValue:!1}});const P7={es:Ov,en:Tp};function ua(){const e=Rt.language?.substring(0,2)||"es";return P7[e]||Ov}function iu(e,t){return ki(e,{...t,weekStartsOn:1})}function Bv(e,t){const a=vt(e,t?.in),r=a.getFullYear(),l=Ns(a,0);l.setFullYear(r+1,0,4),l.setHours(0,0,0,0);const u=iu(l),d=Ns(a,0);d.setFullYear(r,0,4),d.setHours(0,0,0,0);const h=iu(d);return a.getTime()>=u.getTime()?r+1:a.getTime()>=h.getTime()?r:r-1}function lu(e){const t=vt(e),a=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return a.setUTCFullYear(t.getFullYear()),+e-+a}function Ey(e,t){const a=vt(e,t?.in);return a.setHours(0,0,0,0),a}function H7(e,t,a){const[r,l]=Au(a?.in,e,t),u=Ey(r),d=Ey(l),h=+u-lu(u),m=+d-lu(d);return Math.round((h-m)/bC)}function U7(e,t){const a=Bv(e,t),r=Ns(e,0);return r.setFullYear(a,0,4),r.setHours(0,0,0,0),iu(r)}function Ic(e,t){const a=+vt(e)-+vt(t);return a<0?-1:a>0?1:a}function q7(e){return Ns(e,Date.now())}function I7(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function V7(e){return!(!I7(e)&&typeof e!="number"||isNaN(+vt(e)))}function F7(e,t,a){const[r,l]=Au(a?.in,e,t),u=r.getFullYear()-l.getFullYear(),d=r.getMonth()-l.getMonth();return u*12+d}function Y7(e){return t=>{const r=(e?Math[e]:Math.trunc)(t);return r===0?0:r}}function X7(e,t){return+vt(e)-+vt(t)}function G7(e,t){const a=vt(e,t?.in);return a.setHours(23,59,59,999),a}function K7(e,t){const a=vt(e,t?.in),r=a.getMonth();return a.setFullYear(a.getFullYear(),r+1,0),a.setHours(23,59,59,999),a}function Q7(e,t){const a=vt(e,t?.in);return+G7(a,t)==+K7(a,t)}function W7(e,t,a){const[r,l,u]=Au(a?.in,e,e,t),d=Ic(l,u),h=Math.abs(F7(l,u));if(h<1)return 0;l.getMonth()===1&&l.getDate()>27&&l.setDate(30),l.setMonth(l.getMonth()-d*h);let m=Ic(l,u)===-d;Q7(r)&&h===1&&Ic(r,u)===1&&(m=!1);const p=d*(h-+m);return p===0?0:p}function Z7(e,t,a){const r=X7(e,t)/1e3;return Y7(a?.roundingMethod)(r)}function J7(e,t){const a=vt(e,t?.in);return a.setFullYear(a.getFullYear(),0,1),a.setHours(0,0,0,0),a}function ez(e,t){const a=vt(e,t?.in);return H7(a,J7(a))+1}function tz(e,t){const a=vt(e,t?.in),r=+iu(a)-+U7(a);return Math.round(r/Rv)+1}function Pv(e,t){const a=vt(e,t?.in),r=a.getFullYear(),l=Yi(),u=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??l.firstWeekContainsDate??l.locale?.options?.firstWeekContainsDate??1,d=Ns(t?.in||e,0);d.setFullYear(r+1,0,u),d.setHours(0,0,0,0);const h=ki(d,t),m=Ns(t?.in||e,0);m.setFullYear(r,0,u),m.setHours(0,0,0,0);const p=ki(m,t);return+a>=+h?r+1:+a>=+p?r:r-1}function nz(e,t){const a=Yi(),r=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??a.firstWeekContainsDate??a.locale?.options?.firstWeekContainsDate??1,l=Pv(e,t),u=Ns(t?.in||e,0);return u.setFullYear(l,0,r),u.setHours(0,0,0,0),ki(u,t)}function sz(e,t){const a=vt(e,t?.in),r=+ki(a,t)-+nz(a,t);return Math.round(r/Rv)+1}function Ve(e,t){const a=e<0?"-":"",r=Math.abs(e).toString().padStart(t,"0");return a+r}const ta={y(e,t){const a=e.getFullYear(),r=a>0?a:1-a;return Ve(t==="yy"?r%100:r,t.length)},M(e,t){const a=e.getMonth();return t==="M"?String(a+1):Ve(a+1,2)},d(e,t){return Ve(e.getDate(),t.length)},a(e,t){const a=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return a.toUpperCase();case"aaa":return a;case"aaaaa":return a[0];default:return a==="am"?"a.m.":"p.m."}},h(e,t){return Ve(e.getHours()%12||12,t.length)},H(e,t){return Ve(e.getHours(),t.length)},m(e,t){return Ve(e.getMinutes(),t.length)},s(e,t){return Ve(e.getSeconds(),t.length)},S(e,t){const a=t.length,r=e.getMilliseconds(),l=Math.trunc(r*Math.pow(10,a-3));return Ve(l,t.length)}},Hr={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},_y={G:function(e,t,a){const r=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return a.era(r,{width:"abbreviated"});case"GGGGG":return a.era(r,{width:"narrow"});default:return a.era(r,{width:"wide"})}},y:function(e,t,a){if(t==="yo"){const r=e.getFullYear(),l=r>0?r:1-r;return a.ordinalNumber(l,{unit:"year"})}return ta.y(e,t)},Y:function(e,t,a,r){const l=Pv(e,r),u=l>0?l:1-l;if(t==="YY"){const d=u%100;return Ve(d,2)}return t==="Yo"?a.ordinalNumber(u,{unit:"year"}):Ve(u,t.length)},R:function(e,t){const a=Bv(e);return Ve(a,t.length)},u:function(e,t){const a=e.getFullYear();return Ve(a,t.length)},Q:function(e,t,a){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return Ve(r,2);case"Qo":return a.ordinalNumber(r,{unit:"quarter"});case"QQQ":return a.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return a.quarter(r,{width:"narrow",context:"formatting"});default:return a.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,a){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return Ve(r,2);case"qo":return a.ordinalNumber(r,{unit:"quarter"});case"qqq":return a.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return a.quarter(r,{width:"narrow",context:"standalone"});default:return a.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,a){const r=e.getMonth();switch(t){case"M":case"MM":return ta.M(e,t);case"Mo":return a.ordinalNumber(r+1,{unit:"month"});case"MMM":return a.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return a.month(r,{width:"narrow",context:"formatting"});default:return a.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,a){const r=e.getMonth();switch(t){case"L":return String(r+1);case"LL":return Ve(r+1,2);case"Lo":return a.ordinalNumber(r+1,{unit:"month"});case"LLL":return a.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return a.month(r,{width:"narrow",context:"standalone"});default:return a.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,a,r){const l=sz(e,r);return t==="wo"?a.ordinalNumber(l,{unit:"week"}):Ve(l,t.length)},I:function(e,t,a){const r=tz(e);return t==="Io"?a.ordinalNumber(r,{unit:"week"}):Ve(r,t.length)},d:function(e,t,a){return t==="do"?a.ordinalNumber(e.getDate(),{unit:"date"}):ta.d(e,t)},D:function(e,t,a){const r=ez(e);return t==="Do"?a.ordinalNumber(r,{unit:"dayOfYear"}):Ve(r,t.length)},E:function(e,t,a){const r=e.getDay();switch(t){case"E":case"EE":case"EEE":return a.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return a.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return a.day(r,{width:"short",context:"formatting"});default:return a.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,a,r){const l=e.getDay(),u=(l-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(u);case"ee":return Ve(u,2);case"eo":return a.ordinalNumber(u,{unit:"day"});case"eee":return a.day(l,{width:"abbreviated",context:"formatting"});case"eeeee":return a.day(l,{width:"narrow",context:"formatting"});case"eeeeee":return a.day(l,{width:"short",context:"formatting"});default:return a.day(l,{width:"wide",context:"formatting"})}},c:function(e,t,a,r){const l=e.getDay(),u=(l-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(u);case"cc":return Ve(u,t.length);case"co":return a.ordinalNumber(u,{unit:"day"});case"ccc":return a.day(l,{width:"abbreviated",context:"standalone"});case"ccccc":return a.day(l,{width:"narrow",context:"standalone"});case"cccccc":return a.day(l,{width:"short",context:"standalone"});default:return a.day(l,{width:"wide",context:"standalone"})}},i:function(e,t,a){const r=e.getDay(),l=r===0?7:r;switch(t){case"i":return String(l);case"ii":return Ve(l,t.length);case"io":return a.ordinalNumber(l,{unit:"day"});case"iii":return a.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return a.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return a.day(r,{width:"short",context:"formatting"});default:return a.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,a){const l=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return a.dayPeriod(l,{width:"abbreviated",context:"formatting"});case"aaa":return a.dayPeriod(l,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return a.dayPeriod(l,{width:"narrow",context:"formatting"});default:return a.dayPeriod(l,{width:"wide",context:"formatting"})}},b:function(e,t,a){const r=e.getHours();let l;switch(r===12?l=Hr.noon:r===0?l=Hr.midnight:l=r/12>=1?"pm":"am",t){case"b":case"bb":return a.dayPeriod(l,{width:"abbreviated",context:"formatting"});case"bbb":return a.dayPeriod(l,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return a.dayPeriod(l,{width:"narrow",context:"formatting"});default:return a.dayPeriod(l,{width:"wide",context:"formatting"})}},B:function(e,t,a){const r=e.getHours();let l;switch(r>=17?l=Hr.evening:r>=12?l=Hr.afternoon:r>=4?l=Hr.morning:l=Hr.night,t){case"B":case"BB":case"BBB":return a.dayPeriod(l,{width:"abbreviated",context:"formatting"});case"BBBBB":return a.dayPeriod(l,{width:"narrow",context:"formatting"});default:return a.dayPeriod(l,{width:"wide",context:"formatting"})}},h:function(e,t,a){if(t==="ho"){let r=e.getHours()%12;return r===0&&(r=12),a.ordinalNumber(r,{unit:"hour"})}return ta.h(e,t)},H:function(e,t,a){return t==="Ho"?a.ordinalNumber(e.getHours(),{unit:"hour"}):ta.H(e,t)},K:function(e,t,a){const r=e.getHours()%12;return t==="Ko"?a.ordinalNumber(r,{unit:"hour"}):Ve(r,t.length)},k:function(e,t,a){let r=e.getHours();return r===0&&(r=24),t==="ko"?a.ordinalNumber(r,{unit:"hour"}):Ve(r,t.length)},m:function(e,t,a){return t==="mo"?a.ordinalNumber(e.getMinutes(),{unit:"minute"}):ta.m(e,t)},s:function(e,t,a){return t==="so"?a.ordinalNumber(e.getSeconds(),{unit:"second"}):ta.s(e,t)},S:function(e,t){return ta.S(e,t)},X:function(e,t,a){const r=e.getTimezoneOffset();if(r===0)return"Z";switch(t){case"X":return Ay(r);case"XXXX":case"XX":return za(r);default:return za(r,":")}},x:function(e,t,a){const r=e.getTimezoneOffset();switch(t){case"x":return Ay(r);case"xxxx":case"xx":return za(r);default:return za(r,":")}},O:function(e,t,a){const r=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+Ty(r,":");default:return"GMT"+za(r,":")}},z:function(e,t,a){const r=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+Ty(r,":");default:return"GMT"+za(r,":")}},t:function(e,t,a){const r=Math.trunc(+e/1e3);return Ve(r,t.length)},T:function(e,t,a){return Ve(+e,t.length)}};function Ty(e,t=""){const a=e>0?"-":"+",r=Math.abs(e),l=Math.trunc(r/60),u=r%60;return u===0?a+String(l):a+String(l)+t+Ve(u,2)}function Ay(e,t){return e%60===0?(e>0?"-":"+")+Ve(Math.abs(e)/60,2):za(e,t)}function za(e,t=""){const a=e>0?"-":"+",r=Math.abs(e),l=Ve(Math.trunc(r/60),2),u=Ve(r%60,2);return a+l+t+u}const ky=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},Hv=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}},az=(e,t)=>{const a=e.match(/(P+)(p+)?/)||[],r=a[1],l=a[2];if(!l)return ky(e,t);let u;switch(r){case"P":u=t.dateTime({width:"short"});break;case"PP":u=t.dateTime({width:"medium"});break;case"PPP":u=t.dateTime({width:"long"});break;default:u=t.dateTime({width:"full"});break}return u.replace("{{date}}",ky(r,t)).replace("{{time}}",Hv(l,t))},rz={p:Hv,P:az},oz=/^D+$/,iz=/^Y+$/,lz=["D","DD","YY","YYYY"];function cz(e){return oz.test(e)}function uz(e){return iz.test(e)}function dz(e,t,a){const r=fz(e,t,a);if(console.warn(r),lz.includes(e))throw new RangeError(r)}function fz(e,t,a){const r=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${r} to the input \`${a}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const hz=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,pz=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,mz=/^'([^]*?)'?$/,gz=/''/g,xz=/[a-zA-Z]/;function ku(e,t,a){const r=Yi(),l=a?.locale??r.locale??Tp,u=a?.firstWeekContainsDate??a?.locale?.options?.firstWeekContainsDate??r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,d=a?.weekStartsOn??a?.locale?.options?.weekStartsOn??r.weekStartsOn??r.locale?.options?.weekStartsOn??0,h=vt(e,a?.in);if(!V7(h))throw new RangeError("Invalid time value");let m=t.match(pz).map(y=>{const x=y[0];if(x==="p"||x==="P"){const b=rz[x];return b(y,l.formatLong)}return y}).join("").match(hz).map(y=>{if(y==="''")return{isToken:!1,value:"'"};const x=y[0];if(x==="'")return{isToken:!1,value:yz(y)};if(_y[x])return{isToken:!0,value:y};if(x.match(xz))throw new RangeError("Format string contains an unescaped latin alphabet character `"+x+"`");return{isToken:!1,value:y}});l.localize.preprocessor&&(m=l.localize.preprocessor(h,m));const p={firstWeekContainsDate:u,weekStartsOn:d,locale:l};return m.map(y=>{if(!y.isToken)return y.value;const x=y.value;(!a?.useAdditionalWeekYearTokens&&uz(x)||!a?.useAdditionalDayOfYearTokens&&cz(x))&&dz(x,t,String(e));const b=_y[x[0]];return b(h,x,l.localize,p)}).join("")}function yz(e){const t=e.match(mz);return t?t[1].replace(gz,"'"):e}function bz(e,t,a){const r=Yi(),l=a?.locale??r.locale??Tp,u=2520,d=Ic(e,t);if(isNaN(d))throw new RangeError("Invalid time value");const h=Object.assign({},a,{addSuffix:a?.addSuffix,comparison:d}),[m,p]=Au(a?.in,...d>0?[t,e]:[e,t]),y=Z7(p,m),x=(lu(p)-lu(m))/1e3,b=Math.round((y-x)/60);let v;if(b<2)return a?.includeSeconds?y<5?l.formatDistance("lessThanXSeconds",5,h):y<10?l.formatDistance("lessThanXSeconds",10,h):y<20?l.formatDistance("lessThanXSeconds",20,h):y<40?l.formatDistance("halfAMinute",0,h):y<60?l.formatDistance("lessThanXMinutes",1,h):l.formatDistance("xMinutes",1,h):b===0?l.formatDistance("lessThanXMinutes",1,h):l.formatDistance("xMinutes",b,h);if(b<45)return l.formatDistance("xMinutes",b,h);if(b<90)return l.formatDistance("aboutXHours",1,h);if(b<vy){const w=Math.round(b/60);return l.formatDistance("aboutXHours",w,h)}else{if(b<u)return l.formatDistance("xDays",1,h);if(b<Ec){const w=Math.round(b/vy);return l.formatDistance("xDays",w,h)}else if(b<Ec*2)return v=Math.round(b/Ec),l.formatDistance("aboutXMonths",v,h)}if(v=W7(p,m),v<12){const w=Math.round(b/Ec);return l.formatDistance("xMonths",w,h)}else{const w=v%12,_=Math.trunc(v/12);return w<3?l.formatDistance("aboutXYears",_,h):w<9?l.formatDistance("overXYears",_,h):l.formatDistance("almostXYears",_+1,h)}}function po(e,t){return bz(e,q7(e),t)}function vz(){const{t:e}=ze("dashboard"),[t,a]=S.useState(null),[r,l]=S.useState([]),[u,d]=S.useState(!0);S.useEffect(()=>{h()},[]);const h=async()=>{try{const[p,y]=await Promise.all([gC(),Mv()]);a(p),l(y.conversations||[])}catch(p){console.error("Error loading dashboard:",p)}finally{d(!1)}};if(u)return o.jsx("div",{className:"p-8 flex items-center justify-center h-full",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-500"})});const m=r.slice(0,5);return o.jsxs("div",{className:"p-8",children:[o.jsxs("div",{className:"mb-8",children:[o.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:e("title")}),o.jsx("p",{className:"text-gray-500 mt-1",children:e("subtitle")})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[o.jsx(xn,{title:e("stats.conversations"),value:r.length,icon:Xt,color:"green",subtitle:e("stats.totalActive")}),o.jsx(xn,{title:e("stats.uniqueUsers"),value:t?.unique_users||0,icon:Tu,color:"blue",subtitle:e("stats.last30Days")}),o.jsx(xn,{title:e("stats.interactions"),value:t?.interactions||0,icon:vp,color:"purple",subtitle:e("stats.processedByBot")}),o.jsx(xn,{title:e("stats.confidence"),value:`${Math.round((t?.avg_confidence||0)*100)}%`,icon:Qr,color:"yellow",subtitle:e("stats.avgClassification")})]}),o.jsxs("div",{className:"bg-white rounded-xl border border-gray-100 shadow-sm",children:[o.jsxs("div",{className:"p-6 border-b border-gray-100 flex items-center justify-between",children:[o.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:e("recentConversations")}),o.jsxs(Ba,{to:"/conversations",className:"text-green-600 hover:text-green-700 text-sm font-medium flex items-center gap-1",children:[e("viewAll")," ",o.jsx(V5,{className:"w-4 h-4"})]})]}),m.length===0?o.jsxs("div",{className:"p-12 text-center text-gray-400",children:[o.jsx(Xt,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),o.jsx("p",{children:e("noConversationsYet")})]}):o.jsx("div",{className:"divide-y divide-gray-100",children:m.map(p=>o.jsxs(Ba,{to:`/conversations?phone=${encodeURIComponent(p.phone)}`,className:"flex items-center gap-4 p-4 hover:bg-gray-50 transition",children:[o.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center flex-shrink-0",children:o.jsx("span",{className:"text-green-600 font-medium",children:p.contact_name?.[0]?.toUpperCase()||p.phone.slice(-2)})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("p",{className:"font-medium text-gray-800 truncate",children:p.contact_name||p.phone}),o.jsx("span",{className:"text-xs text-gray-400",children:p.last_message_time?po(new Date(p.last_message_time),{addSuffix:!0,locale:ua()}):""})]}),o.jsx("p",{className:"text-sm text-gray-500 truncate mt-1",children:p.last_message||e("noMessages")})]}),p.unread_count>0&&o.jsx("span",{className:"bg-green-500 text-white text-xs font-medium px-2 py-1 rounded-full",children:p.unread_count})]},p.phone))})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-8",children:[o.jsxs(Ba,{to:"/flows",className:"bg-gradient-to-r from-green-500 to-green-600 rounded-xl p-6 text-white hover:from-green-600 hover:to-green-700 transition",children:[o.jsx("h3",{className:"text-lg font-semibold mb-2",children:e("flowEditor")}),o.jsx("p",{className:"text-green-100 text-sm",children:e("flowEditorDesc")})]}),o.jsxs(Ba,{to:"/conversations",className:"bg-gradient-to-r from-blue-500 to-blue-600 rounded-xl p-6 text-white hover:from-blue-600 hover:to-blue-700 transition",children:[o.jsx("h3",{className:"text-lg font-semibold mb-2",children:e("viewConversations")}),o.jsx("p",{className:"text-blue-100 text-sm",children:e("viewConversationsDesc")})]})]})]})}const Fn=Object.create(null);Fn.open="0";Fn.close="1";Fn.ping="2";Fn.pong="3";Fn.message="4";Fn.upgrade="5";Fn.noop="6";const Vc=Object.create(null);Object.keys(Fn).forEach(e=>{Vc[Fn[e]]=e});const Vh={type:"error",data:"parser error"},Uv=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",qv=typeof ArrayBuffer=="function",Iv=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,Ap=({type:e,data:t},a,r)=>Uv&&t instanceof Blob?a?r(t):My(t,r):qv&&(t instanceof ArrayBuffer||Iv(t))?a?r(t):My(new Blob([t]),r):r(Fn[e]+(t||"")),My=(e,t)=>{const a=new FileReader;return a.onload=function(){const r=a.result.split(",")[1];t("b"+(r||""))},a.readAsDataURL(e)};function Dy(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let vh;function wz(e,t){if(Uv&&e.data instanceof Blob)return e.data.arrayBuffer().then(Dy).then(t);if(qv&&(e.data instanceof ArrayBuffer||Iv(e.data)))return t(Dy(e.data));Ap(e,!1,a=>{vh||(vh=new TextEncoder),t(vh.encode(a))})}const Ry="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",wi=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let e=0;e<Ry.length;e++)wi[Ry.charCodeAt(e)]=e;const Nz=e=>{let t=e.length*.75,a=e.length,r,l=0,u,d,h,m;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);const p=new ArrayBuffer(t),y=new Uint8Array(p);for(r=0;r<a;r+=4)u=wi[e.charCodeAt(r)],d=wi[e.charCodeAt(r+1)],h=wi[e.charCodeAt(r+2)],m=wi[e.charCodeAt(r+3)],y[l++]=u<<2|d>>4,y[l++]=(d&15)<<4|h>>2,y[l++]=(h&3)<<6|m&63;return p},jz=typeof ArrayBuffer=="function",kp=(e,t)=>{if(typeof e!="string")return{type:"message",data:Vv(e,t)};const a=e.charAt(0);return a==="b"?{type:"message",data:Sz(e.substring(1),t)}:Vc[a]?e.length>1?{type:Vc[a],data:e.substring(1)}:{type:Vc[a]}:Vh},Sz=(e,t)=>{if(jz){const a=Nz(e);return Vv(a,t)}else return{base64:!0,data:e}},Vv=(e,t)=>t==="blob"?e instanceof Blob?e:new Blob([e]):e instanceof ArrayBuffer?e:e.buffer,Fv="",Cz=(e,t)=>{const a=e.length,r=new Array(a);let l=0;e.forEach((u,d)=>{Ap(u,!1,h=>{r[d]=h,++l===a&&t(r.join(Fv))})})},Ez=(e,t)=>{const a=e.split(Fv),r=[];for(let l=0;l<a.length;l++){const u=kp(a[l],t);if(r.push(u),u.type==="error")break}return r};function _z(){return new TransformStream({transform(e,t){wz(e,a=>{const r=a.length;let l;if(r<126)l=new Uint8Array(1),new DataView(l.buffer).setUint8(0,r);else if(r<65536){l=new Uint8Array(3);const u=new DataView(l.buffer);u.setUint8(0,126),u.setUint16(1,r)}else{l=new Uint8Array(9);const u=new DataView(l.buffer);u.setUint8(0,127),u.setBigUint64(1,BigInt(r))}e.data&&typeof e.data!="string"&&(l[0]|=128),t.enqueue(l),t.enqueue(a)})}})}let wh;function _c(e){return e.reduce((t,a)=>t+a.length,0)}function Tc(e,t){if(e[0].length===t)return e.shift();const a=new Uint8Array(t);let r=0;for(let l=0;l<t;l++)a[l]=e[0][r++],r===e[0].length&&(e.shift(),r=0);return e.length&&r<e[0].length&&(e[0]=e[0].slice(r)),a}function Tz(e,t){wh||(wh=new TextDecoder);const a=[];let r=0,l=-1,u=!1;return new TransformStream({transform(d,h){for(a.push(d);;){if(r===0){if(_c(a)<1)break;const m=Tc(a,1);u=(m[0]&128)===128,l=m[0]&127,l<126?r=3:l===126?r=1:r=2}else if(r===1){if(_c(a)<2)break;const m=Tc(a,2);l=new DataView(m.buffer,m.byteOffset,m.length).getUint16(0),r=3}else if(r===2){if(_c(a)<8)break;const m=Tc(a,8),p=new DataView(m.buffer,m.byteOffset,m.length),y=p.getUint32(0);if(y>Math.pow(2,21)-1){h.enqueue(Vh);break}l=y*Math.pow(2,32)+p.getUint32(4),r=3}else{if(_c(a)<l)break;const m=Tc(a,l);h.enqueue(kp(u?m:wh.decode(m),t)),r=0}if(l===0||l>e){h.enqueue(Vh);break}}}})}const Yv=4;function ht(e){if(e)return Az(e)}function Az(e){for(var t in ht.prototype)e[t]=ht.prototype[t];return e}ht.prototype.on=ht.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this};ht.prototype.once=function(e,t){function a(){this.off(e,a),t.apply(this,arguments)}return a.fn=t,this.on(e,a),this};ht.prototype.off=ht.prototype.removeListener=ht.prototype.removeAllListeners=ht.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var a=this._callbacks["$"+e];if(!a)return this;if(arguments.length==1)return delete this._callbacks["$"+e],this;for(var r,l=0;l<a.length;l++)if(r=a[l],r===t||r.fn===t){a.splice(l,1);break}return a.length===0&&delete this._callbacks["$"+e],this};ht.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),a=this._callbacks["$"+e],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(a){a=a.slice(0);for(var r=0,l=a.length;r<l;++r)a[r].apply(this,t)}return this};ht.prototype.emitReserved=ht.prototype.emit;ht.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]};ht.prototype.hasListeners=function(e){return!!this.listeners(e).length};const Mu=typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,a)=>a(t,0),gn=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),kz="arraybuffer";function Xv(e,...t){return t.reduce((a,r)=>(e.hasOwnProperty(r)&&(a[r]=e[r]),a),{})}const Mz=gn.setTimeout,Dz=gn.clearTimeout;function Du(e,t){t.useNativeTimers?(e.setTimeoutFn=Mz.bind(gn),e.clearTimeoutFn=Dz.bind(gn)):(e.setTimeoutFn=gn.setTimeout.bind(gn),e.clearTimeoutFn=gn.clearTimeout.bind(gn))}const Rz=1.33;function Oz(e){return typeof e=="string"?$z(e):Math.ceil((e.byteLength||e.size)*Rz)}function $z(e){let t=0,a=0;for(let r=0,l=e.length;r<l;r++)t=e.charCodeAt(r),t<128?a+=1:t<2048?a+=2:t<55296||t>=57344?a+=3:(r++,a+=4);return a}function Gv(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function zz(e){let t="";for(let a in e)e.hasOwnProperty(a)&&(t.length&&(t+="&"),t+=encodeURIComponent(a)+"="+encodeURIComponent(e[a]));return t}function Lz(e){let t={},a=e.split("&");for(let r=0,l=a.length;r<l;r++){let u=a[r].split("=");t[decodeURIComponent(u[0])]=decodeURIComponent(u[1])}return t}class Bz extends Error{constructor(t,a,r){super(t),this.description=a,this.context=r,this.type="TransportError"}}class Mp extends ht{constructor(t){super(),this.writable=!1,Du(this,t),this.opts=t,this.query=t.query,this.socket=t.socket,this.supportsBinary=!t.forceBase64}onError(t,a,r){return super.emitReserved("error",new Bz(t,a,r)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const a=kp(t,this.socket.binaryType);this.onPacket(a)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,a={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(a)}_hostname(){const t=this.opts.hostname;return t.indexOf(":")===-1?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&Number(this.opts.port)!==443||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(t){const a=zz(t);return a.length?"?"+a:""}}class Pz extends Mp{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(t){this.readyState="pausing";const a=()=>{this.readyState="paused",t()};if(this._polling||!this.writable){let r=0;this._polling&&(r++,this.once("pollComplete",function(){--r||a()})),this.writable||(r++,this.once("drain",function(){--r||a()}))}else a()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){const a=r=>{if(this.readyState==="opening"&&r.type==="open"&&this.onOpen(),r.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(r)};Ez(t,this.socket.binaryType).forEach(a),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,Cz(t,a=>{this.doWrite(a,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const t=this.opts.secure?"https":"http",a=this.query||{};return this.opts.timestampRequests!==!1&&(a[this.opts.timestampParam]=Gv()),!this.supportsBinary&&!a.sid&&(a.b64=1),this.createUri(t,a)}}let Kv=!1;try{Kv=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const Hz=Kv;function Uz(){}class qz extends Pz{constructor(t){if(super(t),typeof location<"u"){const a=location.protocol==="https:";let r=location.port;r||(r=a?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||r!==t.port}}doWrite(t,a){const r=this.request({method:"POST",data:t});r.on("success",a),r.on("error",(l,u)=>{this.onError("xhr post error",l,u)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(a,r)=>{this.onError("xhr poll error",a,r)}),this.pollXhr=t}}class qn extends ht{constructor(t,a,r){super(),this.createRequest=t,Du(this,r),this._opts=r,this._method=r.method||"GET",this._uri=a,this._data=r.data!==void 0?r.data:null,this._create()}_create(){var t;const a=Xv(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");a.xdomain=!!this._opts.xd;const r=this._xhr=this.createRequest(a);try{r.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0);for(let l in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(l)&&r.setRequestHeader(l,this._opts.extraHeaders[l])}}catch{}if(this._method==="POST")try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{r.setRequestHeader("Accept","*/*")}catch{}(t=this._opts.cookieJar)===null||t===void 0||t.addCookies(r),"withCredentials"in r&&(r.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(r.timeout=this._opts.requestTimeout),r.onreadystatechange=()=>{var l;r.readyState===3&&((l=this._opts.cookieJar)===null||l===void 0||l.parseCookies(r.getResponseHeader("set-cookie"))),r.readyState===4&&(r.status===200||r.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof r.status=="number"?r.status:0)},0))},r.send(this._data)}catch(l){this.setTimeoutFn(()=>{this._onError(l)},0);return}typeof document<"u"&&(this._index=qn.requestsCount++,qn.requests[this._index]=this)}_onError(t){this.emitReserved("error",t,this._xhr),this._cleanup(!0)}_cleanup(t){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=Uz,t)try{this._xhr.abort()}catch{}typeof document<"u"&&delete qn.requests[this._index],this._xhr=null}}_onLoad(){const t=this._xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}qn.requestsCount=0;qn.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",Oy);else if(typeof addEventListener=="function"){const e="onpagehide"in gn?"pagehide":"unload";addEventListener(e,Oy,!1)}}function Oy(){for(let e in qn.requests)qn.requests.hasOwnProperty(e)&&qn.requests[e].abort()}const Iz=(function(){const e=Qv({xdomain:!1});return e&&e.responseType!==null})();class Vz extends qz{constructor(t){super(t);const a=t&&t.forceBase64;this.supportsBinary=Iz&&!a}request(t={}){return Object.assign(t,{xd:this.xd},this.opts),new qn(Qv,this.uri(),t)}}function Qv(e){const t=e.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||Hz))return new XMLHttpRequest}catch{}if(!t)try{return new gn[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const Wv=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class Fz extends Mp{get name(){return"websocket"}doOpen(){const t=this.uri(),a=this.opts.protocols,r=Wv?{}:Xv(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(t,a,r)}catch(l){return this.emitReserved("error",l)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let a=0;a<t.length;a++){const r=t[a],l=a===t.length-1;Ap(r,this.supportsBinary,u=>{try{this.doWrite(r,u)}catch{}l&&Mu(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const t=this.opts.secure?"wss":"ws",a=this.query||{};return this.opts.timestampRequests&&(a[this.opts.timestampParam]=Gv()),this.supportsBinary||(a.b64=1),this.createUri(t,a)}}const Nh=gn.WebSocket||gn.MozWebSocket;class Yz extends Fz{createSocket(t,a,r){return Wv?new Nh(t,a,r):a?new Nh(t,a):new Nh(t)}doWrite(t,a){this.ws.send(a)}}class Xz extends Mp{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(t){return this.emitReserved("error",t)}this._transport.closed.then(()=>{this.onClose()}).catch(t=>{this.onError("webtransport error",t)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(t=>{const a=Tz(Number.MAX_SAFE_INTEGER,this.socket.binaryType),r=t.readable.pipeThrough(a).getReader(),l=_z();l.readable.pipeTo(t.writable),this._writer=l.writable.getWriter();const u=()=>{r.read().then(({done:h,value:m})=>{h||(this.onPacket(m),u())}).catch(h=>{})};u();const d={type:"open"};this.query.sid&&(d.data=`{"sid":"${this.query.sid}"}`),this._writer.write(d).then(()=>this.onOpen())})})}write(t){this.writable=!1;for(let a=0;a<t.length;a++){const r=t[a],l=a===t.length-1;this._writer.write(r).then(()=>{l&&Mu(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;(t=this._transport)===null||t===void 0||t.close()}}const Gz={websocket:Yz,webtransport:Xz,polling:Vz},Kz=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,Qz=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Fh(e){if(e.length>8e3)throw"URI too long";const t=e,a=e.indexOf("["),r=e.indexOf("]");a!=-1&&r!=-1&&(e=e.substring(0,a)+e.substring(a,r).replace(/:/g,";")+e.substring(r,e.length));let l=Kz.exec(e||""),u={},d=14;for(;d--;)u[Qz[d]]=l[d]||"";return a!=-1&&r!=-1&&(u.source=t,u.host=u.host.substring(1,u.host.length-1).replace(/;/g,":"),u.authority=u.authority.replace("[","").replace("]","").replace(/;/g,":"),u.ipv6uri=!0),u.pathNames=Wz(u,u.path),u.queryKey=Zz(u,u.query),u}function Wz(e,t){const a=/\/{2,9}/g,r=t.replace(a,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&r.splice(0,1),t.slice(-1)=="/"&&r.splice(r.length-1,1),r}function Zz(e,t){const a={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(r,l,u){l&&(a[l]=u)}),a}const Yh=typeof addEventListener=="function"&&typeof removeEventListener=="function",Fc=[];Yh&&addEventListener("offline",()=>{Fc.forEach(e=>e())},!1);class oa extends ht{constructor(t,a){if(super(),this.binaryType=kz,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,t&&typeof t=="object"&&(a=t,t=null),t){const r=Fh(t);a.hostname=r.host,a.secure=r.protocol==="https"||r.protocol==="wss",a.port=r.port,r.query&&(a.query=r.query)}else a.host&&(a.hostname=Fh(a.host).host);Du(this,a),this.secure=a.secure!=null?a.secure:typeof location<"u"&&location.protocol==="https:",a.hostname&&!a.port&&(a.port=this.secure?"443":"80"),this.hostname=a.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=a.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},a.transports.forEach(r=>{const l=r.prototype.name;this.transports.push(l),this._transportsByName[l]=r}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},a),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=Lz(this.opts.query)),Yh&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},Fc.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(t){const a=Object.assign({},this.opts.query);a.EIO=Yv,a.transport=t,this.id&&(a.sid=this.id);const r=Object.assign({},this.opts,{query:a,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return new this._transportsByName[t](r)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const t=this.opts.rememberUpgrade&&oa.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const a=this.createTransport(t);a.open(),this.setTransport(a)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",a=>this._onClose("transport close",a))}onOpen(){this.readyState="open",oa.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const a=new Error("server error");a.code=t.data,this._onError(a);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this._pingInterval=t.pingInterval,this._pingTimeout=t.pingTimeout,this._maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const t=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+t,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},t),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this._getWritablePackets();this.transport.send(t),this._prevBufferLen=t.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let a=1;for(let r=0;r<this.writeBuffer.length;r++){const l=this.writeBuffer[r].data;if(l&&(a+=Oz(l)),r>0&&a>this._maxPayload)return this.writeBuffer.slice(0,r);a+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const t=Date.now()>this._pingTimeoutTime;return t&&(this._pingTimeoutTime=0,Mu(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),t}write(t,a,r){return this._sendPacket("message",t,a,r),this}send(t,a,r){return this._sendPacket("message",t,a,r),this}_sendPacket(t,a,r,l){if(typeof a=="function"&&(l=a,a=void 0),typeof r=="function"&&(l=r,r=null),this.readyState==="closing"||this.readyState==="closed")return;r=r||{},r.compress=r.compress!==!1;const u={type:t,data:a,options:r};this.emitReserved("packetCreate",u),this.writeBuffer.push(u),l&&this.once("flush",l),this.flush()}close(){const t=()=>{this._onClose("forced close"),this.transport.close()},a=()=>{this.off("upgrade",a),this.off("upgradeError",a),t()},r=()=>{this.once("upgrade",a),this.once("upgradeError",a)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?r():t()}):this.upgrading?r():t()),this}_onError(t){if(oa.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",t),this._onClose("transport error",t)}_onClose(t,a){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),Yh&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const r=Fc.indexOf(this._offlineEventListener);r!==-1&&Fc.splice(r,1)}this.readyState="closed",this.id=null,this.emitReserved("close",t,a),this.writeBuffer=[],this._prevBufferLen=0}}}oa.protocol=Yv;class Jz extends oa{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let t=0;t<this._upgrades.length;t++)this._probe(this._upgrades[t])}_probe(t){let a=this.createTransport(t),r=!1;oa.priorWebsocketSuccess=!1;const l=()=>{r||(a.send([{type:"ping",data:"probe"}]),a.once("packet",x=>{if(!r)if(x.type==="pong"&&x.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",a),!a)return;oa.priorWebsocketSuccess=a.name==="websocket",this.transport.pause(()=>{r||this.readyState!=="closed"&&(y(),this.setTransport(a),a.send([{type:"upgrade"}]),this.emitReserved("upgrade",a),a=null,this.upgrading=!1,this.flush())})}else{const b=new Error("probe error");b.transport=a.name,this.emitReserved("upgradeError",b)}}))};function u(){r||(r=!0,y(),a.close(),a=null)}const d=x=>{const b=new Error("probe error: "+x);b.transport=a.name,u(),this.emitReserved("upgradeError",b)};function h(){d("transport closed")}function m(){d("socket closed")}function p(x){a&&x.name!==a.name&&u()}const y=()=>{a.removeListener("open",l),a.removeListener("error",d),a.removeListener("close",h),this.off("close",m),this.off("upgrading",p)};a.once("open",l),a.once("error",d),a.once("close",h),this.once("close",m),this.once("upgrading",p),this._upgrades.indexOf("webtransport")!==-1&&t!=="webtransport"?this.setTimeoutFn(()=>{r||a.open()},200):a.open()}onHandshake(t){this._upgrades=this._filterUpgrades(t.upgrades),super.onHandshake(t)}_filterUpgrades(t){const a=[];for(let r=0;r<t.length;r++)~this.transports.indexOf(t[r])&&a.push(t[r]);return a}}let eL=class extends Jz{constructor(t,a={}){const r=typeof t=="object"?t:a;(!r.transports||r.transports&&typeof r.transports[0]=="string")&&(r.transports=(r.transports||["polling","websocket","webtransport"]).map(l=>Gz[l]).filter(l=>!!l)),super(t,r)}};function tL(e,t="",a){let r=e;a=a||typeof location<"u"&&location,e==null&&(e=a.protocol+"//"+a.host),typeof e=="string"&&(e.charAt(0)==="/"&&(e.charAt(1)==="/"?e=a.protocol+e:e=a.host+e),/^(https?|wss?):\/\//.test(e)||(typeof a<"u"?e=a.protocol+"//"+e:e="https://"+e),r=Fh(e)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const u=r.host.indexOf(":")!==-1?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+u+":"+r.port+t,r.href=r.protocol+"://"+u+(a&&a.port===r.port?"":":"+r.port),r}const nL=typeof ArrayBuffer=="function",sL=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer,Zv=Object.prototype.toString,aL=typeof Blob=="function"||typeof Blob<"u"&&Zv.call(Blob)==="[object BlobConstructor]",rL=typeof File=="function"||typeof File<"u"&&Zv.call(File)==="[object FileConstructor]";function Dp(e){return nL&&(e instanceof ArrayBuffer||sL(e))||aL&&e instanceof Blob||rL&&e instanceof File}function Yc(e,t){if(!e||typeof e!="object")return!1;if(Array.isArray(e)){for(let a=0,r=e.length;a<r;a++)if(Yc(e[a]))return!0;return!1}if(Dp(e))return!0;if(e.toJSON&&typeof e.toJSON=="function"&&arguments.length===1)return Yc(e.toJSON(),!0);for(const a in e)if(Object.prototype.hasOwnProperty.call(e,a)&&Yc(e[a]))return!0;return!1}function oL(e){const t=[],a=e.data,r=e;return r.data=Xh(a,t),r.attachments=t.length,{packet:r,buffers:t}}function Xh(e,t){if(!e)return e;if(Dp(e)){const a={_placeholder:!0,num:t.length};return t.push(e),a}else if(Array.isArray(e)){const a=new Array(e.length);for(let r=0;r<e.length;r++)a[r]=Xh(e[r],t);return a}else if(typeof e=="object"&&!(e instanceof Date)){const a={};for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(a[r]=Xh(e[r],t));return a}return e}function iL(e,t){return e.data=Gh(e.data,t),delete e.attachments,e}function Gh(e,t){if(!e)return e;if(e&&e._placeholder===!0){if(typeof e.num=="number"&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}else if(Array.isArray(e))for(let a=0;a<e.length;a++)e[a]=Gh(e[a],t);else if(typeof e=="object")for(const a in e)Object.prototype.hasOwnProperty.call(e,a)&&(e[a]=Gh(e[a],t));return e}const Jv=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],lL=5;var ke;(function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"})(ke||(ke={}));class cL{constructor(t){this.replacer=t}encode(t){return(t.type===ke.EVENT||t.type===ke.ACK)&&Yc(t)?this.encodeAsBinary({type:t.type===ke.EVENT?ke.BINARY_EVENT:ke.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let a=""+t.type;return(t.type===ke.BINARY_EVENT||t.type===ke.BINARY_ACK)&&(a+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(a+=t.nsp+","),t.id!=null&&(a+=t.id),t.data!=null&&(a+=JSON.stringify(t.data,this.replacer)),a}encodeAsBinary(t){const a=oL(t),r=this.encodeAsString(a.packet),l=a.buffers;return l.unshift(r),l}}class Rp extends ht{constructor(t){super(),this.reviver=t}add(t){let a;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");a=this.decodeString(t);const r=a.type===ke.BINARY_EVENT;r||a.type===ke.BINARY_ACK?(a.type=r?ke.EVENT:ke.ACK,this.reconstructor=new uL(a),a.attachments===0&&super.emitReserved("decoded",a)):super.emitReserved("decoded",a)}else if(Dp(t)||t.base64)if(this.reconstructor)a=this.reconstructor.takeBinaryData(t),a&&(this.reconstructor=null,super.emitReserved("decoded",a));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let a=0;const r={type:Number(t.charAt(0))};if(ke[r.type]===void 0)throw new Error("unknown packet type "+r.type);if(r.type===ke.BINARY_EVENT||r.type===ke.BINARY_ACK){const u=a+1;for(;t.charAt(++a)!=="-"&&a!=t.length;);const d=t.substring(u,a);if(d!=Number(d)||t.charAt(a)!=="-")throw new Error("Illegal attachments");r.attachments=Number(d)}if(t.charAt(a+1)==="/"){const u=a+1;for(;++a&&!(t.charAt(a)===","||a===t.length););r.nsp=t.substring(u,a)}else r.nsp="/";const l=t.charAt(a+1);if(l!==""&&Number(l)==l){const u=a+1;for(;++a;){const d=t.charAt(a);if(d==null||Number(d)!=d){--a;break}if(a===t.length)break}r.id=Number(t.substring(u,a+1))}if(t.charAt(++a)){const u=this.tryParse(t.substr(a));if(Rp.isPayloadValid(r.type,u))r.data=u;else throw new Error("invalid payload")}return r}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,a){switch(t){case ke.CONNECT:return cu(a);case ke.DISCONNECT:return a===void 0;case ke.CONNECT_ERROR:return typeof a=="string"||cu(a);case ke.EVENT:case ke.BINARY_EVENT:return Array.isArray(a)&&(typeof a[0]=="number"||typeof a[0]=="string"&&Jv.indexOf(a[0])===-1);case ke.ACK:case ke.BINARY_ACK:return Array.isArray(a)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class uL{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const a=iL(this.reconPack,this.buffers);return this.finishedReconstruction(),a}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}function dL(e){return typeof e=="string"}const fL=Number.isInteger||function(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e};function hL(e){return e===void 0||fL(e)}function cu(e){return Object.prototype.toString.call(e)==="[object Object]"}function pL(e,t){switch(e){case ke.CONNECT:return t===void 0||cu(t);case ke.DISCONNECT:return t===void 0;case ke.EVENT:return Array.isArray(t)&&(typeof t[0]=="number"||typeof t[0]=="string"&&Jv.indexOf(t[0])===-1);case ke.ACK:return Array.isArray(t);case ke.CONNECT_ERROR:return typeof t=="string"||cu(t);default:return!1}}function mL(e){return dL(e.nsp)&&hL(e.id)&&pL(e.type,e.data)}const gL=Object.freeze(Object.defineProperty({__proto__:null,Decoder:Rp,Encoder:cL,get PacketType(){return ke},isPacketValid:mL,protocol:lL},Symbol.toStringTag,{value:"Module"}));function Sn(e,t,a){return e.on(t,a),function(){e.off(t,a)}}const xL=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class e1 extends ht{constructor(t,a,r){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=a,r&&r.auth&&(this.auth=r.auth),this._opts=Object.assign({},r),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[Sn(t,"open",this.onopen.bind(this)),Sn(t,"packet",this.onpacket.bind(this)),Sn(t,"error",this.onerror.bind(this)),Sn(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...a){var r,l,u;if(xL.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(a.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(a),this;const d={type:ke.EVENT,data:a};if(d.options={},d.options.compress=this.flags.compress!==!1,typeof a[a.length-1]=="function"){const y=this.ids++,x=a.pop();this._registerAckCallback(y,x),d.id=y}const h=(l=(r=this.io.engine)===null||r===void 0?void 0:r.transport)===null||l===void 0?void 0:l.writable,m=this.connected&&!(!((u=this.io.engine)===null||u===void 0)&&u._hasPingExpired());return this.flags.volatile&&!h||(m?(this.notifyOutgoingListeners(d),this.packet(d)):this.sendBuffer.push(d)),this.flags={},this}_registerAckCallback(t,a){var r;const l=(r=this.flags.timeout)!==null&&r!==void 0?r:this._opts.ackTimeout;if(l===void 0){this.acks[t]=a;return}const u=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let h=0;h<this.sendBuffer.length;h++)this.sendBuffer[h].id===t&&this.sendBuffer.splice(h,1);a.call(this,new Error("operation has timed out"))},l),d=(...h)=>{this.io.clearTimeoutFn(u),a.apply(this,h)};d.withError=!0,this.acks[t]=d}emitWithAck(t,...a){return new Promise((r,l)=>{const u=(d,h)=>d?l(d):r(h);u.withError=!0,a.push(u),this.emit(t,...a)})}_addToQueue(t){let a;typeof t[t.length-1]=="function"&&(a=t.pop());const r={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((l,...u)=>(this._queue[0],l!==null?r.tryCount>this._opts.retries&&(this._queue.shift(),a&&a(l)):(this._queue.shift(),a&&a(null,...u)),r.pending=!1,this._drainQueue())),this._queue.push(r),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||this._queue.length===0)return;const a=this._queue[0];a.pending&&!t||(a.pending=!0,a.tryCount++,this.flags=a.flags,this.emit.apply(this,a.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:ke.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,a){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,a),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(t=>{if(!this.sendBuffer.some(r=>String(r.id)===t)){const r=this.acks[t];delete this.acks[t],r.withError&&r.call(this,new Error("socket has been disconnected"))}})}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case ke.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case ke.EVENT:case ke.BINARY_EVENT:this.onevent(t);break;case ke.ACK:case ke.BINARY_ACK:this.onack(t);break;case ke.DISCONNECT:this.ondisconnect();break;case ke.CONNECT_ERROR:this.destroy();const r=new Error(t.data.message);r.data=t.data.data,this.emitReserved("connect_error",r);break}}onevent(t){const a=t.data||[];t.id!=null&&a.push(this.ack(t.id)),this.connected?this.emitEvent(a):this.receiveBuffer.push(Object.freeze(a))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const a=this._anyListeners.slice();for(const r of a)r.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){const a=this;let r=!1;return function(...l){r||(r=!0,a.packet({type:ke.ACK,id:t,data:l}))}}onack(t){const a=this.acks[t.id];typeof a=="function"&&(delete this.acks[t.id],a.withError&&t.data.unshift(null),a.apply(this,t.data))}onconnect(t,a){this.id=t,this.recovered=a&&this._pid===a,this._pid=a,this.connected=!0,this.emitBuffered(),this._drainQueue(!0),this.emitReserved("connect")}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:ke.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const a=this._anyListeners;for(let r=0;r<a.length;r++)if(t===a[r])return a.splice(r,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const a=this._anyOutgoingListeners;for(let r=0;r<a.length;r++)if(t===a[r])return a.splice(r,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const a=this._anyOutgoingListeners.slice();for(const r of a)r.apply(this,t.data)}}}function mo(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}mo.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),a=Math.floor(t*this.jitter*e);e=(Math.floor(t*10)&1)==0?e-a:e+a}return Math.min(e,this.max)|0};mo.prototype.reset=function(){this.attempts=0};mo.prototype.setMin=function(e){this.ms=e};mo.prototype.setMax=function(e){this.max=e};mo.prototype.setJitter=function(e){this.jitter=e};class Kh extends ht{constructor(t,a){var r;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(a=t,t=void 0),a=a||{},a.path=a.path||"/socket.io",this.opts=a,Du(this,a),this.reconnection(a.reconnection!==!1),this.reconnectionAttempts(a.reconnectionAttempts||1/0),this.reconnectionDelay(a.reconnectionDelay||1e3),this.reconnectionDelayMax(a.reconnectionDelayMax||5e3),this.randomizationFactor((r=a.randomizationFactor)!==null&&r!==void 0?r:.5),this.backoff=new mo({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(a.timeout==null?2e4:a.timeout),this._readyState="closed",this.uri=t;const l=a.parser||gL;this.encoder=new l.Encoder,this.decoder=new l.Decoder,this._autoConnect=a.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,t||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var a;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(a=this.backoff)===null||a===void 0||a.setMin(t),this)}randomizationFactor(t){var a;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(a=this.backoff)===null||a===void 0||a.setJitter(t),this)}reconnectionDelayMax(t){var a;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(a=this.backoff)===null||a===void 0||a.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new eL(this.uri,this.opts);const a=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;const l=Sn(a,"open",function(){r.onopen(),t&&t()}),u=h=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",h),t?t(h):this.maybeReconnectOnOpen()},d=Sn(a,"error",u);if(this._timeout!==!1){const h=this._timeout,m=this.setTimeoutFn(()=>{l(),u(new Error("timeout")),a.close()},h);this.opts.autoUnref&&m.unref(),this.subs.push(()=>{this.clearTimeoutFn(m)})}return this.subs.push(l),this.subs.push(d),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(Sn(t,"ping",this.onping.bind(this)),Sn(t,"data",this.ondata.bind(this)),Sn(t,"error",this.onerror.bind(this)),Sn(t,"close",this.onclose.bind(this)),Sn(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(a){this.onclose("parse error",a)}}ondecoded(t){Mu(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,a){let r=this.nsps[t];return r?this._autoConnect&&!r.active&&r.connect():(r=new e1(this,t,a),this.nsps[t]=r),r}_destroy(t){const a=Object.keys(this.nsps);for(const r of a)if(this.nsps[r].active)return;this._close()}_packet(t){const a=this.encoder.encode(t);for(let r=0;r<a.length;r++)this.engine.write(a[r],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(t,a){var r;this.cleanup(),(r=this.engine)===null||r===void 0||r.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,a),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const a=this.backoff.duration();this._reconnecting=!0;const r=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(l=>{l?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",l)):t.onreconnect()}))},a);this.opts.autoUnref&&r.unref(),this.subs.push(()=>{this.clearTimeoutFn(r)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const gi={};function Xc(e,t){typeof e=="object"&&(t=e,e=void 0),t=t||{};const a=tL(e,t.path||"/socket.io"),r=a.source,l=a.id,u=a.path,d=gi[l]&&u in gi[l].nsps,h=t.forceNew||t["force new connection"]||t.multiplex===!1||d;let m;return h?m=new Kh(r,t):(gi[l]||(gi[l]=new Kh(r,t)),m=gi[l]),a.query&&!t.query&&(t.query=a.queryKey),m.socket(a.path,t)}Object.assign(Xc,{Manager:Kh,Socket:e1,io:Xc,connect:Xc});function yL(e){const[t,a]=S.useState(!1),r=S.useRef(null),l=Lt(u=>u.token);return S.useEffect(()=>{if(!l)return;const u=Xc(e,{path:"/socket.io/",auth:{dashboardToken:l},transports:["websocket","polling"],reconnection:!0,reconnectionAttempts:1/0,reconnectionDelay:2e3,reconnectionDelayMax:1e4,timeout:2e4});return u.on("connect",()=>{console.log(`Dashboard socket conectado a ${e}`),a(!0)}),u.on("disconnect",d=>{console.log(`Dashboard socket desconectado: ${d}`),a(!1)}),u.on("connect_error",d=>{console.error("Error de conexin Socket.IO:",d.message)}),r.current=u,()=>{u.disconnect(),r.current=null,a(!1)}},[e,l]),{socket:r.current,connected:t}}function bL({sessionId:e,currentAgentId:t,currentDepartmentId:a,onClose:r,onAssigned:l}){const{t:u}=ze("conversations"),[d,h]=S.useState([]),[m,p]=S.useState([]),[y,x]=S.useState(t||""),[b,v]=S.useState(a||""),[w,_]=S.useState(!1),[E,T]=S.useState(""),A=Lt(j=>j.token),C={"Content-Type":"application/json",...A?{Authorization:`Bearer ${A}`}:{}};S.useEffect(()=>{Promise.all([fetch("/api/agents",{headers:C}).then(j=>j.json()),fetch("/api/departments",{headers:C}).then(j=>j.json())]).then(([j,R])=>{h(j.agents||[]),p(R.departments||[])}).catch(()=>{})},[]);const k=async()=>{_(!0),T("");try{const j={sessionId:Number(e)};y&&(j.agentId=Number(y)),b&&(j.departmentId=Number(b));const $=await(await fetch("/api/chat/assign",{method:"POST",headers:C,body:JSON.stringify(j)})).json();if(!$.ok)throw new Error($.error||u("assignModal.errorAssigning"));l&&l($),r()}catch(j){T(j.message)}finally{_(!1)}},L={};return d.filter(j=>j.status==="active").forEach(j=>{const R=j.department_name||u("common:noDepartment");L[R]||(L[R]=[]),L[R].push(j)}),o.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:r,children:o.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md p-6",onClick:j=>j.stopPropagation(),children:[o.jsxs("div",{className:"flex items-center justify-between mb-5",children:[o.jsxs("h3",{className:"text-lg font-bold text-gray-800 flex items-center gap-2",children:[o.jsx(Jr,{className:"w-5 h-5 text-green-600"}),u("assignModal.title")]}),o.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600",children:o.jsx(Vn,{className:"w-5 h-5"})})]}),E&&o.jsx("div",{className:"bg-red-50 text-red-600 px-4 py-2 rounded-lg text-sm mb-4 border border-red-200",children:E}),o.jsxs("div",{className:"mb-4",children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[o.jsx(Yr,{className:"w-4 h-4 inline mr-1"}),u("assignModal.department")]}),o.jsxs("select",{value:b,onChange:j=>v(j.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 outline-none",children:[o.jsx("option",{value:"",children:u("assignModal.noDepartment")}),m.filter(j=>j.active).map(j=>o.jsx("option",{value:j.id,children:j.display_name||j.name},j.id))]})]}),o.jsxs("div",{className:"mb-6",children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[o.jsx(Jr,{className:"w-4 h-4 inline mr-1"}),u("assignModal.agent")]}),o.jsxs("select",{value:y,onChange:j=>x(j.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 outline-none",children:[o.jsx("option",{value:"",children:u("assignModal.noAgent")}),Object.entries(L).map(([j,R])=>o.jsx("optgroup",{label:j,children:R.map($=>o.jsxs("option",{value:$.id,children:[$.name," (",$.username,") - ",$.role]},$.id))},j))]})]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{onClick:r,className:"flex-1 px-4 py-2.5 border border-gray-300 rounded-xl text-gray-700 hover:bg-gray-50 transition",children:u("common:actions.cancel")}),o.jsx("button",{onClick:k,disabled:w||!y&&!b,className:"flex-1 px-4 py-2.5 bg-green-500 hover:bg-green-600 text-white rounded-xl transition disabled:opacity-50 disabled:cursor-not-allowed",children:u(w?"assignModal.assigning":"assign")})]})]})})}function vL({sessionId:e,currentAgentId:t,currentDepartmentId:a,onClose:r,onTransferred:l}){const{t:u}=ze("conversations"),[d,h]=S.useState([]),[m,p]=S.useState([]),[y,x]=S.useState(""),[b,v]=S.useState(""),[w,_]=S.useState(""),[E,T]=S.useState(!1),[A,C]=S.useState(""),k=Lt($=>$.token),L={"Content-Type":"application/json",...k?{Authorization:`Bearer ${k}`}:{}};S.useEffect(()=>{Promise.all([fetch("/api/agents",{headers:L}).then($=>$.json()),fetch("/api/departments",{headers:L}).then($=>$.json())]).then(([$,H])=>{h($.agents||[]),p(H.departments||[])}).catch(()=>{})},[]);const j=async()=>{T(!0),C("");try{const $={sessionId:Number(e)};y&&($.targetAgentId=Number(y)),b&&($.targetDepartmentId=Number(b)),w&&($.reason=w);const F=await(await fetch("/api/chat/transfer",{method:"POST",headers:L,body:JSON.stringify($)})).json();if(!F.ok)throw new Error(F.error||u("transferModal.errorTransferring"));l&&l(F),r()}catch($){C($.message)}finally{T(!1)}},R={};return d.filter($=>$.status==="active"&&$.id!==t).forEach($=>{const H=$.department_name||u("common:noDepartment");R[H]||(R[H]=[]),R[H].push($)}),o.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:r,children:o.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md p-6",onClick:$=>$.stopPropagation(),children:[o.jsxs("div",{className:"flex items-center justify-between mb-5",children:[o.jsxs("h3",{className:"text-lg font-bold text-gray-800 flex items-center gap-2",children:[o.jsx(bp,{className:"w-5 h-5 text-blue-600"}),u("transferModal.title")]}),o.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600",children:o.jsx(Vn,{className:"w-5 h-5"})})]}),A&&o.jsx("div",{className:"bg-red-50 text-red-600 px-4 py-2 rounded-lg text-sm mb-4 border border-red-200",children:A}),o.jsxs("div",{className:"mb-4",children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[o.jsx(Yr,{className:"w-4 h-4 inline mr-1"}),u("transferModal.targetDepartment")]}),o.jsxs("select",{value:b,onChange:$=>v($.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",children:[o.jsx("option",{value:"",children:u("transferModal.keepCurrent")}),m.filter($=>$.active).map($=>o.jsx("option",{value:$.id,children:$.display_name||$.name},$.id))]})]}),o.jsxs("div",{className:"mb-4",children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[o.jsx(Jr,{className:"w-4 h-4 inline mr-1"}),u("transferModal.targetAgent")]}),o.jsxs("select",{value:y,onChange:$=>x($.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",children:[o.jsx("option",{value:"",children:u("transferModal.noAgent")}),Object.entries(R).map(([$,H])=>o.jsx("optgroup",{label:$,children:H.map(F=>o.jsxs("option",{value:F.id,children:[F.name," (",F.username,") - ",F.role]},F.id))},$))]})]}),o.jsxs("div",{className:"mb-6",children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:u("transferModal.reason")}),o.jsx("input",{type:"text",value:w,onChange:$=>_($.target.value),placeholder:u("transferModal.reasonPlaceholder"),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none"})]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{onClick:r,className:"flex-1 px-4 py-2.5 border border-gray-300 rounded-xl text-gray-700 hover:bg-gray-50 transition",children:u("common:actions.cancel")}),o.jsx("button",{onClick:j,disabled:E||!y&&!b,className:"flex-1 px-4 py-2.5 bg-blue-500 hover:bg-blue-600 text-white rounded-xl transition disabled:opacity-50 disabled:cursor-not-allowed",children:u(E?"transferModal.transferring":"transfer")})]})]})})}function t1({className:e}){return o.jsx("svg",{className:e,viewBox:"0 0 24 24",fill:"currentColor",children:o.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})})}function n1({className:e}){return o.jsx("svg",{className:e,viewBox:"0 0 24 24",fill:"currentColor",children:o.jsx("path",{d:"M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zM12 0C8.741 0 8.333.014 7.053.072 2.695.272.273 2.69.073 7.052.014 8.333 0 8.741 0 12c0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98C8.333 23.986 8.741 24 12 24c3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98C15.668.014 15.259 0 12 0zm0 5.838a6.162 6.162 0 100 12.324 6.162 6.162 0 000-12.324zM12 16a4 4 0 110-8 4 4 0 010 8zm6.406-11.845a1.44 1.44 0 100 2.881 1.44 1.44 0 000-2.881z"})})}function wL({className:e}){return o.jsx("svg",{className:e,viewBox:"0 0 24 24",fill:"currentColor",children:o.jsx("path",{d:"M12 0C5.373 0 0 4.974 0 11.111c0 3.498 1.744 6.614 4.469 8.654V24l4.088-2.242c1.092.3 2.246.464 3.443.464 6.627 0 12-4.974 12-11.111S18.627 0 12 0zm1.191 14.963l-3.055-3.26-5.963 3.26L10.732 8.2l3.131 3.26 5.887-3.26-6.559 6.763z"})})}function $y({channel:e}){return!e||e==="whatsapp"?o.jsxs("span",{className:"inline-flex items-center gap-0.5 text-[10px] px-1.5 py-0.5 rounded-full bg-green-50 text-green-600 font-medium",title:"WhatsApp",children:[o.jsx(t1,{className:"w-2.5 h-2.5"}),"WA"]}):e==="instagram"?o.jsxs("span",{className:"inline-flex items-center gap-0.5 text-[10px] px-1.5 py-0.5 rounded-full bg-pink-50 text-pink-600 font-medium",title:"Instagram",children:[o.jsx(n1,{className:"w-2.5 h-2.5"}),"IG"]}):e==="messenger"?o.jsxs("span",{className:"inline-flex items-center gap-0.5 text-[10px] px-1.5 py-0.5 rounded-full bg-blue-50 text-blue-600 font-medium",title:"Messenger",children:[o.jsx(wL,{className:"w-2.5 h-2.5"}),"FB"]}):null}const zy=["bg-blue-500","bg-green-500","bg-purple-500","bg-pink-500","bg-indigo-500","bg-teal-500","bg-orange-500","bg-red-400","bg-cyan-500","bg-emerald-500"];function Ly(e){let t=0;for(let a=0;a<e.length;a++)t=e.charCodeAt(a)+((t<<5)-t);return zy[Math.abs(t)%zy.length]}function By(e,t){if(e){const a=e.trim().split(/\s+/);return a.length>=2?(a[0][0]+a[a.length-1][0]).toUpperCase():e[0].toUpperCase()}return t.slice(-2)}function NL(){const{t:e}=ze("conversations"),[t,a]=BS(),[r,l]=S.useState([]),[u,d]=S.useState(t.get("phone")||null),[h,m]=S.useState([]),[p,y]=S.useState(""),[x,b]=S.useState(!0),[v,w]=S.useState(!1),[_,E]=S.useState(""),[T,A]=S.useState("all"),[C,k]=S.useState(!1),[L,j]=S.useState(!1),R=S.useRef(null),$=S.useRef(!0),H=Lt(se=>se.agent),F=H?.role==="supervisor",[P,K]=S.useState(F?"all":"mine"),W=S.useRef(P);W.current=P;const B=r.find(se=>se.phone===u),G=S.useRef(u);G.current=u;const O=B?.session_id||B?.sessionId||B?.id||null,U=S.useRef(O);U.current=O;const z=S.useRef(!1),{socket:I,connected:q}=yL("/chat"),D=[{key:"mine",label:e("filters.myChats"),icon:Pa},{key:"department",label:e("filters.department"),icon:Yr},{key:"unassigned",label:e("filters.unassigned"),icon:yy},{key:"all",label:e("filters.all"),icon:Sp}],V=[{key:"all",label:e("channels.all"),icon:null,color:"gray"},{key:"whatsapp",label:e("channels.whatsapp"),icon:t1,color:"green"},{key:"instagram",label:e("channels.instagram"),icon:n1,color:"pink"}];S.useEffect(()=>{Z();const se=setInterval(()=>{Z()},3e4);return()=>{clearInterval(se)}},[P]),S.useEffect(()=>{u&&($.current=!0,ae(u),a({phone:u}))},[u]),S.useEffect(()=>{if(!I)return;I.on("new_message",ce=>{if(ce.phone&&String(ce.phone)===String(G.current)||ce.sessionId&&U.current&&Number(ce.sessionId)===Number(U.current)){m(Ce=>Ce.find(We=>ce.msgId&&We.waMsgId===ce.msgId||ce.dbId&&We.id===ce.dbId)?Ce:[...Ce,{id:ce.dbId||Date.now(),direction:ce.direction==="in"?"incoming":"outgoing",body:ce.text,content:ce.text,created_at:new Date(ce.timestamp).toISOString(),status:ce.status,waMsgId:ce.msgId,is_bot:ce.isAI||!1,mediaType:ce.media?.type||null,mediaId:ce.media?.id||ce.mediaId||null,mediaMime:ce.media?.mime||null,mediaCaption:ce.media?.caption||null,mediaExtra:ce.media?.extra||null,media:ce.media}]),by(ce.phone).then(()=>Z());return}Z()}),I.on("escalation",ce=>{console.log("Escalation detected:",ce),Z()}),I.on("message_status_update",ce=>{console.log("Status updated:",ce),m(je=>je.map(Ce=>Ce.waMsgId===ce.msgId?{...Ce,status:ce.status}:Ce))}),I.on("chat_assigned",ce=>{console.log("Chat assigned:",ce),Z()}),I.on("chat_transferred",ce=>{console.log("Chat transferred:",ce),Z()}),I.on("chat_unassigned",ce=>{console.log("Chat unassigned:",ce),Z()}),I.on("agent_status_change",ce=>{console.log("Agent status change:",ce)}),I.on("contact_name_update",ce=>{ce.phone&&ce.contactName&&l(je=>je.map(Ce=>Ce.phone===ce.phone?{...Ce,contact_name:ce.contactName,name:ce.contactName,ig_username:ce.igUsername||Ce.ig_username}:Ce))});const se=()=>{z.current&&(console.log("Socket reconnected, reloading data..."),G.current&&ae(G.current),Z()),z.current=!0};return I.on("connect",se),()=>{I.off("new_message"),I.off("escalation"),I.off("message_status_update"),I.off("chat_assigned"),I.off("chat_transferred"),I.off("chat_unassigned"),I.off("agent_status_change"),I.off("contact_name_update"),I.off("connect",se)}},[I]),S.useEffect(()=>{if(!(!I||!O))return I.emit("join_session",{sessionId:O}),()=>{I.emit("leave_session",{sessionId:O})}},[I,O]),S.useEffect(()=>{$.current?(R.current?.scrollIntoView({behavior:"instant"}),$.current=!1):R.current?.scrollIntoView({behavior:"smooth"})},[h]);const Z=async se=>{try{const ce=se||W.current,je=await Mv(ce);l(je.conversations||[])}catch(ce){console.error("Error loading conversations:",ce)}finally{b(!1)}},ae=async se=>{try{const ce=await pC(se);m(ce.messages||[]),await by(se)}catch(ce){console.error("Error loading messages:",ce)}},ne=se=>{y(se.target.value)},de=async()=>{if(!(!p.trim()||!u||v)){w(!0);try{await mC(u,p),y("")}catch(se){console.error("Error sending message:",se),alert(e("sendError"))}finally{w(!1)}}},fe=se=>{se.key==="Enter"&&!se.shiftKey&&(se.preventDefault(),de())},ue=async()=>{if(!he)return;const se=he.session_id||he.sessionId||he.id;if(!confirm(e("deleteConfirm",{name:he.contact_name||he.phone})))return;const ce=Lt.getState().token;try{const Ce=await(await fetch(`/api/chat/conversations/${se}`,{method:"DELETE",headers:{"Content-Type":"application/json",...ce?{Authorization:`Bearer ${ce}`}:{}}})).json();Ce.ok?(d(null),m([]),Z()):alert(Ce.error||e("deleteError"))}catch(je){console.error("Error deleting conversation:",je),alert(e("deleteConversationError"))}},pe=async()=>{if(!B)return;const se=Lt.getState().token;try{(await(await fetch("/api/chat/self-assign",{method:"POST",headers:{"Content-Type":"application/json",...se?{Authorization:`Bearer ${se}`}:{}},body:JSON.stringify({sessionId:B.session_id||B.sessionId||B.id})})).json()).ok&&Z()}catch(ce){console.error("Error self-assigning:",ce)}},Se=r.filter(se=>{const ce=(se.contact_name?.toLowerCase()||"").includes(_.toLowerCase())||se.phone.includes(_),je=se.channel||"whatsapp";return ce&&(T==="all"||je===T)}),he=r.find(se=>se.phone===u),ye=F?D:D.filter(se=>se.key!=="all"),we=se=>{const{mediaType:ce,mediaId:je,mediaExtra:Ce,mediaMime:wt,media:We}=se,Nt=ce||We?.type,Ot=je||We?.id,Gn=wt||We?.mime,$t=Ce||We?.extra;if(!Nt)return null;const Me=se.direction==="outgoing",Tt=Ot&&(Ot.startsWith("http://")||Ot.startsWith("https://"))?Ot:`/api/chat/media/${Ot}`;switch(Nt){case"image":return o.jsxs("div",{className:"mt-2 rounded-lg overflow-hidden max-w-xs",children:[o.jsx("img",{src:Tt,alt:e("image"),className:"w-full h-auto cursor-pointer hover:opacity-90",onClick:()=>window.open(Tt,"_blank"),onError:xt=>{xt.target.style.display="none",xt.target.nextSibling.style.display="flex"}}),o.jsxs("div",{className:"hidden items-center gap-2 p-3 bg-gray-100 rounded-lg",children:[o.jsx(v4,{className:"w-5 h-5 text-gray-500"}),o.jsx("span",{className:"text-sm text-gray-600",children:e("imageUnavailable")})]})]});case"video":return o.jsx("div",{className:"mt-2 rounded-lg overflow-hidden max-w-xs",children:o.jsx("video",{src:Tt,controls:!0,className:"w-full h-auto rounded-lg",preload:"metadata",children:e("videoUnsupported")})});case"audio":return o.jsxs("div",{className:`mt-2 flex items-center gap-2 p-2 rounded-lg ${Me?"bg-green-600":"bg-gray-100"}`,children:[o.jsx($4,{className:`w-5 h-5 ${Me?"text-white":"text-green-600"}`}),o.jsx("audio",{src:Tt,controls:!0,className:"h-8 flex-1",preload:"metadata"})]});case"document":const kn=$t?.filename||e("document");return o.jsxs("a",{href:Tt,target:"_blank",rel:"noopener noreferrer",className:`mt-2 flex items-center gap-3 p-3 rounded-lg ${Me?"bg-green-600 hover:bg-green-700":"bg-gray-100 hover:bg-gray-200"} transition`,children:[o.jsx(fo,{className:`w-8 h-8 ${Me?"text-white":"text-blue-600"}`}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("p",{className:`text-sm font-medium truncate ${Me?"text-white":"text-gray-800"}`,children:kn}),o.jsx("p",{className:`text-xs ${Me?"text-green-100":"text-gray-500"}`,children:Gn||e("document")})]}),o.jsx(u4,{className:`w-5 h-5 ${Me?"text-white":"text-gray-500"}`})]});case"sticker":return o.jsx("div",{className:"mt-2",children:o.jsx("img",{src:Tt,alt:"Sticker",className:"w-32 h-32 object-contain",onError:xt=>{xt.target.src='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="128" height="128" viewBox="0 0 24 24" fill="none" stroke="gray" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="M8 14s1.5 2 4 2 4-2 4-2"/><line x1="9" y1="9" x2="9.01" y2="9"/><line x1="15" y1="9" x2="15.01" y2="9"/></svg>'}})});case"location":const Mn=$t?.latitude,Ka=$t?.longitude,Kn=$t?.name,Qa=$t?.address,xo=`https://www.google.com/maps?q=${Mn},${Ka}`;return o.jsx("a",{href:xo,target:"_blank",rel:"noopener noreferrer",className:`mt-2 block p-3 rounded-lg ${Me?"bg-green-600 hover:bg-green-700":"bg-gray-100 hover:bg-gray-200"} transition`,children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:`p-2 rounded-full ${Me?"bg-green-500":"bg-red-100"}`,children:o.jsx(D4,{className:`w-5 h-5 ${Me?"text-white":"text-red-600"}`})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[Kn&&o.jsx("p",{className:`font-medium ${Me?"text-white":"text-gray-800"}`,children:Kn}),Qa&&o.jsx("p",{className:`text-sm ${Me?"text-green-100":"text-gray-600"}`,children:Qa}),o.jsxs("p",{className:`text-xs mt-1 ${Me?"text-green-200":"text-gray-500"}`,children:[Mn?.toFixed(6),", ",Ka?.toFixed(6)]})]})]})});case"contacts":const bn=$t?.contacts||[];return o.jsxs("div",{className:`mt-2 p-3 rounded-lg ${Me?"bg-green-600":"bg-gray-100"}`,children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx(Tu,{className:`w-5 h-5 ${Me?"text-white":"text-blue-600"}`}),o.jsx("span",{className:`font-medium ${Me?"text-white":"text-gray-800"}`,children:bn.length===1?e("sharedContact"):e("sharedContacts",{count:bn.length})})]}),bn.map((xt,yt)=>o.jsxs("div",{className:`p-2 rounded ${Me?"bg-green-500":"bg-white"} ${yt>0?"mt-2":""}`,children:[o.jsx("p",{className:`font-medium ${Me?"text-white":"text-gray-800"}`,children:xt.name}),xt.phones?.map((ha,yo)=>o.jsxs("p",{className:`text-sm ${Me?"text-green-100":"text-gray-600"}`,children:[ha.phone," ",ha.type&&`(${ha.type})`]},yo))]},yt))]});case"reaction":const jt=$t?.emoji||se.body;return o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(y4,{className:`w-4 h-4 ${Me?"text-white":"text-pink-500"}`}),o.jsx("span",{className:"text-2xl",children:jt})]});default:return null}};return x?o.jsx("div",{className:"h-full flex items-center justify-center",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-500"})}):o.jsxs("div",{className:"h-screen flex",children:[o.jsxs("div",{className:"w-96 bg-white border-r border-gray-200 flex flex-col",children:[o.jsxs("div",{className:"p-4 border-b border-gray-200",children:[o.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-3",children:e("title")}),o.jsx("div",{className:`grid ${F?"grid-cols-4":"grid-cols-3"} gap-1 mb-3 bg-gray-100 p-1 rounded-xl`,children:ye.map(se=>{const ce=se.icon;return o.jsxs("button",{onClick:()=>{K(se.key),W.current=se.key,Z(se.key)},className:`flex items-center justify-center gap-1.5 py-2 rounded-lg text-xs font-semibold transition-all ${P===se.key?"bg-white text-green-700 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:[o.jsx(ce,{className:"w-3.5 h-3.5"}),se.label]},se.key)})}),o.jsx("div",{className:"flex gap-1 mb-3",children:V.map(se=>{const ce=se.icon,je=T===se.key;return o.jsxs("button",{onClick:()=>A(se.key),className:`flex items-center gap-1 px-2.5 py-1.5 rounded-lg text-xs font-medium transition-all border ${je?se.key==="whatsapp"?"bg-green-50 text-green-700 border-green-200":se.key==="instagram"?"bg-pink-50 text-pink-700 border-pink-200":"bg-indigo-50 text-indigo-700 border-indigo-200":"bg-white text-gray-500 border-gray-200 hover:bg-gray-50"}`,children:[ce&&o.jsx(ce,{className:"w-3 h-3"}),se.label]},se.key)})}),o.jsxs("div",{className:"relative",children:[o.jsx(Ep,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),o.jsx("input",{type:"text",value:_,onChange:se=>E(se.target.value),placeholder:e("search"),className:"w-full pl-10 pr-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none"})]})]}),o.jsx("div",{className:"flex-1 overflow-y-auto",children:Se.length===0?o.jsxs("div",{className:"p-8 text-center text-gray-400",children:[o.jsx(Xt,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),o.jsx("p",{children:e("noConversations")})]}):Se.map(se=>o.jsxs("button",{onClick:()=>d(se.phone),className:`w-full flex items-center gap-3 p-4 border-b border-gray-100 hover:bg-gray-50 transition text-left ${u===se.phone?"bg-green-50":""}`,children:[o.jsx("div",{className:`w-12 h-12 ${Ly(se.contact_name||se.phone)} rounded-full flex items-center justify-center flex-shrink-0`,children:o.jsx("span",{className:"text-white font-semibold text-sm",children:By(se.contact_name,se.phone)})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-1.5 min-w-0",children:[o.jsx("p",{className:"font-medium text-gray-800 truncate",children:se.contact_name||se.phone}),se.ig_username&&o.jsxs("span",{className:"text-xs text-gray-400 truncate flex-shrink-0",children:["@",se.ig_username]})]}),se.unread_count>0&&o.jsx("span",{className:"bg-green-500 text-white text-xs font-medium px-2 py-0.5 rounded-full flex-shrink-0",children:se.unread_count})]}),o.jsx("p",{className:"text-sm text-gray-500 truncate",children:se.last_message||e("noMessages")}),o.jsxs("div",{className:"flex items-center gap-1.5 mt-1 flex-wrap",children:[o.jsx($y,{channel:se.channel}),se.department_name&&o.jsxs("span",{className:"inline-flex items-center gap-0.5 text-[10px] px-1.5 py-0.5 rounded-full font-medium",style:{backgroundColor:(se.department_color||"#6b7280")+"20",color:se.department_color||"#6b7280"},children:[o.jsx(Yr,{className:"w-2.5 h-2.5"}),se.department_name]}),se.agent_name&&o.jsxs("span",{className:"inline-flex items-center gap-0.5 text-[10px] px-1.5 py-0.5 rounded-full bg-blue-50 text-blue-600 font-medium",children:[o.jsx(Pa,{className:"w-2.5 h-2.5"}),se.agent_name]}),!se.agent_name&&!se.department_name&&se.escalation_status==="ESCALATED"&&o.jsxs("span",{className:"inline-flex items-center gap-0.5 text-[10px] px-1.5 py-0.5 rounded-full bg-yellow-50 text-yellow-600 font-medium",children:[o.jsx(yy,{className:"w-2.5 h-2.5"}),e("unassignedBadge")]}),o.jsx("span",{className:"text-xs text-gray-400",children:se.last_message_time?po(new Date(se.last_message_time),{addSuffix:!0,locale:ua()}):""})]})]})]},se.phone))})]}),o.jsx("div",{className:"flex-1 flex flex-col bg-gray-50",children:u?o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"bg-white border-b border-gray-200 p-4 flex items-center justify-between gap-4",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:`w-10 h-10 ${Ly(he?.contact_name||u)} rounded-full flex items-center justify-center`,children:o.jsx("span",{className:"text-white font-semibold text-sm",children:By(he?.contact_name,u)})}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("p",{className:"font-medium text-gray-800",children:he?.contact_name||u}),he?.ig_username&&o.jsxs("span",{className:"text-sm text-gray-400",children:["@",he.ig_username]})]}),o.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[o.jsx($y,{channel:he?.channel}),o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx(Su,{className:"w-3 h-3"}),u]}),he?.department_name&&o.jsxs("span",{className:"inline-flex items-center gap-0.5 text-[10px] px-1.5 py-0.5 rounded-full font-medium",style:{backgroundColor:(he.department_color||"#6b7280")+"20",color:he.department_color||"#6b7280"},children:[o.jsx(Yr,{className:"w-2.5 h-2.5"}),he.department_name]}),he?.agent_name&&o.jsxs("span",{className:"inline-flex items-center gap-0.5 text-[10px] px-1.5 py-0.5 rounded-full bg-blue-50 text-blue-600 font-medium",children:[o.jsx(Pa,{className:"w-2.5 h-2.5"}),he.agent_name]})]})]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[he&&H?.id>0&&(!he.assigned_agent_id||he.assigned_agent_id!==H.id)&&o.jsxs("button",{onClick:pe,className:"flex items-center gap-1.5 px-3 py-2 text-xs font-medium bg-green-50 text-green-700 hover:bg-green-100 rounded-lg border border-green-200 transition",title:e("takeTitle"),children:[o.jsx(Jr,{className:"w-4 h-4"}),e("take")]}),he&&o.jsxs("button",{onClick:()=>k(!0),className:"flex items-center gap-1.5 px-3 py-2 text-xs font-medium bg-gray-50 text-gray-700 hover:bg-gray-100 rounded-lg border border-gray-200 transition",title:e("assignTitle"),children:[o.jsx(Jr,{className:"w-4 h-4"}),e("assign")]}),he&&o.jsxs("button",{onClick:()=>j(!0),className:"flex items-center gap-1.5 px-3 py-2 text-xs font-medium bg-blue-50 text-blue-700 hover:bg-blue-100 rounded-lg border border-blue-200 transition",title:e("transferTitle"),children:[o.jsx(bp,{className:"w-4 h-4"}),e("transfer")]}),he&&F&&o.jsxs("button",{onClick:ue,className:"flex items-center gap-1.5 px-3 py-2 text-xs font-medium bg-red-50 text-red-700 hover:bg-red-100 rounded-lg border border-red-200 transition",title:e("deleteTitle"),children:[o.jsx(ho,{className:"w-4 h-4"}),e("delete")]}),o.jsx("div",{className:"text-sm",children:q?o.jsxs("span",{className:"text-green-600 flex items-center gap-1",children:[o.jsx("span",{className:"w-2 h-2 bg-green-600 rounded-full"}),e("realtime")]}):o.jsxs("span",{className:"text-yellow-600 flex items-center gap-1",children:[o.jsx("span",{className:"w-2 h-2 bg-yellow-600 rounded-full"}),e("reconnecting")]})})]})]}),o.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[h.map((se,ce)=>o.jsx("div",{className:`flex ${se.direction==="outgoing"?"justify-end":"justify-start"}`,children:o.jsxs("div",{className:`max-w-md px-4 py-2 rounded-2xl ${se.direction==="outgoing"?"bg-green-500 text-white rounded-br-md":"bg-white text-gray-800 rounded-bl-md shadow-sm"}`,children:[se.direction==="incoming"&&o.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-400 mb-1",children:[o.jsx(Pa,{className:"w-3 h-3"}),e("client")]}),se.direction==="outgoing"&&se.is_bot&&o.jsxs("div",{className:"flex items-center gap-1 text-xs text-green-100 mb-1",children:[o.jsx(vp,{className:"w-3 h-3"}),e("bot")]}),we(se),(se.body||se.content)&&(!se.mediaType||se.mediaType==="reaction")&&o.jsx("p",{className:"whitespace-pre-wrap",children:se.body||se.content}),se.mediaType&&se.mediaType!=="reaction"&&(se.mediaCaption||se.body)&&o.jsx("p",{className:"whitespace-pre-wrap mt-2 text-sm",children:se.mediaCaption||se.body}),o.jsxs("div",{className:`flex items-center gap-1 text-xs mt-1 ${se.direction==="outgoing"?"text-white opacity-90":"text-gray-400"}`,children:[o.jsx("span",{children:se.created_at?ku(new Date(se.created_at),"HH:mm",{locale:ua()}):""}),se.direction==="outgoing"&&o.jsxs("span",{className:"ml-1",children:[se.status==="sent"&&"",se.status==="delivered"&&"",se.status==="read"&&o.jsx("span",{className:"text-blue-400",children:""})]})]})]})},ce)),o.jsx("div",{ref:R})]}),o.jsx("div",{className:"bg-white border-t border-gray-200 p-4",children:o.jsxs("div",{className:"flex gap-3",children:[o.jsx("input",{type:"text",value:p,onChange:ne,onKeyPress:fe,placeholder:e("messagePlaceholder"),className:"flex-1 px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none"}),o.jsxs("button",{onClick:de,disabled:!p.trim()||v,className:"bg-green-500 hover:bg-green-600 text-white px-6 py-3 rounded-xl transition disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[o.jsx(_p,{className:"w-5 h-5"}),e(v?"sending":"send")]})]})})]}):o.jsx("div",{className:"flex-1 flex items-center justify-center text-gray-400",children:o.jsxs("div",{className:"text-center",children:[o.jsx(Xt,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),o.jsx("p",{className:"text-lg",children:e("selectConversation")})]})})}),C&&he&&o.jsx(bL,{sessionId:he.session_id||he.sessionId||he.id,currentAgentId:he.assigned_agent_id,currentDepartmentId:he.assigned_department_id,onClose:()=>k(!1),onAssigned:()=>Z()}),L&&he&&o.jsx(vL,{sessionId:he.session_id||he.sessionId||he.id,currentAgentId:he.assigned_agent_id,currentDepartmentId:he.assigned_department_id,onClose:()=>j(!1),onTransferred:()=>Z()})]})}const Cs="/api/visual-flows-live";async function on(e,t){if(!e.ok){let a=t;try{const r=await e.json();r.error&&(a=r.error)}catch{}throw new Error(a)}return e.json()}async function s1(){const e=await fetch(Cs);return on(e,"Error al cargar flujos")}async function Qh(e){const t=await fetch(`${Cs}/${e}`);return on(t,"Flujo no encontrado")}async function jL(e){const t=await fetch(Cs,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});return on(t,"Error al crear flujo")}async function SL(e,t){const a=await fetch(`${Cs}/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});return on(a,"Error al actualizar flujo")}async function CL(e){const t=await fetch(`${Cs}/${e}`,{method:"DELETE"});return on(t,"Error al eliminar flujo")}async function a1(e,t=!0){const a=await fetch(`${Cs}/${e}/activate`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({active:t})});return on(a,"Error al activar flujo")}async function EL(e,t){const a=await fetch(`${Cs}/${e}/duplicate`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({new_name:t})});return on(a,"Error al duplicar flujo")}async function _L(){const e=await fetch(`${Cs}/templates/list`);return on(e,"Error al cargar plantillas")}async function r1(e,t){const a=await fetch(`${Cs}/templates/${e}/create`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:t})});return on(a,"Error al crear desde plantilla")}async function TL(e={}){const t=new URLSearchParams;e.status&&t.append("status",e.status),e.category&&t.append("category",e.category),e.lang&&t.append("lang",e.lang),t.append("with","components"),t.append("limit","200");const a=await fetch(`/api/chat/templates?${t}`);return on(a,"Error al cargar plantillas de Meta")}async function AL({templateName:e,languageCode:t,phone:a,parameters:r=[],headerParams:l=[],buttonParams:u=[]}){const d=await fetch("/api/templates/test",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({templateName:e,languageCode:t,phone:a,parameters:r,headerParams:l,buttonParams:u})});return on(d,"Error al enviar plantilla de prueba")}async function kL(){const e=await fetch("/api/settings/visual-flows");return on(e,"Error al obtener estado de Visual Flows")}async function ML(e){const t=await fetch("/api/settings/visual-flows",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({enabled:e})});return on(t,"Error al cambiar estado de Visual Flows")}const Py="whatsapp_test_phone";function DL({template:e,onClose:t}){const[a,r]=S.useState(""),[l,u]=S.useState(!0),[d,h]=S.useState([]),[m,p]=S.useState([]),[y,x]=S.useState([]),[b,v]=S.useState(!1),[w,_]=S.useState(null);S.useEffect(()=>{const k=localStorage.getItem(Py);k&&r(k)},[]),S.useEffect(()=>{if(!e?.components)return;const k=e.components.find(R=>R.type==="BODY"),L=e.components.find(R=>R.type==="HEADER"),j=e.components.filter(R=>R.type==="BUTTONS");if(k?.text){const R=k.text.match(/\{\{(\d+)\}\}/g)||[];h(R.map(()=>""))}if(L?.text){const R=L.text.match(/\{\{(\d+)\}\}/g)||[];p(R.map(()=>""))}if(j.length>0){const R=[];j.forEach($=>{$.buttons&&$.buttons.forEach(H=>{H.type==="URL"&&H.url?.includes("{{")&&R.push("")})}),x(R)}},[e]);const E=async()=>{if(!a.trim()){_({ok:!1,error:"Ingresa un nmero de telfono"});return}v(!0),_(null);try{l&&localStorage.setItem(Py,a);const k=await AL({templateName:e.name,languageCode:e.language,phone:a.trim(),parameters:d.filter(L=>L!==""),headerParams:m.filter(L=>L!==""),buttonParams:y.filter(L=>L!=="")});_(k)}catch(k){_({ok:!1,error:k.message})}finally{v(!1)}},T=()=>{if(!e?.components)return"";const k=e.components.find(j=>j.type==="BODY");if(!k?.text)return"";let L=k.text;return d.forEach((j,R)=>{L=L.replace(`{{${R+1}}}`,j||`[param ${R+1}]`)}),L},A={APPROVED:{bg:"#dcfce7",text:"#166534"},PENDING:{bg:"#fef3c7",text:"#92400e"},REJECTED:{bg:"#fee2e2",text:"#991b1b"}},C={MARKETING:{bg:"#dbeafe",text:"#1e40af"},UTILITY:{bg:"#f3e8ff",text:"#6b21a8"},AUTHENTICATION:{bg:"#fce7f3",text:"#9d174d"}};return o.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:o.jsxs("div",{style:{background:"white",borderRadius:"16px",padding:"24px",maxWidth:"500px",width:"90%",maxHeight:"90vh",overflow:"auto"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"16px"},children:[o.jsxs("div",{children:[o.jsx("h2",{style:{margin:"0 0 8px 0",fontSize:"20px"},children:"Probar Plantilla"}),o.jsxs("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:[o.jsx("span",{style:{padding:"2px 8px",borderRadius:"4px",fontSize:"12px",fontWeight:"500",background:A[e.status]?.bg||"#f3f4f6",color:A[e.status]?.text||"#374151"},children:e.status}),o.jsx("span",{style:{padding:"2px 8px",borderRadius:"4px",fontSize:"12px",fontWeight:"500",background:C[e.category]?.bg||"#f3f4f6",color:C[e.category]?.text||"#374151"},children:e.category}),o.jsx("span",{style:{padding:"2px 8px",borderRadius:"4px",fontSize:"12px",background:"#f3f4f6",color:"#374151"},children:e.language})]})]}),o.jsx("button",{onClick:t,style:{background:"none",border:"none",fontSize:"24px",cursor:"pointer",color:"#6b7280"},children:""})]}),o.jsxs("div",{style:{background:"#f9fafb",padding:"12px",borderRadius:"8px",marginBottom:"16px"},children:[o.jsx("div",{style:{fontSize:"12px",color:"#6b7280",marginBottom:"4px"},children:"Nombre de la plantilla"}),o.jsx("div",{style:{fontFamily:"monospace",fontWeight:"500"},children:e.name})]}),o.jsxs("div",{style:{background:"#dcf8c6",padding:"12px",borderRadius:"8px",marginBottom:"16px",whiteSpace:"pre-wrap"},children:[o.jsx("div",{style:{fontSize:"12px",color:"#075e54",marginBottom:"4px"},children:"Vista previa"}),o.jsx("div",{style:{color:"#000"},children:T()||"(Sin contenido)"})]}),d.length>0&&o.jsxs("div",{style:{marginBottom:"16px"},children:[o.jsx("div",{style:{fontSize:"14px",fontWeight:"500",marginBottom:"8px"},children:"Parmetros del mensaje"}),d.map((k,L)=>o.jsx("input",{type:"text",placeholder:`Parmetro {{${L+1}}}`,value:k,onChange:j=>{const R=[...d];R[L]=j.target.value,h(R)},style:{width:"100%",padding:"8px 12px",border:"1px solid #d1d5db",borderRadius:"6px",marginBottom:"8px",fontSize:"14px"}},`body-${L}`))]}),m.length>0&&o.jsxs("div",{style:{marginBottom:"16px"},children:[o.jsx("div",{style:{fontSize:"14px",fontWeight:"500",marginBottom:"8px"},children:"Parmetros del encabezado"}),m.map((k,L)=>o.jsx("input",{type:"text",placeholder:`Header {{${L+1}}}`,value:k,onChange:j=>{const R=[...m];R[L]=j.target.value,p(R)},style:{width:"100%",padding:"8px 12px",border:"1px solid #d1d5db",borderRadius:"6px",marginBottom:"8px",fontSize:"14px"}},`header-${L}`))]}),y.length>0&&o.jsxs("div",{style:{marginBottom:"16px"},children:[o.jsx("div",{style:{fontSize:"14px",fontWeight:"500",marginBottom:"8px"},children:"Parmetros de botn URL"}),y.map((k,L)=>o.jsx("input",{type:"text",placeholder:`Texto dinmico del botn ${L+1}`,value:k,onChange:j=>{const R=[...y];R[L]=j.target.value,x(R)},style:{width:"100%",padding:"8px 12px",border:"1px solid #d1d5db",borderRadius:"6px",marginBottom:"8px",fontSize:"14px"}},`btn-${L}`))]}),o.jsxs("div",{style:{marginBottom:"16px"},children:[o.jsx("div",{style:{fontSize:"14px",fontWeight:"500",marginBottom:"8px"},children:"Nmero de telfono destino"}),o.jsx("input",{type:"tel",placeholder:"56912345678",value:a,onChange:k=>r(k.target.value),style:{width:"100%",padding:"8px 12px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"14px"}}),o.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",marginTop:"8px",fontSize:"13px",color:"#6b7280",cursor:"pointer"},children:[o.jsx("input",{type:"checkbox",checked:l,onChange:k=>u(k.target.checked)}),"Recordar este nmero"]})]}),w&&o.jsx("div",{style:{padding:"12px",borderRadius:"8px",marginBottom:"16px",background:w.ok?"#dcfce7":"#fee2e2",color:w.ok?"#166534":"#991b1b"},children:w.ok?o.jsxs(o.Fragment,{children:[o.jsx("div",{style:{fontWeight:"500"},children:"Enviado correctamente"}),o.jsxs("div",{style:{fontSize:"13px",marginTop:"4px"},children:["Mensaje enviado a ",w.sentTo]})]}):o.jsxs(o.Fragment,{children:[o.jsx("div",{style:{fontWeight:"500"},children:"Error al enviar"}),o.jsx("div",{style:{fontSize:"13px",marginTop:"4px"},children:w.error})]})}),o.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end"},children:[o.jsx("button",{onClick:t,style:{padding:"10px 20px",border:"1px solid #d1d5db",borderRadius:"8px",background:"white",cursor:"pointer",fontSize:"14px"},children:"Cerrar"}),o.jsx("button",{onClick:E,disabled:b||e.status!=="APPROVED",style:{padding:"10px 20px",border:"none",borderRadius:"8px",background:e.status==="APPROVED"?"#25d366":"#9ca3af",color:"white",cursor:e.status==="APPROVED"?"pointer":"not-allowed",fontSize:"14px",fontWeight:"500",display:"flex",alignItems:"center",gap:"8px"},children:b?"Enviando...":"Enviar Prueba"})]}),e.status!=="APPROVED"&&o.jsx("div",{style:{marginTop:"12px",padding:"8px",background:"#fef3c7",borderRadius:"6px",fontSize:"13px",color:"#92400e",textAlign:"center"},children:"Solo se pueden probar plantillas con estado APPROVED"})]})})}function RL(){const e=Ga(),{t}=ze("flows"),[a,r]=S.useState("flows"),[l,u]=S.useState([]),[d,h]=S.useState([]),[m,p]=S.useState([]),[y,x]=S.useState(!1),[b,v]=S.useState({status:"",category:""}),[w,_]=S.useState(null),[E,T]=S.useState(!0),[A,C]=S.useState(null),[k,L]=S.useState(null),[j,R]=S.useState(!0),[$,H]=S.useState(!1);S.useEffect(()=>{K(),F()},[]),S.useEffect(()=>{a==="whatsapp"&&W()},[a,b]);const F=async()=>{try{const q=await kL();R(q.enabled)}catch(q){console.error("Error loading visual flows status:",q)}},P=async()=>{try{H(!0);const D=await ML(!j);R(D.enabled),B(D.enabled?t("autoModeOn"):t("autoModeOff"),D.enabled?"success":"info")}catch(q){console.error("Error toggling visual flows:",q),B(`Error: ${q.message}`,"error")}finally{H(!1)}},K=async()=>{try{T(!0),C(null);const[q,D]=await Promise.all([s1(),_L()]);u(q.flows||[]),h(D.templates||[])}catch(q){console.error("Error loading flows:",q),C(q.message)}finally{T(!1)}},W=async()=>{try{x(!0);const q={};b.status&&(q.status=b.status),b.category&&(q.category=b.category);const D=await TL(q);p(D.items||[])}catch(q){console.error("Error loading Meta templates:",q),B(`${t("errorLoadingTemplates")}: ${q.message}`,"error")}finally{x(!1)}},B=(q,D="success")=>{L({message:q,type:D}),setTimeout(()=>L(null),4e3)},G=async(q,D)=>{try{const V=await r1(q,null);B(t("flowCreated",{name:D}),"success"),await K(),V.id&&e(`/flows/builder/${V.id}`)}catch(V){console.error("Error creating from template:",V),B(`${t("errorCreating")}: ${V.message}`,"error")}},O=async q=>{try{const D=!q.is_active;await a1(q.id,D),B(D?t("flowActivated",{name:q.name}):t("flowDeactivated",{name:q.name}),"success"),await K()}catch(D){console.error("Error toggling flow:",D),B(`Error: ${D.message}`,"error")}},U=async q=>{try{await EL(q.id,`${q.name} (${t("copy")})`),B(t("duplicated"),"success"),await K()}catch(D){console.error("Error duplicating flow:",D),B(`${t("errorDuplicating")}: ${D.message}`,"error")}},z=async q=>{if(confirm(t("deleteConfirm",{name:q.name})))try{await CL(q.id),B(t("deleted"),"success"),await K()}catch(D){console.error("Error deleting flow:",D),B(`${t("errorDeleting")}: ${D.message}`,"error")}},I=q=>({sales:"bg-green-100 text-green-800",support:"bg-blue-100 text-blue-800",service:"bg-purple-100 text-purple-800",feedback:"bg-yellow-100 text-yellow-800",engagement:"bg-pink-100 text-pink-800"})[q]||"bg-gray-100 text-gray-800";return E?o.jsx("div",{className:"flex items-center justify-center h-screen",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-500 mx-auto mb-4"}),o.jsx("p",{className:"text-gray-600",children:t("loadingFlows")})]})}):A?o.jsx("div",{className:"p-8",children:o.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[o.jsx("h3",{className:"text-red-800 font-semibold mb-2",children:t("errorLoading")}),o.jsx("p",{className:"text-red-600",children:A}),o.jsx("button",{onClick:K,className:"mt-4 px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700",children:t("common:actions.retry")})]})}):o.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[o.jsxs("div",{className:"mb-6 flex justify-between items-start",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:t("title")}),o.jsx("p",{className:"text-gray-600",children:t("subtitle")})]}),o.jsxs("div",{className:`flex items-center gap-3 px-4 py-3 rounded-lg border ${j?"bg-green-50 border-green-200":"bg-gray-50 border-gray-300"}`,children:[o.jsxs("div",{className:"text-right",children:[o.jsx("p",{className:`text-sm font-medium ${j?"text-green-800":"text-gray-600"}`,children:t("autoMode")}),o.jsx("p",{className:`text-xs ${j?"text-green-600":"text-gray-500"}`,children:t(j?"botResponding":"botPaused")})]}),o.jsx("button",{onClick:P,disabled:$,className:`relative inline-flex h-7 w-14 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 ${j?"bg-green-500 focus:ring-green-500":"bg-gray-300 focus:ring-gray-500"} ${$?"opacity-50 cursor-wait":"cursor-pointer"}`,children:o.jsx("span",{className:`inline-block h-5 w-5 transform rounded-full bg-white shadow-md transition-transform ${j?"translate-x-8":"translate-x-1"}`})})]})]}),k&&o.jsx("div",{className:`mb-4 p-4 rounded-lg ${k.type==="success"?"bg-green-50 text-green-800 border border-green-200":k.type==="error"?"bg-red-50 text-red-800 border border-red-200":"bg-blue-50 text-blue-800 border border-blue-200"}`,children:k.message}),o.jsx("div",{className:"mb-6 border-b border-gray-200",children:o.jsxs("div",{className:"flex space-x-8",children:[o.jsxs("button",{onClick:()=>r("flows"),className:`pb-4 px-1 border-b-2 font-medium transition-colors ${a==="flows"?"border-green-500 text-green-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[t("myFlows")," (",l.length,")"]}),o.jsxs("button",{onClick:()=>r("templates"),className:`pb-4 px-1 border-b-2 font-medium transition-colors ${a==="templates"?"border-green-500 text-green-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[t("templates")," (",d.length,")"]}),o.jsxs("button",{onClick:()=>r("whatsapp"),className:`pb-4 px-1 border-b-2 font-medium transition-colors flex items-center gap-2 ${a==="whatsapp"?"border-green-500 text-green-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[o.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"currentColor",children:o.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})}),t("waTemplates")]})]})}),a==="flows"&&o.jsx("div",{children:l.length===0?o.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300",children:[o.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),o.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:t("noFlows")}),o.jsx("p",{className:"mt-1 text-sm text-gray-500",children:t("startFromTemplate")}),o.jsx("div",{className:"mt-6",children:o.jsx("button",{onClick:()=>r("templates"),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:t("viewTemplates")})})]}):o.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:t("name")}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:t("state")}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:t("statistics")}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:t("lastUpdated")}),o.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:t("actions")})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:l.map(q=>o.jsxs("tr",{className:"hover:bg-gray-50",children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"flex items-center",children:o.jsxs("div",{children:[o.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[q.name,q.is_default&&o.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800",children:t("default")})]}),q.description&&o.jsx("div",{className:"text-sm text-gray-500",children:q.description})]})})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("button",{onClick:()=>O(q),className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium cursor-pointer transition-colors ${q.is_active?"bg-green-100 text-green-800 hover:bg-green-200":"bg-gray-100 text-gray-800 hover:bg-gray-200"}`,children:q.is_active?t("active"):t("inactive")})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:o.jsxs("div",{className:"flex flex-col space-y-1",children:[o.jsx("span",{children:t("executed",{count:q.times_triggered||0})}),o.jsx("span",{children:t("completed",{count:q.times_completed||0})})]})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:q.updated_at?ku(new Date(q.updated_at),"dd MMM yyyy, HH:mm",{locale:ua()}):"-"}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:o.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[o.jsx("button",{onClick:()=>e(`/flows/builder/${q.id}`),className:"text-blue-600 hover:text-blue-900",title:t("common:actions.edit"),children:o.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),o.jsx("button",{onClick:()=>U(q),className:"text-gray-600 hover:text-gray-900",title:t("duplicate"),children:o.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})})}),o.jsx("button",{onClick:()=>z(q),className:"text-red-600 hover:text-red-900",title:t("common:actions.delete"),children:o.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})})]},q.id))})]})})}),a==="templates"&&o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:d.map(q=>o.jsx("div",{className:"bg-white rounded-lg shadow-md hover:shadow-lg transition-shadow overflow-hidden border border-gray-200",children:o.jsxs("div",{className:"p-6",children:[o.jsxs("div",{className:"flex items-start justify-between mb-3",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:q.name}),o.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${I(q.category)}`,children:q.category})]}),o.jsx("p",{className:"text-sm text-gray-600 mb-4 line-clamp-2",children:q.description}),o.jsxs("div",{className:"flex items-center text-sm text-gray-500 mb-4",children:[o.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"})}),o.jsx("span",{children:t("nodes",{count:q.nodes_count})})]}),q.features&&q.features.length>0&&o.jsx("div",{className:"flex flex-wrap gap-1 mb-4",children:q.features.map(D=>o.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-purple-50 text-purple-700 border border-purple-200",children:D},D))}),o.jsx("button",{onClick:()=>G(q.id,q.name),className:"w-full px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors font-medium",children:t("createFromTemplate")})]})},q.id))}),a==="whatsapp"&&o.jsxs("div",{children:[o.jsxs("div",{className:"mb-6 flex flex-wrap gap-4 items-center",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:t("state")}),o.jsxs("select",{value:b.status,onChange:q=>v({...b,status:q.target.value}),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-green-500 focus:border-green-500",children:[o.jsx("option",{value:"",children:t("allTemplates")}),o.jsx("option",{value:"APPROVED",children:t("approved")}),o.jsx("option",{value:"PENDING",children:t("pending")}),o.jsx("option",{value:"REJECTED",children:t("rejected")})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:t("category")}),o.jsxs("select",{value:b.category,onChange:q=>v({...b,category:q.target.value}),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-green-500 focus:border-green-500",children:[o.jsx("option",{value:"",children:t("allTemplates")}),o.jsx("option",{value:"MARKETING",children:t("marketing")}),o.jsx("option",{value:"UTILITY",children:t("utility")}),o.jsx("option",{value:"AUTHENTICATION",children:t("authentication")})]})]}),o.jsx("div",{className:"flex-1"}),o.jsx("div",{className:"text-sm text-gray-500",children:t("templatesFound",{count:m.length})})]}),y?o.jsxs("div",{className:"flex items-center justify-center py-12",children:[o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-green-500"}),o.jsx("span",{className:"ml-3 text-gray-600",children:t("loadingMeta")})]}):m.length===0?o.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300",children:[o.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),o.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:t("noTemplates")}),o.jsx("p",{className:"mt-1 text-sm text-gray-500",children:t("adjustFilters")})]}):o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:m.map((q,D)=>{const Z=q.components?.find(de=>de.type==="BODY")?.text||"",ae={APPROVED:"bg-green-100 text-green-800",PENDING:"bg-yellow-100 text-yellow-800",REJECTED:"bg-red-100 text-red-800"},ne={MARKETING:"bg-blue-100 text-blue-800",UTILITY:"bg-purple-100 text-purple-800",AUTHENTICATION:"bg-pink-100 text-pink-800"};return o.jsx("div",{className:"bg-white rounded-lg shadow-md hover:shadow-lg transition-shadow overflow-hidden border border-gray-200",children:o.jsxs("div",{className:"p-5",children:[o.jsx("div",{className:"flex items-start justify-between mb-3",children:o.jsx("h3",{className:"text-base font-semibold text-gray-900 font-mono",children:q.name})}),o.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[o.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded text-xs font-medium ${ae[q.status]||"bg-gray-100 text-gray-800"}`,children:q.status}),o.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded text-xs font-medium ${ne[q.category]||"bg-gray-100 text-gray-800"}`,children:q.category}),o.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-gray-100 text-gray-800",children:q.language})]}),o.jsx("div",{className:"bg-gray-50 rounded-lg p-3 mb-4 max-h-32 overflow-y-auto",children:o.jsx("p",{className:"text-sm text-gray-700 whitespace-pre-wrap",children:Z.length>200?Z.substring(0,200)+"...":Z||t("noContent")})}),o.jsx("button",{onClick:()=>_(q),disabled:q.status!=="APPROVED",className:`w-full px-4 py-2 rounded-lg font-medium transition-colors ${q.status==="APPROVED"?"bg-green-600 text-white hover:bg-green-700":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:q.status==="APPROVED"?t("testTemplate"):t("notAvailable")})]})},`${q.name}-${q.language}-${D}`)})})]}),w&&o.jsx(DL,{template:w,onClose:()=>_(null)})]})}function pt(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let a=0,r;a<e.length;a++)(r=pt(e[a]))!==""&&(t+=(t&&" ")+r);else for(let a in e)e[a]&&(t+=(t&&" ")+a);return t}var OL={value:()=>{}};function Ru(){for(var e=0,t=arguments.length,a={},r;e<t;++e){if(!(r=arguments[e]+"")||r in a||/[\s.]/.test(r))throw new Error("illegal type: "+r);a[r]=[]}return new Gc(a)}function Gc(e){this._=e}function $L(e,t){return e.trim().split(/^|\s+/).map(function(a){var r="",l=a.indexOf(".");if(l>=0&&(r=a.slice(l+1),a=a.slice(0,l)),a&&!t.hasOwnProperty(a))throw new Error("unknown type: "+a);return{type:a,name:r}})}Gc.prototype=Ru.prototype={constructor:Gc,on:function(e,t){var a=this._,r=$L(e+"",a),l,u=-1,d=r.length;if(arguments.length<2){for(;++u<d;)if((l=(e=r[u]).type)&&(l=zL(a[l],e.name)))return l;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++u<d;)if(l=(e=r[u]).type)a[l]=Hy(a[l],e.name,t);else if(t==null)for(l in a)a[l]=Hy(a[l],e.name,null);return this},copy:function(){var e={},t=this._;for(var a in t)e[a]=t[a].slice();return new Gc(e)},call:function(e,t){if((l=arguments.length-2)>0)for(var a=new Array(l),r=0,l,u;r<l;++r)a[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(u=this._[e],r=0,l=u.length;r<l;++r)u[r].value.apply(t,a)},apply:function(e,t,a){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],l=0,u=r.length;l<u;++l)r[l].value.apply(t,a)}};function zL(e,t){for(var a=0,r=e.length,l;a<r;++a)if((l=e[a]).name===t)return l.value}function Hy(e,t,a){for(var r=0,l=e.length;r<l;++r)if(e[r].name===t){e[r]=OL,e=e.slice(0,r).concat(e.slice(r+1));break}return a!=null&&e.push({name:t,value:a}),e}var Wh="http://www.w3.org/1999/xhtml";const Uy={svg:"http://www.w3.org/2000/svg",xhtml:Wh,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Ou(e){var t=e+="",a=t.indexOf(":");return a>=0&&(t=e.slice(0,a))!=="xmlns"&&(e=e.slice(a+1)),Uy.hasOwnProperty(t)?{space:Uy[t],local:e}:e}function LL(e){return function(){var t=this.ownerDocument,a=this.namespaceURI;return a===Wh&&t.documentElement.namespaceURI===Wh?t.createElement(e):t.createElementNS(a,e)}}function BL(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function o1(e){var t=Ou(e);return(t.local?BL:LL)(t)}function PL(){}function Op(e){return e==null?PL:function(){return this.querySelector(e)}}function HL(e){typeof e!="function"&&(e=Op(e));for(var t=this._groups,a=t.length,r=new Array(a),l=0;l<a;++l)for(var u=t[l],d=u.length,h=r[l]=new Array(d),m,p,y=0;y<d;++y)(m=u[y])&&(p=e.call(m,m.__data__,y,u))&&("__data__"in m&&(p.__data__=m.__data__),h[y]=p);return new an(r,this._parents)}function UL(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function qL(){return[]}function i1(e){return e==null?qL:function(){return this.querySelectorAll(e)}}function IL(e){return function(){return UL(e.apply(this,arguments))}}function VL(e){typeof e=="function"?e=IL(e):e=i1(e);for(var t=this._groups,a=t.length,r=[],l=[],u=0;u<a;++u)for(var d=t[u],h=d.length,m,p=0;p<h;++p)(m=d[p])&&(r.push(e.call(m,m.__data__,p,d)),l.push(m));return new an(r,l)}function l1(e){return function(){return this.matches(e)}}function c1(e){return function(t){return t.matches(e)}}var FL=Array.prototype.find;function YL(e){return function(){return FL.call(this.children,e)}}function XL(){return this.firstElementChild}function GL(e){return this.select(e==null?XL:YL(typeof e=="function"?e:c1(e)))}var KL=Array.prototype.filter;function QL(){return Array.from(this.children)}function WL(e){return function(){return KL.call(this.children,e)}}function ZL(e){return this.selectAll(e==null?QL:WL(typeof e=="function"?e:c1(e)))}function JL(e){typeof e!="function"&&(e=l1(e));for(var t=this._groups,a=t.length,r=new Array(a),l=0;l<a;++l)for(var u=t[l],d=u.length,h=r[l]=[],m,p=0;p<d;++p)(m=u[p])&&e.call(m,m.__data__,p,u)&&h.push(m);return new an(r,this._parents)}function u1(e){return new Array(e.length)}function e9(){return new an(this._enter||this._groups.map(u1),this._parents)}function uu(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}uu.prototype={constructor:uu,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function t9(e){return function(){return e}}function n9(e,t,a,r,l,u){for(var d=0,h,m=t.length,p=u.length;d<p;++d)(h=t[d])?(h.__data__=u[d],r[d]=h):a[d]=new uu(e,u[d]);for(;d<m;++d)(h=t[d])&&(l[d]=h)}function s9(e,t,a,r,l,u,d){var h,m,p=new Map,y=t.length,x=u.length,b=new Array(y),v;for(h=0;h<y;++h)(m=t[h])&&(b[h]=v=d.call(m,m.__data__,h,t)+"",p.has(v)?l[h]=m:p.set(v,m));for(h=0;h<x;++h)v=d.call(e,u[h],h,u)+"",(m=p.get(v))?(r[h]=m,m.__data__=u[h],p.delete(v)):a[h]=new uu(e,u[h]);for(h=0;h<y;++h)(m=t[h])&&p.get(b[h])===m&&(l[h]=m)}function a9(e){return e.__data__}function r9(e,t){if(!arguments.length)return Array.from(this,a9);var a=t?s9:n9,r=this._parents,l=this._groups;typeof e!="function"&&(e=t9(e));for(var u=l.length,d=new Array(u),h=new Array(u),m=new Array(u),p=0;p<u;++p){var y=r[p],x=l[p],b=x.length,v=o9(e.call(y,y&&y.__data__,p,r)),w=v.length,_=h[p]=new Array(w),E=d[p]=new Array(w),T=m[p]=new Array(b);a(y,x,_,E,T,v,t);for(var A=0,C=0,k,L;A<w;++A)if(k=_[A]){for(A>=C&&(C=A+1);!(L=E[C])&&++C<w;);k._next=L||null}}return d=new an(d,r),d._enter=h,d._exit=m,d}function o9(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function i9(){return new an(this._exit||this._groups.map(u1),this._parents)}function l9(e,t,a){var r=this.enter(),l=this,u=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(l=t(l),l&&(l=l.selection())),a==null?u.remove():a(u),r&&l?r.merge(l).order():l}function c9(e){for(var t=e.selection?e.selection():e,a=this._groups,r=t._groups,l=a.length,u=r.length,d=Math.min(l,u),h=new Array(l),m=0;m<d;++m)for(var p=a[m],y=r[m],x=p.length,b=h[m]=new Array(x),v,w=0;w<x;++w)(v=p[w]||y[w])&&(b[w]=v);for(;m<l;++m)h[m]=a[m];return new an(h,this._parents)}function u9(){for(var e=this._groups,t=-1,a=e.length;++t<a;)for(var r=e[t],l=r.length-1,u=r[l],d;--l>=0;)(d=r[l])&&(u&&d.compareDocumentPosition(u)^4&&u.parentNode.insertBefore(d,u),u=d);return this}function d9(e){e||(e=f9);function t(x,b){return x&&b?e(x.__data__,b.__data__):!x-!b}for(var a=this._groups,r=a.length,l=new Array(r),u=0;u<r;++u){for(var d=a[u],h=d.length,m=l[u]=new Array(h),p,y=0;y<h;++y)(p=d[y])&&(m[y]=p);m.sort(t)}return new an(l,this._parents).order()}function f9(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function h9(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function p9(){return Array.from(this)}function m9(){for(var e=this._groups,t=0,a=e.length;t<a;++t)for(var r=e[t],l=0,u=r.length;l<u;++l){var d=r[l];if(d)return d}return null}function g9(){let e=0;for(const t of this)++e;return e}function x9(){return!this.node()}function y9(e){for(var t=this._groups,a=0,r=t.length;a<r;++a)for(var l=t[a],u=0,d=l.length,h;u<d;++u)(h=l[u])&&e.call(h,h.__data__,u,l);return this}function b9(e){return function(){this.removeAttribute(e)}}function v9(e){return function(){this.removeAttributeNS(e.space,e.local)}}function w9(e,t){return function(){this.setAttribute(e,t)}}function N9(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function j9(e,t){return function(){var a=t.apply(this,arguments);a==null?this.removeAttribute(e):this.setAttribute(e,a)}}function S9(e,t){return function(){var a=t.apply(this,arguments);a==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,a)}}function C9(e,t){var a=Ou(e);if(arguments.length<2){var r=this.node();return a.local?r.getAttributeNS(a.space,a.local):r.getAttribute(a)}return this.each((t==null?a.local?v9:b9:typeof t=="function"?a.local?S9:j9:a.local?N9:w9)(a,t))}function d1(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function E9(e){return function(){this.style.removeProperty(e)}}function _9(e,t,a){return function(){this.style.setProperty(e,t,a)}}function T9(e,t,a){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,a)}}function A9(e,t,a){return arguments.length>1?this.each((t==null?E9:typeof t=="function"?T9:_9)(e,t,a??"")):eo(this.node(),e)}function eo(e,t){return e.style.getPropertyValue(t)||d1(e).getComputedStyle(e,null).getPropertyValue(t)}function k9(e){return function(){delete this[e]}}function M9(e,t){return function(){this[e]=t}}function D9(e,t){return function(){var a=t.apply(this,arguments);a==null?delete this[e]:this[e]=a}}function R9(e,t){return arguments.length>1?this.each((t==null?k9:typeof t=="function"?D9:M9)(e,t)):this.node()[e]}function f1(e){return e.trim().split(/^|\s+/)}function $p(e){return e.classList||new h1(e)}function h1(e){this._node=e,this._names=f1(e.getAttribute("class")||"")}h1.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function p1(e,t){for(var a=$p(e),r=-1,l=t.length;++r<l;)a.add(t[r])}function m1(e,t){for(var a=$p(e),r=-1,l=t.length;++r<l;)a.remove(t[r])}function O9(e){return function(){p1(this,e)}}function $9(e){return function(){m1(this,e)}}function z9(e,t){return function(){(t.apply(this,arguments)?p1:m1)(this,e)}}function L9(e,t){var a=f1(e+"");if(arguments.length<2){for(var r=$p(this.node()),l=-1,u=a.length;++l<u;)if(!r.contains(a[l]))return!1;return!0}return this.each((typeof t=="function"?z9:t?O9:$9)(a,t))}function B9(){this.textContent=""}function P9(e){return function(){this.textContent=e}}function H9(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function U9(e){return arguments.length?this.each(e==null?B9:(typeof e=="function"?H9:P9)(e)):this.node().textContent}function q9(){this.innerHTML=""}function I9(e){return function(){this.innerHTML=e}}function V9(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function F9(e){return arguments.length?this.each(e==null?q9:(typeof e=="function"?V9:I9)(e)):this.node().innerHTML}function Y9(){this.nextSibling&&this.parentNode.appendChild(this)}function X9(){return this.each(Y9)}function G9(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function K9(){return this.each(G9)}function Q9(e){var t=typeof e=="function"?e:o1(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function W9(){return null}function Z9(e,t){var a=typeof e=="function"?e:o1(e),r=t==null?W9:typeof t=="function"?t:Op(t);return this.select(function(){return this.insertBefore(a.apply(this,arguments),r.apply(this,arguments)||null)})}function J9(){var e=this.parentNode;e&&e.removeChild(this)}function eB(){return this.each(J9)}function tB(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function nB(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function sB(e){return this.select(e?nB:tB)}function aB(e){return arguments.length?this.property("__data__",e):this.node().__data__}function rB(e){return function(t){e.call(this,t,this.__data__)}}function oB(e){return e.trim().split(/^|\s+/).map(function(t){var a="",r=t.indexOf(".");return r>=0&&(a=t.slice(r+1),t=t.slice(0,r)),{type:t,name:a}})}function iB(e){return function(){var t=this.__on;if(t){for(var a=0,r=-1,l=t.length,u;a<l;++a)u=t[a],(!e.type||u.type===e.type)&&u.name===e.name?this.removeEventListener(u.type,u.listener,u.options):t[++r]=u;++r?t.length=r:delete this.__on}}}function lB(e,t,a){return function(){var r=this.__on,l,u=rB(t);if(r){for(var d=0,h=r.length;d<h;++d)if((l=r[d]).type===e.type&&l.name===e.name){this.removeEventListener(l.type,l.listener,l.options),this.addEventListener(l.type,l.listener=u,l.options=a),l.value=t;return}}this.addEventListener(e.type,u,a),l={type:e.type,name:e.name,value:t,listener:u,options:a},r?r.push(l):this.__on=[l]}}function cB(e,t,a){var r=oB(e+""),l,u=r.length,d;if(arguments.length<2){var h=this.node().__on;if(h){for(var m=0,p=h.length,y;m<p;++m)for(l=0,y=h[m];l<u;++l)if((d=r[l]).type===y.type&&d.name===y.name)return y.value}return}for(h=t?lB:iB,l=0;l<u;++l)this.each(h(r[l],t,a));return this}function g1(e,t,a){var r=d1(e),l=r.CustomEvent;typeof l=="function"?l=new l(t,a):(l=r.document.createEvent("Event"),a?(l.initEvent(t,a.bubbles,a.cancelable),l.detail=a.detail):l.initEvent(t,!1,!1)),e.dispatchEvent(l)}function uB(e,t){return function(){return g1(this,e,t)}}function dB(e,t){return function(){return g1(this,e,t.apply(this,arguments))}}function fB(e,t){return this.each((typeof t=="function"?dB:uB)(e,t))}function*hB(){for(var e=this._groups,t=0,a=e.length;t<a;++t)for(var r=e[t],l=0,u=r.length,d;l<u;++l)(d=r[l])&&(yield d)}var x1=[null];function an(e,t){this._groups=e,this._parents=t}function Xi(){return new an([[document.documentElement]],x1)}function pB(){return this}an.prototype=Xi.prototype={constructor:an,select:HL,selectAll:VL,selectChild:GL,selectChildren:ZL,filter:JL,data:r9,enter:e9,exit:i9,join:l9,merge:c9,selection:pB,order:u9,sort:d9,call:h9,nodes:p9,node:m9,size:g9,empty:x9,each:y9,attr:C9,style:A9,property:R9,classed:L9,text:U9,html:F9,raise:X9,lower:K9,append:Q9,insert:Z9,remove:eB,clone:sB,datum:aB,on:cB,dispatch:fB,[Symbol.iterator]:hB};function nn(e){return typeof e=="string"?new an([[document.querySelector(e)]],[document.documentElement]):new an([[e]],x1)}function mB(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Cn(e,t){if(e=mB(e),t===void 0&&(t=e.currentTarget),t){var a=t.ownerSVGElement||t;if(a.createSVGPoint){var r=a.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var l=t.getBoundingClientRect();return[e.clientX-l.left-t.clientLeft,e.clientY-l.top-t.clientTop]}}return[e.pageX,e.pageY]}const gB={passive:!1},Mi={capture:!0,passive:!1};function jh(e){e.stopImmediatePropagation()}function Gr(e){e.preventDefault(),e.stopImmediatePropagation()}function y1(e){var t=e.document.documentElement,a=nn(e).on("dragstart.drag",Gr,Mi);"onselectstart"in t?a.on("selectstart.drag",Gr,Mi):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function b1(e,t){var a=e.document.documentElement,r=nn(e).on("dragstart.drag",null);t&&(r.on("click.drag",Gr,Mi),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in a?r.on("selectstart.drag",null):(a.style.MozUserSelect=a.__noselect,delete a.__noselect)}const Ac=e=>()=>e;function Zh(e,{sourceEvent:t,subject:a,target:r,identifier:l,active:u,x:d,y:h,dx:m,dy:p,dispatch:y}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:a,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:l,enumerable:!0,configurable:!0},active:{value:u,enumerable:!0,configurable:!0},x:{value:d,enumerable:!0,configurable:!0},y:{value:h,enumerable:!0,configurable:!0},dx:{value:m,enumerable:!0,configurable:!0},dy:{value:p,enumerable:!0,configurable:!0},_:{value:y}})}Zh.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function xB(e){return!e.ctrlKey&&!e.button}function yB(){return this.parentNode}function bB(e,t){return t??{x:e.x,y:e.y}}function vB(){return navigator.maxTouchPoints||"ontouchstart"in this}function v1(){var e=xB,t=yB,a=bB,r=vB,l={},u=Ru("start","drag","end"),d=0,h,m,p,y,x=0;function b(k){k.on("mousedown.drag",v).filter(r).on("touchstart.drag",E).on("touchmove.drag",T,gB).on("touchend.drag touchcancel.drag",A).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function v(k,L){if(!(y||!e.call(this,k,L))){var j=C(this,t.call(this,k,L),k,L,"mouse");j&&(nn(k.view).on("mousemove.drag",w,Mi).on("mouseup.drag",_,Mi),y1(k.view),jh(k),p=!1,h=k.clientX,m=k.clientY,j("start",k))}}function w(k){if(Gr(k),!p){var L=k.clientX-h,j=k.clientY-m;p=L*L+j*j>x}l.mouse("drag",k)}function _(k){nn(k.view).on("mousemove.drag mouseup.drag",null),b1(k.view,p),Gr(k),l.mouse("end",k)}function E(k,L){if(e.call(this,k,L)){var j=k.changedTouches,R=t.call(this,k,L),$=j.length,H,F;for(H=0;H<$;++H)(F=C(this,R,k,L,j[H].identifier,j[H]))&&(jh(k),F("start",k,j[H]))}}function T(k){var L=k.changedTouches,j=L.length,R,$;for(R=0;R<j;++R)($=l[L[R].identifier])&&(Gr(k),$("drag",k,L[R]))}function A(k){var L=k.changedTouches,j=L.length,R,$;for(y&&clearTimeout(y),y=setTimeout(function(){y=null},500),R=0;R<j;++R)($=l[L[R].identifier])&&(jh(k),$("end",k,L[R]))}function C(k,L,j,R,$,H){var F=u.copy(),P=Cn(H||j,L),K,W,B;if((B=a.call(k,new Zh("beforestart",{sourceEvent:j,target:b,identifier:$,active:d,x:P[0],y:P[1],dx:0,dy:0,dispatch:F}),R))!=null)return K=B.x-P[0]||0,W=B.y-P[1]||0,function G(O,U,z){var I=P,q;switch(O){case"start":l[$]=G,q=d++;break;case"end":delete l[$],--d;case"drag":P=Cn(z||U,L),q=d;break}F.call(O,k,new Zh(O,{sourceEvent:U,subject:B,target:b,identifier:$,active:q,x:P[0]+K,y:P[1]+W,dx:P[0]-I[0],dy:P[1]-I[1],dispatch:F}),R)}}return b.filter=function(k){return arguments.length?(e=typeof k=="function"?k:Ac(!!k),b):e},b.container=function(k){return arguments.length?(t=typeof k=="function"?k:Ac(k),b):t},b.subject=function(k){return arguments.length?(a=typeof k=="function"?k:Ac(k),b):a},b.touchable=function(k){return arguments.length?(r=typeof k=="function"?k:Ac(!!k),b):r},b.on=function(){var k=u.on.apply(u,arguments);return k===u?b:k},b.clickDistance=function(k){return arguments.length?(x=(k=+k)*k,b):Math.sqrt(x)},b}function zp(e,t,a){e.prototype=t.prototype=a,a.constructor=e}function w1(e,t){var a=Object.create(e.prototype);for(var r in t)a[r]=t[r];return a}function Gi(){}var Di=.7,du=1/Di,Kr="\\s*([+-]?\\d+)\\s*",Ri="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",In="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",wB=/^#([0-9a-f]{3,8})$/,NB=new RegExp(`^rgb\\(${Kr},${Kr},${Kr}\\)$`),jB=new RegExp(`^rgb\\(${In},${In},${In}\\)$`),SB=new RegExp(`^rgba\\(${Kr},${Kr},${Kr},${Ri}\\)$`),CB=new RegExp(`^rgba\\(${In},${In},${In},${Ri}\\)$`),EB=new RegExp(`^hsl\\(${Ri},${In},${In}\\)$`),_B=new RegExp(`^hsla\\(${Ri},${In},${In},${Ri}\\)$`),qy={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};zp(Gi,Va,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Iy,formatHex:Iy,formatHex8:TB,formatHsl:AB,formatRgb:Vy,toString:Vy});function Iy(){return this.rgb().formatHex()}function TB(){return this.rgb().formatHex8()}function AB(){return N1(this).formatHsl()}function Vy(){return this.rgb().formatRgb()}function Va(e){var t,a;return e=(e+"").trim().toLowerCase(),(t=wB.exec(e))?(a=t[1].length,t=parseInt(t[1],16),a===6?Fy(t):a===3?new Yt(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):a===8?kc(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):a===4?kc(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=NB.exec(e))?new Yt(t[1],t[2],t[3],1):(t=jB.exec(e))?new Yt(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=SB.exec(e))?kc(t[1],t[2],t[3],t[4]):(t=CB.exec(e))?kc(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=EB.exec(e))?Gy(t[1],t[2]/100,t[3]/100,1):(t=_B.exec(e))?Gy(t[1],t[2]/100,t[3]/100,t[4]):qy.hasOwnProperty(e)?Fy(qy[e]):e==="transparent"?new Yt(NaN,NaN,NaN,0):null}function Fy(e){return new Yt(e>>16&255,e>>8&255,e&255,1)}function kc(e,t,a,r){return r<=0&&(e=t=a=NaN),new Yt(e,t,a,r)}function kB(e){return e instanceof Gi||(e=Va(e)),e?(e=e.rgb(),new Yt(e.r,e.g,e.b,e.opacity)):new Yt}function Jh(e,t,a,r){return arguments.length===1?kB(e):new Yt(e,t,a,r??1)}function Yt(e,t,a,r){this.r=+e,this.g=+t,this.b=+a,this.opacity=+r}zp(Yt,Jh,w1(Gi,{brighter(e){return e=e==null?du:Math.pow(du,e),new Yt(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Di:Math.pow(Di,e),new Yt(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Yt(Ua(this.r),Ua(this.g),Ua(this.b),fu(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Yy,formatHex:Yy,formatHex8:MB,formatRgb:Xy,toString:Xy}));function Yy(){return`#${Ha(this.r)}${Ha(this.g)}${Ha(this.b)}`}function MB(){return`#${Ha(this.r)}${Ha(this.g)}${Ha(this.b)}${Ha((isNaN(this.opacity)?1:this.opacity)*255)}`}function Xy(){const e=fu(this.opacity);return`${e===1?"rgb(":"rgba("}${Ua(this.r)}, ${Ua(this.g)}, ${Ua(this.b)}${e===1?")":`, ${e})`}`}function fu(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Ua(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Ha(e){return e=Ua(e),(e<16?"0":"")+e.toString(16)}function Gy(e,t,a,r){return r<=0?e=t=a=NaN:a<=0||a>=1?e=t=NaN:t<=0&&(e=NaN),new En(e,t,a,r)}function N1(e){if(e instanceof En)return new En(e.h,e.s,e.l,e.opacity);if(e instanceof Gi||(e=Va(e)),!e)return new En;if(e instanceof En)return e;e=e.rgb();var t=e.r/255,a=e.g/255,r=e.b/255,l=Math.min(t,a,r),u=Math.max(t,a,r),d=NaN,h=u-l,m=(u+l)/2;return h?(t===u?d=(a-r)/h+(a<r)*6:a===u?d=(r-t)/h+2:d=(t-a)/h+4,h/=m<.5?u+l:2-u-l,d*=60):h=m>0&&m<1?0:d,new En(d,h,m,e.opacity)}function DB(e,t,a,r){return arguments.length===1?N1(e):new En(e,t,a,r??1)}function En(e,t,a,r){this.h=+e,this.s=+t,this.l=+a,this.opacity=+r}zp(En,DB,w1(Gi,{brighter(e){return e=e==null?du:Math.pow(du,e),new En(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Di:Math.pow(Di,e),new En(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,a=this.l,r=a+(a<.5?a:1-a)*t,l=2*a-r;return new Yt(Sh(e>=240?e-240:e+120,l,r),Sh(e,l,r),Sh(e<120?e+240:e-120,l,r),this.opacity)},clamp(){return new En(Ky(this.h),Mc(this.s),Mc(this.l),fu(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=fu(this.opacity);return`${e===1?"hsl(":"hsla("}${Ky(this.h)}, ${Mc(this.s)*100}%, ${Mc(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Ky(e){return e=(e||0)%360,e<0?e+360:e}function Mc(e){return Math.max(0,Math.min(1,e||0))}function Sh(e,t,a){return(e<60?t+(a-t)*e/60:e<180?a:e<240?t+(a-t)*(240-e)/60:t)*255}const Lp=e=>()=>e;function RB(e,t){return function(a){return e+a*t}}function OB(e,t,a){return e=Math.pow(e,a),t=Math.pow(t,a)-e,a=1/a,function(r){return Math.pow(e+r*t,a)}}function $B(e){return(e=+e)==1?j1:function(t,a){return a-t?OB(t,a,e):Lp(isNaN(t)?a:t)}}function j1(e,t){var a=t-e;return a?RB(e,a):Lp(isNaN(e)?t:e)}const hu=(function e(t){var a=$B(t);function r(l,u){var d=a((l=Jh(l)).r,(u=Jh(u)).r),h=a(l.g,u.g),m=a(l.b,u.b),p=j1(l.opacity,u.opacity);return function(y){return l.r=d(y),l.g=h(y),l.b=m(y),l.opacity=p(y),l+""}}return r.gamma=e,r})(1);function zB(e,t){t||(t=[]);var a=e?Math.min(t.length,e.length):0,r=t.slice(),l;return function(u){for(l=0;l<a;++l)r[l]=e[l]*(1-u)+t[l]*u;return r}}function LB(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function BB(e,t){var a=t?t.length:0,r=e?Math.min(a,e.length):0,l=new Array(r),u=new Array(a),d;for(d=0;d<r;++d)l[d]=Ei(e[d],t[d]);for(;d<a;++d)u[d]=t[d];return function(h){for(d=0;d<r;++d)u[d]=l[d](h);return u}}function PB(e,t){var a=new Date;return e=+e,t=+t,function(r){return a.setTime(e*(1-r)+t*r),a}}function Ln(e,t){return e=+e,t=+t,function(a){return e*(1-a)+t*a}}function HB(e,t){var a={},r={},l;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(l in t)l in e?a[l]=Ei(e[l],t[l]):r[l]=t[l];return function(u){for(l in a)r[l]=a[l](u);return r}}var ep=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ch=new RegExp(ep.source,"g");function UB(e){return function(){return e}}function qB(e){return function(t){return e(t)+""}}function S1(e,t){var a=ep.lastIndex=Ch.lastIndex=0,r,l,u,d=-1,h=[],m=[];for(e=e+"",t=t+"";(r=ep.exec(e))&&(l=Ch.exec(t));)(u=l.index)>a&&(u=t.slice(a,u),h[d]?h[d]+=u:h[++d]=u),(r=r[0])===(l=l[0])?h[d]?h[d]+=l:h[++d]=l:(h[++d]=null,m.push({i:d,x:Ln(r,l)})),a=Ch.lastIndex;return a<t.length&&(u=t.slice(a),h[d]?h[d]+=u:h[++d]=u),h.length<2?m[0]?qB(m[0].x):UB(t):(t=m.length,function(p){for(var y=0,x;y<t;++y)h[(x=m[y]).i]=x.x(p);return h.join("")})}function Ei(e,t){var a=typeof t,r;return t==null||a==="boolean"?Lp(t):(a==="number"?Ln:a==="string"?(r=Va(t))?(t=r,hu):S1:t instanceof Va?hu:t instanceof Date?PB:LB(t)?zB:Array.isArray(t)?BB:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?HB:Ln)(e,t)}var Qy=180/Math.PI,tp={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function C1(e,t,a,r,l,u){var d,h,m;return(d=Math.sqrt(e*e+t*t))&&(e/=d,t/=d),(m=e*a+t*r)&&(a-=e*m,r-=t*m),(h=Math.sqrt(a*a+r*r))&&(a/=h,r/=h,m/=h),e*r<t*a&&(e=-e,t=-t,m=-m,d=-d),{translateX:l,translateY:u,rotate:Math.atan2(t,e)*Qy,skewX:Math.atan(m)*Qy,scaleX:d,scaleY:h}}var Dc;function IB(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?tp:C1(t.a,t.b,t.c,t.d,t.e,t.f)}function VB(e){return e==null||(Dc||(Dc=document.createElementNS("http://www.w3.org/2000/svg","g")),Dc.setAttribute("transform",e),!(e=Dc.transform.baseVal.consolidate()))?tp:(e=e.matrix,C1(e.a,e.b,e.c,e.d,e.e,e.f))}function E1(e,t,a,r){function l(p){return p.length?p.pop()+" ":""}function u(p,y,x,b,v,w){if(p!==x||y!==b){var _=v.push("translate(",null,t,null,a);w.push({i:_-4,x:Ln(p,x)},{i:_-2,x:Ln(y,b)})}else(x||b)&&v.push("translate("+x+t+b+a)}function d(p,y,x,b){p!==y?(p-y>180?y+=360:y-p>180&&(p+=360),b.push({i:x.push(l(x)+"rotate(",null,r)-2,x:Ln(p,y)})):y&&x.push(l(x)+"rotate("+y+r)}function h(p,y,x,b){p!==y?b.push({i:x.push(l(x)+"skewX(",null,r)-2,x:Ln(p,y)}):y&&x.push(l(x)+"skewX("+y+r)}function m(p,y,x,b,v,w){if(p!==x||y!==b){var _=v.push(l(v)+"scale(",null,",",null,")");w.push({i:_-4,x:Ln(p,x)},{i:_-2,x:Ln(y,b)})}else(x!==1||b!==1)&&v.push(l(v)+"scale("+x+","+b+")")}return function(p,y){var x=[],b=[];return p=e(p),y=e(y),u(p.translateX,p.translateY,y.translateX,y.translateY,x,b),d(p.rotate,y.rotate,x,b),h(p.skewX,y.skewX,x,b),m(p.scaleX,p.scaleY,y.scaleX,y.scaleY,x,b),p=y=null,function(v){for(var w=-1,_=b.length,E;++w<_;)x[(E=b[w]).i]=E.x(v);return x.join("")}}}var FB=E1(IB,"px, ","px)","deg)"),YB=E1(VB,", ",")",")"),XB=1e-12;function Wy(e){return((e=Math.exp(e))+1/e)/2}function GB(e){return((e=Math.exp(e))-1/e)/2}function KB(e){return((e=Math.exp(2*e))-1)/(e+1)}const Kc=(function e(t,a,r){function l(u,d){var h=u[0],m=u[1],p=u[2],y=d[0],x=d[1],b=d[2],v=y-h,w=x-m,_=v*v+w*w,E,T;if(_<XB)T=Math.log(b/p)/t,E=function(R){return[h+R*v,m+R*w,p*Math.exp(t*R*T)]};else{var A=Math.sqrt(_),C=(b*b-p*p+r*_)/(2*p*a*A),k=(b*b-p*p-r*_)/(2*b*a*A),L=Math.log(Math.sqrt(C*C+1)-C),j=Math.log(Math.sqrt(k*k+1)-k);T=(j-L)/t,E=function(R){var $=R*T,H=Wy(L),F=p/(a*A)*(H*KB(t*$+L)-GB(L));return[h+F*v,m+F*w,p*H/Wy(t*$+L)]}}return E.duration=T*1e3*t/Math.SQRT2,E}return l.rho=function(u){var d=Math.max(.001,+u),h=d*d,m=h*h;return e(d,h,m)},l})(Math.SQRT2,2,4);var to=0,Ni=0,xi=0,_1=1e3,pu,ji,mu=0,Fa=0,$u=0,Oi=typeof performance=="object"&&performance.now?performance:Date,T1=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Bp(){return Fa||(T1(QB),Fa=Oi.now()+$u)}function QB(){Fa=0}function gu(){this._call=this._time=this._next=null}gu.prototype=A1.prototype={constructor:gu,restart:function(e,t,a){if(typeof e!="function")throw new TypeError("callback is not a function");a=(a==null?Bp():+a)+(t==null?0:+t),!this._next&&ji!==this&&(ji?ji._next=this:pu=this,ji=this),this._call=e,this._time=a,np()},stop:function(){this._call&&(this._call=null,this._time=1/0,np())}};function A1(e,t,a){var r=new gu;return r.restart(e,t,a),r}function WB(){Bp(),++to;for(var e=pu,t;e;)(t=Fa-e._time)>=0&&e._call.call(void 0,t),e=e._next;--to}function Zy(){Fa=(mu=Oi.now())+$u,to=Ni=0;try{WB()}finally{to=0,JB(),Fa=0}}function ZB(){var e=Oi.now(),t=e-mu;t>_1&&($u-=t,mu=e)}function JB(){for(var e,t=pu,a,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(a=t._next,t._next=null,t=e?e._next=a:pu=a);ji=e,np(r)}function np(e){if(!to){Ni&&(Ni=clearTimeout(Ni));var t=e-Fa;t>24?(e<1/0&&(Ni=setTimeout(Zy,e-Oi.now()-$u)),xi&&(xi=clearInterval(xi))):(xi||(mu=Oi.now(),xi=setInterval(ZB,_1)),to=1,T1(Zy))}}function Jy(e,t,a){var r=new gu;return t=t==null?0:+t,r.restart(l=>{r.stop(),e(l+t)},t,a),r}var eP=Ru("start","end","cancel","interrupt"),tP=[],k1=0,eb=1,sp=2,Qc=3,tb=4,ap=5,Wc=6;function zu(e,t,a,r,l,u){var d=e.__transition;if(!d)e.__transition={};else if(a in d)return;nP(e,a,{name:t,index:r,group:l,on:eP,tween:tP,time:u.time,delay:u.delay,duration:u.duration,ease:u.ease,timer:null,state:k1})}function Pp(e,t){var a=An(e,t);if(a.state>k1)throw new Error("too late; already scheduled");return a}function Xn(e,t){var a=An(e,t);if(a.state>Qc)throw new Error("too late; already running");return a}function An(e,t){var a=e.__transition;if(!a||!(a=a[t]))throw new Error("transition not found");return a}function nP(e,t,a){var r=e.__transition,l;r[t]=a,a.timer=A1(u,0,a.time);function u(p){a.state=eb,a.timer.restart(d,a.delay,a.time),a.delay<=p&&d(p-a.delay)}function d(p){var y,x,b,v;if(a.state!==eb)return m();for(y in r)if(v=r[y],v.name===a.name){if(v.state===Qc)return Jy(d);v.state===tb?(v.state=Wc,v.timer.stop(),v.on.call("interrupt",e,e.__data__,v.index,v.group),delete r[y]):+y<t&&(v.state=Wc,v.timer.stop(),v.on.call("cancel",e,e.__data__,v.index,v.group),delete r[y])}if(Jy(function(){a.state===Qc&&(a.state=tb,a.timer.restart(h,a.delay,a.time),h(p))}),a.state=sp,a.on.call("start",e,e.__data__,a.index,a.group),a.state===sp){for(a.state=Qc,l=new Array(b=a.tween.length),y=0,x=-1;y<b;++y)(v=a.tween[y].value.call(e,e.__data__,a.index,a.group))&&(l[++x]=v);l.length=x+1}}function h(p){for(var y=p<a.duration?a.ease.call(null,p/a.duration):(a.timer.restart(m),a.state=ap,1),x=-1,b=l.length;++x<b;)l[x].call(e,y);a.state===ap&&(a.on.call("end",e,e.__data__,a.index,a.group),m())}function m(){a.state=Wc,a.timer.stop(),delete r[t];for(var p in r)return;delete e.__transition}}function Zc(e,t){var a=e.__transition,r,l,u=!0,d;if(a){t=t==null?null:t+"";for(d in a){if((r=a[d]).name!==t){u=!1;continue}l=r.state>sp&&r.state<ap,r.state=Wc,r.timer.stop(),r.on.call(l?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete a[d]}u&&delete e.__transition}}function sP(e){return this.each(function(){Zc(this,e)})}function aP(e,t){var a,r;return function(){var l=Xn(this,e),u=l.tween;if(u!==a){r=a=u;for(var d=0,h=r.length;d<h;++d)if(r[d].name===t){r=r.slice(),r.splice(d,1);break}}l.tween=r}}function rP(e,t,a){var r,l;if(typeof a!="function")throw new Error;return function(){var u=Xn(this,e),d=u.tween;if(d!==r){l=(r=d).slice();for(var h={name:t,value:a},m=0,p=l.length;m<p;++m)if(l[m].name===t){l[m]=h;break}m===p&&l.push(h)}u.tween=l}}function oP(e,t){var a=this._id;if(e+="",arguments.length<2){for(var r=An(this.node(),a).tween,l=0,u=r.length,d;l<u;++l)if((d=r[l]).name===e)return d.value;return null}return this.each((t==null?aP:rP)(a,e,t))}function Hp(e,t,a){var r=e._id;return e.each(function(){var l=Xn(this,r);(l.value||(l.value={}))[t]=a.apply(this,arguments)}),function(l){return An(l,r).value[t]}}function M1(e,t){var a;return(typeof t=="number"?Ln:t instanceof Va?hu:(a=Va(t))?(t=a,hu):S1)(e,t)}function iP(e){return function(){this.removeAttribute(e)}}function lP(e){return function(){this.removeAttributeNS(e.space,e.local)}}function cP(e,t,a){var r,l=a+"",u;return function(){var d=this.getAttribute(e);return d===l?null:d===r?u:u=t(r=d,a)}}function uP(e,t,a){var r,l=a+"",u;return function(){var d=this.getAttributeNS(e.space,e.local);return d===l?null:d===r?u:u=t(r=d,a)}}function dP(e,t,a){var r,l,u;return function(){var d,h=a(this),m;return h==null?void this.removeAttribute(e):(d=this.getAttribute(e),m=h+"",d===m?null:d===r&&m===l?u:(l=m,u=t(r=d,h)))}}function fP(e,t,a){var r,l,u;return function(){var d,h=a(this),m;return h==null?void this.removeAttributeNS(e.space,e.local):(d=this.getAttributeNS(e.space,e.local),m=h+"",d===m?null:d===r&&m===l?u:(l=m,u=t(r=d,h)))}}function hP(e,t){var a=Ou(e),r=a==="transform"?YB:M1;return this.attrTween(e,typeof t=="function"?(a.local?fP:dP)(a,r,Hp(this,"attr."+e,t)):t==null?(a.local?lP:iP)(a):(a.local?uP:cP)(a,r,t))}function pP(e,t){return function(a){this.setAttribute(e,t.call(this,a))}}function mP(e,t){return function(a){this.setAttributeNS(e.space,e.local,t.call(this,a))}}function gP(e,t){var a,r;function l(){var u=t.apply(this,arguments);return u!==r&&(a=(r=u)&&mP(e,u)),a}return l._value=t,l}function xP(e,t){var a,r;function l(){var u=t.apply(this,arguments);return u!==r&&(a=(r=u)&&pP(e,u)),a}return l._value=t,l}function yP(e,t){var a="attr."+e;if(arguments.length<2)return(a=this.tween(a))&&a._value;if(t==null)return this.tween(a,null);if(typeof t!="function")throw new Error;var r=Ou(e);return this.tween(a,(r.local?gP:xP)(r,t))}function bP(e,t){return function(){Pp(this,e).delay=+t.apply(this,arguments)}}function vP(e,t){return t=+t,function(){Pp(this,e).delay=t}}function wP(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?bP:vP)(t,e)):An(this.node(),t).delay}function NP(e,t){return function(){Xn(this,e).duration=+t.apply(this,arguments)}}function jP(e,t){return t=+t,function(){Xn(this,e).duration=t}}function SP(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?NP:jP)(t,e)):An(this.node(),t).duration}function CP(e,t){if(typeof t!="function")throw new Error;return function(){Xn(this,e).ease=t}}function EP(e){var t=this._id;return arguments.length?this.each(CP(t,e)):An(this.node(),t).ease}function _P(e,t){return function(){var a=t.apply(this,arguments);if(typeof a!="function")throw new Error;Xn(this,e).ease=a}}function TP(e){if(typeof e!="function")throw new Error;return this.each(_P(this._id,e))}function AP(e){typeof e!="function"&&(e=l1(e));for(var t=this._groups,a=t.length,r=new Array(a),l=0;l<a;++l)for(var u=t[l],d=u.length,h=r[l]=[],m,p=0;p<d;++p)(m=u[p])&&e.call(m,m.__data__,p,u)&&h.push(m);return new js(r,this._parents,this._name,this._id)}function kP(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,a=e._groups,r=t.length,l=a.length,u=Math.min(r,l),d=new Array(r),h=0;h<u;++h)for(var m=t[h],p=a[h],y=m.length,x=d[h]=new Array(y),b,v=0;v<y;++v)(b=m[v]||p[v])&&(x[v]=b);for(;h<r;++h)d[h]=t[h];return new js(d,this._parents,this._name,this._id)}function MP(e){return(e+"").trim().split(/^|\s+/).every(function(t){var a=t.indexOf(".");return a>=0&&(t=t.slice(0,a)),!t||t==="start"})}function DP(e,t,a){var r,l,u=MP(t)?Pp:Xn;return function(){var d=u(this,e),h=d.on;h!==r&&(l=(r=h).copy()).on(t,a),d.on=l}}function RP(e,t){var a=this._id;return arguments.length<2?An(this.node(),a).on.on(e):this.each(DP(a,e,t))}function OP(e){return function(){var t=this.parentNode;for(var a in this.__transition)if(+a!==e)return;t&&t.removeChild(this)}}function $P(){return this.on("end.remove",OP(this._id))}function zP(e){var t=this._name,a=this._id;typeof e!="function"&&(e=Op(e));for(var r=this._groups,l=r.length,u=new Array(l),d=0;d<l;++d)for(var h=r[d],m=h.length,p=u[d]=new Array(m),y,x,b=0;b<m;++b)(y=h[b])&&(x=e.call(y,y.__data__,b,h))&&("__data__"in y&&(x.__data__=y.__data__),p[b]=x,zu(p[b],t,a,b,p,An(y,a)));return new js(u,this._parents,t,a)}function LP(e){var t=this._name,a=this._id;typeof e!="function"&&(e=i1(e));for(var r=this._groups,l=r.length,u=[],d=[],h=0;h<l;++h)for(var m=r[h],p=m.length,y,x=0;x<p;++x)if(y=m[x]){for(var b=e.call(y,y.__data__,x,m),v,w=An(y,a),_=0,E=b.length;_<E;++_)(v=b[_])&&zu(v,t,a,_,b,w);u.push(b),d.push(y)}return new js(u,d,t,a)}var BP=Xi.prototype.constructor;function PP(){return new BP(this._groups,this._parents)}function HP(e,t){var a,r,l;return function(){var u=eo(this,e),d=(this.style.removeProperty(e),eo(this,e));return u===d?null:u===a&&d===r?l:l=t(a=u,r=d)}}function D1(e){return function(){this.style.removeProperty(e)}}function UP(e,t,a){var r,l=a+"",u;return function(){var d=eo(this,e);return d===l?null:d===r?u:u=t(r=d,a)}}function qP(e,t,a){var r,l,u;return function(){var d=eo(this,e),h=a(this),m=h+"";return h==null&&(m=h=(this.style.removeProperty(e),eo(this,e))),d===m?null:d===r&&m===l?u:(l=m,u=t(r=d,h))}}function IP(e,t){var a,r,l,u="style."+t,d="end."+u,h;return function(){var m=Xn(this,e),p=m.on,y=m.value[u]==null?h||(h=D1(t)):void 0;(p!==a||l!==y)&&(r=(a=p).copy()).on(d,l=y),m.on=r}}function VP(e,t,a){var r=(e+="")=="transform"?FB:M1;return t==null?this.styleTween(e,HP(e,r)).on("end.style."+e,D1(e)):typeof t=="function"?this.styleTween(e,qP(e,r,Hp(this,"style."+e,t))).each(IP(this._id,e)):this.styleTween(e,UP(e,r,t),a).on("end.style."+e,null)}function FP(e,t,a){return function(r){this.style.setProperty(e,t.call(this,r),a)}}function YP(e,t,a){var r,l;function u(){var d=t.apply(this,arguments);return d!==l&&(r=(l=d)&&FP(e,d,a)),r}return u._value=t,u}function XP(e,t,a){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,YP(e,t,a??""))}function GP(e){return function(){this.textContent=e}}function KP(e){return function(){var t=e(this);this.textContent=t??""}}function QP(e){return this.tween("text",typeof e=="function"?KP(Hp(this,"text",e)):GP(e==null?"":e+""))}function WP(e){return function(t){this.textContent=e.call(this,t)}}function ZP(e){var t,a;function r(){var l=e.apply(this,arguments);return l!==a&&(t=(a=l)&&WP(l)),t}return r._value=e,r}function JP(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,ZP(e))}function eH(){for(var e=this._name,t=this._id,a=R1(),r=this._groups,l=r.length,u=0;u<l;++u)for(var d=r[u],h=d.length,m,p=0;p<h;++p)if(m=d[p]){var y=An(m,t);zu(m,e,a,p,d,{time:y.time+y.delay+y.duration,delay:0,duration:y.duration,ease:y.ease})}return new js(r,this._parents,e,a)}function tH(){var e,t,a=this,r=a._id,l=a.size();return new Promise(function(u,d){var h={value:d},m={value:function(){--l===0&&u()}};a.each(function(){var p=Xn(this,r),y=p.on;y!==e&&(t=(e=y).copy(),t._.cancel.push(h),t._.interrupt.push(h),t._.end.push(m)),p.on=t}),l===0&&u()})}var nH=0;function js(e,t,a,r){this._groups=e,this._parents=t,this._name=a,this._id=r}function R1(){return++nH}var xs=Xi.prototype;js.prototype={constructor:js,select:zP,selectAll:LP,selectChild:xs.selectChild,selectChildren:xs.selectChildren,filter:AP,merge:kP,selection:PP,transition:eH,call:xs.call,nodes:xs.nodes,node:xs.node,size:xs.size,empty:xs.empty,each:xs.each,on:RP,attr:hP,attrTween:yP,style:VP,styleTween:XP,text:QP,textTween:JP,remove:$P,tween:oP,delay:wP,duration:SP,ease:EP,easeVarying:TP,end:tH,[Symbol.iterator]:xs[Symbol.iterator]};function sH(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var aH={time:null,delay:0,duration:250,ease:sH};function rH(e,t){for(var a;!(a=e.__transition)||!(a=a[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return a}function oH(e){var t,a;e instanceof js?(t=e._id,e=e._name):(t=R1(),(a=aH).time=Bp(),e=e==null?null:e+"");for(var r=this._groups,l=r.length,u=0;u<l;++u)for(var d=r[u],h=d.length,m,p=0;p<h;++p)(m=d[p])&&zu(m,e,t,p,d,a||rH(m,t));return new js(r,this._parents,e,t)}Xi.prototype.interrupt=sP;Xi.prototype.transition=oH;const Rc=e=>()=>e;function iH(e,{sourceEvent:t,target:a,transform:r,dispatch:l}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:a,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:l}})}function bs(e,t,a){this.k=e,this.x=t,this.y=a}bs.prototype={constructor:bs,scale:function(e){return e===1?this:new bs(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new bs(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Lu=new bs(1,0,0);O1.prototype=bs.prototype;function O1(e){for(;!e.__zoom;)if(!(e=e.parentNode))return Lu;return e.__zoom}function Eh(e){e.stopImmediatePropagation()}function yi(e){e.preventDefault(),e.stopImmediatePropagation()}function lH(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function cH(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function nb(){return this.__zoom||Lu}function uH(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function dH(){return navigator.maxTouchPoints||"ontouchstart"in this}function fH(e,t,a){var r=e.invertX(t[0][0])-a[0][0],l=e.invertX(t[1][0])-a[1][0],u=e.invertY(t[0][1])-a[0][1],d=e.invertY(t[1][1])-a[1][1];return e.translate(l>r?(r+l)/2:Math.min(0,r)||Math.max(0,l),d>u?(u+d)/2:Math.min(0,u)||Math.max(0,d))}function $1(){var e=lH,t=cH,a=fH,r=uH,l=dH,u=[0,1/0],d=[[-1/0,-1/0],[1/0,1/0]],h=250,m=Kc,p=Ru("start","zoom","end"),y,x,b,v=500,w=150,_=0,E=10;function T(B){B.property("__zoom",nb).on("wheel.zoom",$,{passive:!1}).on("mousedown.zoom",H).on("dblclick.zoom",F).filter(l).on("touchstart.zoom",P).on("touchmove.zoom",K).on("touchend.zoom touchcancel.zoom",W).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}T.transform=function(B,G,O,U){var z=B.selection?B.selection():B;z.property("__zoom",nb),B!==z?L(B,G,O,U):z.interrupt().each(function(){j(this,arguments).event(U).start().zoom(null,typeof G=="function"?G.apply(this,arguments):G).end()})},T.scaleBy=function(B,G,O,U){T.scaleTo(B,function(){var z=this.__zoom.k,I=typeof G=="function"?G.apply(this,arguments):G;return z*I},O,U)},T.scaleTo=function(B,G,O,U){T.transform(B,function(){var z=t.apply(this,arguments),I=this.__zoom,q=O==null?k(z):typeof O=="function"?O.apply(this,arguments):O,D=I.invert(q),V=typeof G=="function"?G.apply(this,arguments):G;return a(C(A(I,V),q,D),z,d)},O,U)},T.translateBy=function(B,G,O,U){T.transform(B,function(){return a(this.__zoom.translate(typeof G=="function"?G.apply(this,arguments):G,typeof O=="function"?O.apply(this,arguments):O),t.apply(this,arguments),d)},null,U)},T.translateTo=function(B,G,O,U,z){T.transform(B,function(){var I=t.apply(this,arguments),q=this.__zoom,D=U==null?k(I):typeof U=="function"?U.apply(this,arguments):U;return a(Lu.translate(D[0],D[1]).scale(q.k).translate(typeof G=="function"?-G.apply(this,arguments):-G,typeof O=="function"?-O.apply(this,arguments):-O),I,d)},U,z)};function A(B,G){return G=Math.max(u[0],Math.min(u[1],G)),G===B.k?B:new bs(G,B.x,B.y)}function C(B,G,O){var U=G[0]-O[0]*B.k,z=G[1]-O[1]*B.k;return U===B.x&&z===B.y?B:new bs(B.k,U,z)}function k(B){return[(+B[0][0]+ +B[1][0])/2,(+B[0][1]+ +B[1][1])/2]}function L(B,G,O,U){B.on("start.zoom",function(){j(this,arguments).event(U).start()}).on("interrupt.zoom end.zoom",function(){j(this,arguments).event(U).end()}).tween("zoom",function(){var z=this,I=arguments,q=j(z,I).event(U),D=t.apply(z,I),V=O==null?k(D):typeof O=="function"?O.apply(z,I):O,Z=Math.max(D[1][0]-D[0][0],D[1][1]-D[0][1]),ae=z.__zoom,ne=typeof G=="function"?G.apply(z,I):G,de=m(ae.invert(V).concat(Z/ae.k),ne.invert(V).concat(Z/ne.k));return function(fe){if(fe===1)fe=ne;else{var ue=de(fe),pe=Z/ue[2];fe=new bs(pe,V[0]-ue[0]*pe,V[1]-ue[1]*pe)}q.zoom(null,fe)}})}function j(B,G,O){return!O&&B.__zooming||new R(B,G)}function R(B,G){this.that=B,this.args=G,this.active=0,this.sourceEvent=null,this.extent=t.apply(B,G),this.taps=0}R.prototype={event:function(B){return B&&(this.sourceEvent=B),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(B,G){return this.mouse&&B!=="mouse"&&(this.mouse[1]=G.invert(this.mouse[0])),this.touch0&&B!=="touch"&&(this.touch0[1]=G.invert(this.touch0[0])),this.touch1&&B!=="touch"&&(this.touch1[1]=G.invert(this.touch1[0])),this.that.__zoom=G,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(B){var G=nn(this.that).datum();p.call(B,this.that,new iH(B,{sourceEvent:this.sourceEvent,target:T,transform:this.that.__zoom,dispatch:p}),G)}};function $(B,...G){if(!e.apply(this,arguments))return;var O=j(this,G).event(B),U=this.__zoom,z=Math.max(u[0],Math.min(u[1],U.k*Math.pow(2,r.apply(this,arguments)))),I=Cn(B);if(O.wheel)(O.mouse[0][0]!==I[0]||O.mouse[0][1]!==I[1])&&(O.mouse[1]=U.invert(O.mouse[0]=I)),clearTimeout(O.wheel);else{if(U.k===z)return;O.mouse=[I,U.invert(I)],Zc(this),O.start()}yi(B),O.wheel=setTimeout(q,w),O.zoom("mouse",a(C(A(U,z),O.mouse[0],O.mouse[1]),O.extent,d));function q(){O.wheel=null,O.end()}}function H(B,...G){if(b||!e.apply(this,arguments))return;var O=B.currentTarget,U=j(this,G,!0).event(B),z=nn(B.view).on("mousemove.zoom",V,!0).on("mouseup.zoom",Z,!0),I=Cn(B,O),q=B.clientX,D=B.clientY;y1(B.view),Eh(B),U.mouse=[I,this.__zoom.invert(I)],Zc(this),U.start();function V(ae){if(yi(ae),!U.moved){var ne=ae.clientX-q,de=ae.clientY-D;U.moved=ne*ne+de*de>_}U.event(ae).zoom("mouse",a(C(U.that.__zoom,U.mouse[0]=Cn(ae,O),U.mouse[1]),U.extent,d))}function Z(ae){z.on("mousemove.zoom mouseup.zoom",null),b1(ae.view,U.moved),yi(ae),U.event(ae).end()}}function F(B,...G){if(e.apply(this,arguments)){var O=this.__zoom,U=Cn(B.changedTouches?B.changedTouches[0]:B,this),z=O.invert(U),I=O.k*(B.shiftKey?.5:2),q=a(C(A(O,I),U,z),t.apply(this,G),d);yi(B),h>0?nn(this).transition().duration(h).call(L,q,U,B):nn(this).call(T.transform,q,U,B)}}function P(B,...G){if(e.apply(this,arguments)){var O=B.touches,U=O.length,z=j(this,G,B.changedTouches.length===U).event(B),I,q,D,V;for(Eh(B),q=0;q<U;++q)D=O[q],V=Cn(D,this),V=[V,this.__zoom.invert(V),D.identifier],z.touch0?!z.touch1&&z.touch0[2]!==V[2]&&(z.touch1=V,z.taps=0):(z.touch0=V,I=!0,z.taps=1+!!y);y&&(y=clearTimeout(y)),I&&(z.taps<2&&(x=V[0],y=setTimeout(function(){y=null},v)),Zc(this),z.start())}}function K(B,...G){if(this.__zooming){var O=j(this,G).event(B),U=B.changedTouches,z=U.length,I,q,D,V;for(yi(B),I=0;I<z;++I)q=U[I],D=Cn(q,this),O.touch0&&O.touch0[2]===q.identifier?O.touch0[0]=D:O.touch1&&O.touch1[2]===q.identifier&&(O.touch1[0]=D);if(q=O.that.__zoom,O.touch1){var Z=O.touch0[0],ae=O.touch0[1],ne=O.touch1[0],de=O.touch1[1],fe=(fe=ne[0]-Z[0])*fe+(fe=ne[1]-Z[1])*fe,ue=(ue=de[0]-ae[0])*ue+(ue=de[1]-ae[1])*ue;q=A(q,Math.sqrt(fe/ue)),D=[(Z[0]+ne[0])/2,(Z[1]+ne[1])/2],V=[(ae[0]+de[0])/2,(ae[1]+de[1])/2]}else if(O.touch0)D=O.touch0[0],V=O.touch0[1];else return;O.zoom("touch",a(C(q,D,V),O.extent,d))}}function W(B,...G){if(this.__zooming){var O=j(this,G).event(B),U=B.changedTouches,z=U.length,I,q;for(Eh(B),b&&clearTimeout(b),b=setTimeout(function(){b=null},v),I=0;I<z;++I)q=U[I],O.touch0&&O.touch0[2]===q.identifier?delete O.touch0:O.touch1&&O.touch1[2]===q.identifier&&delete O.touch1;if(O.touch1&&!O.touch0&&(O.touch0=O.touch1,delete O.touch1),O.touch0)O.touch0[1]=this.__zoom.invert(O.touch0[0]);else if(O.end(),O.taps===2&&(q=Cn(q,this),Math.hypot(x[0]-q[0],x[1]-q[1])<E)){var D=nn(this).on("dblclick.zoom");D&&D.apply(this,arguments)}}}return T.wheelDelta=function(B){return arguments.length?(r=typeof B=="function"?B:Rc(+B),T):r},T.filter=function(B){return arguments.length?(e=typeof B=="function"?B:Rc(!!B),T):e},T.touchable=function(B){return arguments.length?(l=typeof B=="function"?B:Rc(!!B),T):l},T.extent=function(B){return arguments.length?(t=typeof B=="function"?B:Rc([[+B[0][0],+B[0][1]],[+B[1][0],+B[1][1]]]),T):t},T.scaleExtent=function(B){return arguments.length?(u[0]=+B[0],u[1]=+B[1],T):[u[0],u[1]]},T.translateExtent=function(B){return arguments.length?(d[0][0]=+B[0][0],d[1][0]=+B[1][0],d[0][1]=+B[0][1],d[1][1]=+B[1][1],T):[[d[0][0],d[0][1]],[d[1][0],d[1][1]]]},T.constrain=function(B){return arguments.length?(a=B,T):a},T.duration=function(B){return arguments.length?(h=+B,T):h},T.interpolate=function(B){return arguments.length?(m=B,T):m},T.on=function(){var B=p.on.apply(p,arguments);return B===p?T:B},T.clickDistance=function(B){return arguments.length?(_=(B=+B)*B,T):Math.sqrt(_)},T.tapDistance=function(B){return arguments.length?(E=+B,T):E},T}const Yn={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,{id:t,sourceHandle:a,targetHandle:r})=>`Couldn't create edge for ${e} handle id: "${e==="source"?a:r}", edge id: ${t}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(e="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${e}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",error015:()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."},$i=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],z1=["Enter"," ","Escape"],L1={"node.a11yDescription.default":"Press enter or space to select a node. Press delete to remove it and escape to cancel.","node.a11yDescription.keyboardDisabled":"Press enter or space to select a node. You can then use the arrow keys to move the node around. Press delete to remove it and escape to cancel.","node.a11yDescription.ariaLiveMessage":({direction:e,x:t,y:a})=>`Moved selected node ${e}. New position, x: ${t}, y: ${a}`,"edge.a11yDescription.default":"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel.","controls.ariaLabel":"Control Panel","controls.zoomIn.ariaLabel":"Zoom In","controls.zoomOut.ariaLabel":"Zoom Out","controls.fitView.ariaLabel":"Fit View","controls.interactive.ariaLabel":"Toggle Interactivity","minimap.ariaLabel":"Mini Map","handle.ariaLabel":"Handle"};var no;(function(e){e.Strict="strict",e.Loose="loose"})(no||(no={}));var qa;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(qa||(qa={}));var zi;(function(e){e.Partial="partial",e.Full="full"})(zi||(zi={}));const B1={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null,pointer:null};var aa;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(aa||(aa={}));var xu;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(xu||(xu={}));var be;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(be||(be={}));const sb={[be.Left]:be.Right,[be.Right]:be.Left,[be.Top]:be.Bottom,[be.Bottom]:be.Top};function P1(e){return e===null?null:e?"valid":"invalid"}const H1=e=>"id"in e&&"source"in e&&"target"in e,hH=e=>"id"in e&&"position"in e&&!("source"in e)&&!("target"in e),Up=e=>"id"in e&&"internals"in e&&!("source"in e)&&!("target"in e),Ki=(e,t=[0,0])=>{const{width:a,height:r}=Es(e),l=e.origin??t,u=a*l[0],d=r*l[1];return{x:e.position.x-u,y:e.position.y-d}},pH=(e,t={nodeOrigin:[0,0]})=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const a=e.reduce((r,l)=>{const u=typeof l=="string";let d=!t.nodeLookup&&!u?l:void 0;t.nodeLookup&&(d=u?t.nodeLookup.get(l):Up(l)?l:t.nodeLookup.get(l.id));const h=d?yu(d,t.nodeOrigin):{x:0,y:0,x2:0,y2:0};return Bu(r,h)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return Pu(a)},Qi=(e,t={})=>{let a={x:1/0,y:1/0,x2:-1/0,y2:-1/0},r=!1;return e.forEach(l=>{(t.filter===void 0||t.filter(l))&&(a=Bu(a,yu(l)),r=!0)}),r?Pu(a):{x:0,y:0,width:0,height:0}},qp=(e,t,[a,r,l]=[0,0,1],u=!1,d=!1)=>{const h={...Zi(t,[a,r,l]),width:t.width/l,height:t.height/l},m=[];for(const p of e.values()){const{measured:y,selectable:x=!0,hidden:b=!1}=p;if(d&&!x||b)continue;const v=y.width??p.width??p.initialWidth??null,w=y.height??p.height??p.initialHeight??null,_=Li(h,ao(p)),E=(v??0)*(w??0),T=u&&_>0;(!p.internals.handleBounds||T||_>=E||p.dragging)&&m.push(p)}return m},mH=(e,t)=>{const a=new Set;return e.forEach(r=>{a.add(r.id)}),t.filter(r=>a.has(r.source)||a.has(r.target))};function gH(e,t){const a=new Map,r=t?.nodes?new Set(t.nodes.map(l=>l.id)):null;return e.forEach(l=>{l.measured.width&&l.measured.height&&(t?.includeHiddenNodes||!l.hidden)&&(!r||r.has(l.id))&&a.set(l.id,l)}),a}async function xH({nodes:e,width:t,height:a,panZoom:r,minZoom:l,maxZoom:u},d){if(e.size===0)return Promise.resolve(!0);const h=gH(e,d),m=Qi(h),p=Ip(m,t,a,d?.minZoom??l,d?.maxZoom??u,d?.padding??.1);return await r.setViewport(p,{duration:d?.duration,ease:d?.ease,interpolate:d?.interpolate}),Promise.resolve(!0)}function U1({nodeId:e,nextPosition:t,nodeLookup:a,nodeOrigin:r=[0,0],nodeExtent:l,onError:u}){const d=a.get(e),h=d.parentId?a.get(d.parentId):void 0,{x:m,y:p}=h?h.internals.positionAbsolute:{x:0,y:0},y=d.origin??r;let x=d.extent||l;if(d.extent==="parent"&&!d.expandParent)if(!h)u?.("005",Yn.error005());else{const v=h.measured.width,w=h.measured.height;v&&w&&(x=[[m,p],[m+v,p+w]])}else h&&ro(d.extent)&&(x=[[d.extent[0][0]+m,d.extent[0][1]+p],[d.extent[1][0]+m,d.extent[1][1]+p]]);const b=ro(x)?Ya(t,x,d.measured):t;return(d.measured.width===void 0||d.measured.height===void 0)&&u?.("015",Yn.error015()),{position:{x:b.x-m+(d.measured.width??0)*y[0],y:b.y-p+(d.measured.height??0)*y[1]},positionAbsolute:b}}async function yH({nodesToRemove:e=[],edgesToRemove:t=[],nodes:a,edges:r,onBeforeDelete:l}){const u=new Set(e.map(b=>b.id)),d=[];for(const b of a){if(b.deletable===!1)continue;const v=u.has(b.id),w=!v&&b.parentId&&d.find(_=>_.id===b.parentId);(v||w)&&d.push(b)}const h=new Set(t.map(b=>b.id)),m=r.filter(b=>b.deletable!==!1),y=mH(d,m);for(const b of m)h.has(b.id)&&!y.find(w=>w.id===b.id)&&y.push(b);if(!l)return{edges:y,nodes:d};const x=await l({nodes:d,edges:y});return typeof x=="boolean"?x?{edges:y,nodes:d}:{edges:[],nodes:[]}:x}const so=(e,t=0,a=1)=>Math.min(Math.max(e,t),a),Ya=(e={x:0,y:0},t,a)=>({x:so(e.x,t[0][0],t[1][0]-(a?.width??0)),y:so(e.y,t[0][1],t[1][1]-(a?.height??0))});function q1(e,t,a){const{width:r,height:l}=Es(a),{x:u,y:d}=a.internals.positionAbsolute;return Ya(e,[[u,d],[u+r,d+l]],t)}const ab=(e,t,a)=>e<t?so(Math.abs(e-t),1,t)/t:e>a?-so(Math.abs(e-a),1,t)/t:0,I1=(e,t,a=15,r=40)=>{const l=ab(e.x,r,t.width-r)*a,u=ab(e.y,r,t.height-r)*a;return[l,u]},Bu=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),rp=({x:e,y:t,width:a,height:r})=>({x:e,y:t,x2:e+a,y2:t+r}),Pu=({x:e,y:t,x2:a,y2:r})=>({x:e,y:t,width:a-e,height:r-t}),ao=(e,t=[0,0])=>{const{x:a,y:r}=Up(e)?e.internals.positionAbsolute:Ki(e,t);return{x:a,y:r,width:e.measured?.width??e.width??e.initialWidth??0,height:e.measured?.height??e.height??e.initialHeight??0}},yu=(e,t=[0,0])=>{const{x:a,y:r}=Up(e)?e.internals.positionAbsolute:Ki(e,t);return{x:a,y:r,x2:a+(e.measured?.width??e.width??e.initialWidth??0),y2:r+(e.measured?.height??e.height??e.initialHeight??0)}},V1=(e,t)=>Pu(Bu(rp(e),rp(t))),Li=(e,t)=>{const a=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),r=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(a*r)},rb=e=>_n(e.width)&&_n(e.height)&&_n(e.x)&&_n(e.y),_n=e=>!isNaN(e)&&isFinite(e),bH=(e,t)=>{},Wi=(e,t=[1,1])=>({x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}),Zi=({x:e,y:t},[a,r,l],u=!1,d=[1,1])=>{const h={x:(e-a)/l,y:(t-r)/l};return u?Wi(h,d):h},bu=({x:e,y:t},[a,r,l])=>({x:e*l+a,y:t*l+r});function Ur(e,t){if(typeof e=="number")return Math.floor((t-t/(1+e))*.5);if(typeof e=="string"&&e.endsWith("px")){const a=parseFloat(e);if(!Number.isNaN(a))return Math.floor(a)}if(typeof e=="string"&&e.endsWith("%")){const a=parseFloat(e);if(!Number.isNaN(a))return Math.floor(t*a*.01)}return console.error(`[React Flow] The padding value "${e}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function vH(e,t,a){if(typeof e=="string"||typeof e=="number"){const r=Ur(e,a),l=Ur(e,t);return{top:r,right:l,bottom:r,left:l,x:l*2,y:r*2}}if(typeof e=="object"){const r=Ur(e.top??e.y??0,a),l=Ur(e.bottom??e.y??0,a),u=Ur(e.left??e.x??0,t),d=Ur(e.right??e.x??0,t);return{top:r,right:d,bottom:l,left:u,x:u+d,y:r+l}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function wH(e,t,a,r,l,u){const{x:d,y:h}=bu(e,[t,a,r]),{x:m,y:p}=bu({x:e.x+e.width,y:e.y+e.height},[t,a,r]),y=l-m,x=u-p;return{left:Math.floor(d),top:Math.floor(h),right:Math.floor(y),bottom:Math.floor(x)}}const Ip=(e,t,a,r,l,u)=>{const d=vH(u,t,a),h=(t-d.x)/e.width,m=(a-d.y)/e.height,p=Math.min(h,m),y=so(p,r,l),x=e.x+e.width/2,b=e.y+e.height/2,v=t/2-x*y,w=a/2-b*y,_=wH(e,v,w,y,t,a),E={left:Math.min(_.left-d.left,0),top:Math.min(_.top-d.top,0),right:Math.min(_.right-d.right,0),bottom:Math.min(_.bottom-d.bottom,0)};return{x:v-E.left+E.right,y:w-E.top+E.bottom,zoom:y}},Bi=()=>typeof navigator<"u"&&navigator?.userAgent?.indexOf("Mac")>=0;function ro(e){return e!=null&&e!=="parent"}function Es(e){return{width:e.measured?.width??e.width??e.initialWidth??0,height:e.measured?.height??e.height??e.initialHeight??0}}function F1(e){return(e.measured?.width??e.width??e.initialWidth)!==void 0&&(e.measured?.height??e.height??e.initialHeight)!==void 0}function Y1(e,t={width:0,height:0},a,r,l){const u={...e},d=r.get(a);if(d){const h=d.origin||l;u.x+=d.internals.positionAbsolute.x-(t.width??0)*h[0],u.y+=d.internals.positionAbsolute.y-(t.height??0)*h[1]}return u}function ob(e,t){if(e.size!==t.size)return!1;for(const a of e)if(!t.has(a))return!1;return!0}function NH(){let e,t;return{promise:new Promise((r,l)=>{e=r,t=l}),resolve:e,reject:t}}function jH(e){return{...L1,...e||{}}}function _i(e,{snapGrid:t=[0,0],snapToGrid:a=!1,transform:r,containerBounds:l}){const{x:u,y:d}=Tn(e),h=Zi({x:u-(l?.left??0),y:d-(l?.top??0)},r),{x:m,y:p}=a?Wi(h,t):h;return{xSnapped:m,ySnapped:p,...h}}const Vp=e=>({width:e.offsetWidth,height:e.offsetHeight}),X1=e=>e?.getRootNode?.()||window?.document,SH=["INPUT","SELECT","TEXTAREA"];function G1(e){const t=e.composedPath?.()?.[0]||e.target;return t?.nodeType!==1?!1:SH.includes(t.nodeName)||t.hasAttribute("contenteditable")||!!t.closest(".nokey")}const K1=e=>"clientX"in e,Tn=(e,t)=>{const a=K1(e),r=a?e.clientX:e.touches?.[0].clientX,l=a?e.clientY:e.touches?.[0].clientY;return{x:r-(t?.left??0),y:l-(t?.top??0)}},ib=(e,t,a,r,l)=>{const u=t.querySelectorAll(`.${e}`);return!u||!u.length?null:Array.from(u).map(d=>{const h=d.getBoundingClientRect();return{id:d.getAttribute("data-handleid"),type:e,nodeId:l,position:d.getAttribute("data-handlepos"),x:(h.left-a.left)/r,y:(h.top-a.top)/r,...Vp(d)}})};function Q1({sourceX:e,sourceY:t,targetX:a,targetY:r,sourceControlX:l,sourceControlY:u,targetControlX:d,targetControlY:h}){const m=e*.125+l*.375+d*.375+a*.125,p=t*.125+u*.375+h*.375+r*.125,y=Math.abs(m-e),x=Math.abs(p-t);return[m,p,y,x]}function Oc(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function lb({pos:e,x1:t,y1:a,x2:r,y2:l,c:u}){switch(e){case be.Left:return[t-Oc(t-r,u),a];case be.Right:return[t+Oc(r-t,u),a];case be.Top:return[t,a-Oc(a-l,u)];case be.Bottom:return[t,a+Oc(l-a,u)]}}function W1({sourceX:e,sourceY:t,sourcePosition:a=be.Bottom,targetX:r,targetY:l,targetPosition:u=be.Top,curvature:d=.25}){const[h,m]=lb({pos:a,x1:e,y1:t,x2:r,y2:l,c:d}),[p,y]=lb({pos:u,x1:r,y1:l,x2:e,y2:t,c:d}),[x,b,v,w]=Q1({sourceX:e,sourceY:t,targetX:r,targetY:l,sourceControlX:h,sourceControlY:m,targetControlX:p,targetControlY:y});return[`M${e},${t} C${h},${m} ${p},${y} ${r},${l}`,x,b,v,w]}function Z1({sourceX:e,sourceY:t,targetX:a,targetY:r}){const l=Math.abs(a-e)/2,u=a<e?a+l:a-l,d=Math.abs(r-t)/2,h=r<t?r+d:r-d;return[u,h,l,d]}function CH({sourceNode:e,targetNode:t,selected:a=!1,zIndex:r=0,elevateOnSelect:l=!1,zIndexMode:u="basic"}){if(u==="manual")return r;const d=l&&a?r+1e3:r,h=Math.max(e.parentId||l&&e.selected?e.internals.z:0,t.parentId||l&&t.selected?t.internals.z:0);return d+h}function EH({sourceNode:e,targetNode:t,width:a,height:r,transform:l}){const u=Bu(yu(e),yu(t));u.x===u.x2&&(u.x2+=1),u.y===u.y2&&(u.y2+=1);const d={x:-l[0]/l[2],y:-l[1]/l[2],width:a/l[2],height:r/l[2]};return Li(d,Pu(u))>0}const _H=({source:e,sourceHandle:t,target:a,targetHandle:r})=>`xy-edge__${e}${t||""}-${a}${r||""}`,TH=(e,t)=>t.some(a=>a.source===e.source&&a.target===e.target&&(a.sourceHandle===e.sourceHandle||!a.sourceHandle&&!e.sourceHandle)&&(a.targetHandle===e.targetHandle||!a.targetHandle&&!e.targetHandle)),J1=(e,t,a={})=>{if(!e.source||!e.target)return t;const r=a.getEdgeId||_H;let l;return H1(e)?l={...e}:l={...e,id:r(e)},TH(l,t)?t:(l.sourceHandle===null&&delete l.sourceHandle,l.targetHandle===null&&delete l.targetHandle,t.concat(l))};function ew({sourceX:e,sourceY:t,targetX:a,targetY:r}){const[l,u,d,h]=Z1({sourceX:e,sourceY:t,targetX:a,targetY:r});return[`M ${e},${t}L ${a},${r}`,l,u,d,h]}const cb={[be.Left]:{x:-1,y:0},[be.Right]:{x:1,y:0},[be.Top]:{x:0,y:-1},[be.Bottom]:{x:0,y:1}},AH=({source:e,sourcePosition:t=be.Bottom,target:a})=>t===be.Left||t===be.Right?e.x<a.x?{x:1,y:0}:{x:-1,y:0}:e.y<a.y?{x:0,y:1}:{x:0,y:-1},ub=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function kH({source:e,sourcePosition:t=be.Bottom,target:a,targetPosition:r=be.Top,center:l,offset:u,stepPosition:d}){const h=cb[t],m=cb[r],p={x:e.x+h.x*u,y:e.y+h.y*u},y={x:a.x+m.x*u,y:a.y+m.y*u},x=AH({source:p,sourcePosition:t,target:y}),b=x.x!==0?"x":"y",v=x[b];let w=[],_,E;const T={x:0,y:0},A={x:0,y:0},[,,C,k]=Z1({sourceX:e.x,sourceY:e.y,targetX:a.x,targetY:a.y});if(h[b]*m[b]===-1){b==="x"?(_=l.x??p.x+(y.x-p.x)*d,E=l.y??(p.y+y.y)/2):(_=l.x??(p.x+y.x)/2,E=l.y??p.y+(y.y-p.y)*d);const j=[{x:_,y:p.y},{x:_,y:y.y}],R=[{x:p.x,y:E},{x:y.x,y:E}];h[b]===v?w=b==="x"?j:R:w=b==="x"?R:j}else{const j=[{x:p.x,y:y.y}],R=[{x:y.x,y:p.y}];if(b==="x"?w=h.x===v?R:j:w=h.y===v?j:R,t===r){const K=Math.abs(e[b]-a[b]);if(K<=u){const W=Math.min(u-1,u-K);h[b]===v?T[b]=(p[b]>e[b]?-1:1)*W:A[b]=(y[b]>a[b]?-1:1)*W}}if(t!==r){const K=b==="x"?"y":"x",W=h[b]===m[K],B=p[K]>y[K],G=p[K]<y[K];(h[b]===1&&(!W&&B||W&&G)||h[b]!==1&&(!W&&G||W&&B))&&(w=b==="x"?j:R)}const $={x:p.x+T.x,y:p.y+T.y},H={x:y.x+A.x,y:y.y+A.y},F=Math.max(Math.abs($.x-w[0].x),Math.abs(H.x-w[0].x)),P=Math.max(Math.abs($.y-w[0].y),Math.abs(H.y-w[0].y));F>=P?(_=($.x+H.x)/2,E=w[0].y):(_=w[0].x,E=($.y+H.y)/2)}return[[e,{x:p.x+T.x,y:p.y+T.y},...w,{x:y.x+A.x,y:y.y+A.y},a],_,E,C,k]}function MH(e,t,a,r){const l=Math.min(ub(e,t)/2,ub(t,a)/2,r),{x:u,y:d}=t;if(e.x===u&&u===a.x||e.y===d&&d===a.y)return`L${u} ${d}`;if(e.y===d){const p=e.x<a.x?-1:1,y=e.y<a.y?1:-1;return`L ${u+l*p},${d}Q ${u},${d} ${u},${d+l*y}`}const h=e.x<a.x?1:-1,m=e.y<a.y?-1:1;return`L ${u},${d+l*m}Q ${u},${d} ${u+l*h},${d}`}function op({sourceX:e,sourceY:t,sourcePosition:a=be.Bottom,targetX:r,targetY:l,targetPosition:u=be.Top,borderRadius:d=5,centerX:h,centerY:m,offset:p=20,stepPosition:y=.5}){const[x,b,v,w,_]=kH({source:{x:e,y:t},sourcePosition:a,target:{x:r,y:l},targetPosition:u,center:{x:h,y:m},offset:p,stepPosition:y});return[x.reduce((T,A,C)=>{let k="";return C>0&&C<x.length-1?k=MH(x[C-1],A,x[C+1],d):k=`${C===0?"M":"L"}${A.x} ${A.y}`,T+=k,T},""),b,v,w,_]}function db(e){return e&&!!(e.internals.handleBounds||e.handles?.length)&&!!(e.measured.width||e.width||e.initialWidth)}function DH(e){const{sourceNode:t,targetNode:a}=e;if(!db(t)||!db(a))return null;const r=t.internals.handleBounds||fb(t.handles),l=a.internals.handleBounds||fb(a.handles),u=hb(r?.source??[],e.sourceHandle),d=hb(e.connectionMode===no.Strict?l?.target??[]:(l?.target??[]).concat(l?.source??[]),e.targetHandle);if(!u||!d)return e.onError?.("008",Yn.error008(u?"target":"source",{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;const h=u?.position||be.Bottom,m=d?.position||be.Top,p=Xa(t,u,h),y=Xa(a,d,m);return{sourceX:p.x,sourceY:p.y,targetX:y.x,targetY:y.y,sourcePosition:h,targetPosition:m}}function fb(e){if(!e)return null;const t=[],a=[];for(const r of e)r.width=r.width??1,r.height=r.height??1,r.type==="source"?t.push(r):r.type==="target"&&a.push(r);return{source:t,target:a}}function Xa(e,t,a=be.Left,r=!1){const l=(t?.x??0)+e.internals.positionAbsolute.x,u=(t?.y??0)+e.internals.positionAbsolute.y,{width:d,height:h}=t??Es(e);if(r)return{x:l+d/2,y:u+h/2};switch(t?.position??a){case be.Top:return{x:l+d/2,y:u};case be.Right:return{x:l+d,y:u+h/2};case be.Bottom:return{x:l+d/2,y:u+h};case be.Left:return{x:l,y:u+h/2}}}function hb(e,t){return e&&(t?e.find(a=>a.id===t):e[0])||null}function ip(e,t){return e?typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(r=>`${r}=${e[r]}`).join("&")}`:""}function RH(e,{id:t,defaultColor:a,defaultMarkerStart:r,defaultMarkerEnd:l}){const u=new Set;return e.reduce((d,h)=>([h.markerStart||r,h.markerEnd||l].forEach(m=>{if(m&&typeof m=="object"){const p=ip(m,t);u.has(p)||(d.push({id:p,color:m.color||a,...m}),u.add(p))}}),d),[]).sort((d,h)=>d.id.localeCompare(h.id))}const tw=1e3,OH=10,Fp={nodeOrigin:[0,0],nodeExtent:$i,elevateNodesOnSelect:!0,zIndexMode:"basic",defaults:{}},$H={...Fp,checkEquality:!0};function Yp(e,t){const a={...e};for(const r in t)t[r]!==void 0&&(a[r]=t[r]);return a}function zH(e,t,a){const r=Yp(Fp,a);for(const l of e.values())if(l.parentId)Gp(l,e,t,r);else{const u=Ki(l,r.nodeOrigin),d=ro(l.extent)?l.extent:r.nodeExtent,h=Ya(u,d,Es(l));l.internals.positionAbsolute=h}}function LH(e,t){if(!e.handles)return e.measured?t?.internals.handleBounds:void 0;const a=[],r=[];for(const l of e.handles){const u={id:l.id,width:l.width??1,height:l.height??1,nodeId:e.id,x:l.x,y:l.y,position:l.position,type:l.type};l.type==="source"?a.push(u):l.type==="target"&&r.push(u)}return{source:a,target:r}}function Xp(e){return e==="manual"}function lp(e,t,a,r={}){const l=Yp($H,r),u={i:0},d=new Map(t),h=l?.elevateNodesOnSelect&&!Xp(l.zIndexMode)?tw:0;let m=e.length>0;t.clear(),a.clear();for(const p of e){let y=d.get(p.id);if(l.checkEquality&&p===y?.internals.userNode)t.set(p.id,y);else{const x=Ki(p,l.nodeOrigin),b=ro(p.extent)?p.extent:l.nodeExtent,v=Ya(x,b,Es(p));y={...l.defaults,...p,measured:{width:p.measured?.width,height:p.measured?.height},internals:{positionAbsolute:v,handleBounds:LH(p,y),z:nw(p,h,l.zIndexMode),userNode:p}},t.set(p.id,y)}(y.measured===void 0||y.measured.width===void 0||y.measured.height===void 0)&&!y.hidden&&(m=!1),p.parentId&&Gp(y,t,a,r,u)}return m}function BH(e,t){if(!e.parentId)return;const a=t.get(e.parentId);a?a.set(e.id,e):t.set(e.parentId,new Map([[e.id,e]]))}function Gp(e,t,a,r,l){const{elevateNodesOnSelect:u,nodeOrigin:d,nodeExtent:h,zIndexMode:m}=Yp(Fp,r),p=e.parentId,y=t.get(p);if(!y){console.warn(`Parent node ${p} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}BH(e,a),l&&!y.parentId&&y.internals.rootParentIndex===void 0&&m==="auto"&&(y.internals.rootParentIndex=++l.i,y.internals.z=y.internals.z+l.i*OH),l&&y.internals.rootParentIndex!==void 0&&(l.i=y.internals.rootParentIndex);const x=u&&!Xp(m)?tw:0,{x:b,y:v,z:w}=PH(e,y,d,h,x,m),{positionAbsolute:_}=e.internals,E=b!==_.x||v!==_.y;(E||w!==e.internals.z)&&t.set(e.id,{...e,internals:{...e.internals,positionAbsolute:E?{x:b,y:v}:_,z:w}})}function nw(e,t,a){const r=_n(e.zIndex)?e.zIndex:0;return Xp(a)?r:r+(e.selected?t:0)}function PH(e,t,a,r,l,u){const{x:d,y:h}=t.internals.positionAbsolute,m=Es(e),p=Ki(e,a),y=ro(e.extent)?Ya(p,e.extent,m):p;let x=Ya({x:d+y.x,y:h+y.y},r,m);e.extent==="parent"&&(x=q1(x,m,t));const b=nw(e,l,u),v=t.internals.z??0;return{x:x.x,y:x.y,z:v>=b?v+1:b}}function Kp(e,t,a,r=[0,0]){const l=[],u=new Map;for(const d of e){const h=t.get(d.parentId);if(!h)continue;const m=u.get(d.parentId)?.expandedRect??ao(h),p=V1(m,d.rect);u.set(d.parentId,{expandedRect:p,parent:h})}return u.size>0&&u.forEach(({expandedRect:d,parent:h},m)=>{const p=h.internals.positionAbsolute,y=Es(h),x=h.origin??r,b=d.x<p.x?Math.round(Math.abs(p.x-d.x)):0,v=d.y<p.y?Math.round(Math.abs(p.y-d.y)):0,w=Math.max(y.width,Math.round(d.width)),_=Math.max(y.height,Math.round(d.height)),E=(w-y.width)*x[0],T=(_-y.height)*x[1];(b>0||v>0||E||T)&&(l.push({id:m,type:"position",position:{x:h.position.x-b+E,y:h.position.y-v+T}}),a.get(m)?.forEach(A=>{e.some(C=>C.id===A.id)||l.push({id:A.id,type:"position",position:{x:A.position.x+b,y:A.position.y+v}})})),(y.width<d.width||y.height<d.height||b||v)&&l.push({id:m,type:"dimensions",setAttributes:!0,dimensions:{width:w+(b?x[0]*b-E:0),height:_+(v?x[1]*v-T:0)}})}),l}function HH(e,t,a,r,l,u,d){const h=r?.querySelector(".xyflow__viewport");let m=!1;if(!h)return{changes:[],updatedInternals:m};const p=[],y=window.getComputedStyle(h),{m22:x}=new window.DOMMatrixReadOnly(y.transform),b=[];for(const v of e.values()){const w=t.get(v.id);if(!w)continue;if(w.hidden){t.set(w.id,{...w,internals:{...w.internals,handleBounds:void 0}}),m=!0;continue}const _=Vp(v.nodeElement),E=w.measured.width!==_.width||w.measured.height!==_.height;if(!!(_.width&&_.height&&(E||!w.internals.handleBounds||v.force))){const A=v.nodeElement.getBoundingClientRect(),C=ro(w.extent)?w.extent:u;let{positionAbsolute:k}=w.internals;w.parentId&&w.extent==="parent"?k=q1(k,_,t.get(w.parentId)):C&&(k=Ya(k,C,_));const L={...w,measured:_,internals:{...w.internals,positionAbsolute:k,handleBounds:{source:ib("source",v.nodeElement,A,x,w.id),target:ib("target",v.nodeElement,A,x,w.id)}}};t.set(w.id,L),w.parentId&&Gp(L,t,a,{nodeOrigin:l,zIndexMode:d}),m=!0,E&&(p.push({id:w.id,type:"dimensions",dimensions:_}),w.expandParent&&w.parentId&&b.push({id:w.id,parentId:w.parentId,rect:ao(L,l)}))}}if(b.length>0){const v=Kp(b,t,a,l);p.push(...v)}return{changes:p,updatedInternals:m}}async function UH({delta:e,panZoom:t,transform:a,translateExtent:r,width:l,height:u}){if(!t||!e.x&&!e.y)return Promise.resolve(!1);const d=await t.setViewportConstrained({x:a[0]+e.x,y:a[1]+e.y,zoom:a[2]},[[0,0],[l,u]],r),h=!!d&&(d.x!==a[0]||d.y!==a[1]||d.k!==a[2]);return Promise.resolve(h)}function pb(e,t,a,r,l,u){let d=l;const h=r.get(d)||new Map;r.set(d,h.set(a,t)),d=`${l}-${e}`;const m=r.get(d)||new Map;if(r.set(d,m.set(a,t)),u){d=`${l}-${e}-${u}`;const p=r.get(d)||new Map;r.set(d,p.set(a,t))}}function sw(e,t,a){e.clear(),t.clear();for(const r of a){const{source:l,target:u,sourceHandle:d=null,targetHandle:h=null}=r,m={edgeId:r.id,source:l,target:u,sourceHandle:d,targetHandle:h},p=`${l}-${d}--${u}-${h}`,y=`${u}-${h}--${l}-${d}`;pb("source",m,y,e,l,d),pb("target",m,p,e,u,h),t.set(r.id,r)}}function aw(e,t){if(!e.parentId)return!1;const a=t.get(e.parentId);return a?a.selected?!0:aw(a,t):!1}function mb(e,t,a){let r=e;do{if(r?.matches?.(t))return!0;if(r===a)return!1;r=r?.parentElement}while(r);return!1}function qH(e,t,a,r){const l=new Map;for(const[u,d]of e)if((d.selected||d.id===r)&&(!d.parentId||!aw(d,e))&&(d.draggable||t&&typeof d.draggable>"u")){const h=e.get(u);h&&l.set(u,{id:u,position:h.position||{x:0,y:0},distance:{x:a.x-h.internals.positionAbsolute.x,y:a.y-h.internals.positionAbsolute.y},extent:h.extent,parentId:h.parentId,origin:h.origin,expandParent:h.expandParent,internals:{positionAbsolute:h.internals.positionAbsolute||{x:0,y:0}},measured:{width:h.measured.width??0,height:h.measured.height??0}})}return l}function _h({nodeId:e,dragItems:t,nodeLookup:a,dragging:r=!0}){const l=[];for(const[d,h]of t){const m=a.get(d)?.internals.userNode;m&&l.push({...m,position:h.position,dragging:r})}if(!e)return[l[0],l];const u=a.get(e)?.internals.userNode;return[u?{...u,position:t.get(e)?.position||u.position,dragging:r}:l[0],l]}function IH({dragItems:e,snapGrid:t,x:a,y:r}){const l=e.values().next().value;if(!l)return null;const u={x:a-l.distance.x,y:r-l.distance.y},d=Wi(u,t);return{x:d.x-u.x,y:d.y-u.y}}function VH({onNodeMouseDown:e,getStoreItems:t,onDragStart:a,onDrag:r,onDragStop:l}){let u={x:null,y:null},d=0,h=new Map,m=!1,p={x:0,y:0},y=null,x=!1,b=null,v=!1,w=!1,_=null;function E({noDragClassName:A,handleSelector:C,domNode:k,isSelectable:L,nodeId:j,nodeClickDistance:R=0}){b=nn(k);function $({x:K,y:W}){const{nodeLookup:B,nodeExtent:G,snapGrid:O,snapToGrid:U,nodeOrigin:z,onNodeDrag:I,onSelectionDrag:q,onError:D,updateNodePositions:V}=t();u={x:K,y:W};let Z=!1;const ae=h.size>1,ne=ae&&G?rp(Qi(h)):null,de=ae&&U?IH({dragItems:h,snapGrid:O,x:K,y:W}):null;for(const[fe,ue]of h){if(!B.has(fe))continue;let pe={x:K-ue.distance.x,y:W-ue.distance.y};U&&(pe=de?{x:Math.round(pe.x+de.x),y:Math.round(pe.y+de.y)}:Wi(pe,O));let Se=null;if(ae&&G&&!ue.extent&&ne){const{positionAbsolute:we}=ue.internals,se=we.x-ne.x+G[0][0],ce=we.x+ue.measured.width-ne.x2+G[1][0],je=we.y-ne.y+G[0][1],Ce=we.y+ue.measured.height-ne.y2+G[1][1];Se=[[se,je],[ce,Ce]]}const{position:he,positionAbsolute:ye}=U1({nodeId:fe,nextPosition:pe,nodeLookup:B,nodeExtent:Se||G,nodeOrigin:z,onError:D});Z=Z||ue.position.x!==he.x||ue.position.y!==he.y,ue.position=he,ue.internals.positionAbsolute=ye}if(w=w||Z,!!Z&&(V(h,!0),_&&(r||I||!j&&q))){const[fe,ue]=_h({nodeId:j,dragItems:h,nodeLookup:B});r?.(_,h,fe,ue),I?.(_,fe,ue),j||q?.(_,ue)}}async function H(){if(!y)return;const{transform:K,panBy:W,autoPanSpeed:B,autoPanOnNodeDrag:G}=t();if(!G){m=!1,cancelAnimationFrame(d);return}const[O,U]=I1(p,y,B);(O!==0||U!==0)&&(u.x=(u.x??0)-O/K[2],u.y=(u.y??0)-U/K[2],await W({x:O,y:U})&&$(u)),d=requestAnimationFrame(H)}function F(K){const{nodeLookup:W,multiSelectionActive:B,nodesDraggable:G,transform:O,snapGrid:U,snapToGrid:z,selectNodesOnDrag:I,onNodeDragStart:q,onSelectionDragStart:D,unselectNodesAndEdges:V}=t();x=!0,(!I||!L)&&!B&&j&&(W.get(j)?.selected||V()),L&&I&&j&&e?.(j);const Z=_i(K.sourceEvent,{transform:O,snapGrid:U,snapToGrid:z,containerBounds:y});if(u=Z,h=qH(W,G,Z,j),h.size>0&&(a||q||!j&&D)){const[ae,ne]=_h({nodeId:j,dragItems:h,nodeLookup:W});a?.(K.sourceEvent,h,ae,ne),q?.(K.sourceEvent,ae,ne),j||D?.(K.sourceEvent,ne)}}const P=v1().clickDistance(R).on("start",K=>{const{domNode:W,nodeDragThreshold:B,transform:G,snapGrid:O,snapToGrid:U}=t();y=W?.getBoundingClientRect()||null,v=!1,w=!1,_=K.sourceEvent,B===0&&F(K),u=_i(K.sourceEvent,{transform:G,snapGrid:O,snapToGrid:U,containerBounds:y}),p=Tn(K.sourceEvent,y)}).on("drag",K=>{const{autoPanOnNodeDrag:W,transform:B,snapGrid:G,snapToGrid:O,nodeDragThreshold:U,nodeLookup:z}=t(),I=_i(K.sourceEvent,{transform:B,snapGrid:G,snapToGrid:O,containerBounds:y});if(_=K.sourceEvent,(K.sourceEvent.type==="touchmove"&&K.sourceEvent.touches.length>1||j&&!z.has(j))&&(v=!0),!v){if(!m&&W&&x&&(m=!0,H()),!x){const q=Tn(K.sourceEvent,y),D=q.x-p.x,V=q.y-p.y;Math.sqrt(D*D+V*V)>U&&F(K)}(u.x!==I.xSnapped||u.y!==I.ySnapped)&&h&&x&&(p=Tn(K.sourceEvent,y),$(I))}}).on("end",K=>{if(!(!x||v)&&(m=!1,x=!1,cancelAnimationFrame(d),h.size>0)){const{nodeLookup:W,updateNodePositions:B,onNodeDragStop:G,onSelectionDragStop:O}=t();if(w&&(B(h,!1),w=!1),l||G||!j&&O){const[U,z]=_h({nodeId:j,dragItems:h,nodeLookup:W,dragging:!1});l?.(K.sourceEvent,h,U,z),G?.(K.sourceEvent,U,z),j||O?.(K.sourceEvent,z)}}}).filter(K=>{const W=K.target;return!K.button&&(!A||!mb(W,`.${A}`,k))&&(!C||mb(W,C,k))});b.call(P)}function T(){b?.on(".drag",null)}return{update:E,destroy:T}}function FH(e,t,a){const r=[],l={x:e.x-a,y:e.y-a,width:a*2,height:a*2};for(const u of t.values())Li(l,ao(u))>0&&r.push(u);return r}const YH=250;function XH(e,t,a,r){let l=[],u=1/0;const d=FH(e,a,t+YH);for(const h of d){const m=[...h.internals.handleBounds?.source??[],...h.internals.handleBounds?.target??[]];for(const p of m){if(r.nodeId===p.nodeId&&r.type===p.type&&r.id===p.id)continue;const{x:y,y:x}=Xa(h,p,p.position,!0),b=Math.sqrt(Math.pow(y-e.x,2)+Math.pow(x-e.y,2));b>t||(b<u?(l=[{...p,x:y,y:x}],u=b):b===u&&l.push({...p,x:y,y:x}))}}if(!l.length)return null;if(l.length>1){const h=r.type==="source"?"target":"source";return l.find(m=>m.type===h)??l[0]}return l[0]}function rw(e,t,a,r,l,u=!1){const d=r.get(e);if(!d)return null;const h=l==="strict"?d.internals.handleBounds?.[t]:[...d.internals.handleBounds?.source??[],...d.internals.handleBounds?.target??[]],m=(a?h?.find(p=>p.id===a):h?.[0])??null;return m&&u?{...m,...Xa(d,m,m.position,!0)}:m}function ow(e,t){return e||(t?.classList.contains("target")?"target":t?.classList.contains("source")?"source":null)}function GH(e,t){let a=null;return t?a=!0:e&&!t&&(a=!1),a}const iw=()=>!0;function KH(e,{connectionMode:t,connectionRadius:a,handleId:r,nodeId:l,edgeUpdaterType:u,isTarget:d,domNode:h,nodeLookup:m,lib:p,autoPanOnConnect:y,flowId:x,panBy:b,cancelConnection:v,onConnectStart:w,onConnect:_,onConnectEnd:E,isValidConnection:T=iw,onReconnectEnd:A,updateConnection:C,getTransform:k,getFromHandle:L,autoPanSpeed:j,dragThreshold:R=1,handleDomNode:$}){const H=X1(e.target);let F=0,P;const{x:K,y:W}=Tn(e),B=ow(u,$),G=h?.getBoundingClientRect();let O=!1;if(!G||!B)return;const U=rw(l,B,r,m,t);if(!U)return;let z=Tn(e,G),I=!1,q=null,D=!1,V=null;function Z(){if(!y||!G)return;const[he,ye]=I1(z,G,j);b({x:he,y:ye}),F=requestAnimationFrame(Z)}const ae={...U,nodeId:l,type:B,position:U.position},ne=m.get(l);let fe={inProgress:!0,isValid:null,from:Xa(ne,ae,be.Left,!0),fromHandle:ae,fromPosition:ae.position,fromNode:ne,to:z,toHandle:null,toPosition:sb[ae.position],toNode:null,pointer:z};function ue(){O=!0,C(fe),w?.(e,{nodeId:l,handleId:r,handleType:B})}R===0&&ue();function pe(he){if(!O){const{x:Ce,y:wt}=Tn(he),We=Ce-K,Nt=wt-W;if(!(We*We+Nt*Nt>R*R))return;ue()}if(!L()||!ae){Se(he);return}const ye=k();z=Tn(he,G),P=XH(Zi(z,ye,!1,[1,1]),a,m,ae),I||(Z(),I=!0);const we=lw(he,{handle:P,connectionMode:t,fromNodeId:l,fromHandleId:r,fromType:d?"target":"source",isValidConnection:T,doc:H,lib:p,flowId:x,nodeLookup:m});V=we.handleDomNode,q=we.connection,D=GH(!!P,we.isValid);const se=m.get(l),ce=se?Xa(se,ae,be.Left,!0):fe.from,je={...fe,from:ce,isValid:D,to:we.toHandle&&D?bu({x:we.toHandle.x,y:we.toHandle.y},ye):z,toHandle:we.toHandle,toPosition:D&&we.toHandle?we.toHandle.position:sb[ae.position],toNode:we.toHandle?m.get(we.toHandle.nodeId):null,pointer:z};C(je),fe=je}function Se(he){if(!("touches"in he&&he.touches.length>0)){if(O){(P||V)&&q&&D&&_?.(q);const{inProgress:ye,...we}=fe,se={...we,toPosition:fe.toHandle?fe.toPosition:null};E?.(he,se),u&&A?.(he,se)}v(),cancelAnimationFrame(F),I=!1,D=!1,q=null,V=null,H.removeEventListener("mousemove",pe),H.removeEventListener("mouseup",Se),H.removeEventListener("touchmove",pe),H.removeEventListener("touchend",Se)}}H.addEventListener("mousemove",pe),H.addEventListener("mouseup",Se),H.addEventListener("touchmove",pe),H.addEventListener("touchend",Se)}function lw(e,{handle:t,connectionMode:a,fromNodeId:r,fromHandleId:l,fromType:u,doc:d,lib:h,flowId:m,isValidConnection:p=iw,nodeLookup:y}){const x=u==="target",b=t?d.querySelector(`.${h}-flow__handle[data-id="${m}-${t?.nodeId}-${t?.id}-${t?.type}"]`):null,{x:v,y:w}=Tn(e),_=d.elementFromPoint(v,w),E=_?.classList.contains(`${h}-flow__handle`)?_:b,T={handleDomNode:E,isValid:!1,connection:null,toHandle:null};if(E){const A=ow(void 0,E),C=E.getAttribute("data-nodeid"),k=E.getAttribute("data-handleid"),L=E.classList.contains("connectable"),j=E.classList.contains("connectableend");if(!C||!A)return T;const R={source:x?C:r,sourceHandle:x?k:l,target:x?r:C,targetHandle:x?l:k};T.connection=R;const H=L&&j&&(a===no.Strict?x&&A==="source"||!x&&A==="target":C!==r||k!==l);T.isValid=H&&p(R),T.toHandle=rw(C,A,k,y,a,!0)}return T}const cp={onPointerDown:KH,isValid:lw};function QH({domNode:e,panZoom:t,getTransform:a,getViewScale:r}){const l=nn(e);function u({translateExtent:h,width:m,height:p,zoomStep:y=1,pannable:x=!0,zoomable:b=!0,inversePan:v=!1}){const w=C=>{if(C.sourceEvent.type!=="wheel"||!t)return;const k=a(),L=C.sourceEvent.ctrlKey&&Bi()?10:1,j=-C.sourceEvent.deltaY*(C.sourceEvent.deltaMode===1?.05:C.sourceEvent.deltaMode?1:.002)*y,R=k[2]*Math.pow(2,j*L);t.scaleTo(R)};let _=[0,0];const E=C=>{(C.sourceEvent.type==="mousedown"||C.sourceEvent.type==="touchstart")&&(_=[C.sourceEvent.clientX??C.sourceEvent.touches[0].clientX,C.sourceEvent.clientY??C.sourceEvent.touches[0].clientY])},T=C=>{const k=a();if(C.sourceEvent.type!=="mousemove"&&C.sourceEvent.type!=="touchmove"||!t)return;const L=[C.sourceEvent.clientX??C.sourceEvent.touches[0].clientX,C.sourceEvent.clientY??C.sourceEvent.touches[0].clientY],j=[L[0]-_[0],L[1]-_[1]];_=L;const R=r()*Math.max(k[2],Math.log(k[2]))*(v?-1:1),$={x:k[0]-j[0]*R,y:k[1]-j[1]*R},H=[[0,0],[m,p]];t.setViewportConstrained({x:$.x,y:$.y,zoom:k[2]},H,h)},A=$1().on("start",E).on("zoom",x?T:null).on("zoom.wheel",b?w:null);l.call(A,{})}function d(){l.on("zoom",null)}return{update:u,destroy:d,pointer:Cn}}const Hu=e=>({x:e.x,y:e.y,zoom:e.k}),Th=({x:e,y:t,zoom:a})=>Lu.translate(e,t).scale(a),Vr=(e,t)=>e.target.closest(`.${t}`),cw=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),WH=e=>((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2,Ah=(e,t=0,a=WH,r=()=>{})=>{const l=typeof t=="number"&&t>0;return l||r(),l?e.transition().duration(t).ease(a).on("end",r):e},uw=e=>{const t=e.ctrlKey&&Bi()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t};function ZH({zoomPanValues:e,noWheelClassName:t,d3Selection:a,d3Zoom:r,panOnScrollMode:l,panOnScrollSpeed:u,zoomOnPinch:d,onPanZoomStart:h,onPanZoom:m,onPanZoomEnd:p}){return y=>{if(Vr(y,t))return y.ctrlKey&&y.preventDefault(),!1;y.preventDefault(),y.stopImmediatePropagation();const x=a.property("__zoom").k||1;if(y.ctrlKey&&d){const E=Cn(y),T=uw(y),A=x*Math.pow(2,T);r.scaleTo(a,A,E,y);return}const b=y.deltaMode===1?20:1;let v=l===qa.Vertical?0:y.deltaX*b,w=l===qa.Horizontal?0:y.deltaY*b;!Bi()&&y.shiftKey&&l!==qa.Vertical&&(v=y.deltaY*b,w=0),r.translateBy(a,-(v/x)*u,-(w/x)*u,{internal:!0});const _=Hu(a.property("__zoom"));clearTimeout(e.panScrollTimeout),e.isPanScrolling?(m?.(y,_),e.panScrollTimeout=setTimeout(()=>{p?.(y,_),e.isPanScrolling=!1},150)):(e.isPanScrolling=!0,h?.(y,_))}}function JH({noWheelClassName:e,preventScrolling:t,d3ZoomHandler:a}){return function(r,l){const u=r.type==="wheel",d=!t&&u&&!r.ctrlKey,h=Vr(r,e);if(r.ctrlKey&&u&&h&&r.preventDefault(),d||h)return null;r.preventDefault(),a.call(this,r,l)}}function eU({zoomPanValues:e,onDraggingChange:t,onPanZoomStart:a}){return r=>{if(r.sourceEvent?.internal)return;const l=Hu(r.transform);e.mouseButton=r.sourceEvent?.button||0,e.isZoomingOrPanning=!0,e.prevViewport=l,r.sourceEvent?.type==="mousedown"&&t(!0),a&&a?.(r.sourceEvent,l)}}function tU({zoomPanValues:e,panOnDrag:t,onPaneContextMenu:a,onTransformChange:r,onPanZoom:l}){return u=>{e.usedRightMouseButton=!!(a&&cw(t,e.mouseButton??0)),u.sourceEvent?.sync||r([u.transform.x,u.transform.y,u.transform.k]),l&&!u.sourceEvent?.internal&&l?.(u.sourceEvent,Hu(u.transform))}}function nU({zoomPanValues:e,panOnDrag:t,panOnScroll:a,onDraggingChange:r,onPanZoomEnd:l,onPaneContextMenu:u}){return d=>{if(!d.sourceEvent?.internal&&(e.isZoomingOrPanning=!1,u&&cw(t,e.mouseButton??0)&&!e.usedRightMouseButton&&d.sourceEvent&&u(d.sourceEvent),e.usedRightMouseButton=!1,r(!1),l)){const h=Hu(d.transform);e.prevViewport=h,clearTimeout(e.timerId),e.timerId=setTimeout(()=>{l?.(d.sourceEvent,h)},a?150:0)}}}function sU({zoomActivationKeyPressed:e,zoomOnScroll:t,zoomOnPinch:a,panOnDrag:r,panOnScroll:l,zoomOnDoubleClick:u,userSelectionActive:d,noWheelClassName:h,noPanClassName:m,lib:p,connectionInProgress:y}){return x=>{const b=e||t,v=a&&x.ctrlKey,w=x.type==="wheel";if(x.button===1&&x.type==="mousedown"&&(Vr(x,`${p}-flow__node`)||Vr(x,`${p}-flow__edge`)))return!0;if(!r&&!b&&!l&&!u&&!a||d||y&&!w||Vr(x,h)&&w||Vr(x,m)&&(!w||l&&w&&!e)||!a&&x.ctrlKey&&w)return!1;if(!a&&x.type==="touchstart"&&x.touches?.length>1)return x.preventDefault(),!1;if(!b&&!l&&!v&&w||!r&&(x.type==="mousedown"||x.type==="touchstart")||Array.isArray(r)&&!r.includes(x.button)&&x.type==="mousedown")return!1;const _=Array.isArray(r)&&r.includes(x.button)||!x.button||x.button<=1;return(!x.ctrlKey||w)&&_}}function aU({domNode:e,minZoom:t,maxZoom:a,translateExtent:r,viewport:l,onPanZoom:u,onPanZoomStart:d,onPanZoomEnd:h,onDraggingChange:m}){const p={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},y=e.getBoundingClientRect(),x=$1().scaleExtent([t,a]).translateExtent(r),b=nn(e).call(x);A({x:l.x,y:l.y,zoom:so(l.zoom,t,a)},[[0,0],[y.width,y.height]],r);const v=b.on("wheel.zoom"),w=b.on("dblclick.zoom");x.wheelDelta(uw);function _(P,K){return b?new Promise(W=>{x?.interpolate(K?.interpolate==="linear"?Ei:Kc).transform(Ah(b,K?.duration,K?.ease,()=>W(!0)),P)}):Promise.resolve(!1)}function E({noWheelClassName:P,noPanClassName:K,onPaneContextMenu:W,userSelectionActive:B,panOnScroll:G,panOnDrag:O,panOnScrollMode:U,panOnScrollSpeed:z,preventScrolling:I,zoomOnPinch:q,zoomOnScroll:D,zoomOnDoubleClick:V,zoomActivationKeyPressed:Z,lib:ae,onTransformChange:ne,connectionInProgress:de,paneClickDistance:fe,selectionOnDrag:ue}){B&&!p.isZoomingOrPanning&&T();const pe=G&&!Z&&!B;x.clickDistance(ue?1/0:!_n(fe)||fe<0?0:fe);const Se=pe?ZH({zoomPanValues:p,noWheelClassName:P,d3Selection:b,d3Zoom:x,panOnScrollMode:U,panOnScrollSpeed:z,zoomOnPinch:q,onPanZoomStart:d,onPanZoom:u,onPanZoomEnd:h}):JH({noWheelClassName:P,preventScrolling:I,d3ZoomHandler:v});if(b.on("wheel.zoom",Se,{passive:!1}),!B){const ye=eU({zoomPanValues:p,onDraggingChange:m,onPanZoomStart:d});x.on("start",ye);const we=tU({zoomPanValues:p,panOnDrag:O,onPaneContextMenu:!!W,onPanZoom:u,onTransformChange:ne});x.on("zoom",we);const se=nU({zoomPanValues:p,panOnDrag:O,panOnScroll:G,onPaneContextMenu:W,onPanZoomEnd:h,onDraggingChange:m});x.on("end",se)}const he=sU({zoomActivationKeyPressed:Z,panOnDrag:O,zoomOnScroll:D,panOnScroll:G,zoomOnDoubleClick:V,zoomOnPinch:q,userSelectionActive:B,noPanClassName:K,noWheelClassName:P,lib:ae,connectionInProgress:de});x.filter(he),V?b.on("dblclick.zoom",w):b.on("dblclick.zoom",null)}function T(){x.on("zoom",null)}async function A(P,K,W){const B=Th(P),G=x?.constrain()(B,K,W);return G&&await _(G),new Promise(O=>O(G))}async function C(P,K){const W=Th(P);return await _(W,K),new Promise(B=>B(W))}function k(P){if(b){const K=Th(P),W=b.property("__zoom");(W.k!==P.zoom||W.x!==P.x||W.y!==P.y)&&x?.transform(b,K,null,{sync:!0})}}function L(){const P=b?O1(b.node()):{x:0,y:0,k:1};return{x:P.x,y:P.y,zoom:P.k}}function j(P,K){return b?new Promise(W=>{x?.interpolate(K?.interpolate==="linear"?Ei:Kc).scaleTo(Ah(b,K?.duration,K?.ease,()=>W(!0)),P)}):Promise.resolve(!1)}function R(P,K){return b?new Promise(W=>{x?.interpolate(K?.interpolate==="linear"?Ei:Kc).scaleBy(Ah(b,K?.duration,K?.ease,()=>W(!0)),P)}):Promise.resolve(!1)}function $(P){x?.scaleExtent(P)}function H(P){x?.translateExtent(P)}function F(P){const K=!_n(P)||P<0?0:P;x?.clickDistance(K)}return{update:E,destroy:T,setViewport:C,setViewportConstrained:A,getViewport:L,scaleTo:j,scaleBy:R,setScaleExtent:$,setTranslateExtent:H,syncViewport:k,setClickDistance:F}}var oo;(function(e){e.Line="line",e.Handle="handle"})(oo||(oo={}));function rU({width:e,prevWidth:t,height:a,prevHeight:r,affectsX:l,affectsY:u}){const d=e-t,h=a-r,m=[d>0?1:d<0?-1:0,h>0?1:h<0?-1:0];return d&&l&&(m[0]=m[0]*-1),h&&u&&(m[1]=m[1]*-1),m}function gb(e){const t=e.includes("right")||e.includes("left"),a=e.includes("bottom")||e.includes("top"),r=e.includes("left"),l=e.includes("top");return{isHorizontal:t,isVertical:a,affectsX:r,affectsY:l}}function na(e,t){return Math.max(0,t-e)}function sa(e,t){return Math.max(0,e-t)}function $c(e,t,a){return Math.max(0,t-e,e-a)}function xb(e,t){return e?!t:t}function oU(e,t,a,r,l,u,d,h){let{affectsX:m,affectsY:p}=t;const{isHorizontal:y,isVertical:x}=t,b=y&&x,{xSnapped:v,ySnapped:w}=a,{minWidth:_,maxWidth:E,minHeight:T,maxHeight:A}=r,{x:C,y:k,width:L,height:j,aspectRatio:R}=e;let $=Math.floor(y?v-e.pointerX:0),H=Math.floor(x?w-e.pointerY:0);const F=L+(m?-$:$),P=j+(p?-H:H),K=-u[0]*L,W=-u[1]*j;let B=$c(F,_,E),G=$c(P,T,A);if(d){let z=0,I=0;m&&$<0?z=na(C+$+K,d[0][0]):!m&&$>0&&(z=sa(C+F+K,d[1][0])),p&&H<0?I=na(k+H+W,d[0][1]):!p&&H>0&&(I=sa(k+P+W,d[1][1])),B=Math.max(B,z),G=Math.max(G,I)}if(h){let z=0,I=0;m&&$>0?z=sa(C+$,h[0][0]):!m&&$<0&&(z=na(C+F,h[1][0])),p&&H>0?I=sa(k+H,h[0][1]):!p&&H<0&&(I=na(k+P,h[1][1])),B=Math.max(B,z),G=Math.max(G,I)}if(l){if(y){const z=$c(F/R,T,A)*R;if(B=Math.max(B,z),d){let I=0;!m&&!p||m&&!p&&b?I=sa(k+W+F/R,d[1][1])*R:I=na(k+W+(m?$:-$)/R,d[0][1])*R,B=Math.max(B,I)}if(h){let I=0;!m&&!p||m&&!p&&b?I=na(k+F/R,h[1][1])*R:I=sa(k+(m?$:-$)/R,h[0][1])*R,B=Math.max(B,I)}}if(x){const z=$c(P*R,_,E)/R;if(G=Math.max(G,z),d){let I=0;!m&&!p||p&&!m&&b?I=sa(C+P*R+K,d[1][0])/R:I=na(C+(p?H:-H)*R+K,d[0][0])/R,G=Math.max(G,I)}if(h){let I=0;!m&&!p||p&&!m&&b?I=na(C+P*R,h[1][0])/R:I=sa(C+(p?H:-H)*R,h[0][0])/R,G=Math.max(G,I)}}}H=H+(H<0?G:-G),$=$+($<0?B:-B),l&&(b?F>P*R?H=(xb(m,p)?-$:$)/R:$=(xb(m,p)?-H:H)*R:y?(H=$/R,p=m):($=H*R,m=p));const O=m?C+$:C,U=p?k+H:k;return{width:L+(m?-$:$),height:j+(p?-H:H),x:u[0]*$*(m?-1:1)+O,y:u[1]*H*(p?-1:1)+U}}const dw={width:0,height:0,x:0,y:0},iU={...dw,pointerX:0,pointerY:0,aspectRatio:1};function lU(e){return[[0,0],[e.measured.width,e.measured.height]]}function cU(e,t,a){const r=t.position.x+e.position.x,l=t.position.y+e.position.y,u=e.measured.width??0,d=e.measured.height??0,h=a[0]*u,m=a[1]*d;return[[r-h,l-m],[r+u-h,l+d-m]]}function uU({domNode:e,nodeId:t,getStoreItems:a,onChange:r,onEnd:l}){const u=nn(e);let d={controlDirection:gb("bottom-right"),boundaries:{minWidth:0,minHeight:0,maxWidth:Number.MAX_VALUE,maxHeight:Number.MAX_VALUE},resizeDirection:void 0,keepAspectRatio:!1};function h({controlPosition:p,boundaries:y,keepAspectRatio:x,resizeDirection:b,onResizeStart:v,onResize:w,onResizeEnd:_,shouldResize:E}){let T={...dw},A={...iU};d={boundaries:y,resizeDirection:b,keepAspectRatio:x,controlDirection:gb(p)};let C,k=null,L=[],j,R,$,H=!1;const F=v1().on("start",P=>{const{nodeLookup:K,transform:W,snapGrid:B,snapToGrid:G,nodeOrigin:O,paneDomNode:U}=a();if(C=K.get(t),!C)return;k=U?.getBoundingClientRect()??null;const{xSnapped:z,ySnapped:I}=_i(P.sourceEvent,{transform:W,snapGrid:B,snapToGrid:G,containerBounds:k});T={width:C.measured.width??0,height:C.measured.height??0,x:C.position.x??0,y:C.position.y??0},A={...T,pointerX:z,pointerY:I,aspectRatio:T.width/T.height},j=void 0,C.parentId&&(C.extent==="parent"||C.expandParent)&&(j=K.get(C.parentId),R=j&&C.extent==="parent"?lU(j):void 0),L=[],$=void 0;for(const[q,D]of K)if(D.parentId===t&&(L.push({id:q,position:{...D.position},extent:D.extent}),D.extent==="parent"||D.expandParent)){const V=cU(D,C,D.origin??O);$?$=[[Math.min(V[0][0],$[0][0]),Math.min(V[0][1],$[0][1])],[Math.max(V[1][0],$[1][0]),Math.max(V[1][1],$[1][1])]]:$=V}v?.(P,{...T})}).on("drag",P=>{const{transform:K,snapGrid:W,snapToGrid:B,nodeOrigin:G}=a(),O=_i(P.sourceEvent,{transform:K,snapGrid:W,snapToGrid:B,containerBounds:k}),U=[];if(!C)return;const{x:z,y:I,width:q,height:D}=T,V={},Z=C.origin??G,{width:ae,height:ne,x:de,y:fe}=oU(A,d.controlDirection,O,d.boundaries,d.keepAspectRatio,Z,R,$),ue=ae!==q,pe=ne!==D,Se=de!==z&&ue,he=fe!==I&&pe;if(!Se&&!he&&!ue&&!pe)return;if((Se||he||Z[0]===1||Z[1]===1)&&(V.x=Se?de:T.x,V.y=he?fe:T.y,T.x=V.x,T.y=V.y,L.length>0)){const ce=de-z,je=fe-I;for(const Ce of L)Ce.position={x:Ce.position.x-ce+Z[0]*(ae-q),y:Ce.position.y-je+Z[1]*(ne-D)},U.push(Ce)}if((ue||pe)&&(V.width=ue&&(!d.resizeDirection||d.resizeDirection==="horizontal")?ae:T.width,V.height=pe&&(!d.resizeDirection||d.resizeDirection==="vertical")?ne:T.height,T.width=V.width,T.height=V.height),j&&C.expandParent){const ce=Z[0]*(V.width??0);V.x&&V.x<ce&&(T.x=ce,A.x=A.x-(V.x-ce));const je=Z[1]*(V.height??0);V.y&&V.y<je&&(T.y=je,A.y=A.y-(V.y-je))}const ye=rU({width:T.width,prevWidth:q,height:T.height,prevHeight:D,affectsX:d.controlDirection.affectsX,affectsY:d.controlDirection.affectsY}),we={...T,direction:ye};E?.(P,we)!==!1&&(H=!0,w?.(P,we),r(V,U))}).on("end",P=>{H&&(_?.(P,{...T}),l?.({...T}),H=!1)});u.call(F)}function m(){u.on(".drag",null)}return{update:h,destroy:m}}var kh={exports:{}},Mh={};var yb;function dU(){if(yb)return Mh;yb=1;var e=Hi(),t=Sv();function a(p,y){return p===y&&(p!==0||1/p===1/y)||p!==p&&y!==y}var r=typeof Object.is=="function"?Object.is:a,l=t.useSyncExternalStore,u=e.useRef,d=e.useEffect,h=e.useMemo,m=e.useDebugValue;return Mh.useSyncExternalStoreWithSelector=function(p,y,x,b,v){var w=u(null);if(w.current===null){var _={hasValue:!1,value:null};w.current=_}else _=w.current;w=h(function(){function T(j){if(!A){if(A=!0,C=j,j=b(j),v!==void 0&&_.hasValue){var R=_.value;if(v(R,j))return k=R}return k=j}if(R=k,r(C,j))return R;var $=b(j);return v!==void 0&&v(R,$)?(C=j,R):(C=j,k=$)}var A=!1,C,k,L=x===void 0?null:x;return[function(){return T(y())},L===null?void 0:function(){return T(L())}]},[y,x,b,v]);var E=l(p,w[0],w[1]);return d(function(){_.hasValue=!0,_.value=E},[E]),m(E),E},Mh}var bb;function fU(){return bb||(bb=1,kh.exports=dU()),kh.exports}var hU=fU();const pU=dp(hU),mU={},vb=e=>{let t;const a=new Set,r=(y,x)=>{const b=typeof y=="function"?y(t):y;if(!Object.is(b,t)){const v=t;t=x??(typeof b!="object"||b===null)?b:Object.assign({},t,b),a.forEach(w=>w(t,v))}},l=()=>t,m={setState:r,getState:l,getInitialState:()=>p,subscribe:y=>(a.add(y),()=>a.delete(y)),destroy:()=>{(mU?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),a.clear()}},p=t=e(r,l,m);return m},gU=e=>e?vb(e):vb,{useDebugValue:xU}=Ir,{useSyncExternalStoreWithSelector:yU}=pU,bU=e=>e;function fw(e,t=bU,a){const r=yU(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,a);return xU(r),r}const wb=(e,t)=>{const a=gU(e),r=(l,u=t)=>fw(a,l,u);return Object.assign(r,a),r},vU=(e,t)=>e?wb(e,t):wb;function et(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[r,l]of e)if(!Object.is(l,t.get(r)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}const a=Object.keys(e);if(a.length!==Object.keys(t).length)return!1;for(const r of a)if(!Object.prototype.hasOwnProperty.call(t,r)||!Object.is(e[r],t[r]))return!1;return!0}const Uu=S.createContext(null),wU=Uu.Provider,hw=Yn.error001();function Be(e,t){const a=S.useContext(Uu);if(a===null)throw new Error(hw);return fw(a,e,t)}function tt(){const e=S.useContext(Uu);if(e===null)throw new Error(hw);return S.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe}),[e])}const Nb={display:"none"},NU={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},pw="react-flow__node-desc",mw="react-flow__edge-desc",jU="react-flow__aria-live",SU=e=>e.ariaLiveMessage,CU=e=>e.ariaLabelConfig;function EU({rfId:e}){const t=Be(SU);return o.jsx("div",{id:`${jU}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:NU,children:t})}function _U({rfId:e,disableKeyboardA11y:t}){const a=Be(CU);return o.jsxs(o.Fragment,{children:[o.jsx("div",{id:`${pw}-${e}`,style:Nb,children:t?a["node.a11yDescription.default"]:a["node.a11yDescription.keyboardDisabled"]}),o.jsx("div",{id:`${mw}-${e}`,style:Nb,children:a["edge.a11yDescription.default"]}),!t&&o.jsx(EU,{rfId:e})]})}const qu=S.forwardRef(({position:e="top-left",children:t,className:a,style:r,...l},u)=>{const d=`${e}`.split("-");return o.jsx("div",{className:pt(["react-flow__panel",a,...d]),style:r,ref:u,...l,children:t})});qu.displayName="Panel";function TU({proOptions:e,position:t="bottom-right"}){return e?.hideAttribution?null:o.jsx(qu,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:o.jsx("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const AU=e=>{const t=[],a=[];for(const[,r]of e.nodeLookup)r.selected&&t.push(r.internals.userNode);for(const[,r]of e.edgeLookup)r.selected&&a.push(r);return{selectedNodes:t,selectedEdges:a}},zc=e=>e.id;function kU(e,t){return et(e.selectedNodes.map(zc),t.selectedNodes.map(zc))&&et(e.selectedEdges.map(zc),t.selectedEdges.map(zc))}function MU({onSelectionChange:e}){const t=tt(),{selectedNodes:a,selectedEdges:r}=Be(AU,kU);return S.useEffect(()=>{const l={nodes:a,edges:r};e?.(l),t.getState().onSelectionChangeHandlers.forEach(u=>u(l))},[a,r,e]),null}const DU=e=>!!e.onSelectionChangeHandlers;function RU({onSelectionChange:e}){const t=Be(DU);return e||t?o.jsx(MU,{onSelectionChange:e}):null}const gw=[0,0],OU={x:0,y:0,zoom:1},$U=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","autoPanOnNodeFocus","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","connectionDragThreshold","onBeforeDelete","debug","autoPanSpeed","ariaLabelConfig","zIndexMode"],jb=[...$U,"rfId"],zU=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges}),Sb={translateExtent:$i,nodeOrigin:gw,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1"};function LU(e){const{setNodes:t,setEdges:a,setMinZoom:r,setMaxZoom:l,setTranslateExtent:u,setNodeExtent:d,reset:h,setDefaultNodesAndEdges:m}=Be(zU,et),p=tt();S.useEffect(()=>(m(e.defaultNodes,e.defaultEdges),()=>{y.current=Sb,h()}),[]);const y=S.useRef(Sb);return S.useEffect(()=>{for(const x of jb){const b=e[x],v=y.current[x];b!==v&&(typeof e[x]>"u"||(x==="nodes"?t(b):x==="edges"?a(b):x==="minZoom"?r(b):x==="maxZoom"?l(b):x==="translateExtent"?u(b):x==="nodeExtent"?d(b):x==="ariaLabelConfig"?p.setState({ariaLabelConfig:jH(b)}):x==="fitView"?p.setState({fitViewQueued:b}):x==="fitViewOptions"?p.setState({fitViewOptions:b}):p.setState({[x]:b})))}y.current=e},jb.map(x=>e[x])),null}function Cb(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function BU(e){const[t,a]=S.useState(e==="system"?null:e);return S.useEffect(()=>{if(e!=="system"){a(e);return}const r=Cb(),l=()=>a(r?.matches?"dark":"light");return l(),r?.addEventListener("change",l),()=>{r?.removeEventListener("change",l)}},[e]),t!==null?t:Cb()?.matches?"dark":"light"}const Eb=typeof document<"u"?document:null;function Pi(e=null,t={target:Eb,actInsideInputWithModifier:!0}){const[a,r]=S.useState(!1),l=S.useRef(!1),u=S.useRef(new Set([])),[d,h]=S.useMemo(()=>{if(e!==null){const p=(Array.isArray(e)?e:[e]).filter(x=>typeof x=="string").map(x=>x.replace("+",`
`).replace(`

`,`
+`).split(`
`)),y=p.reduce((x,b)=>x.concat(...b),[]);return[p,y]}return[[],[]]},[e]);return S.useEffect(()=>{const m=t?.target??Eb,p=t?.actInsideInputWithModifier??!0;if(e!==null){const y=v=>{if(l.current=v.ctrlKey||v.metaKey||v.shiftKey||v.altKey,(!l.current||l.current&&!p)&&G1(v))return!1;const _=Tb(v.code,h);if(u.current.add(v[_]),_b(d,u.current,!1)){const E=v.composedPath?.()?.[0]||v.target,T=E?.nodeName==="BUTTON"||E?.nodeName==="A";t.preventDefault!==!1&&(l.current||!T)&&v.preventDefault(),r(!0)}},x=v=>{const w=Tb(v.code,h);_b(d,u.current,!0)?(r(!1),u.current.clear()):u.current.delete(v[w]),v.key==="Meta"&&u.current.clear(),l.current=!1},b=()=>{u.current.clear(),r(!1)};return m?.addEventListener("keydown",y),m?.addEventListener("keyup",x),window.addEventListener("blur",b),window.addEventListener("contextmenu",b),()=>{m?.removeEventListener("keydown",y),m?.removeEventListener("keyup",x),window.removeEventListener("blur",b),window.removeEventListener("contextmenu",b)}}},[e,r]),a}function _b(e,t,a){return e.filter(r=>a||r.length===t.size).some(r=>r.every(l=>t.has(l)))}function Tb(e,t){return t.includes(e)?"code":"key"}const PU=()=>{const e=tt();return S.useMemo(()=>({zoomIn:t=>{const{panZoom:a}=e.getState();return a?a.scaleBy(1.2,{duration:t?.duration}):Promise.resolve(!1)},zoomOut:t=>{const{panZoom:a}=e.getState();return a?a.scaleBy(1/1.2,{duration:t?.duration}):Promise.resolve(!1)},zoomTo:(t,a)=>{const{panZoom:r}=e.getState();return r?r.scaleTo(t,{duration:a?.duration}):Promise.resolve(!1)},getZoom:()=>e.getState().transform[2],setViewport:async(t,a)=>{const{transform:[r,l,u],panZoom:d}=e.getState();return d?(await d.setViewport({x:t.x??r,y:t.y??l,zoom:t.zoom??u},a),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[t,a,r]=e.getState().transform;return{x:t,y:a,zoom:r}},setCenter:async(t,a,r)=>e.getState().setCenter(t,a,r),fitBounds:async(t,a)=>{const{width:r,height:l,minZoom:u,maxZoom:d,panZoom:h}=e.getState(),m=Ip(t,r,l,u,d,a?.padding??.1);return h?(await h.setViewport(m,{duration:a?.duration,ease:a?.ease,interpolate:a?.interpolate}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(t,a={})=>{const{transform:r,snapGrid:l,snapToGrid:u,domNode:d}=e.getState();if(!d)return t;const{x:h,y:m}=d.getBoundingClientRect(),p={x:t.x-h,y:t.y-m},y=a.snapGrid??l,x=a.snapToGrid??u;return Zi(p,r,x,y)},flowToScreenPosition:t=>{const{transform:a,domNode:r}=e.getState();if(!r)return t;const{x:l,y:u}=r.getBoundingClientRect(),d=bu(t,a);return{x:d.x+l,y:d.y+u}}}),[])};function xw(e,t){const a=[],r=new Map,l=[];for(const u of e)if(u.type==="add"){l.push(u);continue}else if(u.type==="remove"||u.type==="replace")r.set(u.id,[u]);else{const d=r.get(u.id);d?d.push(u):r.set(u.id,[u])}for(const u of t){const d=r.get(u.id);if(!d){a.push(u);continue}if(d[0].type==="remove")continue;if(d[0].type==="replace"){a.push({...d[0].item});continue}const h={...u};for(const m of d)HU(m,h);a.push(h)}return l.length&&l.forEach(u=>{u.index!==void 0?a.splice(u.index,0,{...u.item}):a.push({...u.item})}),a}function HU(e,t){switch(e.type){case"select":{t.selected=e.selected;break}case"position":{typeof e.position<"u"&&(t.position=e.position),typeof e.dragging<"u"&&(t.dragging=e.dragging);break}case"dimensions":{typeof e.dimensions<"u"&&(t.measured={...e.dimensions},e.setAttributes&&((e.setAttributes===!0||e.setAttributes==="width")&&(t.width=e.dimensions.width),(e.setAttributes===!0||e.setAttributes==="height")&&(t.height=e.dimensions.height))),typeof e.resizing=="boolean"&&(t.resizing=e.resizing);break}}}function yw(e,t){return xw(e,t)}function bw(e,t){return xw(e,t)}function La(e,t){return{id:e,type:"select",selected:t}}function Fr(e,t=new Set,a=!1){const r=[];for(const[l,u]of e){const d=t.has(l);!(u.selected===void 0&&!d)&&u.selected!==d&&(a&&(u.selected=d),r.push(La(u.id,d)))}return r}function Ab({items:e=[],lookup:t}){const a=[],r=new Map(e.map(l=>[l.id,l]));for(const[l,u]of e.entries()){const d=t.get(u.id),h=d?.internals?.userNode??d;h!==void 0&&h!==u&&a.push({id:u.id,item:u,type:"replace"}),h===void 0&&a.push({item:u,type:"add",index:l})}for(const[l]of t)r.get(l)===void 0&&a.push({id:l,type:"remove"});return a}function kb(e){return{id:e.id,type:"remove"}}const Mb=e=>hH(e),UU=e=>H1(e);function vw(e){return S.forwardRef(e)}const qU=typeof window<"u"?S.useLayoutEffect:S.useEffect;function Db(e){const[t,a]=S.useState(BigInt(0)),[r]=S.useState(()=>IU(()=>a(l=>l+BigInt(1))));return qU(()=>{const l=r.get();l.length&&(e(l),r.reset())},[t]),r}function IU(e){let t=[];return{get:()=>t,reset:()=>{t=[]},push:a=>{t.push(a),e()}}}const ww=S.createContext(null);function VU({children:e}){const t=tt(),a=S.useCallback(h=>{const{nodes:m=[],setNodes:p,hasDefaultNodes:y,onNodesChange:x,nodeLookup:b,fitViewQueued:v,onNodesChangeMiddlewareMap:w}=t.getState();let _=m;for(const T of h)_=typeof T=="function"?T(_):T;let E=Ab({items:_,lookup:b});for(const T of w.values())E=T(E);y&&p(_),E.length>0?x?.(E):v&&window.requestAnimationFrame(()=>{const{fitViewQueued:T,nodes:A,setNodes:C}=t.getState();T&&C(A)})},[]),r=Db(a),l=S.useCallback(h=>{const{edges:m=[],setEdges:p,hasDefaultEdges:y,onEdgesChange:x,edgeLookup:b}=t.getState();let v=m;for(const w of h)v=typeof w=="function"?w(v):w;y?p(v):x&&x(Ab({items:v,lookup:b}))},[]),u=Db(l),d=S.useMemo(()=>({nodeQueue:r,edgeQueue:u}),[]);return o.jsx(ww.Provider,{value:d,children:e})}function FU(){const e=S.useContext(ww);if(!e)throw new Error("useBatchContext must be used within a BatchProvider");return e}const YU=e=>!!e.panZoom;function Qp(){const e=PU(),t=tt(),a=FU(),r=Be(YU),l=S.useMemo(()=>{const u=x=>t.getState().nodeLookup.get(x),d=x=>{a.nodeQueue.push(x)},h=x=>{a.edgeQueue.push(x)},m=x=>{const{nodeLookup:b,nodeOrigin:v}=t.getState(),w=Mb(x)?x:b.get(x.id),_=w.parentId?Y1(w.position,w.measured,w.parentId,b,v):w.position,E={...w,position:_,width:w.measured?.width??w.width,height:w.measured?.height??w.height};return ao(E)},p=(x,b,v={replace:!1})=>{d(w=>w.map(_=>{if(_.id===x){const E=typeof b=="function"?b(_):b;return v.replace&&Mb(E)?E:{..._,...E}}return _}))},y=(x,b,v={replace:!1})=>{h(w=>w.map(_=>{if(_.id===x){const E=typeof b=="function"?b(_):b;return v.replace&&UU(E)?E:{..._,...E}}return _}))};return{getNodes:()=>t.getState().nodes.map(x=>({...x})),getNode:x=>u(x)?.internals.userNode,getInternalNode:u,getEdges:()=>{const{edges:x=[]}=t.getState();return x.map(b=>({...b}))},getEdge:x=>t.getState().edgeLookup.get(x),setNodes:d,setEdges:h,addNodes:x=>{const b=Array.isArray(x)?x:[x];a.nodeQueue.push(v=>[...v,...b])},addEdges:x=>{const b=Array.isArray(x)?x:[x];a.edgeQueue.push(v=>[...v,...b])},toObject:()=>{const{nodes:x=[],edges:b=[],transform:v}=t.getState(),[w,_,E]=v;return{nodes:x.map(T=>({...T})),edges:b.map(T=>({...T})),viewport:{x:w,y:_,zoom:E}}},deleteElements:async({nodes:x=[],edges:b=[]})=>{const{nodes:v,edges:w,onNodesDelete:_,onEdgesDelete:E,triggerNodeChanges:T,triggerEdgeChanges:A,onDelete:C,onBeforeDelete:k}=t.getState(),{nodes:L,edges:j}=await yH({nodesToRemove:x,edgesToRemove:b,nodes:v,edges:w,onBeforeDelete:k}),R=j.length>0,$=L.length>0;if(R){const H=j.map(kb);E?.(j),A(H)}if($){const H=L.map(kb);_?.(L),T(H)}return($||R)&&C?.({nodes:L,edges:j}),{deletedNodes:L,deletedEdges:j}},getIntersectingNodes:(x,b=!0,v)=>{const w=rb(x),_=w?x:m(x),E=v!==void 0;return _?(v||t.getState().nodes).filter(T=>{const A=t.getState().nodeLookup.get(T.id);if(A&&!w&&(T.id===x.id||!A.internals.positionAbsolute))return!1;const C=ao(E?T:A),k=Li(C,_);return b&&k>0||k>=C.width*C.height||k>=_.width*_.height}):[]},isNodeIntersecting:(x,b,v=!0)=>{const _=rb(x)?x:m(x);if(!_)return!1;const E=Li(_,b);return v&&E>0||E>=b.width*b.height||E>=_.width*_.height},updateNode:p,updateNodeData:(x,b,v={replace:!1})=>{p(x,w=>{const _=typeof b=="function"?b(w):b;return v.replace?{...w,data:_}:{...w,data:{...w.data,..._}}},v)},updateEdge:y,updateEdgeData:(x,b,v={replace:!1})=>{y(x,w=>{const _=typeof b=="function"?b(w):b;return v.replace?{...w,data:_}:{...w,data:{...w.data,..._}}},v)},getNodesBounds:x=>{const{nodeLookup:b,nodeOrigin:v}=t.getState();return pH(x,{nodeLookup:b,nodeOrigin:v})},getHandleConnections:({type:x,id:b,nodeId:v})=>Array.from(t.getState().connectionLookup.get(`${v}-${x}${b?`-${b}`:""}`)?.values()??[]),getNodeConnections:({type:x,handleId:b,nodeId:v})=>Array.from(t.getState().connectionLookup.get(`${v}${x?b?`-${x}-${b}`:`-${x}`:""}`)?.values()??[]),fitView:async x=>{const b=t.getState().fitViewResolver??NH();return t.setState({fitViewQueued:!0,fitViewOptions:x,fitViewResolver:b}),a.nodeQueue.push(v=>[...v]),b.promise}}},[]);return S.useMemo(()=>({...l,...e,viewportInitialized:r}),[r])}const Rb=e=>e.selected,XU=typeof window<"u"?window:void 0;function GU({deleteKeyCode:e,multiSelectionKeyCode:t}){const a=tt(),{deleteElements:r}=Qp(),l=Pi(e,{actInsideInputWithModifier:!1}),u=Pi(t,{target:XU});S.useEffect(()=>{if(l){const{edges:d,nodes:h}=a.getState();r({nodes:h.filter(Rb),edges:d.filter(Rb)}),a.setState({nodesSelectionActive:!1})}},[l]),S.useEffect(()=>{a.setState({multiSelectionActive:u})},[u])}function KU(e){const t=tt();S.useEffect(()=>{const a=()=>{if(!e.current||!(e.current.checkVisibility?.()??!0))return!1;const r=Vp(e.current);(r.height===0||r.width===0)&&t.getState().onError?.("004",Yn.error004()),t.setState({width:r.width||500,height:r.height||500})};if(e.current){a(),window.addEventListener("resize",a);const r=new ResizeObserver(()=>a());return r.observe(e.current),()=>{window.removeEventListener("resize",a),r&&e.current&&r.unobserve(e.current)}}},[])}const Iu={position:"absolute",width:"100%",height:"100%",top:0,left:0},QU=e=>({userSelectionActive:e.userSelectionActive,lib:e.lib,connectionInProgress:e.connection.inProgress});function WU({onPaneContextMenu:e,zoomOnScroll:t=!0,zoomOnPinch:a=!0,panOnScroll:r=!1,panOnScrollSpeed:l=.5,panOnScrollMode:u=qa.Free,zoomOnDoubleClick:d=!0,panOnDrag:h=!0,defaultViewport:m,translateExtent:p,minZoom:y,maxZoom:x,zoomActivationKeyCode:b,preventScrolling:v=!0,children:w,noWheelClassName:_,noPanClassName:E,onViewportChange:T,isControlledViewport:A,paneClickDistance:C,selectionOnDrag:k}){const L=tt(),j=S.useRef(null),{userSelectionActive:R,lib:$,connectionInProgress:H}=Be(QU,et),F=Pi(b),P=S.useRef();KU(j);const K=S.useCallback(W=>{T?.({x:W[0],y:W[1],zoom:W[2]}),A||L.setState({transform:W})},[T,A]);return S.useEffect(()=>{if(j.current){P.current=aU({domNode:j.current,minZoom:y,maxZoom:x,translateExtent:p,viewport:m,onDraggingChange:O=>L.setState({paneDragging:O}),onPanZoomStart:(O,U)=>{const{onViewportChangeStart:z,onMoveStart:I}=L.getState();I?.(O,U),z?.(U)},onPanZoom:(O,U)=>{const{onViewportChange:z,onMove:I}=L.getState();I?.(O,U),z?.(U)},onPanZoomEnd:(O,U)=>{const{onViewportChangeEnd:z,onMoveEnd:I}=L.getState();I?.(O,U),z?.(U)}});const{x:W,y:B,zoom:G}=P.current.getViewport();return L.setState({panZoom:P.current,transform:[W,B,G],domNode:j.current.closest(".react-flow")}),()=>{P.current?.destroy()}}},[]),S.useEffect(()=>{P.current?.update({onPaneContextMenu:e,zoomOnScroll:t,zoomOnPinch:a,panOnScroll:r,panOnScrollSpeed:l,panOnScrollMode:u,zoomOnDoubleClick:d,panOnDrag:h,zoomActivationKeyPressed:F,preventScrolling:v,noPanClassName:E,userSelectionActive:R,noWheelClassName:_,lib:$,onTransformChange:K,connectionInProgress:H,selectionOnDrag:k,paneClickDistance:C})},[e,t,a,r,l,u,d,h,F,v,E,R,_,$,K,H,k,C]),o.jsx("div",{className:"react-flow__renderer",ref:j,style:Iu,children:w})}const ZU=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function JU(){const{userSelectionActive:e,userSelectionRect:t}=Be(ZU,et);return e&&t?o.jsx("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}const Dh=(e,t)=>a=>{a.target===t.current&&e?.(a)},eq=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,connectionInProgress:e.connection.inProgress,dragging:e.paneDragging});function tq({isSelecting:e,selectionKeyPressed:t,selectionMode:a=zi.Full,panOnDrag:r,paneClickDistance:l,selectionOnDrag:u,onSelectionStart:d,onSelectionEnd:h,onPaneClick:m,onPaneContextMenu:p,onPaneScroll:y,onPaneMouseEnter:x,onPaneMouseMove:b,onPaneMouseLeave:v,children:w}){const _=tt(),{userSelectionActive:E,elementsSelectable:T,dragging:A,connectionInProgress:C}=Be(eq,et),k=T&&(e||E),L=S.useRef(null),j=S.useRef(),R=S.useRef(new Set),$=S.useRef(new Set),H=S.useRef(!1),F=z=>{if(H.current||C){H.current=!1;return}m?.(z),_.getState().resetSelectedElements(),_.setState({nodesSelectionActive:!1})},P=z=>{if(Array.isArray(r)&&r?.includes(2)){z.preventDefault();return}p?.(z)},K=y?z=>y(z):void 0,W=z=>{H.current&&(z.stopPropagation(),H.current=!1)},B=z=>{const{domNode:I}=_.getState();if(j.current=I?.getBoundingClientRect(),!j.current)return;const q=z.target===L.current;if(!q&&!!z.target.closest(".nokey")||!e||!(u&&q||t)||z.button!==0||!z.isPrimary)return;z.target?.setPointerCapture?.(z.pointerId),H.current=!1;const{x:Z,y:ae}=Tn(z.nativeEvent,j.current);_.setState({userSelectionRect:{width:0,height:0,startX:Z,startY:ae,x:Z,y:ae}}),q||(z.stopPropagation(),z.preventDefault())},G=z=>{const{userSelectionRect:I,transform:q,nodeLookup:D,edgeLookup:V,connectionLookup:Z,triggerNodeChanges:ae,triggerEdgeChanges:ne,defaultEdgeOptions:de,resetSelectedElements:fe}=_.getState();if(!j.current||!I)return;const{x:ue,y:pe}=Tn(z.nativeEvent,j.current),{startX:Se,startY:he}=I;if(!H.current){const je=t?0:l;if(Math.hypot(ue-Se,pe-he)<=je)return;fe(),d?.(z)}H.current=!0;const ye={startX:Se,startY:he,x:ue<Se?ue:Se,y:pe<he?pe:he,width:Math.abs(ue-Se),height:Math.abs(pe-he)},we=R.current,se=$.current;R.current=new Set(qp(D,ye,q,a===zi.Partial,!0).map(je=>je.id)),$.current=new Set;const ce=de?.selectable??!0;for(const je of R.current){const Ce=Z.get(je);if(Ce)for(const{edgeId:wt}of Ce.values()){const We=V.get(wt);We&&(We.selectable??ce)&&$.current.add(wt)}}if(!ob(we,R.current)){const je=Fr(D,R.current,!0);ae(je)}if(!ob(se,$.current)){const je=Fr(V,$.current);ne(je)}_.setState({userSelectionRect:ye,userSelectionActive:!0,nodesSelectionActive:!1})},O=z=>{z.button===0&&(z.target?.releasePointerCapture?.(z.pointerId),!E&&z.target===L.current&&_.getState().userSelectionRect&&F?.(z),_.setState({userSelectionActive:!1,userSelectionRect:null}),H.current&&(h?.(z),_.setState({nodesSelectionActive:R.current.size>0})))},U=r===!0||Array.isArray(r)&&r.includes(0);return o.jsxs("div",{className:pt(["react-flow__pane",{draggable:U,dragging:A,selection:e}]),onClick:k?void 0:Dh(F,L),onContextMenu:Dh(P,L),onWheel:Dh(K,L),onPointerEnter:k?void 0:x,onPointerMove:k?G:b,onPointerUp:k?O:void 0,onPointerDownCapture:k?B:void 0,onClickCapture:k?W:void 0,onPointerLeave:v,ref:L,style:Iu,children:[w,o.jsx(JU,{})]})}function up({id:e,store:t,unselect:a=!1,nodeRef:r}){const{addSelectedNodes:l,unselectNodesAndEdges:u,multiSelectionActive:d,nodeLookup:h,onError:m}=t.getState(),p=h.get(e);if(!p){m?.("012",Yn.error012(e));return}t.setState({nodesSelectionActive:!1}),p.selected?(a||p.selected&&d)&&(u({nodes:[p],edges:[]}),requestAnimationFrame(()=>r?.current?.blur())):l([e])}function Nw({nodeRef:e,disabled:t=!1,noDragClassName:a,handleSelector:r,nodeId:l,isSelectable:u,nodeClickDistance:d}){const h=tt(),[m,p]=S.useState(!1),y=S.useRef();return S.useEffect(()=>{y.current=VH({getStoreItems:()=>h.getState(),onNodeMouseDown:x=>{up({id:x,store:h,nodeRef:e})},onDragStart:()=>{p(!0)},onDragStop:()=>{p(!1)}})},[]),S.useEffect(()=>{if(t)y.current?.destroy();else if(e.current)return y.current?.update({noDragClassName:a,handleSelector:r,domNode:e.current,isSelectable:u,nodeId:l,nodeClickDistance:d}),()=>{y.current?.destroy()}},[a,r,t,u,e,l]),m}const nq=e=>t=>t.selected&&(t.draggable||e&&typeof t.draggable>"u");function jw(){const e=tt();return S.useCallback(a=>{const{nodeExtent:r,snapToGrid:l,snapGrid:u,nodesDraggable:d,onError:h,updateNodePositions:m,nodeLookup:p,nodeOrigin:y}=e.getState(),x=new Map,b=nq(d),v=l?u[0]:5,w=l?u[1]:5,_=a.direction.x*v*a.factor,E=a.direction.y*w*a.factor;for(const[,T]of p){if(!b(T))continue;let A={x:T.internals.positionAbsolute.x+_,y:T.internals.positionAbsolute.y+E};l&&(A=Wi(A,u));const{position:C,positionAbsolute:k}=U1({nodeId:T.id,nextPosition:A,nodeLookup:p,nodeExtent:r,nodeOrigin:y,onError:h});T.position=C,T.internals.positionAbsolute=k,x.set(T.id,T)}m(x)},[])}const Wp=S.createContext(null),sq=Wp.Provider;Wp.Consumer;const Sw=()=>S.useContext(Wp),aq=e=>({connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName,rfId:e.rfId}),rq=(e,t,a)=>r=>{const{connectionClickStartHandle:l,connectionMode:u,connection:d}=r,{fromHandle:h,toHandle:m,isValid:p}=d,y=m?.nodeId===e&&m?.id===t&&m?.type===a;return{connectingFrom:h?.nodeId===e&&h?.id===t&&h?.type===a,connectingTo:y,clickConnecting:l?.nodeId===e&&l?.id===t&&l?.type===a,isPossibleEndHandle:u===no.Strict?h?.type!==a:e!==h?.nodeId||t!==h?.id,connectionInProcess:!!h,clickConnectionInProcess:!!l,valid:y&&p}};function oq({type:e="source",position:t=be.Top,isValidConnection:a,isConnectable:r=!0,isConnectableStart:l=!0,isConnectableEnd:u=!0,id:d,onConnect:h,children:m,className:p,onMouseDown:y,onTouchStart:x,...b},v){const w=d||null,_=e==="target",E=tt(),T=Sw(),{connectOnClick:A,noPanClassName:C,rfId:k}=Be(aq,et),{connectingFrom:L,connectingTo:j,clickConnecting:R,isPossibleEndHandle:$,connectionInProcess:H,clickConnectionInProcess:F,valid:P}=Be(rq(T,w,e),et);T||E.getState().onError?.("010",Yn.error010());const K=G=>{const{defaultEdgeOptions:O,onConnect:U,hasDefaultEdges:z}=E.getState(),I={...O,...G};if(z){const{edges:q,setEdges:D}=E.getState();D(J1(I,q))}U?.(I),h?.(I)},W=G=>{if(!T)return;const O=K1(G.nativeEvent);if(l&&(O&&G.button===0||!O)){const U=E.getState();cp.onPointerDown(G.nativeEvent,{handleDomNode:G.currentTarget,autoPanOnConnect:U.autoPanOnConnect,connectionMode:U.connectionMode,connectionRadius:U.connectionRadius,domNode:U.domNode,nodeLookup:U.nodeLookup,lib:U.lib,isTarget:_,handleId:w,nodeId:T,flowId:U.rfId,panBy:U.panBy,cancelConnection:U.cancelConnection,onConnectStart:U.onConnectStart,onConnectEnd:U.onConnectEnd,updateConnection:U.updateConnection,onConnect:K,isValidConnection:a||U.isValidConnection,getTransform:()=>E.getState().transform,getFromHandle:()=>E.getState().connection.fromHandle,autoPanSpeed:U.autoPanSpeed,dragThreshold:U.connectionDragThreshold})}O?y?.(G):x?.(G)},B=G=>{const{onClickConnectStart:O,onClickConnectEnd:U,connectionClickStartHandle:z,connectionMode:I,isValidConnection:q,lib:D,rfId:V,nodeLookup:Z,connection:ae}=E.getState();if(!T||!z&&!l)return;if(!z){O?.(G.nativeEvent,{nodeId:T,handleId:w,handleType:e}),E.setState({connectionClickStartHandle:{nodeId:T,type:e,id:w}});return}const ne=X1(G.target),de=a||q,{connection:fe,isValid:ue}=cp.isValid(G.nativeEvent,{handle:{nodeId:T,id:w,type:e},connectionMode:I,fromNodeId:z.nodeId,fromHandleId:z.id||null,fromType:z.type,isValidConnection:de,flowId:V,doc:ne,lib:D,nodeLookup:Z});ue&&fe&&K(fe);const pe=structuredClone(ae);delete pe.inProgress,pe.toPosition=pe.toHandle?pe.toHandle.position:null,U?.(G,pe),E.setState({connectionClickStartHandle:null})};return o.jsx("div",{"data-handleid":w,"data-nodeid":T,"data-handlepos":t,"data-id":`${k}-${T}-${w}-${e}`,className:pt(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",C,p,{source:!_,target:_,connectable:r,connectablestart:l,connectableend:u,clickconnecting:R,connectingfrom:L,connectingto:j,valid:P,connectionindicator:r&&(!H||$)&&(H||F?u:l)}]),onMouseDown:W,onTouchStart:W,onClick:A?B:void 0,ref:v,...b,children:m})}const io=S.memo(vw(oq));function iq({data:e,isConnectable:t,sourcePosition:a=be.Bottom}){return o.jsxs(o.Fragment,{children:[e?.label,o.jsx(io,{type:"source",position:a,isConnectable:t})]})}function lq({data:e,isConnectable:t,targetPosition:a=be.Top,sourcePosition:r=be.Bottom}){return o.jsxs(o.Fragment,{children:[o.jsx(io,{type:"target",position:a,isConnectable:t}),e?.label,o.jsx(io,{type:"source",position:r,isConnectable:t})]})}function cq(){return null}function uq({data:e,isConnectable:t,targetPosition:a=be.Top}){return o.jsxs(o.Fragment,{children:[o.jsx(io,{type:"target",position:a,isConnectable:t}),e?.label]})}const vu={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},Ob={input:iq,default:lq,output:uq,group:cq};function dq(e){return e.internals.handleBounds===void 0?{width:e.width??e.initialWidth??e.style?.width,height:e.height??e.initialHeight??e.style?.height}:{width:e.width??e.style?.width,height:e.height??e.style?.height}}const fq=e=>{const{width:t,height:a,x:r,y:l}=Qi(e.nodeLookup,{filter:u=>!!u.selected});return{width:_n(t)?t:null,height:_n(a)?a:null,userSelectionActive:e.userSelectionActive,transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]}) translate(${r}px,${l}px)`}};function hq({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:a}){const r=tt(),{width:l,height:u,transformString:d,userSelectionActive:h}=Be(fq,et),m=jw(),p=S.useRef(null);if(S.useEffect(()=>{a||p.current?.focus({preventScroll:!0})},[a]),Nw({nodeRef:p}),h||!l||!u)return null;const y=e?b=>{const v=r.getState().nodes.filter(w=>w.selected);e(b,v)}:void 0,x=b=>{Object.prototype.hasOwnProperty.call(vu,b.key)&&(b.preventDefault(),m({direction:vu[b.key],factor:b.shiftKey?4:1}))};return o.jsx("div",{className:pt(["react-flow__nodesselection","react-flow__container",t]),style:{transform:d},children:o.jsx("div",{ref:p,className:"react-flow__nodesselection-rect",onContextMenu:y,tabIndex:a?void 0:-1,onKeyDown:a?void 0:x,style:{width:l,height:u}})})}const $b=typeof window<"u"?window:void 0,pq=e=>({nodesSelectionActive:e.nodesSelectionActive,userSelectionActive:e.userSelectionActive});function Cw({children:e,onPaneClick:t,onPaneMouseEnter:a,onPaneMouseMove:r,onPaneMouseLeave:l,onPaneContextMenu:u,onPaneScroll:d,paneClickDistance:h,deleteKeyCode:m,selectionKeyCode:p,selectionOnDrag:y,selectionMode:x,onSelectionStart:b,onSelectionEnd:v,multiSelectionKeyCode:w,panActivationKeyCode:_,zoomActivationKeyCode:E,elementsSelectable:T,zoomOnScroll:A,zoomOnPinch:C,panOnScroll:k,panOnScrollSpeed:L,panOnScrollMode:j,zoomOnDoubleClick:R,panOnDrag:$,defaultViewport:H,translateExtent:F,minZoom:P,maxZoom:K,preventScrolling:W,onSelectionContextMenu:B,noWheelClassName:G,noPanClassName:O,disableKeyboardA11y:U,onViewportChange:z,isControlledViewport:I}){const{nodesSelectionActive:q,userSelectionActive:D}=Be(pq,et),V=Pi(p,{target:$b}),Z=Pi(_,{target:$b}),ae=Z||$,ne=Z||k,de=y&&ae!==!0,fe=V||D||de;return GU({deleteKeyCode:m,multiSelectionKeyCode:w}),o.jsx(WU,{onPaneContextMenu:u,elementsSelectable:T,zoomOnScroll:A,zoomOnPinch:C,panOnScroll:ne,panOnScrollSpeed:L,panOnScrollMode:j,zoomOnDoubleClick:R,panOnDrag:!V&&ae,defaultViewport:H,translateExtent:F,minZoom:P,maxZoom:K,zoomActivationKeyCode:E,preventScrolling:W,noWheelClassName:G,noPanClassName:O,onViewportChange:z,isControlledViewport:I,paneClickDistance:h,selectionOnDrag:de,children:o.jsxs(tq,{onSelectionStart:b,onSelectionEnd:v,onPaneClick:t,onPaneMouseEnter:a,onPaneMouseMove:r,onPaneMouseLeave:l,onPaneContextMenu:u,onPaneScroll:d,panOnDrag:ae,isSelecting:!!fe,selectionMode:x,selectionKeyPressed:V,paneClickDistance:h,selectionOnDrag:de,children:[e,q&&o.jsx(hq,{onSelectionContextMenu:B,noPanClassName:O,disableKeyboardA11y:U})]})})}Cw.displayName="FlowRenderer";const mq=S.memo(Cw),gq=e=>t=>e?qp(t.nodeLookup,{x:0,y:0,width:t.width,height:t.height},t.transform,!0).map(a=>a.id):Array.from(t.nodeLookup.keys());function xq(e){return Be(S.useCallback(gq(e),[e]),et)}const yq=e=>e.updateNodeInternals;function bq(){const e=Be(yq),[t]=S.useState(()=>typeof ResizeObserver>"u"?null:new ResizeObserver(a=>{const r=new Map;a.forEach(l=>{const u=l.target.getAttribute("data-id");r.set(u,{id:u,nodeElement:l.target,force:!0})}),e(r)}));return S.useEffect(()=>()=>{t?.disconnect()},[t]),t}function vq({node:e,nodeType:t,hasDimensions:a,resizeObserver:r}){const l=tt(),u=S.useRef(null),d=S.useRef(null),h=S.useRef(e.sourcePosition),m=S.useRef(e.targetPosition),p=S.useRef(t),y=a&&!!e.internals.handleBounds;return S.useEffect(()=>{u.current&&!e.hidden&&(!y||d.current!==u.current)&&(d.current&&r?.unobserve(d.current),r?.observe(u.current),d.current=u.current)},[y,e.hidden]),S.useEffect(()=>()=>{d.current&&(r?.unobserve(d.current),d.current=null)},[]),S.useEffect(()=>{if(u.current){const x=p.current!==t,b=h.current!==e.sourcePosition,v=m.current!==e.targetPosition;(x||b||v)&&(p.current=t,h.current=e.sourcePosition,m.current=e.targetPosition,l.getState().updateNodeInternals(new Map([[e.id,{id:e.id,nodeElement:u.current,force:!0}]])))}},[e.id,t,e.sourcePosition,e.targetPosition]),u}function wq({id:e,onClick:t,onMouseEnter:a,onMouseMove:r,onMouseLeave:l,onContextMenu:u,onDoubleClick:d,nodesDraggable:h,elementsSelectable:m,nodesConnectable:p,nodesFocusable:y,resizeObserver:x,noDragClassName:b,noPanClassName:v,disableKeyboardA11y:w,rfId:_,nodeTypes:E,nodeClickDistance:T,onError:A}){const{node:C,internals:k,isParent:L}=Be(ue=>{const pe=ue.nodeLookup.get(e),Se=ue.parentLookup.has(e);return{node:pe,internals:pe.internals,isParent:Se}},et);let j=C.type||"default",R=E?.[j]||Ob[j];R===void 0&&(A?.("003",Yn.error003(j)),j="default",R=E?.default||Ob.default);const $=!!(C.draggable||h&&typeof C.draggable>"u"),H=!!(C.selectable||m&&typeof C.selectable>"u"),F=!!(C.connectable||p&&typeof C.connectable>"u"),P=!!(C.focusable||y&&typeof C.focusable>"u"),K=tt(),W=F1(C),B=vq({node:C,nodeType:j,hasDimensions:W,resizeObserver:x}),G=Nw({nodeRef:B,disabled:C.hidden||!$,noDragClassName:b,handleSelector:C.dragHandle,nodeId:e,isSelectable:H,nodeClickDistance:T}),O=jw();if(C.hidden)return null;const U=Es(C),z=dq(C),I=H||$||t||a||r||l,q=a?ue=>a(ue,{...k.userNode}):void 0,D=r?ue=>r(ue,{...k.userNode}):void 0,V=l?ue=>l(ue,{...k.userNode}):void 0,Z=u?ue=>u(ue,{...k.userNode}):void 0,ae=d?ue=>d(ue,{...k.userNode}):void 0,ne=ue=>{const{selectNodesOnDrag:pe,nodeDragThreshold:Se}=K.getState();H&&(!pe||!$||Se>0)&&up({id:e,store:K,nodeRef:B}),t&&t(ue,{...k.userNode})},de=ue=>{if(!(G1(ue.nativeEvent)||w)){if(z1.includes(ue.key)&&H){const pe=ue.key==="Escape";up({id:e,store:K,unselect:pe,nodeRef:B})}else if($&&C.selected&&Object.prototype.hasOwnProperty.call(vu,ue.key)){ue.preventDefault();const{ariaLabelConfig:pe}=K.getState();K.setState({ariaLiveMessage:pe["node.a11yDescription.ariaLiveMessage"]({direction:ue.key.replace("Arrow","").toLowerCase(),x:~~k.positionAbsolute.x,y:~~k.positionAbsolute.y})}),O({direction:vu[ue.key],factor:ue.shiftKey?4:1})}}},fe=()=>{if(w||!B.current?.matches(":focus-visible"))return;const{transform:ue,width:pe,height:Se,autoPanOnNodeFocus:he,setCenter:ye}=K.getState();if(!he)return;qp(new Map([[e,C]]),{x:0,y:0,width:pe,height:Se},ue,!0).length>0||ye(C.position.x+U.width/2,C.position.y+U.height/2,{zoom:ue[2]})};return o.jsx("div",{className:pt(["react-flow__node",`react-flow__node-${j}`,{[v]:$},C.className,{selected:C.selected,selectable:H,parent:L,draggable:$,dragging:G}]),ref:B,style:{zIndex:k.z,transform:`translate(${k.positionAbsolute.x}px,${k.positionAbsolute.y}px)`,pointerEvents:I?"all":"none",visibility:W?"visible":"hidden",...C.style,...z},"data-id":e,"data-testid":`rf__node-${e}`,onMouseEnter:q,onMouseMove:D,onMouseLeave:V,onContextMenu:Z,onClick:ne,onDoubleClick:ae,onKeyDown:P?de:void 0,tabIndex:P?0:void 0,onFocus:P?fe:void 0,role:C.ariaRole??(P?"group":void 0),"aria-roledescription":"node","aria-describedby":w?void 0:`${pw}-${_}`,"aria-label":C.ariaLabel,...C.domAttributes,children:o.jsx(sq,{value:e,children:o.jsx(R,{id:e,data:C.data,type:j,positionAbsoluteX:k.positionAbsolute.x,positionAbsoluteY:k.positionAbsolute.y,selected:C.selected??!1,selectable:H,draggable:$,deletable:C.deletable??!0,isConnectable:F,sourcePosition:C.sourcePosition,targetPosition:C.targetPosition,dragging:G,dragHandle:C.dragHandle,zIndex:k.z,parentId:C.parentId,...U})})})}var Nq=S.memo(wq);const jq=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,onError:e.onError});function Ew(e){const{nodesDraggable:t,nodesConnectable:a,nodesFocusable:r,elementsSelectable:l,onError:u}=Be(jq,et),d=xq(e.onlyRenderVisibleElements),h=bq();return o.jsx("div",{className:"react-flow__nodes",style:Iu,children:d.map(m=>o.jsx(Nq,{id:m,nodeTypes:e.nodeTypes,nodeExtent:e.nodeExtent,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,resizeObserver:h,nodesDraggable:t,nodesConnectable:a,nodesFocusable:r,elementsSelectable:l,nodeClickDistance:e.nodeClickDistance,onError:u},m))})}Ew.displayName="NodeRenderer";const Sq=S.memo(Ew);function Cq(e){return Be(S.useCallback(a=>{if(!e)return a.edges.map(l=>l.id);const r=[];if(a.width&&a.height)for(const l of a.edges){const u=a.nodeLookup.get(l.source),d=a.nodeLookup.get(l.target);u&&d&&EH({sourceNode:u,targetNode:d,width:a.width,height:a.height,transform:a.transform})&&r.push(l.id)}return r},[e]),et)}const Eq=({color:e="none",strokeWidth:t=1})=>{const a={strokeWidth:t,...e&&{stroke:e}};return o.jsx("polyline",{className:"arrow",style:a,strokeLinecap:"round",fill:"none",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4"})},_q=({color:e="none",strokeWidth:t=1})=>{const a={strokeWidth:t,...e&&{stroke:e,fill:e}};return o.jsx("polyline",{className:"arrowclosed",style:a,strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"})},zb={[xu.Arrow]:Eq,[xu.ArrowClosed]:_q};function Tq(e){const t=tt();return S.useMemo(()=>Object.prototype.hasOwnProperty.call(zb,e)?zb[e]:(t.getState().onError?.("009",Yn.error009(e)),null),[e])}const Aq=({id:e,type:t,color:a,width:r=12.5,height:l=12.5,markerUnits:u="strokeWidth",strokeWidth:d,orient:h="auto-start-reverse"})=>{const m=Tq(t);return m?o.jsx("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${r}`,markerHeight:`${l}`,viewBox:"-10 -10 20 20",markerUnits:u,orient:h,refX:"0",refY:"0",children:o.jsx(m,{color:a,strokeWidth:d})}):null},_w=({defaultColor:e,rfId:t})=>{const a=Be(u=>u.edges),r=Be(u=>u.defaultEdgeOptions),l=S.useMemo(()=>RH(a,{id:t,defaultColor:e,defaultMarkerStart:r?.markerStart,defaultMarkerEnd:r?.markerEnd}),[a,r,t,e]);return l.length?o.jsx("svg",{className:"react-flow__marker","aria-hidden":"true",children:o.jsx("defs",{children:l.map(u=>o.jsx(Aq,{id:u.id,type:u.type,color:u.color,width:u.width,height:u.height,markerUnits:u.markerUnits,strokeWidth:u.strokeWidth,orient:u.orient},u.id))})}):null};_w.displayName="MarkerDefinitions";var kq=S.memo(_w);function Tw({x:e,y:t,label:a,labelStyle:r,labelShowBg:l=!0,labelBgStyle:u,labelBgPadding:d=[2,4],labelBgBorderRadius:h=2,children:m,className:p,...y}){const[x,b]=S.useState({x:1,y:0,width:0,height:0}),v=pt(["react-flow__edge-textwrapper",p]),w=S.useRef(null);return S.useEffect(()=>{if(w.current){const _=w.current.getBBox();b({x:_.x,y:_.y,width:_.width,height:_.height})}},[a]),a?o.jsxs("g",{transform:`translate(${e-x.width/2} ${t-x.height/2})`,className:v,visibility:x.width?"visible":"hidden",...y,children:[l&&o.jsx("rect",{width:x.width+2*d[0],x:-d[0],y:-d[1],height:x.height+2*d[1],className:"react-flow__edge-textbg",style:u,rx:h,ry:h}),o.jsx("text",{className:"react-flow__edge-text",y:x.height/2,dy:"0.3em",ref:w,style:r,children:a}),m]}):null}Tw.displayName="EdgeText";const Mq=S.memo(Tw);function Vu({path:e,labelX:t,labelY:a,label:r,labelStyle:l,labelShowBg:u,labelBgStyle:d,labelBgPadding:h,labelBgBorderRadius:m,interactionWidth:p=20,...y}){return o.jsxs(o.Fragment,{children:[o.jsx("path",{...y,d:e,fill:"none",className:pt(["react-flow__edge-path",y.className])}),p?o.jsx("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:p,className:"react-flow__edge-interaction"}):null,r&&_n(t)&&_n(a)?o.jsx(Mq,{x:t,y:a,label:r,labelStyle:l,labelShowBg:u,labelBgStyle:d,labelBgPadding:h,labelBgBorderRadius:m}):null]})}function Lb({pos:e,x1:t,y1:a,x2:r,y2:l}){return e===be.Left||e===be.Right?[.5*(t+r),a]:[t,.5*(a+l)]}function Aw({sourceX:e,sourceY:t,sourcePosition:a=be.Bottom,targetX:r,targetY:l,targetPosition:u=be.Top}){const[d,h]=Lb({pos:a,x1:e,y1:t,x2:r,y2:l}),[m,p]=Lb({pos:u,x1:r,y1:l,x2:e,y2:t}),[y,x,b,v]=Q1({sourceX:e,sourceY:t,targetX:r,targetY:l,sourceControlX:d,sourceControlY:h,targetControlX:m,targetControlY:p});return[`M${e},${t} C${d},${h} ${m},${p} ${r},${l}`,y,x,b,v]}function kw(e){return S.memo(({id:t,sourceX:a,sourceY:r,targetX:l,targetY:u,sourcePosition:d,targetPosition:h,label:m,labelStyle:p,labelShowBg:y,labelBgStyle:x,labelBgPadding:b,labelBgBorderRadius:v,style:w,markerEnd:_,markerStart:E,interactionWidth:T})=>{const[A,C,k]=Aw({sourceX:a,sourceY:r,sourcePosition:d,targetX:l,targetY:u,targetPosition:h}),L=e.isInternal?void 0:t;return o.jsx(Vu,{id:L,path:A,labelX:C,labelY:k,label:m,labelStyle:p,labelShowBg:y,labelBgStyle:x,labelBgPadding:b,labelBgBorderRadius:v,style:w,markerEnd:_,markerStart:E,interactionWidth:T})})}const Dq=kw({isInternal:!1}),Mw=kw({isInternal:!0});Dq.displayName="SimpleBezierEdge";Mw.displayName="SimpleBezierEdgeInternal";function Dw(e){return S.memo(({id:t,sourceX:a,sourceY:r,targetX:l,targetY:u,label:d,labelStyle:h,labelShowBg:m,labelBgStyle:p,labelBgPadding:y,labelBgBorderRadius:x,style:b,sourcePosition:v=be.Bottom,targetPosition:w=be.Top,markerEnd:_,markerStart:E,pathOptions:T,interactionWidth:A})=>{const[C,k,L]=op({sourceX:a,sourceY:r,sourcePosition:v,targetX:l,targetY:u,targetPosition:w,borderRadius:T?.borderRadius,offset:T?.offset,stepPosition:T?.stepPosition}),j=e.isInternal?void 0:t;return o.jsx(Vu,{id:j,path:C,labelX:k,labelY:L,label:d,labelStyle:h,labelShowBg:m,labelBgStyle:p,labelBgPadding:y,labelBgBorderRadius:x,style:b,markerEnd:_,markerStart:E,interactionWidth:A})})}const Rw=Dw({isInternal:!1}),Ow=Dw({isInternal:!0});Rw.displayName="SmoothStepEdge";Ow.displayName="SmoothStepEdgeInternal";function $w(e){return S.memo(({id:t,...a})=>{const r=e.isInternal?void 0:t;return o.jsx(Rw,{...a,id:r,pathOptions:S.useMemo(()=>({borderRadius:0,offset:a.pathOptions?.offset}),[a.pathOptions?.offset])})})}const Rq=$w({isInternal:!1}),zw=$w({isInternal:!0});Rq.displayName="StepEdge";zw.displayName="StepEdgeInternal";function Lw(e){return S.memo(({id:t,sourceX:a,sourceY:r,targetX:l,targetY:u,label:d,labelStyle:h,labelShowBg:m,labelBgStyle:p,labelBgPadding:y,labelBgBorderRadius:x,style:b,markerEnd:v,markerStart:w,interactionWidth:_})=>{const[E,T,A]=ew({sourceX:a,sourceY:r,targetX:l,targetY:u}),C=e.isInternal?void 0:t;return o.jsx(Vu,{id:C,path:E,labelX:T,labelY:A,label:d,labelStyle:h,labelShowBg:m,labelBgStyle:p,labelBgPadding:y,labelBgBorderRadius:x,style:b,markerEnd:v,markerStart:w,interactionWidth:_})})}const Oq=Lw({isInternal:!1}),Bw=Lw({isInternal:!0});Oq.displayName="StraightEdge";Bw.displayName="StraightEdgeInternal";function Pw(e){return S.memo(({id:t,sourceX:a,sourceY:r,targetX:l,targetY:u,sourcePosition:d=be.Bottom,targetPosition:h=be.Top,label:m,labelStyle:p,labelShowBg:y,labelBgStyle:x,labelBgPadding:b,labelBgBorderRadius:v,style:w,markerEnd:_,markerStart:E,pathOptions:T,interactionWidth:A})=>{const[C,k,L]=W1({sourceX:a,sourceY:r,sourcePosition:d,targetX:l,targetY:u,targetPosition:h,curvature:T?.curvature}),j=e.isInternal?void 0:t;return o.jsx(Vu,{id:j,path:C,labelX:k,labelY:L,label:m,labelStyle:p,labelShowBg:y,labelBgStyle:x,labelBgPadding:b,labelBgBorderRadius:v,style:w,markerEnd:_,markerStart:E,interactionWidth:A})})}const $q=Pw({isInternal:!1}),Hw=Pw({isInternal:!0});$q.displayName="BezierEdge";Hw.displayName="BezierEdgeInternal";const Bb={default:Hw,straight:Bw,step:zw,smoothstep:Ow,simplebezier:Mw},Pb={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},zq=(e,t,a)=>a===be.Left?e-t:a===be.Right?e+t:e,Lq=(e,t,a)=>a===be.Top?e-t:a===be.Bottom?e+t:e,Hb="react-flow__edgeupdater";function Ub({position:e,centerX:t,centerY:a,radius:r=10,onMouseDown:l,onMouseEnter:u,onMouseOut:d,type:h}){return o.jsx("circle",{onMouseDown:l,onMouseEnter:u,onMouseOut:d,className:pt([Hb,`${Hb}-${h}`]),cx:zq(t,r,e),cy:Lq(a,r,e),r,stroke:"transparent",fill:"transparent"})}function Bq({isReconnectable:e,reconnectRadius:t,edge:a,sourceX:r,sourceY:l,targetX:u,targetY:d,sourcePosition:h,targetPosition:m,onReconnect:p,onReconnectStart:y,onReconnectEnd:x,setReconnecting:b,setUpdateHover:v}){const w=tt(),_=(k,L)=>{if(k.button!==0)return;const{autoPanOnConnect:j,domNode:R,isValidConnection:$,connectionMode:H,connectionRadius:F,lib:P,onConnectStart:K,onConnectEnd:W,cancelConnection:B,nodeLookup:G,rfId:O,panBy:U,updateConnection:z}=w.getState(),I=L.type==="target",q=(Z,ae)=>{b(!1),x?.(Z,a,L.type,ae)},D=Z=>p?.(a,Z),V=(Z,ae)=>{b(!0),y?.(k,a,L.type),K?.(Z,ae)};cp.onPointerDown(k.nativeEvent,{autoPanOnConnect:j,connectionMode:H,connectionRadius:F,domNode:R,handleId:L.id,nodeId:L.nodeId,nodeLookup:G,isTarget:I,edgeUpdaterType:L.type,lib:P,flowId:O,cancelConnection:B,panBy:U,isValidConnection:$,onConnect:D,onConnectStart:V,onConnectEnd:W,onReconnectEnd:q,updateConnection:z,getTransform:()=>w.getState().transform,getFromHandle:()=>w.getState().connection.fromHandle,dragThreshold:w.getState().connectionDragThreshold,handleDomNode:k.currentTarget})},E=k=>_(k,{nodeId:a.target,id:a.targetHandle??null,type:"target"}),T=k=>_(k,{nodeId:a.source,id:a.sourceHandle??null,type:"source"}),A=()=>v(!0),C=()=>v(!1);return o.jsxs(o.Fragment,{children:[(e===!0||e==="source")&&o.jsx(Ub,{position:h,centerX:r,centerY:l,radius:t,onMouseDown:E,onMouseEnter:A,onMouseOut:C,type:"source"}),(e===!0||e==="target")&&o.jsx(Ub,{position:m,centerX:u,centerY:d,radius:t,onMouseDown:T,onMouseEnter:A,onMouseOut:C,type:"target"})]})}function Pq({id:e,edgesFocusable:t,edgesReconnectable:a,elementsSelectable:r,onClick:l,onDoubleClick:u,onContextMenu:d,onMouseEnter:h,onMouseMove:m,onMouseLeave:p,reconnectRadius:y,onReconnect:x,onReconnectStart:b,onReconnectEnd:v,rfId:w,edgeTypes:_,noPanClassName:E,onError:T,disableKeyboardA11y:A}){let C=Be(ye=>ye.edgeLookup.get(e));const k=Be(ye=>ye.defaultEdgeOptions);C=k?{...k,...C}:C;let L=C.type||"default",j=_?.[L]||Bb[L];j===void 0&&(T?.("011",Yn.error011(L)),L="default",j=_?.default||Bb.default);const R=!!(C.focusable||t&&typeof C.focusable>"u"),$=typeof x<"u"&&(C.reconnectable||a&&typeof C.reconnectable>"u"),H=!!(C.selectable||r&&typeof C.selectable>"u"),F=S.useRef(null),[P,K]=S.useState(!1),[W,B]=S.useState(!1),G=tt(),{zIndex:O,sourceX:U,sourceY:z,targetX:I,targetY:q,sourcePosition:D,targetPosition:V}=Be(S.useCallback(ye=>{const we=ye.nodeLookup.get(C.source),se=ye.nodeLookup.get(C.target);if(!we||!se)return{zIndex:C.zIndex,...Pb};const ce=DH({id:e,sourceNode:we,targetNode:se,sourceHandle:C.sourceHandle||null,targetHandle:C.targetHandle||null,connectionMode:ye.connectionMode,onError:T});return{zIndex:CH({selected:C.selected,zIndex:C.zIndex,sourceNode:we,targetNode:se,elevateOnSelect:ye.elevateEdgesOnSelect,zIndexMode:ye.zIndexMode}),...ce||Pb}},[C.source,C.target,C.sourceHandle,C.targetHandle,C.selected,C.zIndex]),et),Z=S.useMemo(()=>C.markerStart?`url('#${ip(C.markerStart,w)}')`:void 0,[C.markerStart,w]),ae=S.useMemo(()=>C.markerEnd?`url('#${ip(C.markerEnd,w)}')`:void 0,[C.markerEnd,w]);if(C.hidden||U===null||z===null||I===null||q===null)return null;const ne=ye=>{const{addSelectedEdges:we,unselectNodesAndEdges:se,multiSelectionActive:ce}=G.getState();H&&(G.setState({nodesSelectionActive:!1}),C.selected&&ce?(se({nodes:[],edges:[C]}),F.current?.blur()):we([e])),l&&l(ye,C)},de=u?ye=>{u(ye,{...C})}:void 0,fe=d?ye=>{d(ye,{...C})}:void 0,ue=h?ye=>{h(ye,{...C})}:void 0,pe=m?ye=>{m(ye,{...C})}:void 0,Se=p?ye=>{p(ye,{...C})}:void 0,he=ye=>{if(!A&&z1.includes(ye.key)&&H){const{unselectNodesAndEdges:we,addSelectedEdges:se}=G.getState();ye.key==="Escape"?(F.current?.blur(),we({edges:[C]})):se([e])}};return o.jsx("svg",{style:{zIndex:O},children:o.jsxs("g",{className:pt(["react-flow__edge",`react-flow__edge-${L}`,C.className,E,{selected:C.selected,animated:C.animated,inactive:!H&&!l,updating:P,selectable:H}]),onClick:ne,onDoubleClick:de,onContextMenu:fe,onMouseEnter:ue,onMouseMove:pe,onMouseLeave:Se,onKeyDown:R?he:void 0,tabIndex:R?0:void 0,role:C.ariaRole??(R?"group":"img"),"aria-roledescription":"edge","data-id":e,"data-testid":`rf__edge-${e}`,"aria-label":C.ariaLabel===null?void 0:C.ariaLabel||`Edge from ${C.source} to ${C.target}`,"aria-describedby":R?`${mw}-${w}`:void 0,ref:F,...C.domAttributes,children:[!W&&o.jsx(j,{id:e,source:C.source,target:C.target,type:C.type,selected:C.selected,animated:C.animated,selectable:H,deletable:C.deletable??!0,label:C.label,labelStyle:C.labelStyle,labelShowBg:C.labelShowBg,labelBgStyle:C.labelBgStyle,labelBgPadding:C.labelBgPadding,labelBgBorderRadius:C.labelBgBorderRadius,sourceX:U,sourceY:z,targetX:I,targetY:q,sourcePosition:D,targetPosition:V,data:C.data,style:C.style,sourceHandleId:C.sourceHandle,targetHandleId:C.targetHandle,markerStart:Z,markerEnd:ae,pathOptions:"pathOptions"in C?C.pathOptions:void 0,interactionWidth:C.interactionWidth}),$&&o.jsx(Bq,{edge:C,isReconnectable:$,reconnectRadius:y,onReconnect:x,onReconnectStart:b,onReconnectEnd:v,sourceX:U,sourceY:z,targetX:I,targetY:q,sourcePosition:D,targetPosition:V,setUpdateHover:K,setReconnecting:B})]})})}var Hq=S.memo(Pq);const Uq=e=>({edgesFocusable:e.edgesFocusable,edgesReconnectable:e.edgesReconnectable,elementsSelectable:e.elementsSelectable,connectionMode:e.connectionMode,onError:e.onError});function Uw({defaultMarkerColor:e,onlyRenderVisibleElements:t,rfId:a,edgeTypes:r,noPanClassName:l,onReconnect:u,onEdgeContextMenu:d,onEdgeMouseEnter:h,onEdgeMouseMove:m,onEdgeMouseLeave:p,onEdgeClick:y,reconnectRadius:x,onEdgeDoubleClick:b,onReconnectStart:v,onReconnectEnd:w,disableKeyboardA11y:_}){const{edgesFocusable:E,edgesReconnectable:T,elementsSelectable:A,onError:C}=Be(Uq,et),k=Cq(t);return o.jsxs("div",{className:"react-flow__edges",children:[o.jsx(kq,{defaultColor:e,rfId:a}),k.map(L=>o.jsx(Hq,{id:L,edgesFocusable:E,edgesReconnectable:T,elementsSelectable:A,noPanClassName:l,onReconnect:u,onContextMenu:d,onMouseEnter:h,onMouseMove:m,onMouseLeave:p,onClick:y,reconnectRadius:x,onDoubleClick:b,onReconnectStart:v,onReconnectEnd:w,rfId:a,onError:C,edgeTypes:r,disableKeyboardA11y:_},L))]})}Uw.displayName="EdgeRenderer";const qq=S.memo(Uw),Iq=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function Vq({children:e}){const t=Be(Iq);return o.jsx("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:t},children:e})}function Fq(e){const t=Qp(),a=S.useRef(!1);S.useEffect(()=>{!a.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),a.current=!0)},[e,t.viewportInitialized])}const Yq=e=>e.panZoom?.syncViewport;function Xq(e){const t=Be(Yq),a=tt();return S.useEffect(()=>{e&&(t?.(e),a.setState({transform:[e.x,e.y,e.zoom]}))},[e,t]),null}function Gq(e){return e.connection.inProgress?{...e.connection,to:Zi(e.connection.to,e.transform)}:{...e.connection}}function Kq(e){return Gq}function Qq(e){const t=Kq();return Be(t,et)}const Wq=e=>({nodesConnectable:e.nodesConnectable,isValid:e.connection.isValid,inProgress:e.connection.inProgress,width:e.width,height:e.height});function Zq({containerStyle:e,style:t,type:a,component:r}){const{nodesConnectable:l,width:u,height:d,isValid:h,inProgress:m}=Be(Wq,et);return!(u&&l&&m)?null:o.jsx("svg",{style:e,width:u,height:d,className:"react-flow__connectionline react-flow__container",children:o.jsx("g",{className:pt(["react-flow__connection",P1(h)]),children:o.jsx(qw,{style:t,type:a,CustomComponent:r,isValid:h})})})}const qw=({style:e,type:t=aa.Bezier,CustomComponent:a,isValid:r})=>{const{inProgress:l,from:u,fromNode:d,fromHandle:h,fromPosition:m,to:p,toNode:y,toHandle:x,toPosition:b,pointer:v}=Qq();if(!l)return;if(a)return o.jsx(a,{connectionLineType:t,connectionLineStyle:e,fromNode:d,fromHandle:h,fromX:u.x,fromY:u.y,toX:p.x,toY:p.y,fromPosition:m,toPosition:b,connectionStatus:P1(r),toNode:y,toHandle:x,pointer:v});let w="";const _={sourceX:u.x,sourceY:u.y,sourcePosition:m,targetX:p.x,targetY:p.y,targetPosition:b};switch(t){case aa.Bezier:[w]=W1(_);break;case aa.SimpleBezier:[w]=Aw(_);break;case aa.Step:[w]=op({..._,borderRadius:0});break;case aa.SmoothStep:[w]=op(_);break;default:[w]=ew(_)}return o.jsx("path",{d:w,fill:"none",className:"react-flow__connection-path",style:e})};qw.displayName="ConnectionLine";const Jq={};function qb(e=Jq){S.useRef(e),tt(),S.useEffect(()=>{},[e])}function eI(){tt(),S.useRef(!1),S.useEffect(()=>{},[])}function Iw({nodeTypes:e,edgeTypes:t,onInit:a,onNodeClick:r,onEdgeClick:l,onNodeDoubleClick:u,onEdgeDoubleClick:d,onNodeMouseEnter:h,onNodeMouseMove:m,onNodeMouseLeave:p,onNodeContextMenu:y,onSelectionContextMenu:x,onSelectionStart:b,onSelectionEnd:v,connectionLineType:w,connectionLineStyle:_,connectionLineComponent:E,connectionLineContainerStyle:T,selectionKeyCode:A,selectionOnDrag:C,selectionMode:k,multiSelectionKeyCode:L,panActivationKeyCode:j,zoomActivationKeyCode:R,deleteKeyCode:$,onlyRenderVisibleElements:H,elementsSelectable:F,defaultViewport:P,translateExtent:K,minZoom:W,maxZoom:B,preventScrolling:G,defaultMarkerColor:O,zoomOnScroll:U,zoomOnPinch:z,panOnScroll:I,panOnScrollSpeed:q,panOnScrollMode:D,zoomOnDoubleClick:V,panOnDrag:Z,onPaneClick:ae,onPaneMouseEnter:ne,onPaneMouseMove:de,onPaneMouseLeave:fe,onPaneScroll:ue,onPaneContextMenu:pe,paneClickDistance:Se,nodeClickDistance:he,onEdgeContextMenu:ye,onEdgeMouseEnter:we,onEdgeMouseMove:se,onEdgeMouseLeave:ce,reconnectRadius:je,onReconnect:Ce,onReconnectStart:wt,onReconnectEnd:We,noDragClassName:Nt,noWheelClassName:Ot,noPanClassName:Gn,disableKeyboardA11y:$t,nodeExtent:Me,rfId:fa,viewport:Tt,onViewportChange:kn}){return qb(e),qb(t),eI(),Fq(a),Xq(Tt),o.jsx(mq,{onPaneClick:ae,onPaneMouseEnter:ne,onPaneMouseMove:de,onPaneMouseLeave:fe,onPaneContextMenu:pe,onPaneScroll:ue,paneClickDistance:Se,deleteKeyCode:$,selectionKeyCode:A,selectionOnDrag:C,selectionMode:k,onSelectionStart:b,onSelectionEnd:v,multiSelectionKeyCode:L,panActivationKeyCode:j,zoomActivationKeyCode:R,elementsSelectable:F,zoomOnScroll:U,zoomOnPinch:z,zoomOnDoubleClick:V,panOnScroll:I,panOnScrollSpeed:q,panOnScrollMode:D,panOnDrag:Z,defaultViewport:P,translateExtent:K,minZoom:W,maxZoom:B,onSelectionContextMenu:x,preventScrolling:G,noDragClassName:Nt,noWheelClassName:Ot,noPanClassName:Gn,disableKeyboardA11y:$t,onViewportChange:kn,isControlledViewport:!!Tt,children:o.jsxs(Vq,{children:[o.jsx(qq,{edgeTypes:t,onEdgeClick:l,onEdgeDoubleClick:d,onReconnect:Ce,onReconnectStart:wt,onReconnectEnd:We,onlyRenderVisibleElements:H,onEdgeContextMenu:ye,onEdgeMouseEnter:we,onEdgeMouseMove:se,onEdgeMouseLeave:ce,reconnectRadius:je,defaultMarkerColor:O,noPanClassName:Gn,disableKeyboardA11y:$t,rfId:fa}),o.jsx(Zq,{style:_,type:w,component:E,containerStyle:T}),o.jsx("div",{className:"react-flow__edgelabel-renderer"}),o.jsx(Sq,{nodeTypes:e,onNodeClick:r,onNodeDoubleClick:u,onNodeMouseEnter:h,onNodeMouseMove:m,onNodeMouseLeave:p,onNodeContextMenu:y,nodeClickDistance:he,onlyRenderVisibleElements:H,noPanClassName:Gn,noDragClassName:Nt,disableKeyboardA11y:$t,nodeExtent:Me,rfId:fa}),o.jsx("div",{className:"react-flow__viewport-portal"})]})})}Iw.displayName="GraphView";const tI=S.memo(Iw),Ib=({nodes:e,edges:t,defaultNodes:a,defaultEdges:r,width:l,height:u,fitView:d,fitViewOptions:h,minZoom:m=.5,maxZoom:p=2,nodeOrigin:y,nodeExtent:x,zIndexMode:b="basic"}={})=>{const v=new Map,w=new Map,_=new Map,E=new Map,T=r??t??[],A=a??e??[],C=y??[0,0],k=x??$i;sw(_,E,T);const L=lp(A,v,w,{nodeOrigin:C,nodeExtent:k,zIndexMode:b});let j=[0,0,1];if(d&&l&&u){const R=Qi(v,{filter:P=>!!((P.width||P.initialWidth)&&(P.height||P.initialHeight))}),{x:$,y:H,zoom:F}=Ip(R,l,u,m,p,h?.padding??.1);j=[$,H,F]}return{rfId:"1",width:l??0,height:u??0,transform:j,nodes:A,nodesInitialized:L,nodeLookup:v,parentLookup:w,edges:T,edgeLookup:E,connectionLookup:_,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:a!==void 0,hasDefaultEdges:r!==void 0,panZoom:null,minZoom:m,maxZoom:p,translateExtent:$i,nodeExtent:k,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:no.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:C,nodeDragThreshold:1,connectionDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!0,selectNodesOnDrag:!0,multiSelectionActive:!1,fitViewQueued:d??!1,fitViewOptions:h,fitViewResolver:null,connection:{...B1},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanOnNodeFocus:!0,autoPanSpeed:15,connectionRadius:20,onError:bH,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1,ariaLabelConfig:L1,zIndexMode:b,onNodesChangeMiddlewareMap:new Map,onEdgesChangeMiddlewareMap:new Map}},nI=({nodes:e,edges:t,defaultNodes:a,defaultEdges:r,width:l,height:u,fitView:d,fitViewOptions:h,minZoom:m,maxZoom:p,nodeOrigin:y,nodeExtent:x,zIndexMode:b})=>vU((v,w)=>{async function _(){const{nodeLookup:E,panZoom:T,fitViewOptions:A,fitViewResolver:C,width:k,height:L,minZoom:j,maxZoom:R}=w();T&&(await xH({nodes:E,width:k,height:L,panZoom:T,minZoom:j,maxZoom:R},A),C?.resolve(!0),v({fitViewResolver:null}))}return{...Ib({nodes:e,edges:t,width:l,height:u,fitView:d,fitViewOptions:h,minZoom:m,maxZoom:p,nodeOrigin:y,nodeExtent:x,defaultNodes:a,defaultEdges:r,zIndexMode:b}),setNodes:E=>{const{nodeLookup:T,parentLookup:A,nodeOrigin:C,elevateNodesOnSelect:k,fitViewQueued:L,zIndexMode:j}=w(),R=lp(E,T,A,{nodeOrigin:C,nodeExtent:x,elevateNodesOnSelect:k,checkEquality:!0,zIndexMode:j});L&&R?(_(),v({nodes:E,nodesInitialized:R,fitViewQueued:!1,fitViewOptions:void 0})):v({nodes:E,nodesInitialized:R})},setEdges:E=>{const{connectionLookup:T,edgeLookup:A}=w();sw(T,A,E),v({edges:E})},setDefaultNodesAndEdges:(E,T)=>{if(E){const{setNodes:A}=w();A(E),v({hasDefaultNodes:!0})}if(T){const{setEdges:A}=w();A(T),v({hasDefaultEdges:!0})}},updateNodeInternals:E=>{const{triggerNodeChanges:T,nodeLookup:A,parentLookup:C,domNode:k,nodeOrigin:L,nodeExtent:j,debug:R,fitViewQueued:$,zIndexMode:H}=w(),{changes:F,updatedInternals:P}=HH(E,A,C,k,L,j,H);P&&(zH(A,C,{nodeOrigin:L,nodeExtent:j,zIndexMode:H}),$?(_(),v({fitViewQueued:!1,fitViewOptions:void 0})):v({}),F?.length>0&&(R&&console.log("React Flow: trigger node changes",F),T?.(F)))},updateNodePositions:(E,T=!1)=>{const A=[];let C=[];const{nodeLookup:k,triggerNodeChanges:L,connection:j,updateConnection:R,onNodesChangeMiddlewareMap:$}=w();for(const[H,F]of E){const P=k.get(H),K=!!(P?.expandParent&&P?.parentId&&F?.position),W={id:H,type:"position",position:K?{x:Math.max(0,F.position.x),y:Math.max(0,F.position.y)}:F.position,dragging:T};if(P&&j.inProgress&&j.fromNode.id===P.id){const B=Xa(P,j.fromHandle,be.Left,!0);R({...j,from:B})}K&&P.parentId&&A.push({id:H,parentId:P.parentId,rect:{...F.internals.positionAbsolute,width:F.measured.width??0,height:F.measured.height??0}}),C.push(W)}if(A.length>0){const{parentLookup:H,nodeOrigin:F}=w(),P=Kp(A,k,H,F);C.push(...P)}for(const H of $.values())C=H(C);L(C)},triggerNodeChanges:E=>{const{onNodesChange:T,setNodes:A,nodes:C,hasDefaultNodes:k,debug:L}=w();if(E?.length){if(k){const j=yw(E,C);A(j)}L&&console.log("React Flow: trigger node changes",E),T?.(E)}},triggerEdgeChanges:E=>{const{onEdgesChange:T,setEdges:A,edges:C,hasDefaultEdges:k,debug:L}=w();if(E?.length){if(k){const j=bw(E,C);A(j)}L&&console.log("React Flow: trigger edge changes",E),T?.(E)}},addSelectedNodes:E=>{const{multiSelectionActive:T,edgeLookup:A,nodeLookup:C,triggerNodeChanges:k,triggerEdgeChanges:L}=w();if(T){const j=E.map(R=>La(R,!0));k(j);return}k(Fr(C,new Set([...E]),!0)),L(Fr(A))},addSelectedEdges:E=>{const{multiSelectionActive:T,edgeLookup:A,nodeLookup:C,triggerNodeChanges:k,triggerEdgeChanges:L}=w();if(T){const j=E.map(R=>La(R,!0));L(j);return}L(Fr(A,new Set([...E]))),k(Fr(C,new Set,!0))},unselectNodesAndEdges:({nodes:E,edges:T}={})=>{const{edges:A,nodes:C,nodeLookup:k,triggerNodeChanges:L,triggerEdgeChanges:j}=w(),R=E||C,$=T||A,H=R.map(P=>{const K=k.get(P.id);return K&&(K.selected=!1),La(P.id,!1)}),F=$.map(P=>La(P.id,!1));L(H),j(F)},setMinZoom:E=>{const{panZoom:T,maxZoom:A}=w();T?.setScaleExtent([E,A]),v({minZoom:E})},setMaxZoom:E=>{const{panZoom:T,minZoom:A}=w();T?.setScaleExtent([A,E]),v({maxZoom:E})},setTranslateExtent:E=>{w().panZoom?.setTranslateExtent(E),v({translateExtent:E})},resetSelectedElements:()=>{const{edges:E,nodes:T,triggerNodeChanges:A,triggerEdgeChanges:C,elementsSelectable:k}=w();if(!k)return;const L=T.reduce((R,$)=>$.selected?[...R,La($.id,!1)]:R,[]),j=E.reduce((R,$)=>$.selected?[...R,La($.id,!1)]:R,[]);A(L),C(j)},setNodeExtent:E=>{const{nodes:T,nodeLookup:A,parentLookup:C,nodeOrigin:k,elevateNodesOnSelect:L,nodeExtent:j,zIndexMode:R}=w();E[0][0]===j[0][0]&&E[0][1]===j[0][1]&&E[1][0]===j[1][0]&&E[1][1]===j[1][1]||(lp(T,A,C,{nodeOrigin:k,nodeExtent:E,elevateNodesOnSelect:L,checkEquality:!1,zIndexMode:R}),v({nodeExtent:E}))},panBy:E=>{const{transform:T,width:A,height:C,panZoom:k,translateExtent:L}=w();return UH({delta:E,panZoom:k,transform:T,translateExtent:L,width:A,height:C})},setCenter:async(E,T,A)=>{const{width:C,height:k,maxZoom:L,panZoom:j}=w();if(!j)return Promise.resolve(!1);const R=typeof A?.zoom<"u"?A.zoom:L;return await j.setViewport({x:C/2-E*R,y:k/2-T*R,zoom:R},{duration:A?.duration,ease:A?.ease,interpolate:A?.interpolate}),Promise.resolve(!0)},cancelConnection:()=>{v({connection:{...B1}})},updateConnection:E=>{v({connection:E})},reset:()=>v({...Ib()})}},Object.is);function sI({initialNodes:e,initialEdges:t,defaultNodes:a,defaultEdges:r,initialWidth:l,initialHeight:u,initialMinZoom:d,initialMaxZoom:h,initialFitViewOptions:m,fitView:p,nodeOrigin:y,nodeExtent:x,zIndexMode:b,children:v}){const[w]=S.useState(()=>nI({nodes:e,edges:t,defaultNodes:a,defaultEdges:r,width:l,height:u,fitView:p,minZoom:d,maxZoom:h,fitViewOptions:m,nodeOrigin:y,nodeExtent:x,zIndexMode:b}));return o.jsx(wU,{value:w,children:o.jsx(VU,{children:v})})}function aI({children:e,nodes:t,edges:a,defaultNodes:r,defaultEdges:l,width:u,height:d,fitView:h,fitViewOptions:m,minZoom:p,maxZoom:y,nodeOrigin:x,nodeExtent:b,zIndexMode:v}){return S.useContext(Uu)?o.jsx(o.Fragment,{children:e}):o.jsx(sI,{initialNodes:t,initialEdges:a,defaultNodes:r,defaultEdges:l,initialWidth:u,initialHeight:d,fitView:h,initialFitViewOptions:m,initialMinZoom:p,initialMaxZoom:y,nodeOrigin:x,nodeExtent:b,zIndexMode:v,children:e})}const rI={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};function oI({nodes:e,edges:t,defaultNodes:a,defaultEdges:r,className:l,nodeTypes:u,edgeTypes:d,onNodeClick:h,onEdgeClick:m,onInit:p,onMove:y,onMoveStart:x,onMoveEnd:b,onConnect:v,onConnectStart:w,onConnectEnd:_,onClickConnectStart:E,onClickConnectEnd:T,onNodeMouseEnter:A,onNodeMouseMove:C,onNodeMouseLeave:k,onNodeContextMenu:L,onNodeDoubleClick:j,onNodeDragStart:R,onNodeDrag:$,onNodeDragStop:H,onNodesDelete:F,onEdgesDelete:P,onDelete:K,onSelectionChange:W,onSelectionDragStart:B,onSelectionDrag:G,onSelectionDragStop:O,onSelectionContextMenu:U,onSelectionStart:z,onSelectionEnd:I,onBeforeDelete:q,connectionMode:D,connectionLineType:V=aa.Bezier,connectionLineStyle:Z,connectionLineComponent:ae,connectionLineContainerStyle:ne,deleteKeyCode:de="Backspace",selectionKeyCode:fe="Shift",selectionOnDrag:ue=!1,selectionMode:pe=zi.Full,panActivationKeyCode:Se="Space",multiSelectionKeyCode:he=Bi()?"Meta":"Control",zoomActivationKeyCode:ye=Bi()?"Meta":"Control",snapToGrid:we,snapGrid:se,onlyRenderVisibleElements:ce=!1,selectNodesOnDrag:je,nodesDraggable:Ce,autoPanOnNodeFocus:wt,nodesConnectable:We,nodesFocusable:Nt,nodeOrigin:Ot=gw,edgesFocusable:Gn,edgesReconnectable:$t,elementsSelectable:Me=!0,defaultViewport:fa=OU,minZoom:Tt=.5,maxZoom:kn=2,translateExtent:Mn=$i,preventScrolling:Ka=!0,nodeExtent:Kn,defaultMarkerColor:Qa="#b1b1b7",zoomOnScroll:xo=!0,zoomOnPinch:bn=!0,panOnScroll:jt=!1,panOnScrollSpeed:xt=.5,panOnScrollMode:yt=qa.Free,zoomOnDoubleClick:ha=!0,panOnDrag:yo=!0,onPaneClick:Xu,onPaneMouseEnter:Wa,onPaneMouseMove:Za,onPaneMouseLeave:Ja,onPaneScroll:Qn,onPaneContextMenu:er,paneClickDistance:pa=1,nodeClickDistance:Gu=0,children:tl,onReconnect:bo,onReconnectStart:ma,onReconnectEnd:Ku,onEdgeContextMenu:nl,onEdgeDoubleClick:sl,onEdgeMouseEnter:al,onEdgeMouseMove:vo,onEdgeMouseLeave:wo,reconnectRadius:rl=10,onNodesChange:ol,onEdgesChange:Dn,noDragClassName:mt="nodrag",noWheelClassName:At="nowheel",noPanClassName:Wn="nopan",fitView:tr,fitViewOptions:il,connectOnClick:Qu,attributionPosition:ll,proOptions:ga,defaultEdgeOptions:No,elevateNodesOnSelect:_s=!0,elevateEdgesOnSelect:Ts=!1,disableKeyboardA11y:As=!1,autoPanOnConnect:ks,autoPanOnNodeDrag:lt,autoPanSpeed:cl,connectionRadius:ul,isValidConnection:Zn,onError:Ms,style:Wu,id:jo,nodeDragThreshold:dl,connectionDragThreshold:Zu,viewport:nr,onViewportChange:sr,width:vn,height:Bt,colorMode:fl="light",debug:Ju,onScroll:ar,ariaLabelConfig:hl,zIndexMode:xa="basic",...ed},Pt){const ya=jo||"1",pl=BU(fl),So=S.useCallback(Jn=>{Jn.currentTarget.scrollTo({top:0,left:0,behavior:"instant"}),ar?.(Jn)},[ar]);return o.jsx("div",{"data-testid":"rf__wrapper",...ed,onScroll:So,style:{...Wu,...rI},ref:Pt,className:pt(["react-flow",l,pl]),id:jo,role:"application",children:o.jsxs(aI,{nodes:e,edges:t,width:vn,height:Bt,fitView:tr,fitViewOptions:il,minZoom:Tt,maxZoom:kn,nodeOrigin:Ot,nodeExtent:Kn,zIndexMode:xa,children:[o.jsx(tI,{onInit:p,onNodeClick:h,onEdgeClick:m,onNodeMouseEnter:A,onNodeMouseMove:C,onNodeMouseLeave:k,onNodeContextMenu:L,onNodeDoubleClick:j,nodeTypes:u,edgeTypes:d,connectionLineType:V,connectionLineStyle:Z,connectionLineComponent:ae,connectionLineContainerStyle:ne,selectionKeyCode:fe,selectionOnDrag:ue,selectionMode:pe,deleteKeyCode:de,multiSelectionKeyCode:he,panActivationKeyCode:Se,zoomActivationKeyCode:ye,onlyRenderVisibleElements:ce,defaultViewport:fa,translateExtent:Mn,minZoom:Tt,maxZoom:kn,preventScrolling:Ka,zoomOnScroll:xo,zoomOnPinch:bn,zoomOnDoubleClick:ha,panOnScroll:jt,panOnScrollSpeed:xt,panOnScrollMode:yt,panOnDrag:yo,onPaneClick:Xu,onPaneMouseEnter:Wa,onPaneMouseMove:Za,onPaneMouseLeave:Ja,onPaneScroll:Qn,onPaneContextMenu:er,paneClickDistance:pa,nodeClickDistance:Gu,onSelectionContextMenu:U,onSelectionStart:z,onSelectionEnd:I,onReconnect:bo,onReconnectStart:ma,onReconnectEnd:Ku,onEdgeContextMenu:nl,onEdgeDoubleClick:sl,onEdgeMouseEnter:al,onEdgeMouseMove:vo,onEdgeMouseLeave:wo,reconnectRadius:rl,defaultMarkerColor:Qa,noDragClassName:mt,noWheelClassName:At,noPanClassName:Wn,rfId:ya,disableKeyboardA11y:As,nodeExtent:Kn,viewport:nr,onViewportChange:sr}),o.jsx(LU,{nodes:e,edges:t,defaultNodes:a,defaultEdges:r,onConnect:v,onConnectStart:w,onConnectEnd:_,onClickConnectStart:E,onClickConnectEnd:T,nodesDraggable:Ce,autoPanOnNodeFocus:wt,nodesConnectable:We,nodesFocusable:Nt,edgesFocusable:Gn,edgesReconnectable:$t,elementsSelectable:Me,elevateNodesOnSelect:_s,elevateEdgesOnSelect:Ts,minZoom:Tt,maxZoom:kn,nodeExtent:Kn,onNodesChange:ol,onEdgesChange:Dn,snapToGrid:we,snapGrid:se,connectionMode:D,translateExtent:Mn,connectOnClick:Qu,defaultEdgeOptions:No,fitView:tr,fitViewOptions:il,onNodesDelete:F,onEdgesDelete:P,onDelete:K,onNodeDragStart:R,onNodeDrag:$,onNodeDragStop:H,onSelectionDrag:G,onSelectionDragStart:B,onSelectionDragStop:O,onMove:y,onMoveStart:x,onMoveEnd:b,noPanClassName:Wn,nodeOrigin:Ot,rfId:ya,autoPanOnConnect:ks,autoPanOnNodeDrag:lt,autoPanSpeed:cl,onError:Ms,connectionRadius:ul,isValidConnection:Zn,selectNodesOnDrag:je,nodeDragThreshold:dl,connectionDragThreshold:Zu,onBeforeDelete:q,debug:Ju,ariaLabelConfig:hl,zIndexMode:xa}),o.jsx(RU,{onSelectionChange:W}),tl,o.jsx(TU,{proOptions:ga,position:ll}),o.jsx(_U,{rfId:ya,disableKeyboardA11y:As})]})})}var iI=vw(oI);function lI({dimensions:e,lineWidth:t,variant:a,className:r}){return o.jsx("path",{strokeWidth:t,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`,className:pt(["react-flow__background-pattern",a,r])})}function cI({radius:e,className:t}){return o.jsx("circle",{cx:e,cy:e,r:e,className:pt(["react-flow__background-pattern","dots",t])})}var ia;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(ia||(ia={}));const uI={[ia.Dots]:1,[ia.Lines]:1,[ia.Cross]:6},dI=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function Vw({id:e,variant:t=ia.Dots,gap:a=20,size:r,lineWidth:l=1,offset:u=0,color:d,bgColor:h,style:m,className:p,patternClassName:y}){const x=S.useRef(null),{transform:b,patternId:v}=Be(dI,et),w=r||uI[t],_=t===ia.Dots,E=t===ia.Cross,T=Array.isArray(a)?a:[a,a],A=[T[0]*b[2]||1,T[1]*b[2]||1],C=w*b[2],k=Array.isArray(u)?u:[u,u],L=E?[C,C]:A,j=[k[0]*b[2]||1+L[0]/2,k[1]*b[2]||1+L[1]/2],R=`${v}${e||""}`;return o.jsxs("svg",{className:pt(["react-flow__background",p]),style:{...m,...Iu,"--xy-background-color-props":h,"--xy-background-pattern-color-props":d},ref:x,"data-testid":"rf__background",children:[o.jsx("pattern",{id:R,x:b[0]%A[0],y:b[1]%A[1],width:A[0],height:A[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${j[0]},-${j[1]})`,children:_?o.jsx(cI,{radius:C/2,className:y}):o.jsx(lI,{dimensions:L,lineWidth:l,variant:t,className:y})}),o.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${R})`})]})}Vw.displayName="Background";const fI=S.memo(Vw);function hI(){return o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:o.jsx("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function pI(){return o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:o.jsx("path",{d:"M0 0h32v4.2H0z"})})}function mI(){return o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:o.jsx("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function gI(){return o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:o.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function xI(){return o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:o.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function Lc({children:e,className:t,...a}){return o.jsx("button",{type:"button",className:pt(["react-flow__controls-button",t]),...a,children:e})}const yI=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom,ariaLabelConfig:e.ariaLabelConfig});function Fw({style:e,showZoom:t=!0,showFitView:a=!0,showInteractive:r=!0,fitViewOptions:l,onZoomIn:u,onZoomOut:d,onFitView:h,onInteractiveChange:m,className:p,children:y,position:x="bottom-left",orientation:b="vertical","aria-label":v}){const w=tt(),{isInteractive:_,minZoomReached:E,maxZoomReached:T,ariaLabelConfig:A}=Be(yI,et),{zoomIn:C,zoomOut:k,fitView:L}=Qp(),j=()=>{C(),u?.()},R=()=>{k(),d?.()},$=()=>{L(l),h?.()},H=()=>{w.setState({nodesDraggable:!_,nodesConnectable:!_,elementsSelectable:!_}),m?.(!_)},F=b==="horizontal"?"horizontal":"vertical";return o.jsxs(qu,{className:pt(["react-flow__controls",F,p]),position:x,style:e,"data-testid":"rf__controls","aria-label":v??A["controls.ariaLabel"],children:[t&&o.jsxs(o.Fragment,{children:[o.jsx(Lc,{onClick:j,className:"react-flow__controls-zoomin",title:A["controls.zoomIn.ariaLabel"],"aria-label":A["controls.zoomIn.ariaLabel"],disabled:T,children:o.jsx(hI,{})}),o.jsx(Lc,{onClick:R,className:"react-flow__controls-zoomout",title:A["controls.zoomOut.ariaLabel"],"aria-label":A["controls.zoomOut.ariaLabel"],disabled:E,children:o.jsx(pI,{})})]}),a&&o.jsx(Lc,{className:"react-flow__controls-fitview",onClick:$,title:A["controls.fitView.ariaLabel"],"aria-label":A["controls.fitView.ariaLabel"],children:o.jsx(mI,{})}),r&&o.jsx(Lc,{className:"react-flow__controls-interactive",onClick:H,title:A["controls.interactive.ariaLabel"],"aria-label":A["controls.interactive.ariaLabel"],children:_?o.jsx(xI,{}):o.jsx(gI,{})}),y]})}Fw.displayName="Controls";const bI=S.memo(Fw);function vI({id:e,x:t,y:a,width:r,height:l,style:u,color:d,strokeColor:h,strokeWidth:m,className:p,borderRadius:y,shapeRendering:x,selected:b,onClick:v}){const{background:w,backgroundColor:_}=u||{},E=d||w||_;return o.jsx("rect",{className:pt(["react-flow__minimap-node",{selected:b},p]),x:t,y:a,rx:y,ry:y,width:r,height:l,style:{fill:E,stroke:h,strokeWidth:m},shapeRendering:x,onClick:v?T=>v(T,e):void 0})}const wI=S.memo(vI),NI=e=>e.nodes.map(t=>t.id),Rh=e=>e instanceof Function?e:()=>e;function jI({nodeStrokeColor:e,nodeColor:t,nodeClassName:a="",nodeBorderRadius:r=5,nodeStrokeWidth:l,nodeComponent:u=wI,onClick:d}){const h=Be(NI,et),m=Rh(t),p=Rh(e),y=Rh(a),x=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return o.jsx(o.Fragment,{children:h.map(b=>o.jsx(CI,{id:b,nodeColorFunc:m,nodeStrokeColorFunc:p,nodeClassNameFunc:y,nodeBorderRadius:r,nodeStrokeWidth:l,NodeComponent:u,onClick:d,shapeRendering:x},b))})}function SI({id:e,nodeColorFunc:t,nodeStrokeColorFunc:a,nodeClassNameFunc:r,nodeBorderRadius:l,nodeStrokeWidth:u,shapeRendering:d,NodeComponent:h,onClick:m}){const{node:p,x:y,y:x,width:b,height:v}=Be(w=>{const{internals:_}=w.nodeLookup.get(e),E=_.userNode,{x:T,y:A}=_.positionAbsolute,{width:C,height:k}=Es(E);return{node:E,x:T,y:A,width:C,height:k}},et);return!p||p.hidden||!F1(p)?null:o.jsx(h,{x:y,y:x,width:b,height:v,style:p.style,selected:!!p.selected,className:r(p),color:t(p),borderRadius:l,strokeColor:a(p),strokeWidth:u,shapeRendering:d,onClick:m,id:p.id})}const CI=S.memo(SI);var EI=S.memo(jI);const _I=200,TI=150,AI=e=>!e.hidden,kI=e=>{const t={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:t,boundingRect:e.nodeLookup.size>0?V1(Qi(e.nodeLookup,{filter:AI}),t):t,rfId:e.rfId,panZoom:e.panZoom,translateExtent:e.translateExtent,flowWidth:e.width,flowHeight:e.height,ariaLabelConfig:e.ariaLabelConfig}},MI="react-flow__minimap-desc";function Yw({style:e,className:t,nodeStrokeColor:a,nodeColor:r,nodeClassName:l="",nodeBorderRadius:u=5,nodeStrokeWidth:d,nodeComponent:h,bgColor:m,maskColor:p,maskStrokeColor:y,maskStrokeWidth:x,position:b="bottom-right",onClick:v,onNodeClick:w,pannable:_=!1,zoomable:E=!1,ariaLabel:T,inversePan:A,zoomStep:C=1,offsetScale:k=5}){const L=tt(),j=S.useRef(null),{boundingRect:R,viewBB:$,rfId:H,panZoom:F,translateExtent:P,flowWidth:K,flowHeight:W,ariaLabelConfig:B}=Be(kI,et),G=e?.width??_I,O=e?.height??TI,U=R.width/G,z=R.height/O,I=Math.max(U,z),q=I*G,D=I*O,V=k*I,Z=R.x-(q-R.width)/2-V,ae=R.y-(D-R.height)/2-V,ne=q+V*2,de=D+V*2,fe=`${MI}-${H}`,ue=S.useRef(0),pe=S.useRef();ue.current=I,S.useEffect(()=>{if(j.current&&F)return pe.current=QH({domNode:j.current,panZoom:F,getTransform:()=>L.getState().transform,getViewScale:()=>ue.current}),()=>{pe.current?.destroy()}},[F]),S.useEffect(()=>{pe.current?.update({translateExtent:P,width:K,height:W,inversePan:A,pannable:_,zoomStep:C,zoomable:E})},[_,E,A,C,P,K,W]);const Se=v?we=>{const[se,ce]=pe.current?.pointer(we)||[0,0];v(we,{x:se,y:ce})}:void 0,he=w?S.useCallback((we,se)=>{const ce=L.getState().nodeLookup.get(se).internals.userNode;w(we,ce)},[]):void 0,ye=T??B["minimap.ariaLabel"];return o.jsx(qu,{position:b,style:{...e,"--xy-minimap-background-color-props":typeof m=="string"?m:void 0,"--xy-minimap-mask-background-color-props":typeof p=="string"?p:void 0,"--xy-minimap-mask-stroke-color-props":typeof y=="string"?y:void 0,"--xy-minimap-mask-stroke-width-props":typeof x=="number"?x*I:void 0,"--xy-minimap-node-background-color-props":typeof r=="string"?r:void 0,"--xy-minimap-node-stroke-color-props":typeof a=="string"?a:void 0,"--xy-minimap-node-stroke-width-props":typeof d=="number"?d:void 0},className:pt(["react-flow__minimap",t]),"data-testid":"rf__minimap",children:o.jsxs("svg",{width:G,height:O,viewBox:`${Z} ${ae} ${ne} ${de}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":fe,ref:j,onClick:Se,children:[ye&&o.jsx("title",{id:fe,children:ye}),o.jsx(EI,{onClick:he,nodeColor:r,nodeStrokeColor:a,nodeBorderRadius:u,nodeClassName:l,nodeStrokeWidth:d,nodeComponent:h}),o.jsx("path",{className:"react-flow__minimap-mask",d:`M${Z-V},${ae-V}h${ne+V*2}v${de+V*2}h${-ne-V*2}z
        M${$.x},${$.y}h${$.width}v${$.height}h${-$.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}Yw.displayName="MiniMap";const DI=S.memo(Yw),RI=e=>t=>e?`${Math.max(1/t.transform[2],1)}`:void 0,OI={[oo.Line]:"right",[oo.Handle]:"bottom-right"};function $I({nodeId:e,position:t,variant:a=oo.Handle,className:r,style:l=void 0,children:u,color:d,minWidth:h=10,minHeight:m=10,maxWidth:p=Number.MAX_VALUE,maxHeight:y=Number.MAX_VALUE,keepAspectRatio:x=!1,resizeDirection:b,autoScale:v=!0,shouldResize:w,onResizeStart:_,onResize:E,onResizeEnd:T}){const A=Sw(),C=typeof e=="string"?e:A,k=tt(),L=S.useRef(null),j=a===oo.Handle,R=Be(S.useCallback(RI(j&&v),[j,v]),et),$=S.useRef(null),H=t??OI[a];S.useEffect(()=>{if(!(!L.current||!C))return $.current||($.current=uU({domNode:L.current,nodeId:C,getStoreItems:()=>{const{nodeLookup:P,transform:K,snapGrid:W,snapToGrid:B,nodeOrigin:G,domNode:O}=k.getState();return{nodeLookup:P,transform:K,snapGrid:W,snapToGrid:B,nodeOrigin:G,paneDomNode:O}},onChange:(P,K)=>{const{triggerNodeChanges:W,nodeLookup:B,parentLookup:G,nodeOrigin:O}=k.getState(),U=[],z={x:P.x,y:P.y},I=B.get(C);if(I&&I.expandParent&&I.parentId){const q=I.origin??O,D=P.width??I.measured.width??0,V=P.height??I.measured.height??0,Z={id:I.id,parentId:I.parentId,rect:{width:D,height:V,...Y1({x:P.x??I.position.x,y:P.y??I.position.y},{width:D,height:V},I.parentId,B,q)}},ae=Kp([Z],B,G,O);U.push(...ae),z.x=P.x?Math.max(q[0]*D,P.x):void 0,z.y=P.y?Math.max(q[1]*V,P.y):void 0}if(z.x!==void 0&&z.y!==void 0){const q={id:C,type:"position",position:{...z}};U.push(q)}if(P.width!==void 0&&P.height!==void 0){const D={id:C,type:"dimensions",resizing:!0,setAttributes:b?b==="horizontal"?"width":"height":!0,dimensions:{width:P.width,height:P.height}};U.push(D)}for(const q of K){const D={...q,type:"position"};U.push(D)}W(U)},onEnd:({width:P,height:K})=>{const W={id:C,type:"dimensions",resizing:!1,dimensions:{width:P,height:K}};k.getState().triggerNodeChanges([W])}})),$.current.update({controlPosition:H,boundaries:{minWidth:h,minHeight:m,maxWidth:p,maxHeight:y},keepAspectRatio:x,resizeDirection:b,onResizeStart:_,onResize:E,onResizeEnd:T,shouldResize:w}),()=>{$.current?.destroy()}},[H,h,m,p,y,x,_,E,T,w]);const F=H.split("-");return o.jsx("div",{className:pt(["react-flow__resize-control","nodrag",...F,a,r]),ref:L,style:{...l,scale:R,...d&&{[j?"backgroundColor":"borderColor"]:d}},children:u})}S.memo($I);const Oh=[{id:"trigger-1",type:"trigger",position:{x:250,y:50},data:{label:"Inicio",config:{type:"classification",conditions:{intent:["sales"]}}}}],zI=[],go=xv((e,t)=>({flowId:null,flowName:"Nuevo Flujo",flowSlug:null,isActive:!1,isSaved:!0,nodes:Oh,edges:zI,selectedNode:null,selectedEdge:null,isSidebarOpen:!0,isPropertiesOpen:!1,onNodesChange:a=>{e({nodes:yw(a,t().nodes),isSaved:!1})},onEdgesChange:a=>{e({edges:bw(a,t().edges),isSaved:!1})},onConnect:a=>{e({edges:J1({...a,type:"smoothstep",animated:!0,style:{stroke:"#25D366",strokeWidth:2}},t().edges),isSaved:!1})},addNode:(a,r)=>{const l=`${a}-${Date.now()}`,d={id:l,type:a,position:r,data:{trigger:{label:"Trigger",config:{type:"classification",conditions:{}}},message:{label:"Mensaje",content:"Escribe tu mensaje aqu..."},question:{label:"Pregunta",content:"Cul es tu opcin?",variable:"respuesta",options:[]},condition:{label:"Condicin",conditions:[]},action:{label:"Accin",action:"",payload:{}},transfer:{label:"Transferir",content:"Transfiriendo a un agente..."},end:{label:"Fin"}}[a]||{label:a}};return e({nodes:[...t().nodes,d],isSaved:!1}),l},updateNodeData:(a,r)=>{e({nodes:t().nodes.map(l=>l.id===a?{...l,data:{...l.data,...r}}:l),isSaved:!1})},deleteNode:a=>{e({nodes:t().nodes.filter(r=>r.id!==a),edges:t().edges.filter(r=>r.source!==a&&r.target!==a),selectedNode:null,isSaved:!1})},setSelectedNode:a=>e({selectedNode:a,isPropertiesOpen:!!a}),setSelectedEdge:a=>e({selectedEdge:a}),clearSelection:()=>e({selectedNode:null,selectedEdge:null}),toggleSidebar:()=>e({isSidebarOpen:!t().isSidebarOpen}),toggleProperties:()=>e({isPropertiesOpen:!t().isPropertiesOpen}),setFlowMeta:a=>e({flowId:a.id,flowName:a.name,flowSlug:a.slug,isActive:a.is_active}),loadFlow:a=>{const r={trigger:"Inicio",message:"Mensaje",question:"Pregunta",condition:"Condicin",action:"Accin",transfer:"Transferir",end:"Fin"},l=(a.nodes||[]).map(u=>{let d=r[u.type]||u.type;return u.content&&u.content.length>0&&(d=u.content.substring(0,25)+(u.content.length>25?"...":"")),u.action&&(d=`Accin: ${u.action}`),{id:u.id,type:u.type,position:u.position||{x:250,y:50},data:{label:d,content:u.content,variable:u.variable,options:u.options,conditions:u.conditions,action:u.action,payload:u.payload,config:u.config||(u.type==="trigger"?a.trigger_config:void 0)}}});e({flowId:a.id,flowName:a.name,flowSlug:a.slug,isActive:a.is_active,nodes:l.length>0?l:Oh,edges:a.connections?.map(u=>({id:`${u.from}-${u.to}`,source:u.from,target:u.to,type:"smoothstep",animated:!0,label:u.label,style:{stroke:"#25D366",strokeWidth:2}}))||[],isSaved:!0})},resetFlow:()=>e({flowId:null,flowName:"Nuevo Flujo",flowSlug:null,isActive:!1,nodes:Oh,edges:[],selectedNode:null,isSaved:!0}),markSaved:()=>e({isSaved:!0}),exportFlow:()=>{const a=t();return{name:a.flowName,trigger_config:a.nodes.find(r=>r.type==="trigger")?.data.config||{},nodes:a.nodes.map(r=>({id:r.id,type:r.type,content:r.data.content,variable:r.data.variable,options:r.data.options,conditions:r.data.conditions,action:r.data.action,payload:r.data.payload,position:r.position})),connections:a.edges.map(r=>({from:r.source,to:r.target,label:r.label}))}}}));function LI({onTestClick:e}){const{t}=ze("flowBuilder"),{flowId:a,flowName:r,isActive:l,isSaved:u,exportFlow:d,markSaved:h,loadFlow:m,resetFlow:p,setFlowMeta:y}=go(),[x,b]=S.useState(!1),[v,w]=S.useState(!1),[_,E]=S.useState([]),[T,A]=S.useState(r),C=async()=>{b(!0);try{const $=d();if($.name=T,a)await SL(a,$);else{const H=await jL($);y({id:H.id,name:T,slug:H.slug,is_active:!1})}h(),alert(t("toolbar.flowSaved"))}catch($){alert(t("toolbar.errorSaving")+": "+$.message)}finally{b(!1)}},k=async()=>{if(!a){alert(t("toolbar.saveFirst"));return}try{await a1(a,!l),y({id:a,name:T,is_active:!l}),alert(t(l?"toolbar.flowDeactivated":"toolbar.flowActivated"))}catch($){alert(t("toolbar.error")+" "+$.message)}},L=async()=>{try{const $=await s1();E($.flows||[]),w(!0)}catch($){alert(t("toolbar.errorLoadingFlows")+": "+$.message)}},j=async $=>{try{const H=await Qh($.id);m(H.flow),A(H.flow.name),w(!1)}catch(H){alert(t("toolbar.errorLoadingFlows")+": "+H.message)}},R=()=>{!u&&!confirm(t("toolbar.unsavedConfirm"))||(p(),A(t("store.newFlow")))};return o.jsxs("div",{style:{height:"56px",background:"white",borderBottom:"1px solid #e5e7eb",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0 16px"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[o.jsx("span",{style:{fontSize:"24px"},children:""}),o.jsx("span",{style:{fontWeight:600,color:"#075E54"},children:t("title")})]}),o.jsx("div",{style:{borderLeft:"1px solid #e5e7eb",height:"24px"}}),o.jsx("input",{type:"text",value:T,onChange:$=>A($.target.value),style:{border:"none",fontSize:"15px",fontWeight:500,background:"transparent",width:"200px"},placeholder:t("toolbar.flowName")}),!u&&o.jsx("span",{style:{fontSize:"11px",background:"#fef3c7",color:"#92400e",padding:"2px 8px",borderRadius:"4px"},children:t("toolbar.unsaved")}),l&&o.jsx("span",{style:{fontSize:"11px",background:"#d1fae5",color:"#065f46",padding:"2px 8px",borderRadius:"4px"},children:t("toolbar.active")})]}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[o.jsxs("button",{onClick:e,style:{padding:"8px 16px",background:"linear-gradient(135deg, #075E54 0%, #128C7E 100%)",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"13px",fontWeight:500},children:[" ",t("toolbar.test")]}),o.jsx("div",{style:{borderLeft:"1px solid #e5e7eb",height:"24px",margin:"0 4px"}}),o.jsx("button",{onClick:R,style:{padding:"8px 16px",background:"white",border:"1px solid #d1d5db",borderRadius:"6px",cursor:"pointer",fontSize:"13px"},children:t("toolbar.new")}),o.jsxs("button",{onClick:L,style:{padding:"8px 16px",background:"white",border:"1px solid #d1d5db",borderRadius:"6px",cursor:"pointer",fontSize:"13px"},children:[" ",t("toolbar.open")]}),o.jsx("button",{onClick:C,disabled:x,style:{padding:"8px 16px",background:"#25D366",color:"white",border:"none",borderRadius:"6px",cursor:x?"wait":"pointer",fontSize:"13px",fontWeight:500},children:x?t("toolbar.saving"):` ${t("toolbar.save")}`}),a&&o.jsx("button",{onClick:k,style:{padding:"8px 16px",background:l?"#fee2e2":"#d1fae5",color:l?"#dc2626":"#065f46",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"13px",fontWeight:500},children:l?` ${t("toolbar.deactivate")}`:` ${t("toolbar.activate")}`})]}),v&&o.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:o.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"24px",width:"400px",maxHeight:"500px",overflow:"auto"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"16px"},children:[o.jsx("h3",{style:{margin:0},children:t("toolbar.selectFlow")}),o.jsx("button",{onClick:()=>w(!1),style:{background:"none",border:"none",cursor:"pointer",fontSize:"18px"},children:""})]}),_.length===0?o.jsx("p",{style:{color:"#6b7280",textAlign:"center"},children:t("toolbar.noFlowsSaved")}):o.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:_.map($=>o.jsxs("div",{onClick:()=>j($),style:{padding:"12px",border:"1px solid #e5e7eb",borderRadius:"8px",cursor:"pointer",display:"flex",justifyContent:"space-between",alignItems:"center"},onMouseOver:H=>H.currentTarget.style.background="#f9fafb",onMouseOut:H=>H.currentTarget.style.background="white",children:[o.jsxs("div",{children:[o.jsx("div",{style:{fontWeight:500},children:$.name}),o.jsx("div",{style:{fontSize:"12px",color:"#6b7280"},children:$.slug})]}),$.is_active&&o.jsx("span",{style:{fontSize:"10px",background:"#d1fae5",color:"#065f46",padding:"2px 6px",borderRadius:"4px"},children:t("toolbar.active")})]},$.id))})]})})]})}const BI=[{type:"trigger",labelKey:"sidebar.trigger",icon:"",color:"#667eea",descKey:"sidebar.triggerDesc"},{type:"message",labelKey:"sidebar.message",icon:"",color:"#25D366",descKey:"sidebar.messageDesc"},{type:"question",labelKey:"sidebar.question",icon:"",color:"#34B7F1",descKey:"sidebar.questionDesc"},{type:"condition",labelKey:"sidebar.condition",icon:"",color:"#f59e0b",descKey:"sidebar.conditionDesc"},{type:"action",labelKey:"sidebar.action",icon:"",color:"#6366f1",descKey:"sidebar.actionDesc"},{type:"ai_response",labelKey:"sidebar.aiResponse",icon:"",color:"#8b5cf6",descKey:"sidebar.aiResponseDesc"},{type:"webhook",labelKey:"sidebar.webhook",icon:"",color:"#f97316",descKey:"sidebar.webhookDesc"},{type:"delay",labelKey:"sidebar.delay",icon:"",color:"#64748b",descKey:"sidebar.delayDesc"},{type:"transfer",labelKey:"sidebar.transfer",icon:"",color:"#ec4899",descKey:"sidebar.transferDesc"},{type:"end",labelKey:"sidebar.end",icon:"",color:"#ef4444",descKey:"sidebar.endDesc"}];function PI(){const{t:e}=ze("flowBuilder"),{isSidebarOpen:t,toggleSidebar:a}=go(),r=(l,u)=>{l.dataTransfer.setData("application/reactflow",u),l.dataTransfer.effectAllowed="move"};return t?o.jsxs("div",{style:{width:"240px",background:"white",borderRight:"1px solid #e5e7eb",padding:"16px",display:"flex",flexDirection:"column",height:"100%"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[o.jsx("h3",{style:{margin:0,fontSize:"14px",fontWeight:600},children:e("sidebar.title")}),o.jsx("button",{onClick:a,style:{background:"none",border:"none",cursor:"pointer",fontSize:"18px",color:"#6b7280"},children:""})]}),o.jsx("p",{style:{fontSize:"12px",color:"#6b7280",marginBottom:"16px"},children:e("sidebar.hint")}),o.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:BI.map(l=>o.jsxs("div",{draggable:!0,onDragStart:u=>r(u,l.type),style:{padding:"10px 12px",borderRadius:"8px",cursor:"grab",display:"flex",alignItems:"center",gap:"10px",background:`${l.color}15`,border:`1px solid ${l.color}30`,transition:"all 0.2s"},onMouseOver:u=>{u.currentTarget.style.transform="translateX(4px)",u.currentTarget.style.boxShadow="0 2px 8px rgba(0,0,0,0.1)"},onMouseOut:u=>{u.currentTarget.style.transform="none",u.currentTarget.style.boxShadow="none"},children:[o.jsx("span",{style:{fontSize:"20px"},children:l.icon}),o.jsxs("div",{children:[o.jsx("div",{style:{fontWeight:500,fontSize:"13px"},children:e(l.labelKey)}),o.jsx("div",{style:{fontSize:"11px",color:"#6b7280"},children:e(l.descKey)})]})]},l.type))})]}):o.jsxs("button",{onClick:a,style:{position:"absolute",left:10,top:10,zIndex:10,background:"white",border:"1px solid #e5e7eb",borderRadius:"8px",padding:"8px 12px",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px"},children:[o.jsx("span",{children:""})," ",e("sidebar.title")]})}const Vb={trigger:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",border:"none"},message:{background:"white",border:"2px solid #25D366"},question:{background:"white",border:"2px solid #34B7F1"},condition:{background:"#fef3c7",border:"2px solid #f59e0b"},action:{background:"#e0e7ff",border:"2px solid #6366f1"},transfer:{background:"#fce7f3",border:"2px solid #ec4899"},end:{background:"#fee2e2",border:"2px solid #ef4444"}},HI={trigger:"",message:"",question:"",condition:"",action:"",transfer:"",end:""};function UI({id:e,data:t,type:a,selected:r}){const l=Vb[a]||Vb.message,u=HI[a]||"",d=a!=="end",h=a!=="trigger";return o.jsxs("div",{style:{...l,padding:"12px 16px",borderRadius:"8px",minWidth:"180px",maxWidth:"250px",boxShadow:r?"0 0 0 2px #3b82f6":"0 2px 8px rgba(0,0,0,0.1)",cursor:"pointer"},children:[h&&o.jsx(io,{type:"target",position:be.Top,style:{background:"#6b7280",width:10,height:10}}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"4px"},children:[o.jsx("span",{style:{fontSize:"16px"},children:u}),o.jsx("strong",{style:{fontSize:"13px"},children:t.label||a})]}),t.content&&o.jsxs("div",{style:{fontSize:"11px",opacity:.8,marginTop:"4px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:[t.content.substring(0,40),t.content.length>40?"...":""]}),t.options&&t.options.length>0&&o.jsxs("div",{style:{fontSize:"10px",marginTop:"6px",opacity:.7},children:[t.options.length," opciones"]}),d&&o.jsx(io,{type:"source",position:be.Bottom,style:{background:"#25D366",width:10,height:10}})]})}const $a=S.memo(UI),qI={trigger:e=>o.jsx($a,{...e,type:"trigger"}),message:e=>o.jsx($a,{...e,type:"message"}),question:e=>o.jsx($a,{...e,type:"question"}),condition:e=>o.jsx($a,{...e,type:"condition"}),action:e=>o.jsx($a,{...e,type:"action"}),transfer:e=>o.jsx($a,{...e,type:"transfer"}),end:e=>o.jsx($a,{...e,type:"end"})};function II(){const e=S.useRef(null),{nodes:t,edges:a,onNodesChange:r,onEdgesChange:l,onConnect:u,addNode:d,setSelectedNode:h}=go(),m=S.useCallback(b=>{b.preventDefault(),b.dataTransfer.dropEffect="move"},[]),p=S.useCallback(b=>{b.preventDefault();const v=b.dataTransfer.getData("application/reactflow");if(!v)return;const w=e.current.getBoundingClientRect(),_={x:b.clientX-w.left-90,y:b.clientY-w.top-25};d(v,_)},[d]),y=S.useCallback((b,v)=>{h(v)},[h]),x=S.useCallback(()=>{h(null)},[h]);return o.jsx("div",{ref:e,style:{flex:1,height:"100%"},children:o.jsxs(iI,{nodes:t,edges:a,onNodesChange:r,onEdgesChange:l,onConnect:u,onDrop:p,onDragOver:m,onNodeClick:y,onPaneClick:x,nodeTypes:qI,fitView:!0,snapToGrid:!0,snapGrid:[15,15],defaultEdgeOptions:{type:"smoothstep",animated:!0,style:{stroke:"#25D366",strokeWidth:2}},children:[o.jsx(fI,{color:"#e5e7eb",gap:20}),o.jsx(bI,{}),o.jsx(DI,{nodeColor:b=>({trigger:"#667eea",message:"#25D366",question:"#34B7F1",condition:"#f59e0b",action:"#6366f1",transfer:"#ec4899",end:"#ef4444"})[b.type]||"#6b7280",maskColor:"rgba(255, 255, 255, 0.8)"})]})})}const VI=[{value:"sales",labelKey:"properties.intentsOptions.sales",color:"#10b981"},{value:"support",labelKey:"properties.intentsOptions.support",color:"#3b82f6"},{value:"complaint",labelKey:"properties.intentsOptions.complaints",color:"#ef4444"},{value:"info",labelKey:"properties.intentsOptions.info",color:"#8b5cf6"},{value:"greeting",labelKey:"properties.intentsOptions.greeting",color:"#f59e0b"}],FI=[{value:"low",labelKey:"properties.urgencyOptions.low"},{value:"medium",labelKey:"properties.urgencyOptions.medium"},{value:"high",labelKey:"properties.urgencyOptions.high"},{value:"critical",labelKey:"properties.urgencyOptions.critical"}];function YI(){const{t:e}=ze("flowBuilder"),{selectedNode:t,updateNodeData:a,deleteNode:r,isPropertiesOpen:l,toggleProperties:u}=go(),[d,h]=S.useState({}),[m,p]=S.useState({type:"keyword",keywords:[],conditions:{}}),[y,x]=S.useState([]),b=Lt(j=>j.token);S.useEffect(()=>{t&&(h(t.data||{}),t.type==="trigger"&&t.data?.config&&p(t.data.config))},[t]),S.useEffect(()=>{t?.type==="transfer"&&y.length===0&&b&&fetch("/api/departments",{headers:{Authorization:`Bearer ${b}`}}).then(j=>j.json()).then(j=>x(j.departments||[])).catch(()=>{})},[t?.type,b]);const v=(j,R)=>{const $={...d,[j]:R};h($),a(t.id,{[j]:R})},w=(j,R,$)=>{const H=[...d.options||[]];H[j]={...H[j],[R]:$},v("options",H)},_=()=>{const j=[...d.options||[],{label:e("properties.newOption"),value:""}];v("options",j)},E=j=>{const R=d.options.filter(($,H)=>H!==j);v("options",R)},T=j=>{const R={type:j,keywords:[],conditions:{}};p(R),a(t.id,{config:R})},A=j=>{const R=j.split(",").map(H=>H.trim()).filter(H=>H),$={...m,keywords:R};p($),a(t.id,{config:$})},C=j=>{const R=m.conditions?.intent||[];let $;R.includes(j)?$=R.filter(F=>F!==j):$=[...R,j];const H={...m,conditions:{...m.conditions,intent:$}};p(H),a(t.id,{config:H})},k=j=>{const R={...m,conditions:{...m.conditions,urgency:j}};p(R),a(t.id,{config:R})},L=j=>{const R={...m,conditions:{...m.conditions,min_lead_score:parseInt(j)||0}};p(R),a(t.id,{config:R})};return!l||!t?null:o.jsxs("div",{style:{width:"300px",background:"white",borderLeft:"1px solid #e5e7eb",padding:"16px",height:"100%",overflow:"auto"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[o.jsx("h3",{style:{margin:0,fontSize:"14px",fontWeight:600},children:e("properties.title")}),o.jsx("button",{onClick:u,style:{background:"none",border:"none",cursor:"pointer",fontSize:"18px",color:"#6b7280"},children:""})]}),o.jsxs("div",{style:{fontSize:"12px",color:"#6b7280",marginBottom:"16px"},children:["Tipo: ",o.jsx("strong",{children:t.type})]}),o.jsxs("div",{style:{marginBottom:"16px"},children:[o.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:500,marginBottom:"4px"},children:e("properties.label")}),o.jsx("input",{type:"text",value:d.label||"",onChange:j=>v("label",j.target.value),style:{width:"100%",padding:"8px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"13px"}})]}),t.type==="trigger"&&o.jsxs("div",{style:{marginBottom:"16px",padding:"12px",background:"#f8fafc",borderRadius:"8px",border:"1px solid #e2e8f0"},children:[o.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:600,marginBottom:"12px",color:"#475569"},children:e("properties.triggerConfig")}),o.jsxs("div",{style:{marginBottom:"12px"},children:[o.jsx("label",{style:{display:"block",fontSize:"11px",fontWeight:500,marginBottom:"6px",color:"#64748b"},children:e("properties.triggerType")}),o.jsx("div",{style:{display:"flex",gap:"6px"},children:[{value:"keyword",labelKey:"properties.keywords"},{value:"classification",labelKey:"properties.classification"},{value:"always",labelKey:"properties.always"}].map(j=>o.jsx("button",{onClick:()=>T(j.value),style:{flex:1,padding:"8px 4px",fontSize:"11px",border:m.type===j.value?"2px solid #25D366":"1px solid #d1d5db",borderRadius:"6px",background:m.type===j.value?"#dcfce7":"white",color:m.type===j.value?"#166534":"#6b7280",cursor:"pointer",fontWeight:m.type===j.value?600:400},children:e(j.labelKey)},j.value))})]}),m.type==="keyword"&&o.jsxs("div",{style:{marginBottom:"12px"},children:[o.jsx("label",{style:{display:"block",fontSize:"11px",fontWeight:500,marginBottom:"4px",color:"#64748b"},children:e("properties.keywordsLabel")}),o.jsx("input",{type:"text",value:(m.keywords||[]).join(", "),onChange:j=>A(j.target.value),placeholder:e("properties.keywordsPlaceholder"),style:{width:"100%",padding:"8px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"12px"}}),o.jsx("p",{style:{fontSize:"10px",color:"#94a3b8",marginTop:"4px"},children:e("properties.keywordsHelp")})]}),m.type==="classification"&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{style:{marginBottom:"12px"},children:[o.jsx("label",{style:{display:"block",fontSize:"11px",fontWeight:500,marginBottom:"6px",color:"#64748b"},children:e("properties.intents")}),o.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"6px"},children:VI.map(j=>{const R=(m.conditions?.intent||[]).includes(j.value);return o.jsxs("button",{onClick:()=>C(j.value),style:{padding:"6px 10px",fontSize:"11px",border:R?`2px solid ${j.color}`:"1px solid #d1d5db",borderRadius:"16px",background:R?`${j.color}20`:"white",color:R?j.color:"#6b7280",cursor:"pointer",fontWeight:R?600:400},children:[R&&" ",e(j.labelKey)]},j.value)})})]}),o.jsxs("div",{style:{marginBottom:"12px"},children:[o.jsx("label",{style:{display:"block",fontSize:"11px",fontWeight:500,marginBottom:"4px",color:"#64748b"},children:e("properties.minUrgency")}),o.jsxs("select",{value:m.conditions?.urgency||"",onChange:j=>k(j.target.value),style:{width:"100%",padding:"8px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"12px"},children:[o.jsx("option",{value:"",children:e("properties.anyUrgency")}),FI.map(j=>o.jsx("option",{value:j.value,children:e(j.labelKey)},j.value))]})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"11px",fontWeight:500,marginBottom:"4px",color:"#64748b"},children:e("properties.minLeadScore")}),o.jsx("input",{type:"number",min:"0",max:"100",value:m.conditions?.min_lead_score||0,onChange:j=>L(j.target.value),style:{width:"100%",padding:"8px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"12px"}}),o.jsx("p",{style:{fontSize:"10px",color:"#94a3b8",marginTop:"4px"},children:e("properties.leadScoreHelp")})]})]}),m.type==="always"&&o.jsx("div",{style:{padding:"12px",background:"#fef3c7",borderRadius:"6px",border:"1px solid #fcd34d"},children:o.jsxs("p",{style:{fontSize:"11px",color:"#92400e",margin:0},children:[" ",e("properties.alwaysWarning")]})})]}),["message","question","transfer"].includes(t.type)&&o.jsxs("div",{style:{marginBottom:"16px"},children:[o.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:500,marginBottom:"4px"},children:e("properties.messageContent")}),o.jsx("textarea",{value:d.content||"",onChange:j=>v("content",j.target.value),rows:4,style:{width:"100%",padding:"8px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"13px",resize:"vertical"},placeholder:e("properties.messagePlaceholder")}),o.jsx("p",{style:{fontSize:"11px",color:"#6b7280",marginTop:"4px"},children:e("properties.variableHelp")})]}),t.type==="transfer"&&o.jsxs("div",{style:{marginBottom:"16px"},children:[o.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:500,marginBottom:"4px"},children:e("properties.targetDepartment")}),o.jsxs("select",{value:d.targetDepartmentId||"",onChange:j=>v("targetDepartmentId",j.target.value?Number(j.target.value):null),style:{width:"100%",padding:"8px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"13px"},children:[o.jsx("option",{value:"",children:e("properties.autoDepartment")}),y.filter(j=>j.active).map(j=>o.jsx("option",{value:j.id,children:j.display_name||j.name},j.id))]}),o.jsx("p",{style:{fontSize:"11px",color:"#6b7280",marginTop:"4px"},children:e("properties.departmentHelp")})]}),t.type==="question"&&o.jsxs("div",{style:{marginBottom:"16px"},children:[o.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:500,marginBottom:"4px"},children:e("properties.saveVariable")}),o.jsx("input",{type:"text",value:d.variable||"",onChange:j=>v("variable",j.target.value),style:{width:"100%",padding:"8px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"13px"},placeholder:"nombre_variable"})]}),t.type==="question"&&o.jsxs("div",{style:{marginBottom:"16px"},children:[o.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:500,marginBottom:"8px"},children:e("properties.responseOptions")}),(d.options||[]).map((j,R)=>o.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"8px"},children:[o.jsx("input",{type:"text",value:j.label,onChange:$=>w(R,"label",$.target.value),placeholder:e("properties.optionText"),style:{flex:1,padding:"6px",border:"1px solid #d1d5db",borderRadius:"4px",fontSize:"12px"}}),o.jsx("input",{type:"text",value:j.value,onChange:$=>w(R,"value",$.target.value),placeholder:e("properties.optionValue"),style:{width:"80px",padding:"6px",border:"1px solid #d1d5db",borderRadius:"4px",fontSize:"12px"}}),o.jsx("button",{onClick:()=>E(R),style:{background:"#fee2e2",border:"none",borderRadius:"4px",padding:"0 8px",cursor:"pointer",color:"#ef4444"},children:""})]},R)),o.jsx("button",{onClick:_,style:{background:"#f3f4f6",border:"1px dashed #d1d5db",borderRadius:"6px",padding:"8px",width:"100%",cursor:"pointer",fontSize:"12px"},children:e("properties.addOption")})]}),t.type==="action"&&o.jsxs("div",{style:{marginBottom:"16px"},children:[o.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:500,marginBottom:"4px"},children:e("properties.actionType")}),o.jsxs("select",{value:d.action||"",onChange:j=>v("action",j.target.value),style:{width:"100%",padding:"8px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"13px"},children:[o.jsx("option",{value:"",children:e("properties.selectAction")}),o.jsx("option",{value:"notify_sales",children:e("properties.notifySales")}),o.jsx("option",{value:"create_ticket",children:e("properties.createTicket")}),o.jsx("option",{value:"save_lead",children:e("properties.saveLead")}),o.jsx("option",{value:"send_email",children:e("properties.sendEmail")}),o.jsx("option",{value:"webhook",children:e("properties.callWebhook")}),o.jsx("option",{value:"search_faq",children:e("properties.searchFaq")})]})]}),t.type==="ai_response"&&o.jsxs("div",{style:{marginBottom:"16px",padding:"12px",background:"#f5f3ff",borderRadius:"8px",border:"1px solid #c4b5fd"},children:[o.jsxs("label",{style:{display:"block",fontSize:"12px",fontWeight:600,marginBottom:"12px",color:"#5b21b6"},children:[" ",e("properties.aiConfig")]}),o.jsxs("div",{style:{marginBottom:"12px"},children:[o.jsx("label",{style:{display:"block",fontSize:"11px",fontWeight:500,marginBottom:"4px",color:"#6b7280"},children:e("properties.systemPrompt")}),o.jsx("textarea",{value:d.system_prompt||"",onChange:j=>v("system_prompt",j.target.value),rows:3,style:{width:"100%",padding:"8px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"12px",resize:"vertical"},placeholder:e("properties.systemPromptPlaceholder")})]}),o.jsxs("div",{style:{marginBottom:"12px"},children:[o.jsx("label",{style:{display:"block",fontSize:"11px",fontWeight:500,marginBottom:"4px",color:"#6b7280"},children:e("properties.userPrompt")}),o.jsx("textarea",{value:d.user_prompt||"",onChange:j=>v("user_prompt",j.target.value),rows:2,style:{width:"100%",padding:"8px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"12px",resize:"vertical"},placeholder:e("properties.userPromptPlaceholder")}),o.jsx("p",{style:{fontSize:"10px",color:"#94a3b8",marginTop:"4px"},children:e("properties.dynamicVariableHelp")})]}),o.jsxs("div",{style:{marginBottom:"12px"},children:[o.jsx("label",{style:{display:"block",fontSize:"11px",fontWeight:500,marginBottom:"4px",color:"#6b7280"},children:e("properties.model")}),o.jsxs("select",{value:d.model||"gpt-4o-mini",onChange:j=>v("model",j.target.value),style:{width:"100%",padding:"8px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"12px"},children:[o.jsx("option",{value:"gpt-4o-mini",children:e("properties.modelMini")}),o.jsx("option",{value:"gpt-4o",children:e("properties.modelGpt4o")}),o.jsx("option",{value:"gpt-4-turbo",children:e("properties.modelGpt4Turbo")})]})]}),o.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"12px"},children:[o.jsxs("div",{style:{flex:1},children:[o.jsx("label",{style:{display:"block",fontSize:"11px",fontWeight:500,marginBottom:"4px",color:"#6b7280"},children:e("properties.temperature")}),o.jsx("input",{type:"number",min:"0",max:"1",step:"0.1",value:d.temperature||.7,onChange:j=>v("temperature",parseFloat(j.target.value)),style:{width:"100%",padding:"8px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"12px"}})]}),o.jsxs("div",{style:{flex:1},children:[o.jsx("label",{style:{display:"block",fontSize:"11px",fontWeight:500,marginBottom:"4px",color:"#6b7280"},children:e("properties.maxTokens")}),o.jsx("input",{type:"number",min:"50",max:"2000",step:"50",value:d.max_tokens||200,onChange:j=>v("max_tokens",parseInt(j.target.value)),style:{width:"100%",padding:"8px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"12px"}})]})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"11px",fontWeight:500,marginBottom:"4px",color:"#6b7280"},children:e("properties.saveResponseVariable")}),o.jsx("input",{type:"text",value:d.variable||"",onChange:j=>v("variable",j.target.value),style:{width:"100%",padding:"8px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"12px"},placeholder:"ai_response"})]})]}),t.type==="webhook"&&o.jsxs("div",{style:{marginBottom:"16px",padding:"12px",background:"#fff7ed",borderRadius:"8px",border:"1px solid #fed7aa"},children:[o.jsxs("label",{style:{display:"block",fontSize:"12px",fontWeight:600,marginBottom:"12px",color:"#c2410c"},children:[" ",e("properties.webhookConfig")]}),o.jsxs("div",{style:{marginBottom:"12px"},children:[o.jsx("label",{style:{display:"block",fontSize:"11px",fontWeight:500,marginBottom:"4px",color:"#6b7280"},children:e("properties.endpointUrl")}),o.jsx("input",{type:"text",value:d.url||"",onChange:j=>v("url",j.target.value),style:{width:"100%",padding:"8px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"12px"},placeholder:e("properties.endpointPlaceholder")})]}),o.jsxs("div",{style:{marginBottom:"12px"},children:[o.jsx("label",{style:{display:"block",fontSize:"11px",fontWeight:500,marginBottom:"4px",color:"#6b7280"},children:e("properties.httpMethod")}),o.jsxs("select",{value:d.method||"POST",onChange:j=>v("method",j.target.value),style:{width:"100%",padding:"8px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"12px"},children:[o.jsx("option",{value:"GET",children:"GET"}),o.jsx("option",{value:"POST",children:"POST"}),o.jsx("option",{value:"PUT",children:"PUT"}),o.jsx("option",{value:"PATCH",children:"PATCH"}),o.jsx("option",{value:"DELETE",children:"DELETE"})]})]}),o.jsxs("div",{style:{marginBottom:"12px"},children:[o.jsx("label",{style:{display:"block",fontSize:"11px",fontWeight:500,marginBottom:"4px",color:"#6b7280"},children:e("properties.headers")}),o.jsx("textarea",{value:d.headers||`{
  "Content-Type": "application/json"
}`,onChange:j=>v("headers",j.target.value),rows:3,style:{width:"100%",padding:"8px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"11px",fontFamily:"monospace",resize:"vertical"}})]}),o.jsxs("div",{style:{marginBottom:"12px"},children:[o.jsx("label",{style:{display:"block",fontSize:"11px",fontWeight:500,marginBottom:"4px",color:"#6b7280"},children:e("properties.body")}),o.jsx("textarea",{value:d.body||`{
  "phone": "{{phone}}",
  "message": "{{initial_message}}"
}`,onChange:j=>v("body",j.target.value),rows:4,style:{width:"100%",padding:"8px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"11px",fontFamily:"monospace",resize:"vertical"}})]}),o.jsxs("div",{style:{marginBottom:"12px"},children:[o.jsx("label",{style:{display:"block",fontSize:"11px",fontWeight:500,marginBottom:"4px",color:"#6b7280"},children:e("properties.timeout")}),o.jsx("input",{type:"number",min:"1000",max:"30000",step:"1000",value:d.timeout||5e3,onChange:j=>v("timeout",parseInt(j.target.value)),style:{width:"100%",padding:"8px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"12px"}})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"11px",fontWeight:500,marginBottom:"4px",color:"#6b7280"},children:e("properties.webhookSaveVariable")}),o.jsx("input",{type:"text",value:d.variable||"",onChange:j=>v("variable",j.target.value),style:{width:"100%",padding:"8px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"12px"},placeholder:"api_response"})]})]}),t.type==="delay"&&o.jsxs("div",{style:{marginBottom:"16px",padding:"12px",background:"#f8fafc",borderRadius:"8px",border:"1px solid #cbd5e1"},children:[o.jsxs("label",{style:{display:"block",fontSize:"12px",fontWeight:600,marginBottom:"12px",color:"#475569"},children:[" ",e("properties.delayConfig")]}),o.jsxs("div",{style:{marginBottom:"12px"},children:[o.jsx("label",{style:{display:"block",fontSize:"11px",fontWeight:500,marginBottom:"4px",color:"#6b7280"},children:e("properties.delaySeconds")}),o.jsx("input",{type:"number",min:"1",max:"60",step:"1",value:d.seconds||2,onChange:j=>v("seconds",parseInt(j.target.value)),style:{width:"100%",padding:"8px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"13px"}}),o.jsx("p",{style:{fontSize:"10px",color:"#94a3b8",marginTop:"4px"},children:e("properties.delayHelp")})]}),o.jsx("div",{children:o.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer"},children:[o.jsx("input",{type:"checkbox",checked:d.typing_indicator!==!1,onChange:j=>v("typing_indicator",j.target.checked),style:{width:"16px",height:"16px"}}),o.jsx("span",{style:{fontSize:"12px",color:"#374151"},children:e("properties.showTyping")})]})})]}),o.jsx("div",{style:{marginTop:"24px",paddingTop:"16px",borderTop:"1px solid #e5e7eb"},children:o.jsxs("button",{onClick:()=>r(t.id),style:{width:"100%",padding:"10px",background:"#fee2e2",border:"1px solid #fecaca",borderRadius:"6px",color:"#dc2626",cursor:"pointer",fontWeight:500,fontSize:"13px"},children:[" ",e("properties.deleteNode")]})})]})}function XI({isOpen:e,onClose:t}){const{t:a}=ze("flowBuilder"),{nodes:r,edges:l,flowName:u}=go(),[d,h]=S.useState([]),[m,p]=S.useState(""),[y,x]=S.useState(null),[b,v]=S.useState({}),[w,_]=S.useState(!1),[E,T]=S.useState(null),[A,C]=S.useState("local"),[k,L]=S.useState(!1),j=S.useRef(null);S.useEffect(()=>{j.current?.scrollIntoView({behavior:"smooth"})},[d]),S.useEffect(()=>{e&&R()},[e]);const R=()=>{h([{type:"system",text:a("simulator.simulatingFlow",{name:u})},{type:"system",text:a("simulator.writeToStart")}]),v({}),x(null),_(!0),T(null)},$=z=>r.find(I=>I.id===z),H=(z,I=null)=>{const q=l.find(D=>!(D.source!==z||I&&D.label&&D.label!==I));return q?$(q.target):null},F=()=>r.find(z=>z.type==="trigger"),P=async z=>{if(!z){W("system",` ${a("simulator.flowEndedNoNext")}`),_(!0);return}switch(T(z.id),x(z.id),await B(300),z.type){case"trigger":W("system",` ${a("simulator.triggerActivated")}`);const I=H(z.id);P(I);break;case"message":const q=K(z.data.content||a("simulator.emptyMessage"));W("bot",q),await B(500);const D=H(z.id);P(D);break;case"question":const V=K(z.data.content||"?");W("bot",V),z.data.options&&z.data.options.length>0&&W("options",z.data.options),_(!0),x(z.id);break;case"condition":W("system",` ${a("simulator.evaluatingCondition")}`),await B(300);const Z=z.data.conditions||[];let ae=null;for(const Ce of Z){if(Ce.else){ae=Ce.goto;break}const wt=Ce.if?.match(/(\w+)\s*==\s*["']?(\w+)["']?/);if(wt){const[,We,Nt]=wt;if(b[We]===Nt){ae=Ce.goto,W("system",` ${a("simulator.conditionMet",{variable:We,value:Nt})}`);break}}}const ne=$(ae)||H(z.id);P(ne);break;case"action":W("system",` ${a("simulator.executingAction",{action:z.data.action||a("simulator.undefined")})}`),await B(500);const de=H(z.id);P(de);break;case"ai_response":W("system",` ${a("simulator.generatingAI")}`),L(!0),await B(1500),L(!1);const fe=z.data.system_prompt||"",ue=K(z.data.user_prompt||""),pe=`[${a("simulator.simulatedAIResponse")}]
${fe.substring(0,50)}...
${a("simulator.forPrompt")}: "${ue.substring(0,50)}..."`;W("bot",pe),z.data.variable&&(v(Ce=>({...Ce,[z.data.variable]:"respuesta_ia_simulada"})),W("system",` ${a("simulator.variableSaved",{variable:z.data.variable,value:a("simulator.aiResponseValue")})}`)),await B(300);const Se=H(z.id);P(Se);break;case"webhook":W("system",` ${a("simulator.callingWebhook",{url:z.data.url||a("simulator.urlNotDefined")})}`),W("system",`   ${a("simulator.method")}: ${z.data.method||"POST"}`),L(!0),await B(1e3),L(!1);const he={success:!0,data:{status:"ok",simulated:!0}};W("system",` ${a("simulator.webhookResponded",{response:JSON.stringify(he).substring(0,50)})}...`),z.data.variable&&v(Ce=>({...Ce,[z.data.variable]:he}));const ye=H(z.id);P(ye);break;case"delay":const we=z.data.seconds||2,se=z.data.typing_indicator!==!1;W("system",` ${a("simulator.waitingSeconds",{seconds:we})}`),se&&L(!0),await B(we*1e3),se&&L(!1);const ce=H(z.id);P(ce);break;case"transfer":W("bot",z.data.content||a("simulator.transferring")),W("system",` ${a("simulator.transferredToHuman")}`),_(!0);break;case"end":W("system",` ${a("simulator.flowCompleted")}`),_(!0);break;default:W("system",`${a("simulator.unknownNode")}: ${z.type}`);const je=H(z.id);P(je)}},K=z=>z&&z.replace(/\{\{(\w+)\}\}/g,(I,q)=>b[q]||I),W=(z,I)=>{h(q=>[...q,{type:z,text:I,time:new Date}])},B=z=>new Promise(I=>setTimeout(I,z)),G=()=>{if(!m.trim())return;const z=m.trim();p(""),W("user",z),_(!1);const I=$(y);if(I?.type==="question"&&I.data.variable){let q=z;if(I.data.options){const D=I.data.options.find(V=>V.label.toLowerCase()===z.toLowerCase()||V.value===z);D&&(q=D.value)}v(D=>({...D,[I.data.variable]:q})),W("system",` ${a("simulator.variableSet",{variable:I.data.variable,value:q})}`),setTimeout(()=>{const D=H(y);P(D)},300)}else if(!y){const q=F();q?P(q):W("system",` ${a("simulator.noTriggerNode")}`)}},O=z=>{p(z.label),setTimeout(()=>G(),100)},U=z=>{z.key==="Enter"&&!z.shiftKey&&(z.preventDefault(),G())};return e?o.jsxs("div",{style:{position:"fixed",right:"20px",bottom:"20px",width:"380px",height:"550px",background:"white",borderRadius:"16px",boxShadow:"0 10px 40px rgba(0,0,0,0.2)",display:"flex",flexDirection:"column",zIndex:1e3,overflow:"hidden"},children:[o.jsxs("div",{style:{background:"linear-gradient(135deg, #075E54 0%, #128C7E 100%)",color:"white",padding:"12px 16px"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[o.jsxs("div",{children:[o.jsxs("div",{style:{fontWeight:600,fontSize:"15px"},children:[" ",a("simulator.title")]}),o.jsx("div",{style:{fontSize:"12px",opacity:.8},children:a("simulator.subtitle")})]}),o.jsxs("div",{style:{display:"flex",gap:"8px"},children:[o.jsx("button",{onClick:R,style:{background:"rgba(255,255,255,0.2)",border:"none",color:"white",padding:"6px 12px",borderRadius:"6px",cursor:"pointer",fontSize:"12px"},children:""}),o.jsx("button",{onClick:t,style:{background:"none",border:"none",color:"white",fontSize:"20px",cursor:"pointer",padding:"0 4px"},children:""})]})]}),o.jsxs("div",{style:{display:"flex",gap:"8px",background:"rgba(0,0,0,0.2)",borderRadius:"8px",padding:"4px"},children:[o.jsx("button",{onClick:()=>C("local"),style:{flex:1,background:A==="local"?"white":"transparent",color:A==="local"?"#075E54":"white",border:"none",padding:"6px 12px",borderRadius:"6px",cursor:"pointer",fontSize:"11px",fontWeight:A==="local"?600:400},children:"Local"}),o.jsx("button",{onClick:()=>C("server"),style:{flex:1,background:A==="server"?"white":"transparent",color:A==="server"?"#075E54":"white",border:"none",padding:"6px 12px",borderRadius:"6px",cursor:"pointer",fontSize:"11px",fontWeight:A==="server"?600:400},children:a("simulator.server")})]})]}),Object.keys(b).length>0&&o.jsxs("div",{style:{background:"#f0fdf4",padding:"8px 16px",fontSize:"11px",borderBottom:"1px solid #e5e7eb"},children:[o.jsxs("strong",{children:[a("simulator.variables"),":"]})," ",Object.entries(b).map(([z,I])=>o.jsxs("span",{style:{background:"#dcfce7",padding:"2px 6px",borderRadius:"4px",marginLeft:"4px"},children:[z,"=",typeof I=="object"?JSON.stringify(I).substring(0,30)+"...":String(I)]},z))]}),o.jsxs("div",{style:{flex:1,overflowY:"auto",padding:"16px",background:"#e5ddd5",backgroundImage:'url("data:image/svg+xml,%3Csvg width="60" height="60" viewBox="0 0 60 60" xmlns="http://www.w3.org/2000/svg"%3E%3Cg fill="none" fill-rule="evenodd"%3E%3Cg fill="%239C92AC" fill-opacity="0.05"%3E%3Cpath d="M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z"/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")'},children:[d.map((z,I)=>o.jsx(GI,{message:z,onOptionClick:O},I)),k&&o.jsx("div",{style:{display:"flex",justifyContent:"flex-start",marginBottom:"8px"},children:o.jsxs("div",{style:{background:"white",padding:"12px 16px",borderRadius:"12px 12px 12px 0",boxShadow:"0 1px 2px rgba(0,0,0,0.1)",display:"flex",gap:"4px"},children:[o.jsx("span",{className:"typing-dot",style:{width:"8px",height:"8px",background:"#90a3ae",borderRadius:"50%",animation:"typing 1.4s infinite ease-in-out",animationDelay:"0s"}}),o.jsx("span",{className:"typing-dot",style:{width:"8px",height:"8px",background:"#90a3ae",borderRadius:"50%",animation:"typing 1.4s infinite ease-in-out",animationDelay:"0.2s"}}),o.jsx("span",{className:"typing-dot",style:{width:"8px",height:"8px",background:"#90a3ae",borderRadius:"50%",animation:"typing 1.4s infinite ease-in-out",animationDelay:"0.4s"}})]})}),o.jsx("div",{ref:j})]}),o.jsxs("div",{style:{padding:"12px",background:"#f0f2f5",display:"flex",gap:"8px"},children:[o.jsx("input",{type:"text",value:m,onChange:z=>p(z.target.value),onKeyPress:U,placeholder:a(w?"simulator.placeholder":"simulator.waitingResponse"),disabled:!w,style:{flex:1,padding:"10px 16px",border:"none",borderRadius:"24px",fontSize:"14px",outline:"none"}}),o.jsx("button",{onClick:G,disabled:!w||!m.trim(),style:{background:"#25D366",color:"white",border:"none",borderRadius:"50%",width:"40px",height:"40px",cursor:w&&m.trim()?"pointer":"not-allowed",opacity:w&&m.trim()?1:.5,fontSize:"18px"},children:""})]})]}):null}function GI({message:e,onOptionClick:t}){const{type:a,text:r}=e,l=d=>typeof d=="object"&&d!==null?JSON.stringify(d,null,2):String(d);if(a==="system")return o.jsx("div",{style:{textAlign:"center",margin:"8px 0",fontSize:"11px",color:"#667781",background:"rgba(255,255,255,0.8)",padding:"4px 12px",borderRadius:"8px",display:"inline-block",width:"100%"},children:l(r)});if(a==="options")return o.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px",margin:"8px 0"},children:r.map((d,h)=>o.jsx("button",{onClick:()=>t(d),style:{background:"white",border:"1px solid #25D366",color:"#25D366",padding:"8px 16px",borderRadius:"16px",cursor:"pointer",fontSize:"13px",fontWeight:500},children:d.label},h))});const u=a==="user";return o.jsx("div",{style:{display:"flex",justifyContent:u?"flex-end":"flex-start",marginBottom:"8px"},children:o.jsx("div",{style:{maxWidth:"80%",padding:"8px 12px",borderRadius:u?"12px 12px 0 12px":"12px 12px 12px 0",background:u?"#dcf8c6":"white",boxShadow:"0 1px 2px rgba(0,0,0,0.1)",fontSize:"14px",lineHeight:"1.4",whiteSpace:"pre-wrap"},children:l(r)})})}function KI({onComplete:e}){const{t}=ze("flowBuilder"),[a,r]=S.useState(0),[l,u]=S.useState(!1),d=[{title:t("onboarding.welcome"),description:t("onboarding.welcomeDesc"),icon:"",image:null},{title:t("onboarding.dragNodes"),description:t("onboarding.dragNodesDesc"),icon:"",tips:[` ${t("onboarding.tipMessage")}`,` ${t("onboarding.tipQuestion")}`,` ${t("onboarding.tipCondition")}`,` ${t("onboarding.tipAction")}`]},{title:t("onboarding.connectNodes"),description:t("onboarding.connectNodesDesc"),icon:"",tips:[t("onboarding.tipFlowStartsTrigger"),t("onboarding.tipMultiplePaths"),t("onboarding.tipEndWithNode")]},{title:t("onboarding.configureNodes"),description:t("onboarding.configureNodesDesc"),icon:"",tips:[t("onboarding.tipUseVariables"),t("onboarding.tipQuestionsSave"),t("onboarding.tipConditionsEvaluate")]},{title:t("onboarding.saveAndActivate"),description:t("onboarding.saveAndActivateDesc"),icon:"",tips:[t("onboarding.tipMultipleFlows"),t("onboarding.tipUseOpen"),t("onboarding.tipTemplates")]}],h=d[a],m=a===d.length-1,p=()=>{m?u(!0):r(a+1)},y=()=>{e(null)},x=b=>{e(b)};return l?o.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:o.jsxs("div",{style:{background:"white",borderRadius:"16px",padding:"32px",maxWidth:"600px",width:"90%"},children:[o.jsx("h2",{style:{margin:"0 0 8px 0",fontSize:"24px"},children:t("onboarding.howToStart")}),o.jsx("p",{style:{color:"#6b7280",margin:"0 0 24px 0"},children:t("onboarding.templateSubtitle")}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:[o.jsx(Bc,{icon:"",title:t("onboarding.emptyTemplate"),description:t("onboarding.emptyTemplateDesc"),onClick:()=>x(null)}),o.jsx(Bc,{icon:"",title:t("onboarding.salesFunnel"),description:t("onboarding.salesFunnelDesc"),onClick:()=>x("sales_funnel"),color:"#25D366"}),o.jsx(Bc,{icon:"",title:t("onboarding.supportFunnel"),description:t("onboarding.supportFunnelDesc"),onClick:()=>x("support_funnel"),color:"#34B7F1"}),o.jsx(Bc,{icon:"",title:t("onboarding.leadCapture"),description:t("onboarding.leadCaptureDesc"),onClick:()=>x("lead_capture"),color:"#f59e0b"})]}),o.jsx("button",{onClick:()=>x(null),style:{marginTop:"16px",padding:"8px",background:"none",border:"none",color:"#6b7280",cursor:"pointer",fontSize:"13px",width:"100%"},children:t("onboarding.skipAndStart")})]})}):o.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:o.jsxs("div",{style:{background:"white",borderRadius:"16px",padding:"32px",maxWidth:"500px",width:"90%",textAlign:"center"},children:[o.jsx("div",{style:{display:"flex",justifyContent:"center",gap:"8px",marginBottom:"24px"},children:d.map((b,v)=>o.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:v===a?"#25D366":"#e5e7eb",transition:"background 0.2s"}},v))}),o.jsx("div",{style:{fontSize:"64px",marginBottom:"16px"},children:h.icon}),o.jsx("h2",{style:{margin:"0 0 12px 0",fontSize:"24px",color:"#111827"},children:h.title}),o.jsx("p",{style:{color:"#6b7280",margin:"0 0 20px 0",lineHeight:"1.6"},children:h.description}),h.tips&&o.jsx("div",{style:{background:"#f9fafb",borderRadius:"8px",padding:"16px",textAlign:"left",marginBottom:"24px"},children:h.tips.map((b,v)=>o.jsx("div",{style:{fontSize:"13px",color:"#4b5563",marginBottom:v<h.tips.length-1?"8px":0},children:b},v))}),o.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"center"},children:[o.jsx("button",{onClick:y,style:{padding:"12px 24px",background:"white",border:"1px solid #d1d5db",borderRadius:"8px",cursor:"pointer",fontSize:"14px",color:"#6b7280"},children:t("onboarding.skip")}),o.jsx("button",{onClick:p,style:{padding:"12px 24px",background:"#25D366",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"14px",fontWeight:500},children:t(m?"onboarding.start":"onboarding.next")})]})]})})}function Bc({icon:e,title:t,description:a,onClick:r,color:l}){return o.jsxs("div",{onClick:r,style:{padding:"16px",border:"2px solid #e5e7eb",borderRadius:"12px",cursor:"pointer",transition:"all 0.2s",textAlign:"left"},onMouseOver:u=>{u.currentTarget.style.borderColor=l||"#25D366",u.currentTarget.style.transform="translateY(-2px)"},onMouseOut:u=>{u.currentTarget.style.borderColor="#e5e7eb",u.currentTarget.style.transform="none"},children:[o.jsx("div",{style:{fontSize:"28px",marginBottom:"8px"},children:e}),o.jsx("div",{style:{fontWeight:600,fontSize:"14px",marginBottom:"4px"},children:t}),o.jsx("div",{style:{fontSize:"12px",color:"#6b7280"},children:a})]})}function QI(){const{t:e}=ze("flowBuilder"),{id:t}=Xj(),[a,r]=S.useState(!1),[l,u]=S.useState(!1),[d,h]=S.useState(null),[m,p]=S.useState(!1),{loadFlow:y}=go();S.useEffect(()=>{t?x(t):localStorage.getItem("flowbuilder_onboarding_seen")||u(!0)},[t]);const x=async w=>{p(!0);try{const _=await Qh(w);if(_.flow)y(_.flow),b(e("flowLoaded",{name:_.flow.name}),"success");else throw new Error(e("errorLoadingFlow"))}catch(_){console.error("Error loading flow:",_),b(`${e("errorLoadingFlowAlert")}: ${_.message}`,"error")}finally{p(!1)}},b=(w,_="info")=>{h({message:w,type:_}),setTimeout(()=>h(null),4e3)},v=async w=>{if(localStorage.setItem("flowbuilder_onboarding_seen","true"),u(!1),w){p(!0);try{console.log("Creating flow from template:",w);const _=await r1(w,null);if(console.log("Template created, result:",_),_.id){const E=await Qh(_.id);if(console.log("Flow data loaded:",E),E.flow)y(E.flow),b(e("flowLoaded",{name:E.flow.name}),"success");else throw new Error(e("errorLoadingFlow"))}else throw new Error(e("errorNoFlowId"))}catch(_){console.error("Error loading template:",_),b(`${e("errorLoadingTemplate")}: ${_.message}`,"error")}finally{p(!1)}}};return o.jsxs("div",{style:{display:"flex",flexDirection:"column",height:"100vh",overflow:"hidden"},children:[o.jsx(LI,{onTestClick:()=>r(!0)}),o.jsxs("div",{style:{display:"flex",flex:1,overflow:"hidden"},children:[o.jsx(PI,{}),o.jsx(II,{}),o.jsx(YI,{})]}),o.jsxs("button",{onClick:()=>r(!0),style:{position:"fixed",right:"20px",bottom:"20px",background:"linear-gradient(135deg, #075E54 0%, #25D366 100%)",color:"white",border:"none",borderRadius:"50px",padding:"14px 24px",cursor:"pointer",boxShadow:"0 4px 15px rgba(37, 211, 102, 0.4)",fontSize:"14px",fontWeight:600,display:a?"none":"flex",alignItems:"center",gap:"8px",zIndex:100},children:[o.jsx("span",{style:{fontSize:"18px"},children:""}),e("testFlow")]}),m&&o.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1001},children:o.jsxs("div",{style:{background:"white",padding:"24px 32px",borderRadius:"12px",display:"flex",alignItems:"center",gap:"12px"},children:[o.jsx("div",{style:{width:"24px",height:"24px",border:"3px solid #e5e7eb",borderTop:"3px solid #25D366",borderRadius:"50%",animation:"spin 1s linear infinite"}}),o.jsx("span",{children:e("loadingFlow")})]})}),d&&o.jsxs("div",{style:{position:"fixed",top:"20px",right:"20px",padding:"12px 20px",borderRadius:"8px",background:d.type==="success"?"#10b981":d.type==="error"?"#ef4444":"#3b82f6",color:"white",fontWeight:500,boxShadow:"0 4px 12px rgba(0,0,0,0.15)",zIndex:1002,animation:"slideIn 0.3s ease"},children:[d.type==="success"&&" ",d.type==="error"&&" ",d.message]}),o.jsx(XI,{isOpen:a,onClose:()=>r(!1)}),l&&o.jsx(KI,{onComplete:v})]})}const Zp="/api/flow-logs";async function Jp(e,t){if(!e.ok){let a=t;try{const r=await e.json();r.error&&(a=r.error)}catch{}throw new Error(a)}return e.json()}async function WI(e={}){const t=new URLSearchParams(e).toString(),a=await fetch(`${Zp}?${t}`);return Jp(a,"Error al cargar logs")}async function ZI(e){const t=await fetch(`${Zp}/${e}`);return Jp(t,"Log no encontrado")}async function JI(e=7){const t=await fetch(`${Zp}/stats/summary?days=${e}`);return Jp(t,"Error al cargar estadsticas")}function eV(){const{t:e}=ze("logs"),t={completed:{label:e("statusCompleted"),color:"#10b981",icon:au},failed:{label:e("statusFailed"),color:"#ef4444",icon:Np},transferred:{label:e("statusTransferred"),color:"#f59e0b",icon:bp},running:{label:e("statusInProgress"),color:"#3b82f6",icon:ra},timeout:{label:e("statusTimeout"),color:"#6b7280",icon:Qr}},[a,r]=S.useState([]),[l,u]=S.useState(null),[d,h]=S.useState(!0),[m,p]=S.useState(null),[y,x]=S.useState(!1),[b,v]=S.useState({status:"",phone:"",flow_id:""});S.useEffect(()=>{w()},[]);const w=async()=>{h(!0);try{const[A,C]=await Promise.all([WI({limit:50,...b}),JI(7)]);r(A.logs||[]),u(C.stats)}catch(A){console.error("Error loading logs:",A)}finally{h(!1)}},_=async A=>{x(!0);try{const C=await ZI(A.id);p(C.log)}catch(C){console.error("Error loading log detail:",C)}finally{x(!1)}},E=(A,C)=>{v(k=>({...k,[A]:C}))},T=()=>{w()};return d?o.jsx("div",{className:"p-8 flex items-center justify-center h-full",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-500"})}):o.jsxs("div",{className:"p-8",children:[o.jsxs("div",{className:"flex items-center justify-between mb-8",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:e("title")}),o.jsx("p",{className:"text-gray-500 mt-1",children:e("subtitle")})]}),o.jsxs("button",{onClick:w,className:"flex items-center gap-2 px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg text-gray-700 transition",children:[o.jsx(da,{className:"w-4 h-4"}),e("refresh")]})]}),l&&o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8",children:[o.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-100 shadow-sm",children:[o.jsx("p",{className:"text-sm text-gray-500",children:e("totalExecutions")}),o.jsx("p",{className:"text-2xl font-bold text-gray-800",children:l.total_executions||0}),o.jsx("p",{className:"text-xs text-gray-400 mt-1",children:e("last7Days")})]}),o.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-100 shadow-sm",children:[o.jsx("p",{className:"text-sm text-gray-500",children:e("completionRate")}),o.jsxs("p",{className:"text-2xl font-bold text-green-600",children:[l.completion_rate||0,"%"]}),o.jsx("p",{className:"text-xs text-gray-400 mt-1",children:e("completedCount",{count:l.completed||0})})]}),o.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-100 shadow-sm",children:[o.jsx("p",{className:"text-sm text-gray-500",children:e("failed")}),o.jsx("p",{className:"text-2xl font-bold text-red-500",children:l.failed||0}),o.jsx("p",{className:"text-xs text-gray-400 mt-1",children:e("needAttention")})]}),o.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-100 shadow-sm",children:[o.jsx("p",{className:"text-sm text-gray-500",children:e("avgTime")}),o.jsx("p",{className:"text-2xl font-bold text-blue-600",children:l.avg_duration_ms?`${Math.round(l.avg_duration_ms)}ms`:"-"}),o.jsx("p",{className:"text-xs text-gray-400 mt-1",children:e("perExecution")})]})]}),o.jsx("div",{className:"bg-white rounded-xl p-4 border border-gray-100 shadow-sm mb-6",children:o.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Sp,{className:"w-4 h-4 text-gray-400"}),o.jsx("span",{className:"text-sm text-gray-600",children:e("filter")})]}),o.jsxs("select",{value:b.status,onChange:A=>E("status",A.target.value),className:"px-3 py-2 border border-gray-200 rounded-lg text-sm focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none",children:[o.jsx("option",{value:"",children:e("allStatuses")}),o.jsx("option",{value:"completed",children:e("completed")}),o.jsx("option",{value:"failed",children:e("failedPlural")}),o.jsx("option",{value:"transferred",children:e("transferredPlural")}),o.jsx("option",{value:"running",children:e("inProgress")})]}),o.jsx("input",{type:"text",value:b.phone,onChange:A=>E("phone",A.target.value),placeholder:e("phonePlaceholder"),className:"px-3 py-2 border border-gray-200 rounded-lg text-sm focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none w-40"}),o.jsx("button",{onClick:T,className:"px-4 py-2 bg-green-500 hover:bg-green-600 text-white rounded-lg text-sm transition",children:e("apply")})]})}),o.jsx("div",{className:"bg-white rounded-xl border border-gray-100 shadow-sm overflow-hidden",children:a.length===0?o.jsxs("div",{className:"p-12 text-center text-gray-400",children:[o.jsx(ra,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),o.jsx("p",{children:e("noLogs")}),o.jsx("p",{className:"text-sm mt-1",children:e("logsWillAppear")})]}):o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"bg-gray-50 text-left text-xs text-gray-500 uppercase tracking-wider",children:[o.jsx("th",{className:"px-4 py-3",children:e("thDate")}),o.jsx("th",{className:"px-4 py-3",children:e("thFlow")}),o.jsx("th",{className:"px-4 py-3",children:e("thPhone")}),o.jsx("th",{className:"px-4 py-3",children:e("thStatus")}),o.jsx("th",{className:"px-4 py-3",children:e("thNodes")}),o.jsx("th",{className:"px-4 py-3",children:e("thDuration")}),o.jsx("th",{className:"px-4 py-3"})]})}),o.jsx("tbody",{className:"divide-y divide-gray-100",children:a.map(A=>{const C=t[A.status]||t.running,k=C.icon;return o.jsxs("tr",{className:"hover:bg-gray-50 transition",children:[o.jsxs("td",{className:"px-4 py-3 text-sm",children:[o.jsx("div",{className:"text-gray-800",children:ku(new Date(A.started_at),"dd/MM HH:mm")}),o.jsx("div",{className:"text-xs text-gray-400",children:po(new Date(A.started_at),{addSuffix:!0,locale:ua()})})]}),o.jsxs("td",{className:"px-4 py-3",children:[o.jsx("div",{className:"font-medium text-gray-800",children:A.flow_name||e("noName")}),o.jsx("div",{className:"text-xs text-gray-400",children:A.trigger_type})]}),o.jsx("td",{className:"px-4 py-3",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Su,{className:"w-3 h-3 text-gray-400"}),o.jsx("span",{className:"text-sm text-gray-700",children:A.phone})]})}),o.jsx("td",{className:"px-4 py-3",children:o.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium",style:{background:`${C.color}20`,color:C.color},children:[o.jsx(k,{className:"w-3 h-3"}),C.label]})}),o.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:A.total_nodes_executed||0}),o.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:A.total_duration_ms?`${Math.round(A.total_duration_ms)}ms`:"-"}),o.jsx("td",{className:"px-4 py-3",children:o.jsx("button",{onClick:()=>_(A),className:"p-2 hover:bg-gray-100 rounded-lg transition",title:e("viewDetail"),children:o.jsx(Ii,{className:"w-4 h-4 text-gray-400"})})})]},A.id)})})]})}),m&&o.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:()=>p(null),children:o.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-2xl max-h-[80vh] overflow-auto m-4",onClick:A=>A.stopPropagation(),children:[o.jsxs("div",{className:"p-4 border-b border-gray-200 flex items-center justify-between sticky top-0 bg-white",children:[o.jsx("h3",{className:"font-semibold text-gray-800",children:e("executionDetail")}),o.jsx("button",{onClick:()=>p(null),className:"p-2 hover:bg-gray-100 rounded-lg",children:o.jsx(Vn,{className:"w-4 h-4"})})]}),y?o.jsx("div",{className:"p-8 text-center",children:o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-green-500 mx-auto"})}):o.jsxs("div",{className:"p-4 space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-xs text-gray-400 mb-1",children:e("detailFlow")}),o.jsx("p",{className:"font-medium",children:m.flow_name})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-xs text-gray-400 mb-1",children:e("detailPhone")}),o.jsx("p",{className:"font-medium",children:m.phone})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-xs text-gray-400 mb-1",children:e("triggerMessage")}),o.jsx("p",{className:"text-sm bg-gray-100 p-2 rounded",children:m.trigger_message||"-"})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-xs text-gray-400 mb-1",children:e("finalStatus")}),o.jsx("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium",style:{background:`${t[m.status]?.color}20`,color:t[m.status]?.color},children:t[m.status]?.label})]})]}),m.variables&&Object.keys(m.variables).length>0&&o.jsxs("div",{children:[o.jsx("p",{className:"text-xs text-gray-400 mb-2",children:e("capturedVariables")}),o.jsx("div",{className:"bg-gray-50 rounded-lg p-3 space-y-1",children:Object.entries(m.variables).map(([A,C])=>o.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[o.jsxs("span",{className:"font-mono text-purple-600",children:[A,":"]}),o.jsx("span",{className:"text-gray-700",children:String(C)})]},A))})]}),m.steps&&m.steps.length>0&&o.jsxs("div",{children:[o.jsx("p",{className:"text-xs text-gray-400 mb-2",children:e("executedNodes")}),o.jsx("div",{className:"space-y-2",children:m.steps.map((A,C)=>o.jsxs("div",{className:"flex items-start gap-3 p-3 bg-gray-50 rounded-lg",children:[o.jsx("div",{className:"w-6 h-6 rounded-full bg-green-100 text-green-600 flex items-center justify-center text-xs font-medium",children:C+1}),o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"font-medium text-sm",children:A.node_id}),o.jsx("span",{className:"text-xs px-2 py-0.5 bg-gray-200 rounded text-gray-600",children:A.node_type}),o.jsxs("span",{className:"text-xs text-gray-400",children:[A.duration_ms,"ms"]})]}),A.output&&o.jsx("p",{className:"text-sm text-gray-600 mt-1 break-words",children:A.output})]})]},C))})]}),m.error_message&&o.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:[o.jsx("p",{className:"text-xs text-red-600 font-medium mb-1",children:"Error"}),o.jsx("p",{className:"text-sm text-red-700",children:m.error_message}),m.error_node_id&&o.jsx("p",{className:"text-xs text-red-500 mt-1",children:e("errorInNode",{nodeId:m.error_node_id})})]})]})]})})]})}const Fu="/api/leads";async function Yu(e,t){if(!e.ok){let a=t;try{const r=await e.json();r.error&&(a=r.error)}catch{}throw new Error(a)}return e.json()}async function tV(e={}){const t=new URLSearchParams(e).toString(),a=await fetch(`${Fu}?${t}`);return Yu(a,"Error al cargar leads")}async function nV(){const e=await fetch(`${Fu}/stats`);return Yu(e,"Error al cargar estadsticas")}async function sV(e,t){const a=await fetch(`${Fu}/${encodeURIComponent(e)}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});return Yu(a,"Error al actualizar lead")}async function aV(e,t,a){const r=await fetch(`${Fu}/${encodeURIComponent(e)}/adjust-score`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({adjustment:t,reason:a})});return Yu(r,"Error al ajustar score")}const Pc={new:{labelKey:"statusNew",color:"#6b7280",bg:"#f3f4f6"},engaged:{labelKey:"statusEngaged",color:"#3b82f6",bg:"#dbeafe"},qualified:{labelKey:"statusQualified",color:"#10b981",bg:"#d1fae5"},customer:{labelKey:"statusClient",color:"#8b5cf6",bg:"#ede9fe"},inactive:{labelKey:"statusInactive",color:"#9ca3af",bg:"#f9fafb"}},Fb={hot:{color:"#ef4444",labelKey:"hot",range:"80-100"},warm:{color:"#f59e0b",labelKey:"warm",range:"50-79"},cold:{color:"#3b82f6",labelKey:"cold",range:"20-49"},new:{color:"#6b7280",labelKey:"new",range:"0-19"}};function rV(e){return e>=80?"hot":e>=50?"warm":e>=20?"cold":"new"}function oV(){const e=Ga(),{t}=ze("leads"),[a,r]=S.useState([]),[l,u]=S.useState(null),[d,h]=S.useState(!0),[m,p]=S.useState(null),[y,x]=S.useState({status:"",min_score:"",search:"",sort_by:"current_score",sort_dir:"desc"});S.useEffect(()=>{b()},[]);const b=async()=>{h(!0);try{const[T,A]=await Promise.all([tV({limit:100,...y}),nV()]);r(T.leads||[]),u(A)}catch(T){console.error("Error loading leads:",T)}finally{h(!1)}},v=(T,A)=>{x(C=>({...C,[T]:A}))},w=()=>{b()},_=async(T,A)=>{try{await sV(T,{status:A}),b()}catch(C){console.error("Error updating lead:",C)}},E=async(T,A)=>{try{await aV(T,A,"Manual adjustment"),b()}catch(C){console.error("Error adjusting score:",C)}};return d?o.jsx("div",{className:"p-8 flex items-center justify-center h-full",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-500"})}):o.jsxs("div",{className:"p-8",children:[o.jsxs("div",{className:"flex items-center justify-between mb-8",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:t("title")}),o.jsx("p",{className:"text-gray-500 mt-1",children:t("subtitle")})]}),o.jsxs("button",{onClick:b,className:"flex items-center gap-2 px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg text-gray-700 transition",children:[o.jsx(da,{className:"w-4 h-4"}),t("common:actions.refresh")]})]}),l&&o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 mb-8",children:[o.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-100 shadow-sm",children:[o.jsx("p",{className:"text-sm text-gray-500",children:t("totalLeads")}),o.jsx("p",{className:"text-2xl font-bold text-gray-800",children:l.stats?.total_leads||0})]}),o.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-100 shadow-sm",children:[o.jsx("p",{className:"text-sm text-gray-500",children:t("avgScore")}),o.jsx("p",{className:"text-2xl font-bold text-blue-600",children:l.stats?.avg_score||0})]}),o.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-100 shadow-sm",children:[o.jsx("p",{className:"text-sm text-gray-500",children:t("newLeads")}),o.jsx("p",{className:"text-2xl font-bold text-gray-600",children:l.stats?.new_leads||0})]}),o.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-100 shadow-sm",children:[o.jsx("p",{className:"text-sm text-gray-500",children:t("qualified")}),o.jsx("p",{className:"text-2xl font-bold text-green-600",children:l.stats?.qualified_leads||0})]}),o.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-100 shadow-sm",children:[o.jsx("p",{className:"text-sm text-gray-500",children:t("clients")}),o.jsx("p",{className:"text-2xl font-bold text-purple-600",children:l.stats?.customers||0})]})]}),l?.score_distribution&&o.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-100 shadow-sm mb-6",children:[o.jsx("p",{className:"text-sm font-medium text-gray-700 mb-3",children:t("scoreDistribution")}),o.jsx("div",{className:"flex gap-4",children:Object.entries(Fb).map(([T,A])=>{const C=l.score_distribution.find(k=>k.category===T)?.count||0;return o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"w-3 h-3 rounded-full",style:{background:A.color}}),o.jsxs("span",{className:"text-sm text-gray-600",children:[t(A.labelKey),": ",o.jsx("strong",{children:C})]})]},T)})})]}),o.jsx("div",{className:"bg-white rounded-xl p-4 border border-gray-100 shadow-sm mb-6",children:o.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Sp,{className:"w-4 h-4 text-gray-400"}),o.jsx("span",{className:"text-sm text-gray-600",children:t("filter")})]}),o.jsxs("div",{className:"relative",children:[o.jsx(Ep,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),o.jsx("input",{type:"text",value:y.search,onChange:T=>v("search",T.target.value),placeholder:t("searchPlaceholder"),className:"pl-10 pr-4 py-2 border border-gray-200 rounded-lg text-sm focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none w-48"})]}),o.jsxs("select",{value:y.status,onChange:T=>v("status",T.target.value),className:"px-3 py-2 border border-gray-200 rounded-lg text-sm focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none",children:[o.jsx("option",{value:"",children:t("allStatuses")}),Object.entries(Pc).map(([T,A])=>o.jsx("option",{value:T,children:t(A.labelKey)},T))]}),o.jsxs("select",{value:y.min_score,onChange:T=>v("min_score",T.target.value),className:"px-3 py-2 border border-gray-200 rounded-lg text-sm focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none",children:[o.jsx("option",{value:"",children:t("allScores")}),o.jsx("option",{value:"80",children:t("scoreHot")}),o.jsx("option",{value:"50",children:t("scoreWarm")}),o.jsx("option",{value:"20",children:t("scoreCold")})]}),o.jsxs("select",{value:`${y.sort_by}-${y.sort_dir}`,onChange:T=>{const[A,C]=T.target.value.split("-");v("sort_by",A),v("sort_dir",C)},className:"px-3 py-2 border border-gray-200 rounded-lg text-sm focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none",children:[o.jsx("option",{value:"current_score-desc",children:t("sortHighest")}),o.jsx("option",{value:"current_score-asc",children:t("sortLowest")}),o.jsx("option",{value:"last_interaction-desc",children:t("sortRecent")}),o.jsx("option",{value:"total_messages-desc",children:t("sortMostMessages")})]}),o.jsx("button",{onClick:w,className:"px-4 py-2 bg-green-500 hover:bg-green-600 text-white rounded-lg text-sm transition",children:t("common:actions.apply")})]})}),o.jsx("div",{className:"bg-white rounded-xl border border-gray-100 shadow-sm overflow-hidden",children:a.length===0?o.jsxs("div",{className:"p-12 text-center text-gray-400",children:[o.jsx(Tu,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),o.jsx("p",{children:t("noLeads")}),o.jsx("p",{className:"text-sm mt-1",children:t("leadsHint")})]}):o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"bg-gray-50 text-left text-xs text-gray-500 uppercase tracking-wider",children:[o.jsx("th",{className:"px-4 py-3",children:t("lead")}),o.jsx("th",{className:"px-4 py-3",children:t("score")}),o.jsx("th",{className:"px-4 py-3",children:t("status")}),o.jsx("th",{className:"px-4 py-3",children:t("messages")}),o.jsx("th",{className:"px-4 py-3",children:t("lastActivity")}),o.jsx("th",{className:"px-4 py-3",children:t("actions")})]})}),o.jsx("tbody",{className:"divide-y divide-gray-100",children:a.map(T=>{const A=rV(T.current_score),C=Fb[A],k=Pc[T.status]||Pc.new;return o.jsxs("tr",{className:"hover:bg-gray-50 transition",children:[o.jsx("td",{className:"px-4 py-3",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center",children:o.jsx("span",{className:"text-green-600 font-medium",children:T.contact_name?.[0]?.toUpperCase()||T.phone.slice(-2)})}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium text-gray-800",children:T.contact_name||t("noName")}),o.jsxs("div",{className:"text-xs text-gray-400 flex items-center gap-1",children:[o.jsx(Su,{className:"w-3 h-3"}),T.phone]})]})]})}),o.jsx("td",{className:"px-4 py-3",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center font-bold text-sm",style:{background:`${C.color}20`,color:C.color},children:T.current_score}),o.jsxs("div",{className:"flex flex-col gap-0.5",children:[o.jsx("button",{onClick:()=>E(T.phone,5),className:"p-1 hover:bg-green-100 rounded text-green-600",title:t("addPoints"),children:o.jsx(Cu,{className:"w-3 h-3"})}),o.jsx("button",{onClick:()=>E(T.phone,-5),className:"p-1 hover:bg-red-100 rounded text-red-600",title:t("subPoints"),children:o.jsx(_v,{className:"w-3 h-3"})})]})]})}),o.jsx("td",{className:"px-4 py-3",children:o.jsx("select",{value:T.status,onChange:L=>_(T.phone,L.target.value),className:"px-2 py-1 rounded-full text-xs font-medium border-0 cursor-pointer",style:{background:k.bg,color:k.color},children:Object.entries(Pc).map(([L,j])=>o.jsx("option",{value:L,children:t(j.labelKey)},L))})}),o.jsx("td",{className:"px-4 py-3",children:o.jsxs("div",{className:"flex items-center gap-1 text-sm text-gray-600",children:[o.jsx(Xt,{className:"w-4 h-4"}),T.total_messages||T.message_count||0]})}),o.jsx("td",{className:"px-4 py-3 text-sm text-gray-500",children:T.last_interaction?po(new Date(T.last_interaction),{addSuffix:!0,locale:ua()}):"-"}),o.jsx("td",{className:"px-4 py-3",children:o.jsx("button",{onClick:()=>e(`/conversations?phone=${encodeURIComponent(T.phone)}`),className:"p-2 hover:bg-gray-100 rounded-lg transition",title:t("viewConversation"),children:o.jsx(Ii,{className:"w-4 h-4 text-gray-400"})})})]},T.phone)})})]})})]})}const Ji="/api/flow-analytics";async function el(e,t){if(!e.ok){let a=t;try{const r=await e.json();r.error&&(a=r.error)}catch{}throw new Error(a)}return e.json()}async function iV(e=7){const t=await fetch(`${Ji}/summary?days=${e}`);return el(t,"Error al cargar resumen")}async function lV(e=14){const t=await fetch(`${Ji}/timeline?days=${e}`);return el(t,"Error al cargar timeline")}async function cV(e=7){const t=await fetch(`${Ji}/by-flow?days=${e}`);return el(t,"Error al cargar mtricas por flujo")}async function uV(e=7){const t=await fetch(`${Ji}/by-hour?days=${e}`);return el(t,"Error al cargar distribucin horaria")}async function dV(e=7){const t=await fetch(`${Ji}/trigger-types?days=${e}`);return el(t,"Error al cargar tipos de trigger")}function fV(){const{t:e}=ze("analytics"),[t,a]=S.useState(null),[r,l]=S.useState([]),[u,d]=S.useState([]),[h,m]=S.useState([]),[p,y]=S.useState([]),[x,b]=S.useState(!0),[v,w]=S.useState(7);S.useEffect(()=>{_()},[v]);const _=async()=>{b(!0);try{const[A,C,k,L,j]=await Promise.all([iV(v),lV(v),cV(v),uV(v),dV(v)]);a(A.summary),l(C.timeline||[]),d(k.flows||[]),m(L.hourly||[]),y(j.trigger_types||[])}catch(A){console.error("Error loading analytics:",A)}finally{b(!1)}};if(x)return o.jsx("div",{className:"p-8 flex items-center justify-center h-full",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-500"})});const E=Math.max(...r.map(A=>A.total),1),T=Math.max(...h.map(A=>A.executions),1);return o.jsxs("div",{className:"p-8",children:[o.jsxs("div",{className:"flex items-center justify-between mb-8",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:e("title")}),o.jsx("p",{className:"text-gray-500 mt-1",children:e("subtitle")})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsxs("select",{value:v,onChange:A=>w(parseInt(A.target.value)),className:"px-3 py-2 border border-gray-200 rounded-lg text-sm focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none",children:[o.jsx("option",{value:7,children:e("lastDays",{count:7})}),o.jsx("option",{value:14,children:e("lastDays",{count:14})}),o.jsx("option",{value:30,children:e("lastDays",{count:30})})]}),o.jsxs("button",{onClick:_,className:"flex items-center gap-2 px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg text-gray-700 transition",children:[o.jsx(da,{className:"w-4 h-4"}),e("refresh")]})]})]}),t&&o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[o.jsx("div",{className:"bg-white rounded-xl p-5 border border-gray-100 shadow-sm",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-500",children:e("totalExecutions")}),o.jsx("p",{className:"text-3xl font-bold text-gray-800 mt-1",children:t.executions.total}),o.jsx("p",{className:"text-xs text-gray-400 mt-1",children:e("uniqueUsers",{count:t.executions.unique_users})})]}),o.jsx("div",{className:"p-3 bg-blue-50 rounded-xl",children:o.jsx(ra,{className:"w-6 h-6 text-blue-600"})})]})}),o.jsx("div",{className:"bg-white rounded-xl p-5 border border-gray-100 shadow-sm",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-500",children:e("completionRate")}),o.jsxs("p",{className:"text-3xl font-bold text-green-600 mt-1",children:[t.executions.completion_rate,"%"]}),o.jsx("p",{className:"text-xs text-gray-400 mt-1",children:e("completedCount",{count:t.executions.completed})})]}),o.jsx("div",{className:"p-3 bg-green-50 rounded-xl",children:o.jsx(au,{className:"w-6 h-6 text-green-600"})})]})}),o.jsx("div",{className:"bg-white rounded-xl p-5 border border-gray-100 shadow-sm",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-500",children:e("failed")}),o.jsx("p",{className:"text-3xl font-bold text-red-500 mt-1",children:t.executions.failed}),o.jsx("p",{className:"text-xs text-gray-400 mt-1",children:e("transferredCount",{count:t.executions.transferred})})]}),o.jsx("div",{className:"p-3 bg-red-50 rounded-xl",children:o.jsx(Np,{className:"w-6 h-6 text-red-500"})})]})}),o.jsx("div",{className:"bg-white rounded-xl p-5 border border-gray-100 shadow-sm",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-500",children:e("avgTime")}),o.jsxs("p",{className:"text-3xl font-bold text-purple-600 mt-1",children:[t.executions.avg_duration_ms,"ms"]}),o.jsx("p",{className:"text-xs text-gray-400 mt-1",children:e("avgNodes",{count:t.executions.avg_nodes})})]}),o.jsx("div",{className:"p-3 bg-purple-50 rounded-xl",children:o.jsx(Qr,{className:"w-6 h-6 text-purple-600"})})]})})]}),o.jsxs("div",{className:"bg-white rounded-xl border border-gray-100 shadow-sm p-6 mb-6",children:[o.jsxs("h3",{className:"font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[o.jsx(ou,{className:"w-5 h-5 text-gray-400"}),e("executionsPerDay")]}),r.length===0?o.jsx("div",{className:"text-center text-gray-400 py-8",children:e("noDataToShow")}):o.jsx("div",{className:"flex items-end gap-2 h-40",children:r.map((A,C)=>o.jsxs("div",{className:"flex-1 flex flex-col items-center",children:[o.jsxs("div",{className:"w-full flex flex-col gap-0.5",style:{height:"120px"},children:[o.jsx("div",{className:"w-full bg-green-500 rounded-t",style:{height:`${A.completed/E*100}%`},title:e("tooltipCompleted",{count:A.completed})}),o.jsx("div",{className:"w-full bg-red-400",style:{height:`${A.failed/E*100}%`},title:e("tooltipFailed",{count:A.failed})}),o.jsx("div",{className:"w-full bg-yellow-400 rounded-b",style:{height:`${A.transferred/E*100}%`},title:e("tooltipTransferred",{count:A.transferred})})]}),o.jsx("div",{className:"text-xs text-gray-400 mt-2",children:ku(new Date(A.date),"dd/MM")})]},C))}),o.jsxs("div",{className:"flex items-center gap-4 mt-4 pt-4 border-t border-gray-100",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"w-3 h-3 rounded bg-green-500"}),o.jsx("span",{className:"text-xs text-gray-500",children:e("completed")})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"w-3 h-3 rounded bg-red-400"}),o.jsx("span",{className:"text-xs text-gray-500",children:e("failed")})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"w-3 h-3 rounded bg-yellow-400"}),o.jsx("span",{className:"text-xs text-gray-500",children:e("transferred")})]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[o.jsxs("div",{className:"bg-white rounded-xl border border-gray-100 shadow-sm p-6",children:[o.jsxs("h3",{className:"font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[o.jsx(Cp,{className:"w-5 h-5 text-gray-400"}),e("performanceByFlow")]}),u.length===0?o.jsx("div",{className:"text-center text-gray-400 py-8",children:e("noFlowsConfigured")}):o.jsx("div",{className:"space-y-3",children:u.slice(0,5).map((A,C)=>o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-8 h-8 rounded-lg bg-gray-100 flex items-center justify-center text-sm font-medium text-gray-600",children:C+1}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("p",{className:"font-medium text-gray-800 truncate",children:A.flow_name}),o.jsxs("span",{className:"text-sm text-gray-500",children:[A.recent_executions," ",e("executions")]})]}),o.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[o.jsx("div",{className:"flex-1 h-2 bg-gray-100 rounded-full overflow-hidden",children:o.jsx("div",{className:"h-full bg-green-500",style:{width:`${A.completion_rate}%`}})}),o.jsxs("span",{className:"text-xs text-gray-400",children:[A.completion_rate,"%"]})]})]})]},A.flow_id))}),o.jsx(Ba,{to:"/flows",className:"block text-center text-sm text-green-600 hover:text-green-700 mt-4 pt-4 border-t border-gray-100",children:e("viewAllFlows")})]}),o.jsxs("div",{className:"bg-white rounded-xl border border-gray-100 shadow-sm p-6",children:[o.jsxs("h3",{className:"font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[o.jsx(Qr,{className:"w-5 h-5 text-gray-400"}),e("activityByHour")]}),o.jsx("div",{className:"flex items-end gap-1 h-32",children:h.map((A,C)=>o.jsx("div",{className:"flex-1 bg-blue-500 rounded-t transition-all hover:bg-blue-600",style:{height:`${A.executions/T*100}%`,minHeight:A.executions>0?"4px":"0"},title:e("tooltipHourExecutions",{hour:A.hour,count:A.executions})},C))}),o.jsxs("div",{className:"flex justify-between text-xs text-gray-400 mt-2",children:[o.jsx("span",{children:"00:00"}),o.jsx("span",{children:"06:00"}),o.jsx("span",{children:"12:00"}),o.jsx("span",{children:"18:00"}),o.jsx("span",{children:"23:00"})]})]})]}),o.jsxs("div",{className:"bg-white rounded-xl border border-gray-100 shadow-sm p-6",children:[o.jsxs("h3",{className:"font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[o.jsx(wp,{className:"w-5 h-5 text-gray-400"}),e("triggerDistribution")]}),p.length===0?o.jsx("div",{className:"text-center text-gray-400 py-8",children:e("noTriggerData")}):o.jsx("div",{className:"flex gap-6",children:p.map((A,C)=>{const k=["#10b981","#3b82f6","#f59e0b","#8b5cf6","#ec4899"],L=k[C%k.length],j=p.reduce(($,H)=>$+H.count,0),R=j>0?Math.round(A.count/j*100):0;return o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-2",style:{background:`${L}20`},children:o.jsxs("span",{className:"text-xl font-bold",style:{color:L},children:[R,"%"]})}),o.jsx("p",{className:"text-sm font-medium text-gray-800 capitalize",children:A.trigger_type}),o.jsxs("p",{className:"text-xs text-gray-400",children:[A.count," ",e("executions")]})]},A.trigger_type)})})]})]})}function hV(){const{t:e}=ze("monitor"),[t,a]=S.useState([]),[r,l]=S.useState(null),[u,d]=S.useState({running:0,connectedMonitors:0}),[h,m]=S.useState(!1);return S.useEffect(()=>{const p=new EventSource("/api/flow-monitor/stream");return p.onopen=()=>m(!0),p.onerror=()=>m(!1),p.onmessage=y=>{const x=JSON.parse(y.data);switch(x.type){case"connected":d({running:x.activeCount,connectedMonitors:0});break;case"active_execution":a(b=>b.find(w=>w.executionId===x.executionId)?b:[x,...b]);break;case"flow_started":a(b=>[x,...b]);break;case"node_started":case"node_completed":a(b=>b.map(v=>v.executionId===x.executionId?{...v,currentNodeId:x.nodeId,currentNodeType:x.nodeType,variables:x.variables,steps:x.type==="node_completed"?[...v.steps||[],{nodeId:x.nodeId,nodeType:x.nodeType,durationMs:x.durationMs,status:x.status,timestamp:x.timestamp}]:v.steps}:v));break;case"flow_completed":case"flow_error":case"flow_transferred":a(b=>b.map(v=>v.executionId===x.executionId?{...v,status:x.type.replace("flow_",""),completedAt:x.timestamp}:v));break}},()=>p.close()},[]),o.jsxs("div",{className:"h-screen flex flex-col bg-gray-50",children:[o.jsx("header",{className:"bg-white border-b px-6 py-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:e("title")}),o.jsx("p",{className:"text-gray-500",children:e("subtitle")})]}),o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:`w-2 h-2 rounded-full ${h?"bg-green-500":"bg-red-500"}`}),o.jsx("span",{className:"text-sm text-gray-600",children:e(h?"connected":"disconnected")})]}),o.jsx("div",{className:"text-sm text-gray-600",children:e("activeExecutions",{count:t.filter(p=>!p.status).length})})]})]})}),o.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[o.jsxs("aside",{className:"w-80 bg-white border-r overflow-y-auto",children:[o.jsx("div",{className:"p-4 border-b",children:o.jsx("h2",{className:"font-semibold text-gray-700",children:e("executions")})}),o.jsx("div",{className:"divide-y",children:t.length===0?o.jsx("div",{className:"p-8 text-center text-gray-400",children:e("noExecutions")}):t.map(p=>o.jsx("button",{onClick:()=>l(p),className:`w-full p-4 text-left hover:bg-gray-50 transition ${r?.executionId===p.executionId?"bg-green-50":""}`,children:o.jsxs("div",{className:"flex items-start justify-between gap-2",children:[o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[o.jsx(Su,{className:"w-4 h-4 text-gray-400 flex-shrink-0"}),o.jsx("span",{className:"font-mono text-sm text-gray-700 truncate",children:p.phone})]}),o.jsx("p",{className:"text-xs text-gray-500 truncate mb-1",children:p.flowName||p.flowSlug}),p.currentNodeId&&o.jsxs("div",{className:"flex items-center gap-1 text-xs",children:[o.jsx(ra,{className:"w-3 h-3 text-green-500"}),o.jsx("span",{className:"text-gray-600",children:p.currentNodeId})]})]}),o.jsxs("div",{children:[p.status==="completed"&&o.jsx(au,{className:"w-5 h-5 text-green-500"}),p.status==="error"&&o.jsx(Np,{className:"w-5 h-5 text-red-500"}),p.status==="transferred"&&o.jsx(Pa,{className:"w-5 h-5 text-yellow-500"}),!p.status&&o.jsx(ra,{className:"w-5 h-5 text-green-500 animate-pulse"})]})]})},p.executionId))})]}),o.jsx("main",{className:"flex-1 flex",children:r?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"flex-1 p-6 overflow-auto",children:o.jsxs("div",{className:"bg-white rounded-lg border p-6",children:[o.jsx("h3",{className:"font-semibold text-gray-700 mb-4",children:e("flowExecution")}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{children:[o.jsx("span",{className:"text-sm text-gray-500",children:e("flow")}),o.jsx("p",{className:"font-medium",children:r.flowName})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-sm text-gray-500",children:e("phone")}),o.jsx("p",{className:"font-mono text-sm",children:r.phone})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-sm text-gray-500",children:e("currentNode")}),o.jsx("p",{className:"font-mono text-sm",children:r.currentNodeId||"N/A"})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-sm text-gray-500",children:e("nodeType")}),o.jsx("p",{className:"font-mono text-sm",children:r.currentNodeType||"N/A"})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-sm text-gray-500",children:e("status")}),o.jsxs("p",{className:"font-medium",children:[r.status==="completed"&&e("statusCompleted"),r.status==="error"&&e("statusError"),r.status==="transferred"&&e("statusTransferred"),!r.status&&e("statusRunning")]})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-sm text-gray-500",children:e("started")}),o.jsx("p",{className:"text-sm",children:r.timestamp?new Date(r.timestamp).toLocaleString():"N/A"})]}),r.completedAt&&o.jsxs("div",{children:[o.jsx("span",{className:"text-sm text-gray-500",children:e("completedAt")}),o.jsx("p",{className:"text-sm",children:new Date(r.completedAt).toLocaleString()})]})]})]})}),o.jsxs("aside",{className:"w-96 bg-white border-l overflow-y-auto",children:[o.jsx("div",{className:"p-4 border-b",children:o.jsx("h2",{className:"font-semibold text-gray-700",children:e("details")})}),o.jsxs("div",{className:"p-4 space-y-4",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-sm font-semibold text-gray-600 mb-2",children:e("variables")}),o.jsx("div",{className:"bg-gray-50 rounded p-3 font-mono text-xs",children:o.jsx("pre",{className:"whitespace-pre-wrap break-words",children:JSON.stringify(r.variables||{},null,2)})})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-sm font-semibold text-gray-600 mb-2",children:e("timeline")}),o.jsx("div",{className:"space-y-2",children:r.steps&&r.steps.length>0?r.steps.map((p,y)=>o.jsxs("div",{className:"flex items-start gap-2 text-xs",children:[o.jsx(au,{className:"w-4 h-4 text-green-500 flex-shrink-0 mt-0.5"}),o.jsxs("div",{className:"flex-1",children:[o.jsx("p",{className:"font-medium text-gray-700",children:p.nodeId}),o.jsxs("p",{className:"text-gray-500",children:[p.nodeType,"  ",p.durationMs,"ms"]}),p.timestamp&&o.jsx("p",{className:"text-gray-400",children:new Date(p.timestamp).toLocaleTimeString()})]})]},y)):o.jsx("p",{className:"text-gray-400 text-sm",children:e("noEventsYet")})})]})]})]})]}):o.jsx("div",{className:"flex-1 flex items-center justify-center text-gray-400",children:o.jsxs("div",{className:"text-center",children:[o.jsx(ra,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),o.jsx("p",{children:e("selectExecution")})]})})})]})]})}const qr=()=>{const e=Lt.getState().token;return{"Content-Type":"application/json",...e?{Authorization:`Bearer ${e}`}:{}}};function pV(){const{t:e}=ze("agents"),[t,a]=S.useState([]),[r,l]=S.useState([]),[u,d]=S.useState(!0),[h,m]=S.useState(!1),[p,y]=S.useState(null),[x,b]=S.useState({}),[v,w]=S.useState({username:"",password:"",name:"",email:"",role:"agent",departmentId:"",avatarColor:"#6366f1"}),[_,E]=S.useState(""),[T,A]=S.useState(!1),C=async()=>{try{const[F,P]=await Promise.all([fetch("/api/agents",{headers:qr()}),fetch("/api/departments",{headers:qr()})]),K=await F.json(),W=await P.json();K.ok&&a(K.agents),W.ok&&l(W.departments)}catch(F){console.error("Error loading data:",F)}finally{d(!1)}};S.useEffect(()=>{C()},[]);const k=()=>{y(null),w({username:"",password:"",name:"",email:"",role:"agent",departmentId:"",avatarColor:"#6366f1"}),E(""),m(!0)},L=F=>{y(F),w({username:F.username,password:"",name:F.name,email:F.email||"",role:F.role,departmentId:F.department_id||"",avatarColor:F.avatar_color||"#6366f1"}),E(""),m(!0)},j=async F=>{F.preventDefault(),E(""),A(!0);try{const P={name:v.name,email:v.email||null,role:v.role,departmentId:v.departmentId?Number(v.departmentId):null,avatarColor:v.avatarColor};if(p){v.password&&(P.password=v.password);const W=await(await fetch(`/api/agents/${p.id}`,{method:"PUT",headers:qr(),body:JSON.stringify(P)})).json();if(!W.ok)throw new Error(W.error)}else{P.username=v.username,P.password=v.password;const W=await(await fetch("/api/agents",{method:"POST",headers:qr(),body:JSON.stringify(P)})).json();if(!W.ok)throw new Error(W.error)}m(!1),C()}catch(P){E(P.message)}finally{A(!1)}},R=async F=>{if(confirm(e("deleteConfirm",{name:F.name})))try{await fetch(`/api/agents/${F.id}`,{method:"DELETE",headers:qr()}),C()}catch(P){alert("Error: "+P.message)}},$=async F=>{if(confirm(e("regenerateKeyConfirm",{name:F.name})))try{const K=await(await fetch(`/api/agents/${F.id}/regenerate-api-key`,{method:"POST",headers:qr()})).json();K.ok&&(C(),alert(`Nueva API key: ${K.apiKey}`))}catch(P){alert("Error: "+P.message)}},H=["#6366f1","#22c55e","#ef4444","#f59e0b","#3b82f6","#ec4899","#8b5cf6","#14b8a6","#f97316","#06b6d4"];return u?o.jsx("div",{className:"p-8 flex justify-center",children:o.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-green-500 border-t-transparent rounded-full"})}):o.jsxs("div",{className:"p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:e("title")}),o.jsx("p",{className:"text-gray-500 text-sm mt-1",children:e("subtitle")})]}),o.jsxs("button",{onClick:k,className:"flex items-center gap-2 bg-green-600 hover:bg-green-700 text-white px-4 py-2.5 rounded-lg transition font-medium",children:[o.jsx(Jr,{className:"w-4 h-4"})," ",e("addAgent")]})]}),o.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"bg-gray-50 border-b border-gray-200",children:[o.jsx("th",{className:"text-left px-6 py-3 text-xs font-semibold text-gray-500 uppercase",children:e("agent")}),o.jsx("th",{className:"text-left px-6 py-3 text-xs font-semibold text-gray-500 uppercase",children:e("role")}),o.jsx("th",{className:"text-left px-6 py-3 text-xs font-semibold text-gray-500 uppercase",children:e("department")}),o.jsx("th",{className:"text-left px-6 py-3 text-xs font-semibold text-gray-500 uppercase",children:e("status")}),o.jsx("th",{className:"text-left px-6 py-3 text-xs font-semibold text-gray-500 uppercase",children:"API Key"}),o.jsx("th",{className:"text-left px-6 py-3 text-xs font-semibold text-gray-500 uppercase",children:e("lastLogin")}),o.jsx("th",{className:"text-right px-6 py-3 text-xs font-semibold text-gray-500 uppercase",children:e("actions")})]})}),o.jsxs("tbody",{className:"divide-y divide-gray-100",children:[t.map(F=>o.jsxs("tr",{className:`hover:bg-gray-50 ${F.status==="inactive"?"opacity-50":""}`,children:[o.jsx("td",{className:"px-6 py-4",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-9 h-9 rounded-full flex items-center justify-center flex-shrink-0",style:{backgroundColor:F.avatar_color||"#6366f1"},children:o.jsx("span",{className:"text-white text-sm font-medium",children:F.name?.[0]?.toUpperCase()})}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium text-gray-900 text-sm",children:F.name}),o.jsxs("p",{className:"text-xs text-gray-400",children:["@",F.username]})]})]})}),o.jsx("td",{className:"px-6 py-4",children:o.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium ${F.role==="supervisor"?"bg-purple-50 text-purple-700":"bg-blue-50 text-blue-700"}`,children:[F.role==="supervisor"?o.jsx(ca,{className:"w-3 h-3"}):o.jsx(Pa,{className:"w-3 h-3"}),F.role==="supervisor"?e("supervisor"):e("agent")]})}),o.jsx("td",{className:"px-6 py-4",children:F.department_name?o.jsx("span",{className:"text-sm px-2 py-1 rounded-full",style:{backgroundColor:`${F.department_color}20`,color:F.department_color},children:F.department_name}):o.jsx("span",{className:"text-xs text-gray-400",children:e("noDepartment")})}),o.jsx("td",{className:"px-6 py-4",children:o.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${F.status==="active"?"bg-green-50 text-green-700":"bg-gray-100 text-gray-500"}`,children:F.status==="active"?e("active"):e("inactive")})}),o.jsx("td",{className:"px-6 py-4",children:o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx("code",{className:"text-xs text-gray-400 font-mono",children:x[F.id]?F.api_key:F.api_key?"":"-"}),F.api_key&&o.jsx("button",{onClick:()=>b(P=>({...P,[F.id]:!P[F.id]})),className:"p-1 text-gray-400 hover:text-gray-600",children:x[F.id]?o.jsx(f4,{className:"w-3 h-3"}):o.jsx(jp,{className:"w-3 h-3"})})]})}),o.jsx("td",{className:"px-6 py-4",children:o.jsx("span",{className:"text-xs text-gray-400",children:F.last_login?new Date(F.last_login).toLocaleString():e("never")})}),o.jsx("td",{className:"px-6 py-4 text-right",children:o.jsxs("div",{className:"flex items-center justify-end gap-1",children:[o.jsx("button",{onClick:()=>L(F),className:"p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg",title:e("common:actions.edit"),children:o.jsx(Eu,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>$(F),className:"p-2 text-gray-400 hover:text-yellow-600 hover:bg-yellow-50 rounded-lg",title:e("regenerateKey"),children:o.jsx(j4,{className:"w-4 h-4"})}),F.status==="active"&&o.jsx("button",{onClick:()=>R(F),className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg",title:e("deactivate"),children:o.jsx(ho,{className:"w-4 h-4"})})]})})]},F.id)),!t.length&&o.jsx("tr",{children:o.jsx("td",{colSpan:"7",className:"text-center py-12 text-gray-400",children:e("noAgents")})})]})]})}),h&&o.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md p-6",children:[o.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-4",children:e(p?"editAgent":"addAgent")}),_&&o.jsx("div",{className:"bg-red-50 text-red-600 px-4 py-2 rounded-lg text-sm mb-4",children:_}),o.jsxs("form",{onSubmit:j,className:"space-y-4",children:[!p&&o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:e("username")}),o.jsx("input",{type:"text",value:v.username,onChange:F=>w({...v,username:F.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",required:!0,minLength:3})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:e(p?"passwordPlaceholder":"password")}),o.jsx("input",{type:"password",value:v.password,onChange:F=>w({...v,password:F.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",required:!p,minLength:6})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:e("name")}),o.jsx("input",{type:"text",value:v.name,onChange:F=>w({...v,name:F.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:e("email")}),o.jsx("input",{type:"email",value:v.email,onChange:F=>w({...v,email:F.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm"})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:e("role")}),o.jsxs("select",{value:v.role,onChange:F=>w({...v,role:F.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",children:[o.jsx("option",{value:"agent",children:e("agent")}),o.jsx("option",{value:"supervisor",children:e("supervisor")})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:e("department")}),o.jsxs("select",{value:v.departmentId,onChange:F=>w({...v,departmentId:F.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",children:[o.jsx("option",{value:"",children:e("noDepartment")}),r.filter(F=>F.active).map(F=>o.jsx("option",{value:F.id,children:F.display_name},F.id))]})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:e("avatarColor")}),o.jsx("div",{className:"flex gap-2",children:H.map(F=>o.jsx("button",{type:"button",onClick:()=>w({...v,avatarColor:F}),className:`w-8 h-8 rounded-full transition ${v.avatarColor===F?"ring-2 ring-offset-2 ring-gray-400":""}`,style:{backgroundColor:F}},F))})]}),o.jsxs("div",{className:"flex gap-3 pt-2",children:[o.jsx("button",{type:"button",onClick:()=>m(!1),className:"flex-1 px-4 py-2.5 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition",children:e("common:actions.cancel")}),o.jsx("button",{type:"submit",disabled:T,className:"flex-1 px-4 py-2.5 bg-green-600 hover:bg-green-700 text-white rounded-lg transition disabled:opacity-50",children:e(T?"saving":p?"common:actions.save":"common:actions.create")})]})]})]})})]})}const Hc=()=>{const e=Lt.getState().token;return{"Content-Type":"application/json",...e?{Authorization:`Bearer ${e}`}:{}}};function mV(){const{t:e}=ze("departments"),[t,a]=S.useState([]),[r,l]=S.useState(!0),[u,d]=S.useState(!1),[h,m]=S.useState(null),[p,y]=S.useState({name:"",displayName:"",icon:"MessageSquare",color:"#6f42c1",autoAssignIntents:""}),[x,b]=S.useState(""),[v,w]=S.useState(!1),_=async()=>{try{const R=await(await fetch("/api/departments",{headers:Hc()})).json();R.ok&&a(R.departments)}catch(j){console.error("Error loading departments:",j)}finally{l(!1)}};S.useEffect(()=>{_()},[]);const E=()=>{m(null),y({name:"",displayName:"",icon:"MessageSquare",color:"#6f42c1",autoAssignIntents:""}),b(""),d(!0)},T=j=>{m(j);const R=j.auto_assign_intents,$=Array.isArray(R)?R.join(", "):typeof R=="string"?JSON.parse(R||"[]").join(", "):"";y({name:j.name,displayName:j.display_name,icon:j.icon||"MessageSquare",color:j.color||"#6f42c1",autoAssignIntents:$}),b(""),d(!0)},A=async j=>{j.preventDefault(),b(""),w(!0);try{const R=p.autoAssignIntents.split(",").map($=>$.trim().toLowerCase()).filter(Boolean);if(h){const H=await(await fetch(`/api/departments/${h.id}`,{method:"PUT",headers:Hc(),body:JSON.stringify({displayName:p.displayName,icon:p.icon,color:p.color,autoAssignIntents:R})})).json();if(!H.ok)throw new Error(H.error)}else{const H=await(await fetch("/api/departments",{method:"POST",headers:Hc(),body:JSON.stringify({name:p.name.toLowerCase().replace(/\s+/g,"_"),displayName:p.displayName,icon:p.icon,color:p.color,autoAssignIntents:R})})).json();if(!H.ok)throw new Error(H.error)}d(!1),_()}catch(R){b(R.message)}finally{w(!1)}},C=async j=>{if(confirm(e("deleteConfirm",{name:j.display_name})))try{const $=await(await fetch(`/api/departments/${j.id}`,{method:"DELETE",headers:Hc()})).json();if(!$.ok)throw new Error($.error);_()}catch(R){alert("Error: "+R.message)}},k=["#28a745","#17a2b8","#ffc107","#6f42c1","#dc3545","#fd7e14","#20c997","#6610f2","#e83e8c","#007bff"],L=["MessageSquare","ShoppingCart","Wrench","Package","Phone","Mail","Star","Heart","Zap","Globe"];return r?o.jsx("div",{className:"p-8 flex justify-center",children:o.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-green-500 border-t-transparent rounded-full"})}):o.jsxs("div",{className:"p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:e("title")}),o.jsx("p",{className:"text-gray-500 text-sm mt-1",children:e("subtitle")})]}),o.jsxs("button",{onClick:E,className:"flex items-center gap-2 bg-green-600 hover:bg-green-700 text-white px-4 py-2.5 rounded-lg transition font-medium",children:[o.jsx(Cu,{className:"w-4 h-4"})," ",e("addDepartment")]})]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map(j=>{const R=Array.isArray(j.auto_assign_intents)?j.auto_assign_intents:JSON.parse(j.auto_assign_intents||"[]");return o.jsxs("div",{className:`bg-white rounded-xl border-2 p-5 ${j.active?"border-gray-200":"border-gray-100 opacity-50"}`,children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center",style:{backgroundColor:`${j.color}20`},children:o.jsx("span",{className:"text-lg",style:{color:j.color},children:j.icon==="ShoppingCart"?"":j.icon==="Wrench"?"":j.icon==="Package"?"":""})}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold text-gray-900",children:j.display_name}),o.jsxs("p",{className:"text-xs text-gray-400",children:["@",j.name]})]})]}),o.jsxs("div",{className:"flex gap-1",children:[o.jsx("button",{onClick:()=>T(j),className:"p-1.5 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg",children:o.jsx(Eu,{className:"w-4 h-4"})}),j.name!=="general"&&j.active&&o.jsx("button",{onClick:()=>C(j),className:"p-1.5 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg",children:o.jsx(ho,{className:"w-4 h-4"})})]})]}),o.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[o.jsxs("span",{className:"text-xs text-gray-500",children:[j.agent_count||0," ",e("agents")]}),o.jsx("span",{className:"w-1 h-1 bg-gray-300 rounded-full"}),o.jsx("span",{className:`text-xs ${j.active?"text-green-600":"text-gray-400"}`,children:j.active?e("active"):e("inactive")})]}),R.length>0&&o.jsxs("div",{children:[o.jsxs("p",{className:"text-xs text-gray-400 mb-1.5 flex items-center gap-1",children:[o.jsx(J4,{className:"w-3 h-3"})," ",e("autoAssignIntents"),":"]}),o.jsx("div",{className:"flex flex-wrap gap-1",children:R.map(($,H)=>o.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full bg-gray-100 text-gray-600",children:$},H))})]})]},j.id)})}),u&&o.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md p-6",children:[o.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-4",children:e(h?"editDepartment":"addDepartment")}),x&&o.jsx("div",{className:"bg-red-50 text-red-600 px-4 py-2 rounded-lg text-sm mb-4",children:x}),o.jsxs("form",{onSubmit:A,className:"space-y-4",children:[!h&&o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:e("slug")}),o.jsx("input",{type:"text",value:p.name,onChange:j=>y({...p,name:j.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",required:!0,placeholder:"ej: ventas, soporte"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:e("displayName")}),o.jsx("input",{type:"text",value:p.displayName,onChange:j=>y({...p,displayName:j.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",required:!0,placeholder:"ej: Ventas, Soporte Tecnico"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:e("color")}),o.jsx("div",{className:"flex gap-2",children:k.map(j=>o.jsx("button",{type:"button",onClick:()=>y({...p,color:j}),className:`w-8 h-8 rounded-full transition ${p.color===j?"ring-2 ring-offset-2 ring-gray-400":""}`,style:{backgroundColor:j}},j))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:e("icon")}),o.jsx("select",{value:p.icon,onChange:j=>y({...p,icon:j.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",children:L.map(j=>o.jsx("option",{value:j,children:j},j))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:e("autoAssignIntents")}),o.jsx("input",{type:"text",value:p.autoAssignIntents,onChange:j=>y({...p,autoAssignIntents:j.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",placeholder:"ventas, comprar, precio (separados por coma)"}),o.jsx("p",{className:"text-xs text-gray-400 mt-1",children:e("autoAssignHint")})]}),o.jsxs("div",{className:"flex gap-3 pt-2",children:[o.jsx("button",{type:"button",onClick:()=>d(!1),className:"flex-1 px-4 py-2.5 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition",children:e("common:actions.cancel")}),o.jsx("button",{type:"submit",disabled:v,className:"flex-1 px-4 py-2.5 bg-green-600 hover:bg-green-700 text-white rounded-lg transition disabled:opacity-50",children:e(v?"saving":h?"common:actions.save":"common:actions.create")})]})]})]})})]})}const Gt="/api/learning",ot=()=>{const e=Lt.getState().token;return{"Content-Type":"application/json",...e?{Authorization:`Bearer ${e}`}:{}}};async function it(e){const t=await e.json();if(!e.ok||!t.ok)throw new Error(t.error||"Error en la solicitud");return t}async function gV(){const e=await fetch(`${Gt}/stats`,{headers:ot()});return it(e)}async function xV(e={}){const t=Object.fromEntries(Object.entries(e).filter(([,l])=>l!==""&&l!=null)),a=new URLSearchParams(t).toString(),r=await fetch(`${Gt}/pairs${a?"?"+a:""}`,{headers:ot()});return it(r)}async function Yb(e,t){const a=await fetch(`${Gt}/pairs/${e}`,{method:"PATCH",headers:ot(),body:JSON.stringify({status:t})});return it(a)}async function yV(e){const t=await fetch(`${Gt}/pairs/${e}`,{method:"DELETE",headers:ot()});return it(t)}async function bV(e,t){const a=await fetch(`${Gt}/reprocess`,{method:"POST",headers:ot(),body:JSON.stringify({from:e||void 0,to:t||void 0})});return it(a)}async function vV(e=!0){const t=await fetch(`${Gt}/prices?active=${e}`,{headers:ot()});return it(t)}async function wV(e){const t=await fetch(`${Gt}/prices`,{method:"POST",headers:ot(),body:JSON.stringify(e)});return it(t)}async function NV(e,t){const a=await fetch(`${Gt}/prices/${e}`,{method:"PUT",headers:ot(),body:JSON.stringify(t)});return it(a)}async function jV(e){const t=await fetch(`${Gt}/prices/${e}`,{method:"DELETE",headers:ot()});return it(t)}async function Xb(e=!1){const t=await fetch(`${Gt}/brain-report${e?"?force=true":""}`,{headers:ot()});return it(t)}async function SV(){const e=await fetch("/api/chatbot/config",{headers:ot()});return it(e)}async function CV(e){const t=await fetch("/api/chatbot/config",{method:"PUT",headers:ot(),body:JSON.stringify(e)});return it(t)}async function EV(e=null){const t=e?`?phone=${encodeURIComponent(e)}`:"",a=await fetch(`/api/chatbot/current-prompt${t}`,{headers:ot()});return it(a)}async function _V(e=50,t=0){const a=await fetch(`/api/chat/bot-conversations?limit=${e}&offset=${t}`,{headers:ot()});return it(a)}async function TV(e){const t=await fetch(`/api/chat/bot-conversations/${e}/messages`,{headers:ot()});return it(t)}async function AV(e,t,a){const r=await fetch(`/api/chat/bot-conversations/${e}/correct`,{method:"POST",headers:ot(),body:JSON.stringify({messageId:t,correctedAnswer:a})});return it(r)}async function kV(e,t,a=!1){const r=await fetch("/api/chat/simulate",{method:"POST",headers:ot(),body:JSON.stringify({phone:e,message:t,debug:a})});return it(r)}async function MV(e,t){const a=await fetch(`${Gt}/quick-correct`,{method:"POST",headers:ot(),body:JSON.stringify({question:e,correctedAnswer:t})});return it(a)}async function DV(){const e=await fetch(`${Gt}/behavioral-rules`,{headers:ot()});return it(e)}async function Xw(e){const t=await fetch(`${Gt}/behavioral-rules`,{method:"POST",headers:ot(),body:JSON.stringify(e)});return it(t)}async function RV(e){const t=await fetch(`${Gt}/behavioral-rules/${e}`,{method:"DELETE",headers:ot()});return it(t)}function OV({onSubmit:e,onCancel:t,submitting:a}){const{t:r}=ze("learning"),[l,u]=S.useState("factual"),[d,h]=S.useState(""),[m,p]=S.useState(""),y=()=>{if(l==="factual"){if(!d.trim())return;e({type:"factual",content:d.trim()})}else{if(!m.trim())return;e({type:"behavioral",content:m.trim()})}},x=l==="factual"?d.trim().length>0:m.trim().length>0;return o.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-3 shadow-sm",children:[o.jsxs("div",{className:"flex gap-2 mb-3",children:[o.jsx("button",{onClick:()=>u("factual"),className:`flex-1 text-[11px] font-medium py-1.5 px-3 rounded-lg transition ${l==="factual"?"bg-blue-600 text-white":"bg-gray-100 text-gray-500 hover:bg-gray-200"}`,children:r("probador.factualCorrection")}),o.jsx("button",{onClick:()=>u("behavioral"),className:`flex-1 text-[11px] font-medium py-1.5 px-3 rounded-lg transition ${l==="behavioral"?"bg-purple-600 text-white":"bg-gray-100 text-gray-500 hover:bg-gray-200"}`,children:r("probador.behavioralCorrection")})]}),l==="factual"&&o.jsxs("div",{children:[o.jsx("textarea",{value:d,onChange:b=>h(b.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm text-gray-800 bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none",placeholder:r("probador.factualPlaceholder"),autoFocus:!0}),o.jsx("p",{className:"text-[10px] text-gray-400 mt-1",children:r("probador.factualHint")})]}),l==="behavioral"&&o.jsxs("div",{children:[o.jsx("textarea",{value:m,onChange:b=>p(b.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm text-gray-800 bg-white focus:ring-2 focus:ring-purple-500 focus:border-purple-500 resize-none",placeholder:r("probador.behavioralPlaceholder"),autoFocus:!0}),o.jsx("p",{className:"text-[10px] text-gray-400 mt-1",children:r("probador.behavioralHint")})]}),o.jsxs("div",{className:"flex gap-2 mt-3",children:[o.jsxs("button",{onClick:y,disabled:a||!x,className:`flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-xs font-medium text-white transition disabled:opacity-50 ${l==="factual"?"bg-blue-600 hover:bg-blue-700":"bg-purple-600 hover:bg-purple-700"}`,children:[o.jsx(Dt,{className:"w-3 h-3"}),r(a?"probador.savingShort":"probador.save")]}),o.jsxs("button",{onClick:t,className:"flex items-center gap-1.5 px-3 py-1.5 border border-gray-300 text-gray-600 rounded-lg text-xs hover:bg-gray-50 transition",children:[o.jsx(Vn,{className:"w-3 h-3"}),r("probador.cancel")]})]})]})}function $V({message:e,index:t,correcting:a,onStartCorrection:r,onSubmitCorrection:l,onCancelCorrection:u,onRetest:d,submitting:h}){const{t:m}=ze("learning"),{role:p,text:y,time:x,corrected:b,correctionType:v}=e;return p==="system"?o.jsx("div",{className:"flex justify-center",children:o.jsx("span",{className:"text-[10px] text-red-500 bg-red-50 px-3 py-1 rounded-full",children:y})}):p==="user"?o.jsx("div",{className:"flex justify-end",children:o.jsxs("div",{className:"max-w-[80%] rounded-2xl px-4 py-2.5 bg-indigo-600 text-white",children:[o.jsx("p",{className:"text-sm whitespace-pre-wrap",children:y}),o.jsx("span",{className:"text-[9px] opacity-50 block mt-1",children:x instanceof Date?x.toLocaleTimeString(void 0,{hour:"2-digit",minute:"2-digit"}):new Date(x).toLocaleTimeString(void 0,{hour:"2-digit",minute:"2-digit"})})]})}):o.jsx("div",{className:"flex justify-start",children:o.jsxs("div",{className:"max-w-[80%]",children:[o.jsxs("div",{className:"rounded-2xl px-4 py-2.5 bg-white text-gray-800 border border-gray-200 shadow-sm",children:[o.jsx("span",{className:"text-[9px] font-semibold uppercase tracking-wider text-purple-500 block mb-1",children:m("probador.botLabel")}),o.jsx("p",{className:"text-sm whitespace-pre-wrap",children:y}),o.jsxs("div",{className:"flex items-center justify-between mt-1.5 gap-3",children:[o.jsx("span",{className:"text-[9px] opacity-50",children:x instanceof Date?x.toLocaleTimeString(void 0,{hour:"2-digit",minute:"2-digit"}):new Date(x).toLocaleTimeString(void 0,{hour:"2-digit",minute:"2-digit"})}),o.jsxs("div",{className:"flex items-center gap-2",children:[b&&v==="factual"&&o.jsxs("span",{className:"text-[9px] font-semibold text-green-600 flex items-center gap-0.5 bg-green-50 px-1.5 py-0.5 rounded-full",children:[o.jsx(Dt,{className:"w-2.5 h-2.5"})," ",m("probador.correctedBadge")]}),b&&v==="behavioral"&&o.jsxs("span",{className:"text-[9px] font-semibold text-purple-600 flex items-center gap-0.5 bg-purple-50 px-1.5 py-0.5 rounded-full",children:[o.jsx(ca,{className:"w-2.5 h-2.5"})," ",m("probador.ruleAdded")]}),b&&o.jsxs("button",{onClick:()=>d(t),className:"text-[9px] font-semibold text-amber-600 hover:text-amber-700 flex items-center gap-0.5 bg-amber-50 px-1.5 py-0.5 rounded-full transition",children:[o.jsx(kv,{className:"w-2.5 h-2.5"})," ",m("probador.retest")]}),!b&&o.jsxs("button",{onClick:()=>r(t),className:"text-[9px] font-semibold text-purple-600 hover:text-purple-800 flex items-center gap-0.5 transition",children:[o.jsx(Tv,{className:"w-2.5 h-2.5"})," ",m("probador.correct")]})]})]})]}),a===t&&o.jsx("div",{className:"mt-2",children:o.jsx(OV,{onSubmit:w=>l(t,w),onCancel:u,submitting:h})})]})})}function zV({messages:e,input:t,setInput:a,loading:r,onSend:l,onReset:u,correcting:d,setCorrecting:h,onSubmitCorrection:m,submitting:p,onRetest:y,endRef:x}){const{t:b}=ze("learning"),v=w=>{w.key==="Enter"&&!w.shiftKey&&(w.preventDefault(),l())};return o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-3 bg-gray-50",children:[e.length===0&&o.jsxs("div",{className:"text-center py-12",children:[o.jsx(Xt,{className:"w-10 h-10 text-gray-300 mx-auto mb-3"}),o.jsx("p",{className:"text-sm text-gray-400",children:b("probador.emptyChat")}),o.jsx("p",{className:"text-xs text-gray-300 mt-1",children:b("probador.emptyChatSub")})]}),e.map((w,_)=>o.jsx($V,{message:w,index:_,correcting:d,onStartCorrection:E=>h(E),onSubmitCorrection:m,onCancelCorrection:()=>h(null),onRetest:y,submitting:p},_)),r&&o.jsx("div",{className:"flex justify-start",children:o.jsx("div",{className:"bg-white border border-gray-200 rounded-2xl px-4 py-3 shadow-sm",children:o.jsxs("div",{className:"flex gap-1.5",children:[o.jsx("div",{className:"w-2 h-2 bg-purple-400 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),o.jsx("div",{className:"w-2 h-2 bg-purple-400 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),o.jsx("div",{className:"w-2 h-2 bg-purple-400 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]})})}),o.jsx("div",{ref:x})]}),o.jsx("div",{className:"border-t border-gray-200 p-3 bg-white flex-shrink-0",children:o.jsxs("div",{className:"flex gap-2",children:[o.jsx("input",{type:"text",value:t,onChange:w=>a(w.target.value),onKeyDown:v,placeholder:b("probador.inputPlaceholder"),className:"flex-1 px-4 py-2.5 border border-gray-300 rounded-xl text-sm focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",disabled:r,autoFocus:!0}),o.jsx("button",{onClick:l,disabled:r||!t.trim(),className:"bg-indigo-600 hover:bg-indigo-700 text-white p-2.5 rounded-xl transition disabled:opacity-50",children:o.jsx(_p,{className:"w-4 h-4"})})]})})]})}function LV({stats:e,flashField:t}){const{t:a}=ze("learning"),[r,l]=S.useState(!1);if(!e)return null;const{approvedPairs:u=0,activePrices:d=0,behavioralRules:h=0,recentCorrections:m=0,instructionsChars:p=0,model:y=a("probador.unknownModel"),fidelityLevel:x="medium",temperature:b=.4}=e;return o.jsxs("div",{className:"bg-amber-50 border-b border-amber-200 flex-shrink-0",children:[o.jsxs("button",{onClick:()=>l(!r),className:"w-full flex items-center gap-2 px-3 py-2 text-left hover:bg-amber-100/50 transition",children:[o.jsx(Un,{className:"w-4 h-4 text-amber-600 flex-shrink-0"}),o.jsxs("span",{className:"text-[11px] text-amber-800 font-medium flex-1 truncate",children:[u," Q&A | ",m>0?`${m} ${a("probador.sessionCorrections")} | `:"",d," ",a("probador.prices")," | ",y," | temp ",b]}),r?o.jsx(Z5,{className:"w-3.5 h-3.5 text-amber-500 flex-shrink-0"}):o.jsx(Ii,{className:"w-3.5 h-3.5 text-amber-500 flex-shrink-0"})]}),r&&o.jsxs("div",{className:"px-3 pb-3 grid grid-cols-3 gap-2",children:[o.jsxs("div",{className:"bg-white rounded-lg p-2 border border-amber-100",children:[o.jsxs("div",{className:"flex items-center gap-1 mb-0.5",children:[o.jsx(la,{className:"w-3 h-3 text-indigo-500"}),o.jsx("span",{className:"text-[9px] font-semibold text-gray-500 uppercase",children:"Q&A"})]}),o.jsx("span",{className:"text-sm font-bold text-gray-800",children:u})]}),o.jsxs("div",{className:"bg-white rounded-lg p-2 border border-amber-100",children:[o.jsxs("div",{className:"flex items-center gap-1 mb-0.5",children:[o.jsx(Wr,{className:"w-3 h-3 text-green-500"}),o.jsx("span",{className:"text-[9px] font-semibold text-gray-500 uppercase",children:a("probador.prices")})]}),o.jsx("span",{className:"text-sm font-bold text-gray-800",children:d})]}),o.jsxs("div",{className:"bg-white rounded-lg p-2 border border-amber-100",children:[o.jsxs("div",{className:"flex items-center gap-1 mb-0.5",children:[o.jsx(ca,{className:"w-3 h-3 text-purple-500"}),o.jsx("span",{className:"text-[9px] font-semibold text-gray-500 uppercase",children:a("probador.rules")})]}),o.jsx("span",{className:"text-sm font-bold text-gray-800",children:h})]}),o.jsxs("div",{className:"bg-white rounded-lg p-2 border border-amber-100",children:[o.jsxs("div",{className:"flex items-center gap-1 mb-0.5",children:[o.jsx(fo,{className:"w-3 h-3 text-blue-500"}),o.jsx("span",{className:"text-[9px] font-semibold text-gray-500 uppercase",children:a("probador.instructions")})]}),o.jsxs("span",{className:"text-sm font-bold text-gray-800",children:[p," chars"]})]}),o.jsxs("div",{className:"bg-white rounded-lg p-2 border border-amber-100",children:[o.jsxs("div",{className:"flex items-center gap-1 mb-0.5",children:[o.jsx(Zr,{className:"w-3 h-3 text-amber-500"}),o.jsx("span",{className:"text-[9px] font-semibold text-gray-500 uppercase",children:a("probador.model")})]}),o.jsx("span",{className:"text-[11px] font-bold text-gray-800",children:y})]}),o.jsxs("div",{className:"bg-white rounded-lg p-2 border border-amber-100",children:[o.jsxs("div",{className:"flex items-center gap-1 mb-0.5",children:[o.jsx(_u,{className:"w-3 h-3 text-red-500"}),o.jsx("span",{className:"text-[9px] font-semibold text-gray-500 uppercase",children:a("probador.fidelity")})]}),o.jsx("span",{className:"text-[11px] font-bold text-gray-800 capitalize",children:x})]})]})]})}const Gb={completed:{circle:"bg-green-50 text-green-600 border-green-200",icon:Dt},skipped:{circle:"bg-gray-50 text-gray-400 border-gray-200",icon:_v},processing:{circle:"bg-blue-100 text-blue-600 border-blue-200 animate-pulse",icon:T4},error:{circle:"bg-red-50 text-red-600 border-red-200",icon:Vn}};function Kb({step:e,expanded:t,onToggle:a,animationDelay:r=0,children:l}){const{id:u,label:d,summary:h,timing:m,status:p,detail:y,icon:x}=e,b=Gb[p]||Gb.completed,v=b.icon;return o.jsx("div",{className:"relative",style:{animation:`stepAppear 0.3s ease-out ${r}ms both`},children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:`w-[30px] h-[30px] rounded-full border flex items-center justify-center flex-shrink-0 ${b.circle}`,style:p==="processing"?{animation:"pulseGlow 2s ease-in-out infinite"}:{},children:x?o.jsx(x,{className:"w-3.5 h-3.5"}):o.jsx(v,{className:`w-3.5 h-3.5 ${p==="processing"?"animate-spin":""}`})}),o.jsxs("div",{className:"flex-1 min-w-0 pt-0.5",children:[o.jsxs("div",{className:`flex items-center gap-2 ${y||l?"cursor-pointer":""}`,onClick:()=>(y||l)&&a(u),children:[o.jsx("span",{className:"text-xs font-medium text-gray-700",children:d}),h&&o.jsx("span",{className:"text-[10px] text-gray-400 truncate",children:h}),o.jsxs("div",{className:"flex items-center gap-1.5 ml-auto flex-shrink-0",children:[m!=null&&o.jsxs("span",{className:"text-[10px] font-mono bg-gray-100 text-gray-500 px-1.5 py-0.5 rounded",children:[m,"ms"]}),(y||l)&&o.jsx(Ii,{className:`w-3 h-3 text-gray-400 transition-transform duration-200 ${t?"rotate-90":""}`})]})]}),o.jsxs("div",{className:`overflow-hidden transition-all duration-300 ease-in-out ${t?"max-h-[500px] opacity-100 mt-2":"max-h-0 opacity-0"}`,children:[y&&o.jsx("div",{className:"bg-gray-50 rounded-lg p-2.5 text-[10px] font-mono text-gray-600 whitespace-pre-wrap break-all",children:typeof y=="string"?y:JSON.stringify(y,null,2)}),l&&o.jsx("div",{className:"pl-2 border-l-2 border-gray-100 space-y-2 mt-1",children:l})]})]})]})})}function BV(e,t){if(!e)return[];const a=[];a.push({id:"message_received",label:t("probador.messageReceived"),summary:e.inputMessage?`"${e.inputMessage.slice(0,40)}${e.inputMessage.length>40?"...":""}"`:"",timing:0,status:"completed",icon:Xt,detail:e.entry?{phone:e.entry.phone,channel:e.entry.channel,sessionId:e.entry.sessionId,sessionCreated:e.sessionCreated}:null});const r=e.modeCheck;a.push({id:"session_mode",label:t("probador.sessionMode"),summary:r?`${r.mode} (${r.modeSource})  ${r.outcome}`:"automatic",timing:null,status:r?.outcome==="proceed"?"completed":r?"error":"skipped",icon:ca,detail:r||null});const l=e.globalKeyword;a.push({id:"global_keywords",label:t("probador.globalKeywords"),summary:l?.matched?t("probador.matched",{keyword:l.keyword,action:l.action}):t("probador.noMatch"),timing:null,status:l?.matched?"completed":"skipped",icon:Vi,detail:l||null});const u=e.sessionState;a.push({id:"active_session",label:t("probador.activeSession"),summary:u?.hasActiveSession?t("probador.flowAtNode",{flowId:u.flowId,nodeId:u.currentNodeId}):t("probador.noActiveFlow"),timing:null,status:u?.hasActiveSession?"completed":"skipped",icon:da,detail:u||null});const d=e.classification;a.push({id:"classification",label:t("probador.classification"),summary:d?.ran?`Intent: ${d.intent?.type||"unknown"} (${Math.round((d.intent?.confidence||0)*100)}%)  ${d.sentiment||"neutral"}  Lead: ${d.leadScore?.value||0}`:t("probador.notExecuted"),timing:d?.durationMs||null,status:d?.ran?"completed":"skipped",icon:_u,expandable:!0,detail:d||null});const h=e.flowMatching;a.push({id:"flow_match",label:t("probador.flowMatch"),summary:h?`${h.activeFlowCount||0} ${t("common:nav.flows").toLowerCase()}  ${h.outcome==="flow_matched"?`Match: ${h.matchedFlow?.flowName}`:h.outcome==="default_used"?t("probador.defaultUsed"):t("probador.noMatchToAI")}`:t("probador.notEvaluated"),timing:null,status:h?.outcome==="flow_matched"?"completed":h?.outcome==="no_match"?"skipped":"completed",icon:Cp,expandable:!!h?.flowsEvaluated?.length,detail:h?{...h,flowsDetail:h.flowsEvaluated?.map(p=>`${p.matched?"":""} ${p.flowName} (${p.triggerType})  ${p.reason||""}`)}:null});const m=e.aiFallback;if(m){const p=[];p.push({id:"ai_contact",label:t("probador.contact"),summary:m.userName?`${m.userName}`:t("probador.noName"),timing:null,status:"completed",icon:Pa,detail:m.contactFields||null});const y=m.knowledge,x=y?(y.vectorSearch?.results?.length||0)+(y.bm25Search?.resultsCount||0):0;p.push({id:"ai_knowledge",label:t("probador.knowledgeLabel"),summary:y?`${y.combinedCount||0} ${t("probador.pairs")} (vector: ${y.vectorSearch?.results?.length||0}, BM25: ${y.bm25Search?.resultsCount||0})`:`0 ${t("probador.pairs")}`,timing:y?.vectorSearch?.durationMs||null,status:x>0?"completed":"skipped",icon:la,expandable:x>0,detail:y?{retrieverAvailable:y.retrieverAvailable,vectorResults:y.vectorSearch?.results||[],bm25Results:y.bm25Search?.results||[]}:null});const b=m.priceQuery;p.push({id:"ai_prices",label:t("probador.pricesLabel"),summary:b?b.isPriceQuery?t("probador.pricesFoundSummary",{count:b.pricesFound?.length||0}):t("probador.notPriceQuery"):t("probador.notQueried"),timing:b?.durationMs||null,status:b?.pricesFound?.length>0?"completed":"skipped",icon:Wr,detail:b||null});const v=m.conversationHistory;p.push({id:"ai_history",label:t("probador.historyLabel"),summary:v?t("probador.turns",{count:v.turnsLoaded||0}):t("probador.turns",{count:0}),timing:null,status:v?.turnsLoaded>0?"completed":"skipped",icon:Qr,detail:v||null});const w=m.prompt;p.push({id:"ai_prompt",label:t("probador.promptBuilt"),summary:w?`~${w.estimatedTokens||"?"} tokens  ${w.totalMessagesInArray||"?"} msgs${w.knowledgeInjected?" "+t("probador.plusKnowledge"):""}${w.behavioralRulesInjected?" "+t("probador.plusRules"):""}`:"",timing:null,status:"completed",icon:fo,expandable:!0,detail:w||null});const _=m.openaiCall;p.push({id:"ai_openai",label:"OpenAI",summary:_?`${_.model}  temp ${_.temperature}  ${_.durationMs}ms  ${_.totalTokens||"?"} tokens`:t("probador.openaiWaiting"),timing:_?.durationMs||null,status:_?"completed":"processing",icon:Zr,expandable:!!_,detail:_?{model:_.model,temperature:_.temperature,maxTokens:_.maxTokens,durationMs:_.durationMs,promptTokens:_.promptTokens,completionTokens:_.completionTokens,finishReason:_.finishReason,responsePreview:_.responseText?.slice(0,200)}:null});const E=m.delivery;p.push({id:"ai_delivery",label:t("probador.delivery"),summary:E?t("probador.msgsSent",{count:E.splitInto}):"",timing:null,status:E?"completed":"skipped",icon:_p,detail:E||null}),a.push({id:"ai_fallback",label:t("probador.aiFallback"),summary:e.result?.totalPipelineMs?t("probador.pipelineTotal",{ms:e.result.totalPipelineMs}):"",timing:e.result?.totalPipelineMs||null,status:m.error?"error":"completed",icon:Un,detail:m.error||null,children:p})}return!m&&e.result&&a.push({id:"result",label:t("probador.result"),summary:`${e.result.type}  ${e.result.responseSent?t("probador.responseSent"):t("probador.noResponse2")}`,timing:e.result.totalPipelineMs||null,status:e.result.responseSent?"completed":"skipped",icon:Dt,detail:e.result}),a}function PV(e){return[{id:"message_received",label:e("probador.messageReceived"),summary:"",timing:0,status:"completed",icon:Xt},{id:"session_mode",label:e("probador.sessionMode"),summary:e("probador.evaluating"),timing:null,status:"processing",icon:ca},{id:"global_keywords",label:e("probador.globalKeywords"),summary:e("probador.searching"),timing:null,status:"processing",icon:Vi},{id:"active_session",label:e("probador.activeSession"),summary:e("probador.verifying"),timing:null,status:"processing",icon:da},{id:"classification",label:e("probador.classification"),summary:e("probador.analyzing"),timing:null,status:"processing",icon:_u},{id:"ai_fallback",label:e("probador.aiFallback"),summary:e("probador.processing"),timing:null,status:"processing",icon:Un}]}function HV({trace:e,isLoading:t}){const{t:a}=ze("learning"),[r,l]=S.useState(new Set),u=h=>{l(m=>{const p=new Set(m);return p.has(h)?p.delete(h):p.add(h),p})},d=t&&!e?PV(a):BV(e,a);return!d.length&&!t?o.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center p-8",children:[o.jsx(Un,{className:"w-12 h-12 text-gray-200 mb-3"}),o.jsx("p",{className:"text-sm text-gray-400 font-medium",children:a("probador.sendMessageToSeePipeline")}),o.jsx("p",{className:"text-[10px] text-gray-300 mt-1",children:a("probador.eachStepShownHere")})]}):o.jsxs("div",{className:"p-4 overflow-y-auto flex-1",children:[e?.result?.totalPipelineMs&&o.jsxs("div",{className:"mb-4 flex items-center gap-2 text-[10px]",children:[o.jsx("span",{className:"px-2 py-0.5 bg-amber-50 text-amber-700 rounded-full font-semibold",children:a("probador.pipelineTotal",{ms:e.result.totalPipelineMs})}),o.jsx("span",{className:"px-2 py-0.5 bg-gray-100 text-gray-500 rounded-full",children:e.result.type}),e.result.responseSent&&o.jsx("span",{className:"px-2 py-0.5 bg-green-50 text-green-600 rounded-full",children:a("probador.responses",{count:e.result.responseTexts?.length||0})})]}),o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute left-[14px] top-[30px] bottom-0 w-0.5 bg-gray-200"}),o.jsx("div",{className:"space-y-3 relative",children:d.map((h,m)=>o.jsx(Kb,{step:h,expanded:r.has(h.id),onToggle:u,animationDelay:m*100,children:h.children&&r.has(h.id)&&o.jsx("div",{className:"mt-2 ml-4 pl-6 border-l-2 border-blue-200 space-y-2",children:h.children.map((p,y)=>o.jsx(Kb,{step:p,expanded:r.has(p.id),onToggle:u,animationDelay:y*60},p.id))})},h.id))})]})]})}function $h({label:e,labelColor:t,bgColor:a,textColor:r,content:l}){return l?o.jsxs("div",{className:"mb-4",children:[o.jsx("span",{className:`text-[10px] uppercase tracking-wider font-semibold ${t} block mb-1.5`,children:e}),o.jsx("pre",{className:`${a} ${r} rounded-lg p-3 text-[11px] overflow-x-auto whitespace-pre-wrap font-mono leading-relaxed max-h-[300px] overflow-y-auto`,children:l})]}):null}function UV({trace:e}){const{t}=ze("learning");if(!e)return o.jsxs("div",{className:"flex flex-col items-center justify-center h-full p-6",children:[o.jsx(ru,{className:"w-10 h-10 text-gray-300 mb-3"}),o.jsx("p",{className:"text-sm text-gray-400",children:t("probador.noPromptData")})]});const a=e.aiFallback||{},r=a.prompt||{},l=a.openaiCall||{},u=r.estimatedTokens||"?",d=r.totalSystemPromptChars||"?",h=l.model||"?",m=r.totalMessagesInArray||"?",p=r.systemPromptFull||null,y=r.behavioralRulesText||null,x=r.customInstructionsText||null,b=l.responseText||null;return o.jsxs("div",{className:"p-4 overflow-y-auto",children:[o.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[o.jsxs("span",{className:"text-[10px] font-medium px-2.5 py-1 rounded-full bg-amber-100 text-amber-800",children:["~",u," tokens"]}),o.jsxs("span",{className:"text-[10px] font-medium px-2.5 py-1 rounded-full bg-gray-100 text-gray-600",children:[d," chars"]}),o.jsx("span",{className:"text-[10px] font-medium px-2.5 py-1 rounded-full bg-indigo-100 text-indigo-700",children:h}),o.jsxs("span",{className:"text-[10px] font-medium px-2.5 py-1 rounded-full bg-purple-100 text-purple-700",children:[m," msgs"]})]}),o.jsxs("div",{className:"flex flex-wrap gap-1.5 mb-4",children:[r.isCustomSystemPrompt&&o.jsx("span",{className:"text-[9px] px-2 py-0.5 rounded-full bg-yellow-100 text-yellow-700 font-medium",children:t("probador.customPrompt")}),r.knowledgeInjected&&o.jsx("span",{className:"text-[9px] px-2 py-0.5 rounded-full bg-blue-100 text-blue-700 font-medium",children:t("probador.qaPairsCount",{count:r.knowledgePairsInjected})}),r.pricesInjected&&o.jsx("span",{className:"text-[9px] px-2 py-0.5 rounded-full bg-green-100 text-green-700 font-medium",children:t("probador.plusPrices")}),r.behavioralRulesInjected&&o.jsx("span",{className:"text-[9px] px-2 py-0.5 rounded-full bg-purple-100 text-purple-700 font-medium",children:t("probador.rulesCount",{count:r.behavioralRulesCount})}),r.hasCustomInstructions&&o.jsx("span",{className:"text-[9px] px-2 py-0.5 rounded-full bg-yellow-100 text-yellow-700 font-medium",children:t("probador.plusAdminInstructions")}),o.jsx("span",{className:"text-[9px] px-2 py-0.5 rounded-full bg-gray-100 text-gray-500 font-medium",children:t("probador.fidelityLevel",{level:r.fidelityLevel||"?"})})]}),o.jsx($h,{label:t("probador.fullSystemPrompt"),labelColor:"text-gray-400",bgColor:"bg-gray-900",textColor:"text-gray-100",content:p}),y&&o.jsx($h,{label:t("probador.behavioralRules"),labelColor:"text-purple-400",bgColor:"bg-purple-950",textColor:"text-purple-100",content:y}),x&&o.jsx($h,{label:t("probador.adminInstructions"),labelColor:"text-yellow-400",bgColor:"bg-yellow-950",textColor:"text-yellow-100",content:x}),b&&o.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[o.jsxs("span",{className:"text-[10px] uppercase tracking-wider font-semibold text-emerald-500 flex items-center gap-1 mb-1.5",children:[o.jsx(Zr,{className:"w-3 h-3"})," ",t("probador.openaiResponse")]}),o.jsx("pre",{className:"bg-emerald-950 text-emerald-100 rounded-lg p-3 text-[11px] overflow-x-auto whitespace-pre-wrap font-mono leading-relaxed border border-emerald-800",children:b}),l.durationMs&&o.jsx("div",{className:"flex gap-2 mt-2",children:o.jsxs("span",{className:"text-[9px] text-gray-400",children:[l.durationMs,"ms  ",l.totalTokens||"?"," tokens  ",l.finishReason||"?"]})})]}),!p&&!b&&o.jsxs("div",{className:"text-center py-8",children:[o.jsx(fo,{className:"w-8 h-8 text-gray-300 mx-auto mb-2"}),o.jsx("p",{className:"text-xs text-gray-400",children:t("probador.noPromptDataAvailable")}),o.jsx("p",{className:"text-[10px] text-gray-300 mt-1",children:t("probador.enableRayosXHint")})]})]})}function qV({trace:e,sessionCorrections:t}){const{t:a}=ze("learning"),r=e?.aiFallback||{},l=r.knowledge||{},u=l.vectorSearch?.results||[],d=l.bm25Search?.results||[],h=[...u,...d],m=r.priceQuery||{},p=m.pricesFound||[],y=t&&t.length>0,x=h.length>0,b=p.length>0;return o.jsxs("div",{className:"p-4 space-y-4 overflow-y-auto",children:[y&&o.jsxs("div",{children:[o.jsxs("h4",{className:"text-[10px] font-semibold uppercase tracking-wider text-amber-600 mb-2 flex items-center gap-1",children:[o.jsx(s4,{className:"w-3 h-3"}),a("probador.sessionCorrections")]}),o.jsx("div",{className:"space-y-2",children:t.map((v,w)=>o.jsxs("div",{className:`rounded-lg p-3 border text-[11px] ${v.type==="factual"?"bg-blue-50 border-blue-200 text-blue-800":"bg-purple-50 border-purple-200 text-purple-800"}`,children:[o.jsx("div",{className:"flex items-center gap-1.5 mb-1",children:v.type==="factual"?o.jsxs(o.Fragment,{children:[o.jsx(Dt,{className:"w-3 h-3"}),o.jsx("span",{className:"font-semibold",children:a("probador.correctedResponse")})]}):o.jsxs(o.Fragment,{children:[o.jsx(ca,{className:"w-3 h-3"}),o.jsx("span",{className:"font-semibold",children:a("probador.ruleAdded")})]})}),v.type==="factual"?o.jsxs(o.Fragment,{children:[v.question&&o.jsxs("p",{className:"text-[10px] opacity-70 mb-0.5",children:["P: ",v.question]}),o.jsxs("p",{children:["R: ",v.correctedAnswer]})]}):o.jsx("p",{children:v.rule})]},w))})]}),l.retrieverAvailable!==void 0&&o.jsxs("div",{className:"flex flex-wrap gap-2 mb-2",children:[o.jsx("span",{className:`text-[9px] px-2 py-0.5 rounded-full font-medium ${l.retrieverAvailable?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:a("probador.retrieverLabel",{status:l.retrieverAvailable?a("probador.retrieverAvailable"):a("probador.retrieverUnavailable")})}),l.vectorSearch?.durationMs&&o.jsx("span",{className:"text-[9px] px-2 py-0.5 rounded-full bg-gray-100 text-gray-500 font-medium",children:a("probador.searchDuration",{ms:l.vectorSearch.durationMs})}),o.jsx("span",{className:"text-[9px] px-2 py-0.5 rounded-full bg-indigo-100 text-indigo-600 font-medium",children:a("probador.combinedResults",{count:l.combinedCount||0})})]}),u.length>0&&o.jsxs("div",{children:[o.jsxs("h4",{className:"text-[10px] font-semibold uppercase tracking-wider text-indigo-600 mb-2 flex items-center gap-1",children:[o.jsx(Ep,{className:"w-3 h-3"}),a("probador.vectorSearch",{count:u.length})]}),o.jsx("div",{className:"space-y-2",children:u.map((v,w)=>o.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-3 shadow-sm",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-1.5",children:[o.jsx("span",{className:"text-[9px] font-semibold px-1.5 py-0.5 rounded-full bg-indigo-50 text-indigo-600",children:v.source==="learned"?a("probador.learned"):v.source||"Vector"}),v.similarityScore!=null&&o.jsx("span",{className:"text-[9px] font-mono text-gray-400",children:a("probador.similarity",{pct:Math.round((v.similarityScore||0)*100)})}),v.qualityScore!=null&&o.jsxs("span",{className:"text-[9px] font-mono text-amber-500",children:["Q:",v.qualityScore]})]}),o.jsxs("p",{className:"text-[11px] font-medium text-gray-700 mb-0.5",children:["P: ",v.question]}),o.jsxs("p",{className:"text-[11px] text-gray-500",children:["R: ",v.answerPreview]})]},`v-${w}`))})]}),d.length>0&&o.jsxs("div",{children:[o.jsxs("h4",{className:"text-[10px] font-semibold uppercase tracking-wider text-teal-600 mb-2 flex items-center gap-1",children:[o.jsx(la,{className:"w-3 h-3"}),a("probador.bm25Search",{count:d.length})]}),o.jsx("div",{className:"space-y-2",children:d.map((v,w)=>o.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-3 shadow-sm",children:[o.jsx("span",{className:"text-[9px] font-semibold px-1.5 py-0.5 rounded-full bg-teal-50 text-teal-600",children:v.source==="faq"?"FAQ":v.source||"BM25"}),o.jsxs("p",{className:"text-[11px] font-medium text-gray-700 mt-1.5 mb-0.5",children:["P: ",v.question]}),o.jsxs("p",{className:"text-[11px] text-gray-500",children:["R: ",v.answerPreview]})]},`b-${w}`))})]}),b&&o.jsxs("div",{children:[o.jsxs("h4",{className:"text-[10px] font-semibold uppercase tracking-wider text-green-600 mb-2 flex items-center gap-1",children:[o.jsx(Wr,{className:"w-3 h-3"}),a("probador.pricesFound",{count:p.length})]}),m.extractedProduct&&o.jsxs("p",{className:"text-[10px] text-gray-500 mb-2",children:[a("probador.detectedProduct")," ",o.jsx("span",{className:"font-medium text-gray-700",children:m.extractedProduct}),m.extractedVariant&&o.jsxs(o.Fragment,{children:["  ",a("probador.variant")," ",o.jsx("span",{className:"font-medium text-gray-700",children:m.extractedVariant})]})]}),o.jsx("div",{className:"bg-green-50 rounded-lg border border-green-200 overflow-hidden",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"border-b border-green-200",children:[o.jsx("th",{className:"text-left px-3 py-1.5 text-[9px] font-semibold text-green-700 uppercase",children:a("probador.thProduct")}),o.jsx("th",{className:"text-left px-3 py-1.5 text-[9px] font-semibold text-green-700 uppercase",children:a("probador.thVariant")}),o.jsx("th",{className:"text-right px-3 py-1.5 text-[9px] font-semibold text-green-700 uppercase",children:a("probador.thPrice")})]})}),o.jsx("tbody",{className:"divide-y divide-green-100",children:p.map((v,w)=>o.jsxs("tr",{children:[o.jsx("td",{className:"px-3 py-1.5 text-[11px] text-gray-700 font-medium",children:v.productName||"-"}),o.jsx("td",{className:"px-3 py-1.5 text-[11px] text-gray-500",children:v.variant||"-"}),o.jsxs("td",{className:"px-3 py-1.5 text-[11px] text-gray-700 font-mono text-right font-medium",children:["$",Number(v.price||0).toLocaleString()]})]},w))})]})})]}),m.isPriceQuery&&!b&&o.jsxs("div",{className:"rounded-lg p-3 bg-yellow-50 border border-yellow-200 text-[11px] text-yellow-800",children:[o.jsx(Wr,{className:"w-3.5 h-3.5 inline mr-1"}),m.extractedProduct?a("probador.priceQueryNoResultsFor",{product:m.extractedProduct}):a("probador.priceQueryNoResults")]}),!x&&!b&&!y&&o.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[o.jsx(la,{className:"w-10 h-10 text-gray-300 mb-3"}),o.jsx("p",{className:"text-sm text-gray-400 font-medium",children:a("probador.noKnowledgeInjected")}),o.jsx("p",{className:"text-xs text-gray-300 mt-1",children:a("probador.noKnowledgeHint")})]})]})}function IV({trace:e}){const{t}=ze("learning"),r=(e?.aiFallback||{}).conversationHistory||{},l=r.turns||[],u=r.turnsLoaded||l.length;return l.length?o.jsxs("div",{className:"p-4 overflow-y-auto",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[o.jsx(Xt,{className:"w-4 h-4 text-purple-500"}),o.jsx("span",{className:"text-xs text-gray-600 font-medium",children:t("probador.turnsLoadedAsContext",{count:u})})]}),o.jsx("div",{className:"space-y-2",children:l.map((d,h)=>{const m=d.direction==="incoming"||d.direction==="in",p=d.text||"";return o.jsx("div",{className:`flex ${m?"justify-start":"justify-end"}`,children:o.jsxs("div",{className:`max-w-[85%] rounded-xl px-3 py-2 ${m?"bg-gray-100 text-gray-700":"bg-purple-50 text-purple-800 border border-purple-200"}`,children:[!m&&o.jsx("span",{className:"text-[8px] font-semibold uppercase tracking-wider text-purple-500 block mb-0.5",children:"BOT"}),o.jsx("p",{className:"text-[11px] whitespace-pre-wrap leading-relaxed",children:p}),d.timestamp&&o.jsx("span",{className:"text-[8px] opacity-40 block mt-0.5",children:new Date(d.timestamp).toLocaleTimeString(void 0,{hour:"2-digit",minute:"2-digit"})})]})},h)})})]}):o.jsxs("div",{className:"flex flex-col items-center justify-center h-full p-6 text-center",children:[o.jsx(Qr,{className:"w-10 h-10 text-gray-300 mb-3"}),o.jsx("p",{className:"text-sm text-gray-400 font-medium",children:t("probador.noConversationHistory")}),o.jsx("p",{className:"text-xs text-gray-300 mt-1",children:t("probador.firstMessageOfSession")})]})}function VV({activeTab:e,setActiveTab:t,trace:a,knowledgeStats:r,sessionCorrections:l,isLoading:u}){const{t:d}=ze("learning"),h=[{id:"pipeline",label:d("probador.pipeline"),icon:ra},{id:"prompt",label:d("probador.prompt"),icon:ru},{id:"knowledge",label:d("probador.knowledge"),icon:la},{id:"history",label:d("probador.history"),icon:Xt}];return o.jsxs("div",{className:"flex flex-col h-full overflow-hidden",children:[r&&o.jsx(LV,{stats:r}),o.jsx("div",{className:"flex border-b border-gray-200 bg-white px-2 flex-shrink-0",children:h.map(m=>{const p=m.icon,y=e===m.id;return o.jsxs("button",{onClick:()=>t(m.id),className:`flex items-center gap-1.5 px-3 py-2.5 text-[11px] font-medium border-b-2 transition ${y?"border-amber-500 text-amber-700 bg-amber-50/50":"border-transparent text-gray-500 hover:text-gray-700 hover:bg-gray-50"}`,children:[o.jsx(p,{className:"w-3.5 h-3.5"}),m.label]},m.id)})}),o.jsx("div",{className:"flex-1 overflow-y-auto",children:!a&&!u?o.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center p-6",children:[o.jsx(Vi,{className:"w-10 h-10 text-amber-300 mb-3"}),o.jsx("p",{className:"text-sm text-gray-400 font-medium",children:d("probador.sendMessageToSeePipeline")}),o.jsx("p",{className:"text-xs text-gray-300 mt-1",children:d("probador.debugActivatesPerMessage")})]}):o.jsxs(o.Fragment,{children:[e==="pipeline"&&o.jsx(HV,{trace:a,isLoading:u}),e==="prompt"&&o.jsx(UV,{trace:a}),e==="knowledge"&&o.jsx(qV,{trace:a,sessionCorrections:l}),e==="history"&&o.jsx(IV,{trace:a})]})})]})}function FV({show:e,onClose:t}){const{t:a}=ze("learning"),[r,l]=S.useState(!1),[u,d]=S.useState("pipeline"),[h,m]=S.useState([]),[p,y]=S.useState(""),[x,b]=S.useState(!1),[v,w]=S.useState(()=>`tester_admin_${Date.now()}`),[_,E]=S.useState(null),[T,A]=S.useState(null),[C,k]=S.useState([]),[L,j]=S.useState(null),[R,$]=S.useState(!1),H=S.useRef(null);S.useEffect(()=>{H.current&&H.current.scrollIntoView({behavior:"smooth"})},[h,x]);const F=async()=>{const B=p.trim();if(!(!B||x)){y(""),m(G=>[...G,{role:"user",text:B,time:new Date}]),b(!0),E(null);try{const G=await kV(v,B,r),O=G.responses||[],U=G.trace||null;if(O.length>0?m(z=>[...z,...O.map(I=>({role:"bot",text:I,time:new Date,trace:U,corrected:!1,correctionType:null}))]):m(z=>[...z,{role:"bot",text:a("probador.noResponse"),time:new Date,trace:U}]),U){E(U);const z=U.aiFallback||{},I=z.prompt||{},q=z.openaiCall||{};A({approvedPairs:I.knowledgePairsInjected||0,activePrices:z.priceQuery?.pricesFound?.length||0,behavioralRules:I.behavioralRulesCount||0,recentCorrections:I.recentCorrectionsCount||0,instructionsChars:I.totalSystemPromptChars||0,model:q.model||a("probador.unknownModel"),fidelityLevel:I.fidelityLevel||"enhanced",temperature:q.temperature||.5})}}catch(G){m(O=>[...O,{role:"system",text:"Error: "+G.message,time:new Date}])}finally{b(!1)}}},P=()=>{m([]),w(`tester_admin_${Date.now()}`),E(null),A(null),k([]),j(null)},K=async(B,{type:G,content:O})=>{$(!0);try{if(G==="factual"){let U="";for(let z=B-1;z>=0;z--)if(h[z].role==="user"){U=h[z].text;break}await MV(U,O),m(z=>z.map((I,q)=>q===B?{...I,corrected:!0,correctionType:"factual"}:I)),k(z=>[...z,{type:"factual",index:B,question:U,correctedAnswer:O,time:new Date}])}else await Xw({rule:O}),m(U=>U.map((z,I)=>I===B?{...z,corrected:!0,correctionType:"behavioral"}:z)),k(U=>[...U,{type:"behavioral",index:B,rule:O,time:new Date}]);j(null)}catch(U){console.error("Error submitting correction:",U),m(z=>[...z,{role:"system",text:a("probador.errorSavingCorrection")+U.message,time:new Date}])}finally{$(!1)}},W=async B=>{let G="";for(let O=B-1;O>=0;O--)if(h[O].role==="user"){G=h[O].text;break}G&&y(G)};return e?o.jsxs("div",{className:"fixed inset-0 z-50 flex justify-end",children:[o.jsx("div",{className:"absolute inset-0 bg-black/30",onClick:t}),o.jsxs("div",{className:`relative bg-white shadow-2xl flex flex-col h-full transition-all duration-500 ease-out ${r?"w-full max-w-[56rem]":"w-full max-w-md"}`,onClick:B=>B.stopPropagation(),children:[o.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 px-5 py-4 flex items-center justify-between flex-shrink-0",children:[o.jsxs("div",{className:"flex items-center gap-3 text-white",children:[o.jsx(Av,{className:"w-5 h-5"}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-bold text-sm",children:a("probador.title")}),o.jsx("p",{className:"text-[10px] text-purple-200",children:a("probador.subtitle")})]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("button",{onClick:()=>l(!r),className:`flex items-center gap-1.5 text-[10px] px-3 py-1.5 rounded-full font-semibold transition-all ${r?"bg-amber-400 text-amber-900 shadow-lg shadow-amber-400/30":"bg-white/20 text-white hover:bg-white/30"}`,children:[o.jsx(Vi,{className:"w-3.5 h-3.5"}),a("probador.rayosX")]}),o.jsx("button",{onClick:P,className:"text-[10px] bg-white/20 hover:bg-white/30 text-white px-2.5 py-1.5 rounded-full font-medium transition",children:o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx(da,{className:"w-3 h-3"}),a("probador.newConversation")]})}),o.jsx("button",{onClick:t,className:"p-1 text-white/70 hover:text-white rounded",children:o.jsx(Vn,{className:"w-5 h-5"})})]})]}),o.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[o.jsx("div",{className:`flex flex-col ${r?"w-[400px] flex-shrink-0 border-r border-gray-200":"flex-1"}`,children:o.jsx(zV,{messages:h,input:p,setInput:y,loading:x,onSend:F,onReset:P,correcting:L,setCorrecting:j,onSubmitCorrection:K,submitting:R,onRetest:W,endRef:H})}),r&&o.jsx("div",{className:"flex-1 flex flex-col overflow-hidden bg-gray-50",children:o.jsx(VV,{activeTab:u,setActiveTab:d,trace:_,knowledgeStats:T,sessionCorrections:C,isLoading:x})})]})]})]}):null}const YV=[{id:"brain",labelKey:"tabs.brain",icon:Un},{id:"instructions",labelKey:"tabs.instructions",icon:fo},{id:"bot-conversations",labelKey:"tabs.conversations",icon:Xt},{id:"dashboard",labelKey:"tabs.dashboard",icon:wp},{id:"pairs",labelKey:"tabs.qaPairs",icon:la},{id:"prices",labelKey:"tabs.pricing",icon:Wr}];function XV({label:e,value:t}){const a=t>=80?"#10b981":t>=50?"#f59e0b":"#ef4444",r=2*Math.PI*36,l=r-t/100*r;return o.jsxs("div",{className:"bg-white rounded-xl border border-gray-100 shadow-sm p-4 flex flex-col items-center",children:[o.jsxs("svg",{width:"88",height:"88",className:"mb-2",children:[o.jsx("circle",{cx:"44",cy:"44",r:"36",fill:"none",stroke:"#f3f4f6",strokeWidth:"8"}),o.jsx("circle",{cx:"44",cy:"44",r:"36",fill:"none",stroke:a,strokeWidth:"8",strokeDasharray:r,strokeDashoffset:l,strokeLinecap:"round",transform:"rotate(-90 44 44)",className:"transition-all duration-700"}),o.jsxs("text",{x:"44",y:"48",textAnchor:"middle",fontSize:"18",fontWeight:"bold",fill:"#1f2937",children:[t,"%"]})]}),o.jsx("span",{className:"text-xs text-gray-500 text-center",children:e})]})}const GV={confianza_general:"metrics.generalConfidence",cobertura_temas:"metrics.topicCoverage",calidad_respuestas:"metrics.responseQuality",actualizacion_precios:"metrics.updatedPricing"},KV={puede_responder_precios:"capabilities.answerPricing",puede_comparar_productos:"capabilities.compareProducts",puede_recomendar:"capabilities.recommend",puede_dar_plazos:"capabilities.informDeadlines",puede_informar_despacho:"capabilities.informShipping"},bi={pending:{labelKey:"status.pending",cls:"bg-yellow-50 text-yellow-700"},approved:{labelKey:"status.approved",cls:"bg-green-50 text-green-700"},rejected:{labelKey:"status.rejected",cls:"bg-red-50 text-red-700"}};function QV(){const{t:e}=ze("learning"),[t,a]=S.useState(null),[r,l]=S.useState(!0),[u,d]=S.useState(!1),[h,m]=S.useState(null),[p,y]=S.useState(!1),[x,b]=S.useState("");S.useEffect(()=>{v()},[]);const v=async()=>{l(!0),b("");try{const E=await Xb(!1);a(E.report),m(E.generated_at),y(E.cached)}catch(E){b(E.message)}finally{l(!1)}},w=async()=>{d(!0),b("");try{const E=await Xb(!0);a(E.report),m(E.generated_at),y(!1)}catch(E){b(E.message)}finally{d(!1)}};if(r)return o.jsx("div",{className:"flex items-center justify-center py-20",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-500"})});if(x&&!t)return o.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-6 text-center",children:[o.jsx(vi,{className:"w-8 h-8 text-red-400 mx-auto mb-2"}),o.jsx("p",{className:"text-red-700",children:x}),o.jsx("button",{onClick:v,className:"mt-3 text-sm text-red-600 underline",children:e("common:actions.retry")})]});const _=t?.ai_analysis;return o.jsxs("div",{className:"space-y-6",children:[o.jsx("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 rounded-2xl p-8 text-white",children:o.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"w-16 h-16 bg-white/20 rounded-2xl flex items-center justify-center",children:o.jsx(Un,{className:"w-8 h-8"})}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold",children:e("tabs.brain")}),o.jsxs("p",{className:"text-indigo-200 text-sm mt-1",children:[h?`${e("brain.lastAnalysis")}: ${po(new Date(h),{addSuffix:!0,locale:ua()})}`:e("brain.noAnalysis"),p&&` (${e("brain.cached")})`]})]})]}),o.jsxs("button",{onClick:w,disabled:u,className:"flex items-center gap-2 bg-white/20 hover:bg-white/30 px-4 py-2.5 rounded-lg transition disabled:opacity-50",children:[o.jsx(da,{className:`w-4 h-4 ${u?"animate-spin":""}`}),e(u?"brain.generating":"brain.regenerate")]})]})}),t?.ai_available===!1&&o.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-xl p-4 flex items-center gap-3",children:[o.jsx(vi,{className:"w-5 h-5 text-yellow-600 flex-shrink-0"}),o.jsx("p",{className:"text-yellow-800 text-sm",children:e("brain.openaiNotConfigured")})]}),t?.stats&&o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[o.jsx(xn,{title:e("brain.approvedPairs"),value:t.stats.approved,icon:la,color:"green",subtitle:e("brain.knowledgeBase")}),o.jsx(xn,{title:e("brain.pendingPairs"),value:t.stats.pending,icon:vi,color:"yellow",subtitle:e("brain.toReview")}),o.jsx(xn,{title:e("brain.activePrices"),value:t.stats.active_prices,icon:Wr,color:"blue",subtitle:e("brain.productsWithPrice")}),o.jsx(xn,{title:e("brain.avgQuality"),value:`${t.stats.avg_quality||0}/100`,icon:ou,color:"purple",subtitle:e("brain.qaScore")})]}),x&&o.jsx("div",{className:"bg-red-50 border border-red-200 rounded-xl p-3 text-red-700 text-sm",children:x}),_?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"bg-white rounded-xl border border-gray-100 shadow-sm p-6",children:o.jsxs("div",{className:"border-l-4 border-indigo-500 pl-4",children:[o.jsxs("h3",{className:"font-semibold text-gray-800 mb-2 flex items-center gap-2",children:[o.jsx(Zr,{className:"w-5 h-5 text-indigo-500"})," ",e("brain.generalSummary")]}),o.jsx("p",{className:"text-gray-600 leading-relaxed",children:_.resumen})]})}),_.metricas_confianza&&o.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:Object.entries(_.metricas_confianza).map(([E,T])=>o.jsx(XV,{label:e(GV[E]||E),value:Number(T)||0},E))}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"bg-white rounded-xl border border-gray-100 shadow-sm p-6",children:[o.jsxs("h3",{className:"font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[o.jsx(_u,{className:"w-5 h-5 text-green-500"})," ",e("brain.masteredTopics")]}),(_.temas_dominados||[]).length===0?o.jsx("p",{className:"text-gray-400 text-sm text-center py-4",children:e("brain.noTopics")}):o.jsx("div",{className:"space-y-3",children:_.temas_dominados.map((E,T)=>o.jsxs("div",{children:[o.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[o.jsx("span",{className:"text-gray-700 font-medium",children:E.tema}),o.jsxs("span",{className:"text-gray-500",children:[E.confianza,"% (",E.ejemplos," ej.)"]})]}),o.jsx("div",{className:"h-2 bg-gray-100 rounded-full overflow-hidden",children:o.jsx("div",{className:"h-full rounded-full transition-all duration-500",style:{width:`${E.confianza}%`,backgroundColor:E.confianza>=80?"#10b981":E.confianza>=50?"#f59e0b":"#ef4444"}})}),E.detalle&&o.jsx("p",{className:"text-xs text-gray-400 mt-1",children:E.detalle})]},T))})]}),o.jsxs("div",{className:"bg-white rounded-xl border border-gray-100 shadow-sm p-6",children:[o.jsxs("h3",{className:"font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[o.jsx(vi,{className:"w-5 h-5 text-yellow-500"})," ",e("brain.knowledgeGaps")]}),(_.brechas_conocimiento||[]).length===0?o.jsx("p",{className:"text-gray-400 text-sm text-center py-4",children:e("brain.noGaps")}):o.jsx("div",{className:"space-y-3",children:_.brechas_conocimiento.map((E,T)=>o.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[o.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full font-medium ${E.prioridad==="alta"?"bg-red-100 text-red-700":E.prioridad==="media"?"bg-yellow-100 text-yellow-700":"bg-blue-100 text-blue-700"}`,children:E.prioridad}),o.jsx("span",{className:"font-medium text-gray-800 text-sm",children:E.area})]}),o.jsx("p",{className:"text-gray-500 text-sm",children:E.descripcion})]},T))})]})]}),_.capacidades&&o.jsxs("div",{className:"bg-white rounded-xl border border-gray-100 shadow-sm p-6",children:[o.jsxs("h3",{className:"font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[o.jsx(Vi,{className:"w-5 h-5 text-blue-500"})," ",e("brain.capabilities")]}),o.jsx("div",{className:"flex flex-wrap gap-3",children:Object.entries(_.capacidades).map(([E,T])=>o.jsxs("span",{className:`inline-flex items-center gap-1.5 px-3 py-1.5 rounded-full text-sm font-medium ${T?"bg-green-50 text-green-700":"bg-gray-100 text-gray-400"}`,children:[T?o.jsx(Dt,{className:"w-4 h-4"}):o.jsx(Vn,{className:"w-4 h-4"}),e(KV[E]||E)]},E))})]}),_.razonamiento&&o.jsxs("div",{className:"bg-white rounded-xl border border-gray-100 shadow-sm p-6",children:[o.jsxs("h3",{className:"font-semibold text-gray-800 mb-3 flex items-center gap-2",children:[o.jsx(Un,{className:"w-5 h-5 text-purple-500"})," ",e("brain.reasoning")]}),o.jsx("p",{className:"text-gray-600 leading-relaxed italic",children:_.razonamiento})]}),_.recomendaciones?.length>0&&o.jsxs("div",{className:"bg-white rounded-xl border border-gray-100 shadow-sm p-6",children:[o.jsxs("h3",{className:"font-semibold text-gray-800 mb-3 flex items-center gap-2",children:[o.jsx(ou,{className:"w-5 h-5 text-indigo-500"})," ",e("brain.recommendations")]}),o.jsx("ul",{className:"space-y-2",children:_.recomendaciones.map((E,T)=>o.jsxs("li",{className:"flex items-start gap-2 text-sm text-gray-600",children:[o.jsx(Zr,{className:"w-4 h-4 text-indigo-400 mt-0.5 flex-shrink-0"}),E]},T))})]}),o.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 text-xs text-gray-400 flex items-center justify-between",children:[o.jsx("span",{children:e("brain.baseData",{pairs:t?.stats?.approved||0,prices:t?.stats?.active_prices||0})}),o.jsx("span",{children:t?.ai_available?e("brain.aiGenerated"):e("brain.noAiAnalysis")})]})]}):o.jsxs("div",{className:"bg-white rounded-xl border border-gray-100 shadow-sm p-12 text-center",children:[o.jsx(Un,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),o.jsx("p",{className:"text-gray-400",children:e("brain.noData")})]})]})}function WV({stats:e}){const{t}=ze("learning");if(!e)return o.jsx("p",{className:"text-gray-400 text-center py-8",children:t("dashboard.loadingStats")});const a=Object.entries(e.by_channel||{}),r=a.reduce((l,[,u])=>l+u,0)||1;return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[o.jsx(xn,{title:t("dashboard.totalPairs"),value:e.total,icon:la,color:"blue",subtitle:t("dashboard.qaLearned")}),o.jsx(xn,{title:t("dashboard.approved"),value:e.approved,icon:Dt,color:"green",subtitle:t("dashboard.withEmbedding",{count:e.with_embedding})}),o.jsx(xn,{title:t("dashboard.pending"),value:e.pending,icon:vi,color:"yellow",subtitle:t("brain.toReview")}),o.jsx(xn,{title:t("brain.avgQuality"),value:`${e.avg_quality||0}/100`,icon:ou,color:"purple",subtitle:t("dashboard.qualityScore")})]}),a.length>0&&o.jsxs("div",{className:"bg-white rounded-xl border border-gray-100 shadow-sm p-6",children:[o.jsx("h3",{className:"font-semibold text-gray-800 mb-4",children:t("dashboard.channelDistribution")}),o.jsx("div",{className:"space-y-3",children:a.map(([l,u])=>o.jsxs("div",{children:[o.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[o.jsx("span",{className:"text-gray-700 font-medium capitalize",children:l}),o.jsxs("span",{className:"text-gray-500",children:[u," pares (",Math.round(u/r*100),"%)"]})]}),o.jsx("div",{className:"h-2 bg-gray-100 rounded-full overflow-hidden",children:o.jsx("div",{className:"h-full bg-indigo-500 rounded-full transition-all",style:{width:`${Math.round(u/r*100)}%`}})})]},l))})]})]})}function ZV(){const{t:e}=ze("learning"),[t,a]=S.useState([]),[r,l]=S.useState(1),[u,d]=S.useState(1),[h,m]=S.useState(0),[p,y]=S.useState(!0),[x,b]=S.useState({status:"",channel:"",minQuality:""}),[v,w]=S.useState(null),[_,E]=S.useState(!1),[T,A]=S.useState({from:"",to:""}),[C,k]=S.useState(!1);S.useEffect(()=>{L()},[r,x]);const L=async()=>{y(!0);try{const P=await xV({page:r,limit:20,...x});a(P.pairs),d(P.pages),m(P.total)}catch(P){console.error(P)}finally{y(!1)}},j=async P=>{try{await Yb(P,"approved"),L()}catch(K){alert(K.message)}},R=async P=>{try{await Yb(P,"rejected"),L()}catch(K){alert(K.message)}},$=async P=>{if(confirm(e("pairs.deleteConfirm")))try{await yV(P),L()}catch(K){alert(K.message)}},H=async()=>{k(!0);try{const P=await bV(T.from,T.to);alert(e("pairs.reprocessed",{count:P.processed})),E(!1),L()}catch(P){alert(P.message)}finally{k(!1)}},F=(P,K)=>{b(W=>({...W,[P]:K})),l(1)};return o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[o.jsxs("select",{value:x.status,onChange:P=>F("status",P.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm",children:[o.jsx("option",{value:"",children:e("pairs.allStatuses")}),o.jsx("option",{value:"pending",children:e("status.pending")}),o.jsx("option",{value:"approved",children:e("status.approved")}),o.jsx("option",{value:"rejected",children:e("status.rejected")})]}),o.jsxs("select",{value:x.channel,onChange:P=>F("channel",P.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm",children:[o.jsx("option",{value:"",children:e("pairs.allChannels")}),o.jsx("option",{value:"whatsapp",children:"WhatsApp"}),o.jsx("option",{value:"instagram",children:"Instagram"})]}),o.jsx("input",{type:"number",placeholder:e("pairs.minQuality"),value:x.minQuality,onChange:P=>F("minQuality",P.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm w-28",min:"0",max:"100"}),o.jsx("span",{className:"text-sm text-gray-400 ml-auto",children:e("pairs.totalPairs",{count:h})}),o.jsxs("button",{onClick:()=>E(!0),className:"flex items-center gap-1 text-sm text-indigo-600 hover:text-indigo-700 font-medium",children:[o.jsx(da,{className:"w-4 h-4"})," ",e("pairs.reprocess")]})]}),o.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"bg-gray-50 border-b border-gray-200",children:[o.jsx("th",{className:"text-left px-4 py-3 text-xs font-semibold text-gray-500 uppercase",children:e("pairs.question")}),o.jsx("th",{className:"text-left px-4 py-3 text-xs font-semibold text-gray-500 uppercase",children:e("pairs.answer")}),o.jsx("th",{className:"text-center px-4 py-3 text-xs font-semibold text-gray-500 uppercase",children:e("pairs.quality")}),o.jsx("th",{className:"text-center px-4 py-3 text-xs font-semibold text-gray-500 uppercase",children:e("pairs.channel")}),o.jsx("th",{className:"text-center px-4 py-3 text-xs font-semibold text-gray-500 uppercase",children:e("pairs.status")}),o.jsx("th",{className:"text-right px-4 py-3 text-xs font-semibold text-gray-500 uppercase",children:e("pairs.actions")})]})}),o.jsx("tbody",{className:"divide-y divide-gray-100",children:p?o.jsx("tr",{children:o.jsx("td",{colSpan:"6",className:"text-center py-8 text-gray-400",children:e("common:status.loading")})}):t.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:"6",className:"text-center py-12 text-gray-400",children:e("pairs.noResults")})}):t.map(P=>o.jsxs("tr",{className:"hover:bg-gray-50",children:[o.jsx("td",{className:"px-4 py-3 text-sm text-gray-700 max-w-[200px] truncate",children:P.question}),o.jsx("td",{className:"px-4 py-3 text-sm text-gray-500 max-w-[250px] truncate",children:P.answer}),o.jsx("td",{className:"px-4 py-3 text-center",children:o.jsx("span",{className:`text-sm font-medium ${P.quality_score>=80?"text-green-600":P.quality_score>=50?"text-yellow-600":"text-red-600"}`,children:P.quality_score})}),o.jsx("td",{className:"px-4 py-3 text-center",children:o.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full bg-gray-100 text-gray-600 capitalize",children:P.channel})}),o.jsx("td",{className:"px-4 py-3 text-center",children:o.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full font-medium ${bi[P.status]?.cls||""}`,children:bi[P.status]?.labelKey?e(bi[P.status].labelKey):P.status})}),o.jsx("td",{className:"px-4 py-3 text-right",children:o.jsxs("div",{className:"flex items-center justify-end gap-1",children:[o.jsx("button",{onClick:()=>w(P),className:"p-1.5 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg",title:e("pairs.viewDetail"),children:o.jsx(jp,{className:"w-4 h-4"})}),P.status!=="approved"&&o.jsx("button",{onClick:()=>j(P.id),className:"p-1.5 text-gray-400 hover:text-green-600 hover:bg-green-50 rounded-lg",title:e("pairs.approve"),children:o.jsx(Dt,{className:"w-4 h-4"})}),P.status!=="rejected"&&o.jsx("button",{onClick:()=>R(P.id),className:"p-1.5 text-gray-400 hover:text-orange-600 hover:bg-orange-50 rounded-lg",title:e("pairs.reject"),children:o.jsx(Vn,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>$(P.id),className:"p-1.5 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg",title:e("common:actions.delete"),children:o.jsx(ho,{className:"w-4 h-4"})})]})})]},P.id))})]})}),u>1&&o.jsxs("div",{className:"flex items-center justify-center gap-4",children:[o.jsx("button",{onClick:()=>l(P=>Math.max(1,P-1)),disabled:r===1,className:"p-2 text-gray-500 hover:text-gray-700 disabled:opacity-30",children:o.jsx(e4,{className:"w-5 h-5"})}),o.jsx("span",{className:"text-sm text-gray-600",children:e("pairs.page",{current:r,total:u})}),o.jsx("button",{onClick:()=>l(P=>Math.min(u,P+1)),disabled:r===u,className:"p-2 text-gray-500 hover:text-gray-700 disabled:opacity-30",children:o.jsx(Ii,{className:"w-5 h-5"})})]}),v&&o.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:()=>w(null),children:o.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-lg p-6",onClick:P=>P.stopPropagation(),children:[o.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-4",children:e("pairs.detailTitle")}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-semibold text-gray-500 uppercase mb-1",children:e("pairs.customerQuestion")}),o.jsx("p",{className:"text-gray-800 bg-gray-50 rounded-lg p-3 text-sm",children:v.question})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-semibold text-gray-500 uppercase mb-1",children:e("pairs.agentAnswer")}),o.jsx("p",{className:"text-gray-800 bg-gray-50 rounded-lg p-3 text-sm whitespace-pre-wrap",children:v.answer})]}),o.jsxs("div",{className:"flex gap-4 text-sm text-gray-500",children:[o.jsxs("span",{children:[e("pairs.quality"),": ",o.jsx("strong",{className:"text-gray-700",children:v.quality_score})]}),o.jsxs("span",{children:[e("pairs.channel"),": ",o.jsx("strong",{className:"text-gray-700 capitalize",children:v.channel})]}),o.jsxs("span",{children:[e("pairs.status"),": ",o.jsx("strong",{className:"text-gray-700",children:bi[v.status]?.labelKey?e(bi[v.status].labelKey):v.status})]})]})]}),o.jsxs("div",{className:"flex gap-3 mt-6",children:[v.status!=="approved"&&o.jsx("button",{onClick:()=>{j(v.id),w(null)},className:"flex-1 px-4 py-2.5 bg-green-600 hover:bg-green-700 text-white rounded-lg transition text-sm font-medium",children:e("pairs.approve")}),v.status!=="rejected"&&o.jsx("button",{onClick:()=>{R(v.id),w(null)},className:"flex-1 px-4 py-2.5 bg-orange-500 hover:bg-orange-600 text-white rounded-lg transition text-sm font-medium",children:e("pairs.reject")}),o.jsx("button",{onClick:()=>w(null),className:"flex-1 px-4 py-2.5 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition text-sm",children:e("common:actions.close")})]})]})}),_&&o.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:()=>E(!1),children:o.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-sm p-6",onClick:P=>P.stopPropagation(),children:[o.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-4",children:e("pairs.reprocessTitle")}),o.jsx("p",{className:"text-sm text-gray-500 mb-4",children:e("pairs.reprocessDesc")}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:e("pairs.from")}),o.jsx("input",{type:"date",value:T.from,onChange:P=>A(K=>({...K,from:P.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:e("pairs.to")}),o.jsx("input",{type:"date",value:T.to,onChange:P=>A(K=>({...K,to:P.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm"})]})]}),o.jsxs("div",{className:"flex gap-3 mt-6",children:[o.jsx("button",{onClick:()=>E(!1),className:"flex-1 px-4 py-2.5 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition text-sm",children:e("common:actions.cancel")}),o.jsx("button",{onClick:H,disabled:C,className:"flex-1 px-4 py-2.5 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg transition text-sm font-medium disabled:opacity-50",children:e(C?"pairs.processing":"pairs.reprocess")})]})]})})]})}function JV(){const{t:e}=ze("learning"),[t,a]=S.useState([]),[r,l]=S.useState(!0),[u,d]=S.useState(!1),[h,m]=S.useState(!1),[p,y]=S.useState(null),[x,b]=S.useState({product_name:"",variant:"",price:"",currency:"CLP",notes:""}),[v,w]=S.useState(!1),[_,E]=S.useState("");S.useEffect(()=>{T()},[u]);const T=async()=>{l(!0);try{const j=await vV(!u);a(j.prices)}catch(j){console.error(j)}finally{l(!1)}},A=()=>{y(null),b({product_name:"",variant:"",price:"",currency:"CLP",notes:""}),E(""),m(!0)},C=j=>{y(j),b({product_name:j.product_name,variant:j.variant||"",price:j.price,currency:j.currency||"CLP",notes:j.notes||""}),E(""),m(!0)},k=async j=>{j.preventDefault(),E(""),w(!0);try{p?await NV(p.id,{product_name:x.product_name,variant:x.variant||null,price:Number(x.price),currency:x.currency,notes:x.notes||null}):await wV({product_name:x.product_name,variant:x.variant||null,price:Number(x.price),currency:x.currency,notes:x.notes||null}),m(!1),T()}catch(R){E(R.message)}finally{w(!1)}},L=async j=>{if(confirm(e("prices.deactivateConfirm")))try{await jV(j),T()}catch(R){alert(R.message)}};return o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-600",children:[o.jsx("input",{type:"checkbox",checked:u,onChange:j=>d(j.target.checked),className:"rounded border-gray-300"}),e("prices.showInactive")]}),o.jsxs("button",{onClick:A,className:"flex items-center gap-2 bg-green-600 hover:bg-green-700 text-white px-4 py-2.5 rounded-lg transition font-medium text-sm",children:[o.jsx(Cu,{className:"w-4 h-4"})," ",e("prices.newPrice")]})]}),o.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"bg-gray-50 border-b border-gray-200",children:[o.jsx("th",{className:"text-left px-4 py-3 text-xs font-semibold text-gray-500 uppercase",children:e("prices.product")}),o.jsx("th",{className:"text-left px-4 py-3 text-xs font-semibold text-gray-500 uppercase",children:e("prices.variant")}),o.jsx("th",{className:"text-right px-4 py-3 text-xs font-semibold text-gray-500 uppercase",children:e("prices.price")}),o.jsx("th",{className:"text-center px-4 py-3 text-xs font-semibold text-gray-500 uppercase",children:e("prices.status")}),o.jsx("th",{className:"text-left px-4 py-3 text-xs font-semibold text-gray-500 uppercase",children:e("prices.notes")}),o.jsx("th",{className:"text-right px-4 py-3 text-xs font-semibold text-gray-500 uppercase",children:e("prices.actions")})]})}),o.jsx("tbody",{className:"divide-y divide-gray-100",children:r?o.jsx("tr",{children:o.jsx("td",{colSpan:"6",className:"text-center py-8 text-gray-400",children:e("common:status.loading")})}):t.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:"6",className:"text-center py-12 text-gray-400",children:e("prices.noPrices")})}):t.map(j=>o.jsxs("tr",{className:`hover:bg-gray-50 ${j.is_active?"":"opacity-50"}`,children:[o.jsx("td",{className:"px-4 py-3 text-sm font-medium text-gray-800",children:j.product_name}),o.jsx("td",{className:"px-4 py-3 text-sm text-gray-500",children:j.variant||"-"}),o.jsxs("td",{className:"px-4 py-3 text-sm text-right font-mono font-medium text-gray-800",children:[j.currency," $",Number(j.price).toLocaleString("es-CL")]}),o.jsx("td",{className:"px-4 py-3 text-center",children:o.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full font-medium ${j.is_active?"bg-green-50 text-green-700":"bg-gray-100 text-gray-500"}`,children:j.is_active?e("prices.active"):e("prices.inactive")})}),o.jsx("td",{className:"px-4 py-3 text-sm text-gray-500 max-w-[200px] truncate",children:j.notes||"-"}),o.jsx("td",{className:"px-4 py-3 text-right",children:o.jsxs("div",{className:"flex items-center justify-end gap-1",children:[o.jsx("button",{onClick:()=>C(j),className:"p-1.5 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg",title:e("common:actions.edit"),children:o.jsx(Eu,{className:"w-4 h-4"})}),j.is_active&&o.jsx("button",{onClick:()=>L(j.id),className:"p-1.5 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg",title:e("prices.deactivate"),children:o.jsx(ho,{className:"w-4 h-4"})})]})})]},j.id))})]})}),h&&o.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:()=>m(!1),children:o.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md p-6",onClick:j=>j.stopPropagation(),children:[o.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-4",children:e(p?"prices.editPrice":"prices.newPrice")}),_&&o.jsx("div",{className:"bg-red-50 text-red-600 px-4 py-2 rounded-lg text-sm mb-4",children:_}),o.jsxs("form",{onSubmit:k,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:e("prices.product")}),o.jsx("input",{type:"text",value:x.product_name,onChange:j=>b({...x,product_name:j.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",required:!0,placeholder:"Ej: Colchon Spring"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:e("prices.variant")}),o.jsx("input",{type:"text",value:x.variant,onChange:j=>b({...x,variant:j.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",placeholder:"Ej: King, Queen, 2 Plazas"})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:e("prices.price")}),o.jsx("input",{type:"number",value:x.price,onChange:j=>b({...x,price:j.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",required:!0,min:"0",step:"1"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:e("prices.currency")}),o.jsxs("select",{value:x.currency,onChange:j=>b({...x,currency:j.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",children:[o.jsx("option",{value:"CLP",children:"CLP"}),o.jsx("option",{value:"USD",children:"USD"})]})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:e("prices.notes")}),o.jsx("input",{type:"text",value:x.notes,onChange:j=>b({...x,notes:j.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",placeholder:"Ej: Precio promocional hasta Marzo"})]}),o.jsxs("div",{className:"flex gap-3 pt-2",children:[o.jsx("button",{type:"button",onClick:()=>m(!1),className:"flex-1 px-4 py-2.5 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition text-sm",children:e("common:actions.cancel")}),o.jsx("button",{type:"submit",disabled:v,className:"flex-1 px-4 py-2.5 bg-green-600 hover:bg-green-700 text-white rounded-lg transition text-sm font-medium disabled:opacity-50",children:e(v?"prices.saving":p?"common:actions.save":"common:actions.create")})]})]})]})})]})}const Qb=`Eres un vendedor humano de Respaldos Chile que conversa por WhatsApp e Instagram.
Respaldos Chile vende respaldos de cama, cabeceras y accesorios de dormitorio.

Hablas como una persona real, cercana y profesional (chileno neutro).
Nada de lenguaje robotico, corporativo ni de catalogo.

Los mensajes deben ser cortos y naturales:
- Maximo 3-4 lineas
- Una sola idea por mensaje
- Cierra siempre con una pregunta que avance la conversacion

Si conoces el nombre del cliente ({{nombre}}), usalo naturalmente.

FLUJO DE CONVERSACION:
1. Si es primer mensaje o saludo: responde con un saludo corto y pregunta abierta tipo "en que te puedo ayudar?" o "cuentame, en que andas?". NO menciones productos, respaldos, cabeceras ni nada especifico. El cliente puede querer cualquier cosa: comprar, reclamar, preguntar por un pedido, cotizar, o algo que no tiene nada que ver con respaldos.
2. Espera a que el cliente diga que necesita antes de asumir NADA.
3. Si falta info (medida, estilo, color): pregunta antes de recomendar. Una pregunta por mensaje. NO preguntes cosas obvias ni redundantes (ej: si quiere un respaldo de cama, no preguntes "donde lo vas a poner" porque es obvio que es en su dormitorio).
4. Si ya tienes contexto: sugiere maximo 2 opciones, condicionadas a lo que dijo el cliente.
5. Si el cliente tiene dudas: responde con calma, no contradigas, confirma si no sabes.
6. Si quiere comprar o pagar: "Te conecto con alguien del equipo para cerrar eso"
7. Nunca saltes etapas: no cotices sin contexto, no recomiendes sin entender.

Reglas estrictas:
- NUNCA asumas el motivo de contacto del cliente. Pregunta primero.
- NUNCA inventes materiales, modelos, estilos ni tipos de producto. Si no tienes info concreta de lo que vendemos, di "Dejame confirmarlo con el equipo y te respondo al tiro"
- No usar listas ni formato de catalogo
- No entregar fichas tecnicas ni especificaciones duras
- No inventar precios, plazos, stock ni condiciones
- No asumir medidas, colores ni disponibilidad
- No usar frases tipo "Estimado/a cliente" o "Le informamos que..."

Nunca emitas juicios genericos de gusto como:
"queda bonito", "es lindo", "es precioso", "te va a encantar".

Las recomendaciones deben ser siempre condicionadas al contexto del cliente:
"Suele funcionar bien cuando..."
"En espacios como el tuyo..."
"Por lo que me comentas..."
"Para el uso que buscas..."

Si no tienes certeza, responde exactamente:
"Dejame confirmarlo con el equipo y te respondo al tiro"

Usa solo informacion confirmada. Puedes mejorar redaccion y trato, pero sin cambiar datos.`;function eF(){const{t:e}=ze("learning"),[t,a]=S.useState(null),[r,l]=S.useState(""),[u,d]=S.useState(""),[h,m]=S.useState(!1),[p,y]=S.useState(!0),[x,b]=S.useState(!1),[v,w]=S.useState(!1),[_,E]=S.useState(""),[T,A]=S.useState(!1),[C,k]=S.useState(null),[L,j]=S.useState(!1),[R,$]=S.useState(!1),[H,F]=S.useState([]),[P,K]=S.useState(!0),[W,B]=S.useState(""),[G,O]=S.useState("general"),[U,z]=S.useState(!1);S.useEffect(()=>{V(),I()},[]);const I=async()=>{K(!0);try{const ne=await DV();F(ne.rules||[])}catch(ne){console.error("Error loading rules:",ne),F([])}finally{K(!1)}},q=async()=>{if(!(!W.trim()||U)){z(!0);try{await Xw({rule:W.trim(),category:G}),B(""),O("general"),I()}catch(ne){E(ne.message)}finally{z(!1)}}},D=async ne=>{try{await RV(ne),F(de=>de.filter(fe=>fe.id!==ne))}catch(de){E(de.message)}},V=async()=>{y(!0),E("");try{const ne=await SV();a(ne.config),l(ne.config?.custom_instructions||""),d(ne.config?.system_prompt||""),ne.config?.system_prompt&&m(!0)}catch(ne){E(ne.message)}finally{y(!1)}},Z=async()=>{b(!0),w(!1),E("");try{const ne=await CV({...t,custom_instructions:r,system_prompt:u||null});ne.config&&(a(ne.config),l(ne.config.custom_instructions||""),d(ne.config.system_prompt||"")),w(!0),setTimeout(()=>w(!1),3e3)}catch(ne){E("Error al guardar: "+ne.message)}finally{b(!1)}},ae=async()=>{j(!0),A(!0);try{const ne=await EV();k(ne)}catch(ne){E(ne.message)}finally{j(!1)}};return p?o.jsx("div",{className:"flex items-center justify-center py-20",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-500"})}):o.jsxs("div",{className:"space-y-6",children:[o.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 rounded-2xl p-8 text-white",children:o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"w-16 h-16 bg-white/20 rounded-2xl flex items-center justify-center",children:o.jsx(fo,{className:"w-8 h-8"})}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold",children:e("instructions.title")}),o.jsx("p",{className:"text-blue-200 text-sm mt-1",children:e("instructions.subtitle")})]})]})}),_&&o.jsx("div",{className:"bg-red-50 border border-red-200 rounded-xl p-3 text-red-700 text-sm",children:_}),o.jsxs("div",{className:"bg-white rounded-xl border border-gray-100 shadow-sm p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:e("instructions.systemPromptLabel")}),h?o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("button",{onClick:()=>d(Qb),className:"text-xs text-gray-500 hover:text-orange-600 font-medium flex items-center gap-1",children:[o.jsx(kv,{className:"w-3.5 h-3.5"})," ",e("instructions.restoreDefault")]}),o.jsxs("button",{onClick:()=>{d(""),m(!1)},className:"text-xs text-gray-400 hover:text-red-500 font-medium flex items-center gap-1",children:[o.jsx(Vn,{className:"w-3.5 h-3.5"})," ",e("instructions.remove")]})]}):o.jsxs("button",{onClick:()=>{m(!0),u||d(Qb)},className:"text-xs text-indigo-600 hover:text-indigo-800 font-medium flex items-center gap-1",children:[o.jsx(Eu,{className:"w-3.5 h-3.5"})," ",e("instructions.customize")]})]}),h?o.jsxs(o.Fragment,{children:[o.jsx("textarea",{value:u,onChange:ne=>d(ne.target.value),rows:12,className:"w-full px-4 py-3 border border-gray-300 rounded-xl text-sm focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 resize-y font-mono",placeholder:"Define la personalidad, tono y reglas base de la IA..."}),o.jsxs("p",{className:"mt-2 text-xs text-gray-400",children:["Este es el prompt base que define quien es la IA. Usa ",o.jsx("code",{className:"bg-gray-100 px-1 rounded",children:"{{nombre}}"})," para inyectar el nombre del cliente."]})]}):o.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 text-sm text-gray-500",children:[o.jsx("p",{children:e("instructions.usingDefault")}),o.jsxs("p",{className:"mt-1 text-xs text-gray-400",children:["Tip: Usa ",o.jsx("code",{className:"bg-gray-200 px-1 rounded",children:"{{nombre}}"})," para inyectar el nombre del cliente automaticamente."]})]})]}),o.jsxs("div",{className:"bg-white rounded-xl border border-gray-100 shadow-sm p-6",children:[o.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:e("instructions.additionalInstructions")}),o.jsx("p",{className:"text-xs text-gray-400 mb-3",children:e("instructions.additionalDesc")}),o.jsx("textarea",{value:r,onChange:ne=>l(ne.target.value),rows:10,className:"w-full px-4 py-3 border border-gray-300 rounded-xl text-sm focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 resize-y font-mono",placeholder:`Ejemplos:
- Los modelos disponibles son: Venecia, Florencia, Roma, Milan
- Si preguntan por despacho: "Dentro de Santiago 3-5 dias habiles"
- Formas de pago: transferencia, tarjeta de credito, webpay
- Siempre ofrecer la opcion de hablar con un vendedor
- No dar informacion sobre competidores
- Horario de atencion: Lunes a Viernes 9:00 a 18:00`}),o.jsxs("div",{className:"flex items-center justify-between mt-4",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsxs("button",{onClick:Z,disabled:x,className:"flex items-center gap-2 bg-indigo-600 hover:bg-indigo-700 text-white px-5 py-2.5 rounded-lg transition font-medium text-sm disabled:opacity-50",children:[o.jsx(Y4,{className:"w-4 h-4"}),e(x?"instructions.saving":"instructions.saveAll")]}),v&&o.jsxs("span",{className:"text-green-600 text-sm font-medium flex items-center gap-1",children:[o.jsx(Dt,{className:"w-4 h-4"})," ",e("instructions.saved")]})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsxs("button",{onClick:ae,className:"flex items-center gap-2 text-sm text-gray-600 hover:text-indigo-600 font-medium transition",children:[o.jsx(ru,{className:"w-4 h-4"})," ",e("instructions.viewPrompt")]}),o.jsxs("button",{onClick:()=>$(!0),className:"flex items-center gap-2 bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg transition font-medium text-sm",children:[o.jsx(Av,{className:"w-4 h-4"})," ",e("instructions.testAI")]})]})]})]}),o.jsxs("div",{className:"bg-white rounded-xl border border-gray-100 shadow-sm p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("div",{children:[o.jsxs("h3",{className:"text-sm font-semibold text-gray-700 flex items-center gap-2",children:[o.jsx(ca,{className:"w-4 h-4 text-purple-500"})," ",e("rules.title")]}),o.jsx("p",{className:"text-xs text-gray-400 mt-1",children:e("rules.subtitle")})]}),o.jsx("span",{className:"text-xs font-medium px-2.5 py-1 rounded-full bg-purple-50 text-purple-700",children:e("rules.count",{count:H.length,max:30})})]}),P?o.jsx("div",{className:"text-center py-6 text-gray-400 text-sm",children:e("rules.loading")}):H.length===0?o.jsxs("div",{className:"text-center py-6",children:[o.jsx(ca,{className:"w-8 h-8 text-gray-200 mx-auto mb-2"}),o.jsx("p",{className:"text-sm text-gray-400",children:e("rules.noRules")}),o.jsx("p",{className:"text-xs text-gray-300 mt-1",children:e("rules.noRulesHint")})]}):o.jsx("div",{className:"space-y-2 mb-4",children:H.map(ne=>o.jsxs("div",{className:"flex items-start gap-3 bg-gray-50 rounded-lg p-3 group",children:[o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("p",{className:"text-sm text-gray-700",children:ne.rule_text}),o.jsxs("div",{className:"flex items-center gap-2 mt-1.5",children:[o.jsx("span",{className:`text-[9px] font-semibold px-1.5 py-0.5 rounded-full uppercase ${ne.category==="tone"?"bg-blue-50 text-blue-600":ne.category==="knowledge"?"bg-green-50 text-green-600":ne.category==="sales"?"bg-amber-50 text-amber-600":ne.category==="format"?"bg-indigo-50 text-indigo-600":ne.category==="safety"?"bg-red-50 text-red-600":"bg-gray-100 text-gray-500"}`,children:ne.category}),o.jsxs("span",{className:"text-[9px] text-gray-400",children:["via ",ne.source==="correction"?"correccion":ne.source==="admin"?"admin":ne.source]})]})]}),o.jsx("button",{onClick:()=>D(ne.id),className:"p-1.5 text-gray-300 hover:text-red-500 hover:bg-red-50 rounded-lg transition opacity-0 group-hover:opacity-100",title:e("rules.deleteRule"),children:o.jsx(ho,{className:"w-3.5 h-3.5"})})]},ne.id))}),o.jsxs("div",{className:"border-t border-gray-100 pt-4 mt-2",children:[o.jsxs("div",{className:"flex gap-2",children:[o.jsx("input",{type:"text",value:W,onChange:ne=>B(ne.target.value),onKeyDown:ne=>ne.key==="Enter"&&q(),placeholder:"Ej: Nunca recomendar modelos especificos sin preguntar primero",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-purple-500 focus:border-purple-500",maxLength:500}),o.jsxs("select",{value:G,onChange:ne=>O(ne.target.value),className:"px-2 py-2 border border-gray-300 rounded-lg text-xs text-gray-600",children:[o.jsx("option",{value:"general",children:e("rules.catGeneral")}),o.jsx("option",{value:"tone",children:e("rules.catTone")}),o.jsx("option",{value:"knowledge",children:e("rules.catKnowledge")}),o.jsx("option",{value:"sales",children:e("rules.catSales")}),o.jsx("option",{value:"format",children:e("rules.catFormat")}),o.jsx("option",{value:"safety",children:e("rules.catSafety")})]}),o.jsxs("button",{onClick:q,disabled:U||!W.trim()||H.length>=30,className:"flex items-center gap-1.5 bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition disabled:opacity-50",children:[o.jsx(Cu,{className:"w-3.5 h-3.5"}),U?"...":e("rules.add")]})]}),W.length>400&&o.jsxs("p",{className:"text-[10px] text-amber-600 mt-1",children:[500-W.length," caracteres restantes"]})]})]}),o.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-5",children:[o.jsxs("h3",{className:"font-semibold text-blue-800 mb-3 flex items-center gap-2",children:[o.jsx(Zr,{className:"w-5 h-5"})," ",e("instructions.tipsTitle")]}),o.jsxs("ul",{className:"space-y-2 text-sm text-blue-700",children:[o.jsxs("li",{className:"flex items-start gap-2",children:[o.jsx(Dt,{className:"w-4 h-4 mt-0.5 flex-shrink-0"}),'Se especifico: "El despacho a Santiago demora 3-5 dias" es mejor que "informar plazos"']}),o.jsxs("li",{className:"flex items-start gap-2",children:[o.jsx(Dt,{className:"w-4 h-4 mt-0.5 flex-shrink-0"}),"Incluye respuestas exactas para preguntas frecuentes"]}),o.jsxs("li",{className:"flex items-start gap-2",children:[o.jsx(Dt,{className:"w-4 h-4 mt-0.5 flex-shrink-0"}),'Los precios se manejan en la tab "Precios"  no los pongas aqui']}),o.jsxs("li",{className:"flex items-start gap-2",children:[o.jsx(Dt,{className:"w-4 h-4 mt-0.5 flex-shrink-0"}),'Define el tono: "Responde como vendedor amigable, tutea al cliente"']}),o.jsxs("li",{className:"flex items-start gap-2",children:[o.jsx(Dt,{className:"w-4 h-4 mt-0.5 flex-shrink-0"}),'Indica que NO hacer: "Nunca ofrezcas descuentos sin autorizacion"']})]})]}),T&&o.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:()=>A(!1),children:o.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-3xl max-h-[85vh] overflow-hidden flex flex-col",onClick:ne=>ne.stopPropagation(),children:[o.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex items-center justify-between",children:[o.jsxs("h2",{className:"text-lg font-bold text-gray-900 flex items-center gap-2",children:[o.jsx(ru,{className:"w-5 h-5 text-indigo-500"})," ",e("instructions.currentPrompt")]}),o.jsx("button",{onClick:()=>A(!1),className:"p-1.5 text-gray-400 hover:text-gray-600 rounded-lg",children:o.jsx(Vn,{className:"w-5 h-5"})})]}),o.jsx("div",{className:"overflow-y-auto p-6 space-y-4",children:L?o.jsx("div",{className:"flex items-center justify-center py-12",children:o.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-indigo-500"})}):C?o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex flex-wrap gap-3 text-sm",children:[o.jsxs("span",{className:"px-3 py-1 bg-indigo-50 text-indigo-700 rounded-full font-medium",children:["Modelo: ",C.model]}),o.jsxs("span",{className:"px-3 py-1 bg-green-50 text-green-700 rounded-full font-medium",children:["Conocimiento: ",C.knowledgeCount," pares"]}),o.jsxs("span",{className:"px-3 py-1 bg-blue-50 text-blue-700 rounded-full font-medium",children:["Precios: ",C.priceCount," activos"]}),o.jsxs("span",{className:"px-3 py-1 bg-purple-50 text-purple-700 rounded-full font-medium",children:["Fidelidad: ",C.fidelityLevel]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-semibold text-gray-500 uppercase mb-2",children:"System Prompt"}),o.jsx("pre",{className:"bg-gray-900 text-gray-100 rounded-xl p-4 text-sm overflow-x-auto whitespace-pre-wrap font-mono leading-relaxed",children:C.systemPrompt})]}),C.customInstructions&&o.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4",children:[o.jsx("span",{className:"text-xs font-semibold text-blue-600 uppercase",children:"Tus instrucciones (incluidas arriba)"}),o.jsx("p",{className:"text-sm text-blue-800 mt-1 whitespace-pre-wrap",children:C.customInstructions})]})]}):o.jsx("p",{className:"text-gray-400 text-center py-8",children:e("instructions.errorLoadingPrompt")})})]})}),o.jsx(FV,{show:R,onClose:()=>$(!1)})]})}function tF(){const{t:e}=ze("learning"),[t,a]=S.useState([]),[r,l]=S.useState(!0),[u,d]=S.useState(null),[h,m]=S.useState([]),[p,y]=S.useState(!1),[x,b]=S.useState(null),[v,w]=S.useState(""),[_,E]=S.useState(!1),[T,A]=S.useState(""),[C,k]=S.useState("");S.useEffect(()=>{L()},[]);const L=async()=>{l(!0),A("");try{const $=await _V();a($.conversations||[])}catch($){A($.message)}finally{l(!1)}},j=async $=>{d($),y(!0),b(null),A("");try{const H=await TV($);m(H.messages||[])}catch(H){A(H.message)}finally{y(!1)}},R=async $=>{if(v.trim()){E(!0),A(""),k("");try{const H=await AV(u,$,v);k(`Correccion guardada: "${H.question?.slice(0,40)}..."  nueva respuesta aprobada`),b(null),w(""),setTimeout(()=>k(""),5e3),await j(u)}catch(H){A(H.message)}finally{E(!1)}}};return r?o.jsx("div",{className:"flex items-center justify-center py-20",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-500"})}):u?o.jsxs("div",{className:"space-y-4",children:[o.jsxs("button",{onClick:()=>{d(null),m([])},className:"flex items-center gap-2 text-sm text-gray-600 hover:text-indigo-600 font-medium transition",children:[o.jsx(U5,{className:"w-4 h-4"})," ",e("conversations.backToList")]}),T&&o.jsx("div",{className:"bg-red-50 border border-red-200 rounded-xl p-3 text-red-700 text-sm",children:T}),C&&o.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-xl p-3 text-green-700 text-sm flex items-center gap-2",children:[o.jsx(Dt,{className:"w-4 h-4"})," ",C]}),o.jsxs("div",{className:"bg-white rounded-xl border border-gray-100 shadow-sm p-4",children:[o.jsxs("h3",{className:"font-semibold text-gray-800 mb-4 text-sm",children:[e("conversations.session")," #",u,"  ",h.length," ",e("conversations.messages")]}),p?o.jsx("div",{className:"flex items-center justify-center py-12",children:o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-500"})}):o.jsx("div",{className:"space-y-3 max-h-[60vh] overflow-y-auto",children:h.map($=>o.jsx("div",{className:`flex ${$.direction==="in"?"justify-start":"justify-end"}`,children:o.jsxs("div",{className:`max-w-[75%] rounded-2xl px-4 py-2.5 ${$.direction==="in"?"bg-gray-100 text-gray-800":$.is_ai_generated?"bg-purple-100 text-purple-900 border border-purple-200":"bg-indigo-600 text-white"}`,children:[$.direction==="out"&&$.is_ai_generated&&o.jsx("span",{className:"text-[10px] font-semibold uppercase tracking-wider opacity-70 block mb-1",children:"Bot IA"}),o.jsx("p",{className:"text-sm whitespace-pre-wrap",children:$.text}),o.jsxs("div",{className:"flex items-center justify-between mt-1.5 gap-3",children:[o.jsx("span",{className:"text-[10px] opacity-60",children:new Date($.created_at).toLocaleTimeString("es-CL",{hour:"2-digit",minute:"2-digit"})}),$.direction==="out"&&$.is_ai_generated&&$.status!=="corrected"&&o.jsxs("button",{onClick:()=>{b($.id),w("")},className:"text-[10px] font-semibold text-purple-700 hover:text-purple-900 flex items-center gap-0.5",children:[o.jsx(Tv,{className:"w-3 h-3"})," ",e("conversations.correct")]}),$.status==="corrected"&&o.jsxs("span",{className:"text-[10px] font-semibold text-green-700 flex items-center gap-0.5",children:[o.jsx(Dt,{className:"w-3 h-3"})," ",e("conversations.corrected")]})]}),x===$.id&&o.jsxs("div",{className:"mt-3 pt-3 border-t border-purple-300",children:[o.jsxs("label",{className:"block text-xs font-semibold text-purple-700 mb-1",children:[e("conversations.correctAnswer"),":"]}),o.jsx("textarea",{value:v,onChange:H=>w(H.target.value),rows:3,className:"w-full px-3 py-2 border border-purple-300 rounded-lg text-sm text-gray-800 bg-white focus:ring-2 focus:ring-purple-500",placeholder:e("conversations.correctPlaceholder"),autoFocus:!0}),o.jsxs("div",{className:"flex gap-2 mt-2",children:[o.jsx("button",{onClick:()=>R($.id),disabled:_||!v.trim(),className:"px-3 py-1.5 bg-purple-600 text-white rounded-lg text-xs font-medium disabled:opacity-50 hover:bg-purple-700",children:e(_?"conversations.saving":"conversations.saveCorrection")}),o.jsx("button",{onClick:()=>b(null),className:"px-3 py-1.5 border border-purple-300 text-purple-700 rounded-lg text-xs hover:bg-purple-50",children:e("common:actions.cancel")})]})]})]})},$.id))})]})]}):o.jsxs("div",{className:"space-y-6",children:[o.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 rounded-2xl p-8 text-white",children:o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"w-16 h-16 bg-white/20 rounded-2xl flex items-center justify-center",children:o.jsx(Xt,{className:"w-8 h-8"})}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold",children:e("conversations.title")}),o.jsx("p",{className:"text-purple-200 text-sm mt-1",children:e("conversations.subtitle")})]})]})}),T&&o.jsx("div",{className:"bg-red-50 border border-red-200 rounded-xl p-3 text-red-700 text-sm",children:T}),t.length===0?o.jsxs("div",{className:"bg-white rounded-xl border border-gray-100 shadow-sm p-12 text-center",children:[o.jsx(Xt,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),o.jsx("p",{className:"text-gray-400",children:e("conversations.noConversations")}),o.jsx("p",{className:"text-gray-400 text-sm mt-1",children:e("conversations.noConversationsHint")})]}):o.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"bg-gray-50 border-b border-gray-200",children:[o.jsx("th",{className:"text-left px-4 py-3 text-xs font-semibold text-gray-500 uppercase",children:e("conversations.session")}),o.jsx("th",{className:"text-left px-4 py-3 text-xs font-semibold text-gray-500 uppercase",children:e("conversations.phone")}),o.jsx("th",{className:"text-center px-4 py-3 text-xs font-semibold text-gray-500 uppercase",children:e("conversations.aiMsgs")}),o.jsx("th",{className:"text-center px-4 py-3 text-xs font-semibold text-gray-500 uppercase",children:"Total"}),o.jsx("th",{className:"text-left px-4 py-3 text-xs font-semibold text-gray-500 uppercase",children:e("conversations.lastMessage")}),o.jsx("th",{className:"text-left px-4 py-3 text-xs font-semibold text-gray-500 uppercase",children:e("conversations.date")}),o.jsx("th",{className:"text-right px-4 py-3 text-xs font-semibold text-gray-500 uppercase"})]})}),o.jsx("tbody",{className:"divide-y divide-gray-100",children:t.map($=>o.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer",onClick:()=>j($.sessionId),children:[o.jsxs("td",{className:"px-4 py-3 text-sm font-medium text-gray-800",children:["#",$.sessionId]}),o.jsx("td",{className:"px-4 py-3 text-sm text-gray-600 font-mono",children:$.phone}),o.jsx("td",{className:"px-4 py-3 text-center",children:o.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-medium bg-purple-50 text-purple-700",children:[o.jsx(Un,{className:"w-3 h-3"})," ",$.ai_message_count]})}),o.jsx("td",{className:"px-4 py-3 text-center text-sm text-gray-500",children:$.total_messages}),o.jsx("td",{className:"px-4 py-3 text-sm text-gray-500 max-w-[200px] truncate",children:$.last_message}),o.jsx("td",{className:"px-4 py-3 text-sm text-gray-400",children:$.last_message_at?po(new Date($.last_message_at),{addSuffix:!0,locale:ua()}):"-"}),o.jsx("td",{className:"px-4 py-3 text-right",children:o.jsx(jp,{className:"w-4 h-4 text-gray-400"})})]},$.sessionId))})]})})]})}function nF(){const{t:e}=ze("learning"),[t,a]=S.useState("brain"),[r,l]=S.useState(null);return S.useEffect(()=>{gV().then(u=>l(u.stats)).catch(u=>console.error("Error loading learning stats:",u))},[]),o.jsxs("div",{className:"p-8",children:[o.jsxs("div",{className:"mb-6",children:[o.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:e("pageTitle")}),o.jsx("p",{className:"text-gray-500 mt-1",children:e("pageSubtitle")})]}),o.jsx("div",{className:"flex gap-1 mb-6 bg-gray-100 rounded-xl p-1 w-fit",children:YV.map(u=>{const d=u.icon;return o.jsxs("button",{onClick:()=>a(u.id),className:`flex items-center gap-2 px-4 py-2.5 rounded-lg text-sm font-medium transition ${t===u.id?"bg-white text-indigo-600 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:[o.jsx(d,{className:"w-4 h-4"}),e(u.labelKey)]},u.id)})}),t==="brain"&&o.jsx(QV,{}),t==="instructions"&&o.jsx(eF,{}),t==="bot-conversations"&&o.jsx(tF,{}),t==="dashboard"&&o.jsx(WV,{stats:r}),t==="pairs"&&o.jsx(ZV,{}),t==="prices"&&o.jsx(JV,{})]})}function sF({children:e}){return Lt(a=>a.isAuthenticated)?e:o.jsx(eu,{to:"/login",replace:!0})}function ys({children:e}){return Lt(a=>a.agent)?.role!=="supervisor"?o.jsx(eu,{to:"/dashboard",replace:!0}):e}function aF(){return o.jsxs(cS,{children:[o.jsx(Mt,{path:"/login",element:o.jsx(hC,{})}),o.jsxs(Mt,{path:"/",element:o.jsx(sF,{children:o.jsx(dC,{})}),children:[o.jsx(Mt,{index:!0,element:o.jsx(eu,{to:"/dashboard",replace:!0})}),o.jsx(Mt,{path:"dashboard",element:o.jsx(vz,{})}),o.jsx(Mt,{path:"conversations",element:o.jsx(NL,{})}),o.jsx(Mt,{path:"agents",element:o.jsx(ys,{children:o.jsx(pV,{})})}),o.jsx(Mt,{path:"departments",element:o.jsx(ys,{children:o.jsx(mV,{})})}),o.jsx(Mt,{path:"flows",element:o.jsx(ys,{children:o.jsx(RL,{})})}),o.jsx(Mt,{path:"flows/builder/:id?",element:o.jsx(ys,{children:o.jsx(QI,{})})}),o.jsx(Mt,{path:"logs",element:o.jsx(ys,{children:o.jsx(eV,{})})}),o.jsx(Mt,{path:"leads",element:o.jsx(ys,{children:o.jsx(oV,{})})}),o.jsx(Mt,{path:"analytics",element:o.jsx(ys,{children:o.jsx(fV,{})})}),o.jsx(Mt,{path:"monitor",element:o.jsx(ys,{children:o.jsx(hV,{})})}),o.jsx(Mt,{path:"learning",element:o.jsx(ys,{children:o.jsx(nF,{})})})]}),o.jsx(Mt,{path:"*",element:o.jsx(eu,{to:"/dashboard",replace:!0})})]})}lj.createRoot(document.getElementById("root")).render(o.jsx(Ir.StrictMode,{children:o.jsx(OS,{children:o.jsx(aF,{})})}));
