(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))i(c);new MutationObserver(c=>{for(const u of c)if(u.type==="childList")for(const f of u.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&i(f)}).observe(document,{childList:!0,subtree:!0});function s(c){const u={};return c.integrity&&(u.integrity=c.integrity),c.referrerPolicy&&(u.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?u.credentials="include":c.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function i(c){if(c.ep)return;c.ep=!0;const u=s(c);fetch(c.href,u)}})();function vh(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Sf={exports:{}},Hi={};var V0;function Nw(){if(V0)return Hi;V0=1;var t=Symbol.for("react.transitional.element"),a=Symbol.for("react.fragment");function s(i,c,u){var f=null;if(u!==void 0&&(f=""+u),c.key!==void 0&&(f=""+c.key),"key"in c){u={};for(var m in c)m!=="key"&&(u[m]=c[m])}else u=c;return c=u.ref,{$$typeof:t,type:i,key:f,ref:c!==void 0?c:null,props:u}}return Hi.Fragment=a,Hi.jsx=s,Hi.jsxs=s,Hi}var Y0;function jw(){return Y0||(Y0=1,Sf.exports=Nw()),Sf.exports}var l=jw(),Nf={exports:{}},Se={};var X0;function Ew(){if(X0)return Se;X0=1;var t=Symbol.for("react.transitional.element"),a=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),c=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),f=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),x=Symbol.for("react.activity"),b=Symbol.iterator;function S(z){return z===null||typeof z!="object"?null:(z=b&&z[b]||z["@@iterator"],typeof z=="function"?z:null)}var j={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A=Object.assign,N={};function E(z,Y,Z){this.props=z,this.context=Y,this.refs=N,this.updater=Z||j}E.prototype.isReactComponent={},E.prototype.setState=function(z,Y){if(typeof z!="object"&&typeof z!="function"&&z!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,z,Y,"setState")},E.prototype.forceUpdate=function(z){this.updater.enqueueForceUpdate(this,z,"forceUpdate")};function R(){}R.prototype=E.prototype;function C(z,Y,Z){this.props=z,this.context=Y,this.refs=N,this.updater=Z||j}var k=C.prototype=new R;k.constructor=C,A(k,E.prototype),k.isPureReactComponent=!0;var w=Array.isArray;function D(){}var M={H:null,A:null,T:null,S:null},V=Object.prototype.hasOwnProperty;function L(z,Y,Z){var ae=Z.ref;return{$$typeof:t,type:z,key:Y,ref:ae!==void 0?ae:null,props:Z}}function se(z,Y){return L(z.type,Y,z.props)}function Q(z){return typeof z=="object"&&z!==null&&z.$$typeof===t}function F(z){var Y={"=":"=0",":":"=2"};return"$"+z.replace(/[=:]/g,function(Z){return Y[Z]})}var te=/\/+/g;function U(z,Y){return typeof z=="object"&&z!==null&&z.key!=null?F(""+z.key):Y.toString(36)}function I(z){switch(z.status){case"fulfilled":return z.value;case"rejected":throw z.reason;default:switch(typeof z.status=="string"?z.then(D,D):(z.status="pending",z.then(function(Y){z.status==="pending"&&(z.status="fulfilled",z.value=Y)},function(Y){z.status==="pending"&&(z.status="rejected",z.reason=Y)})),z.status){case"fulfilled":return z.value;case"rejected":throw z.reason}}throw z}function O(z,Y,Z,ae,ue){var X=typeof z;(X==="undefined"||X==="boolean")&&(z=null);var le=!1;if(z===null)le=!0;else switch(X){case"bigint":case"string":case"number":le=!0;break;case"object":switch(z.$$typeof){case t:case a:le=!0;break;case y:return le=z._init,O(le(z._payload),Y,Z,ae,ue)}}if(le)return ue=ue(z),le=ae===""?"."+U(z,0):ae,w(ue)?(Z="",le!=null&&(Z=le.replace(te,"$&/")+"/"),O(ue,Y,Z,"",function(we){return we})):ue!=null&&(Q(ue)&&(ue=se(ue,Z+(ue.key==null||z&&z.key===ue.key?"":(""+ue.key).replace(te,"$&/")+"/")+le)),Y.push(ue)),1;le=0;var ce=ae===""?".":ae+":";if(w(z))for(var de=0;de<z.length;de++)ae=z[de],X=ce+U(ae,de),le+=O(ae,Y,Z,X,ue);else if(de=S(z),typeof de=="function")for(z=de.call(z),de=0;!(ae=z.next()).done;)ae=ae.value,X=ce+U(ae,de++),le+=O(ae,Y,Z,X,ue);else if(X==="object"){if(typeof z.then=="function")return O(I(z),Y,Z,ae,ue);throw Y=String(z),Error("Objects are not valid as a React child (found: "+(Y==="[object Object]"?"object with keys {"+Object.keys(z).join(", ")+"}":Y)+"). If you meant to render a collection of children, use an array instead.")}return le}function B(z,Y,Z){if(z==null)return z;var ae=[],ue=0;return O(z,ae,"","",function(X){return Y.call(Z,X,ue++)}),ae}function q(z){if(z._status===-1){var Y=z._result;Y=Y(),Y.then(function(Z){(z._status===0||z._status===-1)&&(z._status=1,z._result=Z)},function(Z){(z._status===0||z._status===-1)&&(z._status=2,z._result=Z)}),z._status===-1&&(z._status=0,z._result=Y)}if(z._status===1)return z._result.default;throw z._result}var H=typeof reportError=="function"?reportError:function(z){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Y=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof z=="object"&&z!==null&&typeof z.message=="string"?String(z.message):String(z),error:z});if(!window.dispatchEvent(Y))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",z);return}console.error(z)},W={map:B,forEach:function(z,Y,Z){B(z,function(){Y.apply(this,arguments)},Z)},count:function(z){var Y=0;return B(z,function(){Y++}),Y},toArray:function(z){return B(z,function(Y){return Y})||[]},only:function(z){if(!Q(z))throw Error("React.Children.only expected to receive a single React element child.");return z}};return Se.Activity=x,Se.Children=W,Se.Component=E,Se.Fragment=s,Se.Profiler=c,Se.PureComponent=C,Se.StrictMode=i,Se.Suspense=p,Se.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=M,Se.__COMPILER_RUNTIME={__proto__:null,c:function(z){return M.H.useMemoCache(z)}},Se.cache=function(z){return function(){return z.apply(null,arguments)}},Se.cacheSignal=function(){return null},Se.cloneElement=function(z,Y,Z){if(z==null)throw Error("The argument must be a React element, but you passed "+z+".");var ae=A({},z.props),ue=z.key;if(Y!=null)for(X in Y.key!==void 0&&(ue=""+Y.key),Y)!V.call(Y,X)||X==="key"||X==="__self"||X==="__source"||X==="ref"&&Y.ref===void 0||(ae[X]=Y[X]);var X=arguments.length-2;if(X===1)ae.children=Z;else if(1<X){for(var le=Array(X),ce=0;ce<X;ce++)le[ce]=arguments[ce+2];ae.children=le}return L(z.type,ue,ae)},Se.createContext=function(z){return z={$$typeof:f,_currentValue:z,_currentValue2:z,_threadCount:0,Provider:null,Consumer:null},z.Provider=z,z.Consumer={$$typeof:u,_context:z},z},Se.createElement=function(z,Y,Z){var ae,ue={},X=null;if(Y!=null)for(ae in Y.key!==void 0&&(X=""+Y.key),Y)V.call(Y,ae)&&ae!=="key"&&ae!=="__self"&&ae!=="__source"&&(ue[ae]=Y[ae]);var le=arguments.length-2;if(le===1)ue.children=Z;else if(1<le){for(var ce=Array(le),de=0;de<le;de++)ce[de]=arguments[de+2];ue.children=ce}if(z&&z.defaultProps)for(ae in le=z.defaultProps,le)ue[ae]===void 0&&(ue[ae]=le[ae]);return L(z,X,ue)},Se.createRef=function(){return{current:null}},Se.forwardRef=function(z){return{$$typeof:m,render:z}},Se.isValidElement=Q,Se.lazy=function(z){return{$$typeof:y,_payload:{_status:-1,_result:z},_init:q}},Se.memo=function(z,Y){return{$$typeof:g,type:z,compare:Y===void 0?null:Y}},Se.startTransition=function(z){var Y=M.T,Z={};M.T=Z;try{var ae=z(),ue=M.S;ue!==null&&ue(Z,ae),typeof ae=="object"&&ae!==null&&typeof ae.then=="function"&&ae.then(D,H)}catch(X){H(X)}finally{Y!==null&&Z.types!==null&&(Y.types=Z.types),M.T=Y}},Se.unstable_useCacheRefresh=function(){return M.H.useCacheRefresh()},Se.use=function(z){return M.H.use(z)},Se.useActionState=function(z,Y,Z){return M.H.useActionState(z,Y,Z)},Se.useCallback=function(z,Y){return M.H.useCallback(z,Y)},Se.useContext=function(z){return M.H.useContext(z)},Se.useDebugValue=function(){},Se.useDeferredValue=function(z,Y){return M.H.useDeferredValue(z,Y)},Se.useEffect=function(z,Y){return M.H.useEffect(z,Y)},Se.useEffectEvent=function(z){return M.H.useEffectEvent(z)},Se.useId=function(){return M.H.useId()},Se.useImperativeHandle=function(z,Y,Z){return M.H.useImperativeHandle(z,Y,Z)},Se.useInsertionEffect=function(z,Y){return M.H.useInsertionEffect(z,Y)},Se.useLayoutEffect=function(z,Y){return M.H.useLayoutEffect(z,Y)},Se.useMemo=function(z,Y){return M.H.useMemo(z,Y)},Se.useOptimistic=function(z,Y){return M.H.useOptimistic(z,Y)},Se.useReducer=function(z,Y,Z){return M.H.useReducer(z,Y,Z)},Se.useRef=function(z){return M.H.useRef(z)},Se.useState=function(z){return M.H.useState(z)},Se.useSyncExternalStore=function(z,Y,Z){return M.H.useSyncExternalStore(z,Y,Z)},Se.useTransition=function(){return M.H.useTransition()},Se.version="19.2.3",Se}var G0;function io(){return G0||(G0=1,Nf.exports=Ew()),Nf.exports}var _=io();const br=vh(_);var jf={exports:{}},Li={},Ef={exports:{}},_f={};var I0;function _w(){return I0||(I0=1,(function(t){function a(O,B){var q=O.length;O.push(B);e:for(;0<q;){var H=q-1>>>1,W=O[H];if(0<c(W,B))O[H]=B,O[q]=W,q=H;else break e}}function s(O){return O.length===0?null:O[0]}function i(O){if(O.length===0)return null;var B=O[0],q=O.pop();if(q!==B){O[0]=q;e:for(var H=0,W=O.length,z=W>>>1;H<z;){var Y=2*(H+1)-1,Z=O[Y],ae=Y+1,ue=O[ae];if(0>c(Z,q))ae<W&&0>c(ue,Z)?(O[H]=ue,O[ae]=q,H=ae):(O[H]=Z,O[Y]=q,H=Y);else if(ae<W&&0>c(ue,q))O[H]=ue,O[ae]=q,H=ae;else break e}}return B}function c(O,B){var q=O.sortIndex-B.sortIndex;return q!==0?q:O.id-B.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;t.unstable_now=function(){return u.now()}}else{var f=Date,m=f.now();t.unstable_now=function(){return f.now()-m}}var p=[],g=[],y=1,x=null,b=3,S=!1,j=!1,A=!1,N=!1,E=typeof setTimeout=="function"?setTimeout:null,R=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;function k(O){for(var B=s(g);B!==null;){if(B.callback===null)i(g);else if(B.startTime<=O)i(g),B.sortIndex=B.expirationTime,a(p,B);else break;B=s(g)}}function w(O){if(A=!1,k(O),!j)if(s(p)!==null)j=!0,D||(D=!0,F());else{var B=s(g);B!==null&&I(w,B.startTime-O)}}var D=!1,M=-1,V=5,L=-1;function se(){return N?!0:!(t.unstable_now()-L<V)}function Q(){if(N=!1,D){var O=t.unstable_now();L=O;var B=!0;try{e:{j=!1,A&&(A=!1,R(M),M=-1),S=!0;var q=b;try{t:{for(k(O),x=s(p);x!==null&&!(x.expirationTime>O&&se());){var H=x.callback;if(typeof H=="function"){x.callback=null,b=x.priorityLevel;var W=H(x.expirationTime<=O);if(O=t.unstable_now(),typeof W=="function"){x.callback=W,k(O),B=!0;break t}x===s(p)&&i(p),k(O)}else i(p);x=s(p)}if(x!==null)B=!0;else{var z=s(g);z!==null&&I(w,z.startTime-O),B=!1}}break e}finally{x=null,b=q,S=!1}B=void 0}}finally{B?F():D=!1}}}var F;if(typeof C=="function")F=function(){C(Q)};else if(typeof MessageChannel<"u"){var te=new MessageChannel,U=te.port2;te.port1.onmessage=Q,F=function(){U.postMessage(null)}}else F=function(){E(Q,0)};function I(O,B){M=E(function(){O(t.unstable_now())},B)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(O){O.callback=null},t.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):V=0<O?Math.floor(1e3/O):5},t.unstable_getCurrentPriorityLevel=function(){return b},t.unstable_next=function(O){switch(b){case 1:case 2:case 3:var B=3;break;default:B=b}var q=b;b=B;try{return O()}finally{b=q}},t.unstable_requestPaint=function(){N=!0},t.unstable_runWithPriority=function(O,B){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var q=b;b=O;try{return B()}finally{b=q}},t.unstable_scheduleCallback=function(O,B,q){var H=t.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?H+q:H):q=H,O){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=q+W,O={id:y++,callback:B,priorityLevel:O,startTime:q,expirationTime:W,sortIndex:-1},q>H?(O.sortIndex=q,a(g,O),s(p)===null&&O===s(g)&&(A?(R(M),M=-1):A=!0,I(w,q-H))):(O.sortIndex=W,a(p,O),j||S||(j=!0,D||(D=!0,F()))),O},t.unstable_shouldYield=se,t.unstable_wrapCallback=function(O){var B=b;return function(){var q=b;b=B;try{return O.apply(this,arguments)}finally{b=q}}}})(_f)),_f}var P0;function Cw(){return P0||(P0=1,Ef.exports=_w()),Ef.exports}var Cf={exports:{}},St={};var Z0;function Tw(){if(Z0)return St;Z0=1;var t=io();function a(p){var g="https://react.dev/errors/"+p;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)g+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+p+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(){}var i={d:{f:s,r:function(){throw Error(a(522))},D:s,C:s,L:s,m:s,X:s,S:s,M:s},p:0,findDOMNode:null},c=Symbol.for("react.portal");function u(p,g,y){var x=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:c,key:x==null?null:""+x,children:p,containerInfo:g,implementation:y}}var f=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(p,g){if(p==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return St.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,St.createPortal=function(p,g){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(a(299));return u(p,g,null,y)},St.flushSync=function(p){var g=f.T,y=i.p;try{if(f.T=null,i.p=2,p)return p()}finally{f.T=g,i.p=y,i.d.f()}},St.preconnect=function(p,g){typeof p=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,i.d.C(p,g))},St.prefetchDNS=function(p){typeof p=="string"&&i.d.D(p)},St.preinit=function(p,g){if(typeof p=="string"&&g&&typeof g.as=="string"){var y=g.as,x=m(y,g.crossOrigin),b=typeof g.integrity=="string"?g.integrity:void 0,S=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;y==="style"?i.d.S(p,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:x,integrity:b,fetchPriority:S}):y==="script"&&i.d.X(p,{crossOrigin:x,integrity:b,fetchPriority:S,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},St.preinitModule=function(p,g){if(typeof p=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var y=m(g.as,g.crossOrigin);i.d.M(p,{crossOrigin:y,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&i.d.M(p)},St.preload=function(p,g){if(typeof p=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var y=g.as,x=m(y,g.crossOrigin);i.d.L(p,y,{crossOrigin:x,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},St.preloadModule=function(p,g){if(typeof p=="string")if(g){var y=m(g.as,g.crossOrigin);i.d.m(p,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:y,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else i.d.m(p)},St.requestFormReset=function(p){i.d.r(p)},St.unstable_batchedUpdates=function(p,g){return p(g)},St.useFormState=function(p,g,y){return f.H.useFormState(p,g,y)},St.useFormStatus=function(){return f.H.useHostTransitionStatus()},St.version="19.2.3",St}var Q0;function Ry(){if(Q0)return Cf.exports;Q0=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(a){console.error(a)}}return t(),Cf.exports=Tw(),Cf.exports}var F0;function Mw(){if(F0)return Li;F0=1;var t=Cw(),a=io(),s=Ry();function i(e){var n="https://react.dev/errors/"+e;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)n+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function c(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function u(e){var n=e,r=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,(n.flags&4098)!==0&&(r=n.return),e=n.return;while(e)}return n.tag===3?r:null}function f(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function m(e){if(e.tag===31){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function p(e){if(u(e)!==e)throw Error(i(188))}function g(e){var n=e.alternate;if(!n){if(n=u(e),n===null)throw Error(i(188));return n!==e?null:e}for(var r=e,o=n;;){var d=r.return;if(d===null)break;var h=d.alternate;if(h===null){if(o=d.return,o!==null){r=o;continue}break}if(d.child===h.child){for(h=d.child;h;){if(h===r)return p(d),e;if(h===o)return p(d),n;h=h.sibling}throw Error(i(188))}if(r.return!==o.return)r=d,o=h;else{for(var v=!1,T=d.child;T;){if(T===r){v=!0,r=d,o=h;break}if(T===o){v=!0,o=d,r=h;break}T=T.sibling}if(!v){for(T=h.child;T;){if(T===r){v=!0,r=h,o=d;break}if(T===o){v=!0,o=h,r=d;break}T=T.sibling}if(!v)throw Error(i(189))}}if(r.alternate!==o)throw Error(i(190))}if(r.tag!==3)throw Error(i(188));return r.stateNode.current===r?e:n}function y(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e;for(e=e.child;e!==null;){if(n=y(e),n!==null)return n;e=e.sibling}return null}var x=Object.assign,b=Symbol.for("react.element"),S=Symbol.for("react.transitional.element"),j=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),N=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),R=Symbol.for("react.consumer"),C=Symbol.for("react.context"),k=Symbol.for("react.forward_ref"),w=Symbol.for("react.suspense"),D=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),V=Symbol.for("react.lazy"),L=Symbol.for("react.activity"),se=Symbol.for("react.memo_cache_sentinel"),Q=Symbol.iterator;function F(e){return e===null||typeof e!="object"?null:(e=Q&&e[Q]||e["@@iterator"],typeof e=="function"?e:null)}var te=Symbol.for("react.client.reference");function U(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===te?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case A:return"Fragment";case E:return"Profiler";case N:return"StrictMode";case w:return"Suspense";case D:return"SuspenseList";case L:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case j:return"Portal";case C:return e.displayName||"Context";case R:return(e._context.displayName||"Context")+".Consumer";case k:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case M:return n=e.displayName||null,n!==null?n:U(e.type)||"Memo";case V:n=e._payload,e=e._init;try{return U(e(n))}catch{}}return null}var I=Array.isArray,O=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,B=s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,q={pending:!1,data:null,method:null,action:null},H=[],W=-1;function z(e){return{current:e}}function Y(e){0>W||(e.current=H[W],H[W]=null,W--)}function Z(e,n){W++,H[W]=e.current,e.current=n}var ae=z(null),ue=z(null),X=z(null),le=z(null);function ce(e,n){switch(Z(X,n),Z(ue,e),Z(ae,null),n.nodeType){case 9:case 11:e=(e=n.documentElement)&&(e=e.namespaceURI)?d0(e):0;break;default:if(e=n.tagName,n=n.namespaceURI)n=d0(n),e=f0(n,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}Y(ae),Z(ae,e)}function de(){Y(ae),Y(ue),Y(X)}function we(e){e.memoizedState!==null&&Z(le,e);var n=ae.current,r=f0(n,e.type);n!==r&&(Z(ue,e),Z(ae,r))}function ve(e){ue.current===e&&(Y(ae),Y(ue)),le.current===e&&(Y(le),Di._currentValue=q)}var pe,ge;function _e(e){if(pe===void 0)try{throw Error()}catch(r){var n=r.stack.trim().match(/\n( *(at )?)/);pe=n&&n[1]||"",ge=-1<r.stack.indexOf(`
    at`)?" (<anonymous>)":-1<r.stack.indexOf("@")?"@unknown:0:0":""}return`
`+pe+e+ge}var Te=!1;function me(e,n){if(!e||Te)return"";Te=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(n){var oe=function(){throw Error()};if(Object.defineProperty(oe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(oe,[])}catch(ne){var ee=ne}Reflect.construct(e,[],oe)}else{try{oe.call()}catch(ne){ee=ne}e.call(oe.prototype)}}else{try{throw Error()}catch(ne){ee=ne}(oe=e())&&typeof oe.catch=="function"&&oe.catch(function(){})}}catch(ne){if(ne&&ee&&typeof ne.stack=="string")return[ne.stack,ee.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var d=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");d&&d.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var h=o.DetermineComponentFrameRoot(),v=h[0],T=h[1];if(v&&T){var $=v.split(`
`),J=T.split(`
`);for(d=o=0;o<$.length&&!$[o].includes("DetermineComponentFrameRoot");)o++;for(;d<J.length&&!J[d].includes("DetermineComponentFrameRoot");)d++;if(o===$.length||d===J.length)for(o=$.length-1,d=J.length-1;1<=o&&0<=d&&$[o]!==J[d];)d--;for(;1<=o&&0<=d;o--,d--)if($[o]!==J[d]){if(o!==1||d!==1)do if(o--,d--,0>d||$[o]!==J[d]){var re=`
`+$[o].replace(" at new "," at ");return e.displayName&&re.includes("<anonymous>")&&(re=re.replace("<anonymous>",e.displayName)),re}while(1<=o&&0<=d);break}}}finally{Te=!1,Error.prepareStackTrace=r}return(r=e?e.displayName||e.name:"")?_e(r):""}function qe(e,n){switch(e.tag){case 26:case 27:case 5:return _e(e.type);case 16:return _e("Lazy");case 13:return e.child!==n&&n!==null?_e("Suspense Fallback"):_e("Suspense");case 19:return _e("SuspenseList");case 0:case 15:return me(e.type,!1);case 11:return me(e.type.render,!1);case 1:return me(e.type,!0);case 31:return _e("Activity");default:return""}}function vt(e){try{var n="",r=null;do n+=qe(e,r),r=e,e=e.return;while(e);return n}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}var ut=Object.prototype.hasOwnProperty,Ct=t.unstable_scheduleCallback,Ft=t.unstable_cancelCallback,vn=t.unstable_shouldYield,On=t.unstable_requestPaint,et=t.unstable_now,fa=t.unstable_getCurrentPriorityLevel,pt=t.unstable_ImmediatePriority,ln=t.unstable_UserBlockingPriority,cn=t.unstable_NormalPriority,Yr=t.unstable_LowPriority,Ms=t.unstable_IdlePriority,ru=t.log,iu=t.unstable_setDisableYieldValue,Za=null,Nt=null;function wn(e){if(typeof ru=="function"&&iu(e),Nt&&typeof Nt.setStrictMode=="function")try{Nt.setStrictMode(Za,e)}catch{}}var jt=Math.clz32?Math.clz32:cu,ou=Math.log,lu=Math.LN2;function cu(e){return e>>>=0,e===0?32:31-(ou(e)/lu|0)|0}var As=256,ks=262144,Rs=4194304;function Bn(e){var n=e&42;if(n!==0)return n;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Ds(e,n,r){var o=e.pendingLanes;if(o===0)return 0;var d=0,h=e.suspendedLanes,v=e.pingedLanes;e=e.warmLanes;var T=o&134217727;return T!==0?(o=T&~h,o!==0?d=Bn(o):(v&=T,v!==0?d=Bn(v):r||(r=T&~e,r!==0&&(d=Bn(r))))):(T=o&~h,T!==0?d=Bn(T):v!==0?d=Bn(v):r||(r=o&~e,r!==0&&(d=Bn(r)))),d===0?0:n!==0&&n!==d&&(n&h)===0&&(h=d&-d,r=n&-n,h>=r||h===32&&(r&4194048)!==0)?n:d}function Qa(e,n){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&n)===0}function uu(e,n){switch(e){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function vo(){var e=Rs;return Rs<<=1,(Rs&62914560)===0&&(Rs=4194304),e}function Xr(e){for(var n=[],r=0;31>r;r++)n.push(e);return n}function Fa(e,n){e.pendingLanes|=n,n!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function du(e,n,r,o,d,h){var v=e.pendingLanes;e.pendingLanes=r,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=r,e.entangledLanes&=r,e.errorRecoveryDisabledLanes&=r,e.shellSuspendCounter=0;var T=e.entanglements,$=e.expirationTimes,J=e.hiddenUpdates;for(r=v&~r;0<r;){var re=31-jt(r),oe=1<<re;T[re]=0,$[re]=-1;var ee=J[re];if(ee!==null)for(J[re]=null,re=0;re<ee.length;re++){var ne=ee[re];ne!==null&&(ne.lane&=-536870913)}r&=~oe}o!==0&&wo(e,o,0),h!==0&&d===0&&e.tag!==0&&(e.suspendedLanes|=h&~(v&~n))}function wo(e,n,r){e.pendingLanes|=n,e.suspendedLanes&=~n;var o=31-jt(n);e.entangledLanes|=n,e.entanglements[o]=e.entanglements[o]|1073741824|r&261930}function So(e,n){var r=e.entangledLanes|=n;for(e=e.entanglements;r;){var o=31-jt(r),d=1<<o;d&n|e[o]&n&&(e[o]|=n),r&=~d}}function No(e,n){var r=n&-n;return r=(r&42)!==0?1:Gr(r),(r&(e.suspendedLanes|n))!==0?0:r}function Gr(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Ir(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function jo(){var e=B.p;return e!==0?e:(e=window.event,e===void 0?32:O0(e.type))}function Eo(e,n){var r=B.p;try{return B.p=e,n()}finally{B.p=r}}var Sn=Math.random().toString(36).slice(2),dt="__reactFiber$"+Sn,wt="__reactProps$"+Sn,Hn="__reactContainer$"+Sn,zs="__reactEvents$"+Sn,_o="__reactListeners$"+Sn,fu="__reactHandles$"+Sn,Co="__reactResources$"+Sn,Wa="__reactMarker$"+Sn;function Pr(e){delete e[dt],delete e[wt],delete e[zs],delete e[_o],delete e[fu]}function ha(e){var n=e[dt];if(n)return n;for(var r=e.parentNode;r;){if(n=r[Hn]||r[dt]){if(r=n.alternate,n.child!==null||r!==null&&r.child!==null)for(e=b0(e);e!==null;){if(r=e[dt])return r;e=b0(e)}return n}e=r,r=e.parentNode}return null}function ma(e){if(e=e[dt]||e[Hn]){var n=e.tag;if(n===5||n===6||n===13||n===31||n===26||n===27||n===3)return e}return null}function pa(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e.stateNode;throw Error(i(33))}function ga(e){var n=e[Co];return n||(n=e[Co]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function at(e){e[Wa]=!0}var To=new Set,Mo={};function Ln(e,n){xa(e,n),xa(e+"Capture",n)}function xa(e,n){for(Mo[e]=n,e=0;e<n.length;e++)To.add(n[e])}var hu=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Zr={},Ao={};function mu(e){return ut.call(Ao,e)?!0:ut.call(Zr,e)?!1:hu.test(e)?Ao[e]=!0:(Zr[e]=!0,!1)}function Os(e,n,r){if(mu(n))if(r===null)e.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":e.removeAttribute(n);return;case"boolean":var o=n.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){e.removeAttribute(n);return}}e.setAttribute(n,""+r)}}function Bs(e,n,r){if(r===null)e.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttribute(n,""+r)}}function un(e,n,r,o){if(o===null)e.removeAttribute(r);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(r);return}e.setAttributeNS(n,r,""+o)}}function Tt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function ko(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function pu(e,n,r){var o=Object.getOwnPropertyDescriptor(e.constructor.prototype,n);if(!e.hasOwnProperty(n)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var d=o.get,h=o.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return d.call(this)},set:function(v){r=""+v,h.call(this,v)}}),Object.defineProperty(e,n,{enumerable:o.enumerable}),{getValue:function(){return r},setValue:function(v){r=""+v},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function Hs(e){if(!e._valueTracker){var n=ko(e)?"checked":"value";e._valueTracker=pu(e,n,""+e[n])}}function Ro(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var r=n.getValue(),o="";return e&&(o=ko(e)?e.checked?"true":"false":e.value),e=o,e!==r?(n.setValue(e),!0):!1}function Ka(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var gu=/[\n"\\]/g;function Mt(e){return e.replace(gu,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function Ja(e,n,r,o,d,h,v,T){e.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?e.type=v:e.removeAttribute("type"),n!=null?v==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+Tt(n)):e.value!==""+Tt(n)&&(e.value=""+Tt(n)):v!=="submit"&&v!=="reset"||e.removeAttribute("value"),n!=null?Qr(e,v,Tt(n)):r!=null?Qr(e,v,Tt(r)):o!=null&&e.removeAttribute("value"),d==null&&h!=null&&(e.defaultChecked=!!h),d!=null&&(e.checked=d&&typeof d!="function"&&typeof d!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?e.name=""+Tt(T):e.removeAttribute("name")}function Do(e,n,r,o,d,h,v,T){if(h!=null&&typeof h!="function"&&typeof h!="symbol"&&typeof h!="boolean"&&(e.type=h),n!=null||r!=null){if(!(h!=="submit"&&h!=="reset"||n!=null)){Hs(e);return}r=r!=null?""+Tt(r):"",n=n!=null?""+Tt(n):r,T||n===e.value||(e.value=n),e.defaultValue=n}o=o??d,o=typeof o!="function"&&typeof o!="symbol"&&!!o,e.checked=T?e.checked:!!o,e.defaultChecked=!!o,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(e.name=v),Hs(e)}function Qr(e,n,r){n==="number"&&Ka(e.ownerDocument)===e||e.defaultValue===""+r||(e.defaultValue=""+r)}function Un(e,n,r,o){if(e=e.options,n){n={};for(var d=0;d<r.length;d++)n["$"+r[d]]=!0;for(r=0;r<e.length;r++)d=n.hasOwnProperty("$"+e[r].value),e[r].selected!==d&&(e[r].selected=d),d&&o&&(e[r].defaultSelected=!0)}else{for(r=""+Tt(r),n=null,d=0;d<e.length;d++){if(e[d].value===r){e[d].selected=!0,o&&(e[d].defaultSelected=!0);return}n!==null||e[d].disabled||(n=e[d])}n!==null&&(n.selected=!0)}}function im(e,n,r){if(n!=null&&(n=""+Tt(n),n!==e.value&&(e.value=n),r==null)){e.defaultValue!==n&&(e.defaultValue=n);return}e.defaultValue=r!=null?""+Tt(r):""}function om(e,n,r,o){if(n==null){if(o!=null){if(r!=null)throw Error(i(92));if(I(o)){if(1<o.length)throw Error(i(93));o=o[0]}r=o}r==null&&(r=""),n=r}r=Tt(n),e.defaultValue=r,o=e.textContent,o===r&&o!==""&&o!==null&&(e.value=o),Hs(e)}function Ls(e,n){if(n){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=n;return}}e.textContent=n}var yv=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function lm(e,n,r){var o=n.indexOf("--")===0;r==null||typeof r=="boolean"||r===""?o?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="":o?e.setProperty(n,r):typeof r!="number"||r===0||yv.has(n)?n==="float"?e.cssFloat=r:e[n]=(""+r).trim():e[n]=r+"px"}function cm(e,n,r){if(n!=null&&typeof n!="object")throw Error(i(62));if(e=e.style,r!=null){for(var o in r)!r.hasOwnProperty(o)||n!=null&&n.hasOwnProperty(o)||(o.indexOf("--")===0?e.setProperty(o,""):o==="float"?e.cssFloat="":e[o]="");for(var d in n)o=n[d],n.hasOwnProperty(d)&&r[d]!==o&&lm(e,d,o)}else for(var h in n)n.hasOwnProperty(h)&&lm(e,h,n[h])}function xu(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var bv=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),vv=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function zo(e){return vv.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function $n(){}var yu=null;function bu(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Us=null,$s=null;function um(e){var n=ma(e);if(n&&(e=n.stateNode)){var r=e[wt]||null;e:switch(e=n.stateNode,n.type){case"input":if(Ja(e,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name),n=r.name,r.type==="radio"&&n!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll('input[name="'+Mt(""+n)+'"][type="radio"]'),n=0;n<r.length;n++){var o=r[n];if(o!==e&&o.form===e.form){var d=o[wt]||null;if(!d)throw Error(i(90));Ja(o,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name)}}for(n=0;n<r.length;n++)o=r[n],o.form===e.form&&Ro(o)}break e;case"textarea":im(e,r.value,r.defaultValue);break e;case"select":n=r.value,n!=null&&Un(e,!!r.multiple,n,!1)}}}var vu=!1;function dm(e,n,r){if(vu)return e(n,r);vu=!0;try{var o=e(n);return o}finally{if(vu=!1,(Us!==null||$s!==null)&&(wl(),Us&&(n=Us,e=$s,$s=Us=null,um(n),e)))for(n=0;n<e.length;n++)um(e[n])}}function Fr(e,n){var r=e.stateNode;if(r===null)return null;var o=r[wt]||null;if(o===null)return null;r=o[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(e=e.type,o=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!o;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(i(231,n,typeof r));return r}var qn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),wu=!1;if(qn)try{var Wr={};Object.defineProperty(Wr,"passive",{get:function(){wu=!0}}),window.addEventListener("test",Wr,Wr),window.removeEventListener("test",Wr,Wr)}catch{wu=!1}var ya=null,Su=null,Oo=null;function fm(){if(Oo)return Oo;var e,n=Su,r=n.length,o,d="value"in ya?ya.value:ya.textContent,h=d.length;for(e=0;e<r&&n[e]===d[e];e++);var v=r-e;for(o=1;o<=v&&n[r-o]===d[h-o];o++);return Oo=d.slice(e,1<o?1-o:void 0)}function Bo(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function Ho(){return!0}function hm(){return!1}function At(e){function n(r,o,d,h,v){this._reactName=r,this._targetInst=d,this.type=o,this.nativeEvent=h,this.target=v,this.currentTarget=null;for(var T in e)e.hasOwnProperty(T)&&(r=e[T],this[T]=r?r(h):h[T]);return this.isDefaultPrevented=(h.defaultPrevented!=null?h.defaultPrevented:h.returnValue===!1)?Ho:hm,this.isPropagationStopped=hm,this}return x(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Ho)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Ho)},persist:function(){},isPersistent:Ho}),n}var es={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Lo=At(es),Kr=x({},es,{view:0,detail:0}),wv=At(Kr),Nu,ju,Jr,Uo=x({},Kr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_u,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Jr&&(Jr&&e.type==="mousemove"?(Nu=e.screenX-Jr.screenX,ju=e.screenY-Jr.screenY):ju=Nu=0,Jr=e),Nu)},movementY:function(e){return"movementY"in e?e.movementY:ju}}),mm=At(Uo),Sv=x({},Uo,{dataTransfer:0}),Nv=At(Sv),jv=x({},Kr,{relatedTarget:0}),Eu=At(jv),Ev=x({},es,{animationName:0,elapsedTime:0,pseudoElement:0}),_v=At(Ev),Cv=x({},es,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Tv=At(Cv),Mv=x({},es,{data:0}),pm=At(Mv),Av={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kv={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Rv={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Dv(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=Rv[e])?!!n[e]:!1}function _u(){return Dv}var zv=x({},Kr,{key:function(e){if(e.key){var n=Av[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=Bo(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?kv[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_u,charCode:function(e){return e.type==="keypress"?Bo(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Bo(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Ov=At(zv),Bv=x({},Uo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),gm=At(Bv),Hv=x({},Kr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_u}),Lv=At(Hv),Uv=x({},es,{propertyName:0,elapsedTime:0,pseudoElement:0}),$v=At(Uv),qv=x({},Uo,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Vv=At(qv),Yv=x({},es,{newState:0,oldState:0}),Xv=At(Yv),Gv=[9,13,27,32],Cu=qn&&"CompositionEvent"in window,ei=null;qn&&"documentMode"in document&&(ei=document.documentMode);var Iv=qn&&"TextEvent"in window&&!ei,xm=qn&&(!Cu||ei&&8<ei&&11>=ei),ym=" ",bm=!1;function vm(e,n){switch(e){case"keyup":return Gv.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function wm(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var qs=!1;function Pv(e,n){switch(e){case"compositionend":return wm(n);case"keypress":return n.which!==32?null:(bm=!0,ym);case"textInput":return e=n.data,e===ym&&bm?null:e;default:return null}}function Zv(e,n){if(qs)return e==="compositionend"||!Cu&&vm(e,n)?(e=fm(),Oo=Su=ya=null,qs=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return xm&&n.locale!=="ko"?null:n.data;default:return null}}var Qv={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Sm(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!Qv[e.type]:n==="textarea"}function Nm(e,n,r,o){Us?$s?$s.push(o):$s=[o]:Us=o,n=Tl(n,"onChange"),0<n.length&&(r=new Lo("onChange","change",null,r,o),e.push({event:r,listeners:n}))}var ti=null,ni=null;function Fv(e){r0(e,0)}function $o(e){var n=pa(e);if(Ro(n))return e}function jm(e,n){if(e==="change")return n}var Em=!1;if(qn){var Tu;if(qn){var Mu="oninput"in document;if(!Mu){var _m=document.createElement("div");_m.setAttribute("oninput","return;"),Mu=typeof _m.oninput=="function"}Tu=Mu}else Tu=!1;Em=Tu&&(!document.documentMode||9<document.documentMode)}function Cm(){ti&&(ti.detachEvent("onpropertychange",Tm),ni=ti=null)}function Tm(e){if(e.propertyName==="value"&&$o(ni)){var n=[];Nm(n,ni,e,bu(e)),dm(Fv,n)}}function Wv(e,n,r){e==="focusin"?(Cm(),ti=n,ni=r,ti.attachEvent("onpropertychange",Tm)):e==="focusout"&&Cm()}function Kv(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return $o(ni)}function Jv(e,n){if(e==="click")return $o(n)}function e2(e,n){if(e==="input"||e==="change")return $o(n)}function t2(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var Lt=typeof Object.is=="function"?Object.is:t2;function ai(e,n){if(Lt(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var r=Object.keys(e),o=Object.keys(n);if(r.length!==o.length)return!1;for(o=0;o<r.length;o++){var d=r[o];if(!ut.call(n,d)||!Lt(e[d],n[d]))return!1}return!0}function Mm(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Am(e,n){var r=Mm(e);e=0;for(var o;r;){if(r.nodeType===3){if(o=e+r.textContent.length,e<=n&&o>=n)return{node:r,offset:n-e};e=o}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Mm(r)}}function km(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?km(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function Rm(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var n=Ka(e.document);n instanceof e.HTMLIFrameElement;){try{var r=typeof n.contentWindow.location.href=="string"}catch{r=!1}if(r)e=n.contentWindow;else break;n=Ka(e.document)}return n}function Au(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}var n2=qn&&"documentMode"in document&&11>=document.documentMode,Vs=null,ku=null,si=null,Ru=!1;function Dm(e,n,r){var o=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Ru||Vs==null||Vs!==Ka(o)||(o=Vs,"selectionStart"in o&&Au(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),si&&ai(si,o)||(si=o,o=Tl(ku,"onSelect"),0<o.length&&(n=new Lo("onSelect","select",null,n,r),e.push({event:n,listeners:o}),n.target=Vs)))}function ts(e,n){var r={};return r[e.toLowerCase()]=n.toLowerCase(),r["Webkit"+e]="webkit"+n,r["Moz"+e]="moz"+n,r}var Ys={animationend:ts("Animation","AnimationEnd"),animationiteration:ts("Animation","AnimationIteration"),animationstart:ts("Animation","AnimationStart"),transitionrun:ts("Transition","TransitionRun"),transitionstart:ts("Transition","TransitionStart"),transitioncancel:ts("Transition","TransitionCancel"),transitionend:ts("Transition","TransitionEnd")},Du={},zm={};qn&&(zm=document.createElement("div").style,"AnimationEvent"in window||(delete Ys.animationend.animation,delete Ys.animationiteration.animation,delete Ys.animationstart.animation),"TransitionEvent"in window||delete Ys.transitionend.transition);function ns(e){if(Du[e])return Du[e];if(!Ys[e])return e;var n=Ys[e],r;for(r in n)if(n.hasOwnProperty(r)&&r in zm)return Du[e]=n[r];return e}var Om=ns("animationend"),Bm=ns("animationiteration"),Hm=ns("animationstart"),a2=ns("transitionrun"),s2=ns("transitionstart"),r2=ns("transitioncancel"),Lm=ns("transitionend"),Um=new Map,zu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");zu.push("scrollEnd");function dn(e,n){Um.set(e,n),Ln(n,[e])}var qo=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Wt=[],Xs=0,Ou=0;function Vo(){for(var e=Xs,n=Ou=Xs=0;n<e;){var r=Wt[n];Wt[n++]=null;var o=Wt[n];Wt[n++]=null;var d=Wt[n];Wt[n++]=null;var h=Wt[n];if(Wt[n++]=null,o!==null&&d!==null){var v=o.pending;v===null?d.next=d:(d.next=v.next,v.next=d),o.pending=d}h!==0&&$m(r,d,h)}}function Yo(e,n,r,o){Wt[Xs++]=e,Wt[Xs++]=n,Wt[Xs++]=r,Wt[Xs++]=o,Ou|=o,e.lanes|=o,e=e.alternate,e!==null&&(e.lanes|=o)}function Bu(e,n,r,o){return Yo(e,n,r,o),Xo(e)}function as(e,n){return Yo(e,null,null,n),Xo(e)}function $m(e,n,r){e.lanes|=r;var o=e.alternate;o!==null&&(o.lanes|=r);for(var d=!1,h=e.return;h!==null;)h.childLanes|=r,o=h.alternate,o!==null&&(o.childLanes|=r),h.tag===22&&(e=h.stateNode,e===null||e._visibility&1||(d=!0)),e=h,h=h.return;return e.tag===3?(h=e.stateNode,d&&n!==null&&(d=31-jt(r),e=h.hiddenUpdates,o=e[d],o===null?e[d]=[n]:o.push(n),n.lane=r|536870912),h):null}function Xo(e){if(50<_i)throw _i=0,Gd=null,Error(i(185));for(var n=e.return;n!==null;)e=n,n=e.return;return e.tag===3?e.stateNode:null}var Gs={};function i2(e,n,r,o){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ut(e,n,r,o){return new i2(e,n,r,o)}function Hu(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Vn(e,n){var r=e.alternate;return r===null?(r=Ut(e.tag,n,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=n,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&65011712,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,n=e.dependencies,r.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r.refCleanup=e.refCleanup,r}function qm(e,n){e.flags&=65011714;var r=e.alternate;return r===null?(e.childLanes=0,e.lanes=n,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=r.childLanes,e.lanes=r.lanes,e.child=r.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=r.memoizedProps,e.memoizedState=r.memoizedState,e.updateQueue=r.updateQueue,e.type=r.type,n=r.dependencies,e.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),e}function Go(e,n,r,o,d,h){var v=0;if(o=e,typeof e=="function")Hu(e)&&(v=1);else if(typeof e=="string")v=dw(e,r,ae.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case L:return e=Ut(31,r,n,d),e.elementType=L,e.lanes=h,e;case A:return ss(r.children,d,h,n);case N:v=8,d|=24;break;case E:return e=Ut(12,r,n,d|2),e.elementType=E,e.lanes=h,e;case w:return e=Ut(13,r,n,d),e.elementType=w,e.lanes=h,e;case D:return e=Ut(19,r,n,d),e.elementType=D,e.lanes=h,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case C:v=10;break e;case R:v=9;break e;case k:v=11;break e;case M:v=14;break e;case V:v=16,o=null;break e}v=29,r=Error(i(130,e===null?"null":typeof e,"")),o=null}return n=Ut(v,r,n,d),n.elementType=e,n.type=o,n.lanes=h,n}function ss(e,n,r,o){return e=Ut(7,e,o,n),e.lanes=r,e}function Lu(e,n,r){return e=Ut(6,e,null,n),e.lanes=r,e}function Vm(e){var n=Ut(18,null,null,0);return n.stateNode=e,n}function Uu(e,n,r){return n=Ut(4,e.children!==null?e.children:[],e.key,n),n.lanes=r,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}var Ym=new WeakMap;function Kt(e,n){if(typeof e=="object"&&e!==null){var r=Ym.get(e);return r!==void 0?r:(n={value:e,source:n,stack:vt(n)},Ym.set(e,n),n)}return{value:e,source:n,stack:vt(n)}}var Is=[],Ps=0,Io=null,ri=0,Jt=[],en=0,ba=null,Nn=1,jn="";function Yn(e,n){Is[Ps++]=ri,Is[Ps++]=Io,Io=e,ri=n}function Xm(e,n,r){Jt[en++]=Nn,Jt[en++]=jn,Jt[en++]=ba,ba=e;var o=Nn;e=jn;var d=32-jt(o)-1;o&=~(1<<d),r+=1;var h=32-jt(n)+d;if(30<h){var v=d-d%5;h=(o&(1<<v)-1).toString(32),o>>=v,d-=v,Nn=1<<32-jt(n)+d|r<<d|o,jn=h+e}else Nn=1<<h|r<<d|o,jn=e}function $u(e){e.return!==null&&(Yn(e,1),Xm(e,1,0))}function qu(e){for(;e===Io;)Io=Is[--Ps],Is[Ps]=null,ri=Is[--Ps],Is[Ps]=null;for(;e===ba;)ba=Jt[--en],Jt[en]=null,jn=Jt[--en],Jt[en]=null,Nn=Jt[--en],Jt[en]=null}function Gm(e,n){Jt[en++]=Nn,Jt[en++]=jn,Jt[en++]=ba,Nn=n.id,jn=n.overflow,ba=e}var gt=null,Ie=null,De=!1,va=null,tn=!1,Vu=Error(i(519));function wa(e){var n=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw ii(Kt(n,e)),Vu}function Im(e){var n=e.stateNode,r=e.type,o=e.memoizedProps;switch(n[dt]=e,n[wt]=o,r){case"dialog":Ae("cancel",n),Ae("close",n);break;case"iframe":case"object":case"embed":Ae("load",n);break;case"video":case"audio":for(r=0;r<Ti.length;r++)Ae(Ti[r],n);break;case"source":Ae("error",n);break;case"img":case"image":case"link":Ae("error",n),Ae("load",n);break;case"details":Ae("toggle",n);break;case"input":Ae("invalid",n),Do(n,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0);break;case"select":Ae("invalid",n);break;case"textarea":Ae("invalid",n),om(n,o.value,o.defaultValue,o.children)}r=o.children,typeof r!="string"&&typeof r!="number"&&typeof r!="bigint"||n.textContent===""+r||o.suppressHydrationWarning===!0||c0(n.textContent,r)?(o.popover!=null&&(Ae("beforetoggle",n),Ae("toggle",n)),o.onScroll!=null&&Ae("scroll",n),o.onScrollEnd!=null&&Ae("scrollend",n),o.onClick!=null&&(n.onclick=$n),n=!0):n=!1,n||wa(e,!0)}function Pm(e){for(gt=e.return;gt;)switch(gt.tag){case 5:case 31:case 13:tn=!1;return;case 27:case 3:tn=!0;return;default:gt=gt.return}}function Zs(e){if(e!==gt)return!1;if(!De)return Pm(e),De=!0,!1;var n=e.tag,r;if((r=n!==3&&n!==27)&&((r=n===5)&&(r=e.type,r=!(r!=="form"&&r!=="button")||of(e.type,e.memoizedProps)),r=!r),r&&Ie&&wa(e),Pm(e),n===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(i(317));Ie=y0(e)}else if(n===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(i(317));Ie=y0(e)}else n===27?(n=Ie,Oa(e.type)?(e=ff,ff=null,Ie=e):Ie=n):Ie=gt?an(e.stateNode.nextSibling):null;return!0}function rs(){Ie=gt=null,De=!1}function Yu(){var e=va;return e!==null&&(zt===null?zt=e:zt.push.apply(zt,e),va=null),e}function ii(e){va===null?va=[e]:va.push(e)}var Xu=z(null),is=null,Xn=null;function Sa(e,n,r){Z(Xu,n._currentValue),n._currentValue=r}function Gn(e){e._currentValue=Xu.current,Y(Xu)}function Gu(e,n,r){for(;e!==null;){var o=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,o!==null&&(o.childLanes|=n)):o!==null&&(o.childLanes&n)!==n&&(o.childLanes|=n),e===r)break;e=e.return}}function Iu(e,n,r,o){var d=e.child;for(d!==null&&(d.return=e);d!==null;){var h=d.dependencies;if(h!==null){var v=d.child;h=h.firstContext;e:for(;h!==null;){var T=h;h=d;for(var $=0;$<n.length;$++)if(T.context===n[$]){h.lanes|=r,T=h.alternate,T!==null&&(T.lanes|=r),Gu(h.return,r,e),o||(v=null);break e}h=T.next}}else if(d.tag===18){if(v=d.return,v===null)throw Error(i(341));v.lanes|=r,h=v.alternate,h!==null&&(h.lanes|=r),Gu(v,r,e),v=null}else v=d.child;if(v!==null)v.return=d;else for(v=d;v!==null;){if(v===e){v=null;break}if(d=v.sibling,d!==null){d.return=v.return,v=d;break}v=v.return}d=v}}function Qs(e,n,r,o){e=null;for(var d=n,h=!1;d!==null;){if(!h){if((d.flags&524288)!==0)h=!0;else if((d.flags&262144)!==0)break}if(d.tag===10){var v=d.alternate;if(v===null)throw Error(i(387));if(v=v.memoizedProps,v!==null){var T=d.type;Lt(d.pendingProps.value,v.value)||(e!==null?e.push(T):e=[T])}}else if(d===le.current){if(v=d.alternate,v===null)throw Error(i(387));v.memoizedState.memoizedState!==d.memoizedState.memoizedState&&(e!==null?e.push(Di):e=[Di])}d=d.return}e!==null&&Iu(n,e,r,o),n.flags|=262144}function Po(e){for(e=e.firstContext;e!==null;){if(!Lt(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function os(e){is=e,Xn=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function xt(e){return Zm(is,e)}function Zo(e,n){return is===null&&os(e),Zm(e,n)}function Zm(e,n){var r=n._currentValue;if(n={context:n,memoizedValue:r,next:null},Xn===null){if(e===null)throw Error(i(308));Xn=n,e.dependencies={lanes:0,firstContext:n},e.flags|=524288}else Xn=Xn.next=n;return r}var o2=typeof AbortController<"u"?AbortController:function(){var e=[],n=this.signal={aborted:!1,addEventListener:function(r,o){e.push(o)}};this.abort=function(){n.aborted=!0,e.forEach(function(r){return r()})}},l2=t.unstable_scheduleCallback,c2=t.unstable_NormalPriority,st={$$typeof:C,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Pu(){return{controller:new o2,data:new Map,refCount:0}}function oi(e){e.refCount--,e.refCount===0&&l2(c2,function(){e.controller.abort()})}var li=null,Zu=0,Fs=0,Ws=null;function u2(e,n){if(li===null){var r=li=[];Zu=0,Fs=Wd(),Ws={status:"pending",value:void 0,then:function(o){r.push(o)}}}return Zu++,n.then(Qm,Qm),n}function Qm(){if(--Zu===0&&li!==null){Ws!==null&&(Ws.status="fulfilled");var e=li;li=null,Fs=0,Ws=null;for(var n=0;n<e.length;n++)(0,e[n])()}}function d2(e,n){var r=[],o={status:"pending",value:null,reason:null,then:function(d){r.push(d)}};return e.then(function(){o.status="fulfilled",o.value=n;for(var d=0;d<r.length;d++)(0,r[d])(n)},function(d){for(o.status="rejected",o.reason=d,d=0;d<r.length;d++)(0,r[d])(void 0)}),o}var Fm=O.S;O.S=function(e,n){Dg=et(),typeof n=="object"&&n!==null&&typeof n.then=="function"&&u2(e,n),Fm!==null&&Fm(e,n)};var ls=z(null);function Qu(){var e=ls.current;return e!==null?e:Ge.pooledCache}function Qo(e,n){n===null?Z(ls,ls.current):Z(ls,n.pool)}function Wm(){var e=Qu();return e===null?null:{parent:st._currentValue,pool:e}}var Ks=Error(i(460)),Fu=Error(i(474)),Fo=Error(i(542)),Wo={then:function(){}};function Km(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Jm(e,n,r){switch(r=e[r],r===void 0?e.push(n):r!==n&&(n.then($n,$n),n=r),n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,tp(e),e;default:if(typeof n.status=="string")n.then($n,$n);else{if(e=Ge,e!==null&&100<e.shellSuspendCounter)throw Error(i(482));e=n,e.status="pending",e.then(function(o){if(n.status==="pending"){var d=n;d.status="fulfilled",d.value=o}},function(o){if(n.status==="pending"){var d=n;d.status="rejected",d.reason=o}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,tp(e),e}throw us=n,Ks}}function cs(e){try{var n=e._init;return n(e._payload)}catch(r){throw r!==null&&typeof r=="object"&&typeof r.then=="function"?(us=r,Ks):r}}var us=null;function ep(){if(us===null)throw Error(i(459));var e=us;return us=null,e}function tp(e){if(e===Ks||e===Fo)throw Error(i(483))}var Js=null,ci=0;function Ko(e){var n=ci;return ci+=1,Js===null&&(Js=[]),Jm(Js,e,n)}function ui(e,n){n=n.props.ref,e.ref=n!==void 0?n:null}function Jo(e,n){throw n.$$typeof===b?Error(i(525)):(e=Object.prototype.toString.call(n),Error(i(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)))}function np(e){function n(P,G){if(e){var K=P.deletions;K===null?(P.deletions=[G],P.flags|=16):K.push(G)}}function r(P,G){if(!e)return null;for(;G!==null;)n(P,G),G=G.sibling;return null}function o(P){for(var G=new Map;P!==null;)P.key!==null?G.set(P.key,P):G.set(P.index,P),P=P.sibling;return G}function d(P,G){return P=Vn(P,G),P.index=0,P.sibling=null,P}function h(P,G,K){return P.index=K,e?(K=P.alternate,K!==null?(K=K.index,K<G?(P.flags|=67108866,G):K):(P.flags|=67108866,G)):(P.flags|=1048576,G)}function v(P){return e&&P.alternate===null&&(P.flags|=67108866),P}function T(P,G,K,ie){return G===null||G.tag!==6?(G=Lu(K,P.mode,ie),G.return=P,G):(G=d(G,K),G.return=P,G)}function $(P,G,K,ie){var ye=K.type;return ye===A?re(P,G,K.props.children,ie,K.key):G!==null&&(G.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===V&&cs(ye)===G.type)?(G=d(G,K.props),ui(G,K),G.return=P,G):(G=Go(K.type,K.key,K.props,null,P.mode,ie),ui(G,K),G.return=P,G)}function J(P,G,K,ie){return G===null||G.tag!==4||G.stateNode.containerInfo!==K.containerInfo||G.stateNode.implementation!==K.implementation?(G=Uu(K,P.mode,ie),G.return=P,G):(G=d(G,K.children||[]),G.return=P,G)}function re(P,G,K,ie,ye){return G===null||G.tag!==7?(G=ss(K,P.mode,ie,ye),G.return=P,G):(G=d(G,K),G.return=P,G)}function oe(P,G,K){if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return G=Lu(""+G,P.mode,K),G.return=P,G;if(typeof G=="object"&&G!==null){switch(G.$$typeof){case S:return K=Go(G.type,G.key,G.props,null,P.mode,K),ui(K,G),K.return=P,K;case j:return G=Uu(G,P.mode,K),G.return=P,G;case V:return G=cs(G),oe(P,G,K)}if(I(G)||F(G))return G=ss(G,P.mode,K,null),G.return=P,G;if(typeof G.then=="function")return oe(P,Ko(G),K);if(G.$$typeof===C)return oe(P,Zo(P,G),K);Jo(P,G)}return null}function ee(P,G,K,ie){var ye=G!==null?G.key:null;if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return ye!==null?null:T(P,G,""+K,ie);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case S:return K.key===ye?$(P,G,K,ie):null;case j:return K.key===ye?J(P,G,K,ie):null;case V:return K=cs(K),ee(P,G,K,ie)}if(I(K)||F(K))return ye!==null?null:re(P,G,K,ie,null);if(typeof K.then=="function")return ee(P,G,Ko(K),ie);if(K.$$typeof===C)return ee(P,G,Zo(P,K),ie);Jo(P,K)}return null}function ne(P,G,K,ie,ye){if(typeof ie=="string"&&ie!==""||typeof ie=="number"||typeof ie=="bigint")return P=P.get(K)||null,T(G,P,""+ie,ye);if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case S:return P=P.get(ie.key===null?K:ie.key)||null,$(G,P,ie,ye);case j:return P=P.get(ie.key===null?K:ie.key)||null,J(G,P,ie,ye);case V:return ie=cs(ie),ne(P,G,K,ie,ye)}if(I(ie)||F(ie))return P=P.get(K)||null,re(G,P,ie,ye,null);if(typeof ie.then=="function")return ne(P,G,K,Ko(ie),ye);if(ie.$$typeof===C)return ne(P,G,K,Zo(G,ie),ye);Jo(G,ie)}return null}function fe(P,G,K,ie){for(var ye=null,Oe=null,he=G,Ee=G=0,Re=null;he!==null&&Ee<K.length;Ee++){he.index>Ee?(Re=he,he=null):Re=he.sibling;var Be=ee(P,he,K[Ee],ie);if(Be===null){he===null&&(he=Re);break}e&&he&&Be.alternate===null&&n(P,he),G=h(Be,G,Ee),Oe===null?ye=Be:Oe.sibling=Be,Oe=Be,he=Re}if(Ee===K.length)return r(P,he),De&&Yn(P,Ee),ye;if(he===null){for(;Ee<K.length;Ee++)he=oe(P,K[Ee],ie),he!==null&&(G=h(he,G,Ee),Oe===null?ye=he:Oe.sibling=he,Oe=he);return De&&Yn(P,Ee),ye}for(he=o(he);Ee<K.length;Ee++)Re=ne(he,P,Ee,K[Ee],ie),Re!==null&&(e&&Re.alternate!==null&&he.delete(Re.key===null?Ee:Re.key),G=h(Re,G,Ee),Oe===null?ye=Re:Oe.sibling=Re,Oe=Re);return e&&he.forEach(function($a){return n(P,$a)}),De&&Yn(P,Ee),ye}function be(P,G,K,ie){if(K==null)throw Error(i(151));for(var ye=null,Oe=null,he=G,Ee=G=0,Re=null,Be=K.next();he!==null&&!Be.done;Ee++,Be=K.next()){he.index>Ee?(Re=he,he=null):Re=he.sibling;var $a=ee(P,he,Be.value,ie);if($a===null){he===null&&(he=Re);break}e&&he&&$a.alternate===null&&n(P,he),G=h($a,G,Ee),Oe===null?ye=$a:Oe.sibling=$a,Oe=$a,he=Re}if(Be.done)return r(P,he),De&&Yn(P,Ee),ye;if(he===null){for(;!Be.done;Ee++,Be=K.next())Be=oe(P,Be.value,ie),Be!==null&&(G=h(Be,G,Ee),Oe===null?ye=Be:Oe.sibling=Be,Oe=Be);return De&&Yn(P,Ee),ye}for(he=o(he);!Be.done;Ee++,Be=K.next())Be=ne(he,P,Ee,Be.value,ie),Be!==null&&(e&&Be.alternate!==null&&he.delete(Be.key===null?Ee:Be.key),G=h(Be,G,Ee),Oe===null?ye=Be:Oe.sibling=Be,Oe=Be);return e&&he.forEach(function(Sw){return n(P,Sw)}),De&&Yn(P,Ee),ye}function Xe(P,G,K,ie){if(typeof K=="object"&&K!==null&&K.type===A&&K.key===null&&(K=K.props.children),typeof K=="object"&&K!==null){switch(K.$$typeof){case S:e:{for(var ye=K.key;G!==null;){if(G.key===ye){if(ye=K.type,ye===A){if(G.tag===7){r(P,G.sibling),ie=d(G,K.props.children),ie.return=P,P=ie;break e}}else if(G.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===V&&cs(ye)===G.type){r(P,G.sibling),ie=d(G,K.props),ui(ie,K),ie.return=P,P=ie;break e}r(P,G);break}else n(P,G);G=G.sibling}K.type===A?(ie=ss(K.props.children,P.mode,ie,K.key),ie.return=P,P=ie):(ie=Go(K.type,K.key,K.props,null,P.mode,ie),ui(ie,K),ie.return=P,P=ie)}return v(P);case j:e:{for(ye=K.key;G!==null;){if(G.key===ye)if(G.tag===4&&G.stateNode.containerInfo===K.containerInfo&&G.stateNode.implementation===K.implementation){r(P,G.sibling),ie=d(G,K.children||[]),ie.return=P,P=ie;break e}else{r(P,G);break}else n(P,G);G=G.sibling}ie=Uu(K,P.mode,ie),ie.return=P,P=ie}return v(P);case V:return K=cs(K),Xe(P,G,K,ie)}if(I(K))return fe(P,G,K,ie);if(F(K)){if(ye=F(K),typeof ye!="function")throw Error(i(150));return K=ye.call(K),be(P,G,K,ie)}if(typeof K.then=="function")return Xe(P,G,Ko(K),ie);if(K.$$typeof===C)return Xe(P,G,Zo(P,K),ie);Jo(P,K)}return typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint"?(K=""+K,G!==null&&G.tag===6?(r(P,G.sibling),ie=d(G,K),ie.return=P,P=ie):(r(P,G),ie=Lu(K,P.mode,ie),ie.return=P,P=ie),v(P)):r(P,G)}return function(P,G,K,ie){try{ci=0;var ye=Xe(P,G,K,ie);return Js=null,ye}catch(he){if(he===Ks||he===Fo)throw he;var Oe=Ut(29,he,null,P.mode);return Oe.lanes=ie,Oe.return=P,Oe}}}var ds=np(!0),ap=np(!1),Na=!1;function Wu(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ku(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function ja(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Ea(e,n,r){var o=e.updateQueue;if(o===null)return null;if(o=o.shared,(He&2)!==0){var d=o.pending;return d===null?n.next=n:(n.next=d.next,d.next=n),o.pending=n,n=Xo(e),$m(e,null,r),n}return Yo(e,o,n,r),Xo(e)}function di(e,n,r){if(n=n.updateQueue,n!==null&&(n=n.shared,(r&4194048)!==0)){var o=n.lanes;o&=e.pendingLanes,r|=o,n.lanes=r,So(e,r)}}function Ju(e,n){var r=e.updateQueue,o=e.alternate;if(o!==null&&(o=o.updateQueue,r===o)){var d=null,h=null;if(r=r.firstBaseUpdate,r!==null){do{var v={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};h===null?d=h=v:h=h.next=v,r=r.next}while(r!==null);h===null?d=h=n:h=h.next=n}else d=h=n;r={baseState:o.baseState,firstBaseUpdate:d,lastBaseUpdate:h,shared:o.shared,callbacks:o.callbacks},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=n:e.next=n,r.lastBaseUpdate=n}var ed=!1;function fi(){if(ed){var e=Ws;if(e!==null)throw e}}function hi(e,n,r,o){ed=!1;var d=e.updateQueue;Na=!1;var h=d.firstBaseUpdate,v=d.lastBaseUpdate,T=d.shared.pending;if(T!==null){d.shared.pending=null;var $=T,J=$.next;$.next=null,v===null?h=J:v.next=J,v=$;var re=e.alternate;re!==null&&(re=re.updateQueue,T=re.lastBaseUpdate,T!==v&&(T===null?re.firstBaseUpdate=J:T.next=J,re.lastBaseUpdate=$))}if(h!==null){var oe=d.baseState;v=0,re=J=$=null,T=h;do{var ee=T.lane&-536870913,ne=ee!==T.lane;if(ne?(ke&ee)===ee:(o&ee)===ee){ee!==0&&ee===Fs&&(ed=!0),re!==null&&(re=re.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});e:{var fe=e,be=T;ee=n;var Xe=r;switch(be.tag){case 1:if(fe=be.payload,typeof fe=="function"){oe=fe.call(Xe,oe,ee);break e}oe=fe;break e;case 3:fe.flags=fe.flags&-65537|128;case 0:if(fe=be.payload,ee=typeof fe=="function"?fe.call(Xe,oe,ee):fe,ee==null)break e;oe=x({},oe,ee);break e;case 2:Na=!0}}ee=T.callback,ee!==null&&(e.flags|=64,ne&&(e.flags|=8192),ne=d.callbacks,ne===null?d.callbacks=[ee]:ne.push(ee))}else ne={lane:ee,tag:T.tag,payload:T.payload,callback:T.callback,next:null},re===null?(J=re=ne,$=oe):re=re.next=ne,v|=ee;if(T=T.next,T===null){if(T=d.shared.pending,T===null)break;ne=T,T=ne.next,ne.next=null,d.lastBaseUpdate=ne,d.shared.pending=null}}while(!0);re===null&&($=oe),d.baseState=$,d.firstBaseUpdate=J,d.lastBaseUpdate=re,h===null&&(d.shared.lanes=0),Aa|=v,e.lanes=v,e.memoizedState=oe}}function sp(e,n){if(typeof e!="function")throw Error(i(191,e));e.call(n)}function rp(e,n){var r=e.callbacks;if(r!==null)for(e.callbacks=null,e=0;e<r.length;e++)sp(r[e],n)}var er=z(null),el=z(0);function ip(e,n){e=ea,Z(el,e),Z(er,n),ea=e|n.baseLanes}function td(){Z(el,ea),Z(er,er.current)}function nd(){ea=el.current,Y(er),Y(el)}var $t=z(null),nn=null;function _a(e){var n=e.alternate;Z(tt,tt.current&1),Z($t,e),nn===null&&(n===null||er.current!==null||n.memoizedState!==null)&&(nn=e)}function ad(e){Z(tt,tt.current),Z($t,e),nn===null&&(nn=e)}function op(e){e.tag===22?(Z(tt,tt.current),Z($t,e),nn===null&&(nn=e)):Ca()}function Ca(){Z(tt,tt.current),Z($t,$t.current)}function qt(e){Y($t),nn===e&&(nn=null),Y(tt)}var tt=z(0);function tl(e){for(var n=e;n!==null;){if(n.tag===13){var r=n.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||uf(r)||df(r)))return n}else if(n.tag===19&&(n.memoizedProps.revealOrder==="forwards"||n.memoizedProps.revealOrder==="backwards"||n.memoizedProps.revealOrder==="unstable_legacy-backwards"||n.memoizedProps.revealOrder==="together")){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var In=0,Ne=null,Ve=null,rt=null,nl=!1,tr=!1,fs=!1,al=0,mi=0,nr=null,f2=0;function Ke(){throw Error(i(321))}function sd(e,n){if(n===null)return!1;for(var r=0;r<n.length&&r<e.length;r++)if(!Lt(e[r],n[r]))return!1;return!0}function rd(e,n,r,o,d,h){return In=h,Ne=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,O.H=e===null||e.memoizedState===null?Xp:vd,fs=!1,h=r(o,d),fs=!1,tr&&(h=cp(n,r,o,d)),lp(e),h}function lp(e){O.H=xi;var n=Ve!==null&&Ve.next!==null;if(In=0,rt=Ve=Ne=null,nl=!1,mi=0,nr=null,n)throw Error(i(300));e===null||it||(e=e.dependencies,e!==null&&Po(e)&&(it=!0))}function cp(e,n,r,o){Ne=e;var d=0;do{if(tr&&(nr=null),mi=0,tr=!1,25<=d)throw Error(i(301));if(d+=1,rt=Ve=null,e.updateQueue!=null){var h=e.updateQueue;h.lastEffect=null,h.events=null,h.stores=null,h.memoCache!=null&&(h.memoCache.index=0)}O.H=Gp,h=n(r,o)}while(tr);return h}function h2(){var e=O.H,n=e.useState()[0];return n=typeof n.then=="function"?pi(n):n,e=e.useState()[0],(Ve!==null?Ve.memoizedState:null)!==e&&(Ne.flags|=1024),n}function id(){var e=al!==0;return al=0,e}function od(e,n,r){n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~r}function ld(e){if(nl){for(e=e.memoizedState;e!==null;){var n=e.queue;n!==null&&(n.pending=null),e=e.next}nl=!1}In=0,rt=Ve=Ne=null,tr=!1,mi=al=0,nr=null}function Et(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return rt===null?Ne.memoizedState=rt=e:rt=rt.next=e,rt}function nt(){if(Ve===null){var e=Ne.alternate;e=e!==null?e.memoizedState:null}else e=Ve.next;var n=rt===null?Ne.memoizedState:rt.next;if(n!==null)rt=n,Ve=e;else{if(e===null)throw Ne.alternate===null?Error(i(467)):Error(i(310));Ve=e,e={memoizedState:Ve.memoizedState,baseState:Ve.baseState,baseQueue:Ve.baseQueue,queue:Ve.queue,next:null},rt===null?Ne.memoizedState=rt=e:rt=rt.next=e}return rt}function sl(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function pi(e){var n=mi;return mi+=1,nr===null&&(nr=[]),e=Jm(nr,e,n),n=Ne,(rt===null?n.memoizedState:rt.next)===null&&(n=n.alternate,O.H=n===null||n.memoizedState===null?Xp:vd),e}function rl(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return pi(e);if(e.$$typeof===C)return xt(e)}throw Error(i(438,String(e)))}function cd(e){var n=null,r=Ne.updateQueue;if(r!==null&&(n=r.memoCache),n==null){var o=Ne.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(n={data:o.data.map(function(d){return d.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),r===null&&(r=sl(),Ne.updateQueue=r),r.memoCache=n,r=n.data[n.index],r===void 0)for(r=n.data[n.index]=Array(e),o=0;o<e;o++)r[o]=se;return n.index++,r}function Pn(e,n){return typeof n=="function"?n(e):n}function il(e){var n=nt();return ud(n,Ve,e)}function ud(e,n,r){var o=e.queue;if(o===null)throw Error(i(311));o.lastRenderedReducer=r;var d=e.baseQueue,h=o.pending;if(h!==null){if(d!==null){var v=d.next;d.next=h.next,h.next=v}n.baseQueue=d=h,o.pending=null}if(h=e.baseState,d===null)e.memoizedState=h;else{n=d.next;var T=v=null,$=null,J=n,re=!1;do{var oe=J.lane&-536870913;if(oe!==J.lane?(ke&oe)===oe:(In&oe)===oe){var ee=J.revertLane;if(ee===0)$!==null&&($=$.next={lane:0,revertLane:0,gesture:null,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null}),oe===Fs&&(re=!0);else if((In&ee)===ee){J=J.next,ee===Fs&&(re=!0);continue}else oe={lane:0,revertLane:J.revertLane,gesture:null,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},$===null?(T=$=oe,v=h):$=$.next=oe,Ne.lanes|=ee,Aa|=ee;oe=J.action,fs&&r(h,oe),h=J.hasEagerState?J.eagerState:r(h,oe)}else ee={lane:oe,revertLane:J.revertLane,gesture:J.gesture,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},$===null?(T=$=ee,v=h):$=$.next=ee,Ne.lanes|=oe,Aa|=oe;J=J.next}while(J!==null&&J!==n);if($===null?v=h:$.next=T,!Lt(h,e.memoizedState)&&(it=!0,re&&(r=Ws,r!==null)))throw r;e.memoizedState=h,e.baseState=v,e.baseQueue=$,o.lastRenderedState=h}return d===null&&(o.lanes=0),[e.memoizedState,o.dispatch]}function dd(e){var n=nt(),r=n.queue;if(r===null)throw Error(i(311));r.lastRenderedReducer=e;var o=r.dispatch,d=r.pending,h=n.memoizedState;if(d!==null){r.pending=null;var v=d=d.next;do h=e(h,v.action),v=v.next;while(v!==d);Lt(h,n.memoizedState)||(it=!0),n.memoizedState=h,n.baseQueue===null&&(n.baseState=h),r.lastRenderedState=h}return[h,o]}function up(e,n,r){var o=Ne,d=nt(),h=De;if(h){if(r===void 0)throw Error(i(407));r=r()}else r=n();var v=!Lt((Ve||d).memoizedState,r);if(v&&(d.memoizedState=r,it=!0),d=d.queue,md(hp.bind(null,o,d,e),[e]),d.getSnapshot!==n||v||rt!==null&&rt.memoizedState.tag&1){if(o.flags|=2048,ar(9,{destroy:void 0},fp.bind(null,o,d,r,n),null),Ge===null)throw Error(i(349));h||(In&127)!==0||dp(o,n,r)}return r}function dp(e,n,r){e.flags|=16384,e={getSnapshot:n,value:r},n=Ne.updateQueue,n===null?(n=sl(),Ne.updateQueue=n,n.stores=[e]):(r=n.stores,r===null?n.stores=[e]:r.push(e))}function fp(e,n,r,o){n.value=r,n.getSnapshot=o,mp(n)&&pp(e)}function hp(e,n,r){return r(function(){mp(n)&&pp(e)})}function mp(e){var n=e.getSnapshot;e=e.value;try{var r=n();return!Lt(e,r)}catch{return!0}}function pp(e){var n=as(e,2);n!==null&&Ot(n,e,2)}function fd(e){var n=Et();if(typeof e=="function"){var r=e;if(e=r(),fs){wn(!0);try{r()}finally{wn(!1)}}}return n.memoizedState=n.baseState=e,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pn,lastRenderedState:e},n}function gp(e,n,r,o){return e.baseState=r,ud(e,Ve,typeof o=="function"?o:Pn)}function m2(e,n,r,o,d){if(cl(e))throw Error(i(485));if(e=n.action,e!==null){var h={payload:d,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){h.listeners.push(v)}};O.T!==null?r(!0):h.isTransition=!1,o(h),r=n.pending,r===null?(h.next=n.pending=h,xp(n,h)):(h.next=r.next,n.pending=r.next=h)}}function xp(e,n){var r=n.action,o=n.payload,d=e.state;if(n.isTransition){var h=O.T,v={};O.T=v;try{var T=r(d,o),$=O.S;$!==null&&$(v,T),yp(e,n,T)}catch(J){hd(e,n,J)}finally{h!==null&&v.types!==null&&(h.types=v.types),O.T=h}}else try{h=r(d,o),yp(e,n,h)}catch(J){hd(e,n,J)}}function yp(e,n,r){r!==null&&typeof r=="object"&&typeof r.then=="function"?r.then(function(o){bp(e,n,o)},function(o){return hd(e,n,o)}):bp(e,n,r)}function bp(e,n,r){n.status="fulfilled",n.value=r,vp(n),e.state=r,n=e.pending,n!==null&&(r=n.next,r===n?e.pending=null:(r=r.next,n.next=r,xp(e,r)))}function hd(e,n,r){var o=e.pending;if(e.pending=null,o!==null){o=o.next;do n.status="rejected",n.reason=r,vp(n),n=n.next;while(n!==o)}e.action=null}function vp(e){e=e.listeners;for(var n=0;n<e.length;n++)(0,e[n])()}function wp(e,n){return n}function Sp(e,n){if(De){var r=Ge.formState;if(r!==null){e:{var o=Ne;if(De){if(Ie){t:{for(var d=Ie,h=tn;d.nodeType!==8;){if(!h){d=null;break t}if(d=an(d.nextSibling),d===null){d=null;break t}}h=d.data,d=h==="F!"||h==="F"?d:null}if(d){Ie=an(d.nextSibling),o=d.data==="F!";break e}}wa(o)}o=!1}o&&(n=r[0])}}return r=Et(),r.memoizedState=r.baseState=n,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:wp,lastRenderedState:n},r.queue=o,r=qp.bind(null,Ne,o),o.dispatch=r,o=fd(!1),h=bd.bind(null,Ne,!1,o.queue),o=Et(),d={state:n,dispatch:null,action:e,pending:null},o.queue=d,r=m2.bind(null,Ne,d,h,r),d.dispatch=r,o.memoizedState=e,[n,r,!1]}function Np(e){var n=nt();return jp(n,Ve,e)}function jp(e,n,r){if(n=ud(e,n,wp)[0],e=il(Pn)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var o=pi(n)}catch(v){throw v===Ks?Fo:v}else o=n;n=nt();var d=n.queue,h=d.dispatch;return r!==n.memoizedState&&(Ne.flags|=2048,ar(9,{destroy:void 0},p2.bind(null,d,r),null)),[o,h,e]}function p2(e,n){e.action=n}function Ep(e){var n=nt(),r=Ve;if(r!==null)return jp(n,r,e);nt(),n=n.memoizedState,r=nt();var o=r.queue.dispatch;return r.memoizedState=e,[n,o,!1]}function ar(e,n,r,o){return e={tag:e,create:r,deps:o,inst:n,next:null},n=Ne.updateQueue,n===null&&(n=sl(),Ne.updateQueue=n),r=n.lastEffect,r===null?n.lastEffect=e.next=e:(o=r.next,r.next=e,e.next=o,n.lastEffect=e),e}function _p(){return nt().memoizedState}function ol(e,n,r,o){var d=Et();Ne.flags|=e,d.memoizedState=ar(1|n,{destroy:void 0},r,o===void 0?null:o)}function ll(e,n,r,o){var d=nt();o=o===void 0?null:o;var h=d.memoizedState.inst;Ve!==null&&o!==null&&sd(o,Ve.memoizedState.deps)?d.memoizedState=ar(n,h,r,o):(Ne.flags|=e,d.memoizedState=ar(1|n,h,r,o))}function Cp(e,n){ol(8390656,8,e,n)}function md(e,n){ll(2048,8,e,n)}function g2(e){Ne.flags|=4;var n=Ne.updateQueue;if(n===null)n=sl(),Ne.updateQueue=n,n.events=[e];else{var r=n.events;r===null?n.events=[e]:r.push(e)}}function Tp(e){var n=nt().memoizedState;return g2({ref:n,nextImpl:e}),function(){if((He&2)!==0)throw Error(i(440));return n.impl.apply(void 0,arguments)}}function Mp(e,n){return ll(4,2,e,n)}function Ap(e,n){return ll(4,4,e,n)}function kp(e,n){if(typeof n=="function"){e=e();var r=n(e);return function(){typeof r=="function"?r():n(null)}}if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function Rp(e,n,r){r=r!=null?r.concat([e]):null,ll(4,4,kp.bind(null,n,e),r)}function pd(){}function Dp(e,n){var r=nt();n=n===void 0?null:n;var o=r.memoizedState;return n!==null&&sd(n,o[1])?o[0]:(r.memoizedState=[e,n],e)}function zp(e,n){var r=nt();n=n===void 0?null:n;var o=r.memoizedState;if(n!==null&&sd(n,o[1]))return o[0];if(o=e(),fs){wn(!0);try{e()}finally{wn(!1)}}return r.memoizedState=[o,n],o}function gd(e,n,r){return r===void 0||(In&1073741824)!==0&&(ke&261930)===0?e.memoizedState=n:(e.memoizedState=r,e=Og(),Ne.lanes|=e,Aa|=e,r)}function Op(e,n,r,o){return Lt(r,n)?r:er.current!==null?(e=gd(e,r,o),Lt(e,n)||(it=!0),e):(In&42)===0||(In&1073741824)!==0&&(ke&261930)===0?(it=!0,e.memoizedState=r):(e=Og(),Ne.lanes|=e,Aa|=e,n)}function Bp(e,n,r,o,d){var h=B.p;B.p=h!==0&&8>h?h:8;var v=O.T,T={};O.T=T,bd(e,!1,n,r);try{var $=d(),J=O.S;if(J!==null&&J(T,$),$!==null&&typeof $=="object"&&typeof $.then=="function"){var re=d2($,o);gi(e,n,re,Xt(e))}else gi(e,n,o,Xt(e))}catch(oe){gi(e,n,{then:function(){},status:"rejected",reason:oe},Xt())}finally{B.p=h,v!==null&&T.types!==null&&(v.types=T.types),O.T=v}}function x2(){}function xd(e,n,r,o){if(e.tag!==5)throw Error(i(476));var d=Hp(e).queue;Bp(e,d,n,q,r===null?x2:function(){return Lp(e),r(o)})}function Hp(e){var n=e.memoizedState;if(n!==null)return n;n={memoizedState:q,baseState:q,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pn,lastRenderedState:q},next:null};var r={};return n.next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pn,lastRenderedState:r},next:null},e.memoizedState=n,e=e.alternate,e!==null&&(e.memoizedState=n),n}function Lp(e){var n=Hp(e);n.next===null&&(n=e.alternate.memoizedState),gi(e,n.next.queue,{},Xt())}function yd(){return xt(Di)}function Up(){return nt().memoizedState}function $p(){return nt().memoizedState}function y2(e){for(var n=e.return;n!==null;){switch(n.tag){case 24:case 3:var r=Xt();e=ja(r);var o=Ea(n,e,r);o!==null&&(Ot(o,n,r),di(o,n,r)),n={cache:Pu()},e.payload=n;return}n=n.return}}function b2(e,n,r){var o=Xt();r={lane:o,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},cl(e)?Vp(n,r):(r=Bu(e,n,r,o),r!==null&&(Ot(r,e,o),Yp(r,n,o)))}function qp(e,n,r){var o=Xt();gi(e,n,r,o)}function gi(e,n,r,o){var d={lane:o,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null};if(cl(e))Vp(n,d);else{var h=e.alternate;if(e.lanes===0&&(h===null||h.lanes===0)&&(h=n.lastRenderedReducer,h!==null))try{var v=n.lastRenderedState,T=h(v,r);if(d.hasEagerState=!0,d.eagerState=T,Lt(T,v))return Yo(e,n,d,0),Ge===null&&Vo(),!1}catch{}if(r=Bu(e,n,d,o),r!==null)return Ot(r,e,o),Yp(r,n,o),!0}return!1}function bd(e,n,r,o){if(o={lane:2,revertLane:Wd(),gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},cl(e)){if(n)throw Error(i(479))}else n=Bu(e,r,o,2),n!==null&&Ot(n,e,2)}function cl(e){var n=e.alternate;return e===Ne||n!==null&&n===Ne}function Vp(e,n){tr=nl=!0;var r=e.pending;r===null?n.next=n:(n.next=r.next,r.next=n),e.pending=n}function Yp(e,n,r){if((r&4194048)!==0){var o=n.lanes;o&=e.pendingLanes,r|=o,n.lanes=r,So(e,r)}}var xi={readContext:xt,use:rl,useCallback:Ke,useContext:Ke,useEffect:Ke,useImperativeHandle:Ke,useLayoutEffect:Ke,useInsertionEffect:Ke,useMemo:Ke,useReducer:Ke,useRef:Ke,useState:Ke,useDebugValue:Ke,useDeferredValue:Ke,useTransition:Ke,useSyncExternalStore:Ke,useId:Ke,useHostTransitionStatus:Ke,useFormState:Ke,useActionState:Ke,useOptimistic:Ke,useMemoCache:Ke,useCacheRefresh:Ke};xi.useEffectEvent=Ke;var Xp={readContext:xt,use:rl,useCallback:function(e,n){return Et().memoizedState=[e,n===void 0?null:n],e},useContext:xt,useEffect:Cp,useImperativeHandle:function(e,n,r){r=r!=null?r.concat([e]):null,ol(4194308,4,kp.bind(null,n,e),r)},useLayoutEffect:function(e,n){return ol(4194308,4,e,n)},useInsertionEffect:function(e,n){ol(4,2,e,n)},useMemo:function(e,n){var r=Et();n=n===void 0?null:n;var o=e();if(fs){wn(!0);try{e()}finally{wn(!1)}}return r.memoizedState=[o,n],o},useReducer:function(e,n,r){var o=Et();if(r!==void 0){var d=r(n);if(fs){wn(!0);try{r(n)}finally{wn(!1)}}}else d=n;return o.memoizedState=o.baseState=d,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:d},o.queue=e,e=e.dispatch=b2.bind(null,Ne,e),[o.memoizedState,e]},useRef:function(e){var n=Et();return e={current:e},n.memoizedState=e},useState:function(e){e=fd(e);var n=e.queue,r=qp.bind(null,Ne,n);return n.dispatch=r,[e.memoizedState,r]},useDebugValue:pd,useDeferredValue:function(e,n){var r=Et();return gd(r,e,n)},useTransition:function(){var e=fd(!1);return e=Bp.bind(null,Ne,e.queue,!0,!1),Et().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,n,r){var o=Ne,d=Et();if(De){if(r===void 0)throw Error(i(407));r=r()}else{if(r=n(),Ge===null)throw Error(i(349));(ke&127)!==0||dp(o,n,r)}d.memoizedState=r;var h={value:r,getSnapshot:n};return d.queue=h,Cp(hp.bind(null,o,h,e),[e]),o.flags|=2048,ar(9,{destroy:void 0},fp.bind(null,o,h,r,n),null),r},useId:function(){var e=Et(),n=Ge.identifierPrefix;if(De){var r=jn,o=Nn;r=(o&~(1<<32-jt(o)-1)).toString(32)+r,n="_"+n+"R_"+r,r=al++,0<r&&(n+="H"+r.toString(32)),n+="_"}else r=f2++,n="_"+n+"r_"+r.toString(32)+"_";return e.memoizedState=n},useHostTransitionStatus:yd,useFormState:Sp,useActionState:Sp,useOptimistic:function(e){var n=Et();n.memoizedState=n.baseState=e;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=r,n=bd.bind(null,Ne,!0,r),r.dispatch=n,[e,n]},useMemoCache:cd,useCacheRefresh:function(){return Et().memoizedState=y2.bind(null,Ne)},useEffectEvent:function(e){var n=Et(),r={impl:e};return n.memoizedState=r,function(){if((He&2)!==0)throw Error(i(440));return r.impl.apply(void 0,arguments)}}},vd={readContext:xt,use:rl,useCallback:Dp,useContext:xt,useEffect:md,useImperativeHandle:Rp,useInsertionEffect:Mp,useLayoutEffect:Ap,useMemo:zp,useReducer:il,useRef:_p,useState:function(){return il(Pn)},useDebugValue:pd,useDeferredValue:function(e,n){var r=nt();return Op(r,Ve.memoizedState,e,n)},useTransition:function(){var e=il(Pn)[0],n=nt().memoizedState;return[typeof e=="boolean"?e:pi(e),n]},useSyncExternalStore:up,useId:Up,useHostTransitionStatus:yd,useFormState:Np,useActionState:Np,useOptimistic:function(e,n){var r=nt();return gp(r,Ve,e,n)},useMemoCache:cd,useCacheRefresh:$p};vd.useEffectEvent=Tp;var Gp={readContext:xt,use:rl,useCallback:Dp,useContext:xt,useEffect:md,useImperativeHandle:Rp,useInsertionEffect:Mp,useLayoutEffect:Ap,useMemo:zp,useReducer:dd,useRef:_p,useState:function(){return dd(Pn)},useDebugValue:pd,useDeferredValue:function(e,n){var r=nt();return Ve===null?gd(r,e,n):Op(r,Ve.memoizedState,e,n)},useTransition:function(){var e=dd(Pn)[0],n=nt().memoizedState;return[typeof e=="boolean"?e:pi(e),n]},useSyncExternalStore:up,useId:Up,useHostTransitionStatus:yd,useFormState:Ep,useActionState:Ep,useOptimistic:function(e,n){var r=nt();return Ve!==null?gp(r,Ve,e,n):(r.baseState=e,[e,r.queue.dispatch])},useMemoCache:cd,useCacheRefresh:$p};Gp.useEffectEvent=Tp;function wd(e,n,r,o){n=e.memoizedState,r=r(o,n),r=r==null?n:x({},n,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Sd={enqueueSetState:function(e,n,r){e=e._reactInternals;var o=Xt(),d=ja(o);d.payload=n,r!=null&&(d.callback=r),n=Ea(e,d,o),n!==null&&(Ot(n,e,o),di(n,e,o))},enqueueReplaceState:function(e,n,r){e=e._reactInternals;var o=Xt(),d=ja(o);d.tag=1,d.payload=n,r!=null&&(d.callback=r),n=Ea(e,d,o),n!==null&&(Ot(n,e,o),di(n,e,o))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var r=Xt(),o=ja(r);o.tag=2,n!=null&&(o.callback=n),n=Ea(e,o,r),n!==null&&(Ot(n,e,r),di(n,e,r))}};function Ip(e,n,r,o,d,h,v){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(o,h,v):n.prototype&&n.prototype.isPureReactComponent?!ai(r,o)||!ai(d,h):!0}function Pp(e,n,r,o){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(r,o),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(r,o),n.state!==e&&Sd.enqueueReplaceState(n,n.state,null)}function hs(e,n){var r=n;if("ref"in n){r={};for(var o in n)o!=="ref"&&(r[o]=n[o])}if(e=e.defaultProps){r===n&&(r=x({},r));for(var d in e)r[d]===void 0&&(r[d]=e[d])}return r}function Zp(e){qo(e)}function Qp(e){console.error(e)}function Fp(e){qo(e)}function ul(e,n){try{var r=e.onUncaughtError;r(n.value,{componentStack:n.stack})}catch(o){setTimeout(function(){throw o})}}function Wp(e,n,r){try{var o=e.onCaughtError;o(r.value,{componentStack:r.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(d){setTimeout(function(){throw d})}}function Nd(e,n,r){return r=ja(r),r.tag=3,r.payload={element:null},r.callback=function(){ul(e,n)},r}function Kp(e){return e=ja(e),e.tag=3,e}function Jp(e,n,r,o){var d=r.type.getDerivedStateFromError;if(typeof d=="function"){var h=o.value;e.payload=function(){return d(h)},e.callback=function(){Wp(n,r,o)}}var v=r.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(e.callback=function(){Wp(n,r,o),typeof d!="function"&&(ka===null?ka=new Set([this]):ka.add(this));var T=o.stack;this.componentDidCatch(o.value,{componentStack:T!==null?T:""})})}function v2(e,n,r,o,d){if(r.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(n=r.alternate,n!==null&&Qs(n,r,d,!0),r=$t.current,r!==null){switch(r.tag){case 31:case 13:return nn===null?Sl():r.alternate===null&&Je===0&&(Je=3),r.flags&=-257,r.flags|=65536,r.lanes=d,o===Wo?r.flags|=16384:(n=r.updateQueue,n===null?r.updateQueue=new Set([o]):n.add(o),Zd(e,o,d)),!1;case 22:return r.flags|=65536,o===Wo?r.flags|=16384:(n=r.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([o])},r.updateQueue=n):(r=n.retryQueue,r===null?n.retryQueue=new Set([o]):r.add(o)),Zd(e,o,d)),!1}throw Error(i(435,r.tag))}return Zd(e,o,d),Sl(),!1}if(De)return n=$t.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=d,o!==Vu&&(e=Error(i(422),{cause:o}),ii(Kt(e,r)))):(o!==Vu&&(n=Error(i(423),{cause:o}),ii(Kt(n,r))),e=e.current.alternate,e.flags|=65536,d&=-d,e.lanes|=d,o=Kt(o,r),d=Nd(e.stateNode,o,d),Ju(e,d),Je!==4&&(Je=2)),!1;var h=Error(i(520),{cause:o});if(h=Kt(h,r),Ei===null?Ei=[h]:Ei.push(h),Je!==4&&(Je=2),n===null)return!0;o=Kt(o,r),r=n;do{switch(r.tag){case 3:return r.flags|=65536,e=d&-d,r.lanes|=e,e=Nd(r.stateNode,o,e),Ju(r,e),!1;case 1:if(n=r.type,h=r.stateNode,(r.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||h!==null&&typeof h.componentDidCatch=="function"&&(ka===null||!ka.has(h))))return r.flags|=65536,d&=-d,r.lanes|=d,d=Kp(d),Jp(d,e,r,o),Ju(r,d),!1}r=r.return}while(r!==null);return!1}var jd=Error(i(461)),it=!1;function yt(e,n,r,o){n.child=e===null?ap(n,null,r,o):ds(n,e.child,r,o)}function eg(e,n,r,o,d){r=r.render;var h=n.ref;if("ref"in o){var v={};for(var T in o)T!=="ref"&&(v[T]=o[T])}else v=o;return os(n),o=rd(e,n,r,v,h,d),T=id(),e!==null&&!it?(od(e,n,d),Zn(e,n,d)):(De&&T&&$u(n),n.flags|=1,yt(e,n,o,d),n.child)}function tg(e,n,r,o,d){if(e===null){var h=r.type;return typeof h=="function"&&!Hu(h)&&h.defaultProps===void 0&&r.compare===null?(n.tag=15,n.type=h,ng(e,n,h,o,d)):(e=Go(r.type,null,o,n,n.mode,d),e.ref=n.ref,e.return=n,n.child=e)}if(h=e.child,!Rd(e,d)){var v=h.memoizedProps;if(r=r.compare,r=r!==null?r:ai,r(v,o)&&e.ref===n.ref)return Zn(e,n,d)}return n.flags|=1,e=Vn(h,o),e.ref=n.ref,e.return=n,n.child=e}function ng(e,n,r,o,d){if(e!==null){var h=e.memoizedProps;if(ai(h,o)&&e.ref===n.ref)if(it=!1,n.pendingProps=o=h,Rd(e,d))(e.flags&131072)!==0&&(it=!0);else return n.lanes=e.lanes,Zn(e,n,d)}return Ed(e,n,r,o,d)}function ag(e,n,r,o){var d=o.children,h=e!==null?e.memoizedState:null;if(e===null&&n.stateNode===null&&(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.mode==="hidden"){if((n.flags&128)!==0){if(h=h!==null?h.baseLanes|r:r,e!==null){for(o=n.child=e.child,d=0;o!==null;)d=d|o.lanes|o.childLanes,o=o.sibling;o=d&~h}else o=0,n.child=null;return sg(e,n,h,r,o)}if((r&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},e!==null&&Qo(n,h!==null?h.cachePool:null),h!==null?ip(n,h):td(),op(n);else return o=n.lanes=536870912,sg(e,n,h!==null?h.baseLanes|r:r,r,o)}else h!==null?(Qo(n,h.cachePool),ip(n,h),Ca(),n.memoizedState=null):(e!==null&&Qo(n,null),td(),Ca());return yt(e,n,d,r),n.child}function yi(e,n){return e!==null&&e.tag===22||n.stateNode!==null||(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.sibling}function sg(e,n,r,o,d){var h=Qu();return h=h===null?null:{parent:st._currentValue,pool:h},n.memoizedState={baseLanes:r,cachePool:h},e!==null&&Qo(n,null),td(),op(n),e!==null&&Qs(e,n,o,!0),n.childLanes=d,null}function dl(e,n){return n=hl({mode:n.mode,children:n.children},e.mode),n.ref=e.ref,e.child=n,n.return=e,n}function rg(e,n,r){return ds(n,e.child,null,r),e=dl(n,n.pendingProps),e.flags|=2,qt(n),n.memoizedState=null,e}function w2(e,n,r){var o=n.pendingProps,d=(n.flags&128)!==0;if(n.flags&=-129,e===null){if(De){if(o.mode==="hidden")return e=dl(n,o),n.lanes=536870912,yi(null,e);if(ad(n),(e=Ie)?(e=x0(e,tn),e=e!==null&&e.data==="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:ba!==null?{id:Nn,overflow:jn}:null,retryLane:536870912,hydrationErrors:null},r=Vm(e),r.return=n,n.child=r,gt=n,Ie=null)):e=null,e===null)throw wa(n);return n.lanes=536870912,null}return dl(n,o)}var h=e.memoizedState;if(h!==null){var v=h.dehydrated;if(ad(n),d)if(n.flags&256)n.flags&=-257,n=rg(e,n,r);else if(n.memoizedState!==null)n.child=e.child,n.flags|=128,n=null;else throw Error(i(558));else if(it||Qs(e,n,r,!1),d=(r&e.childLanes)!==0,it||d){if(o=Ge,o!==null&&(v=No(o,r),v!==0&&v!==h.retryLane))throw h.retryLane=v,as(e,v),Ot(o,e,v),jd;Sl(),n=rg(e,n,r)}else e=h.treeContext,Ie=an(v.nextSibling),gt=n,De=!0,va=null,tn=!1,e!==null&&Gm(n,e),n=dl(n,o),n.flags|=4096;return n}return e=Vn(e.child,{mode:o.mode,children:o.children}),e.ref=n.ref,n.child=e,e.return=n,e}function fl(e,n){var r=n.ref;if(r===null)e!==null&&e.ref!==null&&(n.flags|=4194816);else{if(typeof r!="function"&&typeof r!="object")throw Error(i(284));(e===null||e.ref!==r)&&(n.flags|=4194816)}}function Ed(e,n,r,o,d){return os(n),r=rd(e,n,r,o,void 0,d),o=id(),e!==null&&!it?(od(e,n,d),Zn(e,n,d)):(De&&o&&$u(n),n.flags|=1,yt(e,n,r,d),n.child)}function ig(e,n,r,o,d,h){return os(n),n.updateQueue=null,r=cp(n,o,r,d),lp(e),o=id(),e!==null&&!it?(od(e,n,h),Zn(e,n,h)):(De&&o&&$u(n),n.flags|=1,yt(e,n,r,h),n.child)}function og(e,n,r,o,d){if(os(n),n.stateNode===null){var h=Gs,v=r.contextType;typeof v=="object"&&v!==null&&(h=xt(v)),h=new r(o,h),n.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,h.updater=Sd,n.stateNode=h,h._reactInternals=n,h=n.stateNode,h.props=o,h.state=n.memoizedState,h.refs={},Wu(n),v=r.contextType,h.context=typeof v=="object"&&v!==null?xt(v):Gs,h.state=n.memoizedState,v=r.getDerivedStateFromProps,typeof v=="function"&&(wd(n,r,v,o),h.state=n.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof h.getSnapshotBeforeUpdate=="function"||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(v=h.state,typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount(),v!==h.state&&Sd.enqueueReplaceState(h,h.state,null),hi(n,o,h,d),fi(),h.state=n.memoizedState),typeof h.componentDidMount=="function"&&(n.flags|=4194308),o=!0}else if(e===null){h=n.stateNode;var T=n.memoizedProps,$=hs(r,T);h.props=$;var J=h.context,re=r.contextType;v=Gs,typeof re=="object"&&re!==null&&(v=xt(re));var oe=r.getDerivedStateFromProps;re=typeof oe=="function"||typeof h.getSnapshotBeforeUpdate=="function",T=n.pendingProps!==T,re||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(T||J!==v)&&Pp(n,h,o,v),Na=!1;var ee=n.memoizedState;h.state=ee,hi(n,o,h,d),fi(),J=n.memoizedState,T||ee!==J||Na?(typeof oe=="function"&&(wd(n,r,oe,o),J=n.memoizedState),($=Na||Ip(n,r,$,o,ee,J,v))?(re||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount()),typeof h.componentDidMount=="function"&&(n.flags|=4194308)):(typeof h.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=o,n.memoizedState=J),h.props=o,h.state=J,h.context=v,o=$):(typeof h.componentDidMount=="function"&&(n.flags|=4194308),o=!1)}else{h=n.stateNode,Ku(e,n),v=n.memoizedProps,re=hs(r,v),h.props=re,oe=n.pendingProps,ee=h.context,J=r.contextType,$=Gs,typeof J=="object"&&J!==null&&($=xt(J)),T=r.getDerivedStateFromProps,(J=typeof T=="function"||typeof h.getSnapshotBeforeUpdate=="function")||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(v!==oe||ee!==$)&&Pp(n,h,o,$),Na=!1,ee=n.memoizedState,h.state=ee,hi(n,o,h,d),fi();var ne=n.memoizedState;v!==oe||ee!==ne||Na||e!==null&&e.dependencies!==null&&Po(e.dependencies)?(typeof T=="function"&&(wd(n,r,T,o),ne=n.memoizedState),(re=Na||Ip(n,r,re,o,ee,ne,$)||e!==null&&e.dependencies!==null&&Po(e.dependencies))?(J||typeof h.UNSAFE_componentWillUpdate!="function"&&typeof h.componentWillUpdate!="function"||(typeof h.componentWillUpdate=="function"&&h.componentWillUpdate(o,ne,$),typeof h.UNSAFE_componentWillUpdate=="function"&&h.UNSAFE_componentWillUpdate(o,ne,$)),typeof h.componentDidUpdate=="function"&&(n.flags|=4),typeof h.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof h.componentDidUpdate!="function"||v===e.memoizedProps&&ee===e.memoizedState||(n.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&ee===e.memoizedState||(n.flags|=1024),n.memoizedProps=o,n.memoizedState=ne),h.props=o,h.state=ne,h.context=$,o=re):(typeof h.componentDidUpdate!="function"||v===e.memoizedProps&&ee===e.memoizedState||(n.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&ee===e.memoizedState||(n.flags|=1024),o=!1)}return h=o,fl(e,n),o=(n.flags&128)!==0,h||o?(h=n.stateNode,r=o&&typeof r.getDerivedStateFromError!="function"?null:h.render(),n.flags|=1,e!==null&&o?(n.child=ds(n,e.child,null,d),n.child=ds(n,null,r,d)):yt(e,n,r,d),n.memoizedState=h.state,e=n.child):e=Zn(e,n,d),e}function lg(e,n,r,o){return rs(),n.flags|=256,yt(e,n,r,o),n.child}var _d={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Cd(e){return{baseLanes:e,cachePool:Wm()}}function Td(e,n,r){return e=e!==null?e.childLanes&~r:0,n&&(e|=Yt),e}function cg(e,n,r){var o=n.pendingProps,d=!1,h=(n.flags&128)!==0,v;if((v=h)||(v=e!==null&&e.memoizedState===null?!1:(tt.current&2)!==0),v&&(d=!0,n.flags&=-129),v=(n.flags&32)!==0,n.flags&=-33,e===null){if(De){if(d?_a(n):Ca(),(e=Ie)?(e=x0(e,tn),e=e!==null&&e.data!=="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:ba!==null?{id:Nn,overflow:jn}:null,retryLane:536870912,hydrationErrors:null},r=Vm(e),r.return=n,n.child=r,gt=n,Ie=null)):e=null,e===null)throw wa(n);return df(e)?n.lanes=32:n.lanes=536870912,null}var T=o.children;return o=o.fallback,d?(Ca(),d=n.mode,T=hl({mode:"hidden",children:T},d),o=ss(o,d,r,null),T.return=n,o.return=n,T.sibling=o,n.child=T,o=n.child,o.memoizedState=Cd(r),o.childLanes=Td(e,v,r),n.memoizedState=_d,yi(null,o)):(_a(n),Md(n,T))}var $=e.memoizedState;if($!==null&&(T=$.dehydrated,T!==null)){if(h)n.flags&256?(_a(n),n.flags&=-257,n=Ad(e,n,r)):n.memoizedState!==null?(Ca(),n.child=e.child,n.flags|=128,n=null):(Ca(),T=o.fallback,d=n.mode,o=hl({mode:"visible",children:o.children},d),T=ss(T,d,r,null),T.flags|=2,o.return=n,T.return=n,o.sibling=T,n.child=o,ds(n,e.child,null,r),o=n.child,o.memoizedState=Cd(r),o.childLanes=Td(e,v,r),n.memoizedState=_d,n=yi(null,o));else if(_a(n),df(T)){if(v=T.nextSibling&&T.nextSibling.dataset,v)var J=v.dgst;v=J,o=Error(i(419)),o.stack="",o.digest=v,ii({value:o,source:null,stack:null}),n=Ad(e,n,r)}else if(it||Qs(e,n,r,!1),v=(r&e.childLanes)!==0,it||v){if(v=Ge,v!==null&&(o=No(v,r),o!==0&&o!==$.retryLane))throw $.retryLane=o,as(e,o),Ot(v,e,o),jd;uf(T)||Sl(),n=Ad(e,n,r)}else uf(T)?(n.flags|=192,n.child=e.child,n=null):(e=$.treeContext,Ie=an(T.nextSibling),gt=n,De=!0,va=null,tn=!1,e!==null&&Gm(n,e),n=Md(n,o.children),n.flags|=4096);return n}return d?(Ca(),T=o.fallback,d=n.mode,$=e.child,J=$.sibling,o=Vn($,{mode:"hidden",children:o.children}),o.subtreeFlags=$.subtreeFlags&65011712,J!==null?T=Vn(J,T):(T=ss(T,d,r,null),T.flags|=2),T.return=n,o.return=n,o.sibling=T,n.child=o,yi(null,o),o=n.child,T=e.child.memoizedState,T===null?T=Cd(r):(d=T.cachePool,d!==null?($=st._currentValue,d=d.parent!==$?{parent:$,pool:$}:d):d=Wm(),T={baseLanes:T.baseLanes|r,cachePool:d}),o.memoizedState=T,o.childLanes=Td(e,v,r),n.memoizedState=_d,yi(e.child,o)):(_a(n),r=e.child,e=r.sibling,r=Vn(r,{mode:"visible",children:o.children}),r.return=n,r.sibling=null,e!==null&&(v=n.deletions,v===null?(n.deletions=[e],n.flags|=16):v.push(e)),n.child=r,n.memoizedState=null,r)}function Md(e,n){return n=hl({mode:"visible",children:n},e.mode),n.return=e,e.child=n}function hl(e,n){return e=Ut(22,e,null,n),e.lanes=0,e}function Ad(e,n,r){return ds(n,e.child,null,r),e=Md(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function ug(e,n,r){e.lanes|=n;var o=e.alternate;o!==null&&(o.lanes|=n),Gu(e.return,n,r)}function kd(e,n,r,o,d,h){var v=e.memoizedState;v===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:o,tail:r,tailMode:d,treeForkCount:h}:(v.isBackwards=n,v.rendering=null,v.renderingStartTime=0,v.last=o,v.tail=r,v.tailMode=d,v.treeForkCount=h)}function dg(e,n,r){var o=n.pendingProps,d=o.revealOrder,h=o.tail;o=o.children;var v=tt.current,T=(v&2)!==0;if(T?(v=v&1|2,n.flags|=128):v&=1,Z(tt,v),yt(e,n,o,r),o=De?ri:0,!T&&e!==null&&(e.flags&128)!==0)e:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&ug(e,r,n);else if(e.tag===19)ug(e,r,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break e;for(;e.sibling===null;){if(e.return===null||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(d){case"forwards":for(r=n.child,d=null;r!==null;)e=r.alternate,e!==null&&tl(e)===null&&(d=r),r=r.sibling;r=d,r===null?(d=n.child,n.child=null):(d=r.sibling,r.sibling=null),kd(n,!1,d,r,h,o);break;case"backwards":case"unstable_legacy-backwards":for(r=null,d=n.child,n.child=null;d!==null;){if(e=d.alternate,e!==null&&tl(e)===null){n.child=d;break}e=d.sibling,d.sibling=r,r=d,d=e}kd(n,!0,r,null,h,o);break;case"together":kd(n,!1,null,null,void 0,o);break;default:n.memoizedState=null}return n.child}function Zn(e,n,r){if(e!==null&&(n.dependencies=e.dependencies),Aa|=n.lanes,(r&n.childLanes)===0)if(e!==null){if(Qs(e,n,r,!1),(r&n.childLanes)===0)return null}else return null;if(e!==null&&n.child!==e.child)throw Error(i(153));if(n.child!==null){for(e=n.child,r=Vn(e,e.pendingProps),n.child=r,r.return=n;e.sibling!==null;)e=e.sibling,r=r.sibling=Vn(e,e.pendingProps),r.return=n;r.sibling=null}return n.child}function Rd(e,n){return(e.lanes&n)!==0?!0:(e=e.dependencies,!!(e!==null&&Po(e)))}function S2(e,n,r){switch(n.tag){case 3:ce(n,n.stateNode.containerInfo),Sa(n,st,e.memoizedState.cache),rs();break;case 27:case 5:we(n);break;case 4:ce(n,n.stateNode.containerInfo);break;case 10:Sa(n,n.type,n.memoizedProps.value);break;case 31:if(n.memoizedState!==null)return n.flags|=128,ad(n),null;break;case 13:var o=n.memoizedState;if(o!==null)return o.dehydrated!==null?(_a(n),n.flags|=128,null):(r&n.child.childLanes)!==0?cg(e,n,r):(_a(n),e=Zn(e,n,r),e!==null?e.sibling:null);_a(n);break;case 19:var d=(e.flags&128)!==0;if(o=(r&n.childLanes)!==0,o||(Qs(e,n,r,!1),o=(r&n.childLanes)!==0),d){if(o)return dg(e,n,r);n.flags|=128}if(d=n.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),Z(tt,tt.current),o)break;return null;case 22:return n.lanes=0,ag(e,n,r,n.pendingProps);case 24:Sa(n,st,e.memoizedState.cache)}return Zn(e,n,r)}function fg(e,n,r){if(e!==null)if(e.memoizedProps!==n.pendingProps)it=!0;else{if(!Rd(e,r)&&(n.flags&128)===0)return it=!1,S2(e,n,r);it=(e.flags&131072)!==0}else it=!1,De&&(n.flags&1048576)!==0&&Xm(n,ri,n.index);switch(n.lanes=0,n.tag){case 16:e:{var o=n.pendingProps;if(e=cs(n.elementType),n.type=e,typeof e=="function")Hu(e)?(o=hs(e,o),n.tag=1,n=og(null,n,e,o,r)):(n.tag=0,n=Ed(null,n,e,o,r));else{if(e!=null){var d=e.$$typeof;if(d===k){n.tag=11,n=eg(null,n,e,o,r);break e}else if(d===M){n.tag=14,n=tg(null,n,e,o,r);break e}}throw n=U(e)||e,Error(i(306,n,""))}}return n;case 0:return Ed(e,n,n.type,n.pendingProps,r);case 1:return o=n.type,d=hs(o,n.pendingProps),og(e,n,o,d,r);case 3:e:{if(ce(n,n.stateNode.containerInfo),e===null)throw Error(i(387));o=n.pendingProps;var h=n.memoizedState;d=h.element,Ku(e,n),hi(n,o,null,r);var v=n.memoizedState;if(o=v.cache,Sa(n,st,o),o!==h.cache&&Iu(n,[st],r,!0),fi(),o=v.element,h.isDehydrated)if(h={element:o,isDehydrated:!1,cache:v.cache},n.updateQueue.baseState=h,n.memoizedState=h,n.flags&256){n=lg(e,n,o,r);break e}else if(o!==d){d=Kt(Error(i(424)),n),ii(d),n=lg(e,n,o,r);break e}else for(e=n.stateNode.containerInfo,e.nodeType===9?e=e.body:e=e.nodeName==="HTML"?e.ownerDocument.body:e,Ie=an(e.firstChild),gt=n,De=!0,va=null,tn=!0,r=ap(n,null,o,r),n.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(rs(),o===d){n=Zn(e,n,r);break e}yt(e,n,o,r)}n=n.child}return n;case 26:return fl(e,n),e===null?(r=N0(n.type,null,n.pendingProps,null))?n.memoizedState=r:De||(r=n.type,e=n.pendingProps,o=Ml(X.current).createElement(r),o[dt]=n,o[wt]=e,bt(o,r,e),at(o),n.stateNode=o):n.memoizedState=N0(n.type,e.memoizedProps,n.pendingProps,e.memoizedState),null;case 27:return we(n),e===null&&De&&(o=n.stateNode=v0(n.type,n.pendingProps,X.current),gt=n,tn=!0,d=Ie,Oa(n.type)?(ff=d,Ie=an(o.firstChild)):Ie=d),yt(e,n,n.pendingProps.children,r),fl(e,n),e===null&&(n.flags|=4194304),n.child;case 5:return e===null&&De&&((d=o=Ie)&&(o=K2(o,n.type,n.pendingProps,tn),o!==null?(n.stateNode=o,gt=n,Ie=an(o.firstChild),tn=!1,d=!0):d=!1),d||wa(n)),we(n),d=n.type,h=n.pendingProps,v=e!==null?e.memoizedProps:null,o=h.children,of(d,h)?o=null:v!==null&&of(d,v)&&(n.flags|=32),n.memoizedState!==null&&(d=rd(e,n,h2,null,null,r),Di._currentValue=d),fl(e,n),yt(e,n,o,r),n.child;case 6:return e===null&&De&&((e=r=Ie)&&(r=J2(r,n.pendingProps,tn),r!==null?(n.stateNode=r,gt=n,Ie=null,e=!0):e=!1),e||wa(n)),null;case 13:return cg(e,n,r);case 4:return ce(n,n.stateNode.containerInfo),o=n.pendingProps,e===null?n.child=ds(n,null,o,r):yt(e,n,o,r),n.child;case 11:return eg(e,n,n.type,n.pendingProps,r);case 7:return yt(e,n,n.pendingProps,r),n.child;case 8:return yt(e,n,n.pendingProps.children,r),n.child;case 12:return yt(e,n,n.pendingProps.children,r),n.child;case 10:return o=n.pendingProps,Sa(n,n.type,o.value),yt(e,n,o.children,r),n.child;case 9:return d=n.type._context,o=n.pendingProps.children,os(n),d=xt(d),o=o(d),n.flags|=1,yt(e,n,o,r),n.child;case 14:return tg(e,n,n.type,n.pendingProps,r);case 15:return ng(e,n,n.type,n.pendingProps,r);case 19:return dg(e,n,r);case 31:return w2(e,n,r);case 22:return ag(e,n,r,n.pendingProps);case 24:return os(n),o=xt(st),e===null?(d=Qu(),d===null&&(d=Ge,h=Pu(),d.pooledCache=h,h.refCount++,h!==null&&(d.pooledCacheLanes|=r),d=h),n.memoizedState={parent:o,cache:d},Wu(n),Sa(n,st,d)):((e.lanes&r)!==0&&(Ku(e,n),hi(n,null,null,r),fi()),d=e.memoizedState,h=n.memoizedState,d.parent!==o?(d={parent:o,cache:o},n.memoizedState=d,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=d),Sa(n,st,o)):(o=h.cache,Sa(n,st,o),o!==d.cache&&Iu(n,[st],r,!0))),yt(e,n,n.pendingProps.children,r),n.child;case 29:throw n.pendingProps}throw Error(i(156,n.tag))}function Qn(e){e.flags|=4}function Dd(e,n,r,o,d){if((n=(e.mode&32)!==0)&&(n=!1),n){if(e.flags|=16777216,(d&335544128)===d)if(e.stateNode.complete)e.flags|=8192;else if(Ug())e.flags|=8192;else throw us=Wo,Fu}else e.flags&=-16777217}function hg(e,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!T0(n))if(Ug())e.flags|=8192;else throw us=Wo,Fu}function ml(e,n){n!==null&&(e.flags|=4),e.flags&16384&&(n=e.tag!==22?vo():536870912,e.lanes|=n,or|=n)}function bi(e,n){if(!De)switch(e.tailMode){case"hidden":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var o=null;r!==null;)r.alternate!==null&&(o=r),r=r.sibling;o===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:o.sibling=null}}function Pe(e){var n=e.alternate!==null&&e.alternate.child===e.child,r=0,o=0;if(n)for(var d=e.child;d!==null;)r|=d.lanes|d.childLanes,o|=d.subtreeFlags&65011712,o|=d.flags&65011712,d.return=e,d=d.sibling;else for(d=e.child;d!==null;)r|=d.lanes|d.childLanes,o|=d.subtreeFlags,o|=d.flags,d.return=e,d=d.sibling;return e.subtreeFlags|=o,e.childLanes=r,n}function N2(e,n,r){var o=n.pendingProps;switch(qu(n),n.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Pe(n),null;case 1:return Pe(n),null;case 3:return r=n.stateNode,o=null,e!==null&&(o=e.memoizedState.cache),n.memoizedState.cache!==o&&(n.flags|=2048),Gn(st),de(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Zs(n)?Qn(n):e===null||e.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,Yu())),Pe(n),null;case 26:var d=n.type,h=n.memoizedState;return e===null?(Qn(n),h!==null?(Pe(n),hg(n,h)):(Pe(n),Dd(n,d,null,o,r))):h?h!==e.memoizedState?(Qn(n),Pe(n),hg(n,h)):(Pe(n),n.flags&=-16777217):(e=e.memoizedProps,e!==o&&Qn(n),Pe(n),Dd(n,d,e,o,r)),null;case 27:if(ve(n),r=X.current,d=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==o&&Qn(n);else{if(!o){if(n.stateNode===null)throw Error(i(166));return Pe(n),null}e=ae.current,Zs(n)?Im(n):(e=v0(d,o,r),n.stateNode=e,Qn(n))}return Pe(n),null;case 5:if(ve(n),d=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==o&&Qn(n);else{if(!o){if(n.stateNode===null)throw Error(i(166));return Pe(n),null}if(h=ae.current,Zs(n))Im(n);else{var v=Ml(X.current);switch(h){case 1:h=v.createElementNS("http://www.w3.org/2000/svg",d);break;case 2:h=v.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;default:switch(d){case"svg":h=v.createElementNS("http://www.w3.org/2000/svg",d);break;case"math":h=v.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;case"script":h=v.createElement("div"),h.innerHTML="<script><\/script>",h=h.removeChild(h.firstChild);break;case"select":h=typeof o.is=="string"?v.createElement("select",{is:o.is}):v.createElement("select"),o.multiple?h.multiple=!0:o.size&&(h.size=o.size);break;default:h=typeof o.is=="string"?v.createElement(d,{is:o.is}):v.createElement(d)}}h[dt]=n,h[wt]=o;e:for(v=n.child;v!==null;){if(v.tag===5||v.tag===6)h.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===n)break e;for(;v.sibling===null;){if(v.return===null||v.return===n)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}n.stateNode=h;e:switch(bt(h,d,o),d){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}o&&Qn(n)}}return Pe(n),Dd(n,n.type,e===null?null:e.memoizedProps,n.pendingProps,r),null;case 6:if(e&&n.stateNode!=null)e.memoizedProps!==o&&Qn(n);else{if(typeof o!="string"&&n.stateNode===null)throw Error(i(166));if(e=X.current,Zs(n)){if(e=n.stateNode,r=n.memoizedProps,o=null,d=gt,d!==null)switch(d.tag){case 27:case 5:o=d.memoizedProps}e[dt]=n,e=!!(e.nodeValue===r||o!==null&&o.suppressHydrationWarning===!0||c0(e.nodeValue,r)),e||wa(n,!0)}else e=Ml(e).createTextNode(o),e[dt]=n,n.stateNode=e}return Pe(n),null;case 31:if(r=n.memoizedState,e===null||e.memoizedState!==null){if(o=Zs(n),r!==null){if(e===null){if(!o)throw Error(i(318));if(e=n.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(i(557));e[dt]=n}else rs(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;Pe(n),e=!1}else r=Yu(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=r),e=!0;if(!e)return n.flags&256?(qt(n),n):(qt(n),null);if((n.flags&128)!==0)throw Error(i(558))}return Pe(n),null;case 13:if(o=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(d=Zs(n),o!==null&&o.dehydrated!==null){if(e===null){if(!d)throw Error(i(318));if(d=n.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(i(317));d[dt]=n}else rs(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;Pe(n),d=!1}else d=Yu(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=d),d=!0;if(!d)return n.flags&256?(qt(n),n):(qt(n),null)}return qt(n),(n.flags&128)!==0?(n.lanes=r,n):(r=o!==null,e=e!==null&&e.memoizedState!==null,r&&(o=n.child,d=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(d=o.alternate.memoizedState.cachePool.pool),h=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(h=o.memoizedState.cachePool.pool),h!==d&&(o.flags|=2048)),r!==e&&r&&(n.child.flags|=8192),ml(n,n.updateQueue),Pe(n),null);case 4:return de(),e===null&&tf(n.stateNode.containerInfo),Pe(n),null;case 10:return Gn(n.type),Pe(n),null;case 19:if(Y(tt),o=n.memoizedState,o===null)return Pe(n),null;if(d=(n.flags&128)!==0,h=o.rendering,h===null)if(d)bi(o,!1);else{if(Je!==0||e!==null&&(e.flags&128)!==0)for(e=n.child;e!==null;){if(h=tl(e),h!==null){for(n.flags|=128,bi(o,!1),e=h.updateQueue,n.updateQueue=e,ml(n,e),n.subtreeFlags=0,e=r,r=n.child;r!==null;)qm(r,e),r=r.sibling;return Z(tt,tt.current&1|2),De&&Yn(n,o.treeForkCount),n.child}e=e.sibling}o.tail!==null&&et()>bl&&(n.flags|=128,d=!0,bi(o,!1),n.lanes=4194304)}else{if(!d)if(e=tl(h),e!==null){if(n.flags|=128,d=!0,e=e.updateQueue,n.updateQueue=e,ml(n,e),bi(o,!0),o.tail===null&&o.tailMode==="hidden"&&!h.alternate&&!De)return Pe(n),null}else 2*et()-o.renderingStartTime>bl&&r!==536870912&&(n.flags|=128,d=!0,bi(o,!1),n.lanes=4194304);o.isBackwards?(h.sibling=n.child,n.child=h):(e=o.last,e!==null?e.sibling=h:n.child=h,o.last=h)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=et(),e.sibling=null,r=tt.current,Z(tt,d?r&1|2:r&1),De&&Yn(n,o.treeForkCount),e):(Pe(n),null);case 22:case 23:return qt(n),nd(),o=n.memoizedState!==null,e!==null?e.memoizedState!==null!==o&&(n.flags|=8192):o&&(n.flags|=8192),o?(r&536870912)!==0&&(n.flags&128)===0&&(Pe(n),n.subtreeFlags&6&&(n.flags|=8192)):Pe(n),r=n.updateQueue,r!==null&&ml(n,r.retryQueue),r=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(r=e.memoizedState.cachePool.pool),o=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),o!==r&&(n.flags|=2048),e!==null&&Y(ls),null;case 24:return r=null,e!==null&&(r=e.memoizedState.cache),n.memoizedState.cache!==r&&(n.flags|=2048),Gn(st),Pe(n),null;case 25:return null;case 30:return null}throw Error(i(156,n.tag))}function j2(e,n){switch(qu(n),n.tag){case 1:return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return Gn(st),de(),e=n.flags,(e&65536)!==0&&(e&128)===0?(n.flags=e&-65537|128,n):null;case 26:case 27:case 5:return ve(n),null;case 31:if(n.memoizedState!==null){if(qt(n),n.alternate===null)throw Error(i(340));rs()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 13:if(qt(n),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(i(340));rs()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return Y(tt),null;case 4:return de(),null;case 10:return Gn(n.type),null;case 22:case 23:return qt(n),nd(),e!==null&&Y(ls),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 24:return Gn(st),null;case 25:return null;default:return null}}function mg(e,n){switch(qu(n),n.tag){case 3:Gn(st),de();break;case 26:case 27:case 5:ve(n);break;case 4:de();break;case 31:n.memoizedState!==null&&qt(n);break;case 13:qt(n);break;case 19:Y(tt);break;case 10:Gn(n.type);break;case 22:case 23:qt(n),nd(),e!==null&&Y(ls);break;case 24:Gn(st)}}function vi(e,n){try{var r=n.updateQueue,o=r!==null?r.lastEffect:null;if(o!==null){var d=o.next;r=d;do{if((r.tag&e)===e){o=void 0;var h=r.create,v=r.inst;o=h(),v.destroy=o}r=r.next}while(r!==d)}}catch(T){Ue(n,n.return,T)}}function Ta(e,n,r){try{var o=n.updateQueue,d=o!==null?o.lastEffect:null;if(d!==null){var h=d.next;o=h;do{if((o.tag&e)===e){var v=o.inst,T=v.destroy;if(T!==void 0){v.destroy=void 0,d=n;var $=r,J=T;try{J()}catch(re){Ue(d,$,re)}}}o=o.next}while(o!==h)}}catch(re){Ue(n,n.return,re)}}function pg(e){var n=e.updateQueue;if(n!==null){var r=e.stateNode;try{rp(n,r)}catch(o){Ue(e,e.return,o)}}}function gg(e,n,r){r.props=hs(e.type,e.memoizedProps),r.state=e.memoizedState;try{r.componentWillUnmount()}catch(o){Ue(e,n,o)}}function wi(e,n){try{var r=e.ref;if(r!==null){switch(e.tag){case 26:case 27:case 5:var o=e.stateNode;break;case 30:o=e.stateNode;break;default:o=e.stateNode}typeof r=="function"?e.refCleanup=r(o):r.current=o}}catch(d){Ue(e,n,d)}}function En(e,n){var r=e.ref,o=e.refCleanup;if(r!==null)if(typeof o=="function")try{o()}catch(d){Ue(e,n,d)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof r=="function")try{r(null)}catch(d){Ue(e,n,d)}else r.current=null}function xg(e){var n=e.type,r=e.memoizedProps,o=e.stateNode;try{e:switch(n){case"button":case"input":case"select":case"textarea":r.autoFocus&&o.focus();break e;case"img":r.src?o.src=r.src:r.srcSet&&(o.srcset=r.srcSet)}}catch(d){Ue(e,e.return,d)}}function zd(e,n,r){try{var o=e.stateNode;I2(o,e.type,r,n),o[wt]=n}catch(d){Ue(e,e.return,d)}}function yg(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Oa(e.type)||e.tag===4}function Od(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||yg(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Oa(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Bd(e,n,r){var o=e.tag;if(o===5||o===6)e=e.stateNode,n?(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r).insertBefore(e,n):(n=r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,n.appendChild(e),r=r._reactRootContainer,r!=null||n.onclick!==null||(n.onclick=$n));else if(o!==4&&(o===27&&Oa(e.type)&&(r=e.stateNode,n=null),e=e.child,e!==null))for(Bd(e,n,r),e=e.sibling;e!==null;)Bd(e,n,r),e=e.sibling}function pl(e,n,r){var o=e.tag;if(o===5||o===6)e=e.stateNode,n?r.insertBefore(e,n):r.appendChild(e);else if(o!==4&&(o===27&&Oa(e.type)&&(r=e.stateNode),e=e.child,e!==null))for(pl(e,n,r),e=e.sibling;e!==null;)pl(e,n,r),e=e.sibling}function bg(e){var n=e.stateNode,r=e.memoizedProps;try{for(var o=e.type,d=n.attributes;d.length;)n.removeAttributeNode(d[0]);bt(n,o,r),n[dt]=e,n[wt]=r}catch(h){Ue(e,e.return,h)}}var Fn=!1,ot=!1,Hd=!1,vg=typeof WeakSet=="function"?WeakSet:Set,ht=null;function E2(e,n){if(e=e.containerInfo,sf=Bl,e=Rm(e),Au(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var o=r.getSelection&&r.getSelection();if(o&&o.rangeCount!==0){r=o.anchorNode;var d=o.anchorOffset,h=o.focusNode;o=o.focusOffset;try{r.nodeType,h.nodeType}catch{r=null;break e}var v=0,T=-1,$=-1,J=0,re=0,oe=e,ee=null;t:for(;;){for(var ne;oe!==r||d!==0&&oe.nodeType!==3||(T=v+d),oe!==h||o!==0&&oe.nodeType!==3||($=v+o),oe.nodeType===3&&(v+=oe.nodeValue.length),(ne=oe.firstChild)!==null;)ee=oe,oe=ne;for(;;){if(oe===e)break t;if(ee===r&&++J===d&&(T=v),ee===h&&++re===o&&($=v),(ne=oe.nextSibling)!==null)break;oe=ee,ee=oe.parentNode}oe=ne}r=T===-1||$===-1?null:{start:T,end:$}}else r=null}r=r||{start:0,end:0}}else r=null;for(rf={focusedElem:e,selectionRange:r},Bl=!1,ht=n;ht!==null;)if(n=ht,e=n.child,(n.subtreeFlags&1028)!==0&&e!==null)e.return=n,ht=e;else for(;ht!==null;){switch(n=ht,h=n.alternate,e=n.flags,n.tag){case 0:if((e&4)!==0&&(e=n.updateQueue,e=e!==null?e.events:null,e!==null))for(r=0;r<e.length;r++)d=e[r],d.ref.impl=d.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&h!==null){e=void 0,r=n,d=h.memoizedProps,h=h.memoizedState,o=r.stateNode;try{var fe=hs(r.type,d);e=o.getSnapshotBeforeUpdate(fe,h),o.__reactInternalSnapshotBeforeUpdate=e}catch(be){Ue(r,r.return,be)}}break;case 3:if((e&1024)!==0){if(e=n.stateNode.containerInfo,r=e.nodeType,r===9)cf(e);else if(r===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":cf(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(i(163))}if(e=n.sibling,e!==null){e.return=n.return,ht=e;break}ht=n.return}}function wg(e,n,r){var o=r.flags;switch(r.tag){case 0:case 11:case 15:Kn(e,r),o&4&&vi(5,r);break;case 1:if(Kn(e,r),o&4)if(e=r.stateNode,n===null)try{e.componentDidMount()}catch(v){Ue(r,r.return,v)}else{var d=hs(r.type,n.memoizedProps);n=n.memoizedState;try{e.componentDidUpdate(d,n,e.__reactInternalSnapshotBeforeUpdate)}catch(v){Ue(r,r.return,v)}}o&64&&pg(r),o&512&&wi(r,r.return);break;case 3:if(Kn(e,r),o&64&&(e=r.updateQueue,e!==null)){if(n=null,r.child!==null)switch(r.child.tag){case 27:case 5:n=r.child.stateNode;break;case 1:n=r.child.stateNode}try{rp(e,n)}catch(v){Ue(r,r.return,v)}}break;case 27:n===null&&o&4&&bg(r);case 26:case 5:Kn(e,r),n===null&&o&4&&xg(r),o&512&&wi(r,r.return);break;case 12:Kn(e,r);break;case 31:Kn(e,r),o&4&&jg(e,r);break;case 13:Kn(e,r),o&4&&Eg(e,r),o&64&&(e=r.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(r=z2.bind(null,r),ew(e,r))));break;case 22:if(o=r.memoizedState!==null||Fn,!o){n=n!==null&&n.memoizedState!==null||ot,d=Fn;var h=ot;Fn=o,(ot=n)&&!h?Jn(e,r,(r.subtreeFlags&8772)!==0):Kn(e,r),Fn=d,ot=h}break;case 30:break;default:Kn(e,r)}}function Sg(e){var n=e.alternate;n!==null&&(e.alternate=null,Sg(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&Pr(n)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Ze=null,kt=!1;function Wn(e,n,r){for(r=r.child;r!==null;)Ng(e,n,r),r=r.sibling}function Ng(e,n,r){if(Nt&&typeof Nt.onCommitFiberUnmount=="function")try{Nt.onCommitFiberUnmount(Za,r)}catch{}switch(r.tag){case 26:ot||En(r,n),Wn(e,n,r),r.memoizedState?r.memoizedState.count--:r.stateNode&&(r=r.stateNode,r.parentNode.removeChild(r));break;case 27:ot||En(r,n);var o=Ze,d=kt;Oa(r.type)&&(Ze=r.stateNode,kt=!1),Wn(e,n,r),Ai(r.stateNode),Ze=o,kt=d;break;case 5:ot||En(r,n);case 6:if(o=Ze,d=kt,Ze=null,Wn(e,n,r),Ze=o,kt=d,Ze!==null)if(kt)try{(Ze.nodeType===9?Ze.body:Ze.nodeName==="HTML"?Ze.ownerDocument.body:Ze).removeChild(r.stateNode)}catch(h){Ue(r,n,h)}else try{Ze.removeChild(r.stateNode)}catch(h){Ue(r,n,h)}break;case 18:Ze!==null&&(kt?(e=Ze,p0(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,r.stateNode),pr(e)):p0(Ze,r.stateNode));break;case 4:o=Ze,d=kt,Ze=r.stateNode.containerInfo,kt=!0,Wn(e,n,r),Ze=o,kt=d;break;case 0:case 11:case 14:case 15:Ta(2,r,n),ot||Ta(4,r,n),Wn(e,n,r);break;case 1:ot||(En(r,n),o=r.stateNode,typeof o.componentWillUnmount=="function"&&gg(r,n,o)),Wn(e,n,r);break;case 21:Wn(e,n,r);break;case 22:ot=(o=ot)||r.memoizedState!==null,Wn(e,n,r),ot=o;break;default:Wn(e,n,r)}}function jg(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{pr(e)}catch(r){Ue(n,n.return,r)}}}function Eg(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{pr(e)}catch(r){Ue(n,n.return,r)}}function _2(e){switch(e.tag){case 31:case 13:case 19:var n=e.stateNode;return n===null&&(n=e.stateNode=new vg),n;case 22:return e=e.stateNode,n=e._retryCache,n===null&&(n=e._retryCache=new vg),n;default:throw Error(i(435,e.tag))}}function gl(e,n){var r=_2(e);n.forEach(function(o){if(!r.has(o)){r.add(o);var d=O2.bind(null,e,o);o.then(d,d)}})}function Rt(e,n){var r=n.deletions;if(r!==null)for(var o=0;o<r.length;o++){var d=r[o],h=e,v=n,T=v;e:for(;T!==null;){switch(T.tag){case 27:if(Oa(T.type)){Ze=T.stateNode,kt=!1;break e}break;case 5:Ze=T.stateNode,kt=!1;break e;case 3:case 4:Ze=T.stateNode.containerInfo,kt=!0;break e}T=T.return}if(Ze===null)throw Error(i(160));Ng(h,v,d),Ze=null,kt=!1,h=d.alternate,h!==null&&(h.return=null),d.return=null}if(n.subtreeFlags&13886)for(n=n.child;n!==null;)_g(n,e),n=n.sibling}var fn=null;function _g(e,n){var r=e.alternate,o=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Rt(n,e),Dt(e),o&4&&(Ta(3,e,e.return),vi(3,e),Ta(5,e,e.return));break;case 1:Rt(n,e),Dt(e),o&512&&(ot||r===null||En(r,r.return)),o&64&&Fn&&(e=e.updateQueue,e!==null&&(o=e.callbacks,o!==null&&(r=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=r===null?o:r.concat(o))));break;case 26:var d=fn;if(Rt(n,e),Dt(e),o&512&&(ot||r===null||En(r,r.return)),o&4){var h=r!==null?r.memoizedState:null;if(o=e.memoizedState,r===null)if(o===null)if(e.stateNode===null){e:{o=e.type,r=e.memoizedProps,d=d.ownerDocument||d;t:switch(o){case"title":h=d.getElementsByTagName("title")[0],(!h||h[Wa]||h[dt]||h.namespaceURI==="http://www.w3.org/2000/svg"||h.hasAttribute("itemprop"))&&(h=d.createElement(o),d.head.insertBefore(h,d.querySelector("head > title"))),bt(h,o,r),h[dt]=e,at(h),o=h;break e;case"link":var v=_0("link","href",d).get(o+(r.href||""));if(v){for(var T=0;T<v.length;T++)if(h=v[T],h.getAttribute("href")===(r.href==null||r.href===""?null:r.href)&&h.getAttribute("rel")===(r.rel==null?null:r.rel)&&h.getAttribute("title")===(r.title==null?null:r.title)&&h.getAttribute("crossorigin")===(r.crossOrigin==null?null:r.crossOrigin)){v.splice(T,1);break t}}h=d.createElement(o),bt(h,o,r),d.head.appendChild(h);break;case"meta":if(v=_0("meta","content",d).get(o+(r.content||""))){for(T=0;T<v.length;T++)if(h=v[T],h.getAttribute("content")===(r.content==null?null:""+r.content)&&h.getAttribute("name")===(r.name==null?null:r.name)&&h.getAttribute("property")===(r.property==null?null:r.property)&&h.getAttribute("http-equiv")===(r.httpEquiv==null?null:r.httpEquiv)&&h.getAttribute("charset")===(r.charSet==null?null:r.charSet)){v.splice(T,1);break t}}h=d.createElement(o),bt(h,o,r),d.head.appendChild(h);break;default:throw Error(i(468,o))}h[dt]=e,at(h),o=h}e.stateNode=o}else C0(d,e.type,e.stateNode);else e.stateNode=E0(d,o,e.memoizedProps);else h!==o?(h===null?r.stateNode!==null&&(r=r.stateNode,r.parentNode.removeChild(r)):h.count--,o===null?C0(d,e.type,e.stateNode):E0(d,o,e.memoizedProps)):o===null&&e.stateNode!==null&&zd(e,e.memoizedProps,r.memoizedProps)}break;case 27:Rt(n,e),Dt(e),o&512&&(ot||r===null||En(r,r.return)),r!==null&&o&4&&zd(e,e.memoizedProps,r.memoizedProps);break;case 5:if(Rt(n,e),Dt(e),o&512&&(ot||r===null||En(r,r.return)),e.flags&32){d=e.stateNode;try{Ls(d,"")}catch(fe){Ue(e,e.return,fe)}}o&4&&e.stateNode!=null&&(d=e.memoizedProps,zd(e,d,r!==null?r.memoizedProps:d)),o&1024&&(Hd=!0);break;case 6:if(Rt(n,e),Dt(e),o&4){if(e.stateNode===null)throw Error(i(162));o=e.memoizedProps,r=e.stateNode;try{r.nodeValue=o}catch(fe){Ue(e,e.return,fe)}}break;case 3:if(Rl=null,d=fn,fn=Al(n.containerInfo),Rt(n,e),fn=d,Dt(e),o&4&&r!==null&&r.memoizedState.isDehydrated)try{pr(n.containerInfo)}catch(fe){Ue(e,e.return,fe)}Hd&&(Hd=!1,Cg(e));break;case 4:o=fn,fn=Al(e.stateNode.containerInfo),Rt(n,e),Dt(e),fn=o;break;case 12:Rt(n,e),Dt(e);break;case 31:Rt(n,e),Dt(e),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,gl(e,o)));break;case 13:Rt(n,e),Dt(e),e.child.flags&8192&&e.memoizedState!==null!=(r!==null&&r.memoizedState!==null)&&(yl=et()),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,gl(e,o)));break;case 22:d=e.memoizedState!==null;var $=r!==null&&r.memoizedState!==null,J=Fn,re=ot;if(Fn=J||d,ot=re||$,Rt(n,e),ot=re,Fn=J,Dt(e),o&8192)e:for(n=e.stateNode,n._visibility=d?n._visibility&-2:n._visibility|1,d&&(r===null||$||Fn||ot||ms(e)),r=null,n=e;;){if(n.tag===5||n.tag===26){if(r===null){$=r=n;try{if(h=$.stateNode,d)v=h.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{T=$.stateNode;var oe=$.memoizedProps.style,ee=oe!=null&&oe.hasOwnProperty("display")?oe.display:null;T.style.display=ee==null||typeof ee=="boolean"?"":(""+ee).trim()}}catch(fe){Ue($,$.return,fe)}}}else if(n.tag===6){if(r===null){$=n;try{$.stateNode.nodeValue=d?"":$.memoizedProps}catch(fe){Ue($,$.return,fe)}}}else if(n.tag===18){if(r===null){$=n;try{var ne=$.stateNode;d?g0(ne,!0):g0($.stateNode,!1)}catch(fe){Ue($,$.return,fe)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===e)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;r===n&&(r=null),n=n.return}r===n&&(r=null),n.sibling.return=n.return,n=n.sibling}o&4&&(o=e.updateQueue,o!==null&&(r=o.retryQueue,r!==null&&(o.retryQueue=null,gl(e,r))));break;case 19:Rt(n,e),Dt(e),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,gl(e,o)));break;case 30:break;case 21:break;default:Rt(n,e),Dt(e)}}function Dt(e){var n=e.flags;if(n&2){try{for(var r,o=e.return;o!==null;){if(yg(o)){r=o;break}o=o.return}if(r==null)throw Error(i(160));switch(r.tag){case 27:var d=r.stateNode,h=Od(e);pl(e,h,d);break;case 5:var v=r.stateNode;r.flags&32&&(Ls(v,""),r.flags&=-33);var T=Od(e);pl(e,T,v);break;case 3:case 4:var $=r.stateNode.containerInfo,J=Od(e);Bd(e,J,$);break;default:throw Error(i(161))}}catch(re){Ue(e,e.return,re)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function Cg(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var n=e;Cg(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),e=e.sibling}}function Kn(e,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)wg(e,n.alternate,n),n=n.sibling}function ms(e){for(e=e.child;e!==null;){var n=e;switch(n.tag){case 0:case 11:case 14:case 15:Ta(4,n,n.return),ms(n);break;case 1:En(n,n.return);var r=n.stateNode;typeof r.componentWillUnmount=="function"&&gg(n,n.return,r),ms(n);break;case 27:Ai(n.stateNode);case 26:case 5:En(n,n.return),ms(n);break;case 22:n.memoizedState===null&&ms(n);break;case 30:ms(n);break;default:ms(n)}e=e.sibling}}function Jn(e,n,r){for(r=r&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var o=n.alternate,d=e,h=n,v=h.flags;switch(h.tag){case 0:case 11:case 15:Jn(d,h,r),vi(4,h);break;case 1:if(Jn(d,h,r),o=h,d=o.stateNode,typeof d.componentDidMount=="function")try{d.componentDidMount()}catch(J){Ue(o,o.return,J)}if(o=h,d=o.updateQueue,d!==null){var T=o.stateNode;try{var $=d.shared.hiddenCallbacks;if($!==null)for(d.shared.hiddenCallbacks=null,d=0;d<$.length;d++)sp($[d],T)}catch(J){Ue(o,o.return,J)}}r&&v&64&&pg(h),wi(h,h.return);break;case 27:bg(h);case 26:case 5:Jn(d,h,r),r&&o===null&&v&4&&xg(h),wi(h,h.return);break;case 12:Jn(d,h,r);break;case 31:Jn(d,h,r),r&&v&4&&jg(d,h);break;case 13:Jn(d,h,r),r&&v&4&&Eg(d,h);break;case 22:h.memoizedState===null&&Jn(d,h,r),wi(h,h.return);break;case 30:break;default:Jn(d,h,r)}n=n.sibling}}function Ld(e,n){var r=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(r=e.memoizedState.cachePool.pool),e=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(e=n.memoizedState.cachePool.pool),e!==r&&(e!=null&&e.refCount++,r!=null&&oi(r))}function Ud(e,n){e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&oi(e))}function hn(e,n,r,o){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Tg(e,n,r,o),n=n.sibling}function Tg(e,n,r,o){var d=n.flags;switch(n.tag){case 0:case 11:case 15:hn(e,n,r,o),d&2048&&vi(9,n);break;case 1:hn(e,n,r,o);break;case 3:hn(e,n,r,o),d&2048&&(e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&oi(e)));break;case 12:if(d&2048){hn(e,n,r,o),e=n.stateNode;try{var h=n.memoizedProps,v=h.id,T=h.onPostCommit;typeof T=="function"&&T(v,n.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch($){Ue(n,n.return,$)}}else hn(e,n,r,o);break;case 31:hn(e,n,r,o);break;case 13:hn(e,n,r,o);break;case 23:break;case 22:h=n.stateNode,v=n.alternate,n.memoizedState!==null?h._visibility&2?hn(e,n,r,o):Si(e,n):h._visibility&2?hn(e,n,r,o):(h._visibility|=2,sr(e,n,r,o,(n.subtreeFlags&10256)!==0||!1)),d&2048&&Ld(v,n);break;case 24:hn(e,n,r,o),d&2048&&Ud(n.alternate,n);break;default:hn(e,n,r,o)}}function sr(e,n,r,o,d){for(d=d&&((n.subtreeFlags&10256)!==0||!1),n=n.child;n!==null;){var h=e,v=n,T=r,$=o,J=v.flags;switch(v.tag){case 0:case 11:case 15:sr(h,v,T,$,d),vi(8,v);break;case 23:break;case 22:var re=v.stateNode;v.memoizedState!==null?re._visibility&2?sr(h,v,T,$,d):Si(h,v):(re._visibility|=2,sr(h,v,T,$,d)),d&&J&2048&&Ld(v.alternate,v);break;case 24:sr(h,v,T,$,d),d&&J&2048&&Ud(v.alternate,v);break;default:sr(h,v,T,$,d)}n=n.sibling}}function Si(e,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var r=e,o=n,d=o.flags;switch(o.tag){case 22:Si(r,o),d&2048&&Ld(o.alternate,o);break;case 24:Si(r,o),d&2048&&Ud(o.alternate,o);break;default:Si(r,o)}n=n.sibling}}var Ni=8192;function rr(e,n,r){if(e.subtreeFlags&Ni)for(e=e.child;e!==null;)Mg(e,n,r),e=e.sibling}function Mg(e,n,r){switch(e.tag){case 26:rr(e,n,r),e.flags&Ni&&e.memoizedState!==null&&fw(r,fn,e.memoizedState,e.memoizedProps);break;case 5:rr(e,n,r);break;case 3:case 4:var o=fn;fn=Al(e.stateNode.containerInfo),rr(e,n,r),fn=o;break;case 22:e.memoizedState===null&&(o=e.alternate,o!==null&&o.memoizedState!==null?(o=Ni,Ni=16777216,rr(e,n,r),Ni=o):rr(e,n,r));break;default:rr(e,n,r)}}function Ag(e){var n=e.alternate;if(n!==null&&(e=n.child,e!==null)){n.child=null;do n=e.sibling,e.sibling=null,e=n;while(e!==null)}}function ji(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var r=0;r<n.length;r++){var o=n[r];ht=o,Rg(o,e)}Ag(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)kg(e),e=e.sibling}function kg(e){switch(e.tag){case 0:case 11:case 15:ji(e),e.flags&2048&&Ta(9,e,e.return);break;case 3:ji(e);break;case 12:ji(e);break;case 22:var n=e.stateNode;e.memoizedState!==null&&n._visibility&2&&(e.return===null||e.return.tag!==13)?(n._visibility&=-3,xl(e)):ji(e);break;default:ji(e)}}function xl(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var r=0;r<n.length;r++){var o=n[r];ht=o,Rg(o,e)}Ag(e)}for(e=e.child;e!==null;){switch(n=e,n.tag){case 0:case 11:case 15:Ta(8,n,n.return),xl(n);break;case 22:r=n.stateNode,r._visibility&2&&(r._visibility&=-3,xl(n));break;default:xl(n)}e=e.sibling}}function Rg(e,n){for(;ht!==null;){var r=ht;switch(r.tag){case 0:case 11:case 15:Ta(8,r,n);break;case 23:case 22:if(r.memoizedState!==null&&r.memoizedState.cachePool!==null){var o=r.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:oi(r.memoizedState.cache)}if(o=r.child,o!==null)o.return=r,ht=o;else e:for(r=e;ht!==null;){o=ht;var d=o.sibling,h=o.return;if(Sg(o),o===r){ht=null;break e}if(d!==null){d.return=h,ht=d;break e}ht=h}}}var C2={getCacheForType:function(e){var n=xt(st),r=n.data.get(e);return r===void 0&&(r=e(),n.data.set(e,r)),r},cacheSignal:function(){return xt(st).controller.signal}},T2=typeof WeakMap=="function"?WeakMap:Map,He=0,Ge=null,Me=null,ke=0,Le=0,Vt=null,Ma=!1,ir=!1,$d=!1,ea=0,Je=0,Aa=0,ps=0,qd=0,Yt=0,or=0,Ei=null,zt=null,Vd=!1,yl=0,Dg=0,bl=1/0,vl=null,ka=null,ft=0,Ra=null,lr=null,ta=0,Yd=0,Xd=null,zg=null,_i=0,Gd=null;function Xt(){return(He&2)!==0&&ke!==0?ke&-ke:O.T!==null?Wd():jo()}function Og(){if(Yt===0)if((ke&536870912)===0||De){var e=ks;ks<<=1,(ks&3932160)===0&&(ks=262144),Yt=e}else Yt=536870912;return e=$t.current,e!==null&&(e.flags|=32),Yt}function Ot(e,n,r){(e===Ge&&(Le===2||Le===9)||e.cancelPendingCommit!==null)&&(cr(e,0),Da(e,ke,Yt,!1)),Fa(e,r),((He&2)===0||e!==Ge)&&(e===Ge&&((He&2)===0&&(ps|=r),Je===4&&Da(e,ke,Yt,!1)),_n(e))}function Bg(e,n,r){if((He&6)!==0)throw Error(i(327));var o=!r&&(n&127)===0&&(n&e.expiredLanes)===0||Qa(e,n),d=o?k2(e,n):Pd(e,n,!0),h=o;do{if(d===0){ir&&!o&&Da(e,n,0,!1);break}else{if(r=e.current.alternate,h&&!M2(r)){d=Pd(e,n,!1),h=!1;continue}if(d===2){if(h=n,e.errorRecoveryDisabledLanes&h)var v=0;else v=e.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){n=v;e:{var T=e;d=Ei;var $=T.current.memoizedState.isDehydrated;if($&&(cr(T,v).flags|=256),v=Pd(T,v,!1),v!==2){if($d&&!$){T.errorRecoveryDisabledLanes|=h,ps|=h,d=4;break e}h=zt,zt=d,h!==null&&(zt===null?zt=h:zt.push.apply(zt,h))}d=v}if(h=!1,d!==2)continue}}if(d===1){cr(e,0),Da(e,n,0,!0);break}e:{switch(o=e,h=d,h){case 0:case 1:throw Error(i(345));case 4:if((n&4194048)!==n)break;case 6:Da(o,n,Yt,!Ma);break e;case 2:zt=null;break;case 3:case 5:break;default:throw Error(i(329))}if((n&62914560)===n&&(d=yl+300-et(),10<d)){if(Da(o,n,Yt,!Ma),Ds(o,0,!0)!==0)break e;ta=n,o.timeoutHandle=h0(Hg.bind(null,o,r,zt,vl,Vd,n,Yt,ps,or,Ma,h,"Throttled",-0,0),d);break e}Hg(o,r,zt,vl,Vd,n,Yt,ps,or,Ma,h,null,-0,0)}}break}while(!0);_n(e)}function Hg(e,n,r,o,d,h,v,T,$,J,re,oe,ee,ne){if(e.timeoutHandle=-1,oe=n.subtreeFlags,oe&8192||(oe&16785408)===16785408){oe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:$n},Mg(n,h,oe);var fe=(h&62914560)===h?yl-et():(h&4194048)===h?Dg-et():0;if(fe=hw(oe,fe),fe!==null){ta=h,e.cancelPendingCommit=fe(Gg.bind(null,e,n,h,r,o,d,v,T,$,re,oe,null,ee,ne)),Da(e,h,v,!J);return}}Gg(e,n,h,r,o,d,v,T,$)}function M2(e){for(var n=e;;){var r=n.tag;if((r===0||r===11||r===15)&&n.flags&16384&&(r=n.updateQueue,r!==null&&(r=r.stores,r!==null)))for(var o=0;o<r.length;o++){var d=r[o],h=d.getSnapshot;d=d.value;try{if(!Lt(h(),d))return!1}catch{return!1}}if(r=n.child,n.subtreeFlags&16384&&r!==null)r.return=n,n=r;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function Da(e,n,r,o){n&=~qd,n&=~ps,e.suspendedLanes|=n,e.pingedLanes&=~n,o&&(e.warmLanes|=n),o=e.expirationTimes;for(var d=n;0<d;){var h=31-jt(d),v=1<<h;o[h]=-1,d&=~v}r!==0&&wo(e,r,n)}function wl(){return(He&6)===0?(Ci(0),!1):!0}function Id(){if(Me!==null){if(Le===0)var e=Me.return;else e=Me,Xn=is=null,ld(e),Js=null,ci=0,e=Me;for(;e!==null;)mg(e.alternate,e),e=e.return;Me=null}}function cr(e,n){var r=e.timeoutHandle;r!==-1&&(e.timeoutHandle=-1,Q2(r)),r=e.cancelPendingCommit,r!==null&&(e.cancelPendingCommit=null,r()),ta=0,Id(),Ge=e,Me=r=Vn(e.current,null),ke=n,Le=0,Vt=null,Ma=!1,ir=Qa(e,n),$d=!1,or=Yt=qd=ps=Aa=Je=0,zt=Ei=null,Vd=!1,(n&8)!==0&&(n|=n&32);var o=e.entangledLanes;if(o!==0)for(e=e.entanglements,o&=n;0<o;){var d=31-jt(o),h=1<<d;n|=e[d],o&=~h}return ea=n,Vo(),r}function Lg(e,n){Ne=null,O.H=xi,n===Ks||n===Fo?(n=ep(),Le=3):n===Fu?(n=ep(),Le=4):Le=n===jd?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,Vt=n,Me===null&&(Je=1,ul(e,Kt(n,e.current)))}function Ug(){var e=$t.current;return e===null?!0:(ke&4194048)===ke?nn===null:(ke&62914560)===ke||(ke&536870912)!==0?e===nn:!1}function $g(){var e=O.H;return O.H=xi,e===null?xi:e}function qg(){var e=O.A;return O.A=C2,e}function Sl(){Je=4,Ma||(ke&4194048)!==ke&&$t.current!==null||(ir=!0),(Aa&134217727)===0&&(ps&134217727)===0||Ge===null||Da(Ge,ke,Yt,!1)}function Pd(e,n,r){var o=He;He|=2;var d=$g(),h=qg();(Ge!==e||ke!==n)&&(vl=null,cr(e,n)),n=!1;var v=Je;e:do try{if(Le!==0&&Me!==null){var T=Me,$=Vt;switch(Le){case 8:Id(),v=6;break e;case 3:case 2:case 9:case 6:$t.current===null&&(n=!0);var J=Le;if(Le=0,Vt=null,ur(e,T,$,J),r&&ir){v=0;break e}break;default:J=Le,Le=0,Vt=null,ur(e,T,$,J)}}A2(),v=Je;break}catch(re){Lg(e,re)}while(!0);return n&&e.shellSuspendCounter++,Xn=is=null,He=o,O.H=d,O.A=h,Me===null&&(Ge=null,ke=0,Vo()),v}function A2(){for(;Me!==null;)Vg(Me)}function k2(e,n){var r=He;He|=2;var o=$g(),d=qg();Ge!==e||ke!==n?(vl=null,bl=et()+500,cr(e,n)):ir=Qa(e,n);e:do try{if(Le!==0&&Me!==null){n=Me;var h=Vt;t:switch(Le){case 1:Le=0,Vt=null,ur(e,n,h,1);break;case 2:case 9:if(Km(h)){Le=0,Vt=null,Yg(n);break}n=function(){Le!==2&&Le!==9||Ge!==e||(Le=7),_n(e)},h.then(n,n);break e;case 3:Le=7;break e;case 4:Le=5;break e;case 7:Km(h)?(Le=0,Vt=null,Yg(n)):(Le=0,Vt=null,ur(e,n,h,7));break;case 5:var v=null;switch(Me.tag){case 26:v=Me.memoizedState;case 5:case 27:var T=Me;if(v?T0(v):T.stateNode.complete){Le=0,Vt=null;var $=T.sibling;if($!==null)Me=$;else{var J=T.return;J!==null?(Me=J,Nl(J)):Me=null}break t}}Le=0,Vt=null,ur(e,n,h,5);break;case 6:Le=0,Vt=null,ur(e,n,h,6);break;case 8:Id(),Je=6;break e;default:throw Error(i(462))}}R2();break}catch(re){Lg(e,re)}while(!0);return Xn=is=null,O.H=o,O.A=d,He=r,Me!==null?0:(Ge=null,ke=0,Vo(),Je)}function R2(){for(;Me!==null&&!vn();)Vg(Me)}function Vg(e){var n=fg(e.alternate,e,ea);e.memoizedProps=e.pendingProps,n===null?Nl(e):Me=n}function Yg(e){var n=e,r=n.alternate;switch(n.tag){case 15:case 0:n=ig(r,n,n.pendingProps,n.type,void 0,ke);break;case 11:n=ig(r,n,n.pendingProps,n.type.render,n.ref,ke);break;case 5:ld(n);default:mg(r,n),n=Me=qm(n,ea),n=fg(r,n,ea)}e.memoizedProps=e.pendingProps,n===null?Nl(e):Me=n}function ur(e,n,r,o){Xn=is=null,ld(n),Js=null,ci=0;var d=n.return;try{if(v2(e,d,n,r,ke)){Je=1,ul(e,Kt(r,e.current)),Me=null;return}}catch(h){if(d!==null)throw Me=d,h;Je=1,ul(e,Kt(r,e.current)),Me=null;return}n.flags&32768?(De||o===1?e=!0:ir||(ke&536870912)!==0?e=!1:(Ma=e=!0,(o===2||o===9||o===3||o===6)&&(o=$t.current,o!==null&&o.tag===13&&(o.flags|=16384))),Xg(n,e)):Nl(n)}function Nl(e){var n=e;do{if((n.flags&32768)!==0){Xg(n,Ma);return}e=n.return;var r=N2(n.alternate,n,ea);if(r!==null){Me=r;return}if(n=n.sibling,n!==null){Me=n;return}Me=n=e}while(n!==null);Je===0&&(Je=5)}function Xg(e,n){do{var r=j2(e.alternate,e);if(r!==null){r.flags&=32767,Me=r;return}if(r=e.return,r!==null&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!n&&(e=e.sibling,e!==null)){Me=e;return}Me=e=r}while(e!==null);Je=6,Me=null}function Gg(e,n,r,o,d,h,v,T,$){e.cancelPendingCommit=null;do jl();while(ft!==0);if((He&6)!==0)throw Error(i(327));if(n!==null){if(n===e.current)throw Error(i(177));if(h=n.lanes|n.childLanes,h|=Ou,du(e,r,h,v,T,$),e===Ge&&(Me=Ge=null,ke=0),lr=n,Ra=e,ta=r,Yd=h,Xd=d,zg=o,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,B2(cn,function(){return Fg(),null})):(e.callbackNode=null,e.callbackPriority=0),o=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||o){o=O.T,O.T=null,d=B.p,B.p=2,v=He,He|=4;try{E2(e,n,r)}finally{He=v,B.p=d,O.T=o}}ft=1,Ig(),Pg(),Zg()}}function Ig(){if(ft===1){ft=0;var e=Ra,n=lr,r=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||r){r=O.T,O.T=null;var o=B.p;B.p=2;var d=He;He|=4;try{_g(n,e);var h=rf,v=Rm(e.containerInfo),T=h.focusedElem,$=h.selectionRange;if(v!==T&&T&&T.ownerDocument&&km(T.ownerDocument.documentElement,T)){if($!==null&&Au(T)){var J=$.start,re=$.end;if(re===void 0&&(re=J),"selectionStart"in T)T.selectionStart=J,T.selectionEnd=Math.min(re,T.value.length);else{var oe=T.ownerDocument||document,ee=oe&&oe.defaultView||window;if(ee.getSelection){var ne=ee.getSelection(),fe=T.textContent.length,be=Math.min($.start,fe),Xe=$.end===void 0?be:Math.min($.end,fe);!ne.extend&&be>Xe&&(v=Xe,Xe=be,be=v);var P=Am(T,be),G=Am(T,Xe);if(P&&G&&(ne.rangeCount!==1||ne.anchorNode!==P.node||ne.anchorOffset!==P.offset||ne.focusNode!==G.node||ne.focusOffset!==G.offset)){var K=oe.createRange();K.setStart(P.node,P.offset),ne.removeAllRanges(),be>Xe?(ne.addRange(K),ne.extend(G.node,G.offset)):(K.setEnd(G.node,G.offset),ne.addRange(K))}}}}for(oe=[],ne=T;ne=ne.parentNode;)ne.nodeType===1&&oe.push({element:ne,left:ne.scrollLeft,top:ne.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<oe.length;T++){var ie=oe[T];ie.element.scrollLeft=ie.left,ie.element.scrollTop=ie.top}}Bl=!!sf,rf=sf=null}finally{He=d,B.p=o,O.T=r}}e.current=n,ft=2}}function Pg(){if(ft===2){ft=0;var e=Ra,n=lr,r=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||r){r=O.T,O.T=null;var o=B.p;B.p=2;var d=He;He|=4;try{wg(e,n.alternate,n)}finally{He=d,B.p=o,O.T=r}}ft=3}}function Zg(){if(ft===4||ft===3){ft=0,On();var e=Ra,n=lr,r=ta,o=zg;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?ft=5:(ft=0,lr=Ra=null,Qg(e,e.pendingLanes));var d=e.pendingLanes;if(d===0&&(ka=null),Ir(r),n=n.stateNode,Nt&&typeof Nt.onCommitFiberRoot=="function")try{Nt.onCommitFiberRoot(Za,n,void 0,(n.current.flags&128)===128)}catch{}if(o!==null){n=O.T,d=B.p,B.p=2,O.T=null;try{for(var h=e.onRecoverableError,v=0;v<o.length;v++){var T=o[v];h(T.value,{componentStack:T.stack})}}finally{O.T=n,B.p=d}}(ta&3)!==0&&jl(),_n(e),d=e.pendingLanes,(r&261930)!==0&&(d&42)!==0?e===Gd?_i++:(_i=0,Gd=e):_i=0,Ci(0)}}function Qg(e,n){(e.pooledCacheLanes&=n)===0&&(n=e.pooledCache,n!=null&&(e.pooledCache=null,oi(n)))}function jl(){return Ig(),Pg(),Zg(),Fg()}function Fg(){if(ft!==5)return!1;var e=Ra,n=Yd;Yd=0;var r=Ir(ta),o=O.T,d=B.p;try{B.p=32>r?32:r,O.T=null,r=Xd,Xd=null;var h=Ra,v=ta;if(ft=0,lr=Ra=null,ta=0,(He&6)!==0)throw Error(i(331));var T=He;if(He|=4,kg(h.current),Tg(h,h.current,v,r),He=T,Ci(0,!1),Nt&&typeof Nt.onPostCommitFiberRoot=="function")try{Nt.onPostCommitFiberRoot(Za,h)}catch{}return!0}finally{B.p=d,O.T=o,Qg(e,n)}}function Wg(e,n,r){n=Kt(r,n),n=Nd(e.stateNode,n,2),e=Ea(e,n,2),e!==null&&(Fa(e,2),_n(e))}function Ue(e,n,r){if(e.tag===3)Wg(e,e,r);else for(;n!==null;){if(n.tag===3){Wg(n,e,r);break}else if(n.tag===1){var o=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(ka===null||!ka.has(o))){e=Kt(r,e),r=Kp(2),o=Ea(n,r,2),o!==null&&(Jp(r,o,n,e),Fa(o,2),_n(o));break}}n=n.return}}function Zd(e,n,r){var o=e.pingCache;if(o===null){o=e.pingCache=new T2;var d=new Set;o.set(n,d)}else d=o.get(n),d===void 0&&(d=new Set,o.set(n,d));d.has(r)||($d=!0,d.add(r),e=D2.bind(null,e,n,r),n.then(e,e))}function D2(e,n,r){var o=e.pingCache;o!==null&&o.delete(n),e.pingedLanes|=e.suspendedLanes&r,e.warmLanes&=~r,Ge===e&&(ke&r)===r&&(Je===4||Je===3&&(ke&62914560)===ke&&300>et()-yl?(He&2)===0&&cr(e,0):qd|=r,or===ke&&(or=0)),_n(e)}function Kg(e,n){n===0&&(n=vo()),e=as(e,n),e!==null&&(Fa(e,n),_n(e))}function z2(e){var n=e.memoizedState,r=0;n!==null&&(r=n.retryLane),Kg(e,r)}function O2(e,n){var r=0;switch(e.tag){case 31:case 13:var o=e.stateNode,d=e.memoizedState;d!==null&&(r=d.retryLane);break;case 19:o=e.stateNode;break;case 22:o=e.stateNode._retryCache;break;default:throw Error(i(314))}o!==null&&o.delete(n),Kg(e,r)}function B2(e,n){return Ct(e,n)}var El=null,dr=null,Qd=!1,_l=!1,Fd=!1,za=0;function _n(e){e!==dr&&e.next===null&&(dr===null?El=dr=e:dr=dr.next=e),_l=!0,Qd||(Qd=!0,L2())}function Ci(e,n){if(!Fd&&_l){Fd=!0;do for(var r=!1,o=El;o!==null;){if(e!==0){var d=o.pendingLanes;if(d===0)var h=0;else{var v=o.suspendedLanes,T=o.pingedLanes;h=(1<<31-jt(42|e)+1)-1,h&=d&~(v&~T),h=h&201326741?h&201326741|1:h?h|2:0}h!==0&&(r=!0,n0(o,h))}else h=ke,h=Ds(o,o===Ge?h:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(h&3)===0||Qa(o,h)||(r=!0,n0(o,h));o=o.next}while(r);Fd=!1}}function H2(){Jg()}function Jg(){_l=Qd=!1;var e=0;za!==0&&Z2()&&(e=za);for(var n=et(),r=null,o=El;o!==null;){var d=o.next,h=e0(o,n);h===0?(o.next=null,r===null?El=d:r.next=d,d===null&&(dr=r)):(r=o,(e!==0||(h&3)!==0)&&(_l=!0)),o=d}ft!==0&&ft!==5||Ci(e),za!==0&&(za=0)}function e0(e,n){for(var r=e.suspendedLanes,o=e.pingedLanes,d=e.expirationTimes,h=e.pendingLanes&-62914561;0<h;){var v=31-jt(h),T=1<<v,$=d[v];$===-1?((T&r)===0||(T&o)!==0)&&(d[v]=uu(T,n)):$<=n&&(e.expiredLanes|=T),h&=~T}if(n=Ge,r=ke,r=Ds(e,e===n?r:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o=e.callbackNode,r===0||e===n&&(Le===2||Le===9)||e.cancelPendingCommit!==null)return o!==null&&o!==null&&Ft(o),e.callbackNode=null,e.callbackPriority=0;if((r&3)===0||Qa(e,r)){if(n=r&-r,n===e.callbackPriority)return n;switch(o!==null&&Ft(o),Ir(r)){case 2:case 8:r=ln;break;case 32:r=cn;break;case 268435456:r=Ms;break;default:r=cn}return o=t0.bind(null,e),r=Ct(r,o),e.callbackPriority=n,e.callbackNode=r,n}return o!==null&&o!==null&&Ft(o),e.callbackPriority=2,e.callbackNode=null,2}function t0(e,n){if(ft!==0&&ft!==5)return e.callbackNode=null,e.callbackPriority=0,null;var r=e.callbackNode;if(jl()&&e.callbackNode!==r)return null;var o=ke;return o=Ds(e,e===Ge?o:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o===0?null:(Bg(e,o,n),e0(e,et()),e.callbackNode!=null&&e.callbackNode===r?t0.bind(null,e):null)}function n0(e,n){if(jl())return null;Bg(e,n,!0)}function L2(){F2(function(){(He&6)!==0?Ct(pt,H2):Jg()})}function Wd(){if(za===0){var e=Fs;e===0&&(e=As,As<<=1,(As&261888)===0&&(As=256)),za=e}return za}function a0(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:zo(""+e)}function s0(e,n){var r=n.ownerDocument.createElement("input");return r.name=n.name,r.value=n.value,e.id&&r.setAttribute("form",e.id),n.parentNode.insertBefore(r,n),e=new FormData(e),r.parentNode.removeChild(r),e}function U2(e,n,r,o,d){if(n==="submit"&&r&&r.stateNode===d){var h=a0((d[wt]||null).action),v=o.submitter;v&&(n=(n=v[wt]||null)?a0(n.formAction):v.getAttribute("formAction"),n!==null&&(h=n,v=null));var T=new Lo("action","action",null,o,d);e.push({event:T,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(za!==0){var $=v?s0(d,v):new FormData(d);xd(r,{pending:!0,data:$,method:d.method,action:h},null,$)}}else typeof h=="function"&&(T.preventDefault(),$=v?s0(d,v):new FormData(d),xd(r,{pending:!0,data:$,method:d.method,action:h},h,$))},currentTarget:d}]})}}for(var Kd=0;Kd<zu.length;Kd++){var Jd=zu[Kd],$2=Jd.toLowerCase(),q2=Jd[0].toUpperCase()+Jd.slice(1);dn($2,"on"+q2)}dn(Om,"onAnimationEnd"),dn(Bm,"onAnimationIteration"),dn(Hm,"onAnimationStart"),dn("dblclick","onDoubleClick"),dn("focusin","onFocus"),dn("focusout","onBlur"),dn(a2,"onTransitionRun"),dn(s2,"onTransitionStart"),dn(r2,"onTransitionCancel"),dn(Lm,"onTransitionEnd"),xa("onMouseEnter",["mouseout","mouseover"]),xa("onMouseLeave",["mouseout","mouseover"]),xa("onPointerEnter",["pointerout","pointerover"]),xa("onPointerLeave",["pointerout","pointerover"]),Ln("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ln("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ln("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ln("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ln("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ln("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ti="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),V2=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ti));function r0(e,n){n=(n&4)!==0;for(var r=0;r<e.length;r++){var o=e[r],d=o.event;o=o.listeners;e:{var h=void 0;if(n)for(var v=o.length-1;0<=v;v--){var T=o[v],$=T.instance,J=T.currentTarget;if(T=T.listener,$!==h&&d.isPropagationStopped())break e;h=T,d.currentTarget=J;try{h(d)}catch(re){qo(re)}d.currentTarget=null,h=$}else for(v=0;v<o.length;v++){if(T=o[v],$=T.instance,J=T.currentTarget,T=T.listener,$!==h&&d.isPropagationStopped())break e;h=T,d.currentTarget=J;try{h(d)}catch(re){qo(re)}d.currentTarget=null,h=$}}}}function Ae(e,n){var r=n[zs];r===void 0&&(r=n[zs]=new Set);var o=e+"__bubble";r.has(o)||(i0(n,e,2,!1),r.add(o))}function ef(e,n,r){var o=0;n&&(o|=4),i0(r,e,o,n)}var Cl="_reactListening"+Math.random().toString(36).slice(2);function tf(e){if(!e[Cl]){e[Cl]=!0,To.forEach(function(r){r!=="selectionchange"&&(V2.has(r)||ef(r,!1,e),ef(r,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[Cl]||(n[Cl]=!0,ef("selectionchange",!1,n))}}function i0(e,n,r,o){switch(O0(n)){case 2:var d=gw;break;case 8:d=xw;break;default:d=xf}r=d.bind(null,n,r,e),d=void 0,!wu||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(d=!0),o?d!==void 0?e.addEventListener(n,r,{capture:!0,passive:d}):e.addEventListener(n,r,!0):d!==void 0?e.addEventListener(n,r,{passive:d}):e.addEventListener(n,r,!1)}function nf(e,n,r,o,d){var h=o;if((n&1)===0&&(n&2)===0&&o!==null)e:for(;;){if(o===null)return;var v=o.tag;if(v===3||v===4){var T=o.stateNode.containerInfo;if(T===d)break;if(v===4)for(v=o.return;v!==null;){var $=v.tag;if(($===3||$===4)&&v.stateNode.containerInfo===d)return;v=v.return}for(;T!==null;){if(v=ha(T),v===null)return;if($=v.tag,$===5||$===6||$===26||$===27){o=h=v;continue e}T=T.parentNode}}o=o.return}dm(function(){var J=h,re=bu(r),oe=[];e:{var ee=Um.get(e);if(ee!==void 0){var ne=Lo,fe=e;switch(e){case"keypress":if(Bo(r)===0)break e;case"keydown":case"keyup":ne=Ov;break;case"focusin":fe="focus",ne=Eu;break;case"focusout":fe="blur",ne=Eu;break;case"beforeblur":case"afterblur":ne=Eu;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ne=mm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ne=Nv;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ne=Lv;break;case Om:case Bm:case Hm:ne=_v;break;case Lm:ne=$v;break;case"scroll":case"scrollend":ne=wv;break;case"wheel":ne=Vv;break;case"copy":case"cut":case"paste":ne=Tv;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ne=gm;break;case"toggle":case"beforetoggle":ne=Xv}var be=(n&4)!==0,Xe=!be&&(e==="scroll"||e==="scrollend"),P=be?ee!==null?ee+"Capture":null:ee;be=[];for(var G=J,K;G!==null;){var ie=G;if(K=ie.stateNode,ie=ie.tag,ie!==5&&ie!==26&&ie!==27||K===null||P===null||(ie=Fr(G,P),ie!=null&&be.push(Mi(G,ie,K))),Xe)break;G=G.return}0<be.length&&(ee=new ne(ee,fe,null,r,re),oe.push({event:ee,listeners:be}))}}if((n&7)===0){e:{if(ee=e==="mouseover"||e==="pointerover",ne=e==="mouseout"||e==="pointerout",ee&&r!==yu&&(fe=r.relatedTarget||r.fromElement)&&(ha(fe)||fe[Hn]))break e;if((ne||ee)&&(ee=re.window===re?re:(ee=re.ownerDocument)?ee.defaultView||ee.parentWindow:window,ne?(fe=r.relatedTarget||r.toElement,ne=J,fe=fe?ha(fe):null,fe!==null&&(Xe=u(fe),be=fe.tag,fe!==Xe||be!==5&&be!==27&&be!==6)&&(fe=null)):(ne=null,fe=J),ne!==fe)){if(be=mm,ie="onMouseLeave",P="onMouseEnter",G="mouse",(e==="pointerout"||e==="pointerover")&&(be=gm,ie="onPointerLeave",P="onPointerEnter",G="pointer"),Xe=ne==null?ee:pa(ne),K=fe==null?ee:pa(fe),ee=new be(ie,G+"leave",ne,r,re),ee.target=Xe,ee.relatedTarget=K,ie=null,ha(re)===J&&(be=new be(P,G+"enter",fe,r,re),be.target=K,be.relatedTarget=Xe,ie=be),Xe=ie,ne&&fe)t:{for(be=Y2,P=ne,G=fe,K=0,ie=P;ie;ie=be(ie))K++;ie=0;for(var ye=G;ye;ye=be(ye))ie++;for(;0<K-ie;)P=be(P),K--;for(;0<ie-K;)G=be(G),ie--;for(;K--;){if(P===G||G!==null&&P===G.alternate){be=P;break t}P=be(P),G=be(G)}be=null}else be=null;ne!==null&&o0(oe,ee,ne,be,!1),fe!==null&&Xe!==null&&o0(oe,Xe,fe,be,!0)}}e:{if(ee=J?pa(J):window,ne=ee.nodeName&&ee.nodeName.toLowerCase(),ne==="select"||ne==="input"&&ee.type==="file")var Oe=jm;else if(Sm(ee))if(Em)Oe=e2;else{Oe=Kv;var he=Wv}else ne=ee.nodeName,!ne||ne.toLowerCase()!=="input"||ee.type!=="checkbox"&&ee.type!=="radio"?J&&xu(J.elementType)&&(Oe=jm):Oe=Jv;if(Oe&&(Oe=Oe(e,J))){Nm(oe,Oe,r,re);break e}he&&he(e,ee,J),e==="focusout"&&J&&ee.type==="number"&&J.memoizedProps.value!=null&&Qr(ee,"number",ee.value)}switch(he=J?pa(J):window,e){case"focusin":(Sm(he)||he.contentEditable==="true")&&(Vs=he,ku=J,si=null);break;case"focusout":si=ku=Vs=null;break;case"mousedown":Ru=!0;break;case"contextmenu":case"mouseup":case"dragend":Ru=!1,Dm(oe,r,re);break;case"selectionchange":if(n2)break;case"keydown":case"keyup":Dm(oe,r,re)}var Ee;if(Cu)e:{switch(e){case"compositionstart":var Re="onCompositionStart";break e;case"compositionend":Re="onCompositionEnd";break e;case"compositionupdate":Re="onCompositionUpdate";break e}Re=void 0}else qs?vm(e,r)&&(Re="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(Re="onCompositionStart");Re&&(xm&&r.locale!=="ko"&&(qs||Re!=="onCompositionStart"?Re==="onCompositionEnd"&&qs&&(Ee=fm()):(ya=re,Su="value"in ya?ya.value:ya.textContent,qs=!0)),he=Tl(J,Re),0<he.length&&(Re=new pm(Re,e,null,r,re),oe.push({event:Re,listeners:he}),Ee?Re.data=Ee:(Ee=wm(r),Ee!==null&&(Re.data=Ee)))),(Ee=Iv?Pv(e,r):Zv(e,r))&&(Re=Tl(J,"onBeforeInput"),0<Re.length&&(he=new pm("onBeforeInput","beforeinput",null,r,re),oe.push({event:he,listeners:Re}),he.data=Ee)),U2(oe,e,J,r,re)}r0(oe,n)})}function Mi(e,n,r){return{instance:e,listener:n,currentTarget:r}}function Tl(e,n){for(var r=n+"Capture",o=[];e!==null;){var d=e,h=d.stateNode;if(d=d.tag,d!==5&&d!==26&&d!==27||h===null||(d=Fr(e,r),d!=null&&o.unshift(Mi(e,d,h)),d=Fr(e,n),d!=null&&o.push(Mi(e,d,h))),e.tag===3)return o;e=e.return}return[]}function Y2(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function o0(e,n,r,o,d){for(var h=n._reactName,v=[];r!==null&&r!==o;){var T=r,$=T.alternate,J=T.stateNode;if(T=T.tag,$!==null&&$===o)break;T!==5&&T!==26&&T!==27||J===null||($=J,d?(J=Fr(r,h),J!=null&&v.unshift(Mi(r,J,$))):d||(J=Fr(r,h),J!=null&&v.push(Mi(r,J,$)))),r=r.return}v.length!==0&&e.push({event:n,listeners:v})}var X2=/\r\n?/g,G2=/\u0000|\uFFFD/g;function l0(e){return(typeof e=="string"?e:""+e).replace(X2,`
`).replace(G2,"")}function c0(e,n){return n=l0(n),l0(e)===n}function Ye(e,n,r,o,d,h){switch(r){case"children":typeof o=="string"?n==="body"||n==="textarea"&&o===""||Ls(e,o):(typeof o=="number"||typeof o=="bigint")&&n!=="body"&&Ls(e,""+o);break;case"className":Bs(e,"class",o);break;case"tabIndex":Bs(e,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":Bs(e,r,o);break;case"style":cm(e,o,h);break;case"data":if(n!=="object"){Bs(e,"data",o);break}case"src":case"href":if(o===""&&(n!=="a"||r!=="href")){e.removeAttribute(r);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(r);break}o=zo(""+o),e.setAttribute(r,o);break;case"action":case"formAction":if(typeof o=="function"){e.setAttribute(r,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof h=="function"&&(r==="formAction"?(n!=="input"&&Ye(e,n,"name",d.name,d,null),Ye(e,n,"formEncType",d.formEncType,d,null),Ye(e,n,"formMethod",d.formMethod,d,null),Ye(e,n,"formTarget",d.formTarget,d,null)):(Ye(e,n,"encType",d.encType,d,null),Ye(e,n,"method",d.method,d,null),Ye(e,n,"target",d.target,d,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(r);break}o=zo(""+o),e.setAttribute(r,o);break;case"onClick":o!=null&&(e.onclick=$n);break;case"onScroll":o!=null&&Ae("scroll",e);break;case"onScrollEnd":o!=null&&Ae("scrollend",e);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(i(61));if(r=o.__html,r!=null){if(d.children!=null)throw Error(i(60));e.innerHTML=r}}break;case"multiple":e.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":e.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){e.removeAttribute("xlink:href");break}r=zo(""+o),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(r,""+o):e.removeAttribute(r);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(r,""):e.removeAttribute(r);break;case"capture":case"download":o===!0?e.setAttribute(r,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(r,o):e.removeAttribute(r);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?e.setAttribute(r,o):e.removeAttribute(r);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?e.removeAttribute(r):e.setAttribute(r,o);break;case"popover":Ae("beforetoggle",e),Ae("toggle",e),Os(e,"popover",o);break;case"xlinkActuate":un(e,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":un(e,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":un(e,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":un(e,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":un(e,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":un(e,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":un(e,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":un(e,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":un(e,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":Os(e,"is",o);break;case"innerText":case"textContent":break;default:(!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(r=bv.get(r)||r,Os(e,r,o))}}function af(e,n,r,o,d,h){switch(r){case"style":cm(e,o,h);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(i(61));if(r=o.__html,r!=null){if(d.children!=null)throw Error(i(60));e.innerHTML=r}}break;case"children":typeof o=="string"?Ls(e,o):(typeof o=="number"||typeof o=="bigint")&&Ls(e,""+o);break;case"onScroll":o!=null&&Ae("scroll",e);break;case"onScrollEnd":o!=null&&Ae("scrollend",e);break;case"onClick":o!=null&&(e.onclick=$n);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Mo.hasOwnProperty(r))e:{if(r[0]==="o"&&r[1]==="n"&&(d=r.endsWith("Capture"),n=r.slice(2,d?r.length-7:void 0),h=e[wt]||null,h=h!=null?h[r]:null,typeof h=="function"&&e.removeEventListener(n,h,d),typeof o=="function")){typeof h!="function"&&h!==null&&(r in e?e[r]=null:e.hasAttribute(r)&&e.removeAttribute(r)),e.addEventListener(n,o,d);break e}r in e?e[r]=o:o===!0?e.setAttribute(r,""):Os(e,r,o)}}}function bt(e,n,r){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ae("error",e),Ae("load",e);var o=!1,d=!1,h;for(h in r)if(r.hasOwnProperty(h)){var v=r[h];if(v!=null)switch(h){case"src":o=!0;break;case"srcSet":d=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,n));default:Ye(e,n,h,v,r,null)}}d&&Ye(e,n,"srcSet",r.srcSet,r,null),o&&Ye(e,n,"src",r.src,r,null);return;case"input":Ae("invalid",e);var T=h=v=d=null,$=null,J=null;for(o in r)if(r.hasOwnProperty(o)){var re=r[o];if(re!=null)switch(o){case"name":d=re;break;case"type":v=re;break;case"checked":$=re;break;case"defaultChecked":J=re;break;case"value":h=re;break;case"defaultValue":T=re;break;case"children":case"dangerouslySetInnerHTML":if(re!=null)throw Error(i(137,n));break;default:Ye(e,n,o,re,r,null)}}Do(e,h,T,$,J,v,d,!1);return;case"select":Ae("invalid",e),o=v=h=null;for(d in r)if(r.hasOwnProperty(d)&&(T=r[d],T!=null))switch(d){case"value":h=T;break;case"defaultValue":v=T;break;case"multiple":o=T;default:Ye(e,n,d,T,r,null)}n=h,r=v,e.multiple=!!o,n!=null?Un(e,!!o,n,!1):r!=null&&Un(e,!!o,r,!0);return;case"textarea":Ae("invalid",e),h=d=o=null;for(v in r)if(r.hasOwnProperty(v)&&(T=r[v],T!=null))switch(v){case"value":o=T;break;case"defaultValue":d=T;break;case"children":h=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(i(91));break;default:Ye(e,n,v,T,r,null)}om(e,o,d,h);return;case"option":for($ in r)r.hasOwnProperty($)&&(o=r[$],o!=null)&&($==="selected"?e.selected=o&&typeof o!="function"&&typeof o!="symbol":Ye(e,n,$,o,r,null));return;case"dialog":Ae("beforetoggle",e),Ae("toggle",e),Ae("cancel",e),Ae("close",e);break;case"iframe":case"object":Ae("load",e);break;case"video":case"audio":for(o=0;o<Ti.length;o++)Ae(Ti[o],e);break;case"image":Ae("error",e),Ae("load",e);break;case"details":Ae("toggle",e);break;case"embed":case"source":case"link":Ae("error",e),Ae("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(J in r)if(r.hasOwnProperty(J)&&(o=r[J],o!=null))switch(J){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,n));default:Ye(e,n,J,o,r,null)}return;default:if(xu(n)){for(re in r)r.hasOwnProperty(re)&&(o=r[re],o!==void 0&&af(e,n,re,o,r,void 0));return}}for(T in r)r.hasOwnProperty(T)&&(o=r[T],o!=null&&Ye(e,n,T,o,r,null))}function I2(e,n,r,o){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var d=null,h=null,v=null,T=null,$=null,J=null,re=null;for(ne in r){var oe=r[ne];if(r.hasOwnProperty(ne)&&oe!=null)switch(ne){case"checked":break;case"value":break;case"defaultValue":$=oe;default:o.hasOwnProperty(ne)||Ye(e,n,ne,null,o,oe)}}for(var ee in o){var ne=o[ee];if(oe=r[ee],o.hasOwnProperty(ee)&&(ne!=null||oe!=null))switch(ee){case"type":h=ne;break;case"name":d=ne;break;case"checked":J=ne;break;case"defaultChecked":re=ne;break;case"value":v=ne;break;case"defaultValue":T=ne;break;case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(i(137,n));break;default:ne!==oe&&Ye(e,n,ee,ne,o,oe)}}Ja(e,v,T,$,J,re,h,d);return;case"select":ne=v=T=ee=null;for(h in r)if($=r[h],r.hasOwnProperty(h)&&$!=null)switch(h){case"value":break;case"multiple":ne=$;default:o.hasOwnProperty(h)||Ye(e,n,h,null,o,$)}for(d in o)if(h=o[d],$=r[d],o.hasOwnProperty(d)&&(h!=null||$!=null))switch(d){case"value":ee=h;break;case"defaultValue":T=h;break;case"multiple":v=h;default:h!==$&&Ye(e,n,d,h,o,$)}n=T,r=v,o=ne,ee!=null?Un(e,!!r,ee,!1):!!o!=!!r&&(n!=null?Un(e,!!r,n,!0):Un(e,!!r,r?[]:"",!1));return;case"textarea":ne=ee=null;for(T in r)if(d=r[T],r.hasOwnProperty(T)&&d!=null&&!o.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:Ye(e,n,T,null,o,d)}for(v in o)if(d=o[v],h=r[v],o.hasOwnProperty(v)&&(d!=null||h!=null))switch(v){case"value":ee=d;break;case"defaultValue":ne=d;break;case"children":break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(i(91));break;default:d!==h&&Ye(e,n,v,d,o,h)}im(e,ee,ne);return;case"option":for(var fe in r)ee=r[fe],r.hasOwnProperty(fe)&&ee!=null&&!o.hasOwnProperty(fe)&&(fe==="selected"?e.selected=!1:Ye(e,n,fe,null,o,ee));for($ in o)ee=o[$],ne=r[$],o.hasOwnProperty($)&&ee!==ne&&(ee!=null||ne!=null)&&($==="selected"?e.selected=ee&&typeof ee!="function"&&typeof ee!="symbol":Ye(e,n,$,ee,o,ne));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var be in r)ee=r[be],r.hasOwnProperty(be)&&ee!=null&&!o.hasOwnProperty(be)&&Ye(e,n,be,null,o,ee);for(J in o)if(ee=o[J],ne=r[J],o.hasOwnProperty(J)&&ee!==ne&&(ee!=null||ne!=null))switch(J){case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(i(137,n));break;default:Ye(e,n,J,ee,o,ne)}return;default:if(xu(n)){for(var Xe in r)ee=r[Xe],r.hasOwnProperty(Xe)&&ee!==void 0&&!o.hasOwnProperty(Xe)&&af(e,n,Xe,void 0,o,ee);for(re in o)ee=o[re],ne=r[re],!o.hasOwnProperty(re)||ee===ne||ee===void 0&&ne===void 0||af(e,n,re,ee,o,ne);return}}for(var P in r)ee=r[P],r.hasOwnProperty(P)&&ee!=null&&!o.hasOwnProperty(P)&&Ye(e,n,P,null,o,ee);for(oe in o)ee=o[oe],ne=r[oe],!o.hasOwnProperty(oe)||ee===ne||ee==null&&ne==null||Ye(e,n,oe,ee,o,ne)}function u0(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function P2(){if(typeof performance.getEntriesByType=="function"){for(var e=0,n=0,r=performance.getEntriesByType("resource"),o=0;o<r.length;o++){var d=r[o],h=d.transferSize,v=d.initiatorType,T=d.duration;if(h&&T&&u0(v)){for(v=0,T=d.responseEnd,o+=1;o<r.length;o++){var $=r[o],J=$.startTime;if(J>T)break;var re=$.transferSize,oe=$.initiatorType;re&&u0(oe)&&($=$.responseEnd,v+=re*($<T?1:(T-J)/($-J)))}if(--o,n+=8*(h+v)/(d.duration/1e3),e++,10<e)break}}if(0<e)return n/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var sf=null,rf=null;function Ml(e){return e.nodeType===9?e:e.ownerDocument}function d0(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function f0(e,n){if(e===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&n==="foreignObject"?0:e}function of(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var lf=null;function Z2(){var e=window.event;return e&&e.type==="popstate"?e===lf?!1:(lf=e,!0):(lf=null,!1)}var h0=typeof setTimeout=="function"?setTimeout:void 0,Q2=typeof clearTimeout=="function"?clearTimeout:void 0,m0=typeof Promise=="function"?Promise:void 0,F2=typeof queueMicrotask=="function"?queueMicrotask:typeof m0<"u"?function(e){return m0.resolve(null).then(e).catch(W2)}:h0;function W2(e){setTimeout(function(){throw e})}function Oa(e){return e==="head"}function p0(e,n){var r=n,o=0;do{var d=r.nextSibling;if(e.removeChild(r),d&&d.nodeType===8)if(r=d.data,r==="/$"||r==="/&"){if(o===0){e.removeChild(d),pr(n);return}o--}else if(r==="$"||r==="$?"||r==="$~"||r==="$!"||r==="&")o++;else if(r==="html")Ai(e.ownerDocument.documentElement);else if(r==="head"){r=e.ownerDocument.head,Ai(r);for(var h=r.firstChild;h;){var v=h.nextSibling,T=h.nodeName;h[Wa]||T==="SCRIPT"||T==="STYLE"||T==="LINK"&&h.rel.toLowerCase()==="stylesheet"||r.removeChild(h),h=v}}else r==="body"&&Ai(e.ownerDocument.body);r=d}while(r);pr(n)}function g0(e,n){var r=e;e=0;do{var o=r.nextSibling;if(r.nodeType===1?n?(r._stashedDisplay=r.style.display,r.style.display="none"):(r.style.display=r._stashedDisplay||"",r.getAttribute("style")===""&&r.removeAttribute("style")):r.nodeType===3&&(n?(r._stashedText=r.nodeValue,r.nodeValue=""):r.nodeValue=r._stashedText||""),o&&o.nodeType===8)if(r=o.data,r==="/$"){if(e===0)break;e--}else r!=="$"&&r!=="$?"&&r!=="$~"&&r!=="$!"||e++;r=o}while(r)}function cf(e){var n=e.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var r=n;switch(n=n.nextSibling,r.nodeName){case"HTML":case"HEAD":case"BODY":cf(r),Pr(r);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(r.rel.toLowerCase()==="stylesheet")continue}e.removeChild(r)}}function K2(e,n,r,o){for(;e.nodeType===1;){var d=r;if(e.nodeName.toLowerCase()!==n.toLowerCase()){if(!o&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(o){if(!e[Wa])switch(n){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(h=e.getAttribute("rel"),h==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(h!==d.rel||e.getAttribute("href")!==(d.href==null||d.href===""?null:d.href)||e.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin)||e.getAttribute("title")!==(d.title==null?null:d.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(h=e.getAttribute("src"),(h!==(d.src==null?null:d.src)||e.getAttribute("type")!==(d.type==null?null:d.type)||e.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin))&&h&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(n==="input"&&e.type==="hidden"){var h=d.name==null?null:""+d.name;if(d.type==="hidden"&&e.getAttribute("name")===h)return e}else return e;if(e=an(e.nextSibling),e===null)break}return null}function J2(e,n,r){if(n==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!r||(e=an(e.nextSibling),e===null))return null;return e}function x0(e,n){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=an(e.nextSibling),e===null))return null;return e}function uf(e){return e.data==="$?"||e.data==="$~"}function df(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function ew(e,n){var r=e.ownerDocument;if(e.data==="$~")e._reactRetry=n;else if(e.data!=="$?"||r.readyState!=="loading")n();else{var o=function(){n(),r.removeEventListener("DOMContentLoaded",o)};r.addEventListener("DOMContentLoaded",o),e._reactRetry=o}}function an(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"||n==="F!"||n==="F")break;if(n==="/$"||n==="/&")return null}}return e}var ff=null;function y0(e){e=e.nextSibling;for(var n=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"||r==="/&"){if(n===0)return an(e.nextSibling);n--}else r!=="$"&&r!=="$!"&&r!=="$?"&&r!=="$~"&&r!=="&"||n++}e=e.nextSibling}return null}function b0(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"){if(n===0)return e;n--}else r!=="/$"&&r!=="/&"||n++}e=e.previousSibling}return null}function v0(e,n,r){switch(n=Ml(r),e){case"html":if(e=n.documentElement,!e)throw Error(i(452));return e;case"head":if(e=n.head,!e)throw Error(i(453));return e;case"body":if(e=n.body,!e)throw Error(i(454));return e;default:throw Error(i(451))}}function Ai(e){for(var n=e.attributes;n.length;)e.removeAttributeNode(n[0]);Pr(e)}var sn=new Map,w0=new Set;function Al(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var na=B.d;B.d={f:tw,r:nw,D:aw,C:sw,L:rw,m:iw,X:lw,S:ow,M:cw};function tw(){var e=na.f(),n=wl();return e||n}function nw(e){var n=ma(e);n!==null&&n.tag===5&&n.type==="form"?Lp(n):na.r(e)}var fr=typeof document>"u"?null:document;function S0(e,n,r){var o=fr;if(o&&typeof n=="string"&&n){var d=Mt(n);d='link[rel="'+e+'"][href="'+d+'"]',typeof r=="string"&&(d+='[crossorigin="'+r+'"]'),w0.has(d)||(w0.add(d),e={rel:e,crossOrigin:r,href:n},o.querySelector(d)===null&&(n=o.createElement("link"),bt(n,"link",e),at(n),o.head.appendChild(n)))}}function aw(e){na.D(e),S0("dns-prefetch",e,null)}function sw(e,n){na.C(e,n),S0("preconnect",e,n)}function rw(e,n,r){na.L(e,n,r);var o=fr;if(o&&e&&n){var d='link[rel="preload"][as="'+Mt(n)+'"]';n==="image"&&r&&r.imageSrcSet?(d+='[imagesrcset="'+Mt(r.imageSrcSet)+'"]',typeof r.imageSizes=="string"&&(d+='[imagesizes="'+Mt(r.imageSizes)+'"]')):d+='[href="'+Mt(e)+'"]';var h=d;switch(n){case"style":h=hr(e);break;case"script":h=mr(e)}sn.has(h)||(e=x({rel:"preload",href:n==="image"&&r&&r.imageSrcSet?void 0:e,as:n},r),sn.set(h,e),o.querySelector(d)!==null||n==="style"&&o.querySelector(ki(h))||n==="script"&&o.querySelector(Ri(h))||(n=o.createElement("link"),bt(n,"link",e),at(n),o.head.appendChild(n)))}}function iw(e,n){na.m(e,n);var r=fr;if(r&&e){var o=n&&typeof n.as=="string"?n.as:"script",d='link[rel="modulepreload"][as="'+Mt(o)+'"][href="'+Mt(e)+'"]',h=d;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":h=mr(e)}if(!sn.has(h)&&(e=x({rel:"modulepreload",href:e},n),sn.set(h,e),r.querySelector(d)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(r.querySelector(Ri(h)))return}o=r.createElement("link"),bt(o,"link",e),at(o),r.head.appendChild(o)}}}function ow(e,n,r){na.S(e,n,r);var o=fr;if(o&&e){var d=ga(o).hoistableStyles,h=hr(e);n=n||"default";var v=d.get(h);if(!v){var T={loading:0,preload:null};if(v=o.querySelector(ki(h)))T.loading=5;else{e=x({rel:"stylesheet",href:e,"data-precedence":n},r),(r=sn.get(h))&&hf(e,r);var $=v=o.createElement("link");at($),bt($,"link",e),$._p=new Promise(function(J,re){$.onload=J,$.onerror=re}),$.addEventListener("load",function(){T.loading|=1}),$.addEventListener("error",function(){T.loading|=2}),T.loading|=4,kl(v,n,o)}v={type:"stylesheet",instance:v,count:1,state:T},d.set(h,v)}}}function lw(e,n){na.X(e,n);var r=fr;if(r&&e){var o=ga(r).hoistableScripts,d=mr(e),h=o.get(d);h||(h=r.querySelector(Ri(d)),h||(e=x({src:e,async:!0},n),(n=sn.get(d))&&mf(e,n),h=r.createElement("script"),at(h),bt(h,"link",e),r.head.appendChild(h)),h={type:"script",instance:h,count:1,state:null},o.set(d,h))}}function cw(e,n){na.M(e,n);var r=fr;if(r&&e){var o=ga(r).hoistableScripts,d=mr(e),h=o.get(d);h||(h=r.querySelector(Ri(d)),h||(e=x({src:e,async:!0,type:"module"},n),(n=sn.get(d))&&mf(e,n),h=r.createElement("script"),at(h),bt(h,"link",e),r.head.appendChild(h)),h={type:"script",instance:h,count:1,state:null},o.set(d,h))}}function N0(e,n,r,o){var d=(d=X.current)?Al(d):null;if(!d)throw Error(i(446));switch(e){case"meta":case"title":return null;case"style":return typeof r.precedence=="string"&&typeof r.href=="string"?(n=hr(r.href),r=ga(d).hoistableStyles,o=r.get(n),o||(o={type:"style",instance:null,count:0,state:null},r.set(n,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(r.rel==="stylesheet"&&typeof r.href=="string"&&typeof r.precedence=="string"){e=hr(r.href);var h=ga(d).hoistableStyles,v=h.get(e);if(v||(d=d.ownerDocument||d,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},h.set(e,v),(h=d.querySelector(ki(e)))&&!h._p&&(v.instance=h,v.state.loading=5),sn.has(e)||(r={rel:"preload",as:"style",href:r.href,crossOrigin:r.crossOrigin,integrity:r.integrity,media:r.media,hrefLang:r.hrefLang,referrerPolicy:r.referrerPolicy},sn.set(e,r),h||uw(d,e,r,v.state))),n&&o===null)throw Error(i(528,""));return v}if(n&&o!==null)throw Error(i(529,""));return null;case"script":return n=r.async,r=r.src,typeof r=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=mr(r),r=ga(d).hoistableScripts,o=r.get(n),o||(o={type:"script",instance:null,count:0,state:null},r.set(n,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,e))}}function hr(e){return'href="'+Mt(e)+'"'}function ki(e){return'link[rel="stylesheet"]['+e+"]"}function j0(e){return x({},e,{"data-precedence":e.precedence,precedence:null})}function uw(e,n,r,o){e.querySelector('link[rel="preload"][as="style"]['+n+"]")?o.loading=1:(n=e.createElement("link"),o.preload=n,n.addEventListener("load",function(){return o.loading|=1}),n.addEventListener("error",function(){return o.loading|=2}),bt(n,"link",r),at(n),e.head.appendChild(n))}function mr(e){return'[src="'+Mt(e)+'"]'}function Ri(e){return"script[async]"+e}function E0(e,n,r){if(n.count++,n.instance===null)switch(n.type){case"style":var o=e.querySelector('style[data-href~="'+Mt(r.href)+'"]');if(o)return n.instance=o,at(o),o;var d=x({},r,{"data-href":r.href,"data-precedence":r.precedence,href:null,precedence:null});return o=(e.ownerDocument||e).createElement("style"),at(o),bt(o,"style",d),kl(o,r.precedence,e),n.instance=o;case"stylesheet":d=hr(r.href);var h=e.querySelector(ki(d));if(h)return n.state.loading|=4,n.instance=h,at(h),h;o=j0(r),(d=sn.get(d))&&hf(o,d),h=(e.ownerDocument||e).createElement("link"),at(h);var v=h;return v._p=new Promise(function(T,$){v.onload=T,v.onerror=$}),bt(h,"link",o),n.state.loading|=4,kl(h,r.precedence,e),n.instance=h;case"script":return h=mr(r.src),(d=e.querySelector(Ri(h)))?(n.instance=d,at(d),d):(o=r,(d=sn.get(h))&&(o=x({},r),mf(o,d)),e=e.ownerDocument||e,d=e.createElement("script"),at(d),bt(d,"link",o),e.head.appendChild(d),n.instance=d);case"void":return null;default:throw Error(i(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(o=n.instance,n.state.loading|=4,kl(o,r.precedence,e));return n.instance}function kl(e,n,r){for(var o=r.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),d=o.length?o[o.length-1]:null,h=d,v=0;v<o.length;v++){var T=o[v];if(T.dataset.precedence===n)h=T;else if(h!==d)break}h?h.parentNode.insertBefore(e,h.nextSibling):(n=r.nodeType===9?r.head:r,n.insertBefore(e,n.firstChild))}function hf(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.title==null&&(e.title=n.title)}function mf(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.integrity==null&&(e.integrity=n.integrity)}var Rl=null;function _0(e,n,r){if(Rl===null){var o=new Map,d=Rl=new Map;d.set(r,o)}else d=Rl,o=d.get(r),o||(o=new Map,d.set(r,o));if(o.has(e))return o;for(o.set(e,null),r=r.getElementsByTagName(e),d=0;d<r.length;d++){var h=r[d];if(!(h[Wa]||h[dt]||e==="link"&&h.getAttribute("rel")==="stylesheet")&&h.namespaceURI!=="http://www.w3.org/2000/svg"){var v=h.getAttribute(n)||"";v=e+v;var T=o.get(v);T?T.push(h):o.set(v,[h])}}return o}function C0(e,n,r){e=e.ownerDocument||e,e.head.insertBefore(r,n==="title"?e.querySelector("head > title"):null)}function dw(e,n,r){if(r===1||n.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;return n.rel==="stylesheet"?(e=n.disabled,typeof n.precedence=="string"&&e==null):!0;case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function T0(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function fw(e,n,r,o){if(r.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var d=hr(o.href),h=n.querySelector(ki(d));if(h){n=h._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(e.count++,e=Dl.bind(e),n.then(e,e)),r.state.loading|=4,r.instance=h,at(h);return}h=n.ownerDocument||n,o=j0(o),(d=sn.get(d))&&hf(o,d),h=h.createElement("link"),at(h);var v=h;v._p=new Promise(function(T,$){v.onload=T,v.onerror=$}),bt(h,"link",o),r.instance=h}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(r,n),(n=r.state.preload)&&(r.state.loading&3)===0&&(e.count++,r=Dl.bind(e),n.addEventListener("load",r),n.addEventListener("error",r))}}var pf=0;function hw(e,n){return e.stylesheets&&e.count===0&&Ol(e,e.stylesheets),0<e.count||0<e.imgCount?function(r){var o=setTimeout(function(){if(e.stylesheets&&Ol(e,e.stylesheets),e.unsuspend){var h=e.unsuspend;e.unsuspend=null,h()}},6e4+n);0<e.imgBytes&&pf===0&&(pf=62500*P2());var d=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Ol(e,e.stylesheets),e.unsuspend)){var h=e.unsuspend;e.unsuspend=null,h()}},(e.imgBytes>pf?50:800)+n);return e.unsuspend=r,function(){e.unsuspend=null,clearTimeout(o),clearTimeout(d)}}:null}function Dl(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Ol(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var zl=null;function Ol(e,n){e.stylesheets=null,e.unsuspend!==null&&(e.count++,zl=new Map,n.forEach(mw,e),zl=null,Dl.call(e))}function mw(e,n){if(!(n.state.loading&4)){var r=zl.get(e);if(r)var o=r.get(null);else{r=new Map,zl.set(e,r);for(var d=e.querySelectorAll("link[data-precedence],style[data-precedence]"),h=0;h<d.length;h++){var v=d[h];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(r.set(v.dataset.precedence,v),o=v)}o&&r.set(null,o)}d=n.instance,v=d.getAttribute("data-precedence"),h=r.get(v)||o,h===o&&r.set(null,d),r.set(v,d),this.count++,o=Dl.bind(this),d.addEventListener("load",o),d.addEventListener("error",o),h?h.parentNode.insertBefore(d,h.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(d,e.firstChild)),n.state.loading|=4}}var Di={$$typeof:C,Provider:null,Consumer:null,_currentValue:q,_currentValue2:q,_threadCount:0};function pw(e,n,r,o,d,h,v,T,$){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Xr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Xr(0),this.hiddenUpdates=Xr(null),this.identifierPrefix=o,this.onUncaughtError=d,this.onCaughtError=h,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=$,this.incompleteTransitions=new Map}function M0(e,n,r,o,d,h,v,T,$,J,re,oe){return e=new pw(e,n,r,v,$,J,re,oe,T),n=1,h===!0&&(n|=24),h=Ut(3,null,null,n),e.current=h,h.stateNode=e,n=Pu(),n.refCount++,e.pooledCache=n,n.refCount++,h.memoizedState={element:o,isDehydrated:r,cache:n},Wu(h),e}function A0(e){return e?(e=Gs,e):Gs}function k0(e,n,r,o,d,h){d=A0(d),o.context===null?o.context=d:o.pendingContext=d,o=ja(n),o.payload={element:r},h=h===void 0?null:h,h!==null&&(o.callback=h),r=Ea(e,o,n),r!==null&&(Ot(r,e,n),di(r,e,n))}function R0(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<n?r:n}}function gf(e,n){R0(e,n),(e=e.alternate)&&R0(e,n)}function D0(e){if(e.tag===13||e.tag===31){var n=as(e,67108864);n!==null&&Ot(n,e,67108864),gf(e,67108864)}}function z0(e){if(e.tag===13||e.tag===31){var n=Xt();n=Gr(n);var r=as(e,n);r!==null&&Ot(r,e,n),gf(e,n)}}var Bl=!0;function gw(e,n,r,o){var d=O.T;O.T=null;var h=B.p;try{B.p=2,xf(e,n,r,o)}finally{B.p=h,O.T=d}}function xw(e,n,r,o){var d=O.T;O.T=null;var h=B.p;try{B.p=8,xf(e,n,r,o)}finally{B.p=h,O.T=d}}function xf(e,n,r,o){if(Bl){var d=yf(o);if(d===null)nf(e,n,o,Hl,r),B0(e,o);else if(bw(d,e,n,r,o))o.stopPropagation();else if(B0(e,o),n&4&&-1<yw.indexOf(e)){for(;d!==null;){var h=ma(d);if(h!==null)switch(h.tag){case 3:if(h=h.stateNode,h.current.memoizedState.isDehydrated){var v=Bn(h.pendingLanes);if(v!==0){var T=h;for(T.pendingLanes|=2,T.entangledLanes|=2;v;){var $=1<<31-jt(v);T.entanglements[1]|=$,v&=~$}_n(h),(He&6)===0&&(bl=et()+500,Ci(0))}}break;case 31:case 13:T=as(h,2),T!==null&&Ot(T,h,2),wl(),gf(h,2)}if(h=yf(o),h===null&&nf(e,n,o,Hl,r),h===d)break;d=h}d!==null&&o.stopPropagation()}else nf(e,n,o,null,r)}}function yf(e){return e=bu(e),bf(e)}var Hl=null;function bf(e){if(Hl=null,e=ha(e),e!==null){var n=u(e);if(n===null)e=null;else{var r=n.tag;if(r===13){if(e=f(n),e!==null)return e;e=null}else if(r===31){if(e=m(n),e!==null)return e;e=null}else if(r===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null)}}return Hl=e,null}function O0(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(fa()){case pt:return 2;case ln:return 8;case cn:case Yr:return 32;case Ms:return 268435456;default:return 32}default:return 32}}var vf=!1,Ba=null,Ha=null,La=null,zi=new Map,Oi=new Map,Ua=[],yw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function B0(e,n){switch(e){case"focusin":case"focusout":Ba=null;break;case"dragenter":case"dragleave":Ha=null;break;case"mouseover":case"mouseout":La=null;break;case"pointerover":case"pointerout":zi.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":Oi.delete(n.pointerId)}}function Bi(e,n,r,o,d,h){return e===null||e.nativeEvent!==h?(e={blockedOn:n,domEventName:r,eventSystemFlags:o,nativeEvent:h,targetContainers:[d]},n!==null&&(n=ma(n),n!==null&&D0(n)),e):(e.eventSystemFlags|=o,n=e.targetContainers,d!==null&&n.indexOf(d)===-1&&n.push(d),e)}function bw(e,n,r,o,d){switch(n){case"focusin":return Ba=Bi(Ba,e,n,r,o,d),!0;case"dragenter":return Ha=Bi(Ha,e,n,r,o,d),!0;case"mouseover":return La=Bi(La,e,n,r,o,d),!0;case"pointerover":var h=d.pointerId;return zi.set(h,Bi(zi.get(h)||null,e,n,r,o,d)),!0;case"gotpointercapture":return h=d.pointerId,Oi.set(h,Bi(Oi.get(h)||null,e,n,r,o,d)),!0}return!1}function H0(e){var n=ha(e.target);if(n!==null){var r=u(n);if(r!==null){if(n=r.tag,n===13){if(n=f(r),n!==null){e.blockedOn=n,Eo(e.priority,function(){z0(r)});return}}else if(n===31){if(n=m(r),n!==null){e.blockedOn=n,Eo(e.priority,function(){z0(r)});return}}else if(n===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Ll(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var r=yf(e.nativeEvent);if(r===null){r=e.nativeEvent;var o=new r.constructor(r.type,r);yu=o,r.target.dispatchEvent(o),yu=null}else return n=ma(r),n!==null&&D0(n),e.blockedOn=r,!1;n.shift()}return!0}function L0(e,n,r){Ll(e)&&r.delete(n)}function vw(){vf=!1,Ba!==null&&Ll(Ba)&&(Ba=null),Ha!==null&&Ll(Ha)&&(Ha=null),La!==null&&Ll(La)&&(La=null),zi.forEach(L0),Oi.forEach(L0)}function Ul(e,n){e.blockedOn===n&&(e.blockedOn=null,vf||(vf=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,vw)))}var $l=null;function U0(e){$l!==e&&($l=e,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){$l===e&&($l=null);for(var n=0;n<e.length;n+=3){var r=e[n],o=e[n+1],d=e[n+2];if(typeof o!="function"){if(bf(o||r)===null)continue;break}var h=ma(r);h!==null&&(e.splice(n,3),n-=3,xd(h,{pending:!0,data:d,method:r.method,action:o},o,d))}}))}function pr(e){function n($){return Ul($,e)}Ba!==null&&Ul(Ba,e),Ha!==null&&Ul(Ha,e),La!==null&&Ul(La,e),zi.forEach(n),Oi.forEach(n);for(var r=0;r<Ua.length;r++){var o=Ua[r];o.blockedOn===e&&(o.blockedOn=null)}for(;0<Ua.length&&(r=Ua[0],r.blockedOn===null);)H0(r),r.blockedOn===null&&Ua.shift();if(r=(e.ownerDocument||e).$$reactFormReplay,r!=null)for(o=0;o<r.length;o+=3){var d=r[o],h=r[o+1],v=d[wt]||null;if(typeof h=="function")v||U0(r);else if(v){var T=null;if(h&&h.hasAttribute("formAction")){if(d=h,v=h[wt]||null)T=v.formAction;else if(bf(d)!==null)continue}else T=v.action;typeof T=="function"?r[o+1]=T:(r.splice(o,3),o-=3),U0(r)}}}function $0(){function e(h){h.canIntercept&&h.info==="react-transition"&&h.intercept({handler:function(){return new Promise(function(v){return d=v})},focusReset:"manual",scroll:"manual"})}function n(){d!==null&&(d(),d=null),o||setTimeout(r,20)}function r(){if(!o&&!navigation.transition){var h=navigation.currentEntry;h&&h.url!=null&&navigation.navigate(h.url,{state:h.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var o=!1,d=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",n),navigation.addEventListener("navigateerror",n),setTimeout(r,100),function(){o=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",n),navigation.removeEventListener("navigateerror",n),d!==null&&(d(),d=null)}}}function wf(e){this._internalRoot=e}ql.prototype.render=wf.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(i(409));var r=n.current,o=Xt();k0(r,o,e,n,null,null)},ql.prototype.unmount=wf.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;k0(e.current,2,null,e,null,null),wl(),n[Hn]=null}};function ql(e){this._internalRoot=e}ql.prototype.unstable_scheduleHydration=function(e){if(e){var n=jo();e={blockedOn:null,target:e,priority:n};for(var r=0;r<Ua.length&&n!==0&&n<Ua[r].priority;r++);Ua.splice(r,0,e),r===0&&H0(e)}};var q0=a.version;if(q0!=="19.2.3")throw Error(i(527,q0,"19.2.3"));B.findDOMNode=function(e){var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(i(188)):(e=Object.keys(e).join(","),Error(i(268,e)));return e=g(n),e=e!==null?y(e):null,e=e===null?null:e.stateNode,e};var ww={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:O,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Vl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Vl.isDisabled&&Vl.supportsFiber)try{Za=Vl.inject(ww),Nt=Vl}catch{}}return Li.createRoot=function(e,n){if(!c(e))throw Error(i(299));var r=!1,o="",d=Zp,h=Qp,v=Fp;return n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onUncaughtError!==void 0&&(d=n.onUncaughtError),n.onCaughtError!==void 0&&(h=n.onCaughtError),n.onRecoverableError!==void 0&&(v=n.onRecoverableError)),n=M0(e,1,!1,null,null,r,o,null,d,h,v,$0),e[Hn]=n.current,tf(e),new wf(n)},Li.hydrateRoot=function(e,n,r){if(!c(e))throw Error(i(299));var o=!1,d="",h=Zp,v=Qp,T=Fp,$=null;return r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(d=r.identifierPrefix),r.onUncaughtError!==void 0&&(h=r.onUncaughtError),r.onCaughtError!==void 0&&(v=r.onCaughtError),r.onRecoverableError!==void 0&&(T=r.onRecoverableError),r.formState!==void 0&&($=r.formState)),n=M0(e,1,!0,n,r??null,o,d,$,h,v,T,$0),n.context=A0(null),r=n.current,o=Xt(),o=Gr(o),d=ja(o),d.callback=null,Ea(r,d,o),r=o,n.current.lanes=r,Fa(n,r),_n(n),e[Hn]=n.current,tf(e),new ql(n)},Li.version="19.2.3",Li}var W0;function Aw(){if(W0)return jf.exports;W0=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(a){console.error(a)}}return t(),jf.exports=Mw(),jf.exports}var kw=Aw();const Rw=vh(kw);var K0="popstate";function Dw(t={}){function a(i,c){let{pathname:u,search:f,hash:m}=i.location;return Qf("",{pathname:u,search:f,hash:m},c.state&&c.state.usr||null,c.state&&c.state.key||"default")}function s(i,c){return typeof c=="string"?c:Qi(c)}return Ow(a,s,null,t)}function Qe(t,a){if(t===!1||t===null||typeof t>"u")throw new Error(a)}function It(t,a){if(!t){typeof console<"u"&&console.warn(a);try{throw new Error(a)}catch{}}}function zw(){return Math.random().toString(36).substring(2,10)}function J0(t,a){return{usr:t.state,key:t.key,idx:a}}function Qf(t,a,s=null,i){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof a=="string"?Lr(a):a,state:s,key:a&&a.key||i||zw()}}function Qi({pathname:t="/",search:a="",hash:s=""}){return a&&a!=="?"&&(t+=a.charAt(0)==="?"?a:"?"+a),s&&s!=="#"&&(t+=s.charAt(0)==="#"?s:"#"+s),t}function Lr(t){let a={};if(t){let s=t.indexOf("#");s>=0&&(a.hash=t.substring(s),t=t.substring(0,s));let i=t.indexOf("?");i>=0&&(a.search=t.substring(i),t=t.substring(0,i)),t&&(a.pathname=t)}return a}function Ow(t,a,s,i={}){let{window:c=document.defaultView,v5Compat:u=!1}=i,f=c.history,m="POP",p=null,g=y();g==null&&(g=0,f.replaceState({...f.state,idx:g},""));function y(){return(f.state||{idx:null}).idx}function x(){m="POP";let N=y(),E=N==null?null:N-g;g=N,p&&p({action:m,location:A.location,delta:E})}function b(N,E){m="PUSH";let R=Qf(A.location,N,E);g=y()+1;let C=J0(R,g),k=A.createHref(R);try{f.pushState(C,"",k)}catch(w){if(w instanceof DOMException&&w.name==="DataCloneError")throw w;c.location.assign(k)}u&&p&&p({action:m,location:A.location,delta:1})}function S(N,E){m="REPLACE";let R=Qf(A.location,N,E);g=y();let C=J0(R,g),k=A.createHref(R);f.replaceState(C,"",k),u&&p&&p({action:m,location:A.location,delta:0})}function j(N){return Bw(N)}let A={get action(){return m},get location(){return t(c,f)},listen(N){if(p)throw new Error("A history only accepts one active listener");return c.addEventListener(K0,x),p=N,()=>{c.removeEventListener(K0,x),p=null}},createHref(N){return a(c,N)},createURL:j,encodeLocation(N){let E=j(N);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:b,replace:S,go(N){return f.go(N)}};return A}function Bw(t,a=!1){let s="http://localhost";typeof window<"u"&&(s=window.location.origin!=="null"?window.location.origin:window.location.href),Qe(s,"No window.location.(origin|href) available to create URL");let i=typeof t=="string"?t:Qi(t);return i=i.replace(/ $/,"%20"),!a&&i.startsWith("//")&&(i=s+i),new URL(i,s)}function Dy(t,a,s="/"){return Hw(t,a,s,!1)}function Hw(t,a,s,i){let c=typeof a=="string"?Lr(a):a,u=ia(c.pathname||"/",s);if(u==null)return null;let f=zy(t);Lw(f);let m=null;for(let p=0;m==null&&p<f.length;++p){let g=Qw(u);m=Pw(f[p],g,i)}return m}function zy(t,a=[],s=[],i="",c=!1){let u=(f,m,p=c,g)=>{let y={relativePath:g===void 0?f.path||"":g,caseSensitive:f.caseSensitive===!0,childrenIndex:m,route:f};if(y.relativePath.startsWith("/")){if(!y.relativePath.startsWith(i)&&p)return;Qe(y.relativePath.startsWith(i),`Absolute route path "${y.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),y.relativePath=y.relativePath.slice(i.length)}let x=ra([i,y.relativePath]),b=s.concat(y);f.children&&f.children.length>0&&(Qe(f.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${x}".`),zy(f.children,a,b,x,p)),!(f.path==null&&!f.index)&&a.push({path:x,score:Gw(x,f.index),routesMeta:b})};return t.forEach((f,m)=>{if(f.path===""||!f.path?.includes("?"))u(f,m);else for(let p of Oy(f.path))u(f,m,!0,p)}),a}function Oy(t){let a=t.split("/");if(a.length===0)return[];let[s,...i]=a,c=s.endsWith("?"),u=s.replace(/\?$/,"");if(i.length===0)return c?[u,""]:[u];let f=Oy(i.join("/")),m=[];return m.push(...f.map(p=>p===""?u:[u,p].join("/"))),c&&m.push(...f),m.map(p=>t.startsWith("/")&&p===""?"/":p)}function Lw(t){t.sort((a,s)=>a.score!==s.score?s.score-a.score:Iw(a.routesMeta.map(i=>i.childrenIndex),s.routesMeta.map(i=>i.childrenIndex)))}var Uw=/^:[\w-]+$/,$w=3,qw=2,Vw=1,Yw=10,Xw=-2,ex=t=>t==="*";function Gw(t,a){let s=t.split("/"),i=s.length;return s.some(ex)&&(i+=Xw),a&&(i+=qw),s.filter(c=>!ex(c)).reduce((c,u)=>c+(Uw.test(u)?$w:u===""?Vw:Yw),i)}function Iw(t,a){return t.length===a.length&&t.slice(0,-1).every((i,c)=>i===a[c])?t[t.length-1]-a[a.length-1]:0}function Pw(t,a,s=!1){let{routesMeta:i}=t,c={},u="/",f=[];for(let m=0;m<i.length;++m){let p=i[m],g=m===i.length-1,y=u==="/"?a:a.slice(u.length)||"/",x=yc({path:p.relativePath,caseSensitive:p.caseSensitive,end:g},y),b=p.route;if(!x&&g&&s&&!i[i.length-1].route.index&&(x=yc({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},y)),!x)return null;Object.assign(c,x.params),f.push({params:c,pathname:ra([u,x.pathname]),pathnameBase:Jw(ra([u,x.pathnameBase])),route:b}),x.pathnameBase!=="/"&&(u=ra([u,x.pathnameBase]))}return f}function yc(t,a){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[s,i]=Zw(t.path,t.caseSensitive,t.end),c=a.match(s);if(!c)return null;let u=c[0],f=u.replace(/(.)\/+$/,"$1"),m=c.slice(1);return{params:i.reduce((g,{paramName:y,isOptional:x},b)=>{if(y==="*"){let j=m[b]||"";f=u.slice(0,u.length-j.length).replace(/(.)\/+$/,"$1")}const S=m[b];return x&&!S?g[y]=void 0:g[y]=(S||"").replace(/%2F/g,"/"),g},{}),pathname:u,pathnameBase:f,pattern:t}}function Zw(t,a=!1,s=!0){It(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let i=[],c="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(f,m,p)=>(i.push({paramName:m,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(i.push({paramName:"*"}),c+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?c+="\\/*$":t!==""&&t!=="/"&&(c+="(?:(?=\\/|$))"),[new RegExp(c,a?void 0:"i"),i]}function Qw(t){try{return t.split("/").map(a=>decodeURIComponent(a).replace(/\//g,"%2F")).join("/")}catch(a){return It(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${a}).`),t}}function ia(t,a){if(a==="/")return t;if(!t.toLowerCase().startsWith(a.toLowerCase()))return null;let s=a.endsWith("/")?a.length-1:a.length,i=t.charAt(s);return i&&i!=="/"?null:t.slice(s)||"/"}var By=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Fw=t=>By.test(t);function Ww(t,a="/"){let{pathname:s,search:i="",hash:c=""}=typeof t=="string"?Lr(t):t,u;if(s)if(Fw(s))u=s;else{if(s.includes("//")){let f=s;s=s.replace(/\/\/+/g,"/"),It(!1,`Pathnames cannot have embedded double slashes - normalizing ${f} -> ${s}`)}s.startsWith("/")?u=tx(s.substring(1),"/"):u=tx(s,a)}else u=a;return{pathname:u,search:eS(i),hash:tS(c)}}function tx(t,a){let s=a.replace(/\/+$/,"").split("/");return t.split("/").forEach(c=>{c===".."?s.length>1&&s.pop():c!=="."&&s.push(c)}),s.length>1?s.join("/"):"/"}function Tf(t,a,s,i){return`Cannot include a '${t}' character in a manually specified \`to.${a}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${s}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Kw(t){return t.filter((a,s)=>s===0||a.route.path&&a.route.path.length>0)}function wh(t){let a=Kw(t);return a.map((s,i)=>i===a.length-1?s.pathname:s.pathnameBase)}function Sh(t,a,s,i=!1){let c;typeof t=="string"?c=Lr(t):(c={...t},Qe(!c.pathname||!c.pathname.includes("?"),Tf("?","pathname","search",c)),Qe(!c.pathname||!c.pathname.includes("#"),Tf("#","pathname","hash",c)),Qe(!c.search||!c.search.includes("#"),Tf("#","search","hash",c)));let u=t===""||c.pathname==="",f=u?"/":c.pathname,m;if(f==null)m=s;else{let x=a.length-1;if(!i&&f.startsWith("..")){let b=f.split("/");for(;b[0]==="..";)b.shift(),x-=1;c.pathname=b.join("/")}m=x>=0?a[x]:"/"}let p=Ww(c,m),g=f&&f!=="/"&&f.endsWith("/"),y=(u||f===".")&&s.endsWith("/");return!p.pathname.endsWith("/")&&(g||y)&&(p.pathname+="/"),p}var ra=t=>t.join("/").replace(/\/\/+/g,"/"),Jw=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),eS=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,tS=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t,nS=class{constructor(t,a,s,i=!1){this.status=t,this.statusText=a||"",this.internal=i,s instanceof Error?(this.data=s.toString(),this.error=s):this.data=s}};function aS(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}function sS(t){return t.map(a=>a.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var Hy=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Ly(t,a){let s=t;if(typeof s!="string"||!By.test(s))return{absoluteURL:void 0,isExternal:!1,to:s};let i=s,c=!1;if(Hy)try{let u=new URL(window.location.href),f=s.startsWith("//")?new URL(u.protocol+s):new URL(s),m=ia(f.pathname,a);f.origin===u.origin&&m!=null?s=m+f.search+f.hash:c=!0}catch{It(!1,`<Link to="${s}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:i,isExternal:c,to:s}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var Uy=["POST","PUT","PATCH","DELETE"];new Set(Uy);var rS=["GET",...Uy];new Set(rS);var Ur=_.createContext(null);Ur.displayName="DataRouter";var Bc=_.createContext(null);Bc.displayName="DataRouterState";var iS=_.createContext(!1),$y=_.createContext({isTransitioning:!1});$y.displayName="ViewTransition";var oS=_.createContext(new Map);oS.displayName="Fetchers";var lS=_.createContext(null);lS.displayName="Await";var Zt=_.createContext(null);Zt.displayName="Navigation";var oo=_.createContext(null);oo.displayName="Location";var on=_.createContext({outlet:null,matches:[],isDataRoute:!1});on.displayName="Route";var Nh=_.createContext(null);Nh.displayName="RouteError";var qy="REACT_ROUTER_ERROR",cS="REDIRECT",uS="ROUTE_ERROR_RESPONSE";function dS(t){if(t.startsWith(`${qy}:${cS}:{`))try{let a=JSON.parse(t.slice(28));if(typeof a=="object"&&a&&typeof a.status=="number"&&typeof a.statusText=="string"&&typeof a.location=="string"&&typeof a.reloadDocument=="boolean"&&typeof a.replace=="boolean")return a}catch{}}function fS(t){if(t.startsWith(`${qy}:${uS}:{`))try{let a=JSON.parse(t.slice(40));if(typeof a=="object"&&a&&typeof a.status=="number"&&typeof a.statusText=="string")return new nS(a.status,a.statusText,a.data)}catch{}}function hS(t,{relative:a}={}){Qe($r(),"useHref() may be used only in the context of a <Router> component.");let{basename:s,navigator:i}=_.useContext(Zt),{hash:c,pathname:u,search:f}=lo(t,{relative:a}),m=u;return s!=="/"&&(m=u==="/"?s:ra([s,u])),i.createHref({pathname:m,search:f,hash:c})}function $r(){return _.useContext(oo)!=null}function ca(){return Qe($r(),"useLocation() may be used only in the context of a <Router> component."),_.useContext(oo).location}var Vy="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Yy(t){_.useContext(Zt).static||_.useLayoutEffect(t)}function Ts(){let{isDataRoute:t}=_.useContext(on);return t?MS():mS()}function mS(){Qe($r(),"useNavigate() may be used only in the context of a <Router> component.");let t=_.useContext(Ur),{basename:a,navigator:s}=_.useContext(Zt),{matches:i}=_.useContext(on),{pathname:c}=ca(),u=JSON.stringify(wh(i)),f=_.useRef(!1);return Yy(()=>{f.current=!0}),_.useCallback((p,g={})=>{if(It(f.current,Vy),!f.current)return;if(typeof p=="number"){s.go(p);return}let y=Sh(p,JSON.parse(u),c,g.relative==="path");t==null&&a!=="/"&&(y.pathname=y.pathname==="/"?a:ra([a,y.pathname])),(g.replace?s.replace:s.push)(y,g.state,g)},[a,s,u,c,t])}var pS=_.createContext(null);function gS(t){let a=_.useContext(on).outlet;return _.useMemo(()=>a&&_.createElement(pS.Provider,{value:t},a),[a,t])}function xS(){let{matches:t}=_.useContext(on),a=t[t.length-1];return a?a.params:{}}function lo(t,{relative:a}={}){let{matches:s}=_.useContext(on),{pathname:i}=ca(),c=JSON.stringify(wh(s));return _.useMemo(()=>Sh(t,JSON.parse(c),i,a==="path"),[t,c,i,a])}function yS(t,a){return Xy(t,a)}function Xy(t,a,s,i,c){Qe($r(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:u}=_.useContext(Zt),{matches:f}=_.useContext(on),m=f[f.length-1],p=m?m.params:{},g=m?m.pathname:"/",y=m?m.pathnameBase:"/",x=m&&m.route;{let R=x&&x.path||"";Iy(g,!x||R.endsWith("*")||R.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${g}" (under <Route path="${R}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${R}"> to <Route path="${R==="/"?"*":`${R}/*`}">.`)}let b=ca(),S;if(a){let R=typeof a=="string"?Lr(a):a;Qe(y==="/"||R.pathname?.startsWith(y),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${y}" but pathname "${R.pathname}" was given in the \`location\` prop.`),S=R}else S=b;let j=S.pathname||"/",A=j;if(y!=="/"){let R=y.replace(/^\//,"").split("/");A="/"+j.replace(/^\//,"").split("/").slice(R.length).join("/")}let N=Dy(t,{pathname:A});It(x||N!=null,`No routes matched location "${S.pathname}${S.search}${S.hash}" `),It(N==null||N[N.length-1].route.element!==void 0||N[N.length-1].route.Component!==void 0||N[N.length-1].route.lazy!==void 0,`Matched leaf route at location "${S.pathname}${S.search}${S.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let E=NS(N&&N.map(R=>Object.assign({},R,{params:Object.assign({},p,R.params),pathname:ra([y,u.encodeLocation?u.encodeLocation(R.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:R.pathname]),pathnameBase:R.pathnameBase==="/"?y:ra([y,u.encodeLocation?u.encodeLocation(R.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:R.pathnameBase])})),f,s,i,c);return a&&E?_.createElement(oo.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...S},navigationType:"POP"}},E):E}function bS(){let t=TS(),a=aS(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),s=t instanceof Error?t.stack:null,i="rgba(200,200,200, 0.5)",c={padding:"0.5rem",backgroundColor:i},u={padding:"2px 4px",backgroundColor:i},f=null;return console.error("Error handled by React Router default ErrorBoundary:",t),f=_.createElement(_.Fragment,null,_.createElement("p",null," Hey developer "),_.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",_.createElement("code",{style:u},"ErrorBoundary")," or"," ",_.createElement("code",{style:u},"errorElement")," prop on your route.")),_.createElement(_.Fragment,null,_.createElement("h2",null,"Unexpected Application Error!"),_.createElement("h3",{style:{fontStyle:"italic"}},a),s?_.createElement("pre",{style:c},s):null,f)}var vS=_.createElement(bS,null),Gy=class extends _.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,a){return a.location!==t.location||a.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:a.error,location:a.location,revalidation:t.revalidation||a.revalidation}}componentDidCatch(t,a){this.props.onError?this.props.onError(t,a):console.error("React Router caught the following error during render",t)}render(){let t=this.state.error;if(this.context&&typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){const s=fS(t.digest);s&&(t=s)}let a=t!==void 0?_.createElement(on.Provider,{value:this.props.routeContext},_.createElement(Nh.Provider,{value:t,children:this.props.component})):this.props.children;return this.context?_.createElement(wS,{error:t},a):a}};Gy.contextType=iS;var Mf=new WeakMap;function wS({children:t,error:a}){let{basename:s}=_.useContext(Zt);if(typeof a=="object"&&a&&"digest"in a&&typeof a.digest=="string"){let i=dS(a.digest);if(i){let c=Mf.get(a);if(c)throw c;let u=Ly(i.location,s);if(Hy&&!Mf.get(a))if(u.isExternal||i.reloadDocument)window.location.href=u.absoluteURL||u.to;else{const f=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(u.to,{replace:i.replace}));throw Mf.set(a,f),f}return _.createElement("meta",{httpEquiv:"refresh",content:`0;url=${u.absoluteURL||u.to}`})}}return t}function SS({routeContext:t,match:a,children:s}){let i=_.useContext(Ur);return i&&i.static&&i.staticContext&&(a.route.errorElement||a.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=a.route.id),_.createElement(on.Provider,{value:t},s)}function NS(t,a=[],s=null,i=null,c=null){if(t==null){if(!s)return null;if(s.errors)t=s.matches;else if(a.length===0&&!s.initialized&&s.matches.length>0)t=s.matches;else return null}let u=t,f=s?.errors;if(f!=null){let y=u.findIndex(x=>x.route.id&&f?.[x.route.id]!==void 0);Qe(y>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(f).join(",")}`),u=u.slice(0,Math.min(u.length,y+1))}let m=!1,p=-1;if(s)for(let y=0;y<u.length;y++){let x=u[y];if((x.route.HydrateFallback||x.route.hydrateFallbackElement)&&(p=y),x.route.id){let{loaderData:b,errors:S}=s,j=x.route.loader&&!b.hasOwnProperty(x.route.id)&&(!S||S[x.route.id]===void 0);if(x.route.lazy||j){m=!0,p>=0?u=u.slice(0,p+1):u=[u[0]];break}}}let g=s&&i?(y,x)=>{i(y,{location:s.location,params:s.matches?.[0]?.params??{},unstable_pattern:sS(s.matches),errorInfo:x})}:void 0;return u.reduceRight((y,x,b)=>{let S,j=!1,A=null,N=null;s&&(S=f&&x.route.id?f[x.route.id]:void 0,A=x.route.errorElement||vS,m&&(p<0&&b===0?(Iy("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),j=!0,N=null):p===b&&(j=!0,N=x.route.hydrateFallbackElement||null)));let E=a.concat(u.slice(0,b+1)),R=()=>{let C;return S?C=A:j?C=N:x.route.Component?C=_.createElement(x.route.Component,null):x.route.element?C=x.route.element:C=y,_.createElement(SS,{match:x,routeContext:{outlet:y,matches:E,isDataRoute:s!=null},children:C})};return s&&(x.route.ErrorBoundary||x.route.errorElement||b===0)?_.createElement(Gy,{location:s.location,revalidation:s.revalidation,component:A,error:S,children:R(),routeContext:{outlet:null,matches:E,isDataRoute:!0},onError:g}):R()},null)}function jh(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function jS(t){let a=_.useContext(Ur);return Qe(a,jh(t)),a}function ES(t){let a=_.useContext(Bc);return Qe(a,jh(t)),a}function _S(t){let a=_.useContext(on);return Qe(a,jh(t)),a}function Eh(t){let a=_S(t),s=a.matches[a.matches.length-1];return Qe(s.route.id,`${t} can only be used on routes that contain a unique "id"`),s.route.id}function CS(){return Eh("useRouteId")}function TS(){let t=_.useContext(Nh),a=ES("useRouteError"),s=Eh("useRouteError");return t!==void 0?t:a.errors?.[s]}function MS(){let{router:t}=jS("useNavigate"),a=Eh("useNavigate"),s=_.useRef(!1);return Yy(()=>{s.current=!0}),_.useCallback(async(c,u={})=>{It(s.current,Vy),s.current&&(typeof c=="number"?await t.navigate(c):await t.navigate(c,{fromRouteId:a,...u}))},[t,a])}var nx={};function Iy(t,a,s){!a&&!nx[t]&&(nx[t]=!0,It(!1,s))}_.memo(AS);function AS({routes:t,future:a,state:s,onError:i}){return Xy(t,void 0,s,i,a)}function bc({to:t,replace:a,state:s,relative:i}){Qe($r(),"<Navigate> may be used only in the context of a <Router> component.");let{static:c}=_.useContext(Zt);It(!c,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:u}=_.useContext(on),{pathname:f}=ca(),m=Ts(),p=Sh(t,wh(u),f,i==="path"),g=JSON.stringify(p);return _.useEffect(()=>{m(JSON.parse(g),{replace:a,state:s,relative:i})},[m,g,i,a,s]),null}function kS(t){return gS(t.context)}function _t(t){Qe(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function RS({basename:t="/",children:a=null,location:s,navigationType:i="POP",navigator:c,static:u=!1,unstable_useTransitions:f}){Qe(!$r(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let m=t.replace(/^\/*/,"/"),p=_.useMemo(()=>({basename:m,navigator:c,static:u,unstable_useTransitions:f,future:{}}),[m,c,u,f]);typeof s=="string"&&(s=Lr(s));let{pathname:g="/",search:y="",hash:x="",state:b=null,key:S="default"}=s,j=_.useMemo(()=>{let A=ia(g,m);return A==null?null:{location:{pathname:A,search:y,hash:x,state:b,key:S},navigationType:i}},[m,g,y,x,b,S,i]);return It(j!=null,`<Router basename="${m}"> is not able to match the URL "${g}${y}${x}" because it does not start with the basename, so the <Router> won't render anything.`),j==null?null:_.createElement(Zt.Provider,{value:p},_.createElement(oo.Provider,{children:a,value:j}))}function DS({children:t,location:a}){return yS(Ff(t),a)}function Ff(t,a=[]){let s=[];return _.Children.forEach(t,(i,c)=>{if(!_.isValidElement(i))return;let u=[...a,c];if(i.type===_.Fragment){s.push.apply(s,Ff(i.props.children,u));return}Qe(i.type===_t,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Qe(!i.props.index||!i.props.children,"An index route cannot have child routes.");let f={id:i.props.id||u.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,middleware:i.props.middleware,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(f.children=Ff(i.props.children,u)),s.push(f)}),s}var ic="get",oc="application/x-www-form-urlencoded";function Hc(t){return typeof HTMLElement<"u"&&t instanceof HTMLElement}function zS(t){return Hc(t)&&t.tagName.toLowerCase()==="button"}function OS(t){return Hc(t)&&t.tagName.toLowerCase()==="form"}function BS(t){return Hc(t)&&t.tagName.toLowerCase()==="input"}function HS(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function LS(t,a){return t.button===0&&(!a||a==="_self")&&!HS(t)}function Wf(t=""){return new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((a,s)=>{let i=t[s];return a.concat(Array.isArray(i)?i.map(c=>[s,c]):[[s,i]])},[]))}function US(t,a){let s=Wf(t);return a&&a.forEach((i,c)=>{s.has(c)||a.getAll(c).forEach(u=>{s.append(c,u)})}),s}var Yl=null;function $S(){if(Yl===null)try{new FormData(document.createElement("form"),0),Yl=!1}catch{Yl=!0}return Yl}var qS=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Af(t){return t!=null&&!qS.has(t)?(It(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${oc}"`),null):t}function VS(t,a){let s,i,c,u,f;if(OS(t)){let m=t.getAttribute("action");i=m?ia(m,a):null,s=t.getAttribute("method")||ic,c=Af(t.getAttribute("enctype"))||oc,u=new FormData(t)}else if(zS(t)||BS(t)&&(t.type==="submit"||t.type==="image")){let m=t.form;if(m==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=t.getAttribute("formaction")||m.getAttribute("action");if(i=p?ia(p,a):null,s=t.getAttribute("formmethod")||m.getAttribute("method")||ic,c=Af(t.getAttribute("formenctype"))||Af(m.getAttribute("enctype"))||oc,u=new FormData(m,t),!$S()){let{name:g,type:y,value:x}=t;if(y==="image"){let b=g?`${g}.`:"";u.append(`${b}x`,"0"),u.append(`${b}y`,"0")}else g&&u.append(g,x)}}else{if(Hc(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');s=ic,i=null,c=oc,f=t}return u&&c==="text/plain"&&(f=u,u=void 0),{action:i,method:s.toLowerCase(),encType:c,formData:u,body:f}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function _h(t,a){if(t===!1||t===null||typeof t>"u")throw new Error(a)}function YS(t,a,s,i){let c=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return s?c.pathname.endsWith("/")?c.pathname=`${c.pathname}_.${i}`:c.pathname=`${c.pathname}.${i}`:c.pathname==="/"?c.pathname=`_root.${i}`:a&&ia(c.pathname,a)==="/"?c.pathname=`${a.replace(/\/$/,"")}/_root.${i}`:c.pathname=`${c.pathname.replace(/\/$/,"")}.${i}`,c}async function XS(t,a){if(t.id in a)return a[t.id];try{let s=await import(t.module);return a[t.id]=s,s}catch(s){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(s),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function GS(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function IS(t,a,s){let i=await Promise.all(t.map(async c=>{let u=a.routes[c.route.id];if(u){let f=await XS(u,s);return f.links?f.links():[]}return[]}));return FS(i.flat(1).filter(GS).filter(c=>c.rel==="stylesheet"||c.rel==="preload").map(c=>c.rel==="stylesheet"?{...c,rel:"prefetch",as:"style"}:{...c,rel:"prefetch"}))}function ax(t,a,s,i,c,u){let f=(p,g)=>s[g]?p.route.id!==s[g].route.id:!0,m=(p,g)=>s[g].pathname!==p.pathname||s[g].route.path?.endsWith("*")&&s[g].params["*"]!==p.params["*"];return u==="assets"?a.filter((p,g)=>f(p,g)||m(p,g)):u==="data"?a.filter((p,g)=>{let y=i.routes[p.route.id];if(!y||!y.hasLoader)return!1;if(f(p,g)||m(p,g))return!0;if(p.route.shouldRevalidate){let x=p.route.shouldRevalidate({currentUrl:new URL(c.pathname+c.search+c.hash,window.origin),currentParams:s[0]?.params||{},nextUrl:new URL(t,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof x=="boolean")return x}return!0}):[]}function PS(t,a,{includeHydrateFallback:s}={}){return ZS(t.map(i=>{let c=a.routes[i.route.id];if(!c)return[];let u=[c.module];return c.clientActionModule&&(u=u.concat(c.clientActionModule)),c.clientLoaderModule&&(u=u.concat(c.clientLoaderModule)),s&&c.hydrateFallbackModule&&(u=u.concat(c.hydrateFallbackModule)),c.imports&&(u=u.concat(c.imports)),u}).flat(1))}function ZS(t){return[...new Set(t)]}function QS(t){let a={},s=Object.keys(t).sort();for(let i of s)a[i]=t[i];return a}function FS(t,a){let s=new Set;return new Set(a),t.reduce((i,c)=>{let u=JSON.stringify(QS(c));return s.has(u)||(s.add(u),i.push({key:u,link:c})),i},[])}function Py(){let t=_.useContext(Ur);return _h(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function WS(){let t=_.useContext(Bc);return _h(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var Ch=_.createContext(void 0);Ch.displayName="FrameworkContext";function Zy(){let t=_.useContext(Ch);return _h(t,"You must render this element inside a <HydratedRouter> element"),t}function KS(t,a){let s=_.useContext(Ch),[i,c]=_.useState(!1),[u,f]=_.useState(!1),{onFocus:m,onBlur:p,onMouseEnter:g,onMouseLeave:y,onTouchStart:x}=a,b=_.useRef(null);_.useEffect(()=>{if(t==="render"&&f(!0),t==="viewport"){let A=E=>{E.forEach(R=>{f(R.isIntersecting)})},N=new IntersectionObserver(A,{threshold:.5});return b.current&&N.observe(b.current),()=>{N.disconnect()}}},[t]),_.useEffect(()=>{if(i){let A=setTimeout(()=>{f(!0)},100);return()=>{clearTimeout(A)}}},[i]);let S=()=>{c(!0)},j=()=>{c(!1),f(!1)};return s?t!=="intent"?[u,b,{}]:[u,b,{onFocus:Ui(m,S),onBlur:Ui(p,j),onMouseEnter:Ui(g,S),onMouseLeave:Ui(y,j),onTouchStart:Ui(x,S)}]:[!1,b,{}]}function Ui(t,a){return s=>{t&&t(s),s.defaultPrevented||a(s)}}function JS({page:t,...a}){let{router:s}=Py(),i=_.useMemo(()=>Dy(s.routes,t,s.basename),[s.routes,t,s.basename]);return i?_.createElement(tN,{page:t,matches:i,...a}):null}function eN(t){let{manifest:a,routeModules:s}=Zy(),[i,c]=_.useState([]);return _.useEffect(()=>{let u=!1;return IS(t,a,s).then(f=>{u||c(f)}),()=>{u=!0}},[t,a,s]),i}function tN({page:t,matches:a,...s}){let i=ca(),{future:c,manifest:u,routeModules:f}=Zy(),{basename:m}=Py(),{loaderData:p,matches:g}=WS(),y=_.useMemo(()=>ax(t,a,g,u,i,"data"),[t,a,g,u,i]),x=_.useMemo(()=>ax(t,a,g,u,i,"assets"),[t,a,g,u,i]),b=_.useMemo(()=>{if(t===i.pathname+i.search+i.hash)return[];let A=new Set,N=!1;if(a.forEach(R=>{let C=u.routes[R.route.id];!C||!C.hasLoader||(!y.some(k=>k.route.id===R.route.id)&&R.route.id in p&&f[R.route.id]?.shouldRevalidate||C.hasClientLoader?N=!0:A.add(R.route.id))}),A.size===0)return[];let E=YS(t,m,c.unstable_trailingSlashAwareDataRequests,"data");return N&&A.size>0&&E.searchParams.set("_routes",a.filter(R=>A.has(R.route.id)).map(R=>R.route.id).join(",")),[E.pathname+E.search]},[m,c.unstable_trailingSlashAwareDataRequests,p,i,u,y,a,t,f]),S=_.useMemo(()=>PS(x,u),[x,u]),j=eN(x);return _.createElement(_.Fragment,null,b.map(A=>_.createElement("link",{key:A,rel:"prefetch",as:"fetch",href:A,...s})),S.map(A=>_.createElement("link",{key:A,rel:"modulepreload",href:A,...s})),j.map(({key:A,link:N})=>_.createElement("link",{key:A,nonce:s.nonce,...N})))}function nN(...t){return a=>{t.forEach(s=>{typeof s=="function"?s(a):s!=null&&(s.current=a)})}}var aN=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{aN&&(window.__reactRouterVersion="7.12.0")}catch{}function sN({basename:t,children:a,unstable_useTransitions:s,window:i}){let c=_.useRef();c.current==null&&(c.current=Dw({window:i,v5Compat:!0}));let u=c.current,[f,m]=_.useState({action:u.action,location:u.location}),p=_.useCallback(g=>{s===!1?m(g):_.startTransition(()=>m(g))},[s]);return _.useLayoutEffect(()=>u.listen(p),[u,p]),_.createElement(RS,{basename:t,children:a,location:f.location,navigationType:f.action,navigator:u,unstable_useTransitions:s})}var Qy=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,bs=_.forwardRef(function({onClick:a,discover:s="render",prefetch:i="none",relative:c,reloadDocument:u,replace:f,state:m,target:p,to:g,preventScrollReset:y,viewTransition:x,unstable_defaultShouldRevalidate:b,...S},j){let{basename:A,unstable_useTransitions:N}=_.useContext(Zt),E=typeof g=="string"&&Qy.test(g),R=Ly(g,A);g=R.to;let C=hS(g,{relative:c}),[k,w,D]=KS(i,S),M=oN(g,{replace:f,state:m,target:p,preventScrollReset:y,relative:c,viewTransition:x,unstable_defaultShouldRevalidate:b,unstable_useTransitions:N});function V(se){a&&a(se),se.defaultPrevented||M(se)}let L=_.createElement("a",{...S,...D,href:R.absoluteURL||C,onClick:R.isExternal||u?a:V,ref:nN(j,w),target:p,"data-discover":!E&&s==="render"?"true":void 0});return k&&!E?_.createElement(_.Fragment,null,L,_.createElement(JS,{page:C})):L});bs.displayName="Link";var Fy=_.forwardRef(function({"aria-current":a="page",caseSensitive:s=!1,className:i="",end:c=!1,style:u,to:f,viewTransition:m,children:p,...g},y){let x=lo(f,{relative:g.relative}),b=ca(),S=_.useContext(Bc),{navigator:j,basename:A}=_.useContext(Zt),N=S!=null&&hN(x)&&m===!0,E=j.encodeLocation?j.encodeLocation(x).pathname:x.pathname,R=b.pathname,C=S&&S.navigation&&S.navigation.location?S.navigation.location.pathname:null;s||(R=R.toLowerCase(),C=C?C.toLowerCase():null,E=E.toLowerCase()),C&&A&&(C=ia(C,A)||C);const k=E!=="/"&&E.endsWith("/")?E.length-1:E.length;let w=R===E||!c&&R.startsWith(E)&&R.charAt(k)==="/",D=C!=null&&(C===E||!c&&C.startsWith(E)&&C.charAt(E.length)==="/"),M={isActive:w,isPending:D,isTransitioning:N},V=w?a:void 0,L;typeof i=="function"?L=i(M):L=[i,w?"active":null,D?"pending":null,N?"transitioning":null].filter(Boolean).join(" ");let se=typeof u=="function"?u(M):u;return _.createElement(bs,{...g,"aria-current":V,className:L,ref:y,style:se,to:f,viewTransition:m},typeof p=="function"?p(M):p)});Fy.displayName="NavLink";var rN=_.forwardRef(({discover:t="render",fetcherKey:a,navigate:s,reloadDocument:i,replace:c,state:u,method:f=ic,action:m,onSubmit:p,relative:g,preventScrollReset:y,viewTransition:x,unstable_defaultShouldRevalidate:b,...S},j)=>{let{unstable_useTransitions:A}=_.useContext(Zt),N=dN(),E=fN(m,{relative:g}),R=f.toLowerCase()==="get"?"get":"post",C=typeof m=="string"&&Qy.test(m),k=w=>{if(p&&p(w),w.defaultPrevented)return;w.preventDefault();let D=w.nativeEvent.submitter,M=D?.getAttribute("formmethod")||f,V=()=>N(D||w.currentTarget,{fetcherKey:a,method:M,navigate:s,replace:c,state:u,relative:g,preventScrollReset:y,viewTransition:x,unstable_defaultShouldRevalidate:b});A&&s!==!1?_.startTransition(()=>V()):V()};return _.createElement("form",{ref:j,method:R,action:E,onSubmit:i?p:k,...S,"data-discover":!C&&t==="render"?"true":void 0})});rN.displayName="Form";function iN(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Wy(t){let a=_.useContext(Ur);return Qe(a,iN(t)),a}function oN(t,{target:a,replace:s,state:i,preventScrollReset:c,relative:u,viewTransition:f,unstable_defaultShouldRevalidate:m,unstable_useTransitions:p}={}){let g=Ts(),y=ca(),x=lo(t,{relative:u});return _.useCallback(b=>{if(LS(b,a)){b.preventDefault();let S=s!==void 0?s:Qi(y)===Qi(x),j=()=>g(t,{replace:S,state:i,preventScrollReset:c,relative:u,viewTransition:f,unstable_defaultShouldRevalidate:m});p?_.startTransition(()=>j()):j()}},[y,g,x,s,i,a,t,c,u,f,m,p])}function lN(t){It(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let a=_.useRef(Wf(t)),s=_.useRef(!1),i=ca(),c=_.useMemo(()=>US(i.search,s.current?null:a.current),[i.search]),u=Ts(),f=_.useCallback((m,p)=>{const g=Wf(typeof m=="function"?m(new URLSearchParams(c)):m);s.current=!0,u("?"+g,p)},[u,c]);return[c,f]}var cN=0,uN=()=>`__${String(++cN)}__`;function dN(){let{router:t}=Wy("useSubmit"),{basename:a}=_.useContext(Zt),s=CS(),i=t.fetch,c=t.navigate;return _.useCallback(async(u,f={})=>{let{action:m,method:p,encType:g,formData:y,body:x}=VS(u,a);if(f.navigate===!1){let b=f.fetcherKey||uN();await i(b,s,f.action||m,{unstable_defaultShouldRevalidate:f.unstable_defaultShouldRevalidate,preventScrollReset:f.preventScrollReset,formData:y,body:x,formMethod:f.method||p,formEncType:f.encType||g,flushSync:f.flushSync})}else await c(f.action||m,{unstable_defaultShouldRevalidate:f.unstable_defaultShouldRevalidate,preventScrollReset:f.preventScrollReset,formData:y,body:x,formMethod:f.method||p,formEncType:f.encType||g,replace:f.replace,state:f.state,fromRouteId:s,flushSync:f.flushSync,viewTransition:f.viewTransition})},[i,c,a,s])}function fN(t,{relative:a}={}){let{basename:s}=_.useContext(Zt),i=_.useContext(on);Qe(i,"useFormAction must be used inside a RouteContext");let[c]=i.matches.slice(-1),u={...lo(t||".",{relative:a})},f=ca();if(t==null){u.search=f.search;let m=new URLSearchParams(u.search),p=m.getAll("index");if(p.some(y=>y==="")){m.delete("index"),p.filter(x=>x).forEach(x=>m.append("index",x));let y=m.toString();u.search=y?`?${y}`:""}}return(!t||t===".")&&c.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),s!=="/"&&(u.pathname=u.pathname==="/"?s:ra([s,u.pathname])),Qi(u)}function hN(t,{relative:a}={}){let s=_.useContext($y);Qe(s!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=Wy("useViewTransitionState"),c=lo(t,{relative:a});if(!s.isTransitioning)return!1;let u=ia(s.currentLocation.pathname,i)||s.currentLocation.pathname,f=ia(s.nextLocation.pathname,i)||s.nextLocation.pathname;return yc(c.pathname,f)!=null||yc(c.pathname,u)!=null}Ry();const sx=t=>{let a;const s=new Set,i=(g,y)=>{const x=typeof g=="function"?g(a):g;if(!Object.is(x,a)){const b=a;a=y??(typeof x!="object"||x===null)?x:Object.assign({},a,x),s.forEach(S=>S(a,b))}},c=()=>a,m={setState:i,getState:c,getInitialState:()=>p,subscribe:g=>(s.add(g),()=>s.delete(g))},p=a=t(i,c,m);return m},mN=(t=>t?sx(t):sx),pN=t=>t;function gN(t,a=pN){const s=br.useSyncExternalStore(t.subscribe,br.useCallback(()=>a(t.getState()),[t,a]),br.useCallback(()=>a(t.getInitialState()),[t,a]));return br.useDebugValue(s),s}const rx=t=>{const a=mN(t),s=i=>gN(a,i);return Object.assign(s,a),s},Ky=(t=>t?rx(t):rx);function xN(t,a){let s;try{s=t()}catch{return}return{getItem:c=>{var u;const f=p=>p===null?null:JSON.parse(p,void 0),m=(u=s.getItem(c))!=null?u:null;return m instanceof Promise?m.then(f):f(m)},setItem:(c,u)=>s.setItem(c,JSON.stringify(u,void 0)),removeItem:c=>s.removeItem(c)}}const Kf=t=>a=>{try{const s=t(a);return s instanceof Promise?s:{then(i){return Kf(i)(s)},catch(i){return this}}}catch(s){return{then(i){return this},catch(i){return Kf(i)(s)}}}},yN=(t,a)=>(s,i,c)=>{let u={storage:xN(()=>localStorage),partialize:N=>N,version:0,merge:(N,E)=>({...E,...N}),...a},f=!1,m=0;const p=new Set,g=new Set;let y=u.storage;if(!y)return t((...N)=>{console.warn(`[zustand persist middleware] Unable to update item '${u.name}', the given storage is currently unavailable.`),s(...N)},i,c);const x=()=>{const N=u.partialize({...i()});return y.setItem(u.name,{state:N,version:u.version})},b=c.setState;c.setState=(N,E)=>(b(N,E),x());const S=t((...N)=>(s(...N),x()),i,c);c.getInitialState=()=>S;let j;const A=()=>{var N,E;if(!y)return;const R=++m;f=!1,p.forEach(k=>{var w;return k((w=i())!=null?w:S)});const C=((E=u.onRehydrateStorage)==null?void 0:E.call(u,(N=i())!=null?N:S))||void 0;return Kf(y.getItem.bind(y))(u.name).then(k=>{if(k)if(typeof k.version=="number"&&k.version!==u.version){if(u.migrate){const w=u.migrate(k.state,k.version);return w instanceof Promise?w.then(D=>[!0,D]):[!0,w]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,k.state];return[!1,void 0]}).then(k=>{var w;if(R!==m)return;const[D,M]=k;if(j=u.merge(M,(w=i())!=null?w:S),s(j,!0),D)return x()}).then(()=>{R===m&&(C?.(j,void 0),j=i(),f=!0,g.forEach(k=>k(j)))}).catch(k=>{R===m&&C?.(void 0,k)})};return c.persist={setOptions:N=>{u={...u,...N},N.storage&&(y=N.storage)},clearStorage:()=>{y?.removeItem(u.name)},getOptions:()=>u,rehydrate:()=>A(),hasHydrated:()=>f,onHydrate:N=>(p.add(N),()=>{p.delete(N)}),onFinishHydration:N=>(g.add(N),()=>{g.delete(N)})},u.skipHydration||A(),j||S},bN=yN,Ht=Ky(bN(t=>({user:null,agent:null,token:null,basicToken:null,isAuthenticated:!1,login:(a,s,i)=>{t({user:a,agent:a,token:s,basicToken:i,isAuthenticated:!0})},logout:()=>{t({user:null,agent:null,token:null,basicToken:null,isAuthenticated:!1})}}),{name:"auth-storage"}));const vN=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),wN=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(a,s,i)=>i?i.toUpperCase():s.toLowerCase()),ix=t=>{const a=wN(t);return a.charAt(0).toUpperCase()+a.slice(1)},Jy=(...t)=>t.filter((a,s,i)=>!!a&&a.trim()!==""&&i.indexOf(a)===s).join(" ").trim(),SN=t=>{for(const a in t)if(a.startsWith("aria-")||a==="role"||a==="title")return!0};var NN={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const jN=_.forwardRef(({color:t="currentColor",size:a=24,strokeWidth:s=2,absoluteStrokeWidth:i,className:c="",children:u,iconNode:f,...m},p)=>_.createElement("svg",{ref:p,...NN,width:a,height:a,stroke:t,strokeWidth:i?Number(s)*24/Number(a):s,className:Jy("lucide",c),...!u&&!SN(m)&&{"aria-hidden":"true"},...m},[...f.map(([g,y])=>_.createElement(g,y)),...Array.isArray(u)?u:[u]]));const je=(t,a)=>{const s=_.forwardRef(({className:i,...c},u)=>_.createElement(jN,{ref:u,iconNode:a,className:Jy(`lucide-${vN(ix(t))}`,`lucide-${t}`,i),...c}));return s.displayName=ix(t),s};const EN=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],ws=je("activity",EN);const _N=[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]],Th=je("arrow-right-left",_N);const CN=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],TN=je("arrow-right",CN);const MN=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],Mh=je("bot",MN);const AN=[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]],_r=je("building-2",AN);const kN=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],eb=je("chart-column",kN);const RN=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],tb=je("chevron-right",RN);const DN=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],vc=je("circle-check-big",DN);const zN=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Ah=je("circle-x",zN);const ON=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],wc=je("clock",ON);const BN=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],HN=je("download",BN);const LN=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],UN=je("eye-off",LN);const $N=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],qN=je("eye",$N);const VN=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],YN=je("file-text",VN);const XN=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],kh=je("funnel",XN);const GN=[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]],nb=je("git-branch",GN);const IN=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],PN=je("heart",IN);const ZN=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],QN=je("image",ZN);const FN=[["polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12",key:"o97t9d"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}]],ab=je("inbox",FN);const WN=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],KN=je("key",WN);const JN=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],ej=je("layout-dashboard",JN);const tj=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],nj=je("log-out",tj);const aj=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],sj=je("map-pin",aj);const rj=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],Cr=je("message-square",rj);const ij=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]],oj=je("mic",ij);const lj=[["path",{d:"M5 12h14",key:"1ays0h"}]],cj=je("minus",lj);const uj=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],Lc=je("phone",uj);const dj=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],sb=je("plus",dj);const fj=[["path",{d:"M16.247 7.761a6 6 0 0 1 0 8.478",key:"1fwjs5"}],["path",{d:"M19.075 4.933a10 10 0 0 1 0 14.134",key:"ehdyv1"}],["path",{d:"M4.925 19.067a10 10 0 0 1 0-14.134",key:"1q22gi"}],["path",{d:"M7.753 16.239a6 6 0 0 1 0-8.478",key:"r2q7qm"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],hj=je("radio",fj);const mj=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Rh=je("refresh-cw",mj);const pj=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],rb=je("search",pj);const gj=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],xj=je("send",gj);const yj=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],bj=je("shield",yj);const vj=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],ib=je("square-pen",vj);const wj=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],Sj=je("tag",wj);const Nj=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Dh=je("trash-2",Nj);const jj=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],Ej=je("trending-up",jj);const _j=[["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m14.305 16.53.923-.382",key:"1itpsq"}],["path",{d:"m15.228 13.852-.923-.383",key:"eplpkm"}],["path",{d:"m16.852 12.228-.383-.923",key:"13v3q0"}],["path",{d:"m16.852 17.772-.383.924",key:"1i8mnm"}],["path",{d:"m19.148 12.228.383-.923",key:"1q8j1v"}],["path",{d:"m19.53 18.696-.382-.924",key:"vk1qj3"}],["path",{d:"m20.772 13.852.924-.383",key:"n880s0"}],["path",{d:"m20.772 16.148.924.383",key:"1g6xey"}],["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Cj=je("user-cog",_j);const Tj=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],Tr=je("user-plus",Tj);const Mj=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Sr=je("user",Mj);const Aj=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Uc=je("users",Aj);const kj=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],zh=je("x",kj);function Rj(){const t=Ts(),{agent:a,logout:s}=Ht(),i=a?.role==="supervisor",c=[{to:"/dashboard",icon:ej,label:"Dashboard"},{to:"/conversations",icon:Cr,label:"Conversaciones"},...i?[{to:"/agents",icon:Cj,label:"Agentes"},{to:"/departments",icon:_r,label:"Departamentos"},{to:"/flows",icon:nb,label:"Flujos"},{to:"/logs",icon:ws,label:"Logs"},{to:"/leads",icon:Uc,label:"Leads"},{to:"/analytics",icon:eb,label:"Analytics"},{to:"/monitor",icon:hj,label:"Monitor"}]:[]],u=()=>{s(),t("/login")},f=i?"Supervisor":"Agente";return l.jsxs("div",{className:"min-h-screen bg-gray-50 flex",children:[l.jsxs("aside",{className:"w-64 bg-white border-r border-gray-200 flex flex-col",children:[l.jsxs("div",{className:"h-16 flex items-center gap-3 px-6 border-b border-gray-200",children:[l.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-green-500 to-green-700 rounded-xl flex items-center justify-center",children:l.jsx(Mh,{className:"w-6 h-6 text-white"})}),l.jsxs("div",{children:[l.jsx("h1",{className:"font-bold text-gray-800",children:"WhatsApp Bot"}),l.jsx("p",{className:"text-xs text-gray-400",children:"Platform"})]})]}),l.jsx("nav",{className:"flex-1 p-4 space-y-1",children:c.map(({to:m,icon:p,label:g})=>l.jsxs(Fy,{to:m,className:({isActive:y})=>`flex items-center gap-3 px-4 py-3 rounded-lg transition ${y?"bg-green-50 text-green-600 font-medium":"text-gray-600 hover:bg-gray-100"}`,children:[l.jsx(p,{className:"w-5 h-5"}),l.jsx("span",{children:g})]},m))}),l.jsx("div",{className:"p-4 border-t border-gray-200",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center",style:{backgroundColor:a?.avatarColor||"#6366f1"},children:l.jsx("span",{className:"text-white font-medium text-sm",children:a?.name?.[0]?.toUpperCase()||a?.username?.[0]?.toUpperCase()||"A"})}),l.jsxs("div",{children:[l.jsx("p",{className:"font-medium text-gray-800 text-sm",children:a?.name||a?.username||"Admin"}),l.jsx("p",{className:"text-xs text-gray-400",children:f})]})]}),l.jsx("button",{onClick:u,className:"p-2 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded-lg transition",title:"Cerrar sesion",children:l.jsx(nj,{className:"w-5 h-5"})})]})})]}),l.jsx("main",{className:"flex-1 overflow-auto",children:l.jsx(kS,{})})]})}async function Dj(t,a){const s=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:t,password:a})});if(!s.ok){const c=await s.json().catch(()=>({}));throw new Error(c.error||"Credenciales invlidas")}const i=await s.json();return{agent:i.agent,token:i.token,basicToken:i.basicToken}}function zj(){const[t,a]=_.useState(""),[s,i]=_.useState(""),[c,u]=_.useState(""),[f,m]=_.useState(!1),p=Ts(),g=Ht(x=>x.login),y=async x=>{x.preventDefault(),u(""),m(!0);try{const{agent:b,token:S,basicToken:j}=await Dj(t,s);g(b,S,j),p("/dashboard")}catch(b){u(b.message||"Error al iniciar sesin")}finally{m(!1)}};return l.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-50 to-green-100 flex items-center justify-center p-5",children:l.jsxs("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-md p-10",children:[l.jsxs("div",{className:"text-center mb-8",children:[l.jsx("div",{className:"w-18 h-18 bg-gradient-to-br from-green-500 to-green-700 rounded-2xl flex items-center justify-center mx-auto mb-5 p-4",children:l.jsx("svg",{className:"w-11 h-11 text-white",fill:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})})}),l.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"WhatsApp Bot Platform"}),l.jsx("p",{className:"text-gray-500 text-sm",children:"Ingresa tus credenciales para continuar"})]}),l.jsxs("form",{onSubmit:y,children:[c&&l.jsx("div",{className:"bg-red-50 text-red-600 px-4 py-3 rounded-xl text-sm mb-5 border border-red-200",children:c}),l.jsxs("div",{className:"mb-5",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Usuario"}),l.jsx("input",{type:"text",value:t,onChange:x=>a(x.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl text-base outline-none transition-colors focus:border-green-500",placeholder:"admin",required:!0})]}),l.jsxs("div",{className:"mb-6",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Contrasea"}),l.jsx("input",{type:"password",value:s,onChange:x=>i(x.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl text-base outline-none transition-colors focus:border-green-500",placeholder:"",required:!0})]}),l.jsx("button",{type:"submit",disabled:f,className:"w-full bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white font-semibold py-3.5 px-5 rounded-xl text-base transition-all shadow-lg shadow-green-500/30 disabled:opacity-60 disabled:cursor-not-allowed",children:f?"Ingresando...":"Ingresar"})]}),l.jsx("p",{className:"text-center text-gray-400 text-xs mt-8",children:"Respaldos Chile  2025"})]})})}const co=()=>{const t=Ht.getState().token;return{"Content-Type":"application/json",...t?{Authorization:`Bearer ${t}`}:{}}};async function ob(t,a){const s=new URLSearchParams;t&&s.set("filter",t);const i=s.toString(),c=await fetch(`/api/chat/conversations${i?"?"+i:""}`,{headers:co()});if(!c.ok)throw new Error("Error loading conversations");return c.json()}async function Oj(t){const a=await fetch(`/api/chat/conversations/${encodeURIComponent(t)}`,{headers:co()});if(!a.ok)throw new Error("Error loading conversation");return a.json()}async function Bj(t,a){const s=await fetch("/api/chat/send",{method:"POST",headers:co(),body:JSON.stringify({to:t,message:a})});if(!s.ok)throw new Error("Error sending message");return s.json()}async function ox(t){const a=await fetch("/api/chat/mark-read",{method:"POST",headers:co(),body:JSON.stringify({phone:t})});if(!a.ok)throw new Error("Error marking as read");return a.json()}async function Hj(){const t=await fetch("/api/chatbot/stats",{headers:co()});if(!t.ok)throw new Error("Error loading stats");return t.json()}function Xl({title:t,value:a,icon:s,color:i="green",subtitle:c}){const u={green:"bg-green-50 text-green-600",blue:"bg-blue-50 text-blue-600",yellow:"bg-yellow-50 text-yellow-600",purple:"bg-purple-50 text-purple-600",red:"bg-red-50 text-red-600"};return l.jsx("div",{className:"bg-white rounded-xl p-6 border border-gray-100 shadow-sm",children:l.jsxs("div",{className:"flex items-start justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-500 font-medium",children:t}),l.jsx("p",{className:"text-3xl font-bold text-gray-800 mt-2",children:a}),c&&l.jsx("p",{className:"text-xs text-gray-400 mt-1",children:c})]}),s&&l.jsx("div",{className:`p-3 rounded-xl ${u[i]}`,children:l.jsx(s,{className:"w-6 h-6"})})]})})}const lb=6048e5,Lj=864e5,Gl=43200,lx=1440,cx=Symbol.for("constructDateFrom");function oa(t,a){return typeof t=="function"?t(a):t&&typeof t=="object"&&cx in t?t[cx](a):t instanceof Date?new t.constructor(a):new Date(a)}function mt(t,a){return oa(a||t,t)}let Uj={};function uo(){return Uj}function Fi(t,a){const s=uo(),i=a?.weekStartsOn??a?.locale?.options?.weekStartsOn??s.weekStartsOn??s.locale?.options?.weekStartsOn??0,c=mt(t,a?.in),u=c.getDay(),f=(u<i?7:0)+u-i;return c.setDate(c.getDate()-f),c.setHours(0,0,0,0),c}function Sc(t,a){return Fi(t,{...a,weekStartsOn:1})}function cb(t,a){const s=mt(t,a?.in),i=s.getFullYear(),c=oa(s,0);c.setFullYear(i+1,0,4),c.setHours(0,0,0,0);const u=Sc(c),f=oa(s,0);f.setFullYear(i,0,4),f.setHours(0,0,0,0);const m=Sc(f);return s.getTime()>=u.getTime()?i+1:s.getTime()>=m.getTime()?i:i-1}function Nc(t){const a=mt(t),s=new Date(Date.UTC(a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes(),a.getSeconds(),a.getMilliseconds()));return s.setUTCFullYear(a.getFullYear()),+t-+s}function $c(t,...a){const s=oa.bind(null,t||a.find(i=>typeof i=="object"));return a.map(s)}function ux(t,a){const s=mt(t,a?.in);return s.setHours(0,0,0,0),s}function $j(t,a,s){const[i,c]=$c(s?.in,t,a),u=ux(i),f=ux(c),m=+u-Nc(u),p=+f-Nc(f);return Math.round((m-p)/Lj)}function qj(t,a){const s=cb(t,a),i=oa(t,0);return i.setFullYear(s,0,4),i.setHours(0,0,0,0),Sc(i)}function lc(t,a){const s=+mt(t)-+mt(a);return s<0?-1:s>0?1:s}function Vj(t){return oa(t,Date.now())}function Yj(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function Xj(t){return!(!Yj(t)&&typeof t!="number"||isNaN(+mt(t)))}function Gj(t,a,s){const[i,c]=$c(s?.in,t,a),u=i.getFullYear()-c.getFullYear(),f=i.getMonth()-c.getMonth();return u*12+f}function Ij(t){return a=>{const i=(t?Math[t]:Math.trunc)(a);return i===0?0:i}}function Pj(t,a){return+mt(t)-+mt(a)}function Zj(t,a){const s=mt(t,a?.in);return s.setHours(23,59,59,999),s}function Qj(t,a){const s=mt(t,a?.in),i=s.getMonth();return s.setFullYear(s.getFullYear(),i+1,0),s.setHours(23,59,59,999),s}function Fj(t,a){const s=mt(t,a?.in);return+Zj(s,a)==+Qj(s,a)}function Wj(t,a,s){const[i,c,u]=$c(s?.in,t,t,a),f=lc(c,u),m=Math.abs(Gj(c,u));if(m<1)return 0;c.getMonth()===1&&c.getDate()>27&&c.setDate(30),c.setMonth(c.getMonth()-f*m);let p=lc(c,u)===-f;Fj(i)&&m===1&&lc(i,u)===1&&(p=!1);const g=f*(m-+p);return g===0?0:g}function Kj(t,a,s){const i=Pj(t,a)/1e3;return Ij(s?.roundingMethod)(i)}function Jj(t,a){const s=mt(t,a?.in);return s.setFullYear(s.getFullYear(),0,1),s.setHours(0,0,0,0),s}const e4={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},t4=(t,a,s)=>{let i;const c=e4[t];return typeof c=="string"?i=c:a===1?i=c.one:i=c.other.replace("{{count}}",a.toString()),s?.addSuffix?s.comparison&&s.comparison>0?"in "+i:i+" ago":i};function Nr(t){return(a={})=>{const s=a.width?String(a.width):t.defaultWidth;return t.formats[s]||t.formats[t.defaultWidth]}}const n4={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},a4={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},s4={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},r4={date:Nr({formats:n4,defaultWidth:"full"}),time:Nr({formats:a4,defaultWidth:"full"}),dateTime:Nr({formats:s4,defaultWidth:"full"})},i4={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},o4=(t,a,s,i)=>i4[t];function Tn(t){return(a,s)=>{const i=s?.context?String(s.context):"standalone";let c;if(i==="formatting"&&t.formattingValues){const f=t.defaultFormattingWidth||t.defaultWidth,m=s?.width?String(s.width):f;c=t.formattingValues[m]||t.formattingValues[f]}else{const f=t.defaultWidth,m=s?.width?String(s.width):t.defaultWidth;c=t.values[m]||t.values[f]}const u=t.argumentCallback?t.argumentCallback(a):a;return c[u]}}const l4={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},c4={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},u4={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},d4={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},f4={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},h4={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},m4=(t,a)=>{const s=Number(t),i=s%100;if(i>20||i<10)switch(i%10){case 1:return s+"st";case 2:return s+"nd";case 3:return s+"rd"}return s+"th"},p4={ordinalNumber:m4,era:Tn({values:l4,defaultWidth:"wide"}),quarter:Tn({values:c4,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Tn({values:u4,defaultWidth:"wide"}),day:Tn({values:d4,defaultWidth:"wide"}),dayPeriod:Tn({values:f4,defaultWidth:"wide",formattingValues:h4,defaultFormattingWidth:"wide"})};function Mn(t){return(a,s={})=>{const i=s.width,c=i&&t.matchPatterns[i]||t.matchPatterns[t.defaultMatchWidth],u=a.match(c);if(!u)return null;const f=u[0],m=i&&t.parsePatterns[i]||t.parsePatterns[t.defaultParseWidth],p=Array.isArray(m)?x4(m,x=>x.test(f)):g4(m,x=>x.test(f));let g;g=t.valueCallback?t.valueCallback(p):p,g=s.valueCallback?s.valueCallback(g):g;const y=a.slice(f.length);return{value:g,rest:y}}}function g4(t,a){for(const s in t)if(Object.prototype.hasOwnProperty.call(t,s)&&a(t[s]))return s}function x4(t,a){for(let s=0;s<t.length;s++)if(a(t[s]))return s}function ub(t){return(a,s={})=>{const i=a.match(t.matchPattern);if(!i)return null;const c=i[0],u=a.match(t.parsePattern);if(!u)return null;let f=t.valueCallback?t.valueCallback(u[0]):u[0];f=s.valueCallback?s.valueCallback(f):f;const m=a.slice(c.length);return{value:f,rest:m}}}const y4=/^(\d+)(th|st|nd|rd)?/i,b4=/\d+/i,v4={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},w4={any:[/^b/i,/^(a|c)/i]},S4={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},N4={any:[/1/i,/2/i,/3/i,/4/i]},j4={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},E4={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},_4={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},C4={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},T4={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},M4={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},A4={ordinalNumber:ub({matchPattern:y4,parsePattern:b4,valueCallback:t=>parseInt(t,10)}),era:Mn({matchPatterns:v4,defaultMatchWidth:"wide",parsePatterns:w4,defaultParseWidth:"any"}),quarter:Mn({matchPatterns:S4,defaultMatchWidth:"wide",parsePatterns:N4,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Mn({matchPatterns:j4,defaultMatchWidth:"wide",parsePatterns:E4,defaultParseWidth:"any"}),day:Mn({matchPatterns:_4,defaultMatchWidth:"wide",parsePatterns:C4,defaultParseWidth:"any"}),dayPeriod:Mn({matchPatterns:T4,defaultMatchWidth:"any",parsePatterns:M4,defaultParseWidth:"any"})},db={code:"en-US",formatDistance:t4,formatLong:r4,formatRelative:o4,localize:p4,match:A4,options:{weekStartsOn:0,firstWeekContainsDate:1}};function k4(t,a){const s=mt(t,a?.in);return $j(s,Jj(s))+1}function R4(t,a){const s=mt(t,a?.in),i=+Sc(s)-+qj(s);return Math.round(i/lb)+1}function fb(t,a){const s=mt(t,a?.in),i=s.getFullYear(),c=uo(),u=a?.firstWeekContainsDate??a?.locale?.options?.firstWeekContainsDate??c.firstWeekContainsDate??c.locale?.options?.firstWeekContainsDate??1,f=oa(a?.in||t,0);f.setFullYear(i+1,0,u),f.setHours(0,0,0,0);const m=Fi(f,a),p=oa(a?.in||t,0);p.setFullYear(i,0,u),p.setHours(0,0,0,0);const g=Fi(p,a);return+s>=+m?i+1:+s>=+g?i:i-1}function D4(t,a){const s=uo(),i=a?.firstWeekContainsDate??a?.locale?.options?.firstWeekContainsDate??s.firstWeekContainsDate??s.locale?.options?.firstWeekContainsDate??1,c=fb(t,a),u=oa(a?.in||t,0);return u.setFullYear(c,0,i),u.setHours(0,0,0,0),Fi(u,a)}function z4(t,a){const s=mt(t,a?.in),i=+Fi(s,a)-+D4(s,a);return Math.round(i/lb)+1}function $e(t,a){const s=t<0?"-":"",i=Math.abs(t).toString().padStart(a,"0");return s+i}const qa={y(t,a){const s=t.getFullYear(),i=s>0?s:1-s;return $e(a==="yy"?i%100:i,a.length)},M(t,a){const s=t.getMonth();return a==="M"?String(s+1):$e(s+1,2)},d(t,a){return $e(t.getDate(),a.length)},a(t,a){const s=t.getHours()/12>=1?"pm":"am";switch(a){case"a":case"aa":return s.toUpperCase();case"aaa":return s;case"aaaaa":return s[0];default:return s==="am"?"a.m.":"p.m."}},h(t,a){return $e(t.getHours()%12||12,a.length)},H(t,a){return $e(t.getHours(),a.length)},m(t,a){return $e(t.getMinutes(),a.length)},s(t,a){return $e(t.getSeconds(),a.length)},S(t,a){const s=a.length,i=t.getMilliseconds(),c=Math.trunc(i*Math.pow(10,s-3));return $e(c,a.length)}},gr={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},dx={G:function(t,a,s){const i=t.getFullYear()>0?1:0;switch(a){case"G":case"GG":case"GGG":return s.era(i,{width:"abbreviated"});case"GGGGG":return s.era(i,{width:"narrow"});default:return s.era(i,{width:"wide"})}},y:function(t,a,s){if(a==="yo"){const i=t.getFullYear(),c=i>0?i:1-i;return s.ordinalNumber(c,{unit:"year"})}return qa.y(t,a)},Y:function(t,a,s,i){const c=fb(t,i),u=c>0?c:1-c;if(a==="YY"){const f=u%100;return $e(f,2)}return a==="Yo"?s.ordinalNumber(u,{unit:"year"}):$e(u,a.length)},R:function(t,a){const s=cb(t);return $e(s,a.length)},u:function(t,a){const s=t.getFullYear();return $e(s,a.length)},Q:function(t,a,s){const i=Math.ceil((t.getMonth()+1)/3);switch(a){case"Q":return String(i);case"QQ":return $e(i,2);case"Qo":return s.ordinalNumber(i,{unit:"quarter"});case"QQQ":return s.quarter(i,{width:"abbreviated",context:"formatting"});case"QQQQQ":return s.quarter(i,{width:"narrow",context:"formatting"});default:return s.quarter(i,{width:"wide",context:"formatting"})}},q:function(t,a,s){const i=Math.ceil((t.getMonth()+1)/3);switch(a){case"q":return String(i);case"qq":return $e(i,2);case"qo":return s.ordinalNumber(i,{unit:"quarter"});case"qqq":return s.quarter(i,{width:"abbreviated",context:"standalone"});case"qqqqq":return s.quarter(i,{width:"narrow",context:"standalone"});default:return s.quarter(i,{width:"wide",context:"standalone"})}},M:function(t,a,s){const i=t.getMonth();switch(a){case"M":case"MM":return qa.M(t,a);case"Mo":return s.ordinalNumber(i+1,{unit:"month"});case"MMM":return s.month(i,{width:"abbreviated",context:"formatting"});case"MMMMM":return s.month(i,{width:"narrow",context:"formatting"});default:return s.month(i,{width:"wide",context:"formatting"})}},L:function(t,a,s){const i=t.getMonth();switch(a){case"L":return String(i+1);case"LL":return $e(i+1,2);case"Lo":return s.ordinalNumber(i+1,{unit:"month"});case"LLL":return s.month(i,{width:"abbreviated",context:"standalone"});case"LLLLL":return s.month(i,{width:"narrow",context:"standalone"});default:return s.month(i,{width:"wide",context:"standalone"})}},w:function(t,a,s,i){const c=z4(t,i);return a==="wo"?s.ordinalNumber(c,{unit:"week"}):$e(c,a.length)},I:function(t,a,s){const i=R4(t);return a==="Io"?s.ordinalNumber(i,{unit:"week"}):$e(i,a.length)},d:function(t,a,s){return a==="do"?s.ordinalNumber(t.getDate(),{unit:"date"}):qa.d(t,a)},D:function(t,a,s){const i=k4(t);return a==="Do"?s.ordinalNumber(i,{unit:"dayOfYear"}):$e(i,a.length)},E:function(t,a,s){const i=t.getDay();switch(a){case"E":case"EE":case"EEE":return s.day(i,{width:"abbreviated",context:"formatting"});case"EEEEE":return s.day(i,{width:"narrow",context:"formatting"});case"EEEEEE":return s.day(i,{width:"short",context:"formatting"});default:return s.day(i,{width:"wide",context:"formatting"})}},e:function(t,a,s,i){const c=t.getDay(),u=(c-i.weekStartsOn+8)%7||7;switch(a){case"e":return String(u);case"ee":return $e(u,2);case"eo":return s.ordinalNumber(u,{unit:"day"});case"eee":return s.day(c,{width:"abbreviated",context:"formatting"});case"eeeee":return s.day(c,{width:"narrow",context:"formatting"});case"eeeeee":return s.day(c,{width:"short",context:"formatting"});default:return s.day(c,{width:"wide",context:"formatting"})}},c:function(t,a,s,i){const c=t.getDay(),u=(c-i.weekStartsOn+8)%7||7;switch(a){case"c":return String(u);case"cc":return $e(u,a.length);case"co":return s.ordinalNumber(u,{unit:"day"});case"ccc":return s.day(c,{width:"abbreviated",context:"standalone"});case"ccccc":return s.day(c,{width:"narrow",context:"standalone"});case"cccccc":return s.day(c,{width:"short",context:"standalone"});default:return s.day(c,{width:"wide",context:"standalone"})}},i:function(t,a,s){const i=t.getDay(),c=i===0?7:i;switch(a){case"i":return String(c);case"ii":return $e(c,a.length);case"io":return s.ordinalNumber(c,{unit:"day"});case"iii":return s.day(i,{width:"abbreviated",context:"formatting"});case"iiiii":return s.day(i,{width:"narrow",context:"formatting"});case"iiiiii":return s.day(i,{width:"short",context:"formatting"});default:return s.day(i,{width:"wide",context:"formatting"})}},a:function(t,a,s){const c=t.getHours()/12>=1?"pm":"am";switch(a){case"a":case"aa":return s.dayPeriod(c,{width:"abbreviated",context:"formatting"});case"aaa":return s.dayPeriod(c,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return s.dayPeriod(c,{width:"narrow",context:"formatting"});default:return s.dayPeriod(c,{width:"wide",context:"formatting"})}},b:function(t,a,s){const i=t.getHours();let c;switch(i===12?c=gr.noon:i===0?c=gr.midnight:c=i/12>=1?"pm":"am",a){case"b":case"bb":return s.dayPeriod(c,{width:"abbreviated",context:"formatting"});case"bbb":return s.dayPeriod(c,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return s.dayPeriod(c,{width:"narrow",context:"formatting"});default:return s.dayPeriod(c,{width:"wide",context:"formatting"})}},B:function(t,a,s){const i=t.getHours();let c;switch(i>=17?c=gr.evening:i>=12?c=gr.afternoon:i>=4?c=gr.morning:c=gr.night,a){case"B":case"BB":case"BBB":return s.dayPeriod(c,{width:"abbreviated",context:"formatting"});case"BBBBB":return s.dayPeriod(c,{width:"narrow",context:"formatting"});default:return s.dayPeriod(c,{width:"wide",context:"formatting"})}},h:function(t,a,s){if(a==="ho"){let i=t.getHours()%12;return i===0&&(i=12),s.ordinalNumber(i,{unit:"hour"})}return qa.h(t,a)},H:function(t,a,s){return a==="Ho"?s.ordinalNumber(t.getHours(),{unit:"hour"}):qa.H(t,a)},K:function(t,a,s){const i=t.getHours()%12;return a==="Ko"?s.ordinalNumber(i,{unit:"hour"}):$e(i,a.length)},k:function(t,a,s){let i=t.getHours();return i===0&&(i=24),a==="ko"?s.ordinalNumber(i,{unit:"hour"}):$e(i,a.length)},m:function(t,a,s){return a==="mo"?s.ordinalNumber(t.getMinutes(),{unit:"minute"}):qa.m(t,a)},s:function(t,a,s){return a==="so"?s.ordinalNumber(t.getSeconds(),{unit:"second"}):qa.s(t,a)},S:function(t,a){return qa.S(t,a)},X:function(t,a,s){const i=t.getTimezoneOffset();if(i===0)return"Z";switch(a){case"X":return hx(i);case"XXXX":case"XX":return xs(i);default:return xs(i,":")}},x:function(t,a,s){const i=t.getTimezoneOffset();switch(a){case"x":return hx(i);case"xxxx":case"xx":return xs(i);default:return xs(i,":")}},O:function(t,a,s){const i=t.getTimezoneOffset();switch(a){case"O":case"OO":case"OOO":return"GMT"+fx(i,":");default:return"GMT"+xs(i,":")}},z:function(t,a,s){const i=t.getTimezoneOffset();switch(a){case"z":case"zz":case"zzz":return"GMT"+fx(i,":");default:return"GMT"+xs(i,":")}},t:function(t,a,s){const i=Math.trunc(+t/1e3);return $e(i,a.length)},T:function(t,a,s){return $e(+t,a.length)}};function fx(t,a=""){const s=t>0?"-":"+",i=Math.abs(t),c=Math.trunc(i/60),u=i%60;return u===0?s+String(c):s+String(c)+a+$e(u,2)}function hx(t,a){return t%60===0?(t>0?"-":"+")+$e(Math.abs(t)/60,2):xs(t,a)}function xs(t,a=""){const s=t>0?"-":"+",i=Math.abs(t),c=$e(Math.trunc(i/60),2),u=$e(i%60,2);return s+c+a+u}const mx=(t,a)=>{switch(t){case"P":return a.date({width:"short"});case"PP":return a.date({width:"medium"});case"PPP":return a.date({width:"long"});default:return a.date({width:"full"})}},hb=(t,a)=>{switch(t){case"p":return a.time({width:"short"});case"pp":return a.time({width:"medium"});case"ppp":return a.time({width:"long"});default:return a.time({width:"full"})}},O4=(t,a)=>{const s=t.match(/(P+)(p+)?/)||[],i=s[1],c=s[2];if(!c)return mx(t,a);let u;switch(i){case"P":u=a.dateTime({width:"short"});break;case"PP":u=a.dateTime({width:"medium"});break;case"PPP":u=a.dateTime({width:"long"});break;default:u=a.dateTime({width:"full"});break}return u.replace("{{date}}",mx(i,a)).replace("{{time}}",hb(c,a))},B4={p:hb,P:O4},H4=/^D+$/,L4=/^Y+$/,U4=["D","DD","YY","YYYY"];function $4(t){return H4.test(t)}function q4(t){return L4.test(t)}function V4(t,a,s){const i=Y4(t,a,s);if(console.warn(i),U4.includes(t))throw new RangeError(i)}function Y4(t,a,s){const i=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${a}\`) for formatting ${i} to the input \`${s}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const X4=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,G4=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,I4=/^'([^]*?)'?$/,P4=/''/g,Z4=/[a-zA-Z]/;function qc(t,a,s){const i=uo(),c=s?.locale??i.locale??db,u=s?.firstWeekContainsDate??s?.locale?.options?.firstWeekContainsDate??i.firstWeekContainsDate??i.locale?.options?.firstWeekContainsDate??1,f=s?.weekStartsOn??s?.locale?.options?.weekStartsOn??i.weekStartsOn??i.locale?.options?.weekStartsOn??0,m=mt(t,s?.in);if(!Xj(m))throw new RangeError("Invalid time value");let p=a.match(G4).map(y=>{const x=y[0];if(x==="p"||x==="P"){const b=B4[x];return b(y,c.formatLong)}return y}).join("").match(X4).map(y=>{if(y==="''")return{isToken:!1,value:"'"};const x=y[0];if(x==="'")return{isToken:!1,value:Q4(y)};if(dx[x])return{isToken:!0,value:y};if(x.match(Z4))throw new RangeError("Format string contains an unescaped latin alphabet character `"+x+"`");return{isToken:!1,value:y}});c.localize.preprocessor&&(p=c.localize.preprocessor(m,p));const g={firstWeekContainsDate:u,weekStartsOn:f,locale:c};return p.map(y=>{if(!y.isToken)return y.value;const x=y.value;(!s?.useAdditionalWeekYearTokens&&q4(x)||!s?.useAdditionalDayOfYearTokens&&$4(x))&&V4(x,a,String(t));const b=dx[x[0]];return b(m,x,c.localize,g)}).join("")}function Q4(t){const a=t.match(I4);return a?a[1].replace(P4,"'"):t}function F4(t,a,s){const i=uo(),c=s?.locale??i.locale??db,u=2520,f=lc(t,a);if(isNaN(f))throw new RangeError("Invalid time value");const m=Object.assign({},s,{addSuffix:s?.addSuffix,comparison:f}),[p,g]=$c(s?.in,...f>0?[a,t]:[t,a]),y=Kj(g,p),x=(Nc(g)-Nc(p))/1e3,b=Math.round((y-x)/60);let S;if(b<2)return s?.includeSeconds?y<5?c.formatDistance("lessThanXSeconds",5,m):y<10?c.formatDistance("lessThanXSeconds",10,m):y<20?c.formatDistance("lessThanXSeconds",20,m):y<40?c.formatDistance("halfAMinute",0,m):y<60?c.formatDistance("lessThanXMinutes",1,m):c.formatDistance("xMinutes",1,m):b===0?c.formatDistance("lessThanXMinutes",1,m):c.formatDistance("xMinutes",b,m);if(b<45)return c.formatDistance("xMinutes",b,m);if(b<90)return c.formatDistance("aboutXHours",1,m);if(b<lx){const j=Math.round(b/60);return c.formatDistance("aboutXHours",j,m)}else{if(b<u)return c.formatDistance("xDays",1,m);if(b<Gl){const j=Math.round(b/lx);return c.formatDistance("xDays",j,m)}else if(b<Gl*2)return S=Math.round(b/Gl),c.formatDistance("aboutXMonths",S,m)}if(S=Wj(g,p),S<12){const j=Math.round(b/Gl);return c.formatDistance("xMonths",j,m)}else{const j=S%12,A=Math.trunc(S/12);return j<3?c.formatDistance("aboutXYears",A,m):j<9?c.formatDistance("overXYears",A,m):c.formatDistance("almostXYears",A+1,m)}}function Vc(t,a){return F4(t,Vj(t),a)}const W4={lessThanXSeconds:{one:"menos de un segundo",other:"menos de {{count}} segundos"},xSeconds:{one:"1 segundo",other:"{{count}} segundos"},halfAMinute:"medio minuto",lessThanXMinutes:{one:"menos de un minuto",other:"menos de {{count}} minutos"},xMinutes:{one:"1 minuto",other:"{{count}} minutos"},aboutXHours:{one:"alrededor de 1 hora",other:"alrededor de {{count}} horas"},xHours:{one:"1 hora",other:"{{count}} horas"},xDays:{one:"1 da",other:"{{count}} das"},aboutXWeeks:{one:"alrededor de 1 semana",other:"alrededor de {{count}} semanas"},xWeeks:{one:"1 semana",other:"{{count}} semanas"},aboutXMonths:{one:"alrededor de 1 mes",other:"alrededor de {{count}} meses"},xMonths:{one:"1 mes",other:"{{count}} meses"},aboutXYears:{one:"alrededor de 1 ao",other:"alrededor de {{count}} aos"},xYears:{one:"1 ao",other:"{{count}} aos"},overXYears:{one:"ms de 1 ao",other:"ms de {{count}} aos"},almostXYears:{one:"casi 1 ao",other:"casi {{count}} aos"}},K4=(t,a,s)=>{let i;const c=W4[t];return typeof c=="string"?i=c:a===1?i=c.one:i=c.other.replace("{{count}}",a.toString()),s?.addSuffix?s.comparison&&s.comparison>0?"en "+i:"hace "+i:i},J4={full:"EEEE, d 'de' MMMM 'de' y",long:"d 'de' MMMM 'de' y",medium:"d MMM y",short:"dd/MM/y"},eE={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},tE={full:"{{date}} 'a las' {{time}}",long:"{{date}} 'a las' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},nE={date:Nr({formats:J4,defaultWidth:"full"}),time:Nr({formats:eE,defaultWidth:"full"}),dateTime:Nr({formats:tE,defaultWidth:"full"})},aE={lastWeek:"'el' eeee 'pasado a la' p",yesterday:"'ayer a la' p",today:"'hoy a la' p",tomorrow:"'maana a la' p",nextWeek:"eeee 'a la' p",other:"P"},sE={lastWeek:"'el' eeee 'pasado a las' p",yesterday:"'ayer a las' p",today:"'hoy a las' p",tomorrow:"'maana a las' p",nextWeek:"eeee 'a las' p",other:"P"},rE=(t,a,s,i)=>a.getHours()!==1?sE[t]:aE[t],iE={narrow:["AC","DC"],abbreviated:["AC","DC"],wide:["antes de cristo","despus de cristo"]},oE={narrow:["1","2","3","4"],abbreviated:["T1","T2","T3","T4"],wide:["1 trimestre","2 trimestre","3 trimestre","4 trimestre"]},lE={narrow:["e","f","m","a","m","j","j","a","s","o","n","d"],abbreviated:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"],wide:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"]},cE={narrow:["d","l","m","m","j","v","s"],short:["do","lu","ma","mi","ju","vi","s"],abbreviated:["dom","lun","mar","mi","jue","vie","sb"],wide:["domingo","lunes","martes","mircoles","jueves","viernes","sbado"]},uE={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"maana",afternoon:"tarde",evening:"tarde",night:"noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"maana",afternoon:"tarde",evening:"tarde",night:"noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"maana",afternoon:"tarde",evening:"tarde",night:"noche"}},dE={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"de la maana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"de la maana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"de la maana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"}},fE=(t,a)=>Number(t)+"",hE={ordinalNumber:fE,era:Tn({values:iE,defaultWidth:"wide"}),quarter:Tn({values:oE,defaultWidth:"wide",argumentCallback:t=>Number(t)-1}),month:Tn({values:lE,defaultWidth:"wide"}),day:Tn({values:cE,defaultWidth:"wide"}),dayPeriod:Tn({values:uE,defaultWidth:"wide",formattingValues:dE,defaultFormattingWidth:"wide"})},mE=/^(\d+)()?/i,pE=/\d+/i,gE={narrow:/^(ac|dc|a|d)/i,abbreviated:/^(a\.?\s?c\.?|a\.?\s?e\.?\s?c\.?|d\.?\s?c\.?|e\.?\s?c\.?)/i,wide:/^(antes de cristo|antes de la era com[u]n|despu[e]s de cristo|era com[u]n)/i},xE={any:[/^ac/i,/^dc/i],wide:[/^(antes de cristo|antes de la era com[u]n)/i,/^(despu[e]s de cristo|era com[u]n)/i]},yE={narrow:/^[1234]/i,abbreviated:/^T[1234]/i,wide:/^[1234]()? trimestre/i},bE={any:[/1/i,/2/i,/3/i,/4/i]},vE={narrow:/^[efmajsond]/i,abbreviated:/^(ene|feb|mar|abr|may|jun|jul|ago|sep|oct|nov|dic)/i,wide:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i},wE={narrow:[/^e/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^en/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i]},SE={narrow:/^[dlmjvs]/i,short:/^(do|lu|ma|mi|ju|vi|s[a])/i,abbreviated:/^(dom|lun|mar|mi[e]|jue|vie|s[a]b)/i,wide:/^(domingo|lunes|martes|mi[e]rcoles|jueves|viernes|s[a]bado)/i},NE={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^do/i,/^lu/i,/^ma/i,/^mi/i,/^ju/i,/^vi/i,/^sa/i]},jE={narrow:/^(a|p|mn|md|(de la|a las) (maana|tarde|noche))/i,any:/^([ap]\.?\s?m\.?|medianoche|mediodia|(de la|a las) (maana|tarde|noche))/i},EE={any:{am:/^a/i,pm:/^p/i,midnight:/^mn/i,noon:/^md/i,morning:/maana/i,afternoon:/tarde/i,evening:/tarde/i,night:/noche/i}},_E={ordinalNumber:ub({matchPattern:mE,parsePattern:pE,valueCallback:function(t){return parseInt(t,10)}}),era:Mn({matchPatterns:gE,defaultMatchWidth:"wide",parsePatterns:xE,defaultParseWidth:"any"}),quarter:Mn({matchPatterns:yE,defaultMatchWidth:"wide",parsePatterns:bE,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Mn({matchPatterns:vE,defaultMatchWidth:"wide",parsePatterns:wE,defaultParseWidth:"any"}),day:Mn({matchPatterns:SE,defaultMatchWidth:"wide",parsePatterns:NE,defaultParseWidth:"any"}),dayPeriod:Mn({matchPatterns:jE,defaultMatchWidth:"any",parsePatterns:EE,defaultParseWidth:"any"})},Mr={code:"es",formatDistance:K4,formatLong:nE,formatRelative:rE,localize:hE,match:_E,options:{weekStartsOn:1,firstWeekContainsDate:1}};function CE(){const[t,a]=_.useState(null),[s,i]=_.useState([]),[c,u]=_.useState(!0);_.useEffect(()=>{f()},[]);const f=async()=>{try{const[p,g]=await Promise.all([Hj(),ob()]);a(p),i(g.conversations||[])}catch(p){console.error("Error loading dashboard:",p)}finally{u(!1)}};if(c)return l.jsx("div",{className:"p-8 flex items-center justify-center h-full",children:l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-500"})});const m=s.slice(0,5);return l.jsxs("div",{className:"p-8",children:[l.jsxs("div",{className:"mb-8",children:[l.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Dashboard"}),l.jsx("p",{className:"text-gray-500 mt-1",children:"Resumen de tu chatbot de WhatsApp"})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[l.jsx(Xl,{title:"Conversaciones",value:s.length,icon:Cr,color:"green",subtitle:"Total activas"}),l.jsx(Xl,{title:"Usuarios nicos",value:t?.unique_users||0,icon:Uc,color:"blue",subtitle:"ltimos 30 das"}),l.jsx(Xl,{title:"Interacciones",value:t?.interactions||0,icon:Mh,color:"purple",subtitle:"Procesadas por el bot"}),l.jsx(Xl,{title:"Confianza",value:`${Math.round((t?.avg_confidence||0)*100)}%`,icon:wc,color:"yellow",subtitle:"Promedio clasificacin"})]}),l.jsxs("div",{className:"bg-white rounded-xl border border-gray-100 shadow-sm",children:[l.jsxs("div",{className:"p-6 border-b border-gray-100 flex items-center justify-between",children:[l.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"Conversaciones Recientes"}),l.jsxs(bs,{to:"/conversations",className:"text-green-600 hover:text-green-700 text-sm font-medium flex items-center gap-1",children:["Ver todas ",l.jsx(TN,{className:"w-4 h-4"})]})]}),m.length===0?l.jsxs("div",{className:"p-12 text-center text-gray-400",children:[l.jsx(Cr,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),l.jsx("p",{children:"No hay conversaciones todava"})]}):l.jsx("div",{className:"divide-y divide-gray-100",children:m.map(p=>l.jsxs(bs,{to:`/conversations?phone=${encodeURIComponent(p.phone)}`,className:"flex items-center gap-4 p-4 hover:bg-gray-50 transition",children:[l.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center flex-shrink-0",children:l.jsx("span",{className:"text-green-600 font-medium",children:p.contact_name?.[0]?.toUpperCase()||p.phone.slice(-2)})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("p",{className:"font-medium text-gray-800 truncate",children:p.contact_name||p.phone}),l.jsx("span",{className:"text-xs text-gray-400",children:p.last_message_time?Vc(new Date(p.last_message_time),{addSuffix:!0,locale:Mr}):""})]}),l.jsx("p",{className:"text-sm text-gray-500 truncate mt-1",children:p.last_message||"Sin mensajes"})]}),p.unread_count>0&&l.jsx("span",{className:"bg-green-500 text-white text-xs font-medium px-2 py-1 rounded-full",children:p.unread_count})]},p.phone))})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-8",children:[l.jsxs(bs,{to:"/flows",className:"bg-gradient-to-r from-green-500 to-green-600 rounded-xl p-6 text-white hover:from-green-600 hover:to-green-700 transition",children:[l.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Editor de Flujos"}),l.jsx("p",{className:"text-green-100 text-sm",children:"Crea y edita flujos conversacionales de forma visual"})]}),l.jsxs(bs,{to:"/conversations",className:"bg-gradient-to-r from-blue-500 to-blue-600 rounded-xl p-6 text-white hover:from-blue-600 hover:to-blue-700 transition",children:[l.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Ver Conversaciones"}),l.jsx("p",{className:"text-blue-100 text-sm",children:"Responde a tus clientes en tiempo real"})]})]})]})}const Rn=Object.create(null);Rn.open="0";Rn.close="1";Rn.ping="2";Rn.pong="3";Rn.message="4";Rn.upgrade="5";Rn.noop="6";const cc=Object.create(null);Object.keys(Rn).forEach(t=>{cc[Rn[t]]=t});const Jf={type:"error",data:"parser error"},mb=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",pb=typeof ArrayBuffer=="function",gb=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,Oh=({type:t,data:a},s,i)=>mb&&a instanceof Blob?s?i(a):px(a,i):pb&&(a instanceof ArrayBuffer||gb(a))?s?i(a):px(new Blob([a]),i):i(Rn[t]+(a||"")),px=(t,a)=>{const s=new FileReader;return s.onload=function(){const i=s.result.split(",")[1];a("b"+(i||""))},s.readAsDataURL(t)};function gx(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}let kf;function TE(t,a){if(mb&&t.data instanceof Blob)return t.data.arrayBuffer().then(gx).then(a);if(pb&&(t.data instanceof ArrayBuffer||gb(t.data)))return a(gx(t.data));Oh(t,!1,s=>{kf||(kf=new TextEncoder),a(kf.encode(s))})}const xx="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Xi=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let t=0;t<xx.length;t++)Xi[xx.charCodeAt(t)]=t;const ME=t=>{let a=t.length*.75,s=t.length,i,c=0,u,f,m,p;t[t.length-1]==="="&&(a--,t[t.length-2]==="="&&a--);const g=new ArrayBuffer(a),y=new Uint8Array(g);for(i=0;i<s;i+=4)u=Xi[t.charCodeAt(i)],f=Xi[t.charCodeAt(i+1)],m=Xi[t.charCodeAt(i+2)],p=Xi[t.charCodeAt(i+3)],y[c++]=u<<2|f>>4,y[c++]=(f&15)<<4|m>>2,y[c++]=(m&3)<<6|p&63;return g},AE=typeof ArrayBuffer=="function",Bh=(t,a)=>{if(typeof t!="string")return{type:"message",data:xb(t,a)};const s=t.charAt(0);return s==="b"?{type:"message",data:kE(t.substring(1),a)}:cc[s]?t.length>1?{type:cc[s],data:t.substring(1)}:{type:cc[s]}:Jf},kE=(t,a)=>{if(AE){const s=ME(t);return xb(s,a)}else return{base64:!0,data:t}},xb=(t,a)=>a==="blob"?t instanceof Blob?t:new Blob([t]):t instanceof ArrayBuffer?t:t.buffer,yb="",RE=(t,a)=>{const s=t.length,i=new Array(s);let c=0;t.forEach((u,f)=>{Oh(u,!1,m=>{i[f]=m,++c===s&&a(i.join(yb))})})},DE=(t,a)=>{const s=t.split(yb),i=[];for(let c=0;c<s.length;c++){const u=Bh(s[c],a);if(i.push(u),u.type==="error")break}return i};function zE(){return new TransformStream({transform(t,a){TE(t,s=>{const i=s.length;let c;if(i<126)c=new Uint8Array(1),new DataView(c.buffer).setUint8(0,i);else if(i<65536){c=new Uint8Array(3);const u=new DataView(c.buffer);u.setUint8(0,126),u.setUint16(1,i)}else{c=new Uint8Array(9);const u=new DataView(c.buffer);u.setUint8(0,127),u.setBigUint64(1,BigInt(i))}t.data&&typeof t.data!="string"&&(c[0]|=128),a.enqueue(c),a.enqueue(s)})}})}let Rf;function Il(t){return t.reduce((a,s)=>a+s.length,0)}function Pl(t,a){if(t[0].length===a)return t.shift();const s=new Uint8Array(a);let i=0;for(let c=0;c<a;c++)s[c]=t[0][i++],i===t[0].length&&(t.shift(),i=0);return t.length&&i<t[0].length&&(t[0]=t[0].slice(i)),s}function OE(t,a){Rf||(Rf=new TextDecoder);const s=[];let i=0,c=-1,u=!1;return new TransformStream({transform(f,m){for(s.push(f);;){if(i===0){if(Il(s)<1)break;const p=Pl(s,1);u=(p[0]&128)===128,c=p[0]&127,c<126?i=3:c===126?i=1:i=2}else if(i===1){if(Il(s)<2)break;const p=Pl(s,2);c=new DataView(p.buffer,p.byteOffset,p.length).getUint16(0),i=3}else if(i===2){if(Il(s)<8)break;const p=Pl(s,8),g=new DataView(p.buffer,p.byteOffset,p.length),y=g.getUint32(0);if(y>Math.pow(2,21)-1){m.enqueue(Jf);break}c=y*Math.pow(2,32)+g.getUint32(4),i=3}else{if(Il(s)<c)break;const p=Pl(s,c);m.enqueue(Bh(u?p:Rf.decode(p),a)),i=0}if(c===0||c>t){m.enqueue(Jf);break}}}})}const bb=4;function lt(t){if(t)return BE(t)}function BE(t){for(var a in lt.prototype)t[a]=lt.prototype[a];return t}lt.prototype.on=lt.prototype.addEventListener=function(t,a){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(a),this};lt.prototype.once=function(t,a){function s(){this.off(t,s),a.apply(this,arguments)}return s.fn=a,this.on(t,s),this};lt.prototype.off=lt.prototype.removeListener=lt.prototype.removeAllListeners=lt.prototype.removeEventListener=function(t,a){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var s=this._callbacks["$"+t];if(!s)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var i,c=0;c<s.length;c++)if(i=s[c],i===a||i.fn===a){s.splice(c,1);break}return s.length===0&&delete this._callbacks["$"+t],this};lt.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var a=new Array(arguments.length-1),s=this._callbacks["$"+t],i=1;i<arguments.length;i++)a[i-1]=arguments[i];if(s){s=s.slice(0);for(var i=0,c=s.length;i<c;++i)s[i].apply(this,a)}return this};lt.prototype.emitReserved=lt.prototype.emit;lt.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]};lt.prototype.hasListeners=function(t){return!!this.listeners(t).length};const Yc=typeof Promise=="function"&&typeof Promise.resolve=="function"?a=>Promise.resolve().then(a):(a,s)=>s(a,0),rn=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),HE="arraybuffer";function vb(t,...a){return a.reduce((s,i)=>(t.hasOwnProperty(i)&&(s[i]=t[i]),s),{})}const LE=rn.setTimeout,UE=rn.clearTimeout;function Xc(t,a){a.useNativeTimers?(t.setTimeoutFn=LE.bind(rn),t.clearTimeoutFn=UE.bind(rn)):(t.setTimeoutFn=rn.setTimeout.bind(rn),t.clearTimeoutFn=rn.clearTimeout.bind(rn))}const $E=1.33;function qE(t){return typeof t=="string"?VE(t):Math.ceil((t.byteLength||t.size)*$E)}function VE(t){let a=0,s=0;for(let i=0,c=t.length;i<c;i++)a=t.charCodeAt(i),a<128?s+=1:a<2048?s+=2:a<55296||a>=57344?s+=3:(i++,s+=4);return s}function wb(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function YE(t){let a="";for(let s in t)t.hasOwnProperty(s)&&(a.length&&(a+="&"),a+=encodeURIComponent(s)+"="+encodeURIComponent(t[s]));return a}function XE(t){let a={},s=t.split("&");for(let i=0,c=s.length;i<c;i++){let u=s[i].split("=");a[decodeURIComponent(u[0])]=decodeURIComponent(u[1])}return a}class GE extends Error{constructor(a,s,i){super(a),this.description=s,this.context=i,this.type="TransportError"}}class Hh extends lt{constructor(a){super(),this.writable=!1,Xc(this,a),this.opts=a,this.query=a.query,this.socket=a.socket,this.supportsBinary=!a.forceBase64}onError(a,s,i){return super.emitReserved("error",new GE(a,s,i)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(a){this.readyState==="open"&&this.write(a)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(a){const s=Bh(a,this.socket.binaryType);this.onPacket(s)}onPacket(a){super.emitReserved("packet",a)}onClose(a){this.readyState="closed",super.emitReserved("close",a)}pause(a){}createUri(a,s={}){return a+"://"+this._hostname()+this._port()+this.opts.path+this._query(s)}_hostname(){const a=this.opts.hostname;return a.indexOf(":")===-1?a:"["+a+"]"}_port(){return this.opts.port&&(this.opts.secure&&Number(this.opts.port)!==443||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(a){const s=YE(a);return s.length?"?"+s:""}}class IE extends Hh{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(a){this.readyState="pausing";const s=()=>{this.readyState="paused",a()};if(this._polling||!this.writable){let i=0;this._polling&&(i++,this.once("pollComplete",function(){--i||s()})),this.writable||(i++,this.once("drain",function(){--i||s()}))}else s()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(a){const s=i=>{if(this.readyState==="opening"&&i.type==="open"&&this.onOpen(),i.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(i)};DE(a,this.socket.binaryType).forEach(s),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const a=()=>{this.write([{type:"close"}])};this.readyState==="open"?a():this.once("open",a)}write(a){this.writable=!1,RE(a,s=>{this.doWrite(s,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const a=this.opts.secure?"https":"http",s=this.query||{};return this.opts.timestampRequests!==!1&&(s[this.opts.timestampParam]=wb()),!this.supportsBinary&&!s.sid&&(s.b64=1),this.createUri(a,s)}}let Sb=!1;try{Sb=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const PE=Sb;function ZE(){}class QE extends IE{constructor(a){if(super(a),typeof location<"u"){const s=location.protocol==="https:";let i=location.port;i||(i=s?"443":"80"),this.xd=typeof location<"u"&&a.hostname!==location.hostname||i!==a.port}}doWrite(a,s){const i=this.request({method:"POST",data:a});i.on("success",s),i.on("error",(c,u)=>{this.onError("xhr post error",c,u)})}doPoll(){const a=this.request();a.on("data",this.onData.bind(this)),a.on("error",(s,i)=>{this.onError("xhr poll error",s,i)}),this.pollXhr=a}}class An extends lt{constructor(a,s,i){super(),this.createRequest=a,Xc(this,i),this._opts=i,this._method=i.method||"GET",this._uri=s,this._data=i.data!==void 0?i.data:null,this._create()}_create(){var a;const s=vb(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");s.xdomain=!!this._opts.xd;const i=this._xhr=this.createRequest(s);try{i.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){i.setDisableHeaderCheck&&i.setDisableHeaderCheck(!0);for(let c in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(c)&&i.setRequestHeader(c,this._opts.extraHeaders[c])}}catch{}if(this._method==="POST")try{i.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{i.setRequestHeader("Accept","*/*")}catch{}(a=this._opts.cookieJar)===null||a===void 0||a.addCookies(i),"withCredentials"in i&&(i.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(i.timeout=this._opts.requestTimeout),i.onreadystatechange=()=>{var c;i.readyState===3&&((c=this._opts.cookieJar)===null||c===void 0||c.parseCookies(i.getResponseHeader("set-cookie"))),i.readyState===4&&(i.status===200||i.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof i.status=="number"?i.status:0)},0))},i.send(this._data)}catch(c){this.setTimeoutFn(()=>{this._onError(c)},0);return}typeof document<"u"&&(this._index=An.requestsCount++,An.requests[this._index]=this)}_onError(a){this.emitReserved("error",a,this._xhr),this._cleanup(!0)}_cleanup(a){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=ZE,a)try{this._xhr.abort()}catch{}typeof document<"u"&&delete An.requests[this._index],this._xhr=null}}_onLoad(){const a=this._xhr.responseText;a!==null&&(this.emitReserved("data",a),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}An.requestsCount=0;An.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",yx);else if(typeof addEventListener=="function"){const t="onpagehide"in rn?"pagehide":"unload";addEventListener(t,yx,!1)}}function yx(){for(let t in An.requests)An.requests.hasOwnProperty(t)&&An.requests[t].abort()}const FE=(function(){const t=Nb({xdomain:!1});return t&&t.responseType!==null})();class WE extends QE{constructor(a){super(a);const s=a&&a.forceBase64;this.supportsBinary=FE&&!s}request(a={}){return Object.assign(a,{xd:this.xd},this.opts),new An(Nb,this.uri(),a)}}function Nb(t){const a=t.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!a||PE))return new XMLHttpRequest}catch{}if(!a)try{return new rn[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const jb=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class KE extends Hh{get name(){return"websocket"}doOpen(){const a=this.uri(),s=this.opts.protocols,i=jb?{}:vb(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(i.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(a,s,i)}catch(c){return this.emitReserved("error",c)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=a=>this.onClose({description:"websocket connection closed",context:a}),this.ws.onmessage=a=>this.onData(a.data),this.ws.onerror=a=>this.onError("websocket error",a)}write(a){this.writable=!1;for(let s=0;s<a.length;s++){const i=a[s],c=s===a.length-1;Oh(i,this.supportsBinary,u=>{try{this.doWrite(i,u)}catch{}c&&Yc(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const a=this.opts.secure?"wss":"ws",s=this.query||{};return this.opts.timestampRequests&&(s[this.opts.timestampParam]=wb()),this.supportsBinary||(s.b64=1),this.createUri(a,s)}}const Df=rn.WebSocket||rn.MozWebSocket;class JE extends KE{createSocket(a,s,i){return jb?new Df(a,s,i):s?new Df(a,s):new Df(a)}doWrite(a,s){this.ws.send(s)}}class e_ extends Hh{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(a){return this.emitReserved("error",a)}this._transport.closed.then(()=>{this.onClose()}).catch(a=>{this.onError("webtransport error",a)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(a=>{const s=OE(Number.MAX_SAFE_INTEGER,this.socket.binaryType),i=a.readable.pipeThrough(s).getReader(),c=zE();c.readable.pipeTo(a.writable),this._writer=c.writable.getWriter();const u=()=>{i.read().then(({done:m,value:p})=>{m||(this.onPacket(p),u())}).catch(m=>{})};u();const f={type:"open"};this.query.sid&&(f.data=`{"sid":"${this.query.sid}"}`),this._writer.write(f).then(()=>this.onOpen())})})}write(a){this.writable=!1;for(let s=0;s<a.length;s++){const i=a[s],c=s===a.length-1;this._writer.write(i).then(()=>{c&&Yc(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var a;(a=this._transport)===null||a===void 0||a.close()}}const t_={websocket:JE,webtransport:e_,polling:WE},n_=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,a_=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function eh(t){if(t.length>8e3)throw"URI too long";const a=t,s=t.indexOf("["),i=t.indexOf("]");s!=-1&&i!=-1&&(t=t.substring(0,s)+t.substring(s,i).replace(/:/g,";")+t.substring(i,t.length));let c=n_.exec(t||""),u={},f=14;for(;f--;)u[a_[f]]=c[f]||"";return s!=-1&&i!=-1&&(u.source=a,u.host=u.host.substring(1,u.host.length-1).replace(/;/g,":"),u.authority=u.authority.replace("[","").replace("]","").replace(/;/g,":"),u.ipv6uri=!0),u.pathNames=s_(u,u.path),u.queryKey=r_(u,u.query),u}function s_(t,a){const s=/\/{2,9}/g,i=a.replace(s,"/").split("/");return(a.slice(0,1)=="/"||a.length===0)&&i.splice(0,1),a.slice(-1)=="/"&&i.splice(i.length-1,1),i}function r_(t,a){const s={};return a.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(i,c,u){c&&(s[c]=u)}),s}const th=typeof addEventListener=="function"&&typeof removeEventListener=="function",uc=[];th&&addEventListener("offline",()=>{uc.forEach(t=>t())},!1);class Ia extends lt{constructor(a,s){if(super(),this.binaryType=HE,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,a&&typeof a=="object"&&(s=a,a=null),a){const i=eh(a);s.hostname=i.host,s.secure=i.protocol==="https"||i.protocol==="wss",s.port=i.port,i.query&&(s.query=i.query)}else s.host&&(s.hostname=eh(s.host).host);Xc(this,s),this.secure=s.secure!=null?s.secure:typeof location<"u"&&location.protocol==="https:",s.hostname&&!s.port&&(s.port=this.secure?"443":"80"),this.hostname=s.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=s.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},s.transports.forEach(i=>{const c=i.prototype.name;this.transports.push(c),this._transportsByName[c]=i}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},s),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=XE(this.opts.query)),th&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},uc.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(a){const s=Object.assign({},this.opts.query);s.EIO=bb,s.transport=a,this.id&&(s.sid=this.id);const i=Object.assign({},this.opts,{query:s,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[a]);return new this._transportsByName[a](i)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const a=this.opts.rememberUpgrade&&Ia.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const s=this.createTransport(a);s.open(),this.setTransport(s)}setTransport(a){this.transport&&this.transport.removeAllListeners(),this.transport=a,a.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",s=>this._onClose("transport close",s))}onOpen(){this.readyState="open",Ia.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(a){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",a),this.emitReserved("heartbeat"),a.type){case"open":this.onHandshake(JSON.parse(a.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const s=new Error("server error");s.code=a.data,this._onError(s);break;case"message":this.emitReserved("data",a.data),this.emitReserved("message",a.data);break}}onHandshake(a){this.emitReserved("handshake",a),this.id=a.sid,this.transport.query.sid=a.sid,this._pingInterval=a.pingInterval,this._pingTimeout=a.pingTimeout,this._maxPayload=a.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const a=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+a,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},a),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const a=this._getWritablePackets();this.transport.send(a),this._prevBufferLen=a.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let s=1;for(let i=0;i<this.writeBuffer.length;i++){const c=this.writeBuffer[i].data;if(c&&(s+=qE(c)),i>0&&s>this._maxPayload)return this.writeBuffer.slice(0,i);s+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const a=Date.now()>this._pingTimeoutTime;return a&&(this._pingTimeoutTime=0,Yc(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),a}write(a,s,i){return this._sendPacket("message",a,s,i),this}send(a,s,i){return this._sendPacket("message",a,s,i),this}_sendPacket(a,s,i,c){if(typeof s=="function"&&(c=s,s=void 0),typeof i=="function"&&(c=i,i=null),this.readyState==="closing"||this.readyState==="closed")return;i=i||{},i.compress=i.compress!==!1;const u={type:a,data:s,options:i};this.emitReserved("packetCreate",u),this.writeBuffer.push(u),c&&this.once("flush",c),this.flush()}close(){const a=()=>{this._onClose("forced close"),this.transport.close()},s=()=>{this.off("upgrade",s),this.off("upgradeError",s),a()},i=()=>{this.once("upgrade",s),this.once("upgradeError",s)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?i():a()}):this.upgrading?i():a()),this}_onError(a){if(Ia.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",a),this._onClose("transport error",a)}_onClose(a,s){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),th&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const i=uc.indexOf(this._offlineEventListener);i!==-1&&uc.splice(i,1)}this.readyState="closed",this.id=null,this.emitReserved("close",a,s),this.writeBuffer=[],this._prevBufferLen=0}}}Ia.protocol=bb;class i_ extends Ia{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let a=0;a<this._upgrades.length;a++)this._probe(this._upgrades[a])}_probe(a){let s=this.createTransport(a),i=!1;Ia.priorWebsocketSuccess=!1;const c=()=>{i||(s.send([{type:"ping",data:"probe"}]),s.once("packet",x=>{if(!i)if(x.type==="pong"&&x.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",s),!s)return;Ia.priorWebsocketSuccess=s.name==="websocket",this.transport.pause(()=>{i||this.readyState!=="closed"&&(y(),this.setTransport(s),s.send([{type:"upgrade"}]),this.emitReserved("upgrade",s),s=null,this.upgrading=!1,this.flush())})}else{const b=new Error("probe error");b.transport=s.name,this.emitReserved("upgradeError",b)}}))};function u(){i||(i=!0,y(),s.close(),s=null)}const f=x=>{const b=new Error("probe error: "+x);b.transport=s.name,u(),this.emitReserved("upgradeError",b)};function m(){f("transport closed")}function p(){f("socket closed")}function g(x){s&&x.name!==s.name&&u()}const y=()=>{s.removeListener("open",c),s.removeListener("error",f),s.removeListener("close",m),this.off("close",p),this.off("upgrading",g)};s.once("open",c),s.once("error",f),s.once("close",m),this.once("close",p),this.once("upgrading",g),this._upgrades.indexOf("webtransport")!==-1&&a!=="webtransport"?this.setTimeoutFn(()=>{i||s.open()},200):s.open()}onHandshake(a){this._upgrades=this._filterUpgrades(a.upgrades),super.onHandshake(a)}_filterUpgrades(a){const s=[];for(let i=0;i<a.length;i++)~this.transports.indexOf(a[i])&&s.push(a[i]);return s}}let o_=class extends i_{constructor(a,s={}){const i=typeof a=="object"?a:s;(!i.transports||i.transports&&typeof i.transports[0]=="string")&&(i.transports=(i.transports||["polling","websocket","webtransport"]).map(c=>t_[c]).filter(c=>!!c)),super(a,i)}};function l_(t,a="",s){let i=t;s=s||typeof location<"u"&&location,t==null&&(t=s.protocol+"//"+s.host),typeof t=="string"&&(t.charAt(0)==="/"&&(t.charAt(1)==="/"?t=s.protocol+t:t=s.host+t),/^(https?|wss?):\/\//.test(t)||(typeof s<"u"?t=s.protocol+"//"+t:t="https://"+t),i=eh(t)),i.port||(/^(http|ws)$/.test(i.protocol)?i.port="80":/^(http|ws)s$/.test(i.protocol)&&(i.port="443")),i.path=i.path||"/";const u=i.host.indexOf(":")!==-1?"["+i.host+"]":i.host;return i.id=i.protocol+"://"+u+":"+i.port+a,i.href=i.protocol+"://"+u+(s&&s.port===i.port?"":":"+i.port),i}const c_=typeof ArrayBuffer=="function",u_=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,Eb=Object.prototype.toString,d_=typeof Blob=="function"||typeof Blob<"u"&&Eb.call(Blob)==="[object BlobConstructor]",f_=typeof File=="function"||typeof File<"u"&&Eb.call(File)==="[object FileConstructor]";function Lh(t){return c_&&(t instanceof ArrayBuffer||u_(t))||d_&&t instanceof Blob||f_&&t instanceof File}function dc(t,a){if(!t||typeof t!="object")return!1;if(Array.isArray(t)){for(let s=0,i=t.length;s<i;s++)if(dc(t[s]))return!0;return!1}if(Lh(t))return!0;if(t.toJSON&&typeof t.toJSON=="function"&&arguments.length===1)return dc(t.toJSON(),!0);for(const s in t)if(Object.prototype.hasOwnProperty.call(t,s)&&dc(t[s]))return!0;return!1}function h_(t){const a=[],s=t.data,i=t;return i.data=nh(s,a),i.attachments=a.length,{packet:i,buffers:a}}function nh(t,a){if(!t)return t;if(Lh(t)){const s={_placeholder:!0,num:a.length};return a.push(t),s}else if(Array.isArray(t)){const s=new Array(t.length);for(let i=0;i<t.length;i++)s[i]=nh(t[i],a);return s}else if(typeof t=="object"&&!(t instanceof Date)){const s={};for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(s[i]=nh(t[i],a));return s}return t}function m_(t,a){return t.data=ah(t.data,a),delete t.attachments,t}function ah(t,a){if(!t)return t;if(t&&t._placeholder===!0){if(typeof t.num=="number"&&t.num>=0&&t.num<a.length)return a[t.num];throw new Error("illegal attachments")}else if(Array.isArray(t))for(let s=0;s<t.length;s++)t[s]=ah(t[s],a);else if(typeof t=="object")for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(t[s]=ah(t[s],a));return t}const _b=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],p_=5;var Ce;(function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"})(Ce||(Ce={}));class g_{constructor(a){this.replacer=a}encode(a){return(a.type===Ce.EVENT||a.type===Ce.ACK)&&dc(a)?this.encodeAsBinary({type:a.type===Ce.EVENT?Ce.BINARY_EVENT:Ce.BINARY_ACK,nsp:a.nsp,data:a.data,id:a.id}):[this.encodeAsString(a)]}encodeAsString(a){let s=""+a.type;return(a.type===Ce.BINARY_EVENT||a.type===Ce.BINARY_ACK)&&(s+=a.attachments+"-"),a.nsp&&a.nsp!=="/"&&(s+=a.nsp+","),a.id!=null&&(s+=a.id),a.data!=null&&(s+=JSON.stringify(a.data,this.replacer)),s}encodeAsBinary(a){const s=h_(a),i=this.encodeAsString(s.packet),c=s.buffers;return c.unshift(i),c}}class Uh extends lt{constructor(a){super(),this.reviver=a}add(a){let s;if(typeof a=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");s=this.decodeString(a);const i=s.type===Ce.BINARY_EVENT;i||s.type===Ce.BINARY_ACK?(s.type=i?Ce.EVENT:Ce.ACK,this.reconstructor=new x_(s),s.attachments===0&&super.emitReserved("decoded",s)):super.emitReserved("decoded",s)}else if(Lh(a)||a.base64)if(this.reconstructor)s=this.reconstructor.takeBinaryData(a),s&&(this.reconstructor=null,super.emitReserved("decoded",s));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+a)}decodeString(a){let s=0;const i={type:Number(a.charAt(0))};if(Ce[i.type]===void 0)throw new Error("unknown packet type "+i.type);if(i.type===Ce.BINARY_EVENT||i.type===Ce.BINARY_ACK){const u=s+1;for(;a.charAt(++s)!=="-"&&s!=a.length;);const f=a.substring(u,s);if(f!=Number(f)||a.charAt(s)!=="-")throw new Error("Illegal attachments");i.attachments=Number(f)}if(a.charAt(s+1)==="/"){const u=s+1;for(;++s&&!(a.charAt(s)===","||s===a.length););i.nsp=a.substring(u,s)}else i.nsp="/";const c=a.charAt(s+1);if(c!==""&&Number(c)==c){const u=s+1;for(;++s;){const f=a.charAt(s);if(f==null||Number(f)!=f){--s;break}if(s===a.length)break}i.id=Number(a.substring(u,s+1))}if(a.charAt(++s)){const u=this.tryParse(a.substr(s));if(Uh.isPayloadValid(i.type,u))i.data=u;else throw new Error("invalid payload")}return i}tryParse(a){try{return JSON.parse(a,this.reviver)}catch{return!1}}static isPayloadValid(a,s){switch(a){case Ce.CONNECT:return jc(s);case Ce.DISCONNECT:return s===void 0;case Ce.CONNECT_ERROR:return typeof s=="string"||jc(s);case Ce.EVENT:case Ce.BINARY_EVENT:return Array.isArray(s)&&(typeof s[0]=="number"||typeof s[0]=="string"&&_b.indexOf(s[0])===-1);case Ce.ACK:case Ce.BINARY_ACK:return Array.isArray(s)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class x_{constructor(a){this.packet=a,this.buffers=[],this.reconPack=a}takeBinaryData(a){if(this.buffers.push(a),this.buffers.length===this.reconPack.attachments){const s=m_(this.reconPack,this.buffers);return this.finishedReconstruction(),s}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}function y_(t){return typeof t=="string"}const b_=Number.isInteger||function(t){return typeof t=="number"&&isFinite(t)&&Math.floor(t)===t};function v_(t){return t===void 0||b_(t)}function jc(t){return Object.prototype.toString.call(t)==="[object Object]"}function w_(t,a){switch(t){case Ce.CONNECT:return a===void 0||jc(a);case Ce.DISCONNECT:return a===void 0;case Ce.EVENT:return Array.isArray(a)&&(typeof a[0]=="number"||typeof a[0]=="string"&&_b.indexOf(a[0])===-1);case Ce.ACK:return Array.isArray(a);case Ce.CONNECT_ERROR:return typeof a=="string"||jc(a);default:return!1}}function S_(t){return y_(t.nsp)&&v_(t.id)&&w_(t.type,t.data)}const N_=Object.freeze(Object.defineProperty({__proto__:null,Decoder:Uh,Encoder:g_,get PacketType(){return Ce},isPacketValid:S_,protocol:p_},Symbol.toStringTag,{value:"Module"}));function mn(t,a,s){return t.on(a,s),function(){t.off(a,s)}}const j_=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class Cb extends lt{constructor(a,s,i){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=a,this.nsp=s,i&&i.auth&&(this.auth=i.auth),this._opts=Object.assign({},i),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const a=this.io;this.subs=[mn(a,"open",this.onopen.bind(this)),mn(a,"packet",this.onpacket.bind(this)),mn(a,"error",this.onerror.bind(this)),mn(a,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...a){return a.unshift("message"),this.emit.apply(this,a),this}emit(a,...s){var i,c,u;if(j_.hasOwnProperty(a))throw new Error('"'+a.toString()+'" is a reserved event name');if(s.unshift(a),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(s),this;const f={type:Ce.EVENT,data:s};if(f.options={},f.options.compress=this.flags.compress!==!1,typeof s[s.length-1]=="function"){const y=this.ids++,x=s.pop();this._registerAckCallback(y,x),f.id=y}const m=(c=(i=this.io.engine)===null||i===void 0?void 0:i.transport)===null||c===void 0?void 0:c.writable,p=this.connected&&!(!((u=this.io.engine)===null||u===void 0)&&u._hasPingExpired());return this.flags.volatile&&!m||(p?(this.notifyOutgoingListeners(f),this.packet(f)):this.sendBuffer.push(f)),this.flags={},this}_registerAckCallback(a,s){var i;const c=(i=this.flags.timeout)!==null&&i!==void 0?i:this._opts.ackTimeout;if(c===void 0){this.acks[a]=s;return}const u=this.io.setTimeoutFn(()=>{delete this.acks[a];for(let m=0;m<this.sendBuffer.length;m++)this.sendBuffer[m].id===a&&this.sendBuffer.splice(m,1);s.call(this,new Error("operation has timed out"))},c),f=(...m)=>{this.io.clearTimeoutFn(u),s.apply(this,m)};f.withError=!0,this.acks[a]=f}emitWithAck(a,...s){return new Promise((i,c)=>{const u=(f,m)=>f?c(f):i(m);u.withError=!0,s.push(u),this.emit(a,...s)})}_addToQueue(a){let s;typeof a[a.length-1]=="function"&&(s=a.pop());const i={id:this._queueSeq++,tryCount:0,pending:!1,args:a,flags:Object.assign({fromQueue:!0},this.flags)};a.push((c,...u)=>(this._queue[0],c!==null?i.tryCount>this._opts.retries&&(this._queue.shift(),s&&s(c)):(this._queue.shift(),s&&s(null,...u)),i.pending=!1,this._drainQueue())),this._queue.push(i),this._drainQueue()}_drainQueue(a=!1){if(!this.connected||this._queue.length===0)return;const s=this._queue[0];s.pending&&!a||(s.pending=!0,s.tryCount++,this.flags=s.flags,this.emit.apply(this,s.args))}packet(a){a.nsp=this.nsp,this.io._packet(a)}onopen(){typeof this.auth=="function"?this.auth(a=>{this._sendConnectPacket(a)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(a){this.packet({type:Ce.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},a):a})}onerror(a){this.connected||this.emitReserved("connect_error",a)}onclose(a,s){this.connected=!1,delete this.id,this.emitReserved("disconnect",a,s),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(a=>{if(!this.sendBuffer.some(i=>String(i.id)===a)){const i=this.acks[a];delete this.acks[a],i.withError&&i.call(this,new Error("socket has been disconnected"))}})}onpacket(a){if(a.nsp===this.nsp)switch(a.type){case Ce.CONNECT:a.data&&a.data.sid?this.onconnect(a.data.sid,a.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Ce.EVENT:case Ce.BINARY_EVENT:this.onevent(a);break;case Ce.ACK:case Ce.BINARY_ACK:this.onack(a);break;case Ce.DISCONNECT:this.ondisconnect();break;case Ce.CONNECT_ERROR:this.destroy();const i=new Error(a.data.message);i.data=a.data.data,this.emitReserved("connect_error",i);break}}onevent(a){const s=a.data||[];a.id!=null&&s.push(this.ack(a.id)),this.connected?this.emitEvent(s):this.receiveBuffer.push(Object.freeze(s))}emitEvent(a){if(this._anyListeners&&this._anyListeners.length){const s=this._anyListeners.slice();for(const i of s)i.apply(this,a)}super.emit.apply(this,a),this._pid&&a.length&&typeof a[a.length-1]=="string"&&(this._lastOffset=a[a.length-1])}ack(a){const s=this;let i=!1;return function(...c){i||(i=!0,s.packet({type:Ce.ACK,id:a,data:c}))}}onack(a){const s=this.acks[a.id];typeof s=="function"&&(delete this.acks[a.id],s.withError&&a.data.unshift(null),s.apply(this,a.data))}onconnect(a,s){this.id=a,this.recovered=s&&this._pid===s,this._pid=s,this.connected=!0,this.emitBuffered(),this._drainQueue(!0),this.emitReserved("connect")}emitBuffered(){this.receiveBuffer.forEach(a=>this.emitEvent(a)),this.receiveBuffer=[],this.sendBuffer.forEach(a=>{this.notifyOutgoingListeners(a),this.packet(a)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(a=>a()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:Ce.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(a){return this.flags.compress=a,this}get volatile(){return this.flags.volatile=!0,this}timeout(a){return this.flags.timeout=a,this}onAny(a){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(a),this}prependAny(a){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(a),this}offAny(a){if(!this._anyListeners)return this;if(a){const s=this._anyListeners;for(let i=0;i<s.length;i++)if(a===s[i])return s.splice(i,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(a){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(a),this}prependAnyOutgoing(a){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(a),this}offAnyOutgoing(a){if(!this._anyOutgoingListeners)return this;if(a){const s=this._anyOutgoingListeners;for(let i=0;i<s.length;i++)if(a===s[i])return s.splice(i,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(a){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const s=this._anyOutgoingListeners.slice();for(const i of s)i.apply(this,a.data)}}}function qr(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}qr.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var a=Math.random(),s=Math.floor(a*this.jitter*t);t=(Math.floor(a*10)&1)==0?t-s:t+s}return Math.min(t,this.max)|0};qr.prototype.reset=function(){this.attempts=0};qr.prototype.setMin=function(t){this.ms=t};qr.prototype.setMax=function(t){this.max=t};qr.prototype.setJitter=function(t){this.jitter=t};class sh extends lt{constructor(a,s){var i;super(),this.nsps={},this.subs=[],a&&typeof a=="object"&&(s=a,a=void 0),s=s||{},s.path=s.path||"/socket.io",this.opts=s,Xc(this,s),this.reconnection(s.reconnection!==!1),this.reconnectionAttempts(s.reconnectionAttempts||1/0),this.reconnectionDelay(s.reconnectionDelay||1e3),this.reconnectionDelayMax(s.reconnectionDelayMax||5e3),this.randomizationFactor((i=s.randomizationFactor)!==null&&i!==void 0?i:.5),this.backoff=new qr({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(s.timeout==null?2e4:s.timeout),this._readyState="closed",this.uri=a;const c=s.parser||N_;this.encoder=new c.Encoder,this.decoder=new c.Decoder,this._autoConnect=s.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(a){return arguments.length?(this._reconnection=!!a,a||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(a){return a===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=a,this)}reconnectionDelay(a){var s;return a===void 0?this._reconnectionDelay:(this._reconnectionDelay=a,(s=this.backoff)===null||s===void 0||s.setMin(a),this)}randomizationFactor(a){var s;return a===void 0?this._randomizationFactor:(this._randomizationFactor=a,(s=this.backoff)===null||s===void 0||s.setJitter(a),this)}reconnectionDelayMax(a){var s;return a===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=a,(s=this.backoff)===null||s===void 0||s.setMax(a),this)}timeout(a){return arguments.length?(this._timeout=a,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(a){if(~this._readyState.indexOf("open"))return this;this.engine=new o_(this.uri,this.opts);const s=this.engine,i=this;this._readyState="opening",this.skipReconnect=!1;const c=mn(s,"open",function(){i.onopen(),a&&a()}),u=m=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",m),a?a(m):this.maybeReconnectOnOpen()},f=mn(s,"error",u);if(this._timeout!==!1){const m=this._timeout,p=this.setTimeoutFn(()=>{c(),u(new Error("timeout")),s.close()},m);this.opts.autoUnref&&p.unref(),this.subs.push(()=>{this.clearTimeoutFn(p)})}return this.subs.push(c),this.subs.push(f),this}connect(a){return this.open(a)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const a=this.engine;this.subs.push(mn(a,"ping",this.onping.bind(this)),mn(a,"data",this.ondata.bind(this)),mn(a,"error",this.onerror.bind(this)),mn(a,"close",this.onclose.bind(this)),mn(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(a){try{this.decoder.add(a)}catch(s){this.onclose("parse error",s)}}ondecoded(a){Yc(()=>{this.emitReserved("packet",a)},this.setTimeoutFn)}onerror(a){this.emitReserved("error",a)}socket(a,s){let i=this.nsps[a];return i?this._autoConnect&&!i.active&&i.connect():(i=new Cb(this,a,s),this.nsps[a]=i),i}_destroy(a){const s=Object.keys(this.nsps);for(const i of s)if(this.nsps[i].active)return;this._close()}_packet(a){const s=this.encoder.encode(a);for(let i=0;i<s.length;i++)this.engine.write(s[i],a.options)}cleanup(){this.subs.forEach(a=>a()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(a,s){var i;this.cleanup(),(i=this.engine)===null||i===void 0||i.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",a,s),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const a=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const s=this.backoff.duration();this._reconnecting=!0;const i=this.setTimeoutFn(()=>{a.skipReconnect||(this.emitReserved("reconnect_attempt",a.backoff.attempts),!a.skipReconnect&&a.open(c=>{c?(a._reconnecting=!1,a.reconnect(),this.emitReserved("reconnect_error",c)):a.onreconnect()}))},s);this.opts.autoUnref&&i.unref(),this.subs.push(()=>{this.clearTimeoutFn(i)})}}onreconnect(){const a=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",a)}}const $i={};function fc(t,a){typeof t=="object"&&(a=t,t=void 0),a=a||{};const s=l_(t,a.path||"/socket.io"),i=s.source,c=s.id,u=s.path,f=$i[c]&&u in $i[c].nsps,m=a.forceNew||a["force new connection"]||a.multiplex===!1||f;let p;return m?p=new sh(i,a):($i[c]||($i[c]=new sh(i,a)),p=$i[c]),s.query&&!a.query&&(a.query=s.queryKey),p.socket(s.path,a)}Object.assign(fc,{Manager:sh,Socket:Cb,io:fc,connect:fc});function E_(t){const[a,s]=_.useState(!1),i=_.useRef(null),c=Ht(u=>u.token);return _.useEffect(()=>{if(!c)return;const u=fc(t,{path:"/socket.io/",auth:{dashboardToken:c},transports:["websocket","polling"],reconnection:!0,reconnectionAttempts:1/0,reconnectionDelay:2e3,reconnectionDelayMax:1e4,timeout:2e4});return u.on("connect",()=>{console.log(`Dashboard socket conectado a ${t}`),s(!0)}),u.on("disconnect",f=>{console.log(`Dashboard socket desconectado: ${f}`),s(!1)}),u.on("connect_error",f=>{console.error("Error de conexin Socket.IO:",f.message)}),i.current=u,()=>{u.disconnect(),i.current=null,s(!1)}},[t,c]),{socket:i.current,connected:a}}function __({sessionId:t,currentAgentId:a,currentDepartmentId:s,onClose:i,onAssigned:c}){const[u,f]=_.useState([]),[m,p]=_.useState([]),[g,y]=_.useState(a||""),[x,b]=_.useState(s||""),[S,j]=_.useState(!1),[A,N]=_.useState(""),E=Ht(w=>w.token),R={"Content-Type":"application/json",...E?{Authorization:`Bearer ${E}`}:{}};_.useEffect(()=>{Promise.all([fetch("/api/agents",{headers:R}).then(w=>w.json()),fetch("/api/departments",{headers:R}).then(w=>w.json())]).then(([w,D])=>{f(w.agents||[]),p(D.departments||[])}).catch(()=>{})},[]);const C=async()=>{j(!0),N("");try{const w={sessionId:Number(t)};g&&(w.agentId=Number(g)),x&&(w.departmentId=Number(x));const M=await(await fetch("/api/chat/assign",{method:"POST",headers:R,body:JSON.stringify(w)})).json();if(!M.ok)throw new Error(M.error||"Error al asignar");c&&c(M),i()}catch(w){N(w.message)}finally{j(!1)}},k={};return u.filter(w=>w.status==="active").forEach(w=>{const D=w.department_name||"Sin departamento";k[D]||(k[D]=[]),k[D].push(w)}),l.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:i,children:l.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md p-6",onClick:w=>w.stopPropagation(),children:[l.jsxs("div",{className:"flex items-center justify-between mb-5",children:[l.jsxs("h3",{className:"text-lg font-bold text-gray-800 flex items-center gap-2",children:[l.jsx(Tr,{className:"w-5 h-5 text-green-600"}),"Asignar Conversacin"]}),l.jsx("button",{onClick:i,className:"text-gray-400 hover:text-gray-600",children:l.jsx(zh,{className:"w-5 h-5"})})]}),A&&l.jsx("div",{className:"bg-red-50 text-red-600 px-4 py-2 rounded-lg text-sm mb-4 border border-red-200",children:A}),l.jsxs("div",{className:"mb-4",children:[l.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[l.jsx(_r,{className:"w-4 h-4 inline mr-1"}),"Departamento"]}),l.jsxs("select",{value:x,onChange:w=>b(w.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 outline-none",children:[l.jsx("option",{value:"",children:"Sin asignar departamento"}),m.filter(w=>w.active).map(w=>l.jsx("option",{value:w.id,children:w.display_name||w.name},w.id))]})]}),l.jsxs("div",{className:"mb-6",children:[l.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[l.jsx(Tr,{className:"w-4 h-4 inline mr-1"}),"Agente"]}),l.jsxs("select",{value:g,onChange:w=>y(w.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 outline-none",children:[l.jsx("option",{value:"",children:"Sin asignar agente"}),Object.entries(k).map(([w,D])=>l.jsx("optgroup",{label:w,children:D.map(M=>l.jsxs("option",{value:M.id,children:[M.name," (",M.username,") - ",M.role]},M.id))},w))]})]}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx("button",{onClick:i,className:"flex-1 px-4 py-2.5 border border-gray-300 rounded-xl text-gray-700 hover:bg-gray-50 transition",children:"Cancelar"}),l.jsx("button",{onClick:C,disabled:S||!g&&!x,className:"flex-1 px-4 py-2.5 bg-green-500 hover:bg-green-600 text-white rounded-xl transition disabled:opacity-50 disabled:cursor-not-allowed",children:S?"Asignando...":"Asignar"})]})]})})}function C_({sessionId:t,currentAgentId:a,currentDepartmentId:s,onClose:i,onTransferred:c}){const[u,f]=_.useState([]),[m,p]=_.useState([]),[g,y]=_.useState(""),[x,b]=_.useState(""),[S,j]=_.useState(""),[A,N]=_.useState(!1),[E,R]=_.useState(""),C=Ht(M=>M.token),k={"Content-Type":"application/json",...C?{Authorization:`Bearer ${C}`}:{}};_.useEffect(()=>{Promise.all([fetch("/api/agents",{headers:k}).then(M=>M.json()),fetch("/api/departments",{headers:k}).then(M=>M.json())]).then(([M,V])=>{f(M.agents||[]),p(V.departments||[])}).catch(()=>{})},[]);const w=async()=>{N(!0),R("");try{const M={sessionId:Number(t)};g&&(M.targetAgentId=Number(g)),x&&(M.targetDepartmentId=Number(x)),S&&(M.reason=S);const L=await(await fetch("/api/chat/transfer",{method:"POST",headers:k,body:JSON.stringify(M)})).json();if(!L.ok)throw new Error(L.error||"Error al transferir");c&&c(L),i()}catch(M){R(M.message)}finally{N(!1)}},D={};return u.filter(M=>M.status==="active"&&M.id!==a).forEach(M=>{const V=M.department_name||"Sin departamento";D[V]||(D[V]=[]),D[V].push(M)}),l.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:i,children:l.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md p-6",onClick:M=>M.stopPropagation(),children:[l.jsxs("div",{className:"flex items-center justify-between mb-5",children:[l.jsxs("h3",{className:"text-lg font-bold text-gray-800 flex items-center gap-2",children:[l.jsx(Th,{className:"w-5 h-5 text-blue-600"}),"Transferir Conversacin"]}),l.jsx("button",{onClick:i,className:"text-gray-400 hover:text-gray-600",children:l.jsx(zh,{className:"w-5 h-5"})})]}),E&&l.jsx("div",{className:"bg-red-50 text-red-600 px-4 py-2 rounded-lg text-sm mb-4 border border-red-200",children:E}),l.jsxs("div",{className:"mb-4",children:[l.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[l.jsx(_r,{className:"w-4 h-4 inline mr-1"}),"Departamento destino"]}),l.jsxs("select",{value:x,onChange:M=>b(M.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",children:[l.jsx("option",{value:"",children:"Mantener departamento actual"}),m.filter(M=>M.active).map(M=>l.jsx("option",{value:M.id,children:M.display_name||M.name},M.id))]})]}),l.jsxs("div",{className:"mb-4",children:[l.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[l.jsx(Tr,{className:"w-4 h-4 inline mr-1"}),"Agente destino"]}),l.jsxs("select",{value:g,onChange:M=>y(M.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",children:[l.jsx("option",{value:"",children:"Sin asignar agente"}),Object.entries(D).map(([M,V])=>l.jsx("optgroup",{label:M,children:V.map(L=>l.jsxs("option",{value:L.id,children:[L.name," (",L.username,") - ",L.role]},L.id))},M))]})]}),l.jsxs("div",{className:"mb-6",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Razn (opcional)"}),l.jsx("input",{type:"text",value:S,onChange:M=>j(M.target.value),placeholder:"Ej: Cliente necesita soporte tcnico",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none"})]}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx("button",{onClick:i,className:"flex-1 px-4 py-2.5 border border-gray-300 rounded-xl text-gray-700 hover:bg-gray-50 transition",children:"Cancelar"}),l.jsx("button",{onClick:w,disabled:A||!g&&!x,className:"flex-1 px-4 py-2.5 bg-blue-500 hover:bg-blue-600 text-white rounded-xl transition disabled:opacity-50 disabled:cursor-not-allowed",children:A?"Transfiriendo...":"Transferir"})]})]})})}const bx=["bg-blue-500","bg-green-500","bg-purple-500","bg-pink-500","bg-indigo-500","bg-teal-500","bg-orange-500","bg-red-400","bg-cyan-500","bg-emerald-500"];function vx(t){let a=0;for(let s=0;s<t.length;s++)a=t.charCodeAt(s)+((a<<5)-a);return bx[Math.abs(a)%bx.length]}function wx(t,a){if(t){const s=t.trim().split(/\s+/);return s.length>=2?(s[0][0]+s[s.length-1][0]).toUpperCase():t[0].toUpperCase()}return a.slice(-2)}const Sx=[{key:"mine",label:"Mis Chats",icon:Sr},{key:"department",label:"Departamento",icon:_r},{key:"unassigned",label:"Sin Asignar",icon:ab},{key:"all",label:"Todos",icon:kh}];function T_(){const[t,a]=lN(),[s,i]=_.useState([]),[c,u]=_.useState(t.get("phone")||null),[f,m]=_.useState([]),[p,g]=_.useState(""),[y,x]=_.useState(!0),[b,S]=_.useState(!1),[j,A]=_.useState(""),[N,E]=_.useState(!1),[R,C]=_.useState(!1),k=_.useRef(null),w=_.useRef(!0),D=Ht(X=>X.agent),M=D?.role==="supervisor",[V,L]=_.useState(M?"all":"mine"),se=_.useRef(V);se.current=V;const Q=s.find(X=>X.phone===c),F=_.useRef(c);F.current=c;const{socket:te,connected:U}=E_("/chat");_.useEffect(()=>{I();const X=setInterval(()=>{I()},3e4);return()=>{clearInterval(X)}},[V]),_.useEffect(()=>{c&&(w.current=!0,O(c),a({phone:c}))},[c]),_.useEffect(()=>{if(te)return te.on("new_message",X=>{if(console.log("Nuevo mensaje via WebSocket:",X),X.phone&&X.phone===F.current){m(le=>le.find(de=>de.waMsgId===X.msgId||de.id===X.dbId)?le:[...le,{id:X.dbId||Date.now(),direction:X.direction==="in"?"incoming":"outgoing",body:X.text,content:X.text,created_at:new Date(X.timestamp).toISOString(),status:X.status,waMsgId:X.msgId,is_bot:X.isAI||!1,mediaType:X.media?.type||null,mediaId:X.media?.id||X.mediaId||null,mediaMime:X.media?.mime||null,mediaCaption:X.media?.caption||null,mediaExtra:X.media?.extra||null,media:X.media}]),ox(X.phone).then(()=>I());return}I()}),te.on("escalation",X=>{console.log("Escalamiento detectado:",X),I()}),te.on("message_status_update",X=>{console.log("Status actualizado:",X),m(le=>le.map(ce=>ce.waMsgId===X.msgId?{...ce,status:X.status}:ce))}),te.on("chat_assigned",X=>{console.log("Chat asignado:",X),I()}),te.on("chat_transferred",X=>{console.log("Chat transferido:",X),I()}),te.on("chat_unassigned",X=>{console.log("Chat liberado:",X),I()}),te.on("agent_status_change",X=>{console.log("Agent status change:",X)}),()=>{te.off("new_message"),te.off("escalation"),te.off("message_status_update"),te.off("chat_assigned"),te.off("chat_transferred"),te.off("chat_unassigned"),te.off("agent_status_change")}},[te]),_.useEffect(()=>{w.current?(k.current?.scrollIntoView({behavior:"instant"}),w.current=!1):k.current?.scrollIntoView({behavior:"smooth"})},[f]);const I=async X=>{try{const le=X||se.current,ce=await ob(le);i(ce.conversations||[])}catch(le){console.error("Error loading conversations:",le)}finally{x(!1)}},O=async X=>{try{const le=await Oj(X);m(le.messages||[]),await ox(X)}catch(le){console.error("Error loading messages:",le)}},B=X=>{g(X.target.value)},q=async()=>{if(!(!p.trim()||!c||b)){S(!0);try{await Bj(c,p),g("")}catch(X){console.error("Error sending message:",X),alert("Error al enviar mensaje")}finally{S(!1)}}},H=X=>{X.key==="Enter"&&!X.shiftKey&&(X.preventDefault(),q())},W=async()=>{if(!Z)return;const X=Z.session_id||Z.sessionId||Z.id;if(!confirm(`Eliminar conversacin con ${Z.contact_name||Z.phone}? Se borrarn todos los mensajes.`))return;const le=Ht.getState().token;try{const de=await(await fetch(`/api/chat/conversations/${X}`,{method:"DELETE",headers:{"Content-Type":"application/json",...le?{Authorization:`Bearer ${le}`}:{}}})).json();de.ok?(u(null),m([]),I()):alert(de.error||"Error al eliminar")}catch(ce){console.error("Error deleting conversation:",ce),alert("Error al eliminar conversacin")}},z=async()=>{if(!Q)return;const X=Ht.getState().token;try{(await(await fetch("/api/chat/self-assign",{method:"POST",headers:{"Content-Type":"application/json",...X?{Authorization:`Bearer ${X}`}:{}},body:JSON.stringify({sessionId:Q.session_id||Q.sessionId||Q.id})})).json()).ok&&I()}catch(le){console.error("Error self-assigning:",le)}},Y=s.filter(X=>(X.contact_name?.toLowerCase()||"").includes(j.toLowerCase())||X.phone.includes(j)),Z=s.find(X=>X.phone===c),ae=M?Sx:Sx.filter(X=>X.key!=="all"),ue=X=>{const{mediaType:le,mediaId:ce,mediaExtra:de,mediaMime:we,media:ve}=X,pe=le||ve?.type,ge=ce||ve?.id,_e=we||ve?.mime,Te=de||ve?.extra;if(!pe)return null;const me=X.direction==="outgoing",qe="/api/chat/media";switch(pe){case"image":return l.jsxs("div",{className:"mt-2 rounded-lg overflow-hidden max-w-xs",children:[l.jsx("img",{src:`${qe}/${ge}`,alt:"Imagen",className:"w-full h-auto cursor-pointer hover:opacity-90",onClick:()=>window.open(`${qe}/${ge}`,"_blank"),onError:pt=>{pt.target.style.display="none",pt.target.nextSibling.style.display="flex"}}),l.jsxs("div",{className:"hidden items-center gap-2 p-3 bg-gray-100 rounded-lg",children:[l.jsx(QN,{className:"w-5 h-5 text-gray-500"}),l.jsx("span",{className:"text-sm text-gray-600",children:"Imagen no disponible"})]})]});case"video":return l.jsx("div",{className:"mt-2 rounded-lg overflow-hidden max-w-xs",children:l.jsx("video",{src:`${qe}/${ge}`,controls:!0,className:"w-full h-auto rounded-lg",preload:"metadata",children:"Tu navegador no soporta video"})});case"audio":return l.jsxs("div",{className:`mt-2 flex items-center gap-2 p-2 rounded-lg ${me?"bg-green-600":"bg-gray-100"}`,children:[l.jsx(oj,{className:`w-5 h-5 ${me?"text-white":"text-green-600"}`}),l.jsx("audio",{src:`${qe}/${ge}`,controls:!0,className:"h-8 flex-1",preload:"metadata"})]});case"document":const vt=Te?.filename||"Documento";return l.jsxs("a",{href:`${qe}/${ge}`,target:"_blank",rel:"noopener noreferrer",className:`mt-2 flex items-center gap-3 p-3 rounded-lg ${me?"bg-green-600 hover:bg-green-700":"bg-gray-100 hover:bg-gray-200"} transition`,children:[l.jsx(YN,{className:`w-8 h-8 ${me?"text-white":"text-blue-600"}`}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("p",{className:`text-sm font-medium truncate ${me?"text-white":"text-gray-800"}`,children:vt}),l.jsx("p",{className:`text-xs ${me?"text-green-100":"text-gray-500"}`,children:_e||"Documento"})]}),l.jsx(HN,{className:`w-5 h-5 ${me?"text-white":"text-gray-500"}`})]});case"sticker":return l.jsx("div",{className:"mt-2",children:l.jsx("img",{src:`${qe}/${ge}`,alt:"Sticker",className:"w-32 h-32 object-contain",onError:pt=>{pt.target.src='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="128" height="128" viewBox="0 0 24 24" fill="none" stroke="gray" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="M8 14s1.5 2 4 2 4-2 4-2"/><line x1="9" y1="9" x2="9.01" y2="9"/><line x1="15" y1="9" x2="15.01" y2="9"/></svg>'}})});case"location":const ut=Te?.latitude,Ct=Te?.longitude,Ft=Te?.name,vn=Te?.address,On=`https://www.google.com/maps?q=${ut},${Ct}`;return l.jsx("a",{href:On,target:"_blank",rel:"noopener noreferrer",className:`mt-2 block p-3 rounded-lg ${me?"bg-green-600 hover:bg-green-700":"bg-gray-100 hover:bg-gray-200"} transition`,children:l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("div",{className:`p-2 rounded-full ${me?"bg-green-500":"bg-red-100"}`,children:l.jsx(sj,{className:`w-5 h-5 ${me?"text-white":"text-red-600"}`})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[Ft&&l.jsx("p",{className:`font-medium ${me?"text-white":"text-gray-800"}`,children:Ft}),vn&&l.jsx("p",{className:`text-sm ${me?"text-green-100":"text-gray-600"}`,children:vn}),l.jsxs("p",{className:`text-xs mt-1 ${me?"text-green-200":"text-gray-500"}`,children:[ut?.toFixed(6),", ",Ct?.toFixed(6)]})]})]})});case"contacts":const et=Te?.contacts||[];return l.jsxs("div",{className:`mt-2 p-3 rounded-lg ${me?"bg-green-600":"bg-gray-100"}`,children:[l.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[l.jsx(Uc,{className:`w-5 h-5 ${me?"text-white":"text-blue-600"}`}),l.jsx("span",{className:`font-medium ${me?"text-white":"text-gray-800"}`,children:et.length===1?"Contacto compartido":`${et.length} contactos`})]}),et.map((pt,ln)=>l.jsxs("div",{className:`p-2 rounded ${me?"bg-green-500":"bg-white"} ${ln>0?"mt-2":""}`,children:[l.jsx("p",{className:`font-medium ${me?"text-white":"text-gray-800"}`,children:pt.name}),pt.phones?.map((cn,Yr)=>l.jsxs("p",{className:`text-sm ${me?"text-green-100":"text-gray-600"}`,children:[cn.phone," ",cn.type&&`(${cn.type})`]},Yr))]},ln))]});case"reaction":const fa=Te?.emoji||X.body;return l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(PN,{className:`w-4 h-4 ${me?"text-white":"text-pink-500"}`}),l.jsx("span",{className:"text-2xl",children:fa})]});default:return null}};return y?l.jsx("div",{className:"h-full flex items-center justify-center",children:l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-500"})}):l.jsxs("div",{className:"h-screen flex",children:[l.jsxs("div",{className:"w-96 bg-white border-r border-gray-200 flex flex-col",children:[l.jsxs("div",{className:"p-4 border-b border-gray-200",children:[l.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-3",children:"Conversaciones"}),l.jsx("div",{className:`grid ${M?"grid-cols-4":"grid-cols-3"} gap-1 mb-3 bg-gray-100 p-1 rounded-xl`,children:ae.map(X=>{const le=X.icon;return l.jsxs("button",{onClick:()=>{L(X.key),se.current=X.key,I(X.key)},className:`flex items-center justify-center gap-1.5 py-2 rounded-lg text-xs font-semibold transition-all ${V===X.key?"bg-white text-green-700 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:[l.jsx(le,{className:"w-3.5 h-3.5"}),X.label]},X.key)})}),l.jsxs("div",{className:"relative",children:[l.jsx(rb,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),l.jsx("input",{type:"text",value:j,onChange:X=>A(X.target.value),placeholder:"Buscar conversacin...",className:"w-full pl-10 pr-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none"})]})]}),l.jsx("div",{className:"flex-1 overflow-y-auto",children:Y.length===0?l.jsxs("div",{className:"p-8 text-center text-gray-400",children:[l.jsx(Cr,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),l.jsx("p",{children:"No hay conversaciones"})]}):Y.map(X=>l.jsxs("button",{onClick:()=>u(X.phone),className:`w-full flex items-center gap-3 p-4 border-b border-gray-100 hover:bg-gray-50 transition text-left ${c===X.phone?"bg-green-50":""}`,children:[l.jsx("div",{className:`w-12 h-12 ${vx(X.contact_name||X.phone)} rounded-full flex items-center justify-center flex-shrink-0`,children:l.jsx("span",{className:"text-white font-semibold text-sm",children:wx(X.contact_name,X.phone)})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("p",{className:"font-medium text-gray-800 truncate",children:X.contact_name||X.phone}),X.unread_count>0&&l.jsx("span",{className:"bg-green-500 text-white text-xs font-medium px-2 py-0.5 rounded-full",children:X.unread_count})]}),l.jsx("p",{className:"text-sm text-gray-500 truncate",children:X.last_message||"Sin mensajes"}),l.jsxs("div",{className:"flex items-center gap-1.5 mt-1 flex-wrap",children:[X.department_name&&l.jsxs("span",{className:"inline-flex items-center gap-0.5 text-[10px] px-1.5 py-0.5 rounded-full font-medium",style:{backgroundColor:(X.department_color||"#6b7280")+"20",color:X.department_color||"#6b7280"},children:[l.jsx(_r,{className:"w-2.5 h-2.5"}),X.department_name]}),X.agent_name&&l.jsxs("span",{className:"inline-flex items-center gap-0.5 text-[10px] px-1.5 py-0.5 rounded-full bg-blue-50 text-blue-600 font-medium",children:[l.jsx(Sr,{className:"w-2.5 h-2.5"}),X.agent_name]}),!X.agent_name&&!X.department_name&&X.escalation_status==="ESCALATED"&&l.jsxs("span",{className:"inline-flex items-center gap-0.5 text-[10px] px-1.5 py-0.5 rounded-full bg-yellow-50 text-yellow-600 font-medium",children:[l.jsx(ab,{className:"w-2.5 h-2.5"}),"Sin asignar"]}),l.jsx("span",{className:"text-xs text-gray-400",children:X.last_message_time?Vc(new Date(X.last_message_time),{addSuffix:!0,locale:Mr}):""})]})]})]},X.phone))})]}),l.jsx("div",{className:"flex-1 flex flex-col bg-gray-50",children:c?l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"bg-white border-b border-gray-200 p-4 flex items-center justify-between gap-4",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:`w-10 h-10 ${vx(Z?.contact_name||c)} rounded-full flex items-center justify-center`,children:l.jsx("span",{className:"text-white font-semibold text-sm",children:wx(Z?.contact_name,c)})}),l.jsxs("div",{children:[l.jsx("p",{className:"font-medium text-gray-800",children:Z?.contact_name||c}),l.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[l.jsxs("span",{className:"flex items-center gap-1",children:[l.jsx(Lc,{className:"w-3 h-3"}),c]}),Z?.department_name&&l.jsxs("span",{className:"inline-flex items-center gap-0.5 text-[10px] px-1.5 py-0.5 rounded-full font-medium",style:{backgroundColor:(Z.department_color||"#6b7280")+"20",color:Z.department_color||"#6b7280"},children:[l.jsx(_r,{className:"w-2.5 h-2.5"}),Z.department_name]}),Z?.agent_name&&l.jsxs("span",{className:"inline-flex items-center gap-0.5 text-[10px] px-1.5 py-0.5 rounded-full bg-blue-50 text-blue-600 font-medium",children:[l.jsx(Sr,{className:"w-2.5 h-2.5"}),Z.agent_name]})]})]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[Z&&D?.id>0&&(!Z.assigned_agent_id||Z.assigned_agent_id!==D.id)&&l.jsxs("button",{onClick:z,className:"flex items-center gap-1.5 px-3 py-2 text-xs font-medium bg-green-50 text-green-700 hover:bg-green-100 rounded-lg border border-green-200 transition",title:"Tomar este chat",children:[l.jsx(Tr,{className:"w-4 h-4"}),"Tomar"]}),Z&&l.jsxs("button",{onClick:()=>E(!0),className:"flex items-center gap-1.5 px-3 py-2 text-xs font-medium bg-gray-50 text-gray-700 hover:bg-gray-100 rounded-lg border border-gray-200 transition",title:"Asignar chat",children:[l.jsx(Tr,{className:"w-4 h-4"}),"Asignar"]}),Z&&l.jsxs("button",{onClick:()=>C(!0),className:"flex items-center gap-1.5 px-3 py-2 text-xs font-medium bg-blue-50 text-blue-700 hover:bg-blue-100 rounded-lg border border-blue-200 transition",title:"Transferir chat",children:[l.jsx(Th,{className:"w-4 h-4"}),"Transferir"]}),Z&&M&&l.jsxs("button",{onClick:W,className:"flex items-center gap-1.5 px-3 py-2 text-xs font-medium bg-red-50 text-red-700 hover:bg-red-100 rounded-lg border border-red-200 transition",title:"Eliminar conversacin",children:[l.jsx(Dh,{className:"w-4 h-4"}),"Eliminar"]}),l.jsx("div",{className:"text-sm",children:U?l.jsxs("span",{className:"text-green-600 flex items-center gap-1",children:[l.jsx("span",{className:"w-2 h-2 bg-green-600 rounded-full"}),"Tiempo real"]}):l.jsxs("span",{className:"text-yellow-600 flex items-center gap-1",children:[l.jsx("span",{className:"w-2 h-2 bg-yellow-600 rounded-full"}),"Reconectando..."]})})]})]}),l.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[f.map((X,le)=>l.jsx("div",{className:`flex ${X.direction==="outgoing"?"justify-end":"justify-start"}`,children:l.jsxs("div",{className:`max-w-md px-4 py-2 rounded-2xl ${X.direction==="outgoing"?"bg-green-500 text-white rounded-br-md":"bg-white text-gray-800 rounded-bl-md shadow-sm"}`,children:[X.direction==="incoming"&&l.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-400 mb-1",children:[l.jsx(Sr,{className:"w-3 h-3"}),"Cliente"]}),X.direction==="outgoing"&&X.is_bot&&l.jsxs("div",{className:"flex items-center gap-1 text-xs text-green-100 mb-1",children:[l.jsx(Mh,{className:"w-3 h-3"}),"Bot"]}),ue(X),(X.body||X.content)&&(!X.mediaType||X.mediaType==="reaction")&&l.jsx("p",{className:"whitespace-pre-wrap",children:X.body||X.content}),X.mediaType&&X.mediaType!=="reaction"&&(X.mediaCaption||X.body)&&l.jsx("p",{className:"whitespace-pre-wrap mt-2 text-sm",children:X.mediaCaption||X.body}),l.jsxs("div",{className:`flex items-center gap-1 text-xs mt-1 ${X.direction==="outgoing"?"text-white opacity-90":"text-gray-400"}`,children:[l.jsx("span",{children:X.created_at?qc(new Date(X.created_at),"HH:mm",{locale:Mr}):""}),X.direction==="outgoing"&&l.jsxs("span",{className:"ml-1",children:[X.status==="sent"&&"",X.status==="delivered"&&"",X.status==="read"&&l.jsx("span",{className:"text-blue-400",children:""})]})]})]})},le)),l.jsx("div",{ref:k})]}),l.jsx("div",{className:"bg-white border-t border-gray-200 p-4",children:l.jsxs("div",{className:"flex gap-3",children:[l.jsx("input",{type:"text",value:p,onChange:B,onKeyPress:H,placeholder:"Escribe un mensaje...",className:"flex-1 px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none"}),l.jsxs("button",{onClick:q,disabled:!p.trim()||b,className:"bg-green-500 hover:bg-green-600 text-white px-6 py-3 rounded-xl transition disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[l.jsx(xj,{className:"w-5 h-5"}),b?"Enviando...":"Enviar"]})]})})]}):l.jsx("div",{className:"flex-1 flex items-center justify-center text-gray-400",children:l.jsxs("div",{className:"text-center",children:[l.jsx(Cr,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),l.jsx("p",{className:"text-lg",children:"Selecciona una conversacin"})]})})}),N&&Z&&l.jsx(__,{sessionId:Z.session_id||Z.sessionId||Z.id,currentAgentId:Z.assigned_agent_id,currentDepartmentId:Z.assigned_department_id,onClose:()=>E(!1),onAssigned:()=>I()}),R&&Z&&l.jsx(C_,{sessionId:Z.session_id||Z.sessionId||Z.id,currentAgentId:Z.assigned_agent_id,currentDepartmentId:Z.assigned_department_id,onClose:()=>C(!1),onTransferred:()=>I()})]})}const ua="/api/visual-flows-live";async function Qt(t,a){if(!t.ok){let s=a;try{const i=await t.json();i.error&&(s=i.error)}catch{}throw new Error(s)}return t.json()}async function Tb(){const t=await fetch(ua);return Qt(t,"Error al cargar flujos")}async function rh(t){const a=await fetch(`${ua}/${t}`);return Qt(a,"Flujo no encontrado")}async function M_(t){const a=await fetch(ua,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});return Qt(a,"Error al crear flujo")}async function A_(t,a){const s=await fetch(`${ua}/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});return Qt(s,"Error al actualizar flujo")}async function k_(t){const a=await fetch(`${ua}/${t}`,{method:"DELETE"});return Qt(a,"Error al eliminar flujo")}async function Mb(t,a=!0){const s=await fetch(`${ua}/${t}/activate`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({active:a})});return Qt(s,"Error al activar flujo")}async function R_(t,a){const s=await fetch(`${ua}/${t}/duplicate`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({new_name:a})});return Qt(s,"Error al duplicar flujo")}async function D_(){const t=await fetch(`${ua}/templates/list`);return Qt(t,"Error al cargar plantillas")}async function Ab(t,a){const s=await fetch(`${ua}/templates/${t}/create`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:a})});return Qt(s,"Error al crear desde plantilla")}async function z_(t={}){const a=new URLSearchParams;t.status&&a.append("status",t.status),t.category&&a.append("category",t.category),t.lang&&a.append("lang",t.lang),a.append("with","components"),a.append("limit","200");const s=await fetch(`/api/chat/templates?${a}`);return Qt(s,"Error al cargar plantillas de Meta")}async function O_({templateName:t,languageCode:a,phone:s,parameters:i=[],headerParams:c=[],buttonParams:u=[]}){const f=await fetch("/api/templates/test",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({templateName:t,languageCode:a,phone:s,parameters:i,headerParams:c,buttonParams:u})});return Qt(f,"Error al enviar plantilla de prueba")}async function B_(){const t=await fetch("/api/settings/visual-flows");return Qt(t,"Error al obtener estado de Visual Flows")}async function H_(t){const a=await fetch("/api/settings/visual-flows",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({enabled:t})});return Qt(a,"Error al cambiar estado de Visual Flows")}const Nx="whatsapp_test_phone";function L_({template:t,onClose:a}){const[s,i]=_.useState(""),[c,u]=_.useState(!0),[f,m]=_.useState([]),[p,g]=_.useState([]),[y,x]=_.useState([]),[b,S]=_.useState(!1),[j,A]=_.useState(null);_.useEffect(()=>{const k=localStorage.getItem(Nx);k&&i(k)},[]),_.useEffect(()=>{if(!t?.components)return;const k=t.components.find(M=>M.type==="BODY"),w=t.components.find(M=>M.type==="HEADER"),D=t.components.filter(M=>M.type==="BUTTONS");if(k?.text){const M=k.text.match(/\{\{(\d+)\}\}/g)||[];m(M.map(()=>""))}if(w?.text){const M=w.text.match(/\{\{(\d+)\}\}/g)||[];g(M.map(()=>""))}if(D.length>0){const M=[];D.forEach(V=>{V.buttons&&V.buttons.forEach(L=>{L.type==="URL"&&L.url?.includes("{{")&&M.push("")})}),x(M)}},[t]);const N=async()=>{if(!s.trim()){A({ok:!1,error:"Ingresa un nmero de telfono"});return}S(!0),A(null);try{c&&localStorage.setItem(Nx,s);const k=await O_({templateName:t.name,languageCode:t.language,phone:s.trim(),parameters:f.filter(w=>w!==""),headerParams:p.filter(w=>w!==""),buttonParams:y.filter(w=>w!=="")});A(k)}catch(k){A({ok:!1,error:k.message})}finally{S(!1)}},E=()=>{if(!t?.components)return"";const k=t.components.find(D=>D.type==="BODY");if(!k?.text)return"";let w=k.text;return f.forEach((D,M)=>{w=w.replace(`{{${M+1}}}`,D||`[param ${M+1}]`)}),w},R={APPROVED:{bg:"#dcfce7",text:"#166534"},PENDING:{bg:"#fef3c7",text:"#92400e"},REJECTED:{bg:"#fee2e2",text:"#991b1b"}},C={MARKETING:{bg:"#dbeafe",text:"#1e40af"},UTILITY:{bg:"#f3e8ff",text:"#6b21a8"},AUTHENTICATION:{bg:"#fce7f3",text:"#9d174d"}};return l.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:l.jsxs("div",{style:{background:"white",borderRadius:"16px",padding:"24px",maxWidth:"500px",width:"90%",maxHeight:"90vh",overflow:"auto"},children:[l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"16px"},children:[l.jsxs("div",{children:[l.jsx("h2",{style:{margin:"0 0 8px 0",fontSize:"20px"},children:"Probar Plantilla"}),l.jsxs("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:[l.jsx("span",{style:{padding:"2px 8px",borderRadius:"4px",fontSize:"12px",fontWeight:"500",background:R[t.status]?.bg||"#f3f4f6",color:R[t.status]?.text||"#374151"},children:t.status}),l.jsx("span",{style:{padding:"2px 8px",borderRadius:"4px",fontSize:"12px",fontWeight:"500",background:C[t.category]?.bg||"#f3f4f6",color:C[t.category]?.text||"#374151"},children:t.category}),l.jsx("span",{style:{padding:"2px 8px",borderRadius:"4px",fontSize:"12px",background:"#f3f4f6",color:"#374151"},children:t.language})]})]}),l.jsx("button",{onClick:a,style:{background:"none",border:"none",fontSize:"24px",cursor:"pointer",color:"#6b7280"},children:""})]}),l.jsxs("div",{style:{background:"#f9fafb",padding:"12px",borderRadius:"8px",marginBottom:"16px"},children:[l.jsx("div",{style:{fontSize:"12px",color:"#6b7280",marginBottom:"4px"},children:"Nombre de la plantilla"}),l.jsx("div",{style:{fontFamily:"monospace",fontWeight:"500"},children:t.name})]}),l.jsxs("div",{style:{background:"#dcf8c6",padding:"12px",borderRadius:"8px",marginBottom:"16px",whiteSpace:"pre-wrap"},children:[l.jsx("div",{style:{fontSize:"12px",color:"#075e54",marginBottom:"4px"},children:"Vista previa"}),l.jsx("div",{style:{color:"#000"},children:E()||"(Sin contenido)"})]}),f.length>0&&l.jsxs("div",{style:{marginBottom:"16px"},children:[l.jsx("div",{style:{fontSize:"14px",fontWeight:"500",marginBottom:"8px"},children:"Parmetros del mensaje"}),f.map((k,w)=>l.jsx("input",{type:"text",placeholder:`Parmetro {{${w+1}}}`,value:k,onChange:D=>{const M=[...f];M[w]=D.target.value,m(M)},style:{width:"100%",padding:"8px 12px",border:"1px solid #d1d5db",borderRadius:"6px",marginBottom:"8px",fontSize:"14px"}},`body-${w}`))]}),p.length>0&&l.jsxs("div",{style:{marginBottom:"16px"},children:[l.jsx("div",{style:{fontSize:"14px",fontWeight:"500",marginBottom:"8px"},children:"Parmetros del encabezado"}),p.map((k,w)=>l.jsx("input",{type:"text",placeholder:`Header {{${w+1}}}`,value:k,onChange:D=>{const M=[...p];M[w]=D.target.value,g(M)},style:{width:"100%",padding:"8px 12px",border:"1px solid #d1d5db",borderRadius:"6px",marginBottom:"8px",fontSize:"14px"}},`header-${w}`))]}),y.length>0&&l.jsxs("div",{style:{marginBottom:"16px"},children:[l.jsx("div",{style:{fontSize:"14px",fontWeight:"500",marginBottom:"8px"},children:"Parmetros de botn URL"}),y.map((k,w)=>l.jsx("input",{type:"text",placeholder:`Texto dinmico del botn ${w+1}`,value:k,onChange:D=>{const M=[...y];M[w]=D.target.value,x(M)},style:{width:"100%",padding:"8px 12px",border:"1px solid #d1d5db",borderRadius:"6px",marginBottom:"8px",fontSize:"14px"}},`btn-${w}`))]}),l.jsxs("div",{style:{marginBottom:"16px"},children:[l.jsx("div",{style:{fontSize:"14px",fontWeight:"500",marginBottom:"8px"},children:"Nmero de telfono destino"}),l.jsx("input",{type:"tel",placeholder:"56912345678",value:s,onChange:k=>i(k.target.value),style:{width:"100%",padding:"8px 12px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"14px"}}),l.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",marginTop:"8px",fontSize:"13px",color:"#6b7280",cursor:"pointer"},children:[l.jsx("input",{type:"checkbox",checked:c,onChange:k=>u(k.target.checked)}),"Recordar este nmero"]})]}),j&&l.jsx("div",{style:{padding:"12px",borderRadius:"8px",marginBottom:"16px",background:j.ok?"#dcfce7":"#fee2e2",color:j.ok?"#166534":"#991b1b"},children:j.ok?l.jsxs(l.Fragment,{children:[l.jsx("div",{style:{fontWeight:"500"},children:"Enviado correctamente"}),l.jsxs("div",{style:{fontSize:"13px",marginTop:"4px"},children:["Mensaje enviado a ",j.sentTo]})]}):l.jsxs(l.Fragment,{children:[l.jsx("div",{style:{fontWeight:"500"},children:"Error al enviar"}),l.jsx("div",{style:{fontSize:"13px",marginTop:"4px"},children:j.error})]})}),l.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end"},children:[l.jsx("button",{onClick:a,style:{padding:"10px 20px",border:"1px solid #d1d5db",borderRadius:"8px",background:"white",cursor:"pointer",fontSize:"14px"},children:"Cerrar"}),l.jsx("button",{onClick:N,disabled:b||t.status!=="APPROVED",style:{padding:"10px 20px",border:"none",borderRadius:"8px",background:t.status==="APPROVED"?"#25d366":"#9ca3af",color:"white",cursor:t.status==="APPROVED"?"pointer":"not-allowed",fontSize:"14px",fontWeight:"500",display:"flex",alignItems:"center",gap:"8px"},children:b?"Enviando...":"Enviar Prueba"})]}),t.status!=="APPROVED"&&l.jsx("div",{style:{marginTop:"12px",padding:"8px",background:"#fef3c7",borderRadius:"6px",fontSize:"13px",color:"#92400e",textAlign:"center"},children:"Solo se pueden probar plantillas con estado APPROVED"})]})})}function U_(){const t=Ts(),[a,s]=_.useState("flows"),[i,c]=_.useState([]),[u,f]=_.useState([]),[m,p]=_.useState([]),[g,y]=_.useState(!1),[x,b]=_.useState({status:"",category:""}),[S,j]=_.useState(null),[A,N]=_.useState(!0),[E,R]=_.useState(null),[C,k]=_.useState(null),[w,D]=_.useState(!0),[M,V]=_.useState(!1);_.useEffect(()=>{Q(),L()},[]),_.useEffect(()=>{a==="whatsapp"&&F()},[a,x]);const L=async()=>{try{const H=await B_();D(H.enabled)}catch(H){console.error("Error loading visual flows status:",H)}},se=async()=>{try{V(!0);const W=await H_(!w);D(W.enabled),te(W.enabled?"Modo automtico ACTIVADO":"Modo automtico DESACTIVADO",W.enabled?"success":"info")}catch(H){console.error("Error toggling visual flows:",H),te(`Error: ${H.message}`,"error")}finally{V(!1)}},Q=async()=>{try{N(!0),R(null);const[H,W]=await Promise.all([Tb(),D_()]);c(H.flows||[]),f(W.templates||[])}catch(H){console.error("Error loading flows:",H),R(H.message)}finally{N(!1)}},F=async()=>{try{y(!0);const H={};x.status&&(H.status=x.status),x.category&&(H.category=x.category);const W=await z_(H);p(W.items||[])}catch(H){console.error("Error loading Meta templates:",H),te(`Error al cargar plantillas: ${H.message}`,"error")}finally{y(!1)}},te=(H,W="success")=>{k({message:H,type:W}),setTimeout(()=>k(null),4e3)},U=async(H,W)=>{try{const z=await Ab(H,null);te(`Flujo "${W}" creado correctamente`,"success"),await Q(),z.id&&t(`/flows/builder/${z.id}`)}catch(z){console.error("Error creating from template:",z),te(`Error al crear flujo: ${z.message}`,"error")}},I=async H=>{try{const W=!H.is_active;await Mb(H.id,W),te(`Flujo "${H.name}" ${W?"activado":"desactivado"}`,"success"),await Q()}catch(W){console.error("Error toggling flow:",W),te(`Error: ${W.message}`,"error")}},O=async H=>{try{await R_(H.id,`${H.name} (copia)`),te("Flujo duplicado correctamente","success"),await Q()}catch(W){console.error("Error duplicating flow:",W),te(`Error al duplicar: ${W.message}`,"error")}},B=async H=>{if(confirm(`Ests seguro de eliminar el flujo "${H.name}"?`))try{await k_(H.id),te("Flujo eliminado correctamente","success"),await Q()}catch(W){console.error("Error deleting flow:",W),te(`Error al eliminar: ${W.message}`,"error")}},q=H=>({sales:"bg-green-100 text-green-800",support:"bg-blue-100 text-blue-800",service:"bg-purple-100 text-purple-800",feedback:"bg-yellow-100 text-yellow-800",engagement:"bg-pink-100 text-pink-800"})[H]||"bg-gray-100 text-gray-800";return A?l.jsx("div",{className:"flex items-center justify-center h-screen",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-500 mx-auto mb-4"}),l.jsx("p",{className:"text-gray-600",children:"Cargando flujos..."})]})}):E?l.jsx("div",{className:"p-8",children:l.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[l.jsx("h3",{className:"text-red-800 font-semibold mb-2",children:"Error al cargar flujos"}),l.jsx("p",{className:"text-red-600",children:E}),l.jsx("button",{onClick:Q,className:"mt-4 px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700",children:"Reintentar"})]})}):l.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[l.jsxs("div",{className:"mb-6 flex justify-between items-start",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Gestin de Flujos"}),l.jsx("p",{className:"text-gray-600",children:"Administra tus flujos conversacionales y crea nuevos desde plantillas predefinidas"})]}),l.jsxs("div",{className:`flex items-center gap-3 px-4 py-3 rounded-lg border ${w?"bg-green-50 border-green-200":"bg-gray-50 border-gray-300"}`,children:[l.jsxs("div",{className:"text-right",children:[l.jsx("p",{className:`text-sm font-medium ${w?"text-green-800":"text-gray-600"}`,children:"Modo Automtico"}),l.jsx("p",{className:`text-xs ${w?"text-green-600":"text-gray-500"}`,children:w?"Bot respondiendo":"Bot pausado"})]}),l.jsx("button",{onClick:se,disabled:M,className:`relative inline-flex h-7 w-14 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 ${w?"bg-green-500 focus:ring-green-500":"bg-gray-300 focus:ring-gray-500"} ${M?"opacity-50 cursor-wait":"cursor-pointer"}`,children:l.jsx("span",{className:`inline-block h-5 w-5 transform rounded-full bg-white shadow-md transition-transform ${w?"translate-x-8":"translate-x-1"}`})})]})]}),C&&l.jsx("div",{className:`mb-4 p-4 rounded-lg ${C.type==="success"?"bg-green-50 text-green-800 border border-green-200":C.type==="error"?"bg-red-50 text-red-800 border border-red-200":"bg-blue-50 text-blue-800 border border-blue-200"}`,children:C.message}),l.jsx("div",{className:"mb-6 border-b border-gray-200",children:l.jsxs("div",{className:"flex space-x-8",children:[l.jsxs("button",{onClick:()=>s("flows"),className:`pb-4 px-1 border-b-2 font-medium transition-colors ${a==="flows"?"border-green-500 text-green-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:["Mis Flujos (",i.length,")"]}),l.jsxs("button",{onClick:()=>s("templates"),className:`pb-4 px-1 border-b-2 font-medium transition-colors ${a==="templates"?"border-green-500 text-green-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:["Plantillas (",u.length,")"]}),l.jsxs("button",{onClick:()=>s("whatsapp"),className:`pb-4 px-1 border-b-2 font-medium transition-colors flex items-center gap-2 ${a==="whatsapp"?"border-green-500 text-green-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[l.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})}),"WhatsApp Templates"]})]})}),a==="flows"&&l.jsx("div",{children:i.length===0?l.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300",children:[l.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),l.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No tienes flujos creados"}),l.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Comienza creando un flujo desde una plantilla"}),l.jsx("div",{className:"mt-6",children:l.jsx("button",{onClick:()=>s("templates"),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:"Ver Plantillas"})})]}):l.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:l.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[l.jsx("thead",{className:"bg-gray-50",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nombre"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estado"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estadsticas"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ltima actualizacin"}),l.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),l.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i.map(H=>l.jsxs("tr",{className:"hover:bg-gray-50",children:[l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsx("div",{className:"flex items-center",children:l.jsxs("div",{children:[l.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[H.name,H.is_default&&l.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800",children:"Por defecto"})]}),H.description&&l.jsx("div",{className:"text-sm text-gray-500",children:H.description})]})})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsx("button",{onClick:()=>I(H),className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium cursor-pointer transition-colors ${H.is_active?"bg-green-100 text-green-800 hover:bg-green-200":"bg-gray-100 text-gray-800 hover:bg-gray-200"}`,children:H.is_active?"Activo":"Inactivo"})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:l.jsxs("div",{className:"flex flex-col space-y-1",children:[l.jsxs("span",{children:["Ejecutado: ",H.times_triggered||0," veces"]}),l.jsxs("span",{children:["Completado: ",H.times_completed||0," veces"]})]})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:H.updated_at?qc(new Date(H.updated_at),"dd MMM yyyy, HH:mm",{locale:Mr}):"-"}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:l.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[l.jsx("button",{onClick:()=>t(`/flows/builder/${H.id}`),className:"text-blue-600 hover:text-blue-900",title:"Editar",children:l.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),l.jsx("button",{onClick:()=>O(H),className:"text-gray-600 hover:text-gray-900",title:"Duplicar",children:l.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})})}),l.jsx("button",{onClick:()=>B(H),className:"text-red-600 hover:text-red-900",title:"Eliminar",children:l.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})})]},H.id))})]})})}),a==="templates"&&l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:u.map(H=>l.jsx("div",{className:"bg-white rounded-lg shadow-md hover:shadow-lg transition-shadow overflow-hidden border border-gray-200",children:l.jsxs("div",{className:"p-6",children:[l.jsxs("div",{className:"flex items-start justify-between mb-3",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:H.name}),l.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${q(H.category)}`,children:H.category})]}),l.jsx("p",{className:"text-sm text-gray-600 mb-4 line-clamp-2",children:H.description}),l.jsxs("div",{className:"flex items-center text-sm text-gray-500 mb-4",children:[l.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"})}),l.jsxs("span",{children:[H.nodes_count," nodos"]})]}),H.features&&H.features.length>0&&l.jsx("div",{className:"flex flex-wrap gap-1 mb-4",children:H.features.map(W=>l.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-purple-50 text-purple-700 border border-purple-200",children:W},W))}),l.jsx("button",{onClick:()=>U(H.id,H.name),className:"w-full px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors font-medium",children:"Crear desde esta plantilla"})]})},H.id))}),a==="whatsapp"&&l.jsxs("div",{children:[l.jsxs("div",{className:"mb-6 flex flex-wrap gap-4 items-center",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Estado"}),l.jsxs("select",{value:x.status,onChange:H=>b({...x,status:H.target.value}),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-green-500 focus:border-green-500",children:[l.jsx("option",{value:"",children:"Todos"}),l.jsx("option",{value:"APPROVED",children:"Aprobadas"}),l.jsx("option",{value:"PENDING",children:"Pendientes"}),l.jsx("option",{value:"REJECTED",children:"Rechazadas"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Categora"}),l.jsxs("select",{value:x.category,onChange:H=>b({...x,category:H.target.value}),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-green-500 focus:border-green-500",children:[l.jsx("option",{value:"",children:"Todas"}),l.jsx("option",{value:"MARKETING",children:"Marketing"}),l.jsx("option",{value:"UTILITY",children:"Utilidad"}),l.jsx("option",{value:"AUTHENTICATION",children:"Autenticacin"})]})]}),l.jsx("div",{className:"flex-1"}),l.jsxs("div",{className:"text-sm text-gray-500",children:[m.length," plantillas encontradas"]})]}),g?l.jsxs("div",{className:"flex items-center justify-center py-12",children:[l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-green-500"}),l.jsx("span",{className:"ml-3 text-gray-600",children:"Cargando plantillas de Meta..."})]}):m.length===0?l.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300",children:[l.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),l.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No se encontraron plantillas"}),l.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Ajusta los filtros o crea plantillas en Meta Business Suite"})]}):l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:m.map((H,W)=>{const Y=H.components?.find(ue=>ue.type==="BODY")?.text||"",Z={APPROVED:"bg-green-100 text-green-800",PENDING:"bg-yellow-100 text-yellow-800",REJECTED:"bg-red-100 text-red-800"},ae={MARKETING:"bg-blue-100 text-blue-800",UTILITY:"bg-purple-100 text-purple-800",AUTHENTICATION:"bg-pink-100 text-pink-800"};return l.jsx("div",{className:"bg-white rounded-lg shadow-md hover:shadow-lg transition-shadow overflow-hidden border border-gray-200",children:l.jsxs("div",{className:"p-5",children:[l.jsx("div",{className:"flex items-start justify-between mb-3",children:l.jsx("h3",{className:"text-base font-semibold text-gray-900 font-mono",children:H.name})}),l.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[l.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded text-xs font-medium ${Z[H.status]||"bg-gray-100 text-gray-800"}`,children:H.status}),l.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded text-xs font-medium ${ae[H.category]||"bg-gray-100 text-gray-800"}`,children:H.category}),l.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-gray-100 text-gray-800",children:H.language})]}),l.jsx("div",{className:"bg-gray-50 rounded-lg p-3 mb-4 max-h-32 overflow-y-auto",children:l.jsx("p",{className:"text-sm text-gray-700 whitespace-pre-wrap",children:Y.length>200?Y.substring(0,200)+"...":Y||"(Sin contenido)"})}),l.jsx("button",{onClick:()=>j(H),disabled:H.status!=="APPROVED",className:`w-full px-4 py-2 rounded-lg font-medium transition-colors ${H.status==="APPROVED"?"bg-green-600 text-white hover:bg-green-700":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:H.status==="APPROVED"?"Probar Plantilla":"No disponible"})]})},`${H.name}-${H.language}-${W}`)})})]}),S&&l.jsx(L_,{template:S,onClose:()=>j(null)})]})}function ct(t){if(typeof t=="string"||typeof t=="number")return""+t;let a="";if(Array.isArray(t))for(let s=0,i;s<t.length;s++)(i=ct(t[s]))!==""&&(a+=(a&&" ")+i);else for(let s in t)t[s]&&(a+=(a&&" ")+s);return a}var $_={value:()=>{}};function Gc(){for(var t=0,a=arguments.length,s={},i;t<a;++t){if(!(i=arguments[t]+"")||i in s||/[\s.]/.test(i))throw new Error("illegal type: "+i);s[i]=[]}return new hc(s)}function hc(t){this._=t}function q_(t,a){return t.trim().split(/^|\s+/).map(function(s){var i="",c=s.indexOf(".");if(c>=0&&(i=s.slice(c+1),s=s.slice(0,c)),s&&!a.hasOwnProperty(s))throw new Error("unknown type: "+s);return{type:s,name:i}})}hc.prototype=Gc.prototype={constructor:hc,on:function(t,a){var s=this._,i=q_(t+"",s),c,u=-1,f=i.length;if(arguments.length<2){for(;++u<f;)if((c=(t=i[u]).type)&&(c=V_(s[c],t.name)))return c;return}if(a!=null&&typeof a!="function")throw new Error("invalid callback: "+a);for(;++u<f;)if(c=(t=i[u]).type)s[c]=jx(s[c],t.name,a);else if(a==null)for(c in s)s[c]=jx(s[c],t.name,null);return this},copy:function(){var t={},a=this._;for(var s in a)t[s]=a[s].slice();return new hc(t)},call:function(t,a){if((c=arguments.length-2)>0)for(var s=new Array(c),i=0,c,u;i<c;++i)s[i]=arguments[i+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(u=this._[t],i=0,c=u.length;i<c;++i)u[i].value.apply(a,s)},apply:function(t,a,s){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],c=0,u=i.length;c<u;++c)i[c].value.apply(a,s)}};function V_(t,a){for(var s=0,i=t.length,c;s<i;++s)if((c=t[s]).name===a)return c.value}function jx(t,a,s){for(var i=0,c=t.length;i<c;++i)if(t[i].name===a){t[i]=$_,t=t.slice(0,i).concat(t.slice(i+1));break}return s!=null&&t.push({name:a,value:s}),t}var ih="http://www.w3.org/1999/xhtml";const Ex={svg:"http://www.w3.org/2000/svg",xhtml:ih,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Ic(t){var a=t+="",s=a.indexOf(":");return s>=0&&(a=t.slice(0,s))!=="xmlns"&&(t=t.slice(s+1)),Ex.hasOwnProperty(a)?{space:Ex[a],local:t}:t}function Y_(t){return function(){var a=this.ownerDocument,s=this.namespaceURI;return s===ih&&a.documentElement.namespaceURI===ih?a.createElement(t):a.createElementNS(s,t)}}function X_(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function kb(t){var a=Ic(t);return(a.local?X_:Y_)(a)}function G_(){}function $h(t){return t==null?G_:function(){return this.querySelector(t)}}function I_(t){typeof t!="function"&&(t=$h(t));for(var a=this._groups,s=a.length,i=new Array(s),c=0;c<s;++c)for(var u=a[c],f=u.length,m=i[c]=new Array(f),p,g,y=0;y<f;++y)(p=u[y])&&(g=t.call(p,p.__data__,y,u))&&("__data__"in p&&(g.__data__=p.__data__),m[y]=g);return new Pt(i,this._parents)}function P_(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function Z_(){return[]}function Rb(t){return t==null?Z_:function(){return this.querySelectorAll(t)}}function Q_(t){return function(){return P_(t.apply(this,arguments))}}function F_(t){typeof t=="function"?t=Q_(t):t=Rb(t);for(var a=this._groups,s=a.length,i=[],c=[],u=0;u<s;++u)for(var f=a[u],m=f.length,p,g=0;g<m;++g)(p=f[g])&&(i.push(t.call(p,p.__data__,g,f)),c.push(p));return new Pt(i,c)}function Db(t){return function(){return this.matches(t)}}function zb(t){return function(a){return a.matches(t)}}var W_=Array.prototype.find;function K_(t){return function(){return W_.call(this.children,t)}}function J_(){return this.firstElementChild}function e5(t){return this.select(t==null?J_:K_(typeof t=="function"?t:zb(t)))}var t5=Array.prototype.filter;function n5(){return Array.from(this.children)}function a5(t){return function(){return t5.call(this.children,t)}}function s5(t){return this.selectAll(t==null?n5:a5(typeof t=="function"?t:zb(t)))}function r5(t){typeof t!="function"&&(t=Db(t));for(var a=this._groups,s=a.length,i=new Array(s),c=0;c<s;++c)for(var u=a[c],f=u.length,m=i[c]=[],p,g=0;g<f;++g)(p=u[g])&&t.call(p,p.__data__,g,u)&&m.push(p);return new Pt(i,this._parents)}function Ob(t){return new Array(t.length)}function i5(){return new Pt(this._enter||this._groups.map(Ob),this._parents)}function Ec(t,a){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=a}Ec.prototype={constructor:Ec,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,a){return this._parent.insertBefore(t,a)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function o5(t){return function(){return t}}function l5(t,a,s,i,c,u){for(var f=0,m,p=a.length,g=u.length;f<g;++f)(m=a[f])?(m.__data__=u[f],i[f]=m):s[f]=new Ec(t,u[f]);for(;f<p;++f)(m=a[f])&&(c[f]=m)}function c5(t,a,s,i,c,u,f){var m,p,g=new Map,y=a.length,x=u.length,b=new Array(y),S;for(m=0;m<y;++m)(p=a[m])&&(b[m]=S=f.call(p,p.__data__,m,a)+"",g.has(S)?c[m]=p:g.set(S,p));for(m=0;m<x;++m)S=f.call(t,u[m],m,u)+"",(p=g.get(S))?(i[m]=p,p.__data__=u[m],g.delete(S)):s[m]=new Ec(t,u[m]);for(m=0;m<y;++m)(p=a[m])&&g.get(b[m])===p&&(c[m]=p)}function u5(t){return t.__data__}function d5(t,a){if(!arguments.length)return Array.from(this,u5);var s=a?c5:l5,i=this._parents,c=this._groups;typeof t!="function"&&(t=o5(t));for(var u=c.length,f=new Array(u),m=new Array(u),p=new Array(u),g=0;g<u;++g){var y=i[g],x=c[g],b=x.length,S=f5(t.call(y,y&&y.__data__,g,i)),j=S.length,A=m[g]=new Array(j),N=f[g]=new Array(j),E=p[g]=new Array(b);s(y,x,A,N,E,S,a);for(var R=0,C=0,k,w;R<j;++R)if(k=A[R]){for(R>=C&&(C=R+1);!(w=N[C])&&++C<j;);k._next=w||null}}return f=new Pt(f,i),f._enter=m,f._exit=p,f}function f5(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function h5(){return new Pt(this._exit||this._groups.map(Ob),this._parents)}function m5(t,a,s){var i=this.enter(),c=this,u=this.exit();return typeof t=="function"?(i=t(i),i&&(i=i.selection())):i=i.append(t+""),a!=null&&(c=a(c),c&&(c=c.selection())),s==null?u.remove():s(u),i&&c?i.merge(c).order():c}function p5(t){for(var a=t.selection?t.selection():t,s=this._groups,i=a._groups,c=s.length,u=i.length,f=Math.min(c,u),m=new Array(c),p=0;p<f;++p)for(var g=s[p],y=i[p],x=g.length,b=m[p]=new Array(x),S,j=0;j<x;++j)(S=g[j]||y[j])&&(b[j]=S);for(;p<c;++p)m[p]=s[p];return new Pt(m,this._parents)}function g5(){for(var t=this._groups,a=-1,s=t.length;++a<s;)for(var i=t[a],c=i.length-1,u=i[c],f;--c>=0;)(f=i[c])&&(u&&f.compareDocumentPosition(u)^4&&u.parentNode.insertBefore(f,u),u=f);return this}function x5(t){t||(t=y5);function a(x,b){return x&&b?t(x.__data__,b.__data__):!x-!b}for(var s=this._groups,i=s.length,c=new Array(i),u=0;u<i;++u){for(var f=s[u],m=f.length,p=c[u]=new Array(m),g,y=0;y<m;++y)(g=f[y])&&(p[y]=g);p.sort(a)}return new Pt(c,this._parents).order()}function y5(t,a){return t<a?-1:t>a?1:t>=a?0:NaN}function b5(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function v5(){return Array.from(this)}function w5(){for(var t=this._groups,a=0,s=t.length;a<s;++a)for(var i=t[a],c=0,u=i.length;c<u;++c){var f=i[c];if(f)return f}return null}function S5(){let t=0;for(const a of this)++t;return t}function N5(){return!this.node()}function j5(t){for(var a=this._groups,s=0,i=a.length;s<i;++s)for(var c=a[s],u=0,f=c.length,m;u<f;++u)(m=c[u])&&t.call(m,m.__data__,u,c);return this}function E5(t){return function(){this.removeAttribute(t)}}function _5(t){return function(){this.removeAttributeNS(t.space,t.local)}}function C5(t,a){return function(){this.setAttribute(t,a)}}function T5(t,a){return function(){this.setAttributeNS(t.space,t.local,a)}}function M5(t,a){return function(){var s=a.apply(this,arguments);s==null?this.removeAttribute(t):this.setAttribute(t,s)}}function A5(t,a){return function(){var s=a.apply(this,arguments);s==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,s)}}function k5(t,a){var s=Ic(t);if(arguments.length<2){var i=this.node();return s.local?i.getAttributeNS(s.space,s.local):i.getAttribute(s)}return this.each((a==null?s.local?_5:E5:typeof a=="function"?s.local?A5:M5:s.local?T5:C5)(s,a))}function Bb(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function R5(t){return function(){this.style.removeProperty(t)}}function D5(t,a,s){return function(){this.style.setProperty(t,a,s)}}function z5(t,a,s){return function(){var i=a.apply(this,arguments);i==null?this.style.removeProperty(t):this.style.setProperty(t,i,s)}}function O5(t,a,s){return arguments.length>1?this.each((a==null?R5:typeof a=="function"?z5:D5)(t,a,s??"")):Ar(this.node(),t)}function Ar(t,a){return t.style.getPropertyValue(a)||Bb(t).getComputedStyle(t,null).getPropertyValue(a)}function B5(t){return function(){delete this[t]}}function H5(t,a){return function(){this[t]=a}}function L5(t,a){return function(){var s=a.apply(this,arguments);s==null?delete this[t]:this[t]=s}}function U5(t,a){return arguments.length>1?this.each((a==null?B5:typeof a=="function"?L5:H5)(t,a)):this.node()[t]}function Hb(t){return t.trim().split(/^|\s+/)}function qh(t){return t.classList||new Lb(t)}function Lb(t){this._node=t,this._names=Hb(t.getAttribute("class")||"")}Lb.prototype={add:function(t){var a=this._names.indexOf(t);a<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var a=this._names.indexOf(t);a>=0&&(this._names.splice(a,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function Ub(t,a){for(var s=qh(t),i=-1,c=a.length;++i<c;)s.add(a[i])}function $b(t,a){for(var s=qh(t),i=-1,c=a.length;++i<c;)s.remove(a[i])}function $5(t){return function(){Ub(this,t)}}function q5(t){return function(){$b(this,t)}}function V5(t,a){return function(){(a.apply(this,arguments)?Ub:$b)(this,t)}}function Y5(t,a){var s=Hb(t+"");if(arguments.length<2){for(var i=qh(this.node()),c=-1,u=s.length;++c<u;)if(!i.contains(s[c]))return!1;return!0}return this.each((typeof a=="function"?V5:a?$5:q5)(s,a))}function X5(){this.textContent=""}function G5(t){return function(){this.textContent=t}}function I5(t){return function(){var a=t.apply(this,arguments);this.textContent=a??""}}function P5(t){return arguments.length?this.each(t==null?X5:(typeof t=="function"?I5:G5)(t)):this.node().textContent}function Z5(){this.innerHTML=""}function Q5(t){return function(){this.innerHTML=t}}function F5(t){return function(){var a=t.apply(this,arguments);this.innerHTML=a??""}}function W5(t){return arguments.length?this.each(t==null?Z5:(typeof t=="function"?F5:Q5)(t)):this.node().innerHTML}function K5(){this.nextSibling&&this.parentNode.appendChild(this)}function J5(){return this.each(K5)}function e3(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function t3(){return this.each(e3)}function n3(t){var a=typeof t=="function"?t:kb(t);return this.select(function(){return this.appendChild(a.apply(this,arguments))})}function a3(){return null}function s3(t,a){var s=typeof t=="function"?t:kb(t),i=a==null?a3:typeof a=="function"?a:$h(a);return this.select(function(){return this.insertBefore(s.apply(this,arguments),i.apply(this,arguments)||null)})}function r3(){var t=this.parentNode;t&&t.removeChild(this)}function i3(){return this.each(r3)}function o3(){var t=this.cloneNode(!1),a=this.parentNode;return a?a.insertBefore(t,this.nextSibling):t}function l3(){var t=this.cloneNode(!0),a=this.parentNode;return a?a.insertBefore(t,this.nextSibling):t}function c3(t){return this.select(t?l3:o3)}function u3(t){return arguments.length?this.property("__data__",t):this.node().__data__}function d3(t){return function(a){t.call(this,a,this.__data__)}}function f3(t){return t.trim().split(/^|\s+/).map(function(a){var s="",i=a.indexOf(".");return i>=0&&(s=a.slice(i+1),a=a.slice(0,i)),{type:a,name:s}})}function h3(t){return function(){var a=this.__on;if(a){for(var s=0,i=-1,c=a.length,u;s<c;++s)u=a[s],(!t.type||u.type===t.type)&&u.name===t.name?this.removeEventListener(u.type,u.listener,u.options):a[++i]=u;++i?a.length=i:delete this.__on}}}function m3(t,a,s){return function(){var i=this.__on,c,u=d3(a);if(i){for(var f=0,m=i.length;f<m;++f)if((c=i[f]).type===t.type&&c.name===t.name){this.removeEventListener(c.type,c.listener,c.options),this.addEventListener(c.type,c.listener=u,c.options=s),c.value=a;return}}this.addEventListener(t.type,u,s),c={type:t.type,name:t.name,value:a,listener:u,options:s},i?i.push(c):this.__on=[c]}}function p3(t,a,s){var i=f3(t+""),c,u=i.length,f;if(arguments.length<2){var m=this.node().__on;if(m){for(var p=0,g=m.length,y;p<g;++p)for(c=0,y=m[p];c<u;++c)if((f=i[c]).type===y.type&&f.name===y.name)return y.value}return}for(m=a?m3:h3,c=0;c<u;++c)this.each(m(i[c],a,s));return this}function qb(t,a,s){var i=Bb(t),c=i.CustomEvent;typeof c=="function"?c=new c(a,s):(c=i.document.createEvent("Event"),s?(c.initEvent(a,s.bubbles,s.cancelable),c.detail=s.detail):c.initEvent(a,!1,!1)),t.dispatchEvent(c)}function g3(t,a){return function(){return qb(this,t,a)}}function x3(t,a){return function(){return qb(this,t,a.apply(this,arguments))}}function y3(t,a){return this.each((typeof a=="function"?x3:g3)(t,a))}function*b3(){for(var t=this._groups,a=0,s=t.length;a<s;++a)for(var i=t[a],c=0,u=i.length,f;c<u;++c)(f=i[c])&&(yield f)}var Vb=[null];function Pt(t,a){this._groups=t,this._parents=a}function fo(){return new Pt([[document.documentElement]],Vb)}function v3(){return this}Pt.prototype=fo.prototype={constructor:Pt,select:I_,selectAll:F_,selectChild:e5,selectChildren:s5,filter:r5,data:d5,enter:i5,exit:h5,join:m5,merge:p5,selection:v3,order:g5,sort:x5,call:b5,nodes:v5,node:w5,size:S5,empty:N5,each:j5,attr:k5,style:O5,property:U5,classed:Y5,text:P5,html:W5,raise:J5,lower:t3,append:n3,insert:s3,remove:i3,clone:c3,datum:u3,on:p3,dispatch:y3,[Symbol.iterator]:b3};function Gt(t){return typeof t=="string"?new Pt([[document.querySelector(t)]],[document.documentElement]):new Pt([[t]],Vb)}function w3(t){let a;for(;a=t.sourceEvent;)t=a;return t}function pn(t,a){if(t=w3(t),a===void 0&&(a=t.currentTarget),a){var s=a.ownerSVGElement||a;if(s.createSVGPoint){var i=s.createSVGPoint();return i.x=t.clientX,i.y=t.clientY,i=i.matrixTransform(a.getScreenCTM().inverse()),[i.x,i.y]}if(a.getBoundingClientRect){var c=a.getBoundingClientRect();return[t.clientX-c.left-a.clientLeft,t.clientY-c.top-a.clientTop]}}return[t.pageX,t.pageY]}const S3={passive:!1},Wi={capture:!0,passive:!1};function zf(t){t.stopImmediatePropagation()}function jr(t){t.preventDefault(),t.stopImmediatePropagation()}function Yb(t){var a=t.document.documentElement,s=Gt(t).on("dragstart.drag",jr,Wi);"onselectstart"in a?s.on("selectstart.drag",jr,Wi):(a.__noselect=a.style.MozUserSelect,a.style.MozUserSelect="none")}function Xb(t,a){var s=t.document.documentElement,i=Gt(t).on("dragstart.drag",null);a&&(i.on("click.drag",jr,Wi),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in s?i.on("selectstart.drag",null):(s.style.MozUserSelect=s.__noselect,delete s.__noselect)}const Zl=t=>()=>t;function oh(t,{sourceEvent:a,subject:s,target:i,identifier:c,active:u,x:f,y:m,dx:p,dy:g,dispatch:y}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:a,enumerable:!0,configurable:!0},subject:{value:s,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:c,enumerable:!0,configurable:!0},active:{value:u,enumerable:!0,configurable:!0},x:{value:f,enumerable:!0,configurable:!0},y:{value:m,enumerable:!0,configurable:!0},dx:{value:p,enumerable:!0,configurable:!0},dy:{value:g,enumerable:!0,configurable:!0},_:{value:y}})}oh.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function N3(t){return!t.ctrlKey&&!t.button}function j3(){return this.parentNode}function E3(t,a){return a??{x:t.x,y:t.y}}function _3(){return navigator.maxTouchPoints||"ontouchstart"in this}function Gb(){var t=N3,a=j3,s=E3,i=_3,c={},u=Gc("start","drag","end"),f=0,m,p,g,y,x=0;function b(k){k.on("mousedown.drag",S).filter(i).on("touchstart.drag",N).on("touchmove.drag",E,S3).on("touchend.drag touchcancel.drag",R).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function S(k,w){if(!(y||!t.call(this,k,w))){var D=C(this,a.call(this,k,w),k,w,"mouse");D&&(Gt(k.view).on("mousemove.drag",j,Wi).on("mouseup.drag",A,Wi),Yb(k.view),zf(k),g=!1,m=k.clientX,p=k.clientY,D("start",k))}}function j(k){if(jr(k),!g){var w=k.clientX-m,D=k.clientY-p;g=w*w+D*D>x}c.mouse("drag",k)}function A(k){Gt(k.view).on("mousemove.drag mouseup.drag",null),Xb(k.view,g),jr(k),c.mouse("end",k)}function N(k,w){if(t.call(this,k,w)){var D=k.changedTouches,M=a.call(this,k,w),V=D.length,L,se;for(L=0;L<V;++L)(se=C(this,M,k,w,D[L].identifier,D[L]))&&(zf(k),se("start",k,D[L]))}}function E(k){var w=k.changedTouches,D=w.length,M,V;for(M=0;M<D;++M)(V=c[w[M].identifier])&&(jr(k),V("drag",k,w[M]))}function R(k){var w=k.changedTouches,D=w.length,M,V;for(y&&clearTimeout(y),y=setTimeout(function(){y=null},500),M=0;M<D;++M)(V=c[w[M].identifier])&&(zf(k),V("end",k,w[M]))}function C(k,w,D,M,V,L){var se=u.copy(),Q=pn(L||D,w),F,te,U;if((U=s.call(k,new oh("beforestart",{sourceEvent:D,target:b,identifier:V,active:f,x:Q[0],y:Q[1],dx:0,dy:0,dispatch:se}),M))!=null)return F=U.x-Q[0]||0,te=U.y-Q[1]||0,function I(O,B,q){var H=Q,W;switch(O){case"start":c[V]=I,W=f++;break;case"end":delete c[V],--f;case"drag":Q=pn(q||B,w),W=f;break}se.call(O,k,new oh(O,{sourceEvent:B,subject:U,target:b,identifier:V,active:W,x:Q[0]+F,y:Q[1]+te,dx:Q[0]-H[0],dy:Q[1]-H[1],dispatch:se}),M)}}return b.filter=function(k){return arguments.length?(t=typeof k=="function"?k:Zl(!!k),b):t},b.container=function(k){return arguments.length?(a=typeof k=="function"?k:Zl(k),b):a},b.subject=function(k){return arguments.length?(s=typeof k=="function"?k:Zl(k),b):s},b.touchable=function(k){return arguments.length?(i=typeof k=="function"?k:Zl(!!k),b):i},b.on=function(){var k=u.on.apply(u,arguments);return k===u?b:k},b.clickDistance=function(k){return arguments.length?(x=(k=+k)*k,b):Math.sqrt(x)},b}function Vh(t,a,s){t.prototype=a.prototype=s,s.constructor=t}function Ib(t,a){var s=Object.create(t.prototype);for(var i in a)s[i]=a[i];return s}function ho(){}var Ki=.7,_c=1/Ki,Er="\\s*([+-]?\\d+)\\s*",Ji="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",kn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",C3=/^#([0-9a-f]{3,8})$/,T3=new RegExp(`^rgb\\(${Er},${Er},${Er}\\)$`),M3=new RegExp(`^rgb\\(${kn},${kn},${kn}\\)$`),A3=new RegExp(`^rgba\\(${Er},${Er},${Er},${Ji}\\)$`),k3=new RegExp(`^rgba\\(${kn},${kn},${kn},${Ji}\\)$`),R3=new RegExp(`^hsl\\(${Ji},${kn},${kn}\\)$`),D3=new RegExp(`^hsla\\(${Ji},${kn},${kn},${Ji}\\)$`),_x={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Vh(ho,js,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Cx,formatHex:Cx,formatHex8:z3,formatHsl:O3,formatRgb:Tx,toString:Tx});function Cx(){return this.rgb().formatHex()}function z3(){return this.rgb().formatHex8()}function O3(){return Pb(this).formatHsl()}function Tx(){return this.rgb().formatRgb()}function js(t){var a,s;return t=(t+"").trim().toLowerCase(),(a=C3.exec(t))?(s=a[1].length,a=parseInt(a[1],16),s===6?Mx(a):s===3?new Bt(a>>8&15|a>>4&240,a>>4&15|a&240,(a&15)<<4|a&15,1):s===8?Ql(a>>24&255,a>>16&255,a>>8&255,(a&255)/255):s===4?Ql(a>>12&15|a>>8&240,a>>8&15|a>>4&240,a>>4&15|a&240,((a&15)<<4|a&15)/255):null):(a=T3.exec(t))?new Bt(a[1],a[2],a[3],1):(a=M3.exec(t))?new Bt(a[1]*255/100,a[2]*255/100,a[3]*255/100,1):(a=A3.exec(t))?Ql(a[1],a[2],a[3],a[4]):(a=k3.exec(t))?Ql(a[1]*255/100,a[2]*255/100,a[3]*255/100,a[4]):(a=R3.exec(t))?Rx(a[1],a[2]/100,a[3]/100,1):(a=D3.exec(t))?Rx(a[1],a[2]/100,a[3]/100,a[4]):_x.hasOwnProperty(t)?Mx(_x[t]):t==="transparent"?new Bt(NaN,NaN,NaN,0):null}function Mx(t){return new Bt(t>>16&255,t>>8&255,t&255,1)}function Ql(t,a,s,i){return i<=0&&(t=a=s=NaN),new Bt(t,a,s,i)}function B3(t){return t instanceof ho||(t=js(t)),t?(t=t.rgb(),new Bt(t.r,t.g,t.b,t.opacity)):new Bt}function lh(t,a,s,i){return arguments.length===1?B3(t):new Bt(t,a,s,i??1)}function Bt(t,a,s,i){this.r=+t,this.g=+a,this.b=+s,this.opacity=+i}Vh(Bt,lh,Ib(ho,{brighter(t){return t=t==null?_c:Math.pow(_c,t),new Bt(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Ki:Math.pow(Ki,t),new Bt(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Bt(Ss(this.r),Ss(this.g),Ss(this.b),Cc(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Ax,formatHex:Ax,formatHex8:H3,formatRgb:kx,toString:kx}));function Ax(){return`#${vs(this.r)}${vs(this.g)}${vs(this.b)}`}function H3(){return`#${vs(this.r)}${vs(this.g)}${vs(this.b)}${vs((isNaN(this.opacity)?1:this.opacity)*255)}`}function kx(){const t=Cc(this.opacity);return`${t===1?"rgb(":"rgba("}${Ss(this.r)}, ${Ss(this.g)}, ${Ss(this.b)}${t===1?")":`, ${t})`}`}function Cc(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Ss(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function vs(t){return t=Ss(t),(t<16?"0":"")+t.toString(16)}function Rx(t,a,s,i){return i<=0?t=a=s=NaN:s<=0||s>=1?t=a=NaN:a<=0&&(t=NaN),new gn(t,a,s,i)}function Pb(t){if(t instanceof gn)return new gn(t.h,t.s,t.l,t.opacity);if(t instanceof ho||(t=js(t)),!t)return new gn;if(t instanceof gn)return t;t=t.rgb();var a=t.r/255,s=t.g/255,i=t.b/255,c=Math.min(a,s,i),u=Math.max(a,s,i),f=NaN,m=u-c,p=(u+c)/2;return m?(a===u?f=(s-i)/m+(s<i)*6:s===u?f=(i-a)/m+2:f=(a-s)/m+4,m/=p<.5?u+c:2-u-c,f*=60):m=p>0&&p<1?0:f,new gn(f,m,p,t.opacity)}function L3(t,a,s,i){return arguments.length===1?Pb(t):new gn(t,a,s,i??1)}function gn(t,a,s,i){this.h=+t,this.s=+a,this.l=+s,this.opacity=+i}Vh(gn,L3,Ib(ho,{brighter(t){return t=t==null?_c:Math.pow(_c,t),new gn(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Ki:Math.pow(Ki,t),new gn(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,a=isNaN(t)||isNaN(this.s)?0:this.s,s=this.l,i=s+(s<.5?s:1-s)*a,c=2*s-i;return new Bt(Of(t>=240?t-240:t+120,c,i),Of(t,c,i),Of(t<120?t+240:t-120,c,i),this.opacity)},clamp(){return new gn(Dx(this.h),Fl(this.s),Fl(this.l),Cc(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Cc(this.opacity);return`${t===1?"hsl(":"hsla("}${Dx(this.h)}, ${Fl(this.s)*100}%, ${Fl(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Dx(t){return t=(t||0)%360,t<0?t+360:t}function Fl(t){return Math.max(0,Math.min(1,t||0))}function Of(t,a,s){return(t<60?a+(s-a)*t/60:t<180?s:t<240?a+(s-a)*(240-t)/60:a)*255}const Yh=t=>()=>t;function U3(t,a){return function(s){return t+s*a}}function $3(t,a,s){return t=Math.pow(t,s),a=Math.pow(a,s)-t,s=1/s,function(i){return Math.pow(t+i*a,s)}}function q3(t){return(t=+t)==1?Zb:function(a,s){return s-a?$3(a,s,t):Yh(isNaN(a)?s:a)}}function Zb(t,a){var s=a-t;return s?U3(t,s):Yh(isNaN(t)?a:t)}const Tc=(function t(a){var s=q3(a);function i(c,u){var f=s((c=lh(c)).r,(u=lh(u)).r),m=s(c.g,u.g),p=s(c.b,u.b),g=Zb(c.opacity,u.opacity);return function(y){return c.r=f(y),c.g=m(y),c.b=p(y),c.opacity=g(y),c+""}}return i.gamma=t,i})(1);function V3(t,a){a||(a=[]);var s=t?Math.min(a.length,t.length):0,i=a.slice(),c;return function(u){for(c=0;c<s;++c)i[c]=t[c]*(1-u)+a[c]*u;return i}}function Y3(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function X3(t,a){var s=a?a.length:0,i=t?Math.min(s,t.length):0,c=new Array(i),u=new Array(s),f;for(f=0;f<i;++f)c[f]=Pi(t[f],a[f]);for(;f<s;++f)u[f]=a[f];return function(m){for(f=0;f<i;++f)u[f]=c[f](m);return u}}function G3(t,a){var s=new Date;return t=+t,a=+a,function(i){return s.setTime(t*(1-i)+a*i),s}}function Cn(t,a){return t=+t,a=+a,function(s){return t*(1-s)+a*s}}function I3(t,a){var s={},i={},c;(t===null||typeof t!="object")&&(t={}),(a===null||typeof a!="object")&&(a={});for(c in a)c in t?s[c]=Pi(t[c],a[c]):i[c]=a[c];return function(u){for(c in s)i[c]=s[c](u);return i}}var ch=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Bf=new RegExp(ch.source,"g");function P3(t){return function(){return t}}function Z3(t){return function(a){return t(a)+""}}function Qb(t,a){var s=ch.lastIndex=Bf.lastIndex=0,i,c,u,f=-1,m=[],p=[];for(t=t+"",a=a+"";(i=ch.exec(t))&&(c=Bf.exec(a));)(u=c.index)>s&&(u=a.slice(s,u),m[f]?m[f]+=u:m[++f]=u),(i=i[0])===(c=c[0])?m[f]?m[f]+=c:m[++f]=c:(m[++f]=null,p.push({i:f,x:Cn(i,c)})),s=Bf.lastIndex;return s<a.length&&(u=a.slice(s),m[f]?m[f]+=u:m[++f]=u),m.length<2?p[0]?Z3(p[0].x):P3(a):(a=p.length,function(g){for(var y=0,x;y<a;++y)m[(x=p[y]).i]=x.x(g);return m.join("")})}function Pi(t,a){var s=typeof a,i;return a==null||s==="boolean"?Yh(a):(s==="number"?Cn:s==="string"?(i=js(a))?(a=i,Tc):Qb:a instanceof js?Tc:a instanceof Date?G3:Y3(a)?V3:Array.isArray(a)?X3:typeof a.valueOf!="function"&&typeof a.toString!="function"||isNaN(a)?I3:Cn)(t,a)}var zx=180/Math.PI,uh={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Fb(t,a,s,i,c,u){var f,m,p;return(f=Math.sqrt(t*t+a*a))&&(t/=f,a/=f),(p=t*s+a*i)&&(s-=t*p,i-=a*p),(m=Math.sqrt(s*s+i*i))&&(s/=m,i/=m,p/=m),t*i<a*s&&(t=-t,a=-a,p=-p,f=-f),{translateX:c,translateY:u,rotate:Math.atan2(a,t)*zx,skewX:Math.atan(p)*zx,scaleX:f,scaleY:m}}var Wl;function Q3(t){const a=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return a.isIdentity?uh:Fb(a.a,a.b,a.c,a.d,a.e,a.f)}function F3(t){return t==null||(Wl||(Wl=document.createElementNS("http://www.w3.org/2000/svg","g")),Wl.setAttribute("transform",t),!(t=Wl.transform.baseVal.consolidate()))?uh:(t=t.matrix,Fb(t.a,t.b,t.c,t.d,t.e,t.f))}function Wb(t,a,s,i){function c(g){return g.length?g.pop()+" ":""}function u(g,y,x,b,S,j){if(g!==x||y!==b){var A=S.push("translate(",null,a,null,s);j.push({i:A-4,x:Cn(g,x)},{i:A-2,x:Cn(y,b)})}else(x||b)&&S.push("translate("+x+a+b+s)}function f(g,y,x,b){g!==y?(g-y>180?y+=360:y-g>180&&(g+=360),b.push({i:x.push(c(x)+"rotate(",null,i)-2,x:Cn(g,y)})):y&&x.push(c(x)+"rotate("+y+i)}function m(g,y,x,b){g!==y?b.push({i:x.push(c(x)+"skewX(",null,i)-2,x:Cn(g,y)}):y&&x.push(c(x)+"skewX("+y+i)}function p(g,y,x,b,S,j){if(g!==x||y!==b){var A=S.push(c(S)+"scale(",null,",",null,")");j.push({i:A-4,x:Cn(g,x)},{i:A-2,x:Cn(y,b)})}else(x!==1||b!==1)&&S.push(c(S)+"scale("+x+","+b+")")}return function(g,y){var x=[],b=[];return g=t(g),y=t(y),u(g.translateX,g.translateY,y.translateX,y.translateY,x,b),f(g.rotate,y.rotate,x,b),m(g.skewX,y.skewX,x,b),p(g.scaleX,g.scaleY,y.scaleX,y.scaleY,x,b),g=y=null,function(S){for(var j=-1,A=b.length,N;++j<A;)x[(N=b[j]).i]=N.x(S);return x.join("")}}}var W3=Wb(Q3,"px, ","px)","deg)"),K3=Wb(F3,", ",")",")"),J3=1e-12;function Ox(t){return((t=Math.exp(t))+1/t)/2}function e6(t){return((t=Math.exp(t))-1/t)/2}function t6(t){return((t=Math.exp(2*t))-1)/(t+1)}const mc=(function t(a,s,i){function c(u,f){var m=u[0],p=u[1],g=u[2],y=f[0],x=f[1],b=f[2],S=y-m,j=x-p,A=S*S+j*j,N,E;if(A<J3)E=Math.log(b/g)/a,N=function(M){return[m+M*S,p+M*j,g*Math.exp(a*M*E)]};else{var R=Math.sqrt(A),C=(b*b-g*g+i*A)/(2*g*s*R),k=(b*b-g*g-i*A)/(2*b*s*R),w=Math.log(Math.sqrt(C*C+1)-C),D=Math.log(Math.sqrt(k*k+1)-k);E=(D-w)/a,N=function(M){var V=M*E,L=Ox(w),se=g/(s*R)*(L*t6(a*V+w)-e6(w));return[m+se*S,p+se*j,g*L/Ox(a*V+w)]}}return N.duration=E*1e3*a/Math.SQRT2,N}return c.rho=function(u){var f=Math.max(.001,+u),m=f*f,p=m*m;return t(f,m,p)},c})(Math.SQRT2,2,4);var kr=0,Gi=0,qi=0,Kb=1e3,Mc,Ii,Ac=0,Es=0,Pc=0,eo=typeof performance=="object"&&performance.now?performance:Date,Jb=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Xh(){return Es||(Jb(n6),Es=eo.now()+Pc)}function n6(){Es=0}function kc(){this._call=this._time=this._next=null}kc.prototype=e1.prototype={constructor:kc,restart:function(t,a,s){if(typeof t!="function")throw new TypeError("callback is not a function");s=(s==null?Xh():+s)+(a==null?0:+a),!this._next&&Ii!==this&&(Ii?Ii._next=this:Mc=this,Ii=this),this._call=t,this._time=s,dh()},stop:function(){this._call&&(this._call=null,this._time=1/0,dh())}};function e1(t,a,s){var i=new kc;return i.restart(t,a,s),i}function a6(){Xh(),++kr;for(var t=Mc,a;t;)(a=Es-t._time)>=0&&t._call.call(void 0,a),t=t._next;--kr}function Bx(){Es=(Ac=eo.now())+Pc,kr=Gi=0;try{a6()}finally{kr=0,r6(),Es=0}}function s6(){var t=eo.now(),a=t-Ac;a>Kb&&(Pc-=a,Ac=t)}function r6(){for(var t,a=Mc,s,i=1/0;a;)a._call?(i>a._time&&(i=a._time),t=a,a=a._next):(s=a._next,a._next=null,a=t?t._next=s:Mc=s);Ii=t,dh(i)}function dh(t){if(!kr){Gi&&(Gi=clearTimeout(Gi));var a=t-Es;a>24?(t<1/0&&(Gi=setTimeout(Bx,t-eo.now()-Pc)),qi&&(qi=clearInterval(qi))):(qi||(Ac=eo.now(),qi=setInterval(s6,Kb)),kr=1,Jb(Bx))}}function Hx(t,a,s){var i=new kc;return a=a==null?0:+a,i.restart(c=>{i.stop(),t(c+a)},a,s),i}var i6=Gc("start","end","cancel","interrupt"),o6=[],t1=0,Lx=1,fh=2,pc=3,Ux=4,hh=5,gc=6;function Zc(t,a,s,i,c,u){var f=t.__transition;if(!f)t.__transition={};else if(s in f)return;l6(t,s,{name:a,index:i,group:c,on:i6,tween:o6,time:u.time,delay:u.delay,duration:u.duration,ease:u.ease,timer:null,state:t1})}function Gh(t,a){var s=bn(t,a);if(s.state>t1)throw new Error("too late; already scheduled");return s}function zn(t,a){var s=bn(t,a);if(s.state>pc)throw new Error("too late; already running");return s}function bn(t,a){var s=t.__transition;if(!s||!(s=s[a]))throw new Error("transition not found");return s}function l6(t,a,s){var i=t.__transition,c;i[a]=s,s.timer=e1(u,0,s.time);function u(g){s.state=Lx,s.timer.restart(f,s.delay,s.time),s.delay<=g&&f(g-s.delay)}function f(g){var y,x,b,S;if(s.state!==Lx)return p();for(y in i)if(S=i[y],S.name===s.name){if(S.state===pc)return Hx(f);S.state===Ux?(S.state=gc,S.timer.stop(),S.on.call("interrupt",t,t.__data__,S.index,S.group),delete i[y]):+y<a&&(S.state=gc,S.timer.stop(),S.on.call("cancel",t,t.__data__,S.index,S.group),delete i[y])}if(Hx(function(){s.state===pc&&(s.state=Ux,s.timer.restart(m,s.delay,s.time),m(g))}),s.state=fh,s.on.call("start",t,t.__data__,s.index,s.group),s.state===fh){for(s.state=pc,c=new Array(b=s.tween.length),y=0,x=-1;y<b;++y)(S=s.tween[y].value.call(t,t.__data__,s.index,s.group))&&(c[++x]=S);c.length=x+1}}function m(g){for(var y=g<s.duration?s.ease.call(null,g/s.duration):(s.timer.restart(p),s.state=hh,1),x=-1,b=c.length;++x<b;)c[x].call(t,y);s.state===hh&&(s.on.call("end",t,t.__data__,s.index,s.group),p())}function p(){s.state=gc,s.timer.stop(),delete i[a];for(var g in i)return;delete t.__transition}}function xc(t,a){var s=t.__transition,i,c,u=!0,f;if(s){a=a==null?null:a+"";for(f in s){if((i=s[f]).name!==a){u=!1;continue}c=i.state>fh&&i.state<hh,i.state=gc,i.timer.stop(),i.on.call(c?"interrupt":"cancel",t,t.__data__,i.index,i.group),delete s[f]}u&&delete t.__transition}}function c6(t){return this.each(function(){xc(this,t)})}function u6(t,a){var s,i;return function(){var c=zn(this,t),u=c.tween;if(u!==s){i=s=u;for(var f=0,m=i.length;f<m;++f)if(i[f].name===a){i=i.slice(),i.splice(f,1);break}}c.tween=i}}function d6(t,a,s){var i,c;if(typeof s!="function")throw new Error;return function(){var u=zn(this,t),f=u.tween;if(f!==i){c=(i=f).slice();for(var m={name:a,value:s},p=0,g=c.length;p<g;++p)if(c[p].name===a){c[p]=m;break}p===g&&c.push(m)}u.tween=c}}function f6(t,a){var s=this._id;if(t+="",arguments.length<2){for(var i=bn(this.node(),s).tween,c=0,u=i.length,f;c<u;++c)if((f=i[c]).name===t)return f.value;return null}return this.each((a==null?u6:d6)(s,t,a))}function Ih(t,a,s){var i=t._id;return t.each(function(){var c=zn(this,i);(c.value||(c.value={}))[a]=s.apply(this,arguments)}),function(c){return bn(c,i).value[a]}}function n1(t,a){var s;return(typeof a=="number"?Cn:a instanceof js?Tc:(s=js(a))?(a=s,Tc):Qb)(t,a)}function h6(t){return function(){this.removeAttribute(t)}}function m6(t){return function(){this.removeAttributeNS(t.space,t.local)}}function p6(t,a,s){var i,c=s+"",u;return function(){var f=this.getAttribute(t);return f===c?null:f===i?u:u=a(i=f,s)}}function g6(t,a,s){var i,c=s+"",u;return function(){var f=this.getAttributeNS(t.space,t.local);return f===c?null:f===i?u:u=a(i=f,s)}}function x6(t,a,s){var i,c,u;return function(){var f,m=s(this),p;return m==null?void this.removeAttribute(t):(f=this.getAttribute(t),p=m+"",f===p?null:f===i&&p===c?u:(c=p,u=a(i=f,m)))}}function y6(t,a,s){var i,c,u;return function(){var f,m=s(this),p;return m==null?void this.removeAttributeNS(t.space,t.local):(f=this.getAttributeNS(t.space,t.local),p=m+"",f===p?null:f===i&&p===c?u:(c=p,u=a(i=f,m)))}}function b6(t,a){var s=Ic(t),i=s==="transform"?K3:n1;return this.attrTween(t,typeof a=="function"?(s.local?y6:x6)(s,i,Ih(this,"attr."+t,a)):a==null?(s.local?m6:h6)(s):(s.local?g6:p6)(s,i,a))}function v6(t,a){return function(s){this.setAttribute(t,a.call(this,s))}}function w6(t,a){return function(s){this.setAttributeNS(t.space,t.local,a.call(this,s))}}function S6(t,a){var s,i;function c(){var u=a.apply(this,arguments);return u!==i&&(s=(i=u)&&w6(t,u)),s}return c._value=a,c}function N6(t,a){var s,i;function c(){var u=a.apply(this,arguments);return u!==i&&(s=(i=u)&&v6(t,u)),s}return c._value=a,c}function j6(t,a){var s="attr."+t;if(arguments.length<2)return(s=this.tween(s))&&s._value;if(a==null)return this.tween(s,null);if(typeof a!="function")throw new Error;var i=Ic(t);return this.tween(s,(i.local?S6:N6)(i,a))}function E6(t,a){return function(){Gh(this,t).delay=+a.apply(this,arguments)}}function _6(t,a){return a=+a,function(){Gh(this,t).delay=a}}function C6(t){var a=this._id;return arguments.length?this.each((typeof t=="function"?E6:_6)(a,t)):bn(this.node(),a).delay}function T6(t,a){return function(){zn(this,t).duration=+a.apply(this,arguments)}}function M6(t,a){return a=+a,function(){zn(this,t).duration=a}}function A6(t){var a=this._id;return arguments.length?this.each((typeof t=="function"?T6:M6)(a,t)):bn(this.node(),a).duration}function k6(t,a){if(typeof a!="function")throw new Error;return function(){zn(this,t).ease=a}}function R6(t){var a=this._id;return arguments.length?this.each(k6(a,t)):bn(this.node(),a).ease}function D6(t,a){return function(){var s=a.apply(this,arguments);if(typeof s!="function")throw new Error;zn(this,t).ease=s}}function z6(t){if(typeof t!="function")throw new Error;return this.each(D6(this._id,t))}function O6(t){typeof t!="function"&&(t=Db(t));for(var a=this._groups,s=a.length,i=new Array(s),c=0;c<s;++c)for(var u=a[c],f=u.length,m=i[c]=[],p,g=0;g<f;++g)(p=u[g])&&t.call(p,p.__data__,g,u)&&m.push(p);return new la(i,this._parents,this._name,this._id)}function B6(t){if(t._id!==this._id)throw new Error;for(var a=this._groups,s=t._groups,i=a.length,c=s.length,u=Math.min(i,c),f=new Array(i),m=0;m<u;++m)for(var p=a[m],g=s[m],y=p.length,x=f[m]=new Array(y),b,S=0;S<y;++S)(b=p[S]||g[S])&&(x[S]=b);for(;m<i;++m)f[m]=a[m];return new la(f,this._parents,this._name,this._id)}function H6(t){return(t+"").trim().split(/^|\s+/).every(function(a){var s=a.indexOf(".");return s>=0&&(a=a.slice(0,s)),!a||a==="start"})}function L6(t,a,s){var i,c,u=H6(a)?Gh:zn;return function(){var f=u(this,t),m=f.on;m!==i&&(c=(i=m).copy()).on(a,s),f.on=c}}function U6(t,a){var s=this._id;return arguments.length<2?bn(this.node(),s).on.on(t):this.each(L6(s,t,a))}function $6(t){return function(){var a=this.parentNode;for(var s in this.__transition)if(+s!==t)return;a&&a.removeChild(this)}}function q6(){return this.on("end.remove",$6(this._id))}function V6(t){var a=this._name,s=this._id;typeof t!="function"&&(t=$h(t));for(var i=this._groups,c=i.length,u=new Array(c),f=0;f<c;++f)for(var m=i[f],p=m.length,g=u[f]=new Array(p),y,x,b=0;b<p;++b)(y=m[b])&&(x=t.call(y,y.__data__,b,m))&&("__data__"in y&&(x.__data__=y.__data__),g[b]=x,Zc(g[b],a,s,b,g,bn(y,s)));return new la(u,this._parents,a,s)}function Y6(t){var a=this._name,s=this._id;typeof t!="function"&&(t=Rb(t));for(var i=this._groups,c=i.length,u=[],f=[],m=0;m<c;++m)for(var p=i[m],g=p.length,y,x=0;x<g;++x)if(y=p[x]){for(var b=t.call(y,y.__data__,x,p),S,j=bn(y,s),A=0,N=b.length;A<N;++A)(S=b[A])&&Zc(S,a,s,A,b,j);u.push(b),f.push(y)}return new la(u,f,a,s)}var X6=fo.prototype.constructor;function G6(){return new X6(this._groups,this._parents)}function I6(t,a){var s,i,c;return function(){var u=Ar(this,t),f=(this.style.removeProperty(t),Ar(this,t));return u===f?null:u===s&&f===i?c:c=a(s=u,i=f)}}function a1(t){return function(){this.style.removeProperty(t)}}function P6(t,a,s){var i,c=s+"",u;return function(){var f=Ar(this,t);return f===c?null:f===i?u:u=a(i=f,s)}}function Z6(t,a,s){var i,c,u;return function(){var f=Ar(this,t),m=s(this),p=m+"";return m==null&&(p=m=(this.style.removeProperty(t),Ar(this,t))),f===p?null:f===i&&p===c?u:(c=p,u=a(i=f,m))}}function Q6(t,a){var s,i,c,u="style."+a,f="end."+u,m;return function(){var p=zn(this,t),g=p.on,y=p.value[u]==null?m||(m=a1(a)):void 0;(g!==s||c!==y)&&(i=(s=g).copy()).on(f,c=y),p.on=i}}function F6(t,a,s){var i=(t+="")=="transform"?W3:n1;return a==null?this.styleTween(t,I6(t,i)).on("end.style."+t,a1(t)):typeof a=="function"?this.styleTween(t,Z6(t,i,Ih(this,"style."+t,a))).each(Q6(this._id,t)):this.styleTween(t,P6(t,i,a),s).on("end.style."+t,null)}function W6(t,a,s){return function(i){this.style.setProperty(t,a.call(this,i),s)}}function K6(t,a,s){var i,c;function u(){var f=a.apply(this,arguments);return f!==c&&(i=(c=f)&&W6(t,f,s)),i}return u._value=a,u}function J6(t,a,s){var i="style."+(t+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(a==null)return this.tween(i,null);if(typeof a!="function")throw new Error;return this.tween(i,K6(t,a,s??""))}function eC(t){return function(){this.textContent=t}}function tC(t){return function(){var a=t(this);this.textContent=a??""}}function nC(t){return this.tween("text",typeof t=="function"?tC(Ih(this,"text",t)):eC(t==null?"":t+""))}function aC(t){return function(a){this.textContent=t.call(this,a)}}function sC(t){var a,s;function i(){var c=t.apply(this,arguments);return c!==s&&(a=(s=c)&&aC(c)),a}return i._value=t,i}function rC(t){var a="text";if(arguments.length<1)return(a=this.tween(a))&&a._value;if(t==null)return this.tween(a,null);if(typeof t!="function")throw new Error;return this.tween(a,sC(t))}function iC(){for(var t=this._name,a=this._id,s=s1(),i=this._groups,c=i.length,u=0;u<c;++u)for(var f=i[u],m=f.length,p,g=0;g<m;++g)if(p=f[g]){var y=bn(p,a);Zc(p,t,s,g,f,{time:y.time+y.delay+y.duration,delay:0,duration:y.duration,ease:y.ease})}return new la(i,this._parents,t,s)}function oC(){var t,a,s=this,i=s._id,c=s.size();return new Promise(function(u,f){var m={value:f},p={value:function(){--c===0&&u()}};s.each(function(){var g=zn(this,i),y=g.on;y!==t&&(a=(t=y).copy(),a._.cancel.push(m),a._.interrupt.push(m),a._.end.push(p)),g.on=a}),c===0&&u()})}var lC=0;function la(t,a,s,i){this._groups=t,this._parents=a,this._name=s,this._id=i}function s1(){return++lC}var aa=fo.prototype;la.prototype={constructor:la,select:V6,selectAll:Y6,selectChild:aa.selectChild,selectChildren:aa.selectChildren,filter:O6,merge:B6,selection:G6,transition:iC,call:aa.call,nodes:aa.nodes,node:aa.node,size:aa.size,empty:aa.empty,each:aa.each,on:U6,attr:b6,attrTween:j6,style:F6,styleTween:J6,text:nC,textTween:rC,remove:q6,tween:f6,delay:C6,duration:A6,ease:R6,easeVarying:z6,end:oC,[Symbol.iterator]:aa[Symbol.iterator]};function cC(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var uC={time:null,delay:0,duration:250,ease:cC};function dC(t,a){for(var s;!(s=t.__transition)||!(s=s[a]);)if(!(t=t.parentNode))throw new Error(`transition ${a} not found`);return s}function fC(t){var a,s;t instanceof la?(a=t._id,t=t._name):(a=s1(),(s=uC).time=Xh(),t=t==null?null:t+"");for(var i=this._groups,c=i.length,u=0;u<c;++u)for(var f=i[u],m=f.length,p,g=0;g<m;++g)(p=f[g])&&Zc(p,t,a,g,f,s||dC(p,a));return new la(i,this._parents,t,a)}fo.prototype.interrupt=c6;fo.prototype.transition=fC;const Kl=t=>()=>t;function hC(t,{sourceEvent:a,target:s,transform:i,dispatch:c}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:a,enumerable:!0,configurable:!0},target:{value:s,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:c}})}function sa(t,a,s){this.k=t,this.x=a,this.y=s}sa.prototype={constructor:sa,scale:function(t){return t===1?this:new sa(this.k*t,this.x,this.y)},translate:function(t,a){return t===0&a===0?this:new sa(this.k,this.x+this.k*t,this.y+this.k*a)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Qc=new sa(1,0,0);r1.prototype=sa.prototype;function r1(t){for(;!t.__zoom;)if(!(t=t.parentNode))return Qc;return t.__zoom}function Hf(t){t.stopImmediatePropagation()}function Vi(t){t.preventDefault(),t.stopImmediatePropagation()}function mC(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function pC(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function $x(){return this.__zoom||Qc}function gC(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function xC(){return navigator.maxTouchPoints||"ontouchstart"in this}function yC(t,a,s){var i=t.invertX(a[0][0])-s[0][0],c=t.invertX(a[1][0])-s[1][0],u=t.invertY(a[0][1])-s[0][1],f=t.invertY(a[1][1])-s[1][1];return t.translate(c>i?(i+c)/2:Math.min(0,i)||Math.max(0,c),f>u?(u+f)/2:Math.min(0,u)||Math.max(0,f))}function i1(){var t=mC,a=pC,s=yC,i=gC,c=xC,u=[0,1/0],f=[[-1/0,-1/0],[1/0,1/0]],m=250,p=mc,g=Gc("start","zoom","end"),y,x,b,S=500,j=150,A=0,N=10;function E(U){U.property("__zoom",$x).on("wheel.zoom",V,{passive:!1}).on("mousedown.zoom",L).on("dblclick.zoom",se).filter(c).on("touchstart.zoom",Q).on("touchmove.zoom",F).on("touchend.zoom touchcancel.zoom",te).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}E.transform=function(U,I,O,B){var q=U.selection?U.selection():U;q.property("__zoom",$x),U!==q?w(U,I,O,B):q.interrupt().each(function(){D(this,arguments).event(B).start().zoom(null,typeof I=="function"?I.apply(this,arguments):I).end()})},E.scaleBy=function(U,I,O,B){E.scaleTo(U,function(){var q=this.__zoom.k,H=typeof I=="function"?I.apply(this,arguments):I;return q*H},O,B)},E.scaleTo=function(U,I,O,B){E.transform(U,function(){var q=a.apply(this,arguments),H=this.__zoom,W=O==null?k(q):typeof O=="function"?O.apply(this,arguments):O,z=H.invert(W),Y=typeof I=="function"?I.apply(this,arguments):I;return s(C(R(H,Y),W,z),q,f)},O,B)},E.translateBy=function(U,I,O,B){E.transform(U,function(){return s(this.__zoom.translate(typeof I=="function"?I.apply(this,arguments):I,typeof O=="function"?O.apply(this,arguments):O),a.apply(this,arguments),f)},null,B)},E.translateTo=function(U,I,O,B,q){E.transform(U,function(){var H=a.apply(this,arguments),W=this.__zoom,z=B==null?k(H):typeof B=="function"?B.apply(this,arguments):B;return s(Qc.translate(z[0],z[1]).scale(W.k).translate(typeof I=="function"?-I.apply(this,arguments):-I,typeof O=="function"?-O.apply(this,arguments):-O),H,f)},B,q)};function R(U,I){return I=Math.max(u[0],Math.min(u[1],I)),I===U.k?U:new sa(I,U.x,U.y)}function C(U,I,O){var B=I[0]-O[0]*U.k,q=I[1]-O[1]*U.k;return B===U.x&&q===U.y?U:new sa(U.k,B,q)}function k(U){return[(+U[0][0]+ +U[1][0])/2,(+U[0][1]+ +U[1][1])/2]}function w(U,I,O,B){U.on("start.zoom",function(){D(this,arguments).event(B).start()}).on("interrupt.zoom end.zoom",function(){D(this,arguments).event(B).end()}).tween("zoom",function(){var q=this,H=arguments,W=D(q,H).event(B),z=a.apply(q,H),Y=O==null?k(z):typeof O=="function"?O.apply(q,H):O,Z=Math.max(z[1][0]-z[0][0],z[1][1]-z[0][1]),ae=q.__zoom,ue=typeof I=="function"?I.apply(q,H):I,X=p(ae.invert(Y).concat(Z/ae.k),ue.invert(Y).concat(Z/ue.k));return function(le){if(le===1)le=ue;else{var ce=X(le),de=Z/ce[2];le=new sa(de,Y[0]-ce[0]*de,Y[1]-ce[1]*de)}W.zoom(null,le)}})}function D(U,I,O){return!O&&U.__zooming||new M(U,I)}function M(U,I){this.that=U,this.args=I,this.active=0,this.sourceEvent=null,this.extent=a.apply(U,I),this.taps=0}M.prototype={event:function(U){return U&&(this.sourceEvent=U),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(U,I){return this.mouse&&U!=="mouse"&&(this.mouse[1]=I.invert(this.mouse[0])),this.touch0&&U!=="touch"&&(this.touch0[1]=I.invert(this.touch0[0])),this.touch1&&U!=="touch"&&(this.touch1[1]=I.invert(this.touch1[0])),this.that.__zoom=I,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(U){var I=Gt(this.that).datum();g.call(U,this.that,new hC(U,{sourceEvent:this.sourceEvent,target:E,transform:this.that.__zoom,dispatch:g}),I)}};function V(U,...I){if(!t.apply(this,arguments))return;var O=D(this,I).event(U),B=this.__zoom,q=Math.max(u[0],Math.min(u[1],B.k*Math.pow(2,i.apply(this,arguments)))),H=pn(U);if(O.wheel)(O.mouse[0][0]!==H[0]||O.mouse[0][1]!==H[1])&&(O.mouse[1]=B.invert(O.mouse[0]=H)),clearTimeout(O.wheel);else{if(B.k===q)return;O.mouse=[H,B.invert(H)],xc(this),O.start()}Vi(U),O.wheel=setTimeout(W,j),O.zoom("mouse",s(C(R(B,q),O.mouse[0],O.mouse[1]),O.extent,f));function W(){O.wheel=null,O.end()}}function L(U,...I){if(b||!t.apply(this,arguments))return;var O=U.currentTarget,B=D(this,I,!0).event(U),q=Gt(U.view).on("mousemove.zoom",Y,!0).on("mouseup.zoom",Z,!0),H=pn(U,O),W=U.clientX,z=U.clientY;Yb(U.view),Hf(U),B.mouse=[H,this.__zoom.invert(H)],xc(this),B.start();function Y(ae){if(Vi(ae),!B.moved){var ue=ae.clientX-W,X=ae.clientY-z;B.moved=ue*ue+X*X>A}B.event(ae).zoom("mouse",s(C(B.that.__zoom,B.mouse[0]=pn(ae,O),B.mouse[1]),B.extent,f))}function Z(ae){q.on("mousemove.zoom mouseup.zoom",null),Xb(ae.view,B.moved),Vi(ae),B.event(ae).end()}}function se(U,...I){if(t.apply(this,arguments)){var O=this.__zoom,B=pn(U.changedTouches?U.changedTouches[0]:U,this),q=O.invert(B),H=O.k*(U.shiftKey?.5:2),W=s(C(R(O,H),B,q),a.apply(this,I),f);Vi(U),m>0?Gt(this).transition().duration(m).call(w,W,B,U):Gt(this).call(E.transform,W,B,U)}}function Q(U,...I){if(t.apply(this,arguments)){var O=U.touches,B=O.length,q=D(this,I,U.changedTouches.length===B).event(U),H,W,z,Y;for(Hf(U),W=0;W<B;++W)z=O[W],Y=pn(z,this),Y=[Y,this.__zoom.invert(Y),z.identifier],q.touch0?!q.touch1&&q.touch0[2]!==Y[2]&&(q.touch1=Y,q.taps=0):(q.touch0=Y,H=!0,q.taps=1+!!y);y&&(y=clearTimeout(y)),H&&(q.taps<2&&(x=Y[0],y=setTimeout(function(){y=null},S)),xc(this),q.start())}}function F(U,...I){if(this.__zooming){var O=D(this,I).event(U),B=U.changedTouches,q=B.length,H,W,z,Y;for(Vi(U),H=0;H<q;++H)W=B[H],z=pn(W,this),O.touch0&&O.touch0[2]===W.identifier?O.touch0[0]=z:O.touch1&&O.touch1[2]===W.identifier&&(O.touch1[0]=z);if(W=O.that.__zoom,O.touch1){var Z=O.touch0[0],ae=O.touch0[1],ue=O.touch1[0],X=O.touch1[1],le=(le=ue[0]-Z[0])*le+(le=ue[1]-Z[1])*le,ce=(ce=X[0]-ae[0])*ce+(ce=X[1]-ae[1])*ce;W=R(W,Math.sqrt(le/ce)),z=[(Z[0]+ue[0])/2,(Z[1]+ue[1])/2],Y=[(ae[0]+X[0])/2,(ae[1]+X[1])/2]}else if(O.touch0)z=O.touch0[0],Y=O.touch0[1];else return;O.zoom("touch",s(C(W,z,Y),O.extent,f))}}function te(U,...I){if(this.__zooming){var O=D(this,I).event(U),B=U.changedTouches,q=B.length,H,W;for(Hf(U),b&&clearTimeout(b),b=setTimeout(function(){b=null},S),H=0;H<q;++H)W=B[H],O.touch0&&O.touch0[2]===W.identifier?delete O.touch0:O.touch1&&O.touch1[2]===W.identifier&&delete O.touch1;if(O.touch1&&!O.touch0&&(O.touch0=O.touch1,delete O.touch1),O.touch0)O.touch0[1]=this.__zoom.invert(O.touch0[0]);else if(O.end(),O.taps===2&&(W=pn(W,this),Math.hypot(x[0]-W[0],x[1]-W[1])<N)){var z=Gt(this).on("dblclick.zoom");z&&z.apply(this,arguments)}}}return E.wheelDelta=function(U){return arguments.length?(i=typeof U=="function"?U:Kl(+U),E):i},E.filter=function(U){return arguments.length?(t=typeof U=="function"?U:Kl(!!U),E):t},E.touchable=function(U){return arguments.length?(c=typeof U=="function"?U:Kl(!!U),E):c},E.extent=function(U){return arguments.length?(a=typeof U=="function"?U:Kl([[+U[0][0],+U[0][1]],[+U[1][0],+U[1][1]]]),E):a},E.scaleExtent=function(U){return arguments.length?(u[0]=+U[0],u[1]=+U[1],E):[u[0],u[1]]},E.translateExtent=function(U){return arguments.length?(f[0][0]=+U[0][0],f[1][0]=+U[1][0],f[0][1]=+U[0][1],f[1][1]=+U[1][1],E):[[f[0][0],f[0][1]],[f[1][0],f[1][1]]]},E.constrain=function(U){return arguments.length?(s=U,E):s},E.duration=function(U){return arguments.length?(m=+U,E):m},E.interpolate=function(U){return arguments.length?(p=U,E):p},E.on=function(){var U=g.on.apply(g,arguments);return U===g?E:U},E.clickDistance=function(U){return arguments.length?(A=(U=+U)*U,E):Math.sqrt(A)},E.tapDistance=function(U){return arguments.length?(N=+U,E):N},E}const Dn={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:t=>`Node type "${t}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:t=>`The old edge with id=${t} does not exist.`,error009:t=>`Marker type "${t}" doesn't exist.`,error008:(t,{id:a,sourceHandle:s,targetHandle:i})=>`Couldn't create edge for ${t} handle id: "${t==="source"?s:i}", edge id: ${a}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:t=>`Edge type "${t}" not found. Using fallback type "default".`,error012:t=>`Node with id "${t}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(t="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${t}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",error015:()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."},to=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],o1=["Enter"," ","Escape"],l1={"node.a11yDescription.default":"Press enter or space to select a node. Press delete to remove it and escape to cancel.","node.a11yDescription.keyboardDisabled":"Press enter or space to select a node. You can then use the arrow keys to move the node around. Press delete to remove it and escape to cancel.","node.a11yDescription.ariaLiveMessage":({direction:t,x:a,y:s})=>`Moved selected node ${t}. New position, x: ${a}, y: ${s}`,"edge.a11yDescription.default":"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel.","controls.ariaLabel":"Control Panel","controls.zoomIn.ariaLabel":"Zoom In","controls.zoomOut.ariaLabel":"Zoom Out","controls.fitView.ariaLabel":"Fit View","controls.interactive.ariaLabel":"Toggle Interactivity","minimap.ariaLabel":"Mini Map","handle.ariaLabel":"Handle"};var Rr;(function(t){t.Strict="strict",t.Loose="loose"})(Rr||(Rr={}));var Ns;(function(t){t.Free="free",t.Vertical="vertical",t.Horizontal="horizontal"})(Ns||(Ns={}));var no;(function(t){t.Partial="partial",t.Full="full"})(no||(no={}));const c1={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null,pointer:null};var Ga;(function(t){t.Bezier="default",t.Straight="straight",t.Step="step",t.SmoothStep="smoothstep",t.SimpleBezier="simplebezier"})(Ga||(Ga={}));var Rc;(function(t){t.Arrow="arrow",t.ArrowClosed="arrowclosed"})(Rc||(Rc={}));var xe;(function(t){t.Left="left",t.Top="top",t.Right="right",t.Bottom="bottom"})(xe||(xe={}));const qx={[xe.Left]:xe.Right,[xe.Right]:xe.Left,[xe.Top]:xe.Bottom,[xe.Bottom]:xe.Top};function u1(t){return t===null?null:t?"valid":"invalid"}const d1=t=>"id"in t&&"source"in t&&"target"in t,bC=t=>"id"in t&&"position"in t&&!("source"in t)&&!("target"in t),Ph=t=>"id"in t&&"internals"in t&&!("source"in t)&&!("target"in t),mo=(t,a=[0,0])=>{const{width:s,height:i}=da(t),c=t.origin??a,u=s*c[0],f=i*c[1];return{x:t.position.x-u,y:t.position.y-f}},vC=(t,a={nodeOrigin:[0,0]})=>{if(t.length===0)return{x:0,y:0,width:0,height:0};const s=t.reduce((i,c)=>{const u=typeof c=="string";let f=!a.nodeLookup&&!u?c:void 0;a.nodeLookup&&(f=u?a.nodeLookup.get(c):Ph(c)?c:a.nodeLookup.get(c.id));const m=f?Dc(f,a.nodeOrigin):{x:0,y:0,x2:0,y2:0};return Fc(i,m)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return Wc(s)},po=(t,a={})=>{let s={x:1/0,y:1/0,x2:-1/0,y2:-1/0},i=!1;return t.forEach(c=>{(a.filter===void 0||a.filter(c))&&(s=Fc(s,Dc(c)),i=!0)}),i?Wc(s):{x:0,y:0,width:0,height:0}},Zh=(t,a,[s,i,c]=[0,0,1],u=!1,f=!1)=>{const m={...xo(a,[s,i,c]),width:a.width/c,height:a.height/c},p=[];for(const g of t.values()){const{measured:y,selectable:x=!0,hidden:b=!1}=g;if(f&&!x||b)continue;const S=y.width??g.width??g.initialWidth??null,j=y.height??g.height??g.initialHeight??null,A=ao(m,zr(g)),N=(S??0)*(j??0),E=u&&A>0;(!g.internals.handleBounds||E||A>=N||g.dragging)&&p.push(g)}return p},wC=(t,a)=>{const s=new Set;return t.forEach(i=>{s.add(i.id)}),a.filter(i=>s.has(i.source)||s.has(i.target))};function SC(t,a){const s=new Map,i=a?.nodes?new Set(a.nodes.map(c=>c.id)):null;return t.forEach(c=>{c.measured.width&&c.measured.height&&(a?.includeHiddenNodes||!c.hidden)&&(!i||i.has(c.id))&&s.set(c.id,c)}),s}async function NC({nodes:t,width:a,height:s,panZoom:i,minZoom:c,maxZoom:u},f){if(t.size===0)return Promise.resolve(!0);const m=SC(t,f),p=po(m),g=Qh(p,a,s,f?.minZoom??c,f?.maxZoom??u,f?.padding??.1);return await i.setViewport(g,{duration:f?.duration,ease:f?.ease,interpolate:f?.interpolate}),Promise.resolve(!0)}function f1({nodeId:t,nextPosition:a,nodeLookup:s,nodeOrigin:i=[0,0],nodeExtent:c,onError:u}){const f=s.get(t),m=f.parentId?s.get(f.parentId):void 0,{x:p,y:g}=m?m.internals.positionAbsolute:{x:0,y:0},y=f.origin??i;let x=f.extent||c;if(f.extent==="parent"&&!f.expandParent)if(!m)u?.("005",Dn.error005());else{const S=m.measured.width,j=m.measured.height;S&&j&&(x=[[p,g],[p+S,g+j]])}else m&&Or(f.extent)&&(x=[[f.extent[0][0]+p,f.extent[0][1]+g],[f.extent[1][0]+p,f.extent[1][1]+g]]);const b=Or(x)?_s(a,x,f.measured):a;return(f.measured.width===void 0||f.measured.height===void 0)&&u?.("015",Dn.error015()),{position:{x:b.x-p+(f.measured.width??0)*y[0],y:b.y-g+(f.measured.height??0)*y[1]},positionAbsolute:b}}async function jC({nodesToRemove:t=[],edgesToRemove:a=[],nodes:s,edges:i,onBeforeDelete:c}){const u=new Set(t.map(b=>b.id)),f=[];for(const b of s){if(b.deletable===!1)continue;const S=u.has(b.id),j=!S&&b.parentId&&f.find(A=>A.id===b.parentId);(S||j)&&f.push(b)}const m=new Set(a.map(b=>b.id)),p=i.filter(b=>b.deletable!==!1),y=wC(f,p);for(const b of p)m.has(b.id)&&!y.find(j=>j.id===b.id)&&y.push(b);if(!c)return{edges:y,nodes:f};const x=await c({nodes:f,edges:y});return typeof x=="boolean"?x?{edges:y,nodes:f}:{edges:[],nodes:[]}:x}const Dr=(t,a=0,s=1)=>Math.min(Math.max(t,a),s),_s=(t={x:0,y:0},a,s)=>({x:Dr(t.x,a[0][0],a[1][0]-(s?.width??0)),y:Dr(t.y,a[0][1],a[1][1]-(s?.height??0))});function h1(t,a,s){const{width:i,height:c}=da(s),{x:u,y:f}=s.internals.positionAbsolute;return _s(t,[[u,f],[u+i,f+c]],a)}const Vx=(t,a,s)=>t<a?Dr(Math.abs(t-a),1,a)/a:t>s?-Dr(Math.abs(t-s),1,a)/a:0,m1=(t,a,s=15,i=40)=>{const c=Vx(t.x,i,a.width-i)*s,u=Vx(t.y,i,a.height-i)*s;return[c,u]},Fc=(t,a)=>({x:Math.min(t.x,a.x),y:Math.min(t.y,a.y),x2:Math.max(t.x2,a.x2),y2:Math.max(t.y2,a.y2)}),mh=({x:t,y:a,width:s,height:i})=>({x:t,y:a,x2:t+s,y2:a+i}),Wc=({x:t,y:a,x2:s,y2:i})=>({x:t,y:a,width:s-t,height:i-a}),zr=(t,a=[0,0])=>{const{x:s,y:i}=Ph(t)?t.internals.positionAbsolute:mo(t,a);return{x:s,y:i,width:t.measured?.width??t.width??t.initialWidth??0,height:t.measured?.height??t.height??t.initialHeight??0}},Dc=(t,a=[0,0])=>{const{x:s,y:i}=Ph(t)?t.internals.positionAbsolute:mo(t,a);return{x:s,y:i,x2:s+(t.measured?.width??t.width??t.initialWidth??0),y2:i+(t.measured?.height??t.height??t.initialHeight??0)}},p1=(t,a)=>Wc(Fc(mh(t),mh(a))),ao=(t,a)=>{const s=Math.max(0,Math.min(t.x+t.width,a.x+a.width)-Math.max(t.x,a.x)),i=Math.max(0,Math.min(t.y+t.height,a.y+a.height)-Math.max(t.y,a.y));return Math.ceil(s*i)},Yx=t=>xn(t.width)&&xn(t.height)&&xn(t.x)&&xn(t.y),xn=t=>!isNaN(t)&&isFinite(t),EC=(t,a)=>{},go=(t,a=[1,1])=>({x:a[0]*Math.round(t.x/a[0]),y:a[1]*Math.round(t.y/a[1])}),xo=({x:t,y:a},[s,i,c],u=!1,f=[1,1])=>{const m={x:(t-s)/c,y:(a-i)/c};return u?go(m,f):m},zc=({x:t,y:a},[s,i,c])=>({x:t*c+s,y:a*c+i});function xr(t,a){if(typeof t=="number")return Math.floor((a-a/(1+t))*.5);if(typeof t=="string"&&t.endsWith("px")){const s=parseFloat(t);if(!Number.isNaN(s))return Math.floor(s)}if(typeof t=="string"&&t.endsWith("%")){const s=parseFloat(t);if(!Number.isNaN(s))return Math.floor(a*s*.01)}return console.error(`[React Flow] The padding value "${t}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function _C(t,a,s){if(typeof t=="string"||typeof t=="number"){const i=xr(t,s),c=xr(t,a);return{top:i,right:c,bottom:i,left:c,x:c*2,y:i*2}}if(typeof t=="object"){const i=xr(t.top??t.y??0,s),c=xr(t.bottom??t.y??0,s),u=xr(t.left??t.x??0,a),f=xr(t.right??t.x??0,a);return{top:i,right:f,bottom:c,left:u,x:u+f,y:i+c}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function CC(t,a,s,i,c,u){const{x:f,y:m}=zc(t,[a,s,i]),{x:p,y:g}=zc({x:t.x+t.width,y:t.y+t.height},[a,s,i]),y=c-p,x=u-g;return{left:Math.floor(f),top:Math.floor(m),right:Math.floor(y),bottom:Math.floor(x)}}const Qh=(t,a,s,i,c,u)=>{const f=_C(u,a,s),m=(a-f.x)/t.width,p=(s-f.y)/t.height,g=Math.min(m,p),y=Dr(g,i,c),x=t.x+t.width/2,b=t.y+t.height/2,S=a/2-x*y,j=s/2-b*y,A=CC(t,S,j,y,a,s),N={left:Math.min(A.left-f.left,0),top:Math.min(A.top-f.top,0),right:Math.min(A.right-f.right,0),bottom:Math.min(A.bottom-f.bottom,0)};return{x:S-N.left+N.right,y:j-N.top+N.bottom,zoom:y}},so=()=>typeof navigator<"u"&&navigator?.userAgent?.indexOf("Mac")>=0;function Or(t){return t!=null&&t!=="parent"}function da(t){return{width:t.measured?.width??t.width??t.initialWidth??0,height:t.measured?.height??t.height??t.initialHeight??0}}function g1(t){return(t.measured?.width??t.width??t.initialWidth)!==void 0&&(t.measured?.height??t.height??t.initialHeight)!==void 0}function x1(t,a={width:0,height:0},s,i,c){const u={...t},f=i.get(s);if(f){const m=f.origin||c;u.x+=f.internals.positionAbsolute.x-(a.width??0)*m[0],u.y+=f.internals.positionAbsolute.y-(a.height??0)*m[1]}return u}function Xx(t,a){if(t.size!==a.size)return!1;for(const s of t)if(!a.has(s))return!1;return!0}function TC(){let t,a;return{promise:new Promise((i,c)=>{t=i,a=c}),resolve:t,reject:a}}function MC(t){return{...l1,...t||{}}}function Zi(t,{snapGrid:a=[0,0],snapToGrid:s=!1,transform:i,containerBounds:c}){const{x:u,y:f}=yn(t),m=xo({x:u-(c?.left??0),y:f-(c?.top??0)},i),{x:p,y:g}=s?go(m,a):m;return{xSnapped:p,ySnapped:g,...m}}const Fh=t=>({width:t.offsetWidth,height:t.offsetHeight}),y1=t=>t?.getRootNode?.()||window?.document,AC=["INPUT","SELECT","TEXTAREA"];function b1(t){const a=t.composedPath?.()?.[0]||t.target;return a?.nodeType!==1?!1:AC.includes(a.nodeName)||a.hasAttribute("contenteditable")||!!a.closest(".nokey")}const v1=t=>"clientX"in t,yn=(t,a)=>{const s=v1(t),i=s?t.clientX:t.touches?.[0].clientX,c=s?t.clientY:t.touches?.[0].clientY;return{x:i-(a?.left??0),y:c-(a?.top??0)}},Gx=(t,a,s,i,c)=>{const u=a.querySelectorAll(`.${t}`);return!u||!u.length?null:Array.from(u).map(f=>{const m=f.getBoundingClientRect();return{id:f.getAttribute("data-handleid"),type:t,nodeId:c,position:f.getAttribute("data-handlepos"),x:(m.left-s.left)/i,y:(m.top-s.top)/i,...Fh(f)}})};function w1({sourceX:t,sourceY:a,targetX:s,targetY:i,sourceControlX:c,sourceControlY:u,targetControlX:f,targetControlY:m}){const p=t*.125+c*.375+f*.375+s*.125,g=a*.125+u*.375+m*.375+i*.125,y=Math.abs(p-t),x=Math.abs(g-a);return[p,g,y,x]}function Jl(t,a){return t>=0?.5*t:a*25*Math.sqrt(-t)}function Ix({pos:t,x1:a,y1:s,x2:i,y2:c,c:u}){switch(t){case xe.Left:return[a-Jl(a-i,u),s];case xe.Right:return[a+Jl(i-a,u),s];case xe.Top:return[a,s-Jl(s-c,u)];case xe.Bottom:return[a,s+Jl(c-s,u)]}}function S1({sourceX:t,sourceY:a,sourcePosition:s=xe.Bottom,targetX:i,targetY:c,targetPosition:u=xe.Top,curvature:f=.25}){const[m,p]=Ix({pos:s,x1:t,y1:a,x2:i,y2:c,c:f}),[g,y]=Ix({pos:u,x1:i,y1:c,x2:t,y2:a,c:f}),[x,b,S,j]=w1({sourceX:t,sourceY:a,targetX:i,targetY:c,sourceControlX:m,sourceControlY:p,targetControlX:g,targetControlY:y});return[`M${t},${a} C${m},${p} ${g},${y} ${i},${c}`,x,b,S,j]}function N1({sourceX:t,sourceY:a,targetX:s,targetY:i}){const c=Math.abs(s-t)/2,u=s<t?s+c:s-c,f=Math.abs(i-a)/2,m=i<a?i+f:i-f;return[u,m,c,f]}function kC({sourceNode:t,targetNode:a,selected:s=!1,zIndex:i=0,elevateOnSelect:c=!1,zIndexMode:u="basic"}){if(u==="manual")return i;const f=c&&s?i+1e3:i,m=Math.max(t.parentId||c&&t.selected?t.internals.z:0,a.parentId||c&&a.selected?a.internals.z:0);return f+m}function RC({sourceNode:t,targetNode:a,width:s,height:i,transform:c}){const u=Fc(Dc(t),Dc(a));u.x===u.x2&&(u.x2+=1),u.y===u.y2&&(u.y2+=1);const f={x:-c[0]/c[2],y:-c[1]/c[2],width:s/c[2],height:i/c[2]};return ao(f,Wc(u))>0}const DC=({source:t,sourceHandle:a,target:s,targetHandle:i})=>`xy-edge__${t}${a||""}-${s}${i||""}`,zC=(t,a)=>a.some(s=>s.source===t.source&&s.target===t.target&&(s.sourceHandle===t.sourceHandle||!s.sourceHandle&&!t.sourceHandle)&&(s.targetHandle===t.targetHandle||!s.targetHandle&&!t.targetHandle)),j1=(t,a,s={})=>{if(!t.source||!t.target)return a;const i=s.getEdgeId||DC;let c;return d1(t)?c={...t}:c={...t,id:i(t)},zC(c,a)?a:(c.sourceHandle===null&&delete c.sourceHandle,c.targetHandle===null&&delete c.targetHandle,a.concat(c))};function E1({sourceX:t,sourceY:a,targetX:s,targetY:i}){const[c,u,f,m]=N1({sourceX:t,sourceY:a,targetX:s,targetY:i});return[`M ${t},${a}L ${s},${i}`,c,u,f,m]}const Px={[xe.Left]:{x:-1,y:0},[xe.Right]:{x:1,y:0},[xe.Top]:{x:0,y:-1},[xe.Bottom]:{x:0,y:1}},OC=({source:t,sourcePosition:a=xe.Bottom,target:s})=>a===xe.Left||a===xe.Right?t.x<s.x?{x:1,y:0}:{x:-1,y:0}:t.y<s.y?{x:0,y:1}:{x:0,y:-1},Zx=(t,a)=>Math.sqrt(Math.pow(a.x-t.x,2)+Math.pow(a.y-t.y,2));function BC({source:t,sourcePosition:a=xe.Bottom,target:s,targetPosition:i=xe.Top,center:c,offset:u,stepPosition:f}){const m=Px[a],p=Px[i],g={x:t.x+m.x*u,y:t.y+m.y*u},y={x:s.x+p.x*u,y:s.y+p.y*u},x=OC({source:g,sourcePosition:a,target:y}),b=x.x!==0?"x":"y",S=x[b];let j=[],A,N;const E={x:0,y:0},R={x:0,y:0},[,,C,k]=N1({sourceX:t.x,sourceY:t.y,targetX:s.x,targetY:s.y});if(m[b]*p[b]===-1){b==="x"?(A=c.x??g.x+(y.x-g.x)*f,N=c.y??(g.y+y.y)/2):(A=c.x??(g.x+y.x)/2,N=c.y??g.y+(y.y-g.y)*f);const D=[{x:A,y:g.y},{x:A,y:y.y}],M=[{x:g.x,y:N},{x:y.x,y:N}];m[b]===S?j=b==="x"?D:M:j=b==="x"?M:D}else{const D=[{x:g.x,y:y.y}],M=[{x:y.x,y:g.y}];if(b==="x"?j=m.x===S?M:D:j=m.y===S?D:M,a===i){const F=Math.abs(t[b]-s[b]);if(F<=u){const te=Math.min(u-1,u-F);m[b]===S?E[b]=(g[b]>t[b]?-1:1)*te:R[b]=(y[b]>s[b]?-1:1)*te}}if(a!==i){const F=b==="x"?"y":"x",te=m[b]===p[F],U=g[F]>y[F],I=g[F]<y[F];(m[b]===1&&(!te&&U||te&&I)||m[b]!==1&&(!te&&I||te&&U))&&(j=b==="x"?D:M)}const V={x:g.x+E.x,y:g.y+E.y},L={x:y.x+R.x,y:y.y+R.y},se=Math.max(Math.abs(V.x-j[0].x),Math.abs(L.x-j[0].x)),Q=Math.max(Math.abs(V.y-j[0].y),Math.abs(L.y-j[0].y));se>=Q?(A=(V.x+L.x)/2,N=j[0].y):(A=j[0].x,N=(V.y+L.y)/2)}return[[t,{x:g.x+E.x,y:g.y+E.y},...j,{x:y.x+R.x,y:y.y+R.y},s],A,N,C,k]}function HC(t,a,s,i){const c=Math.min(Zx(t,a)/2,Zx(a,s)/2,i),{x:u,y:f}=a;if(t.x===u&&u===s.x||t.y===f&&f===s.y)return`L${u} ${f}`;if(t.y===f){const g=t.x<s.x?-1:1,y=t.y<s.y?1:-1;return`L ${u+c*g},${f}Q ${u},${f} ${u},${f+c*y}`}const m=t.x<s.x?1:-1,p=t.y<s.y?-1:1;return`L ${u},${f+c*p}Q ${u},${f} ${u+c*m},${f}`}function ph({sourceX:t,sourceY:a,sourcePosition:s=xe.Bottom,targetX:i,targetY:c,targetPosition:u=xe.Top,borderRadius:f=5,centerX:m,centerY:p,offset:g=20,stepPosition:y=.5}){const[x,b,S,j,A]=BC({source:{x:t,y:a},sourcePosition:s,target:{x:i,y:c},targetPosition:u,center:{x:m,y:p},offset:g,stepPosition:y});return[x.reduce((E,R,C)=>{let k="";return C>0&&C<x.length-1?k=HC(x[C-1],R,x[C+1],f):k=`${C===0?"M":"L"}${R.x} ${R.y}`,E+=k,E},""),b,S,j,A]}function Qx(t){return t&&!!(t.internals.handleBounds||t.handles?.length)&&!!(t.measured.width||t.width||t.initialWidth)}function LC(t){const{sourceNode:a,targetNode:s}=t;if(!Qx(a)||!Qx(s))return null;const i=a.internals.handleBounds||Fx(a.handles),c=s.internals.handleBounds||Fx(s.handles),u=Wx(i?.source??[],t.sourceHandle),f=Wx(t.connectionMode===Rr.Strict?c?.target??[]:(c?.target??[]).concat(c?.source??[]),t.targetHandle);if(!u||!f)return t.onError?.("008",Dn.error008(u?"target":"source",{id:t.id,sourceHandle:t.sourceHandle,targetHandle:t.targetHandle})),null;const m=u?.position||xe.Bottom,p=f?.position||xe.Top,g=Cs(a,u,m),y=Cs(s,f,p);return{sourceX:g.x,sourceY:g.y,targetX:y.x,targetY:y.y,sourcePosition:m,targetPosition:p}}function Fx(t){if(!t)return null;const a=[],s=[];for(const i of t)i.width=i.width??1,i.height=i.height??1,i.type==="source"?a.push(i):i.type==="target"&&s.push(i);return{source:a,target:s}}function Cs(t,a,s=xe.Left,i=!1){const c=(a?.x??0)+t.internals.positionAbsolute.x,u=(a?.y??0)+t.internals.positionAbsolute.y,{width:f,height:m}=a??da(t);if(i)return{x:c+f/2,y:u+m/2};switch(a?.position??s){case xe.Top:return{x:c+f/2,y:u};case xe.Right:return{x:c+f,y:u+m/2};case xe.Bottom:return{x:c+f/2,y:u+m};case xe.Left:return{x:c,y:u+m/2}}}function Wx(t,a){return t&&(a?t.find(s=>s.id===a):t[0])||null}function gh(t,a){return t?typeof t=="string"?t:`${a?`${a}__`:""}${Object.keys(t).sort().map(i=>`${i}=${t[i]}`).join("&")}`:""}function UC(t,{id:a,defaultColor:s,defaultMarkerStart:i,defaultMarkerEnd:c}){const u=new Set;return t.reduce((f,m)=>([m.markerStart||i,m.markerEnd||c].forEach(p=>{if(p&&typeof p=="object"){const g=gh(p,a);u.has(g)||(f.push({id:g,color:p.color||s,...p}),u.add(g))}}),f),[]).sort((f,m)=>f.id.localeCompare(m.id))}const _1=1e3,$C=10,Wh={nodeOrigin:[0,0],nodeExtent:to,elevateNodesOnSelect:!0,zIndexMode:"basic",defaults:{}},qC={...Wh,checkEquality:!0};function Kh(t,a){const s={...t};for(const i in a)a[i]!==void 0&&(s[i]=a[i]);return s}function VC(t,a,s){const i=Kh(Wh,s);for(const c of t.values())if(c.parentId)em(c,t,a,i);else{const u=mo(c,i.nodeOrigin),f=Or(c.extent)?c.extent:i.nodeExtent,m=_s(u,f,da(c));c.internals.positionAbsolute=m}}function YC(t,a){if(!t.handles)return t.measured?a?.internals.handleBounds:void 0;const s=[],i=[];for(const c of t.handles){const u={id:c.id,width:c.width??1,height:c.height??1,nodeId:t.id,x:c.x,y:c.y,position:c.position,type:c.type};c.type==="source"?s.push(u):c.type==="target"&&i.push(u)}return{source:s,target:i}}function Jh(t){return t==="manual"}function xh(t,a,s,i={}){const c=Kh(qC,i),u={i:0},f=new Map(a),m=c?.elevateNodesOnSelect&&!Jh(c.zIndexMode)?_1:0;let p=t.length>0;a.clear(),s.clear();for(const g of t){let y=f.get(g.id);if(c.checkEquality&&g===y?.internals.userNode)a.set(g.id,y);else{const x=mo(g,c.nodeOrigin),b=Or(g.extent)?g.extent:c.nodeExtent,S=_s(x,b,da(g));y={...c.defaults,...g,measured:{width:g.measured?.width,height:g.measured?.height},internals:{positionAbsolute:S,handleBounds:YC(g,y),z:C1(g,m,c.zIndexMode),userNode:g}},a.set(g.id,y)}(y.measured===void 0||y.measured.width===void 0||y.measured.height===void 0)&&!y.hidden&&(p=!1),g.parentId&&em(y,a,s,i,u)}return p}function XC(t,a){if(!t.parentId)return;const s=a.get(t.parentId);s?s.set(t.id,t):a.set(t.parentId,new Map([[t.id,t]]))}function em(t,a,s,i,c){const{elevateNodesOnSelect:u,nodeOrigin:f,nodeExtent:m,zIndexMode:p}=Kh(Wh,i),g=t.parentId,y=a.get(g);if(!y){console.warn(`Parent node ${g} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}XC(t,s),c&&!y.parentId&&y.internals.rootParentIndex===void 0&&p==="auto"&&(y.internals.rootParentIndex=++c.i,y.internals.z=y.internals.z+c.i*$C),c&&y.internals.rootParentIndex!==void 0&&(c.i=y.internals.rootParentIndex);const x=u&&!Jh(p)?_1:0,{x:b,y:S,z:j}=GC(t,y,f,m,x,p),{positionAbsolute:A}=t.internals,N=b!==A.x||S!==A.y;(N||j!==t.internals.z)&&a.set(t.id,{...t,internals:{...t.internals,positionAbsolute:N?{x:b,y:S}:A,z:j}})}function C1(t,a,s){const i=xn(t.zIndex)?t.zIndex:0;return Jh(s)?i:i+(t.selected?a:0)}function GC(t,a,s,i,c,u){const{x:f,y:m}=a.internals.positionAbsolute,p=da(t),g=mo(t,s),y=Or(t.extent)?_s(g,t.extent,p):g;let x=_s({x:f+y.x,y:m+y.y},i,p);t.extent==="parent"&&(x=h1(x,p,a));const b=C1(t,c,u),S=a.internals.z??0;return{x:x.x,y:x.y,z:S>=b?S+1:b}}function tm(t,a,s,i=[0,0]){const c=[],u=new Map;for(const f of t){const m=a.get(f.parentId);if(!m)continue;const p=u.get(f.parentId)?.expandedRect??zr(m),g=p1(p,f.rect);u.set(f.parentId,{expandedRect:g,parent:m})}return u.size>0&&u.forEach(({expandedRect:f,parent:m},p)=>{const g=m.internals.positionAbsolute,y=da(m),x=m.origin??i,b=f.x<g.x?Math.round(Math.abs(g.x-f.x)):0,S=f.y<g.y?Math.round(Math.abs(g.y-f.y)):0,j=Math.max(y.width,Math.round(f.width)),A=Math.max(y.height,Math.round(f.height)),N=(j-y.width)*x[0],E=(A-y.height)*x[1];(b>0||S>0||N||E)&&(c.push({id:p,type:"position",position:{x:m.position.x-b+N,y:m.position.y-S+E}}),s.get(p)?.forEach(R=>{t.some(C=>C.id===R.id)||c.push({id:R.id,type:"position",position:{x:R.position.x+b,y:R.position.y+S}})})),(y.width<f.width||y.height<f.height||b||S)&&c.push({id:p,type:"dimensions",setAttributes:!0,dimensions:{width:j+(b?x[0]*b-N:0),height:A+(S?x[1]*S-E:0)}})}),c}function IC(t,a,s,i,c,u,f){const m=i?.querySelector(".xyflow__viewport");let p=!1;if(!m)return{changes:[],updatedInternals:p};const g=[],y=window.getComputedStyle(m),{m22:x}=new window.DOMMatrixReadOnly(y.transform),b=[];for(const S of t.values()){const j=a.get(S.id);if(!j)continue;if(j.hidden){a.set(j.id,{...j,internals:{...j.internals,handleBounds:void 0}}),p=!0;continue}const A=Fh(S.nodeElement),N=j.measured.width!==A.width||j.measured.height!==A.height;if(!!(A.width&&A.height&&(N||!j.internals.handleBounds||S.force))){const R=S.nodeElement.getBoundingClientRect(),C=Or(j.extent)?j.extent:u;let{positionAbsolute:k}=j.internals;j.parentId&&j.extent==="parent"?k=h1(k,A,a.get(j.parentId)):C&&(k=_s(k,C,A));const w={...j,measured:A,internals:{...j.internals,positionAbsolute:k,handleBounds:{source:Gx("source",S.nodeElement,R,x,j.id),target:Gx("target",S.nodeElement,R,x,j.id)}}};a.set(j.id,w),j.parentId&&em(w,a,s,{nodeOrigin:c,zIndexMode:f}),p=!0,N&&(g.push({id:j.id,type:"dimensions",dimensions:A}),j.expandParent&&j.parentId&&b.push({id:j.id,parentId:j.parentId,rect:zr(w,c)}))}}if(b.length>0){const S=tm(b,a,s,c);g.push(...S)}return{changes:g,updatedInternals:p}}async function PC({delta:t,panZoom:a,transform:s,translateExtent:i,width:c,height:u}){if(!a||!t.x&&!t.y)return Promise.resolve(!1);const f=await a.setViewportConstrained({x:s[0]+t.x,y:s[1]+t.y,zoom:s[2]},[[0,0],[c,u]],i),m=!!f&&(f.x!==s[0]||f.y!==s[1]||f.k!==s[2]);return Promise.resolve(m)}function Kx(t,a,s,i,c,u){let f=c;const m=i.get(f)||new Map;i.set(f,m.set(s,a)),f=`${c}-${t}`;const p=i.get(f)||new Map;if(i.set(f,p.set(s,a)),u){f=`${c}-${t}-${u}`;const g=i.get(f)||new Map;i.set(f,g.set(s,a))}}function T1(t,a,s){t.clear(),a.clear();for(const i of s){const{source:c,target:u,sourceHandle:f=null,targetHandle:m=null}=i,p={edgeId:i.id,source:c,target:u,sourceHandle:f,targetHandle:m},g=`${c}-${f}--${u}-${m}`,y=`${u}-${m}--${c}-${f}`;Kx("source",p,y,t,c,f),Kx("target",p,g,t,u,m),a.set(i.id,i)}}function M1(t,a){if(!t.parentId)return!1;const s=a.get(t.parentId);return s?s.selected?!0:M1(s,a):!1}function Jx(t,a,s){let i=t;do{if(i?.matches?.(a))return!0;if(i===s)return!1;i=i?.parentElement}while(i);return!1}function ZC(t,a,s,i){const c=new Map;for(const[u,f]of t)if((f.selected||f.id===i)&&(!f.parentId||!M1(f,t))&&(f.draggable||a&&typeof f.draggable>"u")){const m=t.get(u);m&&c.set(u,{id:u,position:m.position||{x:0,y:0},distance:{x:s.x-m.internals.positionAbsolute.x,y:s.y-m.internals.positionAbsolute.y},extent:m.extent,parentId:m.parentId,origin:m.origin,expandParent:m.expandParent,internals:{positionAbsolute:m.internals.positionAbsolute||{x:0,y:0}},measured:{width:m.measured.width??0,height:m.measured.height??0}})}return c}function Lf({nodeId:t,dragItems:a,nodeLookup:s,dragging:i=!0}){const c=[];for(const[f,m]of a){const p=s.get(f)?.internals.userNode;p&&c.push({...p,position:m.position,dragging:i})}if(!t)return[c[0],c];const u=s.get(t)?.internals.userNode;return[u?{...u,position:a.get(t)?.position||u.position,dragging:i}:c[0],c]}function QC({dragItems:t,snapGrid:a,x:s,y:i}){const c=t.values().next().value;if(!c)return null;const u={x:s-c.distance.x,y:i-c.distance.y},f=go(u,a);return{x:f.x-u.x,y:f.y-u.y}}function FC({onNodeMouseDown:t,getStoreItems:a,onDragStart:s,onDrag:i,onDragStop:c}){let u={x:null,y:null},f=0,m=new Map,p=!1,g={x:0,y:0},y=null,x=!1,b=null,S=!1,j=!1,A=null;function N({noDragClassName:R,handleSelector:C,domNode:k,isSelectable:w,nodeId:D,nodeClickDistance:M=0}){b=Gt(k);function V({x:F,y:te}){const{nodeLookup:U,nodeExtent:I,snapGrid:O,snapToGrid:B,nodeOrigin:q,onNodeDrag:H,onSelectionDrag:W,onError:z,updateNodePositions:Y}=a();u={x:F,y:te};let Z=!1;const ae=m.size>1,ue=ae&&I?mh(po(m)):null,X=ae&&B?QC({dragItems:m,snapGrid:O,x:F,y:te}):null;for(const[le,ce]of m){if(!U.has(le))continue;let de={x:F-ce.distance.x,y:te-ce.distance.y};B&&(de=X?{x:Math.round(de.x+X.x),y:Math.round(de.y+X.y)}:go(de,O));let we=null;if(ae&&I&&!ce.extent&&ue){const{positionAbsolute:ge}=ce.internals,_e=ge.x-ue.x+I[0][0],Te=ge.x+ce.measured.width-ue.x2+I[1][0],me=ge.y-ue.y+I[0][1],qe=ge.y+ce.measured.height-ue.y2+I[1][1];we=[[_e,me],[Te,qe]]}const{position:ve,positionAbsolute:pe}=f1({nodeId:le,nextPosition:de,nodeLookup:U,nodeExtent:we||I,nodeOrigin:q,onError:z});Z=Z||ce.position.x!==ve.x||ce.position.y!==ve.y,ce.position=ve,ce.internals.positionAbsolute=pe}if(j=j||Z,!!Z&&(Y(m,!0),A&&(i||H||!D&&W))){const[le,ce]=Lf({nodeId:D,dragItems:m,nodeLookup:U});i?.(A,m,le,ce),H?.(A,le,ce),D||W?.(A,ce)}}async function L(){if(!y)return;const{transform:F,panBy:te,autoPanSpeed:U,autoPanOnNodeDrag:I}=a();if(!I){p=!1,cancelAnimationFrame(f);return}const[O,B]=m1(g,y,U);(O!==0||B!==0)&&(u.x=(u.x??0)-O/F[2],u.y=(u.y??0)-B/F[2],await te({x:O,y:B})&&V(u)),f=requestAnimationFrame(L)}function se(F){const{nodeLookup:te,multiSelectionActive:U,nodesDraggable:I,transform:O,snapGrid:B,snapToGrid:q,selectNodesOnDrag:H,onNodeDragStart:W,onSelectionDragStart:z,unselectNodesAndEdges:Y}=a();x=!0,(!H||!w)&&!U&&D&&(te.get(D)?.selected||Y()),w&&H&&D&&t?.(D);const Z=Zi(F.sourceEvent,{transform:O,snapGrid:B,snapToGrid:q,containerBounds:y});if(u=Z,m=ZC(te,I,Z,D),m.size>0&&(s||W||!D&&z)){const[ae,ue]=Lf({nodeId:D,dragItems:m,nodeLookup:te});s?.(F.sourceEvent,m,ae,ue),W?.(F.sourceEvent,ae,ue),D||z?.(F.sourceEvent,ue)}}const Q=Gb().clickDistance(M).on("start",F=>{const{domNode:te,nodeDragThreshold:U,transform:I,snapGrid:O,snapToGrid:B}=a();y=te?.getBoundingClientRect()||null,S=!1,j=!1,A=F.sourceEvent,U===0&&se(F),u=Zi(F.sourceEvent,{transform:I,snapGrid:O,snapToGrid:B,containerBounds:y}),g=yn(F.sourceEvent,y)}).on("drag",F=>{const{autoPanOnNodeDrag:te,transform:U,snapGrid:I,snapToGrid:O,nodeDragThreshold:B,nodeLookup:q}=a(),H=Zi(F.sourceEvent,{transform:U,snapGrid:I,snapToGrid:O,containerBounds:y});if(A=F.sourceEvent,(F.sourceEvent.type==="touchmove"&&F.sourceEvent.touches.length>1||D&&!q.has(D))&&(S=!0),!S){if(!p&&te&&x&&(p=!0,L()),!x){const W=yn(F.sourceEvent,y),z=W.x-g.x,Y=W.y-g.y;Math.sqrt(z*z+Y*Y)>B&&se(F)}(u.x!==H.xSnapped||u.y!==H.ySnapped)&&m&&x&&(g=yn(F.sourceEvent,y),V(H))}}).on("end",F=>{if(!(!x||S)&&(p=!1,x=!1,cancelAnimationFrame(f),m.size>0)){const{nodeLookup:te,updateNodePositions:U,onNodeDragStop:I,onSelectionDragStop:O}=a();if(j&&(U(m,!1),j=!1),c||I||!D&&O){const[B,q]=Lf({nodeId:D,dragItems:m,nodeLookup:te,dragging:!1});c?.(F.sourceEvent,m,B,q),I?.(F.sourceEvent,B,q),D||O?.(F.sourceEvent,q)}}}).filter(F=>{const te=F.target;return!F.button&&(!R||!Jx(te,`.${R}`,k))&&(!C||Jx(te,C,k))});b.call(Q)}function E(){b?.on(".drag",null)}return{update:N,destroy:E}}function WC(t,a,s){const i=[],c={x:t.x-s,y:t.y-s,width:s*2,height:s*2};for(const u of a.values())ao(c,zr(u))>0&&i.push(u);return i}const KC=250;function JC(t,a,s,i){let c=[],u=1/0;const f=WC(t,s,a+KC);for(const m of f){const p=[...m.internals.handleBounds?.source??[],...m.internals.handleBounds?.target??[]];for(const g of p){if(i.nodeId===g.nodeId&&i.type===g.type&&i.id===g.id)continue;const{x:y,y:x}=Cs(m,g,g.position,!0),b=Math.sqrt(Math.pow(y-t.x,2)+Math.pow(x-t.y,2));b>a||(b<u?(c=[{...g,x:y,y:x}],u=b):b===u&&c.push({...g,x:y,y:x}))}}if(!c.length)return null;if(c.length>1){const m=i.type==="source"?"target":"source";return c.find(p=>p.type===m)??c[0]}return c[0]}function A1(t,a,s,i,c,u=!1){const f=i.get(t);if(!f)return null;const m=c==="strict"?f.internals.handleBounds?.[a]:[...f.internals.handleBounds?.source??[],...f.internals.handleBounds?.target??[]],p=(s?m?.find(g=>g.id===s):m?.[0])??null;return p&&u?{...p,...Cs(f,p,p.position,!0)}:p}function k1(t,a){return t||(a?.classList.contains("target")?"target":a?.classList.contains("source")?"source":null)}function e8(t,a){let s=null;return a?s=!0:t&&!a&&(s=!1),s}const R1=()=>!0;function t8(t,{connectionMode:a,connectionRadius:s,handleId:i,nodeId:c,edgeUpdaterType:u,isTarget:f,domNode:m,nodeLookup:p,lib:g,autoPanOnConnect:y,flowId:x,panBy:b,cancelConnection:S,onConnectStart:j,onConnect:A,onConnectEnd:N,isValidConnection:E=R1,onReconnectEnd:R,updateConnection:C,getTransform:k,getFromHandle:w,autoPanSpeed:D,dragThreshold:M=1,handleDomNode:V}){const L=y1(t.target);let se=0,Q;const{x:F,y:te}=yn(t),U=k1(u,V),I=m?.getBoundingClientRect();let O=!1;if(!I||!U)return;const B=A1(c,U,i,p,a);if(!B)return;let q=yn(t,I),H=!1,W=null,z=!1,Y=null;function Z(){if(!y||!I)return;const[ve,pe]=m1(q,I,D);b({x:ve,y:pe}),se=requestAnimationFrame(Z)}const ae={...B,nodeId:c,type:U,position:B.position},ue=p.get(c);let le={inProgress:!0,isValid:null,from:Cs(ue,ae,xe.Left,!0),fromHandle:ae,fromPosition:ae.position,fromNode:ue,to:q,toHandle:null,toPosition:qx[ae.position],toNode:null,pointer:q};function ce(){O=!0,C(le),j?.(t,{nodeId:c,handleId:i,handleType:U})}M===0&&ce();function de(ve){if(!O){const{x:qe,y:vt}=yn(ve),ut=qe-F,Ct=vt-te;if(!(ut*ut+Ct*Ct>M*M))return;ce()}if(!w()||!ae){we(ve);return}const pe=k();q=yn(ve,I),Q=JC(xo(q,pe,!1,[1,1]),s,p,ae),H||(Z(),H=!0);const ge=D1(ve,{handle:Q,connectionMode:a,fromNodeId:c,fromHandleId:i,fromType:f?"target":"source",isValidConnection:E,doc:L,lib:g,flowId:x,nodeLookup:p});Y=ge.handleDomNode,W=ge.connection,z=e8(!!Q,ge.isValid);const _e=p.get(c),Te=_e?Cs(_e,ae,xe.Left,!0):le.from,me={...le,from:Te,isValid:z,to:ge.toHandle&&z?zc({x:ge.toHandle.x,y:ge.toHandle.y},pe):q,toHandle:ge.toHandle,toPosition:z&&ge.toHandle?ge.toHandle.position:qx[ae.position],toNode:ge.toHandle?p.get(ge.toHandle.nodeId):null,pointer:q};C(me),le=me}function we(ve){if(!("touches"in ve&&ve.touches.length>0)){if(O){(Q||Y)&&W&&z&&A?.(W);const{inProgress:pe,...ge}=le,_e={...ge,toPosition:le.toHandle?le.toPosition:null};N?.(ve,_e),u&&R?.(ve,_e)}S(),cancelAnimationFrame(se),H=!1,z=!1,W=null,Y=null,L.removeEventListener("mousemove",de),L.removeEventListener("mouseup",we),L.removeEventListener("touchmove",de),L.removeEventListener("touchend",we)}}L.addEventListener("mousemove",de),L.addEventListener("mouseup",we),L.addEventListener("touchmove",de),L.addEventListener("touchend",we)}function D1(t,{handle:a,connectionMode:s,fromNodeId:i,fromHandleId:c,fromType:u,doc:f,lib:m,flowId:p,isValidConnection:g=R1,nodeLookup:y}){const x=u==="target",b=a?f.querySelector(`.${m}-flow__handle[data-id="${p}-${a?.nodeId}-${a?.id}-${a?.type}"]`):null,{x:S,y:j}=yn(t),A=f.elementFromPoint(S,j),N=A?.classList.contains(`${m}-flow__handle`)?A:b,E={handleDomNode:N,isValid:!1,connection:null,toHandle:null};if(N){const R=k1(void 0,N),C=N.getAttribute("data-nodeid"),k=N.getAttribute("data-handleid"),w=N.classList.contains("connectable"),D=N.classList.contains("connectableend");if(!C||!R)return E;const M={source:x?C:i,sourceHandle:x?k:c,target:x?i:C,targetHandle:x?c:k};E.connection=M;const L=w&&D&&(s===Rr.Strict?x&&R==="source"||!x&&R==="target":C!==i||k!==c);E.isValid=L&&g(M),E.toHandle=A1(C,R,k,y,s,!0)}return E}const yh={onPointerDown:t8,isValid:D1};function n8({domNode:t,panZoom:a,getTransform:s,getViewScale:i}){const c=Gt(t);function u({translateExtent:m,width:p,height:g,zoomStep:y=1,pannable:x=!0,zoomable:b=!0,inversePan:S=!1}){const j=C=>{if(C.sourceEvent.type!=="wheel"||!a)return;const k=s(),w=C.sourceEvent.ctrlKey&&so()?10:1,D=-C.sourceEvent.deltaY*(C.sourceEvent.deltaMode===1?.05:C.sourceEvent.deltaMode?1:.002)*y,M=k[2]*Math.pow(2,D*w);a.scaleTo(M)};let A=[0,0];const N=C=>{(C.sourceEvent.type==="mousedown"||C.sourceEvent.type==="touchstart")&&(A=[C.sourceEvent.clientX??C.sourceEvent.touches[0].clientX,C.sourceEvent.clientY??C.sourceEvent.touches[0].clientY])},E=C=>{const k=s();if(C.sourceEvent.type!=="mousemove"&&C.sourceEvent.type!=="touchmove"||!a)return;const w=[C.sourceEvent.clientX??C.sourceEvent.touches[0].clientX,C.sourceEvent.clientY??C.sourceEvent.touches[0].clientY],D=[w[0]-A[0],w[1]-A[1]];A=w;const M=i()*Math.max(k[2],Math.log(k[2]))*(S?-1:1),V={x:k[0]-D[0]*M,y:k[1]-D[1]*M},L=[[0,0],[p,g]];a.setViewportConstrained({x:V.x,y:V.y,zoom:k[2]},L,m)},R=i1().on("start",N).on("zoom",x?E:null).on("zoom.wheel",b?j:null);c.call(R,{})}function f(){c.on("zoom",null)}return{update:u,destroy:f,pointer:pn}}const Kc=t=>({x:t.x,y:t.y,zoom:t.k}),Uf=({x:t,y:a,zoom:s})=>Qc.translate(t,a).scale(s),vr=(t,a)=>t.target.closest(`.${a}`),z1=(t,a)=>a===2&&Array.isArray(t)&&t.includes(2),a8=t=>((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2,$f=(t,a=0,s=a8,i=()=>{})=>{const c=typeof a=="number"&&a>0;return c||i(),c?t.transition().duration(a).ease(s).on("end",i):t},O1=t=>{const a=t.ctrlKey&&so()?10:1;return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*a};function s8({zoomPanValues:t,noWheelClassName:a,d3Selection:s,d3Zoom:i,panOnScrollMode:c,panOnScrollSpeed:u,zoomOnPinch:f,onPanZoomStart:m,onPanZoom:p,onPanZoomEnd:g}){return y=>{if(vr(y,a))return y.ctrlKey&&y.preventDefault(),!1;y.preventDefault(),y.stopImmediatePropagation();const x=s.property("__zoom").k||1;if(y.ctrlKey&&f){const N=pn(y),E=O1(y),R=x*Math.pow(2,E);i.scaleTo(s,R,N,y);return}const b=y.deltaMode===1?20:1;let S=c===Ns.Vertical?0:y.deltaX*b,j=c===Ns.Horizontal?0:y.deltaY*b;!so()&&y.shiftKey&&c!==Ns.Vertical&&(S=y.deltaY*b,j=0),i.translateBy(s,-(S/x)*u,-(j/x)*u,{internal:!0});const A=Kc(s.property("__zoom"));clearTimeout(t.panScrollTimeout),t.isPanScrolling?(p?.(y,A),t.panScrollTimeout=setTimeout(()=>{g?.(y,A),t.isPanScrolling=!1},150)):(t.isPanScrolling=!0,m?.(y,A))}}function r8({noWheelClassName:t,preventScrolling:a,d3ZoomHandler:s}){return function(i,c){const u=i.type==="wheel",f=!a&&u&&!i.ctrlKey,m=vr(i,t);if(i.ctrlKey&&u&&m&&i.preventDefault(),f||m)return null;i.preventDefault(),s.call(this,i,c)}}function i8({zoomPanValues:t,onDraggingChange:a,onPanZoomStart:s}){return i=>{if(i.sourceEvent?.internal)return;const c=Kc(i.transform);t.mouseButton=i.sourceEvent?.button||0,t.isZoomingOrPanning=!0,t.prevViewport=c,i.sourceEvent?.type==="mousedown"&&a(!0),s&&s?.(i.sourceEvent,c)}}function o8({zoomPanValues:t,panOnDrag:a,onPaneContextMenu:s,onTransformChange:i,onPanZoom:c}){return u=>{t.usedRightMouseButton=!!(s&&z1(a,t.mouseButton??0)),u.sourceEvent?.sync||i([u.transform.x,u.transform.y,u.transform.k]),c&&!u.sourceEvent?.internal&&c?.(u.sourceEvent,Kc(u.transform))}}function l8({zoomPanValues:t,panOnDrag:a,panOnScroll:s,onDraggingChange:i,onPanZoomEnd:c,onPaneContextMenu:u}){return f=>{if(!f.sourceEvent?.internal&&(t.isZoomingOrPanning=!1,u&&z1(a,t.mouseButton??0)&&!t.usedRightMouseButton&&f.sourceEvent&&u(f.sourceEvent),t.usedRightMouseButton=!1,i(!1),c)){const m=Kc(f.transform);t.prevViewport=m,clearTimeout(t.timerId),t.timerId=setTimeout(()=>{c?.(f.sourceEvent,m)},s?150:0)}}}function c8({zoomActivationKeyPressed:t,zoomOnScroll:a,zoomOnPinch:s,panOnDrag:i,panOnScroll:c,zoomOnDoubleClick:u,userSelectionActive:f,noWheelClassName:m,noPanClassName:p,lib:g,connectionInProgress:y}){return x=>{const b=t||a,S=s&&x.ctrlKey,j=x.type==="wheel";if(x.button===1&&x.type==="mousedown"&&(vr(x,`${g}-flow__node`)||vr(x,`${g}-flow__edge`)))return!0;if(!i&&!b&&!c&&!u&&!s||f||y&&!j||vr(x,m)&&j||vr(x,p)&&(!j||c&&j&&!t)||!s&&x.ctrlKey&&j)return!1;if(!s&&x.type==="touchstart"&&x.touches?.length>1)return x.preventDefault(),!1;if(!b&&!c&&!S&&j||!i&&(x.type==="mousedown"||x.type==="touchstart")||Array.isArray(i)&&!i.includes(x.button)&&x.type==="mousedown")return!1;const A=Array.isArray(i)&&i.includes(x.button)||!x.button||x.button<=1;return(!x.ctrlKey||j)&&A}}function u8({domNode:t,minZoom:a,maxZoom:s,translateExtent:i,viewport:c,onPanZoom:u,onPanZoomStart:f,onPanZoomEnd:m,onDraggingChange:p}){const g={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},y=t.getBoundingClientRect(),x=i1().scaleExtent([a,s]).translateExtent(i),b=Gt(t).call(x);R({x:c.x,y:c.y,zoom:Dr(c.zoom,a,s)},[[0,0],[y.width,y.height]],i);const S=b.on("wheel.zoom"),j=b.on("dblclick.zoom");x.wheelDelta(O1);function A(Q,F){return b?new Promise(te=>{x?.interpolate(F?.interpolate==="linear"?Pi:mc).transform($f(b,F?.duration,F?.ease,()=>te(!0)),Q)}):Promise.resolve(!1)}function N({noWheelClassName:Q,noPanClassName:F,onPaneContextMenu:te,userSelectionActive:U,panOnScroll:I,panOnDrag:O,panOnScrollMode:B,panOnScrollSpeed:q,preventScrolling:H,zoomOnPinch:W,zoomOnScroll:z,zoomOnDoubleClick:Y,zoomActivationKeyPressed:Z,lib:ae,onTransformChange:ue,connectionInProgress:X,paneClickDistance:le,selectionOnDrag:ce}){U&&!g.isZoomingOrPanning&&E();const de=I&&!Z&&!U;x.clickDistance(ce?1/0:!xn(le)||le<0?0:le);const we=de?s8({zoomPanValues:g,noWheelClassName:Q,d3Selection:b,d3Zoom:x,panOnScrollMode:B,panOnScrollSpeed:q,zoomOnPinch:W,onPanZoomStart:f,onPanZoom:u,onPanZoomEnd:m}):r8({noWheelClassName:Q,preventScrolling:H,d3ZoomHandler:S});if(b.on("wheel.zoom",we,{passive:!1}),!U){const pe=i8({zoomPanValues:g,onDraggingChange:p,onPanZoomStart:f});x.on("start",pe);const ge=o8({zoomPanValues:g,panOnDrag:O,onPaneContextMenu:!!te,onPanZoom:u,onTransformChange:ue});x.on("zoom",ge);const _e=l8({zoomPanValues:g,panOnDrag:O,panOnScroll:I,onPaneContextMenu:te,onPanZoomEnd:m,onDraggingChange:p});x.on("end",_e)}const ve=c8({zoomActivationKeyPressed:Z,panOnDrag:O,zoomOnScroll:z,panOnScroll:I,zoomOnDoubleClick:Y,zoomOnPinch:W,userSelectionActive:U,noPanClassName:F,noWheelClassName:Q,lib:ae,connectionInProgress:X});x.filter(ve),Y?b.on("dblclick.zoom",j):b.on("dblclick.zoom",null)}function E(){x.on("zoom",null)}async function R(Q,F,te){const U=Uf(Q),I=x?.constrain()(U,F,te);return I&&await A(I),new Promise(O=>O(I))}async function C(Q,F){const te=Uf(Q);return await A(te,F),new Promise(U=>U(te))}function k(Q){if(b){const F=Uf(Q),te=b.property("__zoom");(te.k!==Q.zoom||te.x!==Q.x||te.y!==Q.y)&&x?.transform(b,F,null,{sync:!0})}}function w(){const Q=b?r1(b.node()):{x:0,y:0,k:1};return{x:Q.x,y:Q.y,zoom:Q.k}}function D(Q,F){return b?new Promise(te=>{x?.interpolate(F?.interpolate==="linear"?Pi:mc).scaleTo($f(b,F?.duration,F?.ease,()=>te(!0)),Q)}):Promise.resolve(!1)}function M(Q,F){return b?new Promise(te=>{x?.interpolate(F?.interpolate==="linear"?Pi:mc).scaleBy($f(b,F?.duration,F?.ease,()=>te(!0)),Q)}):Promise.resolve(!1)}function V(Q){x?.scaleExtent(Q)}function L(Q){x?.translateExtent(Q)}function se(Q){const F=!xn(Q)||Q<0?0:Q;x?.clickDistance(F)}return{update:N,destroy:E,setViewport:C,setViewportConstrained:R,getViewport:w,scaleTo:D,scaleBy:M,setScaleExtent:V,setTranslateExtent:L,syncViewport:k,setClickDistance:se}}var Br;(function(t){t.Line="line",t.Handle="handle"})(Br||(Br={}));function d8({width:t,prevWidth:a,height:s,prevHeight:i,affectsX:c,affectsY:u}){const f=t-a,m=s-i,p=[f>0?1:f<0?-1:0,m>0?1:m<0?-1:0];return f&&c&&(p[0]=p[0]*-1),m&&u&&(p[1]=p[1]*-1),p}function ey(t){const a=t.includes("right")||t.includes("left"),s=t.includes("bottom")||t.includes("top"),i=t.includes("left"),c=t.includes("top");return{isHorizontal:a,isVertical:s,affectsX:i,affectsY:c}}function Va(t,a){return Math.max(0,a-t)}function Ya(t,a){return Math.max(0,t-a)}function ec(t,a,s){return Math.max(0,a-t,t-s)}function ty(t,a){return t?!a:a}function f8(t,a,s,i,c,u,f,m){let{affectsX:p,affectsY:g}=a;const{isHorizontal:y,isVertical:x}=a,b=y&&x,{xSnapped:S,ySnapped:j}=s,{minWidth:A,maxWidth:N,minHeight:E,maxHeight:R}=i,{x:C,y:k,width:w,height:D,aspectRatio:M}=t;let V=Math.floor(y?S-t.pointerX:0),L=Math.floor(x?j-t.pointerY:0);const se=w+(p?-V:V),Q=D+(g?-L:L),F=-u[0]*w,te=-u[1]*D;let U=ec(se,A,N),I=ec(Q,E,R);if(f){let q=0,H=0;p&&V<0?q=Va(C+V+F,f[0][0]):!p&&V>0&&(q=Ya(C+se+F,f[1][0])),g&&L<0?H=Va(k+L+te,f[0][1]):!g&&L>0&&(H=Ya(k+Q+te,f[1][1])),U=Math.max(U,q),I=Math.max(I,H)}if(m){let q=0,H=0;p&&V>0?q=Ya(C+V,m[0][0]):!p&&V<0&&(q=Va(C+se,m[1][0])),g&&L>0?H=Ya(k+L,m[0][1]):!g&&L<0&&(H=Va(k+Q,m[1][1])),U=Math.max(U,q),I=Math.max(I,H)}if(c){if(y){const q=ec(se/M,E,R)*M;if(U=Math.max(U,q),f){let H=0;!p&&!g||p&&!g&&b?H=Ya(k+te+se/M,f[1][1])*M:H=Va(k+te+(p?V:-V)/M,f[0][1])*M,U=Math.max(U,H)}if(m){let H=0;!p&&!g||p&&!g&&b?H=Va(k+se/M,m[1][1])*M:H=Ya(k+(p?V:-V)/M,m[0][1])*M,U=Math.max(U,H)}}if(x){const q=ec(Q*M,A,N)/M;if(I=Math.max(I,q),f){let H=0;!p&&!g||g&&!p&&b?H=Ya(C+Q*M+F,f[1][0])/M:H=Va(C+(g?L:-L)*M+F,f[0][0])/M,I=Math.max(I,H)}if(m){let H=0;!p&&!g||g&&!p&&b?H=Va(C+Q*M,m[1][0])/M:H=Ya(C+(g?L:-L)*M,m[0][0])/M,I=Math.max(I,H)}}}L=L+(L<0?I:-I),V=V+(V<0?U:-U),c&&(b?se>Q*M?L=(ty(p,g)?-V:V)/M:V=(ty(p,g)?-L:L)*M:y?(L=V/M,g=p):(V=L*M,p=g));const O=p?C+V:C,B=g?k+L:k;return{width:w+(p?-V:V),height:D+(g?-L:L),x:u[0]*V*(p?-1:1)+O,y:u[1]*L*(g?-1:1)+B}}const B1={width:0,height:0,x:0,y:0},h8={...B1,pointerX:0,pointerY:0,aspectRatio:1};function m8(t){return[[0,0],[t.measured.width,t.measured.height]]}function p8(t,a,s){const i=a.position.x+t.position.x,c=a.position.y+t.position.y,u=t.measured.width??0,f=t.measured.height??0,m=s[0]*u,p=s[1]*f;return[[i-m,c-p],[i+u-m,c+f-p]]}function g8({domNode:t,nodeId:a,getStoreItems:s,onChange:i,onEnd:c}){const u=Gt(t);let f={controlDirection:ey("bottom-right"),boundaries:{minWidth:0,minHeight:0,maxWidth:Number.MAX_VALUE,maxHeight:Number.MAX_VALUE},resizeDirection:void 0,keepAspectRatio:!1};function m({controlPosition:g,boundaries:y,keepAspectRatio:x,resizeDirection:b,onResizeStart:S,onResize:j,onResizeEnd:A,shouldResize:N}){let E={...B1},R={...h8};f={boundaries:y,resizeDirection:b,keepAspectRatio:x,controlDirection:ey(g)};let C,k=null,w=[],D,M,V,L=!1;const se=Gb().on("start",Q=>{const{nodeLookup:F,transform:te,snapGrid:U,snapToGrid:I,nodeOrigin:O,paneDomNode:B}=s();if(C=F.get(a),!C)return;k=B?.getBoundingClientRect()??null;const{xSnapped:q,ySnapped:H}=Zi(Q.sourceEvent,{transform:te,snapGrid:U,snapToGrid:I,containerBounds:k});E={width:C.measured.width??0,height:C.measured.height??0,x:C.position.x??0,y:C.position.y??0},R={...E,pointerX:q,pointerY:H,aspectRatio:E.width/E.height},D=void 0,C.parentId&&(C.extent==="parent"||C.expandParent)&&(D=F.get(C.parentId),M=D&&C.extent==="parent"?m8(D):void 0),w=[],V=void 0;for(const[W,z]of F)if(z.parentId===a&&(w.push({id:W,position:{...z.position},extent:z.extent}),z.extent==="parent"||z.expandParent)){const Y=p8(z,C,z.origin??O);V?V=[[Math.min(Y[0][0],V[0][0]),Math.min(Y[0][1],V[0][1])],[Math.max(Y[1][0],V[1][0]),Math.max(Y[1][1],V[1][1])]]:V=Y}S?.(Q,{...E})}).on("drag",Q=>{const{transform:F,snapGrid:te,snapToGrid:U,nodeOrigin:I}=s(),O=Zi(Q.sourceEvent,{transform:F,snapGrid:te,snapToGrid:U,containerBounds:k}),B=[];if(!C)return;const{x:q,y:H,width:W,height:z}=E,Y={},Z=C.origin??I,{width:ae,height:ue,x:X,y:le}=f8(R,f.controlDirection,O,f.boundaries,f.keepAspectRatio,Z,M,V),ce=ae!==W,de=ue!==z,we=X!==q&&ce,ve=le!==H&&de;if(!we&&!ve&&!ce&&!de)return;if((we||ve||Z[0]===1||Z[1]===1)&&(Y.x=we?X:E.x,Y.y=ve?le:E.y,E.x=Y.x,E.y=Y.y,w.length>0)){const Te=X-q,me=le-H;for(const qe of w)qe.position={x:qe.position.x-Te+Z[0]*(ae-W),y:qe.position.y-me+Z[1]*(ue-z)},B.push(qe)}if((ce||de)&&(Y.width=ce&&(!f.resizeDirection||f.resizeDirection==="horizontal")?ae:E.width,Y.height=de&&(!f.resizeDirection||f.resizeDirection==="vertical")?ue:E.height,E.width=Y.width,E.height=Y.height),D&&C.expandParent){const Te=Z[0]*(Y.width??0);Y.x&&Y.x<Te&&(E.x=Te,R.x=R.x-(Y.x-Te));const me=Z[1]*(Y.height??0);Y.y&&Y.y<me&&(E.y=me,R.y=R.y-(Y.y-me))}const pe=d8({width:E.width,prevWidth:W,height:E.height,prevHeight:z,affectsX:f.controlDirection.affectsX,affectsY:f.controlDirection.affectsY}),ge={...E,direction:pe};N?.(Q,ge)!==!1&&(L=!0,j?.(Q,ge),i(Y,B))}).on("end",Q=>{L&&(A?.(Q,{...E}),c?.({...E}),L=!1)});u.call(se)}function p(){u.on(".drag",null)}return{update:m,destroy:p}}var qf={exports:{}},Vf={},Yf={exports:{}},Xf={};var ny;function x8(){if(ny)return Xf;ny=1;var t=io();function a(x,b){return x===b&&(x!==0||1/x===1/b)||x!==x&&b!==b}var s=typeof Object.is=="function"?Object.is:a,i=t.useState,c=t.useEffect,u=t.useLayoutEffect,f=t.useDebugValue;function m(x,b){var S=b(),j=i({inst:{value:S,getSnapshot:b}}),A=j[0].inst,N=j[1];return u(function(){A.value=S,A.getSnapshot=b,p(A)&&N({inst:A})},[x,S,b]),c(function(){return p(A)&&N({inst:A}),x(function(){p(A)&&N({inst:A})})},[x]),f(S),S}function p(x){var b=x.getSnapshot;x=x.value;try{var S=b();return!s(x,S)}catch{return!0}}function g(x,b){return b()}var y=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?g:m;return Xf.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:y,Xf}var ay;function y8(){return ay||(ay=1,Yf.exports=x8()),Yf.exports}var sy;function b8(){if(sy)return Vf;sy=1;var t=io(),a=y8();function s(g,y){return g===y&&(g!==0||1/g===1/y)||g!==g&&y!==y}var i=typeof Object.is=="function"?Object.is:s,c=a.useSyncExternalStore,u=t.useRef,f=t.useEffect,m=t.useMemo,p=t.useDebugValue;return Vf.useSyncExternalStoreWithSelector=function(g,y,x,b,S){var j=u(null);if(j.current===null){var A={hasValue:!1,value:null};j.current=A}else A=j.current;j=m(function(){function E(D){if(!R){if(R=!0,C=D,D=b(D),S!==void 0&&A.hasValue){var M=A.value;if(S(M,D))return k=M}return k=D}if(M=k,i(C,D))return M;var V=b(D);return S!==void 0&&S(M,V)?(C=D,M):(C=D,k=V)}var R=!1,C,k,w=x===void 0?null:x;return[function(){return E(y())},w===null?void 0:function(){return E(w())}]},[y,x,b,S]);var N=c(g,j[0],j[1]);return f(function(){A.hasValue=!0,A.value=N},[N]),p(N),N},Vf}var ry;function v8(){return ry||(ry=1,qf.exports=b8()),qf.exports}var w8=v8();const S8=vh(w8),N8={},iy=t=>{let a;const s=new Set,i=(y,x)=>{const b=typeof y=="function"?y(a):y;if(!Object.is(b,a)){const S=a;a=x??(typeof b!="object"||b===null)?b:Object.assign({},a,b),s.forEach(j=>j(a,S))}},c=()=>a,p={setState:i,getState:c,getInitialState:()=>g,subscribe:y=>(s.add(y),()=>s.delete(y)),destroy:()=>{(N8?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),s.clear()}},g=a=t(i,c,p);return p},j8=t=>t?iy(t):iy,{useDebugValue:E8}=br,{useSyncExternalStoreWithSelector:_8}=S8,C8=t=>t;function H1(t,a=C8,s){const i=_8(t.subscribe,t.getState,t.getServerState||t.getInitialState,a,s);return E8(i),i}const oy=(t,a)=>{const s=j8(t),i=(c,u=a)=>H1(s,c,u);return Object.assign(i,s),i},T8=(t,a)=>t?oy(t,a):oy;function Fe(t,a){if(Object.is(t,a))return!0;if(typeof t!="object"||t===null||typeof a!="object"||a===null)return!1;if(t instanceof Map&&a instanceof Map){if(t.size!==a.size)return!1;for(const[i,c]of t)if(!Object.is(c,a.get(i)))return!1;return!0}if(t instanceof Set&&a instanceof Set){if(t.size!==a.size)return!1;for(const i of t)if(!a.has(i))return!1;return!0}const s=Object.keys(t);if(s.length!==Object.keys(a).length)return!1;for(const i of s)if(!Object.prototype.hasOwnProperty.call(a,i)||!Object.is(t[i],a[i]))return!1;return!0}const Jc=_.createContext(null),M8=Jc.Provider,L1=Dn.error001();function ze(t,a){const s=_.useContext(Jc);if(s===null)throw new Error(L1);return H1(s,t,a)}function We(){const t=_.useContext(Jc);if(t===null)throw new Error(L1);return _.useMemo(()=>({getState:t.getState,setState:t.setState,subscribe:t.subscribe}),[t])}const ly={display:"none"},A8={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},U1="react-flow__node-desc",$1="react-flow__edge-desc",k8="react-flow__aria-live",R8=t=>t.ariaLiveMessage,D8=t=>t.ariaLabelConfig;function z8({rfId:t}){const a=ze(R8);return l.jsx("div",{id:`${k8}-${t}`,"aria-live":"assertive","aria-atomic":"true",style:A8,children:a})}function O8({rfId:t,disableKeyboardA11y:a}){const s=ze(D8);return l.jsxs(l.Fragment,{children:[l.jsx("div",{id:`${U1}-${t}`,style:ly,children:a?s["node.a11yDescription.default"]:s["node.a11yDescription.keyboardDisabled"]}),l.jsx("div",{id:`${$1}-${t}`,style:ly,children:s["edge.a11yDescription.default"]}),!a&&l.jsx(z8,{rfId:t})]})}const eu=_.forwardRef(({position:t="top-left",children:a,className:s,style:i,...c},u)=>{const f=`${t}`.split("-");return l.jsx("div",{className:ct(["react-flow__panel",s,...f]),style:i,ref:u,...c,children:a})});eu.displayName="Panel";function B8({proOptions:t,position:a="bottom-right"}){return t?.hideAttribution?null:l.jsx(eu,{position:a,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:l.jsx("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const H8=t=>{const a=[],s=[];for(const[,i]of t.nodeLookup)i.selected&&a.push(i.internals.userNode);for(const[,i]of t.edgeLookup)i.selected&&s.push(i);return{selectedNodes:a,selectedEdges:s}},tc=t=>t.id;function L8(t,a){return Fe(t.selectedNodes.map(tc),a.selectedNodes.map(tc))&&Fe(t.selectedEdges.map(tc),a.selectedEdges.map(tc))}function U8({onSelectionChange:t}){const a=We(),{selectedNodes:s,selectedEdges:i}=ze(H8,L8);return _.useEffect(()=>{const c={nodes:s,edges:i};t?.(c),a.getState().onSelectionChangeHandlers.forEach(u=>u(c))},[s,i,t]),null}const $8=t=>!!t.onSelectionChangeHandlers;function q8({onSelectionChange:t}){const a=ze($8);return t||a?l.jsx(U8,{onSelectionChange:t}):null}const q1=[0,0],V8={x:0,y:0,zoom:1},Y8=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","autoPanOnNodeFocus","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","connectionDragThreshold","onBeforeDelete","debug","autoPanSpeed","ariaLabelConfig","zIndexMode"],cy=[...Y8,"rfId"],X8=t=>({setNodes:t.setNodes,setEdges:t.setEdges,setMinZoom:t.setMinZoom,setMaxZoom:t.setMaxZoom,setTranslateExtent:t.setTranslateExtent,setNodeExtent:t.setNodeExtent,reset:t.reset,setDefaultNodesAndEdges:t.setDefaultNodesAndEdges}),uy={translateExtent:to,nodeOrigin:q1,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1"};function G8(t){const{setNodes:a,setEdges:s,setMinZoom:i,setMaxZoom:c,setTranslateExtent:u,setNodeExtent:f,reset:m,setDefaultNodesAndEdges:p}=ze(X8,Fe),g=We();_.useEffect(()=>(p(t.defaultNodes,t.defaultEdges),()=>{y.current=uy,m()}),[]);const y=_.useRef(uy);return _.useEffect(()=>{for(const x of cy){const b=t[x],S=y.current[x];b!==S&&(typeof t[x]>"u"||(x==="nodes"?a(b):x==="edges"?s(b):x==="minZoom"?i(b):x==="maxZoom"?c(b):x==="translateExtent"?u(b):x==="nodeExtent"?f(b):x==="ariaLabelConfig"?g.setState({ariaLabelConfig:MC(b)}):x==="fitView"?g.setState({fitViewQueued:b}):x==="fitViewOptions"?g.setState({fitViewOptions:b}):g.setState({[x]:b})))}y.current=t},cy.map(x=>t[x])),null}function dy(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function I8(t){const[a,s]=_.useState(t==="system"?null:t);return _.useEffect(()=>{if(t!=="system"){s(t);return}const i=dy(),c=()=>s(i?.matches?"dark":"light");return c(),i?.addEventListener("change",c),()=>{i?.removeEventListener("change",c)}},[t]),a!==null?a:dy()?.matches?"dark":"light"}const fy=typeof document<"u"?document:null;function ro(t=null,a={target:fy,actInsideInputWithModifier:!0}){const[s,i]=_.useState(!1),c=_.useRef(!1),u=_.useRef(new Set([])),[f,m]=_.useMemo(()=>{if(t!==null){const g=(Array.isArray(t)?t:[t]).filter(x=>typeof x=="string").map(x=>x.replace("+",`
`).replace(`

`,`
+`).split(`
`)),y=g.reduce((x,b)=>x.concat(...b),[]);return[g,y]}return[[],[]]},[t]);return _.useEffect(()=>{const p=a?.target??fy,g=a?.actInsideInputWithModifier??!0;if(t!==null){const y=S=>{if(c.current=S.ctrlKey||S.metaKey||S.shiftKey||S.altKey,(!c.current||c.current&&!g)&&b1(S))return!1;const A=my(S.code,m);if(u.current.add(S[A]),hy(f,u.current,!1)){const N=S.composedPath?.()?.[0]||S.target,E=N?.nodeName==="BUTTON"||N?.nodeName==="A";a.preventDefault!==!1&&(c.current||!E)&&S.preventDefault(),i(!0)}},x=S=>{const j=my(S.code,m);hy(f,u.current,!0)?(i(!1),u.current.clear()):u.current.delete(S[j]),S.key==="Meta"&&u.current.clear(),c.current=!1},b=()=>{u.current.clear(),i(!1)};return p?.addEventListener("keydown",y),p?.addEventListener("keyup",x),window.addEventListener("blur",b),window.addEventListener("contextmenu",b),()=>{p?.removeEventListener("keydown",y),p?.removeEventListener("keyup",x),window.removeEventListener("blur",b),window.removeEventListener("contextmenu",b)}}},[t,i]),s}function hy(t,a,s){return t.filter(i=>s||i.length===a.size).some(i=>i.every(c=>a.has(c)))}function my(t,a){return a.includes(t)?"code":"key"}const P8=()=>{const t=We();return _.useMemo(()=>({zoomIn:a=>{const{panZoom:s}=t.getState();return s?s.scaleBy(1.2,{duration:a?.duration}):Promise.resolve(!1)},zoomOut:a=>{const{panZoom:s}=t.getState();return s?s.scaleBy(1/1.2,{duration:a?.duration}):Promise.resolve(!1)},zoomTo:(a,s)=>{const{panZoom:i}=t.getState();return i?i.scaleTo(a,{duration:s?.duration}):Promise.resolve(!1)},getZoom:()=>t.getState().transform[2],setViewport:async(a,s)=>{const{transform:[i,c,u],panZoom:f}=t.getState();return f?(await f.setViewport({x:a.x??i,y:a.y??c,zoom:a.zoom??u},s),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[a,s,i]=t.getState().transform;return{x:a,y:s,zoom:i}},setCenter:async(a,s,i)=>t.getState().setCenter(a,s,i),fitBounds:async(a,s)=>{const{width:i,height:c,minZoom:u,maxZoom:f,panZoom:m}=t.getState(),p=Qh(a,i,c,u,f,s?.padding??.1);return m?(await m.setViewport(p,{duration:s?.duration,ease:s?.ease,interpolate:s?.interpolate}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(a,s={})=>{const{transform:i,snapGrid:c,snapToGrid:u,domNode:f}=t.getState();if(!f)return a;const{x:m,y:p}=f.getBoundingClientRect(),g={x:a.x-m,y:a.y-p},y=s.snapGrid??c,x=s.snapToGrid??u;return xo(g,i,x,y)},flowToScreenPosition:a=>{const{transform:s,domNode:i}=t.getState();if(!i)return a;const{x:c,y:u}=i.getBoundingClientRect(),f=zc(a,s);return{x:f.x+c,y:f.y+u}}}),[])};function V1(t,a){const s=[],i=new Map,c=[];for(const u of t)if(u.type==="add"){c.push(u);continue}else if(u.type==="remove"||u.type==="replace")i.set(u.id,[u]);else{const f=i.get(u.id);f?f.push(u):i.set(u.id,[u])}for(const u of a){const f=i.get(u.id);if(!f){s.push(u);continue}if(f[0].type==="remove")continue;if(f[0].type==="replace"){s.push({...f[0].item});continue}const m={...u};for(const p of f)Z8(p,m);s.push(m)}return c.length&&c.forEach(u=>{u.index!==void 0?s.splice(u.index,0,{...u.item}):s.push({...u.item})}),s}function Z8(t,a){switch(t.type){case"select":{a.selected=t.selected;break}case"position":{typeof t.position<"u"&&(a.position=t.position),typeof t.dragging<"u"&&(a.dragging=t.dragging);break}case"dimensions":{typeof t.dimensions<"u"&&(a.measured={...t.dimensions},t.setAttributes&&((t.setAttributes===!0||t.setAttributes==="width")&&(a.width=t.dimensions.width),(t.setAttributes===!0||t.setAttributes==="height")&&(a.height=t.dimensions.height))),typeof t.resizing=="boolean"&&(a.resizing=t.resizing);break}}}function Y1(t,a){return V1(t,a)}function X1(t,a){return V1(t,a)}function ys(t,a){return{id:t,type:"select",selected:a}}function wr(t,a=new Set,s=!1){const i=[];for(const[c,u]of t){const f=a.has(c);!(u.selected===void 0&&!f)&&u.selected!==f&&(s&&(u.selected=f),i.push(ys(u.id,f)))}return i}function py({items:t=[],lookup:a}){const s=[],i=new Map(t.map(c=>[c.id,c]));for(const[c,u]of t.entries()){const f=a.get(u.id),m=f?.internals?.userNode??f;m!==void 0&&m!==u&&s.push({id:u.id,item:u,type:"replace"}),m===void 0&&s.push({item:u,type:"add",index:c})}for(const[c]of a)i.get(c)===void 0&&s.push({id:c,type:"remove"});return s}function gy(t){return{id:t.id,type:"remove"}}const xy=t=>bC(t),Q8=t=>d1(t);function G1(t){return _.forwardRef(t)}const F8=typeof window<"u"?_.useLayoutEffect:_.useEffect;function yy(t){const[a,s]=_.useState(BigInt(0)),[i]=_.useState(()=>W8(()=>s(c=>c+BigInt(1))));return F8(()=>{const c=i.get();c.length&&(t(c),i.reset())},[a]),i}function W8(t){let a=[];return{get:()=>a,reset:()=>{a=[]},push:s=>{a.push(s),t()}}}const I1=_.createContext(null);function K8({children:t}){const a=We(),s=_.useCallback(m=>{const{nodes:p=[],setNodes:g,hasDefaultNodes:y,onNodesChange:x,nodeLookup:b,fitViewQueued:S,onNodesChangeMiddlewareMap:j}=a.getState();let A=p;for(const E of m)A=typeof E=="function"?E(A):E;let N=py({items:A,lookup:b});for(const E of j.values())N=E(N);y&&g(A),N.length>0?x?.(N):S&&window.requestAnimationFrame(()=>{const{fitViewQueued:E,nodes:R,setNodes:C}=a.getState();E&&C(R)})},[]),i=yy(s),c=_.useCallback(m=>{const{edges:p=[],setEdges:g,hasDefaultEdges:y,onEdgesChange:x,edgeLookup:b}=a.getState();let S=p;for(const j of m)S=typeof j=="function"?j(S):j;y?g(S):x&&x(py({items:S,lookup:b}))},[]),u=yy(c),f=_.useMemo(()=>({nodeQueue:i,edgeQueue:u}),[]);return l.jsx(I1.Provider,{value:f,children:t})}function J8(){const t=_.useContext(I1);if(!t)throw new Error("useBatchContext must be used within a BatchProvider");return t}const eT=t=>!!t.panZoom;function nm(){const t=P8(),a=We(),s=J8(),i=ze(eT),c=_.useMemo(()=>{const u=x=>a.getState().nodeLookup.get(x),f=x=>{s.nodeQueue.push(x)},m=x=>{s.edgeQueue.push(x)},p=x=>{const{nodeLookup:b,nodeOrigin:S}=a.getState(),j=xy(x)?x:b.get(x.id),A=j.parentId?x1(j.position,j.measured,j.parentId,b,S):j.position,N={...j,position:A,width:j.measured?.width??j.width,height:j.measured?.height??j.height};return zr(N)},g=(x,b,S={replace:!1})=>{f(j=>j.map(A=>{if(A.id===x){const N=typeof b=="function"?b(A):b;return S.replace&&xy(N)?N:{...A,...N}}return A}))},y=(x,b,S={replace:!1})=>{m(j=>j.map(A=>{if(A.id===x){const N=typeof b=="function"?b(A):b;return S.replace&&Q8(N)?N:{...A,...N}}return A}))};return{getNodes:()=>a.getState().nodes.map(x=>({...x})),getNode:x=>u(x)?.internals.userNode,getInternalNode:u,getEdges:()=>{const{edges:x=[]}=a.getState();return x.map(b=>({...b}))},getEdge:x=>a.getState().edgeLookup.get(x),setNodes:f,setEdges:m,addNodes:x=>{const b=Array.isArray(x)?x:[x];s.nodeQueue.push(S=>[...S,...b])},addEdges:x=>{const b=Array.isArray(x)?x:[x];s.edgeQueue.push(S=>[...S,...b])},toObject:()=>{const{nodes:x=[],edges:b=[],transform:S}=a.getState(),[j,A,N]=S;return{nodes:x.map(E=>({...E})),edges:b.map(E=>({...E})),viewport:{x:j,y:A,zoom:N}}},deleteElements:async({nodes:x=[],edges:b=[]})=>{const{nodes:S,edges:j,onNodesDelete:A,onEdgesDelete:N,triggerNodeChanges:E,triggerEdgeChanges:R,onDelete:C,onBeforeDelete:k}=a.getState(),{nodes:w,edges:D}=await jC({nodesToRemove:x,edgesToRemove:b,nodes:S,edges:j,onBeforeDelete:k}),M=D.length>0,V=w.length>0;if(M){const L=D.map(gy);N?.(D),R(L)}if(V){const L=w.map(gy);A?.(w),E(L)}return(V||M)&&C?.({nodes:w,edges:D}),{deletedNodes:w,deletedEdges:D}},getIntersectingNodes:(x,b=!0,S)=>{const j=Yx(x),A=j?x:p(x),N=S!==void 0;return A?(S||a.getState().nodes).filter(E=>{const R=a.getState().nodeLookup.get(E.id);if(R&&!j&&(E.id===x.id||!R.internals.positionAbsolute))return!1;const C=zr(N?E:R),k=ao(C,A);return b&&k>0||k>=C.width*C.height||k>=A.width*A.height}):[]},isNodeIntersecting:(x,b,S=!0)=>{const A=Yx(x)?x:p(x);if(!A)return!1;const N=ao(A,b);return S&&N>0||N>=b.width*b.height||N>=A.width*A.height},updateNode:g,updateNodeData:(x,b,S={replace:!1})=>{g(x,j=>{const A=typeof b=="function"?b(j):b;return S.replace?{...j,data:A}:{...j,data:{...j.data,...A}}},S)},updateEdge:y,updateEdgeData:(x,b,S={replace:!1})=>{y(x,j=>{const A=typeof b=="function"?b(j):b;return S.replace?{...j,data:A}:{...j,data:{...j.data,...A}}},S)},getNodesBounds:x=>{const{nodeLookup:b,nodeOrigin:S}=a.getState();return vC(x,{nodeLookup:b,nodeOrigin:S})},getHandleConnections:({type:x,id:b,nodeId:S})=>Array.from(a.getState().connectionLookup.get(`${S}-${x}${b?`-${b}`:""}`)?.values()??[]),getNodeConnections:({type:x,handleId:b,nodeId:S})=>Array.from(a.getState().connectionLookup.get(`${S}${x?b?`-${x}-${b}`:`-${x}`:""}`)?.values()??[]),fitView:async x=>{const b=a.getState().fitViewResolver??TC();return a.setState({fitViewQueued:!0,fitViewOptions:x,fitViewResolver:b}),s.nodeQueue.push(S=>[...S]),b.promise}}},[]);return _.useMemo(()=>({...c,...t,viewportInitialized:i}),[i])}const by=t=>t.selected,tT=typeof window<"u"?window:void 0;function nT({deleteKeyCode:t,multiSelectionKeyCode:a}){const s=We(),{deleteElements:i}=nm(),c=ro(t,{actInsideInputWithModifier:!1}),u=ro(a,{target:tT});_.useEffect(()=>{if(c){const{edges:f,nodes:m}=s.getState();i({nodes:m.filter(by),edges:f.filter(by)}),s.setState({nodesSelectionActive:!1})}},[c]),_.useEffect(()=>{s.setState({multiSelectionActive:u})},[u])}function aT(t){const a=We();_.useEffect(()=>{const s=()=>{if(!t.current||!(t.current.checkVisibility?.()??!0))return!1;const i=Fh(t.current);(i.height===0||i.width===0)&&a.getState().onError?.("004",Dn.error004()),a.setState({width:i.width||500,height:i.height||500})};if(t.current){s(),window.addEventListener("resize",s);const i=new ResizeObserver(()=>s());return i.observe(t.current),()=>{window.removeEventListener("resize",s),i&&t.current&&i.unobserve(t.current)}}},[])}const tu={position:"absolute",width:"100%",height:"100%",top:0,left:0},sT=t=>({userSelectionActive:t.userSelectionActive,lib:t.lib,connectionInProgress:t.connection.inProgress});function rT({onPaneContextMenu:t,zoomOnScroll:a=!0,zoomOnPinch:s=!0,panOnScroll:i=!1,panOnScrollSpeed:c=.5,panOnScrollMode:u=Ns.Free,zoomOnDoubleClick:f=!0,panOnDrag:m=!0,defaultViewport:p,translateExtent:g,minZoom:y,maxZoom:x,zoomActivationKeyCode:b,preventScrolling:S=!0,children:j,noWheelClassName:A,noPanClassName:N,onViewportChange:E,isControlledViewport:R,paneClickDistance:C,selectionOnDrag:k}){const w=We(),D=_.useRef(null),{userSelectionActive:M,lib:V,connectionInProgress:L}=ze(sT,Fe),se=ro(b),Q=_.useRef();aT(D);const F=_.useCallback(te=>{E?.({x:te[0],y:te[1],zoom:te[2]}),R||w.setState({transform:te})},[E,R]);return _.useEffect(()=>{if(D.current){Q.current=u8({domNode:D.current,minZoom:y,maxZoom:x,translateExtent:g,viewport:p,onDraggingChange:O=>w.setState({paneDragging:O}),onPanZoomStart:(O,B)=>{const{onViewportChangeStart:q,onMoveStart:H}=w.getState();H?.(O,B),q?.(B)},onPanZoom:(O,B)=>{const{onViewportChange:q,onMove:H}=w.getState();H?.(O,B),q?.(B)},onPanZoomEnd:(O,B)=>{const{onViewportChangeEnd:q,onMoveEnd:H}=w.getState();H?.(O,B),q?.(B)}});const{x:te,y:U,zoom:I}=Q.current.getViewport();return w.setState({panZoom:Q.current,transform:[te,U,I],domNode:D.current.closest(".react-flow")}),()=>{Q.current?.destroy()}}},[]),_.useEffect(()=>{Q.current?.update({onPaneContextMenu:t,zoomOnScroll:a,zoomOnPinch:s,panOnScroll:i,panOnScrollSpeed:c,panOnScrollMode:u,zoomOnDoubleClick:f,panOnDrag:m,zoomActivationKeyPressed:se,preventScrolling:S,noPanClassName:N,userSelectionActive:M,noWheelClassName:A,lib:V,onTransformChange:F,connectionInProgress:L,selectionOnDrag:k,paneClickDistance:C})},[t,a,s,i,c,u,f,m,se,S,N,M,A,V,F,L,k,C]),l.jsx("div",{className:"react-flow__renderer",ref:D,style:tu,children:j})}const iT=t=>({userSelectionActive:t.userSelectionActive,userSelectionRect:t.userSelectionRect});function oT(){const{userSelectionActive:t,userSelectionRect:a}=ze(iT,Fe);return t&&a?l.jsx("div",{className:"react-flow__selection react-flow__container",style:{width:a.width,height:a.height,transform:`translate(${a.x}px, ${a.y}px)`}}):null}const Gf=(t,a)=>s=>{s.target===a.current&&t?.(s)},lT=t=>({userSelectionActive:t.userSelectionActive,elementsSelectable:t.elementsSelectable,connectionInProgress:t.connection.inProgress,dragging:t.paneDragging});function cT({isSelecting:t,selectionKeyPressed:a,selectionMode:s=no.Full,panOnDrag:i,paneClickDistance:c,selectionOnDrag:u,onSelectionStart:f,onSelectionEnd:m,onPaneClick:p,onPaneContextMenu:g,onPaneScroll:y,onPaneMouseEnter:x,onPaneMouseMove:b,onPaneMouseLeave:S,children:j}){const A=We(),{userSelectionActive:N,elementsSelectable:E,dragging:R,connectionInProgress:C}=ze(lT,Fe),k=E&&(t||N),w=_.useRef(null),D=_.useRef(),M=_.useRef(new Set),V=_.useRef(new Set),L=_.useRef(!1),se=q=>{if(L.current||C){L.current=!1;return}p?.(q),A.getState().resetSelectedElements(),A.setState({nodesSelectionActive:!1})},Q=q=>{if(Array.isArray(i)&&i?.includes(2)){q.preventDefault();return}g?.(q)},F=y?q=>y(q):void 0,te=q=>{L.current&&(q.stopPropagation(),L.current=!1)},U=q=>{const{domNode:H}=A.getState();if(D.current=H?.getBoundingClientRect(),!D.current)return;const W=q.target===w.current;if(!W&&!!q.target.closest(".nokey")||!t||!(u&&W||a)||q.button!==0||!q.isPrimary)return;q.target?.setPointerCapture?.(q.pointerId),L.current=!1;const{x:Z,y:ae}=yn(q.nativeEvent,D.current);A.setState({userSelectionRect:{width:0,height:0,startX:Z,startY:ae,x:Z,y:ae}}),W||(q.stopPropagation(),q.preventDefault())},I=q=>{const{userSelectionRect:H,transform:W,nodeLookup:z,edgeLookup:Y,connectionLookup:Z,triggerNodeChanges:ae,triggerEdgeChanges:ue,defaultEdgeOptions:X,resetSelectedElements:le}=A.getState();if(!D.current||!H)return;const{x:ce,y:de}=yn(q.nativeEvent,D.current),{startX:we,startY:ve}=H;if(!L.current){const me=a?0:c;if(Math.hypot(ce-we,de-ve)<=me)return;le(),f?.(q)}L.current=!0;const pe={startX:we,startY:ve,x:ce<we?ce:we,y:de<ve?de:ve,width:Math.abs(ce-we),height:Math.abs(de-ve)},ge=M.current,_e=V.current;M.current=new Set(Zh(z,pe,W,s===no.Partial,!0).map(me=>me.id)),V.current=new Set;const Te=X?.selectable??!0;for(const me of M.current){const qe=Z.get(me);if(qe)for(const{edgeId:vt}of qe.values()){const ut=Y.get(vt);ut&&(ut.selectable??Te)&&V.current.add(vt)}}if(!Xx(ge,M.current)){const me=wr(z,M.current,!0);ae(me)}if(!Xx(_e,V.current)){const me=wr(Y,V.current);ue(me)}A.setState({userSelectionRect:pe,userSelectionActive:!0,nodesSelectionActive:!1})},O=q=>{q.button===0&&(q.target?.releasePointerCapture?.(q.pointerId),!N&&q.target===w.current&&A.getState().userSelectionRect&&se?.(q),A.setState({userSelectionActive:!1,userSelectionRect:null}),L.current&&(m?.(q),A.setState({nodesSelectionActive:M.current.size>0})))},B=i===!0||Array.isArray(i)&&i.includes(0);return l.jsxs("div",{className:ct(["react-flow__pane",{draggable:B,dragging:R,selection:t}]),onClick:k?void 0:Gf(se,w),onContextMenu:Gf(Q,w),onWheel:Gf(F,w),onPointerEnter:k?void 0:x,onPointerMove:k?I:b,onPointerUp:k?O:void 0,onPointerDownCapture:k?U:void 0,onClickCapture:k?te:void 0,onPointerLeave:S,ref:w,style:tu,children:[j,l.jsx(oT,{})]})}function bh({id:t,store:a,unselect:s=!1,nodeRef:i}){const{addSelectedNodes:c,unselectNodesAndEdges:u,multiSelectionActive:f,nodeLookup:m,onError:p}=a.getState(),g=m.get(t);if(!g){p?.("012",Dn.error012(t));return}a.setState({nodesSelectionActive:!1}),g.selected?(s||g.selected&&f)&&(u({nodes:[g],edges:[]}),requestAnimationFrame(()=>i?.current?.blur())):c([t])}function P1({nodeRef:t,disabled:a=!1,noDragClassName:s,handleSelector:i,nodeId:c,isSelectable:u,nodeClickDistance:f}){const m=We(),[p,g]=_.useState(!1),y=_.useRef();return _.useEffect(()=>{y.current=FC({getStoreItems:()=>m.getState(),onNodeMouseDown:x=>{bh({id:x,store:m,nodeRef:t})},onDragStart:()=>{g(!0)},onDragStop:()=>{g(!1)}})},[]),_.useEffect(()=>{if(a)y.current?.destroy();else if(t.current)return y.current?.update({noDragClassName:s,handleSelector:i,domNode:t.current,isSelectable:u,nodeId:c,nodeClickDistance:f}),()=>{y.current?.destroy()}},[s,i,a,u,t,c]),p}const uT=t=>a=>a.selected&&(a.draggable||t&&typeof a.draggable>"u");function Z1(){const t=We();return _.useCallback(s=>{const{nodeExtent:i,snapToGrid:c,snapGrid:u,nodesDraggable:f,onError:m,updateNodePositions:p,nodeLookup:g,nodeOrigin:y}=t.getState(),x=new Map,b=uT(f),S=c?u[0]:5,j=c?u[1]:5,A=s.direction.x*S*s.factor,N=s.direction.y*j*s.factor;for(const[,E]of g){if(!b(E))continue;let R={x:E.internals.positionAbsolute.x+A,y:E.internals.positionAbsolute.y+N};c&&(R=go(R,u));const{position:C,positionAbsolute:k}=f1({nodeId:E.id,nextPosition:R,nodeLookup:g,nodeExtent:i,nodeOrigin:y,onError:m});E.position=C,E.internals.positionAbsolute=k,x.set(E.id,E)}p(x)},[])}const am=_.createContext(null),dT=am.Provider;am.Consumer;const Q1=()=>_.useContext(am),fT=t=>({connectOnClick:t.connectOnClick,noPanClassName:t.noPanClassName,rfId:t.rfId}),hT=(t,a,s)=>i=>{const{connectionClickStartHandle:c,connectionMode:u,connection:f}=i,{fromHandle:m,toHandle:p,isValid:g}=f,y=p?.nodeId===t&&p?.id===a&&p?.type===s;return{connectingFrom:m?.nodeId===t&&m?.id===a&&m?.type===s,connectingTo:y,clickConnecting:c?.nodeId===t&&c?.id===a&&c?.type===s,isPossibleEndHandle:u===Rr.Strict?m?.type!==s:t!==m?.nodeId||a!==m?.id,connectionInProcess:!!m,clickConnectionInProcess:!!c,valid:y&&g}};function mT({type:t="source",position:a=xe.Top,isValidConnection:s,isConnectable:i=!0,isConnectableStart:c=!0,isConnectableEnd:u=!0,id:f,onConnect:m,children:p,className:g,onMouseDown:y,onTouchStart:x,...b},S){const j=f||null,A=t==="target",N=We(),E=Q1(),{connectOnClick:R,noPanClassName:C,rfId:k}=ze(fT,Fe),{connectingFrom:w,connectingTo:D,clickConnecting:M,isPossibleEndHandle:V,connectionInProcess:L,clickConnectionInProcess:se,valid:Q}=ze(hT(E,j,t),Fe);E||N.getState().onError?.("010",Dn.error010());const F=I=>{const{defaultEdgeOptions:O,onConnect:B,hasDefaultEdges:q}=N.getState(),H={...O,...I};if(q){const{edges:W,setEdges:z}=N.getState();z(j1(H,W))}B?.(H),m?.(H)},te=I=>{if(!E)return;const O=v1(I.nativeEvent);if(c&&(O&&I.button===0||!O)){const B=N.getState();yh.onPointerDown(I.nativeEvent,{handleDomNode:I.currentTarget,autoPanOnConnect:B.autoPanOnConnect,connectionMode:B.connectionMode,connectionRadius:B.connectionRadius,domNode:B.domNode,nodeLookup:B.nodeLookup,lib:B.lib,isTarget:A,handleId:j,nodeId:E,flowId:B.rfId,panBy:B.panBy,cancelConnection:B.cancelConnection,onConnectStart:B.onConnectStart,onConnectEnd:B.onConnectEnd,updateConnection:B.updateConnection,onConnect:F,isValidConnection:s||B.isValidConnection,getTransform:()=>N.getState().transform,getFromHandle:()=>N.getState().connection.fromHandle,autoPanSpeed:B.autoPanSpeed,dragThreshold:B.connectionDragThreshold})}O?y?.(I):x?.(I)},U=I=>{const{onClickConnectStart:O,onClickConnectEnd:B,connectionClickStartHandle:q,connectionMode:H,isValidConnection:W,lib:z,rfId:Y,nodeLookup:Z,connection:ae}=N.getState();if(!E||!q&&!c)return;if(!q){O?.(I.nativeEvent,{nodeId:E,handleId:j,handleType:t}),N.setState({connectionClickStartHandle:{nodeId:E,type:t,id:j}});return}const ue=y1(I.target),X=s||W,{connection:le,isValid:ce}=yh.isValid(I.nativeEvent,{handle:{nodeId:E,id:j,type:t},connectionMode:H,fromNodeId:q.nodeId,fromHandleId:q.id||null,fromType:q.type,isValidConnection:X,flowId:Y,doc:ue,lib:z,nodeLookup:Z});ce&&le&&F(le);const de=structuredClone(ae);delete de.inProgress,de.toPosition=de.toHandle?de.toHandle.position:null,B?.(I,de),N.setState({connectionClickStartHandle:null})};return l.jsx("div",{"data-handleid":j,"data-nodeid":E,"data-handlepos":a,"data-id":`${k}-${E}-${j}-${t}`,className:ct(["react-flow__handle",`react-flow__handle-${a}`,"nodrag",C,g,{source:!A,target:A,connectable:i,connectablestart:c,connectableend:u,clickconnecting:M,connectingfrom:w,connectingto:D,valid:Q,connectionindicator:i&&(!L||V)&&(L||se?u:c)}]),onMouseDown:te,onTouchStart:te,onClick:R?U:void 0,ref:S,...b,children:p})}const Hr=_.memo(G1(mT));function pT({data:t,isConnectable:a,sourcePosition:s=xe.Bottom}){return l.jsxs(l.Fragment,{children:[t?.label,l.jsx(Hr,{type:"source",position:s,isConnectable:a})]})}function gT({data:t,isConnectable:a,targetPosition:s=xe.Top,sourcePosition:i=xe.Bottom}){return l.jsxs(l.Fragment,{children:[l.jsx(Hr,{type:"target",position:s,isConnectable:a}),t?.label,l.jsx(Hr,{type:"source",position:i,isConnectable:a})]})}function xT(){return null}function yT({data:t,isConnectable:a,targetPosition:s=xe.Top}){return l.jsxs(l.Fragment,{children:[l.jsx(Hr,{type:"target",position:s,isConnectable:a}),t?.label]})}const Oc={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},vy={input:pT,default:gT,output:yT,group:xT};function bT(t){return t.internals.handleBounds===void 0?{width:t.width??t.initialWidth??t.style?.width,height:t.height??t.initialHeight??t.style?.height}:{width:t.width??t.style?.width,height:t.height??t.style?.height}}const vT=t=>{const{width:a,height:s,x:i,y:c}=po(t.nodeLookup,{filter:u=>!!u.selected});return{width:xn(a)?a:null,height:xn(s)?s:null,userSelectionActive:t.userSelectionActive,transformString:`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]}) translate(${i}px,${c}px)`}};function wT({onSelectionContextMenu:t,noPanClassName:a,disableKeyboardA11y:s}){const i=We(),{width:c,height:u,transformString:f,userSelectionActive:m}=ze(vT,Fe),p=Z1(),g=_.useRef(null);if(_.useEffect(()=>{s||g.current?.focus({preventScroll:!0})},[s]),P1({nodeRef:g}),m||!c||!u)return null;const y=t?b=>{const S=i.getState().nodes.filter(j=>j.selected);t(b,S)}:void 0,x=b=>{Object.prototype.hasOwnProperty.call(Oc,b.key)&&(b.preventDefault(),p({direction:Oc[b.key],factor:b.shiftKey?4:1}))};return l.jsx("div",{className:ct(["react-flow__nodesselection","react-flow__container",a]),style:{transform:f},children:l.jsx("div",{ref:g,className:"react-flow__nodesselection-rect",onContextMenu:y,tabIndex:s?void 0:-1,onKeyDown:s?void 0:x,style:{width:c,height:u}})})}const wy=typeof window<"u"?window:void 0,ST=t=>({nodesSelectionActive:t.nodesSelectionActive,userSelectionActive:t.userSelectionActive});function F1({children:t,onPaneClick:a,onPaneMouseEnter:s,onPaneMouseMove:i,onPaneMouseLeave:c,onPaneContextMenu:u,onPaneScroll:f,paneClickDistance:m,deleteKeyCode:p,selectionKeyCode:g,selectionOnDrag:y,selectionMode:x,onSelectionStart:b,onSelectionEnd:S,multiSelectionKeyCode:j,panActivationKeyCode:A,zoomActivationKeyCode:N,elementsSelectable:E,zoomOnScroll:R,zoomOnPinch:C,panOnScroll:k,panOnScrollSpeed:w,panOnScrollMode:D,zoomOnDoubleClick:M,panOnDrag:V,defaultViewport:L,translateExtent:se,minZoom:Q,maxZoom:F,preventScrolling:te,onSelectionContextMenu:U,noWheelClassName:I,noPanClassName:O,disableKeyboardA11y:B,onViewportChange:q,isControlledViewport:H}){const{nodesSelectionActive:W,userSelectionActive:z}=ze(ST,Fe),Y=ro(g,{target:wy}),Z=ro(A,{target:wy}),ae=Z||V,ue=Z||k,X=y&&ae!==!0,le=Y||z||X;return nT({deleteKeyCode:p,multiSelectionKeyCode:j}),l.jsx(rT,{onPaneContextMenu:u,elementsSelectable:E,zoomOnScroll:R,zoomOnPinch:C,panOnScroll:ue,panOnScrollSpeed:w,panOnScrollMode:D,zoomOnDoubleClick:M,panOnDrag:!Y&&ae,defaultViewport:L,translateExtent:se,minZoom:Q,maxZoom:F,zoomActivationKeyCode:N,preventScrolling:te,noWheelClassName:I,noPanClassName:O,onViewportChange:q,isControlledViewport:H,paneClickDistance:m,selectionOnDrag:X,children:l.jsxs(cT,{onSelectionStart:b,onSelectionEnd:S,onPaneClick:a,onPaneMouseEnter:s,onPaneMouseMove:i,onPaneMouseLeave:c,onPaneContextMenu:u,onPaneScroll:f,panOnDrag:ae,isSelecting:!!le,selectionMode:x,selectionKeyPressed:Y,paneClickDistance:m,selectionOnDrag:X,children:[t,W&&l.jsx(wT,{onSelectionContextMenu:U,noPanClassName:O,disableKeyboardA11y:B})]})})}F1.displayName="FlowRenderer";const NT=_.memo(F1),jT=t=>a=>t?Zh(a.nodeLookup,{x:0,y:0,width:a.width,height:a.height},a.transform,!0).map(s=>s.id):Array.from(a.nodeLookup.keys());function ET(t){return ze(_.useCallback(jT(t),[t]),Fe)}const _T=t=>t.updateNodeInternals;function CT(){const t=ze(_T),[a]=_.useState(()=>typeof ResizeObserver>"u"?null:new ResizeObserver(s=>{const i=new Map;s.forEach(c=>{const u=c.target.getAttribute("data-id");i.set(u,{id:u,nodeElement:c.target,force:!0})}),t(i)}));return _.useEffect(()=>()=>{a?.disconnect()},[a]),a}function TT({node:t,nodeType:a,hasDimensions:s,resizeObserver:i}){const c=We(),u=_.useRef(null),f=_.useRef(null),m=_.useRef(t.sourcePosition),p=_.useRef(t.targetPosition),g=_.useRef(a),y=s&&!!t.internals.handleBounds;return _.useEffect(()=>{u.current&&!t.hidden&&(!y||f.current!==u.current)&&(f.current&&i?.unobserve(f.current),i?.observe(u.current),f.current=u.current)},[y,t.hidden]),_.useEffect(()=>()=>{f.current&&(i?.unobserve(f.current),f.current=null)},[]),_.useEffect(()=>{if(u.current){const x=g.current!==a,b=m.current!==t.sourcePosition,S=p.current!==t.targetPosition;(x||b||S)&&(g.current=a,m.current=t.sourcePosition,p.current=t.targetPosition,c.getState().updateNodeInternals(new Map([[t.id,{id:t.id,nodeElement:u.current,force:!0}]])))}},[t.id,a,t.sourcePosition,t.targetPosition]),u}function MT({id:t,onClick:a,onMouseEnter:s,onMouseMove:i,onMouseLeave:c,onContextMenu:u,onDoubleClick:f,nodesDraggable:m,elementsSelectable:p,nodesConnectable:g,nodesFocusable:y,resizeObserver:x,noDragClassName:b,noPanClassName:S,disableKeyboardA11y:j,rfId:A,nodeTypes:N,nodeClickDistance:E,onError:R}){const{node:C,internals:k,isParent:w}=ze(ce=>{const de=ce.nodeLookup.get(t),we=ce.parentLookup.has(t);return{node:de,internals:de.internals,isParent:we}},Fe);let D=C.type||"default",M=N?.[D]||vy[D];M===void 0&&(R?.("003",Dn.error003(D)),D="default",M=N?.default||vy.default);const V=!!(C.draggable||m&&typeof C.draggable>"u"),L=!!(C.selectable||p&&typeof C.selectable>"u"),se=!!(C.connectable||g&&typeof C.connectable>"u"),Q=!!(C.focusable||y&&typeof C.focusable>"u"),F=We(),te=g1(C),U=TT({node:C,nodeType:D,hasDimensions:te,resizeObserver:x}),I=P1({nodeRef:U,disabled:C.hidden||!V,noDragClassName:b,handleSelector:C.dragHandle,nodeId:t,isSelectable:L,nodeClickDistance:E}),O=Z1();if(C.hidden)return null;const B=da(C),q=bT(C),H=L||V||a||s||i||c,W=s?ce=>s(ce,{...k.userNode}):void 0,z=i?ce=>i(ce,{...k.userNode}):void 0,Y=c?ce=>c(ce,{...k.userNode}):void 0,Z=u?ce=>u(ce,{...k.userNode}):void 0,ae=f?ce=>f(ce,{...k.userNode}):void 0,ue=ce=>{const{selectNodesOnDrag:de,nodeDragThreshold:we}=F.getState();L&&(!de||!V||we>0)&&bh({id:t,store:F,nodeRef:U}),a&&a(ce,{...k.userNode})},X=ce=>{if(!(b1(ce.nativeEvent)||j)){if(o1.includes(ce.key)&&L){const de=ce.key==="Escape";bh({id:t,store:F,unselect:de,nodeRef:U})}else if(V&&C.selected&&Object.prototype.hasOwnProperty.call(Oc,ce.key)){ce.preventDefault();const{ariaLabelConfig:de}=F.getState();F.setState({ariaLiveMessage:de["node.a11yDescription.ariaLiveMessage"]({direction:ce.key.replace("Arrow","").toLowerCase(),x:~~k.positionAbsolute.x,y:~~k.positionAbsolute.y})}),O({direction:Oc[ce.key],factor:ce.shiftKey?4:1})}}},le=()=>{if(j||!U.current?.matches(":focus-visible"))return;const{transform:ce,width:de,height:we,autoPanOnNodeFocus:ve,setCenter:pe}=F.getState();if(!ve)return;Zh(new Map([[t,C]]),{x:0,y:0,width:de,height:we},ce,!0).length>0||pe(C.position.x+B.width/2,C.position.y+B.height/2,{zoom:ce[2]})};return l.jsx("div",{className:ct(["react-flow__node",`react-flow__node-${D}`,{[S]:V},C.className,{selected:C.selected,selectable:L,parent:w,draggable:V,dragging:I}]),ref:U,style:{zIndex:k.z,transform:`translate(${k.positionAbsolute.x}px,${k.positionAbsolute.y}px)`,pointerEvents:H?"all":"none",visibility:te?"visible":"hidden",...C.style,...q},"data-id":t,"data-testid":`rf__node-${t}`,onMouseEnter:W,onMouseMove:z,onMouseLeave:Y,onContextMenu:Z,onClick:ue,onDoubleClick:ae,onKeyDown:Q?X:void 0,tabIndex:Q?0:void 0,onFocus:Q?le:void 0,role:C.ariaRole??(Q?"group":void 0),"aria-roledescription":"node","aria-describedby":j?void 0:`${U1}-${A}`,"aria-label":C.ariaLabel,...C.domAttributes,children:l.jsx(dT,{value:t,children:l.jsx(M,{id:t,data:C.data,type:D,positionAbsoluteX:k.positionAbsolute.x,positionAbsoluteY:k.positionAbsolute.y,selected:C.selected??!1,selectable:L,draggable:V,deletable:C.deletable??!0,isConnectable:se,sourcePosition:C.sourcePosition,targetPosition:C.targetPosition,dragging:I,dragHandle:C.dragHandle,zIndex:k.z,parentId:C.parentId,...B})})})}var AT=_.memo(MT);const kT=t=>({nodesDraggable:t.nodesDraggable,nodesConnectable:t.nodesConnectable,nodesFocusable:t.nodesFocusable,elementsSelectable:t.elementsSelectable,onError:t.onError});function W1(t){const{nodesDraggable:a,nodesConnectable:s,nodesFocusable:i,elementsSelectable:c,onError:u}=ze(kT,Fe),f=ET(t.onlyRenderVisibleElements),m=CT();return l.jsx("div",{className:"react-flow__nodes",style:tu,children:f.map(p=>l.jsx(AT,{id:p,nodeTypes:t.nodeTypes,nodeExtent:t.nodeExtent,onClick:t.onNodeClick,onMouseEnter:t.onNodeMouseEnter,onMouseMove:t.onNodeMouseMove,onMouseLeave:t.onNodeMouseLeave,onContextMenu:t.onNodeContextMenu,onDoubleClick:t.onNodeDoubleClick,noDragClassName:t.noDragClassName,noPanClassName:t.noPanClassName,rfId:t.rfId,disableKeyboardA11y:t.disableKeyboardA11y,resizeObserver:m,nodesDraggable:a,nodesConnectable:s,nodesFocusable:i,elementsSelectable:c,nodeClickDistance:t.nodeClickDistance,onError:u},p))})}W1.displayName="NodeRenderer";const RT=_.memo(W1);function DT(t){return ze(_.useCallback(s=>{if(!t)return s.edges.map(c=>c.id);const i=[];if(s.width&&s.height)for(const c of s.edges){const u=s.nodeLookup.get(c.source),f=s.nodeLookup.get(c.target);u&&f&&RC({sourceNode:u,targetNode:f,width:s.width,height:s.height,transform:s.transform})&&i.push(c.id)}return i},[t]),Fe)}const zT=({color:t="none",strokeWidth:a=1})=>{const s={strokeWidth:a,...t&&{stroke:t}};return l.jsx("polyline",{className:"arrow",style:s,strokeLinecap:"round",fill:"none",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4"})},OT=({color:t="none",strokeWidth:a=1})=>{const s={strokeWidth:a,...t&&{stroke:t,fill:t}};return l.jsx("polyline",{className:"arrowclosed",style:s,strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"})},Sy={[Rc.Arrow]:zT,[Rc.ArrowClosed]:OT};function BT(t){const a=We();return _.useMemo(()=>Object.prototype.hasOwnProperty.call(Sy,t)?Sy[t]:(a.getState().onError?.("009",Dn.error009(t)),null),[t])}const HT=({id:t,type:a,color:s,width:i=12.5,height:c=12.5,markerUnits:u="strokeWidth",strokeWidth:f,orient:m="auto-start-reverse"})=>{const p=BT(a);return p?l.jsx("marker",{className:"react-flow__arrowhead",id:t,markerWidth:`${i}`,markerHeight:`${c}`,viewBox:"-10 -10 20 20",markerUnits:u,orient:m,refX:"0",refY:"0",children:l.jsx(p,{color:s,strokeWidth:f})}):null},K1=({defaultColor:t,rfId:a})=>{const s=ze(u=>u.edges),i=ze(u=>u.defaultEdgeOptions),c=_.useMemo(()=>UC(s,{id:a,defaultColor:t,defaultMarkerStart:i?.markerStart,defaultMarkerEnd:i?.markerEnd}),[s,i,a,t]);return c.length?l.jsx("svg",{className:"react-flow__marker","aria-hidden":"true",children:l.jsx("defs",{children:c.map(u=>l.jsx(HT,{id:u.id,type:u.type,color:u.color,width:u.width,height:u.height,markerUnits:u.markerUnits,strokeWidth:u.strokeWidth,orient:u.orient},u.id))})}):null};K1.displayName="MarkerDefinitions";var LT=_.memo(K1);function J1({x:t,y:a,label:s,labelStyle:i,labelShowBg:c=!0,labelBgStyle:u,labelBgPadding:f=[2,4],labelBgBorderRadius:m=2,children:p,className:g,...y}){const[x,b]=_.useState({x:1,y:0,width:0,height:0}),S=ct(["react-flow__edge-textwrapper",g]),j=_.useRef(null);return _.useEffect(()=>{if(j.current){const A=j.current.getBBox();b({x:A.x,y:A.y,width:A.width,height:A.height})}},[s]),s?l.jsxs("g",{transform:`translate(${t-x.width/2} ${a-x.height/2})`,className:S,visibility:x.width?"visible":"hidden",...y,children:[c&&l.jsx("rect",{width:x.width+2*f[0],x:-f[0],y:-f[1],height:x.height+2*f[1],className:"react-flow__edge-textbg",style:u,rx:m,ry:m}),l.jsx("text",{className:"react-flow__edge-text",y:x.height/2,dy:"0.3em",ref:j,style:i,children:s}),p]}):null}J1.displayName="EdgeText";const UT=_.memo(J1);function nu({path:t,labelX:a,labelY:s,label:i,labelStyle:c,labelShowBg:u,labelBgStyle:f,labelBgPadding:m,labelBgBorderRadius:p,interactionWidth:g=20,...y}){return l.jsxs(l.Fragment,{children:[l.jsx("path",{...y,d:t,fill:"none",className:ct(["react-flow__edge-path",y.className])}),g?l.jsx("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:g,className:"react-flow__edge-interaction"}):null,i&&xn(a)&&xn(s)?l.jsx(UT,{x:a,y:s,label:i,labelStyle:c,labelShowBg:u,labelBgStyle:f,labelBgPadding:m,labelBgBorderRadius:p}):null]})}function Ny({pos:t,x1:a,y1:s,x2:i,y2:c}){return t===xe.Left||t===xe.Right?[.5*(a+i),s]:[a,.5*(s+c)]}function ev({sourceX:t,sourceY:a,sourcePosition:s=xe.Bottom,targetX:i,targetY:c,targetPosition:u=xe.Top}){const[f,m]=Ny({pos:s,x1:t,y1:a,x2:i,y2:c}),[p,g]=Ny({pos:u,x1:i,y1:c,x2:t,y2:a}),[y,x,b,S]=w1({sourceX:t,sourceY:a,targetX:i,targetY:c,sourceControlX:f,sourceControlY:m,targetControlX:p,targetControlY:g});return[`M${t},${a} C${f},${m} ${p},${g} ${i},${c}`,y,x,b,S]}function tv(t){return _.memo(({id:a,sourceX:s,sourceY:i,targetX:c,targetY:u,sourcePosition:f,targetPosition:m,label:p,labelStyle:g,labelShowBg:y,labelBgStyle:x,labelBgPadding:b,labelBgBorderRadius:S,style:j,markerEnd:A,markerStart:N,interactionWidth:E})=>{const[R,C,k]=ev({sourceX:s,sourceY:i,sourcePosition:f,targetX:c,targetY:u,targetPosition:m}),w=t.isInternal?void 0:a;return l.jsx(nu,{id:w,path:R,labelX:C,labelY:k,label:p,labelStyle:g,labelShowBg:y,labelBgStyle:x,labelBgPadding:b,labelBgBorderRadius:S,style:j,markerEnd:A,markerStart:N,interactionWidth:E})})}const $T=tv({isInternal:!1}),nv=tv({isInternal:!0});$T.displayName="SimpleBezierEdge";nv.displayName="SimpleBezierEdgeInternal";function av(t){return _.memo(({id:a,sourceX:s,sourceY:i,targetX:c,targetY:u,label:f,labelStyle:m,labelShowBg:p,labelBgStyle:g,labelBgPadding:y,labelBgBorderRadius:x,style:b,sourcePosition:S=xe.Bottom,targetPosition:j=xe.Top,markerEnd:A,markerStart:N,pathOptions:E,interactionWidth:R})=>{const[C,k,w]=ph({sourceX:s,sourceY:i,sourcePosition:S,targetX:c,targetY:u,targetPosition:j,borderRadius:E?.borderRadius,offset:E?.offset,stepPosition:E?.stepPosition}),D=t.isInternal?void 0:a;return l.jsx(nu,{id:D,path:C,labelX:k,labelY:w,label:f,labelStyle:m,labelShowBg:p,labelBgStyle:g,labelBgPadding:y,labelBgBorderRadius:x,style:b,markerEnd:A,markerStart:N,interactionWidth:R})})}const sv=av({isInternal:!1}),rv=av({isInternal:!0});sv.displayName="SmoothStepEdge";rv.displayName="SmoothStepEdgeInternal";function iv(t){return _.memo(({id:a,...s})=>{const i=t.isInternal?void 0:a;return l.jsx(sv,{...s,id:i,pathOptions:_.useMemo(()=>({borderRadius:0,offset:s.pathOptions?.offset}),[s.pathOptions?.offset])})})}const qT=iv({isInternal:!1}),ov=iv({isInternal:!0});qT.displayName="StepEdge";ov.displayName="StepEdgeInternal";function lv(t){return _.memo(({id:a,sourceX:s,sourceY:i,targetX:c,targetY:u,label:f,labelStyle:m,labelShowBg:p,labelBgStyle:g,labelBgPadding:y,labelBgBorderRadius:x,style:b,markerEnd:S,markerStart:j,interactionWidth:A})=>{const[N,E,R]=E1({sourceX:s,sourceY:i,targetX:c,targetY:u}),C=t.isInternal?void 0:a;return l.jsx(nu,{id:C,path:N,labelX:E,labelY:R,label:f,labelStyle:m,labelShowBg:p,labelBgStyle:g,labelBgPadding:y,labelBgBorderRadius:x,style:b,markerEnd:S,markerStart:j,interactionWidth:A})})}const VT=lv({isInternal:!1}),cv=lv({isInternal:!0});VT.displayName="StraightEdge";cv.displayName="StraightEdgeInternal";function uv(t){return _.memo(({id:a,sourceX:s,sourceY:i,targetX:c,targetY:u,sourcePosition:f=xe.Bottom,targetPosition:m=xe.Top,label:p,labelStyle:g,labelShowBg:y,labelBgStyle:x,labelBgPadding:b,labelBgBorderRadius:S,style:j,markerEnd:A,markerStart:N,pathOptions:E,interactionWidth:R})=>{const[C,k,w]=S1({sourceX:s,sourceY:i,sourcePosition:f,targetX:c,targetY:u,targetPosition:m,curvature:E?.curvature}),D=t.isInternal?void 0:a;return l.jsx(nu,{id:D,path:C,labelX:k,labelY:w,label:p,labelStyle:g,labelShowBg:y,labelBgStyle:x,labelBgPadding:b,labelBgBorderRadius:S,style:j,markerEnd:A,markerStart:N,interactionWidth:R})})}const YT=uv({isInternal:!1}),dv=uv({isInternal:!0});YT.displayName="BezierEdge";dv.displayName="BezierEdgeInternal";const jy={default:dv,straight:cv,step:ov,smoothstep:rv,simplebezier:nv},Ey={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},XT=(t,a,s)=>s===xe.Left?t-a:s===xe.Right?t+a:t,GT=(t,a,s)=>s===xe.Top?t-a:s===xe.Bottom?t+a:t,_y="react-flow__edgeupdater";function Cy({position:t,centerX:a,centerY:s,radius:i=10,onMouseDown:c,onMouseEnter:u,onMouseOut:f,type:m}){return l.jsx("circle",{onMouseDown:c,onMouseEnter:u,onMouseOut:f,className:ct([_y,`${_y}-${m}`]),cx:XT(a,i,t),cy:GT(s,i,t),r:i,stroke:"transparent",fill:"transparent"})}function IT({isReconnectable:t,reconnectRadius:a,edge:s,sourceX:i,sourceY:c,targetX:u,targetY:f,sourcePosition:m,targetPosition:p,onReconnect:g,onReconnectStart:y,onReconnectEnd:x,setReconnecting:b,setUpdateHover:S}){const j=We(),A=(k,w)=>{if(k.button!==0)return;const{autoPanOnConnect:D,domNode:M,isValidConnection:V,connectionMode:L,connectionRadius:se,lib:Q,onConnectStart:F,onConnectEnd:te,cancelConnection:U,nodeLookup:I,rfId:O,panBy:B,updateConnection:q}=j.getState(),H=w.type==="target",W=(Z,ae)=>{b(!1),x?.(Z,s,w.type,ae)},z=Z=>g?.(s,Z),Y=(Z,ae)=>{b(!0),y?.(k,s,w.type),F?.(Z,ae)};yh.onPointerDown(k.nativeEvent,{autoPanOnConnect:D,connectionMode:L,connectionRadius:se,domNode:M,handleId:w.id,nodeId:w.nodeId,nodeLookup:I,isTarget:H,edgeUpdaterType:w.type,lib:Q,flowId:O,cancelConnection:U,panBy:B,isValidConnection:V,onConnect:z,onConnectStart:Y,onConnectEnd:te,onReconnectEnd:W,updateConnection:q,getTransform:()=>j.getState().transform,getFromHandle:()=>j.getState().connection.fromHandle,dragThreshold:j.getState().connectionDragThreshold,handleDomNode:k.currentTarget})},N=k=>A(k,{nodeId:s.target,id:s.targetHandle??null,type:"target"}),E=k=>A(k,{nodeId:s.source,id:s.sourceHandle??null,type:"source"}),R=()=>S(!0),C=()=>S(!1);return l.jsxs(l.Fragment,{children:[(t===!0||t==="source")&&l.jsx(Cy,{position:m,centerX:i,centerY:c,radius:a,onMouseDown:N,onMouseEnter:R,onMouseOut:C,type:"source"}),(t===!0||t==="target")&&l.jsx(Cy,{position:p,centerX:u,centerY:f,radius:a,onMouseDown:E,onMouseEnter:R,onMouseOut:C,type:"target"})]})}function PT({id:t,edgesFocusable:a,edgesReconnectable:s,elementsSelectable:i,onClick:c,onDoubleClick:u,onContextMenu:f,onMouseEnter:m,onMouseMove:p,onMouseLeave:g,reconnectRadius:y,onReconnect:x,onReconnectStart:b,onReconnectEnd:S,rfId:j,edgeTypes:A,noPanClassName:N,onError:E,disableKeyboardA11y:R}){let C=ze(pe=>pe.edgeLookup.get(t));const k=ze(pe=>pe.defaultEdgeOptions);C=k?{...k,...C}:C;let w=C.type||"default",D=A?.[w]||jy[w];D===void 0&&(E?.("011",Dn.error011(w)),w="default",D=A?.default||jy.default);const M=!!(C.focusable||a&&typeof C.focusable>"u"),V=typeof x<"u"&&(C.reconnectable||s&&typeof C.reconnectable>"u"),L=!!(C.selectable||i&&typeof C.selectable>"u"),se=_.useRef(null),[Q,F]=_.useState(!1),[te,U]=_.useState(!1),I=We(),{zIndex:O,sourceX:B,sourceY:q,targetX:H,targetY:W,sourcePosition:z,targetPosition:Y}=ze(_.useCallback(pe=>{const ge=pe.nodeLookup.get(C.source),_e=pe.nodeLookup.get(C.target);if(!ge||!_e)return{zIndex:C.zIndex,...Ey};const Te=LC({id:t,sourceNode:ge,targetNode:_e,sourceHandle:C.sourceHandle||null,targetHandle:C.targetHandle||null,connectionMode:pe.connectionMode,onError:E});return{zIndex:kC({selected:C.selected,zIndex:C.zIndex,sourceNode:ge,targetNode:_e,elevateOnSelect:pe.elevateEdgesOnSelect,zIndexMode:pe.zIndexMode}),...Te||Ey}},[C.source,C.target,C.sourceHandle,C.targetHandle,C.selected,C.zIndex]),Fe),Z=_.useMemo(()=>C.markerStart?`url('#${gh(C.markerStart,j)}')`:void 0,[C.markerStart,j]),ae=_.useMemo(()=>C.markerEnd?`url('#${gh(C.markerEnd,j)}')`:void 0,[C.markerEnd,j]);if(C.hidden||B===null||q===null||H===null||W===null)return null;const ue=pe=>{const{addSelectedEdges:ge,unselectNodesAndEdges:_e,multiSelectionActive:Te}=I.getState();L&&(I.setState({nodesSelectionActive:!1}),C.selected&&Te?(_e({nodes:[],edges:[C]}),se.current?.blur()):ge([t])),c&&c(pe,C)},X=u?pe=>{u(pe,{...C})}:void 0,le=f?pe=>{f(pe,{...C})}:void 0,ce=m?pe=>{m(pe,{...C})}:void 0,de=p?pe=>{p(pe,{...C})}:void 0,we=g?pe=>{g(pe,{...C})}:void 0,ve=pe=>{if(!R&&o1.includes(pe.key)&&L){const{unselectNodesAndEdges:ge,addSelectedEdges:_e}=I.getState();pe.key==="Escape"?(se.current?.blur(),ge({edges:[C]})):_e([t])}};return l.jsx("svg",{style:{zIndex:O},children:l.jsxs("g",{className:ct(["react-flow__edge",`react-flow__edge-${w}`,C.className,N,{selected:C.selected,animated:C.animated,inactive:!L&&!c,updating:Q,selectable:L}]),onClick:ue,onDoubleClick:X,onContextMenu:le,onMouseEnter:ce,onMouseMove:de,onMouseLeave:we,onKeyDown:M?ve:void 0,tabIndex:M?0:void 0,role:C.ariaRole??(M?"group":"img"),"aria-roledescription":"edge","data-id":t,"data-testid":`rf__edge-${t}`,"aria-label":C.ariaLabel===null?void 0:C.ariaLabel||`Edge from ${C.source} to ${C.target}`,"aria-describedby":M?`${$1}-${j}`:void 0,ref:se,...C.domAttributes,children:[!te&&l.jsx(D,{id:t,source:C.source,target:C.target,type:C.type,selected:C.selected,animated:C.animated,selectable:L,deletable:C.deletable??!0,label:C.label,labelStyle:C.labelStyle,labelShowBg:C.labelShowBg,labelBgStyle:C.labelBgStyle,labelBgPadding:C.labelBgPadding,labelBgBorderRadius:C.labelBgBorderRadius,sourceX:B,sourceY:q,targetX:H,targetY:W,sourcePosition:z,targetPosition:Y,data:C.data,style:C.style,sourceHandleId:C.sourceHandle,targetHandleId:C.targetHandle,markerStart:Z,markerEnd:ae,pathOptions:"pathOptions"in C?C.pathOptions:void 0,interactionWidth:C.interactionWidth}),V&&l.jsx(IT,{edge:C,isReconnectable:V,reconnectRadius:y,onReconnect:x,onReconnectStart:b,onReconnectEnd:S,sourceX:B,sourceY:q,targetX:H,targetY:W,sourcePosition:z,targetPosition:Y,setUpdateHover:F,setReconnecting:U})]})})}var ZT=_.memo(PT);const QT=t=>({edgesFocusable:t.edgesFocusable,edgesReconnectable:t.edgesReconnectable,elementsSelectable:t.elementsSelectable,connectionMode:t.connectionMode,onError:t.onError});function fv({defaultMarkerColor:t,onlyRenderVisibleElements:a,rfId:s,edgeTypes:i,noPanClassName:c,onReconnect:u,onEdgeContextMenu:f,onEdgeMouseEnter:m,onEdgeMouseMove:p,onEdgeMouseLeave:g,onEdgeClick:y,reconnectRadius:x,onEdgeDoubleClick:b,onReconnectStart:S,onReconnectEnd:j,disableKeyboardA11y:A}){const{edgesFocusable:N,edgesReconnectable:E,elementsSelectable:R,onError:C}=ze(QT,Fe),k=DT(a);return l.jsxs("div",{className:"react-flow__edges",children:[l.jsx(LT,{defaultColor:t,rfId:s}),k.map(w=>l.jsx(ZT,{id:w,edgesFocusable:N,edgesReconnectable:E,elementsSelectable:R,noPanClassName:c,onReconnect:u,onContextMenu:f,onMouseEnter:m,onMouseMove:p,onMouseLeave:g,onClick:y,reconnectRadius:x,onDoubleClick:b,onReconnectStart:S,onReconnectEnd:j,rfId:s,onError:C,edgeTypes:i,disableKeyboardA11y:A},w))]})}fv.displayName="EdgeRenderer";const FT=_.memo(fv),WT=t=>`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`;function KT({children:t}){const a=ze(WT);return l.jsx("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:a},children:t})}function JT(t){const a=nm(),s=_.useRef(!1);_.useEffect(()=>{!s.current&&a.viewportInitialized&&t&&(setTimeout(()=>t(a),1),s.current=!0)},[t,a.viewportInitialized])}const eM=t=>t.panZoom?.syncViewport;function tM(t){const a=ze(eM),s=We();return _.useEffect(()=>{t&&(a?.(t),s.setState({transform:[t.x,t.y,t.zoom]}))},[t,a]),null}function nM(t){return t.connection.inProgress?{...t.connection,to:xo(t.connection.to,t.transform)}:{...t.connection}}function aM(t){return nM}function sM(t){const a=aM();return ze(a,Fe)}const rM=t=>({nodesConnectable:t.nodesConnectable,isValid:t.connection.isValid,inProgress:t.connection.inProgress,width:t.width,height:t.height});function iM({containerStyle:t,style:a,type:s,component:i}){const{nodesConnectable:c,width:u,height:f,isValid:m,inProgress:p}=ze(rM,Fe);return!(u&&c&&p)?null:l.jsx("svg",{style:t,width:u,height:f,className:"react-flow__connectionline react-flow__container",children:l.jsx("g",{className:ct(["react-flow__connection",u1(m)]),children:l.jsx(hv,{style:a,type:s,CustomComponent:i,isValid:m})})})}const hv=({style:t,type:a=Ga.Bezier,CustomComponent:s,isValid:i})=>{const{inProgress:c,from:u,fromNode:f,fromHandle:m,fromPosition:p,to:g,toNode:y,toHandle:x,toPosition:b,pointer:S}=sM();if(!c)return;if(s)return l.jsx(s,{connectionLineType:a,connectionLineStyle:t,fromNode:f,fromHandle:m,fromX:u.x,fromY:u.y,toX:g.x,toY:g.y,fromPosition:p,toPosition:b,connectionStatus:u1(i),toNode:y,toHandle:x,pointer:S});let j="";const A={sourceX:u.x,sourceY:u.y,sourcePosition:p,targetX:g.x,targetY:g.y,targetPosition:b};switch(a){case Ga.Bezier:[j]=S1(A);break;case Ga.SimpleBezier:[j]=ev(A);break;case Ga.Step:[j]=ph({...A,borderRadius:0});break;case Ga.SmoothStep:[j]=ph(A);break;default:[j]=E1(A)}return l.jsx("path",{d:j,fill:"none",className:"react-flow__connection-path",style:t})};hv.displayName="ConnectionLine";const oM={};function Ty(t=oM){_.useRef(t),We(),_.useEffect(()=>{},[t])}function lM(){We(),_.useRef(!1),_.useEffect(()=>{},[])}function mv({nodeTypes:t,edgeTypes:a,onInit:s,onNodeClick:i,onEdgeClick:c,onNodeDoubleClick:u,onEdgeDoubleClick:f,onNodeMouseEnter:m,onNodeMouseMove:p,onNodeMouseLeave:g,onNodeContextMenu:y,onSelectionContextMenu:x,onSelectionStart:b,onSelectionEnd:S,connectionLineType:j,connectionLineStyle:A,connectionLineComponent:N,connectionLineContainerStyle:E,selectionKeyCode:R,selectionOnDrag:C,selectionMode:k,multiSelectionKeyCode:w,panActivationKeyCode:D,zoomActivationKeyCode:M,deleteKeyCode:V,onlyRenderVisibleElements:L,elementsSelectable:se,defaultViewport:Q,translateExtent:F,minZoom:te,maxZoom:U,preventScrolling:I,defaultMarkerColor:O,zoomOnScroll:B,zoomOnPinch:q,panOnScroll:H,panOnScrollSpeed:W,panOnScrollMode:z,zoomOnDoubleClick:Y,panOnDrag:Z,onPaneClick:ae,onPaneMouseEnter:ue,onPaneMouseMove:X,onPaneMouseLeave:le,onPaneScroll:ce,onPaneContextMenu:de,paneClickDistance:we,nodeClickDistance:ve,onEdgeContextMenu:pe,onEdgeMouseEnter:ge,onEdgeMouseMove:_e,onEdgeMouseLeave:Te,reconnectRadius:me,onReconnect:qe,onReconnectStart:vt,onReconnectEnd:ut,noDragClassName:Ct,noWheelClassName:Ft,noPanClassName:vn,disableKeyboardA11y:On,nodeExtent:et,rfId:fa,viewport:pt,onViewportChange:ln}){return Ty(t),Ty(a),lM(),JT(s),tM(pt),l.jsx(NT,{onPaneClick:ae,onPaneMouseEnter:ue,onPaneMouseMove:X,onPaneMouseLeave:le,onPaneContextMenu:de,onPaneScroll:ce,paneClickDistance:we,deleteKeyCode:V,selectionKeyCode:R,selectionOnDrag:C,selectionMode:k,onSelectionStart:b,onSelectionEnd:S,multiSelectionKeyCode:w,panActivationKeyCode:D,zoomActivationKeyCode:M,elementsSelectable:se,zoomOnScroll:B,zoomOnPinch:q,zoomOnDoubleClick:Y,panOnScroll:H,panOnScrollSpeed:W,panOnScrollMode:z,panOnDrag:Z,defaultViewport:Q,translateExtent:F,minZoom:te,maxZoom:U,onSelectionContextMenu:x,preventScrolling:I,noDragClassName:Ct,noWheelClassName:Ft,noPanClassName:vn,disableKeyboardA11y:On,onViewportChange:ln,isControlledViewport:!!pt,children:l.jsxs(KT,{children:[l.jsx(FT,{edgeTypes:a,onEdgeClick:c,onEdgeDoubleClick:f,onReconnect:qe,onReconnectStart:vt,onReconnectEnd:ut,onlyRenderVisibleElements:L,onEdgeContextMenu:pe,onEdgeMouseEnter:ge,onEdgeMouseMove:_e,onEdgeMouseLeave:Te,reconnectRadius:me,defaultMarkerColor:O,noPanClassName:vn,disableKeyboardA11y:On,rfId:fa}),l.jsx(iM,{style:A,type:j,component:N,containerStyle:E}),l.jsx("div",{className:"react-flow__edgelabel-renderer"}),l.jsx(RT,{nodeTypes:t,onNodeClick:i,onNodeDoubleClick:u,onNodeMouseEnter:m,onNodeMouseMove:p,onNodeMouseLeave:g,onNodeContextMenu:y,nodeClickDistance:ve,onlyRenderVisibleElements:L,noPanClassName:vn,noDragClassName:Ct,disableKeyboardA11y:On,nodeExtent:et,rfId:fa}),l.jsx("div",{className:"react-flow__viewport-portal"})]})})}mv.displayName="GraphView";const cM=_.memo(mv),My=({nodes:t,edges:a,defaultNodes:s,defaultEdges:i,width:c,height:u,fitView:f,fitViewOptions:m,minZoom:p=.5,maxZoom:g=2,nodeOrigin:y,nodeExtent:x,zIndexMode:b="basic"}={})=>{const S=new Map,j=new Map,A=new Map,N=new Map,E=i??a??[],R=s??t??[],C=y??[0,0],k=x??to;T1(A,N,E);const w=xh(R,S,j,{nodeOrigin:C,nodeExtent:k,zIndexMode:b});let D=[0,0,1];if(f&&c&&u){const M=po(S,{filter:Q=>!!((Q.width||Q.initialWidth)&&(Q.height||Q.initialHeight))}),{x:V,y:L,zoom:se}=Qh(M,c,u,p,g,m?.padding??.1);D=[V,L,se]}return{rfId:"1",width:c??0,height:u??0,transform:D,nodes:R,nodesInitialized:w,nodeLookup:S,parentLookup:j,edges:E,edgeLookup:N,connectionLookup:A,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:s!==void 0,hasDefaultEdges:i!==void 0,panZoom:null,minZoom:p,maxZoom:g,translateExtent:to,nodeExtent:k,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:Rr.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:C,nodeDragThreshold:1,connectionDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!0,selectNodesOnDrag:!0,multiSelectionActive:!1,fitViewQueued:f??!1,fitViewOptions:m,fitViewResolver:null,connection:{...c1},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanOnNodeFocus:!0,autoPanSpeed:15,connectionRadius:20,onError:EC,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1,ariaLabelConfig:l1,zIndexMode:b,onNodesChangeMiddlewareMap:new Map,onEdgesChangeMiddlewareMap:new Map}},uM=({nodes:t,edges:a,defaultNodes:s,defaultEdges:i,width:c,height:u,fitView:f,fitViewOptions:m,minZoom:p,maxZoom:g,nodeOrigin:y,nodeExtent:x,zIndexMode:b})=>T8((S,j)=>{async function A(){const{nodeLookup:N,panZoom:E,fitViewOptions:R,fitViewResolver:C,width:k,height:w,minZoom:D,maxZoom:M}=j();E&&(await NC({nodes:N,width:k,height:w,panZoom:E,minZoom:D,maxZoom:M},R),C?.resolve(!0),S({fitViewResolver:null}))}return{...My({nodes:t,edges:a,width:c,height:u,fitView:f,fitViewOptions:m,minZoom:p,maxZoom:g,nodeOrigin:y,nodeExtent:x,defaultNodes:s,defaultEdges:i,zIndexMode:b}),setNodes:N=>{const{nodeLookup:E,parentLookup:R,nodeOrigin:C,elevateNodesOnSelect:k,fitViewQueued:w,zIndexMode:D}=j(),M=xh(N,E,R,{nodeOrigin:C,nodeExtent:x,elevateNodesOnSelect:k,checkEquality:!0,zIndexMode:D});w&&M?(A(),S({nodes:N,nodesInitialized:M,fitViewQueued:!1,fitViewOptions:void 0})):S({nodes:N,nodesInitialized:M})},setEdges:N=>{const{connectionLookup:E,edgeLookup:R}=j();T1(E,R,N),S({edges:N})},setDefaultNodesAndEdges:(N,E)=>{if(N){const{setNodes:R}=j();R(N),S({hasDefaultNodes:!0})}if(E){const{setEdges:R}=j();R(E),S({hasDefaultEdges:!0})}},updateNodeInternals:N=>{const{triggerNodeChanges:E,nodeLookup:R,parentLookup:C,domNode:k,nodeOrigin:w,nodeExtent:D,debug:M,fitViewQueued:V,zIndexMode:L}=j(),{changes:se,updatedInternals:Q}=IC(N,R,C,k,w,D,L);Q&&(VC(R,C,{nodeOrigin:w,nodeExtent:D,zIndexMode:L}),V?(A(),S({fitViewQueued:!1,fitViewOptions:void 0})):S({}),se?.length>0&&(M&&console.log("React Flow: trigger node changes",se),E?.(se)))},updateNodePositions:(N,E=!1)=>{const R=[];let C=[];const{nodeLookup:k,triggerNodeChanges:w,connection:D,updateConnection:M,onNodesChangeMiddlewareMap:V}=j();for(const[L,se]of N){const Q=k.get(L),F=!!(Q?.expandParent&&Q?.parentId&&se?.position),te={id:L,type:"position",position:F?{x:Math.max(0,se.position.x),y:Math.max(0,se.position.y)}:se.position,dragging:E};if(Q&&D.inProgress&&D.fromNode.id===Q.id){const U=Cs(Q,D.fromHandle,xe.Left,!0);M({...D,from:U})}F&&Q.parentId&&R.push({id:L,parentId:Q.parentId,rect:{...se.internals.positionAbsolute,width:se.measured.width??0,height:se.measured.height??0}}),C.push(te)}if(R.length>0){const{parentLookup:L,nodeOrigin:se}=j(),Q=tm(R,k,L,se);C.push(...Q)}for(const L of V.values())C=L(C);w(C)},triggerNodeChanges:N=>{const{onNodesChange:E,setNodes:R,nodes:C,hasDefaultNodes:k,debug:w}=j();if(N?.length){if(k){const D=Y1(N,C);R(D)}w&&console.log("React Flow: trigger node changes",N),E?.(N)}},triggerEdgeChanges:N=>{const{onEdgesChange:E,setEdges:R,edges:C,hasDefaultEdges:k,debug:w}=j();if(N?.length){if(k){const D=X1(N,C);R(D)}w&&console.log("React Flow: trigger edge changes",N),E?.(N)}},addSelectedNodes:N=>{const{multiSelectionActive:E,edgeLookup:R,nodeLookup:C,triggerNodeChanges:k,triggerEdgeChanges:w}=j();if(E){const D=N.map(M=>ys(M,!0));k(D);return}k(wr(C,new Set([...N]),!0)),w(wr(R))},addSelectedEdges:N=>{const{multiSelectionActive:E,edgeLookup:R,nodeLookup:C,triggerNodeChanges:k,triggerEdgeChanges:w}=j();if(E){const D=N.map(M=>ys(M,!0));w(D);return}w(wr(R,new Set([...N]))),k(wr(C,new Set,!0))},unselectNodesAndEdges:({nodes:N,edges:E}={})=>{const{edges:R,nodes:C,nodeLookup:k,triggerNodeChanges:w,triggerEdgeChanges:D}=j(),M=N||C,V=E||R,L=M.map(Q=>{const F=k.get(Q.id);return F&&(F.selected=!1),ys(Q.id,!1)}),se=V.map(Q=>ys(Q.id,!1));w(L),D(se)},setMinZoom:N=>{const{panZoom:E,maxZoom:R}=j();E?.setScaleExtent([N,R]),S({minZoom:N})},setMaxZoom:N=>{const{panZoom:E,minZoom:R}=j();E?.setScaleExtent([R,N]),S({maxZoom:N})},setTranslateExtent:N=>{j().panZoom?.setTranslateExtent(N),S({translateExtent:N})},resetSelectedElements:()=>{const{edges:N,nodes:E,triggerNodeChanges:R,triggerEdgeChanges:C,elementsSelectable:k}=j();if(!k)return;const w=E.reduce((M,V)=>V.selected?[...M,ys(V.id,!1)]:M,[]),D=N.reduce((M,V)=>V.selected?[...M,ys(V.id,!1)]:M,[]);R(w),C(D)},setNodeExtent:N=>{const{nodes:E,nodeLookup:R,parentLookup:C,nodeOrigin:k,elevateNodesOnSelect:w,nodeExtent:D,zIndexMode:M}=j();N[0][0]===D[0][0]&&N[0][1]===D[0][1]&&N[1][0]===D[1][0]&&N[1][1]===D[1][1]||(xh(E,R,C,{nodeOrigin:k,nodeExtent:N,elevateNodesOnSelect:w,checkEquality:!1,zIndexMode:M}),S({nodeExtent:N}))},panBy:N=>{const{transform:E,width:R,height:C,panZoom:k,translateExtent:w}=j();return PC({delta:N,panZoom:k,transform:E,translateExtent:w,width:R,height:C})},setCenter:async(N,E,R)=>{const{width:C,height:k,maxZoom:w,panZoom:D}=j();if(!D)return Promise.resolve(!1);const M=typeof R?.zoom<"u"?R.zoom:w;return await D.setViewport({x:C/2-N*M,y:k/2-E*M,zoom:M},{duration:R?.duration,ease:R?.ease,interpolate:R?.interpolate}),Promise.resolve(!0)},cancelConnection:()=>{S({connection:{...c1}})},updateConnection:N=>{S({connection:N})},reset:()=>S({...My()})}},Object.is);function dM({initialNodes:t,initialEdges:a,defaultNodes:s,defaultEdges:i,initialWidth:c,initialHeight:u,initialMinZoom:f,initialMaxZoom:m,initialFitViewOptions:p,fitView:g,nodeOrigin:y,nodeExtent:x,zIndexMode:b,children:S}){const[j]=_.useState(()=>uM({nodes:t,edges:a,defaultNodes:s,defaultEdges:i,width:c,height:u,fitView:g,minZoom:f,maxZoom:m,fitViewOptions:p,nodeOrigin:y,nodeExtent:x,zIndexMode:b}));return l.jsx(M8,{value:j,children:l.jsx(K8,{children:S})})}function fM({children:t,nodes:a,edges:s,defaultNodes:i,defaultEdges:c,width:u,height:f,fitView:m,fitViewOptions:p,minZoom:g,maxZoom:y,nodeOrigin:x,nodeExtent:b,zIndexMode:S}){return _.useContext(Jc)?l.jsx(l.Fragment,{children:t}):l.jsx(dM,{initialNodes:a,initialEdges:s,defaultNodes:i,defaultEdges:c,initialWidth:u,initialHeight:f,fitView:m,initialFitViewOptions:p,initialMinZoom:g,initialMaxZoom:y,nodeOrigin:x,nodeExtent:b,zIndexMode:S,children:t})}const hM={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};function mM({nodes:t,edges:a,defaultNodes:s,defaultEdges:i,className:c,nodeTypes:u,edgeTypes:f,onNodeClick:m,onEdgeClick:p,onInit:g,onMove:y,onMoveStart:x,onMoveEnd:b,onConnect:S,onConnectStart:j,onConnectEnd:A,onClickConnectStart:N,onClickConnectEnd:E,onNodeMouseEnter:R,onNodeMouseMove:C,onNodeMouseLeave:k,onNodeContextMenu:w,onNodeDoubleClick:D,onNodeDragStart:M,onNodeDrag:V,onNodeDragStop:L,onNodesDelete:se,onEdgesDelete:Q,onDelete:F,onSelectionChange:te,onSelectionDragStart:U,onSelectionDrag:I,onSelectionDragStop:O,onSelectionContextMenu:B,onSelectionStart:q,onSelectionEnd:H,onBeforeDelete:W,connectionMode:z,connectionLineType:Y=Ga.Bezier,connectionLineStyle:Z,connectionLineComponent:ae,connectionLineContainerStyle:ue,deleteKeyCode:X="Backspace",selectionKeyCode:le="Shift",selectionOnDrag:ce=!1,selectionMode:de=no.Full,panActivationKeyCode:we="Space",multiSelectionKeyCode:ve=so()?"Meta":"Control",zoomActivationKeyCode:pe=so()?"Meta":"Control",snapToGrid:ge,snapGrid:_e,onlyRenderVisibleElements:Te=!1,selectNodesOnDrag:me,nodesDraggable:qe,autoPanOnNodeFocus:vt,nodesConnectable:ut,nodesFocusable:Ct,nodeOrigin:Ft=q1,edgesFocusable:vn,edgesReconnectable:On,elementsSelectable:et=!0,defaultViewport:fa=V8,minZoom:pt=.5,maxZoom:ln=2,translateExtent:cn=to,preventScrolling:Yr=!0,nodeExtent:Ms,defaultMarkerColor:ru="#b1b1b7",zoomOnScroll:iu=!0,zoomOnPinch:Za=!0,panOnScroll:Nt=!1,panOnScrollSpeed:wn=.5,panOnScrollMode:jt=Ns.Free,zoomOnDoubleClick:ou=!0,panOnDrag:lu=!0,onPaneClick:cu,onPaneMouseEnter:As,onPaneMouseMove:ks,onPaneMouseLeave:Rs,onPaneScroll:Bn,onPaneContextMenu:Ds,paneClickDistance:Qa=1,nodeClickDistance:uu=0,children:vo,onReconnect:Xr,onReconnectStart:Fa,onReconnectEnd:du,onEdgeContextMenu:wo,onEdgeDoubleClick:So,onEdgeMouseEnter:No,onEdgeMouseMove:Gr,onEdgeMouseLeave:Ir,reconnectRadius:jo=10,onNodesChange:Eo,onEdgesChange:Sn,noDragClassName:dt="nodrag",noWheelClassName:wt="nowheel",noPanClassName:Hn="nopan",fitView:zs,fitViewOptions:_o,connectOnClick:fu,attributionPosition:Co,proOptions:Wa,defaultEdgeOptions:Pr,elevateNodesOnSelect:ha=!0,elevateEdgesOnSelect:ma=!1,disableKeyboardA11y:pa=!1,autoPanOnConnect:ga,autoPanOnNodeDrag:at,autoPanSpeed:To,connectionRadius:Mo,isValidConnection:Ln,onError:xa,style:hu,id:Zr,nodeDragThreshold:Ao,connectionDragThreshold:mu,viewport:Os,onViewportChange:Bs,width:un,height:Tt,colorMode:ko="light",debug:pu,onScroll:Hs,ariaLabelConfig:Ro,zIndexMode:Ka="basic",...gu},Mt){const Ja=Zr||"1",Do=I8(ko),Qr=_.useCallback(Un=>{Un.currentTarget.scrollTo({top:0,left:0,behavior:"instant"}),Hs?.(Un)},[Hs]);return l.jsx("div",{"data-testid":"rf__wrapper",...gu,onScroll:Qr,style:{...hu,...hM},ref:Mt,className:ct(["react-flow",c,Do]),id:Zr,role:"application",children:l.jsxs(fM,{nodes:t,edges:a,width:un,height:Tt,fitView:zs,fitViewOptions:_o,minZoom:pt,maxZoom:ln,nodeOrigin:Ft,nodeExtent:Ms,zIndexMode:Ka,children:[l.jsx(cM,{onInit:g,onNodeClick:m,onEdgeClick:p,onNodeMouseEnter:R,onNodeMouseMove:C,onNodeMouseLeave:k,onNodeContextMenu:w,onNodeDoubleClick:D,nodeTypes:u,edgeTypes:f,connectionLineType:Y,connectionLineStyle:Z,connectionLineComponent:ae,connectionLineContainerStyle:ue,selectionKeyCode:le,selectionOnDrag:ce,selectionMode:de,deleteKeyCode:X,multiSelectionKeyCode:ve,panActivationKeyCode:we,zoomActivationKeyCode:pe,onlyRenderVisibleElements:Te,defaultViewport:fa,translateExtent:cn,minZoom:pt,maxZoom:ln,preventScrolling:Yr,zoomOnScroll:iu,zoomOnPinch:Za,zoomOnDoubleClick:ou,panOnScroll:Nt,panOnScrollSpeed:wn,panOnScrollMode:jt,panOnDrag:lu,onPaneClick:cu,onPaneMouseEnter:As,onPaneMouseMove:ks,onPaneMouseLeave:Rs,onPaneScroll:Bn,onPaneContextMenu:Ds,paneClickDistance:Qa,nodeClickDistance:uu,onSelectionContextMenu:B,onSelectionStart:q,onSelectionEnd:H,onReconnect:Xr,onReconnectStart:Fa,onReconnectEnd:du,onEdgeContextMenu:wo,onEdgeDoubleClick:So,onEdgeMouseEnter:No,onEdgeMouseMove:Gr,onEdgeMouseLeave:Ir,reconnectRadius:jo,defaultMarkerColor:ru,noDragClassName:dt,noWheelClassName:wt,noPanClassName:Hn,rfId:Ja,disableKeyboardA11y:pa,nodeExtent:Ms,viewport:Os,onViewportChange:Bs}),l.jsx(G8,{nodes:t,edges:a,defaultNodes:s,defaultEdges:i,onConnect:S,onConnectStart:j,onConnectEnd:A,onClickConnectStart:N,onClickConnectEnd:E,nodesDraggable:qe,autoPanOnNodeFocus:vt,nodesConnectable:ut,nodesFocusable:Ct,edgesFocusable:vn,edgesReconnectable:On,elementsSelectable:et,elevateNodesOnSelect:ha,elevateEdgesOnSelect:ma,minZoom:pt,maxZoom:ln,nodeExtent:Ms,onNodesChange:Eo,onEdgesChange:Sn,snapToGrid:ge,snapGrid:_e,connectionMode:z,translateExtent:cn,connectOnClick:fu,defaultEdgeOptions:Pr,fitView:zs,fitViewOptions:_o,onNodesDelete:se,onEdgesDelete:Q,onDelete:F,onNodeDragStart:M,onNodeDrag:V,onNodeDragStop:L,onSelectionDrag:I,onSelectionDragStart:U,onSelectionDragStop:O,onMove:y,onMoveStart:x,onMoveEnd:b,noPanClassName:Hn,nodeOrigin:Ft,rfId:Ja,autoPanOnConnect:ga,autoPanOnNodeDrag:at,autoPanSpeed:To,onError:xa,connectionRadius:Mo,isValidConnection:Ln,selectNodesOnDrag:me,nodeDragThreshold:Ao,connectionDragThreshold:mu,onBeforeDelete:W,debug:pu,ariaLabelConfig:Ro,zIndexMode:Ka}),l.jsx(q8,{onSelectionChange:te}),vo,l.jsx(B8,{proOptions:Wa,position:Co}),l.jsx(O8,{rfId:Ja,disableKeyboardA11y:pa})]})})}var pM=G1(mM);function gM({dimensions:t,lineWidth:a,variant:s,className:i}){return l.jsx("path",{strokeWidth:a,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`,className:ct(["react-flow__background-pattern",s,i])})}function xM({radius:t,className:a}){return l.jsx("circle",{cx:t,cy:t,r:t,className:ct(["react-flow__background-pattern","dots",a])})}var Pa;(function(t){t.Lines="lines",t.Dots="dots",t.Cross="cross"})(Pa||(Pa={}));const yM={[Pa.Dots]:1,[Pa.Lines]:1,[Pa.Cross]:6},bM=t=>({transform:t.transform,patternId:`pattern-${t.rfId}`});function pv({id:t,variant:a=Pa.Dots,gap:s=20,size:i,lineWidth:c=1,offset:u=0,color:f,bgColor:m,style:p,className:g,patternClassName:y}){const x=_.useRef(null),{transform:b,patternId:S}=ze(bM,Fe),j=i||yM[a],A=a===Pa.Dots,N=a===Pa.Cross,E=Array.isArray(s)?s:[s,s],R=[E[0]*b[2]||1,E[1]*b[2]||1],C=j*b[2],k=Array.isArray(u)?u:[u,u],w=N?[C,C]:R,D=[k[0]*b[2]||1+w[0]/2,k[1]*b[2]||1+w[1]/2],M=`${S}${t||""}`;return l.jsxs("svg",{className:ct(["react-flow__background",g]),style:{...p,...tu,"--xy-background-color-props":m,"--xy-background-pattern-color-props":f},ref:x,"data-testid":"rf__background",children:[l.jsx("pattern",{id:M,x:b[0]%R[0],y:b[1]%R[1],width:R[0],height:R[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${D[0]},-${D[1]})`,children:A?l.jsx(xM,{radius:C/2,className:y}):l.jsx(gM,{dimensions:w,lineWidth:c,variant:a,className:y})}),l.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${M})`})]})}pv.displayName="Background";const vM=_.memo(pv);function wM(){return l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:l.jsx("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function SM(){return l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:l.jsx("path",{d:"M0 0h32v4.2H0z"})})}function NM(){return l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:l.jsx("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function jM(){return l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:l.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function EM(){return l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:l.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function nc({children:t,className:a,...s}){return l.jsx("button",{type:"button",className:ct(["react-flow__controls-button",a]),...s,children:t})}const _M=t=>({isInteractive:t.nodesDraggable||t.nodesConnectable||t.elementsSelectable,minZoomReached:t.transform[2]<=t.minZoom,maxZoomReached:t.transform[2]>=t.maxZoom,ariaLabelConfig:t.ariaLabelConfig});function gv({style:t,showZoom:a=!0,showFitView:s=!0,showInteractive:i=!0,fitViewOptions:c,onZoomIn:u,onZoomOut:f,onFitView:m,onInteractiveChange:p,className:g,children:y,position:x="bottom-left",orientation:b="vertical","aria-label":S}){const j=We(),{isInteractive:A,minZoomReached:N,maxZoomReached:E,ariaLabelConfig:R}=ze(_M,Fe),{zoomIn:C,zoomOut:k,fitView:w}=nm(),D=()=>{C(),u?.()},M=()=>{k(),f?.()},V=()=>{w(c),m?.()},L=()=>{j.setState({nodesDraggable:!A,nodesConnectable:!A,elementsSelectable:!A}),p?.(!A)},se=b==="horizontal"?"horizontal":"vertical";return l.jsxs(eu,{className:ct(["react-flow__controls",se,g]),position:x,style:t,"data-testid":"rf__controls","aria-label":S??R["controls.ariaLabel"],children:[a&&l.jsxs(l.Fragment,{children:[l.jsx(nc,{onClick:D,className:"react-flow__controls-zoomin",title:R["controls.zoomIn.ariaLabel"],"aria-label":R["controls.zoomIn.ariaLabel"],disabled:E,children:l.jsx(wM,{})}),l.jsx(nc,{onClick:M,className:"react-flow__controls-zoomout",title:R["controls.zoomOut.ariaLabel"],"aria-label":R["controls.zoomOut.ariaLabel"],disabled:N,children:l.jsx(SM,{})})]}),s&&l.jsx(nc,{className:"react-flow__controls-fitview",onClick:V,title:R["controls.fitView.ariaLabel"],"aria-label":R["controls.fitView.ariaLabel"],children:l.jsx(NM,{})}),i&&l.jsx(nc,{className:"react-flow__controls-interactive",onClick:L,title:R["controls.interactive.ariaLabel"],"aria-label":R["controls.interactive.ariaLabel"],children:A?l.jsx(EM,{}):l.jsx(jM,{})}),y]})}gv.displayName="Controls";const CM=_.memo(gv);function TM({id:t,x:a,y:s,width:i,height:c,style:u,color:f,strokeColor:m,strokeWidth:p,className:g,borderRadius:y,shapeRendering:x,selected:b,onClick:S}){const{background:j,backgroundColor:A}=u||{},N=f||j||A;return l.jsx("rect",{className:ct(["react-flow__minimap-node",{selected:b},g]),x:a,y:s,rx:y,ry:y,width:i,height:c,style:{fill:N,stroke:m,strokeWidth:p},shapeRendering:x,onClick:S?E=>S(E,t):void 0})}const MM=_.memo(TM),AM=t=>t.nodes.map(a=>a.id),If=t=>t instanceof Function?t:()=>t;function kM({nodeStrokeColor:t,nodeColor:a,nodeClassName:s="",nodeBorderRadius:i=5,nodeStrokeWidth:c,nodeComponent:u=MM,onClick:f}){const m=ze(AM,Fe),p=If(a),g=If(t),y=If(s),x=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return l.jsx(l.Fragment,{children:m.map(b=>l.jsx(DM,{id:b,nodeColorFunc:p,nodeStrokeColorFunc:g,nodeClassNameFunc:y,nodeBorderRadius:i,nodeStrokeWidth:c,NodeComponent:u,onClick:f,shapeRendering:x},b))})}function RM({id:t,nodeColorFunc:a,nodeStrokeColorFunc:s,nodeClassNameFunc:i,nodeBorderRadius:c,nodeStrokeWidth:u,shapeRendering:f,NodeComponent:m,onClick:p}){const{node:g,x:y,y:x,width:b,height:S}=ze(j=>{const{internals:A}=j.nodeLookup.get(t),N=A.userNode,{x:E,y:R}=A.positionAbsolute,{width:C,height:k}=da(N);return{node:N,x:E,y:R,width:C,height:k}},Fe);return!g||g.hidden||!g1(g)?null:l.jsx(m,{x:y,y:x,width:b,height:S,style:g.style,selected:!!g.selected,className:i(g),color:a(g),borderRadius:c,strokeColor:s(g),strokeWidth:u,shapeRendering:f,onClick:p,id:g.id})}const DM=_.memo(RM);var zM=_.memo(kM);const OM=200,BM=150,HM=t=>!t.hidden,LM=t=>{const a={x:-t.transform[0]/t.transform[2],y:-t.transform[1]/t.transform[2],width:t.width/t.transform[2],height:t.height/t.transform[2]};return{viewBB:a,boundingRect:t.nodeLookup.size>0?p1(po(t.nodeLookup,{filter:HM}),a):a,rfId:t.rfId,panZoom:t.panZoom,translateExtent:t.translateExtent,flowWidth:t.width,flowHeight:t.height,ariaLabelConfig:t.ariaLabelConfig}},UM="react-flow__minimap-desc";function xv({style:t,className:a,nodeStrokeColor:s,nodeColor:i,nodeClassName:c="",nodeBorderRadius:u=5,nodeStrokeWidth:f,nodeComponent:m,bgColor:p,maskColor:g,maskStrokeColor:y,maskStrokeWidth:x,position:b="bottom-right",onClick:S,onNodeClick:j,pannable:A=!1,zoomable:N=!1,ariaLabel:E,inversePan:R,zoomStep:C=1,offsetScale:k=5}){const w=We(),D=_.useRef(null),{boundingRect:M,viewBB:V,rfId:L,panZoom:se,translateExtent:Q,flowWidth:F,flowHeight:te,ariaLabelConfig:U}=ze(LM,Fe),I=t?.width??OM,O=t?.height??BM,B=M.width/I,q=M.height/O,H=Math.max(B,q),W=H*I,z=H*O,Y=k*H,Z=M.x-(W-M.width)/2-Y,ae=M.y-(z-M.height)/2-Y,ue=W+Y*2,X=z+Y*2,le=`${UM}-${L}`,ce=_.useRef(0),de=_.useRef();ce.current=H,_.useEffect(()=>{if(D.current&&se)return de.current=n8({domNode:D.current,panZoom:se,getTransform:()=>w.getState().transform,getViewScale:()=>ce.current}),()=>{de.current?.destroy()}},[se]),_.useEffect(()=>{de.current?.update({translateExtent:Q,width:F,height:te,inversePan:R,pannable:A,zoomStep:C,zoomable:N})},[A,N,R,C,Q,F,te]);const we=S?ge=>{const[_e,Te]=de.current?.pointer(ge)||[0,0];S(ge,{x:_e,y:Te})}:void 0,ve=j?_.useCallback((ge,_e)=>{const Te=w.getState().nodeLookup.get(_e).internals.userNode;j(ge,Te)},[]):void 0,pe=E??U["minimap.ariaLabel"];return l.jsx(eu,{position:b,style:{...t,"--xy-minimap-background-color-props":typeof p=="string"?p:void 0,"--xy-minimap-mask-background-color-props":typeof g=="string"?g:void 0,"--xy-minimap-mask-stroke-color-props":typeof y=="string"?y:void 0,"--xy-minimap-mask-stroke-width-props":typeof x=="number"?x*H:void 0,"--xy-minimap-node-background-color-props":typeof i=="string"?i:void 0,"--xy-minimap-node-stroke-color-props":typeof s=="string"?s:void 0,"--xy-minimap-node-stroke-width-props":typeof f=="number"?f:void 0},className:ct(["react-flow__minimap",a]),"data-testid":"rf__minimap",children:l.jsxs("svg",{width:I,height:O,viewBox:`${Z} ${ae} ${ue} ${X}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":le,ref:D,onClick:we,children:[pe&&l.jsx("title",{id:le,children:pe}),l.jsx(zM,{onClick:ve,nodeColor:i,nodeStrokeColor:s,nodeBorderRadius:u,nodeClassName:c,nodeStrokeWidth:f,nodeComponent:m}),l.jsx("path",{className:"react-flow__minimap-mask",d:`M${Z-Y},${ae-Y}h${ue+Y*2}v${X+Y*2}h${-ue-Y*2}z
        M${V.x},${V.y}h${V.width}v${V.height}h${-V.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}xv.displayName="MiniMap";const $M=_.memo(xv),qM=t=>a=>t?`${Math.max(1/a.transform[2],1)}`:void 0,VM={[Br.Line]:"right",[Br.Handle]:"bottom-right"};function YM({nodeId:t,position:a,variant:s=Br.Handle,className:i,style:c=void 0,children:u,color:f,minWidth:m=10,minHeight:p=10,maxWidth:g=Number.MAX_VALUE,maxHeight:y=Number.MAX_VALUE,keepAspectRatio:x=!1,resizeDirection:b,autoScale:S=!0,shouldResize:j,onResizeStart:A,onResize:N,onResizeEnd:E}){const R=Q1(),C=typeof t=="string"?t:R,k=We(),w=_.useRef(null),D=s===Br.Handle,M=ze(_.useCallback(qM(D&&S),[D,S]),Fe),V=_.useRef(null),L=a??VM[s];_.useEffect(()=>{if(!(!w.current||!C))return V.current||(V.current=g8({domNode:w.current,nodeId:C,getStoreItems:()=>{const{nodeLookup:Q,transform:F,snapGrid:te,snapToGrid:U,nodeOrigin:I,domNode:O}=k.getState();return{nodeLookup:Q,transform:F,snapGrid:te,snapToGrid:U,nodeOrigin:I,paneDomNode:O}},onChange:(Q,F)=>{const{triggerNodeChanges:te,nodeLookup:U,parentLookup:I,nodeOrigin:O}=k.getState(),B=[],q={x:Q.x,y:Q.y},H=U.get(C);if(H&&H.expandParent&&H.parentId){const W=H.origin??O,z=Q.width??H.measured.width??0,Y=Q.height??H.measured.height??0,Z={id:H.id,parentId:H.parentId,rect:{width:z,height:Y,...x1({x:Q.x??H.position.x,y:Q.y??H.position.y},{width:z,height:Y},H.parentId,U,W)}},ae=tm([Z],U,I,O);B.push(...ae),q.x=Q.x?Math.max(W[0]*z,Q.x):void 0,q.y=Q.y?Math.max(W[1]*Y,Q.y):void 0}if(q.x!==void 0&&q.y!==void 0){const W={id:C,type:"position",position:{...q}};B.push(W)}if(Q.width!==void 0&&Q.height!==void 0){const z={id:C,type:"dimensions",resizing:!0,setAttributes:b?b==="horizontal"?"width":"height":!0,dimensions:{width:Q.width,height:Q.height}};B.push(z)}for(const W of F){const z={...W,type:"position"};B.push(z)}te(B)},onEnd:({width:Q,height:F})=>{const te={id:C,type:"dimensions",resizing:!1,dimensions:{width:Q,height:F}};k.getState().triggerNodeChanges([te])}})),V.current.update({controlPosition:L,boundaries:{minWidth:m,minHeight:p,maxWidth:g,maxHeight:y},keepAspectRatio:x,resizeDirection:b,onResizeStart:A,onResize:N,onResizeEnd:E,shouldResize:j}),()=>{V.current?.destroy()}},[L,m,p,g,y,x,A,N,E,j]);const se=L.split("-");return l.jsx("div",{className:ct(["react-flow__resize-control","nodrag",...se,s,i]),ref:w,style:{...c,scale:M,...f&&{[D?"backgroundColor":"borderColor"]:f}},children:u})}_.memo(YM);const Pf=[{id:"trigger-1",type:"trigger",position:{x:250,y:50},data:{label:"Inicio",config:{type:"classification",conditions:{intent:["sales"]}}}}],XM=[],Vr=Ky((t,a)=>({flowId:null,flowName:"Nuevo Flujo",flowSlug:null,isActive:!1,isSaved:!0,nodes:Pf,edges:XM,selectedNode:null,selectedEdge:null,isSidebarOpen:!0,isPropertiesOpen:!1,onNodesChange:s=>{t({nodes:Y1(s,a().nodes),isSaved:!1})},onEdgesChange:s=>{t({edges:X1(s,a().edges),isSaved:!1})},onConnect:s=>{t({edges:j1({...s,type:"smoothstep",animated:!0,style:{stroke:"#25D366",strokeWidth:2}},a().edges),isSaved:!1})},addNode:(s,i)=>{const c=`${s}-${Date.now()}`,f={id:c,type:s,position:i,data:{trigger:{label:"Trigger",config:{type:"classification",conditions:{}}},message:{label:"Mensaje",content:"Escribe tu mensaje aqu..."},question:{label:"Pregunta",content:"Cul es tu opcin?",variable:"respuesta",options:[]},condition:{label:"Condicin",conditions:[]},action:{label:"Accin",action:"",payload:{}},transfer:{label:"Transferir",content:"Transfiriendo a un agente..."},end:{label:"Fin"}}[s]||{label:s}};return t({nodes:[...a().nodes,f],isSaved:!1}),c},updateNodeData:(s,i)=>{t({nodes:a().nodes.map(c=>c.id===s?{...c,data:{...c.data,...i}}:c),isSaved:!1})},deleteNode:s=>{t({nodes:a().nodes.filter(i=>i.id!==s),edges:a().edges.filter(i=>i.source!==s&&i.target!==s),selectedNode:null,isSaved:!1})},setSelectedNode:s=>t({selectedNode:s,isPropertiesOpen:!!s}),setSelectedEdge:s=>t({selectedEdge:s}),clearSelection:()=>t({selectedNode:null,selectedEdge:null}),toggleSidebar:()=>t({isSidebarOpen:!a().isSidebarOpen}),toggleProperties:()=>t({isPropertiesOpen:!a().isPropertiesOpen}),setFlowMeta:s=>t({flowId:s.id,flowName:s.name,flowSlug:s.slug,isActive:s.is_active}),loadFlow:s=>{const i={trigger:"Inicio",message:"Mensaje",question:"Pregunta",condition:"Condicin",action:"Accin",transfer:"Transferir",end:"Fin"},c=(s.nodes||[]).map(u=>{let f=i[u.type]||u.type;return u.content&&u.content.length>0&&(f=u.content.substring(0,25)+(u.content.length>25?"...":"")),u.action&&(f=`Accin: ${u.action}`),{id:u.id,type:u.type,position:u.position||{x:250,y:50},data:{label:f,content:u.content,variable:u.variable,options:u.options,conditions:u.conditions,action:u.action,payload:u.payload,config:u.config||(u.type==="trigger"?s.trigger_config:void 0)}}});t({flowId:s.id,flowName:s.name,flowSlug:s.slug,isActive:s.is_active,nodes:c.length>0?c:Pf,edges:s.connections?.map(u=>({id:`${u.from}-${u.to}`,source:u.from,target:u.to,type:"smoothstep",animated:!0,label:u.label,style:{stroke:"#25D366",strokeWidth:2}}))||[],isSaved:!0})},resetFlow:()=>t({flowId:null,flowName:"Nuevo Flujo",flowSlug:null,isActive:!1,nodes:Pf,edges:[],selectedNode:null,isSaved:!0}),markSaved:()=>t({isSaved:!0}),exportFlow:()=>{const s=a();return{name:s.flowName,trigger_config:s.nodes.find(i=>i.type==="trigger")?.data.config||{},nodes:s.nodes.map(i=>({id:i.id,type:i.type,content:i.data.content,variable:i.data.variable,options:i.data.options,conditions:i.data.conditions,action:i.data.action,payload:i.data.payload,position:i.position})),connections:s.edges.map(i=>({from:i.source,to:i.target,label:i.label}))}}}));function GM({onTestClick:t}){const{flowId:a,flowName:s,isActive:i,isSaved:c,exportFlow:u,markSaved:f,loadFlow:m,resetFlow:p,setFlowMeta:g}=Vr(),[y,x]=_.useState(!1),[b,S]=_.useState(!1),[j,A]=_.useState([]),[N,E]=_.useState(s),R=async()=>{x(!0);try{const M=u();if(M.name=N,a)await A_(a,M);else{const V=await M_(M);g({id:V.id,name:N,slug:V.slug,is_active:!1})}f(),alert("Flujo guardado correctamente")}catch(M){alert("Error al guardar: "+M.message)}finally{x(!1)}},C=async()=>{if(!a){alert("Primero guarda el flujo");return}try{await Mb(a,!i),g({id:a,name:N,is_active:!i}),alert(i?"Flujo desactivado":"Flujo activado")}catch(M){alert("Error: "+M.message)}},k=async()=>{try{const M=await Tb();A(M.flows||[]),S(!0)}catch(M){alert("Error cargando flujos: "+M.message)}},w=async M=>{try{const V=await rh(M.id);m(V.flow),E(V.flow.name),S(!1)}catch(V){alert("Error cargando flujo: "+V.message)}},D=()=>{!c&&!confirm("Tienes cambios sin guardar. Continuar?")||(p(),E("Nuevo Flujo"))};return l.jsxs("div",{style:{height:"56px",background:"white",borderBottom:"1px solid #e5e7eb",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0 16px"},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[l.jsx("span",{style:{fontSize:"24px"},children:""}),l.jsx("span",{style:{fontWeight:600,color:"#075E54"},children:"Flow Builder"})]}),l.jsx("div",{style:{borderLeft:"1px solid #e5e7eb",height:"24px"}}),l.jsx("input",{type:"text",value:N,onChange:M=>E(M.target.value),style:{border:"none",fontSize:"15px",fontWeight:500,background:"transparent",width:"200px"},placeholder:"Nombre del flujo"}),!c&&l.jsx("span",{style:{fontSize:"11px",background:"#fef3c7",color:"#92400e",padding:"2px 8px",borderRadius:"4px"},children:"Sin guardar"}),i&&l.jsx("span",{style:{fontSize:"11px",background:"#d1fae5",color:"#065f46",padding:"2px 8px",borderRadius:"4px"},children:"Activo"})]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[l.jsx("button",{onClick:t,style:{padding:"8px 16px",background:"linear-gradient(135deg, #075E54 0%, #128C7E 100%)",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"13px",fontWeight:500},children:" Probar"}),l.jsx("div",{style:{borderLeft:"1px solid #e5e7eb",height:"24px",margin:"0 4px"}}),l.jsx("button",{onClick:D,style:{padding:"8px 16px",background:"white",border:"1px solid #d1d5db",borderRadius:"6px",cursor:"pointer",fontSize:"13px"},children:"+ Nuevo"}),l.jsx("button",{onClick:k,style:{padding:"8px 16px",background:"white",border:"1px solid #d1d5db",borderRadius:"6px",cursor:"pointer",fontSize:"13px"},children:" Abrir"}),l.jsx("button",{onClick:R,disabled:y,style:{padding:"8px 16px",background:"#25D366",color:"white",border:"none",borderRadius:"6px",cursor:y?"wait":"pointer",fontSize:"13px",fontWeight:500},children:y?"Guardando...":" Guardar"}),a&&l.jsx("button",{onClick:C,style:{padding:"8px 16px",background:i?"#fee2e2":"#d1fae5",color:i?"#dc2626":"#065f46",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"13px",fontWeight:500},children:i?" Desactivar":" Activar"})]}),b&&l.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:l.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"24px",width:"400px",maxHeight:"500px",overflow:"auto"},children:[l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"16px"},children:[l.jsx("h3",{style:{margin:0},children:"Seleccionar flujo"}),l.jsx("button",{onClick:()=>S(!1),style:{background:"none",border:"none",cursor:"pointer",fontSize:"18px"},children:""})]}),j.length===0?l.jsx("p",{style:{color:"#6b7280",textAlign:"center"},children:"No hay flujos guardados"}):l.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:j.map(M=>l.jsxs("div",{onClick:()=>w(M),style:{padding:"12px",border:"1px solid #e5e7eb",borderRadius:"8px",cursor:"pointer",display:"flex",justifyContent:"space-between",alignItems:"center"},onMouseOver:V=>V.currentTarget.style.background="#f9fafb",onMouseOut:V=>V.currentTarget.style.background="white",children:[l.jsxs("div",{children:[l.jsx("div",{style:{fontWeight:500},children:M.name}),l.jsx("div",{style:{fontSize:"12px",color:"#6b7280"},children:M.slug})]}),M.is_active&&l.jsx("span",{style:{fontSize:"10px",background:"#d1fae5",color:"#065f46",padding:"2px 6px",borderRadius:"4px"},children:"Activo"})]},M.id))})]})})]})}const IM=[{type:"trigger",label:"Trigger",icon:"",color:"#667eea",description:"Inicio del flujo"},{type:"message",label:"Mensaje",icon:"",color:"#25D366",description:"Enviar mensaje"},{type:"question",label:"Pregunta",icon:"",color:"#34B7F1",description:"Preguntar y esperar"},{type:"condition",label:"Condicin",icon:"",color:"#f59e0b",description:"Bifurcacin"},{type:"action",label:"Accin",icon:"",color:"#6366f1",description:"Ejecutar accin"},{type:"ai_response",label:"Respuesta IA",icon:"",color:"#8b5cf6",description:"Generar con IA"},{type:"webhook",label:"Webhook",icon:"",color:"#f97316",description:"Llamar API externa"},{type:"delay",label:"Espera",icon:"",color:"#64748b",description:"Pausar X segundos"},{type:"transfer",label:"Transferir",icon:"",color:"#ec4899",description:"Pasar a humano"},{type:"end",label:"Fin",icon:"",color:"#ef4444",description:"Terminar flujo"}];function PM(){const{isSidebarOpen:t,toggleSidebar:a}=Vr(),s=(i,c)=>{i.dataTransfer.setData("application/reactflow",c),i.dataTransfer.effectAllowed="move"};return t?l.jsxs("div",{style:{width:"240px",background:"white",borderRight:"1px solid #e5e7eb",padding:"16px",display:"flex",flexDirection:"column",height:"100%"},children:[l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[l.jsx("h3",{style:{margin:0,fontSize:"14px",fontWeight:600},children:"Nodos"}),l.jsx("button",{onClick:a,style:{background:"none",border:"none",cursor:"pointer",fontSize:"18px",color:"#6b7280"},children:""})]}),l.jsx("p",{style:{fontSize:"12px",color:"#6b7280",marginBottom:"16px"},children:"Arrastra los nodos al canvas para construir tu flujo"}),l.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:IM.map(i=>l.jsxs("div",{draggable:!0,onDragStart:c=>s(c,i.type),style:{padding:"10px 12px",borderRadius:"8px",cursor:"grab",display:"flex",alignItems:"center",gap:"10px",background:`${i.color}15`,border:`1px solid ${i.color}30`,transition:"all 0.2s"},onMouseOver:c=>{c.currentTarget.style.transform="translateX(4px)",c.currentTarget.style.boxShadow="0 2px 8px rgba(0,0,0,0.1)"},onMouseOut:c=>{c.currentTarget.style.transform="none",c.currentTarget.style.boxShadow="none"},children:[l.jsx("span",{style:{fontSize:"20px"},children:i.icon}),l.jsxs("div",{children:[l.jsx("div",{style:{fontWeight:500,fontSize:"13px"},children:i.label}),l.jsx("div",{style:{fontSize:"11px",color:"#6b7280"},children:i.description})]})]},i.type))})]}):l.jsxs("button",{onClick:a,style:{position:"absolute",left:10,top:10,zIndex:10,background:"white",border:"1px solid #e5e7eb",borderRadius:"8px",padding:"8px 12px",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px"},children:[l.jsx("span",{children:""})," Nodos"]})}const Ay={trigger:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",border:"none"},message:{background:"white",border:"2px solid #25D366"},question:{background:"white",border:"2px solid #34B7F1"},condition:{background:"#fef3c7",border:"2px solid #f59e0b"},action:{background:"#e0e7ff",border:"2px solid #6366f1"},transfer:{background:"#fce7f3",border:"2px solid #ec4899"},end:{background:"#fee2e2",border:"2px solid #ef4444"}},ZM={trigger:"",message:"",question:"",condition:"",action:"",transfer:"",end:""};function QM({id:t,data:a,type:s,selected:i}){const c=Ay[s]||Ay.message,u=ZM[s]||"",f=s!=="end",m=s!=="trigger";return l.jsxs("div",{style:{...c,padding:"12px 16px",borderRadius:"8px",minWidth:"180px",maxWidth:"250px",boxShadow:i?"0 0 0 2px #3b82f6":"0 2px 8px rgba(0,0,0,0.1)",cursor:"pointer"},children:[m&&l.jsx(Hr,{type:"target",position:xe.Top,style:{background:"#6b7280",width:10,height:10}}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"4px"},children:[l.jsx("span",{style:{fontSize:"16px"},children:u}),l.jsx("strong",{style:{fontSize:"13px"},children:a.label||s})]}),a.content&&l.jsxs("div",{style:{fontSize:"11px",opacity:.8,marginTop:"4px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:[a.content.substring(0,40),a.content.length>40?"...":""]}),a.options&&a.options.length>0&&l.jsxs("div",{style:{fontSize:"10px",marginTop:"6px",opacity:.7},children:[a.options.length," opciones"]}),f&&l.jsx(Hr,{type:"source",position:xe.Bottom,style:{background:"#25D366",width:10,height:10}})]})}const gs=_.memo(QM),FM={trigger:t=>l.jsx(gs,{...t,type:"trigger"}),message:t=>l.jsx(gs,{...t,type:"message"}),question:t=>l.jsx(gs,{...t,type:"question"}),condition:t=>l.jsx(gs,{...t,type:"condition"}),action:t=>l.jsx(gs,{...t,type:"action"}),transfer:t=>l.jsx(gs,{...t,type:"transfer"}),end:t=>l.jsx(gs,{...t,type:"end"})};function WM(){const t=_.useRef(null),{nodes:a,edges:s,onNodesChange:i,onEdgesChange:c,onConnect:u,addNode:f,setSelectedNode:m}=Vr(),p=_.useCallback(b=>{b.preventDefault(),b.dataTransfer.dropEffect="move"},[]),g=_.useCallback(b=>{b.preventDefault();const S=b.dataTransfer.getData("application/reactflow");if(!S)return;const j=t.current.getBoundingClientRect(),A={x:b.clientX-j.left-90,y:b.clientY-j.top-25};f(S,A)},[f]),y=_.useCallback((b,S)=>{m(S)},[m]),x=_.useCallback(()=>{m(null)},[m]);return l.jsx("div",{ref:t,style:{flex:1,height:"100%"},children:l.jsxs(pM,{nodes:a,edges:s,onNodesChange:i,onEdgesChange:c,onConnect:u,onDrop:g,onDragOver:p,onNodeClick:y,onPaneClick:x,nodeTypes:FM,fitView:!0,snapToGrid:!0,snapGrid:[15,15],defaultEdgeOptions:{type:"smoothstep",animated:!0,style:{stroke:"#25D366",strokeWidth:2}},children:[l.jsx(vM,{color:"#e5e7eb",gap:20}),l.jsx(CM,{}),l.jsx($M,{nodeColor:b=>({trigger:"#667eea",message:"#25D366",question:"#34B7F1",condition:"#f59e0b",action:"#6366f1",transfer:"#ec4899",end:"#ef4444"})[b.type]||"#6b7280",maskColor:"rgba(255, 255, 255, 0.8)"})]})})}const KM=[{value:"sales",label:"Ventas",color:"#10b981"},{value:"support",label:"Soporte",color:"#3b82f6"},{value:"complaint",label:"Quejas",color:"#ef4444"},{value:"info",label:"Informacin",color:"#8b5cf6"},{value:"greeting",label:"Saludo",color:"#f59e0b"}],JM=[{value:"low",label:"Baja"},{value:"medium",label:"Media"},{value:"high",label:"Alta"},{value:"critical",label:"Crtica"}];function eA(){const{selectedNode:t,updateNodeData:a,deleteNode:s,isPropertiesOpen:i,toggleProperties:c}=Vr(),[u,f]=_.useState({}),[m,p]=_.useState({type:"keyword",keywords:[],conditions:{}}),[g,y]=_.useState([]),x=Ht(w=>w.token);_.useEffect(()=>{t&&(f(t.data||{}),t.type==="trigger"&&t.data?.config&&p(t.data.config))},[t]),_.useEffect(()=>{t?.type==="transfer"&&g.length===0&&x&&fetch("/api/departments",{headers:{Authorization:`Bearer ${x}`}}).then(w=>w.json()).then(w=>y(w.departments||[])).catch(()=>{})},[t?.type,x]);const b=(w,D)=>{const M={...u,[w]:D};f(M),a(t.id,{[w]:D})},S=(w,D,M)=>{const V=[...u.options||[]];V[w]={...V[w],[D]:M},b("options",V)},j=()=>{const w=[...u.options||[],{label:"Nueva opcin",value:""}];b("options",w)},A=w=>{const D=u.options.filter((M,V)=>V!==w);b("options",D)},N=w=>{const D={type:w,keywords:[],conditions:{}};p(D),a(t.id,{config:D})},E=w=>{const D=w.split(",").map(V=>V.trim()).filter(V=>V),M={...m,keywords:D};p(M),a(t.id,{config:M})},R=w=>{const D=m.conditions?.intent||[];let M;D.includes(w)?M=D.filter(L=>L!==w):M=[...D,w];const V={...m,conditions:{...m.conditions,intent:M}};p(V),a(t.id,{config:V})},C=w=>{const D={...m,conditions:{...m.conditions,urgency:w}};p(D),a(t.id,{config:D})},k=w=>{const D={...m,conditions:{...m.conditions,min_lead_score:parseInt(w)||0}};p(D),a(t.id,{config:D})};return!i||!t?null:l.jsxs("div",{style:{width:"300px",background:"white",borderLeft:"1px solid #e5e7eb",padding:"16px",height:"100%",overflow:"auto"},children:[l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[l.jsx("h3",{style:{margin:0,fontSize:"14px",fontWeight:600},children:"Propiedades"}),l.jsx("button",{onClick:c,style:{background:"none",border:"none",cursor:"pointer",fontSize:"18px",color:"#6b7280"},children:""})]}),l.jsxs("div",{style:{fontSize:"12px",color:"#6b7280",marginBottom:"16px"},children:["Tipo: ",l.jsx("strong",{children:t.type})]}),l.jsxs("div",{style:{marginBottom:"16px"},children:[l.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:500,marginBottom:"4px"},children:"Etiqueta"}),l.jsx("input",{type:"text",value:u.label||"",onChange:w=>b("label",w.target.value),style:{width:"100%",padding:"8px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"13px"}})]}),t.type==="trigger"&&l.jsxs("div",{style:{marginBottom:"16px",padding:"12px",background:"#f8fafc",borderRadius:"8px",border:"1px solid #e2e8f0"},children:[l.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:600,marginBottom:"12px",color:"#475569"},children:"Configuracin del Trigger"}),l.jsxs("div",{style:{marginBottom:"12px"},children:[l.jsx("label",{style:{display:"block",fontSize:"11px",fontWeight:500,marginBottom:"6px",color:"#64748b"},children:"Tipo de activacin"}),l.jsx("div",{style:{display:"flex",gap:"6px"},children:[{value:"keyword",label:"Palabras clave"},{value:"classification",label:"Clasificacin"},{value:"always",label:"Siempre"}].map(w=>l.jsx("button",{onClick:()=>N(w.value),style:{flex:1,padding:"8px 4px",fontSize:"11px",border:m.type===w.value?"2px solid #25D366":"1px solid #d1d5db",borderRadius:"6px",background:m.type===w.value?"#dcfce7":"white",color:m.type===w.value?"#166534":"#6b7280",cursor:"pointer",fontWeight:m.type===w.value?600:400},children:w.label},w.value))})]}),m.type==="keyword"&&l.jsxs("div",{style:{marginBottom:"12px"},children:[l.jsx("label",{style:{display:"block",fontSize:"11px",fontWeight:500,marginBottom:"4px",color:"#64748b"},children:"Palabras clave (separadas por coma)"}),l.jsx("input",{type:"text",value:(m.keywords||[]).join(", "),onChange:w=>E(w.target.value),placeholder:"precio, costo, cotizar, cuanto",style:{width:"100%",padding:"8px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"12px"}}),l.jsx("p",{style:{fontSize:"10px",color:"#94a3b8",marginTop:"4px"},children:"El flujo se activa si el mensaje contiene alguna de estas palabras"})]}),m.type==="classification"&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{style:{marginBottom:"12px"},children:[l.jsx("label",{style:{display:"block",fontSize:"11px",fontWeight:500,marginBottom:"6px",color:"#64748b"},children:"Intenciones del mensaje"}),l.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"6px"},children:KM.map(w=>{const D=(m.conditions?.intent||[]).includes(w.value);return l.jsxs("button",{onClick:()=>R(w.value),style:{padding:"6px 10px",fontSize:"11px",border:D?`2px solid ${w.color}`:"1px solid #d1d5db",borderRadius:"16px",background:D?`${w.color}20`:"white",color:D?w.color:"#6b7280",cursor:"pointer",fontWeight:D?600:400},children:[D&&" ",w.label]},w.value)})})]}),l.jsxs("div",{style:{marginBottom:"12px"},children:[l.jsx("label",{style:{display:"block",fontSize:"11px",fontWeight:500,marginBottom:"4px",color:"#64748b"},children:"Urgencia mnima"}),l.jsxs("select",{value:m.conditions?.urgency||"",onChange:w=>C(w.target.value),style:{width:"100%",padding:"8px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"12px"},children:[l.jsx("option",{value:"",children:"Cualquiera"}),JM.map(w=>l.jsx("option",{value:w.value,children:w.label},w.value))]})]}),l.jsxs("div",{children:[l.jsx("label",{style:{display:"block",fontSize:"11px",fontWeight:500,marginBottom:"4px",color:"#64748b"},children:"Lead score mnimo"}),l.jsx("input",{type:"number",min:"0",max:"100",value:m.conditions?.min_lead_score||0,onChange:w=>k(w.target.value),style:{width:"100%",padding:"8px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"12px"}}),l.jsx("p",{style:{fontSize:"10px",color:"#94a3b8",marginTop:"4px"},children:"Solo activa si el lead tiene este puntaje o ms (0-100)"})]})]}),m.type==="always"&&l.jsx("div",{style:{padding:"12px",background:"#fef3c7",borderRadius:"6px",border:"1px solid #fcd34d"},children:l.jsx("p",{style:{fontSize:"11px",color:"#92400e",margin:0},children:" Este flujo se activar para TODOS los mensajes entrantes que no coincidan con otros flujos. salo como flujo por defecto."})})]}),["message","question","transfer"].includes(t.type)&&l.jsxs("div",{style:{marginBottom:"16px"},children:[l.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:500,marginBottom:"4px"},children:"Contenido del mensaje"}),l.jsx("textarea",{value:u.content||"",onChange:w=>b("content",w.target.value),rows:4,style:{width:"100%",padding:"8px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"13px",resize:"vertical"},placeholder:"Escribe el mensaje..."}),l.jsxs("p",{style:{fontSize:"11px",color:"#6b7280",marginTop:"4px"},children:["Usa ","{{variable}}"," para insertar variables"]})]}),t.type==="transfer"&&l.jsxs("div",{style:{marginBottom:"16px"},children:[l.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:500,marginBottom:"4px"},children:"Departamento destino"}),l.jsxs("select",{value:u.targetDepartmentId||"",onChange:w=>b("targetDepartmentId",w.target.value?Number(w.target.value):null),style:{width:"100%",padding:"8px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"13px"},children:[l.jsx("option",{value:"",children:"Auto (detectar por intent)"}),g.filter(w=>w.active).map(w=>l.jsx("option",{value:w.id,children:w.display_name||w.name},w.id))]}),l.jsx("p",{style:{fontSize:"11px",color:"#6b7280",marginTop:"4px"},children:'Si seleccionas "Auto", se usar el intent detectado para asignar departamento'})]}),t.type==="question"&&l.jsxs("div",{style:{marginBottom:"16px"},children:[l.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:500,marginBottom:"4px"},children:"Guardar respuesta en variable"}),l.jsx("input",{type:"text",value:u.variable||"",onChange:w=>b("variable",w.target.value),style:{width:"100%",padding:"8px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"13px"},placeholder:"nombre_variable"})]}),t.type==="question"&&l.jsxs("div",{style:{marginBottom:"16px"},children:[l.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:500,marginBottom:"8px"},children:"Opciones de respuesta"}),(u.options||[]).map((w,D)=>l.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"8px"},children:[l.jsx("input",{type:"text",value:w.label,onChange:M=>S(D,"label",M.target.value),placeholder:"Texto",style:{flex:1,padding:"6px",border:"1px solid #d1d5db",borderRadius:"4px",fontSize:"12px"}}),l.jsx("input",{type:"text",value:w.value,onChange:M=>S(D,"value",M.target.value),placeholder:"Valor",style:{width:"80px",padding:"6px",border:"1px solid #d1d5db",borderRadius:"4px",fontSize:"12px"}}),l.jsx("button",{onClick:()=>A(D),style:{background:"#fee2e2",border:"none",borderRadius:"4px",padding:"0 8px",cursor:"pointer",color:"#ef4444"},children:""})]},D)),l.jsx("button",{onClick:j,style:{background:"#f3f4f6",border:"1px dashed #d1d5db",borderRadius:"6px",padding:"8px",width:"100%",cursor:"pointer",fontSize:"12px"},children:"+ Agregar opcin"})]}),t.type==="action"&&l.jsxs("div",{style:{marginBottom:"16px"},children:[l.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:500,marginBottom:"4px"},children:"Tipo de accin"}),l.jsxs("select",{value:u.action||"",onChange:w=>b("action",w.target.value),style:{width:"100%",padding:"8px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"13px"},children:[l.jsx("option",{value:"",children:"Selecciona..."}),l.jsx("option",{value:"notify_sales",children:"Notificar a ventas"}),l.jsx("option",{value:"create_ticket",children:"Crear ticket"}),l.jsx("option",{value:"save_lead",children:"Guardar lead"}),l.jsx("option",{value:"send_email",children:"Enviar email"}),l.jsx("option",{value:"webhook",children:"Llamar webhook"}),l.jsx("option",{value:"search_faq",children:"Buscar en FAQ"})]})]}),t.type==="ai_response"&&l.jsxs("div",{style:{marginBottom:"16px",padding:"12px",background:"#f5f3ff",borderRadius:"8px",border:"1px solid #c4b5fd"},children:[l.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:600,marginBottom:"12px",color:"#5b21b6"},children:" Configuracin de IA"}),l.jsxs("div",{style:{marginBottom:"12px"},children:[l.jsx("label",{style:{display:"block",fontSize:"11px",fontWeight:500,marginBottom:"4px",color:"#6b7280"},children:"Prompt del sistema"}),l.jsx("textarea",{value:u.system_prompt||"",onChange:w=>b("system_prompt",w.target.value),rows:3,style:{width:"100%",padding:"8px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"12px",resize:"vertical"},placeholder:"Eres un asistente de ventas amable y profesional..."})]}),l.jsxs("div",{style:{marginBottom:"12px"},children:[l.jsx("label",{style:{display:"block",fontSize:"11px",fontWeight:500,marginBottom:"4px",color:"#6b7280"},children:"Prompt del usuario"}),l.jsx("textarea",{value:u.user_prompt||"",onChange:w=>b("user_prompt",w.target.value),rows:2,style:{width:"100%",padding:"8px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"12px",resize:"vertical"},placeholder:"El cliente pregunta: {{initial_message}}"}),l.jsxs("p",{style:{fontSize:"10px",color:"#94a3b8",marginTop:"4px"},children:["Usa ","{{variable}}"," para insertar datos dinmicos"]})]}),l.jsxs("div",{style:{marginBottom:"12px"},children:[l.jsx("label",{style:{display:"block",fontSize:"11px",fontWeight:500,marginBottom:"4px",color:"#6b7280"},children:"Modelo"}),l.jsxs("select",{value:u.model||"gpt-4o-mini",onChange:w=>b("model",w.target.value),style:{width:"100%",padding:"8px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"12px"},children:[l.jsx("option",{value:"gpt-4o-mini",children:"GPT-4o Mini (rpido)"}),l.jsx("option",{value:"gpt-4o",children:"GPT-4o (preciso)"}),l.jsx("option",{value:"gpt-4-turbo",children:"GPT-4 Turbo"})]})]}),l.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"12px"},children:[l.jsxs("div",{style:{flex:1},children:[l.jsx("label",{style:{display:"block",fontSize:"11px",fontWeight:500,marginBottom:"4px",color:"#6b7280"},children:"Temperatura"}),l.jsx("input",{type:"number",min:"0",max:"1",step:"0.1",value:u.temperature||.7,onChange:w=>b("temperature",parseFloat(w.target.value)),style:{width:"100%",padding:"8px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"12px"}})]}),l.jsxs("div",{style:{flex:1},children:[l.jsx("label",{style:{display:"block",fontSize:"11px",fontWeight:500,marginBottom:"4px",color:"#6b7280"},children:"Max tokens"}),l.jsx("input",{type:"number",min:"50",max:"2000",step:"50",value:u.max_tokens||200,onChange:w=>b("max_tokens",parseInt(w.target.value)),style:{width:"100%",padding:"8px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"12px"}})]})]}),l.jsxs("div",{children:[l.jsx("label",{style:{display:"block",fontSize:"11px",fontWeight:500,marginBottom:"4px",color:"#6b7280"},children:"Guardar respuesta en variable (opcional)"}),l.jsx("input",{type:"text",value:u.variable||"",onChange:w=>b("variable",w.target.value),style:{width:"100%",padding:"8px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"12px"},placeholder:"ai_response"})]})]}),t.type==="webhook"&&l.jsxs("div",{style:{marginBottom:"16px",padding:"12px",background:"#fff7ed",borderRadius:"8px",border:"1px solid #fed7aa"},children:[l.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:600,marginBottom:"12px",color:"#c2410c"},children:" Configuracin de Webhook"}),l.jsxs("div",{style:{marginBottom:"12px"},children:[l.jsx("label",{style:{display:"block",fontSize:"11px",fontWeight:500,marginBottom:"4px",color:"#6b7280"},children:"URL del endpoint"}),l.jsx("input",{type:"text",value:u.url||"",onChange:w=>b("url",w.target.value),style:{width:"100%",padding:"8px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"12px"},placeholder:"https://api.ejemplo.com/endpoint"})]}),l.jsxs("div",{style:{marginBottom:"12px"},children:[l.jsx("label",{style:{display:"block",fontSize:"11px",fontWeight:500,marginBottom:"4px",color:"#6b7280"},children:"Mtodo HTTP"}),l.jsxs("select",{value:u.method||"POST",onChange:w=>b("method",w.target.value),style:{width:"100%",padding:"8px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"12px"},children:[l.jsx("option",{value:"GET",children:"GET"}),l.jsx("option",{value:"POST",children:"POST"}),l.jsx("option",{value:"PUT",children:"PUT"}),l.jsx("option",{value:"PATCH",children:"PATCH"}),l.jsx("option",{value:"DELETE",children:"DELETE"})]})]}),l.jsxs("div",{style:{marginBottom:"12px"},children:[l.jsx("label",{style:{display:"block",fontSize:"11px",fontWeight:500,marginBottom:"4px",color:"#6b7280"},children:"Headers (JSON)"}),l.jsx("textarea",{value:u.headers||`{
  "Content-Type": "application/json"
}`,onChange:w=>b("headers",w.target.value),rows:3,style:{width:"100%",padding:"8px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"11px",fontFamily:"monospace",resize:"vertical"}})]}),l.jsxs("div",{style:{marginBottom:"12px"},children:[l.jsxs("label",{style:{display:"block",fontSize:"11px",fontWeight:500,marginBottom:"4px",color:"#6b7280"},children:["Body (JSON) - Usa ","{{variable}}"," para datos dinmicos"]}),l.jsx("textarea",{value:u.body||`{
  "phone": "{{phone}}",
  "message": "{{initial_message}}"
}`,onChange:w=>b("body",w.target.value),rows:4,style:{width:"100%",padding:"8px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"11px",fontFamily:"monospace",resize:"vertical"}})]}),l.jsxs("div",{style:{marginBottom:"12px"},children:[l.jsx("label",{style:{display:"block",fontSize:"11px",fontWeight:500,marginBottom:"4px",color:"#6b7280"},children:"Timeout (ms)"}),l.jsx("input",{type:"number",min:"1000",max:"30000",step:"1000",value:u.timeout||5e3,onChange:w=>b("timeout",parseInt(w.target.value)),style:{width:"100%",padding:"8px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"12px"}})]}),l.jsxs("div",{children:[l.jsx("label",{style:{display:"block",fontSize:"11px",fontWeight:500,marginBottom:"4px",color:"#6b7280"},children:"Guardar respuesta en variable"}),l.jsx("input",{type:"text",value:u.variable||"",onChange:w=>b("variable",w.target.value),style:{width:"100%",padding:"8px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"12px"},placeholder:"api_response"})]})]}),t.type==="delay"&&l.jsxs("div",{style:{marginBottom:"16px",padding:"12px",background:"#f8fafc",borderRadius:"8px",border:"1px solid #cbd5e1"},children:[l.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:600,marginBottom:"12px",color:"#475569"},children:" Configuracin de Espera"}),l.jsxs("div",{style:{marginBottom:"12px"},children:[l.jsx("label",{style:{display:"block",fontSize:"11px",fontWeight:500,marginBottom:"4px",color:"#6b7280"},children:"Segundos de espera"}),l.jsx("input",{type:"number",min:"1",max:"60",step:"1",value:u.seconds||2,onChange:w=>b("seconds",parseInt(w.target.value)),style:{width:"100%",padding:"8px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"13px"}}),l.jsx("p",{style:{fontSize:"10px",color:"#94a3b8",marginTop:"4px"},children:"Entre 1 y 60 segundos. Recomendado: 2-5 seg para parecer ms humano."})]}),l.jsx("div",{children:l.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer"},children:[l.jsx("input",{type:"checkbox",checked:u.typing_indicator!==!1,onChange:w=>b("typing_indicator",w.target.checked),style:{width:"16px",height:"16px"}}),l.jsx("span",{style:{fontSize:"12px",color:"#374151"},children:'Mostrar "escribiendo..." mientras espera'})]})})]}),l.jsx("div",{style:{marginTop:"24px",paddingTop:"16px",borderTop:"1px solid #e5e7eb"},children:l.jsx("button",{onClick:()=>s(t.id),style:{width:"100%",padding:"10px",background:"#fee2e2",border:"1px solid #fecaca",borderRadius:"6px",color:"#dc2626",cursor:"pointer",fontWeight:500,fontSize:"13px"},children:" Eliminar nodo"})})]})}function tA({isOpen:t,onClose:a}){const{nodes:s,edges:i,flowName:c}=Vr(),[u,f]=_.useState([]),[m,p]=_.useState(""),[g,y]=_.useState(null),[x,b]=_.useState({}),[S,j]=_.useState(!1),[A,N]=_.useState(null),[E,R]=_.useState("local"),[C,k]=_.useState(!1),w=_.useRef(null);_.useEffect(()=>{w.current?.scrollIntoView({behavior:"smooth"})},[u]),_.useEffect(()=>{t&&D()},[t]);const D=()=>{f([{type:"system",text:`Simulando flujo: "${c}"`},{type:"system",text:"Escribe un mensaje para iniciar..."}]),b({}),y(null),j(!0),N(null)},M=B=>s.find(q=>q.id===B),V=(B,q=null)=>{const H=i.find(W=>!(W.source!==B||q&&W.label&&W.label!==q));return H?M(H.target):null},L=()=>s.find(B=>B.type==="trigger"),se=async B=>{if(!B){F("system"," Flujo terminado (no hay siguiente nodo)"),j(!0);return}switch(N(B.id),y(B.id),await te(300),B.type){case"trigger":F("system"," Trigger activado");const q=V(B.id);se(q);break;case"message":const H=Q(B.data.content||"Mensaje vaco");F("bot",H),await te(500);const W=V(B.id);se(W);break;case"question":const z=Q(B.data.content||"?");F("bot",z),B.data.options&&B.data.options.length>0&&F("options",B.data.options),j(!0),y(B.id);break;case"condition":F("system"," Evaluando condicin..."),await te(300);const Y=B.data.conditions||[];let Z=null;for(const me of Y){if(me.else){Z=me.goto;break}const qe=me.if?.match(/(\w+)\s*==\s*["']?(\w+)["']?/);if(qe){const[,vt,ut]=qe;if(x[vt]===ut){Z=me.goto,F("system",` Condicin cumplida: ${vt} = ${ut}`);break}}}const ae=M(Z)||V(B.id);se(ae);break;case"action":F("system",` Ejecutando accin: ${B.data.action||"sin definir"}`),await te(500);const ue=V(B.id);se(ue);break;case"ai_response":F("system"," Generando respuesta con IA..."),k(!0),await te(1500),k(!1);const X=B.data.system_prompt||"",le=Q(B.data.user_prompt||""),ce=`[Respuesta IA simulada]
${X.substring(0,50)}...
Para: "${le.substring(0,50)}..."`;F("bot",ce),B.data.variable&&(b(me=>({...me,[B.data.variable]:"respuesta_ia_simulada"})),F("system",` Variable "${B.data.variable}" = respuesta IA`)),await te(300);const de=V(B.id);se(de);break;case"webhook":F("system",` Llamando webhook: ${B.data.url||"URL no definida"}`),F("system",`   Mtodo: ${B.data.method||"POST"}`),k(!0),await te(1e3),k(!1);const we={success:!0,data:{status:"ok",simulated:!0}};F("system",` Webhook respondi: ${JSON.stringify(we).substring(0,50)}...`),B.data.variable&&b(me=>({...me,[B.data.variable]:we}));const ve=V(B.id);se(ve);break;case"delay":const pe=B.data.seconds||2,ge=B.data.typing_indicator!==!1;F("system",` Esperando ${pe} segundos...`),ge&&k(!0),await te(pe*1e3),ge&&k(!1);const _e=V(B.id);se(_e);break;case"transfer":F("bot",B.data.content||"Transfiriendo a un agente..."),F("system"," Conversacin transferida a humano"),j(!0);break;case"end":F("system"," Flujo completado"),j(!0);break;default:F("system",`Nodo desconocido: ${B.type}`);const Te=V(B.id);se(Te)}},Q=B=>B&&B.replace(/\{\{(\w+)\}\}/g,(q,H)=>x[H]||q),F=(B,q)=>{f(H=>[...H,{type:B,text:q,time:new Date}])},te=B=>new Promise(q=>setTimeout(q,B)),U=()=>{if(!m.trim())return;const B=m.trim();p(""),F("user",B),j(!1);const q=M(g);if(q?.type==="question"&&q.data.variable){let H=B;if(q.data.options){const W=q.data.options.find(z=>z.label.toLowerCase()===B.toLowerCase()||z.value===B);W&&(H=W.value)}b(W=>({...W,[q.data.variable]:H})),F("system",` Variable "${q.data.variable}" = "${H}"`),setTimeout(()=>{const W=V(g);se(W)},300)}else if(!g){const H=L();H?se(H):F("system"," No hay nodo Trigger en el flujo")}},I=B=>{p(B.label),setTimeout(()=>U(),100)},O=B=>{B.key==="Enter"&&!B.shiftKey&&(B.preventDefault(),U())};return t?l.jsxs("div",{style:{position:"fixed",right:"20px",bottom:"20px",width:"380px",height:"550px",background:"white",borderRadius:"16px",boxShadow:"0 10px 40px rgba(0,0,0,0.2)",display:"flex",flexDirection:"column",zIndex:1e3,overflow:"hidden"},children:[l.jsxs("div",{style:{background:"linear-gradient(135deg, #075E54 0%, #128C7E 100%)",color:"white",padding:"12px 16px"},children:[l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[l.jsxs("div",{children:[l.jsx("div",{style:{fontWeight:600,fontSize:"15px"},children:" Simulador de Chat"}),l.jsx("div",{style:{fontSize:"12px",opacity:.8},children:"Prueba tu flujo aqu"})]}),l.jsxs("div",{style:{display:"flex",gap:"8px"},children:[l.jsx("button",{onClick:D,style:{background:"rgba(255,255,255,0.2)",border:"none",color:"white",padding:"6px 12px",borderRadius:"6px",cursor:"pointer",fontSize:"12px"},children:""}),l.jsx("button",{onClick:a,style:{background:"none",border:"none",color:"white",fontSize:"20px",cursor:"pointer",padding:"0 4px"},children:""})]})]}),l.jsxs("div",{style:{display:"flex",gap:"8px",background:"rgba(0,0,0,0.2)",borderRadius:"8px",padding:"4px"},children:[l.jsx("button",{onClick:()=>R("local"),style:{flex:1,background:E==="local"?"white":"transparent",color:E==="local"?"#075E54":"white",border:"none",padding:"6px 12px",borderRadius:"6px",cursor:"pointer",fontSize:"11px",fontWeight:E==="local"?600:400},children:"Local"}),l.jsx("button",{onClick:()=>R("server"),style:{flex:1,background:E==="server"?"white":"transparent",color:E==="server"?"#075E54":"white",border:"none",padding:"6px 12px",borderRadius:"6px",cursor:"pointer",fontSize:"11px",fontWeight:E==="server"?600:400},children:"Servidor"})]})]}),Object.keys(x).length>0&&l.jsxs("div",{style:{background:"#f0fdf4",padding:"8px 16px",fontSize:"11px",borderBottom:"1px solid #e5e7eb"},children:[l.jsx("strong",{children:"Variables:"})," ",Object.entries(x).map(([B,q])=>l.jsxs("span",{style:{background:"#dcfce7",padding:"2px 6px",borderRadius:"4px",marginLeft:"4px"},children:[B,"=",typeof q=="object"?JSON.stringify(q).substring(0,30)+"...":String(q)]},B))]}),l.jsxs("div",{style:{flex:1,overflowY:"auto",padding:"16px",background:"#e5ddd5",backgroundImage:'url("data:image/svg+xml,%3Csvg width="60" height="60" viewBox="0 0 60 60" xmlns="http://www.w3.org/2000/svg"%3E%3Cg fill="none" fill-rule="evenodd"%3E%3Cg fill="%239C92AC" fill-opacity="0.05"%3E%3Cpath d="M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z"/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")'},children:[u.map((B,q)=>l.jsx(nA,{message:B,onOptionClick:I},q)),C&&l.jsx("div",{style:{display:"flex",justifyContent:"flex-start",marginBottom:"8px"},children:l.jsxs("div",{style:{background:"white",padding:"12px 16px",borderRadius:"12px 12px 12px 0",boxShadow:"0 1px 2px rgba(0,0,0,0.1)",display:"flex",gap:"4px"},children:[l.jsx("span",{className:"typing-dot",style:{width:"8px",height:"8px",background:"#90a3ae",borderRadius:"50%",animation:"typing 1.4s infinite ease-in-out",animationDelay:"0s"}}),l.jsx("span",{className:"typing-dot",style:{width:"8px",height:"8px",background:"#90a3ae",borderRadius:"50%",animation:"typing 1.4s infinite ease-in-out",animationDelay:"0.2s"}}),l.jsx("span",{className:"typing-dot",style:{width:"8px",height:"8px",background:"#90a3ae",borderRadius:"50%",animation:"typing 1.4s infinite ease-in-out",animationDelay:"0.4s"}})]})}),l.jsx("div",{ref:w})]}),l.jsxs("div",{style:{padding:"12px",background:"#f0f2f5",display:"flex",gap:"8px"},children:[l.jsx("input",{type:"text",value:m,onChange:B=>p(B.target.value),onKeyPress:O,placeholder:S?"Escribe un mensaje...":"Esperando respuesta...",disabled:!S,style:{flex:1,padding:"10px 16px",border:"none",borderRadius:"24px",fontSize:"14px",outline:"none"}}),l.jsx("button",{onClick:U,disabled:!S||!m.trim(),style:{background:"#25D366",color:"white",border:"none",borderRadius:"50%",width:"40px",height:"40px",cursor:S&&m.trim()?"pointer":"not-allowed",opacity:S&&m.trim()?1:.5,fontSize:"18px"},children:""})]})]}):null}function nA({message:t,onOptionClick:a}){const{type:s,text:i}=t,c=f=>typeof f=="object"&&f!==null?JSON.stringify(f,null,2):String(f);if(s==="system")return l.jsx("div",{style:{textAlign:"center",margin:"8px 0",fontSize:"11px",color:"#667781",background:"rgba(255,255,255,0.8)",padding:"4px 12px",borderRadius:"8px",display:"inline-block",width:"100%"},children:c(i)});if(s==="options")return l.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px",margin:"8px 0"},children:i.map((f,m)=>l.jsx("button",{onClick:()=>a(f),style:{background:"white",border:"1px solid #25D366",color:"#25D366",padding:"8px 16px",borderRadius:"16px",cursor:"pointer",fontSize:"13px",fontWeight:500},children:f.label},m))});const u=s==="user";return l.jsx("div",{style:{display:"flex",justifyContent:u?"flex-end":"flex-start",marginBottom:"8px"},children:l.jsx("div",{style:{maxWidth:"80%",padding:"8px 12px",borderRadius:u?"12px 12px 0 12px":"12px 12px 12px 0",background:u?"#dcf8c6":"white",boxShadow:"0 1px 2px rgba(0,0,0,0.1)",fontSize:"14px",lineHeight:"1.4",whiteSpace:"pre-wrap"},children:c(i)})})}const Zf=[{title:"Bienvenido al Flow Builder!",description:"Crea flujos de conversacin para tu chatbot de WhatsApp de forma visual, sin escribir cdigo.",icon:"",image:null},{title:"Arrastra nodos al canvas",description:"En la barra izquierda encontrars los nodos disponibles. Arrstralos al canvas para construir tu flujo.",icon:"",tips:[" Mensaje: Enva un texto al usuario"," Pregunta: Espera una respuesta del usuario"," Condicin: Bifurca el flujo segn una variable"," Accin: Ejecuta una accin (notificar, guardar, etc.)"]},{title:"Conecta los nodos",description:"Arrastra desde el punto verde (salida) de un nodo hasta el punto gris (entrada) de otro para conectarlos.",icon:"",tips:["El flujo siempre empieza en el Trigger","Puedes tener mltiples caminos con Condiciones","Termina con un nodo Fin o Transferir"]},{title:"Configura cada nodo",description:"Haz clic en un nodo para ver sus propiedades a la derecha. Ah puedes editar el contenido, opciones y variables.",icon:"",tips:["Usa {{variable}} para insertar datos dinmicos","Las preguntas guardan la respuesta en una variable","Las condiciones evalan esas variables"]},{title:"Guarda y activa!",description:"Cuando termines, guarda tu flujo y actvalo para que empiece a responder mensajes automticamente.",icon:"",tips:["Puedes tener varios flujos, pero solo algunos activos",'Usa "Abrir" para cargar flujos guardados',"Las plantillas te dan flujos de ejemplo para empezar"]}];function aA({onComplete:t}){const[a,s]=_.useState(0),[i,c]=_.useState(!1),u=Zf[a],f=a===Zf.length-1,m=()=>{f?c(!0):s(a+1)},p=()=>{t(null)},g=y=>{t(y)};return i?l.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:l.jsxs("div",{style:{background:"white",borderRadius:"16px",padding:"32px",maxWidth:"600px",width:"90%"},children:[l.jsx("h2",{style:{margin:"0 0 8px 0",fontSize:"24px"},children:"Cmo quieres empezar?"}),l.jsx("p",{style:{color:"#6b7280",margin:"0 0 24px 0"},children:"Puedes empezar desde cero o usar una plantilla predefinida"}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:[l.jsx(ac,{icon:"",title:"Empezar vaco",description:"Canvas en blanco para crear tu propio flujo",onClick:()=>g(null)}),l.jsx(ac,{icon:"",title:"Embudo de Ventas",description:"Califica leads y gualos a la compra",onClick:()=>g("sales_funnel"),color:"#25D366"}),l.jsx(ac,{icon:"",title:"Embudo de Soporte",description:"Resuelve dudas con FAQ y escala a humanos",onClick:()=>g("support_funnel"),color:"#34B7F1"}),l.jsx(ac,{icon:"",title:"Captura de Leads",description:"Recolecta informacin de contacto",onClick:()=>g("lead_capture"),color:"#f59e0b"})]}),l.jsx("button",{onClick:()=>g(null),style:{marginTop:"16px",padding:"8px",background:"none",border:"none",color:"#6b7280",cursor:"pointer",fontSize:"13px",width:"100%"},children:"Saltar y empezar vaco "})]})}):l.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:l.jsxs("div",{style:{background:"white",borderRadius:"16px",padding:"32px",maxWidth:"500px",width:"90%",textAlign:"center"},children:[l.jsx("div",{style:{display:"flex",justifyContent:"center",gap:"8px",marginBottom:"24px"},children:Zf.map((y,x)=>l.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:x===a?"#25D366":"#e5e7eb",transition:"background 0.2s"}},x))}),l.jsx("div",{style:{fontSize:"64px",marginBottom:"16px"},children:u.icon}),l.jsx("h2",{style:{margin:"0 0 12px 0",fontSize:"24px",color:"#111827"},children:u.title}),l.jsx("p",{style:{color:"#6b7280",margin:"0 0 20px 0",lineHeight:"1.6"},children:u.description}),u.tips&&l.jsx("div",{style:{background:"#f9fafb",borderRadius:"8px",padding:"16px",textAlign:"left",marginBottom:"24px"},children:u.tips.map((y,x)=>l.jsx("div",{style:{fontSize:"13px",color:"#4b5563",marginBottom:x<u.tips.length-1?"8px":0},children:y},x))}),l.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"center"},children:[l.jsx("button",{onClick:p,style:{padding:"12px 24px",background:"white",border:"1px solid #d1d5db",borderRadius:"8px",cursor:"pointer",fontSize:"14px",color:"#6b7280"},children:"Saltar"}),l.jsx("button",{onClick:m,style:{padding:"12px 24px",background:"#25D366",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"14px",fontWeight:500},children:f?"Empezar":"Siguiente"})]})]})})}function ac({icon:t,title:a,description:s,onClick:i,color:c}){return l.jsxs("div",{onClick:i,style:{padding:"16px",border:"2px solid #e5e7eb",borderRadius:"12px",cursor:"pointer",transition:"all 0.2s",textAlign:"left"},onMouseOver:u=>{u.currentTarget.style.borderColor=c||"#25D366",u.currentTarget.style.transform="translateY(-2px)"},onMouseOut:u=>{u.currentTarget.style.borderColor="#e5e7eb",u.currentTarget.style.transform="none"},children:[l.jsx("div",{style:{fontSize:"28px",marginBottom:"8px"},children:t}),l.jsx("div",{style:{fontWeight:600,fontSize:"14px",marginBottom:"4px"},children:a}),l.jsx("div",{style:{fontSize:"12px",color:"#6b7280"},children:s})]})}function sA(){const{id:t}=xS(),[a,s]=_.useState(!1),[i,c]=_.useState(!1),[u,f]=_.useState(null),[m,p]=_.useState(!1),{loadFlow:g}=Vr();_.useEffect(()=>{t?y(t):localStorage.getItem("flowbuilder_onboarding_seen")||c(!0)},[t]);const y=async S=>{p(!0);try{const j=await rh(S);if(j.flow)g(j.flow),x(`Flujo "${j.flow.name}" cargado correctamente`,"success");else throw new Error("No se pudo obtener los datos del flujo")}catch(j){console.error("Error loading flow:",j),x(`Error al cargar flujo: ${j.message}`,"error")}finally{p(!1)}},x=(S,j="info")=>{f({message:S,type:j}),setTimeout(()=>f(null),4e3)},b=async S=>{if(localStorage.setItem("flowbuilder_onboarding_seen","true"),c(!1),S){p(!0);try{console.log("Creating flow from template:",S);const j=await Ab(S,null);if(console.log("Template created, result:",j),j.id){const A=await rh(j.id);if(console.log("Flow data loaded:",A),A.flow)g(A.flow),x(`Flujo "${A.flow.name}" cargado correctamente`,"success");else throw new Error("No se pudo obtener los datos del flujo")}else throw new Error("No se recibi el ID del flujo creado")}catch(j){console.error("Error loading template:",j),x(`Error al cargar template: ${j.message}`,"error")}finally{p(!1)}}};return l.jsxs("div",{style:{display:"flex",flexDirection:"column",height:"100vh",overflow:"hidden"},children:[l.jsx(GM,{onTestClick:()=>s(!0)}),l.jsxs("div",{style:{display:"flex",flex:1,overflow:"hidden"},children:[l.jsx(PM,{}),l.jsx(WM,{}),l.jsx(eA,{})]}),l.jsxs("button",{onClick:()=>s(!0),style:{position:"fixed",right:"20px",bottom:"20px",background:"linear-gradient(135deg, #075E54 0%, #25D366 100%)",color:"white",border:"none",borderRadius:"50px",padding:"14px 24px",cursor:"pointer",boxShadow:"0 4px 15px rgba(37, 211, 102, 0.4)",fontSize:"14px",fontWeight:600,display:a?"none":"flex",alignItems:"center",gap:"8px",zIndex:100},children:[l.jsx("span",{style:{fontSize:"18px"},children:""}),"Probar flujo"]}),m&&l.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1001},children:l.jsxs("div",{style:{background:"white",padding:"24px 32px",borderRadius:"12px",display:"flex",alignItems:"center",gap:"12px"},children:[l.jsx("div",{style:{width:"24px",height:"24px",border:"3px solid #e5e7eb",borderTop:"3px solid #25D366",borderRadius:"50%",animation:"spin 1s linear infinite"}}),l.jsx("span",{children:"Cargando flujo..."})]})}),u&&l.jsxs("div",{style:{position:"fixed",top:"20px",right:"20px",padding:"12px 20px",borderRadius:"8px",background:u.type==="success"?"#10b981":u.type==="error"?"#ef4444":"#3b82f6",color:"white",fontWeight:500,boxShadow:"0 4px 12px rgba(0,0,0,0.15)",zIndex:1002,animation:"slideIn 0.3s ease"},children:[u.type==="success"&&" ",u.type==="error"&&" ",u.message]}),l.jsx(tA,{isOpen:a,onClose:()=>s(!1)}),i&&l.jsx(aA,{onComplete:b})]})}const sm="/api/flow-logs";async function rm(t,a){if(!t.ok){let s=a;try{const i=await t.json();i.error&&(s=i.error)}catch{}throw new Error(s)}return t.json()}async function rA(t={}){const a=new URLSearchParams(t).toString(),s=await fetch(`${sm}?${a}`);return rm(s,"Error al cargar logs")}async function iA(t){const a=await fetch(`${sm}/${t}`);return rm(a,"Log no encontrado")}async function oA(t=7){const a=await fetch(`${sm}/stats/summary?days=${t}`);return rm(a,"Error al cargar estadsticas")}const Yi={completed:{label:"Completado",color:"#10b981",icon:vc},failed:{label:"Fallido",color:"#ef4444",icon:Ah},transferred:{label:"Transferido",color:"#f59e0b",icon:Th},running:{label:"En progreso",color:"#3b82f6",icon:ws},timeout:{label:"Timeout",color:"#6b7280",icon:wc}};function lA(){const[t,a]=_.useState([]),[s,i]=_.useState(null),[c,u]=_.useState(!0),[f,m]=_.useState(null),[p,g]=_.useState(!1),[y,x]=_.useState({status:"",phone:"",flow_id:""});_.useEffect(()=>{b()},[]);const b=async()=>{u(!0);try{const[N,E]=await Promise.all([rA({limit:50,...y}),oA(7)]);a(N.logs||[]),i(E.stats)}catch(N){console.error("Error loading logs:",N)}finally{u(!1)}},S=async N=>{g(!0);try{const E=await iA(N.id);m(E.log)}catch(E){console.error("Error loading log detail:",E)}finally{g(!1)}},j=(N,E)=>{x(R=>({...R,[N]:E}))},A=()=>{b()};return c?l.jsx("div",{className:"p-8 flex items-center justify-center h-full",children:l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-500"})}):l.jsxs("div",{className:"p-8",children:[l.jsxs("div",{className:"flex items-center justify-between mb-8",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Logs de Ejecucin"}),l.jsx("p",{className:"text-gray-500 mt-1",children:"Historial de ejecucin de flujos"})]}),l.jsxs("button",{onClick:b,className:"flex items-center gap-2 px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg text-gray-700 transition",children:[l.jsx(Rh,{className:"w-4 h-4"}),"Actualizar"]})]}),s&&l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8",children:[l.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-100 shadow-sm",children:[l.jsx("p",{className:"text-sm text-gray-500",children:"Total ejecuciones"}),l.jsx("p",{className:"text-2xl font-bold text-gray-800",children:s.total_executions||0}),l.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"ltimos 7 das"})]}),l.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-100 shadow-sm",children:[l.jsx("p",{className:"text-sm text-gray-500",children:"Tasa de completado"}),l.jsxs("p",{className:"text-2xl font-bold text-green-600",children:[s.completion_rate||0,"%"]}),l.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:[s.completed||0," completados"]})]}),l.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-100 shadow-sm",children:[l.jsx("p",{className:"text-sm text-gray-500",children:"Fallidos"}),l.jsx("p",{className:"text-2xl font-bold text-red-500",children:s.failed||0}),l.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Requieren atencin"})]}),l.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-100 shadow-sm",children:[l.jsx("p",{className:"text-sm text-gray-500",children:"Tiempo promedio"}),l.jsx("p",{className:"text-2xl font-bold text-blue-600",children:s.avg_duration_ms?`${Math.round(s.avg_duration_ms)}ms`:"-"}),l.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Por ejecucin"})]})]}),l.jsx("div",{className:"bg-white rounded-xl p-4 border border-gray-100 shadow-sm mb-6",children:l.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(kh,{className:"w-4 h-4 text-gray-400"}),l.jsx("span",{className:"text-sm text-gray-600",children:"Filtrar:"})]}),l.jsxs("select",{value:y.status,onChange:N=>j("status",N.target.value),className:"px-3 py-2 border border-gray-200 rounded-lg text-sm focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none",children:[l.jsx("option",{value:"",children:"Todos los estados"}),l.jsx("option",{value:"completed",children:"Completados"}),l.jsx("option",{value:"failed",children:"Fallidos"}),l.jsx("option",{value:"transferred",children:"Transferidos"}),l.jsx("option",{value:"running",children:"En progreso"})]}),l.jsx("input",{type:"text",value:y.phone,onChange:N=>j("phone",N.target.value),placeholder:"Telfono...",className:"px-3 py-2 border border-gray-200 rounded-lg text-sm focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none w-40"}),l.jsx("button",{onClick:A,className:"px-4 py-2 bg-green-500 hover:bg-green-600 text-white rounded-lg text-sm transition",children:"Aplicar"})]})}),l.jsx("div",{className:"bg-white rounded-xl border border-gray-100 shadow-sm overflow-hidden",children:t.length===0?l.jsxs("div",{className:"p-12 text-center text-gray-400",children:[l.jsx(ws,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),l.jsx("p",{children:"No hay logs de ejecucin"}),l.jsx("p",{className:"text-sm mt-1",children:"Los logs aparecern cuando se ejecuten flujos"})]}):l.jsxs("table",{className:"w-full",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"bg-gray-50 text-left text-xs text-gray-500 uppercase tracking-wider",children:[l.jsx("th",{className:"px-4 py-3",children:"Fecha"}),l.jsx("th",{className:"px-4 py-3",children:"Flujo"}),l.jsx("th",{className:"px-4 py-3",children:"Telfono"}),l.jsx("th",{className:"px-4 py-3",children:"Estado"}),l.jsx("th",{className:"px-4 py-3",children:"Nodos"}),l.jsx("th",{className:"px-4 py-3",children:"Duracin"}),l.jsx("th",{className:"px-4 py-3"})]})}),l.jsx("tbody",{className:"divide-y divide-gray-100",children:t.map(N=>{const E=Yi[N.status]||Yi.running,R=E.icon;return l.jsxs("tr",{className:"hover:bg-gray-50 transition",children:[l.jsxs("td",{className:"px-4 py-3 text-sm",children:[l.jsx("div",{className:"text-gray-800",children:qc(new Date(N.started_at),"dd/MM HH:mm")}),l.jsx("div",{className:"text-xs text-gray-400",children:Vc(new Date(N.started_at),{addSuffix:!0,locale:Mr})})]}),l.jsxs("td",{className:"px-4 py-3",children:[l.jsx("div",{className:"font-medium text-gray-800",children:N.flow_name||"Sin nombre"}),l.jsx("div",{className:"text-xs text-gray-400",children:N.trigger_type})]}),l.jsx("td",{className:"px-4 py-3",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Lc,{className:"w-3 h-3 text-gray-400"}),l.jsx("span",{className:"text-sm text-gray-700",children:N.phone})]})}),l.jsx("td",{className:"px-4 py-3",children:l.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium",style:{background:`${E.color}20`,color:E.color},children:[l.jsx(R,{className:"w-3 h-3"}),E.label]})}),l.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:N.total_nodes_executed||0}),l.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:N.total_duration_ms?`${Math.round(N.total_duration_ms)}ms`:"-"}),l.jsx("td",{className:"px-4 py-3",children:l.jsx("button",{onClick:()=>S(N),className:"p-2 hover:bg-gray-100 rounded-lg transition",title:"Ver detalle",children:l.jsx(tb,{className:"w-4 h-4 text-gray-400"})})})]},N.id)})})]})}),f&&l.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:()=>m(null),children:l.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-2xl max-h-[80vh] overflow-auto m-4",onClick:N=>N.stopPropagation(),children:[l.jsxs("div",{className:"p-4 border-b border-gray-200 flex items-center justify-between sticky top-0 bg-white",children:[l.jsx("h3",{className:"font-semibold text-gray-800",children:"Detalle de Ejecucin"}),l.jsx("button",{onClick:()=>m(null),className:"p-2 hover:bg-gray-100 rounded-lg",children:l.jsx(zh,{className:"w-4 h-4"})})]}),p?l.jsx("div",{className:"p-8 text-center",children:l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-green-500 mx-auto"})}):l.jsxs("div",{className:"p-4 space-y-6",children:[l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-xs text-gray-400 mb-1",children:"Flujo"}),l.jsx("p",{className:"font-medium",children:f.flow_name})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-xs text-gray-400 mb-1",children:"Telfono"}),l.jsx("p",{className:"font-medium",children:f.phone})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-xs text-gray-400 mb-1",children:"Mensaje trigger"}),l.jsx("p",{className:"text-sm bg-gray-100 p-2 rounded",children:f.trigger_message||"-"})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-xs text-gray-400 mb-1",children:"Estado final"}),l.jsx("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium",style:{background:`${Yi[f.status]?.color}20`,color:Yi[f.status]?.color},children:Yi[f.status]?.label})]})]}),f.variables&&Object.keys(f.variables).length>0&&l.jsxs("div",{children:[l.jsx("p",{className:"text-xs text-gray-400 mb-2",children:"Variables capturadas"}),l.jsx("div",{className:"bg-gray-50 rounded-lg p-3 space-y-1",children:Object.entries(f.variables).map(([N,E])=>l.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[l.jsxs("span",{className:"font-mono text-purple-600",children:[N,":"]}),l.jsx("span",{className:"text-gray-700",children:String(E)})]},N))})]}),f.steps&&f.steps.length>0&&l.jsxs("div",{children:[l.jsx("p",{className:"text-xs text-gray-400 mb-2",children:"Nodos ejecutados"}),l.jsx("div",{className:"space-y-2",children:f.steps.map((N,E)=>l.jsxs("div",{className:"flex items-start gap-3 p-3 bg-gray-50 rounded-lg",children:[l.jsx("div",{className:"w-6 h-6 rounded-full bg-green-100 text-green-600 flex items-center justify-center text-xs font-medium",children:E+1}),l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"font-medium text-sm",children:N.node_id}),l.jsx("span",{className:"text-xs px-2 py-0.5 bg-gray-200 rounded text-gray-600",children:N.node_type}),l.jsxs("span",{className:"text-xs text-gray-400",children:[N.duration_ms,"ms"]})]}),N.output&&l.jsx("p",{className:"text-sm text-gray-600 mt-1 break-words",children:N.output})]})]},E))})]}),f.error_message&&l.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:[l.jsx("p",{className:"text-xs text-red-600 font-medium mb-1",children:"Error"}),l.jsx("p",{className:"text-sm text-red-700",children:f.error_message}),f.error_node_id&&l.jsxs("p",{className:"text-xs text-red-500 mt-1",children:["En nodo: ",f.error_node_id]})]})]})]})})]})}const au="/api/leads";async function su(t,a){if(!t.ok){let s=a;try{const i=await t.json();i.error&&(s=i.error)}catch{}throw new Error(s)}return t.json()}async function cA(t={}){const a=new URLSearchParams(t).toString(),s=await fetch(`${au}?${a}`);return su(s,"Error al cargar leads")}async function uA(){const t=await fetch(`${au}/stats`);return su(t,"Error al cargar estadsticas")}async function dA(t,a){const s=await fetch(`${au}/${encodeURIComponent(t)}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});return su(s,"Error al actualizar lead")}async function fA(t,a,s){const i=await fetch(`${au}/${encodeURIComponent(t)}/adjust-score`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({adjustment:a,reason:s})});return su(i,"Error al ajustar score")}const sc={new:{label:"Nuevo",color:"#6b7280",bg:"#f3f4f6"},engaged:{label:"Interesado",color:"#3b82f6",bg:"#dbeafe"},qualified:{label:"Calificado",color:"#10b981",bg:"#d1fae5"},customer:{label:"Cliente",color:"#8b5cf6",bg:"#ede9fe"},inactive:{label:"Inactivo",color:"#9ca3af",bg:"#f9fafb"}},ky={hot:{color:"#ef4444",label:"Caliente",range:"80-100"},warm:{color:"#f59e0b",label:"Tibio",range:"50-79"},cold:{color:"#3b82f6",label:"Fro",range:"20-49"},new:{color:"#6b7280",label:"Nuevo",range:"0-19"}};function hA(t){return t>=80?"hot":t>=50?"warm":t>=20?"cold":"new"}function mA(){const t=Ts(),[a,s]=_.useState([]),[i,c]=_.useState(null),[u,f]=_.useState(!0),[m,p]=_.useState(null),[g,y]=_.useState({status:"",min_score:"",search:"",sort_by:"current_score",sort_dir:"desc"});_.useEffect(()=>{x()},[]);const x=async()=>{f(!0);try{const[N,E]=await Promise.all([cA({limit:100,...g}),uA()]);s(N.leads||[]),c(E)}catch(N){console.error("Error loading leads:",N)}finally{f(!1)}},b=(N,E)=>{y(R=>({...R,[N]:E}))},S=()=>{x()},j=async(N,E)=>{try{await dA(N,{status:E}),x()}catch(R){console.error("Error updating lead:",R)}},A=async(N,E)=>{try{await fA(N,E,"Manual adjustment"),x()}catch(R){console.error("Error adjusting score:",R)}};return u?l.jsx("div",{className:"p-8 flex items-center justify-center h-full",children:l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-500"})}):l.jsxs("div",{className:"p-8",children:[l.jsxs("div",{className:"flex items-center justify-between mb-8",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Gestin de Leads"}),l.jsx("p",{className:"text-gray-500 mt-1",children:"Administra y califica tus leads"})]}),l.jsxs("button",{onClick:x,className:"flex items-center gap-2 px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg text-gray-700 transition",children:[l.jsx(Rh,{className:"w-4 h-4"}),"Actualizar"]})]}),i&&l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 mb-8",children:[l.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-100 shadow-sm",children:[l.jsx("p",{className:"text-sm text-gray-500",children:"Total Leads"}),l.jsx("p",{className:"text-2xl font-bold text-gray-800",children:i.stats?.total_leads||0})]}),l.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-100 shadow-sm",children:[l.jsx("p",{className:"text-sm text-gray-500",children:"Score Promedio"}),l.jsx("p",{className:"text-2xl font-bold text-blue-600",children:i.stats?.avg_score||0})]}),l.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-100 shadow-sm",children:[l.jsx("p",{className:"text-sm text-gray-500",children:"Nuevos"}),l.jsx("p",{className:"text-2xl font-bold text-gray-600",children:i.stats?.new_leads||0})]}),l.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-100 shadow-sm",children:[l.jsx("p",{className:"text-sm text-gray-500",children:"Calificados"}),l.jsx("p",{className:"text-2xl font-bold text-green-600",children:i.stats?.qualified_leads||0})]}),l.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-100 shadow-sm",children:[l.jsx("p",{className:"text-sm text-gray-500",children:"Clientes"}),l.jsx("p",{className:"text-2xl font-bold text-purple-600",children:i.stats?.customers||0})]})]}),i?.score_distribution&&l.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-100 shadow-sm mb-6",children:[l.jsx("p",{className:"text-sm font-medium text-gray-700 mb-3",children:"Distribucin de Scores"}),l.jsx("div",{className:"flex gap-4",children:Object.entries(ky).map(([N,E])=>{const R=i.score_distribution.find(C=>C.category===N)?.count||0;return l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-3 h-3 rounded-full",style:{background:E.color}}),l.jsxs("span",{className:"text-sm text-gray-600",children:[E.label,": ",l.jsx("strong",{children:R})]})]},N)})})]}),l.jsx("div",{className:"bg-white rounded-xl p-4 border border-gray-100 shadow-sm mb-6",children:l.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(kh,{className:"w-4 h-4 text-gray-400"}),l.jsx("span",{className:"text-sm text-gray-600",children:"Filtrar:"})]}),l.jsxs("div",{className:"relative",children:[l.jsx(rb,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),l.jsx("input",{type:"text",value:g.search,onChange:N=>b("search",N.target.value),placeholder:"Buscar...",className:"pl-10 pr-4 py-2 border border-gray-200 rounded-lg text-sm focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none w-48"})]}),l.jsxs("select",{value:g.status,onChange:N=>b("status",N.target.value),className:"px-3 py-2 border border-gray-200 rounded-lg text-sm focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none",children:[l.jsx("option",{value:"",children:"Todos los estados"}),Object.entries(sc).map(([N,E])=>l.jsx("option",{value:N,children:E.label},N))]}),l.jsxs("select",{value:g.min_score,onChange:N=>b("min_score",N.target.value),className:"px-3 py-2 border border-gray-200 rounded-lg text-sm focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none",children:[l.jsx("option",{value:"",children:"Todos los scores"}),l.jsx("option",{value:"80",children:"Score 80+ (Caliente)"}),l.jsx("option",{value:"50",children:"Score 50+ (Tibio)"}),l.jsx("option",{value:"20",children:"Score 20+ (Fro)"})]}),l.jsxs("select",{value:`${g.sort_by}-${g.sort_dir}`,onChange:N=>{const[E,R]=N.target.value.split("-");b("sort_by",E),b("sort_dir",R)},className:"px-3 py-2 border border-gray-200 rounded-lg text-sm focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none",children:[l.jsx("option",{value:"current_score-desc",children:"Mayor score"}),l.jsx("option",{value:"current_score-asc",children:"Menor score"}),l.jsx("option",{value:"last_interaction-desc",children:"Ms reciente"}),l.jsx("option",{value:"total_messages-desc",children:"Ms mensajes"})]}),l.jsx("button",{onClick:S,className:"px-4 py-2 bg-green-500 hover:bg-green-600 text-white rounded-lg text-sm transition",children:"Aplicar"})]})}),l.jsx("div",{className:"bg-white rounded-xl border border-gray-100 shadow-sm overflow-hidden",children:a.length===0?l.jsxs("div",{className:"p-12 text-center text-gray-400",children:[l.jsx(Uc,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),l.jsx("p",{children:"No hay leads registrados"}),l.jsx("p",{className:"text-sm mt-1",children:"Los leads se crean automticamente cuando interactan"})]}):l.jsxs("table",{className:"w-full",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"bg-gray-50 text-left text-xs text-gray-500 uppercase tracking-wider",children:[l.jsx("th",{className:"px-4 py-3",children:"Lead"}),l.jsx("th",{className:"px-4 py-3",children:"Score"}),l.jsx("th",{className:"px-4 py-3",children:"Estado"}),l.jsx("th",{className:"px-4 py-3",children:"Mensajes"}),l.jsx("th",{className:"px-4 py-3",children:"ltima actividad"}),l.jsx("th",{className:"px-4 py-3",children:"Acciones"})]})}),l.jsx("tbody",{className:"divide-y divide-gray-100",children:a.map(N=>{const E=hA(N.current_score),R=ky[E],C=sc[N.status]||sc.new;return l.jsxs("tr",{className:"hover:bg-gray-50 transition",children:[l.jsx("td",{className:"px-4 py-3",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center",children:l.jsx("span",{className:"text-green-600 font-medium",children:N.contact_name?.[0]?.toUpperCase()||N.phone.slice(-2)})}),l.jsxs("div",{children:[l.jsx("div",{className:"font-medium text-gray-800",children:N.contact_name||"Sin nombre"}),l.jsxs("div",{className:"text-xs text-gray-400 flex items-center gap-1",children:[l.jsx(Lc,{className:"w-3 h-3"}),N.phone]})]})]})}),l.jsx("td",{className:"px-4 py-3",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center font-bold text-sm",style:{background:`${R.color}20`,color:R.color},children:N.current_score}),l.jsxs("div",{className:"flex flex-col gap-0.5",children:[l.jsx("button",{onClick:()=>A(N.phone,5),className:"p-1 hover:bg-green-100 rounded text-green-600",title:"+5 puntos",children:l.jsx(sb,{className:"w-3 h-3"})}),l.jsx("button",{onClick:()=>A(N.phone,-5),className:"p-1 hover:bg-red-100 rounded text-red-600",title:"-5 puntos",children:l.jsx(cj,{className:"w-3 h-3"})})]})]})}),l.jsx("td",{className:"px-4 py-3",children:l.jsx("select",{value:N.status,onChange:k=>j(N.phone,k.target.value),className:"px-2 py-1 rounded-full text-xs font-medium border-0 cursor-pointer",style:{background:C.bg,color:C.color},children:Object.entries(sc).map(([k,w])=>l.jsx("option",{value:k,children:w.label},k))})}),l.jsx("td",{className:"px-4 py-3",children:l.jsxs("div",{className:"flex items-center gap-1 text-sm text-gray-600",children:[l.jsx(Cr,{className:"w-4 h-4"}),N.total_messages||N.message_count||0]})}),l.jsx("td",{className:"px-4 py-3 text-sm text-gray-500",children:N.last_interaction?Vc(new Date(N.last_interaction),{addSuffix:!0,locale:Mr}):"-"}),l.jsx("td",{className:"px-4 py-3",children:l.jsx("button",{onClick:()=>t(`/conversations?phone=${encodeURIComponent(N.phone)}`),className:"p-2 hover:bg-gray-100 rounded-lg transition",title:"Ver conversacin",children:l.jsx(tb,{className:"w-4 h-4 text-gray-400"})})})]},N.phone)})})]})})]})}const yo="/api/flow-analytics";async function bo(t,a){if(!t.ok){let s=a;try{const i=await t.json();i.error&&(s=i.error)}catch{}throw new Error(s)}return t.json()}async function pA(t=7){const a=await fetch(`${yo}/summary?days=${t}`);return bo(a,"Error al cargar resumen")}async function gA(t=14){const a=await fetch(`${yo}/timeline?days=${t}`);return bo(a,"Error al cargar timeline")}async function xA(t=7){const a=await fetch(`${yo}/by-flow?days=${t}`);return bo(a,"Error al cargar mtricas por flujo")}async function yA(t=7){const a=await fetch(`${yo}/by-hour?days=${t}`);return bo(a,"Error al cargar distribucin horaria")}async function bA(t=7){const a=await fetch(`${yo}/trigger-types?days=${t}`);return bo(a,"Error al cargar tipos de trigger")}function vA(){const[t,a]=_.useState(null),[s,i]=_.useState([]),[c,u]=_.useState([]),[f,m]=_.useState([]),[p,g]=_.useState([]),[y,x]=_.useState(!0),[b,S]=_.useState(7);_.useEffect(()=>{j()},[b]);const j=async()=>{x(!0);try{const[E,R,C,k,w]=await Promise.all([pA(b),gA(b),xA(b),yA(b),bA(b)]);a(E.summary),i(R.timeline||[]),u(C.flows||[]),m(k.hourly||[]),g(w.trigger_types||[])}catch(E){console.error("Error loading analytics:",E)}finally{x(!1)}};if(y)return l.jsx("div",{className:"p-8 flex items-center justify-center h-full",children:l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-500"})});const A=Math.max(...s.map(E=>E.total),1),N=Math.max(...f.map(E=>E.executions),1);return l.jsxs("div",{className:"p-8",children:[l.jsxs("div",{className:"flex items-center justify-between mb-8",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Analytics de Flujos"}),l.jsx("p",{className:"text-gray-500 mt-1",children:"Mtricas y anlisis de rendimiento"})]}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsxs("select",{value:b,onChange:E=>S(parseInt(E.target.value)),className:"px-3 py-2 border border-gray-200 rounded-lg text-sm focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none",children:[l.jsx("option",{value:7,children:"ltimos 7 das"}),l.jsx("option",{value:14,children:"ltimos 14 das"}),l.jsx("option",{value:30,children:"ltimos 30 das"})]}),l.jsxs("button",{onClick:j,className:"flex items-center gap-2 px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg text-gray-700 transition",children:[l.jsx(Rh,{className:"w-4 h-4"}),"Actualizar"]})]})]}),t&&l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[l.jsx("div",{className:"bg-white rounded-xl p-5 border border-gray-100 shadow-sm",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-500",children:"Total Ejecuciones"}),l.jsx("p",{className:"text-3xl font-bold text-gray-800 mt-1",children:t.executions.total}),l.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:[t.executions.unique_users," usuarios nicos"]})]}),l.jsx("div",{className:"p-3 bg-blue-50 rounded-xl",children:l.jsx(ws,{className:"w-6 h-6 text-blue-600"})})]})}),l.jsx("div",{className:"bg-white rounded-xl p-5 border border-gray-100 shadow-sm",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-500",children:"Tasa de Completado"}),l.jsxs("p",{className:"text-3xl font-bold text-green-600 mt-1",children:[t.executions.completion_rate,"%"]}),l.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:[t.executions.completed," completados"]})]}),l.jsx("div",{className:"p-3 bg-green-50 rounded-xl",children:l.jsx(vc,{className:"w-6 h-6 text-green-600"})})]})}),l.jsx("div",{className:"bg-white rounded-xl p-5 border border-gray-100 shadow-sm",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-500",children:"Fallidos"}),l.jsx("p",{className:"text-3xl font-bold text-red-500 mt-1",children:t.executions.failed}),l.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:[t.executions.transferred," transferidos"]})]}),l.jsx("div",{className:"p-3 bg-red-50 rounded-xl",children:l.jsx(Ah,{className:"w-6 h-6 text-red-500"})})]})}),l.jsx("div",{className:"bg-white rounded-xl p-5 border border-gray-100 shadow-sm",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-500",children:"Tiempo Promedio"}),l.jsxs("p",{className:"text-3xl font-bold text-purple-600 mt-1",children:[t.executions.avg_duration_ms,"ms"]}),l.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:[t.executions.avg_nodes," nodos promedio"]})]}),l.jsx("div",{className:"p-3 bg-purple-50 rounded-xl",children:l.jsx(wc,{className:"w-6 h-6 text-purple-600"})})]})})]}),l.jsxs("div",{className:"bg-white rounded-xl border border-gray-100 shadow-sm p-6 mb-6",children:[l.jsxs("h3",{className:"font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[l.jsx(Ej,{className:"w-5 h-5 text-gray-400"}),"Ejecuciones por da"]}),s.length===0?l.jsx("div",{className:"text-center text-gray-400 py-8",children:"No hay datos para mostrar"}):l.jsx("div",{className:"flex items-end gap-2 h-40",children:s.map((E,R)=>l.jsxs("div",{className:"flex-1 flex flex-col items-center",children:[l.jsxs("div",{className:"w-full flex flex-col gap-0.5",style:{height:"120px"},children:[l.jsx("div",{className:"w-full bg-green-500 rounded-t",style:{height:`${E.completed/A*100}%`},title:`Completados: ${E.completed}`}),l.jsx("div",{className:"w-full bg-red-400",style:{height:`${E.failed/A*100}%`},title:`Fallidos: ${E.failed}`}),l.jsx("div",{className:"w-full bg-yellow-400 rounded-b",style:{height:`${E.transferred/A*100}%`},title:`Transferidos: ${E.transferred}`})]}),l.jsx("div",{className:"text-xs text-gray-400 mt-2",children:qc(new Date(E.date),"dd/MM")})]},R))}),l.jsxs("div",{className:"flex items-center gap-4 mt-4 pt-4 border-t border-gray-100",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-3 h-3 rounded bg-green-500"}),l.jsx("span",{className:"text-xs text-gray-500",children:"Completados"})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-3 h-3 rounded bg-red-400"}),l.jsx("span",{className:"text-xs text-gray-500",children:"Fallidos"})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-3 h-3 rounded bg-yellow-400"}),l.jsx("span",{className:"text-xs text-gray-500",children:"Transferidos"})]})]})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[l.jsxs("div",{className:"bg-white rounded-xl border border-gray-100 shadow-sm p-6",children:[l.jsxs("h3",{className:"font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[l.jsx(nb,{className:"w-5 h-5 text-gray-400"}),"Rendimiento por Flujo"]}),c.length===0?l.jsx("div",{className:"text-center text-gray-400 py-8",children:"No hay flujos configurados"}):l.jsx("div",{className:"space-y-3",children:c.slice(0,5).map((E,R)=>l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-8 h-8 rounded-lg bg-gray-100 flex items-center justify-center text-sm font-medium text-gray-600",children:R+1}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("p",{className:"font-medium text-gray-800 truncate",children:E.flow_name}),l.jsxs("span",{className:"text-sm text-gray-500",children:[E.recent_executions," ejecuciones"]})]}),l.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[l.jsx("div",{className:"flex-1 h-2 bg-gray-100 rounded-full overflow-hidden",children:l.jsx("div",{className:"h-full bg-green-500",style:{width:`${E.completion_rate}%`}})}),l.jsxs("span",{className:"text-xs text-gray-400",children:[E.completion_rate,"%"]})]})]})]},E.flow_id))}),l.jsx(bs,{to:"/flows",className:"block text-center text-sm text-green-600 hover:text-green-700 mt-4 pt-4 border-t border-gray-100",children:"Ver todos los flujos"})]}),l.jsxs("div",{className:"bg-white rounded-xl border border-gray-100 shadow-sm p-6",children:[l.jsxs("h3",{className:"font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[l.jsx(wc,{className:"w-5 h-5 text-gray-400"}),"Actividad por Hora"]}),l.jsx("div",{className:"flex items-end gap-1 h-32",children:f.map((E,R)=>l.jsx("div",{className:"flex-1 bg-blue-500 rounded-t transition-all hover:bg-blue-600",style:{height:`${E.executions/N*100}%`,minHeight:E.executions>0?"4px":"0"},title:`${E.hour}:00 - ${E.executions} ejecuciones`},R))}),l.jsxs("div",{className:"flex justify-between text-xs text-gray-400 mt-2",children:[l.jsx("span",{children:"00:00"}),l.jsx("span",{children:"06:00"}),l.jsx("span",{children:"12:00"}),l.jsx("span",{children:"18:00"}),l.jsx("span",{children:"23:00"})]})]})]}),l.jsxs("div",{className:"bg-white rounded-xl border border-gray-100 shadow-sm p-6",children:[l.jsxs("h3",{className:"font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[l.jsx(eb,{className:"w-5 h-5 text-gray-400"}),"Distribucin por Tipo de Trigger"]}),p.length===0?l.jsx("div",{className:"text-center text-gray-400 py-8",children:"No hay datos de triggers"}):l.jsx("div",{className:"flex gap-6",children:p.map((E,R)=>{const C=["#10b981","#3b82f6","#f59e0b","#8b5cf6","#ec4899"],k=C[R%C.length],w=p.reduce((M,V)=>M+V.count,0),D=w>0?Math.round(E.count/w*100):0;return l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-2",style:{background:`${k}20`},children:l.jsxs("span",{className:"text-xl font-bold",style:{color:k},children:[D,"%"]})}),l.jsx("p",{className:"text-sm font-medium text-gray-800 capitalize",children:E.trigger_type}),l.jsxs("p",{className:"text-xs text-gray-400",children:[E.count," ejecuciones"]})]},E.trigger_type)})})]})]})}function wA(){const[t,a]=_.useState([]),[s,i]=_.useState(null),[c,u]=_.useState({running:0,connectedMonitors:0}),[f,m]=_.useState(!1);return _.useEffect(()=>{const p=new EventSource("/api/flow-monitor/stream");return p.onopen=()=>m(!0),p.onerror=()=>m(!1),p.onmessage=g=>{const y=JSON.parse(g.data);switch(y.type){case"connected":u({running:y.activeCount,connectedMonitors:0});break;case"active_execution":a(x=>x.find(S=>S.executionId===y.executionId)?x:[y,...x]);break;case"flow_started":a(x=>[y,...x]);break;case"node_started":case"node_completed":a(x=>x.map(b=>b.executionId===y.executionId?{...b,currentNodeId:y.nodeId,currentNodeType:y.nodeType,variables:y.variables,steps:y.type==="node_completed"?[...b.steps||[],{nodeId:y.nodeId,nodeType:y.nodeType,durationMs:y.durationMs,status:y.status,timestamp:y.timestamp}]:b.steps}:b));break;case"flow_completed":case"flow_error":case"flow_transferred":a(x=>x.map(b=>b.executionId===y.executionId?{...b,status:y.type.replace("flow_",""),completedAt:y.timestamp}:b));break}},()=>p.close()},[]),l.jsxs("div",{className:"h-screen flex flex-col bg-gray-50",children:[l.jsx("header",{className:"bg-white border-b px-6 py-4",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Monitor de Flujos"}),l.jsx("p",{className:"text-gray-500",children:"Tiempo real"})]}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:`w-2 h-2 rounded-full ${f?"bg-green-500":"bg-red-500"}`}),l.jsx("span",{className:"text-sm text-gray-600",children:f?"Conectado":"Desconectado"})]}),l.jsxs("div",{className:"text-sm text-gray-600",children:[t.filter(p=>!p.status).length," ejecuciones activas"]})]})]})}),l.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[l.jsxs("aside",{className:"w-80 bg-white border-r overflow-y-auto",children:[l.jsx("div",{className:"p-4 border-b",children:l.jsx("h2",{className:"font-semibold text-gray-700",children:"Ejecuciones"})}),l.jsx("div",{className:"divide-y",children:t.length===0?l.jsx("div",{className:"p-8 text-center text-gray-400",children:"Sin ejecuciones"}):t.map(p=>l.jsx("button",{onClick:()=>i(p),className:`w-full p-4 text-left hover:bg-gray-50 transition ${s?.executionId===p.executionId?"bg-green-50":""}`,children:l.jsxs("div",{className:"flex items-start justify-between gap-2",children:[l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[l.jsx(Lc,{className:"w-4 h-4 text-gray-400 flex-shrink-0"}),l.jsx("span",{className:"font-mono text-sm text-gray-700 truncate",children:p.phone})]}),l.jsx("p",{className:"text-xs text-gray-500 truncate mb-1",children:p.flowName||p.flowSlug}),p.currentNodeId&&l.jsxs("div",{className:"flex items-center gap-1 text-xs",children:[l.jsx(ws,{className:"w-3 h-3 text-green-500"}),l.jsx("span",{className:"text-gray-600",children:p.currentNodeId})]})]}),l.jsxs("div",{children:[p.status==="completed"&&l.jsx(vc,{className:"w-5 h-5 text-green-500"}),p.status==="error"&&l.jsx(Ah,{className:"w-5 h-5 text-red-500"}),p.status==="transferred"&&l.jsx(Sr,{className:"w-5 h-5 text-yellow-500"}),!p.status&&l.jsx(ws,{className:"w-5 h-5 text-green-500 animate-pulse"})]})]})},p.executionId))})]}),l.jsx("main",{className:"flex-1 flex",children:s?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"flex-1 p-6 overflow-auto",children:l.jsxs("div",{className:"bg-white rounded-lg border p-6",children:[l.jsx("h3",{className:"font-semibold text-gray-700 mb-4",children:"Ejecucin del Flujo"}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{children:[l.jsx("span",{className:"text-sm text-gray-500",children:"Flujo:"}),l.jsx("p",{className:"font-medium",children:s.flowName})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-sm text-gray-500",children:"Telfono:"}),l.jsx("p",{className:"font-mono text-sm",children:s.phone})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-sm text-gray-500",children:"Nodo Actual:"}),l.jsx("p",{className:"font-mono text-sm",children:s.currentNodeId||"N/A"})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-sm text-gray-500",children:"Tipo de Nodo:"}),l.jsx("p",{className:"font-mono text-sm",children:s.currentNodeType||"N/A"})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-sm text-gray-500",children:"Estado:"}),l.jsxs("p",{className:"font-medium",children:[s.status==="completed"&&"Completado ",s.status==="error"&&"Error ",s.status==="transferred"&&"Transferido ",!s.status&&"En ejecucin..."]})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-sm text-gray-500",children:"Iniciado:"}),l.jsx("p",{className:"text-sm",children:s.timestamp?new Date(s.timestamp).toLocaleString("es-CL"):"N/A"})]}),s.completedAt&&l.jsxs("div",{children:[l.jsx("span",{className:"text-sm text-gray-500",children:"Completado:"}),l.jsx("p",{className:"text-sm",children:new Date(s.completedAt).toLocaleString("es-CL")})]})]})]})}),l.jsxs("aside",{className:"w-96 bg-white border-l overflow-y-auto",children:[l.jsx("div",{className:"p-4 border-b",children:l.jsx("h2",{className:"font-semibold text-gray-700",children:"Detalles"})}),l.jsxs("div",{className:"p-4 space-y-4",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"text-sm font-semibold text-gray-600 mb-2",children:"Variables"}),l.jsx("div",{className:"bg-gray-50 rounded p-3 font-mono text-xs",children:l.jsx("pre",{className:"whitespace-pre-wrap break-words",children:JSON.stringify(s.variables||{},null,2)})})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-sm font-semibold text-gray-600 mb-2",children:"Timeline"}),l.jsx("div",{className:"space-y-2",children:s.steps&&s.steps.length>0?s.steps.map((p,g)=>l.jsxs("div",{className:"flex items-start gap-2 text-xs",children:[l.jsx(vc,{className:"w-4 h-4 text-green-500 flex-shrink-0 mt-0.5"}),l.jsxs("div",{className:"flex-1",children:[l.jsx("p",{className:"font-medium text-gray-700",children:p.nodeId}),l.jsxs("p",{className:"text-gray-500",children:[p.nodeType,"  ",p.durationMs,"ms"]}),p.timestamp&&l.jsx("p",{className:"text-gray-400",children:new Date(p.timestamp).toLocaleTimeString("es-CL")})]})]},g)):l.jsx("p",{className:"text-gray-400 text-sm",children:"Sin eventos an"})})]})]})]})]}):l.jsx("div",{className:"flex-1 flex items-center justify-center text-gray-400",children:l.jsxs("div",{className:"text-center",children:[l.jsx(ws,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),l.jsx("p",{children:"Selecciona una ejecucin para ver detalles"})]})})})]})]})}const yr=()=>{const t=Ht.getState().token;return{"Content-Type":"application/json",...t?{Authorization:`Bearer ${t}`}:{}}};function SA(){const[t,a]=_.useState([]),[s,i]=_.useState([]),[c,u]=_.useState(!0),[f,m]=_.useState(!1),[p,g]=_.useState(null),[y,x]=_.useState({}),[b,S]=_.useState({username:"",password:"",name:"",email:"",role:"agent",departmentId:"",avatarColor:"#6366f1"}),[j,A]=_.useState(""),[N,E]=_.useState(!1),R=async()=>{try{const[L,se]=await Promise.all([fetch("/api/agents",{headers:yr()}),fetch("/api/departments",{headers:yr()})]),Q=await L.json(),F=await se.json();Q.ok&&a(Q.agents),F.ok&&i(F.departments)}catch(L){console.error("Error loading data:",L)}finally{u(!1)}};_.useEffect(()=>{R()},[]);const C=()=>{g(null),S({username:"",password:"",name:"",email:"",role:"agent",departmentId:"",avatarColor:"#6366f1"}),A(""),m(!0)},k=L=>{g(L),S({username:L.username,password:"",name:L.name,email:L.email||"",role:L.role,departmentId:L.department_id||"",avatarColor:L.avatar_color||"#6366f1"}),A(""),m(!0)},w=async L=>{L.preventDefault(),A(""),E(!0);try{const se={name:b.name,email:b.email||null,role:b.role,departmentId:b.departmentId?Number(b.departmentId):null,avatarColor:b.avatarColor};if(p){b.password&&(se.password=b.password);const F=await(await fetch(`/api/agents/${p.id}`,{method:"PUT",headers:yr(),body:JSON.stringify(se)})).json();if(!F.ok)throw new Error(F.error)}else{se.username=b.username,se.password=b.password;const F=await(await fetch("/api/agents",{method:"POST",headers:yr(),body:JSON.stringify(se)})).json();if(!F.ok)throw new Error(F.error)}m(!1),R()}catch(se){A(se.message)}finally{E(!1)}},D=async L=>{if(confirm(`Desactivar agente "${L.name}"?`))try{await fetch(`/api/agents/${L.id}`,{method:"DELETE",headers:yr()}),R()}catch(se){alert("Error: "+se.message)}},M=async L=>{if(confirm(`Regenerar API key de "${L.name}"? La anterior dejara de funcionar.`))try{const Q=await(await fetch(`/api/agents/${L.id}/regenerate-api-key`,{method:"POST",headers:yr()})).json();Q.ok&&(R(),alert(`Nueva API key: ${Q.apiKey}`))}catch(se){alert("Error: "+se.message)}},V=["#6366f1","#22c55e","#ef4444","#f59e0b","#3b82f6","#ec4899","#8b5cf6","#14b8a6","#f97316","#06b6d4"];return c?l.jsx("div",{className:"p-8 flex justify-center",children:l.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-green-500 border-t-transparent rounded-full"})}):l.jsxs("div",{className:"p-6",children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Agentes"}),l.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Gestiona los agentes del sistema"})]}),l.jsxs("button",{onClick:C,className:"flex items-center gap-2 bg-green-600 hover:bg-green-700 text-white px-4 py-2.5 rounded-lg transition font-medium",children:[l.jsx(Tr,{className:"w-4 h-4"})," Nuevo Agente"]})]}),l.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:l.jsxs("table",{className:"w-full",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"bg-gray-50 border-b border-gray-200",children:[l.jsx("th",{className:"text-left px-6 py-3 text-xs font-semibold text-gray-500 uppercase",children:"Agente"}),l.jsx("th",{className:"text-left px-6 py-3 text-xs font-semibold text-gray-500 uppercase",children:"Rol"}),l.jsx("th",{className:"text-left px-6 py-3 text-xs font-semibold text-gray-500 uppercase",children:"Departamento"}),l.jsx("th",{className:"text-left px-6 py-3 text-xs font-semibold text-gray-500 uppercase",children:"Estado"}),l.jsx("th",{className:"text-left px-6 py-3 text-xs font-semibold text-gray-500 uppercase",children:"API Key"}),l.jsx("th",{className:"text-left px-6 py-3 text-xs font-semibold text-gray-500 uppercase",children:"Ultimo Login"}),l.jsx("th",{className:"text-right px-6 py-3 text-xs font-semibold text-gray-500 uppercase",children:"Acciones"})]})}),l.jsxs("tbody",{className:"divide-y divide-gray-100",children:[t.map(L=>l.jsxs("tr",{className:`hover:bg-gray-50 ${L.status==="inactive"?"opacity-50":""}`,children:[l.jsx("td",{className:"px-6 py-4",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-9 h-9 rounded-full flex items-center justify-center flex-shrink-0",style:{backgroundColor:L.avatar_color||"#6366f1"},children:l.jsx("span",{className:"text-white text-sm font-medium",children:L.name?.[0]?.toUpperCase()})}),l.jsxs("div",{children:[l.jsx("p",{className:"font-medium text-gray-900 text-sm",children:L.name}),l.jsxs("p",{className:"text-xs text-gray-400",children:["@",L.username]})]})]})}),l.jsx("td",{className:"px-6 py-4",children:l.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium ${L.role==="supervisor"?"bg-purple-50 text-purple-700":"bg-blue-50 text-blue-700"}`,children:[L.role==="supervisor"?l.jsx(bj,{className:"w-3 h-3"}):l.jsx(Sr,{className:"w-3 h-3"}),L.role==="supervisor"?"Supervisor":"Agente"]})}),l.jsx("td",{className:"px-6 py-4",children:L.department_name?l.jsx("span",{className:"text-sm px-2 py-1 rounded-full",style:{backgroundColor:`${L.department_color}20`,color:L.department_color},children:L.department_name}):l.jsx("span",{className:"text-xs text-gray-400",children:"Sin asignar"})}),l.jsx("td",{className:"px-6 py-4",children:l.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${L.status==="active"?"bg-green-50 text-green-700":"bg-gray-100 text-gray-500"}`,children:L.status==="active"?"Activo":"Inactivo"})}),l.jsx("td",{className:"px-6 py-4",children:l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx("code",{className:"text-xs text-gray-400 font-mono",children:y[L.id]?L.api_key:L.api_key?"":"-"}),L.api_key&&l.jsx("button",{onClick:()=>x(se=>({...se,[L.id]:!se[L.id]})),className:"p-1 text-gray-400 hover:text-gray-600",children:y[L.id]?l.jsx(UN,{className:"w-3 h-3"}):l.jsx(qN,{className:"w-3 h-3"})})]})}),l.jsx("td",{className:"px-6 py-4",children:l.jsx("span",{className:"text-xs text-gray-400",children:L.last_login?new Date(L.last_login).toLocaleString("es-CL"):"Nunca"})}),l.jsx("td",{className:"px-6 py-4 text-right",children:l.jsxs("div",{className:"flex items-center justify-end gap-1",children:[l.jsx("button",{onClick:()=>k(L),className:"p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg",title:"Editar",children:l.jsx(ib,{className:"w-4 h-4"})}),l.jsx("button",{onClick:()=>M(L),className:"p-2 text-gray-400 hover:text-yellow-600 hover:bg-yellow-50 rounded-lg",title:"Regenerar API Key",children:l.jsx(KN,{className:"w-4 h-4"})}),L.status==="active"&&l.jsx("button",{onClick:()=>D(L),className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg",title:"Desactivar",children:l.jsx(Dh,{className:"w-4 h-4"})})]})})]},L.id)),!t.length&&l.jsx("tr",{children:l.jsx("td",{colSpan:"7",className:"text-center py-12 text-gray-400",children:"No hay agentes. Crea el primero."})})]})]})}),f&&l.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:l.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md p-6",children:[l.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-4",children:p?"Editar Agente":"Nuevo Agente"}),j&&l.jsx("div",{className:"bg-red-50 text-red-600 px-4 py-2 rounded-lg text-sm mb-4",children:j}),l.jsxs("form",{onSubmit:w,className:"space-y-4",children:[!p&&l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Username"}),l.jsx("input",{type:"text",value:b.username,onChange:L=>S({...b,username:L.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",required:!0,minLength:3})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:p?"Nueva Contrasena (dejar vacio para no cambiar)":"Contrasena"}),l.jsx("input",{type:"password",value:b.password,onChange:L=>S({...b,password:L.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",required:!p,minLength:6})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre completo"}),l.jsx("input",{type:"text",value:b.name,onChange:L=>S({...b,name:L.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email (opcional)"}),l.jsx("input",{type:"email",value:b.email,onChange:L=>S({...b,email:L.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm"})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Rol"}),l.jsxs("select",{value:b.role,onChange:L=>S({...b,role:L.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",children:[l.jsx("option",{value:"agent",children:"Agente"}),l.jsx("option",{value:"supervisor",children:"Supervisor"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Departamento"}),l.jsxs("select",{value:b.departmentId,onChange:L=>S({...b,departmentId:L.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",children:[l.jsx("option",{value:"",children:"Sin asignar"}),s.filter(L=>L.active).map(L=>l.jsx("option",{value:L.id,children:L.display_name},L.id))]})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Color avatar"}),l.jsx("div",{className:"flex gap-2",children:V.map(L=>l.jsx("button",{type:"button",onClick:()=>S({...b,avatarColor:L}),className:`w-8 h-8 rounded-full transition ${b.avatarColor===L?"ring-2 ring-offset-2 ring-gray-400":""}`,style:{backgroundColor:L}},L))})]}),l.jsxs("div",{className:"flex gap-3 pt-2",children:[l.jsx("button",{type:"button",onClick:()=>m(!1),className:"flex-1 px-4 py-2.5 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition",children:"Cancelar"}),l.jsx("button",{type:"submit",disabled:N,className:"flex-1 px-4 py-2.5 bg-green-600 hover:bg-green-700 text-white rounded-lg transition disabled:opacity-50",children:N?"Guardando...":p?"Guardar":"Crear"})]})]})]})})]})}const rc=()=>{const t=Ht.getState().token;return{"Content-Type":"application/json",...t?{Authorization:`Bearer ${t}`}:{}}};function NA(){const[t,a]=_.useState([]),[s,i]=_.useState(!0),[c,u]=_.useState(!1),[f,m]=_.useState(null),[p,g]=_.useState({name:"",displayName:"",icon:"MessageSquare",color:"#6f42c1",autoAssignIntents:""}),[y,x]=_.useState(""),[b,S]=_.useState(!1),j=async()=>{try{const D=await(await fetch("/api/departments",{headers:rc()})).json();D.ok&&a(D.departments)}catch(w){console.error("Error loading departments:",w)}finally{i(!1)}};_.useEffect(()=>{j()},[]);const A=()=>{m(null),g({name:"",displayName:"",icon:"MessageSquare",color:"#6f42c1",autoAssignIntents:""}),x(""),u(!0)},N=w=>{m(w);const D=w.auto_assign_intents,M=Array.isArray(D)?D.join(", "):typeof D=="string"?JSON.parse(D||"[]").join(", "):"";g({name:w.name,displayName:w.display_name,icon:w.icon||"MessageSquare",color:w.color||"#6f42c1",autoAssignIntents:M}),x(""),u(!0)},E=async w=>{w.preventDefault(),x(""),S(!0);try{const D=p.autoAssignIntents.split(",").map(M=>M.trim().toLowerCase()).filter(Boolean);if(f){const V=await(await fetch(`/api/departments/${f.id}`,{method:"PUT",headers:rc(),body:JSON.stringify({displayName:p.displayName,icon:p.icon,color:p.color,autoAssignIntents:D})})).json();if(!V.ok)throw new Error(V.error)}else{const V=await(await fetch("/api/departments",{method:"POST",headers:rc(),body:JSON.stringify({name:p.name.toLowerCase().replace(/\s+/g,"_"),displayName:p.displayName,icon:p.icon,color:p.color,autoAssignIntents:D})})).json();if(!V.ok)throw new Error(V.error)}u(!1),j()}catch(D){x(D.message)}finally{S(!1)}},R=async w=>{if(confirm(`Desactivar departamento "${w.display_name}"?`))try{const M=await(await fetch(`/api/departments/${w.id}`,{method:"DELETE",headers:rc()})).json();if(!M.ok)throw new Error(M.error);j()}catch(D){alert("Error: "+D.message)}},C=["#28a745","#17a2b8","#ffc107","#6f42c1","#dc3545","#fd7e14","#20c997","#6610f2","#e83e8c","#007bff"],k=["MessageSquare","ShoppingCart","Wrench","Package","Phone","Mail","Star","Heart","Zap","Globe"];return s?l.jsx("div",{className:"p-8 flex justify-center",children:l.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-green-500 border-t-transparent rounded-full"})}):l.jsxs("div",{className:"p-6",children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Departamentos"}),l.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Organiza los agentes por area"})]}),l.jsxs("button",{onClick:A,className:"flex items-center gap-2 bg-green-600 hover:bg-green-700 text-white px-4 py-2.5 rounded-lg transition font-medium",children:[l.jsx(sb,{className:"w-4 h-4"})," Nuevo Departamento"]})]}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map(w=>{const D=Array.isArray(w.auto_assign_intents)?w.auto_assign_intents:JSON.parse(w.auto_assign_intents||"[]");return l.jsxs("div",{className:`bg-white rounded-xl border-2 p-5 ${w.active?"border-gray-200":"border-gray-100 opacity-50"}`,children:[l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center",style:{backgroundColor:`${w.color}20`},children:l.jsx("span",{className:"text-lg",style:{color:w.color},children:w.icon==="ShoppingCart"?"":w.icon==="Wrench"?"":w.icon==="Package"?"":""})}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-semibold text-gray-900",children:w.display_name}),l.jsxs("p",{className:"text-xs text-gray-400",children:["@",w.name]})]})]}),l.jsxs("div",{className:"flex gap-1",children:[l.jsx("button",{onClick:()=>N(w),className:"p-1.5 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg",children:l.jsx(ib,{className:"w-4 h-4"})}),w.name!=="general"&&w.active&&l.jsx("button",{onClick:()=>R(w),className:"p-1.5 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg",children:l.jsx(Dh,{className:"w-4 h-4"})})]})]}),l.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[l.jsxs("span",{className:"text-xs text-gray-500",children:[w.agent_count||0," agentes"]}),l.jsx("span",{className:"w-1 h-1 bg-gray-300 rounded-full"}),l.jsx("span",{className:`text-xs ${w.active?"text-green-600":"text-gray-400"}`,children:w.active?"Activo":"Inactivo"})]}),D.length>0&&l.jsxs("div",{children:[l.jsxs("p",{className:"text-xs text-gray-400 mb-1.5 flex items-center gap-1",children:[l.jsx(Sj,{className:"w-3 h-3"})," Intents auto-asignados:"]}),l.jsx("div",{className:"flex flex-wrap gap-1",children:D.map((M,V)=>l.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full bg-gray-100 text-gray-600",children:M},V))})]})]},w.id)})}),c&&l.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:l.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md p-6",children:[l.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-4",children:f?"Editar Departamento":"Nuevo Departamento"}),y&&l.jsx("div",{className:"bg-red-50 text-red-600 px-4 py-2 rounded-lg text-sm mb-4",children:y}),l.jsxs("form",{onSubmit:E,className:"space-y-4",children:[!f&&l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Identificador (slug)"}),l.jsx("input",{type:"text",value:p.name,onChange:w=>g({...p,name:w.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",required:!0,placeholder:"ej: ventas, soporte"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre visible"}),l.jsx("input",{type:"text",value:p.displayName,onChange:w=>g({...p,displayName:w.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",required:!0,placeholder:"ej: Ventas, Soporte Tecnico"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Color"}),l.jsx("div",{className:"flex gap-2",children:C.map(w=>l.jsx("button",{type:"button",onClick:()=>g({...p,color:w}),className:`w-8 h-8 rounded-full transition ${p.color===w?"ring-2 ring-offset-2 ring-gray-400":""}`,style:{backgroundColor:w}},w))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Icono"}),l.jsx("select",{value:p.icon,onChange:w=>g({...p,icon:w.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",children:k.map(w=>l.jsx("option",{value:w,children:w},w))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Intents para auto-asignacion"}),l.jsx("input",{type:"text",value:p.autoAssignIntents,onChange:w=>g({...p,autoAssignIntents:w.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",placeholder:"ventas, comprar, precio (separados por coma)"}),l.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Cuando el chatbot detecta estos intents, asigna automaticamente a este departamento."})]}),l.jsxs("div",{className:"flex gap-3 pt-2",children:[l.jsx("button",{type:"button",onClick:()=>u(!1),className:"flex-1 px-4 py-2.5 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition",children:"Cancelar"}),l.jsx("button",{type:"submit",disabled:b,className:"flex-1 px-4 py-2.5 bg-green-600 hover:bg-green-700 text-white rounded-lg transition disabled:opacity-50",children:b?"Guardando...":f?"Guardar":"Crear"})]})]})]})})]})}function jA({children:t}){return Ht(s=>s.isAuthenticated)?t:l.jsx(bc,{to:"/login",replace:!0})}function Xa({children:t}){return Ht(s=>s.agent)?.role!=="supervisor"?l.jsx(bc,{to:"/dashboard",replace:!0}):t}function EA(){return l.jsxs(DS,{children:[l.jsx(_t,{path:"/login",element:l.jsx(zj,{})}),l.jsxs(_t,{path:"/",element:l.jsx(jA,{children:l.jsx(Rj,{})}),children:[l.jsx(_t,{index:!0,element:l.jsx(bc,{to:"/dashboard",replace:!0})}),l.jsx(_t,{path:"dashboard",element:l.jsx(CE,{})}),l.jsx(_t,{path:"conversations",element:l.jsx(T_,{})}),l.jsx(_t,{path:"agents",element:l.jsx(Xa,{children:l.jsx(SA,{})})}),l.jsx(_t,{path:"departments",element:l.jsx(Xa,{children:l.jsx(NA,{})})}),l.jsx(_t,{path:"flows",element:l.jsx(Xa,{children:l.jsx(U_,{})})}),l.jsx(_t,{path:"flows/builder/:id?",element:l.jsx(Xa,{children:l.jsx(sA,{})})}),l.jsx(_t,{path:"logs",element:l.jsx(Xa,{children:l.jsx(lA,{})})}),l.jsx(_t,{path:"leads",element:l.jsx(Xa,{children:l.jsx(mA,{})})}),l.jsx(_t,{path:"analytics",element:l.jsx(Xa,{children:l.jsx(vA,{})})}),l.jsx(_t,{path:"monitor",element:l.jsx(Xa,{children:l.jsx(wA,{})})})]}),l.jsx(_t,{path:"*",element:l.jsx(bc,{to:"/dashboard",replace:!0})})]})}Rw.createRoot(document.getElementById("root")).render(l.jsx(br.StrictMode,{children:l.jsx(sN,{children:l.jsx(EA,{})})}));
